(this["webpackJsonplb-demo"]=this["webpackJsonplb-demo"]||[]).push([[0],Array(23).concat([function(e,t,n){"use strict";n.r(t),n.d(t,"toolStyleConverter",(function(){return f})),n.d(t,"PerspectiveShiftUtils",(function(){return g})),n.d(t,"PointCloudUtils",(function(){return b})),n.d(t,"MatrixUtils",(function(){return x})),n.d(t,"EPerspectiveView",(function(){return p})),n.d(t,"ImgConversionUtils",(function(){return L})),n.d(t,"i18n",(function(){return i.a}));var i=n(67),a=n(559),r={ConfirmTo:"Confirm To ",TextInput:"Text Input",NoAttribute:"No Attribute",Save:"Save",Undo:"Undo",Redo:"Redo",Rotate:"Rotate",Style:"Style",Adjust:"Adjust",BorderThickness:"Border Thickness",Color:"Color",BorderOpacity:"Border Opacity",FillOpacity:"Fill Opacity",Saturation:"Saturation",Contrast:"Contrast",Exposure:"Exposure",ScreenRatio:"Screen Ratio",OriginalScale:"Original Scale",CopyThePrevious:"Copy Prev",ClearLabel:"Clear",SetAsInvalid:"Set As Invalid",SetAsValid:"Set As Valid",Confirm:"Confirm",Cancel:"Cancel",ItemsOfThisPage:"Items Of This Page",Hotkeys:"Hotkeys",AnnotateRect:"Annotate Rect",AnnotateInvalidRect:"Annotate Invalid Rect",SelectRect:"Select Rect",RightClick:"Right Click",ToggleRectEffectiveness:"Toggle Rect Validity",ToggleEffectiveness:"Toggle Validity",DeleteRect:"Delete Rect",SelectAndDoubleClick:"Select And Double Click",Scale:"Scale",Fullscreen:"Fullscreen",PreviousImage:"Previous",PreviousFile:"Previous",NextImage:"Next",NextFile:"Next",PreviousFolder:"Previous Folder",NextFolder:"Next Folder",Drag:"Drag",ToggleSelected:"Toggle Selected",ToggleSelectedReverse:"Toggle Selected Reverse",HideGraphics:"Hide Graphics",ToggleLineParticularity:"Toggle Line Particularity",ToSide:"To Line",SpecifiedAttributesOnly:"Specified Attributes Only",Number:"Number",Press:"Press",ToOriginalStep:"To Original",HorizontalOrVertical:"Horizontal/Vertical",AnnotateInvalidLine:"Annotate Invalid Line",AnnotateLine:"Annotate Line",SelectLine:"Select Line",ToggleLineEffectiveness:"Toggle Line Validity",DeleteLine:"Delete Line",ContinueToLabel:"Continue To Label",Select:"Select",InsertPoint:"Insert Point",ClickOnLine:"Click On Line",DeletePoint:"Delete Point",DblClickOnPoint:"Double Click On Point",StopAdsorption:"Stop Adsorption",PreviousLine:"Previous Line",NextLine:"Next Line",SelectPoint:"Select Point",AnnotateInvalidPoint:"Annotate Invalid Point",AnnotatePoint:"Annotate Point",AnnotatePolygon:"Annotate Polygon",SelectPolygon:"Select Polygon",AnnotateInvalidPolygon:"Annotate Invalid Polygon",TogglePolygonEffectiveness:"Toggle Polygon Validity",DeletePolygon:"Delete Polygon",TogglePointParticularity:"Toggle Point Particularity",CropOverlapArea:"Crop Overlap Area",SegmentationRecognition:"Segmentation Recognition",SwitchPattern:"Switch Pattern",Tagging:"Tagging",Hide:"Hide ",HideDrawnAnnotation:"Hidden Drawn Annotation",Blue:"Blue",Cyan:"Cyan",Green:"Green",Yellow:"Yellow",Pink:"Pink",Steps:"Steps",Export:"Export",NextStep:"Next Step",StepNotFinishedNotify:"There are unannotated files in the current step , please finish before the next step",curItems:"{{current}}/{{total}} Items",TurnPage:"Turn Page",Switch:"Switch",EmptyTextInput:"Empty Text Input",RegularExpIncorrectly:"Regular expression is incorrectly",NoConfiguration:"Missing Configuration",ClearThisOption:"Clear This Option",RestoreImageAttributes:"Restore Image Attributes",rectTool:"RectTool",tagTool:"TagTool",polygonTool:"PolygonTool",lineTool:"LineTool",pointTool:"PointTool",textTool:"TextTool",Speed:"Speed",PlayPause:"Play / Pause",FastForward:"Fast Forward",Rewind:"Rewind",videoInvalidAndSkip:"Video invalid, please skip",imageInvalidAndSkip:"Image invalid, please skip",videoErrorAndReload:"Failed to load video, please reload",imageErrorAndReload:"Failed to load image, please reload",orMaskAsInvalid:" or mask it as invalid",ClickAnotherPolygon:"Click another polygon",PolygonsToBeCombinedNeedToBeSelected:"Polygons to be combined need to be selected",CurveModeDoesNotSupportCutting:"Curve mode does not support cutting",CombineSuccess:"Combine success",CombiningFailedNotify:"Combining failed. Please check whether two polygons intersect or whether polygon combining forms a leak",CombineOverlapArea:"Combine Overlap Area",NoDependency:"This image does not need to be labeled",TextCheckNumberOnly:"Please enter the number",TextCheckEnglishOnly:"Please enter English",TextCheckCustomFormat:"Please enter data in custom format",FramingOfObjectToBeDivided:"Please frame the object to be divided first",ClickOnTarget:"Please click on target object",SplittingAlgorithmPrediction:"Splitting algorithm prediction in progress...","2DView":"2DView","3DView":"3DView",TopView:"TopView",SideView:"SideView",BackView:"BackView",ShowArrows:"Show Arrows",Length:"Length",Width:"Width",Height:"Height",Rotation_y:"Rotation_y",PointCount:"Point Count",Invalid:"Invalid",Tag:"Tag",Attribute:"Attribute",SubAttribute:"SubAttribute",PleaseSelect:"Please Select",CopyEmptyInPointCloud:"The copy content is empty, please select the corresponding point cloud data",PasteEmptyInPointCloud:"Please copy the pointCloud data before pasting",HasDuplicateID:"Duplicate ID exists, copy failed",LowerLimitPointsNumInBox:"The number of points in the box must not be less than {{num}}",PointThickness:"Point Thickness",RotateAroundCenterPoint:"Rotate Around Center Point",PointCloudViewTranslate:"PointCloudView Translation",TopViewTranslate:"TopView Translation",ChangePointCloudValid:"Change PointCloud Valid",CopyBox:"Copy Box",PasteBox:"Paste Box",RotateLeft:"Rotate Left",RotateRight:"Rotate Right",NextBox:"Next Box",PreviousBox:"Previous Box",Rotate180:"Rotate 180\xb0",CopyPrevPage:"Copy Previous Page",ChangeBoxValid:"Change Box's Valid",MultiSelect:"Multi Select",SelectAllBox:"Select All Boxes",GeneralOperation:"General Operation",RectPattern:"Rect Pattern",DragOperation:"Drag",SelectedStatus:"Selected",updateValidFromValidToInValid:"Confirm update as invalid page\uff1f",updateValidFromInValidToValid:"Confirm update as valid page\uff1f"},o={TextInput:"\u6587\u672c\u8f93\u5165",NoAttribute:"\u65e0\u5c5e\u6027",Save:"\u4fdd\u5b58",Undo:"\u64a4\u9500",Redo:"\u91cd\u505a",Rotate:"\u65cb\u8f6c",Style:"\u6837\u5f0f",Adjust:"\u56fe\u7247\u8c03\u6574",BorderThickness:"\u8fb9\u6846\u7c97\u7ec6",Color:"\u989c\u8272",BorderOpacity:"\u8fb9\u6846\u900f\u660e\u5ea6",FillOpacity:"\u586b\u5145\u900f\u660e\u5ea6",Saturation:"\u9971\u548c\u5ea6",Contrast:"\u5bf9\u6bd4\u5ea6",Exposure:"\u66dd\u5149\u5ea6",ScreenRatio:"\u753b\u9762\u5360\u6bd4",OriginalScale:"\u6309\u539f\u56fe\u6bd4\u4f8b\u663e\u793a",CopyThePrevious:"\u590d\u5236\u4e0a\u5f20",ClearLabel:"\u6e05\u7a7a\u6807\u6ce8",SetAsInvalid:"\u6807\u4e3a\u65e0\u6548",SetAsValid:"\u53d6\u6d88\u65e0\u6548",Confirm:"\u786e\u8ba4",Cancel:"\u53d6\u6d88",ItemsOfThisPage:"\u672c\u9875\u4ef6\u6570",Hotkeys:"\u5feb\u6377\u952e",AnnotateRect:"\u62c9\u6846",AnnotateInvalidRect:"\u62c9\u65e0\u6548\u6846",SelectRect:"\u9009\u4e2d\u6846",RightClick:"\u53f3\u51fb",ToggleRectEffectiveness:"\u5207\u6362\u6846\u662f\u5426\u6709\u6548",ToggleEffectiveness:"\u662f\u5426\u6807\u4e3a\u65e0\u6548",DeleteRect:"\u5220\u9664\u6846",SelectAndDoubleClick:"\u9009\u4e2d\u53cc\u51fb",Scale:"\u7f29\u653e",Fullscreen:"\u5168\u5c4f",PreviousImage:"\u4e0a\u4e00\u5f20",PreviousFile:"\u4e0a\u4e00\u4e2a",NextImage:"\u4e0b\u4e00\u5f20",NextFile:"\u4e0b\u4e00\u4e2a",PreviousFolder:"\u4e0a\u4e00\u6587\u4ef6\u5939",NextFolder:"\u4e0b\u4e00\u6587\u4ef6\u5939",Drag:"\u62d6\u52a8\u56fe\u7247",ToggleSelected:"\u5207\u6362\u9009\u4e2d",ToggleSelectedReverse:"\u9006\u5e8f\u5207\u6362\u9009\u4e2d",HideGraphics:"\u9690\u85cf\u56fe\u5f62",ToggleLineParticularity:"\u6362\u7279\u6b8a\u8fb9",ToSide:"\u5bf9\u8fb9",SpecifiedAttributesOnly:"\u4ec5\u770b\u6307\u5b9a\u5c5e\u6027",Number:"\u6570\u5b57",Press:"\u957f\u6309",ToOriginalStep:"\u4ec5\u539f\u56fe",HorizontalOrVertical:"\u6807\u6c34\u5e73/\u5782\u76f4\u7ebf",AnnotateInvalidLine:"\u6807\u65e0\u6548\u7ebf",AnnotateLine:"\u6807\u7ebf",SelectLine:"\u9009\u4e2d\u7ebf",ToggleLineEffectiveness:"\u5207\u6362\u7ebf\u662f\u5426\u6709\u6548",DeleteLine:"\u5220\u9664\u7ebf",ContinueToLabel:"\u7eed\u6807",Select:"\u9009\u4e2d",InsertPoint:"\u63d2\u5165\u70b9",ClickOnLine:"\u5bf9\u7ebf\u5355\u51fb",DeletePoint:"\u5220\u9664\u70b9",DblClickOnPoint:"\u5bf9\u70b9\u53cc\u51fb",StopAdsorption:"\u6682\u505c\u5438\u9644",PreviousLine:"\u4e0a\u6761\u7ebf",NextLine:"\u4e0b\u6761\u7ebf",SelectPoint:"\u9009\u4e2d\u70b9",AnnotateInvalidPoint:"\u6807\u65e0\u6548\u70b9",AnnotatePoint:"\u6807\u70b9",AnnotatePolygon:"\u6807\u591a\u8fb9\u5f62",SelectPolygon:"\u9009\u4e2d\u591a\u8fb9\u5f62",AnnotateInvalidPolygon:"\u6807\u65e0\u6548\u591a\u8fb9\u5f62",TogglePolygonEffectiveness:"\u5207\u6362\u591a\u8fb9\u5f62\u662f\u5426\u6709\u6548",DeletePolygon:"\u5220\u9664\u591a\u8fb9\u5f62",TogglePointParticularity:"\u6362\u7279\u6b8a\u70b9",CropOverlapArea:"\u88c1\u526a\u91cd\u53e0\u533a\u57df",SegmentationRecognition:"\u5206\u5272\u8f85\u52a9",SwitchPattern:"\u5207\u6362\u7ed8\u5236\u5f62\u5f0f",Tagging:"\u6253\u6807\u7b7e",Hide:"\u6253\u6807\u7b7e",HideDrawnAnnotation:"\u6807\u6ce8\u9690\u85cf\u4e2d",Blue:"\u84dd",Cyan:"\u9752",Green:"\u7eff",Yellow:"\u9ec4",Pink:"\u7c89",Steps:"\u6807\u6ce8\u6b65\u9aa4",Export:"\u5bfc\u51fa",NextStep:"\u4e0b\u4e00\u6b65",StepNotFinishedNotify:"\u5f53\u524d\u6b65\u9aa4\u5b58\u5728\u4e3a\u672a\u6807\u6ce8\u8fc7\u7684\u56fe\u7247\uff0c\u8bf7\u6807\u6ce8\u5b8c\u6210\u518d\u70b9\u51fb\u4e0b\u4e00\u6b65",curItems:"\u7b2c{{current}}/{{total}}\u5206\u9875",TurnPage:"\u7ffb\u9875",Switch:"\u5207\u6362",EmptyTextInput:"\u6e05\u7a7a\u6587\u672c\u8f93\u5165",RegularExpIncorrectly:"\u6b63\u5219\u8868\u8fbe\u5f0f\u586b\u5199\u9519\u8bef",NoConfiguration:"\u6682\u65e0\u4fe1\u606f\u914d\u7f6e",ClearThisOption:"\u6e05\u7a7a\u6b64\u9009\u9879",RestoreImageAttributes:"\u8fd8\u539f\u56fe\u7247\u5c5e\u6027",ConfirmTo:"\u786e\u8ba4",rectTool:"\u6807\u7b7e",tagTool:"\u6807\u70b9",polygonTool:"\u591a\u8fb9\u5f62",lineTool:"\u7ebf\u6761",pointTool:"\u6807\u70b9",textTool:"\u6587\u672c",Speed:"\u500d\u901f",PlayPause:"\u64ad\u653e/\u6682\u505c",FastForward:"\u5feb\u8fdb",Rewind:"\u5feb\u9000",videoInvalidAndSkip:"\u65e0\u6548\u89c6\u9891\uff0c\u8bf7\u8df3\u8fc7",imageInvalidAndSkip:"\u65e0\u6548\u56fe\u7247\uff0c\u8bf7\u8df3\u8fc7",videoErrorAndReload:"\u89c6\u9891\u52a0\u8f7d\u5931\u8d25, \u8bf7\u91cd\u65b0\u52a0\u8f7d",imageErrorAndReload:"\u56fe\u7247\u52a0\u8f7d\u5931\u8d25, \u8bf7\u91cd\u65b0\u52a0\u8f7d",orMaskAsInvalid:" \u6216 \u5c06\u5176\u6807\u4e3a\u65e0\u6548",ClickAnotherPolygon:"\u8bf7\u70b9\u51fb\u5e0c\u671b\u5408\u5e76\u7684\u591a\u8fb9\u5f62",PolygonsToBeCombinedNeedToBeSelected:"\u9700\u8981\u9009\u4e2d\u9700\u8981\u5408\u5e76\u7684\u591a\u8fb9\u5f62",CurveModeDoesNotSupportCutting:"\u66f2\u7ebf\u6a21\u5f0f\u6682\u4e0d\u652f\u6301\u88c1\u526a",CombineSuccess:"\u5408\u5e76\u6210\u529f",CombiningFailedNotify:"\u5408\u5e76\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u4e24\u4e2a\u591a\u8fb9\u5f62\u662f\u5426\u6709\u76f8\u4ea4\uff0c\u6216\u591a\u8fb9\u5f62\u5408\u5e76\u662f\u5426\u5f62\u6210\u6f0f\u7a7a",CombineOverlapArea:"\u5408\u5e76\u91cd\u53e0\u533a\u57df",NoDependency:"\u8be5\u56fe\u7247\u65e0\u9700\u6807\u6ce8",TextCheckNumberOnly:"\u8bf7\u6309\u4ec5\u6570\u5b57\u7684\u683c\u5f0f\u8f93\u5165",TextCheckEnglishOnly:"\u8bf7\u6309\u4ec5\u82f1\u6587\u7684\u683c\u5f0f\u8f93\u5165",TextCheckCustomFormat:"\u8bf7\u6309\u8981\u6c42\u7684\u683c\u5f0f\u8f93\u5165",FramingOfObjectToBeDivided:"\u8bf7\u5148\u6846\u51fa\u9700\u5206\u5272\u7684\u7269\u4f53",ClickOnTarget:"\u8bf7\u5355\u51fb\u76ee\u6807\u7269\u4f53",SplittingAlgorithmPrediction:"\u5206\u5272\u7b97\u6cd5\u9884\u6d4b\u4e2d...","2DView":"2D\u89c6\u56fe","3DView":"3D\u89c6\u56fe",TopView:"\u4fef\u89c6\u56fe",SideView:"\u4fa7\u89c6\u56fe",BackView:"\u80cc\u89c6\u56fe",ShowArrows:"\u663e\u793a\u7bad\u5934",Length:"\u957f",Width:"\u5bbd",Height:"\u9ad8",Rotation_y:"\u671d\u5411\u89d2",PointCount:"\u70b9\u6570",Invalid:"\u65e0\u6548",Tag:"\u6807\u7b7e",Attribute:"\u4e3b\u5c5e\u6027",SubAttribute:"\u526f\u5c5e\u6027",PleaseSelect:"\u8bf7\u9009\u62e9",CopyEmptyInPointCloud:"\u590d\u5236\u5185\u5bb9\u4e3a\u7a7a\uff0c\u8bf7\u9009\u62e9\u5bf9\u5e94\u7684\u70b9\u4e91\u6570\u636e",PasteEmptyInPointCloud:"\u8bf7\u5148\u590d\u5236\u9700\u8981\u7684\u70b9\u4e91\u6570\u636e\u518d\u8fdb\u884c\u7c98\u8d34",HasDuplicateID:"\u5b58\u5728\u91cd\u590dID,\u590d\u5236\u5931\u8d25",LowerLimitPointsNumInBox:"\u6846\u4f53\u5185\u70b9\u6570\u4e0d\u5141\u8bb8\u4f4e\u4e8e {{num}} \u4e2a",PointThickness:"\u70b9\u7684\u663e\u793a\u7c97\u7ec6",RotateAroundCenterPoint:"\u7ed5\u4e2d\u5fc3\u70b9\u65cb\u8f6c\u753b\u9762",PointCloudViewTranslate:"\u70b9\u4e91\u5e73\u79fb",TopViewTranslate:"\u4fef\u89c6\u56fe\u5e73\u79fb",ChangePointCloudValid:"\u5207\u6362\u70b9\u4e91\u6709\u6548\u6027",CopyBox:"\u590d\u5236\u6846",PasteBox:"\u7c98\u8d34\u6846",RotateLeft:"\u5411\u5de6\u65cb\u8f6c\u5fae\u8c03",RotateRight:"\u5411\u53f3\u65cb\u8f6c\u5fae\u8c03",PreviousBox:"\u4e0a\u4e00\u6846",NextBox:"\u4e0b\u4e00\u6846",Rotate180:"\u65cb\u8f6c180\xb0",CopyPrevPage:"\u590d\u5236\u4e0a\u4e00\u9875",ChangeBoxValid:"\u5207\u6362\u6807\u6ce8\u6846\u6709\u6548\u6027",MultiSelect:"\u591a\u9009",SelectAllBox:"\u5168\u9009",GeneralOperation:"\u901a\u7528",RectPattern:"\u62c9\u6846\u6a21\u5f0f",DragOperation:"\u62d6\u52a8",SelectedStatus:"\u9009\u4e2d\u65f6",updateValidFromValidToInValid:"\u662f\u5426\u786e\u8ba4\u6807\u4e3a\u65e0\u6548\u6587\u4ef6\uff1f",updateValidFromInValidToValid:"\u662f\u5426\u786e\u8ba4\u53d6\u6d88\u65e0\u6548\u6587\u4ef6\uff1f"};i.a.language||i.a.use(a.a).init({lng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}}),i.a.addResourceBundle("en","translation",r,!0),i.a.addResourceBundle("cn","translation",o,!0);var c=n(7),l=n(8),s=Object(l.a)((function e(){Object(c.a)(this,e)})),u=s;u.replaceAFromRGBA=function(e,t){return e.split(" ").join("").replace(/,[0-9]+([.]{1}[0-9]+){0,1}\)/,",".concat(t.toFixed(2),")"))},u.getToolStrokeAndFill=function(e,t){var n=t.hover,i=void 0!==n&&n,a=t.selected,r=void 0!==a&&a,o=t.borderOpacity,c=void 0===o?1:o,l=t.fillOpacity,u=void 0===l?1:l,d=t.commonOpacity,h=void 0===d?.8:d;return r||i?{stroke:s.replaceAFromRGBA(e,c),fill:s.replaceAFromRGBA(e,u)}:{stroke:s.replaceAFromRGBA(e,c*h),fill:s.replaceAFromRGBA(e,u*h)}},u.getAttributeIndex=function(e,t){try{return t.findIndex((function(t){return t.value===e}))}catch(n){return-1}};var d=["rgba(102, 111, 255, 1)","rgba(102, 230, 255, 1)","rgba(191, 255, 102, 1)","rgba(255, 230, 102, 1)","rgba(230, 102, 255, 1)"],h=["rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"],f=new(function(){function e(){Object(c.a)(this,e),this._defaultColors=d,this._attributeColors=h}return Object(l.a)(e,[{key:"defaultColors",get:function(){return this._defaultColors}},{key:"attributeColors",get:function(){return this._attributeColors}},{key:"getColorFromConfig",value:function(e,t,n,i){var a;if("[object Object]"!==Object.prototype.toString.call(t))throw"Config must be Object";if("[object Object]"!==Object.prototype.toString.call(e))throw"Result must be Object";var r=n.borderOpacity,o=void 0===r?1:r,c=n.fillOpacity,l=void 0===c?.6:c,s=n.colorIndex,d=void 0===s?0:s;i||(i={});var h=null==(a=null==e?void 0:e.valid)||a,f=i,g=f.multiColorIndex,v=void 0===g?-1:g,b={selected:f.selected,hover:f.hover,borderOpacity:o,fillOpacity:l},p=this.defaultColors;if((!0===(null==t?void 0:t.attributeConfigurable)||v>-1)&&(p=this.attributeColors),!1===h)return u.getToolStrokeAndFill("rgba(255, 51, 51, 1)",b);if(!0===(null==t?void 0:t.attributeConfigurable)){var m=u.getAttributeIndex(null==e?void 0:e.attribute,null==t?void 0:t.attributeList),y=p[m%p.length];return-1===m&&(y="rgba(204, 204, 204, 1)"),u.getToolStrokeAndFill(y,b)}return v>-1?u.getToolStrokeAndFill(p[v%p.length],b):u.getToolStrokeAndFill(p[d%p.length],b)}}]),e}()),g=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"translationMatrix",value:function(e,t,n){return[1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1]}},{key:"frontViewMatrix4",value:function(e){return this.translationMatrix(e,0,0)}},{key:"backViewMatrix4",value:function(e){return this.translationMatrix(-e,0,0)}},{key:"leftViewMatrix4",value:function(e){return this.translationMatrix(0,e,0)}},{key:"rightViewMatrix4",value:function(e){return this.translationMatrix(0,-e,0)}},{key:"topViewMatrix4",value:function(e){return this.translationMatrix(0,0,e)}},{key:"leftFrontTopViewMatrix4",value:function(e,t){var n=t.width/2,i=t.height/2,a=t.depth/2;return this.translationMatrix(n*e,i*e,a*e)}},{key:"rightBackTopViewMatrix4",value:function(e,t){var n=-t.width/2,i=-t.height/2,a=t.depth/2;return this.translationMatrix(n*e,i*e,a*e)}}]),e}(),v=n(16),b=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"genColorByCoord",value:function(e,t,n){return n<=0?[128,128,128]:n<5?[255,0,0]:n<10?[0,255,0]:[0,0,255]}},{key:"getStandardColorByCoord",value:function(e,t,n){return this.genColorByCoord(e,t,n).map((function(e){return e/255}))}},{key:"getBoxParamsFromResultList",value:function(e){var t,n,i=this.jsonParser(e);return null!=(n=null==(t=null==i?void 0:i.step_1)?void 0:t.result)?n:[]}},{key:"getPolygonListFromResultList",value:function(e){var t,n,i=this.jsonParser(e);return null!=(n=null==(t=null==i?void 0:i.step_1)?void 0:t.renderPolygon)?n:[]}},{key:"getFrontViewPolygon",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.width,o=e.height,c=e.depth;return[{x:n+r/2,y:i+o/2,z:a-c/2},{x:n+r/2,y:i+o/2,z:a+c/2},{x:n+r/2,y:i-o/2,z:a+c/2},{x:n+r/2,y:i-o/2,z:a-c/2},{x:n+r/2,y:i+o/2,z:a-c/2}]}},{key:"getBackViewPolygon",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.width,o=e.height,c=e.depth;return[{x:n-r/2,y:i-o/2,z:a-c/2},{x:n-r/2,y:i+o/2,z:a-c/2},{x:n-r/2,y:i+o/2,z:a+c/2},{x:n-r/2,y:i-o/2,z:a+c/2},{x:n-r/2,y:i-o/2,z:a-c/2}]}},{key:"getAllDirectionLine",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.width,o=e.height,c=e.depth;return[[{x:n+r/2,y:i-o/2,z:a-c/2},{x:n-r/2,y:i-o/2,z:a-c/2}],[{x:n+r/2,y:i+o/2,z:a-c/2},{x:n-r/2,y:i+o/2,z:a-c/2}],[{x:n+r/2,y:i-o/2,z:a+c/2},{x:n-r/2,y:i-o/2,z:a+c/2}],[{x:n+r/2,y:i+o/2,z:a+c/2},{x:n-r/2,y:i+o/2,z:a+c/2}]]}},{key:"getAllViewData",value:function(e){return[{type:"polygon",pointList:this.getFrontViewPolygon(e)},{type:"polygon",pointList:this.getBackViewPolygon(e)}].concat(Object(v.a)(this.getAllDirectionLine(e).map((function(e){return{type:"line",pointList:e}}))))}},{key:"transferBox2Kitti",value:function(e){return{height:e.depth,length:e.width,width:e.height,rotation_y:this.transferRotation2KittiRotation_y(e.rotation)}}},{key:"restrictAngleRange",value:function(e){var t=2*Math.PI,n=e%t;return n<0?t+n:n}},{key:"transferRotation2KittiRotation_y",value:function(e){if(e<0)return-e;var t=2*Math.PI-e;return t>Math.PI&&t<2*Math.PI?-1*e:2*Math.PI-e}}]),e}();b.jsonParser=function(e){try{return JSON.parse(e)}catch(t){return{}}};var p,m,y=function(e,t){return[].concat(Object(v.a)(e),Object(v.a)(t))},x=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"transferMatrix34FromKitti2Three",value:function(e){return[].concat(Object(v.a)(e.reduce(y,[])),[0,0,0,1])}},{key:"transferMatrix33FromKitti2Three",value:function(e){return[].concat(Object(v.a)(e.reduce((function(e,t){return[].concat(Object(v.a)(e),Object(v.a)(t)).concat([0])}),[])),[0,0,0,1])}}]),e}();(m=p||(p={})).Front="FRONT",m.Back="BACK",m.Left="LEFT",m.Right="RIGHT",m.Top="TOP",m.LFT="LEFT_FRONT_TOP",m.RBT="RIGHT_BACK_TOP";var C=n(22),w=[{colorId:0,hexString:"#000000",rgb:{r:0,g:0,b:0},hsl:{h:0,s:0,l:0},name:"Black"},{colorId:1,hexString:"#800000",rgb:{r:128,g:0,b:0},hsl:{h:0,s:100,l:25},name:"Maroon"},{colorId:2,hexString:"#008000",rgb:{r:0,g:128,b:0},hsl:{h:120,s:100,l:25},name:"Green"},{colorId:3,hexString:"#808000",rgb:{r:128,g:128,b:0},hsl:{h:60,s:100,l:25},name:"Olive"},{colorId:4,hexString:"#000080",rgb:{r:0,g:0,b:128},hsl:{h:240,s:100,l:25},name:"Navy"},{colorId:5,hexString:"#800080",rgb:{r:128,g:0,b:128},hsl:{h:300,s:100,l:25},name:"Purple"},{colorId:6,hexString:"#008080",rgb:{r:0,g:128,b:128},hsl:{h:180,s:100,l:25},name:"Teal"},{colorId:7,hexString:"#c0c0c0",rgb:{r:192,g:192,b:192},hsl:{h:0,s:0,l:75},name:"Silver"},{colorId:8,hexString:"#808080",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50},name:"Grey"},{colorId:9,hexString:"#ff0000",rgb:{r:255,g:0,b:0},hsl:{h:0,s:100,l:50},name:"Red"},{colorId:10,hexString:"#00ff00",rgb:{r:0,g:255,b:0},hsl:{h:120,s:100,l:50},name:"Lime"},{colorId:11,hexString:"#ffff00",rgb:{r:255,g:255,b:0},hsl:{h:60,s:100,l:50},name:"Yellow"},{colorId:12,hexString:"#0000ff",rgb:{r:0,g:0,b:255},hsl:{h:240,s:100,l:50},name:"Blue"},{colorId:13,hexString:"#ff00ff",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50},name:"Fuchsia"},{colorId:14,hexString:"#00ffff",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50},name:"Aqua"},{colorId:15,hexString:"#ffffff",rgb:{r:255,g:255,b:255},hsl:{h:0,s:0,l:100},name:"White"},{colorId:16,hexString:"#000000",rgb:{r:0,g:0,b:0},hsl:{h:0,s:0,l:0},name:"Grey0"},{colorId:17,hexString:"#00005f",rgb:{r:0,g:0,b:95},hsl:{h:240,s:100,l:18},name:"NavyBlue"},{colorId:18,hexString:"#000087",rgb:{r:0,g:0,b:135},hsl:{h:240,s:100,l:26},name:"DarkBlue"},{colorId:19,hexString:"#0000af",rgb:{r:0,g:0,b:175},hsl:{h:240,s:100,l:34},name:"Blue3"},{colorId:20,hexString:"#0000d7",rgb:{r:0,g:0,b:215},hsl:{h:240,s:100,l:42},name:"Blue3"},{colorId:21,hexString:"#0000ff",rgb:{r:0,g:0,b:255},hsl:{h:240,s:100,l:50},name:"Blue1"},{colorId:22,hexString:"#005f00",rgb:{r:0,g:95,b:0},hsl:{h:120,s:100,l:18},name:"DarkGreen"},{colorId:23,hexString:"#005f5f",rgb:{r:0,g:95,b:95},hsl:{h:180,s:100,l:18},name:"DeepSkyBlue4"},{colorId:24,hexString:"#005f87",rgb:{r:0,g:95,b:135},hsl:{h:197.777777777778,s:100,l:26},name:"DeepSkyBlue4"},{colorId:25,hexString:"#005faf",rgb:{r:0,g:95,b:175},hsl:{h:207.428571428571,s:100,l:34},name:"DeepSkyBlue4"},{colorId:26,hexString:"#005fd7",rgb:{r:0,g:95,b:215},hsl:{h:213.488372093023,s:100,l:42},name:"DodgerBlue3"},{colorId:27,hexString:"#005fff",rgb:{r:0,g:95,b:255},hsl:{h:217.647058823529,s:100,l:50},name:"DodgerBlue2"},{colorId:28,hexString:"#008700",rgb:{r:0,g:135,b:0},hsl:{h:120,s:100,l:26},name:"Green4"},{colorId:29,hexString:"#00875f",rgb:{r:0,g:135,b:95},hsl:{h:162.222222222222,s:100,l:26},name:"SpringGreen4"},{colorId:30,hexString:"#008787",rgb:{r:0,g:135,b:135},hsl:{h:180,s:100,l:26},name:"Turquoise4"},{colorId:31,hexString:"#0087af",rgb:{r:0,g:135,b:175},hsl:{h:193.714285714286,s:100,l:34},name:"DeepSkyBlue3"},{colorId:32,hexString:"#0087d7",rgb:{r:0,g:135,b:215},hsl:{h:202.325581395349,s:100,l:42},name:"DeepSkyBlue3"},{colorId:33,hexString:"#0087ff",rgb:{r:0,g:135,b:255},hsl:{h:208.235294117647,s:100,l:50},name:"DodgerBlue1"},{colorId:34,hexString:"#00af00",rgb:{r:0,g:175,b:0},hsl:{h:120,s:100,l:34},name:"Green3"},{colorId:35,hexString:"#00af5f",rgb:{r:0,g:175,b:95},hsl:{h:152.571428571429,s:100,l:34},name:"SpringGreen3"},{colorId:36,hexString:"#00af87",rgb:{r:0,g:175,b:135},hsl:{h:166.285714285714,s:100,l:34},name:"DarkCyan"},{colorId:37,hexString:"#00afaf",rgb:{r:0,g:175,b:175},hsl:{h:180,s:100,l:34},name:"LightSeaGreen"},{colorId:38,hexString:"#00afd7",rgb:{r:0,g:175,b:215},hsl:{h:191.162790697674,s:100,l:42},name:"DeepSkyBlue2"},{colorId:39,hexString:"#00afff",rgb:{r:0,g:175,b:255},hsl:{h:198.823529411765,s:100,l:50},name:"DeepSkyBlue1"},{colorId:40,hexString:"#00d700",rgb:{r:0,g:215,b:0},hsl:{h:120,s:100,l:42},name:"Green3"},{colorId:41,hexString:"#00d75f",rgb:{r:0,g:215,b:95},hsl:{h:146.511627906977,s:100,l:42},name:"SpringGreen3"},{colorId:42,hexString:"#00d787",rgb:{r:0,g:215,b:135},hsl:{h:157.674418604651,s:100,l:42},name:"SpringGreen2"},{colorId:43,hexString:"#00d7af",rgb:{r:0,g:215,b:175},hsl:{h:168.837209302326,s:100,l:42},name:"Cyan3"},{colorId:44,hexString:"#00d7d7",rgb:{r:0,g:215,b:215},hsl:{h:180,s:100,l:42},name:"DarkTurquoise"},{colorId:45,hexString:"#00d7ff",rgb:{r:0,g:215,b:255},hsl:{h:189.411764705882,s:100,l:50},name:"Turquoise2"},{colorId:46,hexString:"#00ff00",rgb:{r:0,g:255,b:0},hsl:{h:120,s:100,l:50},name:"Green1"},{colorId:47,hexString:"#00ff5f",rgb:{r:0,g:255,b:95},hsl:{h:142.352941176471,s:100,l:50},name:"SpringGreen2"},{colorId:48,hexString:"#00ff87",rgb:{r:0,g:255,b:135},hsl:{h:151.764705882353,s:100,l:50},name:"SpringGreen1"},{colorId:49,hexString:"#00ffaf",rgb:{r:0,g:255,b:175},hsl:{h:161.176470588235,s:100,l:50},name:"MediumSpringGreen"},{colorId:50,hexString:"#00ffd7",rgb:{r:0,g:255,b:215},hsl:{h:170.588235294118,s:100,l:50},name:"Cyan2"},{colorId:51,hexString:"#00ffff",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50},name:"Cyan1"},{colorId:52,hexString:"#5f0000",rgb:{r:95,g:0,b:0},hsl:{h:0,s:100,l:18},name:"DarkRed"},{colorId:53,hexString:"#5f005f",rgb:{r:95,g:0,b:95},hsl:{h:300,s:100,l:18},name:"DeepPink4"},{colorId:54,hexString:"#5f0087",rgb:{r:95,g:0,b:135},hsl:{h:282.222222222222,s:100,l:26},name:"Purple4"},{colorId:55,hexString:"#5f00af",rgb:{r:95,g:0,b:175},hsl:{h:272.571428571429,s:100,l:34},name:"Purple4"},{colorId:56,hexString:"#5f00d7",rgb:{r:95,g:0,b:215},hsl:{h:266.511627906977,s:100,l:42},name:"Purple3"},{colorId:57,hexString:"#5f00ff",rgb:{r:95,g:0,b:255},hsl:{h:262.352941176471,s:100,l:50},name:"BlueViolet"},{colorId:58,hexString:"#5f5f00",rgb:{r:95,g:95,b:0},hsl:{h:60,s:100,l:18},name:"Orange4"},{colorId:59,hexString:"#5f5f5f",rgb:{r:95,g:95,b:95},hsl:{h:0,s:0,l:37},name:"Grey37"},{colorId:60,hexString:"#5f5f87",rgb:{r:95,g:95,b:135},hsl:{h:240,s:17,l:45},name:"MediumPurple4"},{colorId:61,hexString:"#5f5faf",rgb:{r:95,g:95,b:175},hsl:{h:240,s:33,l:52},name:"SlateBlue3"},{colorId:62,hexString:"#5f5fd7",rgb:{r:95,g:95,b:215},hsl:{h:240,s:60,l:60},name:"SlateBlue3"},{colorId:63,hexString:"#5f5fff",rgb:{r:95,g:95,b:255},hsl:{h:240,s:100,l:68},name:"RoyalBlue1"},{colorId:64,hexString:"#5f8700",rgb:{r:95,g:135,b:0},hsl:{h:77.7777777777778,s:100,l:26},name:"Chartreuse4"},{colorId:65,hexString:"#5f875f",rgb:{r:95,g:135,b:95},hsl:{h:120,s:17,l:45},name:"DarkSeaGreen4"},{colorId:66,hexString:"#5f8787",rgb:{r:95,g:135,b:135},hsl:{h:180,s:17,l:45},name:"PaleTurquoise4"},{colorId:67,hexString:"#5f87af",rgb:{r:95,g:135,b:175},hsl:{h:210,s:33,l:52},name:"SteelBlue"},{colorId:68,hexString:"#5f87d7",rgb:{r:95,g:135,b:215},hsl:{h:220,s:60,l:60},name:"SteelBlue3"},{colorId:69,hexString:"#5f87ff",rgb:{r:95,g:135,b:255},hsl:{h:225,s:100,l:68},name:"CornflowerBlue"},{colorId:70,hexString:"#5faf00",rgb:{r:95,g:175,b:0},hsl:{h:87.4285714285714,s:100,l:34},name:"Chartreuse3"},{colorId:71,hexString:"#5faf5f",rgb:{r:95,g:175,b:95},hsl:{h:120,s:33,l:52},name:"DarkSeaGreen4"},{colorId:72,hexString:"#5faf87",rgb:{r:95,g:175,b:135},hsl:{h:150,s:33,l:52},name:"CadetBlue"},{colorId:73,hexString:"#5fafaf",rgb:{r:95,g:175,b:175},hsl:{h:180,s:33,l:52},name:"CadetBlue"},{colorId:74,hexString:"#5fafd7",rgb:{r:95,g:175,b:215},hsl:{h:200,s:60,l:60},name:"SkyBlue3"},{colorId:75,hexString:"#5fafff",rgb:{r:95,g:175,b:255},hsl:{h:210,s:100,l:68},name:"SteelBlue1"},{colorId:76,hexString:"#5fd700",rgb:{r:95,g:215,b:0},hsl:{h:93.4883720930233,s:100,l:42},name:"Chartreuse3"},{colorId:77,hexString:"#5fd75f",rgb:{r:95,g:215,b:95},hsl:{h:120,s:60,l:60},name:"PaleGreen3"},{colorId:78,hexString:"#5fd787",rgb:{r:95,g:215,b:135},hsl:{h:140,s:60,l:60},name:"SeaGreen3"},{colorId:79,hexString:"#5fd7af",rgb:{r:95,g:215,b:175},hsl:{h:160,s:60,l:60},name:"Aquamarine3"},{colorId:80,hexString:"#5fd7d7",rgb:{r:95,g:215,b:215},hsl:{h:180,s:60,l:60},name:"MediumTurquoise"},{colorId:81,hexString:"#5fd7ff",rgb:{r:95,g:215,b:255},hsl:{h:195,s:100,l:68},name:"SteelBlue1"},{colorId:82,hexString:"#5fff00",rgb:{r:95,g:255,b:0},hsl:{h:97.6470588235294,s:100,l:50},name:"Chartreuse2"},{colorId:83,hexString:"#5fff5f",rgb:{r:95,g:255,b:95},hsl:{h:120,s:100,l:68},name:"SeaGreen2"},{colorId:84,hexString:"#5fff87",rgb:{r:95,g:255,b:135},hsl:{h:135,s:100,l:68},name:"SeaGreen1"},{colorId:85,hexString:"#5fffaf",rgb:{r:95,g:255,b:175},hsl:{h:150,s:100,l:68},name:"SeaGreen1"},{colorId:86,hexString:"#5fffd7",rgb:{r:95,g:255,b:215},hsl:{h:165,s:100,l:68},name:"Aquamarine1"},{colorId:87,hexString:"#5fffff",rgb:{r:95,g:255,b:255},hsl:{h:180,s:100,l:68},name:"DarkSlateGray2"},{colorId:88,hexString:"#870000",rgb:{r:135,g:0,b:0},hsl:{h:0,s:100,l:26},name:"DarkRed"},{colorId:89,hexString:"#87005f",rgb:{r:135,g:0,b:95},hsl:{h:317.777777777778,s:100,l:26},name:"DeepPink4"},{colorId:90,hexString:"#870087",rgb:{r:135,g:0,b:135},hsl:{h:300,s:100,l:26},name:"DarkMagenta"},{colorId:91,hexString:"#8700af",rgb:{r:135,g:0,b:175},hsl:{h:286.285714285714,s:100,l:34},name:"DarkMagenta"},{colorId:92,hexString:"#8700d7",rgb:{r:135,g:0,b:215},hsl:{h:277.674418604651,s:100,l:42},name:"DarkViolet"},{colorId:93,hexString:"#8700ff",rgb:{r:135,g:0,b:255},hsl:{h:271.764705882353,s:100,l:50},name:"Purple"},{colorId:94,hexString:"#875f00",rgb:{r:135,g:95,b:0},hsl:{h:42.2222222222222,s:100,l:26},name:"Orange4"},{colorId:95,hexString:"#875f5f",rgb:{r:135,g:95,b:95},hsl:{h:0,s:17,l:45},name:"LightPink4"},{colorId:96,hexString:"#875f87",rgb:{r:135,g:95,b:135},hsl:{h:300,s:17,l:45},name:"Plum4"},{colorId:97,hexString:"#875faf",rgb:{r:135,g:95,b:175},hsl:{h:270,s:33,l:52},name:"MediumPurple3"},{colorId:98,hexString:"#875fd7",rgb:{r:135,g:95,b:215},hsl:{h:260,s:60,l:60},name:"MediumPurple3"},{colorId:99,hexString:"#875fff",rgb:{r:135,g:95,b:255},hsl:{h:255,s:100,l:68},name:"SlateBlue1"},{colorId:100,hexString:"#878700",rgb:{r:135,g:135,b:0},hsl:{h:60,s:100,l:26},name:"Yellow4"},{colorId:101,hexString:"#87875f",rgb:{r:135,g:135,b:95},hsl:{h:60,s:17,l:45},name:"Wheat4"},{colorId:102,hexString:"#878787",rgb:{r:135,g:135,b:135},hsl:{h:0,s:0,l:52},name:"Grey53"},{colorId:103,hexString:"#8787af",rgb:{r:135,g:135,b:175},hsl:{h:240,s:20,l:60},name:"LightSlateGrey"},{colorId:104,hexString:"#8787d7",rgb:{r:135,g:135,b:215},hsl:{h:240,s:50,l:68},name:"MediumPurple"},{colorId:105,hexString:"#8787ff",rgb:{r:135,g:135,b:255},hsl:{h:240,s:100,l:76},name:"LightSlateBlue"},{colorId:106,hexString:"#87af00",rgb:{r:135,g:175,b:0},hsl:{h:73.7142857142857,s:100,l:34},name:"Yellow4"},{colorId:107,hexString:"#87af5f",rgb:{r:135,g:175,b:95},hsl:{h:90,s:33,l:52},name:"DarkOliveGreen3"},{colorId:108,hexString:"#87af87",rgb:{r:135,g:175,b:135},hsl:{h:120,s:20,l:60},name:"DarkSeaGreen"},{colorId:109,hexString:"#87afaf",rgb:{r:135,g:175,b:175},hsl:{h:180,s:20,l:60},name:"LightSkyBlue3"},{colorId:110,hexString:"#87afd7",rgb:{r:135,g:175,b:215},hsl:{h:210,s:50,l:68},name:"LightSkyBlue3"},{colorId:111,hexString:"#87afff",rgb:{r:135,g:175,b:255},hsl:{h:220,s:100,l:76},name:"SkyBlue2"},{colorId:112,hexString:"#87d700",rgb:{r:135,g:215,b:0},hsl:{h:82.3255813953488,s:100,l:42},name:"Chartreuse2"},{colorId:113,hexString:"#87d75f",rgb:{r:135,g:215,b:95},hsl:{h:100,s:60,l:60},name:"DarkOliveGreen3"},{colorId:114,hexString:"#87d787",rgb:{r:135,g:215,b:135},hsl:{h:120,s:50,l:68},name:"PaleGreen3"},{colorId:115,hexString:"#87d7af",rgb:{r:135,g:215,b:175},hsl:{h:150,s:50,l:68},name:"DarkSeaGreen3"},{colorId:116,hexString:"#87d7d7",rgb:{r:135,g:215,b:215},hsl:{h:180,s:50,l:68},name:"DarkSlateGray3"},{colorId:117,hexString:"#87d7ff",rgb:{r:135,g:215,b:255},hsl:{h:200,s:100,l:76},name:"SkyBlue1"},{colorId:118,hexString:"#87ff00",rgb:{r:135,g:255,b:0},hsl:{h:88.2352941176471,s:100,l:50},name:"Chartreuse1"},{colorId:119,hexString:"#87ff5f",rgb:{r:135,g:255,b:95},hsl:{h:105,s:100,l:68},name:"LightGreen"},{colorId:120,hexString:"#87ff87",rgb:{r:135,g:255,b:135},hsl:{h:120,s:100,l:76},name:"LightGreen"},{colorId:121,hexString:"#87ffaf",rgb:{r:135,g:255,b:175},hsl:{h:140,s:100,l:76},name:"PaleGreen1"},{colorId:122,hexString:"#87ffd7",rgb:{r:135,g:255,b:215},hsl:{h:160,s:100,l:76},name:"Aquamarine1"},{colorId:123,hexString:"#87ffff",rgb:{r:135,g:255,b:255},hsl:{h:180,s:100,l:76},name:"DarkSlateGray1"},{colorId:124,hexString:"#af0000",rgb:{r:175,g:0,b:0},hsl:{h:0,s:100,l:34},name:"Red3"},{colorId:125,hexString:"#af005f",rgb:{r:175,g:0,b:95},hsl:{h:327.428571428571,s:100,l:34},name:"DeepPink4"},{colorId:126,hexString:"#af0087",rgb:{r:175,g:0,b:135},hsl:{h:313.714285714286,s:100,l:34},name:"MediumVioletRed"},{colorId:127,hexString:"#af00af",rgb:{r:175,g:0,b:175},hsl:{h:300,s:100,l:34},name:"Magenta3"},{colorId:128,hexString:"#af00d7",rgb:{r:175,g:0,b:215},hsl:{h:288.837209302326,s:100,l:42},name:"DarkViolet"},{colorId:129,hexString:"#af00ff",rgb:{r:175,g:0,b:255},hsl:{h:281.176470588235,s:100,l:50},name:"Purple"},{colorId:130,hexString:"#af5f00",rgb:{r:175,g:95,b:0},hsl:{h:32.5714285714286,s:100,l:34},name:"DarkOrange3"},{colorId:131,hexString:"#af5f5f",rgb:{r:175,g:95,b:95},hsl:{h:0,s:33,l:52},name:"IndianRed"},{colorId:132,hexString:"#af5f87",rgb:{r:175,g:95,b:135},hsl:{h:330,s:33,l:52},name:"HotPink3"},{colorId:133,hexString:"#af5faf",rgb:{r:175,g:95,b:175},hsl:{h:300,s:33,l:52},name:"MediumOrchid3"},{colorId:134,hexString:"#af5fd7",rgb:{r:175,g:95,b:215},hsl:{h:280,s:60,l:60},name:"MediumOrchid"},{colorId:135,hexString:"#af5fff",rgb:{r:175,g:95,b:255},hsl:{h:270,s:100,l:68},name:"MediumPurple2"},{colorId:136,hexString:"#af8700",rgb:{r:175,g:135,b:0},hsl:{h:46.2857142857143,s:100,l:34},name:"DarkGoldenrod"},{colorId:137,hexString:"#af875f",rgb:{r:175,g:135,b:95},hsl:{h:30,s:33,l:52},name:"LightSalmon3"},{colorId:138,hexString:"#af8787",rgb:{r:175,g:135,b:135},hsl:{h:0,s:20,l:60},name:"RosyBrown"},{colorId:139,hexString:"#af87af",rgb:{r:175,g:135,b:175},hsl:{h:300,s:20,l:60},name:"Grey63"},{colorId:140,hexString:"#af87d7",rgb:{r:175,g:135,b:215},hsl:{h:270,s:50,l:68},name:"MediumPurple2"},{colorId:141,hexString:"#af87ff",rgb:{r:175,g:135,b:255},hsl:{h:260,s:100,l:76},name:"MediumPurple1"},{colorId:142,hexString:"#afaf00",rgb:{r:175,g:175,b:0},hsl:{h:60,s:100,l:34},name:"Gold3"},{colorId:143,hexString:"#afaf5f",rgb:{r:175,g:175,b:95},hsl:{h:60,s:33,l:52},name:"DarkKhaki"},{colorId:144,hexString:"#afaf87",rgb:{r:175,g:175,b:135},hsl:{h:60,s:20,l:60},name:"NavajoWhite3"},{colorId:145,hexString:"#afafaf",rgb:{r:175,g:175,b:175},hsl:{h:0,s:0,l:68},name:"Grey69"},{colorId:146,hexString:"#afafd7",rgb:{r:175,g:175,b:215},hsl:{h:240,s:33,l:76},name:"LightSteelBlue3"},{colorId:147,hexString:"#afafff",rgb:{r:175,g:175,b:255},hsl:{h:240,s:100,l:84},name:"LightSteelBlue"},{colorId:148,hexString:"#afd700",rgb:{r:175,g:215,b:0},hsl:{h:71.1627906976744,s:100,l:42},name:"Yellow3"},{colorId:149,hexString:"#afd75f",rgb:{r:175,g:215,b:95},hsl:{h:80,s:60,l:60},name:"DarkOliveGreen3"},{colorId:150,hexString:"#afd787",rgb:{r:175,g:215,b:135},hsl:{h:90,s:50,l:68},name:"DarkSeaGreen3"},{colorId:151,hexString:"#afd7af",rgb:{r:175,g:215,b:175},hsl:{h:120,s:33,l:76},name:"DarkSeaGreen2"},{colorId:152,hexString:"#afd7d7",rgb:{r:175,g:215,b:215},hsl:{h:180,s:33,l:76},name:"LightCyan3"},{colorId:153,hexString:"#afd7ff",rgb:{r:175,g:215,b:255},hsl:{h:210,s:100,l:84},name:"LightSkyBlue1"},{colorId:154,hexString:"#afff00",rgb:{r:175,g:255,b:0},hsl:{h:78.8235294117647,s:100,l:50},name:"GreenYellow"},{colorId:155,hexString:"#afff5f",rgb:{r:175,g:255,b:95},hsl:{h:90,s:100,l:68},name:"DarkOliveGreen2"},{colorId:156,hexString:"#afff87",rgb:{r:175,g:255,b:135},hsl:{h:100,s:100,l:76},name:"PaleGreen1"},{colorId:157,hexString:"#afffaf",rgb:{r:175,g:255,b:175},hsl:{h:120,s:100,l:84},name:"DarkSeaGreen2"},{colorId:158,hexString:"#afffd7",rgb:{r:175,g:255,b:215},hsl:{h:150,s:100,l:84},name:"DarkSeaGreen1"},{colorId:159,hexString:"#afffff",rgb:{r:175,g:255,b:255},hsl:{h:180,s:100,l:84},name:"PaleTurquoise1"},{colorId:160,hexString:"#d70000",rgb:{r:215,g:0,b:0},hsl:{h:0,s:100,l:42},name:"Red3"},{colorId:161,hexString:"#d7005f",rgb:{r:215,g:0,b:95},hsl:{h:333.488372093023,s:100,l:42},name:"DeepPink3"},{colorId:162,hexString:"#d70087",rgb:{r:215,g:0,b:135},hsl:{h:322.325581395349,s:100,l:42},name:"DeepPink3"},{colorId:163,hexString:"#d700af",rgb:{r:215,g:0,b:175},hsl:{h:311.162790697674,s:100,l:42},name:"Magenta3"},{colorId:164,hexString:"#d700d7",rgb:{r:215,g:0,b:215},hsl:{h:300,s:100,l:42},name:"Magenta3"},{colorId:165,hexString:"#d700ff",rgb:{r:215,g:0,b:255},hsl:{h:290.588235294118,s:100,l:50},name:"Magenta2"},{colorId:166,hexString:"#d75f00",rgb:{r:215,g:95,b:0},hsl:{h:26.5116279069767,s:100,l:42},name:"DarkOrange3"},{colorId:167,hexString:"#d75f5f",rgb:{r:215,g:95,b:95},hsl:{h:0,s:60,l:60},name:"IndianRed"},{colorId:168,hexString:"#d75f87",rgb:{r:215,g:95,b:135},hsl:{h:340,s:60,l:60},name:"HotPink3"},{colorId:169,hexString:"#d75faf",rgb:{r:215,g:95,b:175},hsl:{h:320,s:60,l:60},name:"HotPink2"},{colorId:170,hexString:"#d75fd7",rgb:{r:215,g:95,b:215},hsl:{h:300,s:60,l:60},name:"Orchid"},{colorId:171,hexString:"#d75fff",rgb:{r:215,g:95,b:255},hsl:{h:285,s:100,l:68},name:"MediumOrchid1"},{colorId:172,hexString:"#d78700",rgb:{r:215,g:135,b:0},hsl:{h:37.6744186046512,s:100,l:42},name:"Orange3"},{colorId:173,hexString:"#d7875f",rgb:{r:215,g:135,b:95},hsl:{h:20,s:60,l:60},name:"LightSalmon3"},{colorId:174,hexString:"#d78787",rgb:{r:215,g:135,b:135},hsl:{h:0,s:50,l:68},name:"LightPink3"},{colorId:175,hexString:"#d787af",rgb:{r:215,g:135,b:175},hsl:{h:330,s:50,l:68},name:"Pink3"},{colorId:176,hexString:"#d787d7",rgb:{r:215,g:135,b:215},hsl:{h:300,s:50,l:68},name:"Plum3"},{colorId:177,hexString:"#d787ff",rgb:{r:215,g:135,b:255},hsl:{h:280,s:100,l:76},name:"Violet"},{colorId:178,hexString:"#d7af00",rgb:{r:215,g:175,b:0},hsl:{h:48.8372093023256,s:100,l:42},name:"Gold3"},{colorId:179,hexString:"#d7af5f",rgb:{r:215,g:175,b:95},hsl:{h:40,s:60,l:60},name:"LightGoldenrod3"},{colorId:180,hexString:"#d7af87",rgb:{r:215,g:175,b:135},hsl:{h:30,s:50,l:68},name:"Tan"},{colorId:181,hexString:"#d7afaf",rgb:{r:215,g:175,b:175},hsl:{h:0,s:33,l:76},name:"MistyRose3"},{colorId:182,hexString:"#d7afd7",rgb:{r:215,g:175,b:215},hsl:{h:300,s:33,l:76},name:"Thistle3"},{colorId:183,hexString:"#d7afff",rgb:{r:215,g:175,b:255},hsl:{h:270,s:100,l:84},name:"Plum2"},{colorId:184,hexString:"#d7d700",rgb:{r:215,g:215,b:0},hsl:{h:60,s:100,l:42},name:"Yellow3"},{colorId:185,hexString:"#d7d75f",rgb:{r:215,g:215,b:95},hsl:{h:60,s:60,l:60},name:"Khaki3"},{colorId:186,hexString:"#d7d787",rgb:{r:215,g:215,b:135},hsl:{h:60,s:50,l:68},name:"LightGoldenrod2"},{colorId:187,hexString:"#d7d7af",rgb:{r:215,g:215,b:175},hsl:{h:60,s:33,l:76},name:"LightYellow3"},{colorId:188,hexString:"#d7d7d7",rgb:{r:215,g:215,b:215},hsl:{h:0,s:0,l:84},name:"Grey84"},{colorId:189,hexString:"#d7d7ff",rgb:{r:215,g:215,b:255},hsl:{h:240,s:100,l:92},name:"LightSteelBlue1"},{colorId:190,hexString:"#d7ff00",rgb:{r:215,g:255,b:0},hsl:{h:69.4117647058823,s:100,l:50},name:"Yellow2"},{colorId:191,hexString:"#d7ff5f",rgb:{r:215,g:255,b:95},hsl:{h:75,s:100,l:68},name:"DarkOliveGreen1"},{colorId:192,hexString:"#d7ff87",rgb:{r:215,g:255,b:135},hsl:{h:80,s:100,l:76},name:"DarkOliveGreen1"},{colorId:193,hexString:"#d7ffaf",rgb:{r:215,g:255,b:175},hsl:{h:90,s:100,l:84},name:"DarkSeaGreen1"},{colorId:194,hexString:"#d7ffd7",rgb:{r:215,g:255,b:215},hsl:{h:120,s:100,l:92},name:"Honeydew2"},{colorId:195,hexString:"#d7ffff",rgb:{r:215,g:255,b:255},hsl:{h:180,s:100,l:92},name:"LightCyan1"},{colorId:196,hexString:"#ff0000",rgb:{r:255,g:0,b:0},hsl:{h:0,s:100,l:50},name:"Red1"},{colorId:197,hexString:"#ff005f",rgb:{r:255,g:0,b:95},hsl:{h:337.647058823529,s:100,l:50},name:"DeepPink2"},{colorId:198,hexString:"#ff0087",rgb:{r:255,g:0,b:135},hsl:{h:328.235294117647,s:100,l:50},name:"DeepPink1"},{colorId:199,hexString:"#ff00af",rgb:{r:255,g:0,b:175},hsl:{h:318.823529411765,s:100,l:50},name:"DeepPink1"},{colorId:200,hexString:"#ff00d7",rgb:{r:255,g:0,b:215},hsl:{h:309.411764705882,s:100,l:50},name:"Magenta2"},{colorId:201,hexString:"#ff00ff",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50},name:"Magenta1"},{colorId:202,hexString:"#ff5f00",rgb:{r:255,g:95,b:0},hsl:{h:22.3529411764706,s:100,l:50},name:"OrangeRed1"},{colorId:203,hexString:"#ff5f5f",rgb:{r:255,g:95,b:95},hsl:{h:0,s:100,l:68},name:"IndianRed1"},{colorId:204,hexString:"#ff5f87",rgb:{r:255,g:95,b:135},hsl:{h:345,s:100,l:68},name:"IndianRed1"},{colorId:205,hexString:"#ff5faf",rgb:{r:255,g:95,b:175},hsl:{h:330,s:100,l:68},name:"HotPink"},{colorId:206,hexString:"#ff5fd7",rgb:{r:255,g:95,b:215},hsl:{h:315,s:100,l:68},name:"HotPink"},{colorId:207,hexString:"#ff5fff",rgb:{r:255,g:95,b:255},hsl:{h:300,s:100,l:68},name:"MediumOrchid1"},{colorId:208,hexString:"#ff8700",rgb:{r:255,g:135,b:0},hsl:{h:31.7647058823529,s:100,l:50},name:"DarkOrange"},{colorId:209,hexString:"#ff875f",rgb:{r:255,g:135,b:95},hsl:{h:15,s:100,l:68},name:"Salmon1"},{colorId:210,hexString:"#ff8787",rgb:{r:255,g:135,b:135},hsl:{h:0,s:100,l:76},name:"LightCoral"},{colorId:211,hexString:"#ff87af",rgb:{r:255,g:135,b:175},hsl:{h:340,s:100,l:76},name:"PaleVioletRed1"},{colorId:212,hexString:"#ff87d7",rgb:{r:255,g:135,b:215},hsl:{h:320,s:100,l:76},name:"Orchid2"},{colorId:213,hexString:"#ff87ff",rgb:{r:255,g:135,b:255},hsl:{h:300,s:100,l:76},name:"Orchid1"},{colorId:214,hexString:"#ffaf00",rgb:{r:255,g:175,b:0},hsl:{h:41.1764705882353,s:100,l:50},name:"Orange1"},{colorId:215,hexString:"#ffaf5f",rgb:{r:255,g:175,b:95},hsl:{h:30,s:100,l:68},name:"SandyBrown"},{colorId:216,hexString:"#ffaf87",rgb:{r:255,g:175,b:135},hsl:{h:20,s:100,l:76},name:"LightSalmon1"},{colorId:217,hexString:"#ffafaf",rgb:{r:255,g:175,b:175},hsl:{h:0,s:100,l:84},name:"LightPink1"},{colorId:218,hexString:"#ffafd7",rgb:{r:255,g:175,b:215},hsl:{h:330,s:100,l:84},name:"Pink1"},{colorId:219,hexString:"#ffafff",rgb:{r:255,g:175,b:255},hsl:{h:300,s:100,l:84},name:"Plum1"},{colorId:220,hexString:"#ffd700",rgb:{r:255,g:215,b:0},hsl:{h:50.5882352941176,s:100,l:50},name:"Gold1"},{colorId:221,hexString:"#ffd75f",rgb:{r:255,g:215,b:95},hsl:{h:45,s:100,l:68},name:"LightGoldenrod2"},{colorId:222,hexString:"#ffd787",rgb:{r:255,g:215,b:135},hsl:{h:40,s:100,l:76},name:"LightGoldenrod2"},{colorId:223,hexString:"#ffd7af",rgb:{r:255,g:215,b:175},hsl:{h:30,s:100,l:84},name:"NavajoWhite1"},{colorId:224,hexString:"#ffd7d7",rgb:{r:255,g:215,b:215},hsl:{h:0,s:100,l:92},name:"MistyRose1"},{colorId:225,hexString:"#ffd7ff",rgb:{r:255,g:215,b:255},hsl:{h:300,s:100,l:92},name:"Thistle1"},{colorId:226,hexString:"#ffff00",rgb:{r:255,g:255,b:0},hsl:{h:60,s:100,l:50},name:"Yellow1"},{colorId:227,hexString:"#ffff5f",rgb:{r:255,g:255,b:95},hsl:{h:60,s:100,l:68},name:"LightGoldenrod1"},{colorId:228,hexString:"#ffff87",rgb:{r:255,g:255,b:135},hsl:{h:60,s:100,l:76},name:"Khaki1"},{colorId:229,hexString:"#ffffaf",rgb:{r:255,g:255,b:175},hsl:{h:60,s:100,l:84},name:"Wheat1"},{colorId:230,hexString:"#ffffd7",rgb:{r:255,g:255,b:215},hsl:{h:60,s:100,l:92},name:"Cornsilk1"},{colorId:231,hexString:"#ffffff",rgb:{r:255,g:255,b:255},hsl:{h:0,s:0,l:100},name:"Grey100"},{colorId:232,hexString:"#080808",rgb:{r:8,g:8,b:8},hsl:{h:0,s:0,l:3},name:"Grey3"},{colorId:233,hexString:"#121212",rgb:{r:18,g:18,b:18},hsl:{h:0,s:0,l:7},name:"Grey7"},{colorId:234,hexString:"#1c1c1c",rgb:{r:28,g:28,b:28},hsl:{h:0,s:0,l:10},name:"Grey11"},{colorId:235,hexString:"#262626",rgb:{r:38,g:38,b:38},hsl:{h:0,s:0,l:14},name:"Grey15"},{colorId:236,hexString:"#303030",rgb:{r:48,g:48,b:48},hsl:{h:0,s:0,l:18},name:"Grey19"},{colorId:237,hexString:"#3a3a3a",rgb:{r:58,g:58,b:58},hsl:{h:0,s:0,l:22},name:"Grey23"},{colorId:238,hexString:"#444444",rgb:{r:68,g:68,b:68},hsl:{h:0,s:0,l:26},name:"Grey27"},{colorId:239,hexString:"#4e4e4e",rgb:{r:78,g:78,b:78},hsl:{h:0,s:0,l:30},name:"Grey30"},{colorId:240,hexString:"#585858",rgb:{r:88,g:88,b:88},hsl:{h:0,s:0,l:34},name:"Grey35"},{colorId:241,hexString:"#626262",rgb:{r:98,g:98,b:98},hsl:{h:0,s:0,l:37},name:"Grey39"},{colorId:242,hexString:"#6c6c6c",rgb:{r:108,g:108,b:108},hsl:{h:0,s:0,l:40},name:"Grey42"},{colorId:243,hexString:"#767676",rgb:{r:118,g:118,b:118},hsl:{h:0,s:0,l:46},name:"Grey46"},{colorId:244,hexString:"#808080",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50},name:"Grey50"},{colorId:245,hexString:"#8a8a8a",rgb:{r:138,g:138,b:138},hsl:{h:0,s:0,l:54},name:"Grey54"},{colorId:246,hexString:"#949494",rgb:{r:148,g:148,b:148},hsl:{h:0,s:0,l:58},name:"Grey58"},{colorId:247,hexString:"#9e9e9e",rgb:{r:158,g:158,b:158},hsl:{h:0,s:0,l:61},name:"Grey62"},{colorId:248,hexString:"#a8a8a8",rgb:{r:168,g:168,b:168},hsl:{h:0,s:0,l:65},name:"Grey66"},{colorId:249,hexString:"#b2b2b2",rgb:{r:178,g:178,b:178},hsl:{h:0,s:0,l:69},name:"Grey70"},{colorId:250,hexString:"#bcbcbc",rgb:{r:188,g:188,b:188},hsl:{h:0,s:0,l:73},name:"Grey74"},{colorId:251,hexString:"#c6c6c6",rgb:{r:198,g:198,b:198},hsl:{h:0,s:0,l:77},name:"Grey78"},{colorId:252,hexString:"#d0d0d0",rgb:{r:208,g:208,b:208},hsl:{h:0,s:0,l:81},name:"Grey82"},{colorId:253,hexString:"#dadada",rgb:{r:218,g:218,b:218},hsl:{h:0,s:0,l:85},name:"Grey85"},{colorId:254,hexString:"#e4e4e4",rgb:{r:228,g:228,b:228},hsl:{h:0,s:0,l:89},name:"Grey89"},{colorId:255,hexString:"#eeeeee",rgb:{r:238,g:238,b:238},hsl:{h:0,s:0,l:93},name:"Grey93"}],I=function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(t){a(t)}},o=function(e){try{c(n.throw(e))}catch(t){a(t)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))},k=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"createCanvas",value:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return{canvas:t,ctx:n}}},{key:"createImgDom",value:function(e){var t=new Image;return t.crossOrigin="Anonymous",t.src=e,new Promise((function(e){t.onload=function(){e(t)},t.onerror=function(e){console.error(e)}}))}},{key:"renderColorByMask",value:function(t){var n=t.renderCanvas,i=t.imgData,a=t.imgNode,r=t.customColor,o=t.backgroundColor,c=void 0===o?"rgb(0, 0, 0)":o,l=t.hiddenUndefinedColor,s=void 0!==l&&l,u=n.getContext("2d");if(u){u.fillStyle=c,u.fillRect(0,0,a.width,a.height);return e.renderPixelByImgData({ctx:u,imgData:i,size:a,getColor:function(e){var t,n=e.r,i=null==(t=null==r?void 0:r.find((function(e){return(null==e?void 0:e.channel)===n})))?void 0:t.color;return!0!==s||i?i||w[n].hexString:""}}),n.toDataURL("image/png")}}},{key:"renderMaskByColor",value:function(t){var n=t.renderCanvas,i=t.imgData,a=t.imgNode,r=t.customColor,o=t.backgroundColor,c=void 0===o?"rgb(0, 0, 0)":o,l=n.getContext("2d");if(l){l.fillStyle=c,l.fillRect(0,0,a.width,a.height);return e.renderPixelByImgData({ctx:l,imgData:i,size:a,getColor:function(e){var t=e.r,n=e.g,i=e.b,a="";return null==r||r.some((function(e){if(e.rgb){return t>=e.rgb.r-2&&t<=e.rgb.r+2&&n>=e.rgb.g-2&&n<=e.rgb.g+2&&i>=e.rgb.b-2&&i<=e.rgb.b+2&&(a="rgb(".concat(e.channel,",").concat(e.channel,",").concat(e.channel,")"),!0)}})),a}}),n.toDataURL("image/png")}}},{key:"renderPixelByImgData",value:function(e){for(var t=e.ctx,n=e.imgData,i=e.size,a=e.getColor,r=0;r<n.data.length/4;r++){var o=4*r,c=a({r:n.data[o],g:n.data[o+1],b:n.data[o+2],a:n.data[o+3]});if(c){t.fillStyle=c;var l=Math.floor(r%i.width),s=Math.floor(r/i.width);t.fillRect(l,s,1,1)}}}}]),e}(),L=k;L.nextTick=function(){return new Promise((function(e){setTimeout((function(){e("")}))}))},L.getColorMapBySingleChannelMask=function(e){return I(k,null,Object(C.a)().mark((function t(){var n,i,a,r,o,c,l,s,u,d,h,f,g,v,b,p;return Object(C.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.maskSrc,i=e.customColor,a=e.basicImgSrc,r=e.opacity,o=void 0===r?.3:r,c=e.hiddenUndefinedColor,l=void 0!==c&&c,t.prev=1,t.next=4,k.createImgDom(n);case 4:if(s=t.sent,u=k.createCanvas(s),(d=u.ctx).drawImage(s,0,0,s.width,s.height),h=k.createCanvas(s),f=h.canvas,g=h.ctx,!a){t.next=14;break}return t.next=11,k.createImgDom(a);case 11:v=t.sent,g.drawImage(v,0,0),g.globalAlpha=o;case 14:return t.next=16,k.nextTick();case 16:return b=d.getImageData(0,0,s.width,s.height),p=k.renderColorByMask({renderCanvas:f,imgData:b,imgNode:s,customColor:i,backgroundColor:e.backgroundColor,hiddenUndefinedColor:l}),t.abrupt("return",p);case 21:t.prev=21,t.t0=t.catch(1),console.error("Failed to load image");case 24:case"end":return t.stop()}}),t,null,[[1,21]])})))},L.getMaskByColorImg=function(e){return I(k,[e],Object(C.a)().mark((function e(t){var n,i,a,r,o,c,l,s,u;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.maskSrc,i=t.customColor,e.prev=1,e.next=4,k.createImgDom(n);case 4:return a=e.sent,r=k.createCanvas(a),(o=r.ctx).drawImage(a,0,0,a.width,a.height),c=k.createCanvas(a),l=c.canvas,e.next=10,k.nextTick();case 10:return s=o.getImageData(0,0,a.width,a.height),u=k.renderMaskByColor({renderCanvas:l,imgData:s,imgNode:a,customColor:i}),e.abrupt("return",u);case 15:e.prev=15,e.t0=e.catch(1),console.error("Failed to load image");case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))}},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(33);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var o=r(i).default.createContext(void 0),c=a.createDispatchHook(o),l=a.createSelectorHook(o);t.LabelBeeContext=o,t.useDispatch=c,t.useSelector=l},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"RectOperation",(function(){return na})),n.d(t,"TagOperation",(function(){return ua})),n.d(t,"PointOperation",(function(){return wa})),n.d(t,"LineToolOperation",(function(){return ja})),n.d(t,"TextToolOperation",(function(){return Ba})),n.d(t,"PolygonOperation",(function(){return Xa})),n.d(t,"MeasureOperation",(function(){return ar})),n.d(t,"BasicToolOperation",(function(){return Gi})),n.d(t,"ViewOperation",(function(){return mr})),n.d(t,"ScribbleTool",(function(){return yr})),n.d(t,"PointCloud2dOperation",(function(){return Ar})),n.d(t,"cAnnotation",(function(){return a})),n.d(t,"cAnnotationTask",(function(){return c})),n.d(t,"cKeyCode",(function(){return r})),n.d(t,"cStyle",(function(){return o})),n.d(t,"cTool",(function(){return i})),n.d(t,"TagUtils",(function(){return sa})),n.d(t,"uuid",(function(){return yi})),n.d(t,"MarkerUtils",(function(){return mi})),n.d(t,"RectUtils",(function(){return pn})),n.d(t,"AxisUtils",(function(){return jt})),n.d(t,"DrawUtils",(function(){return pi})),n.d(t,"ImgUtils",(function(){return Ur})),n.d(t,"MathUtils",(function(){return cn})),n.d(t,"DblClickEventListener",(function(){return Ai})),n.d(t,"AnnotationEngine",(function(){return Jr})),n.d(t,"PointCloud",(function(){return ko})),n.d(t,"PointCloudAnnotation",(function(){return So})),n.d(t,"UnitUtils",(function(){return ri})),n.d(t,"CanvasScheduler",(function(){return Lo})),n.d(t,"CommonToolUtils",(function(){return Oo})),n.d(t,"toolUtils",(function(){return Ao}));var i={};n.r(i),n.d(i,"CLIENT_TOOL_HEAD_TYPE",(function(){return be})),n.d(i,"CLIENT_TOOL_NAME",(function(){return pe})),n.d(i,"DEFAULT_FONT",(function(){return de})),n.d(i,"DEFAULT_TEXT_MAX_WIDTH",(function(){return ue})),n.d(i,"EAnnotationMode",(function(){return V})),n.d(i,"EAuditStatus",(function(){return ee})),n.d(i,"ECheckModel",(function(){return y})),n.d(i,"EDependPattern",(function(){return R})),n.d(i,"EDragTarget",(function(){return Y})),n.d(i,"EDrawPointPattern",(function(){return J})),n.d(i,"EFilterToolOperation",(function(){return _})),n.d(i,"ELineColor",(function(){return U})),n.d(i,"ELineTypes",(function(){return F})),n.d(i,"EPageOperator",(function(){return q})),n.d(i,"EPointCloudName",(function(){return h})),n.d(i,"EPolygonPattern",(function(){return he})),n.d(i,"ERectPattern",(function(){return x})),n.d(i,"EScribblePattern",(function(){return ge})),n.d(i,"ESelectedType",(function(){return W})),n.d(i,"ETextType",(function(){return ne})),n.d(i,"EThumbnailOption",(function(){return re})),n.d(i,"EToolName",(function(){return p})),n.d(i,"EToolType",(function(){return v})),n.d(i,"EVideoToolName",(function(){return f})),n.d(i,"OPERATION_LIST",(function(){return ae})),n.d(i,"SEGMENT_NUMBER",(function(){return me})),n.d(i,"TEXT_ATTRIBUTE_LINE_HEIGHT",(function(){return se})),n.d(i,"TEXT_ATTRIBUTE_MAX_LENGTH",(function(){return le})),n.d(i,"TEXT_TYPE",(function(){return ce})),n.d(i,"TOOL_NAME",(function(){return B})),n.d(i,"TOOL_NAME_EN",(function(){return H})),n.d(i,"edgeAdsorptionScope",(function(){return ye})),n.d(i,"editStepWidth",(function(){return N}));var a={};n.r(a),n.d(a,"ANNOTATION_MAX_SIZE",(function(){return qe})),n.d(a,"DEFAULT_TEXT_OFFSET",(function(){return $e})),n.d(a,"DEFAULT_TEXT_SHADOW",(function(){return et})),n.d(a,"EDragStatus",(function(){return Ze})),n.d(a,"EDragTarget",(function(){return ze})),n.d(a,"EGrowthMode",(function(){return We})),n.d(a,"ELang",(function(){return Ye})),n.d(a,"EPageOperator",(function(){return Ve})),n.d(a,"ERotateDirection",(function(){return Je})),n.d(a,"ESortDirection",(function(){return Ue})),n.d(a,"EStepType",(function(){return Ne})),n.d(a,"TEXT_ATTRIBUTE_OFFSET",(function(){return tt})),n.d(a,"footerHeight",(function(){return Be})),n.d(a,"headerHeight",(function(){return _e})),n.d(a,"sidebarWidth",(function(){return He})),n.d(a,"tipsHeight",(function(){return je}));var r={};n.r(r),n.d(r,"default",(function(){return Cn}));var o={};n.r(o),n.d(o,"INVALID_ICON",(function(){return On})),n.d(o,"BASE_ICON",(function(){return zn})),n.d(o,"COLORS_ARRAY",(function(){return Zn})),n.d(o,"EDIT_STEP_WIDTH",(function(){return Hn})),n.d(o,"FILTER_TOOL_COLOR",(function(){return Wn})),n.d(o,"FOOTER_HEIGHT",(function(){return jn})),n.d(o,"HEADER_HEIGHT",(function(){return Tn})),n.d(o,"ICON_ARRAY",(function(){return Fn})),n.d(o,"INVALID_COLOR",(function(){return Un})),n.d(o,"NULL_COLOR",(function(){return Gn})),n.d(o,"NULL_ICON",(function(){return An})),n.d(o,"PADDING",(function(){return Nn})),n.d(o,"PAGINATION_HEIGHT",(function(){return Mn})),n.d(o,"SEARCH_HEIGHT",(function(){return Dn})),n.d(o,"SIDERBAR_WIDTH",(function(){return Bn})),n.d(o,"TABLE_ROW_HEIGHT",(function(){return Rn})),n.d(o,"TAB_HEIGHT",(function(){return En})),n.d(o,"THEME_COLOR",(function(){return Vn})),n.d(o,"TIPS_HEIGHT",(function(){return _n}));var c={};n.r(c),n.d(c,"ANNOTATION_STATUS",(function(){return Er})),n.d(c,"ANNOTATION_TYPE",(function(){return Tr})),n.d(c,"EAnnotationStatus",(function(){return Da}));var l,s,u,d,h,f,g,v,b,p,m,y,x,C,w=n(16),I=n(21),k=n(7),L=n(8),P=n(20),S=n(13),O=n(11),A=n(9),T=n(10),E=n(25),D=n(14),N=320;(h||(h={})).PointCloud="pointCloudTool",(g=f||(f={})).VideoTextTool="videoTextTool",g.VideoTagTool="videoTagTool",g.VideoClipTool="videoClipTool",(b=v||(v={}))[b.Rect=0]="Rect",b[b.Tag=1]="Tag",(m=p||(p={})).Rect="rectTool",m.Tag="tagTool",m.Point="pointTool",m.PointMarker="pointMarkerTool",m.Segmentation="segmentationTool",m.Filter="filterTool",m.Text="textTool",m.Polygon="polygonTool",m.Line="lineTool",m.LineMarker="lineMarkerTool",m.Empty="emptyTool",m.FolderTag="folderTagTool",m.RectTrack="rectTrackTool",m.ScribbleTool="scribbleTool",m.Face="faceTool",m.ClientAttribute="clientAttributeTool",m.OCRRelation="OCRRelationTool",m.SegmentByRect="segmentByRectTool",(y||(y={})).Check="check",(C=x||(x={}))[C.nothing=0]="nothing",C[C.RectBG=1]="RectBG",C[C.showOrder=2]="showOrder";var R,M,_,j,B=(l={},Object(D.a)(l,p.Rect,"\u62c9\u6846"),Object(D.a)(l,p.Tag,"\u6807\u7b7e"),Object(D.a)(l,p.Point,"\u6807\u70b9"),Object(D.a)(l,p.PointMarker,"\u5217\u8868\u6807\u70b9"),Object(D.a)(l,p.Segmentation,"\u524d\u666f\u5206\u5272"),Object(D.a)(l,p.Filter,"\u7b5b\u9009"),Object(D.a)(l,p.Text,"\u6587\u672c"),Object(D.a)(l,p.Polygon,"\u591a\u8fb9\u5f62"),Object(D.a)(l,p.Line,"\u7ebf\u6761"),Object(D.a)(l,p.LineMarker,"\u5217\u8868\u7ebf\u6761"),Object(D.a)(l,p.FolderTag,"\u6587\u4ef6\u5939\u6807\u7b7e"),Object(D.a)(l,p.RectTrack,"\u62c9\u6846\u8ddf\u8e2a"),Object(D.a)(l,p.Face,"\u4eba\u8138106\u5de5\u5177"),Object(D.a)(l,p.ClientAttribute,"\u5ba2\u6237\u7aef\u5c5e\u6027\u5de5\u5177"),Object(D.a)(l,p.OCRRelation,"OCR\u5173\u8054\u5173\u7cfb\u5de5\u5177"),Object(D.a)(l,p.SegmentByRect,"\u7b97\u6cd5\u5206\u5272\u8f85\u52a9\u5de5\u5177"),Object(D.a)(l,f.VideoTextTool,"\u89c6\u9891\u6587\u672c"),Object(D.a)(l,f.VideoTagTool,"\u89c6\u9891\u6807\u7b7e"),Object(D.a)(l,f.VideoClipTool,"\u89c6\u9891\u622a\u53d6"),Object(D.a)(l,h.PointCloud,"\u70b9\u4e91"),l),H=(s={},Object(D.a)(s,p.Rect,"Rect"),Object(D.a)(s,p.Tag,"Tag"),Object(D.a)(s,p.Point,"Point"),Object(D.a)(s,p.PointMarker,"PointMarker"),Object(D.a)(s,p.Segmentation,"Segmentation"),Object(D.a)(s,p.Filter,"Filter"),Object(D.a)(s,p.Text,"Text"),Object(D.a)(s,p.Polygon,"Polygon"),Object(D.a)(s,p.Line,"Line"),Object(D.a)(s,p.LineMarker,"LineMarker"),Object(D.a)(s,p.FolderTag,"FolderTag"),Object(D.a)(s,p.RectTrack,"RectTrack"),Object(D.a)(s,p.Face,"Face"),Object(D.a)(s,p.ClientAttribute,"ClientAttribute"),Object(D.a)(s,p.OCRRelation,"OCRRelation"),Object(D.a)(s,p.SegmentByRect,"SegmentByRect"),Object(D.a)(s,f.VideoTextTool,"VideoTextTool"),Object(D.a)(s,f.VideoTagTool,"VideoTagTool"),Object(D.a)(s,f.VideoClipTool,"VideoClipTool"),Object(D.a)(s,h.PointCloud,"PointCloud"),s);(M=R||(R={}))[M.noDepend=1]="noDepend",M[M.dependOrigin=2]="dependOrigin",M[M.dependShape=3]="dependShape",M[M.dependLine=4]="dependLine",M[M.dependPolygon=5]="dependPolygon",M[M.dependPreShape=101]="dependPreShape",M[M.dependPreLine=102]="dependPreLine",M[M.dependPrePolygon=103]="dependPrePolygon",(j=_||(_={})).lc="leftClick",j.rc="rightClick",j.clc="ctrlLeftClick",j.crc="ctrlRightClick";var V,Z,F,z,U,G,W,K,Y,X,J,Q,q,$,ee,te,ne,ie,ae={leftClick:"\u9f20\u6807\u5de6\u952e",rightClick:"\u9f20\u6807\u53f3\u952e",ctrlLeftClick:"ctrl + \u9f20\u6807\u5de6\u952e",ctrlRightClick:"ctrl + \u9f20\u6807\u53f3\u952e"};(Z=V||(V={}))[Z.Normal=1]="Normal",Z[Z.Modify=2]="Modify",(z=F||(F={}))[z.Line=0]="Line",z[z.Curve=1]="Curve",(G=U||(U={}))[G.SingleColor=0]="SingleColor",G[G.MultiColor=1]="MultiColor",(K=W||(W={}))[K.Form=1]="Form",K[K.Json=2]="Json",(X=Y||(Y={}))[X.Point=0]="Point",X[X.Line=1]="Line",X[X.Plane=2]="Plane",(Q=J||(J={}))[Q.None=0]="None",Q[Q.Drawing=1]="Drawing",Q[Q.Edit=2]="Edit",($=q||(q={}))[$.Backward=0]="Backward",$[$.Forward=1]="Forward",$[$.JumpSkip=2]="JumpSkip",$[$.None=3]="None",(te=ee||(ee={}))[te.Wait=0]="Wait",te[te.Pass=1]="Pass",te[te.Fail=2]="Fail",te[te.Loading=3]="Loading",(ie=ne||(ne={}))[ie.AnyString=0]="AnyString",ie[ie.Order=1]="Order",ie[ie.EnglishOnly=2]="EnglishOnly",ie[ie.NumberOnly=3]="NumberOnly",ie[ie.CustomFormat=4]="CustomFormat";var re,oe,ce={0:"\u4efb\u610f\u5b57\u7b26",1:"\u5e8f\u53f7",2:"\u4ec5\u82f1\u6587",3:"\u4ec5\u6570\u5b57"},le=1e3,se=16,ue=300,de="normal normal 500 14px Arial";(oe=re||(re={}))[oe.ImgList=1e3]="ImgList",oe[oe.TrackPrediction=1001]="TrackPrediction",oe[oe.ImgSearch=1002]="ImgSearch";var he,fe,ge,ve,be=(u={},Object(D.a)(u,h.PointCloud,"sensebeepc"),Object(D.a)(u,p.ClientAttribute,"sensebeepc-EnumAttributeTool"),Object(D.a)(u,p.Face,"sensebeepc-FacePointsLabellingTool"),Object(D.a)(u,p.OCRRelation,"sensebeepc-OCRRelationTool"),u),pe=(d={},Object(D.a)(d,h.PointCloud,"\u70b9\u4e91\u5ba2\u6237\u7aef"),Object(D.a)(d,p.ClientAttribute,"\u5ba2\u6237\u7aef\u5c5e\u6027\u5de5\u5177"),Object(D.a)(d,p.Face,"\u4eba\u8138106\u70b9\u5de5\u5177"),Object(D.a)(d,p.OCRRelation,"OCR\u5173\u8054\u5173\u7cfb\u5de5\u5177"),d),me=16,ye=10;(fe=he||(he={}))[fe.Normal=0]="Normal",fe[fe.Rect=1]="Rect",(ve=ge||(ge={}))[ve.Scribble=1]="Scribble",ve[ve.Erase=2]="Erase";var xe=Object.defineProperty,Ce=Object.defineProperties,we=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,Pe=function(e,t,n){return t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Se=function(e,t){for(var n in t||(t={}))ke.call(t,n)&&Pe(e,n,t[n]);if(Ie){var i,a=Object(E.a)(Ie(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Le.call(t,n)&&Pe(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Oe=function(e,t){return Ce(e,we(t))};function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16;if(e.length<4)return e;var a,r,o,c,l,s,u,d,h,f,g,v,b,p=[],m=e.slice(0);for(n?(m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.push(e[0]),m.push(e[1])):(m.unshift(e[1]),m.unshift(e[0]),m.push(e[e.length-2]),m.push(e[e.length-1])),b=2;b<m.length-4;b+=2)for(o=(m[b+2]-m[b-2])*t,c=(m[b+4]-m[b-0])*t,l=(m[b+3]-m[b-1])*t,s=(m[b+5]-m[b+1])*t,v=0;v<=i;v++)g=v/i,u=2*Math.pow(g,3)-3*Math.pow(g,2)+1,d=-2*Math.pow(g,3)+3*Math.pow(g,2),h=Math.pow(g,3)-2*Math.pow(g,2)+g,f=Math.pow(g,3)-Math.pow(g,2),a=u*m[b]+d*m[b+2]+h*o+f*c,r=u*m[b+1]+d*m[b+3]+h*l+f*s,p.push(a),p.push(r);for(var y=[],x=0;x<p.length-1;x+=2)y.push({x:p[x],y:p[x+1]});if(n)for(var C=0;C<i+1;C++){var w=y.shift();y.push(w)}return y}var Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return Ae(e.reduce((function(e,t){return[].concat(Object(w.a)(e),[t.x,t.y])}),[]),.5,!1,t)};function Ee(e,t){var n,i,a,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.Line,c=0;t=Object(w.a)(t),o===F.Curve&&(t=Ae(t.reduce((function(e,t){return[].concat(Object(w.a)(e),[t.x,t.y])}),[]),.5,!0,me));var l=t,s=Object(I.a)(l,1);a=s[0];var u=t.length;for(n=1;n<=u;n++)r=t[n%u],e.x>Math.min(a.x,r.x)&&e.x<=Math.max(a.x,r.x)&&e.y<=Math.max(a.y,r.y)&&a.x!==r.x&&(i=(e.x-a.x)*(r.y-a.y)/(r.x-a.x)+a.y,(a.y===r.y||e.y<=i)&&c++),a=r;return c%2!==0}function De(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.map((function(e){return Oe(Se({},e),{x:e.x*t,y:e.y*t})}))}var Ne,Re,Me=n(94),_e=61,je=40,Be=40,He=240;(Re=Ne||(Ne={}))[Re.ANNOTATION=1]="ANNOTATION",Re[Re.QUALITY_INSPECTION=2]="QUALITY_INSPECTION",Re[Re.PRE_ANNOTATION=3]="PRE_ANNOTATION",Re[Re.MANUAL_CORRECTION=4]="MANUAL_CORRECTION";var Ve,Ze,Fe,ze,Ue,Ge,We,Ke,Ye,Xe,Je,Qe,qe=1e3;!function(e){e[e.Backward=0]="Backward",e[e.Forward=1]="Forward",e[e.JumpSkip=2]="JumpSkip",e[e.None=3]="None"}(Ve||(Ve={})),(Fe=Ze||(Ze={}))[Fe.Start=0]="Start",Fe[Fe.Stop=1]="Stop",Fe[Fe.Wait=2]="Wait",Fe[Fe.Move=3]="Move",function(e){e[e.Point=0]="Point",e[e.Line=1]="Line",e[e.Plane=2]="Plane"}(ze||(ze={})),(Ge=Ue||(Ue={}))[Ge.ascend=0]="ascend",Ge[Ge.descend=1]="descend",(Ke=We||(We={}))[Ke.Intelligence=0]="Intelligence",Ke[Ke.Linear=1]="Linear",(Xe=Ye||(Ye={})).Zh="zh_CN",Xe.US="en_US",(Qe=Je||(Je={}))[Qe.Clockwise=0]="Clockwise",Qe[Qe.Anticlockwise=1]="Anticlockwise";var $e={offsetX:-10,offsetY:-10},et={shadowColor:"rgba(0, 0, 0, 1)",shadowOffsetX:1,shadowOffsetY:1,shadowBlur:0},tt={x:8,y:26},nt=n(34),it=n.n(nt),at=Object.defineProperty,rt=Object.defineProperties,ot=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,ut=function(e,t,n){return t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},dt=function(e,t){for(var n in t||(t={}))lt.call(t,n)&&ut(e,n,t[n]);if(ct){var i,a=Object(E.a)(ct(t));try{for(a.s();!(i=a.n()).done;){n=i.value;st.call(t,n)&&ut(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},ht=function(e,t){return rt(e,ot(t))},ft=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"getStepInfo",value:function(e,t){return null==t?void 0:t.filter((function(t){return t.step===e}))[0]}},{key:"getCurrentStepInfo",value:function(e,t){var n=this.getStepInfo(e,t);return!n||n.type!==Ne.QUALITY_INSPECTION&&n.type!==Ne.MANUAL_CORRECTION?n:this.getCurrentStepInfo(n.dataSourceStep,t)}},{key:"getMaxOrder",value:function(e){var t=0;return e.forEach((function(e){e.order&&e.order>t&&(t=e.order)})),t}},{key:"hotkeyFilter",value:function(e){var t=e.target||e.srcElement;if(!t)return!0;var n=t.tagName,i=t.type;if(!n||!i)return!0;var a=!0;return(t.isContentEditable||"TEXTAREA"===n||("INPUT"===n&&"radio"!==i||"TEXTAREA"===n)&&!t.readOnly)&&(a=!1),a}},{key:"getNextSelectedRectID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ue.ascend,n=arguments.length>2?arguments[2]:void 0,i=1;t===Ue.descend&&(i=-1);var a=e.sort((function(e,t){return e.x-t.x===0?e.y-t.y:i*(e.x-t.x)})),r=a.findIndex((function(e){return e.id===n})),o=a.length;return a[(r+1)%o]}},{key:"getNextSelectedRectIDByEvent",value:function(e,t,n){var i=t.shiftKey?Ue.descend:Ue.ascend;return this.getNextSelectedRectID(e,i,n)}},{key:"getRenderResultList",value:function(e,t){var n,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,o=e.filter((function(e){return r&&r===(null==e?void 0:e.id)?(n=e,!1):!(a.length>0&&!a.includes(null==e?void 0:e.attribute))&&!i.isDifferSourceID(null==e?void 0:e.sourceID,t)}));return[o,n]}},{key:"getSourceID",value:function(e){var t;return e&&null!=(t=null==e?void 0:e.id)?t:""}},{key:"findAllLine",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],i=Object(w.a)(e);i.length>=3&&!0===t&&i.push(dt({},i[0]));for(var a=0;a<i.length;a++)i[a+1]&&n.push({point1:i[a],point2:i[a+1],pointIndex:a});return n}},{key:"translateSourceID",value:function(e){return void 0!==e&&0!==e&&"0"!==e||(e=""),e}},{key:"isDifferSourceID",value:function(e,t){return e=this.translateSourceID(e),t=this.translateSourceID(t),"".concat(e)!=="".concat(t)}},{key:"isSameSourceID",value:function(e,t){return e=this.translateSourceID(e),t=this.translateSourceID(t),"".concat(e)==="".concat(t)}},{key:"getNextMarker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(0!==(null==t?void 0:t.length)){var i=t.map((function(e,t){return ht(dt({},e),{index:t})}));if("number"===typeof n&&n>0){var a=t[n];if(a&&e.every((function(e){return e.label!==a.value})))return{label:a.value,index:n};i=[].concat(Object(w.a)(i.slice(n,t.length)),Object(w.a)(i.slice(0,n)))}for(var r=function(t){return e.some((function(e){return e.label===i[t].value}))?"continue":{v:{label:i[t].value,index:i[t].index}}},o=0;o<i.length;o++){var c=r(o);if("continue"!==c&&"object"===typeof c)return c.v}}}},{key:"getCurrentMarkerIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.findIndex((function(t){return e===t.value}))}}]),e}();ft.jsonParser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return"string"===typeof e?JSON.parse(e):Object(nt.isObject)(e)?e:t}catch(n){return t}};var gt,vt,bt,pt=Object.defineProperty,mt=Object.defineProperties,yt=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,It=function(e,t,n){return t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},kt=function(e,t){for(var n in t||(t={}))Ct.call(t,n)&&It(e,n,t[n]);if(xt){var i,a=Object(E.a)(xt(t));try{for(a.s();!(i=a.n()).done;){n=i.value;wt.call(t,n)&&It(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Lt=function(e,t){return mt(e,yt(t))};(vt=gt||(gt={}))[vt.Create=0]="Create",vt[vt.Active=1]="Active",vt[vt.Edit=1]="Edit",vt[vt.None=2]="None",(bt||(bt={})).ActiveArea="#B3B8FF";var Pt=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"isInLine",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=cn.getFootOfPerpendicular(e,t,n),r=a.length;return r<i}}]),e}(),St=Pt;St.setSpecialEdgeStyle=function(e){e.lineCap="butt",e.setLineDash([10,10])},St.setReferenceCtx=function(e){e.lineCap="butt",e.setLineDash([6])},St.calcOptimalIntersection=function(e,t,n,i,a){var r,o,c=1/0;return e.find((function(n,i){if(0!==i){var a=Pt.isInLine(t.pointA,n,e[i-1]),r=Pt.isInLine(t.pointB,n,e[i-1]);return a&&r}}))?{point:n}:(e.forEach((function(l,s){if(0!==s){var u={pointA:e[s-1],pointB:l},d=Pt.lineIntersection(t,u);if(d&&t){var h=d.onLine2,f=d.onLine1,g=d.x,v=d.y,b=Pt.calcDistance(n,d);if(Pt.isOnLine(t.pointB.x,t.pointB.y,l.x,l.y,e[s-1].x,e[s-1].y)){if(Pt.calcDistance(n,d)<i/a){var p=t.pointB,m=cn.getFootOfPerpendicular(p,u.pointA,u.pointB,!0),y=m.footPoint,x=m.length;if(void 0!==x){var C=Pt.calcDistance(u.pointA,y),w=Pt.calcDistance(u.pointB,y);o={point:y,minDistance:x},x===1/0&&(o.point=C>w?u.pointB:u.pointA)}}return}b<c&&h&&f&&(c=b,r={x:g,y:v})}}})),r?{point:r,minDistance:c}:o||void 0)},St.lineIntersection=function(e,t){var n=!1,i=!1,a=Pt.getAxisDiff(e),r=Pt.getAxisDiff(t),o=r.y*a.x-r.x*a.y;if(0===o)return!1;var c=e.pointA.y-t.pointA.y,l=e.pointA.x-t.pointA.x,s=(t.pointB.x-t.pointA.x)*c-(t.pointB.y-t.pointA.y)*l,u=(e.pointB.x-e.pointA.x)*c-(e.pointB.y-e.pointA.y)*l;return(c=s/o)>0&&c<1&&(n=!0),(l=u/o)>0&&l<1&&(i=!0),{x:e.pointA.x+c*(e.pointB.x-e.pointA.x),y:e.pointA.y+c*(e.pointB.y-e.pointA.y),onLine1:n,onLine2:i}},St.getAxisDiff=function(e){return{x:e.pointB.x-e.pointA.x,y:e.pointB.y-e.pointA.y}},St.calcDistance=function(e,t){return Math.sqrt(Math.pow(Math.abs(e.x-t.x),2)+Math.pow(Math.abs(e.y-t.y),2))},St.drawCurveLine=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5?arguments[5]:void 0,o=Te(t,16);e.save(),e.lineCap="round",e.lineJoin="round",e.strokeStyle=n.color,i&&(e.lineWidth=n.lineWidth),a&&Pt.setReferenceCtx(e),t.forEach((function(t,n){var i=null==t?void 0:t.specialEdge,a=o.splice(0,17);e.save(),e.beginPath(),r===n&&(e.lineWidth=4),a.forEach((function(t,n){var a=t.x,r=t.y,o=n>0?"lineTo":"moveTo";i&&Pt.setSpecialEdgeStyle(e),e[o](a,r)})),e.stroke(),e.restore()})),e.restore()},St.calcTwoPointDistance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},St.pointOverTarget=function(e,t,n,i,a,r,o,c,l,s){var u=e;if(!t)return e;if(n===p.Polygon){var d=Pt.getPolygonPointList(i,a);if(0===d.length)return u;if(Gt.isInPolygon(e,d))return u;var h=d.concat(d[0]).map((function(e){return l(e)})),f=l(t),g={pointA:f,pointB:l(e)},v=Pt.calcOptimalIntersection(h,g,f,o,c);if(!v)return t;var b=s(null==v?void 0:v.point);return u.x=b.x,u.y=b.y,u}if(n===p.Rect){var m=i.x,y=i.y,x=i.width,C=i.height;return u.x=cn.withinRange(u.x,[m,m+x]),u.y=cn.withinRange(u.y,[y,y+C]),u}return u.x=cn.withinRange(u.x,[0,r.width]),u.y=cn.withinRange(u.y,[0,r.height]),u},St.getPolygonPointList=function(e,t){var n=e.pointList;return t.lineType===F.Line?n:Gt.createSmoothCurvePoints(n.reduce((function(e,t){return[].concat(Object(w.a)(e),[t.x,t.y])}),[]),.5,!0,20)},St.isOnLine=function(e,t,n,i,a,r){return Math.abs((i-t)/(n-e)*(a-e)+t-r)<1e-6&&a>=e&&a<=n},St.inArea=function(e,t){var n=e.top,i=e.left,a=e.right,r=e.bottom,o=t.x,c=t.y;return c>=n&&c<=r&&o>=i&&o<=a},St.getVHPoint=function(e,t,n,i){var a=Pt.getAngle(e,n);return Math.abs(a)<45?Lt(kt({},t),{y:i.y}):Lt(kt({},t),{x:i.x})},St.getAngle=function(e,t){var n=t.x-e.x,i=t.y-e.y;return 360*Math.atan(i/n)/(2*Math.PI)};var Ot=Object.defineProperty,At=Object.defineProperties,Tt=Object.getOwnPropertyDescriptors,Et=Object.getOwnPropertySymbols,Dt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,Rt=function(e,t,n){return t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Mt=function(e,t){for(var n in t||(t={}))Dt.call(t,n)&&Rt(e,n,t[n]);if(Et){var i,a=Object(E.a)(Et(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Nt.call(t,n)&&Rt(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},_t=function(e,t){return At(e,Tt(t))},jt=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"getOffsetCoordinate",value:function(e,t,n){return{x:e.x*n+t.x,y:e.y*n+t.y}}},{key:"changeDrawOutsideTarget",value:function(e,t,n,i,a,r){return"boolean"!==typeof i||i||(a&&r?(e.x-t.x>(a.x+a.width)*r&&(e.x=(a.x+a.width)*r+t.x),e.x-t.x<a.x*r&&(e.x=a.x*r+t.x),e.y-t.y>(a.y+a.height)*r&&(e.y=(a.y+a.height)*r+t.y),e.y-t.y<a.y*r&&(e.y=a.y*r+t.y)):(e.x-t.x>n.width&&(e.x=n.width+t.x),e.x-t.x<0&&(e.x=t.x),e.y-t.y>n.height&&(e.y=n.height+t.y),e.y-t.y<0&&(e.y=t.y))),e}},{key:"changeCoordinateByRotate",value:function(e,t,n){var i=n.width,a=n.height,r=e.x,o=e.y;switch(t%360){case 90:return{x:a-o,y:r};case 180:return{x:i-r,y:a-o};case 270:return{x:o,y:i-r};default:return e}}},{key:"changeRectByZoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return _t(Mt({},e),{x:e.x*t+n.x,y:e.y*t+n.y,width:e.width*t,height:e.height*t})}},{key:"changePointByZoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return _t(Mt({},e),{x:e.x*t+n.x,y:e.y*t+n.y})}},{key:"changePointListByZoom",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return e.map((function(e){return n.changePointByZoom(e,t,i)}))}},{key:"axisArea",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=e.x,i=e.y,a=[],r=n-t;r<n+t;r+=t/3)for(var o=i-t;o<i+t;o+=t/3)a.push({x:r,y:o});return a}},{key:"getOriginCoordinateWithOffsetCoordinate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}}},{key:"returnClosePointIndex",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=-1,a=0;a<t.length;a++){var r=t[a];this.getIsInScope(e,r,n)&&(i=a)}return i}},{key:"getIsInScope",value:function(e,t,n){return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n}}]),e}(),Bt=function(){function e(t){Object(k.a)(this,e),this.currentPos=t.currentPos,this.zoom=t.zoom,this.basicImgInfo=t.basicImgInfo,this.dependToolName=""}return Object(L.a)(e,[{key:"isDependPolygon",get:function(){return this.dependToolName===p.Polygon}},{key:"isDependRect",get:function(){return this.dependToolName===p.Rect}},{key:"isDependOriginalImage",get:function(){return""===this.dependToolName}},{key:"getAbsCoord",value:function(e){return{x:(e.x-this.currentPos.x)/this.zoom,y:(e.y-this.currentPos.y)/this.zoom}}},{key:"getRenderCoord",value:function(e){return{x:e.x*this.zoom+this.currentPos.x,y:e.y*this.zoom+this.currentPos.y}}},{key:"coordInsideRect",value:function(e,t){var n=t.x,i=t.y,a=t.width,r=t.height;return{x:cn.withinRange(e.x,[n,n+a]),y:cn.withinRange(e.y,[i,i+r])}}},{key:"getPolygonPointList",value:function(e,t){return e===F.Curve?Gt.createSmoothCurvePointsFromPointList(t):t}},{key:"getIntersection",value:function(e,t,n){var i=this.getRenderCoord(t),a={pointA:i,pointB:this.getRenderCoord(e)};return St.calcOptimalIntersection(n,a,i,3,this.zoom)}},{key:"coordInsidePolygon",value:function(e,t,n,i){var a=this,r=n.pointList,o=null==i?void 0:i.lineType;if(0===r.length)return e;var c=this.getPolygonPointList(o,r);if(Gt.isInPolygon(e,c))return e;var l=c.concat(c[0]).map((function(e){return a.getRenderCoord(e)})),s=this.getIntersection(e,t,l);return s?this.getAbsCoord(null==s?void 0:s.point):e}},{key:"coordInsideImage",value:function(e){return this.coordInsideRect(e,_t(Mt({},this.basicImgInfo),{x:0,y:0}))}},{key:"getNextCoordByDependTool",value:function(e,t){return this.isDependRect?this.coordInsideRect(e,this.basicResult):this.isDependPolygon?this.coordInsidePolygon(e,t,this.basicResult,this.dependToolConfig):this.isDependOriginalImage?this.coordInsideImage(e):void 0}},{key:"setDependInfo",value:function(e,t){this.dependToolName=null!=e?e:"",this.dependToolConfig=e?t:void 0}},{key:"setBasicImgInfo",value:function(e){this.basicImgInfo=e}},{key:"setBasicResult",value:function(e){this.basicResult=e}},{key:"setZoomAndCurrentPos",value:function(e,t){this.zoom=e,this.currentPos=t}},{key:"isCoordInsideTarget",value:function(e){if(this.isDependPolygon)return this.isInBasicPolygon(e);if(this.isDependRect){var t=this.basicResult,n=t.x,i=t.y,a=[n,n+t.width],r=[i,i+t.height];return cn.isInRange(e.x,a)&&cn.isInRange(e.y,r)}return cn.isInRange(e.x,[0,this.basicImgInfo.width])&&cn.isInRange(e.y,[0,this.basicImgInfo.height])}},{key:"isInBasicPolygon",value:function(e){var t,n;return Gt.isInPolygon(e,(null==(t=this.basicResult)?void 0:t.pointList)||[],null==(n=this.dependToolConfig)?void 0:n.lineType)}}]),e}(),Ht=Object.defineProperty,Vt=Object.getOwnPropertySymbols,Zt=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable,zt=function(e,t,n){return t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ut=function(e,t){for(var n in t||(t={}))Zt.call(t,n)&&zt(e,n,t[n]);if(Vt){var i,a=Object(E.a)(Vt(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Ft.call(t,n)&&zt(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Gt=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"getHoverPolygonID",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:F.Line,r="",o=1/0,c=jt.axisArea(e,i);return t.forEach((function(e){e.pointList&&c.forEach((function(t){var i=n.calcPolygonSize(e.pointList);n.isInPolygon(t,e.pointList,a)&&i<o&&(r=e.id,o=i)}))})),r}},{key:"calcPolygonSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((null==e?void 0:e.length)<=2)return 0;var t=e.length,n=e.reduce((function(e,n,i,a){var r=a[(i+1)%t];return e+n.x*r.y-r.x*n.y}),0);return Math.abs(n)/2}},{key:"isInPolygon",value:function(e,t){var n,i,a,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.Line,c=0;t=Object(w.a)(t),o===F.Curve&&(t=this.createSmoothCurvePoints(t.reduce((function(e,t){return[].concat(Object(w.a)(e),[t.x,t.y])}),[]),.5,!0,20));var l=t,s=Object(I.a)(l,1);a=s[0];var u=t.length;for(n=1;n<=u;n++)r=t[n%u],e.x>Math.min(a.x,r.x)&&e.x<=Math.max(a.x,r.x)&&e.y<=Math.max(a.y,r.y)&&a.x!==r.x&&(i=(e.x-a.x)*(r.y-a.y)/(r.x-a.x)+a.y,(a.y===r.y||e.y<=i)&&c++),a=r;return c%2!==0}},{key:"createSmoothCurvePointsFromPointList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me,n=this.createSmoothCurvePoints(e.reduce((function(e,t){return[].concat(Object(w.a)(e),[t.x,t.y])}),[]),.5,!1,t);return n.map((function(t,n){var i,a=n/(me+1),r=Math.floor(a),o=null!=(i=e[r])?i:{};return Ut(r===a?Ut({},o):{specialEdge:o.specialEdge},t)}))}},{key:"createSmoothCurvePoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:me;if(e.length<4)return e;var a,r,o,c,l,s,u,d,h,f,g,v,b,p=[],m=e.slice(0);for(n?(m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.push(e[0]),m.push(e[1])):(m.unshift(e[1]),m.unshift(e[0]),m.push(e[e.length-2]),m.push(e[e.length-1])),b=2;b<m.length-4;b+=2)for(o=(m[b+2]-m[b-2])*t,c=(m[b+4]-m[b-0])*t,l=(m[b+3]-m[b-1])*t,s=(m[b+5]-m[b+1])*t,v=0;v<=i;v++)g=v/i,u=2*Math.pow(g,3)-3*Math.pow(g,2)+1,d=-2*Math.pow(g,3)+3*Math.pow(g,2),h=Math.pow(g,3)-2*Math.pow(g,2)+g,f=Math.pow(g,3)-Math.pow(g,2),a=u*m[b]+d*m[b+2]+h*o+f*c,r=u*m[b+1]+d*m[b+3]+h*l+f*s,p.push(a),p.push(r);for(var y=[],x=0;x<p.length-1;x+=2)y.push({x:p[x],y:p[x+1]});if(n)for(var C=0;C<i+1;C++){var w=y.shift();y.push(w)}return y}},{key:"getPolygonByID",value:function(e,t){return e.find((function(e){return e.id===t}))}},{key:"getPolygonByIDs",value:function(e,t){if(t&&(null==t?void 0:t.length)>0)return e.filter((function(e){return t.includes(e.id)}))}},{key:"getHoverEdgeIndex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.Line,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=Object(w.a)(t);n===F.Curve?a=this.createSmoothCurvePoints(t.reduce((function(e,t){return[].concat(Object(w.a)(e),[t.x,t.y])}),[]),.5,!0,me):n===F.Line&&a.push(a[0]);for(var r=-1,o=i,c=0;c<a.length-1;c++){var l=cn.getFootOfPerpendicular(e,a[c],a[c+1]),s=l.length;s<o&&(r=c,o=s)}return-1===r?-1:n===F.Curve?Math.floor(r/me):r}},{key:"getClosestPoint",value:function(e,t){var n,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.Line,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=arguments.length>4?arguments[4]:void 0,c=!1,l=null==(n=null==o?void 0:o.isClose)||n,s="",u=-1,d=1/0,h=e,f=20,g=!1;return t.forEach((function(t){if(!g&&t.pointList)switch(a){case F.Line:ft.findAllLine(t.pointList,l).forEach((function(n,i){if(!g){var a=cn.getFootOfPerpendicular(e,n.point1,n.point2),o=a.length,l=a.footPoint,f=cn.getLineLength(n.point1,e),v=cn.getLineLength(n.point2,e);f<2*r&&(l=n.point1,o=f,g=!0),v<2*r&&(l=n.point2,o=v,g=!0),o<d&&o<r&&(s=t.id,u=i,d=o,h=l,c=!0)}}));break;case F.Curve:for(var n=i.createSmoothCurvePoints(t.pointList.reduce((function(e,t){return[].concat(Object(w.a)(e),[t.x,t.y])}),[]),.5,l,f),o=0;o<n.length-1;o++){var v=cn.getFootOfPerpendicular(e,n[o],n[o+1]),b=v.length,p=v.footPoint;b<d&&b<r&&(s=t.id,u=Math.floor(o/(f+1)),d=b,h=p,c=!0)}}})),{dropFoot:h,closestEdgeIndex:u,closestPolygonID:s,hasClosed:c}}},{key:"isPointListInPolygon",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.Line;return e.every((function(e){return n.isInPolygon(e,t,i)}))}},{key:"isPointListOutSidePolygon",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.Line;return e.some((function(e){return!n.isInPolygon(e,t,i)}))}},{key:"getPolygonArea",value:function(e){for(var t=0,n=0,i=e.length;n<i;n++){t+=e[n].x*e[n===e.length-1?0:n+1].y*.5,t-=e[n===e.length-1?0:n+1].x*e[n].y*.5}return Math.abs(t)}},{key:"updatePolygonByRotate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,i=1;return e===Je.Anticlockwise&&(i=-1),i*=t,cn.rotateRectPointList(i,n)}},{key:"deletePolygonLastPoint",value:function(e,t,n,i){return n===i.length-1?e:[].concat(Object(w.a)(e),[{x:t[0],y:t[1]}])}},{key:"concatBeginAndEnd",value:function(e){return e.length<1?e:[].concat(Object(w.a)(e),[e[0]])}},{key:"segmentPolygonByPolygon",value:function(t,n){var i,a;try{var r=Object(Me.polygon)([Object(w.a)(e.concatBeginAndEnd(t.map((function(e){return[e.x,e.y]}))))]);return n.forEach((function(t){var n=Object(Me.polygon)([Object(w.a)(e.concatBeginAndEnd(t.pointList.map((function(e){return[e.x,e.y]}))))]),i=Object(Me.difference)(r,n);i&&(r=i)})),(null!=(a=null==(i=null==r?void 0:r.geometry)?void 0:i.coordinates.map((function(t){var n;return"MultiPolygon"===(null==(n=null==r?void 0:r.geometry)?void 0:n.type)?t[0].reduce(e.deletePolygonLastPoint,[]):t.reduce(e.deletePolygonLastPoint,[])})))?a:[]).reduce((function(e,t){var n=t.length,i=t.filter((function(e,i){var a=(i+1)%n;return!jt.getIsInScope(e,t[a],1)}));return i.length<3?e:[].concat(Object(w.a)(e),[i])}),[])}catch(o){console.error(o)}}},{key:"getPolygonPointList",value:function(e,t){var n=t.find((function(t){return t.id===e}));return n&&n.pointList&&n.pointList.length>0?n.pointList:[]}},{key:"getWrapPolygonIndex",value:function(t,n){return n.findIndex((function(n){return e.isPointListInPolygon(t,n.pointList)}))}},{key:"clipPolygonFromWrapPolygon",value:function(t,n){var i=e.isPolygonClosewise(n),a=e.isPolygonClosewise(t),r=e.getClosePointDistanceFromPolygon(t[0],n),o=n[r],c=[].concat(Object(w.a)(n.slice(0,r)),[o],Object(w.a)(t),[t[0]],Object(w.a)(n.slice(r,n.length)));return i===a&&(c=[].concat(Object(w.a)(n.slice(0,r)),[o,t[0]],Object(w.a)(t.reverse()),Object(w.a)(n.slice(r,n.length)))),c}},{key:"isPolygonClosewise",value:function(e){var t,n,i,a,r=e.length,o=0;if(r<3)return 0;for(t=0;t<r;t++)i=(t+2)%r,a=(e[n=(t+1)%r].x-e[t].x)*(e[i].y-e[n].y),(a-=(e[n].y-e[t].y)*(e[i].x-e[n].x))<0?o--:a>0&&o++;return o>0?1:o<0?-1:0}},{key:"getClosePointDistanceFromPolygon",value:function(e,t){var n=Number.MAX_SAFE_INTEGER,i=-1;return t.forEach((function(t,a){var r=St.calcDistance(e,t);r<n&&(n=r,i=a)})),i}},{key:"combinePolygonWithPolygon",value:function(t,n){var i,a;try{var r=Object(Me.polygon)([Object(w.a)(e.concatBeginAndEnd(t.pointList.map((function(e){return[e.x,e.y]}))))]),o=Object(Me.polygon)([Object(w.a)(e.concatBeginAndEnd(n.pointList.map((function(e){return[e.x,e.y]}))))]),c=Object(Me.union)(r,o),l=[],s=t;if(1===(null==(a=null==(i=null==c?void 0:c.geometry)?void 0:i.coordinates)?void 0:a.length)){l.push(n.id);var u=null==c?void 0:c.geometry.coordinates.map((function(t){var n;return"MultiPolygon"===(null==(n=null==c?void 0:c.geometry)?void 0:n.type)?t[0].reduce(e.deletePolygonLastPoint,[]):t.reduce(e.deletePolygonLastPoint,[])}))[0];s.pointList=u}return{newPolygon:s,unionList:l}}catch(d){console.error(d)}}}]),e}(),Wt=Math.pow,Kt=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"add",value:function(e,t){return{x:e.x+t.x,y:e.y+t.y}}},{key:"getVector",value:function(e,t){return{x:t.x-e.x,y:t.y-e.y}}},{key:"len",value:function(e){return Math.sqrt(Wt(e.x,2)+Wt(e.y,2))}},{key:"dotProduct",value:function(e,t){return e.x*t.x+e.y+t.y}}]),e}(),Yt=Object.defineProperty,Xt=Object.defineProperties,Jt=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,qt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,en=function(e,t,n){return t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},tn=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"tanAPlusB",value:function(e,t){return(e+t)/(1-e*t)}},{key:"sinAPlusB",value:function(e,t,n,i){return i*e+t*n}},{key:"cosAPlusB",value:function(e,t,n,i){return t*i-e*n}}]),e}(),nn=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"getRotate",value:function(e){return e+90>=360?e+90-360:e+90}},{key:"getLineLength",value:function(e,t){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}},{key:"getTextArea",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:de,a=arguments.length>4?arguments[4]:void 0;if("string"!==typeof t)return{width:0,height:0};var r=e.getContext("2d");r.font=i;var o=0;"undefined"===typeof a&&(a=e&&parseInt(window.getComputedStyle(e).lineHeight,10)||parseInt(window.getComputedStyle(document.body).lineHeight,10));for(var c=e&&parseInt(window.getComputedStyle(e).fontSize,10)||parseInt(window.getComputedStyle(document.body).fontSize,10)||0,l=t.split("\n"),s=0,u=0;u<l.length;u++){for(var d=l[u].split(""),h="",f=0;f<d.length;f++){var g=h+d[f],v=r.measureText(g),b=v.width;b>n&&f>0?(h=d[f],o+=a,s=n):(h=g,b>s&&(s=b))}u!==l.length-1&&(o+=a)}return{width:s,height:o+c,lineHeight:a,fontHeight:c}}},{key:"getLineCenterPoint",value:function(e){var t=Object(I.a)(e,2),n=t[0],i=t[1],a=Kt.getVector(n,i);return{x:n.x+a.x/2,y:n.y+a.y/2}}},{key:"getPerpendicularLine",value:function(e){if(2===e.length){var t=Object(I.a)(e,2),n=t[0],i=t[1];return[i,{x:i.x+i.y-n.y,y:i.y-(i.x-n.x)}]}}},{key:"getPerpendicularFootOfLine",value:function(e,t){if(2!==e.length)return e;var n=this.getPerpendicularLine(e);if(!n)return e;var i=Object(I.a)(n,2),a=i[0],r=i[1];return this.getFootOfPerpendicular(t,a,r).footPoint}},{key:"getQuadrangleFromTriangle",value:function(e){if(3!==e.length)return e;var t=Object(I.a)(e,3),n=t[0],i=t[1],a=t[2];return[n,i,a,{x:a.x+n.x-i.x,y:a.y+n.y-i.y}]}},{key:"getRectPerpendicularOffset",value:function(e,t,n){var i=Object(I.a)(n,2),a=i[0],r=i[1],o=this.getFootOfPerpendicular(e,a,r).footPoint,c=this.getFootOfPerpendicular(t,a,r).footPoint,l={x:o.x-c.x,y:o.y-c.y},s=Kt.add(t,l);return Kt.getVector(e,s)}},{key:"getArrayIndex",value:function(e,t){return e<0?t+e:e>=t?e-t:e}},{key:"getPointListFromPointOffset",value:function(e,t,n){var i=this.getArrayIndex(t-1,e.length),a=this.getArrayIndex(t+1,e.length),r=this.getArrayIndex(t-2,e.length),o=Object(w.a)(e);o[t]=Kt.add(o[t],n);var c=this.getFootOfPerpendicular(o[t],o[r],o[i]).footPoint,l=this.getFootOfPerpendicular(o[t],o[a],o[r]).footPoint;return o[i]=c,o[a]=l,o}},{key:"getRectCenterPoint",value:function(e){var t=Object(I.a)(e,3),n=t[0],i=t[2];return{x:(n.x+i.x)/2,y:(n.y+i.y)/2}}},{key:"rotateRectPointList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1?arguments[1]:void 0,n=this.getRectCenterPoint(t),i=Math.PI,a=Math.sin(e*i/180),r=Math.cos(e*i/180);return t.map((function(e){var t=Kt.getVector(n,e),i=Kt.len(t),o=t.y/i,c=t.x/i;return{x:i*tn.cosAPlusB(o,c,a,r)+n.x,y:i*tn.sinAPlusB(o,c,a,r)+n.y}}))}},{key:"getRectangleByRightAngle",value:function(t,n){if(2!==n.length)return n;var i=e.getPerpendicularFootOfLine(n,t);return e.getQuadrangleFromTriangle([].concat(Object(w.a)(n),[i]))}},{key:"getRadiusFromQuadrangle",value:function(e){var t=Object(I.a)(e,3),n=t[1],i=t[2],a=i.y-n.y,r=n.x-i.x,o=a/this.getLineLength(n,i),c=Math.acos(o);return r>0?2*Math.PI-c:c}},{key:"getCollectionPointByAnnotationData",value:function(e){var t=[],n=new Set,i=e.filter((function(e){return"point"===e.type})).map((function(e){return e.annotation})),a=e.filter((function(e){return!!["polygon","line"].includes(e.type)})).map((function(e){var t,n,i=e.annotation;return"polygon"===e.type?(t=function(e,t){for(var n in t||(t={}))qt.call(t,n)&&en(e,n,t[n]);if(Qt){var i,a=Object(E.a)(Qt(t));try{for(a.s();!(i=a.n()).done;)n=i.value,$t.call(t,n)&&en(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},i),n={pointList:Gt.concatBeginAndEnd(i.pointList)},Xt(t,Jt(n))):i})),r=function(e,i){var a=Gt.getClosestPoint(e,i,F.Line,1,{isClose:!1}).dropFoot;if(a!==e){var r="".concat(a.x," + ").concat(a.y);n.has(r)||t.push(e),n.add(r)}};return i.forEach((function(e){r(e,a)})),a.forEach((function(e){var t;t=e.id,a.forEach((function(e,n){if(e.id!==t){var i=Object(w.a)(a);i.splice(n,1),e.pointList.forEach((function(e){r(e,i)}))}}))})),{connectionPoints:t}}}]),e}(),an=nn;an.isInRange=function(e,t){var n=Math.min.apply(Math,Object(w.a)(t)),i=Math.max.apply(Math,Object(w.a)(t));return(Array.isArray(e)?e:[e]).every((function(e){return function(e){return e<=i&&e>=n}(e)}))},an.withinRange=function(e,t){var n=Math.min.apply(Math,Object(w.a)(t)),i=Math.max.apply(Math,Object(w.a)(t));return e>i?i:e<n?n:e},an.calcViewportBoundaries=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:me,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return{top:0,bottom:0,left:0,right:0};var a=20/i,r=[],o=[],c=e;t&&(c=Te(e,n)),c.forEach((function(e){var t=e.x,n=e.y;r.push(t),o.push(n)}));var l=Math.min.apply(Math,r),s=Math.max.apply(Math,r),u=Math.min.apply(Math,o),d=Math.max.apply(Math,o),h=s-l,f=d-u;if(h<a){var g=(a-h)/2;l-=g,s+=g}if(f<a){var v=(a-f)/2;u-=v,d+=v}return{top:u,bottom:d,left:l,right:s}},an.getFootOfPerpendicular=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:0,y:0},r=t.x-n.x,o=t.y-n.y;if(Math.abs(r)<1e-8&&Math.abs(o)<1e-8)return a=t;var c=(e.x-t.x)*(t.x-n.x)+(e.y-t.y)*(t.y-n.y);c/=r*r+o*o,a.x=t.x+c*r,a.y=t.y+c*o;var l=nn.getLineLength(e,a),s=2,u=Math.min(t.x,n.x),d=Math.max(t.x,n.x),h=Math.min(t.y,n.y),f=Math.max(t.y,n.y),g=!(nn.isInRange(e.x,[u,d])||nn.isInRange(e.y,[h,f])),v=e.x>d+s||e.x<u-s||e.y>f+s||e.y<h-s,b=i?g:v;return b?{footPoint:a,length:1/0}:{footPoint:a,length:l}};var rn,on,cn=an,ln=Object.defineProperty,sn=Object.defineProperties,un=Object.getOwnPropertyDescriptors,dn=Object.getOwnPropertySymbols,hn=Object.prototype.hasOwnProperty,fn=Object.prototype.propertyIsEnumerable,gn=function(e,t,n){return t in e?ln(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},vn=function(e,t){for(var n in t||(t={}))hn.call(t,n)&&gn(e,n,t[n]);if(dn){var i,a=Object(E.a)(dn(t));try{for(a.s();!(i=a.n()).done;){n=i.value;fn.call(t,n)&&gn(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},bn=function(e,t){return sn(e,un(t))},pn=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"composeResult",value:function(e,t,n,i,a){try{var r=JSON.parse(e),o=ft.getCurrentStepInfo(t,i),c=o.dataSourceStep,l="step_".concat(o.step);if(Object.assign(r,a),r[l]){var s=r[l];return s.result?(s.result=n,JSON.stringify(r)):JSON.stringify(bn(vn({},r),Object(D.a)({},l,bn(vn({},r[l]),{result:n}))))}return JSON.stringify(bn(vn({},r),Object(D.a)({},l,{dataSourceStep:c,toolName:o.tool,result:n})))}catch(u){return e}}},{key:"changeCoordinateByRotate",value:function(e,t,n){var i=e.x,a=e.y,r=e.width,o=e.height,c=jt.changeCoordinateByRotate({x:i,y:a},t,n);switch(t%360){case 90:return bn(vn({},e),{x:c.x-o,y:c.y,width:o,height:r});case 180:return bn(vn({},e),{x:c.x-r,y:c.y-o});case 270:return bn(vn({},e),{x:c.x,y:c.y-r,width:o,height:r});default:return e}}},{key:"translateRect2Points",value:function(e){var t=e.x,n=e.y,i=e.width,a=e.height;return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+a},{x:t,y:n+a}]}},{key:"translatePoints2Rect",value:function(e,t){if(4===e.length){var n=e[0],i=n.x,a=n.y,r=e[1].x-e[0].x,o=e[2].y-e[1].y;return bn(vn({},t),{x:i,y:a,width:r,height:o})}}},{key:"getRectPointList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[{x:e.x*t,y:e.y*t},{x:(e.x+e.width)*t,y:e.y*t},{x:(e.x+e.width)*t,y:(e.y+e.height)*t},{x:e.x*t,y:(e.y+e.height)*t}]}},{key:"getRectEdgeList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getRectPointList(e,t),i=n.length;return n.map((function(e,t){return{begin:e,end:n[(t+1)%i]}}))}},{key:"isInRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return e.x>=t.x*i-n&&e.x<=(t.x+t.width)*i+n&&e.y>=t.y*i-n&&e.y<=(t.y+t.height)*i+n}},{key:"getRectUnderZoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.x,i=e.y,a=e.width,r=e.height;return bn(vn({},e),{x:n*t,y:i*t,width:a*t,height:r*t})}},{key:"isRectNotInPolygon",value:function(e,t){return this.getRectPointList(e).some((function(e){return!Ee(e,t)}))}}]),e}();(on=rn||(rn={}))[on.A=65]="A",on[on.B=66]="B",on[on.C=67]="C",on[on.D=68]="D",on[on.E=69]="E",on[on.F=70]="F",on[on.G=71]="G",on[on.H=72]="H",on[on.L=76]="L",on[on.R=82]="R",on[on.Z=90]="Z",on[on.W=87]="W",on[on.X=88]="X",on[on.Y=89]="Y",on[on.S=83]="S",on[on.Q=81]="Q",on[on.Delete=46]="Delete",on[on.F11=122]="F11",on[on.Space=32]="Space",on[on.Esc=27]="Esc",on[on.Left=37]="Left",on[on.Up=38]="Up",on[on.Right=39]="Right",on[on.Down=40]="Down",on[on.Enter=13]="Enter",on[on.Ctrl=17]="Ctrl",on[on.Alt=18]="Alt",on[on.Shift=16]="Shift",on[on.Tab=9]="Tab",on[on.BackSpace=8]="BackSpace";var mn,yn,xn,Cn=rn;(yn=mn||(mn={})).NoRotateNotice="noRotateNotice",yn.RectErrorSizeNotice="rectErrorSizeNotice",yn.TextCheckNumberErrorNotice="textCheckNumberErrorNotice",yn.TextCheckEnglishErrorNotice="textCheckEnglishErrorNotice",yn.TextCheckCustomErrorNotice="textCheckCustomErrorNotice",yn.UpperLimitErrorNotice="UpperLimitErrorNotice",yn.LowerLimitErrorNotice="LowerLimitErrorNotice",yn.InvalidImage="InvalidImage",yn.DisableDelete="DisableDelete",yn.ClearPartialData="ClearPartialData",yn.MarkerFinish="MarkerFinish",yn.LowerLimitPoint="LowerLimitPoint",yn.NoRotateInDependence="noRotateInDependence",yn.UnableToReannotation="unableToReannotation",yn.ForbiddenCreationOutsideBoundary="ForbiddenCreationOutsideBoundary",yn.SuccessfulEdgeAdsorption="SuccessfulEdgeAdsorption";var wn,In=(xn={},Object(D.a)(xn,mn.NoRotateNotice,"This Image contains data and cannot be rotated"),Object(D.a)(xn,mn.RectErrorSizeNotice,"The drawing frame size is smaller than the minimum drawing size"),Object(D.a)(xn,mn.TextCheckNumberErrorNotice,"Please enter in number-only format"),Object(D.a)(xn,mn.TextCheckEnglishErrorNotice,"Please enter in English only format"),Object(D.a)(xn,mn.TextCheckCustomErrorNotice,"Please enter in the required format"),Object(D.a)(xn,mn.UpperLimitErrorNotice,"The number of vertices is not more than"),Object(D.a)(xn,mn.LowerLimitErrorNotice,"The number of vertices is not less than"),Object(D.a)(xn,mn.InvalidImage,"Invalid image, please skip this image"),Object(D.a)(xn,mn.DisableDelete,"Disable delete"),Object(D.a)(xn,mn.ClearPartialData,"Clear partial data"),Object(D.a)(xn,mn.MarkerFinish,"ListAnnotation is finished"),Object(D.a)(xn,mn.LowerLimitPoint,"The maximum number of points has been reached"),Object(D.a)(xn,mn.NoRotateInDependence,"Disallow rotation in dependent cases"),Object(D.a)(xn,mn.UnableToReannotation,"Unabled to reannotation"),Object(D.a)(xn,mn.ForbiddenCreationOutsideBoundary,"Fobid creation outside boundary"),Object(D.a)(xn,mn.SuccessfulEdgeAdsorption,"Successful edge adsorption"),xn),kn=(wn={},Object(D.a)(wn,mn.NoRotateNotice,"\u672c\u56fe\u542b\u6709\u6570\u636e\uff0c\u65e0\u6cd5\u8fdb\u884c\u65cb\u8f6c"),Object(D.a)(wn,mn.RectErrorSizeNotice,"\u7ed8\u5236\u6846\u5c3a\u5bf8\u5c0f\u4e8e\u6700\u5c0f\u7ed8\u5236\u5c3a\u5bf8"),Object(D.a)(wn,mn.TextCheckNumberErrorNotice,"\u8bf7\u6309\u4ec5\u6570\u5b57\u7684\u683c\u5f0f\u8f93\u5165"),Object(D.a)(wn,mn.TextCheckEnglishErrorNotice,"\u8bf7\u6309\u4ec5\u82f1\u6587\u7684\u683c\u5f0f\u8f93\u5165"),Object(D.a)(wn,mn.TextCheckCustomErrorNotice,"\u8bf7\u6309\u8981\u6c42\u7684\u683c\u5f0f\u8f93\u5165"),Object(D.a)(wn,mn.UpperLimitErrorNotice,"\u9876\u70b9\u6570\u4e0d\u591a\u4e8e"),Object(D.a)(wn,mn.LowerLimitErrorNotice,"\u9876\u70b9\u6570\u4e0d\u5c11\u4e8e"),Object(D.a)(wn,mn.InvalidImage,"\u65e0\u6548\u56fe\u7247\uff0c\u8bf7\u8df3\u8fc7\u6b64\u56fe"),Object(D.a)(wn,mn.DisableDelete,"\u8be5\u6570\u636e\u7981\u6b62\u5220\u9664"),Object(D.a)(wn,mn.ClearPartialData,"\u5b58\u5728\u90e8\u5206\u6570\u636e\u65e0\u6cd5\u6e05\u9664"),Object(D.a)(wn,mn.MarkerFinish,"\u5217\u8868\u6807\u6ce8\u5df2\u5b8c\u6210"),Object(D.a)(wn,mn.LowerLimitPoint,"\u5df2\u5230\u8fbe\u6807\u70b9\u6570\u91cf\u4e0a\u9650"),Object(D.a)(wn,mn.NoRotateInDependence,"\u4f9d\u8d56\u60c5\u51b5\u4e0b\u65e0\u6cd5\u8fdb\u884c\u65cb\u8f6c"),Object(D.a)(wn,mn.UnableToReannotation,"\u65e0\u6cd5\u8fdb\u884c\u7eed\u6807\u64cd\u4f5c"),Object(D.a)(wn,mn.ForbiddenCreationOutsideBoundary,"\u8fb9\u754c\u5916\u7981\u6b62\u521b\u5efa"),Object(D.a)(wn,mn.SuccessfulEdgeAdsorption,"\u8fb9\u7f18\u5438\u9644\u6210\u529f"),wn),Ln=Object(L.a)((function e(){Object(k.a)(this,e)}));Ln.getMessagesByLocale=function(e,t){switch(t){case Ye.US:return In[e];case Ye.Zh:default:return kn[e]}};var Pn,Sn='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ccc"/></g></g></svg>',On='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#f33"/></g></g></svg>',An=Sn,Tn=61,En=80,Dn=62,Nn=20,Rn=55,Mn=55,_n=40,jn=80,Bn=240,Hn=320,Vn="rgba(102, 111, 255, 1)",Zn=["rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"],Fn=[Sn,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#800cf9"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#01ff30"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ff88f7"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ffe232"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#994217"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#0282fa"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ff2323"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#00ffea"/></g></g></svg>'],zn={1:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#1f0bf9"/></g></g></svg>',3:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#3fe"/></g></g></svg>',5:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#33fe33"/></g></g></svg>',7:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#fdff37"/></g></g></svg>',9:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#f70efa"/></g></g></svg>'},Un="rgba(255, 51, 51, 1)",Gn="rgba(204, 204, 204, 1)",Wn=(Pn={},Object(D.a)(Pn,_.lc,"rgba(153, 51, 255, 1)"),Object(D.a)(Pn,_.rc,"rgba(51, 153, 255, 1)"),Object(D.a)(Pn,_.clc,"rgba(46, 230, 46, 1)"),Object(D.a)(Pn,_.crc,"rgba(255, 51, 51, 1)"),Pn),Kn=Object.defineProperty,Yn=Object.defineProperties,Xn=Object.getOwnPropertyDescriptors,Jn=Object.getOwnPropertySymbols,Qn=Object.prototype.hasOwnProperty,qn=Object.prototype.propertyIsEnumerable,$n=function(e,t,n){return t in e?Kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ei=function(e,t){for(var n in t||(t={}))Qn.call(t,n)&&$n(e,n,t[n]);if(Jn){var i,a=Object(E.a)(Jn(t));try{for(a.s();!(i=a.n()).done;){n=i.value;qn.call(t,n)&&$n(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},ti=function(e,t){return Yn(e,Xn(t))},ni=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"getAttributeIcon",value:function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.findIndex((function(t){return t.value===e})),r=null!=(n=Fn[a%Fn.length])?n:An;i||(r=On),r="";var o=new Image;return o.src=r,o}},{key:"checkString",value:function(e,t){var n="";switch(e){case ne.Order:case ne.NumberOnly:n="^[0-9]+$";break;case ne.EnglishOnly:n="^[A-Za-z]+$";break;case ne.CustomFormat:n=t}return n}},{key:"checkTextAttibute",value:function(e,t){if(void 0===e||""===e)return!0;try{return new RegExp(t).test(e)}catch(n){return!1}}},{key:"getAttributeShowText",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{var a=i.findIndex((function(t){return t.value===e}));return null!=(n=null==(t=i[a])?void 0:t.key)?n:e}catch(r){return e}}},{key:"getAttributeIndex",value:function(e,t){try{var n=t.findIndex((function(t){return t.value===e}));return n>=8?n%8:n}catch(i){return-1}}},{key:"getAttributeColor",value:function(e,t){try{var n=this.getAttributeIndex(e,t);return-1===n?Gn:Zn[n%Zn.length]}catch(i){return Gn}}},{key:"getTextAttribute",value:function(e,t){try{if(t===ne.Order){var n=e.map((function(e){return parseInt(e.textAttribute,10)})).filter((function(e){return Object(nt.isNumber)(e)&&e<Number.MAX_SAFE_INTEGER&&e>=0}));n.sort((function(e,t){return e-t}));var i=n.pop();return"".concat((i||0)+1)}return""}catch(a){return""}}},{key:"textChange",value:function(e,t,n){return n.map((function(n){return n.id===t?ti(ei({},n),{textAttribute:e}):n}))}},{key:"getErrorNotice",value:function(e,t){switch(e){case ne.Order:case ne.NumberOnly:return Ln.getMessagesByLocale(mn.TextCheckNumberErrorNotice,t);case ne.EnglishOnly:return Ln.getMessagesByLocale(mn.TextCheckEnglishErrorNotice,t);case ne.CustomFormat:return Ln.getMessagesByLocale(mn.TextCheckCustomErrorNotice,t);default:return""}}},{key:"textAttributeValidate",value:function(e,t,n){try{return new RegExp(this.checkString(e,t)).test(n)}catch(i){}}},{key:"checkTextAttribute",value:function(e,t,n,i){var a=this,r=!1;return n.forEach((function(n){void 0!==(null==n?void 0:n.textAttribute)&&""!==(null==n?void 0:n.textAttribute)&&(i&&n.id!==i||a.textAttributeValidate(e,t,n.textAttribute)||(r=!0))})),!!r}},{key:"changeTextAttributeInLog",value:function(e,t){return null==e?void 0:e.map((function(e){return null==e?void 0:e.map((function(e){if((null==t?void 0:t.findIndex((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)})))>-1){var n=null==t?void 0:t.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}));return ti(ei({},e),{textAttribute:null==n?void 0:n.textAttribute})}return e}))}))}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;if(!0===n){var a=(null==t?void 0:t.findIndex((function(t){return(null==t?void 0:t.value)===e})))%Zn.length+1;return Fn[a]}return i}},{key:"getAttributeByKeycode",value:function(e,t){var n,i;return cn.isInRange(e,[48,57])&&(i=e-48),cn.isInRange(e,[96,105])&&(i=e-96),0===i?"":i?null==(n=t[i-1])?void 0:n.value:void 0}}]),e}(),ii=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"getMousePositionOnCanvasFromEvent",value:function(e,t){if(t&&e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}return null}},{key:"getClientRect",value:function(e){if(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,width:t.width,height:t.height}}return null}},{key:"getSize",value:function(e){if(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height}}return null}},{key:"inViewPort",value:function(e,t){return!!e&&(cn.isInRange(e.x,[t.left,t.right])&&cn.isInRange(e.y,[t.top,t.bottom]))}}]),e}();ii.getViewPort=function(e,t,n){var i=e.width,a=e.height,r=t.x,o=(0-t.y)/n,c=(0-r)/n;return{top:o,bottom:o+a/n,left:c,right:c+i/n}},ii.getPixelRatio=function(e){if(!e||!window)return 1;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t};var ai=n(172),ri=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"deg2rad",value:function(e){return e*Math.PI/180}},{key:"rad2deg",value:function(e){return 180*e/Math.PI}}]),e}(),oi=Object.defineProperty,ci=Object.defineProperties,li=Object.getOwnPropertyDescriptors,si=Object.getOwnPropertySymbols,ui=Object.prototype.hasOwnProperty,di=Object.prototype.propertyIsEnumerable,hi=function(e,t,n){return t in e?oi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},fi=function(e,t){for(var n in t||(t={}))ui.call(t,n)&&hi(e,n,t[n]);if(si){var i,a=Object(E.a)(si(t));try{for(a.s();!(i=a.n()).done;){n=i.value;di.call(t,n)&&hi(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},gi=function(e,t){return ci(e,li(t))},vi={x:0,y:0},bi="",pi=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"drawLine",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.getContext("2d"),r=i.color,o=void 0===r?bi:r,c=i.thickness,l=void 0===c?1:c,s=i.lineCap,u=void 0===s?"round":s;a.save(),a.strokeStyle=o,a.lineWidth=l,a.lineCap=u,a.beginPath(),a.moveTo(t.x,t.y),a.lineTo(n.x+1,n.y+1),a.stroke(),a.restore()}},{key:"drawRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.getContext("2d"),a=n.color,r=void 0===a?bi:a,o=n.thickness,c=void 0===o?1:o,l=n.lineCap,s=void 0===l?"round":l,u=n.hiddenText,d=void 0!==u&&u,h=n.lineDash;if(i.save(),i.strokeStyle=r,i.lineWidth=c,i.lineCap=s,Array.isArray(h)&&i.setLineDash(h),i.fillStyle=r,i.strokeRect(t.x,t.y,t.width,t.height),!1===d){var f="";if(t.attribute&&(f="".concat(f,"  ").concat(t.attribute)),this.drawText(e,{x:t.x,y:t.y-5},f),t.textAttribute){var g="".concat(~~t.width," * ").concat(~~t.height),v=7*g.length,b=0,p=Math.max(20,t.width-v);this.drawText(e,{x:t.x,y:t.y+t.height+20+b},t.textAttribute,{textMaxWidth:p})}}i.restore()}},{key:"drawRectWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.getContext("2d"),a=n.color,r=void 0===a?bi:a;i.save(),i.fillStyle=r,i.fillRect(t.x,t.y,t.width,t.height),i.restore()}},{key:"drawTagByDom",value:function(e,t,n){var i=e;if((null==t?void 0:t.length)>0){var a=document.createElement("div");return a.innerHTML=t,a.setAttribute("id",n),null==i||i.appendChild(a),a}}},{key:"drawTag",value:function(e,t){var n,i=null==e?void 0:e.parentNode,a=window.self.document.getElementById("tagToolTag");if(a&&i&&i.contains(a)&&(null==i||i.removeChild(a)),(null==t?void 0:t.length)>0){var r=document.createElement("div");return r.innerHTML=null!=(n=t.reduce((function(e,t){return"".concat(e).concat(t.keyName,": ").concat(t.value.join(" \u3001 "),"\n")}),""))?n:"",r.setAttribute("id","tagToolTag"),null==i||i.appendChild(r),r}}},{key:"drawLineWithPointList",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t.length<2)){var a=e.getContext("2d"),r=i.color,o=void 0===r?bi:r,c=i.thickness,l=void 0===c?1:c,s=i.lineCap,u=void 0===s?"round":s,d=i.lineType,h=void 0===d?F.Line:d,f=i.lineDash,g=i.hoverEdgeIndex;a.save();var v=function(){a.strokeStyle=o,a.lineWidth=l,a.lineCap=u,Array.isArray(f)?a.setLineDash(f):a.setLineDash([])};v(),h===F.Curve?(void 0!==g&&g>-1&&t.push(t[0]),t=Gt.createSmoothCurvePointsFromPointList(Object(w.a)(t),me),void 0!==g&&g>-1&&(t=t.slice((me+1)*g,(me+1)*(g+1)))):void 0!==g&&g>-1&&(t=(t=[].concat(Object(w.a)(t),[t[0]])).slice(g,g+2));var b=[];a.beginPath(),a.moveTo(t[0].x,t[0].y);for(var p=0;p<t.length-1;p++)t[p].specialEdge&&b.push({i1:p,i2:p+1}),a.lineTo(t[p+1].x,t[p+1].y);a.stroke(),a.save(),a.lineWidth=.8*l,a.lineCap="butt",a.strokeStyle="white",a.setLineDash([3,3]),b.forEach((function(e){var n=t[e.i1],i=t[e.i2];a.beginPath(),a.moveTo(n.x,n.y),a.lineTo(i.x,i.y),a.stroke()})),a.restore();var m=4,y=2;return t.forEach((function(t){t.specialPoint&&(n.drawSpecialPoint(e,t,m+y,o),n.drawSpecialPoint(e,t,m,"white"))})),a.restore(),t}}},{key:"drawCircle",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.getContext("2d"),r=i.startAngleDeg,o=void 0===r?0:r,c=i.endAngleDeg,l=void 0===c?360:c,s=i.thickness,u=void 0===s?1:s,d=i.color,h=void 0===d?bi:d,f=i.fill,g=void 0===f?bi:f,v=ri.deg2rad(o),b=ri.deg2rad(l);a.save(),a.beginPath(),a.strokeStyle=h,a.fillStyle=g,a.lineWidth=u,a.arc(t.x,t.y,n,v,b,!1),a.stroke(),g&&a.fill(),a.closePath(),a.restore()}},{key:"drawCircleWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.getContext("2d"),r=i.color,o=void 0===r?bi:r;a.save();var c=ri.deg2rad(0),l=ri.deg2rad(360);a.fillStyle=o,a.beginPath(),a.arc(t.x,t.y,n,c,l,!1),a.fill(),a.restore()}},{key:"drawSpecialPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=arguments.length>3?arguments[3]:void 0,a=e.getContext("2d"),r=t.x,o=t.y;a.save(),a.beginPath(),a.fillStyle=i;var c=1.5*n,l=c*Math.sqrt(3)/2,s=c/2;a.moveTo(r,o-c),a.lineTo(r-l,o+s),a.lineTo(r+l,o+s),a.closePath(),a.fill(),a.restore()}},{key:"drawPolygon",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.isClose,a=void 0!==i&&i,r=n.lineType,o=void 0===r?F.Line:r;return!0===a&&(t=[].concat(Object(w.a)(t),[t[0]])),o===F.Curve&&(t=Gt.createSmoothCurvePointsFromPointList(Object(w.a)(t))),this.drawLineWithPointList(e,t,gi(fi({},n),{lineType:F.Line})),t}},{key:"drawPolygonWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t.length<2)){var i=e.getContext("2d"),a=n.color,r=void 0===a?bi:a,o=n.lineType,c=void 0===o?F.Line:o;i.save(),i.fillStyle=r,i.beginPath(),c===F.Curve&&(t=Gt.createSmoothCurvePointsFromPointList([].concat(Object(w.a)(t),[t[0]])));var l=t,s=Object(ai.a)(l),u=s[0],d=s.slice(1);return i.moveTo(u.x,u.y),d.forEach((function(e){i.lineTo(e.x,e.y)})),i.fill(),i.restore(),t}}},{key:"drawPolygonWithFillAndLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.strokeColor,a=n.fillColor,r=n.thickness,o=n.lineCap,c=n.isClose,l=n.lineType,s=this.drawPolygon(e,t,{color:i,thickness:r,lineCap:o,isClose:c,lineType:l});return this.drawPolygonWithFill(e,t,{color:a,lineType:l}),s}},{key:"drawPolygonWithKeyPoint",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.pointColor,r=void 0===a?"white":a,o=i.strokeColor,c=this.drawPolygon(e,t,i);return c.forEach((function(t){n.drawCircleWithFill(e,t,4,{color:o}),n.drawCircleWithFill(e,t,3,{color:r})})),c}},{key:"drawSelectedPolygonWithFillAndLine",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.pointColor,r=void 0===a?"white":a,o=i.strokeColor,c=this.drawPolygonWithFillAndLine(e,t,i);return c.forEach((function(t){n.drawCircleWithFill(e,t,4,{color:o}),n.drawCircleWithFill(e,t,3,{color:r})})),c}},{key:"drawText",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n){var a=e.getContext("2d"),r=i.color,o=void 0===r?bi:r,c=i.font,l=void 0===c?de:c,s=i.shadowColor,u=void 0===s?"":s,d=i.shadowBlur,h=void 0===d?0:d,f=i.shadowOffsetX,g=void 0===f?0:f,v=i.shadowOffsetY,b=void 0===v?0:v,p=i.textMaxWidth,m=void 0===p?164:p,y=i.offsetX,x=void 0===y?0:y,C=i.offsetY,w=void 0===C?0:C,I=i.textAlign,k=void 0===I?"start":I,L=i.lineHeight;a.save(),a.textAlign=k,a.fillStyle=null!=o?o:"white",a.font=l,a.shadowColor=u,a.shadowOffsetX=g,a.shadowOffsetY=b,a.shadowBlur=h,this.wrapText(e,"".concat(n),t.x+x,t.y+w,m,L),a.restore()}}},{key:"wrapText",value:function(e,t,n,i,a,r){if("string"===typeof t&&"number"===typeof n&&"number"===typeof i){var o=e.getContext("2d");"undefined"===typeof a&&(a=e&&e.width||300),"undefined"===typeof r&&(r=e&&parseInt(window.getComputedStyle(e).lineHeight,10)||parseInt(window.getComputedStyle(document.body).lineHeight,10));for(var c=t.split("\n"),l=0;l<c.length;l++){for(var s=c[l].split(""),u="",d=0;d<s.length;d++){var h=u+s[d];a||(a=300),o.measureText(h).width>a&&d>0?(o.fillText(u,n,i),u=s[d],i+=r):u=h}o.fillText(u,n,i),i+=r}}}},{key:"drawArrow",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.color,r=void 0===a?bi:a,o=i.thickness,c=void 0===o?1:o,l=i.lineCap,s=void 0===l?"round":l,u=i.theta,d=void 0===u?30:u,h=i.headLen,f=void 0===h?10:h,g=180*Math.atan2(t.y-n.y,t.x-n.x)/Math.PI,v=(g+d)*Math.PI/180,b=(g-d)*Math.PI/180,p=f*Math.cos(v),m=f*Math.sin(v),y=f*Math.cos(b),x=f*Math.sin(b);e.save(),e.strokeStyle=r,e.lineWidth=c,e.lineCap=s,e.beginPath(),e.moveTo(n.x+p,n.y+m),e.lineTo(n.x,n.y),e.lineTo(n.x+y,n.y+x),e.stroke(),e.restore()}},{key:"drawArrowByCanvas",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.getContext("2d");this.drawArrow(a,t,n,i)}}]),e}();pi.drawImg=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.getContext("2d"),a=n.zoom,r=void 0===a?1:a,o=n.currentPos,c=void 0===o?vi:o,l=n.rotate,s=void 0===l?0:l,u=n.imgAttribute;switch(i.save(),s){case 0:default:i.translate(c.x,c.y);break;case 90:i.translate(c.x+t.height*r,c.y),i.rotate(90*Math.PI/180);break;case 180:i.translate(c.x+t.width*r,c.y+t.height*r),i.rotate(Math.PI);break;case 270:i.translate(c.x,c.y+t.width*r),i.rotate(270*Math.PI/180)}if(u){var d=u.contrast,h=u.saturation,f=u.brightness;i.filter="saturate(".concat(h+100,"%) contrast(").concat(d+100,"%) brightness(").concat(f+100,"%)")}i.drawImage(t,0,0,t.width*r,t.height*r),i.restore()};var mi=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"getMarkerShowText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return ni.getAttributeShowText(e,t)}}]),e}();function yi(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:62,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(i=i||a.length,n)for(e=0;e<n;e++)r[e]=a[0|Math.random()*i];else for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",e=0;e<36;e++)r[e]||(t=0|16*Math.random(),r[e]=a[19===e?3&t|8:t]);return r.join("")}var xi=n(22),Ci={showConfirm:!1,skipWhileNoDependencies:!1,drawOutsideTarget:!1,copyBackwardResult:!1,minWidth:1,minHeight:1,isShowOrder:!1,filterData:["valid","invalid"],attributeConfigurable:!1,attributeList:[],textConfigurable:!1,textCheckType:0,customFormat:""},wi={showConfirm:!1,skipWhileNoDependencies:!1,inputList:[{key:"\u7c7b\u522b1",value:"class1",isMulti:!1,subSelected:[{key:"\u9009\u98791",value:"option1",isDefault:!1},{key:"\u9009\u98792",value:"option1-2",isDefault:!1}]},{key:"\u7c7b\u522b2",value:"class-AH",isMulti:!0,subSelected:[{key:"\u9009\u98792-1",value:"option2-1",isDefault:!1},{key:"\u9009\u98792-2",value:"option2-2",isDefault:!1},{key:"\u9009\u98792-3",value:"option2-3",isDefault:!1}]},{key:"\u7c7b\u522b3",value:"class-0P",isMulti:!1,subSelected:[{key:"\u9009\u98793-1",value:"option3-1",isMulti:!1},{key:"\u9009\u98793-2",value:"option3-2",isDefault:!1},{key:"\u9009\u98793-3",value:"option3-3",isDefault:!1}]}]},Ii={lineType:0,lineColor:0,edgeAdsorption:!1,outOfTarget:!0,copyBackwardResult:!1,isShowOrder:!1,attributeConfigurable:!1,attributeList:[{key:"\u7c7b\u522b1",value:"\u7c7b\u522b1"},{key:"\u7c7b\u522bao",value:"class-ao"},{key:"\u7c7b\u522bM1",value:"class-M1"},{key:"\u7c7b\u522bCm",value:"class-Cm"},{key:"\u7c7b\u522bc3",value:"class-c3"},{key:"\u7c7b\u522ba0",value:"class-a0"},{key:"\u7c7b\u522bu7",value:"class-u7"},{key:"\u7c7b\u522bZb",value:"class-Zb"},{key:"\u7c7b\u522bzi",value:"class-zi"}],textConfigurable:!1,textCheckType:2,customFormat:"",showConfirm:!1,lowerLimitPointNum:2,upperLimitPointNum:"",preReferenceStep:0,skipWhileNoDependencies:!1,filterData:["valid","invalid"]},ki={showConfirm:!1,skipWhileNoDependencies:!1,enableTextRecognition:!1,recognitionMode:"general",configList:[{label:"\u6587\u672c",key:"text",required:!1,default:"",maxLength:1e3}],filterData:["valid","invalid"]},Li={lineType:0,lineColor:0,lowerLimitPointNum:3,edgeAdsorption:!1,drawOutsideTarget:!1,copyBackwardResult:!1,isShowOrder:!1,attributeConfigurable:!1,attributeList:[],textConfigurable:!0,textCheckType:0,customFormat:""},Pi=function(e){return"lineTool"===e?Ii:"rectTool"===e?Ci:"tagTool"===e?wi:"textTool"===e?ki:"polygonTool"===e?Li:Ci},Si={toolColor:{1:{valid:{stroke:"rgba(0,0,255,0.50)",fill:"rgba(0,0,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(0,15,255,1.00)",fill:"rgba(0,15,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(0,15,255,0.80)",fill:"rgba(0,15,255,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},3:{valid:{stroke:"rgba(0,255,255,0.50)",fill:"rgba(0,255,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(0,212,255,1.00)",fill:"rgba(0,212,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(0,212,255,0.80)",fill:"rgba(0,212,255,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},5:{valid:{stroke:"rgba(0,255,0,0.50)",fill:"rgba(0,255,0,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(149,255,1.00)",fill:"rgba(149,255,0,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(149,255,0,0.80)",fill:"rgba(149,255,0,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},7:{valid:{stroke:"rgba(255,255,0,0.50)",fill:"rgba(255,255,0,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(255,230,102,1.00)",fill:"rgba(255,213,0,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(255,230,102,0.80)",fill:"rgba(255,230,102,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},9:{valid:{stroke:"rgba(255,0,255,0.50)",fill:"rgba(255,0,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(230,102,255,1.00)",fill:"rgba(213,0,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(230,102,255,0.80)",fill:"rgba(230,102,255,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}}},attributeColor:[{valid:{stroke:"rgba(204,204,204,1.00)",fill:"rgba(204,204,204,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(204,204,204,1.00)",fill:"rgba(204,204,204,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(204,204,204,1.00)",fill:"rgba(204,204,204,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(153,51,255,1.00)",fill:"rgba(153,51,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(153,51,255,1.00)",fill:"rgba(153,51,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(153,51,255,1.00)",fill:"rgba(153,51,255,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(51,254,51,1.00)",fill:"rgba(51,254,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(51,254,51,1.00)",fill:"rgba(51,254,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(51,254,51,1.00)",fill:"rgba(51,254,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(255,51,255,1.00)",fill:"rgba(255,51,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(255,51,255,1.00)",fill:"rgba(255,51,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(255,51,255,1.00)",fill:"rgba(255,51,255,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(204,255,51,1.00)",fill:"rgba(204,255,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(204,255,51,1.00)",fill:"rgba(204,255,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(204,255,51,1.00)",fill:"rgba(204,255,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(51,153,255,1.00)",fill:"rgba(51,153,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(51,153,255,1.00)",fill:"rgba(51,153,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(51,153,255,1.00)",fill:"rgba(51,153,255,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(255,153,51,1.00)",fill:"rgba(255,153,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(255,153,51,1.00)",fill:"rgba(255,153,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(255,153,51,1.00)",fill:"rgba(255,153,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(51,255,238,1.00)",fill:"rgba(51,255,238,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(51,255,238,1.00)",fill:"rgba(51,255,238,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(51,255,238,1.00)",fill:"rgba(51,255,238,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(255,221,51,1.00)",fill:"rgba(255,221,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(255,221,51,1.00)",fill:"rgba(255,221,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(255,221,51,1.00)",fill:"rgba(255,221,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}}],lineColor:{1:"rgba(102, 111, 255, 1 )",3:"rgba(102, 230, 255, 1)",5:"rgba(191, 255, 102, 1)",7:"rgba(255, 230, 102, 1)",9:"rgba(230, 102, 255, 1)"},attributeLineColor:["rgba(204, 204, 204, 1)","rgba(153, 51, 255, 1)","rgba(51, 254, 51, 1)","rgba(255, 51, 255, 1)","rgba(204, 255, 51, 1)","rgba(51, 153, 255, 1)","rgba(255, 153, 51, 1)","rgba(51, 255, 238, 1)","rgba(255, 221, 51, 1)"],color:1,width:2,opacity:9},Oi=function(){function e(t){var n=this;Object(k.a)(this,e),this.record=[],this.recordIndex=-1,this.minRecordIndex=-1,this.emitHistoryChanged=function(){n.historyChanged&&(("ActionsHistory"===n.constructor.name||n.record.length>0)&&n.historyChanged(n.undoEnabled,n.redoEnabled))},this.historyChanged=t}return Object(L.a)(e,[{key:"undoEnabled",get:function(){return this.recordIndex>this.minRecordIndex}},{key:"redoEnabled",get:function(){return this.recordIndex<this.record.length-1}},{key:"pushHistory",value:function(e){if(this.recordIndex!==this.record.length-1){var t=this.record.slice(0,Math.min(this.recordIndex+1,this.record.length));this.record=t}this.record.push(it.a.cloneDeepWith(e)),this.recordIndex+=1,this.emitHistoryChanged()}},{key:"updateHistory",value:function(e){this.record[this.recordIndex]=it.a.cloneDeep(e)}},{key:"applyAttribute",value:function(e,t,n){e&&this.record.forEach((function(i){var a=i.find((function(t){return t.id===e}));a&&(a[t]=n)}))}},{key:"undo",value:function(){if(this.undoEnabled)return this.recordIndex-=1,this.emitHistoryChanged(),it.a.cloneDeep(this.record[this.recordIndex])||[]}},{key:"redo",value:function(){if(this.redoEnabled)return this.recordIndex+=1,this.emitHistoryChanged(),it.a.cloneDeep(this.record[this.recordIndex])}},{key:"init",value:function(){this.record=[[]],this.recordIndex=0,this.emitHistoryChanged()}},{key:"empty",value:function(){this.record=[],this.recordIndex=-1,this.emitHistoryChanged()}},{key:"initRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length>0||t;this.record=n?[it.a.cloneDeep(e)]:[],this.minRecordIndex=n?0:-1,this.recordIndex=0}}]),e}(),Ai=function(){function e(t,n){var i=this;Object(k.a)(this,e),this.rcTime=0,this.mouseDownTime=0,this.onMouseDown=function(){i.mouseDownTime=(new Date).getTime()},this.dom=t,this.isDoubleClick=!1,this.delay=n}return Object(L.a)(e,[{key:"getRcTime",value:function(){return this.rcTime}},{key:"getCoord",value:function(e){return{x:e.clientX,y:e.clientY}}},{key:"removeEvent",value:function(){this.dom&&(this.dom.removeEventListener("mouseup",this.mouseUp),this.dom.removeEventListener("mousemove",this.mouseMove),this.dom.removeEventListener("dblclick",this.dblclick),this.dom.removeEventListener("mousedown",this.onMouseDown))}},{key:"addEvent",value:function(e,t,n,i){var a=this;this.dom&&(this.removeEvent(),this.mouseUp=function(t){var r=(new Date).getTime(),o=!i||i(t);if(r-a.mouseDownTime>a.delay||!0!==o)e(t);else{if(2===t.button){if(0!==a.rcTime)return r-a.rcTime<a.delay&&(n(t),clearTimeout(a.setTimeFun),a.cacheFunction=void 0),void(a.rcTime=0);setTimeout((function(){a.rcTime=0}),a.delay),a.rcTime=r}a.setTimeFun&&clearTimeout(a.setTimeFun),a.clickCoord=a.getCoord(t),a.cacheFunction=function(){return e(t)},a.setTimeFun=setTimeout((function(){a.isDoubleClick?a.isDoubleClick=!1:(a.cacheFunction(),a.clickCoord=void 0)}),a.delay)}},this.mouseMove=function(e){var t=a.getCoord(e);a.clickCoord&&!jt.getIsInScope(t,a.clickCoord,10)&&(a.cacheFunction&&a.cacheFunction(),a.clickCoord=void 0,a.cacheFunction=null,clearTimeout(a.setTimeFun))},this.dblclick=function(e){a.isDoubleClick=!0,a.clickCoord=void 0,t(e)},this.dom.addEventListener("mouseup",this.mouseUp),this.dom.addEventListener("mousemove",this.mouseMove),this.dom.addEventListener("dblclick",this.dblclick),this.dom.addEventListener("mousedown",this.onMouseDown))}},{key:"clearRightDblClick",value:function(){this.rcTime=0}}]),e}(),Ti=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"getInitImgPos",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];90!==n&&270!==n||(t={width:t.height,height:t.width});var r=e.width*i/t.width,o=e.height*i/t.height,c=a?1:Math.min(r,o),l={x:(e.width-t.width*c)/2,y:(e.height-t.height*c)/2},s=t.width*c,u=t.height*c;return a&&(c=1),{zoom:c,currentPos:l,imgInfo:{width:s,height:u}}}},{key:"getBasicRecPos",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.9,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t&&e){var o=t.x,c=t.y,l=t.height,s=t.width,u=n.height/l;s/l>n.width/n.height&&(u=n.width/s);var d=r?1:u*i*a,h={x:n.width/2,y:n.height/2},f={x:(o+s/2)*d,y:(c+l/2)*d},g={x:h.x-f.x,y:h.y-f.y};return{currentPos:g,innerZoom:d}}return!1}}]),e}(),Ei=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"renderInvalidPage",value:function(e,t,n){var i=document.createElement("div");return i.setAttribute("style","\n        position: absolute;\n        left: 0px;\n        top: 0px;\n        width: ".concat(t.width,"px;\n        height: ").concat(t.height,"px;\n        background: rgba(255, 87, 34, 1);\n        overflow: hidden;\n        color: white;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 30px;\n        opacity: 0.7;\n        z-index: 30;\n      ")),i.innerHTML=Ln.getMessagesByLocale(mn.InvalidImage,n),e.appendChild(i),i}}]),e}(),Di=[1,5,10,20,30,50,80,100].concat(Array.from({length:9}).map((function(e,t){return 100*(t+2)}))),Ni=Object(L.a)((function e(){Object(k.a)(this,e)}));Ni.zoomChanged=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:We.Linear;if(n===We.Intelligence){var i,a=Math.max.apply(Math,Object(w.a)(Di)),r=Math.min.apply(Math,Object(w.a)(Di)),o=Di.slice(0,Di.length).findIndex((function(t,n){return e>=t&&(e<Di[n+1]||t===a)}));if(-1===o)i=e>=r&&e<=a?t?a:r:t?r:e;else{var c=t?o+1:o-(Di.includes(e)?1:0);i=Di[cn.withinRange(c,[0,Di.length-1])]}return i}var l=t?2:.5;return e*l},Ni.wheelChangePos=function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=a.zoom,o=void 0===r?1:r,c=a.innerZoom,l=void 0===c?1:c,s=a.basicZoom,u=void 0===s?1:s,d=a.zoomMax,h=void 0===d?1e3:d,f=a.rotate,g=void 0===f?0:f,v=i.x,b=i.y,p=parseFloat((o+.1).toFixed(1))/5;if(e&&t){var m=e.width,y=e.height;[90,270].includes(g)&&(m=e.height,y=e.width);var x=m*l,C=y*l,w=t.x-v,I=t.y-b,k=w/x,L=I/C,P=o+n*p,S=m*(P=cn.withinRange(P,[u,h]))*k,O=y*P*L,A=v+(w-S),T=b+(I-O);return{zoom:P,currentPos:{x:A,y:T},imgInfo:{width:m*P,height:y*P},ratio:p}}return null};var Ri,Mi=function(){function e(){Object(k.a)(this,e),this._events=new Map}return Object(L.a)(e,[{key:"on",value:function(e,t){var n=this._events.get(e)||[];n.some((function(e){return e===t}))||this._events.set(e,n.concat(t))}},{key:"singleOn",value:function(e,t){this._events.set(e,[t])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a=this._events.get(e);a&&a.forEach((function(e){e&&e.apply(void 0,n)}))}},{key:"unbind",value:function(e,t){var n=this._events.get(e);n&&this._events.set(e,n.filter((function(e){return e!==t})))}},{key:"unbindAll",value:function(e){this._events.delete(e)}}]),e}(),_i=Object.defineProperty,ji=Object.defineProperties,Bi=Object.getOwnPropertyDescriptors,Hi=Object.getOwnPropertySymbols,Vi=Object.prototype.hasOwnProperty,Zi=Object.prototype.propertyIsEnumerable,Fi=function(e,t,n){return t in e?_i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},zi=function(e,t){for(var n in t||(t={}))Vi.call(t,n)&&Fi(e,n,t[n]);if(Hi){var i,a=Object(E.a)(Hi(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Zi.call(t,n)&&Fi(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Ui={min:.2,max:1e3,ratio:.4},Gi=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i,a,r,o,c,l,s,u,d,h;return Object(k.a)(this,n),(i=t.call(this)).isDrag=!1,i.isSpaceKey=!1,i.innerZoom=1,i.basicZoom=.01,i.isSpaceClick=!1,i.isDragStart=!1,i.startTime=0,i.initImgPos=function(){return e=Object(P.a)(i),t=null,n=Object(xi.a)().mark((function e(){var t,n,i,a,r,o,c,l;return Object(xi.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.imgNode){e.next=2;break}return e.abrupt("return");case 2:i=null==(t=this._imgAttribute)?void 0:t.zoomRatio,a=null==(n=this._imgAttribute)?void 0:n.isOriginalSize,r=Ti.getInitImgPos(this.size,{width:this.imgNode.width,height:this.imgNode.height},this.rotate,i,a),o=r.currentPos,c=r.imgInfo,l=r.zoom,this.setCurrentPos(o),this.currentPosStorage=o,this.setImgInfo(c),this.setZoom(l),this.render(),this.renderBasicCanvas(),this.emit("dependRender"),this.emit("renderZoom",l,o,c);case 13:case"end":return e.stop()}}),e,this)})),new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(t){a(t)}},o=function(e){try{c(n.throw(e))}catch(t){a(t)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}));var e,t,n},i.getCurrentPos=function(e){var t=Object(P.a)(i),n=t._firstClickCoordinate,a=t.currentPosStorage;try{return n&&a?{y:a.y+e.y-n.y,x:a.x+e.x-n.x}:{x:0,y:0}}catch(r){return console.error(r),{x:0,y:0}}},i.wheelChangePos=function(e,t,n){var a=Object(P.a)(i),r=a.currentPos,o=a.imgNode;if(o){if(i.zoom!==i.basicZoom||-1!==t){var c=Ni.wheelChangePos(o,e,t,r,{zoom:n||i.zoom,innerZoom:i.innerZoom,basicZoom:i.basicZoom,zoomMax:Ui.max,rotate:i.rotate});if(c){var l=c.currentPos,s=c.ratio,u=c.zoom,d=c.imgInfo;i.setZoom(u),i.setCurrentPos(l),i.currentPosStorage=l,i.setImgInfo(d),Ui.ratio=s,i.emit("renderZoom",u,l,d)}}}else console.error("unable to load image")},i.zoomChanged=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We.Linear,n=Ni.zoomChanged(i.zoom,e,t);i.wheelChangePos(i.getGetCenterCoordinate(),n>i.zoom?1:-1,n),i.render(),i.renderBasicCanvas()},i.zoomChangeOnCenter=function(e){i.wheelChangePos(i.getGetCenterCoordinate(),0,e),i.render(),i.renderBasicCanvas()},i.drawImg=function(){i.imgNode&&!0!==i.hiddenImg&&pi.drawImg(i.basicCanvas,i.imgNode,{zoom:i.zoom,currentPos:i.currentPos,rotate:i.rotate,imgAttribute:i._imgAttribute})},i.container=e.container,i.config=ft.jsonParser(e.config),i.showDefaultCursor=e.showDefaultCursor||!1,i.destroyCanvas(),i.createCanvas(e.size,e.isAppend),i.imgNode=e.imgNode,i.isImgError=!e.imgNode,i.basicImgInfo={width:null!=(r=null==(a=e.imgNode)?void 0:a.width)?r:0,height:null!=(c=null==(o=e.imgNode)?void 0:o.height)?c:0,valid:!0,rotate:0},i.forbidOperation=null!=(l=e.forbidOperation)&&l,i.forbidBasicResultRender=null!=(s=e.forbidBasicResultRender)&&s,i.size=e.size,i.currentPos={x:0,y:0},i.zoom=1,i.coord={x:-1,y:-1},i.currentPosStorage={x:0,y:0},i.isShowCursor=!1,i.style={strokeColor:Zn[4],fillColor:Zn[4],strokeWidth:2,opacity:1},i.attributeLockList=[],i.history=new Oi,i.style=null!=(u=e.style)?u:{},i._imgAttribute=null!=(d=e.imgAttribute)?d:{},i.isHidden=!1,i.dragStatus=Ze.Wait,i.defaultAttribute=null!=(h=null==e?void 0:e.defaultAttribute)?h:"",i.forbidCursorLine=!!e.forbidCursorLine,i.lang=Ye.Zh,i.onMouseDown=i.onMouseDown.bind(Object(P.a)(i)),i.onMouseMove=i.onMouseMove.bind(Object(P.a)(i)),i.onMouseLeave=i.onMouseLeave.bind(Object(P.a)(i)),i.onMouseUp=i.onMouseUp.bind(Object(P.a)(i)),i.onKeyDown=i.onKeyDown.bind(Object(P.a)(i)),i.onKeyUp=i.onKeyUp.bind(Object(P.a)(i)),i.onWheel=i.onWheel.bind(Object(P.a)(i)),i.onLeftDblClick=i.onLeftDblClick.bind(Object(P.a)(i)),i.onRightDblClick=i.onRightDblClick.bind(Object(P.a)(i)),i.onClick=i.onClick.bind(Object(P.a)(i)),i.clearImgDrag=i.clearImgDrag.bind(Object(P.a)(i)),i.dblClickListener=new Ai(i.container,200),i.coordUtils=new Bt(Object(P.a)(i)),i.coordUtils.setBasicImgInfo(i.basicImgInfo),i.hiddenImg=e.hiddenImg||!1,i}return Object(L.a)(n,[{key:"onContextmenu",value:function(e){e.preventDefault()}},{key:"ctx",get:function(){var e;return this._ctx||(null==(e=this.canvas)?void 0:e.getContext("2d"))}},{key:"basicCtx",get:function(){var e;return null==(e=this.basicCanvas)?void 0:e.getContext("2d")}},{key:"rotate",get:function(){var e,t;return null!=(t=null==(e=this.basicImgInfo)?void 0:e.rotate)?t:0}},{key:"valid",get:function(){var e,t;return null==(t=null==(e=this.basicImgInfo)?void 0:e.valid)||t}},{key:"baseIcon",get:function(){return zn[this.style.color]}},{key:"defaultCursor",get:function(){return this.showDefaultCursor?"default":"none"}},{key:"dataList",get:function(){return[]}},{key:"innerPosAndZoom",get:function(){return{innerZoom:this.innerZoom,currentPosStorage:this.currentPosStorage}}},{key:"isShowDefaultCursor",get:function(){return this.showDefaultCursor}},{key:"hasMarkerConfig",get:function(){return!0===this.config.markerConfigurable&&this.config.markerList&&this.config.markerList.length>0}},{key:"setZoom",value:function(e){this.zoom=e,this.innerZoom=e,this.coordUtils.setZoomAndCurrentPos(this.zoom,this.currentPos)}},{key:"setCurrentPos",value:function(e){this.currentPos=e,this.coordUtils.setZoomAndCurrentPos(this.zoom,this.currentPos)}},{key:"setReferenceData",value:function(e){this.referenceData=e}},{key:"setImgInfo",value:function(e){this.imgInfo=e}},{key:"setCurrentPosStorage",value:function(e){this.currentPosStorage=e}},{key:"updatePosition",value:function(e){var t=e.zoom,n=e.currentPos;this.setZoom(t),this.setCurrentPos(n),this.currentPosStorage=n,this.renderBasicCanvas(),this.render()}},{key:"setLang",value:function(e){this.lang=e}},{key:"setShowDefaultCursor",value:function(e){this.showDefaultCursor=e,this.container.style.cursor=this.defaultCursor}},{key:"setCustomCursor",value:function(e){this.container.style.cursor=e}},{key:"forbidMouseOperation",get:function(){return this.forbidOperation||!1===this.valid}},{key:"pixelRatio",get:function(){var e;return ii.getPixelRatio(null==(e=this.canvas)?void 0:e.getContext("2d"))}},{key:"init",value:function(){this.eventUnbinding(),this.initPosition(),this.eventBinding(),this.render(),this.renderBasicCanvas()}},{key:"destroy",value:function(){this.destroyCanvas(),this.eventUnbinding()}},{key:"updateCanvasBasicStyle",value:function(e,t,n){var i=this.pixelRatio;e.style.position="absolute",e.width=t.width*i,e.height=t.height*i,e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.left="0",e.style.top="0",e.style.zIndex="".concat(n," ")}},{key:"createCanvas",value:function(e){var t,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.pixelRatio,r=document.createElement("canvas");this.updateCanvasBasicStyle(r,e,0),this.basicCanvas=r;var o=document.createElement("canvas");this.updateCanvasBasicStyle(o,e,10),i&&(this.container.hasChildNodes()?(this.container.insertBefore(o,this.container.childNodes[0]),this.container.insertBefore(r,this.container.childNodes[0])):(this.container.appendChild(r),this.container.appendChild(o))),this.canvas=o,this.container.style.cursor=this.defaultCursor,null==(t=this.ctx)||t.scale(a,a),null==(n=this.basicCtx)||n.scale(a,a)}},{key:"destroyCanvas",value:function(){this.canvas&&this.container.contains(this.canvas)&&this.container.removeChild(this.canvas),this.basicCanvas&&this.container.contains(this.basicCanvas)&&this.container.removeChild(this.basicCanvas),this.clearInvalidPage(),this.clearImgDrag()}},{key:"setStyle",value:function(e){this.style=e,this.render()}},{key:"setImgNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.imgNode=e,this.setBasicImgInfo(zi({width:e.width,height:e.height,valid:!0,rotate:0},t)),!0===this.isImgError&&(this.isImgError=!1,this.emit("changeAnnotationShow")),"boolean"===typeof t.valid&&this.setValid(t.valid),this.initImgPos(),this.render(),this.renderBasicCanvas()}},{key:"setErrorImg",value:function(){var e=this.isImgError;this.isImgError=!0,this.imgNode=void 0,this.setBasicImgInfo({width:0,height:0,valid:!0,rotate:0}),!1===e&&this.emit("changeAnnotationShow")}},{key:"setBasicImgInfo",value:function(e){this.basicImgInfo=e,this.coordUtils.setBasicImgInfo(e)}},{key:"setForbidOperation",value:function(e){this.forbidOperation=e,this.setShowDefaultCursor(e),this.render()}},{key:"setForbidCursorLine",value:function(e){this.forbidCursorLine=e,this.render()}},{key:"setIsHidden",value:function(e){this.isHidden=e,this.emit("hiddenChange")}},{key:"setIsShowOrder",value:function(e){this.config.isShowOrder=e,this.render()}},{key:"getCoordinate",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}},{key:"getCoordinateUnderZoom",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.left-this.currentPos.x,y:e.clientY-t.top-this.currentPos.y}}},{key:"getCoordinateUnderZoomByRotate",value:function(e){var t=this.getCoordinateUnderZoom(e),n=t.x,i=t.y;return 90===this.basicImgInfo.rotate?{x:i,y:this.basicImgInfo.height*this.zoom-n}:180===this.basicImgInfo.rotate?{x:this.basicImgInfo.width*this.zoom-n,y:this.basicImgInfo.height*this.zoom-i}:270===this.basicImgInfo.rotate?{x:this.basicImgInfo.width*this.zoom-i,y:n}:{x:n,y:i}}},{key:"getGetCenterCoordinate",value:function(){return{x:this.size.width/2,y:this.size.height/2}}},{key:"initPosition",value:function(){if(this.basicResult&&this.imgInfo){var e=this.basicResult,t=this.size,n=this.imgNode,i=this._imgAttribute,a=this.imgInfo,r=this.dependToolName;if(e&&n&&r){var o=e;switch(r){case p.Polygon:case p.Line:if(e.pointList){var c=cn.calcViewportBoundaries(e.pointList);o={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top}}}var l=Ti.getBasicRecPos(n,o,t,void 0,null==i?void 0:i.zoomRatio,null==i?void 0:i.isOriginalSize);l&&(this.setCurrentPos(l.currentPos),this.currentPosStorage=this.currentPos,this.setImgInfo((s=zi({},a),u={width:a.width/this.innerZoom*l.innerZoom,height:a.height/this.innerZoom*l.innerZoom},ji(s,Bi(u)))),this.setZoom(l.innerZoom),this.render(),this.renderBasicCanvas())}}else this.initImgPos();var s,u}},{key:"undo",value:function(){this.history.undo()}},{key:"redo",value:function(){this.history.redo()}},{key:"clearCanvas",value:function(){var e;null==(e=this.ctx)||e.clearRect(0,0,this.size.width,this.size.height)}},{key:"clearBasicCanvas",value:function(){var e;null==(e=this.basicCtx)||e.clearRect(0,0,this.size.width,this.size.height)}},{key:"eventBinding",value:function(){this.dblClickListener.addEvent((function(){}),this.onLeftDblClick,this.onRightDblClick),this.container.addEventListener("mousedown",this.onMouseDown),this.container.addEventListener("mousemove",this.onMouseMove),this.container.addEventListener("mouseup",this.onMouseUp),this.container.addEventListener("mouseleave",this.onMouseLeave),this.container.addEventListener("click",this.onClick),this.container.addEventListener("wheel",this.onWheel),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),window.parent.document.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"eventUnbinding",value:function(){this.container.removeEventListener("mousedown",this.onMouseDown),this.container.removeEventListener("mousemove",this.onMouseMove),this.container.removeEventListener("mouseup",this.onMouseUp),this.container.removeEventListener("mouseleave",this.onMouseLeave),this.container.removeEventListener("wheel",this.onWheel),this.container.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),window.parent.document.removeEventListener("contextmenu",this.onContextmenu,!1),this.dblClickListener.removeEvent()}},{key:"clearImgDrag",value:function(){this.isDrag=!1,this.isDragStart=!1,this.isSpaceClick=!1,this.startTime=0,this.container.style.cursor=this.defaultCursor,this.forbidCursorLine=!1}},{key:"clearCursorLine",value:function(){this.coord={x:-1,y:-1}}},{key:"onMouseDown",value:function(e){if(!this.canvas||this.isImgError)return!0;var t=this.getCoordinate(e);(this.isSpaceKey&&0===e.button||2===e.button)&&(e.stopPropagation(),this._firstClickCoordinate=t,this.currentPosStorage=this.currentPos,this.isSpaceClick=!0,this.isDragStart=!0,this.startTime=(new Date).getTime())}},{key:"onMouseMove",value:function(e){if(!this.canvas||this.isImgError)return!0;var t=this.getCoordinate(e);this.isShowCursor&&(this.coord=t);try{if(!t||!Object(nt.isNumber)(null==t?void 0:t.x)||!Object(nt.isNumber)(null==t?void 0:t.y))throw new Error("coord error");if(this.coord=t,(this.isSpaceClick||this.isDragStart)&&this._firstClickCoordinate){var n=this.getCurrentPos(t);this.setCurrentPos(n),this.isDrag=!0,this.container.style.cursor="grabbing",this.forbidCursorLine=!0,this.renderBasicCanvas(),this.emit("dependRender"),this.emit("dragMove",{currentPos:n,zoom:this.zoom,imgInfo:this.imgInfo})}this.render()}catch(i){console.error(i)}}},{key:"onMouseUp",value:function(e){if(!this.canvas||this.isImgError)return!0;if(this.container.style.cursor=this.defaultCursor,this.forbidCursorLine=!1,this.isDrag=!1,this.isDragStart=!1,this.isSpaceClick=!1,0!==this.startTime&&this._firstClickCoordinate){var t=(new Date).getTime(),n=this.getCoordinate(e);if(t-this.startTime>1e3||!0===this.isSpaceKey||St.calcTwoPointDistance(n,this._firstClickCoordinate)>10)return e.stopPropagation(),this.startTime=0,this.render(),!0}this.startTime=0,this.render()}},{key:"onMouseLeave",value:function(){this.clearImgDrag()}},{key:"onClick",value:function(e){}},{key:"onLeftDblClick",value:function(e){}},{key:"onRightDblClick",value:function(e){this.clearImgDrag()}},{key:"onKeyDown",value:function(e){switch(e.keyCode===Cn.Alt&&e.preventDefault(),e.keyCode){case Cn.Space:this.isSpaceKey=!0;break;case Cn.Z:if(e.ctrlKey)return e.shiftKey?this.redo():this.undo(),!1}return!0}},{key:"onKeyUp",value:function(e){if(e.keyCode===Cn.Space)this.isSpaceKey=!1}},{key:"exportCustomData",value:function(){return{}}},{key:"onWheel",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.imgNode&&this.coord){e.preventDefault(),e.stopPropagation();var n=this.getCoordinate(e),i=e.deltaY||e.wheelDelta,a=0;i>0&&this.zoom>Ui.min&&(a=-1),i<0&&this.zoom<Ui.max&&(a=1),this.wheelChangePos(n,a),this.emit("dependRender"),t&&this.render(),this.renderBasicCanvas()}}},{key:"renderCursorLine",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null!=(e=t.style.lineColor[0])?e:"";if(this.ctx&&!this.forbidCursorLine&&!this.forbidOperation){var i=this.coord,a=i.x,r=i.y;pi.drawLine(this.canvas,{x:0,y:r},{x:1e4,y:r},{color:n}),pi.drawLine(this.canvas,{x:a,y:0},{x:a,y:1e4},{color:n}),pi.drawCircleWithFill(this.canvas,{x:a,y:r},1,{color:"white"})}}},{key:"setSize",value:function(e){var t;this.size=e,this.container.contains(this.canvas)&&(this.destroyCanvas(),this.createCanvas(e),this.eventUnbinding(),this.init(),!1===(null==(t=this.basicImgInfo)?void 0:t.valid)&&this.renderInvalidPage())}},{key:"setImgAttribute",value:function(e){var t=this._imgAttribute;this._imgAttribute=e,(null==t?void 0:t.zoomRatio)===e.zoomRatio&&t.isOriginalSize===e.isOriginalSize?(this.renderBasicCanvas(),this.render()):this.initImgPos()}},{key:"clearResult",value:function(e){}},{key:"setValid",value:function(e){this.basicImgInfo.valid=e,!1===e?(this.renderInvalidPage(),this.clearResult(!1)):this.clearInvalidPage()}},{key:"setRotate",value:function(e){this.basicImgInfo.rotate=e}},{key:"setBasicResult",value:function(e){this.basicResult=e,this.coordUtils.setBasicResult(e),this.initPosition(),this.emit("dependRender")}},{key:"setDependName",value:function(e,t){this.dependToolName=e,this.coordUtils.setDependInfo(e,t)}},{key:"setAttributeLockList",value:function(e){this.attributeLockList=e,this.render()}},{key:"setConfig",value:function(e){this.config=ft.jsonParser(e)}},{key:"setDataInjectionAtCreation",value:function(e){this.dataInjectionAtCreation=e}},{key:"setRenderEnhance",value:function(e){this.renderEnhance=e}},{key:"setCustomRenderStyle",value:function(e){this.customRenderStyle=e}},{key:"updateRotate",value:function(){if(this.dependToolName)return this.emit("messageInfo",Ln.getMessagesByLocale(mn.NoRotateInDependence,this.lang)),!1;if(this.dataList.length>0)return this.emit("messageInfo",Ln.getMessagesByLocale(mn.NoRotateNotice,this.lang)),!1;var e=cn.getRotate(this.basicImgInfo.rotate);this.basicImgInfo.rotate=e,this.initImgPos(),this.emit("updateResult")}},{key:"getColor",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config;if(!0===(null==n?void 0:n.attributeConfigurable)&&this.style.attributeColor){var i=ni.getAttributeIndex(t,null!=(e=n.attributeList)?e:[])+1;return this.style.attributeColor[i]}var a=this.style,r=a.color,o=a.toolColor;return o?o[r]:Si.toolColor[1]}},{key:"getLineColor",value:function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!0===(null==(e=this.config)?void 0:e.attributeConfigurable)){var a=ni.getAttributeIndex(i,null!=(n=null==(t=this.config)?void 0:t.attributeList)?n:[])+1;return this.style.attributeLineColor?this.style.attributeLineColor[a]:""}var r=this.style,o=r.color,c=r.lineColor;return o&&c?c[o]:""}},{key:"clearInvalidPage",value:function(){this._invalidDOM&&this.container&&this.container.contains(this._invalidDOM)&&(this.container.removeChild(this._invalidDOM),this._invalidDOM=void 0)}},{key:"renderInvalidPage",value:function(){this.container&&!this._invalidDOM&&(this._invalidDOM=Ei.renderInvalidPage(this.container,this.size,this.lang))}},{key:"renderBasicCanvas",value:function(){if(this.basicCanvas){this.clearBasicCanvas(),this.drawImg();if(!this.forbidBasicResultRender&&this.basicResult&&this.dependToolName)switch(this.dependToolName){case p.Rect:pi.drawRect(this.basicCanvas,jt.changeRectByZoom(this.basicResult,this.zoom,this.currentPos),{color:"rgba(204,204,204,1.00)",thickness:3});break;case p.Polygon:pi.drawPolygonWithFillAndLine(this.basicCanvas,jt.changePointListByZoom(this.basicResult.pointList,this.zoom,this.currentPos),{fillColor:"transparent",strokeColor:"rgba(204,204,204,1.00)",isClose:!0,thickness:3});break;case p.Line:pi.drawLineWithPointList(this.basicCanvas,jt.changePointListByZoom(this.basicResult.pointList,this.zoom,this.currentPos),{color:"rgba(204,204,204,1.00)",thickness:3})}}}},{key:"render",value:function(){this.canvas&&this.ctx&&this.imgNode&&this.clearCanvas()}},{key:"changeStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultAttribute;this.emit("changeStyle",{attribute:e})}}]),n}(Mi),Wi=function(){function e(t){var n=this;Object(k.a)(this,e),this.textKeyDown=function(e){if(e.stopPropagation(),e.keyCode===Cn.Enter)n.submitTextarea(),n.appendToContainer()};var i=t.container,a=t.icon,r=t.color,o=t.getCurrentSelectedData,c=t.updateSelectedTextAttribute,l=t.width||164;this.container=i,this.getCurrentSelectedData=o,this.updateSelectedTextAttribute=c,this._textAttributeDOM=this.initTextAttributeDOM(),this._iconDOM=this.initIconDOM(a),this._textDOM=this.initTextDOM(l,se),this._textareaDOM=this.initTextareaDOM(l,r),this.appendToContainer()}return Object(L.a)(e,[{key:"isExit",get:function(){return!!this._textAttributeDOM&&this.container.contains(this._textAttributeDOM)}},{key:"isExitTextareaDOM",get:function(){return!!this._textareaDOM&&this.container.contains(this._textareaDOM)}},{key:"updateIcon",value:function(e){this._iconDOM&&(this._iconDOM.innerHTML=e)}},{key:"appendToContainer",value:function(){this._textAttributeDOM&&this._textDOM&&this._iconDOM&&(this.container.appendChild(this._textAttributeDOM),this._textAttributeDOM.appendChild(this._textDOM),this._textAttributeDOM.appendChild(this._iconDOM))}},{key:"initTextAttributeDOM",value:function(){var e=document.createElement("div");return e.setAttribute("id","textArea"),e}},{key:"initTextDOM",value:function(e,t){var n=document.createElement("span");return n.setAttribute("style","\n        width: ".concat(Math.max(e,30),"px;\n        line-height: ").concat(t,"px;\n        word-break: break-all;\n        white-space: pre-line;\n        font-style: italic;\n      ")),n}},{key:"initIconDOM",value:function(e){var t=this,n=document.createElement("div");return n.setAttribute("id","annotation_text"),n.innerHTML=e,n.addEventListener("mouseup",(function(e){e.stopPropagation(),t.renderTextarea()})),n.addEventListener("mousedown",(function(e){e.stopPropagation()})),n.addEventListener("contextmenu",(function(e){e.stopPropagation()})),n.setAttribute("style","\n        position: absolute;\n        left: -20px;\n        top: 4px;\n        cursor: pointer;\n        z-index: 10\n      "),n}},{key:"initTextareaDOM",value:function(e,t){var n=document.createElement("textarea");return n.addEventListener("click",(function(e){e.stopPropagation()})),n.addEventListener("mouseup",(function(e){e.stopPropagation()})),n.setAttribute("style","\n      background-color: transparent;\n      border-radius: 5px;\n      border-color: ".concat(t,";\n      outline: none;\n      resize: none;\n      width: ").concat(Math.max(e,30),"px;\n      ")),n.setAttribute("maxLength","".concat(le)),n}},{key:"removeTextDOM",value:function(){this._textAttributeDOM&&this._textDOM&&this._textAttributeDOM.removeChild(this._textDOM)}},{key:"removeIconDOM",value:function(){this._textAttributeDOM&&this._iconDOM&&this._textAttributeDOM.removeChild(this._iconDOM)}},{key:"removeTextareaDOM",value:function(){var e,t;this._textareaDOM&&this._textAttributeDOM&&(null==(e=this._textAttributeDOM)?void 0:e.contains(this._textareaDOM))&&(null==(t=this._textAttributeDOM)||t.removeChild(this._textareaDOM))}},{key:"submitTextarea",value:function(){var e;this._textareaDOM&&(this.updateSelectedTextAttribute(null==(e=this._textareaDOM)?void 0:e.value),this.removeTextareaDOM(),this.clearTextAttribute())}},{key:"clearTextAttribute",value:function(){this._textAttributeDOM&&this.container.contains(this._textAttributeDOM)&&this.container.removeChild(this._textAttributeDOM)}},{key:"renderTextarea",value:function(){if(this._textAttributeDOM&&this._textareaDOM){var e=this.getCurrentSelectedData();if(e){var t=e.width,n=void 0===t?164:t,i=e.textAttribute,a=e.color;this._textareaDOM.value="".concat(i),this._textareaDOM.setAttribute("style","\n      background-color: rgba(0,0,0,0.4);\n      border-radius: 5px;\n      border-color: ".concat(a,";\n      outline: none;\n      resize: none;\n      font-style: italic;\n      font-weight: 900;\n      text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.6);\n      width: ").concat(Math.max(n,30),"px;\n      ")),this._textareaDOM.setAttribute("maxLength","".concat(le)),this._textAttributeDOM.appendChild(this._textareaDOM),this.removeIconDOM(),this.removeTextDOM(),this._textareaDOM.focus(),this._textareaDOM.addEventListener("keydown",this.textKeyDown)}}}},{key:"update",value:function(e,t){var n,i=t.left,a=t.top,r=t.color,o=t.width,c=void 0===o?164:o,l=Math.max(c,30);null==(n=this._textAttributeDOM)||n.setAttribute("style","\n        position: absolute; \n        width: ".concat(l,"px;\n        font-size: 14px; \n        left:").concat(i,"px; \n        top: ").concat(a,"px; \n        color: ").concat(r,";\n      ")),this._textDOM&&(this._textDOM.innerHTML="".concat(e)),this._textareaDOM&&(this._textareaDOM.style.width="".concat(l,"px"),this._textareaDOM.style.borderColor="".concat(r))}},{key:"changeSelected",value:function(){this.isExitTextareaDOM&&this.submitTextarea()}}]),e}(),Ki=Object.defineProperty,Yi=Object.defineProperties,Xi=Object.getOwnPropertyDescriptors,Ji=Object.getOwnPropertySymbols,Qi=Object.prototype.hasOwnProperty,qi=Object.prototype.propertyIsEnumerable,$i=function(e,t,n){return t in e?Ki(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ea=function(e,t){for(var n in t||(t={}))Qi.call(t,n)&&$i(e,n,t[n]);if(Ji){var i,a=Object(E.a)(Ji(t));try{for(a.s();!(i=a.n()).done;){n=i.value;qi.call(t,n)&&$i(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},ta=function(e,t){return Yi(e,Xi(t))},na=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this,e)).setMarkerIndex=function(e){i.markerIndex=e},i.setMarkerIndexAndSelect=function(e){if(i.config.markerList){i.markerIndex=e;var t=i.config.markerList[e].value,n=i.currentPageResult.find((function(e){return e.label===t}));n&&(i.setSelectedID(n.id),!0===i.config.attributeConfigurable&&i.setDefaultAttribute(n.attribute)),i.emit("markIndexChange")}},i.getHoverRectID=function(e){var t=i.getCoordinateUnderZoom(e),n=Object(P.a)(i).currentShowList;if(n.length>0){if(i.selectedRectID){var a=Object(P.a)(i).selectedRect;if(a&&pn.isInRect(t,a,6,i.zoom))return a.id}var r=n.filter((function(e){return pn.isInRect(t,e,6,i.zoom)}));if(0===r.length)return"";if(1===r.length)return r[0].id;if(r.length>1)return r.map((function(e){return{size:e.width*e.height,id:e.id}})).sort((function(e,t){return e.size-t.size}))[0].id}return""},i.textChange=function(e){!0===i.config.textConfigurable&&i.selectedRectID&&(i.setRectList(ni.textChange(e,i.selectedRectID,i.rectList),!0),i.emit("selectedChange"),i.render())},i.drawOutSideTarget=e.drawOutSideTarget||!1,i.rectList=[],i.isFlow=!0,i.config=ft.jsonParser(e.config),i.hoverRectEdgeIndex=-1,i.hoverRectPointIndex=-1,i.markerIndex=0,i.setStyle(e.style),i.createNewDrawingRect=i.createNewDrawingRect.bind(Object(P.a)(i)),i.getDrawingRectWithRectList=i.getDrawingRectWithRectList.bind(Object(P.a)(i)),i.setSelectedIdAfterAddingDrawingRect=i.setSelectedIdAfterAddingDrawingRect.bind(Object(P.a)(i)),i.getCurrentSelectedData=i.getCurrentSelectedData.bind(Object(P.a)(i)),i.updateSelectedRectTextAttribute=i.updateSelectedRectTextAttribute.bind(Object(P.a)(i)),i.setSelectedID=i.setSelectedID.bind(Object(P.a)(i)),i}return Object(L.a)(n,[{key:"setResult",value:function(e){if(this.clearActiveStatus(),this.setRectList(e),this.hasMarkerConfig){var t=ft.getNextMarker(this.getCurrentPageResult(e),this.config.markerList);t&&this.setMarkerIndex(t.index)}this.render()}},{key:"destroy",value:function(){Object(S.a)(Object(O.a)(n.prototype),"destroy",this).call(this),this._textAttributInstance&&this._textAttributInstance.clearTextAttribute()}},{key:"setConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.config=ft.jsonParser(e),!0===t&&this.clearResult(!1)}},{key:"setRectList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.rectList.length;this.rectList=e,n!==e.length&&this.emit("updatePageNumber"),t&&this.emit("updateResult")}},{key:"selectedRect",get:function(){var e=this;return this.rectList.find((function(t){return t.id===e.selectedRectID}))}},{key:"selectedID",get:function(){return this.selectedRectID}},{key:"selectedText",get:function(){var e;return null==(e=this.selectedRect)?void 0:e.textAttribute}},{key:"dataList",get:function(){return this.rectList}},{key:"currentShowList",get:function(){var e=[],t=ft.getRenderResultList(this.rectList,ft.getSourceID(this.basicResult),this.attributeLockList,this.selectedID),n=Object(I.a)(t,2),i=n[0],a=n[1];return e=i,this.isHidden&&(e=[]),a&&e.push(a),e}},{key:"currentPageResult",get:function(){var e=ft.getRenderResultList(this.rectList,ft.getSourceID(this.basicResult),[]);return Object(I.a)(e,1)[0]}},{key:"getCurrentPageResult",value:function(e){var t=ft.getRenderResultList(e,ft.getSourceID(this.basicResult),[]);return Object(I.a)(t,1)[0]}},{key:"setSelectedID",value:function(e){this.setSelectedRectID(e)}},{key:"setSelectedRectID",value:function(e){var t,n,i=this.selectedRectID;e!==i&&i&&(null==(t=this._textAttributInstance)||t.changeSelected()),e||null==(n=this._textAttributInstance)||n.clearTextAttribute(),this.selectedRectID=e,this.render(),this.emit("selectedChange")}},{key:"setStyle",value:function(e){var t;Object(S.a)(Object(O.a)(n.prototype),"setStyle",this).call(this,e),this._textAttributInstance&&!1===this.config.attributeConfigurable&&(null==(t=this._textAttributInstance)||t.updateIcon(this.getTextIconSvg()))}},{key:"updateSelectedRectTextAttribute",value:function(e){var t=this;if(this._textAttributInstance&&e){var n=e;!1===ni.textAttributeValidate(this.config.textCheckType,"",n)&&(this.emit("messageError",ni.getErrorNotice(this.config.textCheckType,this.lang)),n=""),this.setRectList(this.rectList.map((function(e){return e.id===t.selectedRectID?ta(ea({},e),{textAttribute:n}):e})),!0),this.emit("updateTextAttribute"),this.render()}}},{key:"getHoverRectPointIndex",value:function(e){return this.selectedRect?jt.returnClosePointIndex(this.getCoordinateUnderZoom(e),pn.getRectPointList(this.selectedRect,this.zoom),8):-1}},{key:"getHoverRectEdgeIndex",value:function(e){if(!this.selectedRect)return-1;for(var t=-1,n=this.selectedRect,i=pn.getRectEdgeList(n,this.zoom),a=this.getCoordinateUnderZoom(e),r=0;r<i.length;r++){var o=i[r];cn.getFootOfPerpendicular(a,o.begin,o.end).length<16&&(t=r)}return t}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return ni.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"onMouseDown",value:function(e){var t=this;if(!Object(S.a)(Object(O.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation&&!0!==e.ctrlKey){var i=this.getCoordinateUnderZoom(e),a=this.getHoverRectID(e),r=this.currentShowList.find((function(e){return e.id===t.selectedRectID}));if(r&&2!==e.button&&(0!==e.button||!0!==this.isSpaceKey)){if(this.selectedRectID){if(this.getHoverRectPointIndex(e)>-1){var o=Y.Point;return this.dragInfo={dragStartCoord:i,dragTarget:o,startTime:+new Date,firstRect:r},void(this.dragStatus=Ze.Start)}if(this.getHoverRectEdgeIndex(e)>-1){var c=Y.Line;return this.dragInfo={dragStartCoord:i,dragTarget:c,startTime:+new Date,firstRect:r},void(this.dragStatus=Ze.Start)}}if(a===this.selectedRectID&&!this.drawingRect){var l=Y.Plane;this.dragInfo={dragStartCoord:i,dragTarget:l,firstRect:r,startTime:+new Date},this.dragStatus=Ze.Start}}}}},{key:"onDragMove",value:function(e){var t,n,i,a,r,o,c=this;if(this.dragInfo){this.dragStatus=Ze.Move;var l=pn.getRectUnderZoom(this.dragInfo.firstRect,this.zoom),s=l.x,u=l.y,d=l.width,h=l.height,f=e.x-this.dragInfo.dragStartCoord.x,g=e.y-this.dragInfo.dragStartCoord.y,v=this.rectList.filter((function(e){return e.id===c.selectedRectID}))[0];switch(this.dragInfo.dragTarget){case Y.Plane:v=ta(ea({},v),{x:s+f,y:u+g,width:d,height:h});break;case Y.Point:var b=s,p=u,m=d,y=h;switch(this.hoverRectPointIndex){case 0:b=d-f<0?s+d:s+f,p=h-g<0?u+h:u+g,m=Math.abs(f-d),y=Math.abs(g-h);break;case 1:b=d+f>0?s:s+d+f,p=h-g<0?u+h:u+g,m=Math.abs(d+f),y=Math.abs(h-g);break;case 2:b=d+f>0?s:s+d+f,p=h+g>0?u:u+h+g,m=Math.abs(d+f),y=h+g>0?h+g:Math.abs(h+g);break;case 3:b=d-f<0?s+d:s+f,p=h+g>0?u:u+h+g,m=Math.abs(f-d),y=h+g>0?h+g:Math.abs(h+g);break;default:return}v=ta(ea({},v),{x:b,y:p,width:m,height:y});break;case Y.Line:var x=s,C=u,w=d,I=h;switch(this.hoverRectEdgeIndex){case 0:C=h-g<0?u+h:u+g,I=Math.abs(g-h);break;case 1:x=d+f>0?s:s+d+f,w=Math.abs(d+f);break;case 2:C=h+g>0?u:u+h+g,I=h+g>0?h+g:Math.abs(h+g);break;case 3:x=d-f<0?s+d:s+f,w=Math.abs(f-d);break;default:return}v=ta(ea({},v),{x:x,y:C,width:w,height:I});break;default:return}if(!1===this.config.drawOutsideTarget)if(this.basicResult){if((null==(n=null==(t=this.basicResult)?void 0:t.pointList)?void 0:n.length)>0&&pn.isRectNotInPolygon(v,De(this.basicResult.pointList,this.zoom)))return;var k=this.basicResult.x*this.zoom,L=this.basicResult.y*this.zoom,P=this.basicResult.width*this.zoom,S=this.basicResult.height*this.zoom;if(this.dragInfo.dragTarget!==Y.Plane&&(v.x<k-.01||v.y<L-.01||v.width>k+P-v.x+.01||v.height>L+S-v.y+.01))return;if(v.x<k&&(v.x=k),v.y<L&&(v.y=L),v.width>k+P-v.x)switch(this.dragInfo.dragTarget){case Y.Plane:v.x=k+P-d;break;case Y.Point:case Y.Line:f>0&&g>0&&(v.width=k+P-v.x);break;default:return}if(v.height>L+S-v.y&&this.dragInfo.dragTarget===Y.Plane)v.y=L+S-h}else if(v.x<0&&(v.x=0),v.y<0&&(v.y=0),this.imgInfo)if(this.dragInfo.dragTarget===Y.Plane)v.x+v.width>(null==(i=this.imgInfo)?void 0:i.width)&&(v.x=this.imgInfo.width-d),v.y+v.height>(null==(a=this.imgInfo)?void 0:a.height)&&(v.y=this.imgInfo.height-h);else if(v.x+v.width>(null==(r=this.imgInfo)?void 0:r.width)+.01||v.y+v.height>(null==(o=this.imgInfo)?void 0:o.height)+.01)return;this.setRectList(this.rectList.map((function(e){return e.id===v.id?pn.getRectUnderZoom(v,1/c.zoom):e}))),this.render()}}},{key:"onMouseMove",value:function(e){var t,i;if(!Object(S.a)(Object(O.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var a=this.getCoordinateUnderZoom(e),r=jt.changeDrawOutsideTarget(a,{x:0,y:0},this.imgInfo,this.config.drawOutsideTarget,this.basicResult,this.zoom);if(this.selectedRectID&&this.dragInfo)this.onDragMove(r);else{if(this.selectedRectID){var o=this.getHoverRectPointIndex(e);if(o!==this.hoverRectPointIndex)return this.hoverRectPointIndex=o,this.hoverRectEdgeIndex=-1,void this.render();if(-1===this.hoverRectPointIndex){var c=this.getHoverRectEdgeIndex(e);if(c!==this.hoverRectEdgeIndex)return this.hoverRectEdgeIndex=c,void this.render()}}var l=this.getHoverRectID(e),s=this.hoverRectID;if(this.hoverRectID=l,l!==s&&this.render(),this.drawingRect&&this.firstClickCoord){var u=this.firstClickCoord,d=u.x,h=u.y,f=this.drawingRect,g=f.width,v=f.height;if(g=Math.abs(d-r.x),v=Math.abs(h-r.y),r.x<d&&(d=r.x),r.y<h&&(h=r.y),!1===this.config.drawOutsideTarget){if((null==(i=null==(t=this.basicResult)?void 0:t.pointList)?void 0:i.length)>0&&pn.isRectNotInPolygon(ta(ea({},this.drawingRect),{x:d,y:h,width:g,height:v}),De(this.basicResult.pointList,this.zoom)))return;r.x<0&&(g=Math.abs(this.firstClickCoord.x),d=0),r.y<0&&(v=Math.abs(this.firstClickCoord.y),h=0),this.imgInfo&&(d+g>this.imgInfo.width&&(g=Math.abs(this.imgInfo.width-d)),h+v>this.imgInfo.height&&(v=Math.abs(this.imgInfo.height-h)))}this.drawingRect=ta(ea({},this.drawingRect),{x:d,y:h,width:g,height:v}),this.render()}}}}},{key:"setAttributeLockList",value:function(e){this.setSelectedRectID(void 0),Object(S.a)(Object(O.a)(n.prototype),"setAttributeLockList",this).call(this,e)}},{key:"setBasicResult",value:function(e){Object(S.a)(Object(O.a)(n.prototype),"setBasicResult",this).call(this,e),this.clearActiveStatus()}},{key:"setRectValidAndRender",value:function(e){e&&(this.setRectList(this.rectList.map((function(t){return t.id===e?ta(ea({},t),{valid:!t.valid}):t})),!0),this.render(),this.emit("updateResult"))}},{key:"createNewDrawingRect",value:function(e,t){if(this.imgInfo){var n=this.getCoordinateUnderZoom(e),i=jt.changeDrawOutsideTarget(n,{x:0,y:0},this.imgInfo,this.config.drawOutsideTarget,this.basicResult,this.zoom);if(this.setSelectedRectID(""),this.hoverRectID="",this.drawOutSideTarget&&(i.x<0&&(i.x=0),i.y<0&&(i.y=0)),this.drawingRect=ta(ea({},i),{width:0,height:0,attribute:this.defaultAttribute,valid:!e.ctrlKey,id:yi(8,62),sourceID:t,textAttribute:""}),this.hasMarkerConfig){var a=ft.getNextMarker(this.currentPageResult,this.config.markerList,this.markerIndex);if(!a)return this.emit("messageInfo",Ln.getMessagesByLocale(mn.MarkerFinish,this.lang)),void(this.drawingRect=void 0);this.drawingRect&&(this.drawingRect=ta(ea({},this.drawingRect),{label:a.label})),this.markerIndex=a.index,this.emit("markIndexChange")}if(this.config.textConfigurable){var r;r=ni.getTextAttribute(this.rectList.filter((function(e){return ft.isSameSourceID(e.sourceID,t)})),this.config.textCheckType),this.drawingRect&&(this.drawingRect=ta(ea({},this.drawingRect),{textAttribute:r}))}if(Object.assign(this.drawingRect,{order:ft.getMaxOrder(this.rectList.filter((function(e){return ft.isSameSourceID(e.sourceID,t)})))+1}),this.firstClickCoord=ea({},i),this.firstCurrentPos=ea({},this.currentPos),this.dataInjectionAtCreation){var o=this.dataInjectionAtCreation(this.drawingRect);o&&Object.assign(this.drawingRect,o)}}}},{key:"addDrawingRectToRectList",value:function(){if(this.drawingRect){var e=this.drawingRect,t=e.width,n=e.height;if(t/=this.zoom,n/=this.zoom,Math.round(t)<this.config.minWidth||Math.round(n)<this.config.minHeight)return this.emit("messageInfo",Ln.getMessagesByLocale(mn.RectErrorSizeNotice,this.lang)),this.drawingRect=void 0,this.firstClickCoord=void 0,this.dragInfo=void 0,this.dragStatus=Ze.Wait,void this.render();var i=this.getDrawingRectWithRectList();this.setRectList(i,!0),this.history.pushHistory(this.rectList),this.setSelectedIdAfterAddingDrawingRect(),this.firstClickCoord=void 0,this.drawingRect=void 0,this.dragInfo=void 0,this.dragStatus=Ze.Wait}}},{key:"setSelectedIdAfterAddingDrawingRect",value:function(){this.drawingRect&&(this.config.textConfigurable?this.setSelectedRectID(this.drawingRect.id):this.setSelectedRectID())}},{key:"getDrawingRectWithRectList",value:function(){if(!this.drawingRect)return this.rectList;var e=this.drawingRect,t=e.x,n=e.y,i=e.width,a=e.height;return t/=this.zoom,n/=this.zoom,i/=this.zoom,a/=this.zoom,[].concat(Object(w.a)(this.rectList),[ta(ea({},this.drawingRect),{x:t,y:n,width:i,height:a})])}},{key:"rightMouseUp",value:function(e){var t=this.getHoverRectID(e),n=this.rectList.find((function(e){return e.id===t})),i=this.selectedRectID;if(this.setSelectedRectID(void 0),n&&this.setDefaultAttribute(n.attribute),this.drawingRect)this.drawingRect=void 0,this.firstClickCoord=void 0;else if(i!==t&&this.dblClickListener.clearRightDblClick(),this.setSelectedRectID(t),this.hoverRectID="",(null==n?void 0:n.label)&&this.hasMarkerConfig){var a=ft.getCurrentMarkerIndex(n.label,this.config.markerList);a>=0&&(this.setMarkerIndex(a),this.emit("markIndexChange"))}this.render()}},{key:"shiftRightMouseUp",value:function(e){var t=this.getHoverRectID(e);this.emit("shiftRightMouseUp",t)}},{key:"onMouseUp",value:function(e){if(Object(S.a)(Object(O.a)(n.prototype),"onMouseUp",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;if(this.dragInfo&&this.dragStatus===Ze.Move)return this.dragInfo=void 0,this.dragStatus=Ze.Wait,this.history.pushHistory(this.rectList),void this.emit("updateResult");if(2!==e.button||!0!==e.shiftKey)if(2!==e.button){var t=ft.getSourceID(this.basicResult);this.drawingRect?this.addDrawingRectToRectList():!0===e.ctrlKey&&0===e.button&&this.hoverRectID?this.setRectValidAndRender(this.hoverRectID):(this.createNewDrawingRect(e,t),this.render())}else this.rightMouseUp(e);else this.shiftRightMouseUp(e)}},{key:"onRightDblClick",value:function(e){Object(S.a)(Object(O.a)(n.prototype),"onRightDblClick",this).call(this,e);var t=this.getHoverRectID(e);this.selectedRectID&&this.selectedRectID===t&&this.deleteRect(t)}},{key:"onKeyDown",value:function(e){if(ft.hotkeyFilter(e)&&!1!==Object(S.a)(Object(O.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode;switch(t){case Cn.Ctrl:this.drawingRect&&(this.drawingRect=ta(ea({},this.drawingRect),{valid:!e.ctrlKey}),this.render());break;case Cn.F:this.selectedRectID&&this.setRectValidAndRender(this.selectedRectID);break;case Cn.Z:this.setIsHidden(!this.isHidden),this.render();break;case Cn.Delete:this.deleteRect(this.selectedRectID);break;case Cn.Tab:if(e.preventDefault(),this.drawingRect)return;var i=Ue.ascend;e.shiftKey&&(i=Ue.descend);var a=ft.getRenderResultList(this.rectList,ft.getSourceID(this.basicResult),this.attributeLockList,this.selectedRectID),r=Object(I.a)(a,2),o=r[0],c=r[1],l=Object(w.a)(o);c&&(l=[].concat(Object(w.a)(l),[c]));var s=ii.getViewPort(this.canvas,this.currentPos,this.zoom);l=l.filter((function(e){return ii.inViewPort({x:e.x,y:e.y},s)}));var u=ft.getNextSelectedRectID(l,i,this.selectedRectID);u&&(this.setSelectedRectID(u.id),!0===this.config.attributeConfigurable&&this.setDefaultAttribute(u.attribute));break;default:if(this.config.attributeConfigurable){var d=ni.getAttributeByKeycode(t,this.config.attributeList);void 0!==d&&this.setDefaultAttribute(d)}}return!0}}},{key:"onKeyUp",value:function(e){if(Object(S.a)(Object(O.a)(n.prototype),"onKeyUp",this).call(this,e),e.keyCode===Cn.Ctrl)this.drawingRect&&(this.drawingRect=ta(ea({},this.drawingRect),{valid:!0}),this.render())}},{key:"onWheel",value:function(e){var t,i,a=this.zoom;this.drawingRect&&this.firstClickCoord&&(t=pn.getRectUnderZoom(this.drawingRect,1/a),i=jt.changePointByZoom(this.firstClickCoord,1/a)),Object(S.a)(Object(O.a)(n.prototype),"onWheel",this).call(this,e,!1),t&&i&&(this.drawingRect=pn.getRectUnderZoom(t,this.zoom),this.firstClickCoord=jt.changePointByZoom(i,this.zoom)),this.render()}},{key:"getCurrentSelectedData",value:function(){var e=this.selectedRect;if(e){var t=this.getColor(e.attribute),n=e.valid?null==t?void 0:t.valid.stroke:null==t?void 0:t.invalid.stroke;return{width:e.width*this.zoom*.6,textAttribute:e.textAttribute,color:n}}}},{key:"getRenderStyle",value:function(e){var t=this.customRenderStyle&&this.customRenderStyle(e);if(t)return t;var n,i,a=this.getColor(e.attribute);return!1===e.valid?(n=null==a?void 0:a.invalid.stroke,i=null==a?void 0:a.invalid.fill):(n=null==a?void 0:a.valid.stroke,i=null==a?void 0:a.valid.fill),{strokeColor:n,fillColor:i,textColor:n,toolColor:a}}},{key:"renderTextAttribute",value:function(){var e,t=this.selectedRect;if(this.ctx&&!0===this.config.textConfigurable&&t){var n=t.x,i=t.y,a=t.width,r=t.height,o=t.attribute,c=t.valid,l=a*this.zoom*.6,s=jt.getOffsetCoordinate({x:n,y:i+r},this.currentPos,this.zoom),u=this.getColor(o),d=c?null==u?void 0:u.valid.stroke:null==u?void 0:u.invalid.stroke;this._textAttributInstance||(this._textAttributInstance=new Wi({width:l,container:this.container,icon:this.getTextIconSvg(o),color:d,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedRectTextAttribute})),this._textAttributInstance&&!(null==(e=this._textAttributInstance)?void 0:e.isExit)&&this._textAttributInstance.appendToContainer(),this._textAttributInstance.update("".concat(t.textAttribute),{left:s.x,top:s.y+4,color:d,width:l})}}},{key:"renderSelectedRect",value:function(e){var t=this,n=this.selectedRect;if(this.ctx&&e&&n){var i=this.ctx,a=10,r=pn.getRectPointList(n),o=r.length,c=this.getColor(e.attribute);r.forEach((function(n,l){var s,u;if(i.save(),i.moveTo(n.x,n.y),i.beginPath(),a=t.hoverRectPointIndex===l?12:6,!1===e.valid?(i.strokeStyle=null==c?void 0:c.invalid.stroke,i.fillStyle=null==c?void 0:c.invalid.stroke):(i.strokeStyle=null==c?void 0:c.valid.stroke,i.fillStyle=null==c?void 0:c.valid.stroke),i.arc(n.x*t.zoom+t.currentPos.x,n.y*t.zoom+t.currentPos.y,a,0,2*Math.PI),i.fill(),t.hoverRectEdgeIndex===l){i.beginPath(),i.lineWidth=10;var d=t.getColor(e.attribute),h=!1===e.valid?null==(s=null==d?void 0:d.invalid)?void 0:s.stroke:null==(u=null==d?void 0:d.valid)?void 0:u.stroke;i.strokeStyle=h,i.moveTo(r[l].x*t.zoom+t.currentPos.x,r[l].y*t.zoom+t.currentPos.y),i.lineTo(r[(l+1)%o].x*t.zoom+t.currentPos.x,r[(l+1)%o].y*t.zoom+t.currentPos.y),i.stroke()}i.restore()})),this.renderTextAttribute()}}},{key:"renderDrawingRect",value:function(e){var t,n,i,a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.ctx&&e){var c=this.ctx,l=this.style,s=l.hiddenText,u=void 0!==s&&s;c.save();var d=this.getRenderStyle(e),h=d.strokeColor,f=d.fillColor,g=d.textColor;c.font="lighter 14px Arial";var v="";if((null==(t=this.config)?void 0:t.isShowOrder)&&e.order&&(null==e?void 0:e.order)>0&&(v="".concat(e.order)),e.label&&this.hasMarkerConfig){var b=ft.getCurrentMarkerIndex(e.label,this.config.markerList)+1;v="".concat(b,"_").concat(mi.getMarkerShowText(e.label,this.config.markerList))}e.attribute&&(v="".concat(v,"  ").concat(ni.getAttributeShowText(e.attribute,null==(n=this.config)?void 0:n.attributeList)));var p=jt.changeRectByZoom(e,o?r:this.zoom,this.currentPos);u||pi.drawText(this.canvas,{x:p.x,y:p.y-6},v,ta(ea({color:h,font:"normal normal 900 14px SourceHanSansCN-Regular"},et),{textMaxWidth:300}));var m=null!=(a=null==(i=this.style)?void 0:i.width)?a:2;e.id!==this.hoverRectID&&e.id!==this.selectedRectID||pi.drawRectWithFill(this.canvas,p,{color:f}),pi.drawRect(this.canvas,p,{color:h,thickness:m,hiddenText:!0}),c.restore();var y="".concat(Math.round(e.width)," * ").concat(Math.round(e.height));!0===o&&(y="".concat(Math.round(e.width/this.zoom)," * ").concat(Math.round(p.height/this.zoom)));var x=7*y.length;if(u||pi.drawText(this.canvas,{x:p.x+p.width-x,y:p.y+p.height+15},y,ea({color:g,font:"normal normal 600 14px Arial"},et)),!u&&e.textAttribute&&e.id!==this.selectedRectID){var C=0,w=Math.max(20,p.width-x);pi.drawText(this.canvas,{x:p.x,y:p.y+p.height+20+C},e.textAttribute,ea({color:g,font:"italic normal 900 14px Arial",textMaxWidth:w},et))}}}},{key:"renderStaticRect",value:function(){var e,t=this;if((null==(e=this.rectList)?void 0:e.length)>0&&JSON.stringify(this.rectList)){var n=this.renderEnhance,i=void 0===n?{}:n,a=ft.getRenderResultList(this.rectList,ft.getSourceID(this.basicResult),this.attributeLockList,this.selectedRectID),r=Object(I.a)(a,2),o=r[0],c=r[1];this.isHidden||null==o||o.forEach((function(e){t.renderDrawingRect(e),i.staticRender&&i.staticRender(t.canvas,jt.changeRectByZoom(e,t.zoom,t.currentPos),t.getRenderStyle(e))})),c&&(this.renderDrawingRect(c),this.renderSelectedRect(c),i.selectedRender&&i.selectedRender(this.canvas,jt.changeRectByZoom(c,this.zoom,this.currentPos),this.getRenderStyle(c)))}}},{key:"renderCreatingRect",value:function(){if(this.drawingRect){var e=this.renderEnhance,t=void 0===e?{}:e;this.renderDrawingRect(this.drawingRect,1,!0),t.creatingRender&&t.creatingRender(this.canvas,jt.changeRectByZoom(this.drawingRect,1,this.currentPos),this.getRenderStyle(this.drawingRect))}}},{key:"renderRect",value:function(){this.renderStaticRect(),this.renderCreatingRect()}},{key:"render",value:function(){this.ctx&&(Object(S.a)(Object(O.a)(n.prototype),"render",this).call(this),this.renderRect(),this.renderCursorLine(this.getLineColor(this.defaultAttribute)))}},{key:"setDefaultAttribute",value:function(e){var t=this,n=this.defaultAttribute;if((this.defaultAttribute=null!=e?e:"",n!==e)&&(this.changeStyle(e),this.emit("changeAttributeSidebar"),this.selectedRect&&(this.setRectList(this.rectList.map((function(e){return e.id===t.selectedID?ta(ea({},e),{attribute:t.defaultAttribute}):e})),!0),this.history.pushHistory(this.rectList),this.render()),this.drawingRect&&(this.drawingRect=ta(ea({},this.drawingRect),{attribute:this.defaultAttribute}),this.render()),this._textAttributInstance)){if(this.attributeLockList.length>0&&!this.attributeLockList.includes(this.defaultAttribute))return void this._textAttributInstance.clearTextAttribute();this._textAttributInstance.updateIcon(this.getTextIconSvg(e))}}},{key:"setValid",value:function(e){Object(S.a)(Object(O.a)(n.prototype),"setValid",this).call(this,e),this.emit("updateResult")}},{key:"clearActiveStatus",value:function(){this.drawingRect=void 0,this.firstClickCoord=void 0,this.dragInfo=void 0,this.dragStatus=Ze.Wait,this.setSelectedRectID(void 0)}},{key:"clearResult",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.rectList.filter((function(e){return!0===e.disableDelete}));t.length>0&&e&&this.emit("messageInfo",Ln.getMessagesByLocale(mn.ClearPartialData,this.lang)),this.setRectList(t,!0),this.setSelectedRectID(void 0)}},{key:"deleteRect",value:function(e){var t;if(e){var n=this.rectList.find((function(t){return t.id===e}));!0!==(null==n?void 0:n.disableDelete)?(this.setRectList(this.rectList.filter((function(t){return t.id!==e})),!0),this.history.pushHistory(this.rectList),this.setSelectedRectID(void 0),null==(t=this._textAttributInstance)||t.clearTextAttribute(),this.render()):this.emit("messageInfo",Ln.getMessagesByLocale(mn.DisableDelete,this.lang))}}},{key:"exportData",value:function(){return[this.rectList,this.basicImgInfo]}},{key:"undo",value:function(){var e=this.history.undo();e&&(e.length!==this.rectList.length&&this.setSelectedRectID(""),this.setRectList(e,!0),this.render())}},{key:"redo",value:function(){var e=this.history.redo();e&&(e.length!==this.rectList.length&&this.setSelectedRectID(""),this.setRectList(e,!0),this.render())}}]),n}(Gi),ia=Object.defineProperty,aa=Object.getOwnPropertySymbols,ra=Object.prototype.hasOwnProperty,oa=Object.prototype.propertyIsEnumerable,ca=function(e,t,n){return t in e?ia(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},la=function(e,t){for(var n in t||(t={}))ra.call(t,n)&&ca(e,n,t[n]);if(aa){var i,a=Object(E.a)(aa(t));try{for(a.s();!(i=a.n()).done;){n=i.value;oa.call(t,n)&&ca(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},sa=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"getTagKeyName",value:function(e,t){var n,i;if(t)return null!=(i=null==(n=t.find((function(t){return t.value===e})))?void 0:n.key)?i:""}},{key:"getTagName",value:function(e,t){var n=Object(I.a)(e,2),i=n[0],a=void 0===i?"":i,r=n[1],o=void 0===r?"":r;if(t){var c,l=Object(E.a)(t);try{for(l.s();!(c=l.n()).done;){var s=c.value;if(s.value===a){if(!s.subSelected)return console.error("\u6807\u7b7e\u89e3\u6790\u9519\u8bef",a,o),"";var u,d=Object(E.a)(s.subSelected);try{for(d.s();!(u=d.n()).done;){var h=u.value;if(h.value===o)return h.key}}catch(f){d.e(f)}finally{d.f()}}}}catch(f){l.e(f)}finally{l.f()}}}},{key:"getTagNameList",value:function(e,t){var n=this;return Object.keys(e).length<=0?[]:Object.entries(e).reduce((function(e,i){var a=Object(I.a)(i,2),r=a[0],o=a[1];if(o&&o.length>0){var c=o.split(";"),l={keyName:n.getTagKeyName(r,t),value:c.map((function(e){return n.getTagName([r,e],t)}))};return[].concat(Object(w.a)(e),[l])}return e}),[]).filter((function(e){return e}))}},{key:"getTagnameListWithoutConfig",value:function(e){return Object.keys(e).length<=0?[]:Object.entries(e).reduce((function(e,t){var n=Object(I.a)(t,2),i={keyName:n[0],value:n[1].split(";")};return[].concat(Object(w.a)(e),[i])}),[]).filter((function(e){return e}))}},{key:"judgeResultIsInInputList",value:function(e,t,n){return!!(e&&t&&n)&&n.filter((function(n){if(n.value===e&&n.subSelected){var i=null==t?void 0:t.split(";");return(null==n?void 0:n.subSelected.filter((function(e){return i.indexOf(e.value)>-1})).length)>0}return!1})).length>0}},{key:"getDefaultResultByConfig",value:function(e){return e.reduce((function(e,t){return t.subSelected&&t.subSelected.forEach((function(n){var i;if(n.isDefault){var a=null!=(i=e[t.value])?i:"",r=[];a.length>0&&(r=a.split(";")),r.push(n.value),e[t.value]=r.join(";")}})),e}),{})}},{key:"getDefaultTagResult",value:function(e,t){var n=this.getDefaultResultByConfig(e);return t.length>0?t.map((function(e){return{id:yi(),sourceID:e.id,result:la({},n)}})):[{id:yi(),sourceID:"",result:la({},n)}]}}]),e}(),ua=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this,e)).getInitResultList=function(e,t){return 0!==e&&void 0!==e&&0===t.length?[]:sa.getDefaultTagResult(i.config.inputList,t)},i.setLabel=function(e,t){var n,a;if(!i.isImgError&&(i.basicResult||!i.dependToolName)){var r=i.config.inputList;if(r[e]){var o=r[e].subSelected;if(e<r.length&&r[e].subSelected&&o&&t<o.length){var c=r[e].value,l=null==(n=o[t])?void 0:n.value,s=null==(a=r[e])?void 0:a.isMulti,u=i.tagResult.filter((function(e){var t="".concat(e.sourceID);return ft.isSameSourceID(t,i.sourceID)}))[0];if(u){var d=0,h=u.result;for(var f in 0===u.sourceID&&(u.sourceID="0"),u.result)if(f===r[e].value){if(d++,!0===s){var g=h[f].split(";").filter((function(e){return""!==e})),v=g.indexOf(l);-1===v?g.push(l):g.splice(v,1),l=g.join(";")}""===l?1===Object.keys(h).length?i.tagResult=i.tagResult.filter((function(e){var t="".concat(e.sourceID);return ft.isDifferSourceID(t,i.sourceID)})):Object.keys(h).length>1&&delete h[f]:h[f]=l}0===d&&Object.assign(u.result,Object(D.a)({},c,l))}else i.tagResult=[{sourceID:i.sourceID,id:yi(8,62),result:Object(D.a)({},c,l)}];i.render()}}}},i.clearResult=function(){var e=arguments.length>1?arguments[1]:void 0;i.tagResult=e?i.tagResult.map((function(t){return(null==t?void 0:t.result[e])&&delete t.result[e],t})):[],i.render()},i.config=ft.jsonParser(e.config),i.tagResult=[],i.labelSelectedList=[],i.setShowDefaultCursor(!0),i}return Object(L.a)(n,[{key:"destroy",value:function(){this.clearTag(),Object(S.a)(Object(O.a)(n.prototype),"destroy",this).call(this)}},{key:"setResult",value:function(e){this.tagResult=e,this.render()}},{key:"currentPageResult",get:function(){return[this.currentTagResult]}},{key:"currentTagResult",get:function(){var e,t=this;return null!=(e=this.tagResult.filter((function(e){var n="".concat(e.sourceID);return ft.isSameSourceID(n,t.sourceID)}))[0])?e:{}}},{key:"sourceID",get:function(){return ft.getSourceID(this.basicResult)}},{key:"onKeyDown",value:function(e){var t=this;if(ft.hotkeyFilter(e)&&!1!==Object(S.a)(Object(O.a)(n.prototype),"onKeyDown",this).call(this,e)){var i=e.keyCode;if(i&&(i<=57&&i>=49||i<=105&&i>=97)){if(i-=i>57?97:49,1===this.config.inputList.length)return this.labelSelectedList=[0,i],this.setLabel(0,i),void setTimeout((function(){t.labelSelectedList=[],t.render()}),500);1===this.labelSelectedList.length?(this.labelSelectedList=[this.labelSelectedList[0],i],this.setLabel(this.labelSelectedList[0],i),setTimeout((function(){t.labelSelectedList=[],t.render()}),500)):(this.labelSelectedList=[i],this.emit("expend"))}}}},{key:"clearTag",value:function(){var e,t=null==(e=this.canvas)?void 0:e.parentNode,n=window.self.document.getElementById("tagToolTag");n&&t&&t.contains(n)&&(null==t||t.removeChild(n))}},{key:"renderTag",value:function(){var e,t,n,i,a,r;if(this.clearTag(),(null==(e=this.tagResult)?void 0:e.length)>0){var o=document.createElement("div"),c=sa.getTagNameList(null!=(n=null==(t=this.currentTagResult)?void 0:t.result)?n:{},this.config.inputList);o.innerHTML=null!=(i=c.reduce((function(e,t){return"".concat(e).concat(t.keyName,": ").concat(t.value.join(" \u3001 "),"\n")}),""))?i:"",o.setAttribute("id","tagToolTag"),o.setAttribute("style","\n        position: absolute;\n        top: 0;\n        right: 0;\n        z-index: 5;\n      \n        padding: 0 20px;\n      \n        font-size: 15px;\n        color: white;\n        text-align: right;\n        line-height: 32px;\n        white-space: pre;\n      \n        background: rgba(102, 111, 255, 1);\n        opacity: 0.6;\n        clear: both;\n      "),null==(r=null==(a=this.canvas)?void 0:a.parentNode)||r.appendChild(o)}}},{key:"render",value:function(){this.renderTag(),Object(S.a)(Object(O.a)(n.prototype),"render",this).call(this),this.emit("render")}},{key:"exportData",value:function(){var e=this.tagResult;return this.isImgError&&(e=[]),[e,this.basicImgInfo]}}]),n}(Gi),da=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"getStrokeAndFill",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.isSelected,a=void 0!==i&&i,r=n.isHover,o=void 0!==r&&r;return a?{stroke:t?e.validSelected.stroke:e.invalidSelected.stroke,fill:t?e.validSelected.fill:e.invalidSelected.fill}:o?{stroke:t?e.validHover.stroke:e.invalidHover.stroke,fill:t?e.validHover.fill:e.invalidHover.fill}:{stroke:t?e.valid.stroke:e.invalid.stroke,fill:t?e.valid.fill:e.invalid.fill}}},{key:"getStyle2String",value:function(e){if(e)return Object.entries(e).reduce((function(e,t){return"".concat(e," ").concat(t[0],": ").concat(t[1],";")}),"")}}]),e}(),ha=Object.defineProperty,fa=Object.defineProperties,ga=Object.getOwnPropertyDescriptors,va=Object.getOwnPropertySymbols,ba=Object.prototype.hasOwnProperty,pa=Object.prototype.propertyIsEnumerable,ma=Math.pow,ya=function(e,t,n){return t in e?ha(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},xa=function(e,t){for(var n in t||(t={}))ba.call(t,n)&&ya(e,n,t[n]);if(va){var i,a=Object(E.a)(va(t));try{for(a.s();!(i=a.n()).done;){n=i.value;pa.call(t,n)&&ya(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Ca=function(e,t){return fa(e,ga(t))},wa=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this,e)).setMarkerIndex=function(e){i.markerIndex=e},i.setMarkerIndexAndSelect=function(e){if(i.config.markerList){i.markerIndex=e;var t=i.config.markerList[e].value,n=i.currentPageResult.find((function(e){return e.label===t}));n&&(i.setSelectedID(n.id),!0===i.config.attributeConfigurable&&i.setDefaultAttribute(n.attribute)),i.emit("markIndexChange")}},i.textChange=function(e){!0===i.config.textConfigurable&&i.selectedID&&(i.setPointList(ni.textChange(e,i.selectedID,i.pointList)),i.emit("selectedChange"),i.render())},i.isMinDistance=function(e){var t=jt.changePointByZoom(e,i.zoom);return i.pointList.some((function(e){var n=jt.changePointByZoom(e,i.zoom);return cn.getLineLength(n,t)<.2}))},i.config=ft.jsonParser(e.config),i.pointList=[],i.markerIndex=0,i.setStyle(e.style),i.createPoint=i.createPoint.bind(Object(P.a)(i)),i.getCurrentSelectedData=i.getCurrentSelectedData.bind(Object(P.a)(i)),i.updateSelectedTextAttribute=i.updateSelectedTextAttribute.bind(Object(P.a)(i)),i.setSelectedID=i.setSelectedID.bind(Object(P.a)(i)),i}return Object(L.a)(n,[{key:"dataList",get:function(){return this.pointList}},{key:"drawOutsideTarget",get:function(){var e;return null!=(e=this.config.drawOutsideTarget)?e:this.config.drawPointOut}},{key:"setNextMarker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pointList;if(this.hasMarkerConfig){var t=ft.getNextMarker(this.getCurrentPageResult(e),this.config.markerList);t&&this.setMarkerIndexAndSelect(t.index)}}},{key:"setResult",value:function(e){this.clearActiveStatus(),this.setPointList(e),this.setNextMarker(e),this.render()}},{key:"setPointList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.pointList.length;this.pointList=e,n!==e.length&&this.emit("updatePageNumber"),t&&this.emit("updateResult")}},{key:"setConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.config=ft.jsonParser(e),!0===t&&this.clearResult()}},{key:"clearResult",value:function(){this.setPointList([]),this.setSelectedID(void 0),this.history.pushHistory([]),this.hoverID="",this.render()}},{key:"setDefaultAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.defaultAttribute;if(this.defaultAttribute=e,t!==e){this.changeStyle(e),this.emit("changeAttributeSidebar");var n=this.selectedID;if(n&&(this.pointList.forEach((function(t){t.id===n&&(t.attribute=e)})),this.history.pushHistory(this.pointList),this.render()),this._textAttributInstance){if(this.attributeLockList.length>0&&!this.attributeLockList.includes(e))return void this._textAttributInstance.clearTextAttribute();this._textAttributInstance.updateIcon(this.getTextIconSvg(e))}}}},{key:"selectedText",get:function(){var e,t=this;return null==(e=this.pointList.find((function(e){return e.id===t.selectedID})))?void 0:e.textAttribute}},{key:"setStyle",value:function(e){var t;Object(S.a)(Object(O.a)(n.prototype),"setStyle",this).call(this,e),this._textAttributInstance&&!1===this.config.attributeConfigurable&&(null==(t=this._textAttributInstance)||t.updateIcon(this.getTextIconSvg()))}},{key:"setSelectedID",value:function(e){var t,n,i=this.selectedID;e!==i&&i&&(null==(t=this._textAttributInstance)||t.changeSelected()),e||null==(n=this._textAttributInstance)||n.clearTextAttribute(),this.selectedID=e,this.render(),this.emit("selectedChange")}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return ni.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"clearActiveStatus",value:function(){this.hoverID=void 0,this.dragStatus=Ze.Wait,this.setSelectedID(void 0)}},{key:"setBasicResult",value:function(e){Object(S.a)(Object(O.a)(n.prototype),"setBasicResult",this).call(this,e),this.setNextMarker(),this.clearActiveStatus()}},{key:"onMouseDown",value:function(e){if(!Object(S.a)(Object(O.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation)return 0!==e.button||this.hoverID?(this.hoverID===this.selectedID&&0===e.button&&(this.dragStatus=Ze.Start),this.render(),!0):(this.createPoint(e),void this.render())}},{key:"onMouseMove",value:function(e){Object(S.a)(Object(O.a)(n.prototype),"onMouseMove",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo||(this.hoverID=this.getHoverId(),this.dragStatus!==Ze.Start&&this.dragStatus!==Ze.Move||this.onDragMove(e),this.hoverID&&this.render())}},{key:"onMouseUp",value:function(e){if(Object(S.a)(Object(O.a)(n.prototype),"onMouseUp",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;2===e.button&&this.rightMouseUp(),this.dragStatus===Ze.Move&&this.history.pushHistory(this.pointList),this.dragStatus=Ze.Wait,this.render()}},{key:"onDragMove",value:function(e){var t,n,i=this;if(this.imgInfo){this.dragStatus=Ze.Move;var a=this.getCoordinateUnderZoom(e),r=jt.changeDrawOutsideTarget(a,{x:0,y:0},this.imgInfo,this.drawOutsideTarget,this.basicResult,this.zoom),o=this.drawOutsideTarget?jt.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos):jt.changePointByZoom(r,1/this.zoom);!1===this.drawOutsideTarget&&this.dependToolName===p.Polygon&&(null==(n=null==(t=this.basicResult)?void 0:t.pointList)?void 0:n.length)>0&&!Gt.isInPolygon(o,this.basicResult.pointList)||(this.pointList.forEach((function(e){e.id===i.selectedID&&(e.x=o.x,e.y=o.y)})),this.render())}}},{key:"onKeyDown",value:function(e){if(ft.hotkeyFilter(e)&&!1!==Object(S.a)(Object(O.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode;switch(t){case Cn.Delete:this.deletePoint();break;case Cn.Tab:this.onTabKeyDown(e);break;case Cn.Z:this.setIsHidden(!this.isHidden),this.render();break;default:if(this.config.attributeConfigurable){var i=ni.getAttributeByKeycode(t,this.config.attributeList);void 0!==i&&this.setDefaultAttribute(i)}}}}},{key:"createPoint",value:function(e){var t,n,i,a;if(this.imgInfo){var r=this.config.upperLimit;if(r&&this.currentPageResult.length>=r)this.emit("messageInfo","".concat(Ln.getMessagesByLocale(mn.LowerLimitPoint,this.lang)));else{var o=ft.getSourceID(this.basicResult),c=this.getCoordinateUnderZoom(e),l=jt.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos);if(this.config.edgeAdsorption&&this.referenceData)if([p.Polygon,p.Line].includes(null==(t=this.referenceData)?void 0:t.toolName)){var s=(null==(n=this.referenceData)?void 0:n.toolName)===p.Polygon,u=Gt.getClosestPoint(l,this.referenceData.result,null!=(a=null==(i=this.referenceData.config)?void 0:i.lineType)?a:F.Line,ye/this.zoom,{isClose:s}),d=u.dropFoot;d&&(l=d),u.hasClosed&&this.emit("messageSuccess","".concat(Ln.getMessagesByLocale(mn.SuccessfulEdgeAdsorption,this.lang)))}if(!1===this.drawOutsideTarget){if(this.dependToolName&&this.basicCanvas){var h=!1;switch(this.dependToolName){case p.Rect:h=!pn.isInRect(l,this.basicResult);break;case p.Polygon:h=!Gt.isInPolygon(l,this.basicResult.pointList)}if(h)return}if(c.x<0||c.y<0||c.x>this.imgInfo.width||c.y>this.imgInfo.height)return}if(!this.isMinDistance(l)){var f=Ca(xa({},l),{attribute:this.defaultAttribute,valid:!e.ctrlKey,id:yi(8,62),sourceID:o,textAttribute:"",order:ft.getMaxOrder(this.pointList.filter((function(e){return ft.isSameSourceID(e.sourceID,o)})))+1});if(this.config.textConfigurable){var g;g=ni.getTextAttribute(this.pointList.filter((function(e){return ft.isSameSourceID(e.sourceID,o)})),this.config.textCheckType),f=Ca(xa({},f),{textAttribute:g})}if(this.hasMarkerConfig){var v=ft.getNextMarker(this.currentPageResult,this.config.markerList,this.markerIndex);if(!v)return void this.emit("messageInfo",Ln.getMessagesByLocale(mn.MarkerFinish,this.lang));f=Ca(xa({},f),{label:v.label}),this.markerIndex=v.index,this.emit("markIndexChange")}this.hoverID=f.id;var b=[].concat(Object(w.a)(this.pointList),[f]);this.setPointList(b),this.history.pushHistory(b),this.setSelectedID(f.id)}}}}},{key:"isInPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.zoom;return(this.style.width+2)/n>=Math.sqrt(ma(e.x-t.x,2)+ma(e.y-t.y,2))}},{key:"getHoverId",value:function(){var e,t=this,n=jt.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos),i=null==(e=this.pointList)?void 0:e.find((function(e){return t.isInPoint(n,e)}));return null==i?void 0:i.id}},{key:"rightMouseUp",value:function(){var e=this;if(this.selectedID===this.hoverID){var t=this.pointList.filter((function(t){return t.id!==e.selectedID}));return this.setPointList(t),this.history.pushHistory(t),this.setSelectedID(""),void(this.hoverID="")}var n=this.pointList.find((function(t){return t.id===e.hoverID}));if(this.setSelectedID(this.hoverID),this.setDefaultAttribute(null==n?void 0:n.attribute),(null==n?void 0:n.label)&&this.hasMarkerConfig){var i=ft.getCurrentMarkerIndex(n.label,this.config.markerList);i>=0&&(this.setMarkerIndex(i),this.emit("markIndexChange"))}}},{key:"onTabKeyDown",value:function(e){if(e.preventDefault(),this.dragStatus!==Ze.Move&&this.dragStatus!==Ze.Start){var t=Ue.ascend;e.shiftKey&&(t=Ue.descend);var n=ft.getRenderResultList(this.pointList,ft.getSourceID(this.basicResult),this.attributeLockList,this.selectedID),i=Object(I.a)(n,2),a=i[0],r=i[1],o=Object(w.a)(a);r&&(o=[].concat(Object(w.a)(o),[r]));var c=ft.getNextSelectedRectID(o,t,this.selectedID);c&&this.setSelectedID(c.id)}}},{key:"currentPageResult",get:function(){var e=ft.getRenderResultList(this.pointList,ft.getSourceID(this.basicResult),[]);return Object(I.a)(e,1)[0]}},{key:"getCurrentPageResult",value:function(e){var t=ft.getRenderResultList(e,ft.getSourceID(this.basicResult),[]);return Object(I.a)(t,1)[0]}},{key:"exportData",value:function(){return[this.pointList,this.basicImgInfo]}},{key:"deletePoint",value:function(){var e,t=this;this.selectedID&&(this.setPointList(this.pointList.filter((function(e){return e.id!==t.selectedID}))),this.history.pushHistory(this.pointList),null==(e=this._textAttributInstance)||e.clearTextAttribute(),this.emit("selectedChange"),this.render())}},{key:"undoAndRedo",value:function(e){var t,n,i=this;if(this.dragStatus!==Ze.Move&&this.dragStatus!==Ze.Start){var a=null==(n=(t=this.history)[e])?void 0:n.call(t);(null==a?void 0:a.some((function(e){return e.id===i.selectedID})))||this.setSelectedID(""),a&&(this.setPointList(a,!0),this.render())}}},{key:"undo",value:function(){this.undoAndRedo("undo")}},{key:"redo",value:function(){this.undoAndRedo("redo")}},{key:"getCurrentSelectedData",value:function(){var e,t=this;if(this.selectedID){var n=null==(e=this.pointList)?void 0:e.find((function(e){return e.id===t.selectedID})),i=this.getColor(null==n?void 0:n.attribute),a=(null==n?void 0:n.valid)?null==i?void 0:i.valid.stroke:null==i?void 0:i.invalid.stroke;return this.dragStatus=Ze.Wait,{width:200*this.zoom*.6,textAttribute:(null==n?void 0:n.textAttribute)||"",color:a}}}},{key:"updateSelectedTextAttribute",value:function(e){if(this._textAttributInstance&&e&&this.selectedID){var t=e;!1===ni.textAttributeValidate(this.config.textCheckType,"",t)&&(this.emit("messageError",ni.getErrorNotice(this.config.textCheckType,this.lang)),t=""),this.setPointList(ni.textChange(t,this.selectedID,this.pointList)),this.emit("updateTextAttribute"),this.render()}}},{key:"renderTextAttribute",value:function(){var e,t,n=this,i=null==(e=this.pointList)?void 0:e.find((function(e){return e.id===n.selectedID}));if(this.ctx&&!0===this.config.textConfigurable&&i){var a=i.x,r=i.y,o=i.attribute,c=i.valid,l=200*this.zoom*.6,s=jt.getOffsetCoordinate({x:a,y:r},this.currentPos,this.zoom),u=this.getColor(o),d=c?null==u?void 0:u.valid.stroke:null==u?void 0:u.invalid.stroke;this._textAttributInstance||(this._textAttributInstance=new Wi({width:l,container:this.container,icon:this.getTextIconSvg(o),color:d,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedTextAttribute})),this._textAttributInstance&&!(null==(t=this._textAttributInstance)?void 0:t.isExit)&&this._textAttributInstance.appendToContainer(),this._textAttributInstance.update("".concat(i.textAttribute),{left:s.x,top:s.y+4,color:d,width:l})}}},{key:"renderPoint",value:function(e){var t,n,i,a=e.textAttribute,r=void 0===a?"":a,o=e.attribute,c=e.id===this.selectedID,l=this.getColor(o),s=jt.changePointByZoom(e,this.zoom,this.currentPos),u=this.style,d=u.width,h=void 0===d?2:d,f=u.hiddenText,g=void 0!==f&&f,v=da.getStrokeAndFill(l,e.valid,{isSelected:c||e.id===this.hoverID});pi.drawCircle(this.canvas,s,h,{startAngleDeg:0,endAngleDeg:360,thickness:1,color:v.stroke,fill:v.fill});var b="";if(((null==(t=this.config)?void 0:t.isShowOrder)||(null==(n=this.config)?void 0:n.showOrder))&&e.order&&(null==e?void 0:e.order)>0&&(b="".concat(e.order)),e.label&&this.hasMarkerConfig){var p=ft.getCurrentMarkerIndex(e.label,this.config.markerList)+1;b="".concat(p,"_").concat(mi.getMarkerShowText(e.label,this.config.markerList))}e.attribute&&(b="".concat(b,"  ").concat(ni.getAttributeShowText(e.attribute,null==(i=this.config)?void 0:i.attributeList))),g||pi.drawText(this.canvas,{x:s.x+h/2,y:s.y-h-4},b,{textAlign:"center",color:v.stroke}),c?this.renderTextAttribute():g||pi.drawText(this.canvas,{x:s.x+h,y:s.y+h+24},r,xa({color:v.stroke},$e))}},{key:"renderPointList",value:function(){var e=this,t=ft.getRenderResultList(this.pointList,ft.getSourceID(this.basicResult),this.attributeLockList,this.selectedID),n=Object(I.a)(t,2),i=n[0],a=n[1];this.isHidden||i.forEach((function(t){e.renderPoint(t)})),a&&this.renderPoint(a)}},{key:"renderTop",value:function(){var e,t,n,i=this.getLineColor(this.defaultAttribute);if(this.renderCursorLine(i),this.config.edgeAdsorption&&this.referenceData){var a=jt.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos),r=(null==(e=this.referenceData)?void 0:e.toolName)===p.Polygon,o=Gt.getClosestPoint(a,this.referenceData.result,null!=(n=null==(t=this.referenceData.config)?void 0:t.lineType)?n:F.Line,ye/this.zoom,{isClose:r}).dropFoot;o&&a!==o&&a!==o&&(a=o,pi.drawCircle(this.canvas,jt.changePointByZoom(a,this.zoom,this.currentPos),5,{color:"white",fill:"white"}),pi.drawCircle(this.canvas,jt.changePointByZoom(a,this.zoom,this.currentPos),3,{fill:i,color:i}))}}},{key:"render",value:function(){this.ctx&&(Object(S.a)(Object(O.a)(n.prototype),"render",this).call(this),this.renderPointList(),this.renderTop())}}]),n}(Gi),Ia=Object.defineProperty,ka=Object.defineProperties,La=Object.getOwnPropertyDescriptors,Pa=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,Oa=Object.prototype.propertyIsEnumerable,Aa=function(e,t,n){return t in e?Ia(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ta=function(e,t){for(var n in t||(t={}))Sa.call(t,n)&&Aa(e,n,t[n]);if(Pa){var i,a=Object(E.a)(Pa(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Oa.call(t,n)&&Aa(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Ea=function(e,t){return ka(e,La(t))};!function(e){e[e.Create=0]="Create",e[e.Active=1]="Active",e[e.None=2]="None"}(Ri||(Ri={}));var Da,Na,Ra=16,Ma=0,_a=20,ja=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i,a,r,o;return Object(k.a)(this,n),(o=t.call(this,e)).drawActivatedLine=function(e,t,n){var i=it.a.cloneDeep(o.activeLine);if(i&&0!==i.length){var a,r=o.isActiveLineValid(),c=o.selectedID?o.lineList.find((function(e){return e.id===o.selectedID})):void 0;a=c?c.order:o.nextOrder();var l=o.getLineColorByAttribute({attribute:o.defaultAttribute,valid:!!r});i.map((function(e){return Object.assign(e,o.coordUtils.getRenderCoord(e))})),o.updateActiveArea(),o.drawLine(i,e,l,!0,!0),o.drawLineNumber(i[0],a,l,"",o.defaultAttribute,r),e&&o.isCreate&&o.arc(e,3,l),!o.cursor||o.selectedPoint||n||o.isShift||o.arc(o.cursor,5,l)}},o.drawHoverPoint=function(e){if(!o.isMousedown&&e&&o.isLineSelected){var t,n=o.getPointList(o.activeLine),i=o.activeLine.find((function(t){return St.calcDistance(o.coordUtils.getRenderCoord(t),e)<=5}));!i&&o.activeLine&&(t=o.findNearestPoint(n,e)),o.hoverPointID=i?i.id:void 0,o.cursor=i||null==t?void 0:t.point}},o.lineList=[],o.activeLine=[],o.coordsInsideActiveArea=!1,o.hoverLineSegmentIndex=-1,o.isShift=!1,o.isReference=!1,o.drawCurveLine=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5?arguments[5]:void 0,o=Te(t,Ra);e.save(),e.lineCap="round",e.lineJoin="round",e.strokeStyle=n.color,i&&(e.lineWidth=n.lineWidth),a&&St.setReferenceCtx(e),t.forEach((function(t,n){var i=t.specialEdge,a=o.splice(0,17);e.save(),e.beginPath(),r===n&&(e.lineWidth=4),a.forEach((function(t,n){var a=t.x,r=t.y,o=n>0?"lineTo":"moveTo";i&&St.setSpecialEdgeStyle(e),e[o](a,r)})),e.stroke(),e.restore()})),e.restore()},o.drawLine=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=t?e.concat(t):e,c={color:n,lineWidth:a?1:o.lineStyle.lineWidth};o.isCurve?St.drawCurveLine(o.ctx,r,c,!i,o.isReference,a?o.hoverLineSegmentIndex:-1):o.drawStraightLine(r,c,a),i&&e.forEach((function(e){var t,i,a=e.id,r=a&&[o.hoverPointID,null==(t=o.selectedPoint)?void 0:t.id].includes(a)?5:3;o.arc(e,r,n),[o.hoverPointID,null==(i=o.selectedPoint)?void 0:i.id].includes(a)||o.arc(e,2,"white")}))},o.drawStraightLine=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(P.a)(o),a=i.ctx;a&&(a.save(),a.lineCap="round",a.lineJoin="round",a.strokeStyle=t.color,a.lineWidth=t.lineWidth,o.isReference&&St.setReferenceCtx(a),e.forEach((function(t,i){if(a.beginPath(),i>0){var r=e[i-1];a.save(),(null==r?void 0:r.specialEdge)&&St.setSpecialEdgeStyle(a),n&&o.hoverLineSegmentIndex+1===i&&(a.lineWidth=4),a.moveTo(r.x,r.y),a.lineTo(t.x,t.y),a.stroke(),a.restore()}})),a.restore())},o.drawLines=function(){try{var e=it.a.cloneDeep(o.attributeFilteredLines);if(o.isHidden)return;e.forEach((function(e){if(e.id!==o.selectedID&&e.pointList){e.pointList.map((function(e){return Object.assign(e,o.coordUtils.getRenderCoord(e))}));var t=e.order,n=e.label,i=t,a=e&&o.getLineColorByAttribute(e);o.drawLine(e.pointList,void 0,a,!1),o.drawLineNumber(e.pointList[0],i,a,n,e.attribute,e.valid),e.id!==o.textEditingID&&o.drawLineTextAttribute(e.pointList[1],a,null==e?void 0:e.textAttribute)}}))}catch(t){console.error(t,"\u7ebf\u6761\u5de5\u5177\u6570\u636e\u89e3\u6790\u9519\u8bef"),o.lineList=[],o.clearCanvas()}},o.render=function(e){Object(S.a)((i=Object(P.a)(o),Object(O.a)(n.prototype)),"render",i).call(i),o.drawLines(),o.drawActivatedLine(e,void 0,!0),o.renderTextAttribute(),o.renderCursorLine(o.getLineColor(o.defaultAttribute))},o.moveLineInPolygon=function(e,t){var n;if(!Array.isArray(o.activeLine))return!1;(null==(n=o.activeLine)?void 0:n.every((function(n){return o.isInBasicPolygon({x:n.x+e,y:n.y+t})})))&&(o.lineDragging=!0,o.moveActiveArea(e,t))},o.moveLineInRectRange=function(e,t,n,i){if(void 0!==o.activeArea){var a=o.activeArea,r=a.top,c=a.left,l=a.right,s=a.bottom,u=[c,l].map((function(t){return it.a.isNumber(t)?t+e:0})),d=[r,s].map((function(e){return it.a.isNumber(e)?e+t:0})),h=c>=0&&l&&cn.isInRange(u,n),f=r>=0&&s&&cn.isInRange(d,i),g=h?e:0,v=f?t:0;o.lineDragging=!0,o.moveActiveArea(g,v)}},o.onRightClick=function(e){if(o.cursor=void 0,o.isCreate){if(o.isLinePointsNotEnough())return;o.stopLineCreating(!0)}else o.setActiveArea(o.getCoordinate(e),!0),o.emit("contextmenu")},o.updateSelectedAttributeAfterHistoryChanged=function(){if(o.selectedID){var e=o.lineList.find((function(e){return e.id===o.selectedID})),t=null==e?void 0:e.attribute;"string"===typeof t&&(o.defaultAttribute=t,o.updateAttribute(t),o.render())}},o.onLeftClick=function(e){var t=o.getCoordinate(e),n=Object(P.a)(o).lineDragging;if(o.lineDragging=!1,!o.isSpaceKey)if(o.isNone&&e.ctrlKey){var i=o.findHoverLine(t);i&&o.setInvalidLine(i.id)}else if(!o.isLinePointsExceed()){var a=o.getNextPoint(e,t);if(o.isCreate||o.isNone)o.setCreatStatusAndAddPoint(a);else if(o.isActive){if(n)return;if(o.isMouseCoordOutsideActiveArea())return o.setNoneStatus(!1),void o.setCreatStatusAndAddPoint(a);if(e.shiftKey)return void o.updateLineSegmentSpecial(t);if(o.coordsInsideActiveArea&&e.ctrlKey)return void o.setInvalidLine(o.selectedID);o.addLinePointToActiveLine()}}},o.onDblclick=function(){},o.onKeyUp=function(e){if(Object(S.a)((a=Object(P.a)(o),Object(O.a)(n.prototype)),"onKeyUp",a).call(a,e),o.isShift=!1,o.hoverLineSegmentIndex=-1,e.keyCode!==Cn.Esc){if(o.isActive){if(e.keyCode===Cn.Delete)return void o.deleteLine();if(e.keyCode===Cn.F)return void o.setInvalidLine(o.selectedID);if(e.keyCode===Cn.Space)return void o.continueToEdit()}o.keyboardEventWhileLineCreating(e)}else o.stopLineCreating(!1)},o.onRightDblClick=function(e){Object(S.a)((r=Object(P.a)(o),Object(O.a)(n.prototype)),"onRightDblClick",r).call(r,e);var t=o.getCoordinate(e);if(o.isActive){var i=o.findHoveredPoint(t);if(i)return void o.deleteSelectedLinePoint(i.id);o.deleteSelectedLine(t)}},o.setReference=function(e){o.isReference=e},o.pointsWithinRange=function(e){return!(o.lowerLimitPointNum&&e<o.lowerLimitPointNum)&&!(o.upperLimitPointNum&&e>o.upperLimitPointNum)},o.setLineList=function(e){var t=e.length!==o.lineListLen;o.lineList=e,t&&o.emit("updatePageNumber")},o.textChange=function(e){!1!==o.config.textConfigurable&&o.selectedID&&(o.updateSelectedTextAttribute(e),o.emit("selectedChange"))},o.status=2,o.isMousedown=!1,o.lineDragging=!1,o.isLineValid=!0,o.setConfig(e.config),o.prevAxis={x:0,y:0},o.textEditingID="",o.updateSelectedTextAttribute=o.updateSelectedTextAttribute.bind(Object(P.a)(o)),o.getCurrentSelectedData=o.getCurrentSelectedData.bind(Object(P.a)(o)),o.actionsHistory=new Oi,o.dependToolConfig={lineType:F.Line},o}return Object(L.a)(n,[{key:"isLineSelected",get:function(){return this.selectedID&&this.activeLine}},{key:"selectedLinePoints",get:function(){return this.activeLine?this.getPointList(this.activeLine):[]}},{key:"isCreate",get:function(){return 0===this.status}},{key:"isActive",get:function(){return 1===this.status}},{key:"isNone",get:function(){return 2===this.status}},{key:"isCurve",get:function(){return this.config.lineType===F.Curve}},{key:"isMultipleColor",get:function(){return this.config.lineColor===U.MultiColor}},{key:"imageSize",get:function(){return this.rotate%180===0?this.basicImgInfo:{width:this.basicImgInfo.height,height:this.basicImgInfo.width}}},{key:"lineListLen",get:function(){return this.lineList.length}},{key:"edgeAdsorptionEnabled",get:function(){return this.edgeAdsorption&&!this.isCurve&&this.lineListLen>0}},{key:"attributeConfigurable",get:function(){return this.config.attributeConfigurable}},{key:"isTextConfigurable",get:function(){return this.config.textConfigurable}},{key:"isDependPolygon",get:function(){return this.dependToolName===p.Polygon}},{key:"isDependRect",get:function(){return this.dependToolName===p.Rect}},{key:"isCurrentAttributeLocked",get:function(){return this.attributeLockList.includes(this.defaultAttribute)}},{key:"attributeFilteredLines",get:function(){var e=this;return this.attributeLockList.length>0?this.lineList.filter((function(t){return e.attributeLockList.includes((null==t?void 0:t.attribute)||"")})):this.lineList}},{key:"enableOutOfTarget",get:function(){return this.config.enableOutOfTarget}},{key:"showOrder",get:function(){var e;return null!=(e=this.config.showOrder)?e:this.config.isShowOrder}},{key:"edgeAdsorption",get:function(){return this.config.edgeAdsorption}},{key:"attributeList",get:function(){return this.config.attributeList}},{key:"lowerLimitPointNum",get:function(){return this.config.lowerLimitPointNum}},{key:"upperLimitPointNum",get:function(){return this.config.upperLimitPointNum}},{key:"textCheckType",get:function(){return this.config.textCheckType}},{key:"customFormat",get:function(){return this.config.customFormat}},{key:"dataList",get:function(){return this.lineList}},{key:"hasActiveLine",get:function(){return this.activeLine&&this.activeLine.length>0}},{key:"viewPortLines",get:function(){var e=ii.getViewPort(this.canvas,this.currentPos,this.zoom);return this.isHidden?[]:this.attributeFilteredLines.filter((function(t){var n;return null==(n=null==t?void 0:t.pointList)?void 0:n.some((function(t){return ii.inViewPort(t,e)}))}))}},{key:"lineStyle",get:function(){return{lineWidth:this.style.width,color:this.getLineColor(this.defaultAttribute),opacity:this.style.opacity}}},{key:"selectedText",get:function(){var e,t,n=this;return null!=(t=null==(e=this.lineList.find((function(e){return e.id===n.selectedID})))?void 0:e.textAttribute)?t:""}},{key:"currentPageResult",get:function(){return this.lineList}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e!==this.status){if(t){var n="";this.textCheckType===ne.Order&&this.isTextConfigurable&&(n=ni.getTextAttribute(this.lineList,this.textCheckType)),this.emit("updateText",n)}this.status=e,this.lineStatusChanged()}}},{key:"isInBasicPolygon",value:function(e){var t,n;return Ee(e,(null==(t=this.basicResult)?void 0:t.pointList)||[],null==(n=this.dependToolConfig)?void 0:n.lineType)}},{key:"getPolygonPointList",value:function(){if(!this.basicResult)return[];var e=this.basicResult.pointList;return this.dependToolConfig.lineType===F.Curve?Ae(e.reduce((function(e,t){return[].concat(Object(w.a)(e),[t.x,t.y])}),[]),.5,!0,20):e}},{key:"getNextCoordByRenderCoord",value:function(e){return this.getNextCoordByAbsCoord(this.coordUtils.getAbsCoord(e))}},{key:"getNextCoordByAbsCoord",value:function(e){var t,n=null==(t=this.activeLine)?void 0:t.slice(-1)[0];return n?this.coordUtils.getNextCoordByDependTool(e,n):e}},{key:"pointInLine",value:function(e,t,n){var i=this;return!(e.filter((function(e){return e})).length<2)&&e.some((function(a,r){if(0===r)return!1;var o=i.coordUtils.getRenderCoord(e[r-1]),c=i.coordUtils.getRenderCoord(a);return St.isInLine(t,o,c,n)}))}},{key:"arc",value:function(e){var t,n,i,a,r,o,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,l=arguments.length>2?arguments[2]:void 0;if(this.ctx){var s=e.x,u=e.y;null==(t=this.ctx)||t.save(),null==(n=this.ctx)||n.beginPath(),this.ctx.fillStyle=l||this.lineStyle.color,null==(i=this.ctx)||i.arc(s,u,c,0,360),null==(a=this.ctx)||a.closePath(),null==(r=this.ctx)||r.fill(),null==(o=this.ctx)||o.restore()}}},{key:"renderActiveArea",value:function(){if(this.isActive&&this.activeArea&&this.ctx){var e=this.activeArea,t=e.top,n=e.left,i=e.right,a=e.bottom,r=this.coordUtils.getRenderCoord({x:n,y:t}),o=r.x,c=r.y;this.ctx.save(),this.ctx.beginPath(),this.ctx.strokeStyle="#B3B8FF",this.ctx.rect(o,c,(i-n)*this.zoom,(a-t)*this.zoom),this.ctx.stroke(),this.ctx.restore()}}},{key:"addLinePoint",value:function(e){var t,n,i,a;this.arc(e),null==(t=this.activeLine)||t.push(Ea(Ta({},e),{id:yi()})),1===(null==(n=this.activeLine)?void 0:n.length)?null==(i=this.actionsHistory)||i.initRecord(this.activeLine):null==(a=this.actionsHistory)||a.pushHistory(this.activeLine),this.render()}},{key:"setCreatStatusAndAddPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.updateStatus(0,t),this.addLinePoint(e)}},{key:"isActiveLineValid",value:function(){var e,t=this;return this.selectedID?null==(e=this.lineList.find((function(e){return e.id===t.selectedID})))?void 0:e.valid:this.isLineValid}},{key:"nextOrder",value:function(){return 0===this.lineListLen?1:this.lineList.slice(-1)[0].order+1}},{key:"getLineColorByAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return da.getStrokeAndFill(this.getColor(e.attribute),e.valid,{isSelected:t}).stroke}},{key:"updateActiveArea",value:function(){this.activeArea=this.getActiveArea(),this.renderActiveArea()}},{key:"getActiveArea",value:function(){return this.hasActiveLine?cn.calcViewportBoundaries(this.activeLine,this.isCurve,Ra,this.zoom):void 0}},{key:"drawLineNumber",value:function(e){var t,n,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4?arguments[4]:void 0,l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if((this.showOrder||this.attributeConfigurable)&&this.ctx){var s=this.showOrder?a.toString():"".concat(o);if(this.attributeConfigurable){var u=c?null!=(i=null==(n=null==(t=this.attributeList)?void 0:t.find((function(e){return e.value===c})))?void 0:n.key)?i:c:"";s=[s,"".concat(!l&&u?"\u65e0\u6548":"").concat(u)].filter((function(e){return e})).join("_")}this.drawText(e,s,r)}}},{key:"drawLineTextAttribute",value:function(e,t,n){if(e&&n)return this.drawText(e,n,t,200)}},{key:"drawText",value:function(e,t,n,i){var a,r;this.ctx&&(null==(a=this.ctx)||a.save(),this.ctx.font="italic bold 14px SourceHanSansCN-Regular",this.ctx.fillStyle=n,this.ctx.strokeStyle=n,this.ctx.shadowColor="rgba(0, 0, 0, 0.6)",this.ctx.shadowOffsetY=2,this.ctx.shadowBlur=4,i?pi.wrapText(this.canvas,t,e.x-Ma,e.y-_a,i):this.ctx.fillText(t,e.x-Ma,e.y-_a),null==(r=this.ctx)||r.restore())}},{key:"moveActiveArea",value:function(e,t){this.activeArea&&(this.activeArea=Object.assign(this.activeArea,{top:this.activeArea.top+t,bottom:this.activeArea.bottom+t,right:this.activeArea.right+e,left:this.activeArea.left+e})),this.activeLine&&(this.activeLine.map((function(n){return Object.assign(n,{x:n.x+e,y:n.y+t})})),this.updateLines())}},{key:"findHoveredPoint",value:function(e){var t=this;if(this.activeLine)return this.activeLine.find((function(n){var i=t.coordUtils.getRenderCoord(n);return St.calcDistance(i,e)<=5}))}},{key:"findHoverLine",value:function(e){var t=this;return it.a.cloneDeep(this.lineList).reverse().find((function(n){var i=n.pointList,a=i?t.getPointList(i):[],r=t.getLineWidthScope();return a.some((function(n,i){if(0===i)return!1;var o=t.coordUtils.getRenderCoord(n),c=t.coordUtils.getRenderCoord(a[i-1]);return St.isInLine(e,o,c,r)}))}))}},{key:"getAdsorptionPoint",value:function(e){var t,n,i=this;return it.a.cloneDeep(this.lineList).reverse().forEach((function(a){var r=a.pointList;if(a.id!==i.selectedID&&r&&!((null==r?void 0:r.length)<2)){var o=i.findNearestPoint(r,e);if(o){if(0===o.minDistance)return void(t=o.point);(void 0===n||o.minDistance<n)&&(t=o.point,n=o.minDistance)}}})),t}},{key:"findNearestPoint",value:function(e,t){for(var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,a=i,r=1;r<=e.length-1;r++){var o=this.coordUtils.getRenderCoord(e[r]),c=this.coordUtils.getRenderCoord(e[r-1]),l=cn.getFootOfPerpendicular(t,o,c),s=l.length,u=l.footPoint,d=St.calcTwoPointDistance(o,t),h=St.calcTwoPointDistance(c,t);if(d<=2*i){n=o,i=0;break}if(h<=2*i){n=c,i=0;break}s<i&&(n=u,i=s)}return n?{point:n,minDistance:a}:void 0}},{key:"getPointList",value:function(e){return this.isCurve?Te(e,Ra):e}},{key:"moveSelectedLine",value:function(e){var t=(e.x-this.prevAxis.x)/this.zoom,n=(e.y-this.prevAxis.y)/this.zoom;if(this.enableOutOfTarget)return this.lineDragging=!0,void this.moveActiveArea(t,n);if(this.isDependPolygon)this.moveLineInPolygon(t,n);else{var i=[0,this.imageSize.width],a=[0,this.imageSize.height];if(this.isDependRect){var r=this.basicResult,o=r.x,c=r.y;i=[o,o+r.width],a=[c,c+r.height]}this.moveLineInRectRange(t,n,i,a)}}},{key:"moveSelectPoint",value:function(e){if(this.selectedPoint){var t=e.x-this.prevAxis.x,n=e.y-this.prevAxis.y,i={x:(this.selectedPoint?this.selectedPoint.x:0)+t/this.zoom,y:(this.selectedPoint?this.selectedPoint.y:0)+n/this.zoom};Object.assign(this.selectedPoint,this.getNextCoordByAbsCoord(i)),this.updateLines(),this.render()}}},{key:"getCoordByConfig",value:function(e,t){var n,i=!!e.shiftKey,a=e.altKey;if((null==(n=this.activeLine)?void 0:n.length)>0&&i){var r=this.activeLine.slice(-1)[0];return St.getVHPoint(r,t,this.coordUtils.getAbsCoord(t),this.coordUtils.getRenderCoord(r))}return this.edgeAdsorptionEnabled&&!a?this.getAdsorptionPoint(t):t}},{key:"getNextPoint",value:function(e,t){var n=this.getCoordByConfig(e,t)||t;return this.enableOutOfTarget?n:this.getNextCoordByRenderCoord(n)}},{key:"lineHover",value:function(){this.render()}},{key:"mouseMoveHandler",value:function(e){var t=this.getCoordinate(e),n=1===e.which;if(this.isCreate)this.hasActiveLine&&this.renderNextPoint(e,t);else{if(this.isNone&&(this.lineHover(),this.edgeAdsorptionEnabled&&!e.altKey)){var i=this.getAdsorptionPoint(t);i&&this.arc(i)}if(this.isActive){if(this.isMousedown&&n){if(this.selectedPoint)return void this.moveSelectPoint(t);if(this.coordsInsideActiveArea)return this.moveSelectedLine(t),void this.drawActivatedLine(void 0,void 0,!0)}this.drawHoverPoint(t),this.render()}}}},{key:"onMouseMove",value:function(e){if(!Object(S.a)(Object(O.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.getCoordinate(e);this.mouseMoveHandler(e),this.prevAxis=t}}},{key:"setActiveArea",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.findHoverLine(e);if(n){var i=this.lineList.findIndex((function(e){return e.id===(null==n?void 0:n.id)})),a=cn.calcViewportBoundaries((null==n?void 0:n.pointList)||[],this.isCurve,Ra,this.zoom),r=this.lineList[i];this.updateStatus(1),this.setActiveLine(r.pointList),this.setSelectedLineID(r.id),this.activeArea=a,this.updateLineAttributes(r)}else t&&this.setNoneStatus();this.render()}},{key:"setActiveLineByID",value:function(e){var t=this.lineList.find((function(t){return t.id===e}));if(t){var n=cn.calcViewportBoundaries((null==t?void 0:t.pointList)||[],this.isCurve,Ra,this.zoom);this.updateStatus(1),this.setActiveLine(t.pointList),this.setSelectedLineID(t.id),this.activeArea=n,this.updateLineAttributes(t)}this.render()}},{key:"setActiveLine",value:function(e){this.activeLine=e?it.a.cloneDeep(e):void 0}},{key:"historyChanged",value:function(e){var t=this,n="".concat(e,"Enabled");if(this.isCreate){if(this.actionsHistory&&this.actionsHistory[n]){var i=this.actionsHistory&&this.actionsHistory[e]();this.setActiveLine(i),this.render()}}else{if(this.history&&this.history[n]){var a=this.history[e](),r=null==a?void 0:a.find((function(e){return e.id===t.selectedID}));this.lineList=a,this.selectedID&&r?this.setActiveLine(null==r?void 0:r.pointList):this.setNoneStatus(),this.render()}this.emit("dataUpdated",this.lineList)}}},{key:"undo",value:function(){this.historyChanged("undo"),this.updateSelectedAttributeAfterHistoryChanged()}},{key:"redo",value:function(){this.historyChanged("redo"),this.updateSelectedAttributeAfterHistoryChanged()}},{key:"isCoordInsideTarget",value:function(e){if(this.isDependPolygon)return this.isInBasicPolygon(e);if(this.isDependRect){var t=this.basicResult,n=t.x,i=t.y,a=[n,n+t.width],r=[i,i+t.height];return cn.isInRange(e.x,a)&&cn.isInRange(e.y,r)}return cn.isInRange(e.x,[0,this.imageSize.width])&&cn.isInRange(e.y,[0,this.imageSize.height])}},{key:"getPointInsertIndex",value:function(e,t){var n=this;if(e&&this.activeLine){var i=this.getPointList(this.activeLine);return 2===this.activeLine.length?1:this.activeLine.findIndex((function(a,r){if(r>0){var o=n.activeLine?n.activeLine[r-1]:void 0,c=n.isCurve?i.slice(17*(r-1),17*r):[o,a];return n.pointInLine(c,e,t||n.getLineWidthScope())}return!1}))}return-1}},{key:"getLineWidthScope",value:function(){return this.lineStyle.lineWidth}},{key:"isMouseCoordOutsideActiveArea",value:function(){return!this.coordsInsideActiveArea&&!this.selectedPoint}},{key:"isLinePointsExceed",value:function(){return this.isCreate&&this.activeLine&&this.upperLimitPointNum&&~~this.upperLimitPointNum<=this.activeLine.length}},{key:"isLinePointsNotEnough",value:function(){var e;return this.activeLine&&(null==(e=this.activeLine)?void 0:e.length)<this.lowerLimitPointNum}},{key:"updateLineSegmentSpecial",value:function(e){var t=this.getPointInsertIndex(e,2)-1;if(t>-1){var n=this.activeLine[t];n.specialEdge=!n.specialEdge,this.hoverLineSegmentIndex=-1,this.render()}}},{key:"addLinePointToActiveLine",value:function(){var e,t=this.getPointInsertIndex(this.cursor),n=this.pointsWithinRange(this.activeLine.length+1);this.cursor&&t>-1&&n&&(this.activeLine.splice(t,0,Ea(Ta({},this.coordUtils.getAbsCoord(this.cursor)),{id:yi()})),this.updateLines(),null==(e=this.history)||e.pushHistory(this.lineList),this.render(),this.cursor=void 0)}},{key:"onMouseDown",value:function(e){if(!Object(S.a)(Object(O.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.getCoordinate(e);this.isMousedown=!0,this.prevAxis=t,3!==e.which?(this.selectedPoint=this.findHoveredPoint(t),this.coordsInsideActiveArea=!(!this.isActive||!this.activeArea)&&St.inArea(this.activeArea,this.coordUtils.getAbsCoord(t)),this.lineDragging=!1):this.cursor=void 0}}},{key:"lineHasChanged",value:function(){var e=this,t=this.lineList.find((function(t){return t.id===e.selectedID}));return!!t&&JSON.stringify(t.pointList)!==JSON.stringify(this.activeLine)}},{key:"updateLines",value:function(){var e=this,t=this.lineList.find((function(t){return t.id===e.selectedID}));t&&(t.pointList=it.a.cloneDeep(this.activeLine),this.emit("dataUpdated",this.lineList))}},{key:"onMouseUp",value:function(e){var t=this,i=function(){t.isMousedown=!1,t.hoverPointID=void 0,t.cursor=void 0,t.selectedPoint=void 0};this.hoverPointID=void 0,Object(S.a)(Object(O.a)(n.prototype),"onMouseUp",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo||(1===e.which&&this.onLeftClick(e),3===e.which&&this.onRightClick(e)),i()}},{key:"isTextValid",value:function(e){return ni.textAttributeValidate(this.textCheckType,this.customFormat,e)}},{key:"createLineData",value:function(){var e=yi(),t={pointList:it.a.cloneDeep(this.activeLine),id:e,valid:this.isLineValid,order:this.nextOrder()};return t.attribute=this.defaultAttribute,t}},{key:"stopLineCreating",value:function(){var e,t,n,i,a,r=this,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!!this.selectedID||!!this.isTextConfigurable;if(o)if(this.selectedID){var l=this.lineList.find((function(e){return e.id===r.selectedID}));a=this.selectedID,l&&(l.pointList=it.a.cloneWith(this.activeLine),it.a.isEqual(l.pointList,null==(e=this.history)?void 0:e.pushHistory(this.lineList))||null==(t=this.history)||t.pushHistory(this.lineList))}else if(this.isCreate&&this.activeLine&&this.activeLine.length>1){var s=this.createLineData();a=s.id,this.setLineList([].concat(Object(w.a)(this.lineList),[s])),null==(n=this.history)||n.pushHistory(this.lineList)}c?this.setActiveStatus(a):this.setNoneStatus(),null==(i=this.actionsHistory)||i.empty(),this.emit("dataUpdated",this.lineList),this.render()}},{key:"setActiveStatus",value:function(e){var t=e?this.lineList.find((function(t){return t.id===e})):void 0;if(t){var n=null==t?void 0:t.pointList;this.updateStatus(1),this.setActiveLine(n),this.setSelectedLineID(e)}else this.setNoneStatus()}},{key:"setNoneStatus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.updateStatus(2),this.activeLine=[],this.setSelectedLineID(void 0),this.activeArea=void 0,this.isLineValid=!0,this.cursor=void 0}},{key:"setKeyDownStatus",value:function(e,t){this.isShift=null!=t?t:e.keyCode===Cn.Shift}},{key:"continueToEdit",value:function(){var e;this.updateStatus(0),this.cursor=void 0,null==(e=this.actionsHistory)||e.pushHistory(this.activeLine),this.render()}},{key:"setInvalidLineOnCreating",value:function(e){if((!this.selectedID||e.keyCode===Cn.Ctrl)&&this.isCreate){var t=!e.ctrlKey;this.selectedID?this.setInvalidLine(this.selectedID,t,!1):this.isLineValid=t}}},{key:"onKeyDown",value:function(e){if(Object(S.a)(Object(O.a)(n.prototype),"onKeyDown",this).call(this,e),this.setKeyDownStatus(e),e.keyCode!==Cn.Z||e.ctrlKey||this.toggleIsHide(),e.keyCode===Cn.Shift&&this.render(),e.keyCode===Cn.Tab)return e.preventDefault(),void this.selectToNextLine(e);if(this.isCreate&&this.keyboardEventWhileLineCreating(e),this.config.attributeConfigurable){var t=ni.getAttributeByKeycode(e.keyCode,this.config.attributeList);void 0!==t&&this.setDefaultAttribute(t)}}},{key:"selectToNextLine",value:function(e){var t=ft.getNextSelectedRectIDByEvent(this.viewPortLines.map((function(e){var t,n,i,a;return Ea(Ta({},e),{x:null!=(n=null==(t=e.pointList[0])?void 0:t.x)?n:0,y:null!=(a=null==(i=e.pointList[0])?void 0:i.y)?a:0})})),e,this.selectedID);t&&this.setActiveLineByID(t.id)}},{key:"keyboardEventWhileLineCreating",value:function(e){this.isCreate&&(e.keyCode===Cn.Ctrl&&this.setInvalidLineOnCreating(e),[Cn.Shift,Cn.Alt].includes(e.keyCode)&&this.renderNextPoint(e,this.prevAxis))}},{key:"renderNextPoint",value:function(e,t){var n=this.coordUtils.getRenderCoord(this.getNextPoint(e,t));this.render(n)}},{key:"deleteSelectedLine",value:function(e){var t=cn.calcViewportBoundaries(this.activeLine,this.isCurve,Ra,this.zoom);St.inArea(t,this.coordUtils.getAbsCoord(e))&&this.deleteLine()}},{key:"deleteSelectedLinePoint",value:function(e){var t;this.pointsWithinRange(this.activeLine.length-1)&&e&&(this.setActiveLine(this.activeLine.filter((function(t){return t.id!==e}))),this.updateLines(),null==(t=this.history)||t.pushHistory(this.lineList)),this.cursor=void 0,this.render()}},{key:"deleteLine",value:function(){var e,t=this;this.lineList=this.lineList.filter((function(e){return e.id!==t.selectedID})),null==(e=this.history)||e.pushHistory(this.lineList),this.setNoneStatus(),this.emit("dataUpdated",this.lineList),this.render()}},{key:"setInvalidLine",value:function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.lineList.find((function(t){return t.id===e}));a&&(a.valid=void 0!==t?t:!a.valid,null==(n=this.history)||n.pushHistory(this.lineList),i&&this.render())}},{key:"empty",value:function(){var e,t;this.lineList=[],this.setNoneStatus(),this.selectedPoint=void 0,null==(e=this.actionsHistory)||e.empty(),null==(t=this.history)||t.init(),this.emit("dataUpdated",this.lineList),this.render()}},{key:"setAttribute",value:function(e){var t;this.attributeConfigurable&&(this.defaultAttribute=e,this.setLineAttribute("attribute",e),this.selectedID&&(null==(t=this.history)||t.pushHistory(this.lineList)))}},{key:"setTextAttribute",value:function(e){var t;this.isTextConfigurable&&(this.setLineAttribute("textAttribute",e),null==(t=this.history)||t.applyAttribute(this.selectedID,"textAttribute",e))}},{key:"setLineAttribute",value:function(e,t,n){var i=n||this.selectedID;if(i){var a=this.lineList.find((function(e){return e.id===i}));a&&(a[e]=t)}this.render()}},{key:"updateAttribute",value:function(e){this.emit("updateAttribute",e)}},{key:"updateLineAttributes",value:function(e){var t;if(this.attributeConfigurable&&e){var n=(null==e?void 0:e.attribute)||"";this.defaultAttribute=n,this.updateAttribute(n)}if(this.isTextConfigurable&&e){var i=(null==e?void 0:e.textAttribute)||"";this.updateTextAttribute(i)}null==(t=this.history)||t.updateHistory(this.lineList)}},{key:"lineStatusChanged",value:function(){this.emit("lineStatusChanged",{status:this.status,selectedLineID:this.selectedID})}},{key:"updateTextAttribute",value:function(e){var t=this;if(this.selectedID){var n=this.lineList.find((function(e){return e.id===t.selectedID}));n&&(n.textAttribute=e)}this.emit("updateText",e)}},{key:"saveData",value:function(){this.stopLineCreating(),this.setNoneStatus(),this.render()}},{key:"setTextEditingID",value:function(e){this.textEditingID=e,this.render()}},{key:"setSelectedLineID",value:function(e){var t,n;if(this.selectedID!==e){var i=this.selectedID;e!==i&&i&&(null==(t=this._textAttributeInstance)||t.changeSelected()),e||null==(n=this._textAttributeInstance)||n.clearTextAttribute(),this.selectedID=e,this.emit("selectedChange")}}},{key:"attributeLockListChange",value:function(e){this.attributeLockList=e,this.render()}},{key:"setResult",value:function(e){this.setNoneStatus(),this.setLineList(e),this.render()}},{key:"setConfig",value:function(e){Object(S.a)(Object(O.a)(n.prototype),"setConfig",this).call(this,e)}},{key:"toggleIsHide",value:function(){this.setIsHidden(!this.isHidden),this.render()}},{key:"clearCanvas",value:function(){Object(S.a)(Object(O.a)(n.prototype),"clearCanvas",this).call(this)}},{key:"clearResult",value:function(){this.setResult([]),this.setSelectedLineID(void 0),this.render()}},{key:"exportData",value:function(){return[this.lineList,this.basicImgInfo]}},{key:"setDefaultAttribute",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.attributeConfigurable&&(this.defaultAttribute=t,this.setLineAttribute("attribute",t),this.selectedID&&(null==(e=this.history)||e.pushHistory(this.lineList)),this.emit("changeAttributeSidebar"))}},{key:"getCurrentSelectedData",value:function(){var e,t,n=this,i=this.isActiveLineValid(),a=this.defaultAttribute,r=this.getColor(a);return{color:i?null==r?void 0:r.valid.stroke:null==r?void 0:r.invalid.stroke,textAttribute:null!=(t=null==(e=this.lineList.find((function(e){return e.id===n.selectedID})))?void 0:e.textAttribute)?t:""}}},{key:"renderTextAttribute",value:function(){var e,t,n,i,a=this;if(this.ctx&&this.activeLine&&!((null==(e=this.activeLine)?void 0:e.length)<2)&&!this.isCreate){var r=this.isActiveLineValid(),o=this.defaultAttribute,c=this.activeLine[1],l=c.x,s=c.y,u=this.coordUtils.getRenderCoord({x:l,y:s}),d=this.getColor(o),h=r?null==d?void 0:d.valid.stroke:null==d?void 0:d.invalid.stroke,f=null!=(n=null==(t=this.lineList.find((function(e){return e.id===a.selectedID})))?void 0:t.textAttribute)?n:"";this._textAttributeInstance||(this._textAttributeInstance=new Wi({container:this.container,icon:this.getTextIconSvg(o),color:h,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedTextAttribute})),this._textAttributeInstance&&!(null==(i=this._textAttributeInstance)?void 0:i.isExit)&&this._textAttributeInstance.appendToContainer(),this._textAttributeInstance.update("".concat(f),{left:u.x,top:u.y,color:h}),this._textAttributeInstance.updateIcon(this.getTextIconSvg(o))}}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return ni.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"updateSelectedTextAttribute",value:function(e){if(this._textAttributeInstance&&e&&this.selectedID){var t=e;!ni.textAttributeValidate(this.config.textCheckType,"",t)&&(this.emit("messageError",ni.getErrorNotice(this.config.textCheckType,this.lang)),t=""),this.setTextAttribute(t),this.emit("updateTextAttribute"),this.render()}}}]),n}(Gi),Ba=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this,e)).getSingleResult=function(e){var t={};return i.config.configList.length>0&&i.config.configList.forEach((function(e){var n;t[e.key]=null!=(n=e.default)?n:""})),{value:t,id:yi(),sourceID:null!=e?e:ft.getSourceID()}},i.getInitResultList=function(e,t){return e>0?t.map((function(e){return i.getSingleResult(e.id)})):[i.getSingleResult()]},i.textList=[],i.setShowDefaultCursor(!0),i.setConfig(e.config),i.initTextDisplayContainer(),i}return Object(L.a)(n,[{key:"dataList",get:function(){return this.textList}},{key:"textValueContainerID",get:function(){return"textValueContainer"}},{key:"textValueContainer",get:function(){return document.getElementById(this.textValueContainerID)}},{key:"currentPageResult",get:function(){return this.textList}},{key:"setResult",value:function(e){var t,n=this;this.textList=e,this.toggleTextContainerVisible(!0);var i=null==(t=this.textList[0])?void 0:t.value;i&&Object.keys(i).forEach((function(e){n.renderText(e,i[e])})),this.emit("valueUpdated"),this.toggleTextContainerVisible(!!i)}},{key:"updateTextValue",value:function(e,t){this.textList[0].value[e]=t,this.renderText(e,t),this.emit("valueUpdated")}},{key:"renderText",value:function(e,t){var n=document.getElementById("textKey".concat(e));n&&(n.innerText=t)}},{key:"getTextDomID",value:function(e){return"textKey".concat(e)}},{key:"initTextDisplayContainer",value:function(){var e=this,t=document.createElement("div"),n={position:"absolute",right:"0",top:"0","z-index":"20","max-width":"20%","font-family":"SourceHanSansCN-Regular",background:"rgb(102, 230, 255)",color:"white","word-break":"break-all","line-height":"24px","white-space":"pre-wrap","max-height":"80%","overflow-y":"auto",opacity:"0.6"};t.setAttribute("style",Object.keys(n).reduce((function(e,t){return e+="".concat(t,": ").concat(n[t],";")}),"")),t.setAttribute("id",this.textValueContainerID),this.config.configList.forEach((function(n){var i=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div");i.setAttribute("style","padding: 8px 16px"),a.innerText="".concat(n.key,":"),r.innerText="",r.setAttribute("id",e.getTextDomID(n.key)),i.appendChild(a),i.appendChild(r),t.appendChild(i)})),this.container.appendChild(t)}},{key:"exportData",value:function(){return[this.textList,this.basicImgInfo]}},{key:"destroyCanvas",value:function(){Object(S.a)(Object(O.a)(n.prototype),"destroyCanvas",this).call(this),this.textValueContainer&&this.container.removeChild(this.textValueContainer)}},{key:"onKeyDown",value:function(e){Object(S.a)(Object(O.a)(n.prototype),"onKeyDown",this).call(this,e),e.keyCode===Cn.Z&&this.toggleTextContainerVisible()}},{key:"toggleTextContainerVisible",value:function(e){if(this.textValueContainer){var t=(void 0!==e?e:"block"!==this.textValueContainer.style.display)?"block":"none";this.textValueContainer.style.display=t}}}]),n}(Gi),Ha=n(23),Va=Object.defineProperty,Za=Object.defineProperties,Fa=Object.getOwnPropertyDescriptors,za=Object.getOwnPropertySymbols,Ua=Object.prototype.hasOwnProperty,Ga=Object.prototype.propertyIsEnumerable,Wa=function(e,t,n){return t in e?Va(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ka=function(e,t){for(var n in t||(t={}))Ua.call(t,n)&&Wa(e,n,t[n]);if(za){var i,a=Object(E.a)(za(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Ga.call(t,n)&&Wa(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Ya=function(e,t){return Za(e,Fa(t))},Xa=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this,e)).isAllowDouble=function(e){var t=Object(P.a)(i).selectedID,n=i.getHoverID(e);return!(!t||t!==n)},i.textChange=function(e){!1!==i.config.textConfigurable&&i.selectedID&&(i.setPolygonList(ni.textChange(e,i.selectedID,i.polygonList)),i.emit("selectedChange"),i.render())},i.config=ft.jsonParser(e.config),i.drawingPointList=[],i.polygonList=[],i.hoverPointIndex=-1,i.hoverEdgeIndex=-1,i.drawingHistory=new Oi,i.isCtrl=!1,i.isAlt=!1,i.isCombined=!1,i.pattern=he.Normal,i.getCurrentSelectedData=i.getCurrentSelectedData.bind(Object(P.a)(i)),i.updateSelectedTextAttribute=i.updateSelectedTextAttribute.bind(Object(P.a)(i)),i}return Object(L.a)(n,[{key:"eventBinding",value:function(){Object(S.a)(Object(O.a)(n.prototype),"eventBinding",this).call(this),this.container.removeEventListener("mouseup",this.onMouseUp),this.container.addEventListener("mouseup",this.dragMouseUp),this.dblClickListener.addEvent(this.onMouseUp,this.onLeftDblClick,this.onRightDblClick,this.isAllowDouble)}},{key:"eventUnbinding",value:function(){Object(S.a)(Object(O.a)(n.prototype),"eventUnbinding",this).call(this),this.container.removeEventListener("mouseup",this.dragMouseUp)}},{key:"destroy",value:function(){Object(S.a)(Object(O.a)(n.prototype),"destroy",this).call(this),this._textAttributInstance&&this._textAttributInstance.clearTextAttribute()}},{key:"selectedPolygon",get:function(){return Gt.getPolygonByID(this.polygonList,this.selectedID)}},{key:"hoverPolygon",get:function(){var e=this;return this.polygonList.find((function(t){return t.id===e.hoverID&&t.id!==e.selectedID}))}},{key:"polygonListUnderZoom",get:function(){var e=this;return this.polygonList.map((function(t){return Ya(Ka({},t),{pointList:jt.changePointListByZoom(t.pointList,e.zoom)})}))}},{key:"selectedText",get:function(){var e;return null==(e=this.selectedPolygon)?void 0:e.textAttribute}},{key:"dataList",get:function(){return this.polygonList}},{key:"setPattern",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(null==(t=this.drawingPointList)?void 0:t.length)>0&&!0===n||(this.pattern=e)}},{key:"currentShowList",get:function(){var e=[],t=ft.getRenderResultList(this.polygonList,ft.getSourceID(this.basicResult),this.attributeLockList,this.selectedID),n=Object(I.a)(t,2),i=n[0],a=n[1];return e=i,this.isHidden&&(e=[]),a&&e.push(a),e}},{key:"currentPageResult",get:function(){var e=ft.getRenderResultList(this.polygonList,ft.getSourceID(this.basicResult),[]);return Object(I.a)(e,1)[0]}},{key:"setResultAndSelectedID",value:function(e,t){this.setPolygonList(e),t&&(this.selectedID=t),this.render()}},{key:"setResult",value:function(e){this.clearActiveStatus(),this.setPolygonList(e),this.render()}},{key:"setPolygonDataByID",value:function(e,t){return this.polygonList.map((function(n){return n.id===t?Ka(Ka({},n),e):n}))}},{key:"rotatePolygon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je.Clockwise,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectedID;if(n){var i=Gt.getPolygonByID(this.polygonList,n);if(i){var a=Gt.updatePolygonByRotate(t,e,null==i?void 0:i.pointList);this.setPolygonList(this.setPolygonDataByID({pointList:a},n)),this.render()}}}},{key:"addPointInDrawing",value:function(e){if(this.imgInfo&&(!this.forbidAddNewPolygonFuc||!this.forbidAddNewPolygonFuc(e))){var t=this.config,n=t.upperLimitPointNum,i=t.edgeAdsorption;if(n&&this.drawingPointList.length>=n)this.emit("messageInfo","".concat(Ln.getMessagesByLocale(mn.UpperLimitErrorNotice,this.lang)).concat(n));else{this.deleteSelectedID();var a=this.getCoordinateUnderZoom(e),r=jt.changeDrawOutsideTarget(a,{x:0,y:0},this.imgInfo,this.config.drawOutsideTarget,this.basicResult,this.zoom);if(0!==jt.returnClosePointIndex(r,jt.changePointListByZoom(this.drawingPointList,this.zoom))){var o=Gt.getClosestPoint(r,this.polygonListUnderZoom,this.config.lineType,ye).dropFoot,c=jt.changePointByZoom(o&&!1===e.altKey&&i?o:r,1/this.zoom);if(this.pattern!==he.Rect||2!==this.drawingPointList.length)this.drawingPointList.push(c),1===this.drawingPointList.length?this.drawingHistory.initRecord(this.drawingPointList):this.drawingHistory.pushHistory(this.drawingPointList);else{var l=cn.getRectangleByRightAngle(c,this.drawingPointList);if(this.drawingPointList=l,!1===this.config.drawOutsideTarget&&this.imgInfo&&this.isPolygonOutSide(this.drawingPointList))return this.emit("messageInfo","".concat(Ln.getMessagesByLocale(mn.ForbiddenCreationOutsideBoundary,this.lang))),void(this.drawingPointList=[]);this.addDrawingPointToPolygonList(!0)}}else this.addDrawingPointToPolygonList()}}}},{key:"clearResult",value:function(){this.setPolygonList([]),this.deleteSelectedID(),this.render()}},{key:"clearPolygonDrag",value:function(){this.drawingPointList=[],this.dragInfo=void 0,this.dragInfo=void 0,this.dragStatus=Ze.Wait,this.hoverEdgeIndex=-1,this.hoverPointIndex=-1,this.hoverID=""}},{key:"clearActiveStatus",value:function(){this.clearPolygonDrag(),this.deleteSelectedID()}},{key:"clearDrawingStatus",value:function(){this.drawingPointList=[]}},{key:"setPolygonList",value:function(e){var t=this.polygonList.length;this.polygonList=e,t!==e.length&&this.emit("updatePageNumber")}},{key:"setSelectedID",value:function(e){var t,n,i=this.selectedID;e!==i&&i&&(null==(t=this._textAttributInstance)||t.changeSelected()),e||null==(n=this._textAttributInstance)||n.clearTextAttribute(),this.selectedID=e,this.render(),this.emit("selectedChange")}},{key:"setDefaultAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.defaultAttribute;if(this.defaultAttribute=e,t!==e){this.changeStyle(e),this.emit("changeAttributeSidebar");var n=this.selectedID;if(n&&(this.selectedPolygon&&(this.selectedPolygon.attribute=e),this.history.pushHistory(this.polygonList),this.render()),this._textAttributInstance){if(this.attributeLockList.length>0&&!this.attributeLockList.includes(e))return void this._textAttributInstance.clearTextAttribute();this._textAttributInstance.updateIcon(this.getTextIconSvg(e))}}}},{key:"setStyle",value:function(e){var t;Object(S.a)(Object(O.a)(n.prototype),"setStyle",this).call(this,e),this._textAttributInstance&&!1===this.config.attributeConfigurable&&(null==(t=this._textAttributInstance)||t.updateIcon(this.getTextIconSvg()))}},{key:"setPolygonValidAndRender",value:function(e){if(e){var t=this.polygonList.map((function(t){var n;if(t.id===e){var i=null==(n=null==t?void 0:t.valid)||n;return Ya(Ka({},t),{valid:!i})}return t}));this.setPolygonList(t),this.history.pushHistory(this.polygonList),this.render(),this.emit("updateResult")}}},{key:"addDrawingPointToPolygonList",value:function(e){var t,n=this,i=this.config.lowerLimitPointNum,a=void 0===i?3:i;if(a<3&&(a=3),this.drawingPointList.length<a)return this.drawingPointList=[],void(this.editPolygonID="");var r=ft.getSourceID(this.basicResult),o=Object(w.a)(this.polygonList);if(this.editPolygonID){var c=o.find((function(e){return e.id===n.editPolygonID}));if(!c)return;c.pointList=this.drawingPointList,this.editPolygonID=""}else{var l=yi(8,62),s={id:l,sourceID:r,valid:!this.isCtrl,textAttribute:"",pointList:this.drawingPointList,attribute:this.defaultAttribute,order:ft.getMaxOrder(o.filter((function(e){return ft.isSameSourceID(e.sourceID,r)})))+1};if(this.config.textConfigurable){var u;u=ni.getTextAttribute(this.polygonList.filter((function(e){return ft.isSameSourceID(e.sourceID,r)})),this.config.textCheckType),s=Ya(Ka({},s),{textAttribute:u})}this.pattern===he.Rect&&!0===e&&(s=Ya(Ka({},s),{isRect:!0})),o.push(s),t=s,this.setSelectedIdAfterAddingDrawing(l)}this.setPolygonList(o),this.isCtrl=!1,this.drawingPointList=[],this.history.pushHistory(o),t&&this.emit("polygonCreated",t,this.zoom,this.currentPos)}},{key:"setSelectedIdAfterAddingDrawing",value:function(e){0!==this.drawingPointList.length&&(this.config.textConfigurable?this.setSelectedID(e):this.deleteSelectedID())}},{key:"getHoverID",value:function(e){var t,n=this,i=this.getCoordinateUnderZoom(e),a=this.currentShowList.map((function(e){return Ya(Ka({},e),{pointList:jt.changePointListByZoom(e.pointList,n.zoom)})}));return Gt.getHoverPolygonID(i,a,10,null==(t=this.config)?void 0:t.lineType)}},{key:"getHoverEdgeIndex",value:function(e){var t;if(!this.selectedID)return-1;var n=this.selectedPolygon;if(!n)return-1;var i=this.getCoordinateUnderZoom(e),a=jt.changePointListByZoom(n.pointList,this.zoom);return Gt.getHoverEdgeIndex(i,a,null==(t=this.config)?void 0:t.lineType)}},{key:"getHoverPointIndex",value:function(e){if(!this.selectedID)return-1;var t=this.selectedPolygon;if(!t)return-1;var n=this.getCoordinateUnderZoom(e),i=jt.changePointListByZoom(t.pointList,this.zoom);return jt.returnClosePointIndex(n,i)}},{key:"deletePolygon",value:function(e){var t;if(e){var n=this.polygonList.find((function(t){return t.id===e}));this.emit("deletedObject",{deletedObject:n,id:e}),this.setPolygonList(this.polygonList.filter((function(t){return t.id!==e}))),this.history.pushHistory(this.polygonList),null==(t=this._textAttributInstance)||t.clearTextAttribute(),this.emit("selectedChange"),this.render()}}},{key:"deletePolygonPoint",value:function(e){if(this.selectedID){var t=this.selectedPolygon;if(t){var n=this.config.lowerLimitPointNum;n<3&&(n=3),t.pointList.length<=n?this.emit("messageInfo","".concat(Ln.getMessagesByLocale(mn.LowerLimitErrorNotice,this.lang)).concat(n)):(null==t||t.pointList.splice(e,1),this.history.pushHistory(this.polygonList),this.render())}}}},{key:"spaceKeydown",value:function(){var e,t,n;if(this.selectedID){if(!0===(null==(e=this.selectedPolygon)?void 0:e.isRect))return void this.emit("messageInfo","".concat(Ln.getMessagesByLocale(mn.UnableToReannotation,this.lang)));this.editPolygonID=this.selectedID,this.drawingPointList=null!=(n=null==(t=this.selectedPolygon)?void 0:t.pointList)?n:[],this.drawingHistory.empty(),this.drawingHistory.initRecord(this.drawingPointList),this.hoverID="",this.deleteSelectedID(),this.render()}}},{key:"onTabKeyDown",value:function(e){e.preventDefault();var t=Ue.ascend;e.shiftKey&&(t=Ue.descend),this.switchToNextPolygon(t)}},{key:"switchToNextPolygon",value:function(e){if(!(this.drawingPointList.length>0)){var t=ft.getRenderResultList(this.polygonList,ft.getSourceID(this.basicResult),this.attributeLockList,this.selectedID),n=Object(I.a)(t,2),i=n[0],a=n[1],r=Object(w.a)(i);a&&(r=[].concat(Object(w.a)(r),[a]));var o=ii.getViewPort(this.canvas,this.currentPos,this.zoom),c=r.map((function(e){var t,n,i,a;return Ya(Ka({},e),{x:null!=(n=null==(t=e.pointList[0])?void 0:t.x)?n:0,y:null!=(a=null==(i=e.pointList[0])?void 0:i.y)?a:0})})).filter((function(e){return ii.inViewPort({x:e.x,y:e.y},o)})),l=ft.getNextSelectedRectID(c,e,this.selectedID);if(l){this.setSelectedID(l.id);var s=this.selectedPolygon;s&&this.setDefaultAttribute(s.attribute)}this.render()}}},{key:"onKeyDown",value:function(e){if(ft.hotkeyFilter(e)&&!1!==Object(S.a)(Object(O.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode;switch(t){case Cn.Space:this.spaceKeydown();break;case Cn.Esc:this.drawingPointList=[],this.editPolygonID="";break;case Cn.F:this.selectedID&&this.setPolygonValidAndRender(this.selectedID);break;case Cn.Z:if(e.altKey)return void this.onCombinedExecute();this.setIsHidden(!this.isHidden),this.render();break;case Cn.Delete:this.deletePolygon(this.selectedID),this.render();break;case Cn.Ctrl:this.isCtrl=!0;break;case Cn.Alt:!1===this.isAlt&&(e.preventDefault(),this.isAlt=!0,this.render());break;case Cn.Tab:this.onTabKeyDown(e);break;case Cn.X:e.altKey&&this.segment();break;default:if(this.config.attributeConfigurable){var i=ni.getAttributeByKeycode(t,this.config.attributeList);void 0!==i&&this.setDefaultAttribute(i)}}}}},{key:"onKeyUp",value:function(e){switch(Object(S.a)(Object(O.a)(n.prototype),"onKeyUp",this).call(this,e),e.keyCode){case Cn.Ctrl:this.isCtrl=!1;break;case Cn.Alt:var t=this.isAlt;this.isAlt=!1,!0===t&&this.render()}}},{key:"rightMouseUp",value:function(e){if(this.drawingPointList.length>0)this.addDrawingPointToPolygonList();else{this.setSelectedID(this.hoverID);var t=this.selectedPolygon;t&&this.setDefaultAttribute(t.attribute)}}},{key:"onLeftDblClick",value:function(e){if(this.hoverEdgeIndex>-1){var t=this.getCoordinateUnderZoom(e),n=this.selectedPolygon;if(!n)return;var i=Gt.getClosestPoint(t,this.polygonListUnderZoom,this.config.lineType,ye).dropFoot;if(!i)return;var a=this.config.upperLimitPointNum;if(a&&n.pointList.length>=a)return this.emit("messageInfo","".concat(Ln.getMessagesByLocale(mn.UpperLimitErrorNotice,this.lang)).concat(a)),void this.clearPolygonDrag();null==n||n.pointList.splice(this.hoverEdgeIndex+1,0,jt.changePointByZoom(i,1/this.zoom)),this.setPolygonDataByID(n,this.selectedID),this.history.pushHistory(this.polygonList),this.hoverPointIndex=-1,this.hoverEdgeIndex=-1,this.render()}this.dragInfo=void 0}},{key:"onRightDblClick",value:function(e){this.dragInfo=void 0,this.clearImgDrag();var t=this.getHoverID(e),n=this.getHoverPointIndex(e);if(this.hoverPointIndex>-1&&this.hoverPointIndex===n)return this.deletePolygonPoint(n),this.dragInfo=void 0,this.hoverPointIndex=-1,void this.render();this.hoverID===this.selectedID&&this.deletePolygon(t),this.render()}},{key:"onMouseDown",value:function(e){if(!Object(S.a)(Object(O.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation&&!0!==e.ctrlKey){var t=this.selectedPolygon;if(t&&0===e.button)if(this.getHoverID(e)===this.selectedID){var i=t.pointList,a=this.getCoordinateUnderZoom(e),r=[0],o=ze.Plane;this.dragStatus=Ze.Start;var c=this.getHoverPointIndex(e),l=this.getHoverEdgeIndex(e);return c>-1?(o=ze.Point,r=[c]):l>-1&&this.hoverEdgeIndex>-1&&(o=ze.Line,r=[l,(l+1)%i.length]),this.dragInfo={dragStartCoord:a,dragTarget:o,initPointList:i,changePointIndex:r,originPolygon:this.selectedPolygon},!0}}}},{key:"segment",value:function(){var e,t=this;if(this.selectedID&&(null==(e=this.config)?void 0:e.lineType)===F.Line){var n=Gt.getPolygonPointList(this.selectedID,this.currentShowList),i=this.currentShowList.filter((function(e){return e.id!==t.selectedID}));if(0!==i.length&&0!==n.length){var a=Gt.getWrapPolygonIndex(n,i),r=Object(w.a)(this.polygonList);if(-1===a){var o=Gt.segmentPolygonByPolygon(n,i);if(!o)return;var c=o.shift();if(!c)return;var l="",s=!0,u=ft.getSourceID(this.basicResult),d="";r=this.polygonList.map((function(e){var n,i;return e.id===t.selectedID?(l=e.attribute,s=null==(n=null==e?void 0:e.valid)||n,d=null!=(i=null==e?void 0:e.textAttribute)?i:"",Ya(Ka({},e),{pointList:c})):e})),o.length>0&&o.forEach((function(e,n){r.push({sourceID:u,id:yi(8,62),pointList:e,valid:s,order:ft.getMaxOrder(t.currentShowList)+1+n,attribute:l,textAttribute:d})}))}else r[a].pointList=Gt.clipPolygonFromWrapPolygon(n,r[a].pointList),r=r.filter((function(e){return e.id!==t.selectedID}));this.setPolygonList(r),this.history.pushHistory(r),this.render()}}}},{key:"onCombinedExecute",value:function(){this.selectedID?this.isCombined=!this.isCombined:this.emit("messageInfo",Ha.i18n.t("PolygonsToBeCombinedNeedToBeSelected"))}},{key:"combine",value:function(e){var t,n=this,i=this.getHoverID(e);if(i&&this.selectedID&&this.selectedID!==i)if((null==(t=this.config)?void 0:t.lineType)===F.Line){var a=this.polygonList.find((function(e){return e.id===n.selectedID})),r=this.currentShowList.find((function(e){return e.id===i}));if(r&&a){var o=Gt.combinePolygonWithPolygon(a,r);if(o){var c=o.newPolygon,l=o.unionList;if(1===l.length&&c){var s=this.polygonList.filter((function(e){return!l.includes(e.id)})).map((function(e){return e.id===n.selectedID?c:e}));this.setPolygonList(s),this.history.pushHistory(s),this.render(),this.emit("messageInfo",Ha.i18n.t("CombineSuccess"))}else this.emit("messageInfo",Ha.i18n.t("CombiningFailedNotify"));this.isCombined=!1}}}else this.emit("messageInfo",Ha.i18n.t("CurveModeDoesNotSupportCutting"))}},{key:"isPolygonOutSide",value:function(e){var t=this;if(this.dependToolName&&this.basicCanvas&&this.basicResult){var n=!1;switch(this.dependToolName){case p.Rect:n=e.filter((function(e){return!pn.isInRect(e,t.basicResult)})).length>0;break;case p.Polygon:n=Gt.isPointListOutSidePolygon(e,this.basicResult.pointList,this.config.lineType)}return n}if(!this.imgInfo)return!1;var i=cn.calcViewportBoundaries(jt.changePointListByZoom(e,this.zoom)),a=i.left,r=i.top,o=i.right,c=i.bottom,l=1e-5;return a<0||r<0||o>this.imgInfo.width+l||c>this.imgInfo.height+l}},{key:"onDragMove",value:function(e){var t=this;if(this.dragInfo&&this.selectedID){var n=this.selectedPolygon,i=null==n?void 0:n.pointList;if(i){var a=this.dragInfo,r=a.initPointList,o=a.dragStartCoord,c=a.dragTarget,l=a.changePointIndex,s=this.getCoordinateUnderZoom(e),u={x:(s.x-o.x)/this.zoom,y:(s.y-o.y)/this.zoom};if(this.pattern===he.Rect&&!0===(null==n?void 0:n.isRect)&&l&&[ze.Line].includes(c)){var d=cn.getArrayIndex(l[0]-2,4),h=cn.getArrayIndex(l[0]-1,4),f=[r[d],r[h]];u={x:(u=cn.getRectPerpendicularOffset(o,s,f)).x/this.zoom,y:u.y/this.zoom}}switch(this.dragStatus=Ze.Move,c){case ze.Plane:i=i.map((function(e,t){return Ya(Ka({},e),{x:r[t].x+u.x,y:r[t].y+u.y})}));break;case ze.Point:case ze.Line:i=i.map((function(e,t){return l&&l.includes(t)?Ya(Ka({},e),{x:r[t].x+u.x,y:r[t].y+u.y}):e}))}if(this.pattern===he.Rect&&!0===(null==n?void 0:n.isRect)&&c===ze.Point&&l){var g=cn.getPointListFromPointOffset(r,l[0],u);i=g}if(!1===this.config.drawOutsideTarget&&this.imgInfo)if(this.isPolygonOutSide(i))return;var v=this.polygonList.map((function(e){if(e.id===t.selectedID){var n=Ya(Ka({},e),{pointList:i});return!0===e.isRect&&t.pattern===he.Normal&&Object.assign(n,{isRect:!1}),n}return e}));this.setPolygonList(v),this.render()}}}},{key:"onMouseMove",value:function(e){if(!Object(S.a)(Object(O.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo)if(this.selectedID&&this.dragInfo)this.onDragMove(e);else{var t=-1,i=-1;if(this.selectedID&&(this.hoverEdgeIndex=-1,this.hoverPointIndex=-1,(t=this.getHoverPointIndex(e))>-1?this.hoverPointIndex=t:(i=this.getHoverEdgeIndex(e),this.hoverEdgeIndex=i)),!(this.drawingPointList.length>0)){var a=this.getHoverID(e);this.hoverID!==a&&(this.hoverID=a,this.render())}}}},{key:"leftMouseUp",value:function(e){var t=this.getHoverID(e);0===this.drawingPointList.length&&!0===e.ctrlKey&&t?this.setPolygonValidAndRender(t):this.addPointInDrawing(e)}},{key:"onMouseUp",value:function(e){if(this.isCombined)switch(e.button){case 0:this.combine(e);break;case 2:this.isCombined=!1;break;default:return}else if(!Object(S.a)(Object(O.a)(n.prototype),"onMouseUp",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){if(this.dragInfo&&this.dragStatus===Ze.Move){var t=this.dragInfo.originPolygon;return this.dragInfo=void 0,this.dragStatus=Ze.Wait,this.history.pushHistory(this.polygonList),this.emit("updateResult"),void this.emit("updatePolygonByDrag",{newPolygon:this.selectedPolygon,originPolygon:t})}switch(e.button){case 0:this.leftMouseUp(e);break;case 2:this.rightMouseUp(e)}this.render()}}},{key:"dragMouseUp",value:function(){this.dragStatus===Ze.Start&&(this.dragInfo=void 0,this.dragStatus=Ze.Wait)}},{key:"exportData",value:function(){return[this.polygonList,this.basicImgInfo]}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return ni.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"getCurrentSelectedData",value:function(){var e=this.selectedPolygon;if(e){var t=this.getColor(e.attribute),n=e.valid?null==t?void 0:t.valid.stroke:null==t?void 0:t.invalid.stroke;return{width:164,textAttribute:e.textAttribute,color:n}}}},{key:"updateSelectedTextAttribute",value:function(e){if(this._textAttributInstance&&e&&this.selectedID){var t=e;!1===ni.textAttributeValidate(this.config.textCheckType,"",t)&&(this.emit("messageError",ni.getErrorNotice(this.config.textCheckType,this.lang)),t=""),this.setPolygonList(ni.textChange(t,this.selectedID,this.polygonList)),this.emit("updateTextAttribute"),this.render()}}},{key:"renderTextAttribute",value:function(){var e,t=this.selectedPolygon;if(this.ctx&&!1!==this.config.textConfigurable&&t){var n=t.pointList,i=t.attribute,a=t.valid,r=t.textAttribute,o=n[n.length-1],c=o.x,l=o.y,s=jt.getOffsetCoordinate({x:c,y:l},this.currentPos,this.zoom),u=this.getColor(i),d=a?null==u?void 0:u.valid.stroke:null==u?void 0:u.invalid.stroke;this._textAttributInstance||(this._textAttributInstance=new Wi({width:164,container:this.container,icon:this.getTextIconSvg(i),color:d,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedTextAttribute})),this._textAttributInstance&&!(null==(e=this._textAttributInstance)?void 0:e.isExit)&&this._textAttributInstance.appendToContainer(),this._textAttributInstance.update("".concat(r),{left:s.x,top:s.y,color:d,width:164})}}},{key:"renderStaticPolygon",value:function(){var e,t=this;!1===this.isHidden&&(null==(e=this.polygonList)||e.forEach((function(e){var n,i,a,r,o;if(![t.selectedID,t.editPolygonID].includes(e.id)){var c=e.textAttribute,l=e.attribute,s=t.getColor(l),u=da.getStrokeAndFill(s,e.valid),d=jt.changePointListByZoom(e.pointList||[],t.zoom,t.currentPos);pi.drawPolygonWithFillAndLine(t.canvas,d,{fillColor:u.fill,strokeColor:u.stroke,pointColor:"white",thickness:null!=(i=null==(n=t.style)?void 0:n.width)?i:2,lineCap:"round",isClose:!0,lineType:null==(a=t.config)?void 0:a.lineType});var h="".concat(null!=(r=ni.getAttributeShowText(l,t.config.attributeList))?r:"");(null==(o=t.config)?void 0:o.isShowOrder)&&(null==e?void 0:e.order)>0&&(h="".concat(e.order," ").concat(h)),pi.drawText(t.canvas,d[0],h,Ka({color:u.stroke},$e));var f=d[d.length-1];pi.drawText(t.canvas,{x:f.x+tt.x,y:f.y+tt.y},c,Ka({color:u.stroke},$e))}})))}},{key:"renderSelectedPolygon",value:function(){var e,t,n;if(this.selectedID){var i=this.selectedPolygon;if(i){var a=this.getColor(i.attribute),r=da.getStrokeAndFill(a,i.valid,{isSelected:!0});pi.drawSelectedPolygonWithFillAndLine(this.canvas,jt.changePointListByZoom(i.pointList,this.zoom,this.currentPos),{fillColor:r.fill,strokeColor:r.stroke,pointColor:"white",thickness:2,lineCap:"round",isClose:!0,lineType:null==(e=this.config)?void 0:e.lineType});var o="".concat(null!=(t=ni.getAttributeShowText(i.attribute,this.config.attributeList))?t:"");(null==(n=this.config)?void 0:n.isShowOrder)&&(null==i?void 0:i.order)>0&&(o="".concat(i.order," ").concat(o)),pi.drawText(this.canvas,jt.changePointByZoom(i.pointList[0],this.zoom,this.currentPos),o,Ka({color:r.stroke},$e)),this.renderTextAttribute()}}}},{key:"renderHoverPolygon",value:function(){var e;if(this.hoverID&&this.hoverID!==this.editPolygonID){var t=this.hoverPolygon;if(t){var n="",i=this.getColor(t.attribute);n=t.valid?i.validHover.fill:da.getStrokeAndFill(i,!1,{isHover:!0}).fill,pi.drawPolygonWithFill(this.canvas,jt.changePointListByZoom(t.pointList,this.zoom,this.currentPos),{color:n,lineType:null==(e=this.config)?void 0:e.lineType})}}}},{key:"renderPolygon",value:function(){var e,t,n,i;this.renderStaticPolygon(),this.renderHoverPolygon(),this.renderSelectedPolygon();var a=this.getColor(this.defaultAttribute),r=da.getStrokeAndFill(a,!this.isCtrl);if((null==(e=this.drawingPointList)?void 0:e.length)>0){var o=Object(w.a)(this.drawingPointList),c=jt.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos);if(this.pattern===he.Rect&&2===o.length)o=cn.getRectangleByRightAngle(c,o);else{if((null==(t=this.config)?void 0:t.edgeAdsorption)&&!1===this.isAlt){var l=Gt.getClosestPoint(c,this.polygonList,null==(n=this.config)?void 0:n.lineType,ye/this.zoom).dropFoot;l&&(c=l)}o.push(c)}pi.drawSelectedPolygonWithFillAndLine(this.canvas,jt.changePointListByZoom(o,this.zoom,this.currentPos),{fillColor:r.fill,strokeColor:r.stroke,pointColor:"white",thickness:2,lineCap:"round",isClose:!1,lineType:this.config.lineType})}if(this.hoverPointIndex>-1&&this.selectedID){var s=this.selectedPolygon;if(!s)return;var u=da.getStrokeAndFill(a,s.valid,{isSelected:!0}),d=null==s?void 0:s.pointList[this.hoverPointIndex];if(d){var h=jt.changePointByZoom(d,this.zoom,this.currentPos),f=h.x,g=h.y;pi.drawCircleWithFill(this.canvas,{x:f,y:g},5,{color:u.fill})}}if(this.hoverEdgeIndex>-1&&this.selectedID){var v=this.selectedPolygon;if(!v)return;var b=da.getStrokeAndFill(a,v.valid,{isSelected:!0});pi.drawLineWithPointList(this.canvas,jt.changePointListByZoom(v.pointList,this.zoom,this.currentPos),{color:b.stroke,thickness:10,hoverEdgeIndex:this.hoverEdgeIndex,lineType:null==(i=this.config)?void 0:i.lineType})}}},{key:"render",value:function(){this.ctx&&(Object(S.a)(Object(O.a)(n.prototype),"render",this).call(this),this.renderPolygon(),this.renderCursorLine(this.getLineColor(this.defaultAttribute)))}},{key:"renderCursorLine",value:function(e){if(Object(S.a)(Object(O.a)(n.prototype),"renderCursorLine",this).call(this,e),this.isCombined){var t=this.coord,i=t.x,a=t.y,r=10;pi.drawRectWithFill(this.canvas,{x:i+r,y:a-40-1,width:186,height:32},{color:"black"}),pi.drawText(this.canvas,{x:i,y:a},Ha.i18n.t("ClickAnotherPolygon"),{textAlign:"center",color:"white",offsetX:103,offsetY:-21}),pi.drawRect(this.canvas,{x:i-r,y:a-r,width:20,height:20},{lineDash:[6],color:"white"})}}},{key:"undo",value:function(){if(this.drawingPointList.length>0){var e=this.drawingHistory.undo();if(!e)return;return this.drawingPointList=e,void this.render()}var t=this.history.undo();t&&(t.length!==this.polygonList.length&&this.deleteSelectedID(),this.setPolygonList(t),this.render())}},{key:"redo",value:function(){if(this.drawingPointList.length>0){var e=this.drawingHistory.redo();if(!e)return;return this.drawingPointList=e,void this.render()}var t=this.history.redo();t&&(t.length!==this.polygonList.length&&this.deleteSelectedID(),this.setPolygonList(t),this.render())}},{key:"deleteSelectedID",value:function(){this.setSelectedID("")}}]),n}(Gi),Ja=Object.defineProperty,Qa=Object.defineProperties,qa=Object.getOwnPropertyDescriptors,$a=Object.getOwnPropertySymbols,er=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable,nr=function(e,t,n){return t in e?Ja(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ir={textConfigurable:!1,attributeConfigurable:!0,attributeList:[]},ar=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){return Object(k.a)(this,n),t.call(this,(i=function(e,t){for(var n in t||(t={}))er.call(t,n)&&nr(e,n,t[n]);if($a){var i,a=Object(E.a)($a(t));try{for(a.s();!(i=a.n()).done;)n=i.value,tr.call(t,n)&&nr(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},e),a={config:JSON.stringify(ir)},Qa(i,qa(a))));var i,a}return Object(L.a)(n,[{key:"setSelectedIdAfterAddingDrawingRect",value:function(){this.drawingRect&&this.setSelectedRectID(this.drawingRect.id)}}]),n}(na),rr=n(197),or=n.n(rr),cr=function(){function e(t){Object(k.a)(this,e),this._domMap=new Map,this._container=t.container,this._height=t.height}return Object(L.a)(e,[{key:"wheelChange",value:function(e){e.stopPropagation()}},{key:"clearTag",value:function(e){var t=this._container,n=window.self.document.getElementById(e);n&&t&&t.contains(n)&&(n.removeEventListener("wheel",this.wheelChange),null==t||t.removeChild(n))}},{key:"render",value:function(e){var t=this,n=Array.from(this._domMap.keys()),i=e.map((function(e){return e.id}));e.forEach((function(e){var n=e.text,i=e.textMaxWidth,a=e.color,r=void 0===a?"white":a,o=e.background,c=void 0===o?"rgba(0, 0, 0, 0.6)":o,l=e.style;if(t._domMap.has(e.id)){var s=t._domMap.get(e.id);s&&(s.innerHTML=n)}else{var u=pi.drawTagByDom(t._container,n,e.id);u&&(u.setAttribute("style","\n              position: absolute;\n              top: 0;\n              right: 0;\n              z-index: 20;\n              padding: 8px 20px;\n              font-size: 15px;\n              max-width: ".concat(i,"px;\n              color: ").concat(r,";\n              text-align: left;\n              line-height: 32px;\n              word-break: break-all;\n              white-space: pre-wrap;\n              background: ").concat(c,";\n              opacity: 0.9;\n              max-height: ").concat(.8*t._height,"px;\n              overflow-y: scroll;\n              clear: both;\n              ").concat(da.getStyle2String(l),"\n            ")),u.addEventListener("wheel",t.wheelChange),t._domMap.set(e.id,u))}})),n.forEach((function(e){-1===i.indexOf(e)&&(t.clearTag(e),t._domMap.delete(e))}))}}]),e}(),lr=Object.defineProperty,sr=Object.defineProperties,ur=Object.getOwnPropertyDescriptors,dr=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,fr=Object.prototype.propertyIsEnumerable,gr=function(e,t,n){return t in e?lr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},vr=function(e,t){for(var n in t||(t={}))hr.call(t,n)&&gr(e,n,t[n]);if(dr){var i,a=Object(E.a)(dr(t));try{for(a.s();!(i=a.n()).done;){n=i.value;fr.call(t,n)&&gr(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},br=function(e,t){return sr(e,ur(t))},pr="#6371FF",mr=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i,a;return Object(k.a)(this,n),(i=t.call(this,br(vr({},e),{showDefaultCursor:!0}))).style={},i.annotations=[],i.connectionPoints=[],i.getHoverRectID=function(e){var t,n,a=i.getCoordinateUnderZoom(e),r=jt.changePointByZoom(a,1/i.zoom);if(!((null==(t=i.annotations)?void 0:t.length)<=0)&&(null==(n=i.annotations)?void 0:n.length)){for(var o="",c=Number.MAX_SAFE_INTEGER,l=0;l<i.annotations.length;l++){var s=i.annotations[l];switch(s.type){case"rect":var u=s.annotation;if(pn.isInRect(a,u,3,i.zoom)){var d=u.width*u.height;d<c&&(o=u.id,c=d)}break;case"polygon":var h=s.annotation;if(Gt.isInPolygon(r,h.pointList)){var f=Gt.getPolygonArea(h.pointList);f<c&&(o=h.id,c=f)}}}return o}},i.style=null!=(a=e.style)?a:{stroke:pr,thickness:3},i.annotations=e.annotations,i.loading=!1,i.renderDomInstance=new cr({container:i.container,height:i.canvas.height}),i}return Object(L.a)(n,[{key:"checkConnectionPoints",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annotations,t=cn.getCollectionPointByAnnotationData(e),n=t.connectionPoints;this.connectionPoints=n}},{key:"setLoading",value:function(e){this.loading=e,this.render()}},{key:"onMouseLeave",value:function(){Object(S.a)(Object(O.a)(n.prototype),"onMouseLeave",this).call(this),this.mouseHoverID=void 0,this.emit("onChange","hover",[])}},{key:"onMouseDown",value:function(e){if(Object(S.a)(Object(O.a)(n.prototype),"onMouseDown",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;var t=this.mouseHoverID;if(0===e.button){var i=[];t&&(i=[t]),this.emit("onChange","selected",i),this.render()}}},{key:"onMouseMove",value:function(e){if(!Object(S.a)(Object(O.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.mouseHoverID,i=this.getHoverRectID(e);if(t!==i){this.mouseHoverID=i;var a=[];i&&(a=[i]),this.emit("onChange","hover",a),this.render()}}}},{key:"updateData",value:function(e){this.annotations=e,this.render()}},{key:"getSpecificStyle",value:function(e){var t=it.a.pick(e,["stroke","thickness","fill","radius"]),n=vr(vr({},this.style),t);return n.stroke&&Object.assign(n,{color:n.stroke}),n}},{key:"getFontStyle",value:function(e,t){var n,i,a=null!=(n=null==e?void 0:e.fontSize)?n:14,r=null!=(i=null==e?void 0:e.fontFamily)?i:"Arial";return br(vr({},et),{color:t.stroke,font:"normal normal 600 ".concat(a,"px ").concat(r)})}},{key:"appendOffset",value:function(e){var t=e.x,n=e.y;return{x:t+$e.offsetX,y:n+$e.offsetY}}},{key:"getRenderText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="",i="";return e&&!0!==t?((null==e?void 0:e.order)&&(n="".concat(e.order)),(null==e?void 0:e.label)&&(n=n?"".concat(n,"_").concat(e.label):"".concat(e.label)),(null==e?void 0:e.attribute)&&(n=n?"".concat(n,"  ").concat(e.attribute):"".concat(e.attribute)),(null==e?void 0:e.textAttribute)&&(i=null==e?void 0:e.textAttribute),{headerText:n,bottomText:i}):{headerText:n,bottomText:i}}},{key:"getReferenceOptions",value:function(e){return e?{lineCap:"butt",lineDash:[20,20]}:{}}},{key:"focusPositionByPointList",value:function(e){var t=cn.calcViewportBoundaries(e),n={x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top},i=Ti.getBasicRecPos(this.imgNode,n,this.size,.5);if(i){this.setCurrentPos(i.currentPos),this.setCurrentPosStorage(i.currentPos);var a=this.imgInfo,r=this.innerPosAndZoom.innerZoom;a&&this.setImgInfo(br(vr({},a),{width:a.width/r*i.innerZoom,height:a.height/r*i.innerZoom})),this.setZoom(i.innerZoom),this.render(),this.renderBasicCanvas()}}},{key:"renderConnectionPoints",value:function(){var e=this;this.connectionPoints.forEach((function(t){var n=jt.changePointByZoom(t,e.zoom,e.currentPos);pi.drawCircleWithFill(e.canvas,n,4,{color:"#fff"}),pi.drawCircleWithFill(e.canvas,n,2,{color:"#000"})}))}},{key:"render",value:function(){var e=this;try{if(Object(S.a)(Object(O.a)(n.prototype),"render",this).call(this),!0===this.loading)return;this.renderDomInstance.render(this.annotations.filter((function(e){return"text"===e.type&&"rt"===e.annotation.position})).map((function(e){return e.annotation}))),this.annotations.forEach((function(t){var n,i,a,r,o,c,l,s,u,d,h,f,g,v=e.getSpecificStyle(t.annotation),b=e.getFontStyle(t.annotation,v);switch(t.type){case"rect":var p=t.annotation,m=p.hiddenText,y=void 0!==m&&m,x=p.isReference,C=p.hiddenRectSize,w=void 0!==C&&C,I=e.zoom,k=jt.changeRectByZoom(p,e.zoom,e.currentPos),L=k.x,P=k.y,S=k.width,O=k.height;if(p.id===e.mouseHoverID||v.fill){var A=or()(null!=(i=null!=(n=null==v?void 0:v.fill)?n:null==v?void 0:v.stroke)?i:pr),T="rgba(".concat(A[0],", ").concat(A[1],", ").concat(A[2],",").concat(.8*A[3],")");pi.drawRectWithFill(e.canvas,k,{color:T})}pi.drawRect(e.canvas,k,vr(br(vr({},v),{hiddenText:!0}),e.getReferenceOptions(x)));var E=e.getRenderText(p,null==p?void 0:p.hiddenText),D=E.headerText,N=E.bottomText;D&&pi.drawText(e.canvas,{x:L,y:P-6},D,vr({textMaxWidth:300},b));var R="".concat(Math.round(S/I)," * ").concat(Math.round(O/I)),M=7*R.length;if(y||w||pi.drawText(e.canvas,{x:L+S-M,y:P+O+15},R,b),N){var _=Math.max(20,S-M);pi.drawText(e.canvas,{x:L,y:P+O+20},p.textAttribute,vr({textMaxWidth:_},b))}break;case"polygon":var j=t.annotation;if(!((null==(a=null==j?void 0:j.pointList)?void 0:a.length)>=3))return;var B=j.lineType,H=void 0===B?F.Line:B,V=jt.changePointListByZoom(null!=(r=null==j?void 0:j.pointList)?r:[],e.zoom,e.currentPos);if(j.id===e.mouseHoverID||v.fill){var Z=or()(null!=(c=null!=(o=null==v?void 0:v.fill)?o:null==v?void 0:v.stroke)?c:pr),z="rgba(".concat(Z[0],", ").concat(Z[1],", ").concat(Z[2],",").concat(.8*Z[3],")");pi.drawPolygonWithFill(e.canvas,V,{color:z,lineType:H})}var U=br(vr(br(vr({},v),{isClose:!0}),e.getReferenceOptions(null==j?void 0:j.isReference)),{lineType:H,strokeColor:v.stroke}),G=[];if(G=j.showKeyPoint?pi.drawPolygonWithKeyPoint(e.canvas,V,U):pi.drawPolygon(e.canvas,V,U),!0===(null==j?void 0:j.showDirection)&&(null==(l=null==j?void 0:j.pointList)?void 0:l.length)>2){var W=V[0],K=cn.getLineCenterPoint([V[0],V[1]]);if(H===F.Curve){var Y=Math.floor(me/2);W=G[Y],K=G[Y+1]}pi.drawArrowByCanvas(e.canvas,W,K,{color:v.stroke,thickness:v.thickness}),pi.drawCircle(e.canvas,V[0],v.thickness+6,{color:v.stroke,thickness:v.thickness})}var X=e.getRenderText(j,null==j?void 0:j.hiddenText),J=X.headerText,Q=X.bottomText;if(J&&pi.drawText(e.canvas,e.appendOffset(V[0]),J,b),Q){var q=V[V.length-1];pi.drawText(e.canvas,e.appendOffset({x:q.x+tt.x,y:q.y+tt.y}),Q,b)}break;case"line":var $=t.annotation;if(!((null==(s=null==$?void 0:$.pointList)?void 0:s.length)>=2))return;var ee=$.lineType,te=void 0===ee?F.Line:ee,ne=jt.changePointListByZoom(null!=(u=null==$?void 0:$.pointList)?u:[],e.zoom,e.currentPos),ie=pi.drawPolygon(e.canvas,ne,br(vr(vr({},v),e.getReferenceOptions(null==$?void 0:$.isReference)),{lineType:te}));if(!0===(null==$?void 0:$.showDirection)&&(null==(d=null==$?void 0:$.pointList)?void 0:d.length)>2){var ae=ne[0],re=cn.getLineCenterPoint([ne[0],ne[1]]);if(te===F.Curve){var oe=Math.floor(me/2);ae=ie[oe],re=ie[oe+1]}pi.drawArrowByCanvas(e.canvas,ae,re,{color:v.stroke,thickness:v.thickness}),pi.drawCircle(e.canvas,ne[0],v.thickness+6,{color:v.stroke,thickness:v.thickness})}var ce=e.getRenderText($,null==$?void 0:$.hiddenText),le=ce.headerText,se=ce.bottomText;if(le&&pi.drawText(e.canvas,e.appendOffset(ne[0]),le,b),se){var ue=ne[ne.length-1];pi.drawText(e.canvas,e.appendOffset({x:ue.x+tt.x,y:ue.y+tt.y}),se,b)}break;case"point":var he=t.annotation,fe=jt.changePointByZoom(he,e.zoom,e.currentPos),ge=null!=(h=v.radius)?h:3;pi.drawCircle(e.canvas,fe,ge,v);var ve=e.getRenderText(he,null==he?void 0:he.hiddenText),be=ve.headerText,pe=ve.bottomText;be&&pi.drawText(e.canvas,{x:fe.x+ge/2,y:fe.y-ge-4},be,vr({textAlign:"center"},b)),pe&&pi.drawText(e.canvas,e.appendOffset({x:fe.x+ge,y:fe.y+ge+24}),pe,b);break;case"text":var ye=t.annotation,xe=ye.text,Ce=ye.x,we=ye.y,Ie=ye.textMaxWidth,ke=ye.color,Le=void 0===ke?"white":ke,Pe=ye.background,Se=void 0===Pe?"rgba(0, 0, 0, 0.6)":Pe,Oe=ye.lineHeight,Ae=void 0===Oe?25:Oe,Te=ye.font,Ee=void 0===Te?de:Te,De=ye.position,Ne=jt.changePointByZoom({x:Ce,y:we},e.zoom,e.currentPos),Re=cn.getTextArea(e.canvas,ye.text,Ie,Ee,Ae),Me=Re.width,_e=Re.height,je=Re.fontHeight,Be=void 0===je?0:je;if("rt"===De)break;pi.drawRectWithFill(e.canvas,{x:Ne.x,y:Ne.y,width:Me+20,height:_e+20,id:"",sourceID:"",valid:!0,textAttribute:"",attribute:""},{color:Se}),pi.drawText(e.canvas,{x:Ne.x+10,y:Ne.y+Be+10},xe,{color:Le,lineHeight:Ae,font:Ee,textMaxWidth:Ie})}null==(g=null==(f=t.annotation)?void 0:f.renderEnhance)||g.call(f,{ctx:e.ctx,canvas:e.canvas,currentPos:e.currentPos,zoom:e.zoom,data:t,toolInstance:e})})),this.renderConnectionPoints()}catch(t){console.error("ViewOperation Render Error",t)}}}]),n}(Gi),yr=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i,a,r,o,c;if(Object(k.a)(this,n),(o=t.call(this,e)).toolName=p.ScribbleTool,o.action=ge.Scribble,o.getOriginCoordinate=function(e){return jt.changePointByZoom(o.getCoordinateUnderZoomByRotate(e),1/o.zoom)},o.onMouseDown=function(e){Object(S.a)((i=Object(P.a)(o),Object(O.a)(n.prototype)),"onMouseDown",i).call(i,e)||o.forbidMouseOperation||!o.imgInfo||(o.initCacheCanvas(o.imgNode),o.mouseEvents("onMouseDown").call(Object(P.a)(o),e))},o.onMouseMove=function(e){Object(S.a)((a=Object(P.a)(o),Object(O.a)(n.prototype)),"onMouseMove",a).call(a,e)||o.forbidMouseOperation||!o.imgInfo||o.mouseEvents("onMouseMove").call(Object(P.a)(o),e)},o.onMouseUp=function(e){Object(S.a)((r=Object(P.a)(o),Object(O.a)(n.prototype)),"onMouseUp",r).call(r,e)||o.forbidMouseOperation||!o.imgInfo||o.mouseEvents("onMouseUp").call(Object(P.a)(o),e)},o.mouseEvents=function(e){var t;return(t={},Object(D.a)(t,ge.Scribble,{onMouseMove:o.onScribbleMove,onMouseUp:o.onScribbleEnd,onMouseDown:o.onScribbleStart}),Object(D.a)(t,ge.Erase,{onMouseMove:o.onEraseMove,onMouseUp:o.onEraseEnd,onMouseDown:o.onEraseStart}),t)[o.action][e]},o.setPattern=function(e){if(o.action=e,e===ge.Erase)o.setCustomCursor(o.cursorErase);else o.setCustomCursor("none")},o.penSize=20,(null==(c=o.config.attributeList)?void 0:c.length)>0){var l=o.config.attributeList[0];o.setDefaultAttribute(l.value)}return o}return Object(L.a)(n,[{key:"cursorErase",get:function(){var e="data:image/svg+xml;base64,".concat(window.btoa(unescape(encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?><svg width="24" heighst="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#icon-65e7e1747c11bad3)"><path d="M44.7818 24.1702L31.918 7.09935L14.1348 20.5L27.5 37L30.8556 34.6643L44.7818 24.1702Z" fill="#141414" stroke="#000000" stroke-width="4" stroke-linejoin="miter"/><path d="M27.4998 37L23.6613 40.0748L13.0978 40.074L10.4973 36.6231L4.06543 28.0876L14.4998 20.2248" stroke="#000000" stroke-width="4" stroke-linejoin="miter"/><path d="M13.2056 40.072L44.5653 40.072" stroke="#000000" stroke-width="4" stroke-linecap="round"/></g><defs><clipPath id="icon-65e7e1747c11bad3"><rect width="48" height="48" fill="#df4c4c"/></clipPath></defs></svg>'))));return"url(".concat(e,") 0 0, auto")}},{key:"defaultCursor",get:function(){return this.action===ge.Erase?this.cursorErase:this.isShowDefaultCursor?"default":"none"}},{key:"color",get:function(){var e,t;return null!=(t=null==(e=null==this?void 0:this.defaultAttributeInfo)?void 0:e.color)?t:"white"}},{key:"penSizeWithZoom",get:function(){return this.penSize/this.zoom}},{key:"cacheCanvasToDataUrl",get:function(){var e;return null==(e=this.cacheCanvas)?void 0:e.toDataURL("image/png",0)}},{key:"setPenSize",value:function(e){this.penSize=e}},{key:"initCacheCanvas",value:function(e){if(!this.cacheCanvas&&e){var t=Ha.ImgConversionUtils.createCanvas(e),n=t.canvas,i=t.ctx;this.cacheCanvas=n,this.cacheContext=i}}},{key:"updateCacheCanvasSize",value:function(e){this.cacheCanvas&&(this.cacheCanvas.width=e.width,this.cacheCanvas.height=e.height)}},{key:"updateUrl2CacheContext",value:function(e){var t=this;Ha.ImgConversionUtils.createImgDom(e).then((function(e){t.cacheContext||t.initCacheCanvas(e),t.cacheContext&&(t.cacheContext.save(),t.clearCacheCanvas(),t.cacheContext.drawImage(e,0,0,e.width,e.height),t.cacheContext.restore(),t.render())}))}},{key:"setImgNode",value:function(e,t){Object(S.a)(Object(O.a)(n.prototype),"setImgNode",this).call(this,e,t),this.cacheCanvas?this.updateCacheCanvasSize(e):this.initCacheCanvas(e)}},{key:"setResult",value:function(e){var t,n,i=(null!=(t=null==e?void 0:e[0])?t:{}).url;this.clearCacheCanvas(),i||(i=null!=(n=this.cacheCanvasToDataUrl)?n:""),this.history.initRecord([i],!0),i?this.updateUrl2CacheContext(i):this.render()}},{key:"onKeyDown",value:function(e){if(ft.hotkeyFilter(e)&&!1!==Object(S.a)(Object(O.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode,i=ni.getAttributeByKeycode(t,this.config.attributeList);void 0!==i&&this.setDefaultAttribute(i)}}},{key:"eventBinding",value:function(){Object(S.a)(Object(O.a)(n.prototype),"eventBinding",this).call(this)}},{key:"setDefaultAttribute",value:function(e){var t=this.config.attributeList.find((function(t){return t.value===e}));t&&(this.defaultAttribute=t.value,this.defaultAttributeInfo=t,this.emit("changeAttributeSidebar"),this.render())}},{key:"clearStatusAfterLeave",value:function(){this.onScribbleEnd(),this.startPoint=void 0}},{key:"onMouseLeave",value:function(){Object(S.a)(Object(O.a)(n.prototype),"onMouseLeave",this).call(this),this.clearStatusAfterLeave()}},{key:"onScribbleStart",value:function(e){if(this.cacheContext){this.cacheContext.save(),this.cacheContext.beginPath(),this.cacheContext.strokeStyle=this.color,this.cacheContext.lineWidth=this.penSizeWithZoom,this.cacheContext.lineCap="round",this.cacheContext.lineJoin="round";var t=this.getOriginCoordinate(e);this.cacheContext.moveTo(t.x,t.y),this.startPoint=t}}},{key:"onScribbleMove",value:function(e){if(1===e.buttons&&this.cacheContext&&this.startPoint){var t=this.getOriginCoordinate(e);this.cacheContext.lineTo(t.x,t.y),this.cacheContext.stroke()}}},{key:"onScribbleEnd",value:function(){var e,t;this.startPoint&&(null==(e=this.cacheContext)||e.closePath(),null==(t=this.cacheContext)||t.restore(),this.startPoint=void 0,this.history.pushHistory(this.cacheCanvasToDataUrl))}},{key:"eraseArc",value:function(e){var t;if(this.cacheContext){var n=this.getOriginCoordinate(e);this.cacheContext.save(),this.cacheContext.beginPath(),this.cacheContext.arc(n.x,n.y,this.penSizeWithZoom/2,0,2*Math.PI,!1),this.cacheContext.clip(),this.cacheContext.clearRect(0,0,this.cacheContext.canvas.width,this.cacheContext.canvas.height),null==(t=this.cacheContext)||t.restore()}}},{key:"onEraseStart",value:function(e){this.cacheContext&&1===e.buttons&&this.eraseArc(e)}},{key:"onEraseMove",value:function(e){this.cacheContext&&1===e.buttons&&this.eraseArc(e)}},{key:"onEraseEnd",value:function(){}},{key:"exportData",value:function(){var e=this.cacheCanvasToDataUrl;return[[],this.basicImgInfo,{imgBase64:e}]}},{key:"clearCacheCanvas",value:function(){var e;null==(e=this.cacheContext)||e.clearRect(0,0,this.cacheContext.canvas.width,this.cacheContext.canvas.height),this.render()}},{key:"clearResult",value:function(){this.clearCacheCanvas(),this.history.pushHistory(this.cacheCanvasToDataUrl)}},{key:"renderPoint",value:function(e){pi.drawCircleWithFill(this.canvas,this.coord,e,{color:this.color})}},{key:"renderBorderPoint",value:function(e){pi.drawCircle(this.canvas,this.coord,e,{color:"black"})}},{key:"render",value:function(){if(Object(S.a)(Object(O.a)(n.prototype),"render",this).call(this),this.ctx&&this.cacheCanvas&&(this.ctx.save(),this.ctx.globalAlpha=.5,pi.drawImg(this.canvas,this.cacheCanvas,{zoom:this.zoom,currentPos:this.currentPos,rotate:this.rotate}),this.ctx.restore(),!this.forbidOperation&&!this.forbidCursorLine)){var e=this.penSize/2;this.action===ge.Erase?this.renderBorderPoint(e):this.renderPoint(e)}}},{key:"undo",value:function(){var e=this.history.undo();e&&this.cacheCanvas&&this.updateUrl2CacheContext(e)}},{key:"redo",value:function(){var e=this.history.redo();e&&this.cacheCanvas&&this.updateUrl2CacheContext(e)}}]),n}(Gi),xr=Object.defineProperty,Cr=Object.defineProperties,wr=Object.getOwnPropertyDescriptors,Ir=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable,Pr=function(e,t,n){return t in e?xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Sr=function(e,t){for(var n in t||(t={}))kr.call(t,n)&&Pr(e,n,t[n]);if(Ir){var i,a=Object(E.a)(Ir(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Lr.call(t,n)&&Pr(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Or=function(e,t){return Cr(e,wr(t))},Ar=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i,a,r;return Object(k.a)(this,n),(i=t.call(this,e)).selectedIDs=[],i.rightMouseUp=function(e){i.drawingPointList.length>0?i.addDrawingPointToPolygonList():e.ctrlKey&&i.hoverID?i.emit("addSelectedIDs",i.hoverID):i.emit("setSelectedIDs",i.hoverID)},i.onKeyDown=function(){},i.onKeyUp=function(){},i.renderSingleSelectedPolygon=function(e){var t;if(i.selectedPolygons){var n=i.getColor(e.attribute),a=da.getStrokeAndFill(n,e.valid,{isSelected:!0}),r=jt.changePointListByZoom(e.pointList,i.zoom,i.currentPos);pi.drawSelectedPolygonWithFillAndLine(i.canvas,r,{fillColor:"transparent",strokeColor:a.stroke,pointColor:"white",thickness:2,lineCap:"round",isClose:!0,lineType:null==(t=i.config)?void 0:t.lineType}),!0===e.isRect&&!0===i.showDirectionLine&&i.renderRectPolygonDirection(r)}},i.showDirectionLine=null==(a=e.showDirectionLine)||a,i.forbidAddNew=null!=(r=e.forbidAddNew)&&r,i}return Object(L.a)(n,[{key:"getSelectedIDs",get:function(){return this.selectedIDs}},{key:"setSelectedIDs",value:function(e){this.selectedIDs=e,this.setSelectedID(1===this.selectedIDs.length?this.selectedIDs[0]:""),this.render()}},{key:"deleteSelectedID",value:function(){Object(S.a)(Object(O.a)(n.prototype),"deleteSelectedID",this).call(this),this.selectedIDs=[],this.emit("deleteSelectedIDs")}},{key:"selectedPolygons",get:function(){return Gt.getPolygonByIDs(this.polygonList,this.selectedIDs)}},{key:"getLineColor",value:function(){return"rgba(0, 255, 255, 0.5)"}},{key:"renderStaticPolygon",value:function(){var e,t=this;!1===this.isHidden&&(null==(e=this.polygonList)||e.forEach((function(e){var n,i,a;if(![].concat(Object(w.a)(t.selectedIDs),[t.editPolygonID]).includes(e.id)){var r=e.attribute,o=t.getColor(r),c=da.getStrokeAndFill(o,e.valid),l=jt.changePointListByZoom(e.pointList||[],t.zoom,t.currentPos);pi.drawPolygonWithFillAndLine(t.canvas,l,{fillColor:"transparent",strokeColor:c.stroke,pointColor:"white",thickness:null!=(i=null==(n=t.style)?void 0:n.width)?i:2,lineCap:"round",isClose:!0,lineType:null==(a=t.config)?void 0:a.lineType}),!0===e.isRect&&!0===t.showDirectionLine&&t.renderRectPolygonDirection(l)}})))}},{key:"renderSelectedPolygon",value:function(){var e,t=this;null==(e=this.selectedPolygons)||e.forEach((function(e){t.renderSingleSelectedPolygon(e)}))}},{key:"renderRectPolygonDirection",value:function(e){e.length<2||pi.drawLine(this.canvas,e[0],e[1],{color:"red",thickness:3})}},{key:"currentPolygonListByPattern",get:function(){var e=this;return this.polygonList.filter((function(t){return e.pattern===he.Rect?!0===t.isRect:e.pattern!==he.Normal||!0!==t.isRect}))}},{key:"getHoverID",value:function(e){var t,n=this,i=this.getCoordinateUnderZoom(e),a=this.currentPolygonListByPattern.map((function(e){return Or(Sr({},e),{pointList:jt.changePointListByZoom(e.pointList,n.zoom)})}));return Gt.getHoverPolygonID(i,a,10,null==(t=this.config)?void 0:t.lineType)}},{key:"switchToNextPolygon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue.ascend;if(!(this.drawingPointList.length>0)){var t=this.currentPolygonListByPattern.map((function(e){var t,n,i,a;return Or(Sr({},e),{x:null!=(n=null==(t=e.pointList[0])?void 0:t.x)?n:0,y:null!=(a=null==(i=e.pointList[0])?void 0:i.y)?a:0})})),n=ft.getNextSelectedRectID(t,e,this.selectedID);return n?(this.setSelectedIDs([n.id]),this.render(),[n.id]):void 0}}},{key:"setSelectedIdAfterAddingDrawing",value:function(e){0!==this.drawingPointList.length&&this.setSelectedID(e)}},{key:"setSelectedID",value:function(e){var t,n,i=this.selectedID;e!==i&&i&&(null==(t=this._textAttributInstance)||t.changeSelected()),e||null==(n=this._textAttributInstance)||n.clearTextAttribute(),this.selectedID=e,this.render()}},{key:"addPointInDrawing",value:function(e){this.forbidAddNew||Object(S.a)(Object(O.a)(n.prototype),"addPointInDrawing",this).call(this,e)}},{key:"setCanvasSize",value:function(e){var t,n,i=this.pixelRatio;this.size=e,this.setImgInfo(e),this.updateCanvasBasicStyle(this.basicCanvas,e,0),this.updateCanvasBasicStyle(this.canvas,e,10),null==(t=this.ctx)||t.scale(i,i),null==(n=this.basicCtx)||n.scale(i,i),this.initImgPos(),this.renderBasicCanvas(),this.render()}},{key:"setPolygonValidAndRender",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?Object(S.a)(Object(O.a)(n.prototype),"setPolygonValidAndRender",this).call(this,e):this.emit("validUpdate",e)}}]),n}(Xa),Tr={0:"\u76ee\u6807\u68c0\u6d4b",1:"\u56fe\u50cf\u5206\u7c7b"},Er={0:"\u6807\u6ce8\u6587\u4ef6\u4f20\u8f93\u4e2d",1:"\u6807\u6ce8\u6587\u4ef6\u4f20\u8f93\u91cd\u8bd5",2:"\u6807\u6ce8\u6587\u4ef6\u4f20\u8f93\u5931\u8d25",3:"\u6807\u6ce8\u4e2d",4:"\u4efb\u52a1\u7ec8\u6b62",5:"\u4efb\u52a1\u5b8c\u6210",6:"\u6570\u636e\u5df2\u53d1\u5e03"};(Na=Da||(Da={}))[Na.Upload=0]="Upload",Na[Na.UploadRetry=1]="UploadRetry",Na[Na.UploadFail=2]="UploadFail",Na[Na.Annotation=3]="Annotation",Na[Na.Terminated=4]="Terminated",Na[Na.Finish=5]="Finish",Na[Na.Publish=6]="Publish";var Dr=Object.defineProperty,Nr=Object.getOwnPropertySymbols,Rr=Object.prototype.hasOwnProperty,Mr=Object.prototype.propertyIsEnumerable,_r=function(e,t,n){return t in e?Dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},jr=function(e,t){for(var n in t||(t={}))Rr.call(t,n)&&_r(e,n,t[n]);if(Nr){var i,a=Object(E.a)(Nr(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Mr.call(t,n)&&_r(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Br=8,Hr=26,Vr=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this,e)).getHoverRectID=function(e){var t,n,a=i.getCoordinateUnderZoom(e),r=null!=(n=null==(t=i.resultList.find((function(e){return e.toolName===p.Rect})))?void 0:t.result)?n:[];if(r.length>0){var o=r.filter((function(e){return pn.isInRect(a,e,2,i.zoom)}));if(0===o.length)return"";if(1===o.length)return o[0].id;if(o.length>1)return o.map((function(e){return{size:e.width*e.height,id:e.id}})).sort((function(e,t){return e.size-t.size}))[0].id}return""},i.resultList=[],i.hoverID=[],i.fillID=[],i.render=i.render.bind(Object(P.a)(i)),i.drawPolygon=i.drawPolygon.bind(Object(P.a)(i)),i.drawRect=i.drawRect.bind(Object(P.a)(i)),i.drawTag=i.drawTag.bind(Object(P.a)(i)),i.setShowDefaultCursor(!0),i.forbidOperation=!0,i}return Object(L.a)(n,[{key:"onMouseDown",value:function(e){var t,i;if(Object(S.a)(Object(O.a)(n.prototype),"onMouseDown",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;var a=this.mouseHoverID,r=null!=(i=null==(t=this.resultList.find((function(e){return e.toolName===p.Rect})))?void 0:t.result)?i:[];if(0===e.button){var o=[a],c=!0;a&&r.find((function(e){return e.id===a&&(null==e?void 0:e.isSelected)}))&&(c=!1),a||(o=r.map((function(e){return e.id})),c=!1),this.emit("setSelectedID",o,c),this.render()}}},{key:"updateRotate",value:function(){}},{key:"onMouseMove",value:function(e){if(!Object(S.a)(Object(O.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.mouseHoverID,i=this.getHoverRectID(e);if(t!==i){this.mouseHoverID=i;var a=[i];i||(a=[]),this.emit("setHoverID",a),this.render()}}}},{key:"setResult",value:function(e){this.resultList=Object(nt.cloneDeep)(e),this.render()}},{key:"drawPolygon",value:function(e,t){var n=this;null==e||e.forEach((function(e){var i,a,r,o,c,l=n.getColor(e.attribute,t),s=da.getStrokeAndFill(l,e.valid),u=null!=(a=null==(i=n.style)?void 0:i.width)?a:2;n.hoverID.includes(e.id)?(u=4,pi.drawPolygonWithFillAndLine(n.canvas,jt.changePointListByZoom(e.pointList,n.zoom,n.currentPos),{fillColor:s.fill,strokeColor:s.stroke,pointColor:"white",thickness:u,lineCap:"round",isClose:!0,lineType:null==t?void 0:t.lineType})):pi.drawPolygon(n.canvas,jt.changePointListByZoom(e.pointList,n.zoom,n.currentPos),{color:s.fill,lineType:null==(r=n.config)?void 0:r.lineType,thickness:u,isClose:!0});var d="".concat(null!=(c=ni.getAttributeShowText(e.attribute,null!=(o=null==t?void 0:t.attributeList)?o:[]))?c:"");(null==t?void 0:t.isShowOrder)&&(null==e?void 0:e.order)>0&&(d="".concat(e.order," ").concat(d)),pi.drawText(n.canvas,jt.changePointByZoom(e.pointList[0],n.zoom,n.currentPos),d,jr({color:s.stroke},$e));var h=jt.changePointListByZoom(e.pointList||[],n.zoom,n.currentPos),f=h[h.length-1];pi.drawText(n.canvas,{x:f.x+Br,y:f.y+Hr},null==e?void 0:e.textAttribute,jr({color:s.stroke},$e))}))}},{key:"drawRect",value:function(e,t){var n=this;null==e||e.forEach((function(e){var i=1;n.hoverID.includes(e.id)&&(i=3);var a=n.getColor(e.attribute,t),r=jt.changeRectByZoom(e,n.zoom,n.currentPos);pi.drawRect(n.canvas,r,{color:(null==e?void 0:e.valid)?a.valid.stroke:a.invalid.stroke,thickness:i}),n.fillID.includes(e.id)&&pi.drawRectWithFill(n.canvas,r,{color:(null==e?void 0:e.valid)?a.valid.fill:a.invalid.fill})}))}},{key:"drawTag",value:function(e,t){var n=e.reduce((function(e,n){return[].concat(Object(w.a)(e),Object(w.a)((null==t?void 0:t.inputList)?sa.getTagNameList(n.result,t.inputList):sa.getTagnameListWithoutConfig(n.result)))}),[]);pi.drawTag(this.canvas,n)}},{key:"setHoverID",value:function(e){this.hoverID=e,this.render()}},{key:"setFillID",value:function(e){this.fillID=e,this.render()}},{key:"render",value:function(){var e,t=this;Object(S.a)(Object(O.a)(n.prototype),"render",this).call(this),null==(e=this.resultList)||e.forEach((function(e){switch(null==e?void 0:e.toolName){case p.Rect:t.drawRect(e.result,ft.jsonParser(e.config));break;case p.Polygon:t.drawPolygon(e.result,ft.jsonParser(e.config));break;case p.Tag:t.drawTag(e.result,ft.jsonParser(e.config))}}))}},{key:"exportData",value:function(){return[[],{}]}}]),n}(Gi),Zr=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this,e)).onKeydown=function(e){switch(e.keyCode){case Cn.Esc:e.preventDefault(),e.stopPropagation(),i.clearPredictionInfo();break;case Cn.Z:e.ctrlKey&&(e.preventDefault(),e.stopPropagation(),i.rectList=[],i.render())}},i.segmentPrediction=function(e){return t=Object(P.a)(i),n=null,a=Object(xi.a)().mark((function t(){var n;return Object(xi.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getCoordinateUnderZoom(e),this.isRunSegment=!0,this.render(),this.runPrediction){t.next=7;break}return this.emit("messageError","You needs to set runPrediction function"),this.clearPredictionInfo(),t.abrupt("return");case 7:return t.next=9,this.runPrediction({point:n,rect:{x:this.rectList[0].x,y:this.rectList[0].y,w:this.rectList[0].width,h:this.rectList[0].height}});case 9:this.clearPredictionInfo();case 10:case"end":return t.stop()}}),t,this)})),new Promise((function(i,r){var o=function(t){try{l(a.next(t))}catch(e){r(e)}},c=function(t){try{l(a.throw(t))}catch(e){r(e)}},l=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(o,c)};l((a=a.apply(t,n)).next())}));var t,n,a},i.isRunSegment=!1,i.runPrediction=e.runPrediction,i}return Object(L.a)(n,[{key:"setRunPrediction",value:function(e){this.runPrediction=e}},{key:"eventBinding",value:function(){var e=this;document.addEventListener("keydown",(function(t){return e.onKeydown(t)})),Object(S.a)(Object(O.a)(n.prototype),"eventBinding",this).call(this)}},{key:"clearPredictionInfo",value:function(){this.rectList=[],this.isShowCursor=!1,this.coord={x:-1,y:-1},this.drawingRect=void 0,this.isRunSegment=!1,this.clearCanvas(),this.render()}},{key:"onMouseUp",value:function(e){if(!this.isRunSegment)return 0!==e.button||1!==this.rectList.length||this.isRunSegment?void Object(S.a)(Object(O.a)(n.prototype),"onMouseUp",this).call(this,e):(e.stopPropagation(),this.segmentPrediction(e),void this.clearActiveStatus())}},{key:"onMouseDown",value:function(e){this.isRunSegment||Object(S.a)(Object(O.a)(n.prototype),"onMouseDown",this).call(this,e)}},{key:"renderCursorLine",value:function(){var e;if(this.ctx){var t=this.ctx,i=10,a=this.coord,r=a.x,o=a.y;t.save(),t.strokeStyle="white",t.setLineDash([6]),t.lineWidth=1,t.strokeRect(r-i,o-i,20,20),t.restore();var c="\u2460 ".concat(Ha.i18n.t("FramingOfObjectToBeDivided")),l="en"===Ha.i18n.language,s=l?326:186;if(1===(null==(e=this.rectList)?void 0:e.length)){c="\u2461 ".concat(Ha.i18n.t("ClickOnTarget")),s=l?232:142;t.save(),t.strokeStyle="white";t.beginPath(),t.moveTo(r+11+4,o+11+2),t.arc(r+11+2,o+11+2,2,0,2*Math.PI,!0),t.stroke(),t.restore()}this.isRunSegment&&(s=l?316:136,c=Ha.i18n.t("SplittingAlgorithmPrediction")),t.save(),t.fillStyle=this.style.strokeColor,t.fillRect(r+i,o-40-1,s,32),t.restore(),t.save(),t.font="14px Source Han Sans CN",t.fillStyle="white",t.fillText(c,r+i+14,o-20),t.restore(),Object(S.a)(Object(O.a)(n.prototype),"renderCursorLine",this).call(this)}}},{key:"renderDrawingRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.ctx&&e){var i=jt.changeRectByZoom(e,n?t:this.zoom,this.currentPos),a=i.x,r=i.y,o=i.width,c=i.height;this.ctx.save(),this.ctx.lineCap="butt",this.ctx.lineWidth=this.style.strokeWidth,this.ctx.strokeStyle="white",this.ctx.strokeRect(a,r,o,c),this.ctx.strokeStyle=this.style.strokeColor,this.ctx.setLineDash([6]),this.ctx.strokeRect(a,r,o,c),this.ctx.restore()}}},{key:"renderTextAttribute",value:function(){}},{key:"renderSelectedRect",value:function(){}}]),n}(na),Fr=function(e){switch(e){case p.Rect:case p.RectTrack:return na;case p.SegmentByRect:return Zr;case p.Tag:return ua;case p.Polygon:return Xa;case y.Check:return Vr;case p.Line:return ja;case p.Point:return wa;case p.Text:return Ba;case p.ScribbleTool:return yr;default:throw new Error("not match tool")}},zr=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(L.a)(n)}(ft);zr.getCurrentOperation=Fr;var Ur=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"load",value:function(e){return new Promise((function(t,n){var i=new Image;e.startsWith("file")?i.src=encodeURI(e):i.src=e,i.onload=function(){t(i)},i.onerror=function(){n(i)}}))}}]),e}(),Gr=function(e,t,n){var i=e[t];return e[t]=e[n],e[n]=i,e},Wr=function(){function e(){Object(k.a)(this,e)}return Object(L.a)(e,null,[{key:"isSingleTool",value:function(e){return!this.isHybridTool(e)}},{key:"isHybridTool",value:function(e){return Array.isArray(e)}}]),e}(),Kr=Wr;Kr.getTopToolName=function(e){return Wr.isHybridTool(e)?e[e.length-1]:e};var Yr=function(){function e(t){var n,i;Object(k.a)(this,e),this.toolOperationList=[],this.toolOperationDom=[],this.init(),this.container=t.container,this.size=t.size,this.imgNode=t.imgNode,this.config=null!=(n=t.config)?n:JSON.stringify(Pi(Kr.getTopToolName(t.toolName))),this.style=null!=(i=t.style)?i:Si}return Object(L.a)(e,[{key:"setImgNode",value:function(e,t){this.toolOperationList.forEach((function(n){n.setImgNode(e,t)}))}},{key:"setSize",value:function(e){this.toolOperationList.forEach((function(t){t.setSize(e)}))}},{key:"syncPosition",value:function(e,t,n,i){this.toolOperationList.forEach((function(a){i!==a&&(a.setCurrentPos(e),a.setZoom(t),a.setImgInfo(n),a.renderBasicCanvas(),a.render())}))}},{key:"defaultSize",get:function(){var e,t;return{width:(null==(e=this.imgNode)?void 0:e.width)||this.size.width,height:(null==(t=this.imgNode)?void 0:t.height)||this.size.height}}},{key:"createDom",value:function(){var e=this.defaultSize,t=e.width,n=e.height,i=window.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.width="".concat(t,"px"),i.style.height="".concat(n,"px");var a=this.toolOperationList.length+1;return i.style.zIndex="".concat(a),i}},{key:"getEmptyImage",value:function(e,t){var n=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n?(n.fillStyle="transparent",n.fillRect(0,0,e.width,e.height),t.toDataURL()):""}({width:e,height:t}),i=new Image;return i.src=n,i}},{key:"createOperation",value:function(e,t,n){var i,a,r=this,o=this.defaultSize,c=o.width,l=o.height,s=this.createDom(),u=this.getEmptyImage(c,l),d={container:s,size:this.size,config:null!=(i=null==this?void 0:this.config)?i:"{}",drawOutSideTarget:!1,style:this.style,imgNode:t||u,hiddenImg:!!e};if(n&&Object.assign(d,n),e){var h=Fr(e);if(!h)return;a=new h(d)}else a=new Gi(d),s.style.zIndex="0",a.init();return null==a||a.init(),a.canvas.id=null!=e?e:"basicCanvas",a.on("dragMove",(function(e){var t=e.currentPos,n=e.zoom,i=e.imgInfo;r.syncPosition(t,n,i,a)})),a.on("renderZoom",(function(e,t,n){e&&t&&r.syncPosition(t,e,n,a)})),e?(this.container.appendChild(s),this.toolOperationList.push(a),this.toolOperationDom.push(s),a):(this.container.insertBefore(s,this.container.childNodes[0]),this.toolOperationList.unshift(a),this.toolOperationDom.unshift(s),a)}},{key:"switchLastTwoCanvas",value:function(){if(this.toolOperationDom.length<3)console.error("switchLastTwoCanvas is just used the layer which has 3 canvas");else{var e=this.toolOperationDom.length,t=e-1,n=e-2,i=this.toolOperationDom[t],a=this.toolOperationDom[n];if(a&&i)return i.style.zIndex="".concat(t-1),a.style.zIndex="".concat(t),this.toolOperationList[t].clearActiveStatus(),this.toolOperationList[t].clearCursorLine(),this.toolOperationList[t].render(),this.toolOperationList=Gr(this.toolOperationList,t,n),this.toolOperationDom=Gr(this.toolOperationDom,t,n),this.toolOperationList[t]}}},{key:"getFirstToolOperation",value:function(){return this.toolOperationList.length>1?this.toolOperationList[1]:this.toolOperationList[0]}},{key:"destroyAllLayer",value:function(){var e=this;this.toolOperationList.forEach((function(t){t.destroyCanvas(),e.init()}))}},{key:"init",value:function(){this.toolOperationList=[],this.toolOperationDom=[]}}]),e}(),Xr=function(e){return new Promise((function(t,n){var i=document.createElement("img");i.crossOrigin="Anonymous",i.onerror=function(e){console.error(e),n(i)},i.src=e,i.onload=function(){t(i)}}))},Jr=function(){function e(t){var n,i,a=this;Object(k.a)(this,e),this.setImgSrc=function(e){return t=a,n=null,i=Object(xi.a)().mark((function t(){var n;return Object(xi.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xr(e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:this.setImgNode(n);case 6:case"end":return t.stop()}}),t,this)})),new Promise((function(e,a){var r=function(e){try{c(i.next(e))}catch(t){a(t)}},o=function(e){try{c(i.throw(e))}catch(t){a(t)}},c=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(r,o)};c((i=i.apply(t,n)).next())}));var t,n,i},this.container=t.container,this.size=t.size,this.toolName=t.toolName,this.imgNode=t.imgNode,this.config=null!=(n=t.config)?n:JSON.stringify(Pi(Kr.getTopToolName(t.toolName))),this.style=null!=(i=t.style)?i:Si,this.toolScheduler=new Yr(t),this.i18nLanguage="cn",this._initToolOperation()}return Object(L.a)(e,[{key:"setToolName",value:function(e,t){this.toolName=e;var n=t||JSON.stringify(Pi(Kr.getTopToolName(e)));this.config=n,this._initToolOperation()}},{key:"setImgNode",value:function(e,t){this.toolScheduler.setImgNode(e,t),this.imgNode=e}},{key:"setSize",value:function(e){this.size=e,this.toolScheduler.setSize(e)}},{key:"setStyle",value:function(e){this.style=e}},{key:"_initToolOperation",value:function(){var e=this;this.toolScheduler.destroyAllLayer();var t=[],n={hiddenImg:!0};Kr.isSingleTool(this.toolName)?(t=[this.toolName],Object.assign(n,{hiddenImg:!1})):t=this.toolName,t.length>1&&this.toolScheduler.createOperation(void 0,this.imgNode),t.forEach((function(i,a){var r=e.toolScheduler.createOperation(i,void 0,n);a===t.length-1&&(e.toolInstance=r)})),this.setLang(this.i18nLanguage)}},{key:"setBasicInfo",value:function(e,t){this.dependToolName=e,this.basicResult=t,this.toolInstance.setDependName(e),this.toolInstance.setBasicResult(t),this.toolInstance.renderBasicCanvas()}},{key:"clearBasicResult",value:function(){this.setBasicInfo()}},{key:"forbidOperation",value:function(){this.toolInstance.setForbidOperation(!0)}},{key:"launchOperation",value:function(){this.toolInstance.setForbidOperation(!1)}},{key:"setLang",value:function(e){switch(this.i18nLanguage=e,e){case"cn":this.toolInstance.setLang(Ye.Zh);break;case"en":this.toolInstance.setLang(Ye.US)}}},{key:"setDataInjectionAtCreation",value:function(e){this.toolInstance.setDataInjectionAtCreation(e)}},{key:"setRenderEnhance",value:function(e){this.toolInstance.setRenderEnhance(e)}},{key:"switchLastTwoCanvas",value:function(){var e=this.toolScheduler.switchLastTwoCanvas();if(e)return this.toolInstance=e,e}},{key:"firstToolInstance",get:function(){return this.toolScheduler.getFirstToolOperation()}},{key:"setCustomRenderStyle",value:function(e){this.toolInstance.setCustomRenderStyle(e)}}]),e}(),Qr=n(173),qr=n(18),$r=n(250);function eo(e,t,n){var i=void 0===t?null:t,a=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),a=0,r=n.length;a<r;++a)i[a]=n.charCodeAt(a);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),r=a.indexOf("\n",10)+1,o=a.substring(r)+(i?"//# sourceMappingURL="+i:""),c=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(c)}var to=n(252);function no(e,t,n){return Object(to.a)()?Object($r.a)(e,t,n):function(e,t,n){var i;return function(a){return i=i||eo(e,t,n),new Worker(i,a)}}(e,t,n)}var io=no("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAndXNlIHN0cmljdCc7CgogIGNsYXNzIFBvaW50Q2xvdWRVdGlscyB7CiAgICBzdGF0aWMgZ2VuQ29sb3JCeUNvb3JkKHgsIHksIHopIHsKICAgICAgaWYgKHogPD0gMCkgewogICAgICAgIHJldHVybiBbMTI4LCAxMjgsIDEyOF07CiAgICAgIH0KICAgICAgaWYgKHogPCA1KSB7CiAgICAgICAgcmV0dXJuIFsyNTUsIDAsIDBdOwogICAgICB9CiAgICAgIGlmICh6IDwgMTApIHsKICAgICAgICByZXR1cm4gWzAsIDI1NSwgMF07CiAgICAgIH0KICAgICAgcmV0dXJuIFswLCAwLCAyNTVdOwogICAgfQogICAgc3RhdGljIGdldFN0YW5kYXJkQ29sb3JCeUNvb3JkKHgsIHksIHopIHsKICAgICAgY29uc3QgcGRDb2xvciA9IHRoaXMuZ2VuQ29sb3JCeUNvb3JkKHgsIHksIHopOwogICAgICByZXR1cm4gcGRDb2xvci5tYXAoKGhleCkgPT4gaGV4IC8gMjU1KTsKICAgIH0KICB9CiAgZnVuY3Rpb24gaXNJblBvbHlnb24oY2hlY2tQb2ludCwgcG9seWdvblBvaW50cywgbGluZVR5cGUgPSAwKSB7CiAgICBsZXQgY291bnRlciA9IDA7CiAgICBsZXQgaTsKICAgIGxldCB4aW50ZXJzOwogICAgbGV0IHAxOwogICAgbGV0IHAyOwogICAgcG9seWdvblBvaW50cyA9IFsuLi5wb2x5Z29uUG9pbnRzXTsKICAgIGlmIChsaW5lVHlwZSA9PT0gMSkgewogICAgICBwb2x5Z29uUG9pbnRzID0gY3JlYXRlU21vb3RoQ3VydmVQb2ludHMocG9seWdvblBvaW50cy5yZWR1Y2UoKGFjYywgY3VyKSA9PiB7CiAgICAgICAgcmV0dXJuIFsuLi5hY2MsIGN1ci54LCBjdXIueV07CiAgICAgIH0sIFtdKSwgMC41LCB0cnVlLCBTRUdNRU5UX05VTUJFUik7CiAgICB9CiAgICBbcDFdID0gcG9seWdvblBvaW50czsKICAgIGNvbnN0IHBvaW50Q291bnQgPSBwb2x5Z29uUG9pbnRzLmxlbmd0aDsKICAgIGZvciAoaSA9IDE7IGkgPD0gcG9pbnRDb3VudDsgaSsrKSB7CiAgICAgIHAyID0gcG9seWdvblBvaW50c1tpICUgcG9pbnRDb3VudF07CiAgICAgIGlmIChjaGVja1BvaW50LnggPiBNYXRoLm1pbihwMS54LCBwMi54KSAmJiBjaGVja1BvaW50LnggPD0gTWF0aC5tYXgocDEueCwgcDIueCkpIHsKICAgICAgICBpZiAoY2hlY2tQb2ludC55IDw9IE1hdGgubWF4KHAxLnksIHAyLnkpKSB7CiAgICAgICAgICBpZiAocDEueCAhPT0gcDIueCkgewogICAgICAgICAgICB4aW50ZXJzID0gKGNoZWNrUG9pbnQueCAtIHAxLngpICogKHAyLnkgLSBwMS55KSAvIChwMi54IC0gcDEueCkgKyBwMS55OwogICAgICAgICAgICBpZiAocDEueSA9PT0gcDIueSB8fCBjaGVja1BvaW50LnkgPD0geGludGVycykgewogICAgICAgICAgICAgIGNvdW50ZXIrKzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBwMSA9IHAyOwogICAgfQogICAgaWYgKGNvdW50ZXIgJSAyID09PSAwKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KICBvbm1lc3NhZ2UgPSBmdW5jdGlvbiBvbm1lc3NhZ2UyKGUpIHsKICAgIGNvbnN0IHt6TWluLCB6TWF4LCBwb2x5Z29uUG9pbnRMaXN0LCBwb3NpdGlvbjogcG9pbnRzLCBjb2xvcn0gPSBlLmRhdGE7CiAgICBsZXQgbnVtID0gMDsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAzKSB7CiAgICAgIGNvbnN0IHggPSBwb2ludHNbaV07CiAgICAgIGNvbnN0IHkgPSBwb2ludHNbaSArIDFdOwogICAgICBjb25zdCB6ID0gcG9pbnRzW2kgKyAyXTsKICAgICAgY29uc3QgaW5Qb2x5Z29uID0gaXNJblBvbHlnb24oe3gsIHl9LCBwb2x5Z29uUG9pbnRMaXN0KTsKICAgICAgaWYgKGluUG9seWdvbiAmJiB6ID49IHpNaW4gJiYgeiA8PSB6TWF4KSB7CiAgICAgICAgbnVtKys7CiAgICAgICAgY29sb3JbaV0gPSAwOwogICAgICAgIGNvbG9yW2kgKyAxXSA9IDE7CiAgICAgICAgY29sb3JbaSArIDJdID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBbciwgZywgYl0gPSBQb2ludENsb3VkVXRpbHMuZ2V0U3RhbmRhcmRDb2xvckJ5Q29vcmQoeCwgeSwgeik7CiAgICAgICAgY29sb3JbaV0gPSByOwogICAgICAgIGNvbG9yW2kgKyAxXSA9IGc7CiAgICAgICAgY29sb3JbaSArIDJdID0gYjsKICAgICAgfQogICAgfQogICAgcG9zdE1lc3NhZ2Uoe3BvaW50cywgY29sb3IsIG51bX0pOwogIH07CgogIGV4cG9ydHMuaXNJblBvbHlnb24gPSBpc0luUG9seWdvbjsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTsKCiAgcmV0dXJuIGV4cG9ydHM7Cgp9KSh7fSk7Cgo=",null,!1),ao=no("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAndXNlIHN0cmljdCc7CgogIGZ1bmN0aW9uIGlzSW5Qb2x5Z29uKGNoZWNrUG9pbnQsIHBvbHlnb25Qb2ludHMsIGxpbmVUeXBlID0gMCkgewogICAgbGV0IGNvdW50ZXIgPSAwOwogICAgbGV0IGk7CiAgICBsZXQgeGludGVyczsKICAgIGxldCBwMTsKICAgIGxldCBwMjsKICAgIHBvbHlnb25Qb2ludHMgPSBbLi4ucG9seWdvblBvaW50c107CiAgICBpZiAobGluZVR5cGUgPT09IDEpIHsKICAgICAgcG9seWdvblBvaW50cyA9IGNyZWF0ZVNtb290aEN1cnZlUG9pbnRzKHBvbHlnb25Qb2ludHMucmVkdWNlKChhY2MsIGN1cikgPT4gewogICAgICAgIHJldHVybiBbLi4uYWNjLCBjdXIueCwgY3VyLnldOwogICAgICB9LCBbXSksIDAuNSwgdHJ1ZSwgU0VHTUVOVF9OVU1CRVIpOwogICAgfQogICAgW3AxXSA9IHBvbHlnb25Qb2ludHM7CiAgICBjb25zdCBwb2ludENvdW50ID0gcG9seWdvblBvaW50cy5sZW5ndGg7CiAgICBmb3IgKGkgPSAxOyBpIDw9IHBvaW50Q291bnQ7IGkrKykgewogICAgICBwMiA9IHBvbHlnb25Qb2ludHNbaSAlIHBvaW50Q291bnRdOwogICAgICBpZiAoY2hlY2tQb2ludC54ID4gTWF0aC5taW4ocDEueCwgcDIueCkgJiYgY2hlY2tQb2ludC54IDw9IE1hdGgubWF4KHAxLngsIHAyLngpKSB7CiAgICAgICAgaWYgKGNoZWNrUG9pbnQueSA8PSBNYXRoLm1heChwMS55LCBwMi55KSkgewogICAgICAgICAgaWYgKHAxLnggIT09IHAyLngpIHsKICAgICAgICAgICAgeGludGVycyA9IChjaGVja1BvaW50LnggLSBwMS54KSAqIChwMi55IC0gcDEueSkgLyAocDIueCAtIHAxLngpICsgcDEueTsKICAgICAgICAgICAgaWYgKHAxLnkgPT09IHAyLnkgfHwgY2hlY2tQb2ludC55IDw9IHhpbnRlcnMpIHsKICAgICAgICAgICAgICBjb3VudGVyKys7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcDEgPSBwMjsKICAgIH0KICAgIGlmIChjb3VudGVyICUgMiA9PT0gMCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlMihlKSB7CiAgICBjb25zdCB7ek1pbiwgek1heCwgcG9seWdvblBvaW50TGlzdCwgcG9zaXRpb246IHBvaW50cywgY29sb3J9ID0gZS5kYXRhOwogICAgY29uc3QgbmV3UG9zaXRpb24gPSBbXTsKICAgIGNvbnN0IG5ld0NvbG9yID0gW107CiAgICBsZXQgbnVtID0gMDsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAzKSB7CiAgICAgIGNvbnN0IHggPSBwb2ludHNbaV07CiAgICAgIGNvbnN0IHkgPSBwb2ludHNbaSArIDFdOwogICAgICBjb25zdCB6ID0gcG9pbnRzW2kgKyAyXTsKICAgICAgY29uc3QgaW5Qb2x5Z29uID0gaXNJblBvbHlnb24oe3gsIHl9LCBwb2x5Z29uUG9pbnRMaXN0KTsKICAgICAgaWYgKGluUG9seWdvbiAmJiB6ID49IHpNaW4gJiYgeiA8PSB6TWF4KSB7CiAgICAgICAgbmV3UG9zaXRpb24ucHVzaCh4KTsKICAgICAgICBuZXdQb3NpdGlvbi5wdXNoKHkpOwogICAgICAgIG5ld1Bvc2l0aW9uLnB1c2goeik7CiAgICAgICAgbmV3Q29sb3IucHVzaChjb2xvcltpXSk7CiAgICAgICAgbmV3Q29sb3IucHVzaChjb2xvcltpICsgMV0pOwogICAgICAgIG5ld0NvbG9yLnB1c2goY29sb3JbaSArIDJdKTsKICAgICAgICBudW0rKzsKICAgICAgfQogICAgfQogICAgdGhpcy5wb3N0TWVzc2FnZSh7cG9zaXRpb246IG5ld1Bvc2l0aW9uLCBjb2xvcjogbmV3Q29sb3IsIG51bX0pOwogIH07CgogIGV4cG9ydHMuaXNJblBvbHlnb24gPSBpc0luUG9seWdvbjsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTsKCiAgcmV0dXJuIGV4cG9ydHM7Cgp9KSh7fSk7Cgo=",null,!1),ro=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this,e)).littleEndian=!0,i}return Object(L.a)(n,[{key:"load",value:function(e,t,n,i){var a=this,r=new qr.i(a.manager);r.setPath(a.path),r.setResponseType("arraybuffer"),r.setRequestHeader(a.requestHeader),r.setWithCredentials(a.withCredentials),r.load(e,(function(n){try{t(a.parse(n))}catch(r){i?i(r):console.error(r),a.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t=qr.o.decodeText(new Uint8Array(e)),n=function(e){var t={},n=e.search(/[\n\r]data\s(\S*)\s/i),i=/[\n\r]data\s(\S*)\s/i.exec(e.slice(n-1));if(t.data=i[1],t.headerLen=i[0].length+n,t.str=e.slice(0,t.headerLen),t.str=t.str.replace(/#.*/gi,""),t.version=/version (.*)/i.exec(t.str),t.fields=/fields (.*)/i.exec(t.str),t.size=/size (.*)/i.exec(t.str),t.type=/type (.*)/i.exec(t.str),t.count=/count (.*)/i.exec(t.str),t.width=/width (.*)/i.exec(t.str),t.height=/height (.*)/i.exec(t.str),t.viewpoint=/viewpoint (.*)/i.exec(t.str),t.points=/points (.*)/i.exec(t.str),null!==t.version&&(t.version=parseFloat(t.version[1])),t.fields=null!==t.fields?t.fields[1].split(" "):[],null!==t.type&&(t.type=t.type[1].split(" ")),null!==t.width&&(t.width=parseInt(t.width[1])),null!==t.height&&(t.height=parseInt(t.height[1])),null!==t.viewpoint&&(t.viewpoint=t.viewpoint[1]),null!==t.points&&(t.points=parseInt(t.points[1],10)),null===t.points&&(t.points=t.width*t.height),null!==t.size&&(t.size=t.size[1].split(" ").map((function(e){return parseInt(e,10)}))),null!==t.count)t.count=t.count[1].split(" ").map((function(e){return parseInt(e,10)}));else{t.count=[];for(var a=0,r=t.fields.length;a<r;a++)t.count.push(1)}t.offset={};for(var o=0,c=0,l=t.fields.length;c<l;c++)"ascii"===t.data?t.offset[t.fields[c]]=c:(t.offset[t.fields[c]]=o,o+=t.size[c]*t.count[c]);return t.rowSize=o,t}(t),i=[],a=[],r=[];if("ascii"===n.data)for(var o=n.offset,c=t.slice(n.headerLen).split("\n"),l=0,s=c.length;l<s;l++)if(""!==c[l]){var u=c[l].split(" ");if(void 0!==o.x&&(i.push(parseFloat(u[o.x])),i.push(parseFloat(u[o.y])),i.push(parseFloat(u[o.z]))),this.genColorByCoord){var d=this.genColorByCoord(parseFloat(u[o.x]),parseFloat(u[o.y]),parseFloat(u[o.z])).map((function(e){return e/255}));r.push.apply(r,Object(w.a)(d))}void 0!==o.normal_x&&(a.push(parseFloat(u[o.normal_x])),a.push(parseFloat(u[o.normal_y])),a.push(parseFloat(u[o.normal_z])))}if("binary_compressed"===n.data)for(var h=new Uint32Array(e.slice(n.headerLen,n.headerLen+8)),f=h[0],g=h[1],v=function(e,t){var n,i,a,r=e.length,o=new Uint8Array(t),c=0,l=0;do{if((n=e[c++])<32){if(l+ ++n>t)throw new Error("Output buffer is not large enough");if(c+n>r)throw new Error("Invalid compressed data");do{o[l++]=e[c++]}while(--n)}else{if(i=n>>5,a=l-((31&n)<<8)-1,c>=r)throw new Error("Invalid compressed data");if(7===i&&(i+=e[c++],c>=r))throw new Error("Invalid compressed data");if(a-=e[c++],l+i+2>t)throw new Error("Output buffer is not large enough");if(a<0)throw new Error("Invalid compressed data");if(a>=l)throw new Error("Invalid compressed data");do{o[l++]=o[a++]}while(2+--i)}}while(c<r);return o}(new Uint8Array(e,n.headerLen+8,f),g),b=new DataView(v.buffer),p=n.offset,m=0;m<n.points;m++)if(void 0!==p.x&&(i.push(b.getFloat32(n.points*p.x+n.size[0]*m,this.littleEndian)),i.push(b.getFloat32(n.points*p.y+n.size[1]*m,this.littleEndian)),i.push(b.getFloat32(n.points*p.z+n.size[2]*m,this.littleEndian))),void 0!==p.normal_x&&(a.push(b.getFloat32(n.points*p.normal_x+n.size[4]*m,this.littleEndian)),a.push(b.getFloat32(n.points*p.normal_y+n.size[5]*m,this.littleEndian)),a.push(b.getFloat32(n.points*p.normal_z+n.size[6]*m,this.littleEndian))),this.genColorByCoord){var y=this.genColorByCoord(b.getFloat32(n.points*p.x+n.size[0]*m,this.littleEndian),b.getFloat32(n.points*p.y+n.size[0]*m,this.littleEndian),b.getFloat32(n.points*p.z+n.size[0]*m,this.littleEndian)).map((function(e){return e/255}));r.push.apply(r,Object(w.a)(y))}if("binary"===n.data)for(var x=new DataView(e,n.headerLen),C=n.offset,I=0,k=0;I<n.points;I++,k+=n.rowSize)if(void 0!==C.x&&(i.push(x.getFloat32(k+C.x,this.littleEndian)),i.push(x.getFloat32(k+C.y,this.littleEndian)),i.push(x.getFloat32(k+C.z,this.littleEndian))),void 0!==C.normal_x&&(a.push(x.getFloat32(k+C.normal_x,this.littleEndian)),a.push(x.getFloat32(k+C.normal_y,this.littleEndian)),a.push(x.getFloat32(k+C.normal_z,this.littleEndian))),this.genColorByCoord){var L=this.genColorByCoord(x.getFloat32(k+C.x,this.littleEndian),x.getFloat32(k+C.y,this.littleEndian),x.getFloat32(k+C.z,this.littleEndian)).map((function(e){return e/255}));r.push.apply(r,Object(w.a)(L))}var P=new qr.e;i.length>0&&P.setAttribute("position",new qr.j(i,3)),a.length>0&&P.setAttribute("normal",new qr.j(a,3)),r.length>0&&P.setAttribute("color",new qr.j(r,3)),P.computeBoundingSphere();var S=new qr.x({size:.01});return r.length>0?S.vertexColors=!0:S.color.setHex(16777215),new qr.w(P,S)}},{key:"genColorByCoord",value:function(e,t,n){return n<=0?[128,128,128]:n<5?[255,0,0]:n<10?[0,255,0]:[0,0,255]}}]),n}(qr.n),oo=Object.defineProperty,co=function(e,t,n){return function(e,t,n){t in e?oo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==typeof t?t+"":t,n),n},lo={type:"change"},so={type:"start"},uo={type:"end"},ho=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(e,i){var a;Object(k.a)(this,n),a=t.call(this),co(Object(P.a)(a),"listenToKeyEvents",(function(e){e.addEventListener("keydown",onKeyDown),a._domElementKeyEvents=e})),void 0===i&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),a.object=e,a.domElement=i,a.domElement.style.touchAction="none",a.enabled=!0,a.target=new qr.G,a.minDistance=0,a.maxDistance=1/0,a.minZoom=0,a.maxZoom=1/0,a.minPolarAngle=0,a.maxPolarAngle=Math.PI,a.minAzimuthAngle=-1/0,a.maxAzimuthAngle=1/0,a.enableDamping=!1,a.dampingFactor=.05,a.enableZoom=!0,a.zoomSpeed=1,a.enableRotate=!0,a.rotateSpeed=1,a.enablePan=!0,a.panSpeed=1,a.screenSpacePanning=!0,a.keyPanSpeed=7,a.autoRotate=!1,a.autoRotateSpeed=2,a.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},a.mouseButtons={LEFT:qr.p.ROTATE,MIDDLE:qr.p.DOLLY,RIGHT:qr.p.PAN},a.touches={ONE:qr.D.ROTATE,TWO:qr.D.DOLLY_PAN},a.target0=a.target.clone(),a.position0=a.object.position.clone(),a.zoom0=a.object.zoom,a._domElementKeyEvents=null,a.getPolarAngle=function(){return s.phi},a.getAzimuthalAngle=function(){return s.theta},a.getDistance=function(){return this.object.position.distanceTo(this.target)},a.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},a.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(lo),r.update(),c=o.NONE},a.update=function(){var t=new qr.G,n=(new qr.y).setFromUnitVectors(e.up,new qr.G(0,1,0)),i=n.clone().invert(),a=new qr.G,g=new qr.y,v=2*Math.PI;return function(){var e=r.object.position;t.copy(e).sub(r.target),t.applyQuaternion(n),s.setFromVector3(t),r.autoRotate&&c===o.NONE&&O(2*Math.PI/60/60*r.autoRotateSpeed),r.enableDamping?(s.theta+=u.theta*r.dampingFactor,s.phi+=u.phi*r.dampingFactor):(s.theta+=u.theta,s.phi+=u.phi);var b=r.minAzimuthAngle,p=r.maxAzimuthAngle;return isFinite(b)&&isFinite(p)&&(b<-Math.PI?b+=v:b>Math.PI&&(b-=v),p<-Math.PI?p+=v:p>Math.PI&&(p-=v),s.theta=b<=p?Math.max(b,Math.min(p,s.theta)):s.theta>(b+p)/2?Math.max(b,s.theta):Math.min(p,s.theta)),s.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=d,s.radius=Math.max(r.minDistance,Math.min(r.maxDistance,s.radius)),!0===r.enableDamping?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),t.setFromSpherical(s),t.applyQuaternion(i),e.copy(r.target).add(t),r.object.lookAt(r.target),!0===r.enableDamping?(u.theta*=1-r.dampingFactor,u.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(u.set(0,0,0),h.set(0,0,0)),d=1,!!(f||a.distanceToSquared(r.object.position)>l||8*(1-g.dot(r.object.quaternion))>l)&&(r.dispatchEvent(lo),a.copy(r.object.position),g.copy(r.object.quaternion),f=!1,!0)}}(),a.dispose=function(){r.domElement.removeEventListener("contextmenu",X),r.domElement.removeEventListener("pointerdown",z),r.domElement.removeEventListener("pointercancel",W),r.domElement.removeEventListener("wheel",K),r.domElement.removeEventListener("pointermove",U),r.domElement.removeEventListener("pointerup",G),null!==r._domElementKeyEvents&&r._domElementKeyEvents.removeEventListener("keydown",Y)};var r=Object(P.a)(a),o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},c=o.NONE,l=1e-6,s=new qr.A,u=new qr.A,d=1,h=new qr.G,f=!1,g=new qr.F,v=new qr.F,b=new qr.F,p=new qr.F,m=new qr.F,y=new qr.F,x=new qr.F,C=new qr.F,w=new qr.F,I=[],L={};function S(){return Math.pow(.95,r.zoomSpeed)}function O(e){u.theta-=e}function A(e){u.phi-=e}var T=function(){var e=new qr.G;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}}(),E=function(){var e=new qr.G;return function(t,n){!0===r.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(r.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),D=function(){var e=new qr.G;return function(t,n){var i=r.domElement;if(r.object.isPerspectiveCamera){var a=r.object.position;e.copy(a).sub(r.target);var o=e.length();o*=Math.tan(r.object.fov/2*Math.PI/180),T(2*t*o/i.clientHeight,r.object.matrix),E(2*n*o/i.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(T(t*(r.object.right-r.object.left)/r.object.zoom/i.clientWidth,r.object.matrix),E(n*(r.object.top-r.object.bottom)/r.object.zoom/i.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function N(e){r.object.isPerspectiveCamera?d/=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*e)),r.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function R(e){r.object.isPerspectiveCamera?d*=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/e)),r.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function M(e){g.set(e.clientX,e.clientY)}function _(e){p.set(e.clientX,e.clientY)}function j(){if(1===I.length)g.set(I[0].pageX,I[0].pageY);else{var e=.5*(I[0].pageX+I[1].pageX),t=.5*(I[0].pageY+I[1].pageY);g.set(e,t)}}function B(){if(1===I.length)p.set(I[0].pageX,I[0].pageY);else{var e=.5*(I[0].pageX+I[1].pageX),t=.5*(I[0].pageY+I[1].pageY);p.set(e,t)}}function H(){var e=I[0].pageX-I[1].pageX,t=I[0].pageY-I[1].pageY,n=Math.sqrt(e*e+t*t);x.set(0,n)}function V(e){if(1==I.length)v.set(e.pageX,e.pageY);else{var t=q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);v.set(n,i)}b.subVectors(v,g).multiplyScalar(r.rotateSpeed);var a=r.domElement;O(2*Math.PI*b.x/a.clientHeight),A(2*Math.PI*b.y/a.clientHeight),g.copy(v)}function Z(e){if(1===I.length)m.set(e.pageX,e.pageY);else{var t=q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);m.set(n,i)}y.subVectors(m,p).multiplyScalar(r.panSpeed),D(y.x,y.y),p.copy(m)}function F(e){var t=q(e),n=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(n*n+i*i);C.set(0,a),w.set(0,Math.pow(C.y/x.y,r.zoomSpeed)),N(w.y),x.copy(C)}function z(e){!1!==r.enabled&&(0===I.length&&(r.domElement.setPointerCapture(e.pointerId),r.domElement.addEventListener("pointermove",U),r.domElement.addEventListener("pointerup",G)),function(e){I.push(e)}(e),"touch"===e.pointerType?function(e){switch(Q(e),I.length){case 1:switch(r.touches.ONE){case qr.D.ROTATE:if(!1===r.enableRotate)return;j(),c=o.TOUCH_ROTATE;break;case qr.D.PAN:if(!1===r.enablePan)return;B(),c=o.TOUCH_PAN;break;default:c=o.NONE}break;case 2:switch(r.touches.TWO){case qr.D.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&H(),r.enablePan&&B(),c=o.TOUCH_DOLLY_PAN;break;case qr.D.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&H(),r.enableRotate&&j(),c=o.TOUCH_DOLLY_ROTATE;break;default:c=o.NONE}break;default:c=o.NONE}c!==o.NONE&&r.dispatchEvent(so)}(e):function(e){var t;switch(e.button){case 0:t=r.mouseButtons.LEFT;break;case 1:t=r.mouseButtons.MIDDLE;break;case 2:t=r.mouseButtons.RIGHT;break;default:t=-1}switch(t){case qr.p.DOLLY:if(!1===r.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),c=o.DOLLY;break;case qr.p.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enablePan)return;_(e),c=o.PAN}else{if(!1===r.enableRotate)return;M(e),c=o.ROTATE}break;case qr.p.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enableRotate)return;M(e),c=o.ROTATE}else{if(!1===r.enablePan)return;_(e),c=o.PAN}break;default:c=o.NONE}c!==o.NONE&&r.dispatchEvent(so)}(e))}function U(e){!1!==r.enabled&&("touch"===e.pointerType?function(e){switch(Q(e),c){case o.TOUCH_ROTATE:if(!1===r.enableRotate)return;V(e),r.update();break;case o.TOUCH_PAN:if(!1===r.enablePan)return;Z(e),r.update();break;case o.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;!function(e){r.enableZoom&&F(e),r.enablePan&&Z(e)}(e),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;!function(e){r.enableZoom&&F(e),r.enableRotate&&V(e)}(e),r.update();break;default:c=o.NONE}}(e):function(e){if(!1===r.enabled)return;switch(c){case o.ROTATE:if(!1===r.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),b.subVectors(v,g).multiplyScalar(r.rotateSpeed);var t=r.domElement;O(2*Math.PI*b.x/t.clientHeight),A(2*Math.PI*b.y/t.clientHeight),g.copy(v),r.update()}(e);break;case o.DOLLY:if(!1===r.enableZoom)return;!function(e){C.set(e.clientX,e.clientY),w.subVectors(C,x),w.y>0?N(S()):w.y<0&&R(S()),x.copy(C),r.update()}(e);break;case o.PAN:if(!1===r.enablePan)return;!function(e){m.set(e.clientX,e.clientY),y.subVectors(m,p).multiplyScalar(r.panSpeed),D(y.x,y.y),p.copy(m),r.update()}(e)}}(e))}function G(e){J(e),0===I.length&&(r.domElement.releasePointerCapture(e.pointerId),r.domElement.removeEventListener("pointermove",U),r.domElement.removeEventListener("pointerup",G)),r.dispatchEvent(uo),c=o.NONE}function W(e){J(e)}function K(e){!1!==r.enabled&&!1!==r.enableZoom&&c===o.NONE&&(e.preventDefault(),r.dispatchEvent(so),function(e){e.deltaY<0?R(S()):e.deltaY>0&&N(S()),r.update()}(e),r.dispatchEvent(uo))}function Y(e){!1!==r.enabled&&!1!==r.enablePan&&function(e){var t=!1;switch(e.code){case r.keys.UP:D(0,r.keyPanSpeed),t=!0;break;case r.keys.BOTTOM:D(0,-r.keyPanSpeed),t=!0;break;case r.keys.LEFT:D(r.keyPanSpeed,0),t=!0;break;case r.keys.RIGHT:D(-r.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),r.update())}(e)}function X(e){!1!==r.enabled&&e.preventDefault()}function J(e){delete L[e.pointerId];for(var t=0;t<I.length;t++)if(I[t].pointerId==e.pointerId)return void I.splice(t,1)}function Q(e){var t=L[e.pointerId];void 0===t&&(t=new qr.F,L[e.pointerId]=t),t.set(e.pageX,e.pageY)}function q(e){var t=e.pointerId===I[0].pointerId?I[1]:I[0];return L[t.pointerId]}return r.domElement.addEventListener("contextmenu",X),r.domElement.addEventListener("pointerdown",z),r.domElement.addEventListener("pointercancel",W),r.domElement.addEventListener("wheel",K,{passive:!1}),a.update(),a}return Object(L.a)(n)}(qr.h),fo=function(){function e(){var t=this;Object(k.a)(this,e),this.MAX_SIZE=50,this.cacheList=[],this.loadPCDFile=function(e){return new Promise((function(n,i){var a,r=null==(a=t.pointsMap.get(e))?void 0:a.clone();if(r)n(r);else{if(t.cacheList.length>t.MAX_SIZE){var o=t.cacheList.shift();o&&t.pointsMap.delete(o.src)}t.cacheList.push({src:e}),t.pcdLoader.load(e,(function(i){t.pointsMap.set(e,i.clone()),n(i)}),(function(){}),(function(e){i(e)}))}}))},this.pcdLoader=new ro,this.pointsMap=new Map}return Object(L.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}(),go=Object.defineProperty,vo=Object.defineProperties,bo=Object.getOwnPropertyDescriptors,po=Object.getOwnPropertySymbols,mo=Object.prototype.hasOwnProperty,yo=Object.prototype.propertyIsEnumerable,xo=function(e,t,n){return t in e?go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Co=function(e,t){for(var n in t||(t={}))mo.call(t,n)&&xo(e,n,t[n]);if(po){var i,a=Object(E.a)(po(t));try{for(a.s();!(i=a.n()).done;){n=i.value;yo.call(t,n)&&xo(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},wo=function(e,t){return vo(e,bo(t))},Io=function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(t){a(t)}},o=function(e){try{c(n.throw(e))}catch(t){a(t)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))};new io;var ko=function(){function e(t){var n=this,i=t.container,a=t.noAppend,r=t.isOrthographicCamera,o=t.orthographicParams,c=t.backgroundColor,l=void 0===c?"black":c;Object(k.a)(this,e),this.zAxisLimit=10,this.initCameraPosition=this.DEFAULT_INIT_CAMERA_POSITION,this.isOrthographicCamera=!1,this.pointsUuid="",this.pointCloudObjectName="pointCloud",this.rangeObjectName="range",this.showDirection=!0,this.AddBoxToSense=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215,a=null!=(t=e.id)?t:yi();n.removeObjectByName(a);var r=e.center,o=e.width,c=e.height,l=e.depth,s=e.rotation,u=new qr.k,d=new qr.c(o,c,l),h=new qr.t({color:"blue"}),f=new qr.s(d,h),g=new qr.d(f,i),v=n.generateBoxArrow(e);u.add(g),u.add(v),u.position.set(r.x,r.y,r.z),u.rotation.set(0,0,s),u.name=a,n.scene.add(u)},this.overridePointShader=function(e){e.vertexShader="\n    attribute float sizes;\n    attribute float visibility;\n    varying float vVisible;\n  ".concat(e.vertexShader).replace("gl_PointSize = size;","gl_PointSize = size;\n      vVisible = visibility;\n    "),e.fragmentShader="\n    varying float vVisible;\n  ".concat(e.fragmentShader).replace("#include <clipping_planes_fragment>","\n      if (vVisible < 0.5) discard;\n    #include <clipping_planes_fragment>")},this.loadPCDFile=function(e,t){return Io(n,null,Object(xi.a)().mark((function n(){var i;return Object(xi.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.clearPointCloud(),n.next=3,this.cacheInstance.loadPCDFile(e);case 3:(i=n.sent).name=this.pointCloudObjectName,this.renderPointCloud(i,t);case 6:case"end":return n.stop()}}),n,this)})))},this.loadPCDFileByBox=function(e,t,i){return Io(n,null,Object(xi.a)().mark((function n(){var a,r,o=this;return Object(xi.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=function(e){return Io(o,null,Object(xi.a)().mark((function n(){var a,r,o,c,l,s,u,d,h;return Object(xi.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(a=null!=i?i:{}).width,o=void 0===r?0:r,c=a.height,l=void 0===c?0:c,s=a.depth,u=void 0===s?0:s,n.next=3,this.filterPointsByBox(wo(Co({},t),{width:t.width+o,height:t.height+l,depth:t.depth+u}),e);case 3:if(d=n.sent){n.next=7;break}return console.error("filter Error"),n.abrupt("return");case 7:this.clearPointCloud(),(h=new qr.w(d.geometry,e.material)).name=this.pointCloudObjectName,this.scene.add(h),this.render();case 12:case"end":return n.stop()}}),n,this)})))},n.next=3,this.cacheInstance.loadPCDFile(e);case 3:r=n.sent,a(r);case 5:case"end":return n.stop()}}),n,this)})))},this.generateBoxArrow=function(e){var t=e.width,i=new qr.G(1,0,0),a=new qr.G(t/2,0,0),r=new qr.a(i,a,2,16776960);return r.visible=n.showDirection,r},this.generateBoxTrackID=function(e){if(e.trackID){var t=new qr.E(n.getTextCanvas(e.trackID.toString()));t.needsUpdate=!0;var i=new qr.C({map:t,depthWrite:!1}),a=new qr.B(i);return a.scale.set(5,5,5),a.position.set(-e.width/2,0,e.depth/2+.5),a}},this.applyZAxisPoints=function(e){n.zAxisLimit=e,n.filterZAxisPoints(),n.render()},this.updatePointSize=function(e){var t=n.scene.getObjectByName(n.pointCloudObjectName);if(t){var i=t.material.size;t.material.size=e?Math.min(1.2*i,10):Math.max(i/1.2,1),n.render()}},this.container=i,this.renderer=new qr.I({antialias:!0}),this.backgroundColor=l,r&&o?(this.isOrthographicCamera=!0,this.camera=new qr.u(o.left,o.right,o.top,o.bottom,o.near,o.far)):this.camera=new qr.v(30,this.containerWidth/this.containerHeight,1,1e3),this.initCamera(),this.scene=new qr.z,this.controls=new ho(this.camera,this.renderer.domElement),this.pcdLoader=new ro,this.axesHelper=new qr.b(1e3),this.scene.add(this.camera),a||i.appendChild(this.renderer.domElement),this.init(),this.cacheInstance=fo.getInstance()}return Object(L.a)(e,[{key:"DEFAULT_INIT_CAMERA_POSITION",get:function(){return new qr.G(-1,0,10)}},{key:"containerWidth",get:function(){return this.container.clientWidth}},{key:"containerHeight",get:function(){return this.container.clientHeight}},{key:"setInitCameraPosition",value:function(e){this.initCameraPosition=e}},{key:"initOrthographicCamera",value:function(e){if("OrthographicCamera"===this.camera.type){var t=e.left,n=e.right,i=e.top,a=e.bottom,r=e.near,o=e.far;this.camera.left=t,this.camera.right=n,this.camera.top=i,this.camera.bottom=a,this.camera.near=r,this.camera.far=o,this.camera.updateProjectionMatrix()}}},{key:"initPerspectiveCamera",value:function(){"PerspectiveCamera"===this.camera.type&&(this.camera.fov=30,this.camera.aspect=this.containerWidth/this.containerHeight,this.camera.near=1,this.camera.far=1e3,this.camera.updateProjectionMatrix())}},{key:"initCamera",value:function(){var e=this.camera;if(this.isOrthographicCamera){var t=this.initCameraPosition,n=t.x,i=t.y,a=t.z;e.position.set(n,i,a)}else e.position.set(-1,0,500);e.up.set(0,0,1)}},{key:"initControls",value:function(){var e=this;this.controls.addEventListener("change",(function(){e.render()})),this.setDefaultControls()}},{key:"setDefaultControls",value:function(){var e=this,t=this.controls;t.target=Object(Qr.a)(qr.G,[0,0,0]),t.addEventListener("change",(function(){e.render()})),t.maxPolarAngle=Math.PI/2,t.update()}},{key:"initRenderer",value:function(){var e=this.renderer;e.setPixelRatio(window.devicePixelRatio),e.setSize(this.containerWidth,this.containerHeight)}},{key:"init",value:function(){this.scene.background=new qr.f(this.backgroundColor),this.initControls(),this.initRenderer()}},{key:"removeObjectByName",value:function(e){var t=this.scene.getObjectByName(e);t&&t.removeFromParent()}},{key:"transferKitti2Matrix",value:function(e,t,n){var i=Ha.MatrixUtils.transferMatrix34FromKitti2Three(e),a=Ha.MatrixUtils.transferMatrix33FromKitti2Three(t),r=Ha.MatrixUtils.transferMatrix34FromKitti2Three(n),o=this.createThreeMatrix4(i),c=this.createThreeMatrix4(a),l=this.createThreeMatrix4(r);return{composeMatrix4:l.clone().premultiply(c).premultiply(o),PM:o,RM:c,TM:l}}},{key:"pointCloudLidar2image",value:function(e,t){var n=this,i=Ha.PointCloudUtils.getAllViewData(e),a=t.P,r=t.R,o=t.T,c=this.transferKitti2Matrix(a,r,o).composeMatrix4;return i.map((function(t){return{type:t.type,pointList:t.pointList.map((function(t){return n.rotatePoint(t,e.center,e.rotation)})).map((function(e){return n.lidar2image(e,c)})).filter((function(e){return void 0!==e}))}})).filter((function(e){return 0!==e.pointList.length}))}},{key:"lidar2image",value:function(e,t){var n=new qr.H(e.x,e.y,e.z).applyMatrix4(t);if(!(n.z<0)){var i=1/n.z,a=(new qr.r).set(i,0,0,0,0,i,0,0,0,0,i,0,0,0,0,1);return n.applyMatrix4(a)}}},{key:"generateBox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215;this.AddBoxToSense(e,t),this.render()}},{key:"generateBoxes",value:function(e){var t=this;e.forEach((function(e){t.generateBox(e)})),this.render()}},{key:"getOrthographicCamera",value:function(e){var t=e.center,n=e.width,i=e.height;return{left:t.x-n/2-10,right:t.x-n/2+10,top:t.y+i/2+10,bottom:t.y-i/2-10,near:100,far:-100,zoom:5}}},{key:"updateCameraByBox",value:function(e,t){var n=e.center,i=e.width,a=e.height,r=e.depth,o=e.rotation,c=this.getCameraVector(n,o,{width:i,height:a,depth:r},t);return this.updateCamera(c,n),c}},{key:"updateOrthoCamera",value:function(e,t){var n=this.updateCameraByBox(e,t);return this.camera.zoom=1,this.camera.updateProjectionMatrix(),{cameraPositionVector:n}}},{key:"updateTopCamera",value:function(){this.setInitCameraPosition(this.DEFAULT_INIT_CAMERA_POSITION),this.camera.zoom=1,this.initCamera(),this.setDefaultControls(),this.camera.updateProjectionMatrix(),this.render()}},{key:"updateCamera",value:function(e,t){this.camera.position.set(e.x,e.y,e.z),this.controls.target=new qr.G(t.x,t.y,t.z),this.controls.update()}},{key:"resetCamera",value:function(){this.updateCamera({x:-1,y:0,z:500},{x:0,y:0,z:0})}},{key:"createThreeMatrix4",value:function(e){var t;return(t=new qr.r).set.apply(t,Object(w.a)(e))}},{key:"rotatePoint",value:function(e,t,n){var i,a=new qr.G(e.x,e.y,null!=(i=null==e?void 0:e.z)?i:1),r=(new qr.r).makeRotationZ(n),o=(new qr.r).makeTranslation(t.x,t.y,t.z),c=(new qr.r).makeTranslation(-t.x,-t.y,-t.z);return a.clone().applyMatrix4(c).applyMatrix4(r).applyMatrix4(o)}},{key:"getCuboidFromPointCloudBox",value:function(e){var t=this,n=e.center,i=e.width,a=e.height,r=e.depth,o=e.rotation;return{polygonPointList:[{x:n.x+i/2,y:n.y-a/2},{x:n.x+i/2,y:n.y+a/2},{x:n.x-i/2,y:n.y+a/2},{x:n.x-i/2,y:n.y-a/2}].map((function(e){var i=t.rotatePoint(e,n,o);return{x:i.x,y:i.y}})),zMax:n.z+r/2,zMin:n.z-r/2}}},{key:"filterPointsByBox",value:function(e,t){if(!t){var n=this.scene.getObjectByName(this.pointCloudObjectName);if(!n)return console.error("There is no corresponding point cloud object"),Promise.resolve(void 0);t=n}if(window.Worker){var i=this.getCuboidFromPointCloudBox(e),a=i.zMin,r=i.zMax,o=i.polygonPointList,c=t.geometry.attributes.position.array,l={boxParams:e,zMin:a,zMax:r,polygonPointList:o,color:t.geometry.attributes.color.array,position:c};return new Promise((function(e){var t=new ao;t.postMessage(l),t.onmessage=function(n){var i=n.data,a=i.color,r=i.position,o=i.num,c=new qr.e;c.setAttribute("position",new qr.j(r,3)),c.setAttribute("color",new qr.j(a,3)),c.computeBoundingSphere(),t.terminate(),e({geometry:c,num:o})}}))}return Promise.resolve(void 0)}},{key:"getCameraVector",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ha.EPerspectiveView.Front,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,r=Ha.PerspectiveShiftUtils.frontViewMatrix4(a);switch(i){case Ha.EPerspectiveView.Front:break;case Ha.EPerspectiveView.Back:r=Ha.PerspectiveShiftUtils.backViewMatrix4(a);break;case Ha.EPerspectiveView.Left:r=Ha.PerspectiveShiftUtils.leftViewMatrix4(a);break;case Ha.EPerspectiveView.Right:r=Ha.PerspectiveShiftUtils.rightViewMatrix4(a);break;case Ha.EPerspectiveView.Top:r=Ha.PerspectiveShiftUtils.topViewMatrix4(a);break;case Ha.EPerspectiveView.LFT:r=Ha.PerspectiveShiftUtils.leftFrontTopViewMatrix4(a,n);break;case Ha.EPerspectiveView.RBT:r=Ha.PerspectiveShiftUtils.rightBackTopViewMatrix4(a,n)}var o=this.createThreeMatrix4(r),c=(new qr.r).makeTranslation(-e.x,-e.y,-e.z),l=(new qr.r).makeTranslation(e.x,e.y,e.z),s=(new qr.r).makeRotationZ(t),u=new qr.G(e.x,e.y,e.z),d=u.clone().applyMatrix4(o).applyMatrix4(c).applyMatrix4(s).applyMatrix4(l);return d}},{key:"createRange",value:function(e){this.removeObjectByName(this.rangeObjectName);var t=new qr.g(0,0,e,e,0,2*Math.PI,!1,0).getPoints(50),n=(new qr.e).setFromPoints(t),i=new qr.m({color:16711680}),a=new qr.l(n,i);return a.name=this.rangeObjectName,a}},{key:"renderPointCloud",value:function(e,t){e.material.size=1,e.name=this.pointCloudObjectName;var n=new qr.x({vertexColors:!0});if(n.onBeforeCompile=this.overridePointShader,t){var i=this.createRange(t);this.scene.add(i)}this.pointsUuid=e.uuid,e.material=n,this.filterZAxisPoints(e),this.scene.add(e),this.render()}},{key:"clearPointCloud",value:function(){this.removeObjectByName(this.pointCloudObjectName)}},{key:"clearPointCloudAndRender",value:function(){this.clearPointCloud(),this.render()}},{key:"highlightOriginPointCloud",value:function(e){}},{key:"setShowDirection",value:function(e){this.showDirection=e,this.scene.children.forEach((function(t){"Group"===t.type&&t.children.forEach((function(t){"ArrowHelper"===t.type&&(t.visible=e)}))})),this.render()}},{key:"getTextCanvas",value:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return n&&(n.font="".concat(50,'px " bold'),n.fillStyle="white",n.textAlign="center",n.textBaseline="middle",n.fillText(e,t.width/2,t.height/2)),t}},{key:"getSensesPointZAxisInPolygon",value:function(e,t){var n=this,i=this.scene.children.find((function(e){return e.uuid===n.pointsUuid})),a=0,r=0,o=0,c=0;if(i&&(null==i?void 0:i.geometry))for(var l=null==i?void 0:i.geometry.attributes.position.array,s=0;s<l.length;s+=3){var u=l[s],d=l[s+1],h=l[s+2];Ee({x:u,y:d},e)&&h&&(r=Math.max(h,r),a=Math.min(h,a),c++,t&&h>=t[0]&&h<=t[1]&&o++)}return{maxZ:r,minZ:a,count:o,zCount:c}}},{key:"getBasicCoordinate2Canvas",value:function(e){var t=this.containerWidth/2,n=this.containerHeight/2;return{x:e.x*t+t,y:e.y*n+n,z:e.z}}},{key:"basicCoordinate2CanvasMatrix4",get:function(){var e=this.containerWidth/2,t=this.containerHeight/2;return(new qr.r).set(e,0,0,e,0,t,0,t,0,0,1,0,0,0,0,1)}},{key:"getCanvas2BasicCoordinate",value:function(e){var t=this.containerWidth/2,n=this.containerHeight/2;return new qr.G(e.x/t-t/2,-(e.y/n-n/2),1)}},{key:"getPolygonSidePoints",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.height,o=e.width,c=e.depth;return[{x:n+o/2,y:i+r/2,z:a-c/2},{x:n+o/2,y:i+r/2,z:a+c/2},{x:n-o/2,y:i+r/2,z:a+c/2},{x:n-o/2,y:i+r/2,z:a-c/2}]}},{key:"getPolygonBackPoints",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.height,o=e.width,c=e.depth;return[{x:n-o/2,y:i+r/2,z:a+c/2},{x:n-o/2,y:i+r/2,z:a-c/2},{x:n-o/2,y:i-r/2,z:a-c/2},{x:n-o/2,y:i-r/2,z:a+c/2}]}},{key:"getPolygonTopPoints",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.height,o=e.width,c=e.depth;return[{x:n+o/2,y:i+r/2,z:a+c/2},{x:n+o/2,y:i-r/2,z:a+c/2},{x:n-o/2,y:i-r/2,z:a+c/2},{x:n-o/2,y:i+r/2,z:a+c/2}]}},{key:"getModelTransformationMatrix",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.rotation,o=(new qr.r).makeTranslation(-n,-i,-a),c=(new qr.r).makeTranslation(n,i,a),l=(new qr.r).makeRotationZ(r);return(new qr.r).multiply(c).multiply(l).multiply(o)}},{key:"getBoxSidePolygon2DCoordinate",value:function(e){return this.getBoxPolygon2DCoordinate(e,Ha.EPerspectiveView.Left)}},{key:"getBoxBackPolygon2DCoordinate",value:function(e){return this.getBoxPolygon2DCoordinate(e,Ha.EPerspectiveView.Back)}},{key:"boxParams2ViewPolygon",value:function(e,t){switch(t){case Ha.EPerspectiveView.Left:return this.getPolygonSidePoints(e);case Ha.EPerspectiveView.Back:return this.getPolygonBackPoints(e);default:return this.getPolygonTopPoints(e)}}},{key:"getBoxPolygon2DCoordinate",value:function(e,t){var n=this,i=this.boxParams2ViewPolygon(e,t),a=e.width,r=e.height,o=(new qr.r).premultiply(this.camera.matrixWorldInverse).premultiply(this.camera.projectionMatrix),c=(new qr.r).premultiply(this.getModelTransformationMatrix(e)).premultiply(o).premultiply(this.basicCoordinate2CanvasMatrix4);this.sideMatrix=c;var l=i.map((function(e){return new qr.G(e.x,e.y,e.z)})).map((function(e){return e.applyMatrix4(n.sideMatrix)})),s=this.containerWidth/a,u=this.containerHeight/r;return{polygon2d:l,zoom:Math.min(s,u)/2}}},{key:"getBoxTopPolygon2DCoordinate",value:function(e){var t=this,n=e.width,i=e.height,a=this.getPolygonTopPoints(e).map((function(e){return new qr.G(e.x,e.y,e.z)})).map((function(n){return n.applyMatrix4(t.getModelTransformationMatrix(e))})).map((function(e){return{x:e.y,y:e.x}})).map((function(e){return{x:-(e.x-t.containerWidth/2),y:-(e.y-t.containerHeight/2)}})),r=this.containerWidth/n,o=this.containerHeight/i;return{polygon2d:a,zoom:Math.min(r,o)/2}}},{key:"getNewBoxBySideUpdate",value:function(e,t,n,i){var a=(new qr.r).makeRotationZ(i.rotation),r=new qr.G(-e.x,0,0).applyMatrix4(a),o=i;return o.center={x:o.center.x+r.x,y:o.center.y+r.y,z:o.center.z-e.z},{newBoxParams:o=wo(Co({},o),{width:o.width+t,height:o.height,depth:o.depth+n})}}},{key:"getNewBoxByBackUpdate",value:function(e,t,n,i){var a=(new qr.r).makeRotationZ(i.rotation),r=new qr.G(0,-e.x,0).applyMatrix4(a),o=i;return o.center={x:o.center.x+r.x,y:o.center.y+r.y,z:o.center.z-e.z},{newBoxParams:o=wo(Co({},o),{width:o.width,height:o.height+t,depth:o.depth+n})}}},{key:"getNewBoxBySideUpdateByPoints",value:function(e,t,n,i){var a,r=null==(a=this.sideMatrix)?void 0:a.invert();if(this.sideMatrix&&r){this.camera.zoom=1,this.camera.updateProjectionMatrix();var o=e.map((function(e){return new qr.G(e.x,e.y,e.z)})).map((function(e){return e.applyMatrix4(r)})),c=Object(I.a)(o,4),l=c[0],s=c[1],u=c[2],d=c[3],h=Math.max(Math.abs(l.x-u.x),Math.abs(l.x-s.x)),f=s.add(d).applyMatrix3((new qr.q).set(.5,0,0,0,.5,0,0,0,.5)).clone().applyMatrix3((new qr.q).set(-1,0,0,0,-1,0,0,0,-1)).add(new qr.G(i.center.x,i.center.y,i.center.z));return{newBoxParams:wo(Co({},i),{center:{x:i.center.x-f.x,y:i.center.y-f.y,z:i.center.z-n},width:h,height:i.height,depth:i.depth+t,rotation:i.rotation})}}console.error("No sideMatrix")}},{key:"filterZAxisPoints",value:function(e){var t=this,n=e||this.scene.children.find((function(e){return e.uuid===t.pointsUuid}));if(n){for(var i=n.geometry.attributes.position,a=[],r=i.count,o=0;o<r;o++){var c=i.getZ(o);a.push(c>this.zAxisLimit?0:1)}n.geometry.setAttribute("visibility",new qr.j(a,1)),n.geometry.attributes.visibility.needsUpdate=!0}}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(),Lo=function(){function e(t){Object(k.a)(this,e),this.container=t.container}return Object(L.a)(e,[{key:"createCanvas",value:function(e,t){if("string"!==typeof e)return this.container.appendChild(e),e.style.position="absolute",e.style.left="0",e.style.top="0",e;var n=document.createElement("canvas");return n.id=e,t&&t.size&&(n.width=t.size.width,n.height=t.size.height),this.container.appendChild(n),n}},{key:"destroyCanvas",value:function(e){var t=document.getElementById(e);return t&&this.container.removeChild(t),t}}]),e}(),Po=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n?(n.fillStyle="black",n.fillRect(0,0,e.width,e.height),t.toDataURL()):""},So=function(){function e(t){var n=this,i=t.size,a=t.container,r=t.pcdPath,o=t.polygonOperationProps;Object(k.a)(this,e),this.updatePolygonList=function(e,t){var i=e.map((function(e){var t,i=n.pointCloudInstance.getBoxTopPolygon2DCoordinate(e).polygon2d;return{id:e.id,sourceID:"",pointList:i,isRect:!0,valid:null==(t=e.valid)||t}}));t&&(i=i.concat(t)),n.pointCloud2dOperation.setResult(i)};var c=this.getDefaultOrthographic(i),l=Po(i),s=new Image;s.src=l;var u=new Lo({container:a}),d=new ko({container:a,noAppend:!0,isOrthographicCamera:!0,orthographicParams:c});r&&d.loadPCDFile(r),u.createCanvas(d.renderer.domElement);var h={container:a,size:i,config:'{ "textConfigurable": false }',imgNode:s,isAppend:!1};o&&Object.assign(h,o);var f=new Ar(h);f.eventBinding(),f.setPattern(he.Rect),u.createCanvas(f.canvas,{size:i}),this.pointCloud2dOperation=f,this.pointCloudInstance=d,this.canvasScheduler=u}return Object(L.a)(e,[{key:"getDefaultOrthographic",value:function(e){return{left:-e.width/2,right:e.width/2,top:e.height/2,bottom:-e.height/2,near:100,far:-100}}},{key:"initSize",value:function(e){var t=this;this.pointCloudInstance.updateTopCamera(),this.pointCloudInstance.setDefaultControls(),this.pointCloudInstance.initRenderer(),this.pointCloudInstance.initOrthographicCamera(this.getDefaultOrthographic(e)),this.pointCloudInstance.render();var n=Po(e),i=new Image;i.src=n,i.onload=function(){t.pointCloud2dOperation.setImgNode(i),t.pointCloud2dOperation.setCanvasSize(e),t.pointCloud2dOperation.initImgPos()}}},{key:"addPolygonListOnTopView",value:function(e){var t=Ha.PointCloudUtils.getBoxParamsFromResultList(e),n=Ha.PointCloudUtils.getPolygonListFromResultList(e);this.updatePolygonList(t,n)}},{key:"updateData",value:function(e,t,n){this.pointCloud2dOperation&&this.pointCloudInstance&&(this.pointCloudInstance.loadPCDFile(e,null==n?void 0:n.radius),this.addPolygonListOnTopView(t))}},{key:"initAllPosition",value:function(){this.pointCloudInstance.updateTopCamera(),this.pointCloud2dOperation.initPosition()}},{key:"clearAllData",value:function(){this.pointCloudInstance.clearPointCloudAndRender(),this.pointCloud2dOperation.clearResult()}}]),e}(),Oo=zr,Ao=zr},,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(47));t.classnames=function(e){if(Array.isArray(e))return e.filter((function(e){return e})).join(" ");if(a.default.isObject(e)){var t=[];return Object.keys(e).forEach((function(n){e[n]&&t.push(n)})),t.join(" ")}return""},t.jsonParser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return"string"===typeof e?JSON.parse(e):a.default.isObject(e)?e:t}catch(n){return t}}},,function(e,t,n){"use strict";var i=n(73).default,a=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=o(r),l=c.default.createContext({pointCloudBoxList:[],polygonList:[],selectedID:"",selectedIDs:[],valid:!0,setSelectedIDs:function(){},setPointCloudResult:function(){},setPointCloudValid:function(){},setTopViewInstance:function(){},setSideViewInstance:function(){},setBackViewInstance:function(){},setMainViewInstance:function(){},addSelectedID:function(){},selectedAllBoxes:function(){},addPointCloudBox:function(){},setPolygonList:function(){},zoom:1,setZoom:function(){}});t.PointCloudContext=l,t.PointCloudProvider=function(e){var t=e.children,n=r.useState([]),o=a(n,2),s=o[0],u=o[1],d=r.useState([]),h=a(d,2),f=h[0],g=h[1],v=r.useState([]),b=a(v,2),p=b[0],m=b[1],y=r.useState(!0),x=a(y,2),C=x[0],w=x[1],I=r.useState(1),k=a(I,2),L=k[0],P=k[1],S=r.useState(),O=a(S,2),A=O[0],T=O[1],E=r.useState(),D=a(E,2),N=D[0],R=D[1],M=r.useState(),_=a(M,2),j=_[0],B=_[1],H=r.useState(),V=a(H,2),Z=V[0],F=V[1],z=r.useMemo((function(){return 1===p.length?p[0]:""}),[p]),U=r.useMemo((function(){var e=s.find((function(e){return e.id===z})),t=function(e){void 0===e&&m([]),"string"===typeof e&&m([e]),Array.isArray(e)&&m(Array.from(new Set(e)))};return{selectedID:z,pointCloudBoxList:s,selectedIDs:p,setPointCloudResult:u,setSelectedIDs:t,addPointCloudBox:function(e){u(s.concat(e))},valid:C,selectedPointCloudBox:e,setPointCloudValid:function(e){w(!1!==e)},addSelectedID:function(e){p.includes(e)?t(p.filter((function(t){return t!==e}))):t([].concat(i(p),[e]))},selectedAllBoxes:function(){t(s.map((function(e){return e.id})))},topViewInstance:A,setTopViewInstance:T,sideViewInstance:N,setSideViewInstance:R,backViewInstance:j,setBackViewInstance:B,mainViewInstance:Z,setMainViewInstance:F,polygonList:f,setPolygonList:g,zoom:L,setZoom:P}}),[C,p,s,f,A,N,j,Z,L]);return c.default.createElement(l.Provider,{value:U},t)}},,,,function(e,t,n){"use strict";var i,a;Object.defineProperty(t,"__esModule",{value:!0}),t.EStepType=void 0,(i=t.EStepType||(t.EStepType={}))[i.Check=0]="Check",i[i.ANNOTATION=1]="ANNOTATION",i[i.QUALITY_INSPECTION=2]="QUALITY_INSPECTION",i[i.PRE_ANNOTATION=3]="PRE_ANNOTATION",i[i.MANUAL_CORRECTION=4]="MANUAL_CORRECTION",t.ESubmitType=void 0,(a=t.ESubmitType||(t.ESubmitType={}))[a.Backward=1]="Backward",a[a.Forward=2]="Forward",a[a.Jump=3]="Jump",a[a.Quit=4]="Quit",a[a.Export=5]="Export",a[a.StepChanged=6]="StepChanged",a[a.Save=7]="Save";var r="".concat("bee","-component");t.componentCls=r,t.prefix="bee"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(52);t.getClassName=function(e,t,n){return"".concat(i.prefix,"-").concat(e).concat(t?"__"+t:"").concat(n?"__"+n:"")},t.getTargetElement=function(e,t){return e?"function"===typeof e?e():"current"in e?e.current:e:t}},function(e,t,n){"use strict";var i=n(74).default,a=n(75).default,r=n(52),o=n(188),c=function(){function e(){i(this,e)}return a(e,null,[{key:"getCurrentStepInfo",value:function(e,t){var n=this.getStepInfo(e,t);return[r.EStepType.QUALITY_INSPECTION,r.EStepType.MANUAL_CORRECTION].includes(null==n?void 0:n.type)?this.getStepInfo(n.dataSourceStep,t):n}},{key:"getStepInfo",value:function(e,t){return null==t?void 0:t.filter((function(t){return t.step===e}))[0]}},{key:"currentToolIsVideo",value:function(t,n){var i=e.getCurrentStepInfo(t,n);return o.isVideoTool(null==i?void 0:i.tool)}},{key:"currentToolIsPointCloud",value:function(t,n){var i=e.getCurrentStepInfo(t,n);return o.isPointCloudTool(null==i?void 0:i.tool)}}]),e}();e.exports=c},,,function(e,t,n){"use strict";var i=n(131).default,a=n(73).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(65),o=n(115),c=n(52),l=n(187),s=n(387),u=n(46),d=function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(t){a(t)}},o=function(e){try{c(n.throw(e))}catch(t){a(t)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))},h=function(e,t){return t.map((function(t){return e(t)}))},f=function(e){return e===l.EPageTurningOperation.Forward?c.ESubmitType.Forward:e===l.EPageTurningOperation.Backward?c.ESubmitType.Backward:e===l.EPageTurningOperation.Jump?c.ESubmitType.Jump:c.ESubmitType.Forward},g=function(e,t){var n,i,a=e.imgList,r=e.imgIndex,c=o.getStepConfig(e.stepList,e.step).dataSourceStep;return(null==(i=null==(n=u.jsonParser(a[r-1].result)["step_".concat(c)])?void 0:n.result)?void 0:i.length)-1||t};function v(e){var t=e.stepList;return{type:r.ANNOTATION_ACTIONS.SET_TASK_STEP_LIST,payload:{stepList:t}}}function b(e){var t=e.stepList,n=e.step;return{type:r.ANNOTATION_ACTIONS.SET_TASK_CONFIG,payload:{stepList:t,step:n}}}function p(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_ON_SUBMIT,payload:{onSubmit:e}}}function m(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_ON_SAVE,payload:{onSave:e}}}function y(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_ON_PAGE_CHANGE,payload:{onPageChange:e}}}function x(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_ON_STEP_CHANGE,payload:{onStepChange:e}}}function C(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_GET_FILE_DATA,payload:{getFileData:e}}}function w(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_PAGE_SIZE,payload:{pageSize:e}}}function I(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_LOAD_FILE_LIST,payload:{loadFileList:e}}}function k(e){return{type:r.ANNOTATION_ACTIONS.SKIP_BEFORE_PAGE_TURNING,payload:{skipBeforePageTurning:e}}}function L(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_BEFORE_ROTATE,payload:{beforeRotate:e}}}var P=function(e,t){return function(n,i){var a,l,s=i().annotation;null==(a=null==s?void 0:s.onStepChange)||a.call(s,e);var u=null!=(l=null==s?void 0:s.imgIndex)?l:0;return[n({type:r.ANNOTATION_ACTIONS.SUBMIT_RESULT}),n({type:r.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA,payload:{submitType:c.ESubmitType.StepChanged}}),n({type:r.ANNOTATION_ACTIONS.SET_STEP,payload:{toStep:e}}),n({type:r.ANNOTATION_ACTIONS.CALC_STEP_PROGRESS}),n(o.LoadFileAndFileData(null!=t?t:u,0))]}},S=function(e){return function(t){return[t({type:r.ANNOTATION_ACTIONS.SUBMIT_RESULT}),t({type:r.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA,payload:{submitType:e}})]}},O=function(e,t,n,i){return[e(S(n)),e(o.LoadFileAndFileData(t,i))]},A=function(e,t){return[e({type:r.ANNOTATION_ACTIONS.SUBMIT_RESULT}),e({type:r.ANNOTATION_ACTIONS.SET_BASIC_INDEX,payload:{basicIndex:t}})]},T=function(e,t){e({type:r.ANNOTATION_ACTIONS.SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED,payload:{triggerEventAfterIndexChanged:t}})},E=function(e,t,n,o){return d(void 0,null,i().mark((function c(){var l,s,u,d,h,f,g,v;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=t().annotation,u=s.loadFileList,d=s.imgList,h=s.pageSize,f=Math.floor(n/h),N(e,!0),i.prev=3,i.next=6,u(f,h);case 6:if(g=i.sent,N(e,!1),(null==(l=null==g?void 0:g.fileList)?void 0:l.length)&&(null==g?void 0:g.total)){i.next=10;break}throw new Error("fileList and total are required");case 10:return(v=o?new Array(g.total):a(d)).splice.apply(v,[f*h,h].concat(a(g.fileList))),e({type:r.ANNOTATION_ACTIONS.UPDATE_IMG_LIST,payload:{imgList:v}}),i.abrupt("return",!0);case 16:i.prev=16,i.t0=i.catch(3),N(e,!1),console.error(i.t0);case 20:case"end":return i.stop()}}),c,null,[[3,16]])})))},D=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;return d(void 0,null,i().mark((function o(){var l,u,d,h,v,b,p,m,y;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(u=t().annotation,d=s.getNextPageInfo(n,u,r),h=d.fileIndexChanged,v=d.fileIndex,b=d.basicIndexChanged,p=d.basicIndex,m=f(n),T(e,a),!h){i.next=16;break}if(!u.loading){i.next=7;break}return i.abrupt("return");case 7:if(u.imgList[v]){i.next=13;break}return i.next=10,E(e,t,v);case 10:if(i.sent){i.next=13;break}return i.abrupt("return");case 13:return null==(l=u.onPageChange)||l.call(u,v),y=m===c.ESubmitType.Backward?g(t().annotation,p):p,i.abrupt("return",O(e,v,m,y));case 16:if(!b){i.next=18;break}return i.abrupt("return",A(e,p));case 18:return i.abrupt("return",e(S(m)));case 19:case"end":return i.stop()}}),o)})))},N=function(e,t){e({type:r.ANNOTATION_ACTIONS.SET_LOADING,payload:{loading:t}})};t.ChangeSave=function(e){e(S(c.ESubmitType.Save)),e({type:r.ANNOTATION_ACTIONS.SAVE_RESULT})},t.CopyBackWordResult=function(){return{type:r.ANNOTATION_ACTIONS.COPY_BACKWARD_RESULT}},t.DispatcherTurning=D,t.InitTaskData=function(e){var t=e.onSubmit,n=e.onSave,i=e.onPageChange,a=e.onStepChange,o=e.getFileData,c=e.pageSize,l=e.loadFileList,s=e.step,u=e.stepList,d=e.skipBeforePageTurning,f=e.beforeRotate,g=[];return t&&g.push(p(t)),n&&g.push(m(n)),i&&g.push(y(i)),a&&g.push(x(a)),o&&g.push(C(o)),l&&g.push(I(l)),c&&g.push(w(c)),d&&g.push(k(d)),f&&g.push(L(f)),g.push(b({stepList:u,step:s})),g.push({type:r.ANNOTATION_ACTIONS.CALC_STEP_PROGRESS}),g.push({type:r.ANNOTATION_ACTIONS.INIT_TOOL}),function(e){return h(e,g)}},t.PageBackward=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return D(t,n,l.EPageTurningOperation.Backward,e)}},t.PageForward=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return D(t,n,l.EPageTurningOperation.Forward,e)}},t.PageJump=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,i){if(e!==i().imgIndex)return D(n,i,l.EPageTurningOperation.Jump,t,e)}},t.SetAnnotationLoading=N,t.SetPointCloudLoading=function(e,t){e({type:r.ANNOTATION_ACTIONS.SET_LOADING,payload:{loading:t}})},t.SetTaskConfig=b,t.SetTaskStepList=v,t.ToNextStep=function(e){return function(t,n){var i=n().annotation,a=function(e,t){var n,i=null==t?void 0:t.findIndex((function(t){return(null==t?void 0:t.step)===e}));return null==(n=t[i+1])?void 0:n.step}(i.step,i.stepList);return[t(P(a,e))]}},t.ToSubmitFileData=S,t.UpdateBeforeRotate=L,t.UpdateGetFileData=C,t.UpdateGetFileList=I,t.UpdateInjectFunc=function(e){var t=e.onSubmit,n=e.onSave,i=e.onPageChange,a=e.onStepChange,r=e.getFileData,o=e.pageSize,c=e.loadFileList,l=e.stepList,s=e.beforeRotate,u=[];return t&&u.push(p(t)),n&&u.push(m(n)),i&&u.push(y(i)),a&&u.push(x(a)),r&&u.push(C(r)),c&&u.push(I(c)),o&&u.push(w(o)),s&&u.push(L(s)),u.push(v({stepList:l})),function(e){return h(e,u)}},t.UpdateOnPageChange=y,t.UpdateOnSave=m,t.UpdateOnStepChange=x,t.UpdateOnSubmit=p,t.UpdatePageSize=w,t.UpdateProcessingStep=P,t.UpdateRotate=function(){return{type:r.ANNOTATION_ACTIONS.UPDATE_ROTATE}},t.UpdateSkipBeforePageTurning=k,t.UpdateToolInstance=function(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_TOOL_INSTANCE,payload:{toolInstance:e}}},t.loadImgList=E},function(e,t,n){"use strict";var i=n(31).default,a=n(42).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(203),o=n(371),c=n(23),l=n(0),s=n(30),u=n(33),d=n(379),h=n(532),f=n(57),g=n(538),v=n(48),b=n(28);function p(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var m=p(l),y=Object.defineProperty,x=Object.defineProperties,C=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,L=function(e,t,n){return t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},P=h(),S=m.default.forwardRef((function(e,t){var n,r=l.useState(),o=i(r,2),h=o[0],g=o[1];return l.useImperativeHandle(t,(function(){return{toolInstance:h,annotationEngine:P.getState().annotation.annotationEngine,pageBackwardActions:function(){return P.dispatch(f.PageBackward())},pageForwardActions:function(){return P.dispatch(f.PageForward())},pageJump:function(e){var t=~~e-1;P.dispatch(f.PageJump(t))},hello:function(){return alert("hello labelBee!!!")}}}),[h]),m.default.createElement(u.Provider,{store:P,context:b.LabelBeeContext},m.default.createElement(s.I18nextProvider,{i18n:c.i18n},m.default.createElement(v.PointCloudProvider,null,m.default.createElement(d,(n=function(e,t){for(var n in t||(t={}))I.call(t,n)&&L(e,n,t[n]);if(w){var i,r=a(w(t));try{for(r.s();!(i=r.n()).done;)n=i.value,k.call(t,n)&&L(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},e),x(n,C({setToolInstance:g})))))))}));t.AnnotationView=r,t.PointCloudAnnotationView=o,Object.defineProperty(t,"i18n",{enumerable:!0,get:function(){return c.i18n}}),t.VideoTagTool=g.VideoTagTool,t.default=S,t.store=P},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ANNOTATION_ACTIONS={UPDATE_TOOL_INSTANCE:"@@UPDATE_TOOL_INSTANCE",UPDATE_IMG_LIST:"@@UPDATE_IMG_LIST",UPDATE_ANNOTATION_CONFIG:"@@UPDATE_ANNOTATION_CONFIG",LOAD_FILE_DATA:"@@LOAD_FILE_DATA",SUBMIT_FILE_DATA:"@@SUBMIT_FILE_DATA",SET_TASK_CONFIG:"@@SET_TASK_CONFIG",INIT_TOOL:"@@INIT_TOOL",SET_TOOL:"@@SET_TOOL",UPDATE_ON_SUBMIT:"@@UPDATE_ON_SUBMIT",UPDATE_ON_SAVE:"@@UPDATE_ON_SAVE",UPDATE_ON_PAGE_CHANGE:"@@UPDATE_ON_PAGE_CHANGE",UPDATE_ON_STEP_CHANGE:"@@UPDATE_ON_STEP_CHANGE",UPDATE_ROTATE:"@@UPDATE_ROTATE",UPDATE_GET_FILE_DATA:"@@UPDATE_GET_FILE_DATA",UPDATE_PAGE_SIZE:"@@UPDATE_PAGE_SIZE",UPDATE_LOAD_FILE_LIST:"@@UPDATE_LOAD_FILE_LIST",GET_FILE_DATA:"@@GET_FILE_DATA",SET_FILE_DATA:"@@SET_FILE_DATA",COPY_BACKWARD_RESULT:"@@COPY_BACKWARD_RESULT",SET_STEP:"@@SET_STEP",SUBMIT_RESULT:"@@SUBMIT_RESULT",SAVE_RESULT:"@@SAVE_RESULT",SET_BASIC_INDEX:"@@SET_BASIC_INDEX",CALC_STEP_PROGRESS:"@@CALC_STEP_PROGRESS",SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED:"@@SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED",SKIP_BEFORE_PAGE_TURNING:"@@SKIP_BEFORE_PAGE_TURNING",UPDATE_BEFORE_ROTATE:"@@UPDATE_BEFORE_ROTATE",SET_LOADING:"@@SET_LOADING",SET_POINT_CLOUD_LOADING:"@@SET_POINT_CLOUD_LOADING",SET_TASK_STEP_LIST:"@@SET_TASK_STEP_LIST",UPDATE_ANNOTATION_VALID:"@@UPDATE_ANNOTATION_VALID"},t.IMAGE_ATTRIBUTE_ACTIONS={UPDATE_IMG_ATTRIBUTE:"@@UPDATE_IMG_ATTRIBUTE",INIT_IMG_ATTRIBUTE:"@@INIT_IMG_ATTRIBUTE"},t.TOOL_STYLE_ACTIONS={INIT_TOOL_STYLE_CONFIG:"@@INIT_TOOL_STYLE_CONFIG",UPDATE_TOOL_STYLE_CONFIG:"@@UPDATE_TOOL_STYLE_CONFIG"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(47),r=n(48),o=n(32);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=c(a),s=o.cAnnotation.ESortDirection;t.useSingleBox=function(){var e=i.useContext(r.PointCloudContext),t=e.pointCloudBoxList,n=e.setPointCloudResult,a=e.topViewInstance,o=e.backViewInstance,c=e.sideViewInstance,u=e.selectedIDs,d=e.selectedID,h=e.mainViewInstance,f=e.setSelectedIDs,g=i.useMemo((function(){var e=t.findIndex((function(e){return e.id===d}));if(e>-1)return{info:t[e],index:e}}),[d,t]),v=i.useCallback((function(e){(null==g?void 0:g.info)&&(t.splice(g.index,1,l.default.merge(g.info,e)),n(l.default.cloneDeep(t)))}),[d,t]),b=i.useCallback((function(e,i){var a=t.findIndex((function(e){return e.id===i}));a>-1&&(t.splice(a,1,l.default.merge(t[a],e)),n(l.default.cloneDeep(t)))}),[t]),p=i.useCallback((function(e){null==a||a.pointCloud2dOperation.setPolygonValidAndRender(e,!0),null==c||c.pointCloud2dOperation.setPolygonValidAndRender(e,!0),null==o||o.pointCloud2dOperation.setPolygonValidAndRender(e,!0)}),[a,c,o]),m=i.useCallback((function(){if(null==g?void 0:g.info){var e=g.info,t=e.id,n=e.valid;v({valid:!(void 0===n||n)}),p(t)}}),[p,g]),y=i.useCallback((function(e){var n=t.find((function(t){return t.id===e}));if(n){var i=n.id,a=n.valid;b({valid:!(void 0===a||a)},i),p(i)}}),[p,t]),x=i.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.ascend;if(a&&!(u.length>1)){var t=a.pointCloud2dOperation,n=t.switchToNextPolygon(e);n&&f(n)}}),[a]);return{selectedBox:g,updateSelectedBox:v,changeSelectedBoxValid:m,changeBoxValidByID:y,selectNextBox:x,selectPrevBox:function(){x(s.descend)},deletePointCloudBox:function(e){n(t.filter((function(t){return t.id!==e}))),null==h||h.removeObjectByName(e),null==h||h.render()}}}},,,,,,,,,,function(e,t,n){"use strict";var i,a,r;Object.defineProperty(t,"__esModule",{value:!0}),t.EScribblePattern=void 0,(i=t.EScribblePattern||(t.EScribblePattern={}))[i.Scribble=1]="Scribble",i[i.Erase=2]="Erase",t.EToolName=void 0,(a=t.EToolName||(t.EToolName={})).Rect="rectTool",a.Tag="tagTool",a.Point="pointTool",a.PointMarker="pointMarkerTool",a.Segmentation="segmentationTool",a.Filter="filterTool",a.Text="textTool",a.Polygon="polygonTool",a.Line="lineTool",a.LineMarker="lineMarkerTool",a.Empty="emptyTool",a.FolderTag="folderTagTool",a.RectTrack="rectTrackTool",a.ScribbleTool="scribbleTool",a.Face="faceTool",a.ClientAttribute="clientAttributeTool",a.OCRRelation="OCRRelationTool",a.SegmentByRect="segmentByRectTool",t.ETextType=void 0,(r=t.ETextType||(t.ETextType={}))[r.AnyString=0]="AnyString",r[r.Order=1]="Order",r[r.EnglishOnly=2]="EnglishOnly",r[r.NumberOnly=3]="NumberOnly",r[r.CustomFormat=4]="CustomFormat";t.TEXT_ATTRIBUTE_MAX_LENGTH=1e3},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(439),a=n(440),r=n(441),o=n(442),c=n(443),l=n(444),s=n(445),u=n(446),d=n(447),h=n(231),f=n(98),g=n(97),v=n(232),b=n(448),p=n(449),m=n(450),y=n(451),x=n(452),C=n(453),w=n(454),I={name:"Undo",icon:i,shortCut:["Ctrl","Z"]},k={name:"Redo",icon:a,shortCut:["Ctrl","Shift","Z"]},L={name:"Scale",icon:r,shortCut:[o]},P={name:"Fullscreen",icon:c,shortCut:["F11"]},S={name:"Rotate",icon:l,shortCut:["R"],noticeInfo:"ToOriginalStep"},O={name:"ToggleEffectiveness",icon:s,shortCut:["Y"]},A={name:"PreviousImage",icon:u,shortCut:["A"]},T={name:"NextImage",icon:d,shortCut:["D"]},E={name:"Drag",icon:h,shortCut:[f],noticeInfo:"Press"},D={name:"Drag",icon:h,shortCut:["Space",g]},N={name:"ToggleSelected",icon:v,shortCut:["Tab"]},R={name:"ToggleSelectedReverse",icon:b,shortCut:["Shift","Tab"]},M={name:"HideGraphics",icon:y,noticeInfo:"",shortCut:["Z"]},_={name:"ToggleLineParticularity",icon:m,noticeInfo:"ToSide",shortCut:["Shift",g]},j={name:"Save",icon:p,shortCut:["Ctrl","S"]},B={name:"Speed",icon:n(455),shortCut:["&#8593;","&#8595;"],shortCutUseHtml:!0},H={name:"PlayPause",icon:x,shortCut:["Space"]},V={name:"FastForward",icon:C,shortCut:["&#8594;"],shortCutUseHtml:!0},Z={name:"Rewind",icon:w,shortCut:["&#8592;"],shortCutUseHtml:!0};t.backward=A,t.changeSpecialLine=_,t.dargWithLeftClick=D,t.dargWithRightClick=E,t.forward=T,t.forwardForward=V,t.fullScreen=P,t.hidden=M,t.playPause=H,t.restore=k,t.revoke=I,t.rewind=Z,t.rotate=S,t.saveResult=j,t.scale=L,t.setValid=O,t.speed=B,t.tabChangeSelected=N,t.tabReverseChangeSelected=R},,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(92),o=n(53),c=n(389);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=l(r);e.exports=function(e){var t=c((function(){var t,n,i=o.getTargetElement(e);return{width:null!=(t=(i||{}).clientWidth)?t:0,height:null!=(n=(i||{}).clientHeight)?n:0}})),n=i(t,2),r=n[0],l=n[1];return a.useLayoutEffect((function(){var t=o.getTargetElement(e);if(!t)return function(){};var n=new s.default((function(e){e.forEach((function(e){var t,n;l({width:null!=(t=e.target.clientWidth)?t:0,height:null!=(n=e.target.clientHeight)?n:0})}))}));return n.observe(t),function(){n.disconnect()}}),[e]),r}},function(e,t,n){"use strict";var i=n(131).default,a=n(89).default,r=n(73).default,o=n(31).default,c=n(42).default;Object.defineProperty(t,"__esModule",{value:!0});var l=n(32),s=n(23),u=n(0),d=n(48),h=n(66),f=n(47),g=n(28),v=n(54),b=n(46),p=n(57),m=n(29),y=n(30);function x(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var C=x(f),w=Object.defineProperty,I=Object.defineProperties,k=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,O=function(e,t,n){return t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},A=function(e,t){for(var n in t||(t={}))P.call(t,n)&&O(e,n,t[n]);if(L){var i,a=c(L(t));try{for(a.s();!(i=a.n()).done;){n=i.value;S.call(t,n)&&O(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},T=function(e,t){return I(e,k(t))},E="Top",D="Side",N="Back",R=function(e,t){var n=t.width,i=t.height,a=e.x;return{x:i/2-e.y,y:-(a-n/2)}},M=function(e,t,n,i,a){var r=e.pointList.map((function(e){return R(e,t)})),c=o(r,4),s=c[0],u=c[1],d=c[2],h=c[3],f=l.MathUtils.getLineCenterPoint([s,d]),g=l.MathUtils.getLineLength(s,u),v=l.MathUtils.getLineLength(u,d),b=l.MathUtils.getRadiusFromQuadrangle(e.pointList),p=0,m=1,y={};if(n){var x=n.getSensesPointZAxisInPolygon([s,u,d,h]);p=(x.maxZ+x.minZ)/2,m=x.maxZ-x.minZ,y={count:x.zCount}}i&&(p=i.center.z,m=i.depth);var C={center:{x:f.x,y:f.y,z:p},width:v,height:g,depth:m,rotation:b,id:e.id},w=A(i?A(A({},i),C):T(A({},C),{attribute:"",valid:!0}),y);return a&&Object.assign(w,a),w},_=function(e,t,n,i){if(n){var a=n.pointCloud2dOperation,r=n.pointCloudInstance;r.loadPCDFileByBox(i,e,{width:5,depth:5});var o=r.updateOrthoCamera(e,s.EPerspectiveView.Left).cameraPositionVector;r.setInitCameraPosition(o);var c=r.getBoxSidePolygon2DCoordinate(e),l=c.polygon2d,u=c.zoom;r.camera.zoom=u,r.camera.updateProjectionMatrix(),r.render(),a.initPosition(),a.zoomChangeOnCenter(u),a.setResultAndSelectedID([{id:t.id,valid:e.valid,pointList:l,textAttribute:"",isRect:!0}],t.id)}},j=function(e,t,n,i){if(n){var a=n.pointCloud2dOperation,r=n.pointCloudInstance;r.loadPCDFileByBox(i,e,{height:5,depth:5});var o=r.updateOrthoCamera(e,s.EPerspectiveView.Back).cameraPositionVector;r.setInitCameraPosition(o);var c=r.getBoxBackPolygon2DCoordinate(e),l=c.polygon2d,u=c.zoom;r.camera.zoom=u,r.camera.updateProjectionMatrix(),r.render(),a.initPosition(),a.zoomChangeOnCenter(u),a.setResultAndSelectedID([{id:t.id,valid:e.valid,pointList:l,textAttribute:"",isRect:!0}],t.id)}},B=function(e,t,n,i){var a;if(n&&i){i.generateBox(e,t.id),i.updateCameraByBox(e,s.EPerspectiveView.Top),i.render();var o=n.pointCloud2dOperation,c=n.pointCloudInstance.getBoxTopPolygon2DCoordinate(e).polygon2d,l=r(o.polygonList),u=l.find((function(e){return e.id===t.id}));u?u.pointList=c:l.push({id:t.id,pointList:c,textAttribute:"",isRect:!0,valid:null==(a=e.valid)||a}),o.setResultAndSelectedID(l,t.id)}};t.synchronizeBackView=j,t.synchronizeSideView=_,t.synchronizeTopView=B,t.topViewPolygon2PointCloud=M,t.transferCanvas2World=R,t.usePointCloudViews=function(){var e=u.useContext(d.PointCloudContext),t=e.topViewInstance,n=e.sideViewInstance,r=e.backViewInstance,c=e.mainViewInstance,f=e.addPointCloudBox,x=e.setSelectedIDs,w=e.selectedIDs,I=e.pointCloudBoxList,k=e.setPointCloudResult,L=h.useSingleBox().updateSelectedBox,P=g.useSelector((function(e){var t=e.annotation,n=t.stepList,i=t.step;return{currentData:t.imgList[t.imgIndex],config:b.jsonParser(v.getCurrentStepInfo(i,n).config)}})),S=P.currentData,O=P.config,R=g.useDispatch(),H=h.useSingleBox().selectedBox,V=y.useTranslation().t,Z=null==H?void 0:H.info;if(!t||!n)return{topViewAddBox:function(){},topViewSelectedChanged:function(){},sideViewUpdateBox:function(){}};var F=t.pointCloudInstance,z=function(e,t,i){if(Z){var a=function(e,t,n,i){var a=o(e.pointList,3),r=a[0],c=a[1],s=a[2],u=o(t.pointList,3),d=u[0],h=u[1],f=u[2],g=l.MathUtils.getLineCenterPoint([r,s]),v=l.MathUtils.getLineCenterPoint([d,f]),b={x:[g.x-v.x,(g.y,v.y)][0],y:0,z:g.y-v.y},p=l.MathUtils.getLineLength(r,c)-l.MathUtils.getLineLength(d,h),m=l.MathUtils.getLineLength(c,s)-l.MathUtils.getLineLength(h,f);return i.getNewBoxBySideUpdate(b,m,p,n).newBoxParams}(e,t,Z,n.pointCloudInstance);if(c){var r=c.getSensesPointZAxisInPolygon(c.getCuboidFromPointCloudBox(a).polygonPointList,[a.center.z-a.depth/2,a.center.z+a.depth/2]).count;a=T(A({},a),{count:r})}L(a),U(i,e,a)}},U=function(e,i,o){var l,s=null==S?void 0:S.url,u=(a(l={},D,(function(){_(o,i,n,s)})),a(l,N,(function(){r&&j(o,i,r,s)})),a(l,E,(function(){B(o,i,t,c)})),l);Object.keys(u).forEach((function(t){t!==e&&u[t]()})),function(e){null==c||c.generateBox(e),null==c||c.controls.update(),null==c||c.render()}(o),null==c||c.highlightOriginPointCloud(o)};return{topViewAddBox:function(e,n){var i,a,r,o=M(e,n,F,void 0,{attribute:null!=(r=null==(a=null==(i=null==O?void 0:O.attributeList)?void 0:i[0])?void 0:a.value)?r:""}),c=null==t?void 0:t.pointCloud2dOperation,l=o;if((null==O?void 0:O.lowerLimitPointsNumInBox)&&"number"===typeof o.count&&o.count<O.lowerLimitPointsNumInBox)return m.message.info(V("LowerLimitPointsNumInBox",{num:O.lowerLimitPointsNumInBox})),void c.deletePolygon(o.id);c.setSelectedIDs([e.id]),x(l.id),U(E,e,l),f(l)},topViewSelectedChanged:function(){var e=null==H?void 0:H.info,n=null==t?void 0:t.pointCloud2dOperation;if(n.setSelectedIDs(w),e&&n){var i=n.selectedPolygon;U(E,i,e)}},topViewUpdateBox:function(e,n){if(Z){var i=M(e,n,t.pointCloudInstance,Z);Object.assign(Z,C.default.pickBy(i,(function(e,t){return["width","height","x","y"]}))),L(i),U(E,e,Z)}},sideViewUpdateBox:function(e,t){z(e,t,D)},backViewUpdateBox:function(e,t){z(e,t,N)},pointCloudBoxListUpdated:function(e){t.updatePolygonList(e),null==c||c.generateBoxes(e)},clearAllResult:function(){I.forEach((function(e){null==c||c.removeObjectByName(e.id)})),null==c||c.render(),k([]),t.pointCloud2dOperation.clearActiveStatus(),t.pointCloud2dOperation.clearResult()},initPointCloud3d:function(){c&&(c.initPerspectiveCamera(),c.initRenderer(),c.render())},updatePointCloudData:function(){return n=void 0,a=null,r=i().mark((function n(){var a,r,o,l,u,d,h,f,g;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((null==S?void 0:S.url)&&c){n.next=2;break}return n.abrupt("return");case 2:return p.SetPointCloudLoading(R,!0),n.next=5,c.loadPCDFile(S.url,null!=(a=null==O?void 0:O.radius)?a:90);case 5:I.forEach((function(e){null==c||c.removeObjectByName(e.id)})),S.result?(h=s.PointCloudUtils.getBoxParamsFromResultList(S.result),f=s.PointCloudUtils.getPolygonListFromResultList(S.result),h.forEach((function(e){null==c||c.generateBox(e)})),e.setPointCloudResult(h),e.setPolygonList(f)):(e.setPointCloudResult([]),e.setPolygonList([])),c.updateTopCamera(),g=null==(o=null==(r=b.jsonParser(S.result))?void 0:r.valid)||o,e.setPointCloudValid(g),null==(l=e.sideViewInstance)||l.clearAllData(),null==(u=e.backViewInstance)||u.clearAllData(),t.updateData(S.url,S.result,{radius:null!=(d=null==O?void 0:O.radius)?d:90}),p.SetPointCloudLoading(R,!1);case 14:case"end":return n.stop()}}),n)})),new Promise((function(e,t){var i=function(e){try{c(r.next(e))}catch(n){t(n)}},o=function(e){try{c(r.throw(e))}catch(n){t(n)}},c=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(i,o)};c((r=r.apply(n,a)).next())}));var n,a,r}}}},,,,,,function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_mouse_left_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23ff5770%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e9%bc%a0%e6%a0%87%e6%bb%9a%e8%bd%ae'%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.982v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.97-9.7H5.865V0a5.7%2c5.7%2c0%2c0%2c1%2c3.53%2c1.267A3.812%2c3.812%2c0%2c0%2c1%2c10.85%2c4.19V5.98Zm-5.866%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.456%2c1.267%2c5.693%2c5.693%2c0%2c0%2c1%2c4.984%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(-0.698 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_mouse_right_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23ff5770%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e9%bc%a0%e6%a0%87%e6%bb%9a%e8%bd%ae'%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.982v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.97-9.7H5.865V0a5.7%2c5.7%2c0%2c0%2c1%2c3.53%2c1.267A3.812%2c3.812%2c0%2c0%2c1%2c10.85%2c4.19V5.98Zm-5.866%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.456%2c1.267%2c5.693%2c5.693%2c0%2c0%2c1%2c4.984%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(5.302 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3c/g%3e%3c/svg%3e"},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(73).default,a=n(31).default,r=n(131).default,o=n(42).default;Object.defineProperty(t,"__esModule",{value:!0});var c=n(219),l=n(384),s=n(65),u=n(46),d=n(385),h=n(221),f=n(386),g=n(54),v=n(188),b=n(32),p=n(23),m=n(29),y=n(29),x=n(47),C=n(57);function w(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var I=w(x),k=Object.defineProperty,L=Object.defineProperties,P=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,T=function(e,t,n){return t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},E=function(e,t){for(var n in t||(t={}))O.call(t,n)&&T(e,n,t[n]);if(S){var i,a=o(S(t));try{for(a.s();!(i=a.n()).done;){n=i.value;A.call(t,n)&&T(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},D=function(e,t){return L(e,P(t))},N=function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(t){a(t)}},o=function(e){try{c(n.throw(e))}catch(t){a(t)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))},R=function(e,t){return e.find((function(e){return e.step===t}))},M={annotationEngine:null,toolInstance:null,imgList:[],config:"{}",imgIndex:-1,basicIndex:0,imgPageSize:1,step:1,stepList:[],imgNode:new Image,basicResultList:[],resultList:[],stepProgress:0,loading:!1,triggerEventAfterIndexChanged:!1,pointCloudLoading:!1},_=function(e,t){return e.reduce((function(e,n){if(n){var i=n.result;if(u.jsonParser(i)["step_".concat(t)])return e+1}return e}),0)/e.length},j=function(e,t){var n=e.step,i=e.stepList,a=g.getCurrentStepInfo(n,i),r=h.ConfigUtils.jsonParser(a.config);if(!v.isVideoTool(null==a?void 0:a.tool)&&!v.isPointCloudTool(null==a?void 0:a.tool)){var o=document.getElementById("toolContainer");if(!o)throw"Not exist dom named id-toolContainer";var s=c.getFormatSize({width:window.innerWidth,height:window.innerHeight}),u=new b.AnnotationEngine({container:o,toolName:a.tool,size:s,imgNode:t,config:r,style:JSON.parse(l)});return{toolInstance:null==u?void 0:u.toolInstance,annotationEngine:u}}},B=function(e){return function(t,n){return N(void 0,null,r().mark((function i(){var a,o,c,l;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=n().annotation,o=a.getFileData,c=a.imgList,!o){i.next=6;break}return i.next=4,o(c[e],e);case 4:l=i.sent,t({type:s.ANNOTATION_ACTIONS.SET_FILE_DATA,payload:{fileData:l,index:e}});case 6:case"end":return i.stop()}}),i)})))}},H=function(e){return function(t){C.SetAnnotationLoading(t,!1),t({type:s.ANNOTATION_ACTIONS.LOAD_FILE_DATA,payload:{nextIndex:e}})}},V=function(e,t){return function(n,i){var a,r=i().annotation,o=r.toolInstance,c=r.imgList,l=null==(a=null==c?void 0:c[e])?void 0:a.url;b.ImgUtils.load(l).then((function(i){C.SetAnnotationLoading(n,!1),n({type:s.ANNOTATION_ACTIONS.LOAD_FILE_DATA,payload:{imgNode:i,nextIndex:e,nextBasicIndex:t}})})).catch((function(){C.SetAnnotationLoading(n,!1),null==o||o.setErrorImg(),n({type:s.ANNOTATION_ACTIONS.LOAD_FILE_DATA,payload:{nextIndex:e,nextBasicIndex:t}})}))}};t.LoadFileAndFileData=function(e,t){return function(n,i){return N(void 0,null,r().mark((function a(){var o,c,l,s,u;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=i().annotation,c=o.stepList,l=o.step,s=g.currentToolIsVideo(l,c),u=g.currentToolIsPointCloud(l,c),C.SetAnnotationLoading(n,!0),a.next=6,n(B(e));case 6:if(!s&&!u){a.next=9;break}return n(H(e)),a.abrupt("return");case 9:n(V(e,t));case 10:case"end":return a.stop()}}),a)})))}},t.annotationReducer=function(){var e,t,n,r,o,c,l,h,v,x,C,w,k,L,P,S,O,A,T,N,B,H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,V=arguments.length>1?arguments[1]:void 0;switch(V.type){case s.ANNOTATION_ACTIONS.UPDATE_TOOL_INSTANCE:return D(E({},H),{toolInstance:V.payload.toolInstance});case s.ANNOTATION_ACTIONS.UPDATE_IMG_LIST:return D(E({},H),{imgList:V.payload.imgList});case s.ANNOTATION_ACTIONS.CALC_STEP_PROGRESS:var Z=H.imgList,F=H.step,z=_(Z,F);return D(E({},H),{stepProgress:z});case s.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA:var U=H.imgList,G=H.imgIndex,W=H.step,K=H.stepList,Y=H.toolInstance,X=H.onSubmit,J=H.resultList;if(!Y||!U[G])return H;var Q=(null==(e=U[G])?void 0:e.result)||"",q=null!=(t=null==Y?void 0:Y.exportData())?t:[],$=a(q,3),ee=$[1],te=$[2],ne=null!=(r=null==(n=null==Y?void 0:Y.exportCustomData)?void 0:n.call(Y))?r:{},ie=f.composeResultWithBasicImgInfo(Q,ee),ae=f.composeResult(ie,{step:W,stepList:K},{rect:J},ne);U[G].result=d.dataCorrection(ae,Q,W,K),te&&(U[G]=E(E({},U[G]),te)),X&&X([U[G]],null==(o=V.payload)?void 0:o.submitType,G);var re=_(U,W);return D(E({},H),{stepProgress:re,imgList:U});case s.ANNOTATION_ACTIONS.SAVE_RESULT:var oe=H.imgList,ce=H.imgIndex,le=H.onSave;return null==le||le(oe[ce],ce,oe),E({},H);case s.ANNOTATION_ACTIONS.SUBMIT_RESULT:var se=H.imgList,ue=H.basicIndex,de=H.resultList,he=H.toolInstance,fe=H.basicResultList;if(!he)return H;var ge=null!=(c=null==he?void 0:he.exportData())?c:[],ve=a(ge,1),be=ve[0],pe=be;if((null==fe?void 0:fe.length)>0){var me,ye=null==(l=fe[ue])?void 0:l.id,xe=be.map((function(e){return D(E({},e),{sourceID:ye})}));(me=pe=I.default.cloneDeep(de).filter((function(e){return e.sourceID!==ye}))).push.apply(me,i(xe))}return D(E({},H),{resultList:pe,imgList:se});case s.ANNOTATION_ACTIONS.SET_BASIC_INDEX:var Ce=H.toolInstance,we=H.step,Ie=H.imgList,ke=H.imgIndex,Le=H.stepList,Pe=H.annotationEngine,Se=H.resultList,Oe=H.basicResultList;if(!Ce||!Pe)return H;var Ae=V.payload.basicIndex,Te=null==(h=Oe[Ae])?void 0:h.id,Ee=u.jsonParser(null==(v=Ie[ke])?void 0:v.result),De=(Se||[]).filter((function(e){return e.sourceID===Te})),Ne=R(Le,we),Re=Ne.dataSourceStep,Me=Ne.tool,_e=R(Le,Re),je=[];return Re&&Me&&((null==(je=null==(x=Ee["step_".concat(Re)])?void 0:x.result)?void 0:je.length)>0?(null==Pe||Pe.setBasicInfo(_e.tool,je[Ae]),null==Pe||Pe.launchOperation()):(null==Pe||Pe.setBasicInfo(_e.tool),null==Pe||Pe.forbidOperation(),y.message.info(p.i18n.t("NoDependency")))),null==Ce||Ce.setResult(De),null==Ce||Ce.history.initRecord(De,!0),D(E({},H),{basicIndex:Ae});case s.ANNOTATION_ACTIONS.SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED:var Be=V.payload.triggerEventAfterIndexChanged;return D(E({},H),{triggerEventAfterIndexChanged:!!Be});case s.ANNOTATION_ACTIONS.LOAD_FILE_DATA:var He=H.imgList,Ve=H.step,Ze=H.toolInstance,Fe=H.annotationEngine,ze=H.stepList;if(!Ze)return D(E({},H),{imgIndex:V.payload.nextIndex});var Ue=g.getCurrentStepInfo(Ve,ze),Ge=V.payload,We=Ge.nextIndex,Ke=Ge.imgNode,Ye=Ge.nextBasicIndex,Xe=Ge.imgError,Je=null!=Ye?Ye:0,Qe=u.jsonParser(null==(C=He[We])?void 0:C.result),qe=Qe["step_".concat(Ue.step)],$e=!qe,et={rotate:null!=(w=Qe.rotate)?w:0,valid:null==(k=Qe.valid)||k};Ke&&!0!==Xe?null==Fe||Fe.setImgNode(Ke,et):null==Ze||Ze.setValid(et.valid);var tt=R(ze,Ue.step),nt=tt.dataSourceStep,it=tt.tool,at=R(ze,nt),rt=nt&&it,ot=null!=(P=null==(L=Qe["step_".concat(nt)])?void 0:L.result)?P:[],ct=d.getInitialResultList(null==qe?void 0:qe.result,Ze,tt,ot,$e);if(null==Fe||Fe.launchOperation(),rt&&((null==ot?void 0:ot.length)>0?null==Fe||Fe.setBasicInfo(at.tool,ot[Je]):(null==Fe||Fe.setBasicInfo(at.tool),null==Fe||Fe.forbidOperation(),y.message.info(p.i18n.t("NoDependency")))),"check"!==Ue.tool){var lt=null!=(O=null==(S=ot[Je])?void 0:S.id)?O:"",st=rt?ct.filter((function(e){return b.CommonToolUtils.isSameSourceID(e.sourceID,lt)})):ct;null==Ze||Ze.history.initRecord(ct,!0),null==Ze||Ze.setResult(st)}return D(E({},H),{imgIndex:We,basicIndex:Je,basicResultList:ot,resultList:ct});case s.ANNOTATION_ACTIONS.UPDATE_ANNOTATION_CONFIG:return D(E({},H),{config:null!=(A=V.payload.config)?A:"{}"});case s.ANNOTATION_ACTIONS.SET_TASK_STEP_LIST:var ut=V.payload.stepList;return D(E({},H),{stepList:ut});case s.ANNOTATION_ACTIONS.SET_TASK_CONFIG:var dt=V.payload,ht=dt.stepList,ft=dt.step;return D(E({},H),{stepList:ht,step:ft});case s.ANNOTATION_ACTIONS.INIT_TOOL:var gt=H.imgNode,vt=j(H,gt);if(vt){var bt=vt.toolInstance,pt=vt.annotationEngine;return D(E({},H),{toolInstance:bt,annotationEngine:pt})}return E({},H);case s.ANNOTATION_ACTIONS.SET_TOOL:var mt=null==(T=V.payload)?void 0:T.instance;return mt?D(E({},H),{toolInstance:mt}):E({},H);case s.ANNOTATION_ACTIONS.UPDATE_ON_SUBMIT:return D(E({},H),{onSubmit:V.payload.onSubmit});case s.ANNOTATION_ACTIONS.UPDATE_ON_SAVE:return D(E({},H),{onSave:V.payload.onSave});case s.ANNOTATION_ACTIONS.UPDATE_ON_PAGE_CHANGE:return D(E({},H),{onPageChange:V.payload.onPageChange});case s.ANNOTATION_ACTIONS.UPDATE_ON_STEP_CHANGE:return D(E({},H),{onStepChange:V.payload.onStepChange});case s.ANNOTATION_ACTIONS.UPDATE_GET_FILE_DATA:return D(E({},H),{getFileData:V.payload.getFileData});case s.ANNOTATION_ACTIONS.UPDATE_PAGE_SIZE:return D(E({},H),{pageSize:V.payload.pageSize});case s.ANNOTATION_ACTIONS.UPDATE_LOAD_FILE_LIST:return D(E({},H),{loadFileList:V.payload.loadFileList});case s.ANNOTATION_ACTIONS.UPDATE_BEFORE_ROTATE:return D(E({},H),{beforeRotate:V.payload.beforeRotate});case s.ANNOTATION_ACTIONS.SKIP_BEFORE_PAGE_TURNING:return D(E({},H),{skipBeforePageTurning:V.payload.skipBeforePageTurning});case s.ANNOTATION_ACTIONS.SET_FILE_DATA:var yt=V.payload,xt=yt.fileData,Ct=yt.index,wt=H.imgList,It=i(wt);return It[Ct]=E(E({},It[Ct]),xt),D(E({},H),{imgList:It});case s.ANNOTATION_ACTIONS.UPDATE_ROTATE:var kt=H.toolInstance,Lt=H.beforeRotate;return Lt&&!1===Lt()||(null==kt||kt.updateRotate()),H;case s.ANNOTATION_ACTIONS.UPDATE_ANNOTATION_VALID:var Pt=H.toolInstance,St=null==(N=null==Pt?void 0:Pt.valid)||N;return m.Modal.destroyAll(),m.Modal.confirm({content:p.i18n.t(St?"updateValidFromValidToInValid":"updateValidFromInValidToValid"),onOk:function(){null==Pt||Pt.setValid(!St)},okText:p.i18n.t("Confirm"),cancelText:p.i18n.t("Cancel")}),H;case s.ANNOTATION_ACTIONS.COPY_BACKWARD_RESULT:var Ot=H.toolInstance,At=H.imgIndex,Tt=H.imgList,Et=H.step;if(!Ot)return H;if(0===At||At>=Tt.length)return console.error("\u65e0\u6cd5\u590d\u5236\u8fb9\u754c\u5916\u7684\u5185\u5bb9"),H;var Dt=Tt[At-1].result;if(!Dt)return H;var Nt=d.copyResultChange(Dt,Et,null!=(B=Tt[At].result)?B:"");Tt[At]=D(E({},Tt[At]),{result:Nt});var Rt=u.jsonParser(Nt),Mt=Rt["step_".concat(Et)],_t=(null==Mt?void 0:Mt.result)||[];return null==Ot||Ot.setResult(_t),null==Ot||Ot.history.pushHistory(_t),D(E({},H),{imgList:i(Tt)});case s.ANNOTATION_ACTIONS.SET_STEP:var jt=H.stepList,Bt=H.annotationEngine,Ht=V.payload.toStep;if(!Bt)return H;var Vt=R(jt,Ht);return null==Bt||Bt.setToolName(Vt.tool,Vt.config),D(E({},H),{step:Ht,toolInstance:null==Bt?void 0:Bt.toolInstance});case s.ANNOTATION_ACTIONS.SET_LOADING:var Zt=V.payload.loading;return D(E({},H),{loading:!!Zt});case s.ANNOTATION_ACTIONS.SET_POINT_CLOUD_LOADING:var Ft=V.payload.pointCloudLoading;return D(E({},H),{pointCloudLoading:!!Ft});default:return H}},t.getStepConfig=R,t.getTotalPage=function(e){var t=e.imgList,n=e.imgPageSize;return Math.ceil(t.length/n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(53),a=n(5),r=n(0);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=o(a),l=o(r);t.PointCloudContainer=function(e){var t=e.title,n=e.toolbar,a=e.children,r=e.className,o=e.style;return l.default.createElement("div",{className:c.default([r,i.getClassName("point-cloud-container")]),style:o},l.default.createElement("div",{className:i.getClassName("point-cloud-container","header")},l.default.createElement("span",{className:i.getClassName("point-cloud-container","header-title")},t),n&&l.default.createElement("div",{className:i.getClassName("point-cloud-container","header-toolbar")},n)),a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.aMapStateToProps=function(e){var t,n=e.annotation;return{currentData:null!=(t=n.imgList[n.imgIndex])?t:{}}}},,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(52),a=n(57),r=n(115),o=n(29),c=n(0),l=n(30),s=n(33),u=n(28),d=n(431),h=n(488),f=n(489),g=n(237),v=n(238),b=n(32);function p(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var m=p(c),y=b.cTool.EPointCloudName,x="".concat(i.prefix,"-footer"),C=function(){return m.default.createElement(o.Divider,{type:"vertical",style:{background:"rgba(153, 153, 153, 1)",height:"16px"}})},w=function(e){var t=e.footerTips,n=e.hiddenTips,i=e.pageNumber,a=e.pagination,r=e.zoomController,o=e.curItems,c=e.footerDivider;return m.default.createElement(m.default.Fragment,null,t,m.default.createElement("div",{style:{flex:1}}),n,i,a,o,c,r)},I=s.connect((function(e){return{totalPage:r.getTotalPage(e.annotation),imgIndex:e.annotation.imgIndex,stepList:e.annotation.stepList,step:e.annotation.step,basicIndex:e.annotation.basicIndex,basicResultList:e.annotation.basicResultList,skipBeforePageTurning:e.annotation.skipBeforePageTurning}}),null,null,{context:u.LabelBeeContext})((function(e){var t,n=e.stepList,i=e.step,r=e.basicResultList,o=e.basicIndex,c=e.mode,s=void 0===c?"light":c,b=e.footer,p=void 0===b?w:b,I=e.skipBeforePageTurning,k=u.useDispatch(),L=l.useTranslation().t,P=null!=(t=n[i-1])?t:{},S=!!P.dataSourceStep,O=m.default.createElement(v.Pagination,{imgIndex:e.imgIndex,totalPage:e.totalPage,pageJump:function(e){var t=~~e-1;I?I((function(){return k(a.PageJump(t))})):k(a.PageJump(t))},pageBackward:function(){I?I((function(){return k(a.PageBackward())})):k(a.PageBackward())},pageForward:function(){I?I((function(){return k(a.PageForward())})):k(a.PageForward())},footerCls:x}),A=S&&r.length>0?m.default.createElement("span",null,L("curItems",{current:o+1,total:r.length})):null;return"function"===typeof p?p===w&&P.tool===y.PointCloud?m.default.createElement("div",{className:"".concat(x),style:e.style},m.default.createElement(d,null),m.default.createElement("div",{style:{flex:1}}),O):m.default.createElement("div",{className:"".concat(x),style:e.style},p({footerTips:m.default.createElement(d,null),hiddenTips:m.default.createElement(h,null),pageNumber:m.default.createElement(f,null),pagination:O,zoomController:m.default.createElement(g.default,{mode:s}),curItems:A,footerDivider:m.default.createElement(C,null)})):p}));t.FooterDivider=C,t.default=I,t.footerCls=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){var i=n.find((function(t){return t.value===e})),a=i.subSelected.find((function(e){return e.value===t}));return{keyLabel:i.key,valueLabel:a.key}},a=function(e,t){return e.sort((function(e,n){return t.findIndex((function(t){return e===t.value}))-t.findIndex((function(e){return n===e.value}))}))},r=function(e,t,n,a){e.forEach((function(e){var r=i(t,e,n),o=r.keyLabel,c=r.valueLabel,l=a.find((function(e){return e.keyLabel===o}));l?l.valuesLabelArray.push(c):a.push({keyLabel:o,valuesLabelArray:[c]})}))};t.decimalReserved=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"number"===typeof e?parseFloat(e.toFixed(t)):e},t.findTagLabel=i,t.getKeyCodeNumber=function(e){return e<=57&&e>=49?e-48:e<=105&&e>=97?e-96:0},t.result2LabelKey=function(e,t){var n;try{return null!=(n=null==e?void 0:e.reduce((function(e,n){return a(Object.keys(n.result),t).forEach((function(i){var a,o=null==(a=n.result[i])?void 0:a.split(";");r(o,i,t,e)})),e}),[]))?n:[]}catch(i){return[]}},t.tagsSortThruInputList=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a,r,o;t.EStepType=void 0,(i=t.EStepType||(t.EStepType={}))[i.ANNOTATION=1]="ANNOTATION",i[i.QUALITY_INSPECTION=2]="QUALITY_INSPECTION",i[i.PRE_ANNOTATION=3]="PRE_ANNOTATION",i[i.MANUAL_CORRECTION=4]="MANUAL_CORRECTION",t.EPageTurningOperation=void 0,(a=t.EPageTurningOperation||(t.EPageTurningOperation={}))[a.Backward=0]="Backward",a[a.Forward=1]="Forward",a[a.Jump=2]="Jump",t.EDragStatus=void 0,(r=t.EDragStatus||(t.EDragStatus={}))[r.Start=0]="Start",r[r.Stop=1]="Stop",r[r.Wait=2]="Wait",t.EDragTarget=void 0,(o=t.EDragTarget||(t.EDragTarget={}))[o.Point=0]="Point",o[o.Line=1]="Line",o[o.Plane=2]="Plane",t.editStepWidth=320,t.footerHeight=40,t.headerHeight=61,t.sidebarWidth=240},function(e,t,n){"use strict";var i=n(74).default,a=n(75).default,r=n(32).cTool,o=r.EVideoToolName,c=r.EPointCloudName,l=function(){function e(){i(this,e)}return a(e,null,[{key:"isVideoTool",value:function(e){return!!e&&Object.values(o).includes(e)}},{key:"isPointCloudTool",value:function(e){return!!e&&Object.values(c).includes(e)}}]),e}();e.exports=l},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12.004' height='11.999' viewBox='0 0 12.004 11.999'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='icon_clearSmall_a' class='cls-1' d='M17526.469-1204.464l-.678-.678%2c1.752-1.751a.489.489%2c0%2c0%2c0-.006-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-1.039-1.043%2c1.752-1.751a.484.484%2c0%2c0%2c0%2c0-.691.489.489%2c0%2c0%2c0-.7%2c0l-1.752%2c1.751-1.037-1.038%2c1.75-1.756a.484.484%2c0%2c0%2c0%2c0-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-.682-.678a1%2c1%2c0%2c0%2c1%2c0-1.417l3.1-3.1a.972.972%2c0%2c0%2c1%2c0-1.384.981.981%2c0%2c0%2c1%2c1.387%2c0l2.422%2c2.422%2c1.736-1.732a1.47%2c1.47%2c0%2c0%2c1%2c2.076%2c0%2c1.476%2c1.476%2c0%2c0%2c1%2c0%2c2.081l-1.73%2c1.731%2c2.426%2c2.427a.98.98%2c0%2c0%2c1%2c0%2c1.386.985.985%2c0%2c0%2c1-1.391%2c0l-3.1%2c3.1a.989.989%2c0%2c0%2c1-.707.294A.987.987%2c0%2c0%2c1%2c17526.469-1204.464Z' transform='translate(-17520.656 1216.17)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12.004' height='11.999' viewBox='0 0 12.004 11.999'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23999%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='icon_clearSmall' class='cls-1' d='M17526.469-1204.464l-.678-.678%2c1.752-1.751a.489.489%2c0%2c0%2c0-.006-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-1.039-1.043%2c1.752-1.751a.484.484%2c0%2c0%2c0%2c0-.691.489.489%2c0%2c0%2c0-.7%2c0l-1.752%2c1.751-1.037-1.038%2c1.75-1.756a.484.484%2c0%2c0%2c0%2c0-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-.682-.678a1%2c1%2c0%2c0%2c1%2c0-1.417l3.1-3.1a.972.972%2c0%2c0%2c1%2c0-1.384.981.981%2c0%2c0%2c1%2c1.387%2c0l2.422%2c2.422%2c1.736-1.732a1.47%2c1.47%2c0%2c0%2c1%2c2.076%2c0%2c1.476%2c1.476%2c0%2c0%2c1%2c0%2c2.081l-1.73%2c1.731%2c2.426%2c2.427a.98.98%2c0%2c0%2c1%2c0%2c1.386.985.985%2c0%2c0%2c1-1.391%2c0l-3.1%2c3.1a.989.989%2c0%2c0%2c1-.707.294A.987.987%2c0%2c0%2c1%2c17526.469-1204.464Z' transform='translate(-17520.656 1216.17)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BORDER_OPACITY_LEVEL={1:.2,3:.4,5:.6,7:.8,9:1},t.CHANGE_COLOR={1:{valid:"rgba(0, 0, 255, 0.5)",select:{stroke:"rgba(0, 15, 255, 1)",fill:"rgba(0,15,255, 1)"},hover:"rgba(0, 15, 255, 0.8)",line:"rgba(102, 111, 255, 1 )"},3:{valid:"rgba(0, 255, 255, 0.5)",select:{stroke:"rgba(0, 212, 255,  1)",fill:"rgba(0,212,255, 1)"},hover:"rgba(0, 212, 255, 0.8)",line:"rgba(102, 230, 255, 1)"},5:{valid:"rgba(0, 255, 0, 0.5)",select:{stroke:"rgba(149, 255, 1)",fill:"rgba(149,255,0, 1)"},hover:"rgba(149, 255, 0, 0.8)",line:"rgba(191, 255, 102, 1)"},7:{valid:"rgba(255, 255, 0, 0.5)",select:{stroke:"rgba(255, 230, 102, 1)",fill:"rgba(255,213,0, 1)"},hover:"rgba(255, 230, 102, 0.8)",line:"rgba(255, 230, 102, 1)"},9:{valid:"rgba(255, 0, 255, 0.5)",select:{stroke:"rgba(230, 102, 255, 1)",fill:"rgba(213,0,255, 1)"},hover:"rgba(230, 102, 255, 0.8)",line:"rgba(230, 102, 255, 1)"}},t.COLORS_ARRAY=["rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"],t.DEFAULT_COLOR={valid:{stroke:"rgba(102, 111, 255, 0.6)",fill:"rgba(102, 111, 255, 0.3)"},invalid:{stroke:"rgba(255, 153, 102,1)",fill:"rgba(255, 153, 102, 0.5)"},validSelected:{stroke:"rgba(0, 15, 255, 0.8)",fill:"rgba(0, 15, 255, 0.4)"},invalidSelected:{stroke:"rgba(255,153,102,0.8)",fill:"rgba(255,153,102,0.3)"},validHover:{stroke:"rgba(0, 15, 255, 1)",fill:"rgba(0, 15, 255, 0.5)"},invalidHover:{stroke:"rgba(255,153,102,1)",fill:"rgba(255,153,102,0.5)"}},t.FILL_OPACITY_LEVEL={1:0,3:.2,5:.4,7:.6,9:.8},t.NULL_COLOR="rgba(204, 204, 204, 1)"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_279' data-name='%e8%b7%af%e5%be%84 279' class='cls-1' d='M11.345-10.437H8.754c0-.488-.379-1.077-.848-1.077H4.94c-.468%2c0-.848.589-.848%2c1.077H1.5c-.572%2c0-1.2.085-1.2.658v.886H12.248v-.886C12.248-10.352%2c11.917-10.437%2c11.345-10.437ZM1.357-7.857V.582a2.019%2c2.019%2c0%2c0%2c0%2c1.7%2c1.9H9.79c.859%2c0%2c1.421-1.046%2c1.421-1.9V-7.857ZM4.186.758H3.15V-6.709H4.186Zm2.6%2c0H5.747V-6.709H6.783Zm2.6%2c0H8.344V-6.709H9.38Z' transform='translate(-0.3 11.514)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_del_kj' transform='translate(0.7 10.514)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_95' data-name='%e7%9f%a9%e5%bd%a2 95' class='cls-1' width='16' height='16' transform='translate(-0.7 -10.514)'/%3e %3cg id='%e7%bb%84_481' data-name='%e7%bb%84 481' class='cls-2' transform='translate(1.3 -9.514)'%3e %3cpath id='%e8%b7%af%e5%be%84_278' data-name='%e8%b7%af%e5%be%84 278' class='cls-3' d='M-4.7-16.514H19.956V10.194H-4.7Z' transform='translate(-1.654 10.16)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(23),r=n(0),o=n(48),c=n(32),l=n(66),s=n(30);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var d=u(r);t.BoxInfos=function(){var e=d.default.useContext(o.PointCloudContext),t=l.useSingleBox().selectedBox,n=r.useState([]),u=i(n,2),h=u[0],f=u[1],g=s.useTranslation(),v=g.t,b=g.i18n;return r.useEffect((function(){var n;if(t){var i=a.PointCloudUtils.transferBox2Kitti(t.info),r=i.length,o=i.width,l=i.height,s=i.rotation_y,u=[{label:v("Length"),value:r.toFixed(2)},{label:v("Width"),value:o.toFixed(2)},{label:v("Height"),value:l.toFixed(2)},{label:v("Rotation_y"),value:c.UnitUtils.rad2deg(s).toFixed(2)}];null==(n=e.mainViewInstance)||n.filterPointsByBox(t.info).then((function(e){e?(u.push({label:v("PointCount"),value:"".concat(e.num)}),f(u)):f(u)}))}}),[t,b.language]),t?d.default.createElement("div",{style:{position:"absolute",color:"white",backgroundColor:"rgba(153, 153, 153, 0.3)",right:8,top:8,fontSize:12,padding:8,zIndex:20}},h.map((function(e){return d.default.createElement("div",{key:e.label},"".concat(e.label,": ").concat(e.value))}))):null},t.PointCloudValidity=function(){var e=d.default.useContext(o.PointCloudContext),t=s.useTranslation().t;return!1===e.valid?d.default.createElement("div",{style:{position:"absolute",backgroundColor:"rgb(242, 101, 73)",color:"white",left:0,top:0,fontSize:20,padding:"8px 16px",zIndex:20}},t("Invalid")):null},t.SizeInfoForView=function(e){var t=e.perspectiveView,n=d.default.useContext(o.PointCloudContext),i=n.pointCloudBoxList,r=n.selectedID,c=i.find((function(e){return e.id===r})),l=s.useTranslation().t;if(r&&c){var u=a.PointCloudUtils.transferBox2Kitti(c),h=u.length,f=u.width,g=u.height,v=t===a.EPerspectiveView.Back?[{label:l("Width"),value:f},{label:l("Height"),value:g}]:[{label:l("Length"),value:h},{label:l("Height"),value:g}];return d.default.createElement(d.default.Fragment,null,v.map((function(e,t){return d.default.createElement("span",{key:t,style:{marginRight:0===t?16:0,fontSize:12}},"".concat(e.label,": ").concat(e.value.toFixed(2)))})))}return null}},,,,,,,,,,function(e,t,n){"use strict";var i=n(31).default,a=n(42).default,r=n(0),o=n(32),c=n(29),l=n(370);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(r),d=Object.defineProperty,h=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=function(e,t,n){return t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},b=function(e,t){for(var n in t||(t={}))f.call(t,n)&&v(e,n,t[n]);if(h){var i,r=a(h(t));try{for(r.s();!(i=r.n()).done;){n=i.value;g.call(t,n)&&v(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e},p={width:500,height:100},m=u.default.forwardRef((function(e,t){var n,a,s=e.src,d=e.annotations,h=void 0===d?[]:d,f=e.style,g=void 0===f?{stroke:"blue",thickness:3}:f,v=e.zoomChange,m=e.backgroundStyle,y=void 0===m?{}:m,x=e.onChange,C=e.showLoading,w=void 0!==C&&C,I=e.globalStyle,k=e.afterImgOnLoad,L=function(e){if(!e)return p;if(e.width&&e.height)return e;var t=b({},e);return t.width||(t.width=p.width),t.height||(t.height=p.height),t}(e.size),P=r.useState(!1),S=i(P,2),O=S[0],A=S[1],T=r.useRef(null),E=r.useRef(),D=l(k);r.useImperativeHandle(t,(function(){var e=E.current;return e?{zoomIn:function(){return e.zoomChanged(!0)},zoomOut:function(){return e.zoomChanged(!1)},initImgPos:function(){return e.initImgPos()},toolInstance:e}:{}}),[E.current]),r.useEffect((function(){return T.current&&(E.current=new o.ViewOperation({container:T.current,size:L,style:g,annotations:h,config:"{}"}),E.current.init()),function(){var e;null==(e=E.current)||e.destroy()}}),[]),r.useEffect((function(){var e;E.current&&(A(!0),null==(e=E.current)||e.setLoading(!0),o.ImgUtils.load(s).then((function(e){var t,n;null==(t=E.current)||t.setLoading(!1),A(!1),null==(n=E.current)||n.setImgNode(e),D.current&&D.current(e)})).catch((function(){var e;null==(e=E.current)||e.setLoading(!1),A(!1)})))}),[s]),r.useEffect((function(){E.current&&E.current.updateData(h)}),[h]),r.useEffect((function(){var e=E.current;(null==e?void 0:e.setSize)&&(e.setSize(L),e.initPosition())}),[null==(n=e.size)?void 0:n.width,null==(a=e.size)?void 0:a.height]),r.useEffect((function(){var e,t;return E.current&&(null==(e=E.current)||e.on("onChange",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==x||x.apply(null,t)})),null==(t=E.current)||t.on("renderZoom",(function(e){v&&v(e)}))),function(){var e,t;null==(e=E.current)||e.unbindAll("onChange"),null==(t=E.current)||t.unbindAll("renderZoom")}}),[v,x]);var N=u.default.createElement("div",{ref:T,style:b(b({position:"relative"},L),y)});return u.default.createElement(c.Spin,{spinning:w||O,delay:300,style:I},N)}));e.exports=m},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(187),r=n(32),o=n(0),c=n(33),l=n(57),s=n(29),u=n(28);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(o),f=r.cKeyCode.default,g=h.default.createContext({width:window.innerWidth,height:window.innerHeight}),v=function(e){var t=e.children,n=e.dispatch,a=e.annotation.skipBeforePageTurning,c=o.useState(window.innerWidth),u=i(c,1)[0],d=o.useState(window.innerHeight),v=i(d,1)[0],b=function(t){var i;if(r.toolUtils.hotkeyFilter(t)){if(!t.shiftKey&&!t.ctrlKey){if(t.keyCode===f.A){if(a)return void a((function(){return n(l.PageBackward())}));n(l.PageBackward())}if(t.keyCode===f.D){if(a)return void a((function(){return n(l.PageForward())}));n(l.PageForward())}t.keyCode===f.R&&n(l.UpdateRotate()),t.keyCode===f.C&&!0===t.altKey&&n(l.CopyBackWordResult())}if(!0===t.shiftKey&&!0===t.ctrlKey&&!0===t.altKey&&t.keyCode===f.C){s.message.success("DEVELOPMENT TESTING - Switch Last Two Canvas");var o=null==(i=e.annotation)?void 0:i.annotationEngine.switchLastTwoCanvas();if(!o)return;n(l.UpdateToolInstance(o))}}};o.useEffect((function(){return window.addEventListener("keydown",b),function(){window.removeEventListener("keydown",b)}}),[e.annotation.annotationEngine,e.annotation.skipBeforePageTurning]);var p=o.useMemo((function(){return{width:u,height:v}}),[u,v]);return h.default.createElement(g.Provider,{value:p},t)},b=c.connect((function(e){return{annotation:e.annotation}}),null,null,{context:u.LabelBeeContext})(v);t.ViewportProvider=b,t.ViewportProviderComponent=v,t.getFormatSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.width,r=e.height,o=a.headerHeight+a.footerHeight,c=n?40+o+40:o,l=t?a.editStepWidth+a.sidebarWidth:a.sidebarWidth;return{width:i-l,height:r-c}},t.viewportContext=g},,function(e,t,n){"use strict";var i=n(74).default,a=n(75).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(47),o=function(){function e(){i(this,e)}return a(e,null,[{key:"jsonParser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return"string"===typeof e?JSON.parse(e):r.isObject(e)?e:t}catch(n){return t}}}]),e}();o.getStepConfig=function(e,t){return e.find((function(e){return e.step===t}))},t.ConfigUtils=o},function(e,t,n){"use strict";var i=n(63),a=n(29),r=n(0),o=n(30);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=c(r);e.exports=function(e){var t=e.width,n=e.height,r=e.reloadImage,c=e.hideSetInvalidTips,s=e.ignoreOffsetY,u=e.backgroundColor,d=e.fileType,h=void 0===d?"image":d,f=o.useTranslation().t,g=s?0:40,v=e.layerStyle||{position:"absolute",left:0,top:g,cursor:"initial",zIndex:20,fontSize:12};t&&n?Object.assign(v,{width:t,height:n}):Object.assign(v,{bottom:0,right:0}),u&&Object.assign(v,{backgroundColor:u});return l.default.createElement("div",{style:v},l.default.createElement("div",{style:{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%, -50%)"}},l.default.createElement("div",{style:{textAlign:"center",marginBottom:10}},l.default.createElement(a.Button,{type:"primary",shape:"circle",icon:l.default.createElement(i.ReloadOutlined,null),onClick:r})),l.default.createElement("div",null,"".concat(f("".concat(h,"ErrorAndReload"))).concat(c?"":f("orMaskAsInvalid")))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(65);t.InitToolStyleConfig=function(){return{type:i.TOOL_STYLE_ACTIONS.INIT_TOOL_STYLE_CONFIG,payload:void 0}},t.UpdateToolStyleConfig=function(e){return{type:i.TOOL_STYLE_ACTIONS.UPDATE_TOOL_STYLE_CONFIG,payload:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(52),a=n(76),r=n(54),o=n(29),c=n(0),l=n(30),s=n(391),u=n(393),d=n(394),h=n(401),f=n(407),g=n(409),v=n(411),b=n(412),p=n(421),m=n(32),y=n(426),x=n(228),C=n(28);function w(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var I=w(c),k=m.cTool,L=k.EVideoToolName,P=k.EPointCloudName,S=o.Collapse.Panel,O="".concat(i.prefix,"-sidebar");t.default=function(e){var t=e.sider,n=C.useSelector((function(e){return r.getCurrentStepInfo(e.annotation.step,e.annotation.stepList)})),i=null==n?void 0:n.tool,c=l.useTranslation().t;if(!i)return null;var m=I.default.createElement(x.ToolIcons,{toolName:i,onChange:function(){}}),w=I.default.createElement(f,null),k=I.default.createElement(s,null),A=I.default.createElement(o.Collapse,{defaultActiveKey:["1","imgAttribute"],bordered:!1,expandIconPosition:"right",className:"".concat(O,"__content"),expandIcon:g.expandIconFuc},function(e){var t=I.default.createElement(p,null);return I.default.createElement(S,{header:c("Style"),className:"panel",key:e},t)}("1")),T=I.default.createElement(o.Collapse,{defaultActiveKey:["1","imgAttribute"],bordered:!1,expandIconPosition:"right",className:"".concat(O,"__content"),expandIcon:g.expandIconFuc},I.default.createElement(S,{header:I.default.createElement("div",null,c("Adjust"),I.default.createElement(u,null)),className:"panel",key:"imgAttribute"},I.default.createElement(h,null))),E=I.default.createElement(d.default,null),D=I.default.createElement(g.default,null),N=I.default.createElement(v.default,null),R=I.default.createElement(y,{onChange:function(e,t){}}),M=I.default.createElement("div",{className:"".concat(O,"__horizontal")}),_=I.default.createElement(b,null),j=I.default.createElement(d.PointCloudOperation,null);return t?"function"===typeof t?I.default.createElement("div",{className:"".concat(O)},t({toolIcon:m,attributeList:w,annotationText:k,toolStyle:A,imageAttributeInfo:T,operation:E,tagToolSideBar:D,textToolSideBar:N,horizontal:M,pointCloudToolSidebar:_,pointCloudOperation:j,scribbleSidebar:R})):t:[a.EToolName.Rect,a.EToolName.Point,a.EToolName.Line,a.EToolName.Rect,a.EToolName.Polygon].includes(i)?I.default.createElement("div",{className:"".concat(O)},m,M,w,k,M,I.default.createElement("div",{className:"".concat(O,"__content")},A,T),E):i===a.EToolName.Tag?I.default.createElement("div",{className:"".concat(O)},I.default.createElement(g.default,null)):i===L.VideoTagTool?I.default.createElement("div",{className:"".concat(O)},I.default.createElement("div",{className:"".concat(O,"__content")},I.default.createElement(g.default,null)),E):i===a.EToolName.Text?I.default.createElement("div",{className:"".concat(O)},I.default.createElement(v.default,null)):i===P.PointCloud?I.default.createElement("div",{className:"".concat(O)},I.default.createElement("div",{className:"".concat(O,"__content")},I.default.createElement(b,null)),I.default.createElement(d.PointCloudOperation,null)):i===a.EToolName.ScribbleTool?I.default.createElement("div",{className:"".concat(O)},I.default.createElement("div",{className:"".concat(O,"__content")},R,w),E):null},t.sidebarCls=O},function(e,t,n){"use strict";var i=n(74).default,a=n(75).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(76),o=n(23),c="^[0-9]+$",l="^[A-Za-z]+$",s=function(){function e(){i(this,e)}return a(e,null,[{key:"checkString",value:function(e,t){var n="";switch(e){case r.ETextType.Order:case r.ETextType.NumberOnly:n=c;break;case r.ETextType.EnglishOnly:n=l;break;case r.ETextType.CustomFormat:n=t}return n}},{key:"getErrorNotice",value:function(e){switch(e){case r.ETextType.Order:case r.ETextType.NumberOnly:return o.i18n.t("TextCheckNumberOnly");case r.ETextType.EnglishOnly:return o.i18n.t("TextCheckEnglishOnly");case r.ETextType.CustomFormat:return o.i18n.t("TextCheckCustomFormat");default:return""}}}]),e}();t.REGEXP_ENGLISH=l,t.REGEXP_NUMBER=c,t.TextUtils=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(65);function a(e){return{type:i.IMAGE_ATTRIBUTE_ACTIONS.UPDATE_IMG_ATTRIBUTE,payload:e}}function r(){return{type:i.IMAGE_ATTRIBUTE_ACTIONS.INIT_IMG_ATTRIBUTE,payload:{}}}var o={UpdateImgAttribute:a,InitImgAttribute:r};t.InitImgAttribute=r,t.UpdateImgAttribute=a,t.default=o},function(e,t,n){"use strict";var i=n(73).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(191),r=n(408),o=n(29);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=c(n(0)),s=[a.NULL_COLOR].concat(a.COLORS_ARRAY),u=l.default.forwardRef((function(e,t){var n=l.default.useRef(),c=e.list||[],u=i(s);!0===e.forbidDefault&&(u=u.slice(1));var d="sensebee-radio-group";return e.noHeightLimit&&(d="sensebee-radio-group-no-limit-height"),l.default.createElement("div",{className:d},l.default.createElement(o.Radio.Group,{name:"radiogroup",defaultValue:null==e?void 0:e.selectedAttribute,value:null==e?void 0:e.selectedAttribute,onChange:function(t){return e.attributeChanged(t.target.value)},ref:t},c.map((function(t,i){var c,s=null!=(c=null==e?void 0:e.num)?c:i;!0===e.forbidDefault&&s++,"number"===typeof s&&s<=9&&s>=0||(s="-");var d=i>8&&!e.forbidDefault?a.COLORS_ARRAY[(i-1)%a.COLORS_ARRAY.length]:u[i%u.length];return(null==t?void 0:t.color)&&(d=t.color),l.default.createElement(o.Radio,{value:t.value,ref:n,key:i},l.default.createElement("span",{className:"sensebee-radio-label",title:t.label},!(null==e?void 0:e.forbidColor)&&l.default.createElement(r.ColorTag,{color:d,style:{marginRight:"8px"}}),t.label),l.default.createElement("span",{className:"sensebee-radio-num"},s))}))))}));t.ATTRIBUTE_COLORS=s,t.default=u},function(e,t,n){"use strict";var i=n(89).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(76),r=n(0),o=n(224),c=n(413),l=n(414),s=n(415),u=n(416),d=n(417),h=n(418),f=n(419),g=n(420),v=n(32),b=n(5),p=n(30);function m(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var y=m(r),x=m(b),C=v.cTool,w=C.EPointCloudName,I=C.TOOL_NAME,k=C.TOOL_NAME_EN,L=[{toolName:a.EToolName.Rect,commonSvg:f,selectedSvg:g},{toolName:a.EToolName.Polygon,commonSvg:h,selectedSvg:d},{toolName:a.EToolName.Line,commonSvg:c,selectedSvg:l},{toolName:a.EToolName.Point,commonSvg:s,selectedSvg:u}];t.ToolIcons=function(e){var t=e.toolName,n=e.selectedToolName,r=e.onChange,c=p.useTranslation().i18n,l=null==L?void 0:L.filter((function(e){return t===w.PointCloud?[a.EToolName.Polygon,a.EToolName.Rect].includes(null==e?void 0:e.toolName):(null==e?void 0:e.toolName)===t})),s=l.length>1;return y.default.createElement("div",{className:"".concat(o.sidebarCls,"__level")},l.map((function(e){var t,a=s&&n===e.toolName;return y.default.createElement("span",{className:"".concat(o.sidebarCls,"__toolOption"),key:e.toolName,onClick:function(){return null==r?void 0:r(e.toolName)}},y.default.createElement("img",{className:"".concat(o.sidebarCls,"__singleTool"),src:a?null==e?void 0:e.selectedSvg:null==e?void 0:e.commonSvg}),y.default.createElement("span",{className:x.default(i({},"".concat(o.sidebarCls,"__toolOption__selected"),a))},(t=c.language,"en"===t?k:I)[e.toolName]))})))}},function(e,t,n){"use strict";var i=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(48),o=n(32).cTool,c=o.EToolName,l=o.EPolygonPattern;t.useStatus=function(){var e=a.useContext(r.PointCloudContext),t=e.topViewInstance,n=e.mainViewInstance,o=e.pointCloudBoxList,s=e.setPointCloudResult,u=a.useState(c.Rect),d=i(u,2),h=d[0],f=d[1];return{clearAllResult:function(){o.forEach((function(e){null==n||n.removeObjectByName(e.id)})),null==n||n.render(),s([]),null==t||t.pointCloud2dOperation.clearActiveStatus(),null==t||t.pointCloud2dOperation.clearResult()},updatePointCloudPattern:function(e){var n=null==t?void 0:t.pointCloud2dOperation;if(n)switch(n.clearActiveStatus(),e){case c.Rect:n.setPattern(l.Rect),f(c.Rect);break;case c.Polygon:n.setPattern(l.Normal),f(c.Polygon)}},pointCloudPattern:h}}},function(e,t,n){"use strict";var i,a=n(31).default,r=n(89).default,o=n(29),c=n(0),l=n(432),s=n(433),u=n(76),d=n(434),h=n(456),f=n(460),g=n(468),v=n(236),b=n(476),p=n(477),m=n(478),y=n(487),x=n(132),C=n(30),w=n(32);function I(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var k=I(c),L=w.cTool,P=L.EVideoToolName,S=L.EPointCloudName,O=(r(i={},u.EToolName.Rect,d.default),r(i,u.EToolName.Tag,v.default),r(i,u.EToolName.Point,h.default),r(i,u.EToolName.Polygon,f.default),r(i,u.EToolName.Line,g.default),r(i,u.EToolName.Text,b),r(i,P.VideoTagTool,p),r(i,S.PointCloud,m),r(i,u.EToolName.ScribbleTool,y),i),A=function(e){var t=e.icon;return"string"===typeof t?k.default.createElement("img",{width:16,height:16,src:t}):t||null};e.exports=function(e){var t,n=e.style,i=e.title,r=e.toolName,u=c.useState(!1),d=a(u,2),h=d[0],f=d[1],g=C.useTranslation().t;if(!r)return null;var v={width:320,display:"flex",justifyContent:"space-between",margin:16},b={display:"block",padding:"0 3px",minWidth:"20px",marginRight:"3px",border:"1px solid rgba(204,204,204,1)",verticalAlign:"middle",fontSize:"12px",textAlign:"center"},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"+";if(!e)return null;var i=e.map((function(i,a){var r={display:"flex",alignItems:"center"};return t?k.default.createElement("span",{key:a,style:r},k.default.createElement("span",{style:b,dangerouslySetInnerHTML:{__html:i}})):a<e.length-1?"number"===typeof i?k.default.createElement("span",{key:a,style:r},k.default.createElement("span",{style:b},i),k.default.createElement("span",{style:{marginRight:"3px"}},"~")):(null==i?void 0:i.startsWith("data"))?k.default.createElement("span",{key:a,style:r},k.default.createElement("span",{className:"shortCutButton",style:{marginRight:"3px"}},k.default.createElement("img",{width:16,height:23,src:i})),k.default.createElement("span",{style:{marginRight:"3px"}},"+")):k.default.createElement("span",{key:a,style:r},k.default.createElement("span",{style:b},i),k.default.createElement("span",{style:{marginRight:"3px"}},n)):"number"===typeof i?k.default.createElement("span",{key:a,style:r},k.default.createElement("span",{style:b},i)):(null==i?void 0:i.startsWith("data"))?k.default.createElement("span",{className:"shortCutButton",key:a,style:{marginRight:"3px"}},k.default.createElement("img",{width:16,height:23,src:i})):k.default.createElement("span",{style:b,key:a},i)}));return k.default.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"}},i)},m=k.default.createElement("div",{className:"".concat(x.footerCls,"__hotkey-content")},null==(t=O[r])?void 0:t.map((function(e,t){return function(e,t){return k.default.createElement("div",{style:v,key:t},k.default.createElement("span",{style:{display:"flex",alignItems:"center"}},k.default.createElement(A,{icon:e.icon}),k.default.createElement("span",{style:{marginLeft:e.icon?16:0}},g(e.name))),k.default.createElement("span",{style:{display:"flex",alignItems:"center"}},e.noticeInfo&&k.default.createElement("span",{style:{marginRight:"5px",color:"#CCCCCC"}},g(e.noticeInfo)),p(e.shortCut,e.shortCutUseHtml,e.linkSymbol)))}(e,t)}))),y=n||{width:100};return O[r]?k.default.createElement(o.Popover,{placement:"topLeft",content:m,onMouseMove:function(){return f(!0)},onMouseLeave:function(){f(!1)},overlayClassName:"tool-hotkeys-popover"},k.default.createElement("div",{className:"shortCutTitle",onMouseMove:function(){return f(!0)},onMouseLeave:function(){return f(!1)},style:y},null!=i?i:k.default.createElement("a",{className:"svg"},k.default.createElement("img",{src:h?s:l,width:15,height:13,style:{marginRight:"5px"}}),g("Hotkeys")))):null}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_277' data-name='%e8%b7%af%e5%be%84 277' class='cls-1' d='M6.857-116.857h-3.3v1.4L0-118l3.556-2.54v1.4h3.3v-3.3H9.143v3.3h3.3v-1.4L16-118l-3.556%2c2.54v-1.4h-3.3v3.3h1.4L8-110l-2.54-3.556h1.4ZM8-126l2.54%2c3.556H5.46Z' transform='translate(0 126)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_276' data-name='%e8%b7%af%e5%be%84 276' class='cls-2' d='M-37-137.6h25.4V-163H-37Z' transform='translate(37 163)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_move_kj' transform='translate(1 128)'%3e %3cg id='%e7%bb%84_475' data-name='%e7%bb%84 475' class='cls-3' transform='translate(-1 -128)'%3e %3cg id='%e7%bb%84_474' data-name='%e7%bb%84 474' class='cls-4' transform='translate(-4.698 -4.698)'%3e %3cpath id='%e8%b7%af%e5%be%84_275' data-name='%e8%b7%af%e5%be%84 275' class='cls-5' d='M-5-131H12.27v17.27H-5Z' transform='translate(9.063 135.064)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M2.1-1.769a.381.381%2c0%2c0%2c1-.382-.382h0V-7.087A.381.381%2c0%2c0%2c1%2c2.1-7.469H8.4a.381.381%2c0%2c0%2c1%2c.382.382h0V-2.15a.381.381%2c0%2c0%2c1-.382.382H2.1Zm.525-.906H7.874V-6.562H2.627Z' transform='translate(-1.721 7.469)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M17.723-5.652A4.782%2c4.782%2c0%2c0%2c0%2c19.561-9.4l.763%2c0a.093.093%2c0%2c0%2c0%2c.073-.15l-1.2-1.526a.094.094%2c0%2c0%2c0-.147%2c0L17.841-9.555a.093.093%2c0%2c0%2c0%2c.073.15h.762a4.019%2c4.019%2c0%2c0%2c1-.03.463%2c3.888%2c3.888%2c0%2c0%2c1-.461%2c1.419A3.9%2c3.9%2c0%2c0%2c1%2c17.179-6.35a3.884%2c3.884%2c0%2c0%2c1-1.381.693%2c3.887%2c3.887%2c0%2c0%2c1-1.488.106c-.064-.008-.129-.017-.192-.029v.893A4.752%2c4.752%2c0%2c0%2c0%2c17.723-5.652Z' transform='translate(-14.118 11.118)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='c'%3e%3cpath d='M19.678-21a.381.381%2c0%2c0%2c1%2c.382.382h0v4.937a.381.381%2c0%2c0%2c1-.382.382h-6.3A.381.381%2c0%2c0%2c1%2c13-15.682h0v-4.937A.381.381%2c0%2c0%2c1%2c13.382-21h6.3Zm-.525.906H13.906v3.887h5.247Z' transform='translate(-13 21)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='d'%3e%3cpath d='M3.673-17.359a4.782%2c4.782%2c0%2c0%2c0-1.839%2c3.751l-.763%2c0a.093.093%2c0%2c0%2c0-.073.15l1.2%2c1.526a.094.094%2c0%2c0%2c0%2c.147%2c0l1.206-1.528a.093.093%2c0%2c0%2c0-.073-.15H2.72a4.017%2c4.017%2c0%2c0%2c1%2c.03-.463%2c3.888%2c3.888%2c0%2c0%2c1%2c.461-1.419%2c3.9%2c3.9%2c0%2c0%2c1%2c1.005-1.173A3.884%2c3.884%2c0%2c0%2c1%2c5.6-17.354a3.887%2c3.887%2c0%2c0%2c1%2c1.488-.106c.064.008.129.017.192.029v-.893A4.752%2c4.752%2c0%2c0%2c0%2c3.673-17.359Z' transform='translate(-0.978 18.372)' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(-957 -603)'%3e%3crect width='16' height='16' transform='translate(957 603)' fill='none'/%3e%3cg transform='translate(956.022 624)'%3e%3cg transform='translate(1.545 -10.994)' clip-path='url(%23a)'%3e%3cpath d='M11.412.863H-3.279V-12.469H11.412Z' transform='translate(-0.537 8.653)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(10.679 -13.779)' clip-path='url(%23b)'%3e%3cpath d='M23.049-16.118V-2.007H9.118V-16.118Z' transform='translate(-12.934 12.302)' fill='%23666'/%3e%3c/g%3e%3crect width='6' height='5' transform='translate(10.652 -20.897)' fill='%23ccc'/%3e%3cg transform='translate(9.826 -21)' clip-path='url(%23c)'%3e%3cpath d='M8-26H22.691v13.331H8Z' transform='translate(-11.816 22.184)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(0.978 -18.995)' clip-path='url(%23d)'%3e%3cpath d='M-4.022-9.261V-23.372H9.909V-9.261Z' transform='translate(0.206 19.556)' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygon_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2%2c .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-2 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-4' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-4' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineCont_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-3 %7b fill: none%3b %7d .cls-2%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_unGrip_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_14' data-name='%e5%87%8f%e5%8e%bb 14' class='cls-2' d='M12806.69-12915.114c-.083%2c0-.175%2c0-.282-.008a5.869%2c5.869%2c0%2c0%2c1-3.878-1.69%2c5.509%2c5.509%2c0%2c0%2c1-1.6-4.091%2c6.209%2c6.209%2c0%2c0%2c1%2c2.044-4.437l1.039-.934%2c2.459%2c2.731-1.168%2c1.052a2.434%2c2.434%2c0%2c0%2c0-.522%2c2.823%2c2.39%2c2.39%2c0%2c0%2c0%2c1.854.923%2c2%2c2%2c0%2c0%2c0%2c1.346-.508l1.3-1.171%2c2.46%2c2.732-1.169%2c1.054A5.813%2c5.813%2c0%2c0%2c1%2c12806.69-12915.114Zm6.1-3.518h0l-2.477-2.717%2c1.962-1.769a.619.619%2c0%2c0%2c1%2c.412-.164.6.6%2c0%2c0%2c1%2c.454.209l1.639%2c1.824a.6.6%2c0%2c0%2c1-.046.863l-1.942%2c1.753Zm-5.33-5.8h0l-2.523-2.675%2c1.938-1.745a.614.614%2c0%2c0%2c1%2c.412-.163.609.609%2c0%2c0%2c1%2c.455.209l1.769%2c1.7a.6.6%2c0%2c0%2c1-.046.866l-2%2c1.8Z' transform='translate(-12800 12929.97)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_271' data-name='%e7%9f%a9%e5%bd%a2 271' class='cls-2' width='1.166' height='18.662' transform='matrix(0.719%2c -0.695%2c 0.695%2c 0.719%2c 0.745%2c 2.047)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(475),a=n(77),r={name:"Tagging",icon:i,shortCut:[1,9]},o=[r,a.rotate,a.scale,a.backward,a.forward,a.dargWithRightClick,a.dargWithLeftClick];t.default=o,t.tagInSingleImg=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(490),r=n(491),o=n(63),c=n(33),l=n(492),s=n(132),u=n(28);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(i),f=function(e){var t=e.mode,n=e.initialPosition,i=e.zoomOut,c=e.zoomIn,u=e.zoom,d="light"===t?a:r;return h.default.createElement("div",null,h.default.createElement("span",{className:"".concat(s.footerCls,"__zoomController")},h.default.createElement(o.MinusOutlined,{className:"".concat(s.footerCls,"__highlight"),onClick:function(){null==i||i()}}),h.default.createElement("span",{className:"".concat(s.footerCls,"__zoomText"),onClick:function(){null==n||n()}},h.default.createElement("img",{src:d,className:"adaptIcon"}),h.default.createElement(l,{zoom:u})),h.default.createElement(o.PlusOutlined,{className:"".concat(s.footerCls,"__highlight"),onClick:function(){null==c||c()}})))},g=c.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:u.LabelBeeContext})((function(e){var t=e.toolInstance;return h.default.createElement(f,{initialPosition:function(){t.initImgPos()},zoomIn:function(){t.zoomChanged(!0)},zoomOut:function(){t.zoomChanged(!1)}})}));t.ZoomController=f,t.default=g},function(e,t,n){"use strict";var i=n(31).default,a=n(42).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),o=n(63),c=n(29),l=n(0);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(l),d=Object.defineProperty,h=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=function(e,t,n){return t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},b=function(e,t){for(var n in t||(t={}))f.call(t,n)&&v(e,n,t[n]);if(h){var i,r=a(h(t));try{for(r.s();!(i=r.n()).done;){n=i.value;g.call(t,n)&&v(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e},p=function(e){var t=e.jumpSkip,n=e.imgIndex,a=l.useState(n),o=i(a,2),s=o[0],d=o[1],h=l.useRef(null);l.useEffect((function(){d(n+1)}),[n]);return u.default.createElement(c.Input,{className:r.getClassName("page-input"),ref:h,onChange:function(e){/^\d*$/.test(e.target.value)&&d(e.target.value)},value:s,onKeyDown:function(e){13===e.keyCode&&t(e.target.value)}})},m=function(e){return e.isVideo?u.default.createElement(o.StepForwardFilled,b({},e.iconProps)):u.default.createElement(o.RightOutlined,b({},e.iconProps))},y=function(e){return e.isVideo?u.default.createElement(o.StepBackwardFilled,b({},e.iconProps)):u.default.createElement(o.LeftOutlined,b({},e.iconProps))};t.PageInput=p,t.Pagination=function(e){var t=e.pageBackward,n=e.imgIndex,i=e.pageJump,a=e.totalPage,r=e.pageForward,o=e.isVideo,c=e.footerCls;return u.default.createElement("div",{className:"".concat(c,"__pagination")},u.default.createElement(y,{isVideo:o,iconProps:{className:"".concat(c,"__highlight"),onClick:t}}),u.default.createElement(p,{imgIndex:n,jumpSkip:i}),"/",u.default.createElement("span",{className:"".concat(c,"__pageAll")},a),u.default.createElement(m,{isVideo:o,iconProps:{className:"".concat(c,"__highlight"),onClick:r}}))}},function(e,t,n){"use strict";var i=n(74).default,a=n(75).default,r=n(240).default,o=n(241).default;Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),l=n(32),s=n(54),u=n(46),d=n(242),h=n(519),f=n(47),g=n(133);function v(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var b=v(c),p=v(f),m=function(e){r(n,e);var t=o(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).fns={},a.labelSelectedList=[],a.clearResult=function(){var e=arguments.length>1?arguments[1]:void 0,t=e?a.state.tagResult.map((function(t){return(null==t?void 0:t.result[e])&&delete t.result[e],t})):[];a.setState({tagResult:t},(function(){return a.emitEvent("render")}))},a.exportData=function(){var e,t,n,i,r,o,c,l=null!=(t=null==(e=a.videoRef)?void 0:e.duration)?t:0,s=null==(n=a.videoRef)?void 0:n.getVideoPlaybackQuality(),u=null==s?void 0:s.totalVideoFrames,d=null!=(r=null==(i=a.videoRef)?void 0:i.videoWidth)?r:0,h=null!=(c=null==(o=a.videoRef)?void 0:o.videoHeight)?c:0;return[a.state.tagResult,{valid:a.state.valid,duration:l,frames:u,videoWidth:d,videoHeight:h}]},a.emitEvent=function(e){a.fns[e]&&a.fns[e]()},a.combineResult=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.isMulti,r=e.value,o=r.key,c=r.value;if(a){var l=null!=(n=null==(t=i[o])?void 0:t.split(";"))?n:[];l.includes(c)?l=l.filter((function(e){return e!==c})):l.push(c);var s=new Set(l);return i[o]=Array.from(s).join(";"),p.default.pickBy(i,(function(e){return e}))}return i[o]=i[o]===c?void 0:c,p.default.pickBy(i,(function(e){return e}))},a.setResult=function(e){a.setState({tagResult:e}),a.fns.render&&a.fns.render()},a.setLabel=function(e,t){a.setLabelBySelectedList(e,t)},a.keydown=function(e){var t=g.getKeyCodeNumber(e.keyCode);if(t){var n=t-1;if(1===a.config.inputList.length)return a.labelSelectedList=[0,n],a.setLabel(0,n),void setTimeout((function(){a.labelSelectedList=[],a.emitEvent("render")}),500);1===a.labelSelectedList.length?(a.labelSelectedList=[a.labelSelectedList[0],n],a.setLabel(a.labelSelectedList[0],n),setTimeout((function(){a.labelSelectedList=[],a.emitEvent("render")}),500)):(a.labelSelectedList=[n],a.emitEvent("expend"))}},a.setValid=function(e){a.setState({valid:e}),!1===e&&a.setState({tagResult:[]}),a.emitEvent("render")},a.setResultFromImgList=function(e){var t,n=e.imgList,i=e.imgIndex,r=e.step;if(n[i]){var o=u.jsonParser(n[i].result),c=o["step_".concat(r)];a.setState({tagResult:null!=(t=null==c?void 0:c.result)?t:[],valid:void 0===(null==o?void 0:o.valid)||o.valid})}},a.state={tagResult:[],labelSelectedList:[],valid:!0},a}return a(n,[{key:"config",get:function(){var e=s.getCurrentStepInfo(this.props.step,this.props.stepList);return u.jsonParser(null==e?void 0:e.config)}},{key:"history",get:function(){return{initRecord:function(){},pushHistory:function(){}}}},{key:"currentTagResult",get:function(){var e;return null!=(e=this.state.tagResult[0])?e:{}}},{key:"valid",get:function(){return this.state.valid}},{key:"singleOn",value:function(e,t){this.fns[e]=t}},{key:"on",value:function(e,t){this.singleOn(e,t)}},{key:"getTagResultByCode",value:function(e,t){var n,i,a;try{var r=null!=(i=null==(n=this.config)?void 0:n.inputList)?i:[],o=r.length>1,c=void 0!==t?t:e,l=o?r[void 0!==t?e:0]:r[0],s=(null!=(a=l.subSelected)?a:[])[c];if(l&&s)return{value:{key:l.value,value:s.value},isMulti:l.isMulti}}catch(u){return}}},{key:"setLabelBySelectedList",value:function(e,t){var n,i,a,r,o=this,c=this.getTagResultByCode(e,t);if(c){var s=this.combineResult(c,null!=(i=null==(n=this.state.tagResult[0])?void 0:n.result)?i:{}),u=[{sourceID:l.CommonToolUtils.getSourceID(),id:null!=(r=null==(a=this.currentTagResult)?void 0:a.id)?r:l.uuid(8,62),result:s}];this.setState({tagResult:u},(function(){return o.emitEvent("render")}))}}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keydown),this.props.onMounted(this),this.setResultFromImgList(this.props)}},{key:"componentWillUnmount",value:function(){document.addEventListener("keydown",this.keydown),this.props.onUnmounted()}},{key:"shouldComponentUpdate",value:function(e){return e.imgIndex!==this.props.imgIndex&&this.setResultFromImgList(e),!0}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.imgIndex,a=n.imgList,r=n.pageForward,o=n.pageJump,c=n.pageBackward,l=this.state,s=l.tagResult,u=l.valid;return b.default.createElement("div",{style:{height:"100%",width:"100%",position:"relative"}},b.default.createElement(d.VideoPlayer,{imgIndex:i,imgList:a,pageBackward:c,pageForward:r,pageJump:o,valid:u,setVideoRef:function(e){t.videoRef=e}}),b.default.createElement(h.VideoTagLayer,{result:s,inputList:null==(e=this.config)?void 0:e.inputList}))}}]),n}(b.default.Component);t.TagToolInstanceAdaptor=m},,,function(e,t,n){"use strict";var i=n(74).default,a=n(75).default,r=n(240).default,o=n(241).default;Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),l=n(515),s=n(53),u=n(32),d=n(133),h=n(517);function f(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var g=f(c),v=u.cKeyCode.default,b=g.default.createContext({isPlay:!1,playPause:function(){},updateNextPlaybackRate:function(){},playbackRate:1,currentTime:0,duration:0,buffered:0,setCurrentTime:function(){},imgList:[],imgIndex:-1,pageBackward:function(){},pageJump:function(e){},pageForward:function(){}}),p=[.5,1,1.5,2,4,6,8,16],m=function(e){r(n,e);var t=o(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).changePlaybackPate=function(e){a.videoElm&&(a.videoElm.playbackRate=e,a.setState({playbackRate:e}))},a.playPause=function(){var e,t,n;(null==(e=a.videoElm)?void 0:e.paused)?null==(t=a.videoElm)||t.play():null==(n=a.videoElm)||n.pause()},a.updateNextPlaybackRate=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=p.findIndex((function(e){return e===a.state.playbackRate})),n=e?Math.min(t+1,p.length-1):Math.max(t-1,0);a.changePlaybackPate(p[n])},a.fastForward=function(){a.videoElm&&a.setCurrentTime(a.videoElm.currentTime+.1)},a.rewind=function(){a.videoElm&&a.setCurrentTime(a.videoElm.currentTime-.1)},a.keydown=function(e){e.keyCode===v.Space&&(e.preventDefault(),a.playPause()),e.keyCode===v.Up&&(e.preventDefault(),a.updateNextPlaybackRate()),e.keyCode===v.Down&&(e.preventDefault(),a.updateNextPlaybackRate(!1)),e.keyCode===v.Left&&(e.preventDefault(),a.rewind()),e.keyCode===v.Right&&(e.preventDefault(),a.fastForward())},a.onPlay=function(){a.setState({isPlay:!0},a.onVideoStart)},a.onPause=function(){a.onVideoStopped()},a.onVideoStopped=function(){a.setState({isPlay:!1}),a.timeInterval&&(clearInterval(a.timeInterval),a.timeInterval=void 0),a.videoElm&&a.setCurrentTime(a.videoElm.currentTime)},a.onVideoStart=function(){a.timeInterval=window.setInterval((function(){var e,t,n;if(a.videoElm)try{if((null==(e=a.videoElm)?void 0:e.buffered.length)>0){var i=null==(t=a.videoElm)?void 0:t.buffered.end(0);a.setState({currentTime:d.decimalReserved(null==(n=a.videoElm)?void 0:n.currentTime,1),buffered:i})}}catch(r){console.error(r)}}),50)},a.resetVideoData=function(){a.setState({currentTime:0,buffered:0,error:!1,isPlay:!1}),a.videoElm&&(a.videoElm.playbackRate=a.state.playbackRate),a.onVideoStopped()},a.setDuration=function(){var e;if(a.videoElm){var t=d.decimalReserved(null==(e=a.videoElm)?void 0:e.duration,1);a.setState({duration:t})}},a.setCurrentTime=function(e){a.videoElm&&(a.videoElm.currentTime=e,a.setState({currentTime:e}))},a.reload=function(){var e;null==(e=a.videoElm)||e.load()},a.onError=function(){a.resetVideoData(),a.setState({error:!0})},a.state={playbackRate:1,currentTime:0,isPlay:!1,duration:0,buffered:0,error:!1},a.videoRef=g.default.createRef(),a}return a(n,[{key:"videoElm",get:function(){var e;return null==(e=this.videoRef)?void 0:e.current}},{key:"videoSrc",get:function(){var e,t,n=this.props,i=n.imgIndex,a=n.imgList;return i>-1&&null!=(t=null==(e=a[i])?void 0:e.url)?t:""}},{key:"componentDidMount",value:function(){var e,t;window.addEventListener("keydown",this.keydown),(null==(e=this.videoRef)?void 0:e.current)&&this.props.setVideoRef&&this.props.setVideoRef(null==(t=this.videoRef)?void 0:t.current)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keydown)}},{key:"render",value:function(){var e=this.state,t=e.isPlay,n=e.playbackRate,i=e.currentTime,a=e.duration,r=e.buffered,o=e.error,c=this.props,u=c.imgList,d=c.imgIndex,f=c.pageBackward,v=c.pageJump,p=c.pageForward,m=c.valid,y=this.playPause,x=this.updateNextPlaybackRate,C=this.onPause,w=this.onPlay,I=this.resetVideoData,k=this.setDuration,L=this.setCurrentTime,P=this.onError,S=this.videoRef,O=this.videoSrc;return g.default.createElement(b.Provider,{value:{videoRef:this.videoRef,isPlay:t,playPause:y,updateNextPlaybackRate:x,playbackRate:n,currentTime:i,duration:a,buffered:r,setCurrentTime:L,imgIndex:d,imgList:u,pageBackward:f,pageJump:v,pageForward:p}},g.default.createElement("div",{className:s.getClassName("video-wrapper")},g.default.createElement("div",{className:s.getClassName("video-container")},g.default.createElement("video",{ref:S,className:s.getClassName("video"),src:O,onPause:C,onPlay:w,onLoadedMetadata:I,onError:P,onDurationChange:k,width:"100%",height:"100%",onClick:y}),g.default.createElement(h,{fileType:"video",errorProps:{reloadImage:this.reload,backgroundColor:"#e2e2e2",ignoreOffsetY:!0,isError:o},invalidProps:{isValid:m}})),g.default.createElement(l,null)))}}]),n}(g.default.Component);t.VideoPlayer=m,t.VideoPlayerCtx=b,t.default=m},function(e,t,n){"use strict";var i=n(0),a=n(523),r=n(53);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=o(i);e.exports=function(){return c.default.createElement("div",{className:r.getClassName("point-cloud-container","empty-page")},c.default.createElement("img",{src:a}),c.default.createElement("span",{className:r.getClassName("point-cloud-container","empty-page","text")},"\u6682\u65e0\u6570\u636e"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(91),r=n(66),o=n(48),c=n(32),l=n(23),s=c.cAnnotation.ERotateDirection;t.useRotate=function(e){var t=e.currentData,n=i.useContext(o.PointCloudContext),c=r.useSingleBox(),u=c.selectedBox,d=c.updateSelectedBox;return{updateRotate:i.useCallback((function(e){var i=n.topViewInstance,r=n.mainViewInstance;if(i&&r){var o=i.pointCloud2dOperation,c=null==u?void 0:u.info;if(c&&(null==t?void 0:t.url)&&n.backViewInstance){d({rotation:l.PointCloudUtils.restrictAngleRange(c.rotation+Number(Math.PI*e)/180)}),o.rotatePolygon(e,s.Anticlockwise);var h=o.selectedPolygon;r.generateBox(c),r.highlightOriginPointCloud(c),a.synchronizeSideView(c,h,n.sideViewInstance,t.url),a.synchronizeBackView(c,h,n.backViewInstance,t.url),r.render()}}}),[n.selectedID,n.pointCloudBoxList,n.setPointCloudResult,n.topViewInstance,t])}}},,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var i=n(251);function a(t,n,a){var r=void 0===n?null:n,o=function(t,n){return e.from(t,"base64").toString(n?"utf16":"utf8")}(t,void 0!==a&&a),c=o.indexOf("\n",10)+1,l=o.substring(c)+(r?"//# sourceMappingURL="+r:"");return function(e){return new i.a(l,Object.assign({},e,{eval:!0}))}}}).call(this,n(280).Buffer)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var i=null;try{var a="function"===typeof e.require&&n(!function(){var e=new Error("Cannot find module 'worker_threads'");throw e.code="MODULE_NOT_FOUND",e}())||"function"===typeof require&&require("worker_threads")||n(!function(){var e=new Error("Cannot find module 'worker_threads'");throw e.code="MODULE_NOT_FOUND",e}());i=a.Worker}catch(r){}}).call(this,n(284)(e))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var i="[object process]"===Object.prototype.toString.call("undefined"!==typeof e?e:0);function a(){return i}}).call(this,n(183))},,,,,,,,,function(e){e.exports=JSON.parse('{"calName":"P2","timestamp":1,"P":[[721.5377,0,609.5593,44.85728],[0,721.5377,172.854,0.2163791],[0,0,1,0.002745884]],"R":[[0.9999239,0.00983776,-0.007445048],[-0.009869795,0.9999421,-0.004278459],[0.007402527,0.004351614,0.9999631]],"T":[[0.007533745,-0.9999714,-0.000616602,-0.004069766],[0.01480249,0.0007280733,-0.9998902,-0.07631618],[0.9998621,0.00752379,0.01480755,-0.2717806]]}')},function(e){e.exports=JSON.parse('{"calName":"P2","timestamp":2,"P":[[721.5377,0,609.5593,44.85728],[0,721.5377,172.854,0.2163791],[0,0,1,0.002745884]],"R":[[0.9999239,0.00983776,-0.007445048],[-0.009869795,0.9999421,-0.004278459],[0.007402527,0.004351614,0.9999631]],"T":[[0.007533745,-0.9999714,-0.000616602,-0.004069766],[0.01480249,0.0007280733,-0.9998902,-0.07631618],[0.9998621,0.00752379,0.01480755,-0.2717806]]}')},,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(0);e.exports=function(e){var t=i.useRef(e);return i.useEffect((function(){t.current=e}),[e]),t}},function(e,t,n){"use strict";var i=n(32),a=n(23),r=n(0);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=o(r);e.exports=function(e){var t=e.src,n=e.result,o=e.size,l=r.useRef(),s=r.useRef(),u=r.useCallback((function(e){l.current=e}),[]);return r.useEffect((function(){var e=new i.PointCloud({container:l.current,backgroundColor:"#ccc"});return s.current=e,function(){var e;null==(e=s.current.renderer)||e.forceContextLoss()}}),[]),r.useEffect((function(){var e;null==(e=s.current)||e.init()}),[o]),r.useEffect((function(){var e;s.current&&t&&(null==(e=s.current)||e.loadPCDFile(t))}),[t]),r.useEffect((function(){n&&a.PointCloudUtils.getBoxParamsFromResultList(n).forEach((function(e){var t;null==(t=s.current)||t.generateBox(e,e.id)}));return function(){var e;a.PointCloudUtils.getBoxParamsFromResultList(n).forEach((function(e){var t;null==(t=s.current)||t.removeObjectByName(e.id)})),null==(e=s.current)||e.render()}}),[n]),c.default.createElement("div",{style:o,ref:u})}},,,,,,,,function(e,t,n){"use strict";var i=n(42).default,a=n(380),r=n(23),o=n(0),c=n(33),l=n(58),s=n(28),u=n(65),d=n(57),h=n(115);function f(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var g=f(o),v=Object.defineProperty,b=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=function(e,t,n){return t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x=c.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:s.LabelBeeContext})((function(e){var t=e.imgList,n=e.step,c=void 0===n?1:n,s=e.stepList,f=e.onSubmit,v=e.onSave,x=e.onPageChange,C=e.onStepChange,w=e.initialIndex,I=void 0===w?0:w,k=e.toolInstance,L=e.setToolInstance,P=e.getFileData,S=e.pageSize,O=void 0===S?10:S,A=e.loadFileList,T=e.defaultLang,E=void 0===T?"cn":T,D=e.skipBeforePageTurning,N=e.beforeRotate;o.useEffect((function(){l.store.dispatch(d.InitTaskData({onSubmit:f,stepList:s,step:c,getFileData:P,pageSize:O,loadFileList:A,onSave:v,onPageChange:x,onStepChange:C,skipBeforePageTurning:D,beforeRotate:N})),R(),r.i18n.changeLanguage(E)}),[]),o.useEffect((function(){l.store.dispatch(d.UpdateInjectFunc({onSubmit:f,stepList:s,getFileData:P,pageSize:O,loadFileList:A,onSave:v,onPageChange:x,onStepChange:C,beforeRotate:N})),r.i18n.changeLanguage(E)}),[f,s,P,O,A,v,x,C,E,N]),o.useEffect((function(){null==L||L(k)}),[k]);var R=function(){A?d.loadImgList(l.store.dispatch,l.store.getState,I,!0).then((function(e){e&&l.store.dispatch(h.LoadFileAndFileData(I))})):t&&t.length>0&&(l.store.dispatch({type:u.ANNOTATION_ACTIONS.UPDATE_IMG_LIST,payload:{imgList:t}}),l.store.dispatch(h.LoadFileAndFileData(I)))};return g.default.createElement("div",null,g.default.createElement(a,function(e,t){for(var n in t||(t={}))p.call(t,n)&&y(e,n,t[n]);if(b){var a,r=i(b(t));try{for(r.s();!(a=r.n()).done;)n=a.value,m.call(t,n)&&y(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},e)))}));e.exports=x},function(e,t,n){"use strict";var i=n(42).default,a=n(219),r=n(52),o=n(29),c=n(29),l=n(0),s=n(388),u=n(390),d=n(224),h=n(132),f=n(495),g=n(115),v=n(509),b=n(33),p=n(188),m=n(520),y=n(53),x=n(46),C=n(28);function w(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var I=w(l),k=Object.defineProperty,L=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,O=function(e,t,n){return t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},A=function(e,t){for(var n in t||(t={}))P.call(t,n)&&O(e,n,t[n]);if(L){var a,r=i(L(t));try{for(r.s();!(a=r.n()).done;){n=a.value;S.call(t,n)&&O(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e},T=c.Layout,E=T.Sider,D=T.Content,N="".concat(r.prefix,"-layout"),R=function(e){var t;return I.default.createElement(I.default.Fragment,null,!0===e.showTips&&I.default.createElement(u,{path:e.path,tips:e.tips}),I.default.createElement(s,A({},e)),I.default.createElement(h.default,{style:null==(t=e.style)?void 0:t.footer,mode:e.mode,footer:null==e?void 0:e.footer}))},M=function(e){var t;return I.default.createElement(I.default.Fragment,null,I.default.createElement(m,null),I.default.createElement(h.default,{style:null==(t=e.style)?void 0:t.footer,mode:e.mode,footer:null==e?void 0:e.footer}))},_=function(e){var t,n=e.stepList,i=e.step,a=null==(t=g.getStepConfig(n,i))?void 0:t.tool,r=p.isVideoTool(a),o=p.isPointCloudTool(a);return r?I.default.createElement(v,A({},e)):o?I.default.createElement(M,A({},e)):I.default.createElement(R,A({},e))},j=b.connect((function(e){var t,n,i,a=e.annotation,r=a.imgList,o=a.loading,c=null!=(t=r[a.imgIndex])?t:{};return{path:null!=(i=null!=(n=null==c?void 0:c.path)?n:null==c?void 0:c.url)?i:"",loading:o}}),null,null,{context:C.LabelBeeContext})((function(e){var t,n,i,r,l,s=null==(n=null==(t=e.style)?void 0:t.sider)?void 0:n.width;return I.default.createElement(a.ViewportProvider,null,I.default.createElement(o.Spin,{spinning:e.loading},I.default.createElement(c.Layout,{className:x.classnames([N,e.className]),style:null==(i=e.style)?void 0:i.layout},I.default.createElement("header",{className:"".concat(N,"__header"),style:null==(r=e.style)?void 0:r.header},I.default.createElement(f,{header:null==e?void 0:e.header,headerName:e.headerName,goBack:e.goBack,exportData:e.exportData})),I.default.createElement(c.Layout,{className:y.getClassName("layout","container")},null==e?void 0:e.leftSider,I.default.createElement(D,{className:"".concat(N,"__content")},I.default.createElement(_,A({},e))),I.default.createElement(E,{className:"".concat(N,"__side"),width:s||240,style:null==(l=e.style)?void 0:l.sider},I.default.createElement(d.default,{sider:null==e?void 0:e.sider}))))))}));e.exports=j},,,,function(e,t,n){"use strict";e.exports='{"toolColor":{"1":{"valid":{"stroke":"rgba(0,0,255,0.50)","fill":"rgba(0,0,255,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.80)"},"validSelected":{"stroke":"rgba(0,15,255,1.00)","fill":"rgba(0,15,255,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,0.60)","fill":"rgba(255,0,0,0.24)"},"validHover":{"stroke":"rgba(0,15,255,0.80)","fill":"rgba(0,15,255,0.64)"},"invalidHover":{"stroke":"rgba(255,0,0,0.50)","fill":"rgba(255,0,0,0.40)"}},"3":{"valid":{"stroke":"rgba(0,255,255,0.50)","fill":"rgba(0,255,255,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.80)"},"validSelected":{"stroke":"rgba(0,212,255,1.00)","fill":"rgba(0,212,255,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,0.60)","fill":"rgba(255,0,0,0.24)"},"validHover":{"stroke":"rgba(0,212,255,0.80)","fill":"rgba(0,212,255,0.64)"},"invalidHover":{"stroke":"rgba(255,0,0,0.50)","fill":"rgba(255,0,0,0.40)"}},"5":{"valid":{"stroke":"rgba(0,255,0,0.50)","fill":"rgba(0,255,0,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.80)"},"validSelected":{"stroke":"rgba(149,255,1.00)","fill":"rgba(149,255,0,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,0.60)","fill":"rgba(255,0,0,0.24)"},"validHover":{"stroke":"rgba(149,255,0,0.80)","fill":"rgba(149,255,0,0.64)"},"invalidHover":{"stroke":"rgba(255,0,0,0.50)","fill":"rgba(255,0,0,0.40)"}},"7":{"valid":{"stroke":"rgba(255,255,0,0.50)","fill":"rgba(255,255,0,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.80)"},"validSelected":{"stroke":"rgba(255,230,102,1.00)","fill":"rgba(255,213,0,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,0.60)","fill":"rgba(255,0,0,0.24)"},"validHover":{"stroke":"rgba(255,230,102,0.80)","fill":"rgba(255,230,102,0.64)"},"invalidHover":{"stroke":"rgba(255,0,0,0.50)","fill":"rgba(255,0,0,0.40)"}},"9":{"valid":{"stroke":"rgba(255,0,255,0.50)","fill":"rgba(255,0,255,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.80)"},"validSelected":{"stroke":"rgba(230,102,255,1.00)","fill":"rgba(213,0,255,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,0.60)","fill":"rgba(255,0,0,0.24)"},"validHover":{"stroke":"rgba(230,102,255,0.80)","fill":"rgba(230,102,255,0.64)"},"invalidHover":{"stroke":"rgba(255,0,0,0.50)","fill":"rgba(255,0,0,0.40)"}}},"attributeColor":[{"valid":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.40)"},"validSelected":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"},"validHover":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.80)"},"invalidHover":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"}},{"valid":{"stroke":"rgba(153,51,255,1.00)","fill":"rgba(153,51,255,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.40)"},"validSelected":{"stroke":"rgba(153,51,255,1.00)","fill":"rgba(153,51,255,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"},"validHover":{"stroke":"rgba(153,51,255,1.00)","fill":"rgba(153,51,255,0.80)"},"invalidHover":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"}},{"valid":{"stroke":"rgba(51,254,51,1.00)","fill":"rgba(51,254,51,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.40)"},"validSelected":{"stroke":"rgba(51,254,51,1.00)","fill":"rgba(51,254,51,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"},"validHover":{"stroke":"rgba(51,254,51,1.00)","fill":"rgba(51,254,51,0.80)"},"invalidHover":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"}},{"valid":{"stroke":"rgba(255,51,255,1.00)","fill":"rgba(255,51,255,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.40)"},"validSelected":{"stroke":"rgba(255,51,255,1.00)","fill":"rgba(255,51,255,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"},"validHover":{"stroke":"rgba(255,51,255,1.00)","fill":"rgba(255,51,255,0.80)"},"invalidHover":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"}},{"valid":{"stroke":"rgba(204,255,51,1.00)","fill":"rgba(204,255,51,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.40)"},"validSelected":{"stroke":"rgba(204,255,51,1.00)","fill":"rgba(204,255,51,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"},"validHover":{"stroke":"rgba(204,255,51,1.00)","fill":"rgba(204,255,51,0.80)"},"invalidHover":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"}},{"valid":{"stroke":"rgba(51,153,255,1.00)","fill":"rgba(51,153,255,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.40)"},"validSelected":{"stroke":"rgba(51,153,255,1.00)","fill":"rgba(51,153,255,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"},"validHover":{"stroke":"rgba(51,153,255,1.00)","fill":"rgba(51,153,255,0.80)"},"invalidHover":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"}},{"valid":{"stroke":"rgba(255,153,51,1.00)","fill":"rgba(255,153,51,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.40)"},"validSelected":{"stroke":"rgba(255,153,51,1.00)","fill":"rgba(255,153,51,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"},"validHover":{"stroke":"rgba(255,153,51,1.00)","fill":"rgba(255,153,51,0.80)"},"invalidHover":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"}},{"valid":{"stroke":"rgba(51,255,238,1.00)","fill":"rgba(51,255,238,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.40)"},"validSelected":{"stroke":"rgba(51,255,238,1.00)","fill":"rgba(51,255,238,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"},"validHover":{"stroke":"rgba(51,255,238,1.00)","fill":"rgba(51,255,238,0.80)"},"invalidHover":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"}},{"valid":{"stroke":"rgba(255,221,51,1.00)","fill":"rgba(255,221,51,0.40)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.40)"},"validSelected":{"stroke":"rgba(255,221,51,1.00)","fill":"rgba(255,221,51,0.80)"},"invalidSelected":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"},"validHover":{"stroke":"rgba(255,221,51,1.00)","fill":"rgba(255,221,51,0.80)"},"invalidHover":{"stroke":"rgba(255,0,0,1.00)","fill":"rgba(255,0,0,0.80)"}}],"lineColor":{"1":"rgba(102, 111, 255, 1 )","3":"rgba(102, 230, 255, 1)","5":"rgba(191, 255, 102, 1)","7":"rgba(255, 230, 102, 1)","9":"rgba(230, 102, 255, 1)"},"attributeLineColor":["rgba(204, 204, 204, 1)","rgba(153, 51, 255, 1)","rgba(51, 254, 51, 1)","rgba(255, 51, 255, 1)","rgba(204, 255, 51, 1)","rgba(51, 153, 255, 1)","rgba(255, 153, 51, 1)","rgba(51, 255, 238, 1)","rgba(255, 221, 51, 1)"],"color":1,"width":2,"opacity":9}'},function(e,t,n){"use strict";var i=n(74).default,a=n(75).default,r=n(42).default,o=n(32),c=n(46),l=n(76),s=n(47),u=n(54);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(s),f=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=function(e,t,n){return t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x=function(){function e(){i(this,e)}return a(e,null,[{key:"copyResultChange",value:function(e,t,n){try{var i=c.jsonParser(e),a=c.jsonParser(n),l="step_".concat(t);if(i[l]){var s=i[l];if(s.result)return s.result=s.result.map((function(e){return t=function(e,t){for(var n in t||(t={}))p.call(t,n)&&y(e,n,t[n]);if(b){var i,a=r(b(t));try{for(a.s();!(i=a.n()).done;)n=i.value,m.call(t,n)&&y(e,n,t[n])}catch(o){a.e(o)}finally{a.f()}}return e}({},e),n={id:o.uuid(8,62)},g(t,v(n));var t,n})),a[l]=s,JSON.stringify(a)}return e}catch(u){return e}}},{key:"isResultSourceMatchedDependence",value:function(e,t){var n=null==e?void 0:e.map((function(e){return e.sourceID})).sort(),i=null==t?void 0:t.map((function(e){return e.id})).sort();return h.default.isEqual(n,i)}},{key:"deltaUpdateBasicResultList",value:function(e,t){var n=null==e?void 0:e.map((function(e){return e.sourceID})).sort();return t.filter((function(e){return!n.includes(e.id)}))}},{key:"getInitialResultList",value:function(e,t,n,i,a){var r=null!=e?e:[];switch(n.tool){case l.EToolName.Tag:case l.EToolName.Text:if(n.dataSourceStep>0){var o=this.deltaUpdateBasicResultList(r,i);if(o.length>0)return r.concat(t.getInitResultList(n.dataSourceStep,o))}return!0!==a?r:t.getInitResultList(n.dataSourceStep,i);default:return r}}},{key:"dataCorrection",value:function(e,t,n,i){var a,r;try{var o=u.getStepInfo(n,i),l="step_".concat(o.step),s=c.jsonParser(e),d=c.jsonParser(t),f=null==(a=s[l])?void 0:a.result,g=null==(r=d[l])?void 0:r.result;if(!g)return e;if(h.default.isEqual(f.sort(this.idCmp),g.sort(this.idCmp)))return e;var v=this.findDeletedIds(f,g);if(0===v.length)return e;var b=n,p=this.getStepKeys(s).sort();return this.deleteRes(s,b,v,p),JSON.stringify(s)}catch(m){return console.error(m),e}}},{key:"idCmp",value:function(e,t){var n=e.id,i=t.id;return n<i?-1:n>i?1:0}},{key:"findDeletedIds",value:function(e,t){return this.findDeletedItems(t,e).map((function(e){return e.id}))}},{key:"findDeletedItems",value:function(e,t){var n=[];return e.forEach((function(e){t.some((function(t){return t.id===e.id}))||n.push(e)})),n}},{key:"getStepKeys",value:function(e){return Object.keys(e).map((function(e){return parseInt(e.replace("step_",""),10)})).filter((function(e){return!isNaN(e)}))}},{key:"deleteRes",value:function(e,t,n,i){var a=this;i.forEach((function(r){if(r>t){var o=e["step_".concat(r)];if([l.EToolName.FolderTag,l.EToolName.Segmentation].includes(o.tool))return;if(o.dataSourceStep===t){var c=[];o.result=o.result.filter((function(e){return!n.includes(e.sourceID)||(c.push(e.id),!1)})),a.deleteRes(e,r,c,i)}else o.result=o.result.filter((function(e){return!n.includes(e.sourceID)}))}}))}}]),e}();e.exports=x},function(e,t,n){"use strict";var i=n(89).default,a=n(73).default,r=n(42).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(46),c=n(54),l=Object.defineProperty,s=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,g=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},v=function(e,t){for(var n in t||(t={}))h.call(t,n)&&g(e,n,t[n]);if(d){var i,a=r(d(t));try{for(a.s();!(i=a.n()).done;){n=i.value;f.call(t,n)&&g(e,n,t[n])}}catch(o){a.e(o)}finally{a.f()}}return e},b=function(e,t){return s(e,u(t))};t.composeResult=function(e,t,n,r){var l=t.step,s=t.stepList,u=n.rect,d=n.basicRectID;try{var h=o.jsonParser(e),f=c.getCurrentStepInfo(l,s),g=f.dataSourceStep,p="step_".concat(f.step);if(h[p]){var m=h[p];return Object.assign(m,r),m.result?(JSON.stringify(m.result)===JSON.stringify(u)||(m.result=d?[].concat(a(m.result.filter((function(e){return!(e.sourceID&&e.sourceID===d)}))),a(u.filter((function(e){return e.sourceID&&e.sourceID===d})))):u),JSON.stringify(h)):JSON.stringify(b(v({},h),i({},p,b(v(v({},h[p]),r),{result:u}))))}return JSON.stringify(b(v({},h),i({},p,b(v({dataSourceStep:g},r),{toolName:s[l-1].tool,result:u}))))}catch(y){return e}},t.composeResultWithBasicImgInfo=function(e,t){return JSON.stringify(v(v({},o.jsonParser(e)),t))}},function(e,t,n){"use strict";var i=n(74).default,a=n(75).default,r=n(187),o=n(47),c=n(46);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=l(o),u=function(){function e(){i(this,e)}return a(e,null,[{key:"getPageInfo",value:function(e){var t=e.imgIndex,n=e.imgList,i=e.basicResultList;return{fileIndex:t,basicIndex:e.basicIndex,basicList:i,fileList:n,step:e.step,stepList:e.stepList}}},{key:"getNextPageInfo",value:function(t,n,i){var a=e.getPageInfo(n),o=e.getPageInfo(n).fileIndex,c=e.getNextFileIndex(t,a,i),l=e.getNextBasicIndex(t,a.basicIndex),s=c!==o,u=e.hasNextBasicIndex(t,a),d={fileIndex:c,basicIndex:l,fileIndexChanged:s,basicIndexChanged:u};return u?(d.fileIndexChanged=!1,d.fileIndex=o,d):(d.basicIndex=t===r.EPageTurningOperation.Backward?e.getBasicResultIndexForNextFile(a,d.fileIndex):0,d)}}]),e}(),d=u;d.getNextBasicIndex=function(e,t){return t+(e===r.EPageTurningOperation.Forward?1:-1)},d.hasNextBasicIndex=function(e,t){var n=t.basicList;if((null==n?void 0:n.length)>0){var i=u.getNextBasicIndex(e,t.basicIndex);return i>=0&&n.length>i}return!1},d.getBasicResultIndexForNextFile=function(e,t){var n,i=e.stepList,a=e.step,r=e.fileList,o=i.find((function(e){return e.step===a})),l=null==o?void 0:o.dataSourceStep;if(l){var s=null==(n=c.jsonParser(r[t].result)["step_".concat(l)])?void 0:n.result;return s&&(null==s?void 0:s.length)?(null==s?void 0:s.length)-1:0}return 0},d.getNextFileIndex=function(e,t,n){var i=t.fileIndex,a=t.fileList,o=void 0!==n?n:i;switch(e){case r.EPageTurningOperation.Forward:o+=1;break;case r.EPageTurningOperation.Backward:o-=1;case r.EPageTurningOperation.Jump:}return s.default.inRange(o,0,a.length)?o:i},e.exports=d},function(e,t,n){"use strict";var i=n(31).default,a=n(42).default,r=n(58),o=n(28),c=n(29),l=n(47),s=n(0),u=n(33),d=n(222),h=n(90),f=n(223),g=n(32),v=n(23),b=n(54);function p(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var m=p(l),y=p(s),x=Object.defineProperty,C=Object.defineProperties,w=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,P=function(e,t,n){return t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},S=function(e,t){for(var n in t||(t={}))k.call(t,n)&&P(e,n,t[n]);if(I){var i,r=a(I(t));try{for(r.s();!(i=r.n()).done;){n=i.value;L.call(t,n)&&P(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e},O=u.connect((function(e){var t=m.default.pickBy(e.annotation,(function(e,t){return["imgList","imgIndex","stepList","step","toolInstance","annotationEngine","loading"].includes(t)}));return S({imgAttribute:e.imgAttribute,toolStyle:e.toolStyle},t)}),null,null,{context:o.LabelBeeContext})((function(e){var t=s.useState(0),n=i(t,2)[1],a=e.imgAttribute,o=e.toolStyle,l=e.toolInstance,u=e.annotationEngine,p=e.imgList,m=e.imgIndex,x=e.dataInjectionAtCreation,I=e.renderEnhance,k=e.customRenderStyle,L=e.stepList,P=e.step,O=e.drawLayerSlot,A=s.useState({zoom:1,currentPos:{x:0,y:0}}),T=i(A,2),E=T[0],D=T[1],N=s.useRef(null),R=s.useRef(null),M=h(N);s.useEffect((function(){r.store.dispatch(f.InitToolStyleConfig())}),[]),s.useEffect((function(){if(u){switch(v.i18n.language){case"cn":case"en":u.setLang(v.i18n.language)}null==u||u.setDataInjectionAtCreation(x),null==u||u.setRenderEnhance(I),k&&(null==u||u.setCustomRenderStyle(k))}}),[u,x,I,k]),s.useEffect((function(){var e=function(e,t){D({zoom:e,currentPos:t})},t=function(e){D(e)};return l&&(l.singleOn("messageError",(function(e){c.message.error(e)})),l.singleOn("messageInfo",(function(e){c.message.info(e)})),l.singleOn("changeAnnotationShow",(function(){n((function(e){return e+1}))})),l.on("renderZoom",e),l.on("dragMove",t)),function(){l&&(l.unbind("renderZoom",e),l.unbind("dragMove",t))}}),[l]),s.useEffect((function(){l&&l.setImgAttribute(a)}),[a]),s.useEffect((function(){l&&l.setStyle(o),u&&u.setStyle(o)}),[o]),s.useEffect((function(){(null==l?void 0:l.setSize)&&l.setSize(M),u&&u.setSize(M)}),[M]),s.useEffect((function(){var e=b.getCurrentStepInfo(P,L);null==l||l.setConfig(e.config)}),[L]);var _;return y.default.createElement("div",{ref:N,className:"annotationOperation"},y.default.createElement("div",{className:"canvas",ref:R,style:M,id:"toolContainer"},null==O?void 0:O(E)),!0===(null==l?void 0:l.isImgError)&&y.default.createElement(d,(_=S({},M),C(_,w({reloadImage:function(){var e=null==p?void 0:p[m];(null==e?void 0:e.url)&&g.ImgUtils.load(e.url).then((function(e){u.setImgNode(e)}))},backgroundColor:"#e2e2e2",ignoreOffsetY:!0})))))}));e.exports=O},function(e,t,n){"use strict";var i=n(31).default,a=n(0);e.exports=function(e){var t=a.useRef(0),n=a.useState(e),r=i(n,2),o=r[0],c=r[1],l=a.useCallback((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){c(e)}))}),[]);return a.useEffect((function(){return function(){return cancelAnimationFrame(t.current)}}),[]),[o,l]}},function(e,t,n){"use strict";var i=n(0),a=n(29),r=n(52);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=o(i);e.exports=function(e){var t=e.path,n=e.tips;return t||n?c.default.createElement("div",{className:"".concat(r.prefix,"-tips")},c.default.createElement(a.Tooltip,{placement:"bottomRight",title:n},c.default.createElement("span",{className:"".concat(r.prefix,"-tips__leftContent"),title:n},n)),c.default.createElement(a.Tooltip,{placement:"bottomRight",title:t},c.default.createElement("span",{className:"".concat(r.prefix,"-tips__path")},t))):null}},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(29),o=n(392),c=n(225),l=n(33),s=n(28);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var d=u(a);var h=l.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:s.LabelBeeContext})((function(e){var t,n=e.toolInstance,l=a.useState(0),s=i(l,2)[1];if(a.useEffect((function(){n&&(n.singleOn("selectedChange",(function(){s((function(e){return e+1}))})),n.singleOn("updateTextAttribute",(function(){s((function(e){return e+1}))})),n.singleOn("messageError",(function(e){r.message.error(e)})))}),[n]),!n)return null;var u=n.config;return d.default.createElement("div",null,(null==(t=null==n?void 0:n.config)?void 0:t.textConfigurable)&&n.selectedID&&d.default.createElement(o,{onChange:n.textChange,textValue:n.selectedText,checkString:c.TextUtils.checkString(null==u?void 0:u.textCheckType,null==u?void 0:u.customFormat),textCheckType:u.textCheckType}))}));e.exports=h},function(e,t,n){"use strict";var i=n(31).default,a=n(76),r=n(225),o=n(29),c=n(0),l=n(189),s=n(190),u=n(46),d=n(30);function h(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var f=h(c);e.exports=function(e){var t=d.useTranslation().t,n=e.onChange,h=e.textValue,g=e.checkString,v=e.textCheckType,b=c.useState(0),p=i(b,2),m=p[0],y=p[1],x=c.useState(!1),C=i(x,2),w=C[0],I=C[1],k=c.useState(!1),L=i(k,2),P=L[0],S=L[1],O=c.useState(!1),A=i(O,2),T=A[0],E=A[1],D=f.default.createElement("a",null,f.default.createElement(o.Tooltip,{placement:"bottom",title:t("EmptyTextInput")},f.default.createElement("img",{onMouseEnter:function(){return E(!0)},onMouseLeave:function(){return E(!1)},style:{marginLeft:6},src:T?l:s,onClick:function(e){e.stopPropagation(),n("")}})));c.useEffect((function(){h&&y(h.length)}),[]),c.useEffect((function(){var e;if(void 0===h||""===h)I(!1);else try{h&&I(!new RegExp(g).test(h))}catch(n){I(!0),o.message.destroy(),o.message.error(t("RegularExpIncorrectly"))}y(null!=(e=null==h?void 0:h.length)?e:0)}),[h]);return f.default.createElement("div",{className:"textInputContainer"},f.default.createElement("div",{className:"label"},t("TextInput"),D),f.default.createElement("div",{className:u.classnames({textareaContainer:!0,focus:P})},f.default.createElement("div",{className:u.classnames({toolTextAreaBox:!0,toolTextAreaBoxFocus:P})},f.default.createElement(o.Input.TextArea,{style:{resize:"none",height:120,wordBreak:"break-all"},maxLength:a.TEXT_ATTRIBUTE_MAX_LENGTH,onKeyDownCapture:function(e){e.stopPropagation()},onKeyUpCapture:function(e){e.stopPropagation()},onChange:function(e){n(e.target.value),y(e.target.value.length)},onFocus:function(e){return S(!0)},onBlur:function(e){!function(e){if(w)return n(""),o.message.error(r.TextUtils.getErrorNotice(v)),!0;n(e.target.value,!0)}(e),S(!1)},value:h,onKeyDown:function(e){e.stopPropagation()},className:w?"warning":""}),f.default.createElement("div",{className:"textAreaFooter"},f.default.createElement("span",{className:"wordCount"},f.default.createElement("span",{className:m>a.TEXT_ATTRIBUTE_MAX_LENGTH||w?"warning":""},m),"/",f.default.createElement("span",null,a.TEXT_ATTRIBUTE_MAX_LENGTH))))))}},function(e,t,n){"use strict";var i=n(31).default,a=n(29),r=n(0),o=n(190),c=n(226),l=n(58),s=n(189),u=n(30);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(r);e.exports=function(){var e=r.useState(!1),t=i(e,2),n=t[0],d=t[1],f=u.useTranslation().t;return h.default.createElement(a.Tooltip,{placement:"bottom",title:f("RestoreImageAttributes")},h.default.createElement("img",{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},style:{marginLeft:6},src:n?s:o,onClick:function(e){e.stopPropagation(),l.store.dispatch(c.InitImgAttribute())}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(33),r=n(54),o=n(46),c=n(395),l=n(396),s=n(28);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var d=u(i),h=function(e){var t,n,i=r.getCurrentStepInfo(null==(t=e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList);return{toolInstance:e.annotation.toolInstance,stepInfo:i,imgList:e.annotation.imgList,imgIndex:e.annotation.imgIndex}},f=a.connect(h,null,null,{context:s.LabelBeeContext})((function(e){var t=e.toolInstance,n=(e.stepInfo,l(t)),i=[n.copyPrevious,n.empty,n.setValidity];return d.default.createElement(c,{allOperation:i})})),g=a.connect(h,null,null,{context:s.LabelBeeContext})((function(e){var t=e.toolInstance,n=e.stepInfo,i=l(t),a=o.jsonParser(null==n?void 0:n.config),r=[i.empty];return 0===(null==n?void 0:n.dataSourceStep)&&r.push(i.setValidity),(null==a?void 0:a.copyBackwardResult)&&r.push(i.copyPrevious),d.default.createElement(c,{allOperation:r})}));t.PointCloudOperation=f,t.default=g},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(29),o=n(30),c=n(52);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=l(a),u=function(e){var t=e.info,n=o.useTranslation().t;return t.key.startsWith("sure")?s.default.createElement("div",{key:t.key},"".concat(n("ConfirmTo")).concat(t.name.slice(0),"\uff1f")):s.default.createElement("span",null,t.name)},d=function(e){var t=e.icon;return"string"===typeof t?s.default.createElement("img",{width:23,height:25,src:t}):t};e.exports=function(e){var t=e.allOperation,n=a.useRef(null),l=a.useState(null),h=i(l,2),f=h[0],g=h[1],v=o.useTranslation().t,b=Math.floor(24/t.length);return s.default.createElement("div",{className:"generalOperation",ref:n},t.map((function(e,t){return s.default.createElement(r.Col,{span:b,key:t},s.default.createElement("div",{key:e.key,className:"item",onMouseEnter:function(){g(e.key)},onMouseLeave:function(){g(null)}},s.default.createElement(r.Popconfirm,{title:s.default.createElement(u,{info:e}),placement:"topRight",okText:v("Confirm"),cancelText:v("Cancel"),getPopupContainer:function(){var e;return null!=(e=n.current)?e:document.body},onConfirm:e.onClick,overlayClassName:"".concat(c.prefix,"-pop-confirm")},s.default.createElement("div",{className:"icon"},s.default.createElement(d,{icon:e.key===f?e.hoverSvg:e.imgSvg})),s.default.createElement("div",{className:"toolName",style:{color:e.key===f?"#666fff":""}},e.name))))})))}},function(e,t,n){"use strict";var i=n(31).default,a=n(42).default,r=n(397),o=n(398),c=n(399),l=n(400),s=n(63),u=n(30),d=n(0),h=n(57),f=n(58),g=n(28);function v(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var b=v(d),p=Object.defineProperty,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=function(e,t,n){return t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},w=function(e,t){for(var n in t||(t={}))y.call(t,n)&&C(e,n,t[n]);if(m){var i,r=a(m(t));try{for(r.s();!(i=r.n()).done;){n=i.value;x.call(t,n)&&C(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e};e.exports=function(e){var t=d.useState(0),n=i(t,2),a=n[0],v=n[1],p=u.useTranslation(),m=p.t,y=p.i18n,x=g.useSelector((function(e){var t=e.annotation;return{currentData:t.imgList[t.imgIndex]}})).currentData,C={height:"25px",lineHeight:"25px",display:"flex",justifyContent:"center",alignItems:"center"},I={name:m("ClearLabel"),key:"empty",imgSvg:r,hoverSvg:o,onClick:function(){null==e||e.clearResult()}},k={name:m(!1===(null==e?void 0:e.valid)?"SetAsValid":"SetAsInvalid"),key:"setValidity",imgSvg:b.default.createElement(s.StopOutlined,{style:C}),hoverSvg:b.default.createElement(s.StopOutlined,{style:w({color:"#666fff"},C)}),onClick:function(){e.setValid(!e.valid),setTimeout((function(){v((function(e){return e+1}))}))}},L={name:m("CopyThePrevious"),key:"copyPrevious",imgSvg:c,hoverSvg:l,onClick:function(){f.store.dispatch(h.CopyBackWordResult())}};return d.useMemo((function(){return{empty:I,setValidity:k,copyPrevious:L}}),[e,a,x,y.language])}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='25px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3e%e5%bd%a2%e7%8a%b6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-46.000000%2c -141.000000)' fill-rule='nonzero'%3e %3cg id='%e6%b8%85%e7%a9%ba%e6%a0%87%e6%b3%a8' transform='translate(18.000000%2c 123.000000)'%3e %3cg id='icon_clear_normal' transform='translate(28.000000%2c 18.000000)'%3e %3crect id='icon_clear' fill='black' opacity='0' x='0' y='0.00780487805' width='24' height='24'%3e%3c/rect%3e %3cpath d='M24%2c10.6934683 C24%2c9.29483367 22.8777821%2c8.15502957 21.4955096%2c8.15502957 L15.5587661%2c8.15502957 L15.5587661%2c3.13276778 C15.5587661%2c1.40881408 14.1764936%2c0.00780487805 12.4755955%2c0.00780487805 L11.6485748%2c0.00780487805 C9.94767669%2c0.00780487805 8.56540414%2c1.40881408 8.56540414%2c3.13276778 L8.56540414%2c8.15502957 L2.5021476%2c8.15502957 C1.12221788%2c8.15502957 0%2c9.29245908 0%2c10.6934683 C0%2c11.835647 0.754392815%2c12.7926075 1.78055447%2c13.1108028 L1.78055447%2c21.9680305 C1.78055447%2c23.093587 2.68254588%2c24.0078049 3.79304959%2c24.0078049 L20.3615775%2c24.0078049 C21.4720812%2c24.0078049 22.3740726%2c23.093587 22.3740726%2c21.9680305 L22.3740726%2c13.0609364 C23.3205779%2c12.6999984 24%2c11.7786568 24%2c10.6934683 Z M10.114018%2c3.13276778 C10.114018%2c2.27554011 10.8028114%2c1.5774101 11.6485748%2c1.5774101 L12.4755955%2c1.5774101 C13.3213588%2c1.5774101 14.0101523%2c2.27554011 14.0101523%2c3.13276778 L14.0101523%2c8.15502957 L10.114018%2c8.15502957 L10.114018%2c3.13276778 Z M20.3615775%2c22.4381997 L17.8055447%2c22.4381997 L17.8055447%2c19.2206277 C17.8055447%2c18.7860774 17.4588052%2c18.4370124 17.0324092%2c18.4370124 C16.6060133%2c18.4370124 16.2592737%2c18.788452 16.2592737%2c19.2206277 L16.2592737%2c22.4381997 L12.8527919%2c22.4381997 L12.8527919%2c19.2206277 C12.8527919%2c18.7860774 12.5060523%2c18.4370124 12.0796564%2c18.4370124 C11.6509176%2c18.4370124 11.3065209%2c18.788452 11.3065209%2c19.2206277 L11.3065209%2c22.4381997 L7.89769621%2c22.4381997 L7.89769621%2c19.2206277 C7.89769621%2c18.7860774 7.55095666%2c18.4370124 7.12456072%2c18.4370124 C6.69582194%2c18.4370124 6.35142522%2c18.788452 6.35142522%2c19.2206277 L6.35142522%2c22.4381997 L3.79304959%2c22.4381997 C3.53768059%2c22.4381997 3.32916829%2c22.226861 3.32916829%2c21.9680305 L3.32916829%2c13.2295324 L20.8254588%2c13.2295324 L20.8254588%2c21.9656559 C20.8254588%2c22.226861 20.6169465%2c22.4381997 20.3615775%2c22.4381997 Z M21.4978524%2c11.6599272 L2.5021476%2c11.6599272 C1.97500976%2c11.6599272 1.54861382%2c11.2253769 1.54861382%2c10.6934683 C1.54861382%2c10.1591851 1.9773526%2c9.7246348 2.5021476%2c9.7246348 L21.4955096%2c9.7246348 C22.0226474%2c9.7246348 22.4513862%2c10.1591851 22.4513862%2c10.6934683 C22.4513862%2c11.2277514 22.0226474%2c11.6599272 21.4978524%2c11.6599272 Z' id='%e5%bd%a2%e7%8a%b6' fill='%23666666'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_clear_a%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-166.000000%2c -141.000000)' fill-rule='nonzero'%3e %3cg id='%e6%b8%85%e7%a9%ba%e6%a0%87%e6%b3%a8%e5%a4%87%e4%bb%bd' transform='translate(138.000000%2c 123.000000)'%3e %3cg id='icon_clear' transform='translate(28.000000%2c 18.000000)'%3e %3crect id='icon_clear_active' fill='black' opacity='0' x='0' y='0.00780487805' width='24' height='24'%3e%3c/rect%3e %3cpath d='M24%2c10.6934683 C24%2c9.29483367 22.8777821%2c8.15502957 21.4955096%2c8.15502957 L15.5587661%2c8.15502957 L15.5587661%2c3.13276778 C15.5587661%2c1.40881408 14.1764936%2c0.00780487805 12.4755955%2c0.00780487805 L11.6485748%2c0.00780487805 C9.94767669%2c0.00780487805 8.56540414%2c1.40881408 8.56540414%2c3.13276778 L8.56540414%2c8.15502957 L2.5021476%2c8.15502957 C1.12221788%2c8.15502957 0%2c9.29245908 0%2c10.6934683 C0%2c11.835647 0.754392815%2c12.7926075 1.78055447%2c13.1108028 L1.78055447%2c21.9680305 C1.78055447%2c23.093587 2.68254588%2c24.0078049 3.79304959%2c24.0078049 L20.3615775%2c24.0078049 C21.4720812%2c24.0078049 22.3740726%2c23.093587 22.3740726%2c21.9680305 L22.3740726%2c13.0609364 C23.3205779%2c12.6999984 24%2c11.7786568 24%2c10.6934683 Z M10.114018%2c3.13276778 C10.114018%2c2.27554011 10.8028114%2c1.5774101 11.6485748%2c1.5774101 L12.4755955%2c1.5774101 C13.3213588%2c1.5774101 14.0101523%2c2.27554011 14.0101523%2c3.13276778 L14.0101523%2c8.15502957 L10.114018%2c8.15502957 L10.114018%2c3.13276778 Z M20.3615775%2c22.4381997 L17.8055447%2c22.4381997 L17.8055447%2c19.2206277 C17.8055447%2c18.7860774 17.4588052%2c18.4370124 17.0324092%2c18.4370124 C16.6060133%2c18.4370124 16.2592737%2c18.788452 16.2592737%2c19.2206277 L16.2592737%2c22.4381997 L12.8527919%2c22.4381997 L12.8527919%2c19.2206277 C12.8527919%2c18.7860774 12.5060523%2c18.4370124 12.0796564%2c18.4370124 C11.6509176%2c18.4370124 11.3065209%2c18.788452 11.3065209%2c19.2206277 L11.3065209%2c22.4381997 L7.89769621%2c22.4381997 L7.89769621%2c19.2206277 C7.89769621%2c18.7860774 7.55095666%2c18.4370124 7.12456072%2c18.4370124 C6.69582194%2c18.4370124 6.35142522%2c18.788452 6.35142522%2c19.2206277 L6.35142522%2c22.4381997 L3.79304959%2c22.4381997 C3.53768059%2c22.4381997 3.32916829%2c22.226861 3.32916829%2c21.9680305 L3.32916829%2c13.2295324 L20.8254588%2c13.2295324 L20.8254588%2c21.9656559 C20.8254588%2c22.226861 20.6169465%2c22.4381997 20.3615775%2c22.4381997 Z M21.4978524%2c11.6599272 L2.5021476%2c11.6599272 C1.97500976%2c11.6599272 1.54861382%2c11.2253769 1.54861382%2c10.6934683 C1.54861382%2c10.1591851 1.9773526%2c9.7246348 2.5021476%2c9.7246348 L21.4955096%2c9.7246348 C22.0226474%2c9.7246348 22.4513862%2c10.1591851 22.4513862%2c10.6934683 C22.4513862%2c11.2277514 22.0226474%2c11.6599272 21.4978524%2c11.6599272 Z' id='%e5%bd%a2%e7%8a%b6' fill='%23666FFF'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_invalid%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='24' height='24'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-49.000000%2c -234.000000)'%3e %3cg id='%e6%a0%87%e6%b3%a8%e6%97%a0%e6%95%88' transform='translate(21.000000%2c 215.000000)'%3e %3cg id='icon_invalid' transform='translate(28.000000%2c 19.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg%3e%3c/g%3e %3cpath d='M14.8132711%2c20.5 L3.35714286%2c20.5 C2.91670867%2c20.5 2.57142857%2c20.1826213 2.57142857%2c19.8055556 L2.57142857%2c3.19444444 C2.57142857%2c2.81737868 2.91670867%2c2.5 3.35714286%2c2.5 L20.6428571%2c2.5 C21.0832913%2c2.5 21.4285714%2c2.81737868 21.4285714%2c3.19444444 L21.4285714%2c15.2898676 L23%2c16.4514553 L23%2c3.19444444 C23%2c1.97602093 21.938175%2c1 20.6428571%2c1 L3.35714286%2c1 C2.06182497%2c1 1%2c1.97602093 1%2c3.19444444 L1%2c19.8055556 C1%2c21.0239791 2.06182497%2c22 3.35714286%2c22 L15.9411765%2c22 L14.8132711%2c20.5 Z' id='%e8%b7%af%e5%be%84' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M8.5%2c10 C9.88071187%2c10 11%2c8.88071187 11%2c7.5 C11%2c6.11928813 9.88071187%2c5 8.5%2c5 C7.11928813%2c5 6%2c6.11928813 6%2c7.5 C6%2c8.88071187 7.11928813%2c10 8.5%2c10 Z M8.5%2c8.57142857 C7.90826634%2c8.57142857 7.42857143%2c8.09173366 7.42857143%2c7.5 C7.42857143%2c6.90826634 7.90826634%2c6.42857143 8.5%2c6.42857143 C9.09173366%2c6.42857143 9.57142857%2c6.90826634 9.57142857%2c7.5 C9.57142857%2c8.09173366 9.09173366%2c8.57142857 8.5%2c8.57142857 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M1.93578343%2c18 C4.08872055%2c14.8551688 6.74336715%2c13.7936147 9.20632589%2c14.9383326 C9.39666832%2c15.0267988 9.58966667%2c15.1227541 9.8383972%2c15.2511189 C11.2590222%2c15.9842746 11.4672631%2c16.0801404 12.0929951%2c16.2047792 C13.2715953%2c16.4395429 14.3253377%2c16.0173433 15.3845587%2c14.7865988 C17.834834%2c11.9395412 19.5284667%2c10.6940174 22%2c10.3111164 L21.8385808%2c9 C19.0487146%2c9.43221863 17.1525949%2c10.8266545 14.5357091%2c13.8673024 C13.7408033%2c14.7909303 13.0776295%2c15.056642 12.2992772%2c14.9016031 C11.8197086%2c14.8060784 11.6287028%2c14.7181469 10.3315315%2c14.0487032 C10.0702502%2c13.9138612 9.86453995%2c13.8115857 9.65795075%2c13.7155685 C6.66190483%2c12.3230858 3.4571787%2c13.6046086 1%2c17.1938506 L1.93578343%2c18 Z' id='%e8%b7%af%e5%be%84' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M19.5%2c23 C21.4329966%2c23 23%2c21.4329966 23%2c19.5 C23%2c17.5670034 21.4329966%2c16 19.5%2c16 C17.5670034%2c16 16%2c17.5670034 16%2c19.5 C16%2c21.4329966 17.5670034%2c23 19.5%2c23 Z M19.5%2c22 C18.1192881%2c22 17%2c20.8807119 17%2c19.5 C17%2c18.1192881 18.1192881%2c17 19.5%2c17 C20.8807119%2c17 22%2c18.1192881 22%2c19.5 C22%2c20.8807119 20.8807119%2c22 19.5%2c22 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M21.2928932%2c17.7692308 L21.6464466%2c18.1227842 L21.6464466%2c17.4156774 L21.2928932%2c17.7692308 Z M17.7692308%2c21.2928932 L17.4156774%2c21.6464466 L18.1227842%2c21.6464466 L17.7692308%2c21.2928932 Z M17.7071068%2c21.2307692 L17.3535534%2c20.8772158 L17.3535534%2c21.5843226 L17.7071068%2c21.2307692 Z M21.2307692%2c17.7071068 L21.5843226%2c17.3535534 L20.8772158%2c17.3535534 L21.2307692%2c17.7071068 Z' id='%e7%9f%a9%e5%bd%a2' stroke='%23666666' mask='url(%23mask-2)'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_invalid_a%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='24' height='24'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-166.000000%2c -234.000000)'%3e %3cg id='%e6%a0%87%e6%b3%a8%e6%97%a0%e6%95%88%e5%a4%87%e4%bb%bd' transform='translate(138.000000%2c 215.000000)'%3e %3cg id='icon_invalid' transform='translate(28.000000%2c 19.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='icon_invalid_active'%3e%3c/g%3e %3cpath d='M14.8132711%2c20.5 L3.35714286%2c20.5 C2.91670867%2c20.5 2.57142857%2c20.1826213 2.57142857%2c19.8055556 L2.57142857%2c3.19444444 C2.57142857%2c2.81737868 2.91670867%2c2.5 3.35714286%2c2.5 L20.6428571%2c2.5 C21.0832913%2c2.5 21.4285714%2c2.81737868 21.4285714%2c3.19444444 L21.4285714%2c15.2898676 L23%2c16.4514553 L23%2c3.19444444 C23%2c1.97602093 21.938175%2c1 20.6428571%2c1 L3.35714286%2c1 C2.06182497%2c1 1%2c1.97602093 1%2c3.19444444 L1%2c19.8055556 C1%2c21.0239791 2.06182497%2c22 3.35714286%2c22 L15.9411765%2c22 L14.8132711%2c20.5 Z' id='%e8%b7%af%e5%be%84' fill='%23666FFF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M8.5%2c10 C9.88071187%2c10 11%2c8.88071187 11%2c7.5 C11%2c6.11928813 9.88071187%2c5 8.5%2c5 C7.11928813%2c5 6%2c6.11928813 6%2c7.5 C6%2c8.88071187 7.11928813%2c10 8.5%2c10 Z M8.5%2c8.57142857 C7.90826634%2c8.57142857 7.42857143%2c8.09173366 7.42857143%2c7.5 C7.42857143%2c6.90826634 7.90826634%2c6.42857143 8.5%2c6.42857143 C9.09173366%2c6.42857143 9.57142857%2c6.90826634 9.57142857%2c7.5 C9.57142857%2c8.09173366 9.09173366%2c8.57142857 8.5%2c8.57142857 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%236674FF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M1.93578343%2c18 C4.08872055%2c14.8551688 6.74336715%2c13.7936147 9.20632589%2c14.9383326 C9.39666832%2c15.0267988 9.58966667%2c15.1227541 9.8383972%2c15.2511189 C11.2590222%2c15.9842746 11.4672631%2c16.0801404 12.0929951%2c16.2047792 C13.2715953%2c16.4395429 14.3253377%2c16.0173433 15.3845587%2c14.7865988 C17.834834%2c11.9395412 19.5284667%2c10.6940174 22%2c10.3111164 L21.8385808%2c9 C19.0487146%2c9.43221863 17.1525949%2c10.8266545 14.5357091%2c13.8673024 C13.7408033%2c14.7909303 13.0776295%2c15.056642 12.2992772%2c14.9016031 C11.8197086%2c14.8060784 11.6287028%2c14.7181469 10.3315315%2c14.0487032 C10.0702502%2c13.9138612 9.86453995%2c13.8115857 9.65795075%2c13.7155685 C6.66190483%2c12.3230858 3.4571787%2c13.6046086 1%2c17.1938506 L1.93578343%2c18 Z' id='%e8%b7%af%e5%be%84' fill='%23666FFF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M19.5%2c23 C21.4329966%2c23 23%2c21.4329966 23%2c19.5 C23%2c17.5670034 21.4329966%2c16 19.5%2c16 C17.5670034%2c16 16%2c17.5670034 16%2c19.5 C16%2c21.4329966 17.5670034%2c23 19.5%2c23 Z M19.5%2c22 C18.1192881%2c22 17%2c20.8807119 17%2c19.5 C17%2c18.1192881 18.1192881%2c17 19.5%2c17 C20.8807119%2c17 22%2c18.1192881 22%2c19.5 C22%2c20.8807119 20.8807119%2c22 19.5%2c22 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%236674FF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M21.2928932%2c17.7692308 L21.6464466%2c18.1227842 L21.6464466%2c17.4156774 L21.2928932%2c17.7692308 Z M17.7692308%2c21.2928932 L17.4156774%2c21.6464466 L18.1227842%2c21.6464466 L17.7692308%2c21.2928932 Z M17.7071068%2c21.2307692 L17.3535534%2c20.8772158 L17.3535534%2c21.5843226 L17.7071068%2c21.2307692 Z M21.2307692%2c17.7071068 L21.5843226%2c17.3535534 L20.8772158%2c17.3535534 L21.2307692%2c17.7071068 Z' id='%e7%9f%a9%e5%bd%a2' stroke='%23666FFF' mask='url(%23mask-2)'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(29),a=n(33),r=n(47),o=n(0),c=n(226),l=n(58),s=n(28),u=n(402),d=n(403),h=n(404),f=n(405),g=n(406),v=n(30);function b(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var p=b(o);var m=a.connect((function(e){return{imgAttribute:e.imgAttribute}}),null,null,{context:s.LabelBeeContext})((function(e){var t=e.imgAttribute,n=t.contrast,a=t.saturation,s=t.brightness,b=t.zoomRatio,m=t.isOriginalSize,y=v.useTranslation().t,x=r.throttle((function(e){l.store.dispatch(c.default.UpdateImgAttribute(e))}),60,{trailing:!0}),C=[{name:"Saturation",min:-100,max:500,step:2,onChange:function(e){return x({saturation:e})},value:a,svg:u},{name:"Contrast",min:-100,max:300,step:2,onChange:function(e){return x({contrast:e})},value:n,svg:d},{name:"Exposure",min:-100,max:400,step:2,onChange:function(e){return x({brightness:e})},value:s,svg:h},{name:"ScreenRatio",min:.1,max:10,step:.1,onChange:function(e){return x({zoomRatio:e})},value:b,svg:f}];return o.useEffect((function(){return function(){l.store.dispatch(c.default.InitImgAttribute())}}),[]),p.default.createElement("div",null,C.map((function(e,t){return p.default.createElement("div",{className:"imgAttributeController",key:"option_".concat(t)},p.default.createElement(i.Row,{className:"tools",style:{padding:"0px 0"}},p.default.createElement(i.Col,{span:24},p.default.createElement("span",{className:"singleTool"},p.default.createElement("img",{width:12,height:12,src:e.svg}),p.default.createElement("span",{className:"toolName"},y(e.name))))),p.default.createElement(i.Row,null,p.default.createElement(i.Col,{span:20},p.default.createElement(i.Slider,{min:e.min,max:e.max,step:e.step,value:e.value,onChange:e.onChange,trackStyle:{background:"#666fff"}})),p.default.createElement(i.Col,{span:4},p.default.createElement(i.Input,{value:e.value,disabled:!0,style:{fontSize:12,marginBottom:23,padding:"0px 2px",textAlign:"center"}}))))})),p.default.createElement("div",{className:"imgAttributeController"},p.default.createElement(i.Row,{className:"tools",style:{padding:"10px 0"}},p.default.createElement(i.Col,{span:18},p.default.createElement("span",{className:"singleTool"},p.default.createElement("img",{src:g,width:16,style:{marginTop:"-2px"}}),p.default.createElement("span",{className:"toolName"},y("OriginalScale")))),p.default.createElement(i.Col,null,p.default.createElement(i.Switch,{checked:m,onChange:function(e){return x({isOriginalSize:e})}})))))}));e.exports=m},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e9%a5%b1%e5%92%8c%e5%ba%a6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-481.000000%2c -124.000000)'%3e %3cg id='%e9%a5%b1%e5%92%8c%e5%ba%a6' transform='translate(481.000000%2c 124.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg id='%e9%a5%b1%e5%92%8c%e5%ba%a6-(1)' mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cg transform='translate(2.000000%2c 0.000000)'%3e %3cpath d='M6.28551136%2c15.9450284 C2.821875%2c15.9450284 0.0127840909%2c13.1268466 0.0127840909%2c9.67230114 C0.0127840909%2c5.09048295 5.24914773%2c0.00866477273 6.28551136%2c0.00866477273 C7.15823864%2c0.00866477273 12.5582386%2c5.39957386 12.5582386%2c9.67230114 C12.5582386%2c13.1268466 9.74914773%2c15.9450284 6.28551136%2c15.9450284 Z M6.26732955%2c1.21775568 C5.21278409%2c1.96321023 1.14914773%2c5.79957386 1.14914773%2c9.66321023 C1.14914773%2c12.4995739 3.45823864%2c14.8086648 6.29460227%2c14.8086648 C9.13096591%2c14.8086648 11.4400568%2c12.4995739 11.4400568%2c9.66321023 C11.4309659%2c6.2359375 7.30369318%2c2.04502841 6.26732955%2c1.21775568 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3cpath d='M9.20369318%2c6.91775568 C10.7764205%2c8.49048295 10.7764205%2c11.0450284 9.20369318%2c12.6177557 C7.63096591%2c14.190483 5.07642045%2c14.190483 3.50369318%2c12.6177557 L9.20369318%2c6.91775568 Z' id='%e8%b7%af%e5%be%84'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e6%94%be%e5%a4%a7%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-437.000000%2c -125.000000)'%3e %3cg id='%e6%94%be%e5%a4%a7' transform='translate(437.000000%2c 125.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg id='%e5%af%b9%e6%af%94%e5%ba%a6' mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cpath d='M2.25471549%2c13.5345736 L2.28377061%2c13.5698491 C3.71170509%2c15.0309327 5.68912337%2c15.9414593 7.8824479%2c15.9747872 L7.90975417%2c15.9750853 C10.0876767%2c15.988818 12.0717327%2c15.1310159 13.5224026%2c13.7355349 L13.5574794%2c13.6912368 C15.0213452%2c12.2613547 15.9294671%2c10.2834793 15.953216%2c8.07801203 C15.9769053%2c5.87765227 15.1116308%2c3.87626648 13.6789465%2c2.40995617 C12.2489055%2c0.958829251 10.2741105%2c0.0535890334 8.08152127%2c0.0199232337 L8.054215%2c0.0194677151 C5.86069173%2c0.00607137034 3.86417498%2c0.868563587 2.40521788%2c2.28856852 C0.946896739%2c3.72375685 0.0338461956%2c5.70596465 0.0101569293%2c7.90634429 C-0.0134329775%2c10.0976219 0.837115237%2c12.0836653 2.25471549%2c13.5345736 Z M8.67367358%2c1.27768049 C10.286452%2c1.44950722 11.7315969%2c2.17528929 12.8057027%2c3.27521081 L12.8101743%2c3.27525056 L12.8057027%2c3.27521081 C14.0068005%2c4.50975576 14.7514227%2c6.20240594 14.7313703%2c8.06481599 C14.7112582%2c9.93241304 13.9304662%2c11.5989096 12.7029763%2c12.8173769 L12.6725102%2c12.8468295 C11.5832608%2c13.8981403 10.127702%2c14.5878121 8.52895439%2c14.7198719 L8.67367358%2c1.27768049 Z M7.29456842%2c14.7066162 C6.99960518%2c14.6688366 6.70388674%2c14.6358664 6.42424602%2c14.5580416 L7.305479%2c13.6932043 L7.29456842%2c14.7066162 Z M7.31664792%2c12.655169 L5.61932747%2c14.3211687 C5.35725495%2c14.2186411 5.10778228%2c14.1065343 4.87090943%2c13.9751901 L7.32835345%2c11.5672908 L7.31664792%2c12.655169 L7.31664792%2c12.655169 Z M7.33948263%2c10.5341444 L4.20886184%2c13.5905772 C3.99188241%2c13.4490378 3.79237184%2c13.2931298 3.59790914%2c13.1165136 L7.35124779%2c9.44143698 L7.33948263%2c10.5341444 L7.33948263%2c10.5341444 Z M7.36247634%2c8.39823455 L3.0596539%2c12.6145077 C2.88230233%2c12.4284316 2.71542413%2c12.2330349 2.5667501%2c12.0178242 L7.37412224%2c7.31524528 L7.36247634%2c8.39823455 Z M7.38531104%2c6.27721 L2.16071359%2c11.3977495 C2.01426539%2c11.1672561 1.89530231%2c10.9274022 1.79380809%2c10.6783866 L7.3969967%2c5.19414125 L7.38531104%2c6.27721 L7.38531104%2c6.27721 Z M7.40816562%2c4.15584759 L1.5134718%2c9.91983307 C1.42966504%2c9.63568106 1.36076343%2c9.34198971 1.31408045%2c9.04817915 L7.41983141%2c3.0727987 L7.40816562%2c4.15584759 Z M3.26558364%2c3.17250431 C3.94068814%2c2.50868797 4.75868348%2c1.98561613 5.66915047%2c1.65295276 L1.69467882%2c5.54002052 C2.04222748%2c4.64447857 2.58529212%2c3.83556545 3.26558364%2c3.17250431 Z M7.06902349%2c1.30580157 C7.19108684%2c1.29187021 7.32002644%2c1.28326497 7.43928762%2c1.26440497 L7.43109971%2c2.02476702 L1.23742818%2c8.09337428 L1.23929629%2c7.91958009 C1.24287352%2c7.58679748 1.26860978%2c7.25951986 1.31737946%2c6.93695225 L7.06902349%2c1.30580157 L7.06902349%2c1.30580157 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e5%bd%a2%e7%8a%b6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-525.000000%2c -124.000000)'%3e %3cg id='%e6%9b%9d%e5%85%89' transform='translate(525.000000%2c 124.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg mask='url(%23mask-2)' fill-rule='nonzero' id='%e5%bd%a2%e7%8a%b6'%3e %3cpath d='M2.6123501%2c13.1851491 L2.64065558%2c13.2166896 L2.6413572%2c13.2203755 C4.01642052%2c14.6273605 5.88331047%2c15.4443523 7.88790599%2c15.474817 L7.9129068%2c15.4750953 C9.90015586%2c15.4876256 11.7740345%2c14.7236019 13.1304117%2c13.4251429 L13.2081022%2c13.333556 C14.6189485%2c11.9554626 15.4315386%2c10.0884174 15.453245%2c8.0726293 C15.4749051%2c6.06074757 14.701873%2c4.17234442 13.3228152%2c2.76091268 C11.944524%2c1.36229865 10.0794546%2c0.550659153 8.07318152%2c0.519853677 L8.05116145%2c0.519458391 C6.04381797%2c0.507199088 4.15921827%2c1.27912879 2.7559335%2c2.64493708 C1.34678056%2c4.03173715 0.531741066%2c5.90419121 0.510127959%2c7.91172667 C0.488530813%2c9.91789572 1.24972356%2c11.7905061 2.6123501%2c13.1851491 Z' stroke='%23666666'%3e%3c/path%3e %3cpath d='M11.8970207%2c7.47681347 L9.88251295%2c7.47681347 C9.70012953%2c6.78873057 9.16126943%2c6.24158031 8.46489637%2c6.05919689 L8.46489637%2c4.04468912 C8.46489637%2c3.77111399 8.24106218%2c3.54727979 7.96748705%2c3.54727979 C7.69391192%2c3.54727979 7.47007772%2c3.77111399 7.47007772%2c4.04468912 L7.47007772%2c6.05919689 C6.78199482%2c6.24158031 6.23484456%2c6.78044041 6.05246114%2c7.47681347 L4.03795337%2c7.47681347 C3.76437824%2c7.47681347 3.54054404%2c7.70064767 3.54054404%2c7.9742228 C3.54054404%2c8.24779793 3.76437824%2c8.47163212 4.03795337%2c8.47163212 L6.05246114%2c8.47163212 C6.23484456%2c9.15971503 6.77370466%2c9.70686528 7.47007772%2c9.8892487 L7.47007772%2c11.9037565 C7.47007772%2c12.1773316 7.69391192%2c12.4011658 7.96748705%2c12.4011658 C8.24106218%2c12.4011658 8.46489637%2c12.1773316 8.46489637%2c11.9037565 L8.46489637%2c9.8892487 C9.15297927%2c9.70686528 9.70012953%2c9.16800518 9.88251295%2c8.47163212 L11.8970207%2c8.47163212 C12.1705959%2c8.47163212 12.3944301%2c8.24779793 12.3944301%2c7.9742228 C12.3944301%2c7.70064767 12.178886%2c7.47681347 11.8970207%2c7.47681347 Z M7.96748705%2c8.9607513 C7.42862694%2c8.9607513 6.9892487%2c8.52137306 6.9892487%2c7.98251295 C6.9892487%2c7.44365285 7.42862694%2c7.00427461 7.96748705%2c7.00427461 C8.50634715%2c7.00427461 8.94572539%2c7.44365285 8.94572539%2c7.98251295 C8.94572539%2c8.52137306 8.51463731%2c8.9607513 7.96748705%2c8.9607513 L7.96748705%2c8.9607513 Z' fill='%23666666'%3e%3c/path%3e %3cpath d='M10.1643782%2c6.27474093 C10.2887306%2c6.27474093 10.4213731%2c6.225 10.5125648%2c6.12551813 L11.0928756%2c5.54520725 C11.2835492%2c5.35453368 11.2835492%2c5.03950777 11.0928756%2c4.84054404 C10.9022021%2c4.64987047 10.5871762%2c4.64987047 10.3882124%2c4.84054404 L9.80790155%2c5.42085492 C9.61722798%2c5.6115285 9.61722798%2c5.9265544 9.80790155%2c6.12551813 C9.91567358%2c6.225 10.0400259%2c6.27474093 10.1643782%2c6.27474093 Z M5.42240933%2c6.13380829 C5.52189119%2c6.23329016 5.64624352%2c6.28303109 5.77059585%2c6.28303109 C5.89494819%2c6.28303109 6.02759067%2c6.23329016 6.11878238%2c6.13380829 C6.30945596%2c5.94313472 6.30945596%2c5.62810881 6.11878238%2c5.42914508 L5.5384715%2c4.8488342 C5.34779793%2c4.65816062 5.03277202%2c4.65816062 4.83380829%2c4.8488342 C4.64313472%2c5.03950777 4.64313472%2c5.35453368 4.83380829%2c5.55349741 L5.42240933%2c6.13380829 L5.42240933%2c6.13380829 Z M5.42240933%2c9.82292746 L4.84209845%2c10.4032383 C4.65142487%2c10.5939119 4.65142487%2c10.9089378 4.84209845%2c11.1079016 C4.94158031%2c11.2073834 5.06593264%2c11.2571244 5.19028497%2c11.2571244 C5.31463731%2c11.2571244 5.44727979%2c11.2073834 5.5384715%2c11.1079016 L6.11878238%2c10.5275907 C6.30945596%2c10.3369171 6.30945596%2c10.0218912 6.11878238%2c9.82292746 C5.92810881%2c9.63225389 5.6130829%2c9.63225389 5.42240933%2c9.82292746 L5.42240933%2c9.82292746 Z M10.5208549%2c9.82292746 C10.3301813%2c9.63225389 10.0151554%2c9.63225389 9.81619171%2c9.82292746 C9.62551813%2c10.013601 9.62551813%2c10.3286269 9.81619171%2c10.5275907 L10.3965026%2c11.1079016 C10.4959845%2c11.2073834 10.6203368%2c11.2571244 10.7446891%2c11.2571244 C10.8690415%2c11.2571244 11.0016839%2c11.2073834 11.0928756%2c11.1079016 C11.2835492%2c10.917228 11.2835492%2c10.6022021 11.0928756%2c10.4032383 L10.5208549%2c9.82292746 L10.5208549%2c9.82292746 Z' fill='%23666666'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e6%94%be%e5%a4%a7%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-350.000000%2c -125.000000)'%3e %3cg id='%e6%94%be%e5%a4%a7' transform='translate(350.000000%2c 125.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cpath d='M15.6609771%2c14.3520065 L13.3912778%2c12.0823072 C14.3805588%2c10.8144379 14.9758006%2c9.22447711 14.9758007%2c7.49438563 C14.9758007%2c3.36659478 11.617683%2c0.00889542279 7.48989215%2c0.00889542279 C3.3625196%2c0.00889542279 0.00482025735%2c3.36659476 0.00482025735%2c7.49438563 C0.00482025735%2c11.6221765 3.36251961%2c14.9802941 7.48989215%2c14.9802941 C9.15116518%2c14.9805622 10.764591%2c14.4240002 12.0723758%2c13.399536 L14.3420752%2c15.6700719 C14.706368%2c16.0359836 15.2981418%2c16.0378552 15.6647418%2c15.6742549 C16.0284092%2c15.3079133 16.0267247%2c14.7162714 15.6609771%2c14.3520065 L15.6609771%2c14.3520065 Z M1.42997059%2c7.49480392 C1.42997059%2c4.15341829 4.14850654%2c1.43530066 7.48989215%2c1.43530066 C10.8312778%2c1.43530066 13.5498137%2c4.15383662 13.5498137%2c7.49480392 C13.5498137%2c10.8357712 10.8312778%2c13.5547255 7.48989215%2c13.5547255 C4.14850653%2c13.5547255 1.42997059%2c10.8357713 1.42997059%2c7.49480392 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3cpath d='M10.0122451%2c6.78201961 L8.20309478%2c6.78201961 L8.20309478%2c4.97203268 C8.20309478%2c4.59347059 7.88351309%2c4.28685621 7.48989215%2c4.28685621 C7.09627123%2c4.28685621 6.77710783%2c4.5930523 6.77710785%2c4.97203268 L6.77710785%2c6.78201961 L4.96753921%2c6.78201961 C4.58897711%2c6.78201961 4.28194445%2c7.10118301 4.28194445%2c7.49522222 C4.28194445%2c7.88884314 4.58814053%2c8.20842483 4.96753921%2c8.20842483 L6.77710785%2c8.20842483 L6.77710785%2c10.0179935 C6.77710785%2c10.3961372 7.09627125%2c10.7035882 7.48989215%2c10.7035882 C7.88351305%2c10.7035882 8.20309476%2c10.3965556 8.20309478%2c10.0179935 L8.20309478%2c8.20842483 L10.0122451%2c8.20842483 C10.3908072%2c8.20842483 10.6982582%2c7.88926143 10.6982582%2c7.49522222 C10.6982582%2c7.10118301 10.3908072%2c6.78201961 10.0122451%2c6.78201961 Z' id='%e8%b7%af%e5%be%84'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3cg transform='translate(-1838 -1616)'%3e%3crect width='16' height='16' transform='translate(1838 1616)' fill='none'/%3e%3cpath d='M1%2c1V11H11V1H1M1%2c0H11a1%2c1%2c0%2c0%2c1%2c1%2c1V11a1%2c1%2c0%2c0%2c1-1%2c1H1a1%2c1%2c0%2c0%2c1-1-1V1A1%2c1%2c0%2c0%2c1%2c1%2c0Z' transform='translate(1840 1618)' fill='%23707070'/%3e%3cpath d='M9030-7951h-1v-3h3v1h-2Z' transform='translate(-7187 9574)' fill='%23999'/%3e%3cpath d='M9030-7951h-1v-3h3v1h-2Z' transform='translate(10878.999 -6326) rotate(180)' fill='%23999'/%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(33),o=n(227),c=n(54),l=n(46),s=n(30),u=n(76),d=n(28);function h(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var f=h(a),g=r.connect((function(e){var t,n,i=c.getCurrentStepInfo(null==(t=e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList);return{toolInstance:e.annotation.toolInstance,stepInfo:i}}),null,null,{context:d.LabelBeeContext})((function(e){var t,n=a.useState(0),r=i(n,2),c=(r[0],r[1]),d=a.useRef(null),h=e.toolInstance,g=s.useTranslation().t;if(a.useEffect((function(){return h&&h.singleOn("changeAttributeSidebar",(function(e){var t;c((function(e){return e+1})),d.current&&(null==(t=d.current.children[e])||t.scrollIntoView({block:"center"}))})),function(){h.unbindAll("changeAttributeSidebar")}}),[h,d]),!e.stepInfo)return null;var v=l.jsonParser(e.stepInfo.config),b=e.stepInfo.tool===u.EToolName.ScribbleTool;if(!0!==v.attributeConfigurable&&!b)return null;if((!0===v.attributeConfigurable||b)&&(null==v?void 0:v.attributeList)){var p=v.attributeList.map((function(e){return{label:e.key,value:e.value,color:null==e?void 0:e.color}}));b||p.unshift({label:g("NoAttribute"),value:""});return f.default.createElement("div",null,f.default.createElement(o.default,{list:p,attributeChanged:function(e){h.setDefaultAttribute(e),c((function(e){return e+1}))},selectedAttribute:null!=(t=null==h?void 0:h.defaultAttribute)?t:"",ref:d,forbidDefault:b}))}return null}));e.exports=g},function(e,t,n){"use strict";var i=n(42).default;function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,u=function(e,t,n){return t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},d=function(e,t){for(var n in t||(t={}))l.call(t,n)&&u(e,n,t[n]);if(c){var a,r=i(c(t));try{for(r.s();!(a=r.n()).done;){n=a.value;s.call(t,n)&&u(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e};t.ColorTag=function(e){var t=e.color,n=e.style;return r.default.createElement("div",{style:d({display:"inline-block",height:14,width:14,backgroundColor:t,verticalAlign:"middle"},n)})}},function(e,t,n){"use strict";var i=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(227),r=n(410),o=n(63),c=n(29),l=n(47),s=n(0),u=n(190),d=n(189),h=n(32),f=n(33),g=n(30),v=n(28);function b(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var p=b(s),m=c.Collapse.Panel,y=function(e){var t=e.isActive;return p.default.createElement(o.CaretRightOutlined,{rotate:t?90:0})};var x=f.connect((function(e){return{toolInstance:e.annotation.toolInstance,imgIndex:e.annotation.imgIndex}}),null,null,{context:v.LabelBeeContext})((function(e){var t=e.toolInstance,n=e.imgIndex,o=s.useState([]),f=i(o,2),v=f[0],b=f[1],x=s.useRef(null),C=s.useState(0),w=i(C,2)[1],I=s.useState(-1),k=i(I,2),L=k[0],P=k[1],S=g.useTranslation().t;s.useEffect((function(){t&&(b(t.config.inputList.map((function(e){return e.value}))),t.singleOn("render",(function(){w((function(e){return e+1}))})))}),[t]),s.useEffect((function(){if(t&&(t.singleOn("expend",O),1===t.labelSelectedList.length)){for(var e=0,n=0;n<t.labelSelectedList[0];n++)e+=46,E[n]&&""!==v[n]&&E[n].subSelected.forEach((function(t){e+=40}));x.current&&(x.current.children[0].scrollTop=e)}})),s.useEffect((function(){x.current&&(x.current.children[0].scrollTop=0)}),[n]);var O=function(){var e,n=t.labelSelectedList[0],i=null==(e=E.filter((function(e,t){return t===n}))[0])?void 0:e.value;A(n,i,!0)},A=s.useCallback((function(e,t,n){var i=l.cloneDeep(v);""===i[e]||!0===n?i[e]=t:i[e]="",b(i)}),[v]);if(!t)return null;var T=t.labelSelectedList,E=t.config.inputList,D=t.currentTagResult,N=t.setLabel,R=function(e){return T.length>0&&T[0]===e?p.default.createElement("span",{className:"keyDownIconActive"},e+1):p.default.createElement("span",{className:"keyDownIcon"},e+1)},M=window.innerHeight-61-80;return p.default.createElement("div",{className:"tagOperationMenu",ref:x},0===(null==E?void 0:E.length)?p.default.createElement("div",{style:{padding:20,textAlign:"center"}},S("NoConfiguration")):p.default.createElement("div",{className:"main",style:{height:M}},function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n?n.map((function(n,o){var l,s,f,g,b;if(n.subSelected){var x=h.TagUtils.judgeResultIsInInputList(n.value,null==(l=null==D?void 0:D.result)?void 0:l[n.value],E);return p.default.createElement(c.Collapse,{bordered:!1,expandIcon:y,key:"collapse_".concat(o,"_").concat(i+1),onChange:function(){return A(o,n.value)},activeKey:[v[o]]},p.default.createElement(m,{header:p.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flex:1}},p.default.createElement("span",null,n.key,p.default.createElement(c.Tooltip,{placement:"bottom",title:S("ClearThisOption")},p.default.createElement("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(e){e.stopPropagation(),t.clearResult(!0,n.value)},src:L===o||x?d:u,onMouseEnter:function(){P(o)},onMouseLeave:function(){P(-1)}})),x&&""===v[o]&&p.default.createElement(c.Badge,{color:"#87d068"})),(null==E?void 0:E.length)>1&&R(o)),key:n.value},p.default.createElement("div",{className:"level",style:{backgroundColor:T.length>0&&T[0]===o?"rgba(158, 158, 158, 0.18)":""}},e(n.subSelected,o))))}var C=(null==E?void 0:E[i])?null==E?void 0:E[i].value:0,w=(null==(g=null==(f=null==(s=null==D?void 0:D.result)?void 0:s[C])?void 0:f.split(";"))?void 0:g.indexOf(n.value))>-1?n.value:"";return!0===(null==(b=null==E?void 0:E[i])?void 0:b.isMulti)?p.default.createElement("div",{className:"singleBar",key:"".concat(C,"_").concat(i,"_").concat(o)},p.default.createElement(r,{attributeChanged:function(){return N(i,o)},selectedAttribute:[w],list:[{value:n.value,label:n.key}],num:o+1})):p.default.createElement("div",{className:"singleBar",key:"".concat(C,"_").concat(i,"_").concat(o)},p.default.createElement(a.default,{forbidColor:!0,attributeChanged:function(){return N(i,o)},selectedAttribute:w,list:[{value:n.value,label:n.key}],num:o+1}))})):null}(E)))}));t.default=x,t.expandIconFuc=y},function(e,t,n){"use strict";var i=n(29);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var r=a(n(0));e.exports=function(e){var t=r.default.useRef(null),n=e.list||[];return r.default.createElement("div",{className:"sensebee-checkbox-group"},r.default.createElement(i.Checkbox.Group,{name:"checkboxgroup",value:e.selectedAttribute,onChange:function(){return e.attributeChanged()}},n.map((function(n,a){var o;return r.default.createElement(i.Checkbox,{value:n.value,ref:t,onFocus:function(){var e;null==(e=null==t?void 0:t.current)||e.blur()},key:a},r.default.createElement("span",{className:"sensebee-checkbox-label",title:n.label},n.label),r.default.createElement("span",{className:"sensebee-checkbox-num"},null!=(o=null==e?void 0:e.num)?o:a))}))))}},function(e,t,n){"use strict";var i=n(31).default,a=n(42).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(33),c=n(47),l=n(46),s=n(29),u=n(32),d=n(57),h=n(221),f=n(30),g=n(28);function v(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var b=v(r),p=Object.defineProperty,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=function(e,t,n){return t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},w=u.cKeyCode.default,I=function(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},k=function(e){var t=e.textareaProps,n=e.footer;return b.default.createElement(b.default.Fragment,null,b.default.createElement(s.Input.TextArea,function(e,t){for(var n in t||(t={}))y.call(t,n)&&C(e,n,t[n]);if(m){var i,r=a(m(t));try{for(r.s();!(i=r.n()).done;)n=i.value,x.call(t,n)&&C(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({bordered:!1,rows:6,onKeyDown:I,onKeyUp:I},t)),b.default.createElement("div",{className:l.classnames({textAreaLength:!0})},n))},L=function(e){var t,n=r.useRef(null),a=r.useState(!1),o=i(a,2),c=o[0],s=o[1],u=r.useState(!1),d=i(u,2),h=d[0],g=d[1],v=f.useTranslation().t,p=e.disabled,m=e.config,y=e.result,x=e.updateText,C=e.index,I=e.switchToNextTextarea,L=e.hasMultiple,P=e.onNext,S=m.maxLength,O=y?y[m.key]:"",A=null!=(t=null==O?void 0:O.length)?t:0,T=function(e){x&&(x(e,m.key),m.required&&g(!e))},E=L&&I,D={id:"textInput-".concat(C),ref:n,disabled:p,value:O,maxLength:S,autoSize:{minRows:2,maxRows:6},onChange:function(e){var t=e.target.value;T(t)},onFocus:function(){s(!0)},onBlur:function(e){s(!1),m.required&&g(!e.target.value)},style:{resize:"none",wordBreak:"break-all"},onKeyDownCapture:function(e){e.ctrlKey&&e.keyCode===w.Enter&&(P&&P(),e.preventDefault()),e.keyCode===w.Tab&&E&&(e.preventDefault(),e.nativeEvent.stopImmediatePropagation(),I(C)),e.nativeEvent.stopPropagation()}},N=b.default.createElement("div",{className:"textAreaFooter"},b.default.createElement("div",{className:"hotkeyTip"},E&&b.default.createElement("span",null,"[".concat(v("Switch"),"]Tab")),b.default.createElement("span",null,"[".concat(v("TurnPage"),"]Ctrl+Enter"))),b.default.createElement("div",{className:"wordCount"},b.default.createElement("span",{className:A>=S?"warning":""},A),"/",b.default.createElement("span",null,S)));return r.useEffect((function(){p&&s(!1)}),[p]),b.default.createElement("div",{className:"textField"},b.default.createElement("div",{className:"label"},b.default.createElement("span",{className:l.classnames({required:m.required})},m.label),b.default.createElement("i",{className:l.classnames({clearText:!0,disabled:p}),onClick:function(){p||T("")}})),b.default.createElement("div",{className:l.classnames({disabled:p,"textarea-outline":!0,"ant-input-focused":c,textareaContainer:!0,focus:c,invalid:h})},b.default.createElement(k,{footer:N,textareaProps:D})))};var P=o.connect((function(e){return{toolInstance:e.annotation.toolInstance,imgIndex:e.annotation.imgIndex,step:e.annotation.step,basicResultList:e.annotation.basicResultList,stepList:e.annotation.stepList,triggerEventAfterIndexChanged:e.annotation.triggerEventAfterIndexChanged}}),null,null,{context:g.LabelBeeContext})((function(e){var t,n,a=e.toolInstance,o=e.imgIndex,l=e.dispatch,s=e.triggerEventAfterIndexChanged,u=e.step,f=e.stepList,g=e.basicResultList,v=r.useState([]),p=i(v,2),m=p[0],y=p[1],x=r.useState(0),C=i(x,2),w=C[0],I=C[1],k=r.useState(0),P=i(k,2)[1],S=function(e){var t=(e+1)%m.length;O(t)},O=function(e){setTimeout((function(){var t=document.getElementById("textInput-".concat(e));t&&(I(e),t.focus(),t.select(),t.scrollIntoView({behavior:"smooth",block:"center"}))}))};r.useEffect((function(){a&&(y(c.cloneDeep(a.config.configList)),a.singleOn("valueUpdated",(function(){P((function(e){return e+1}))})))}),[a]);var A=function(e,t){a.updateTextValue(t,e)};r.useEffect((function(){o>-1&&s&&O(0)}),[o]);var T=null!=(n=null==(t=a.textList[0])?void 0:t.value)?n:{},E=function(){l(d.PageForward(!0))},D=h.ConfigUtils.getStepConfig(f,u).dataSourceStep>0&&0===g.length;return b.default.createElement("div",{className:"textToolOperationMenu"},m.map((function(e,t){return b.default.createElement(L,{config:e,key:e.key,index:t,result:T,updateText:A,switchToNextTextarea:S,hasMultiple:m.length>1,focus:w===t,onNext:E,disabled:D})})))}));t.SingleTextInput=L,t.TextareaWithFooter=k,t.default=P},function(e,t,n){"use strict";var i=n(0),a=n(228),r=n(32),o=n(48),c=n(29),l=n(54),s=n(33),u=n(46),d=n(229),h=n(66),f=n(30),g=n(28);function v(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var b=v(i),p=function(e){var t,n=e.attributeList,a=e.subAttributeList,r=e.toolInstance,l=i.useContext(o.PointCloudContext),s=f.useTranslation().t,u={fontWeight:400,fontSize:14,marginBottom:14};return b.default.createElement("div",{style:{padding:24,borderBottom:"1px solid #eee"}},b.default.createElement("div",{style:{marginBottom:20,fontSize:14,fontWeight:500}},s("Tag")),b.default.createElement(c.Row,{style:{marginBottom:12}},b.default.createElement(c.Col,{span:9,style:u},s("Attribute")),b.default.createElement(c.Col,{span:15},b.default.createElement(c.Radio.Group,{style:{width:"100%"},value:null==(t=l.selectedPointCloudBox)?void 0:t.attribute,onChange:function(e){return t=e.target.value,void r.setDefaultAttribute(t);var t}},n.map((function(e){return b.default.createElement(c.Radio,{key:e.value,value:e.value,style:{marginBottom:16}},e.key)}))))),b.default.createElement("div",{style:u}," ",s("SubAttribute")),a.map((function(e){var t,n;return(null==e?void 0:e.subSelected)&&b.default.createElement(c.Row,{key:e.value,style:{marginBottom:18}},b.default.createElement(c.Col,{span:9,style:{color:"#999999",display:"flex",justifyContent:"flex-start",alignItems:"center"}},e.key),b.default.createElement(c.Col,{span:15},b.default.createElement(c.Select,{style:{width:"100%"},bordered:!1,value:null==(n=null==(t=l.selectedPointCloudBox)?void 0:t.subAttribute)?void 0:n[e.value],placeholder:s("PleaseSelect"),onChange:function(t){return function(e,t){r.setSubAttribute(e,t)}(e.value,t)},allowClear:!0},e.subSelected.map((function(e){return b.default.createElement(c.Select.Option,{key:e.value,value:e.value},e.key)})))))})))},m=s.connect((function(e){var t,n,i;return{stepInfo:l.getCurrentStepInfo(null==(t=e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList),toolInstance:null==(i=e.annotation)?void 0:i.toolInstance}}),null,null,{context:g.LabelBeeContext})((function(e){var t,n,i=e.stepInfo,o=e.toolInstance,c=h.useSingleBox().selectedBox,l=d.useStatus(),s=l.updatePointCloudPattern,f=l.pointCloudPattern,g=u.jsonParser(i.config),v=null!=(t=null==g?void 0:g.attributeList)?t:[],m=!0===(null==g?void 0:g.secondaryAttributeConfigurable)&&null!=(n=null==g?void 0:g.inputList)?n:[];return b.default.createElement(b.default.Fragment,null,b.default.createElement(a.ToolIcons,{toolName:r.cTool.EPointCloudName.PointCloud,selectedToolName:f,onChange:function(e){return null==s?void 0:s(e)}}),c&&b.default.createElement(p,{toolInstance:o,attributeList:v,subAttributeList:m}))}));e.exports=m},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_line' xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='20' height='20'/%3e %3cpath id='%e5%bd%a2%e7%8a%b6%e7%bb%93%e5%90%88' class='cls-2' d='M3.889%2c15.556V13.042l9.153-9.153h2.514V0H11.667V2.514L2.514%2c11.667H0v3.889Z' transform='translate(2.222 2.222)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M50.0005 17.7692L17.7697 50H20.0005H22.0005L22.0005 52V54.2545L54.255 22H52.0005H50.0005V20V17.7692ZM56.255 20L56.6707 19.5843L52.428 15.3417L52.0005 15.7692V20L56.255 20ZM20.0005 56.2545L20.0005 52H15.7697L15.4648 52.3048L19.7075 56.5475L20.0005 56.2545Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.125 1H8.875V5.5H11.125V1Z' fill='%23999999'/%3e%3cpath d='M11.125 14.5H8.875V19H11.125V14.5Z' fill='%23999999'/%3e%3cpath d='M14.5 8.96582V11.2158H19V8.96582H14.5Z' fill='%23999999'/%3e%3cpath d='M1 8.96582L1 11.2158H5.5V8.96582H1Z' fill='%23999999'/%3e%3cpath d='M10 13C11.6569 13 13 11.6569 13 10C13 8.34315 11.6569 7 10 7C8.34315 7 7 8.34315 7 10C7 11.6569 8.34315 13 10 13Z' fill='%23999999'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M39 8H33V62H39V8Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 33H8V39H64V33Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3crect x='28' y='28' width='16' height='16' rx='8' fill='%23666FFF' stroke='white' stroke-width='2'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M55 22H61V50H55V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 55L50 61L22 61L22 55L50 55Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath d='M64 52H52V64H64V52Z' fill='%23666FFF'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M50.0005 17.7692L17.7697 50H20.0005H22.0005L22.0005 52V54.2545L54.255 22H52.0005H50.0005V20V17.7692ZM56.255 20L56.6707 19.5843L52.428 15.3417L52.0005 15.7692V20L56.255 20ZM20.0005 56.2545L20.0005 52H15.7697L15.4648 52.3048L19.7075 56.5475L20.0005 56.2545Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M17 17H15V15H17V17ZM17 13H15V11H17V13ZM17 9H15V7H17V9ZM17 5H15V3H17V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15.4286V15H17V17ZM13.8571 17H12.2857V15H13.8571V17ZM10.7143 17H9.14286V15H10.7143V17ZM7.57143 17H6V15H7.57143V17Z' fill='%23999999'/%3e%3cpath d='M18 2H14V6H18V2Z' fill='%23999999'/%3e%3cpath d='M6 14H2V18H6V14Z' fill='%23999999'/%3e%3cpath d='M18 14H14V18H18V14Z' fill='%23999999'/%3e%3cpath d='M15.2236 3L16.6378 4.41421L4.4144 16.6377L3.00019 15.2234L15.2236 3Z' fill='%23999999'/%3e%3cpath d='M15 15L15 17L5 17L5 15L15 15Z' fill='%23999999'/%3e%3cpath d='M15 6H17V15H15V6Z' fill='%23999999'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M17 5H15.4286V3H17V5ZM13.8571 5H12.2857V3H13.8571V5ZM10.7143 5H9.14286V3H10.7143V5ZM7.57143 5H6V3H7.57143V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15V15H17V17ZM17 13H15V11H17V13ZM17 9H15V7H17V9ZM17 5H15V3H17V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15.4286V15H17V17ZM13.8571 17H12.2857V15H13.8571V17ZM10.7143 17H9.14286V15H10.7143V17ZM7.57143 17H6V15H7.57143V17Z' fill='%23999999'/%3e%3cpath d='M6 2H2V6H6V2Z' fill='%23999999'/%3e%3cpath d='M18 2H14V6H18V2Z' fill='%23999999'/%3e%3cpath d='M6 14H2V18H6V14Z' fill='%23999999'/%3e%3cpath d='M18 14H14V18H18V14Z' fill='%23999999'/%3e%3cpath d='M5 6H3V15H5V6Z' fill='white'/%3e%3cpath d='M3 6H5V15H3V6Z' fill='%23999999'/%3e%3cpath d='M15 3L15 5L5 5L5 3L15 3Z' fill='%23999999'/%3e%3cpath d='M15 15L15 17L5 17L5 15L15 15Z' fill='%23999999'/%3e%3cpath d='M15 6H17V15H15V6Z' fill='%23999999'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M20 8H8V20H20V8Z' fill='%23666FFF'/%3e%3cpath d='M11 22H17V50H11V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M55 22H61V50H55V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 55L50 61L22 61L22 55L50 55Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 11L50 17L22 17L22 11L50 11Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath d='M64 52H52V64H64V52Z' fill='%23666FFF'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(89).default,a=n(29),r=n(0),o=n(422),c=n(423),l=n(424),s=n(425),u=n(33),d=n(223),h=n(58),f=n(28),g=n(30);function v(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var b=v(r),p=function(e,t){var n=[],i={};switch(e){case"width":n=[{step:1,value:"1"},{step:2,value:"2"},{step:3,value:"3"},{step:4,value:"4"},{step:5,value:"5"}];break;case"color":n=[{step:1,value:"Blue"},{step:3,value:"Cyan"},{step:5,value:"Green"},{step:7,value:"Yellow"},{step:9,value:"Pink"}];break;case"borderOpacity":n=[{step:1,value:"0.2"},{step:3,value:"0.4"},{step:5,value:"0.6"},{step:7,value:"0.8"},{step:9,value:"1.0"}];break;case"fillOpacity":n=[{step:1,value:"0"},{step:3,value:"0.2"},{step:5,value:"0.4"},{step:7,value:"0.6"},{step:9,value:"0.8"}]}return n.forEach((function(e){var n=e.step,a=e.value;i[n]={style:{color:"#999999",fontSize:"12px"},label:b.default.createElement("span",null,t(a))}})),i},m=function(e){switch(e){case"width":return o;case"color":return c;case"borderOpacity":return l;case"fillOpacity":return s}},y=function(e){switch(e){case"width":return 2;case"color":return 1;case"borderOpacity":case"fillOpacity":return 9}},x=function(e){return["width"].includes(e)},C=u.connect((function(e){return{toolStyle:e.toolStyle,config:e.annotation.toolInstance.config}}),null,null,{context:f.LabelBeeContext})((function(e){var t=e.toolStyle,n={width:t.width,color:t.color,borderOpacity:t.borderOpacity,fillOpacity:t.fillOpacity},r=g.useTranslation().t,o=e.config;return b.default.createElement("div",{className:"toolStyle"},Object.entries(n).map((function(e){var n,c=e[0];return!0===(null==o?void 0:o.attributeConfigurable)&&"color"===c?null:b.default.createElement("div",{id:"style-".concat(c),className:"styleSlider",key:c},b.default.createElement("span",{className:"title"},b.default.createElement("img",{src:m(c),className:"icon"}),r(function(e){switch(e){case"width":return"BorderThickness";case"color":return"Color";case"borderOpacity":return"BorderOpacity";case"fillOpacity":return"FillOpacity";default:return""}}(c))),b.default.createElement("span",{className:"slider"},b.default.createElement(a.Slider,{tipFormatter:null,max:x(c)?5:10,min:x(c)?1:0,step:x(c)?1:null,value:null!=(n=t[c])?n:y(c),marks:p(c,r),onChange:function(e){return t=i({},c,e),void h.store.dispatch(d.UpdateToolStyleConfig(t));var t}})))})))}));e.exports=C},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2%2c .cls-4 %7b fill: none%3b %7d .cls-1 %7b stroke: %23707070%3b %7d .cls-3%2c .cls-5 %7b stroke: none%3b %7d .cls-5 %7b fill: %23ccc%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_border' transform='translate(0 -1.609)'%3e %3cg id='%e7%9f%a9%e5%bd%a2_162' data-name='%e7%9f%a9%e5%bd%a2 162' class='cls-1' transform='translate(0 1.609)'%3e %3crect class='cls-3' width='10' height='10'/%3e %3crect class='cls-4' x='0.5' y='0.5' width='9' height='9'/%3e %3c/g%3e %3cg id='%e8%81%94%e5%90%88_2' data-name='%e8%81%94%e5%90%88 2' class='cls-2' transform='translate(10987 5359.61)'%3e %3cpath class='cls-3' d='M-10982.4-5349v-3.6h-3.6v-.8h3.6v-3.6h.8v3.6h3.6v.8h-3.6v3.6Z'/%3e %3cpath class='cls-5' d='M -10981.6005859375 -5349 L -10982.3994140625 -5349 L -10982.3994140625 -5352.6005859375 L -10986.0009765625 -5352.6005859375 L -10986.0009765625 -5353.400390625 L -10982.3994140625 -5353.400390625 L -10982.3994140625 -5357.0009765625 L -10981.6005859375 -5357.0009765625 L -10981.6005859375 -5353.400390625 L -10977.9990234375 -5353.400390625 L -10977.9990234375 -5352.6005859375 L -10981.6005859375 -5352.6005859375 L -10981.6005859375 -5349 Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='12' height='12' viewBox='0 0 12 12'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23fafafa%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-5 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-6 %7b fill: %23999%3b %7d .cls-7 %7b clip-path: url(%23clip-path-3)%3b %7d .cls-8 %7b clip-path: url(%23clip-path-4)%3b %7d .cls-9 %7b clip-path: url(%23clip-path-5)%3b %7d .cls-10 %7b clip-path: url(%23clip-path-6)%3b %7d .cls-11 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_422' data-name='%e8%b7%af%e5%be%84 422' class='cls-1' d='M0-4H12V-16H0Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_424' data-name='%e8%b7%af%e5%be%84 424' class='cls-1' d='M11.759-9.6a.729.729%2c0%2c0%2c0%2c.729.729.729.729%2c0%2c0%2c0%2c.729-.729.729.729%2c0%2c0%2c0-.729-.729A.729.729%2c0%2c0%2c0%2c11.759-9.6Z' transform='translate(-11.759 10.33)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-3'%3e %3cpath id='%e8%b7%af%e5%be%84_426' data-name='%e8%b7%af%e5%be%84 426' class='cls-1' d='M9.031-12.726a.742.742%2c0%2c0%2c0%2c.742.742.742.742%2c0%2c0%2c0%2c.742-.742.742.742%2c0%2c0%2c0-.742-.742.742.742%2c0%2c0%2c0-.742.742Z' transform='translate(-9.031 13.469)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-4'%3e %3cpath id='%e8%b7%af%e5%be%84_428' data-name='%e8%b7%af%e5%be%84 428' class='cls-1' d='M4.727-12.239a.747.747%2c0%2c0%2c0%2c.747.747.747.747%2c0%2c0%2c0%2c.747-.747.747.747%2c0%2c0%2c0-.747-.747A.747.747%2c0%2c0%2c0%2c4.727-12.239Z' transform='translate(-4.727 12.986)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-5'%3e %3cpath id='%e8%b7%af%e5%be%84_430' data-name='%e8%b7%af%e5%be%84 430' class='cls-1' d='M2.362-8.573a.73.73%2c0%2c0%2c0%2c.365.632.73.73%2c0%2c0%2c0%2c.73%2c0%2c.73.73%2c0%2c0%2c0%2c.365-.632.73.73%2c0%2c0%2c0-.365-.632.73.73%2c0%2c0%2c0-.73%2c0%2c.73.73%2c0%2c0%2c0-.365.632Z' transform='translate(-2.362 9.303)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-6'%3e %3cpath id='%e8%b7%af%e5%be%84_432' data-name='%e8%b7%af%e5%be%84 432' class='cls-2' d='M5.887-4.052H5.873A5.888%2c5.888%2c0%2c0%2c1%2c0-10.018a5.922%2c5.922%2c0%2c0%2c1%2c6-5.931%2c5.853%2c5.853%2c0%2c0%2c1%2c6%2c5.335A3.662%2c3.662%2c0%2c0%2c1%2c9.645-7.28a6.77%2c6.77%2c0%2c0%2c1-2.439.232l-.122%2c0a.538.538%2c0%2c0%2c0-.154.408.342.342%2c0%2c0%2c0%2c.009.1.431.431%2c0%2c0%2c0%2c.046.048%2c1.36%2c1.36%2c0%2c0%2c1%2c.387%2c1.083A1.29%2c1.29%2c0%2c0%2c1%2c7-4.47%2c1.682%2c1.682%2c0%2c0%2c1%2c5.887-4.052ZM6-14.939a4.945%2c4.945%2c0%2c0%2c0-4.989%2c4.922A4.916%2c4.916%2c0%2c0%2c0%2c5.883-5.061c.22%2c0%2c.477-.063.477-.355%2c0-.274-.039-.315-.109-.388a1.093%2c1.093%2c0%2c0%2c1-.333-.841A1.319%2c1.319%2c0%2c0%2c1%2c7.077-8.064l.168%2c0A6.391%2c6.391%2c0%2c0%2c0%2c9.28-8.223a2.677%2c2.677%2c0%2c0%2c0%2c1.707-2.391A4.83%2c4.83%2c0%2c0%2c0%2c6-14.939Z' transform='translate(0 15.948)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_borderColor' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_670' data-name='%e7%bb%84 670' class='cls-3' transform='translate(0 -16)'%3e %3cpath id='%e8%b7%af%e5%be%84_421' data-name='%e8%b7%af%e5%be%84 421' class='cls-4' d='M-5-21H14.5V-1.5H-5Z' transform='translate(1.25 17.25)'/%3e %3c/g%3e %3cg id='%e7%bb%84_671' data-name='%e7%bb%84 671' class='cls-5' transform='translate(8.121 -11.61)'%3e %3cpath id='%e8%b7%af%e5%be%84_423' data-name='%e8%b7%af%e5%be%84 423' class='cls-6' d='M6.759-15.33H14.9v8.145H6.759Z' transform='translate(-10.103 11.986)'/%3e %3c/g%3e %3cg id='%e7%bb%84_672' data-name='%e7%bb%84 672' class='cls-7' transform='translate(6.765 -13.853)'%3e %3cpath id='%e8%b7%af%e5%be%84_425' data-name='%e8%b7%af%e5%be%84 425' class='cls-6' d='M4.031-18.469h8.291v8.291H4.031Z' transform='translate(-7.434 15.066)'/%3e %3c/g%3e %3cg id='%e7%bb%84_673' data-name='%e7%bb%84 673' class='cls-8' transform='translate(3.702 -13.515)'%3e %3cpath id='%e8%b7%af%e5%be%84_427' data-name='%e8%b7%af%e5%be%84 427' class='cls-6' d='M-.273-17.986H8.073V-9.64H-.273Z' transform='translate(-3.152 14.56)'/%3e %3c/g%3e %3cg id='%e7%bb%84_674' data-name='%e7%bb%84 674' class='cls-9' transform='translate(2.723 -10.881)'%3e %3cpath id='%e8%b7%af%e5%be%84_429' data-name='%e8%b7%af%e5%be%84 429' class='cls-6' d='M-2.638-14.3H5.512v8.149H-2.638Z' transform='translate(-0.707 10.958)'/%3e %3c/g%3e %3cg id='%e7%bb%84_675' data-name='%e7%bb%84 675' class='cls-10' transform='translate(0 -15.948)'%3e %3cpath id='%e8%b7%af%e5%be%84_431' data-name='%e8%b7%af%e5%be%84 431' class='cls-11' d='M-5-20.948H14.5V-1.568H-5Z' transform='translate(1.25 17.207)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='10.001' height='10.001' viewBox='0 0 10.001 10.001'%3e%3cg transform='translate(1.001 1)'%3e%3cg transform='translate(0 -1)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(0 7.334)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(9 0.334) rotate(90)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(0.666 0.334) rotate(90)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(-1 -1)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(-1 7.333)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(7.333 -1)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(7.333 7.333)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='9.999' height='9.999' viewBox='0 0 9.999 9.999'%3e%3cg transform='translate(0 0)'%3e%3crect width='3.333' height='3.333' transform='translate(0 0)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(0 6.667)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(6.666 0)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(3.333 3.333)' fill='%23707070'/%3e%3crect width='3.333' height='3.333' transform='translate(6.666 6.667)' fill='%23ccc'/%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(29),o=n(427),c=n(428),l=n(429),s=n(430),u=n(53),d=n(76),h=n(28);function f(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var g=f(a);e.exports=function(e){var t=e.onChange,n=h.useSelector((function(e){return e.annotation.toolInstance})),f=a.useState(20),v=i(f,2),b=v[0],p=v[1],m=a.useState(d.EScribblePattern.Scribble),y=i(m,2),x=y[0],C=y[1],w=function(){t(x,b)};return g.default.createElement("div",{className:u.getClassName("scribble")},g.default.createElement("div",{className:u.getClassName("scribble","select")},g.default.createElement("img",{src:x===d.EScribblePattern.Scribble?o:c,onClick:function(){C(d.EScribblePattern.Scribble),null==n||n.setPattern(d.EScribblePattern.Scribble),w()}}),g.default.createElement("img",{src:x===d.EScribblePattern.Erase?l:s,onClick:function(){C(d.EScribblePattern.Erase),null==n||n.setPattern(d.EScribblePattern.Erase),w()}})),g.default.createElement("div",{className:u.getClassName("scribble","silder")},g.default.createElement("span",{className:u.getClassName("scribble","circle")}),g.default.createElement(r.Slider,{onChange:function(e){p(e),w(),null==n||n.setPenSize(e)},min:1,max:50,style:{width:"60%"},value:b}),g.default.createElement("span",{className:u.getClassName("scribble","circle"),style:{width:"10px",height:"10px"}})))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='12' height='13' viewBox='0 0 12 13' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='9.07153' y='1' width='3' height='10' rx='1' transform='rotate(45 9.07153 1)' fill='%236272FB' /%3e %3cpath d='M1.06068 11.182L1.73311 8.67247L3.57023 10.5096L1.06068 11.182Z' fill='%236272FB' /%3e %3ccircle cx='11.0002' cy='1' r='1' fill='%236272FB' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='12' height='13' viewBox='0 0 12 13' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='9.07153' y='1' width='3' height='10' rx='1' transform='rotate(45 9.07153 1)' fill='%23BAB8B8' /%3e %3cpath d='M1.06068 11.182L1.73311 8.67247L3.57023 10.5096L1.06068 11.182Z' fill='%23BAB8B8' /%3e %3ccircle cx='11.0002' cy='1' r='1' fill='%23BAB8B8' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='10' height='10' viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='6.34875' y='0.353553' width='4.5' height='8.47848' rx='2.25' transform='rotate(45 6.34875 0.353553)' fill='%236272FB' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='1.74547' y1='4.60767' x2='4.92401' y2='8.46733' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='2.00061' y1='9.75' x2='10.0006' y2='9.75' stroke='%236272FB' stroke-width='0.5' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='10' height='10' viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='6.34875' y='0.353553' width='4.5' height='8.47848' rx='2.25' transform='rotate(45 6.34875 0.353553)' fill='%23E6E6E6' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='1.74547' y1='4.60767' x2='4.92401' y2='8.46733' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='2.00061' y1='9.75' x2='10.0006' y2='9.75' stroke='%23BAB8B8' stroke-width='0.5' /%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(0),a=n(230),r=n(54),o=n(28);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=c(i);e.exports=function(){var e=o.useSelector((function(e){var t,n;return r.getCurrentStepInfo(null==(t=null==e?void 0:e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList)}));return l.default.createElement("div",{className:"tipsBar"},l.default.createElement(a,{toolName:null==e?void 0:e.tool}))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3crect width='16' height='16' fill='none'/%3e%3cg transform='translate(1 2)'%3e%3cpath d='M2%2c12a2.071%2c2.071%2c0%2c0%2c1-1.412-.54A1.791%2c1.791%2c0%2c0%2c1%2c0%2c10.151v-8.3A1.935%2c1.935%2c0%2c0%2c1%2c2.006%2c0h9.988A1.935%2c1.935%2c0%2c0%2c1%2c14%2c1.849v8.3a1.77%2c1.77%2c0%2c0%2c1-.588%2c1.308A2.075%2c2.075%2c0%2c0%2c1%2c12%2c12H2Zm1-3.692a.926.926%2c0%2c1%2c0%2c0%2c1.846H11a.926.926%2c0%2c1%2c0%2c0-1.846Zm7.273-3.692C10.2%2c4.616%2c10%2c4.67%2c10%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H11.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm-4%2c0C6.2%2c4.616%2c6%2c4.67%2c6%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H7.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm-4%2c0C2.2%2c4.616%2c2%2c4.67%2c2%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H3.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm8-2.77c-.065%2c0-.268.054-.268.18V3.451c0%2c.078%2c0%2c.241.268.241H11.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Zm-4%2c0C6.2%2c1.846%2c6%2c1.9%2c6%2c2.026V3.451c0%2c.078%2c0%2c.241.268.241H7.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Zm-4%2c0C2.2%2c1.846%2c2%2c1.9%2c2%2c2.026V3.451c0%2c.078%2c0%2c.241.268.241H3.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Z' fill='white'/%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='17' height='15' viewBox='0 0 17 15'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666fff%3b stroke-miterlimit: 10%3b %7d .cls-2%2c .cls-3 %7b stroke: none%3b %7d .cls-3 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_kj_h' transform='translate(1 1)'%3e %3cg id='%e5%9b%be%e6%a0%87_%e8%ae%be%e7%bd%ae_%e5%bf%ab%e6%8d%b7%e9%94%ae'%3e %3cg id='%e5%bd%a2%e7%8a%b6' class='cls-1'%3e %3cpath class='cls-2' d='M 2.142650127410889 13.49960994720459 L 2.14231014251709 13.49960994720459 L 2.141970157623291 13.49960994720459 C 1.443660259246826 13.49962043762207 0.7852402329444885 13.24412059783936 0.2880001962184906 12.78017997741699 C -0.2126297950744629 12.31418991088867 -0.4999997913837433 11.66413974761963 -0.4999997913837433 10.99709987640381 L -0.4999997913837433 2.003400325775146 C -0.4999997913837433 0.6230202317237854 0.6884301900863647 -0.4999997913837433 2.149200201034546 -0.4999997913837433 L 12.85109996795654 -0.4999997913837433 C 14.31187057495117 -0.4999997913837433 15.50030040740967 0.6230202317237854 15.50030040740967 2.003400325775146 L 15.50030040740967 10.99709987640381 C 15.49915027618408 11.6742000579834 15.21883010864258 12.30697059631348 14.71096038818359 12.77968978881836 C 14.2135705947876 13.24379062652588 13.55419063568115 13.49960041046143 12.85474014282227 13.49960041046143 L 2.149200201034546 13.49960041046143 L 2.142650127410889 13.49960994720459 Z M 3.208500146865845 9.5 C 2.89663028717041 9.5 2.642900228500366 9.724249839782715 2.642900228500366 9.999899864196777 C 2.642900228500366 10.27554988861084 2.89663028717041 10.49980068206787 3.208500146865845 10.49980068206787 L 11.79090023040771 10.49980068206787 C 12.10327053070068 10.49980068206787 12.35739994049072 10.27554988861084 12.35739994049072 9.999899864196777 C 12.35739994049072 9.724249839782715 12.10327053070068 9.5 11.79090023040771 9.5 L 3.208500146865845 9.5 Z M 11.21450042724609 6.500200271606445 L 12.35739994049072 6.500200271606445 L 12.35739994049072 5.500400066375732 L 11.21450042724609 5.500400066375732 L 11.21450042724609 6.500200271606445 Z M 6.928699970245361 6.500200271606445 L 8.071599960327148 6.500200271606445 L 8.071599960327148 5.500400066375732 L 6.928699970245361 5.500400066375732 L 6.928699970245361 6.500200271606445 Z M 2.642900228500366 6.500200271606445 L 3.785800218582153 6.500200271606445 L 3.785800218582153 5.500400066375732 L 2.642900228500366 5.500400066375732 L 2.642900228500366 6.500200271606445 Z M 11.21450042724609 3.499600172042847 L 12.35739994049072 3.499600172042847 L 12.35739994049072 2.499800205230713 L 11.21450042724609 2.499800205230713 L 11.21450042724609 3.499600172042847 Z M 6.928699970245361 3.499600172042847 L 8.071599960327148 3.499600172042847 L 8.071599960327148 2.499800205230713 L 6.928699970245361 2.499800205230713 L 6.928699970245361 3.499600172042847 Z M 2.642900228500366 3.499600172042847 L 3.785800218582153 3.499600172042847 L 3.785800218582153 2.499800205230713 L 2.642900228500366 2.499800205230713 L 2.642900228500366 3.499600172042847 Z'/%3e %3cpath class='cls-3' d='M 2.141960144042969 12.99960994720459 L 2.149200201034546 12.99960041046143 L 12.85474014282227 12.99960041046143 C 13.4271297454834 12.99960041046143 13.96537017822266 12.79152011871338 14.37030029296875 12.41370010375977 C 14.77565002441406 12.03639984130859 14.99939060211182 11.53330039978027 15.00030040740967 10.99709987640381 L 15.00030040740967 2.003400325775146 C 15.00030040740967 0.8987202048301697 14.03617000579834 2.188110386214248e-07 12.85109996795654 2.188110386214248e-07 L 2.149200201034546 2.188110386214248e-07 C 0.9641302227973938 2.188110386214248e-07 2.037048290048915e-07 0.8987202048301697 2.037048290048915e-07 2.003400325775146 L 2.037048290048915e-07 10.99709987640381 C 2.037048290048915e-07 11.52581024169922 0.2293002009391785 12.04246044158936 0.6291002035140991 12.41460037231445 C 1.033440232276917 12.79186058044434 1.570720195770264 12.99962043762207 2.141960144042969 12.99960994720459 M 3.208500146865845 9 L 11.79090023040771 9 C 12.3789701461792 9 12.85739994049072 9.448550224304199 12.85739994049072 9.999899864196777 C 12.85739994049072 10.55125045776367 12.3789701461792 10.99980068206787 11.79090023040771 10.99980068206787 L 3.208500146865845 10.99980068206787 C 2.620930194854736 10.99980068206787 2.142900228500366 10.55125045776367 2.142900228500366 9.999899864196777 C 2.142900228500366 9.448550224304199 2.620930194854736 9 3.208500146865845 9 M 11.00160026550293 5.000400066375732 L 12.60449981689453 5.000400066375732 C 12.79372024536133 5.000400066375732 12.85739994049072 5.157999992370605 12.85739994049072 5.229900360107422 L 12.85739994049072 6.769800186157227 C 12.85739994049072 6.844580173492432 12.85739994049072 7.000200271606445 12.64050006866455 7.000200271606445 L 11.00160026550293 7.000200271606445 C 10.71450042724609 7.000200271606445 10.71450042724609 6.823920249938965 10.71450042724609 6.739200115203857 L 10.71450042724609 5.19480037689209 C 10.71450042724609 5.058890342712402 10.9323902130127 5.000400066375732 11.00160026550293 5.000400066375732 M 6.715800285339355 5.000400066375732 L 8.318699836730957 5.000400066375732 C 8.507920265197754 5.000400066375732 8.571599960327148 5.157999992370605 8.571599960327148 5.229900360107422 L 8.571599960327148 6.769800186157227 C 8.571599960327148 6.844580173492432 8.571599960327148 7.000200271606445 8.354700088500977 7.000200271606445 L 6.715800285339355 7.000200271606445 C 6.428699970245361 7.000200271606445 6.428699970245361 6.823920249938965 6.428699970245361 6.739200115203857 L 6.428699970245361 5.19480037689209 C 6.428699970245361 5.058890342712402 6.646590232849121 5.000400066375732 6.715800285339355 5.000400066375732 M 2.430000305175781 5.000400066375732 L 4.032900333404541 5.000400066375732 C 4.22212028503418 5.000400066375732 4.285799980163574 5.157999992370605 4.285799980163574 5.229900360107422 L 4.285799980163574 6.769800186157227 C 4.285799980163574 6.844580173492432 4.285799980163574 7.000200271606445 4.068900108337402 7.000200271606445 L 2.430000305175781 7.000200271606445 C 2.142900228500366 7.000200271606445 2.142900228500366 6.823920249938965 2.142900228500366 6.739200115203857 L 2.142900228500366 5.19480037689209 C 2.142900228500366 5.058890342712402 2.360790252685547 5.000400066375732 2.430000305175781 5.000400066375732 M 11.00160026550293 1.999800205230713 L 12.60449981689453 1.999800205230713 C 12.79372024536133 1.999800205230713 12.85739994049072 2.158020257949829 12.85739994049072 2.230200290679932 L 12.85739994049072 3.770100116729736 C 12.85739994049072 3.844590187072754 12.85739994049072 3.999600172042847 12.64050006866455 3.999600172042847 L 11.00160026550293 3.999600172042847 C 10.71450042724609 3.999600172042847 10.71450042724609 3.823320150375366 10.71450042724609 3.738600254058838 L 10.71450042724609 2.1951003074646 C 10.71450042724609 2.058560132980347 10.9323902130127 1.999800205230713 11.00160026550293 1.999800205230713 M 6.715800285339355 1.999800205230713 L 8.318699836730957 1.999800205230713 C 8.507920265197754 1.999800205230713 8.571599960327148 2.158020257949829 8.571599960327148 2.230200290679932 L 8.571599960327148 3.770100116729736 C 8.571599960327148 3.844590187072754 8.571599960327148 3.999600172042847 8.354700088500977 3.999600172042847 L 6.715800285339355 3.999600172042847 C 6.428699970245361 3.999600172042847 6.428699970245361 3.823320150375366 6.428699970245361 3.738600254058838 L 6.428699970245361 2.1951003074646 C 6.428699970245361 2.058560132980347 6.646590232849121 1.999800205230713 6.715800285339355 1.999800205230713 M 2.430000305175781 1.999800205230713 L 4.032900333404541 1.999800205230713 C 4.22212028503418 1.999800205230713 4.285799980163574 2.158020257949829 4.285799980163574 2.230200290679932 L 4.285799980163574 3.770100116729736 C 4.285799980163574 3.844590187072754 4.285799980163574 3.999600172042847 4.068900108337402 3.999600172042847 L 2.430000305175781 3.999600172042847 C 2.142900228500366 3.999600172042847 2.142900228500366 3.823320150375366 2.142900228500366 3.738600254058838 L 2.142900228500366 2.1951003074646 C 2.142900228500366 2.058560132980347 2.360790252685547 1.999800205230713 2.430000305175781 1.999800205230713 M 2.143340110778809 13.99960994720459 L 2.142660140991211 13.99960994720459 L 2.141980171203613 13.99960994720459 C 1.316610217094421 13.99962043762207 0.537050187587738 13.69639015197754 -0.05309979617595673 13.14577007293701 C -0.654549777507782 12.58592987060547 -0.9999998211860657 11.80247020721436 -0.9999998211860657 10.99709987640381 L -0.9999998211860657 2.003400325775146 C -0.9999998211860657 0.3473202288150787 0.4127302169799805 -0.9999997615814209 2.149200201034546 -0.9999997615814209 L 12.85109996795654 -0.9999997615814209 C 14.58757019042969 -0.9999997615814209 16.00029945373535 0.3473202288150787 16.00029945373535 2.003400325775146 L 16.00029945373535 10.99709987640381 C 15.99890995025635 11.81510066986084 15.66200065612793 12.57754039764404 15.0516300201416 13.14568042755127 C 14.46177005767822 13.6960506439209 13.68125057220459 13.99960041046143 12.85474014282227 13.99960041046143 L 2.149200201034546 13.99960041046143 L 2.143340110778809 13.99960994720459 Z'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(435),a=n(436),r=n(97),o=n(437),c=n(98),l=n(438),s=n(192),u=n(77),d={name:"AnnotateRect",icon:i,shortCut:[r,r]},h={name:"AnnotateInvalidRect",icon:a,shortCut:[r,"Ctrl",r]},f={name:"SelectRect",icon:o,shortCut:[c],noticeInfo:"RightClick"},g={name:"ToggleRectEffectiveness",icon:l,shortCut:["F"]},v={name:"ToggleRectEffectiveness",icon:l,shortCut:["Ctrl",r]},b={name:"DeleteRect",icon:s,shortCut:[c],noticeInfo:"SelectAndDoubleClick"},p=[d,h,f,g,v,b,u.revoke,u.restore,u.rotate,u.scale,u.backward,u.forward,u.dargWithRightClick,u.tabChangeSelected,u.tabReverseChangeSelected];t.changeValid=g,t.changeValidByClick=v,t.default=p,t.deleteRect=b,t.drawInvalidRect=h,t.drawRect=d,t.selectRect=f},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_27' data-name='%e8%b7%af%e5%be%84 27' class='cls-1' d='M3.5-16v.874h7V-16H14v3.5h-.875v7H14V-2H10.5v-.875h-7V-2H0V-5.5H.875v-7H0V-16Zm0%2c2.624v.876H2.625v7H3.5v.875h7V-5.5h.875v-7H10.5v-.875Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_26' data-name='%e8%b7%af%e5%be%84 26' class='cls-2' d='M-1747%2c836H-67V-109H-1747Z' transform='translate(1747 109)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frame_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cg id='%e7%bb%84_25' data-name='%e7%bb%84 25' class='cls-3' transform='translate(0 -16)'%3e %3cg id='%e7%bb%84_24' data-name='%e7%bb%84 24' class='cls-4' transform='translate(-1528.625 -81.375)'%3e %3cpath id='%e8%b7%af%e5%be%84_25' data-name='%e8%b7%af%e5%be%84 25' class='cls-5' d='M-5-21H17.75V1.75H-5Z' transform='translate(1529.25 98)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2%2c .cls-6 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d .cls-6 %7b stroke: %23666%3b %7d .cls-7 %7b stroke: none%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_27' data-name='%e8%b7%af%e5%be%84 27' class='cls-1' d='M3.5-16v.874h7V-16H14v3.5h-.875v7H14V-2H10.5v-.875h-7V-2H0V-5.5H.875v-7H0V-16Zm0%2c2.624v.876H2.625v7H3.5v.875h7V-5.5h.875v-7H10.5v-.875Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_26' data-name='%e8%b7%af%e5%be%84 26' class='cls-2' d='M-1747%2c836H-67V-109H-1747Z' transform='translate(1747 109)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frameNull_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_131' data-name='%e7%9f%a9%e5%bd%a2 131' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3cg id='%e7%bb%84_25' data-name='%e7%bb%84 25' class='cls-3' transform='translate(0 -16)'%3e %3cg id='%e7%bb%84_24' data-name='%e7%bb%84 24' class='cls-4' transform='translate(-1528.625 -81.375)'%3e %3cpath id='%e8%b7%af%e5%be%84_25' data-name='%e8%b7%af%e5%be%84 25' class='cls-5' d='M-5-21H17.75V1.75H-5Z' transform='translate(1529.25 98)'/%3e %3c/g%3e %3c/g%3e %3cg id='%e7%9f%a9%e5%bd%a2_92' data-name='%e7%9f%a9%e5%bd%a2 92' class='cls-6' transform='translate(1.699 -12.97) rotate(-45)'%3e %3crect class='cls-7' width='1.6' height='13'/%3e %3crect class='cls-2' x='0.5' y='0.5' width='0.6' height='12'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666%3b %7d .cls-2 %7b fill: none%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_frameActive_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_2' data-name='%e5%87%8f%e5%8e%bb 2' class='cls-1' d='M1768.5%2c9503H1765v-3.5h.875v-7H1765V9489h3.5v.873l7%2c0V9489h3.5v3.5h-.875v4.5h-1.75v-4.5h-.873v-.873l-7%2c0v.875h-.873v7h.873v.873h4.5v1.751h-4.5V9503Z' transform='translate(-1765 -9505)'/%3e %3cpath id='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd_4' data-name='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd 4' class='cls-1' d='M2.628%2c0%2c5.256%2c5.256%2c2.632%2c4.129%2c0%2c5.256Z' transform='translate(7.667 -6.406) rotate(-30)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_399' data-name='%e8%b7%af%e5%be%84 399' class='cls-2' d='M2.139-17.789H7.33L8-17.12H3.813l1.172%2c1.34h-1ZM7.5-18.627H2.306l-.67-.669H5.823l-1.172-1.34h1L7.5-18.627Z' transform='translate(-1.636 20.636)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frameChange_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_2' data-name='%e5%87%8f%e5%8e%bb 2' class='cls-1' d='M1768.5%2c9503H1765v-3.5h.875v-7H1765V9489h3.5v.873l7%2c0V9489h3.5v3.5h-.875v4.933l-1.75.025V9492.5h-.873v-.873l-7%2c0v.875h-.873v7h.873v.873h3.841l1.391%2c1.751H1768.5V9503Z' transform='translate(-1765 -9505)'/%3e %3cg id='%e7%bb%84_647' data-name='%e7%bb%84 647' transform='translate(7 14)'%3e %3cg id='%e7%bb%84_646' data-name='%e7%bb%84 646' class='cls-3' transform='translate(1.636 -20.636)'%3e %3cpath id='%e8%b7%af%e5%be%84_398' data-name='%e8%b7%af%e5%be%84 398' class='cls-1' d='M-3.364-25.636H6.07v7.927H-3.364Z' transform='translate(1.829 24.101)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_cencel_kj' transform='translate(0.494)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='15.963' transform='translate(-0.494)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.057%2c3.54C8.654%2c7.1%2c4.678%2c7.648.279%2c5.143A.544.544%2c0%2c0%2c1%2c0%2c4.662a.578.578%2c0%2c0%2c1%2c.283-.493A.548.548%2c0%2c0%2c1%2c.84%2c4.163C4.822%2c6.431%2c8.263%2c5.956%2c11.318%2c2.722L8.918.065%2c13.99%2c0l-.072%2c5.6Z' transform='translate(10.937 16) rotate(-138)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_reform_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='15.963'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.057%2c3.148C8.654-.415%2c4.678-.96.279%2c1.546A.544.544%2c0%2c0%2c0%2c0%2c2.027a.578.578%2c0%2c0%2c0%2c.283.493.548.548%2c0%2c0%2c0%2c.557.005C4.822.257%2c8.263.733%2c11.318%2c3.967l-2.4%2c2.657%2c5.072.065-.072-5.6Z' transform='translate(0.094 11.029) rotate(-42)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_274' data-name='%e8%b7%af%e5%be%84 274' class='cls-1' d='M1.732-140.268a5.914%2c5.914%2c0%2c0%2c1%2c8.364%2c0%2c5.916%2c5.916%2c0%2c0%2c1%2c.581%2c7.69L14-129.255%2c12.745-128l-3.323-3.323a5.916%2c5.916%2c0%2c0%2c1-7.69-.581A5.914%2c5.914%2c0%2c0%2c1%2c1.732-140.268Zm7.528.836a4.732%2c4.732%2c0%2c0%2c0-6.691%2c0%2c4.732%2c4.732%2c0%2c0%2c0%2c0%2c6.691%2c4.732%2c4.732%2c0%2c0%2c0%2c6.691%2c0A4.732%2c4.732%2c0%2c0%2c0%2c9.26-139.431Z' transform='translate(0 142)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_273' data-name='%e8%b7%af%e5%be%84 273' class='cls-2' d='M-29-160.285H-9.285V-180H-29Z' transform='translate(29 180)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_loupe_kj' transform='translate(4 144)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_110' data-name='%e7%9f%a9%e5%bd%a2 110' class='cls-2' width='16' height='16' transform='translate(-4 -144)'/%3e %3cg id='%e7%bb%84_470' data-name='%e7%bb%84 470' class='cls-3' transform='translate(-3 -143)'%3e %3cg id='%e7%bb%84_469' data-name='%e7%bb%84 469' class='cls-4' transform='translate(-2.859 -3.746)'%3e %3cpath id='%e8%b7%af%e5%be%84_272' data-name='%e8%b7%af%e5%be%84 272' class='cls-5' d='M-5-147H9.986v14.986H-5Z' transform='translate(7.366 150.253)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_mouse_middle_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5%2c .cls-7 %7b fill: %23ff5770%3b %7d .cls-5 %7b opacity: 0%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.983v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.969-9.7H5.865V0A5.69%2c5.69%2c0%2c0%2c1%2c9.394%2c1.267%2c3.813%2c3.813%2c0%2c0%2c1%2c10.849%2c4.19V5.98Zm-5.864%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.455%2c1.267%2c5.692%2c5.692%2c0%2c0%2c1%2c4.985%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(-0.698 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3cpath id='%e8%b7%af%e5%be%84-3' data-name='%e8%b7%af%e5%be%84' class='cls-7' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_321' data-name='%e8%b7%af%e5%be%84 321' class='cls-1' d='M0%2c0H16V-16H0Z'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_323' data-name='%e8%b7%af%e5%be%84 323' class='cls-1' d='M5.344-14.625H1.875a.5.5%2c0%2c0%2c0-.5.5v3.5a.251.251%2c0%2c0%2c0%2c.25.25h.75a.251.251%2c0%2c0%2c0%2c.25-.25v-2.75H5.344a.251.251%2c0%2c0%2c0%2c.25-.25v-.75A.251.251%2c0%2c0%2c0%2c5.344-14.625Zm9.031%2c9h-.75a.251.251%2c0%2c0%2c0-.25.25v2.75H10.656a.251.251%2c0%2c0%2c0-.25.25v.75a.251.251%2c0%2c0%2c0%2c.25.25h3.469a.5.5%2c0%2c0%2c0%2c.5-.5v-3.5A.251.251%2c0%2c0%2c0%2c14.375-5.625Zm-9.031%2c3H2.625v-2.75a.251.251%2c0%2c0%2c0-.25-.25h-.75a.251.251%2c0%2c0%2c0-.25.25v3.5a.5.5%2c0%2c0%2c0%2c.5.5H5.344a.251.251%2c0%2c0%2c0%2c.25-.25v-.75A.251.251%2c0%2c0%2c0%2c5.344-2.625Zm8.781-12H10.656a.251.251%2c0%2c0%2c0-.25.25v.75a.251.251%2c0%2c0%2c0%2c.25.25h2.719v2.75a.251.251%2c0%2c0%2c0%2c.25.25h.75a.251.251%2c0%2c0%2c0%2c.25-.25v-3.5A.5.5%2c0%2c0%2c0%2c14.125-14.625Z'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_fullView_kj' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_567' data-name='%e7%bb%84 567' class='cls-2'%3e %3cpath id='%e8%b7%af%e5%be%84_320' data-name='%e8%b7%af%e5%be%84 320' class='cls-3' d='M-5-21H21V5H-5Z'/%3e %3c/g%3e %3cg id='%e7%bb%84_568' data-name='%e7%bb%84 568' class='cls-4'%3e %3cpath id='%e8%b7%af%e5%be%84_322' data-name='%e8%b7%af%e5%be%84 322' class='cls-5' d='M-3.625-19.625h23.25V3.625H-3.625Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_reload_kj' transform='translate(-1 -1.432)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16' transform='translate(1 1.432)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.917%2c1.955l-.9.735A6.615%2c6.615%2c0%2c0%2c0%2c6.72%2c0%2c6.86%2c6.86%2c0%2c0%2c0%2c0%2c6.992%2c6.864%2c6.864%2c0%2c0%2c0%2c6.72%2c14a6.745%2c6.745%2c0%2c0%2c0%2c6.315-4.6.135.135%2c0%2c0%2c0-.078-.172L12.05%2c8.9a.127.127%2c0%2c0%2c0-.162.08c-.029.083-.061.167-.094.248a5.722%2c5.722%2c0%2c0%2c1-1.18%2c1.823%2c5.511%2c5.511%2c0%2c0%2c1-1.749%2c1.23%2c5.32%2c5.32%2c0%2c0%2c1-4.283%2c0%2c5.459%2c5.459%2c0%2c0%2c1-1.749-1.23A5.722%2c5.722%2c0%2c0%2c1%2c1.653%2c9.23a5.979%2c5.979%2c0%2c0%2c1%2c0-4.463%2c5.722%2c5.722%2c0%2c0%2c1%2c1.18-1.823%2c5.511%2c5.511%2c0%2c0%2c1%2c1.749-1.23%2c5.32%2c5.32%2c0%2c0%2c1%2c4.283%2c0%2c5.459%2c5.459%2c0%2c0%2c1%2c1.749%2c1.23%2c5.678%2c5.678%2c0%2c0%2c1%2c.445.523L10.1%2c4.25a.135.135%2c0%2c0%2c0%2c.048.235l2.81.717a.13.13%2c0%2c0%2c0%2c.158-.128l.013-3.015a.129.129%2c0%2c0%2c0-.208-.1Z' transform='translate(2 2.432)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg xmlns='http://www.w3.org/2000/svg' class='icon' viewBox='0 0 1024 1024'%3e %3cpath d='M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_last_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M.163%2c6.632%2c7.735.1a.428.428%2c0%2c0%2c1%2c.7.368V13.53a.428.428%2c0%2c0%2c1-.7.368L.163%2c7.368A.5.5%2c0%2c0%2c1%2c.163%2c6.632Z' transform='translate(4 1)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_next_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M8.268%2c6.632.7.1A.428.428%2c0%2c0%2c0%2c0%2c.47V13.53a.428.428%2c0%2c0%2c0%2c.7.368l7.572-6.53A.5.5%2c0%2c0%2c0%2c8.268%2c6.632Z' transform='translate(4 1)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M8.4-7.469a.381.381%2c0%2c0%2c1%2c.382.382h0V-2.15a.381.381%2c0%2c0%2c1-.382.382H2.1a.381.381%2c0%2c0%2c1-.382-.382h0V-7.087A.381.381%2c0%2c0%2c1%2c2.1-7.469H8.4Zm-.525.906H2.627v3.887H7.874Z' transform='translate(-1.721 7.469)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M16.812-10.1a4.782%2c4.782%2c0%2c0%2c0-1.839%2c3.751l-.763%2c0a.093.093%2c0%2c0%2c0-.073.15l1.2%2c1.526a.094.094%2c0%2c0%2c0%2c.147%2c0L16.694-6.2a.093.093%2c0%2c0%2c0-.073-.15H15.86a4.019%2c4.019%2c0%2c0%2c1%2c.03-.463%2c3.888%2c3.888%2c0%2c0%2c1%2c.461-1.419%2c3.9%2c3.9%2c0%2c0%2c1%2c1.005-1.173%2c3.884%2c3.884%2c0%2c0%2c1%2c1.381-.693%2c3.887%2c3.887%2c0%2c0%2c1%2c1.488-.106c.064.008.129.017.192.029v-.893A4.752%2c4.752%2c0%2c0%2c0%2c16.812-10.1Z' transform='translate(-14.118 11.118)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='c'%3e%3cpath d='M13.382-15.3A.381.381%2c0%2c0%2c1%2c13-15.682h0v-4.937A.381.381%2c0%2c0%2c1%2c13.382-21h6.3a.381.381%2c0%2c0%2c1%2c.382.382h0v4.937a.381.381%2c0%2c0%2c1-.382.382h-6.3Zm.525-.906h5.247v-3.887H13.906Z' transform='translate(-13 21)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='d'%3e%3cpath d='M4.583-12.907a4.782%2c4.782%2c0%2c0%2c0%2c1.839-3.751l.763%2c0a.093.093%2c0%2c0%2c0%2c.073-.15l-1.2-1.526a.094.094%2c0%2c0%2c0-.147%2c0L4.7-16.809a.093.093%2c0%2c0%2c0%2c.073.15h.762a4.017%2c4.017%2c0%2c0%2c1-.03.463%2c3.888%2c3.888%2c0%2c0%2c1-.461%2c1.419A3.9%2c3.9%2c0%2c0%2c1%2c4.039-13.6a3.884%2c3.884%2c0%2c0%2c1-1.381.693%2c3.887%2c3.887%2c0%2c0%2c1-1.488.106c-.064-.008-.129-.017-.192-.029v.893A4.752%2c4.752%2c0%2c0%2c0%2c4.583-12.907Z' transform='translate(-0.978 18.372)' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(0)'%3e%3crect width='16' height='16' transform='translate(0)' fill='none'/%3e%3cg transform='translate(0 0.294)'%3e%3cg transform='translate(8.374)' clip-path='url(%23a)'%3e%3cpath d='M-3.279-12.469H11.412V.863H-3.279Z' transform='translate(-0.537 8.653)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(0 2.005)' clip-path='url(%23b)'%3e%3cpath d='M9.118-2.007V-16.118H23.049V-2.007Z' transform='translate(-12.934 12.302)' fill='%23666'/%3e%3c/g%3e%3crect width='6' height='5' transform='translate(0.327 10.603)' fill='%23ccc'/%3e%3cg transform='translate(0.093 10.006)' clip-path='url(%23c)'%3e%3cpath d='M22.691-12.669H8V-26H22.691Z' transform='translate(-11.816 22.184)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(9.701 7.221)' clip-path='url(%23d)'%3e%3cpath d='M9.909-23.372V-9.261H-4.022V-23.372Z' transform='translate(0.206 19.556)' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M0%2c0H16V-16H0Z' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M13.958-11.417l-2.541-2.541a1%2c1%2c0%2c0%2c0-.708-.292H2.25a.5.5%2c0%2c0%2c0-.5.5v11.5a.5.5%2c0%2c0%2c0%2c.5.5h11.5a.5.5%2c0%2c0%2c0%2c.5-.5v-8.461A1%2c1%2c0%2c0%2c0%2c13.958-11.417ZM6-13.25h4v1.75H6ZM8-4.594a2.251%2c2.251%2c0%2c0%2c1-2.25-2.25A2.251%2c2.251%2c0%2c0%2c1%2c8-9.094a2.251%2c2.251%2c0%2c0%2c1%2c2.25%2c2.25A2.251%2c2.251%2c0%2c0%2c1%2c8-4.594Zm0-3.5a1.25%2c1.25%2c0%2c0%2c0-1.25%2c1.25A1.25%2c1.25%2c0%2c0%2c0%2c8-5.594a1.25%2c1.25%2c0%2c0%2c0%2c1.25-1.25A1.25%2c1.25%2c0%2c0%2c0%2c8-8.094Z' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(0 16)'%3e%3cg clip-path='url(%23a)'%3e%3cpath d='M-5-21H21V5H-5Z' fill='rgba(0%2c0%2c0%2c0)'/%3e%3c/g%3e%3cg clip-path='url(%23b)'%3e%3cpath d='M-3.25-19.25h22.5V3.25H-3.25Z' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineSpecial_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23ccc%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='%e8%b7%af%e5%be%84_607' data-name='%e8%b7%af%e5%be%84 607' class='cls-1' d='M12.564%2c4.659l-8.833%2c9.22h8.833Z' transform='translate(0 -1)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(5.604 11.916) rotate(-135)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(8.115 9.239) rotate(-135)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(10.625 6.561) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='7' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-5' width='1.5' height='8' transform='translate(4.75 13.5) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_492' data-name='%e8%b7%af%e5%be%84 492' class='cls-1' d='M0%2c2H16V-14H0Z' transform='translate(0 14)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_noDisplay' transform='translate(0 15)'%3e %3cg id='%e7%bb%84_817' data-name='%e7%bb%84 817' class='cls-3' transform='translate(0 -15)'%3e %3cpath id='%e8%b7%af%e5%be%84_491' data-name='%e8%b7%af%e5%be%84 491' class='cls-4' d='M-5-19H21V7H-5Z' transform='translate(0 15)'/%3e %3c/g%3e %3cpath id='%e5%87%8f%e5%8e%bb_1' data-name='%e5%87%8f%e5%8e%bb 1' class='cls-2' d='M7.114%2c9.861a7.321%2c7.321%2c0%2c0%2c1-3.965-1.19A8.865%2c8.865%2c0%2c0%2c1%2c.159%2c5.522a1.179%2c1.179%2c0%2c0%2c1%2c0-1.181%2c8.865%2c8.865%2c0%2c0%2c1%2c2.989-3.15c.1-.065.206-.128.311-.188l1.51%2c1.628a2.682%2c2.682%2c0%2c0%2c0-.27%2c1.2.42.42%2c0%2c0%2c0%2c.111.292.351.351%2c0%2c0%2c0%2c.267.119.367.367%2c0%2c0%2c0%2c.274-.119.414.414%2c0%2c0%2c0%2c.111-.292%2c1.928%2c1.928%2c0%2c0%2c1%2c.086-.582L9.065%2c7.047a3.241%2c3.241%2c0%2c0%2c1-1.949.623A3.325%2c3.325%2c0%2c0%2c1%2c4.6%2c6.545%2c3.852%2c3.852%2c0%2c0%2c1%2c3.556%2c3.836%2c3.98%2c3.98%2c0%2c0%2c1%2c4.04%2c1.91%2c8.1%2c8.1%2c0%2c0%2c0%2c1.015%2c4.931a8.574%2c8.574%2c0%2c0%2c0%2c2.647%2c2.8%2c6.217%2c6.217%2c0%2c0%2c0%2c3.451%2c1.04A6.16%2c6.16%2c0%2c0%2c0%2c10%2c8.057l.755.814A7.261%2c7.261%2c0%2c0%2c1%2c7.114%2c9.861Zm4.659-1.67h0l-.739-.8A8.7%2c8.7%2c0%2c0%2c0%2c13.21%2c4.931%2c8.088%2c8.088%2c0%2c0%2c0%2c10.185%2c1.91a3.981%2c3.981%2c0%2c0%2c1%2c.484%2c1.926%2c3.868%2c3.868%2c0%2c0%2c1-.751%2c2.357L6.295%2c2.286a1.512%2c1.512%2c0%2c0%2c1%2c.818-.23.357.357%2c0%2c0%2c0%2c.27-.12.409.409%2c0%2c0%2c0%2c.111-.292.417.417%2c0%2c0%2c0-.111-.292.355.355%2c0%2c0%2c0-.27-.12%2c2.2%2c2.2%2c0%2c0%2c0-1.368.46L4.6.46A7.088%2c7.088%2c0%2c0%2c1%2c7.114%2c0a7.321%2c7.321%2c0%2c0%2c1%2c3.965%2c1.19%2c8.85%2c8.85%2c0%2c0%2c1%2c2.989%2c3.15%2c1.179%2c1.179%2c0%2c0%2c1%2c0%2c1.181%2c8.821%2c8.821%2c0%2c0%2c1-2.295%2c2.669Z' transform='translate(1.088 -11.738)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_235' data-name='%e7%9f%a9%e5%bd%a2 235' class='cls-2' width='1.166' height='18.662' transform='matrix(0.719%2c -0.695%2c 0.695%2c 0.719%2c 0.745%2c -12.953)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: white%3b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_playPause' transform='translate(0.16 0.16)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16' transform='translate(-0.16 -0.16)'/%3e %3cg id='%e7%bb%84_1221' data-name='%e7%bb%84 1221' transform='translate(1.84 3.671)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M6.038%2c3.829.508.059A.32.32%2c0%2c0%2c0%2c0%2c.271V7.813a.32.32%2c0%2c0%2c0%2c.508.212l5.53-3.771A.249.249%2c0%2c0%2c0%2c6.038%2c3.829Z' transform='translate(1 0)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_400' data-name='%e7%9f%a9%e5%bd%a2 400' class='cls-2' width='1.524' height='7.618' rx='0.762' transform='translate(6.828 0.233)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_401' data-name='%e7%9f%a9%e5%bd%a2 401' class='cls-2' width='1.524' height='7.618' rx='0.762' transform='translate(9.718 0.233)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_forward_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1225' data-name='%e7%bb%84 1225' transform='translate(-0.347 0.145)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M6%2c3.807.505.058A.318.318%2c0%2c0%2c0%2c0%2c.27v7.5a.318.318%2c0%2c0%2c0%2c.505.211L6%2c4.229A.248.248%2c0%2c0%2c0%2c6%2c3.807Z' transform='translate(2.348 3.855)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M6%2c3.807.505.058A.318.318%2c0%2c0%2c0%2c0%2c.27v7.5a.318.318%2c0%2c0%2c0%2c.505.211L6%2c4.229A.248.248%2c0%2c0%2c0%2c6%2c3.807Z' transform='translate(7.824 3.855)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_back_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1224' data-name='%e7%bb%84 1224' transform='translate(-0.347 0.145)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M.118%2c3.807%2c5.615.058A.318.318%2c0%2c0%2c1%2c6.12.27v7.5a.318.318%2c0%2c0%2c1-.505.211L.118%2c4.229A.248.248%2c0%2c0%2c1%2c.118%2c3.807Z' transform='translate(7.824 3.855)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M.118%2c3.807%2c5.615.058A.318.318%2c0%2c0%2c1%2c6.12.27v7.5a.318.318%2c0%2c0%2c1-.505.211L.118%2c4.229A.248.248%2c0%2c0%2c1%2c.118%2c3.807Z' transform='translate(2.348 3.855)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_speed_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1223' data-name='%e7%bb%84 1223' transform='translate(-0.118 0.286)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_402' data-name='%e7%9f%a9%e5%bd%a2 402' class='cls-2' width='1.5' height='6' rx='0.75' transform='translate(8.118 12.043) rotate(90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_403' data-name='%e7%9f%a9%e5%bd%a2 403' class='cls-2' width='1.5' height='4' rx='0.75' transform='translate(6.118 9.043) rotate(90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_404' data-name='%e7%9f%a9%e5%bd%a2 404' class='cls-2' width='1.5' height='3' rx='0.75' transform='translate(5.118 6.043) rotate(90)'/%3e %3cpath id='%e5%80%8d%e9%80%9f' class='cls-2' d='M219.687%2c4.153H217.4L218.806.2a.267.267%2c0%2c0%2c0%2c.017-.084.278.278%2c0%2c0%2c0-.289-.269h-2.872a.28.28%2c0%2c0%2c0-.269.186l-2.312%2c6.454a.267.267%2c0%2c0%2c0-.017.084.278.278%2c0%2c0%2c0%2c.289.269h2.552l-.541%2c4.539c0%2c.008-.008.02-.008.029a.278.278%2c0%2c0%2c0%2c.289.269.285.285%2c0%2c0%2c0%2c.253-.157l4.042-6.986a.248.248%2c0%2c0%2c0%2c.029-.111.272.272%2c0%2c0%2c0-.281-.273Z' transform='translate(-206.065 1.862)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(457),a=n(458),r=n(459),o=n(192),c=n(97),l=n(98),s=n(77),u={name:"AnnotatePoint",icon:i,shortCut:[c]},d={name:"AnnotateInvalidPoint",icon:a,shortCut:["Ctrl",c]},h={name:"SelectPoint",icon:r,shortCut:[l],noticeInfo:"RightClick"},f={name:"DeletePoint",icon:o,shortCut:["Del"]},g=[u,d,h,f,s.revoke,s.restore,s.rotate,s.scale,s.backward,s.forward,s.dargWithRightClick,s.tabChangeSelected,s.tabReverseChangeSelected];t.default=g,t.deletePoint=f,t.drawInvalidPoint=d,t.drawPoint=u,t.selectPoint=h},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_point_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3ccircle id='%e6%a4%ad%e5%9c%86%e5%bd%a2' class='cls-2' cx='2.392' cy='2.392' r='2.392' transform='translate(4.811 4.811)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_pointNull_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d .cls-3%2c .cls-5 %7b fill: none%3b %7d .cls-3 %7b stroke: %23666%3b %7d .cls-4 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3ccircle id='%e6%a4%ad%e5%9c%86%e5%bd%a2' class='cls-2' cx='2.392' cy='2.392' r='2.392' transform='translate(4.811 4.811)'/%3e %3c/g%3e %3cg id='%e7%9f%a9%e5%bd%a2_92' data-name='%e7%9f%a9%e5%bd%a2 92' class='cls-3' transform='translate(2.757 4.089) rotate(-45)'%3e %3crect class='cls-4' width='1.6' height='13'/%3e %3crect class='cls-5' x='0.5' y='0.5' width='0.6' height='12'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_pointActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_3' data-name='%e5%87%8f%e5%8e%bb 3' class='cls-2' d='M1506.068%2c9508.987a2.393%2c2.393%2c0%2c1%2c1%2c2.391-2.394l-1.919%2c0v2.345A2.436%2c2.436%2c0%2c0%2c1%2c1506.068%2c9508.987Z' transform='translate(-1498.865 -9499.393)'/%3e %3c/g%3e %3cpath id='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd_4' data-name='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd 4' class='cls-2' d='M2.628%2c0%2c5.256%2c5.256%2c2.632%2c4.129%2c0%2c5.256Z' transform='translate(7.139 9.595) rotate(-30)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(233),a=n(461),r=n(462),o=n(463),c=n(464),l=n(97),s=n(98),u=n(234),d=n(465),h=n(235),f=n(466),g=n(467),v=n(77),b={name:"AnnotatePolygon",icon:i,shortCut:[l]},p={name:"AnnotateInvalidPolygon",icon:a,shortCut:["Ctrl",l]},m={name:"SelectPolygon",icon:r,shortCut:[s],noticeInfo:"RightClick"},y={name:"TogglePolygonEffectiveness",icon:o,shortCut:["F"]},x={name:"DeletePolygon",icon:c,shortCut:["Del"]},C={name:"ContinueToLabel",icon:u,shortCut:["Space"]},w={name:"InsertPoint",icon:d,noticeInfo:"SelectAndDoubleClick",shortCut:[l]},I={name:"DeletePoint",icon:c,noticeInfo:"SelectAndDoubleClick",shortCut:[s]},k={name:"StopAdsorption",icon:h,noticeInfo:"Press",shortCut:["Alt"]},L={name:"CropOverlapArea",icon:f,noticeInfo:"",shortCut:["ALT","X"]},P={name:"CombineOverlapArea",icon:g,noticeInfo:"",shortCut:["Alt","Z"]},S=[b,p,m,y,x,C,w,I,k,v.revoke,v.restore,v.rotate,v.scale,v.backward,v.forward,v.setValid,v.dargWithRightClick,v.dargWithLeftClick,v.tabChangeSelected,v.tabReverseChangeSelected,P,L];t.changePolygonAttribute=y,t.combinePolygon=P,t.default=S,t.deletePolygon=x,t.deletePolygonPoint=I,t.insertPolygonPoint=w,t.invalidPolygon=p,t.keepLine=C,t.polygon=b,t.selectedPolygon=m,t.splitPolygon=L,t.suspendAbsorption=k},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16.707' height='16' viewBox='0 0 16.707 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-1%2c .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d .cls-1%2c .cls-3 %7b stroke-miterlimit: 10%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b stroke: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_polygonNull_kj' transform='translate(0 -2)'%3e %3cg id='icon_line' transform='translate(10)'%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-1' width='1.499' height='15.5' transform='translate(-6.021 6.04) rotate(-45)'/%3e %3c/g%3e %3cg id='icon_polygonNull_kj-2' data-name='icon_polygonNull_kj' transform='translate(0 2)'%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_10' data-name='%e5%87%8f%e5%8e%bb 10' class='cls-4' d='M18500.451%2c2801h-6v-1.5h4.514l1.488%2c1.487%2c0%2c.012Zm-5.148-1.584h0l-1.059-1.058%2c1.783-1.789%2c1.061%2c1.059-1.785%2c1.788Zm7.895-2.75%2c0%2c0-1.5-1.5V2792.5h1.5v4.166Zm-2.578-2.579h0l-1.061-1.06%2c1.047-1.051%2c1.064%2c1.059-1.051%2c1.052Z' transform='translate(-18489.699 -2787.496)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-3 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-4' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-4' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonChange_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23ccc%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='%e5%87%8f%e5%8e%bb_12' data-name='%e5%87%8f%e5%8e%bb 12' class='cls-1' d='M18493%2c2716.574l0%2c0%2c8.451-8.572.242%2c4.933h-3.889v3.513l-4.8.129Z' transform='translate(-18489.408 -2704.132)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_11' data-name='%e5%87%8f%e5%8e%bb 11' class='cls-5' d='M18496.65%2c2716.5H18493V2715h3.65v1.5Zm5.1-4.7h-1.5V2708h1.5v3.8Z' transform='translate(-18488.25 -2703)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonDel_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonInsert_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(9.222 9.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-4' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-5' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect opacity='0.01' width='16' height='16' fill='black'/%3e%3crect x='13.5' y='9.49963' width='7' height='7' transform='rotate(180 13.5 9.49963)' fill='%23CCCCCC' stroke='%23666666'/%3e%3crect x='9.5' y='13.4996' width='7' height='7' transform='rotate(180 9.5 13.4996)' fill='%23CCCCCC' stroke='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect opacity='0.01' width='16' height='16' fill='black'/%3e%3cpath d='M10.002 9.52532H9.50201V10.0253V13.5406L2.50202 13.5406L2.50202 6.51493L6.00397 6.51493H6.50397V6.01493L6.50397 2.49963L13.5001 2.49963L13.5001 9.52532H10.002Z' fill='%23CCCCCC' stroke='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(233),a=n(97),r=n(469),o=n(470),c=n(471),l=n(98),s=n(472),u=n(192),d=n(234),h=n(473),f=n(474),g=n(235),v=n(77),b={name:"AnnotateLine",icon:i,shortCut:[a]},p={name:"AnnotateInvalidLine",icon:r,shortCut:["Ctrl",a]},m={name:"HorizontalOrVertical",icon:o,shortCut:["Shift",a]},y={name:"SelectLine",icon:c,shortCut:[l]},x={name:"ToggleLineEffectiveness",icon:s,shortCut:["F"]},C={name:"DeleteLine",icon:u,noticeInfo:"SelectAndDoubleClick",shortCut:[l]},w={name:"ContinueToLabel",icon:d,noticeInfo:"Select",shortCut:["Space"]},I={name:"InsertPoint",icon:h,noticeInfo:"ClickOnLine",shortCut:[a]},k={name:"DeletePoint",icon:f,noticeInfo:"DblClickOnPoint",shortCut:[l]},L={name:"StopAdsorption",icon:g,noticeInfo:"Press",shortCut:["Alt"]},P=[b,p,m,y,x,C,w,v.changeSpecialLine,I,k,L,v.revoke,v.restore,v.rotate,v.scale,v.backward,v.forward,v.setValid,v.dargWithRightClick,v.dargWithLeftClick,v.hidden,v.tabChangeSelected,v.tabReverseChangeSelected];t.changeLineAttribute=x,t.default=P,t.deleteLine=C,t.deletePoint=k,t.horizontalLine=m,t.insertPoint=I,t.invalidLine=p,t.keepLine=w,t.line=b,t.selectLine=y,t.suspendAbsorption=L},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineNull_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b stroke: rgba(0%2c0%2c0%2c0)%3b stroke-miterlimit: 10%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_6' data-name='%e5%87%8f%e5%8e%bb 6' class='cls-2' d='M14710.063%2c1373.254h0l-1.063-1.059%2c2.184-2.182%2c1.062%2c1.061-2.18%2c2.181Zm5.009-5.009h0l-1.061-1.06%2c2.417-2.415%2c1.06%2c1.06-2.414%2c2.415Z' transform='translate(-14705.021 -1360.788)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.499' height='7.5' transform='translate(4.979 6.04) rotate(-45)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_straightLine_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b stroke: rgba(0%2c0%2c0%2c0)%3b stroke-miterlimit: 10%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_955' data-name='%e7%bb%84 955' transform='translate(-0.721)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(12.721 9.721) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(1.721 9.723) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.5' height='10.5' transform='translate(3.471 9.002) rotate(-90)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: %23666%3b %7d .cls-4 %7b fill: white%3b stroke: %23707070%3b %7d .cls-5 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%9f%a9%e5%bd%a2_254' data-name='%e7%9f%a9%e5%bd%a2 254' class='cls-2' transform='translate(1.22 1.22)'%3e %3crect class='cls-5' width='14.4' height='14.4'/%3e %3crect class='cls-1' x='0.5' y='0.5' width='13.4' height='13.4'/%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' width='1.5' height='10.5' transform='translate(5.04 12.465) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-4' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-4' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineChange_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: %23666%3b %7d .cls-4 %7b clip-path: url(%23clip-path)%3b %7d .cls-5 %7b fill: white%3b stroke: %23707070%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_399' data-name='%e8%b7%af%e5%be%84 399' class='cls-1' d='M2.139-17.789H7.33L8-17.12H3.813l1.172%2c1.34h-1ZM7.5-18.627H2.306l-.67-.669H5.823l-1.172-1.34h1L7.5-18.627Z' transform='translate(-1.636 20.636)'/%3e %3c/clipPath%3e %3c/defs%3e %3cpath id='%e8%b7%af%e5%be%84_599' data-name='%e8%b7%af%e5%be%84 599' class='cls-2' d='M9.937%2c14.746h-7.9V1.654' transform='translate(-0.316)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' width='1.5' height='10.5' transform='translate(5.04 12.465) rotate(-135)'/%3e %3cpath id='%e8%b7%af%e5%be%84_598' data-name='%e8%b7%af%e5%be%84 598' class='cls-2' d='M2.035%2c1.654H15.557V9.5' transform='translate(-0.815)'/%3e %3cg id='%e7%bb%84_965' data-name='%e7%bb%84 965' transform='translate(8 31)'%3e %3cg id='%e7%bb%84_646' data-name='%e7%bb%84 646' class='cls-4' transform='translate(1.636 -20.636)'%3e %3cpath id='%e8%b7%af%e5%be%84_398' data-name='%e8%b7%af%e5%be%84 398' class='cls-3' d='M-3.364-25.636H6.07v7.927H-3.364Z' transform='translate(1.829 24.101)'/%3e %3c/g%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-5' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-5' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineInsert_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='4' height='4' transform='translate(10.222 10.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineDel_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: white%3b %7d .cls-3%2c .cls-4 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-5 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d .cls-6 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3cg id='%e7%9f%a9%e5%bd%a2_273' data-name='%e7%9f%a9%e5%bd%a2 273' class='cls-1' transform='translate(1.221 1.22)'%3e %3crect class='cls-6' width='14' height='14'/%3e %3crect class='cls-2' x='0.5' y='0.5' width='13' height='13'/%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-4' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-5' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_317' data-name='%e8%b7%af%e5%be%84 317' class='cls-1' d='M0%2c0H16V-16H0Z'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_319' data-name='%e8%b7%af%e5%be%84 319' class='cls-1' d='M14.656-8.831l-.462-4.884a.531.531%2c0%2c0%2c0-.478-.478l-4.884-.462H8.825a.16.16%2c0%2c0%2c0-.119.045L1.389-7.294a.156.156%2c0%2c0%2c0%2c0%2c.22L7.073-1.389a.155.155%2c0%2c0%2c0%2c.111.045A.155.155%2c0%2c0%2c0%2c7.3-1.389l7.317-7.317A.165.165%2c0%2c0%2c0%2c14.656-8.831ZM10.922-9.953a1%2c1%2c0%2c0%2c1-1-1%2c1%2c1%2c0%2c0%2c1%2c1-1%2c1%2c1%2c0%2c0%2c1%2c1%2c1A1%2c1%2c0%2c0%2c1%2c10.922-9.953Z'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_tag_kj' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_561' data-name='%e7%bb%84 561' class='cls-2'%3e %3cpath id='%e8%b7%af%e5%be%84_316' data-name='%e8%b7%af%e5%be%84 316' class='cls-3' d='M-5-21H21V5H-5Z'/%3e %3c/g%3e %3cg id='%e7%bb%84_562' data-name='%e7%bb%84 562' class='cls-4'%3e %3cpath id='%e8%b7%af%e5%be%84_318' data-name='%e8%b7%af%e5%be%84 318' class='cls-5' d='M-3.657-19.656H19.657V3.656H-3.657Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(77),a=[i.saveResult,i.scale,i.rotate,i.fullScreen,i.setValid,i.backward,i.forward,i.dargWithRightClick,i.dargWithLeftClick];e.exports=a},function(e,t,n){"use strict";var i=n(47),a=n(77),r=n(236);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=o(i),l=c.default.cloneDeep(a.forward),s=c.default.cloneDeep(a.backward);l.name="NextFile",s.name="PreviousFile";var u=[a.saveResult,r.tagInSingleImg,a.playPause,a.speed,a.rewind,a.forwardForward,a.fullScreen,s,l];e.exports=u},function(e,t,n){"use strict";var i=n(77),a=n(231),r=n(97),o=n(98),c=n(479),l=n(480),s=n(481),u=n(482),d=n(483),h=n(484),f=n(485),g=n(486),v=n(232),b=n(0),p=n(63);function m(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var y=m(b),x={name:"PointThickness",icon:y.default.createElement("span",{style:{display:" inline-block",width:14,height:14,borderRadius:"50%",border:"1px solid"}}),shortCut:["+","-"],linkSymbol:""},C={name:"RotateAroundCenterPoint",icon:y.default.createElement(p.ReloadOutlined,null),shortCut:[r],noticeInfo:"DragOperation"},w={name:"PointCloudViewTranslate",icon:a,shortCut:[o],noticeInfo:"Drag"},I={name:"TopViewTranslate",icon:a,shortCut:[o],noticeInfo:"Drag"},k={name:"ChangePointCloudValid",icon:c,shortCut:["V"]},L={name:"CopyBox",icon:l,shortCut:["Ctrl","C"]},P={name:"PasteBox",icon:u,shortCut:["Ctrl","V"]},S={name:"RotateLeft",icon:y.default.createElement(p.RotateLeftOutlined,null),shortCut:["Q"]},O={name:"RotateRight",icon:y.default.createElement(p.RotateRightOutlined,null),shortCut:["E"]},A={name:"PreviousBox",icon:d,shortCut:["Shift","Tab"]},T={name:"NextBox",icon:s,shortCut:["Tab"]},E={name:"Rotate180",icon:h,shortCut:["G"],noticeInfo:"SelectedStatus"},D={name:"CopyPrevPage",icon:l,shortCut:["Alt","C"]},N={name:"ChangeBoxValid",icon:v,shortCut:["F"],noticeInfo:"SelectedStatus"},R={name:"MultiSelect",icon:g,shortCut:["Ctrl",o]},M={name:"SelectAllBox",icon:f,shortCut:["Ctrl","A"]},_=[{name:"GeneralOperation"},i.backward,i.forward,x,i.scale,C,w,I,k,{name:"RectPattern"},L,P,S,O,A,T,E,D,N,R,M,i.fullScreen];e.exports=_},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect x='4.81982' y='12.3096' width='1.49968' height='10.4997' transform='rotate(-135 4.81982 12.3096)' fill='%23666666'/%3e%3cg clip-path='url(%23clip0_90_7913)'%3e%3cg clip-path='url(%23clip1_90_7913)'%3e%3cmask id='mask0_90_7913' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='9' y='10' width='7' height='6'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.91842 13.0569L15.1098 13.0582L15.7797 13.7267H11.5931L12.7653 15.0664H11.7605L9.91842 13.0569ZM15.2773 12.2195L10.0859 12.2182L9.41602 11.5497H13.6026L12.4304 10.21H13.4351L15.2772 12.2195H15.2773Z' fill='white'/%3e%3c/mask%3e%3cg mask='url(%23mask0_90_7913)'%3e%3cpath d='M7.88104 8.6748H17.3149V16.6014H7.88104V8.6748Z' fill='%23666666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3crect x='14.0015' y='5.06738' width='2.99984' height='2.99984' transform='rotate(180 14.0015 5.06738)' fill='white' stroke='%23707070'/%3e%3crect x='5.00146' y='14.0674' width='2.99984' height='2.99984' transform='rotate(180 5.00146 14.0674)' fill='white' stroke='%23707070'/%3e%3cdefs%3e%3cclipPath id='clip0_90_7913'%3e%3crect width='6.36365' height='4.85646' fill='white' transform='translate(9.41602 10.21)'/%3e%3c/clipPath%3e%3cclipPath id='clip1_90_7913'%3e%3crect width='6.36365' height='4.85646' fill='white' transform='translate(9.41602 10.21)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M10.7292 4.8335H2.60419C2.08642 4.8335 1.66669 5.25323 1.66669 5.771V13.896C1.66669 14.4138 2.08642 14.8335 2.60419 14.8335H10.7292C11.247 14.8335 11.6667 14.4138 11.6667 13.896V5.771C11.6667 5.25323 11.247 4.8335 10.7292 4.8335Z' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M7.63151 12.7676L1.10109 5.19533C0.858489 4.91296 1.07723 4.49935 1.46897 4.49935H14.5298C14.9215 4.49935 15.1403 4.91296 14.8977 5.19533L8.36727 12.7676C8.18035 12.9844 7.81843 12.9844 7.6315 12.7676H7.63151Z' fill='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' fill='%23CCCCCC'/%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M10.7292 4.8335H2.60419C2.08642 4.8335 1.66669 5.25323 1.66669 5.771V13.896C1.66669 14.4138 2.08642 14.8335 2.60419 14.8335H10.7292C11.247 14.8335 11.6667 14.4138 11.6667 13.896V5.771C11.6667 5.25323 11.247 4.8335 10.7292 4.8335Z' fill='%23CCCCCC' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M7.63151 4.23239L1.10109 11.8047C0.858489 12.087 1.07723 12.5006 1.46897 12.5006H14.5298C14.9215 12.5006 15.1403 12.087 14.8977 11.8047L8.36727 4.23239C8.18035 4.01564 7.81843 4.01564 7.6315 4.23239H7.63151Z' fill='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M14.0606 2.74219V5.16642H11.6364' stroke='%23666666' stroke-width='0.8' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M14.6667 8.50016C14.6667 12.1821 11.6819 15.1668 8.00002 15.1668C4.31812 15.1668 1.33335 12.1821 1.33335 8.50016C1.33335 4.81826 4.31812 1.8335 8.00002 1.8335C10.4674 1.8335 12.6217 3.17387 13.7744 5.1662' stroke='%23666666' stroke-width='1.3' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M4.219 11V6.016H3.281L2.518 6.611V7.661L3.281 7.115V11H4.219ZM7.6968 9.572C7.6968 9.299 7.6758 9.012 7.5638 8.781C7.4938 8.641 7.3958 8.529 7.2628 8.424C7.3818 8.326 7.4658 8.221 7.5288 8.095C7.6408 7.857 7.6618 7.612 7.6618 7.353C7.6618 6.926 7.5918 6.562 7.3048 6.275C7.0878 6.058 6.7798 5.96 6.4438 5.96C6.1078 5.96 5.8138 6.058 5.5968 6.275C5.3098 6.562 5.2398 6.926 5.2398 7.353C5.2398 7.612 5.2608 7.857 5.3728 8.095C5.4358 8.221 5.5198 8.326 5.6388 8.424C5.5058 8.529 5.4078 8.641 5.3378 8.781C5.2258 9.012 5.2048 9.299 5.2048 9.572C5.2048 10.041 5.2328 10.412 5.5618 10.734C5.7858 10.951 6.1148 11.056 6.4508 11.056C6.7868 11.056 7.1158 10.951 7.3398 10.734C7.6688 10.412 7.6968 10.041 7.6968 9.572ZM6.7588 9.523C6.7588 9.656 6.7728 9.978 6.6748 10.111C6.6258 10.174 6.5418 10.216 6.4508 10.216C6.3598 10.216 6.2758 10.181 6.2268 10.111C6.1288 9.971 6.1428 9.656 6.1428 9.523C6.1428 9.39 6.1218 9.061 6.2268 8.921C6.2758 8.851 6.3598 8.816 6.4508 8.816C6.5418 8.816 6.6188 8.851 6.6748 8.921C6.7798 9.061 6.7588 9.39 6.7588 9.523ZM6.7238 7.402C6.7238 7.528 6.7518 7.843 6.6258 7.969C6.5838 8.011 6.5208 8.032 6.4508 8.032C6.3808 8.032 6.3248 8.011 6.2758 7.969C6.1428 7.85 6.1778 7.528 6.1778 7.402C6.1778 7.283 6.1568 7.003 6.2548 6.884C6.3038 6.828 6.3738 6.8 6.4508 6.8C6.5278 6.8 6.5978 6.828 6.6468 6.884C6.7448 7.003 6.7238 7.283 6.7238 7.402ZM10.6496 9.838V7.178C10.6496 6.744 10.5306 6.492 10.3066 6.282C10.0826 6.065 9.75359 5.96 9.41759 5.96C9.08159 5.96 8.75259 6.065 8.52859 6.282C8.30459 6.492 8.18559 6.744 8.18559 7.178V9.838C8.18559 10.272 8.30459 10.524 8.52859 10.734C8.75259 10.951 9.08159 11.056 9.41759 11.056C9.75359 11.056 10.0826 10.951 10.3066 10.734C10.5306 10.524 10.6496 10.272 10.6496 9.838ZM9.71159 9.873C9.71159 10.104 9.58559 10.216 9.41759 10.216C9.24959 10.216 9.12359 10.104 9.12359 9.873V7.143C9.12359 6.912 9.24959 6.8 9.41759 6.8C9.58559 6.8 9.71159 6.912 9.71159 7.143V9.873ZM13.6304 7.129C13.6304 6.443 13.0774 5.89 12.3914 5.89C11.7054 5.89 11.1524 6.443 11.1524 7.129C11.1524 7.815 11.7054 8.368 12.3914 8.368C13.0774 8.368 13.6304 7.815 13.6304 7.129ZM12.8044 7.129C12.8044 7.36 12.6224 7.542 12.3914 7.542C12.1604 7.542 11.9784 7.36 11.9784 7.129C11.9784 6.898 12.1604 6.716 12.3914 6.716C12.6224 6.716 12.8044 6.898 12.8044 7.129Z' fill='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.3334 2.1665H2.66669C2.1144 2.1665 1.66669 2.61422 1.66669 3.1665V11.8332C1.66669 12.3855 2.1144 12.8332 2.66669 12.8332H11.3334C11.8857 12.8332 12.3334 12.3855 12.3334 11.8332V3.1665C12.3334 2.61422 11.8857 2.1665 11.3334 2.1665Z' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3cpath d='M14.6666 4.83398V14.5C14.6666 14.8682 14.3681 15.1667 13.9999 15.1667H4.33447' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M4.33331 7.32861L6.33321 9.17031L9.66665 5.73975' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M14 7.16667V13.5C14 14.0523 13.5523 14.5 13 14.5H3C2.44772 14.5 2 14.0523 2 13.5V3.5C2 2.94772 2.44772 2.5 3 2.5H10' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M5.33331 7.16683L8.66665 9.8335L13.6666 2.8335' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(77),a=[i.scale,i.saveResult,i.restore,i.revoke,i.rotate,i.backward,i.forward,i.dargWithRightClick,i.setValid];e.exports=a},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(33),o=n(29),c=n(30),l=n(28);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(a),d=r.connect((function(e){var t;return{toolInstance:null==(t=e.annotation)?void 0:t.toolInstance}}),null,null,{context:l.LabelBeeContext})((function(e){var t=e.toolInstance,n=a.useState(0),r=i(n,2),l=(r[0],r[1]),s=c.useTranslation().t;return a.useEffect((function(){t&&t.singleOn("hiddenChange",(function(){l((function(e){return e+1}))}))}),[t]),t&&t.isHidden?u.default.createElement("span",null,s("HideDrawnAnnotation"),u.default.createElement(o.Divider,{type:"vertical",style:{background:"rgba(153, 153, 153, 1)",height:"16px"}})):null}));e.exports=d},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(33),o=n(29),c=n(30),l=n(28);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(a),d=r.connect((function(e){var t;return{toolInstance:null==(t=e.annotation)?void 0:t.toolInstance}}),null,null,{context:l.LabelBeeContext})((function(e){var t,n=e.toolInstance,r=a.useState(0),l=i(r,2),s=(l[0],l[1]),d=c.useTranslation().t;if(a.useEffect((function(){n&&n.singleOn("updatePageNumber",(function(){s((function(e){return e+1}))}))}),[n]),!n)return null;var h=null==(t=null==n?void 0:n.currentPageResult)?void 0:t.length;return h>=0?u.default.createElement("span",null,"".concat(d("ItemsOfThisPage"),": ").concat(h),u.default.createElement(o.Divider,{type:"vertical",style:{background:"rgba(153, 153, 153, 1)",height:"16px"}})):null}));e.exports=d},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_adapt' transform='translate(-1021.825 -996)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_200' data-name='%e7%9f%a9%e5%bd%a2 200' class='cls-1' width='16' height='16' transform='translate(1021.825 996)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_191' data-name='%e7%9f%a9%e5%bd%a2 191' class='cls-2' width='8' height='7' transform='translate(1025.825 1000.167)'/%3e %3cpath id='%e8%81%94%e5%90%88_5' data-name='%e8%81%94%e5%90%88 5' class='cls-2' d='M3%2c4V1H0V0H4V4Z' transform='translate(1033.825 997)'/%3e %3cpath id='%e8%81%94%e5%90%88_7' data-name='%e8%81%94%e5%90%88 7' class='cls-2' d='M0%2c4V3H3V0H4V4Z' transform='translate(1025.825 1001.001) rotate(180)'/%3e %3cpath id='%e8%81%94%e5%90%88_8' data-name='%e8%81%94%e5%90%88 8' class='cls-2' d='M3%2c4V1H0V0H4V4Z' transform='translate(1025.825 1010.335) rotate(180)'/%3e %3cpath id='%e8%81%94%e5%90%88_6' data-name='%e8%81%94%e5%90%88 6' class='cls-2' d='M0%2c4V0H4V1H1V4Z' transform='translate(1037.824 1010.335) rotate(180)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12 4.16699H4V11.167H12V4.16699Z' fill='%23707070'/%3e%3cpath d='M15 5V2H12V1H16V5H15Z' fill='%23707070'/%3e%3cpath d='M4 1.00098V2.00098L1 2.00098L1 5.00098L0 5.00098L0 1.00098L4 1.00098Z' fill='%23707070'/%3e%3cpath d='M1 10.335L1 13.335H4V14.335H0L0 10.335H1Z' fill='%23707070'/%3e%3cpath d='M16 10.335V14.335H12V13.335H15V10.335H16Z' fill='%23707070'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(33),o=n(493),c=n(28);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=l(a),u=r.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:c.LabelBeeContext})((function(e){var t,n=e.toolInstance,r=e.zoom,c=o(0),l=i(c,2)[1];a.useEffect((function(){var e=function(){l((function(e){return e+1}))};return n&&n.on("renderZoom",e),function(){n&&n.unbind("renderZoom",e)}}),[n]);var u=null!=(t=null!=r?r:null==n?void 0:n.zoom)?t:1;return s.default.createElement("span",{className:"zoomValue"},(100*u).toFixed(1),"%")}));e.exports=u},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(494);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=o(a);e.exports=function(e){var t=r(),n=c.default.useState(e),a=i(n,2),o=a[0],l=a[1];return[o,c.default.useCallback((function(e){t.current||l(e)}),[])]}},function(e,t,n){"use strict";var i=n(0);e.exports=function(){var e=i.useRef(!1);return i.useEffect((function(){return e.current=!1,function(){e.current=!0}}),[]),e}},function(e,t,n){"use strict";var i=n(31).default,a=n(52),r=n(90),o=n(57),c=n(63),l=n(23),s=n(29),u=n(5),d=n(47),h=n(0),f=n(30),g=n(33),v=n(28),b=n(58),p=n(496),m=n(497),y=n(506);function x(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var C=x(u),w=x(h),I=function(e){var t=e.disabled,n=e.imgList,i=f.useTranslation().t;return w.default.createElement(s.Button,{type:"primary",style:{marginLeft:10},onClick:function(){var e=b.store,t=e.dispatch,i=e.getState;n[0]?t(o.ToNextStep(0)):o.loadImgList(t,i,0).then((function(e){e&&t(o.ToNextStep(0))}))},disabled:t},i("NextStep"))},k=function(e){var t,n=e.step,i=e.stepProgress,a=e.stepList,r=e.imgList,o=f.useTranslation().t,c=null==(t=d.last(a))?void 0:t.step;if(a.length<2||n===c)return null;var l=i<1;return l?w.default.createElement(s.Tooltip,{title:o("StepNotFinishedNotify")},w.default.createElement("span",null,w.default.createElement(I,{disabled:l,imgList:r}))):w.default.createElement(I,{disabled:l,imgList:r})},L=g.connect((function(e){var t;return{imgList:e.annotation.imgList,annotationEngine:e.annotation.annotationEngine,stepProgress:e.annotation.stepProgress,toolName:null==(t=e.annotation.stepList[e.annotation.step-1])?void 0:t.tool,stepList:e.annotation.stepList,stepInfo:e.annotation.stepList[e.annotation.step-1],step:e.annotation.step}}),null,null,{context:v.LabelBeeContext})((function(e){var t,n=e.goBack,s=e.exportData,u=e.header,d=e.headerName,f=e.imgList,g=e.stepProgress,b=e.stepInfo,x=e.stepList,I=e.step,L=e.annotationEngine,P=v.useDispatch(),S=h.useReducer((function(e){return e+1}),0),O=i(S,2)[1],A=h.useRef(null),T=r(A),E=w.default.createElement(p,{exportData:s}),D=function(e){l.i18n.changeLanguage(e),null==L||L.setLang(e),O()},N=l.i18n.language,R=null!=(t=null==T?void 0:T.width)?t:window.innerWidth,M=w.default.createElement(c.LeftOutlined,{className:"".concat(a.prefix,"-header__icon"),onClick:function(){P(o.ToSubmitFileData(a.ESubmitType.Quit)),n&&n(f)}}),_=d?w.default.createElement("span",{className:"".concat(a.prefix,"-header__name")},d):"",j=x.length>1&&w.default.createElement(w.default.Fragment,null,w.default.createElement(y,{stepProgress:g}),w.default.createElement(k,{step:I,stepProgress:g,stepList:x,imgList:f})),B=w.default.createElement(m,{stepInfo:b}),H=w.default.createElement("div",{className:"".concat(a.prefix,"-header__lang")},w.default.createElement("span",{className:"".concat(a.prefix,"-langCN ").concat("cn"===N?"active":""),onClick:function(){return D("cn")}},"\u4e2d\u6587")," / ",w.default.createElement("span",{className:"".concat(a.prefix,"-langEN ").concat("en"===N?"active":""),onClick:function(){return D("en")}},"En"));return u?"function"===typeof u?w.default.createElement("div",{className:C.default("".concat(a.prefix,"-header")),ref:A},w.default.createElement("div",{className:"".concat(a.prefix,"-header__title")},u({backNode:M,headerNameNode:_,stepListNode:j,headerOptionNode:B,langNode:H}))):u:w.default.createElement("div",{className:C.default("".concat(a.prefix,"-header")),ref:A},w.default.createElement("div",{className:"".concat(a.prefix,"-header__title")},M,_,j,E,w.default.createElement("div",{id:"operationNode",className:"".concat(a.prefix,"-header__operationNode"),style:{left:R/2-87}},B),w.default.createElement("div",{className:"".concat(a.prefix,"-header__titlePlacement")}),H))}));e.exports=L},function(e,t,n){"use strict";var i=n(0),a=n(29),r=n(33),o=n(65),c=n(52),l=n(30),s=n(28);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var d=u(i),h=r.connect((function(e){return{toolInstance:e.annotation.toolInstance,imgList:e.annotation.imgList,onSubmit:e.annotation.onSubmit}}),null,null,{context:s.LabelBeeContext})((function(e){var t=e.imgList,n=e.dispatch,i=(e.onSubmit,e.exportData),r=l.useTranslation().t;if(!i)return null;return d.default.createElement(a.Button,{style:{marginLeft:20},onClick:function(){n({type:o.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA,payload:{submitType:c.ESubmitType.Export}}),i&&i(t)}},r("Export"))}));e.exports=h},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(28),o=n(498),c=n(499),l=n(500),s=n(501),u=n(502),d=n(503),h=n(504),f=n(505),g=n(52),v=n(76),b=n(57),p=n(30),m=n(32);function y(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var x,C,w=y(a),I=m.cTool,k=I.EVideoToolName,L=I.EPointCloudName;(C=x||(x={})).Hover="#666fff",C.Normal="#cccccc";e.exports=function(e){var t=a.useState(""),n=i(t,2),m=n[0],y=n[1],C=e.stepInfo,I=r.useDispatch(),P=r.useSelector((function(e){return{annotation:e.annotation,imgAttribute:e.imgAttribute}})).annotation,S=P.toolInstance,O=P.onSave,A=p.useTranslation().t,T=[v.EToolName.Tag,k.VideoTagTool].includes(null==C?void 0:C.tool),E=[k.VideoTagTool].includes(null==C?void 0:C.tool),D=[L.PointCloud].includes(null==C?void 0:C.tool),N=e.isBegin||T,R=a.useCallback((function(){null==S||S.undo()}),[S]),M=a.useCallback((function(){null==S||S.redo()}),[S]),_=[{toolName:"save",title:"Save",show:!!O,commonSvg:h,selectedSvg:f,click:function(){I(b.ChangeSave)},style:{fontSize:"12px",color:N||"save"!==m?x.Normal:x.Hover}},{toolName:"revocation",title:"Undo",show:!0,commonSvg:l,selectedSvg:d,click:function(){T||R()},style:{opacity:!0===N?.4:1,fontSize:"12px",color:N||"revocation"!==m?x.Normal:x.Hover}},{toolName:"restore",title:"Redo",show:!0,commonSvg:c,selectedSvg:u,click:function(){T||M()},style:{opacity:!0===N?.4:1,fontSize:"12px",color:N||"restore"!==m?x.Normal:x.Hover}},{toolName:"rotate",title:"Rotate",show:!0,selectedSvg:s,commonSvg:o,click:function(){E||0!==C.dataSourceStep&&void 0!==C.dataSourceStep||null==S||S.updateRotate()},style:{opacity:!0===E?.4:1,fontSize:"12px",color:N||"rotate"!==m?x.Normal:x.Hover}}];return D&&(_=_.slice(0,1)),w.default.createElement("div",{className:"".concat(g.prefix,"-header__hotKey")},_.map((function(e){return e.show&&w.default.createElement("div",{key:e.toolName,className:"item",onMouseEnter:function(){return y(e.toolName)},onMouseLeave:function(){return y("")}},w.default.createElement("a",{className:"item",onClick:e.click},w.default.createElement("img",{className:"singleTool",src:m===e.toolName?e.selectedSvg:e.commonSvg,style:e.style}),w.default.createElement("div",{style:e.style},A(e.title))))})))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_r' xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22'/%3e %3cg id='reload' transform='translate(1 1)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-2' data-name='%e7%9f%a9%e5%bd%a2' class='cls-1' width='20' height='20'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M14.762%2c2.234l-1.032.84A7.56%2c7.56%2c0%2c0%2c0%2c7.68%2c0%2c7.84%2c7.84%2c0%2c0%2c0%2c0%2c7.99%2c7.845%2c7.845%2c0%2c0%2c0%2c7.68%2c16%2c7.709%2c7.709%2c0%2c0%2c0%2c14.9%2c10.741a.154.154%2c0%2c0%2c0-.09-.2l-1.037-.371a.145.145%2c0%2c0%2c0-.185.091c-.033.1-.07.19-.108.284a6.539%2c6.539%2c0%2c0%2c1-1.348%2c2.084%2c6.3%2c6.3%2c0%2c0%2c1-2%2c1.406%2c6.08%2c6.08%2c0%2c0%2c1-4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1-2-1.406%2c6.539%2c6.539%2c0%2c0%2c1-1.348-2.084%2c6.833%2c6.833%2c0%2c0%2c1%2c0-5.1A6.539%2c6.539%2c0%2c0%2c1%2c3.237%2c3.364a6.3%2c6.3%2c0%2c0%2c1%2c2-1.406%2c6.08%2c6.08%2c0%2c0%2c1%2c4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1%2c2%2c1.406%2c6.489%2c6.489%2c0%2c0%2c1%2c.508.6l-1.1.9a.155.155%2c0%2c0%2c0%2c.055.269l3.212.819a.148.148%2c0%2c0%2c0%2c.181-.147L15%2c2.352a.147.147%2c0%2c0%2c0-.238-.118Z' transform='translate(2 2)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='22.001' height='22.017' viewBox='0 0 22.001 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_next' transform='translate(-0.999)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(1 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.884%2c4.3C12.188-.639%2c6.625-1.322.4%2c2.294A.794.794%2c0%2c0%2c0%2c.39%2c3.665a.765.765%2c0%2c0%2c0%2c.781%2c0C6.8.387%2c11.616.983%2c15.831%2c5.467L12.41%2c9.255l7.109-.016.018-7.875Z' transform='translate(0.99 15.142) rotate(-42)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_back' xmlns='http://www.w3.org/2000/svg' width='22' height='22.017' viewBox='0 0 22 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(0 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.88%2c4.954C12.184%2c9.894%2c6.621%2c10.576.4%2c6.96A.794.794%2c0%2c0%2c1%2c.386%2c5.59a.765.765%2c0%2c0%2c1%2c.781%2c0C6.8%2c8.868%2c11.612%2c8.272%2c15.827%2c3.788L12.406%2c0l7.109.016.018%2c7.875Z' transform='translate(15.814 22.017) rotate(-138)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_rA' xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22'/%3e %3cg id='reload' transform='translate(1 1)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-2' data-name='%e7%9f%a9%e5%bd%a2' class='cls-1' width='20' height='20'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M14.762%2c2.234l-1.032.84A7.56%2c7.56%2c0%2c0%2c0%2c7.68%2c0%2c7.84%2c7.84%2c0%2c0%2c0%2c0%2c7.99%2c7.845%2c7.845%2c0%2c0%2c0%2c7.68%2c16%2c7.709%2c7.709%2c0%2c0%2c0%2c14.9%2c10.741a.154.154%2c0%2c0%2c0-.09-.2l-1.037-.371a.145.145%2c0%2c0%2c0-.185.091c-.033.1-.07.19-.108.284a6.539%2c6.539%2c0%2c0%2c1-1.348%2c2.084%2c6.3%2c6.3%2c0%2c0%2c1-2%2c1.406%2c6.08%2c6.08%2c0%2c0%2c1-4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1-2-1.406%2c6.539%2c6.539%2c0%2c0%2c1-1.348-2.084%2c6.833%2c6.833%2c0%2c0%2c1%2c0-5.1A6.539%2c6.539%2c0%2c0%2c1%2c3.237%2c3.364a6.3%2c6.3%2c0%2c0%2c1%2c2-1.406%2c6.08%2c6.08%2c0%2c0%2c1%2c4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1%2c2%2c1.406%2c6.489%2c6.489%2c0%2c0%2c1%2c.508.6l-1.1.9a.155.155%2c0%2c0%2c0%2c.055.269l3.212.819a.148.148%2c0%2c0%2c0%2c.181-.147L15%2c2.352a.147.147%2c0%2c0%2c0-.238-.118Z' transform='translate(2 2)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='22.001' height='22.017' viewBox='0 0 22.001 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_nextA' transform='translate(-0.999)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(1 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.884%2c4.3C12.188-.639%2c6.625-1.322.4%2c2.294A.794.794%2c0%2c0%2c0%2c.39%2c3.665a.765.765%2c0%2c0%2c0%2c.781%2c0C6.8.387%2c11.616.983%2c15.831%2c5.467L12.41%2c9.255l7.109-.016.018-7.875Z' transform='translate(0.99 15.142) rotate(-42)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_backA' xmlns='http://www.w3.org/2000/svg' width='22' height='22.017' viewBox='0 0 22 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(0 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.88%2c4.954C12.184%2c9.894%2c6.621%2c10.576.4%2c6.96A.794.794%2c0%2c0%2c1%2c.386%2c5.59a.765.765%2c0%2c0%2c1%2c.781%2c0C6.8%2c8.868%2c11.612%2c8.272%2c15.827%2c3.788L12.406%2c0l7.109.016.018%2c7.875Z' transform='translate(15.814 22.017) rotate(-138)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3c!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg t='1632896115713' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='1995' width='22' height='22' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath d='M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184z m456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840z' p-id='1996' fill='%23666666'%3e%3c/path%3e%3cpath d='M512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144z m0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z' p-id='1997' fill='%23666666'%3e%3c/path%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3c!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg t='1632896115713' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='1995' width='22' height='22' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath d='M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184z m456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840z' p-id='1996' fill='%23666fff'%3e%3c/path%3e%3cpath d='M512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144z m0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z' p-id='1997' fill='%23666fff'%3e%3c/path%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(29),a=n(63),r=n(0),o=n(33),c=n(28),l=n(507),s=n(52),u=n(508),d=n(57),h=n(30);function f(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var g=f(r),v=o.connect((function(e){return{stepList:e.annotation.stepList,step:e.annotation.step}}),null,null,{context:c.LabelBeeContext})((function(e){e.stepProgress;var t=e.step,n=e.stepList,r=c.useDispatch(),o=h.useTranslation().t;return g.default.createElement("span",{className:"".concat(s.prefix)},g.default.createElement(i.Dropdown,{overlay:g.default.createElement(u,{stepList:n,updateStep:function(e){r(d.UpdateProcessingStep(e))},currentStep:t})},g.default.createElement(l,{text:o("Steps"),Icon:a.OrderedListOutlined,iconChildren:g.default.createElement(a.CaretDownOutlined,{style:{fontSize:8}})})))}));e.exports=v},function(e,t,n){"use strict";var i=n(42).default,a=n(52);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var o=r(n(0)),c=Object.defineProperty,l=Object.defineProperties,s=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,f=function(e,t,n){return t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n};e.exports=function(e){var t,n,r=e,c=r.Icon,g=r.text,v=r.iconChildren,b=function(e,t){var n={};for(var a in e)d.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&u){var r,o=i(u(e));try{for(o.s();!(r=o.n()).done;)a=r.value,t.indexOf(a)<0&&h.call(e,a)&&(n[a]=e[a])}catch(c){o.e(c)}finally{o.f()}}return n}(r,["Icon","text","iconChildren"]),p=void 0===e.marginLeft?30:e.marginLeft;return o.default.createElement("div",(t=function(e,t){for(var n in t||(t={}))d.call(t,n)&&f(e,n,t[n]);if(u){var a,r=i(u(t));try{for(r.s();!(a=r.n()).done;)n=a.value,h.call(t,n)&&f(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},b),n={className:a.componentCls},l(t,s(n))),o.default.createElement("div",{className:"".concat(a.componentCls,"__iconWithText"),style:{marginLeft:p}},o.default.createElement("div",{className:"iconGroup"},o.default.createElement(c,{className:"icon"}),v),o.default.createElement("span",{className:"name"},g)))}},function(e,t,n){"use strict";var i=n(52),a=n(46),r=n(0),o=n(30);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=c(r);e.exports=function(e){var t=o.useTranslation().t,n=e.stepList,r=e.updateStep,c=e.currentStep;return l.default.createElement("div",{className:"".concat(i.componentCls,"__annotationStepPopover")},n.map((function(e){var n=e.step===c;return l.default.createElement("div",{key:"stepList".concat(e.step),className:a.classnames({step:!0}),onClick:function(){c&&!n&&r(e.step)}},l.default.createElement("div",{className:a.classnames({name:!0,highlight:n})},"".concat(e.step," - ").concat(e.name||t(e.tool))))})))}},function(e,t,n){"use strict";var i=n(0),a=n(33),r=n(28),o=n(65),c=n(57),l=n(239);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(i),d=a.connect((function(e){return{annotation:e.annotation}}),null,null,{context:r.LabelBeeContext})((function(e){var t=e.annotation,n=t.imgList,i=t.imgIndex,a=t.stepList,s=t.step,d=r.useDispatch();return u.default.createElement(l.TagToolInstanceAdaptor,{imgIndex:i,imgList:n,pageBackward:function(){return d(c.PageBackward())},pageForward:function(){return d(c.PageForward())},pageJump:function(e){return d(c.PageJump(~~e))},onMounted:function(e){d({type:o.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:e}})},onUnmounted:function(){d({type:o.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:void 0}})},stepList:a,step:s})}));e.exports=d},,,,,,function(e,t,n){"use strict";var i=n(0),a=n(53),r=n(63),o=n(242),c=n(238),l=n(516),s=n(230),u=n(30),d=n(133),h=n(32);function f(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var g=f(i),v=h.cTool.EVideoToolName,b=function(e){var t=Math.floor(e/60),n=~~(e%60).toFixed(),i=(10*e).toString().split("").pop(),a=function(e){return e<10?"0".concat(e):e};return"".concat(a(t),":").concat(a(n),":").concat(i)},p=function(){var e=g.default.useContext(o.VideoPlayerCtx),t=e.currentTime,n=e.duration,i=e.buffered,r=e.setCurrentTime,c=g.default.useRef(null),l="".concat(d.decimalReserved(i/n*100,1),"%"),s="".concat(d.decimalReserved(t/n*100,1),"%");return g.default.createElement("div",{className:a.getClassName("video-progress"),ref:c,onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),function(e){if(c.current){var t=e.clientX,i=c.current.clientWidth,a=d.decimalReserved(t/i*n,1);r(a)}}(e)}},g.default.createElement("div",{className:a.getClassName("video-slider")},g.default.createElement("div",{className:a.getClassName("video-slider","played"),style:{width:s}}),g.default.createElement("div",{className:a.getClassName("video-slider","loaded"),style:{width:l}}),g.default.createElement("div",{className:a.getClassName("video-slider","played"),style:{width:s}})),g.default.createElement("div",{className:a.getClassName("video-slider-bar"),style:{left:s}}))},m=function(){var e=g.default.useContext(o.VideoPlayerCtx),t=e.updateNextPlaybackRate,n=e.playbackRate,i=u.useTranslation().t;return g.default.createElement("span",{className:a.getClassName("video-controller","speed")},g.default.createElement("span",null,i("Speed")),g.default.createElement("span",{className:a.getClassName("video-controller","speedNum")},"".concat(n,"x")),g.default.createElement("span",{className:a.getClassName("video-controller","speedButton")},g.default.createElement(r.CaretUpOutlined,{onClick:function(){t()}}),g.default.createElement(r.CaretDownOutlined,{onClick:function(){t(!1)}})))},y=function(){var e=u.useTranslation().t;return g.default.createElement(s,{title:g.default.createElement("span",{className:a.getClassName("video-controller","hotkey")},g.default.createElement("img",{src:l}),e("Hotkeys")),style:{},toolName:v.VideoTagTool})},x=function(){var e=g.default.useContext(o.VideoPlayerCtx),t=e.imgIndex,n=e.imgList,i=e.pageBackward,r=e.pageJump,l=e.pageForward;return g.default.createElement(c.Pagination,{isVideo:!0,pageBackward:i,imgIndex:t,pageJump:r,totalPage:n.length,pageForward:l,footerCls:a.getClassName("video-controller")})},C=function(){var e=g.default.useContext(o.VideoPlayerCtx),t=e.currentTime,n=10*e.duration-10*t,i=(n>0?n:0)/10;return g.default.createElement("div",{className:a.getClassName("video-controller","time")},"".concat(b(t)," / -").concat(b(i)))};e.exports=function(){var e=g.default.useContext(o.VideoPlayerCtx),t=e.playPause,n=e.isPlay;return g.default.createElement("div",{className:a.getClassName("video-controller","wrapper")},g.default.createElement(p,null),g.default.createElement("div",{className:a.getClassName("video-controller")},g.default.createElement("span",{onClick:function(){t()},className:a.getClassName("video-controller","playButton")},n?g.default.createElement(r.PauseOutlined,null):g.default.createElement(r.CaretRightOutlined,null)),g.default.createElement(C,null),g.default.createElement(m,null),g.default.createElement("div",{className:a.getClassName("video-controller","holder")}),g.default.createElement(x,null),g.default.createElement(y,null)))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='15' height='13' viewBox='0 0 15 13'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0.8%3b %7d .cls-2 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_keyboard_h' class='cls-1'%3e %3cg id='%e5%9b%be%e6%a0%87_%e8%ae%be%e7%bd%ae_%e5%bf%ab%e6%8d%b7%e9%94%ae'%3e %3cpath id='%e5%bd%a2%e7%8a%b6' class='cls-2' d='M2.142%2c13a2.205%2c2.205%2c0%2c0%2c1-1.513-.585A1.949%2c1.949%2c0%2c0%2c1%2c0%2c11V2A2.083%2c2.083%2c0%2c0%2c1%2c2.149%2c0h10.7A2.083%2c2.083%2c0%2c0%2c1%2c15%2c2V11a1.927%2c1.927%2c0%2c0%2c1-.63%2c1.417A2.209%2c2.209%2c0%2c0%2c1%2c12.855%2c13H2.142ZM3.209%2c9a1%2c1%2c0%2c1%2c0%2c0%2c2h8.582a1%2c1%2c0%2c1%2c0%2c0-2ZM11%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261h1.639c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c12.6%2c5ZM6.716%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261H8.355c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c8.319%2c5ZM2.43%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261H4.069c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c4.033%2c5ZM11%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261h1.639c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c12.6%2c2ZM6.716%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261H8.355c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c8.319%2c2ZM2.43%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261H4.069c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c4.033%2c2Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(42).default,a=n(0),r=n(222),o=n(518);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=c(a),s=Object.defineProperty,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,f=function(e,t,n){return t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},g=function(e,t){for(var n in t||(t={}))d.call(t,n)&&f(e,n,t[n]);if(u){var a,r=i(u(t));try{for(r.s();!(a=r.n()).done;){n=a.value;h.call(t,n)&&f(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e};e.exports=function(e){var t=e.invalidProps,n=e.errorProps,i=e.fileType;return t.isValid?n.isError?l.default.createElement(r,g({},g({fileType:i},n))):null:l.default.createElement(o,g({},g({fileType:i},t)))}},function(e,t,n){"use strict";var i=n(0),a=n(30);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var o=r(i);e.exports=function(e){var t=e.fileType,n=void 0===t?"image":t,i=e.isValid,r=a.useTranslation().t;return i?null:o.default.createElement("div",{style:{position:"absolute",inset:0,color:"white",display:"flex",alignItems:"center",fontSize:30,opacity:.7,background:"rgba(255, 87, 34, 1)",justifyContent:"center"}},r("".concat(n,"InvalidAndSkip")))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(133);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var o=r(i),c={position:"absolute",zIndex:20,padding:"0 20px",color:"white",fontSize:15,lineHeight:"32px",background:"rgba(0, 255, 255, 0.32)",top:0,right:0,maxHeight:"calc(100% - 80px)",overflowY:"scroll"};t.VideoTagLayer=function(e){var t=e.result,n=e.inputList,i=a.result2LabelKey(t,n);return o.default.createElement("div",{style:c},o.default.createElement("table",null,o.default.createElement("tbody",null,i.map((function(e){var t=e.keyLabel,n=e.valuesLabelArray;return o.default.createElement("tr",{key:t},o.default.createElement("td",{style:{paddingRight:8}},"".concat(t,":")),o.default.createElement("td",null,"".concat(n.join("\u3001"))))})))))}},function(e,t,n){"use strict";var i=n(53),a=n(0),r=n(521),o=n(522),c=n(524),l=n(527),s=n(528),u=n(529),d=n(33),h=n(28);function f(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var g=f(a),v=d.connect((function(e){return{imgList:e.annotation.imgList}}),null,null,{context:h.LabelBeeContext})((function(e){return 0===e.imgList.length?null:g.default.createElement(g.default.Fragment,null,g.default.createElement(u,null),g.default.createElement("div",{className:i.getClassName("point-cloud-layout"),onContextMenu:function(e){return e.preventDefault()}},g.default.createElement("div",{className:i.getClassName("point-cloud-wrapper")},g.default.createElement("div",{className:i.getClassName("point-cloud-container","left")},g.default.createElement(s,null),g.default.createElement(r,null)),g.default.createElement("div",{className:i.getClassName("point-cloud-container","right")},g.default.createElement(c,null),g.default.createElement("div",{className:i.getClassName("point-cloud-container","right-bottom")},g.default.createElement(l,null),g.default.createElement(o,null))))))}));e.exports=v},function(e,t,n){"use strict";var i=n(31).default,a=n(89).default,r=n(53),o=n(32),c=n(23),l=n(5),s=n(0),u=n(116),d=n(48),h=n(117),f=n(33),g=n(46),v=n(66),b=n(29),p=n(90),m=n(91),y=n(30),x=n(28);function C(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var w=C(l),I=C(s),k=I.default.createContext({isActive:!1,setTarget3DView:function(){},reset3DView:function(){}}),L=function(e){var t=e.perspectiveView,n=s.useContext(k),i=n.isActive,o=n.setTarget3DView;return I.default.createElement("span",{onClick:function(){o(c.EPerspectiveView[t])},className:function(e){var t;return w.default((a(t={},r.getClassName("point-cloud-3d-view",e),!0),a(t,"active",i),t))}(t.toLocaleLowerCase())})},P=function(){var e=s.useContext(k).reset3DView;return I.default.createElement("div",{className:r.getClassName("point-cloud-3d-sidebar")},I.default.createElement(L,{perspectiveView:"Top"}),I.default.createElement(L,{perspectiveView:"Front"}),I.default.createElement(L,{perspectiveView:"Left"}),I.default.createElement(L,{perspectiveView:"Back"}),I.default.createElement(L,{perspectiveView:"Right"}),I.default.createElement(L,{perspectiveView:"LFT"}),I.default.createElement(L,{perspectiveView:"RBT"}),I.default.createElement("span",{onClick:function(){e()},className:r.getClassName("point-cloud-3d-view","reset")}))},S=f.connect(h.aMapStateToProps,null,null,{context:x.LabelBeeContext})((function(e){var t,n=e.currentData,a=s.useContext(d.PointCloudContext),l=s.useState(!0),h=i(l,2),f=h[0],x=h[1],C=s.useRef(null),w=m.usePointCloudViews().initPointCloud3d,L=p(C),S=y.useTranslation().t;s.useEffect((function(){a.mainViewInstance&&(null==w||w())}),[L]);var O=v.useSingleBox().selectedBox,A=function(e){var t,n=null==O?void 0:O.info;n&&(null==(t=a.mainViewInstance)||t.updateCameraByBox(n,e))},T=function(){var e;null==(e=a.mainViewInstance)||e.resetCamera()};s.useEffect((function(){var e;if(C.current&&(null==n?void 0:n.url)){var t=a.mainViewInstance;if(t||(t=new o.PointCloud({container:C.current,backgroundColor:"#4c4c4c"})),n.result){var i=c.PointCloudUtils.getBoxParamsFromResultList(n.result);i.forEach((function(e){null==t||t.generateBox(e)})),a.setPointCloudResult(i),a.setPointCloudValid(null==(e=g.jsonParser(n.result))?void 0:e.valid)}a.setMainViewInstance(t)}}),[n]),s.useEffect((function(){O&&A(c.EPerspectiveView.Top)}),[O]);var E=s.useMemo((function(){return{reset3DView:T,setTarget3DView:A,isActive:!!O}}),[O]),D=I.default.createElement("div",null,I.default.createElement("span",{style:{marginRight:8}},S("ShowArrows")),I.default.createElement(b.Switch,{size:"small",checked:f,onChange:function(e){var t;x(e),null==(t=a.mainViewInstance)||t.setShowDirection(e)}}));return I.default.createElement(u.PointCloudContainer,{className:r.getClassName("point-cloud-3d-container"),title:S("3DView"),toolbar:D,style:{height:n.mappingImgList&&(null==(t=n.mappingImgList)?void 0:t.length)>0?"55%":"100%"}},I.default.createElement("div",{className:r.getClassName("point-cloud-3d-content")},I.default.createElement(k.Provider,{value:E},I.default.createElement(P,null)),I.default.createElement("div",{className:r.getClassName("point-cloud-3d-view"),id:"LABELBEE-POINTCLOUD",ref:C})))}));e.exports=S},function(e,t,n){"use strict";var i=n(31).default,a=n(42).default,r=n(32),o=n(53),c=n(116),l=n(0),s=n(48),u=n(66),d=n(23),h=n(193),f=n(33),g=n(117),v=n(91),b=n(90),p=n(243),m=n(30),y=n(28);function x(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var C=x(l),w=Object.defineProperty,I=Object.defineProperties,k=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,O=function(e,t,n){return t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},A=function(e,t,n,i,a){var r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.width,a=t.height,r={x:e.x+i*n/2,y:e.y+a*n/2},o={x:t.width/2,y:t.height/2};return{offsetX:(o.x-r.x)/n,offsetY:-(o.y-r.y)/n}}(e,n,t),o=r.offsetX,c=r.offsetY;if(a.camera.zoom=t,e){var l=o*Math.cos(i.rotation),s=o*Math.sin(i.rotation),u=a.initCameraPosition,d=u.x,h=u.y,f=u.z;a.camera.position.set(d+s,h-l,f+c)}a.camera.updateProjectionMatrix(),a.render()},T=f.connect(g.aMapStateToProps,null,null,{context:y.LabelBeeContext})((function(e){var t=e.currentData,n=C.default.useContext(s.PointCloudContext),f=l.useRef(null),g=b(f),y=u.useSingleBox(),x=y.updateSelectedBox,w=y.selectedBox,T=m.useTranslation().t;return l.useEffect((function(){if(f.current){var e={width:f.current.clientWidth,height:f.current.clientHeight},t=new r.PointCloudAnnotation({container:f.current,size:e,polygonOperationProps:{showDirectionLine:!1,forbidAddNew:!0}});n.setBackViewInstance(t)}}),[]),l.useEffect((function(){if(g&&n.backViewInstance){var e=n.backViewInstance,o=e.pointCloud2dOperation,c=e.pointCloudInstance;o.singleOn("renderZoom",(function(e,t){n.selectedPointCloudBox&&A(t,e,g,n.selectedPointCloudBox,c)})),o.singleOn("dragMove",(function(e){var t=e.currentPos,i=e.zoom;n.selectedPointCloudBox&&A(t,i,g,n.selectedPointCloudBox,c)})),o.singleOn("updatePolygonByDrag",(function(e){var o=e.newPolygon,l=e.originPolygon;if(n.selectedPointCloudBox&&n.mainViewInstance&&t.url){var s,u=i(o.pointList,3),d=u[0],h=u[1],f=u[2],g=i(l.pointList,3),b=g[0],p=g[1],m=g[2],y=r.MathUtils.getLineCenterPoint([d,f]),C=r.MathUtils.getLineCenterPoint([b,m]),w={x:{x:y.x-C.x,y:y.y-C.y}.x,y:0,z:y.y-C.y},A=r.MathUtils.getLineLength(d,h)-r.MathUtils.getLineLength(b,p),T=r.MathUtils.getLineLength(h,f)-r.MathUtils.getLineLength(p,m),E=c.getNewBoxByBackUpdate(w,T,A,n.selectedPointCloudBox).newBoxParams;if(n.mainViewInstance){var D=n.mainViewInstance.getSensesPointZAxisInPolygon(n.mainViewInstance.getCuboidFromPointCloudBox(E).polygonPointList,[E.center.z-E.depth/2,E.center.z+E.depth/2]).count;s=function(e,t){for(var n in t||(t={}))P.call(t,n)&&O(e,n,t[n]);if(L){var i,r=a(L(t));try{for(r.s();!(i=r.n()).done;)n=i.value,S.call(t,n)&&O(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},E),E=I(s,k({count:D}))}v.synchronizeTopView(E,o,n.topViewInstance,n.mainViewInstance),v.synchronizeSideView(E,o,n.sideViewInstance,t.url),n.mainViewInstance.highlightOriginPointCloud(E),x(E)}}))}}),[n,g]),l.useEffect((function(){var e;null==(e=null==n?void 0:n.backViewInstance)||e.initSize(g)}),[g]),C.default.createElement(c.PointCloudContainer,{className:o.getClassName("point-cloud-container","back-view"),title:T("BackView"),toolbar:C.default.createElement(h.SizeInfoForView,{perspectiveView:d.EPerspectiveView.Back})},C.default.createElement("div",{className:o.getClassName("point-cloud-container","bottom-view-content")},C.default.createElement("div",{className:o.getClassName("point-cloud-container","core-instance"),ref:f}),!w&&C.default.createElement(p,null)))}));e.exports=T},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='68' height='76' viewBox='0 0 68 76' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cg clip-path='url(%23clip0_96880_20054)'%3e%3crect x='6.45483' y='0.848145' width='54.0956' height='56.7089' rx='1.04533' fill='url(%23paint0_linear_96880_20054)' fill-opacity='0.12'/%3e%3cpath d='M67 41.3584V75H0V57.755L65.6869 40.348C66.3501 40.1722 67 40.6723 67 41.3584Z' fill='url(%23paint1_linear_96880_20054)'/%3e%3cpath d='M0.182861 35.8192V75.3775H67.0837V59.9767L1.60277 34.8433C0.91818 34.5806 0.182861 35.086 0.182861 35.8192Z' fill='url(%23paint2_linear_96880_20054)'/%3e%3cpath d='M34.8791 22C31.5247 22 28.8956 22.9519 26.9464 24.8558C25.4935 26.2426 24.5938 28.0144 24.2124 30.171C23.9638 31.5762 25.1568 32.7431 26.5838 32.7431V32.7431C28.0108 32.7431 29.098 31.5652 29.4401 30.1799C29.627 29.423 29.912 28.7815 30.3008 28.2555C31.2074 27.0316 32.6126 26.4423 34.5618 26.4423C36.103 26.4423 37.3269 26.8503 38.1882 27.7115C39.0041 28.5728 39.4574 29.7514 39.4574 31.2473C39.4574 32.3805 39.0494 33.4684 38.2335 34.4657L37.6896 35.1003C34.7431 37.7294 32.9753 39.6332 32.386 40.8571C31.9171 41.7614 31.6462 42.8142 31.5366 43.9972C31.4651 44.7702 31.9823 45.4588 32.7224 45.6932V45.6932C33.2639 45.8647 33.8406 45.8939 34.3967 45.778L34.957 45.6612C35.9679 45.4505 36.6494 44.5444 36.9087 43.5449C37.0201 43.1152 37.1747 42.7029 37.3723 42.3077C37.7802 41.4918 38.3695 40.7212 39.1854 40.0865C41.3613 38.1827 42.6758 36.9588 43.0838 36.5055C44.1717 35.0549 44.761 33.1964 44.761 30.9299C44.761 28.1648 43.8544 25.989 42.0412 24.4025C40.228 22.7706 37.8255 22 34.8791 22ZM34.0632 48.1552C33.0659 48.1552 32.25 48.4725 31.6154 49.1071C30.8901 49.7418 30.5728 50.5577 30.5728 51.5549C30.5728 52.5522 30.8901 53.3681 31.6154 54.0027C32.25 54.6374 33.0659 55 34.0632 55C35.0604 55 35.8764 54.6827 36.6016 54.0481C37.2363 53.4135 37.5989 52.5522 37.5989 51.5549C37.5989 50.5577 37.2363 49.7418 36.6016 49.1071C35.9217 48.4725 35.0604 48.1552 34.0632 48.1552Z' fill='%23F3F3F3' fill-opacity='0.25'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear_96880_20054' x1='33.5026' y1='0.848145' x2='33.5026' y2='57.557' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23EDEDED'/%3e%3cstop offset='1' stop-color='white'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear_96880_20054' x1='33.5' y1='32.9214' x2='33.5' y2='62.8103' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23373737'/%3e%3cstop offset='1' stop-color='%230E0E0E'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear_96880_20054' x1='33.6333' y1='31.097' x2='33.6333' y2='74.1393' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%232C2C2C'/%3e%3cstop offset='1' stop-color='%23424242'/%3e%3c/linearGradient%3e%3cclipPath id='clip0_96880_20054'%3e%3crect width='68' height='76.0002' fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(31).default,a=n(53),r=n(132),o=n(237),c=n(63),l=n(32),s=n(0),u=n(48),d=n(244),h=n(66),f=n(116),g=n(193),v=n(525),b=n(526),p=n(29),m=n(117),y=n(33),x=n(91),C=n(90),w=n(30),I=n(28);function k(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var L=k(s),P=l.cTool.EPolygonPattern,S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.width,a=t.height,r={x:e.x+i*n/2,y:e.y+a*n/2},o={x:t.width/2,y:t.height/2};return{offsetX:(o.x-r.x)/n,offsetY:-(o.y-r.y)/n}},O=function(e){var t=e.currentData,n=b.useZoom(),i=n.zoom,l=n.zoomIn,s=n.zoomOut,u=n.initialPosition,f=h.useSingleBox(),g=f.selectNextBox,v=f.selectPrevBox,p=d.useRotate({currentData:t}).updateRotate;return L.default.createElement(L.default.Fragment,null,L.default.createElement("span",{onClick:function(){p(2)},className:a.getClassName("point-cloud","rotate-reserve")}),L.default.createElement("span",{onClick:function(){p(-2)},className:a.getClassName("point-cloud","rotate")}),L.default.createElement("span",{onClick:function(){p(180)},className:a.getClassName("point-cloud","rotate-180")}),L.default.createElement(r.FooterDivider,null),L.default.createElement(c.UpSquareOutlined,{onClick:function(){v()},className:a.getClassName("point-cloud","prev")}),L.default.createElement(c.DownSquareOutlined,{onClick:function(){g()},className:a.getClassName("point-cloud","next")}),L.default.createElement(r.FooterDivider,null),L.default.createElement(o.ZoomController,{initialPosition:u,zoomIn:l,zoomOut:s,zoom:i}))},A=function(e){var t=e.setZAxisLimit,n=e.zAxisLimit;return L.default.createElement("div",{style:{position:"absolute",top:128,right:8,height:"50%",zIndex:20}},L.default.createElement(p.Slider,{vertical:!0,step:.5,max:10,min:.5,defaultValue:n,onAfterChange:function(e){t(e)}}))},T=y.connect(m.aMapStateToProps,null,null,{context:I.LabelBeeContext})((function(e){var t=e.currentData,n=s.useRef(null),r=L.default.useContext(u.PointCloudContext),o=C(n),c=b.useZoom().setZoom,d=v.usePolygon(),p=d.addPolygon,m=d.deletePolygon,y=h.useSingleBox(),I=y.deletePointCloudBox,k=y.changeBoxValidByID,T=s.useState(10),E=i(T,2),D=E[0],N=E[1],R=w.useTranslation().t,M=x.usePointCloudViews();return s.useLayoutEffect((function(){if(!r.topViewInstance&&n.current&&(null==t?void 0:t.url)&&(null==t?void 0:t.result)){var e={width:n.current.clientWidth,height:n.current.clientHeight},i=new l.PointCloudAnnotation({container:n.current,size:e,pcdPath:t.url});r.setTopViewInstance(i)}}),[t]),s.useEffect((function(){if(o&&r.topViewInstance&&r.sideViewInstance){var e=r.topViewInstance.pointCloud2dOperation;e.singleOn("polygonCreated",(function(n){e.pattern!==P.Normal&&(null==t?void 0:t.url)?M.topViewAddBox(n,o):p(n)})),e.singleOn("deletedObject",(function(e){var t=e.id;I(t),m(t)})),e.singleOn("deleteSelectedIDs",(function(){r.setSelectedIDs([])})),e.singleOn("addSelectedIDs",(function(e){r.addSelectedID(e)})),e.singleOn("setSelectedIDs",(function(e){r.setSelectedIDs(e)})),e.singleOn("updatePolygonByDrag",(function(e){var t,n=e.newPolygon;null==(t=M.topViewUpdateBox)||t.call(M,n,o)}));var n=function(e){k(e)};return e.on("validUpdate",n),function(){e.unbind("validUpdate",n)}}}),[r,o,t,M]),s.useEffect((function(){if((null==o?void 0:o.width)&&r.topViewInstance){r.topViewInstance.initSize(o),r.topViewInstance.updatePolygonList(r.pointCloudBoxList);var e=r.topViewInstance,t=e.pointCloudInstance,n=e.pointCloud2dOperation;n.singleOn("renderZoom",(function(e,n){var i=S(n,o,e),a=i.offsetX,r=i.offsetY;if(t.camera.zoom=e,n){var l=t.initCameraPosition,s=l.x,u=l.y,d=l.z;t.camera.position.set(s+r,u-a,d)}t.camera.updateProjectionMatrix(),t.render(),c(e)})),n.singleOn("dragMove",(function(e){var n=e.currentPos,i=e.zoom,a=S(n,o,i),r=a.offsetX,c=a.offsetY;t.camera.zoom=i;var l=t.initCameraPosition,s=l.x,u=l.y,d=l.z;t.camera.position.set(s+c,u-r,d),t.render()}))}}),[o,r.topViewInstance]),s.useEffect((function(){var e,t;null==(t=null==(e=r.topViewInstance)?void 0:e.pointCloudInstance)||t.applyZAxisPoints(D)}),[D]),s.useEffect((function(){M.topViewSelectedChanged()}),[r.selectedIDs]),L.default.createElement(f.PointCloudContainer,{className:a.getClassName("point-cloud-container","top-view"),title:R("TopView"),toolbar:L.default.createElement(O,{currentData:t})},L.default.createElement("div",{style:{position:"relative",flex:1}},L.default.createElement("div",{style:{width:"100%",height:"100%"},ref:n}),L.default.createElement(g.BoxInfos,null),L.default.createElement(A,{zAxisLimit:D,setZAxisLimit:N}),L.default.createElement(g.PointCloudValidity,null)))}));e.exports=T},function(e,t,n){"use strict";var i=n(73).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(48);t.usePolygon=function(){var e=a.useContext(r.PointCloudContext),t=e.polygonList,n=e.setPolygonList;return{addPolygon:function(e){n(t.concat(e))},deletePolygon:function(e){var a=t.filter((function(t){return t.id!==e}));n(i(a))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(48);t.useZoom=function(){var e=i.useContext(a.PointCloudContext).topViewInstance,t=i.useContext(a.PointCloudContext);return{zoom:t.zoom,setZoom:t.setZoom,initialPosition:function(){null==e||e.pointCloud2dOperation.initImgPos()},zoomOut:function(){null==e||e.pointCloud2dOperation.zoomChanged(!1)},zoomIn:function(){null==e||e.pointCloud2dOperation.zoomChanged(!0)}}}},function(e,t,n){"use strict";var i=n(32),a=n(53),r=n(116),o=n(0),c=n(23),l=n(48),s=n(193),u=n(33),d=n(117),h=n(91),f=n(66),g=n(243),v=n(90),b=n(30),p=n(28);function m(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var y=m(o),x=function(e,t,n,i,a){var r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.width,a=t.height,r={x:e.x+i*n/2,y:e.y+a*n/2},o={x:t.width/2,y:t.height/2};return{offsetX:(o.x-r.x)/n,offsetY:-(o.y-r.y)/n}}(e,n,t),o=r.offsetX,c=r.offsetY;if(a.camera.zoom=t,e){var l=o*Math.cos(i.rotation),s=o*Math.sin(i.rotation),u=a.initCameraPosition,d=u.x,h=u.y,f=u.z;a.camera.position.set(d-l,h-s,f+c)}a.camera.updateProjectionMatrix(),a.render()},C=u.connect(d.aMapStateToProps,null,null,{context:p.LabelBeeContext})((function(e){e.currentData;var t=y.default.useContext(l.PointCloudContext),n=h.usePointCloudViews().sideViewUpdateBox,u=f.useSingleBox().selectedBox,d=o.useRef(null),p=v(d),m=b.useTranslation().t;return o.useEffect((function(){if(d.current){var e={width:d.current.clientWidth,height:d.current.clientHeight},n=new i.PointCloudAnnotation({container:d.current,size:e,polygonOperationProps:{showDirectionLine:!1,forbidAddNew:!0}});t.setSideViewInstance(n)}}),[]),o.useEffect((function(){if(p&&t.sideViewInstance){var e=t.sideViewInstance,i=e.pointCloud2dOperation,a=e.pointCloudInstance;i.singleOn("renderZoom",(function(e,n){t.selectedPointCloudBox&&x(n,e,p,t.selectedPointCloudBox,a)})),i.singleOn("dragMove",(function(e){var n=e.currentPos,i=e.zoom;t.selectedPointCloudBox&&x(n,i,p,t.selectedPointCloudBox,a)})),i.singleOn("updatePolygonByDrag",(function(e){var t=e.newPolygon,i=e.originPolygon;n(t,i)}))}}),[t,p]),o.useEffect((function(){var e;null==(e=null==t?void 0:t.sideViewInstance)||e.initSize(p)}),[p]),y.default.createElement(r.PointCloudContainer,{className:a.getClassName("point-cloud-container","side-view"),title:m("SideView"),toolbar:y.default.createElement(s.SizeInfoForView,{perspectiveView:c.EPerspectiveView.Left})},y.default.createElement("div",{className:a.getClassName("point-cloud-container","bottom-view-content")},y.default.createElement("div",{className:a.getClassName("point-cloud-container","core-instance"),ref:d}),!u&&y.default.createElement(g,null)))}));e.exports=C},function(e,t,n){"use strict";var i=n(73).default,a=n(31).default,r=n(42).default,o=n(53),c=n(0),l=n(116),s=n(203),u=n(48),d=n(33),h=n(63),f=n(90),g=n(66),v=n(30),b=n(28);function p(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var m=p(c),y=Object.defineProperty,x=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,I=function(e,t,n){return t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},k=function(e,t){for(var n in t||(t={}))C.call(t,n)&&I(e,n,t[n]);if(x){var i,a=r(x(t));try{for(a.s();!(i=a.n()).done;){n=i.value;w.call(t,n)&&I(e,n,t[n])}}catch(o){a.e(o)}finally{a.f()}}return e},L=function(e){var t=e.onNext,n=e.onPrev,i=e.imgLength,a=e.imgIndex;return m.default.createElement("div",null,m.default.createElement(h.LeftOutlined,{onClick:n}),m.default.createElement("span",null," ",a+1," / ",i," "),m.default.createElement(h.RightOutlined,{onClick:t}))},P=d.connect((function(e){var t=e.annotation;return{imgInfo:t.imgList[t.imgIndex]}}),null,null,{context:b.LabelBeeContext})((function(e){var t,n,r,d,h,b=e.imgInfo,p=c.useState([]),y=a(p,2),x=y[0],C=y[1],w=c.useContext(u.PointCloudContext),I=w.pointCloudBoxList,P=w.topViewInstance,S=c.useState(0),O=a(S,2),A=O[0],T=O[1],E=c.useRef(null),D=c.useRef(),N=g.useSingleBox().selectedBox,R=f(E),M=v.useTranslation().t,_=null==(t=null==b?void 0:b.mappingImgList)?void 0:t[A];c.useEffect((function(){T(0)}),[b]),c.useEffect((function(){if(P&&_){var e=P.pointCloudInstance,t={fill:"transparent",color:"green"},n=I.reduce((function(n,a){var r=e.pointCloudLidar2image(a,_.calib);return[].concat(i(n),i(r.map((function(e){return{type:e.type,annotation:k({id:a.id,pointList:e.pointList},t)}}))))}),[]);C(n)}}),[I,_]);var j=!b||!(null==b?void 0:b.mappingImgList)||!((null==(n=null==b?void 0:b.mappingImgList)?void 0:n.length)>0),B=c.useCallback((function(){var e,t,n=null==(e=D.current)?void 0:e.toolInstance;if(N&&n){var i=x.find((function(e){return e.annotation.id===N.info.id}));(null==(t=null==i?void 0:i.annotation.pointList)?void 0:t.length)>0&&n.focusPositionByPointList(null==i?void 0:i.annotation.pointList)}}),[N,D.current,x,A]);return c.useEffect((function(){B()}),[B]),m.default.createElement(l.PointCloudContainer,{className:o.getClassName("point-cloud-2d-container"),title:M("2DView"),toolbar:j?void 0:m.default.createElement(L,{imgIndex:A,imgLength:null!=(d=null==(r=b.mappingImgList)?void 0:r.length)?d:0,onNext:function(){var e;b&&(null==b?void 0:b.mappingImgList)&&(A>=(null==(e=null==b?void 0:b.mappingImgList)?void 0:e.length)-1||T((function(e){return e+1})))},onPrev:function(){A<=0||T((function(e){return e-1}))}}),style:{display:j?"none":"flex"}},m.default.createElement("div",{className:o.getClassName("point-cloud-2d-image"),ref:E},m.default.createElement(s,{src:null!=(h=null==_?void 0:_.url)?h:"",annotations:x,size:R,ref:D,globalStyle:{display:j?"none":"block"},afterImgOnLoad:B})))}));e.exports=P},function(e,t,n){"use strict";var i=n(89).default,a=n(42).default,r=n(48),o=n(244),c=n(530),l=n(66),s=n(0),u=n(32),d=n(29),h=n(33),f=n(117),g=n(531),v=n(229),b=n(46),p=n(91),m=n(28),y=Object.defineProperty,x=Object.defineProperties,C=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,L=function(e,t,n){return t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},P=u.cTool.EPolygonPattern,S=h.connect(f.aMapStateToProps,null,null,{context:m.LabelBeeContext})((function(e){var t=e.currentData,n=s.useContext(r.PointCloudContext),u=l.useSingleBox(),h=u.changeSelectedBoxValid,f=u.selectNextBox,m=u.selectPrevBox,y=u.updateSelectedBox,S=v.useStatus().clearAllResult,O=b.jsonParser(t.result),A=c.useBoxes(),T=A.copySelectedBoxes,E=A.pasteSelectedBoxes,D=A.copiedBoxes,N=g.useCustomToolInstance({basicInfo:O}).toolInstanceRef,R=o.useRotate({currentData:t}).updateRotate,M=p.usePointCloudViews().updatePointCloudData,_=function(e){var t=e.key.toLocaleLowerCase();e.ctrlKey?function(e){switch(e){case"c":T();break;case"v":E();break;case"a":n.selectedAllBoxes()}}(t):function(e,t){var a=n.topViewInstance,r=n.mainViewInstance;if(a){var o=a.pointCloud2dOperation;switch(e){case"q":R(2);break;case"e":R(-2);break;case"g":R(180);break;case"u":var c,l=o.pattern===P.Normal?P.Rect:P.Normal;o.setPattern(l);var s=(i(c={},P.Normal,"Normal Pattern"),i(c,P.Rect,"Rect Pattern"),c);d.message.success("Change Pattern to ".concat(s[l]," successfully")),o.clearActiveStatus(),o.clearDrawingStatus();break;case"+":null==r||r.updatePointSize(!0);break;case"-":null==r||r.updatePointSize(!1);break;case"v":n.setPointCloudValid(!n.valid);break;case"tab":if(t.shiftKey){m();break}f();break;case"f":h();break;default:;}}}(t,e)};return s.useEffect((function(){if(n.topViewInstance)return window.addEventListener("keydown",_),function(){window.removeEventListener("keydown",_)}}),[n,D]),s.useEffect((function(){null==M||M()}),[t,n.mainViewInstance]),s.useEffect((function(){N.current.exportData=function(){return[n.pointCloudBoxList,{valid:n.valid}]},N.current.exportCustomData=function(){var e;return{renderPolygon:null!=(e=n.polygonList)?e:[]}},N.current.setDefaultAttribute=function(e){var t=n.selectedPointCloudBox;t&&(t.attribute=e,y(t))},N.current.setSubAttribute=function(e,t){var r,o,c,l=n.selectedPointCloudBox;if(l){var s=null!=(r=null==l?void 0:l.subAttribute)?r:{};l.subAttribute=(o=function(e,t){for(var n in t||(t={}))I.call(t,n)&&L(e,n,t[n]);if(w){var i,r=a(w(t));try{for(r.s();!(i=r.n()).done;)n=i.value,k.call(t,n)&&L(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},s),c=i({},e,t),x(o,C(c))),y(l)}},N.current.clearResult=function(){null==S||S()}}),[n.pointCloudBoxList,n.selectedID,n.valid,n.polygonList]),s.useEffect((function(){N.current.setValid=function(e){N.current.valid=e,setTimeout((function(){n.setPointCloudValid(e)}))}}),[]),null}));e.exports=S},function(e,t,n){"use strict";var i=n(73).default,a=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(47),c=n(29),l=n(91),s=n(48),u=n(30);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(o);t.useBoxes=function(){var e=r.useContext(s.PointCloudContext),t=e.selectedIDs,n=e.pointCloudBoxList,o=e.setPointCloudResult,d=r.useState([]),f=a(d,2),g=f[0],v=f[1],b=l.usePointCloudViews().pointCloudBoxListUpdated,p=u.useTranslation(),m=p.t,y=p.i18n,x=r.useMemo((function(){return n.filter((function(e){return t.includes(e.id)}))}),[t,n]);return{copySelectedBoxes:r.useCallback((function(){x.length>0?v(h.default.cloneDeep(x)):(v([]),c.message.error(m("CopyEmptyInPointCloud")))}),[t,n,y.language]),pasteSelectedBoxes:r.useCallback((function(){if(0!==g.length){var e=[].concat(i(n),i(g));o(e),null==b||b(e),v([])}else c.message.error(m("PasteEmptyInPointCloud"))}),[g,n,y.language]),copiedBoxes:g,selectedBoxes:x}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(28),r=n(65);t.useCustomToolInstance=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.basicInfo,o=a.useDispatch(),c=i.useRef({valid:null==(e=null==n?void 0:n.valid)||e,exportData:function(){return[[],{}]},exportCustomData:function(){return{}},clearResult:function(){},singleOn:function(){},on:function(){},unbind:function(){},setResult:function(){},history:{initRecord:function(){},pushHistory:function(){}},setDefaultAttribute:function(e){},setSubAttribute:function(e,t){},setValid:function(){},updateRotate:function(){}}),l=function(e){o({type:r.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:e}})},s=function(){o({type:r.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:void 0}})};return i.useEffect((function(){return l(c.current),function(){s()}}),[]),{toolInstanceRef:c}}},function(e,t,n){"use strict";var i=n(245),a=n(533),r=n(534);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=o(a);e.exports=function(){return i.createStore(r.rootReducer,i.applyMiddleware(c.default))}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(245),a=n(115),r=n(535),o=n(536),c=i.combineReducers({annotation:a.annotationReducer,imgAttribute:r.imgAttributeReducer,toolStyle:o.toolStyleReducer});t.rootReducer=c},function(e,t,n){"use strict";var i=n(42).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(65),r=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=function(e,t,n){return t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},u=function(e,t){for(var n in t||(t={}))c.call(t,n)&&s(e,n,t[n]);if(o){var a,r=i(o(t));try{for(r.s();!(a=r.n()).done;){n=a.value;l.call(t,n)&&s(e,n,t[n])}}catch(u){r.e(u)}finally{r.f()}}return e},d={contrast:1,saturation:1,brightness:1,zoomRatio:1,isOriginalSize:!1};t.imgAttributeReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u({},d),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.IMAGE_ATTRIBUTE_ACTIONS.UPDATE_IMG_ATTRIBUTE:return u(u({},e),t.payload);case a.IMAGE_ATTRIBUTE_ACTIONS.INIT_IMG_ATTRIBUTE:return u({},d);default:return e}}},function(e,t,n){"use strict";var i=n(42).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(191),r=n(537),o=n(65),c=Object.defineProperty,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=function(e,t,n){return t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},h=function(e,t){for(var n in t||(t={}))s.call(t,n)&&d(e,n,t[n]);if(l){var a,r=i(l(t));try{for(r.s();!(a=r.n()).done;){n=a.value;u.call(t,n)&&d(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e},f={color:1,width:2,borderOpacity:9,fillOpacity:9,toolColor:r.ToolStyleUtils.getToolColors(),attributeColor:r.ToolStyleUtils.getAttributeColors(),lineColor:r.ToolStyleUtils.getDefaultToolLineColors(),attributeLineColor:[a.NULL_COLOR].concat(a.COLORS_ARRAY)};t.toolStyleReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h({},f),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.TOOL_STYLE_ACTIONS.INIT_TOOL_STYLE_CONFIG:return h({},f);case o.TOOL_STYLE_ACTIONS.UPDATE_TOOL_STYLE_CONFIG:var n={},i=t.payload;return((null==i?void 0:i.borderOpacity)||(null==i?void 0:i.fillOpacity))&&Object.assign(n,r.ToolStyleUtils.initByOpacity(i.borderOpacity||e.borderOpacity,i.fillOpacity||e.fillOpacity)),h(h(h({},e),t.payload),n);default:return e}}},function(e,t,n){"use strict";var i=n(74).default,a=n(75).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(191);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=o(n(47)),l=.8,s=function(){function e(){i(this,e)}return a(e,null,[{key:"colorSplit",value:function(e,t){return e.split(" ").join("").replace(/,[0-9]+([.]{1}[0-9]+){0,1}\)/,",".concat(t.toFixed(2),")"))}},{key:"computeOpacity",value:function(e,t){var n,i,a=null==(i=((null==(n=t.split(" ").join("").match(/,[0-9]+([.]{1}[0-9]+){0,1}\)/))?void 0:n[0])||"").match(/[0-9]+([.]{1}[0-9]+){0,1}/))?void 0:i[0];return e*Number(a)}},{key:"getToolColors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,i=e.colorSplit,a=e.computeOpacity,o=c.default.cloneDeep(r.CHANGE_COLOR),s=r.BORDER_OPACITY_LEVEL[t],u=r.FILL_OPACITY_LEVEL[n];return Object.keys(r.CHANGE_COLOR).forEach((function(e){var t=c.default.cloneDeep(r.DEFAULT_COLOR);t.valid.stroke=i(r.CHANGE_COLOR[e].valid,a(s,r.CHANGE_COLOR[e].valid)),t.valid.fill=i(r.CHANGE_COLOR[e].valid,a(u,r.CHANGE_COLOR[e].valid)*l),t.validSelected.stroke=i(r.CHANGE_COLOR[e].select.stroke,a(s,r.CHANGE_COLOR[e].select.stroke)),t.validSelected.fill=i(r.CHANGE_COLOR[e].select.fill,a(u,r.CHANGE_COLOR[e].select.fill)*l),t.validHover.stroke=i(r.CHANGE_COLOR[e].hover,a(s,r.CHANGE_COLOR[e].hover)),t.validHover.fill=i(r.CHANGE_COLOR[e].hover,a(u,r.CHANGE_COLOR[e].hover)*l),t.invalid.stroke=i(t.invalid.stroke,a(s,t.invalid.stroke)),t.invalid.fill=i(t.invalid.stroke,a(u,t.invalid.stroke)*l),t.invalidSelected.stroke=i(t.invalidSelected.stroke,a(s,t.invalidSelected.stroke)),t.invalidSelected.fill=i(t.invalidSelected.fill,a(u,t.invalidSelected.fill)*l),t.invalidHover.stroke=i(t.invalidHover.stroke,a(s,t.invalidHover.fill)),t.invalidHover.fill=i(t.invalidHover.fill,a(u,t.invalidHover.fill)*l),o[e]=t})),o}},{key:"getAttributeColors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,i=e.colorSplit,a=e.computeOpacity,o=r.BORDER_OPACITY_LEVEL[t],s=r.FILL_OPACITY_LEVEL[n],u=c.default.cloneDeep(r.COLORS_ARRAY);return u.unshift(r.NULL_COLOR),u=u.map((function(e){var t=JSON.parse(JSON.stringify(r.DEFAULT_COLOR));return t.valid.stroke=i(e,a(o,e)),t.valid.fill=i(e,a(s,e)*l*.5),t.validSelected.stroke=i(e,a(o,e)),t.validSelected.fill=i(e,a(s,e)*l),t.validHover.stroke=i(e,a(o,e)),t.validHover.fill=i(e,a(s,e)*l),t.invalid.stroke=i(t.invalid.stroke,a(o,e)),t.invalid.fill=i(t.invalid.fill,a(s,e)*l*.5),t.invalidSelected.stroke=i(t.invalidSelected.stroke,a(o,e)),t.invalidSelected.fill=i(t.invalidSelected.fill,a(s,e)*l),t.invalidHover.stroke=i(t.invalidHover.stroke,a(o,e)),t.invalidHover.fill=i(t.invalidHover.fill,a(s,e)*l),t}))}},{key:"getDefaultToolLineColors",value:function(){var e={};return Object.keys(r.CHANGE_COLOR).forEach((function(t){e[t]=r.CHANGE_COLOR[t].line})),e}},{key:"initByOpacity",value:function(e,t){return{toolColor:this.getToolColors(e,t),attributeColor:this.getAttributeColors(e,t)}}}]),e}(),u=s;u.changeOpacity={1:.2,3:.4,5:.6,7:.8,9:1},t.ToolStyleUtils=u},function(e,t,n){"use strict";var i=n(42).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(23),o=n(30),c=n(239);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=l(a),u=Object.defineProperty,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,g=function(e,t,n){return t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n};t.VideoTagTool=function(e){return a.useEffect((function(){r.i18n.changeLanguage(e.lang)}),[e.lang]),s.default.createElement(o.I18nextProvider,{i18n:r.i18n},s.default.createElement(c.TagToolInstanceAdaptor,function(e,t){for(var n in t||(t={}))h.call(t,n)&&g(e,n,t[n]);if(d){var a,r=i(d(t));try{for(r.s();!(a=r.n()).done;)n=a.value,f.call(t,n)&&g(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},e)))}},,,,,,,,,,,function(e,t){},,function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(38),r=n.n(a),o=(n(274),n(21)),c=n(17),l=n(58),s=n.n(l),u=n(54),d=n.n(u),h=(n(539),n(260)),f=n.n(h),g=(n(551),n(552),n.p+"static/media/10.1785e6e3.jpg"),v=n.p+"static/media/19.608ec5b7.jpg",b=n.p+"static/media/20.ad3945c2.jpg",p=n.p+"static/media/66.2fa781f1.jpg",m=(JSON.stringify({step_1:{dataSourceStep:0,result:[{id:"00684b5d",rotation:.02,valid:!0,center:{x:73.57,y:-3.99,z:2.25},width:4.28,height:1.91,depth:1.54,trackID:28,attribute:"1"},{id:"045b54cc",rotation:3.14,valid:!0,center:{x:51.35,y:8.02,z:1.05},width:4.13,height:1.96,depth:1.5,trackID:24,attribute:"1"},{id:"0c42d57f",rotation:.03,valid:!0,center:{x:58.43,y:9.5,z:1.6},width:.49,height:.48,depth:1.61,trackID:43,attribute:"2"},{id:"169d029a",rotation:3.12,valid:!0,center:{x:58.39,y:7.95,z:1.45},width:4.25,height:1.78,depth:1.63,trackID:31,attribute:"1"},{id:"18eedc63",rotation:3.12,valid:!0,center:{x:52.36,y:3.41,z:1.58},width:4.16,height:1.85,depth:1.44,trackID:22,attribute:"1"},{id:"1f58834b",rotation:1.52,valid:!0,center:{x:27.3,y:17.42,z:.15},width:5.66,height:2.15,depth:2.06,trackID:16,attribute:"1"},{id:"34a40609",rotation:.02,valid:!0,center:{x:52.85,y:10.48,z:1.34},width:.96,height:.48,depth:1.76,trackID:41,attribute:"2"},{id:"36b62ec0",rotation:3.14,valid:!0,center:{x:46.16,y:7.85,z:1.07},width:4.39,height:2.07,depth:1.52,trackID:23,attribute:"1"},{id:"385cccc3",rotation:6.24,valid:!0,center:{x:-30.16,y:-3.38,z:.72},width:4.08,height:1.84,depth:1.41,trackID:6,attribute:"1"},{id:"4588976e",rotation:3.16,valid:!0,center:{x:44.71,y:3.49,z:1.36},width:4.12,height:1.88,depth:1.36,trackID:21,attribute:"1"},{id:"46874415",rotation:3.11,valid:!0,center:{x:38.33,y:4.34,z:1.27},width:4.15,height:2.1,depth:1.53,trackID:20,attribute:"1"},{id:"4fd28eec",rotation:6.24,valid:!0,center:{x:-48.22,y:-3.15,z:.69},width:4.2,height:1.81,depth:1.33,trackID:9,attribute:"1"},{id:"64f5fabb",rotation:6.28,valid:!0,center:{x:-42.77,y:-3.35,z:.75},width:4.19,height:1.89,depth:1.38,trackID:8,attribute:"1"},{id:"659adc9e",rotation:.02,valid:!0,center:{x:-54.4,y:-3.08,z:.7},width:4.08,height:1.85,depth:1.3,trackID:10,attribute:"1"},{id:"66c9e0af",rotation:1.57,valid:!0,center:{x:27.48,y:23.71,z:-.22},width:5.31,height:2.16,depth:2.2,trackID:17,attribute:"1"},{id:"7262d63b",rotation:3.18,valid:!0,center:{x:50.98,y:-4.98,z:1.78},width:.68,height:.46,depth:1.67,trackID:40,attribute:"2"},{id:"76c51f8d",rotation:.03,valid:!0,center:{x:-10.35,y:-3.51,z:.77},width:4.28,height:2.01,depth:1.7,trackID:3,attribute:"1"},{id:"7d52441c",rotation:.57,valid:!0,center:{x:12.89,y:14.21,z:.22},width:.55,height:.74,depth:1.68,trackID:15,attribute:"2"},{id:"7f6d3f36",rotation:1.6,valid:!0,center:{x:27.63,y:30.17,z:-1.11},width:4.12,height:1.83,depth:1.52,trackID:18,attribute:"1"},{id:"8aa4aa46",rotation:6.21,valid:!0,center:{x:51.59,y:-4.06,z:1.78},width:.72,height:.9,depth:1.57,trackID:27,attribute:"2"},{id:"938c4493",rotation:1.98,valid:!0,center:{x:2.92,y:-2.01,z:.82},width:.68,height:.7,depth:1.67,trackID:29,attribute:"2"},{id:"998e33e7",rotation:3.12,valid:!0,center:{x:27.15,y:11.48,z:.75},width:.71,height:.8,depth:1.6,trackID:30,attribute:"2"},{id:"9c34552c",rotation:3.18,valid:!0,center:{x:75.39,y:7.33,z:2.22},width:4.32,height:2,depth:1.45,trackID:25,attribute:"1"},{id:"a9138b37",rotation:.02,valid:!0,center:{x:48.32,y:-4.3,z:1.97},width:.45,height:.76,depth:1.78,trackID:26,attribute:"2"},{id:"b91823aa",rotation:.06,valid:!0,center:{x:.87,y:-3.12,z:.91},width:4.91,height:2.15,depth:1.87,trackID:1,attribute:"1"},{id:"bd701a17",rotation:1.55,valid:!0,center:{x:23.36,y:29.96,z:-1.34},width:4.27,height:1.98,depth:1.63,trackID:19,attribute:"1"},{id:"c684f76c",rotation:4.69,valid:!0,center:{x:11.94,y:.14,z:.96},width:1.1,height:.59,depth:1.79,trackID:11,attribute:"2"},{id:"c869c0b6",rotation:6.28,valid:!0,center:{x:-4.56,y:-3.6,z:.83},width:4.71,height:2.18,depth:1.69,trackID:2,attribute:"1"},{id:"ca78a91d",rotation:6.27,valid:!0,center:{x:-17.56,y:-3.59,z:.69},width:4.37,height:1.92,depth:1.37,trackID:4,attribute:"1"},{id:"cc201c28",rotation:6.24,valid:!0,center:{x:-35.81,y:-3.2,z:.7},width:4.14,height:1.82,depth:1.38,trackID:7,attribute:"1"},{id:"dad7a81b",rotation:1.62,valid:!0,center:{x:4.41,y:-6.9,z:1.01},width:.62,height:.75,depth:1.75,trackID:13,attribute:"2"},{id:"dc20211c",rotation:.01,valid:!0,center:{x:-23.75,y:-3.57,z:.69},width:4.17,height:2.04,depth:1.39,trackID:5,attribute:"1"},{id:"ee7ee126",rotation:2.49,valid:!0,center:{x:37.24,y:-7.72,z:1.85},width:.45,height:.57,depth:1.69,trackID:39,attribute:"2"},{id:"f2a3902b",rotation:.05,valid:!0,center:{x:3.29,y:-5.63,z:1},width:.5,height:.59,depth:1.93,trackID:12,attribute:"2"},{id:"f54a0dea",rotation:1.58,valid:!0,center:{x:23.37,y:-13.49,z:2.09},width:4.17,height:1.86,depth:1.81,trackID:14,attribute:"1"}],resultPolygon:[],toolName:"pointCloudTool"},valid:!0}),n.p+"static/media/1.bfa1f727.pcd"),y=n.p+"static/media/2.fdb50962.pcd",x=n.p+"static/media/1.379e7e82.png",C=n.p+"static/media/2.8ce0bca2.png",w=n(261),I=n(262),k=[g,v,b,p],L=["http://127.0.0.1:8080/a.mp4","http://127.0.0.1:8080/d.mp4","http://127.0.0.1:8080/c.mp4","http://127.0.0.1:8080/e.mp4"],P=[m,y],S=[{url:x,calib:w},{url:C,calib:I}],O=JSON.stringify({height:200,width:100,rotate:0,step_1:{dataSource:0,tool:"rectTool",result:[]}}),A=JSON.stringify({height:200,width:100,rotate:0,step_1:{dataSource:0,tool:"polygonTool",result:[]}}),T=JSON.stringify({height:200,width:100,rotate:0,step_1:{dataSource:0,tool:"tagTool",result:[]}}),E=JSON.stringify({step_1:{dataSource:0,tool:"videoTagTool",result:[]}}),D=function(e){return"rectTool"===e?O:"tagTool"===e?T:"polygonTool"===e?A:"videoTagTool"===e?E:"pointCloudTool"===e?"{}":""},N=[{type:"rect",annotation:{id:"123123",x:123,y:23,width:100,height:100,stroke:"pink",label:"laoluo",attribute:"asdasd",order:1}},{type:"polygon",annotation:{id:"3",stroke:"green",lineType:1,pointList:[{x:12,y:123},{x:122,y:123},{x:2,y:3}]}},{type:"line",annotation:{stroke:"yellow",thickness:5,id:"4",pointList:[{x:123,y:12},{x:2,y:12},{x:34,y:132}]}},{type:"point",annotation:{id:"5",x:10,y:10,fill:"green",stroke:"blue",thickness:"20",radius:10}},{type:"rect",annotation:{id:"10",x:13,y:3,width:1020,height:100}},{type:"text",annotation:{position:"rt",id:"11",x:223,y:23,textMaxWidth:416,color:"yellow",text:"\u6807\u7b7e1: \u6d4b\u8bd51LoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooog\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\n\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52"}},{type:"text",annotation:{id:"12",x:12,y:123,textMaxWidth:500,lineHeight:25,text:"Key: Loooooooooooooooooooooooooooooooooog value\nSecond One: short value"}},{type:"rect",annotation:{id:"g5r2l7mcrv8",x:60,y:260,width:100,height:100,stroke:"pink",name:"Bag",hiddenRectSize:!0,renderEnhance:function(e){var t=e.ctx,n=e.data.annotation,i=e.zoom,a=e.currentPos;t.fillStyle=n.stroke,t.fillRect(n.x*i+a.x-2,n.y*i+a.y-20*i,40*i,20*i),t.strokeStyle="white",t.strokeText(n.name,n.x*i+a.x+6*i,n.y*i+a.y-7*i)}}}],R=n(560),M=n(62),_=function(e){var t=Object(i.useRef)(),n=e.fileList,a=e.goBack,r=e.stepList,o=e.step;Object(i.useEffect)((function(){setTimeout((function(){var e;if(null!==(e=t.current)&&void 0!==e&&e.annotationEngine){var n,i=t.current.annotationEngine,a=i.firstToolInstance;null===a||void 0===a||null===(n=a.setRunPrediction)||void 0===n||n.call(a,(function(e){return new Promise((function(e){setTimeout((function(){e(""),R.b.success("Predict successfully"),i.switchLastTwoCanvas()}),1e3)}))}))}}))}),[]);return Object(M.jsx)("div",{children:Object(M.jsx)(s.a,{ref:t,headerName:"\u6d4b\u8bd5\u5404\u7c7b\u5de5\u5177",onSubmit:function(e){console.log("submitData",e)},imgList:n,pageSize:10,goBack:a,stepList:r,step:o,onSave:function(e,t,n){console.log("save",e,t,n)},dataInjectionAtCreation:function(e){return{testDataInjection:1}}})})},j=n(32),B=j.cTool.EVideoToolName,H=j.cTool.EToolName,V=j.cTool.EPointCloudName,Z={showConfirm:!1,skipWhileNoDependencies:!1,drawOutsideTarget:!1,copyBackwardResult:!0,minWidth:1,minHeight:1,isShowOrder:!0,filterData:["valid","invalid"],attributeConfigurable:!0,attributeList:[{key:"\u73a9\u5076",value:"doll"},{key:"\u55b7\u58f6",value:"wateringCan"},{key:"\u8138\u76c6",value:"washbasin"},{key:"\u4fdd\u6e29\u676f",value:"vacuumCup"},{key:"\u7eb8\u5dfe",value:"tissue"},{key:"\u6c34\u58f6",value:"kettle"}],textConfigurable:!0,textCheckType:0,customFormat:""},F={attributeList:[{key:"\u7c7b\u522b1",value:"\u7c7b\u522b1",color:"rgba(128, 12, 249, 1)"},{key:"\u7c7b\u522bbm",value:"class-bm",color:"rgba(0, 255, 48, 1)"},{key:"\u7c7b\u522beg",value:"class-eg",color:"rgba(255, 136, 247, 1)"},{key:"\u7c7b\u522bvj",value:"class-vj",color:"rgba(255, 226, 50, 1)"},{key:"\u7c7b\u522b0x",value:"class-0x",color:"rgba(153, 66, 23, 1)"},{key:"\u7c7b\u522bGR",value:"class-GR",color:"rgba(2, 130, 250, 1)"},{key:"\u7c7b\u522b2c",value:"class-2c",color:"rgba(220,94,94,1)"},{key:"\u7c7b\u522bBj",value:"class-Bj",color:"rgba(0, 255, 234, 1)"}],showConfirm:!0,showDirection:!1,skipWhileNoDependencies:!1},z={showConfirm:!0,skipWhileNoDependencies:!1,inputList:[{key:"\u7c7b\u522b1",value:"class1",isMulti:!1,subSelected:[{key:"\u9009\u98791",value:"option1",isDefault:!0},{key:"\u9009\u98792",value:"option1-2",isDefault:!1}]},{key:"\u7c7b\u522b2",value:"class-AH",isMulti:!0,subSelected:[{key:"\u9009\u98792-1",value:"option2-1",isDefault:!0},{key:"\u9009\u98792-2",value:"option2-2",isDefault:!0},{key:"\u9009\u98792-3",value:"option2-3",isDefault:!1}]},{key:"\u7c7b\u522b3",value:"class-0P",isMulti:!1,subSelected:[{key:"\u9009\u98793-1",value:"option3-1",isDefault:!1},{key:"\u9009\u98793-2",value:"option3-2",isDefault:!1},{key:"\u9009\u98793-3",value:"option3-3",isDefault:!1}]},{key:"\u7c7b\u522b4",value:"class-4",isMulti:!0,subSelected:[{key:"\u9009\u98792-1",value:"option2-1",isDefault:!1},{key:"\u9009\u98792-2",value:"option2-2",isDefault:!1},{key:"\u9009\u98792-3",value:"option2-3",isDefault:!1}]}]},U={lineType:0,lineColor:0,edgeAdsorption:!0,outOfTarget:!0,copyBackwardResult:!0,isShowOrder:!0,attributeConfigurable:!0,attributeList:[{key:"\u7c7b\u522b1",value:"\u7c7b\u522b1"},{key:"\u7c7b\u522bao",value:"class-ao"},{key:"\u7c7b\u522bM1",value:"class-M1"},{key:"\u7c7b\u522bCm",value:"class-Cm"},{key:"\u7c7b\u522bc3",value:"class-c3"},{key:"\u7c7b\u522ba0",value:"class-a0"},{key:"\u7c7b\u522bu7",value:"class-u7"},{key:"\u7c7b\u522bZb",value:"class-Zb"},{key:"\u7c7b\u522bzi",value:"class-zi"}],textConfigurable:!0,textCheckType:2,customFormat:"",showConfirm:!0,lowerLimitPointNum:2,upperLimitPointNum:"",preReferenceStep:0,skipWhileNoDependencies:!1,filterData:["valid","invalid"]},G={showConfirm:!1,skipWhileNoDependencies:!1,enableTextRecognition:!1,recognitionMode:"general",configList:[{label:"\u6587\u672c",key:"text",required:!1,default:"default1",maxLength:1e3},{label:"\u6587\u672c2",key:"text2",required:!0,default:"default2",maxLength:1e3},{label:"\u6587\u672c3",key:"text3",required:!0,default:"default3",maxLength:1e3}],filterData:["valid","invalid"]},W={lineType:0,lineColor:0,edgeAdsorption:!0,drawOutsideTarget:!1,copyBackwardResult:!1,isShowOrder:!1,attributeConfigurable:!0,attributeList:[{key:"\u73a9\u5076",value:"doll"},{key:"\u55b7\u58f6",value:"wateringCan"},{key:"\u8138\u76c6",value:"washbasin"},{key:"\u4fdd\u6e29\u676f",value:"vacuumCup"},{key:"\u7eb8\u5dfe",value:"tissue"},{key:"\u6c34\u58f6",value:"kettle"}],textConfigurable:!0,textCheckType:0,customFormat:""},K={attributeList:[{key:"\u7c7b\u522b1",value:"class-1"},{key:"\u7c7b\u522bIq",value:"class-Iq"}],radius:90,secondaryAttributeConfigurable:!0,inputList:[{key:"\u7c7b\u522b1",value:"class1",subSelected:[{key:"\u9009\u98791-1",value:"option1"},{key:"\u9009\u98791-2",value:"option2"}]},{key:"\u7c7b\u522bv0",value:"class-v0",subSelected:[{key:"\u9009\u98792-1",value:"option2-1"},{key:"\u9009\u98792-2",value:"option2-2"},{key:"\u9009\u98792-3",value:"option2-3"}]},{key:"\u7c7b\u522bRt",value:"class-Rt",subSelected:[{key:"\u9009\u98793-1",value:"option3-1"}]}],lowerLimitPointsNumInBox:5},Y=function(e){return e===H.Line?U:e===H.Rect?Z:e===H.Tag?z:e===H.Text?G:e===H.Polygon?W:e===B.VideoTagTool?z:e===V.PointCloud?K:e===H.ScribbleTool?F:Z},X=function(e,t,n){var i=null!==e&&void 0!==e?e:H.Rect,a=e;return i.indexOf(" ")>-1&&(a=(i=e.split(" "))[i.length-1]),{step:null!==t&&void 0!==t?t:1,dataSourceStep:n||0,tool:i,config:JSON.stringify(Y(a))}},J=function(){var e=f.a.parse(window.location.search,{ignoreQueryPrefix:!0,comma:!0}).tool,t=!Array.isArray(e),n=t?function(e,t,n){return[X(e)]}(e):e.map((function(e,t){return X(e,t+1,t)})),a=d.a.currentToolIsVideo(1,n),r=d.a.currentToolIsPointCloud(1,n),s=Object(i.useState)(function(){var n=k,i={};return a&&(n=L),r&&(n=P,Object.assign(i,{mappingImgList:S})),n.map((function(n,a){return Object(c.a)(Object(c.a)({},i),{},{id:a+1,url:n,result:t?D(e):""})}))}()),u=Object(o.a)(s,1)[0],h=Object(i.useState)(N),g=Object(o.a)(h,2),v=g[0],b=g[1];if("annotationView"===e)return Object(M.jsx)("div",{children:Object(M.jsx)("div",{style:{height:1e3},children:Object(M.jsx)(l.AnnotationView,{src:"https://cdn.nba.com/manage/2020/10/andre-iguodala-iso-smile-0520-784x588.jpg",annotations:v,style:{stroke:"blue",thickness:3},onChange:function(e,t){"hover"===e&&b((function(e){return e.map((function(e){if("g5r2l7mcrv8"===e.annotation.id){var n=e.annotation;return Object(c.a)(Object(c.a)({},e),{},{annotation:Object(c.a)(Object(c.a)({},n),{},{hiddenRectSize:!t.includes("g5r2l7mcrv8")})})}return e}))}))}})})});if("PointCloudAnnotationView"===e)return Object(M.jsx)(l.PointCloudAnnotationView,{src:"http://10.152.32.16:8080/top_center_lidar/2022-02-20-12-21-03-100.pcd",size:{height:1080,width:1e3}});return u.length>0?Object(M.jsx)(_,{fileList:u,goBack:function(e){console.log("goBack",e)},stepList:n,step:1}):Object(M.jsx)("div",{className:"App"})};r.a.render(Object(M.jsx)(J,{}),document.getElementById("root"))}]),[[555,1,2]]]);
//# sourceMappingURL=main.ba4e426e.chunk.js.map