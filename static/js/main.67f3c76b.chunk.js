(this["webpackJsonplb-demo"]=this["webpackJsonplb-demo"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"ATTRIBUTE_COLORS",(function(){return w})),n.d(t,"COLORS_ARRAY_MULTI",(function(){return k})),n.d(t,"COLOR_MAP_JET",(function(){return A})),n.d(t,"INVALID_COLOR",(function(){return S})),n.d(t,"NULL_COLOR",(function(){return P})),n.d(t,"ToolStyleConverter",(function(){return L})),n.d(t,"toolStyleConverter",(function(){return O})),n.d(t,"PerspectiveShiftUtils",(function(){return T})),n.d(t,"PointCloudUtils",(function(){return V})),n.d(t,"MatrixUtils",(function(){return U})),n.d(t,"resourceManagerInstance",(function(){return W})),n.d(t,"DEFAULT_SPHERE_PARAMS",(function(){return ae})),n.d(t,"EPerspectiveView",(function(){return F})),n.d(t,"EPointCloudPattern",(function(){return K})),n.d(t,"EPointCloudSegmentCoverMode",(function(){return Q})),n.d(t,"EPointCloudSegmentFocusMode",(function(){return $})),n.d(t,"EPointCloudSegmentMode",(function(){return X})),n.d(t,"EPointCloudSegmentStatus",(function(){return te})),n.d(t,"ELineTypes",(function(){return ie})),n.d(t,"ImgConversionUtils",(function(){return Ce})),n.d(t,"colorArr",(function(){return le})),n.d(t,"ToolStyleUtils",(function(){return f})),n.d(t,"i18n",(function(){return i.a}));var i=n(74),o=n(637),a={ConfirmTo:"Confirm To ",TextInput:"Text Input",NoAttribute:"No Attribute",Save:"Save",Undo:"Undo",Redo:"Redo",Rotate:"Rotate",Style:"Style",Adjust:"Adjust",BorderThickness:"Border Thickness",Color:"Color",BorderOpacity:"Border Opacity",FillOpacity:"Fill Opacity",Saturation:"Saturation",Contrast:"Contrast",Exposure:"Exposure",ScreenRatio:"Screen Ratio",OriginalScale:"Original Scale",CopyThePrevious:"Copy Prev",ClearLabel:"Clear",SetAsInvalid:"Set As Invalid",SetAsValid:"Set As Valid",Confirm:"Confirm",Finish:"Finish",Cancel:"Cancel",ItemsOfThisPage:"Items Of This Page",Hotkeys:"Hotkeys",AnnotateRect:"Annotate Rect",AnnotateInvalidRect:"Annotate Invalid Rect",SelectRect:"Select Rect",RightClick:"Right Click",ToggleRectEffectiveness:"Toggle Rect Validity",ToggleEffectiveness:"Toggle Validity",DeleteRect:"Delete Rect",SelectAndDoubleClick:"Select And Double Click",Scale:"Scale",Fullscreen:"Fullscreen",PreviousImage:"Previous",PreviousFile:"Previous",NextImage:"Next",NextFile:"Next",PreviousFolder:"Previous Folder",NextFolder:"Next Folder",Drag:"Drag",ToggleSelected:"Toggle Selected",ToggleSelectedReverse:"Toggle Selected Reverse",HideGraphics:"Hide Graphics",ToggleLineParticularity:"Toggle Line Particularity",ToSide:"To Line",SpecifiedAttributesOnly:"Specified Attributes Only",Number:"Number",Press:"Press",ToOriginalStep:"To Original",HorizontalOrVertical:"Horizontal/Vertical",AnnotateInvalidLine:"Annotate Invalid Line",AnnotateLine:"Annotate Line",SelectLine:"Select Line",ToggleLineEffectiveness:"Toggle Line Validity",DeleteLine:"Delete Line",ContinueToLabel:"Continue To Label",Select:"Select",InsertPoint:"Insert Point",ClickOnLine:"Click On Line",DeletePoint:"Delete Point",DblClickOnPoint:"Double Click On Point",StopAdsorption:"Stop Adsorption",PreviousLine:"Previous Line",NextLine:"Next Line",SelectPoint:"Select Point",AnnotateInvalidPoint:"Annotate Invalid Point",AnnotatePoint:"Annotate Point",AnnotatePolygon:"Annotate Polygon",SelectPolygon:"Select Polygon",AnnotateInvalidPolygon:"Annotate Invalid Polygon",TogglePolygonEffectiveness:"Toggle Polygon Validity",DeletePolygon:"Delete Polygon",Delete:"Delete",TogglePointParticularity:"Toggle Point Particularity",CropOverlapArea:"Crop Overlap Area",SegmentationRecognition:"Segmentation Recognition",SwitchPattern:"Switch Pattern",Tagging:"Tagging",Hide:"Hide ",HideDrawnAnnotation:"Hidden Drawn Annotation",Blue:"Blue",Cyan:"Cyan",Green:"Green",Yellow:"Yellow",Pink:"Pink",Steps:"Steps",Export:"Export",NextStep:"Next Step",StepNotFinishedNotify:"There are unannotated files in the current step , please finish before the next step",curItems:"{{current}}/{{total}} Items",TurnPage:"Turn Page",Switch:"Switch",EmptyTextInput:"Empty Text Input",RegularExpIncorrectly:"Regular expression is incorrectly",NoConfiguration:"Missing Configuration",ClearThisOption:"Clear This Option",RestoreImageAttributes:"Restore Image Attributes",rectTool:"RectTool",tagTool:"TagTool",polygonTool:"PolygonTool",lineTool:"LineTool",pointTool:"PointTool",textTool:"TextTool",Speed:"Speed",PlayPause:"Play / Pause",FastForward:"Fast Forward",Rewind:"Rewind",videoInvalidAndSkip:"Video invalid, please skip",imageInvalidAndSkip:"Image invalid, please skip",videoErrorAndReload:"Failed to load video, please reload",imageErrorAndReload:"Failed to load image, please reload",orMaskAsInvalid:" or mask it as invalid",ClickAnotherPolygon:"Click another polygon",PolygonsToBeCombinedNeedToBeSelected:"Polygons to be combined need to be selected",CurveModeDoesNotSupportCutting:"Curve mode does not support cutting",CombineSuccess:"Combine success",CombiningFailedNotify:"Combining failed. Please check whether two polygons intersect or whether polygon combining forms a leak",CombineOverlapArea:"Combine Overlap Area",NoDependency:"This image does not need to be labeled",TextCheckNumberOnly:"Please enter the number",TextCheckEnglishOnly:"Please enter English",TextCheckCustomFormat:"Please enter data in custom format",FramingOfObjectToBeDivided:"Please frame the object to be divided first",ClickOnTarget:"Please click on target object",SplittingAlgorithmPrediction:"Splitting algorithm prediction in progress...","2DView":"2DView","3DView":"3DView",TopView:"TopView",SideView:"SideView",BackView:"BackView",ShowArrows:"Show Arrows",Length:"Length",Width:"Width",Height:"Height",Rotation_y:"Rotation_y",PointCount:"Point Count",Invalid:"Invalid",Tag:"Tag",Attribute:"Attribute",SubAttribute:"SubAttribute",PleaseSelect:"Please Select",CopyEmptyInPointCloud:"The copy content is empty, please select the corresponding point cloud data",PasteEmptyInPointCloud:"Please copy the pointCloud data before pasting",HasDuplicateID:"Duplicate ID exists, copy failed",HasDuplicateIDHeader:"TrackID duplication exists",HasDuplicateIDMsg:"There is an issue with duplicate trackIDs, override it?",LowerLimitPointsNumInBox:"The number of points in the box must not be less than {{num}}",PointThickness:"Point Thickness",RotateAroundCenterPoint:"Rotate Around Center Point",PointCloudViewTranslate:"PointCloudView Translation",TopViewTranslate:"TopView Translation",ChangePointCloudValid:"Change PointCloud Valid",LassoSelector:"Lasso",SelectorMsg:"Right-click drag to select",AddPoint:"Add Point",CircleSelector:"Point",DetectionMode:"DetectionMode",SegmentationMode:"SegmentationMode",EnterEditMode:"Enter edit mode",SelectedPoints:"Selected Points",CopyBox:"Copy Box",PasteBox:"Paste Box",RotateLeft:"Rotate Left",RotateRight:"Rotate Right",NextBox:"Next Box",PreviousBox:"Previous Box",Rotate180:"Rotate 180\xb0",CopyPrevPage:"Copy Previous Page",ChangeBoxValid:"Change Box's Valid",MultiSelect:"Multi Select",SelectAllBox:"Select All Boxes",GeneralOperation:"General Operation",RectPattern:"Rect Pattern",PolygonPattern:"Polygon Pattern",ChangePatternMsg:"Change Pattern to {{pattern}} successfully",DragOperation:"Drag",SelectedStatus:"Selected",updateValidFromValidToInValid:"Confirm update as invalid page\uff1f",updateValidFromInValidToValid:"Confirm update as valid page\uff1f",AllTrackIDs:"All TrackIDs",CurrentBoxTrackIDs:"Current TrackID",PositiveIntegerCheck:"Please enter a positive integer",NotAllowDecimalPointsInTrackID:"TrackID is not allowed to be decimal",DuplicateTrackIDsExist:"Duplicate trackIDs exits",BatchUpdateText:"Batch Update",BatchUpdateTrackID:"Batch update trackIDs",TrackIDUnifyAs:"TrackID is Unify as",UnifyTrackIDRange:"Unify TrackID Range",Page:"Page",OkText:"OK",CancelText:"Cancel",UnifyParams:"Unify Params",UnifyAttributeRange:"Unify Range",UnifyTrackID:"Unify TrackID",UnifySize:"Unify Size",UnifyTag:"Unify Tag",NoData:"No Data",AnnotatedList:"Annotated List",onDeleteGraphByAttr:"Are you sure to delete the data with attribute {{attribute}}?",CancelFixed:"Cancel Fixed",FixedOnLeft:"Fixed On Left",FixedOnRight:"Fixed On Right",AnnotatedResult:"Annotated Result",ComplementaryTracking:"Complementary tracking",ComplementaryTrackingPrediction:"Complementary tracking prediction",Apply:"Apply",BeforePredictStarting:"Before starting, please mark the first and last box, need the same trackID",ThePredictedPointCloud:"The predicted point cloud now needs to be less than 10 frames",CameraFollowTopView:"Positioned by top view",MarkOnlyOne:"Mark only one frame of data, need to mark the first and last frame of data",HaveNoNeed:"Have no need to predict the data between two frames, please mark the first and last frame first, and need the same serial number",PredictingDataFrom:"Predicting data from page {{startPage}} to page {{endPage}} with box ID {{selectedBoxTrackID}}",PointCloudCoverMode:"When the same point cloud is selected, the later marker overwrites the previous one",PointCloudUncoverMode:"When the same point cloud is selected, the latter marker cannot overwrite the former marker",PointCloudFocusMode:"Focus mode has been turned on",PointCloudUnfocusMode:"Focus mode is turned off",PointCloudHideSegment:"Marked point cloud is hidden",PointCloudShowSegment:"All point clouds have been displayed",PointCloudHideSegmentInvalid:"Unavailable in focus mode",PointCloudHideFocusInvalid_hide:"Focus mode is not available, please show the marked point first",PointCloudHideFocusInvalid_none:"Focus mode is not available, please select the marker to be focused first",Palette:"Palette",EfficientListening:"The task is marked in the efficiency monitoring...",Title:"Title",Answer:"Answer",Finished:"Finished",Unfinished:"Unfinished",OverallScore:"OverallScore",NoScoringScale:"Configurable step details on the left",Best:"Best",Worst:"Worst",RankingQualityOfAnswers:"RankingQualityOfAnswers",ToBeSorted:"ToBeSorted",Yes:"Yes",No:"No",AdditionalContent:"AdditionalContent",Submit:"Submit",DragAndDrop:"Drag and drap",DefaultSize:"Click to use the default size.",NormalSizeRange:"Normal size range",NormalCenterPointRange:"Normal center point range",LoadingTips:"Wait a minute, Data Loading ~",Unlocked:"Unlocked",Locked:"Locked",LeastCharacterError:"Please enter at least {{num}} characters",And:"And",Or:"Or"},r={TextInput:"\u6587\u672c\u8f93\u5165",NoAttribute:"\u65e0\u5c5e\u6027",Save:"\u4fdd\u5b58",Undo:"\u64a4\u9500",Redo:"\u91cd\u505a",Rotate:"\u65cb\u8f6c",Style:"\u6837\u5f0f",Adjust:"\u56fe\u7247\u8c03\u6574",BorderThickness:"\u8fb9\u6846\u7c97\u7ec6",Color:"\u989c\u8272",BorderOpacity:"\u8fb9\u6846\u900f\u660e\u5ea6",FillOpacity:"\u586b\u5145\u900f\u660e\u5ea6",Saturation:"\u9971\u548c\u5ea6",Contrast:"\u5bf9\u6bd4\u5ea6",Exposure:"\u66dd\u5149\u5ea6",ScreenRatio:"\u753b\u9762\u5360\u6bd4",OriginalScale:"\u6309\u539f\u56fe\u6bd4\u4f8b\u663e\u793a",CopyThePrevious:"\u590d\u5236\u4e0a\u5f20",ClearLabel:"\u6e05\u7a7a\u6807\u6ce8",SetAsInvalid:"\u6807\u4e3a\u65e0\u6548",SetAsValid:"\u53d6\u6d88\u65e0\u6548",Confirm:"\u786e\u8ba4",Finish:"\u5b8c\u6210",Cancel:"\u53d6\u6d88",ItemsOfThisPage:"\u672c\u9875\u4ef6\u6570",Hotkeys:"\u5feb\u6377\u952e",AnnotateRect:"\u62c9\u6846",AnnotateInvalidRect:"\u62c9\u65e0\u6548\u6846",SelectRect:"\u9009\u4e2d\u6846",RightClick:"\u53f3\u51fb",ToggleRectEffectiveness:"\u5207\u6362\u6846\u662f\u5426\u6709\u6548",ToggleEffectiveness:"\u662f\u5426\u6807\u4e3a\u65e0\u6548",DeleteRect:"\u5220\u9664\u6846",SelectAndDoubleClick:"\u9009\u4e2d\u53cc\u51fb",Scale:"\u7f29\u653e",Fullscreen:"\u5168\u5c4f",PreviousImage:"\u4e0a\u4e00\u5f20",PreviousFile:"\u4e0a\u4e00\u4e2a",NextImage:"\u4e0b\u4e00\u5f20",NextFile:"\u4e0b\u4e00\u4e2a",PreviousFolder:"\u4e0a\u4e00\u6587\u4ef6\u5939",NextFolder:"\u4e0b\u4e00\u6587\u4ef6\u5939",Drag:"\u62d6\u52a8\u56fe\u7247",ToggleSelected:"\u5207\u6362\u9009\u4e2d",ToggleSelectedReverse:"\u9006\u5e8f\u5207\u6362\u9009\u4e2d",HideGraphics:"\u9690\u85cf\u56fe\u5f62",ToggleLineParticularity:"\u6362\u7279\u6b8a\u8fb9",ToSide:"\u5bf9\u8fb9",SpecifiedAttributesOnly:"\u4ec5\u770b\u6307\u5b9a\u5c5e\u6027",Number:"\u6570\u5b57",Press:"\u957f\u6309",ToOriginalStep:"\u4ec5\u539f\u56fe",HorizontalOrVertical:"\u6807\u6c34\u5e73/\u5782\u76f4\u7ebf",AnnotateInvalidLine:"\u6807\u65e0\u6548\u7ebf",AnnotateLine:"\u6807\u7ebf",SelectLine:"\u9009\u4e2d\u7ebf",ToggleLineEffectiveness:"\u5207\u6362\u7ebf\u662f\u5426\u6709\u6548",DeleteLine:"\u5220\u9664\u7ebf",ContinueToLabel:"\u7eed\u6807",Select:"\u9009\u4e2d",InsertPoint:"\u63d2\u5165\u70b9",ClickOnLine:"\u5bf9\u7ebf\u5355\u51fb",DeletePoint:"\u5220\u9664\u70b9",DblClickOnPoint:"\u5bf9\u70b9\u53cc\u51fb",StopAdsorption:"\u6682\u505c\u5438\u9644",PreviousLine:"\u4e0a\u6761\u7ebf",NextLine:"\u4e0b\u6761\u7ebf",SelectPoint:"\u9009\u4e2d\u70b9",AnnotateInvalidPoint:"\u6807\u65e0\u6548\u70b9",AnnotatePoint:"\u6807\u70b9",AnnotatePolygon:"\u6807\u591a\u8fb9\u5f62",SelectPolygon:"\u9009\u4e2d\u591a\u8fb9\u5f62",AnnotateInvalidPolygon:"\u6807\u65e0\u6548\u591a\u8fb9\u5f62",TogglePolygonEffectiveness:"\u5207\u6362\u591a\u8fb9\u5f62\u662f\u5426\u6709\u6548",DeletePolygon:"\u5220\u9664\u591a\u8fb9\u5f62",Delete:"\u5220\u9664",TogglePointParticularity:"\u6362\u7279\u6b8a\u70b9",CropOverlapArea:"\u88c1\u526a\u91cd\u53e0\u533a\u57df",SegmentationRecognition:"\u5206\u5272\u8f85\u52a9",SwitchPattern:"\u5207\u6362\u7ed8\u5236\u5f62\u5f0f",Tagging:"\u6253\u6807\u7b7e",Hide:"\u6253\u6807\u7b7e",HideDrawnAnnotation:"\u6807\u6ce8\u9690\u85cf\u4e2d",Blue:"\u84dd",Cyan:"\u9752",Green:"\u7eff",Yellow:"\u9ec4",Pink:"\u7c89",Steps:"\u6807\u6ce8\u6b65\u9aa4",Export:"\u5bfc\u51fa",NextStep:"\u4e0b\u4e00\u6b65",StepNotFinishedNotify:"\u5f53\u524d\u6b65\u9aa4\u5b58\u5728\u4e3a\u672a\u6807\u6ce8\u8fc7\u7684\u56fe\u7247\uff0c\u8bf7\u6807\u6ce8\u5b8c\u6210\u518d\u70b9\u51fb\u4e0b\u4e00\u6b65",curItems:"\u7b2c{{current}}/{{total}}\u5206\u9875",TurnPage:"\u7ffb\u9875",Switch:"\u5207\u6362",EmptyTextInput:"\u6e05\u7a7a\u6587\u672c\u8f93\u5165",RegularExpIncorrectly:"\u6b63\u5219\u8868\u8fbe\u5f0f\u586b\u5199\u9519\u8bef",NoConfiguration:"\u6682\u65e0\u4fe1\u606f\u914d\u7f6e",ClearThisOption:"\u6e05\u7a7a\u6b64\u9009\u9879",RestoreImageAttributes:"\u8fd8\u539f\u56fe\u7247\u5c5e\u6027",ConfirmTo:"\u786e\u8ba4",rectTool:"\u6807\u7b7e",tagTool:"\u6807\u70b9",polygonTool:"\u591a\u8fb9\u5f62",lineTool:"\u7ebf\u6761",pointTool:"\u6807\u70b9",textTool:"\u6587\u672c",Speed:"\u500d\u901f",PlayPause:"\u64ad\u653e/\u6682\u505c",FastForward:"\u5feb\u8fdb",Rewind:"\u5feb\u9000",videoInvalidAndSkip:"\u65e0\u6548\u89c6\u9891\uff0c\u8bf7\u8df3\u8fc7",imageInvalidAndSkip:"\u65e0\u6548\u56fe\u7247\uff0c\u8bf7\u8df3\u8fc7",videoErrorAndReload:"\u89c6\u9891\u52a0\u8f7d\u5931\u8d25, \u8bf7\u91cd\u65b0\u52a0\u8f7d",imageErrorAndReload:"\u56fe\u7247\u52a0\u8f7d\u5931\u8d25, \u8bf7\u91cd\u65b0\u52a0\u8f7d",orMaskAsInvalid:" \u6216 \u5c06\u5176\u6807\u4e3a\u65e0\u6548",ClickAnotherPolygon:"\u8bf7\u70b9\u51fb\u5e0c\u671b\u5408\u5e76\u7684\u591a\u8fb9\u5f62",PolygonsToBeCombinedNeedToBeSelected:"\u9700\u8981\u9009\u4e2d\u9700\u8981\u5408\u5e76\u7684\u591a\u8fb9\u5f62",CurveModeDoesNotSupportCutting:"\u66f2\u7ebf\u6a21\u5f0f\u6682\u4e0d\u652f\u6301\u88c1\u526a",CombineSuccess:"\u5408\u5e76\u6210\u529f",CombiningFailedNotify:"\u5408\u5e76\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u4e24\u4e2a\u591a\u8fb9\u5f62\u662f\u5426\u6709\u76f8\u4ea4\uff0c\u6216\u591a\u8fb9\u5f62\u5408\u5e76\u662f\u5426\u5f62\u6210\u6f0f\u7a7a",CombineOverlapArea:"\u5408\u5e76\u91cd\u53e0\u533a\u57df",NoDependency:"\u8be5\u56fe\u7247\u65e0\u9700\u6807\u6ce8",TextCheckNumberOnly:"\u8bf7\u6309\u4ec5\u6570\u5b57\u7684\u683c\u5f0f\u8f93\u5165",TextCheckEnglishOnly:"\u8bf7\u6309\u4ec5\u82f1\u6587\u7684\u683c\u5f0f\u8f93\u5165",TextCheckCustomFormat:"\u8bf7\u6309\u8981\u6c42\u7684\u683c\u5f0f\u8f93\u5165",FramingOfObjectToBeDivided:"\u8bf7\u5148\u6846\u51fa\u9700\u5206\u5272\u7684\u7269\u4f53",ClickOnTarget:"\u8bf7\u5355\u51fb\u76ee\u6807\u7269\u4f53",SplittingAlgorithmPrediction:"\u5206\u5272\u7b97\u6cd5\u9884\u6d4b\u4e2d...","2DView":"2D\u89c6\u56fe","3DView":"3D\u89c6\u56fe",TopView:"\u4fef\u89c6\u56fe",SideView:"\u4fa7\u89c6\u56fe",BackView:"\u80cc\u89c6\u56fe",ShowArrows:"\u663e\u793a\u7bad\u5934",Length:"\u957f",Width:"\u5bbd",Height:"\u9ad8",Rotation_y:"\u671d\u5411\u89d2",PointCount:"\u70b9\u6570",Invalid:"\u65e0\u6548",Tag:"\u6807\u7b7e",Attribute:"\u4e3b\u5c5e\u6027",SubAttribute:"\u526f\u5c5e\u6027",PleaseSelect:"\u8bf7\u9009\u62e9",CopyEmptyInPointCloud:"\u590d\u5236\u5185\u5bb9\u4e3a\u7a7a\uff0c\u8bf7\u9009\u62e9\u5bf9\u5e94\u7684\u70b9\u4e91\u6570\u636e",PasteEmptyInPointCloud:"\u8bf7\u5148\u590d\u5236\u9700\u8981\u7684\u70b9\u4e91\u6570\u636e\u518d\u8fdb\u884c\u7c98\u8d34",HasDuplicateID:"\u5b58\u5728\u91cd\u590dID,\u590d\u5236\u5931\u8d25",HasDuplicateIDHeader:"\u5b58\u5728\u6807\u6ce8\u6846 ID \u91cd\u590d",HasDuplicateIDMsg:"\u5b58\u5728\u6807\u6ce8\u6846 ID \u91cd\u590d\u7684\u95ee\u9898\uff0c\u662f\u5426\u8981\u8986\u76d6?",LowerLimitPointsNumInBox:"\u6846\u4f53\u5185\u70b9\u6570\u4e0d\u5141\u8bb8\u4f4e\u4e8e {{num}} \u4e2a",PointThickness:"\u70b9\u7684\u663e\u793a\u7c97\u7ec6",RotateAroundCenterPoint:"\u7ed5\u4e2d\u5fc3\u70b9\u65cb\u8f6c\u753b\u9762",PointCloudViewTranslate:"\u70b9\u4e91\u5e73\u79fb",TopViewTranslate:"\u4fef\u89c6\u56fe\u5e73\u79fb",ChangePointCloudValid:"\u5207\u6362\u70b9\u4e91\u6709\u6548\u6027",LassoSelector:"\u5957\u7d22",SelectorMsg:"\u53f3\u952e\u62d6\u52a8\u8fdb\u884c\u8303\u56f4\u83b7\u53d6",AddPoint:"\u6dfb\u52a0\u70b9",CircleSelector:"\u9009\u70b9",DetectionMode:"\u68c0\u6d4b\u6a21\u5f0f",SegmentationMode:"\u5206\u5272\u6a21\u5f0f",EnterEditMode:"\u8fdb\u5165\u7f16\u8f91",SelectedPoints:"\u9009\u4e2d\u70b9\u6570",CopyBox:"\u590d\u5236\u6846",PasteBox:"\u7c98\u8d34\u6846",RotateLeft:"\u5411\u5de6\u65cb\u8f6c\u5fae\u8c03",RotateRight:"\u5411\u53f3\u65cb\u8f6c\u5fae\u8c03",PreviousBox:"\u4e0a\u4e00\u6846",NextBox:"\u4e0b\u4e00\u6846",Rotate180:"\u65cb\u8f6c180\xb0",CopyPrevPage:"\u590d\u5236\u4e0a\u4e00\u9875",ChangeBoxValid:"\u5207\u6362\u6807\u6ce8\u6846\u6709\u6548\u6027",MultiSelect:"\u591a\u9009",SelectAllBox:"\u5168\u9009",GeneralOperation:"\u901a\u7528",RectPattern:"\u62c9\u6846\u6a21\u5f0f",PolygonPattern:"\u591a\u8fb9\u5f62\u6a21\u5f0f",ChangePatternMsg:"\u6210\u529f\u66f4\u6539\u4e3a{{pattern}}\u6a21\u5f0f",DragOperation:"\u62d6\u52a8",SelectedStatus:"\u9009\u4e2d\u65f6",updateValidFromValidToInValid:"\u662f\u5426\u786e\u8ba4\u6807\u4e3a\u65e0\u6548\u6587\u4ef6\uff1f",updateValidFromInValidToValid:"\u662f\u5426\u786e\u8ba4\u53d6\u6d88\u65e0\u6548\u6587\u4ef6\uff1f",AllTrackIDs:"\u6240\u6709\u5df2\u6807\u6ce8\u7684\u6846ID",CurrentBoxTrackIDs:"\u5f53\u524d\u6807\u6ce8\u6846ID",PositiveIntegerCheck:"\u8bf7\u8f93\u5165\u6b63\u6574\u6570",NotAllowDecimalPointsInTrackID:"\u8f93\u5165trackID\u4e0d\u5141\u8bb8\u5305\u542b\u5c0f\u6570\u70b9",DuplicateTrackIDsExist:"\u5b58\u5728\u91cd\u590d\u7684trackID",BatchUpdateText:"\u6279\u91cf\u4fee\u6539",BatchUpdateTrackID:"\u6279\u91cf\u4fee\u6539ID",TrackIDUnifyAs:"\u7edf\u4e00\u6807\u6ce8\u6846ID\u4e3a",UnifyTrackIDRange:"\u7edf\u4e00ID\u8303\u56f4",Page:"\u9875",OkText:"\u786e\u8ba4",CancelText:"\u53d6\u6d88",UnifyParams:"\u7edf\u4e00\u53c2\u6570",UnifyAttributeRange:"\u7edf\u4e00\u5c5e\u6027\u8303\u56f4",UnifyTrackID:"\u7edf\u4e00\u6807\u6ce8\u6846ID",UnifySize:"\u7edf\u4e00\u5c3a\u5bf8",UnifyTag:"\u7edf\u4e00\u6807\u7b7e",NoData:"\u6682\u65e0\u6570\u636e",AnnotatedList:"\u6807\u6ce8\u5217\u8868",onDeleteGraphByAttr:"\u786e\u5b9a\u8981\u5220\u9664\u5c5e\u6027\u4e3a {{attribute}} \u7684\u6807\u6ce8\u6570\u636e\u5417?",CancelFixed:"\u53d6\u6d88\u56fa\u5b9a",FixedOnLeft:"\u56fa\u5b9a\u5728\u5de6\u4fa7",FixedOnRight:"\u56fa\u5b9a\u5728\u53f3\u4fa7",AnnotatedResult:"\u6807\u6ce8\u7ed3\u679c",ComplementaryTracking:"\u8865\u5168\u8ddf\u8e2a",ComplementaryTrackingPrediction:"\u8865\u5168\u8ddf\u8e2a\u9884\u6d4b",Apply:"\u5e94\u7528",BeforePredictStarting:"\u542f\u52a8\u524d\uff0c\u8bf7\u5148\u6807\u51fa\u9996\u5c3e\u7684\u6846\uff0c\u9700\u540c\u5e8f\u53f7",ThePredictedPointCloud:"\u73b0\u9884\u6d4b\u70b9\u4e91\u9700\u8981\u5c0f\u4e8e 10 \u5e27",CameraFollowTopView:"\u6309\u4fef\u89c6\u56fe\u5b9a\u4f4d",MarkOnlyOne:"\u4ec5\u6807\u6ce8\u4e00\u5e27\u6570\u636e\uff0c\u9700\u6807\u51fa\u9996\u5c3e\u7684\u5e27\u6570\u636e",HaveNoNeed:"\u4e24\u5e27\u4e4b\u95f4\u6682\u65e0\u9700\u9884\u6d4b\u7684\u6570\u636e\uff0c\u8bf7\u5148\u6807\u51fa\u9996\u5c3e\u7684\u6846\uff0c\u9700\u540c\u5e8f\u53f7",PredictingDataFrom:"\u6b63\u5728\u9884\u6d4b\u7b2c {{startPage}} \u9875\u5230\u7b2c {{endPage}} \u9875\u4e4b\u95f4\u6846ID\u4e3a {{selectedBoxTrackID}} \u7684\u6570\u636e",PointCloudCoverMode:"\u9009\u4e2d\u76f8\u540c\u70b9\u4e91\u65f6\uff0c\u540e\u4e00\u6807\u8bb0\u8986\u76d6\u524d\u4e00\u6807\u8bb0",PointCloudUncoverMode:"\u9009\u4e2d\u76f8\u540c\u70b9\u4e91\u65f6\uff0c\u540e\u4e00\u6807\u8bb0\u4e0d\u53ef\u8986\u76d6\u524d\u4e00\u6807\u8bb0",PointCloudFocusMode:"\u5df2\u5f00\u542f\u805a\u7126\u6a21\u5f0f",PointCloudUnfocusMode:"\u5df2\u5173\u95ed\u805a\u7126\u6a21\u5f0f",PointCloudHideSegment:"\u5df2\u9690\u85cf\u6807\u6ce8\u70b9\u4e91",PointCloudShowSegment:"\u5df2\u663e\u793a\u5168\u90e8\u70b9\u4e91",PointCloudHideSegmentInvalid:"\u9690\u85cf\u5df2\u6807\u6ce8\u4e0d\u53ef\u7528\uff0c\u8bf7\u5148\u5173\u95ed\u805a\u7126",PointCloudHideFocusInvalid_hide:"\u805a\u7126\u4e0d\u53ef\u7528\uff0c\u8bf7\u5148\u5173\u95ed\u201c\u9690\u85cf\u5df2\u6807\u6ce8\u201d",PointCloudHideFocusInvalid_none:"\u805a\u7126\u4e0d\u53ef\u7528\uff0c\u8bf7\u5148\u9009\u62e9\u9700\u8981\u805a\u7126\u7684\u6807\u8bb0",Palette:"\u8c03\u8272\u76d8",EfficientListening:"\u8be5\u4efb\u52a1\u6807\u6ce8\u6548\u7387\u76d1\u63a7\u4e2d...",Title:"\u9898\u76ee",Answer:"\u56de\u7b54",Finished:"\u5df2\u5b8c\u6210",Unfinished:"\u672a\u5b8c\u6210",OverallScore:"\u6574\u4f53\u8bc4\u5206",NoScoringScale:"\u53ef\u5728\u5de6\u4fa7\u914d\u7f6e\u6b65\u9aa4\u8be6\u60c5",Best:"\u6700\u597d",Worst:"\u6700\u5dee",RankingQualityOfAnswers:"\u8bf7\u5bf9\u6bcf\u4e2a\u56de\u7b54\u7684\u8d28\u91cf\u8fdb\u884c\u6392\u5e8f",ToBeSorted:"\u5f85\u6392\u5e8f",Yes:"\u662f",No:"\u5426",AdditionalContent:"\uff08\u9009\u586b\uff09\u8bf7\u586b\u5199\u4efb\u4f55\u4f60\u5bf9\u7b54\u6848\u7684\u8bc4\u4ef7\u6216\u5176\u4ed6\u8865\u5145\u5185\u5bb9",Submit:"\u63d0\u4ea4",DragAndDrop:"\u6309\u4f4f\u62d6\u52a8",DefaultSize:"\u70b9\u51fb\u56fe\u6807\u4ee5\u4f7f\u7528\u9ed8\u8ba4\u5c3a\u5bf8",NormalSizeRange:"\u6b63\u5e38\u5c3a\u5bf8\u8303\u56f4",NormalCenterPointRange:"\u6b63\u5e38\u4e2d\u5fc3\u70b9\u8303\u56f4",LoadingTips:"\u6570\u636e\u52a0\u8f7d\u4e2d~\u8bf7\u7a0d\u540e",Unlocked:"\u672a\u5f00\u542f",Locked:"\u5df2\u5f00\u542f",LeastCharacterError:"\u8bf7\u81f3\u5c11\u8f93\u5165{{num}}\u4e2a\u5b57\u7b26",And:"\u4e14",Or:"\u6216"};i.a.language||i.a.use(o.a).init({lng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}}),i.a.addResourceBundle("en","translation",a,!0),i.a.addResourceBundle("cn","translation",r,!0);var l=n(7),c=n(8),s=n(23),u=n(22),d={0:0,1:.2,3:.4,5:.6,7:.8,9:1,10:1},h={0:0,1:0,3:.2,5:.4,7:.6,9:.8,10:1},g=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"rgbaStringToHex",value:function(e){var t=e.substring(5,e.length-1).replace(/ /g,"").split(","),n=parseInt(t[0]),i=parseInt(t[1]),o=parseInt(t[2]),a=parseFloat(t[3]);return"#"+n.toString(16).padStart(2,"0")+i.toString(16).padStart(2,"0")+o.toString(16).padStart(2,"0")+Math.round(255*a).toString(16).padStart(2,"0")}}]),e}(),f=g;f.replaceAFromRGBA=function(e,t){return e.split(" ").join("").replace(/,[0-9]+([.]{1}[0-9]+){0,1}\)/,",".concat(t.toFixed(2),")"))},f.toRGBAArr=function(e){var t=e.match(/\d+/g);if(t){var n=Object(u.a)(t,4),i=n[0],o=n[1],a=n[2],r=n[3];return[i,o,a,r]}},f.getToolStrokeAndFill=function(e,t){var n=t.hover,i=void 0!==n&&n,o=t.selected,a=void 0!==o&&o,r=t.borderOpacity,l=void 0===r?1:r,c=t.fillOpacity,s=void 0===c?1:c,u=t.commonOpacity,d=void 0===u?.8:u;return a||i?{stroke:g.replaceAFromRGBA(e,l),fill:g.replaceAFromRGBA(e,s),rgba:g.toRGBAArr(e)}:{stroke:g.replaceAFromRGBA(e,l*d),fill:g.replaceAFromRGBA(e,s*d),rgba:g.toRGBAArr(e)}},f.getStrokeAndFill=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{stroke:g.replaceAFromRGBA(e,t),fill:g.replaceAFromRGBA(e,n)}},f.getToolColorList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9,i=d[t],o=h[n];return{valid:g.getStrokeAndFill(e,1*i,.4*o),invalid:g.getStrokeAndFill(S,1*i,.8*o),validSelected:g.getStrokeAndFill(e,1*i,.8*o),invalidSelected:g.getStrokeAndFill(S,1*i,.24*o),validHover:g.getStrokeAndFill(e,1*i,.64*o),invalidHover:g.getStrokeAndFill(S,1*i,.4*o)}},f.getAttributeIndex=function(e,t){try{return t.findIndex((function(t){return t.value===e}))}catch(n){return-1}};var v=Object.defineProperty,p=Object.defineProperties,b=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,I=function(e,t,n){return t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x=["rgba(102, 111, 255, 1)","rgba(102, 230, 255, 1)","rgba(191, 255, 102, 1)","rgba(255, 230, 102, 1)","rgba(230, 102, 255, 1)"],w=["rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"],k=[{rgba:"rgba(128, 12, 249, 1)",hex:8391929},{rgba:"rgba(0, 255, 48, 1)",hex:65328},{rgba:"rgba(255, 136, 247, 1)",hex:16746743},{rgba:"rgba(255, 226, 50, 1)",hex:16769586},{rgba:"rgba(153, 66, 23, 1)",hex:10043927},{rgba:"rgba(2, 130, 250, 1)",hex:164602},{rgba:"rgba(255, 35, 35, 1)",hex:16720675},{rgba:"rgba(0, 255, 234, 1)",hex:65514}],S="rgba(255, 153, 102, 1)",P="rgba(204, 204, 204, 1)",L=function(){function e(){Object(l.a)(this,e),this._defaultColors=x,this._attributeColors=w}return Object(c.a)(e,[{key:"defaultColors",get:function(){return this._defaultColors}},{key:"attributeColors",get:function(){return this._attributeColors}},{key:"getColorFromConfig",value:function(e,t,n,i){var o,a,r,l,c;if("[object Object]"!==Object.prototype.toString.call(t))throw"Config must be Object";if("[object Object]"!==Object.prototype.toString.call(e))throw"Result must be Object";var u=n.borderOpacity,d=void 0===u?1:u,h=n.fillOpacity,g=void 0===h?.6:h,v=n.colorIndex,x=void 0===v?0:v;i||(i={});var w,L=null==(o=null==e?void 0:e.valid)||o,A=i,O=A.multiColorIndex,T=void 0===O?-1:O,E={selected:A.selected,hover:A.hover,borderOpacity:d,fillOpacity:g},D=this.defaultColors;if((!0===(null==t?void 0:t.attributeConfigurable)||T>-1)&&(D=this.attributeColors),!1===L)return f.getToolStrokeAndFill(S,E);if(!0===(null==t?void 0:t.attributeConfigurable)){var M,N=f.getAttributeIndex(null==e?void 0:e.attribute,null==t?void 0:t.attributeList),R=null==(r=null==(a=null==t?void 0:t.attributeList)?void 0:a.find((function(t){return t.value===(null==e?void 0:e.attribute)})))?void 0:r.color;R||-1===N||(R=D[N%D.length]),-1===N&&(R=P),M=f.rgbaStringToHex(R).toString().substring(1);var B=parseInt(M,16),j=null!=(c=null==(l=k[N%D.length])?void 0:l.hex)?c:"";return w=function(e,t){for(var n in t||(t={}))y.call(t,n)&&I(e,n,t[n]);if(m){var i,o=Object(s.a)(m(t));try{for(o.s();!(i=o.n()).done;)n=i.value,C.call(t,n)&&I(e,n,t[n])}catch(a){o.e(a)}finally{o.f()}}return e}({},f.getToolStrokeAndFill(R,E)),p(w,b({hex:B||j}))}return T>-1?f.getToolStrokeAndFill(D[T%D.length],E):f.getToolStrokeAndFill(D[x%D.length],E)}},{key:"getColorByConfig",value:function(e){var t,n,i,o=e.attribute,a=e.config,r=e.style;if(!0===(null==a?void 0:a.attributeConfigurable)){var l=null==(n=null==(t=null==a?void 0:a.attributeList)?void 0:t.find((function(e){return e.value===o})))?void 0:n.color;if(l)return f.getToolColorList(l,null==r?void 0:r.borderOpacity,null==r?void 0:r.fillOpacity);if(null==r?void 0:r.attributeColor){var c=f.getAttributeIndex(o,null!=(i=null==a?void 0:a.attributeList)?i:[])%8+1;return r.attributeColor[c]}}if(r){var s=r.color,u=r.toolColor;if(u)return u[s]}return f.getToolColorList(P)}}]),e}();var A=function(){for(var e,t=new Array(256).fill("").map((function(e){return new Array(3).fill("")})),n=0;n<20;n++){for(e=0;e<32;e++)t[e][0]=128+4*e,t[e][1]=0,t[e][2]=0;for(t[32][0]=255,t[32][1]=0,t[32][2]=0,e=0;e<63;e++)t[33+e][0]=255,t[33+e][1]=4+4*e,t[33+e][2]=0;for(t[96][0]=254,t[96][1]=255,t[96][2]=2,e=0;e<62;e++)t[97+e][0]=250-4*e,t[97+e][1]=255,t[97+e][2]=6+4*e;for(t[159][0]=1,t[159][1]=255,t[159][2]=254,e=0;e<64;e++)t[160+e][0]=0,t[160+e][1]=252-4*e,t[160+e][2]=255;for(e=0;e<32;e++)t[224+e][0]=0,t[224+e][1]=0,t[224+e][2]=252-4*e}return t}(),O=new L,T=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"translationMatrix",value:function(e,t,n){return[1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1]}},{key:"frontViewMatrix4",value:function(e){return this.translationMatrix(e,0,0)}},{key:"backViewMatrix4",value:function(e){return this.translationMatrix(-e,0,0)}},{key:"leftViewMatrix4",value:function(e){return this.translationMatrix(0,e,0)}},{key:"rightViewMatrix4",value:function(e){return this.translationMatrix(0,-e,0)}},{key:"topViewMatrix4",value:function(e){return this.translationMatrix(-.01,0,e)}},{key:"leftFrontTopViewMatrix4",value:function(e,t){var n=t.width/2,i=t.height/2,o=t.depth/2;return this.translationMatrix(n*e,i*e,o*e)}},{key:"rightBackTopViewMatrix4",value:function(e,t){var n=-t.width/2,i=-t.height/2,o=t.depth/2;return this.translationMatrix(n*e,i*e,o*e)}}]),e}(),E=n(15),D=Object.defineProperty,M=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,B=function(e,t,n){return t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},j=function(e,t){for(var n in t||(t={}))N.call(t,n)&&B(e,n,t[n]);if(M){var i,o=Object(s.a)(M(t));try{for(o.s();!(i=o.n()).done;){n=i.value;R.call(t,n)&&B(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},_=function(e,t){var n={};for(var i in e)N.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&M){var o,a=Object(s.a)(M(e));try{for(a.s();!(o=a.n()).done;){i=o.value;t.indexOf(i)<0&&R.call(e,i)&&(n[i]=e[i])}}catch(r){a.e(r)}finally{a.f()}}return n},H=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"genColorByCoord",value:function(e,t,n){return n<=0?[128,128,128]:n<5?[255,0,0]:n<10?[0,255,0]:[0,0,255]}},{key:"getStandardColorByCoord",value:function(e,t,n){return this.genColorByCoord(e,t,n).map((function(e){return e/255}))}},{key:"parsePointCloudCurrentResult",value:function(e){var t,n,i,o,a,r,l,c=this.jsonParser(e),s=null!=(t=null==c?void 0:c.step_1)?t:{};return{boxParamsList:null!=(n=null==s?void 0:s.result)?n:[],polygonList:null!=(o=null!=(i=null==s?void 0:s.resultPolygon)?i:null==s?void 0:s.renderPolygon)?o:[],lineList:null!=(a=null==s?void 0:s.resultLine)?a:[],sphereParamsList:null!=(r=null==s?void 0:s.resultPoint)?r:[],segmentation:null!=(l=null==s?void 0:s.segmentation)?l:[]}}},{key:"getBoxParamsFromResultList",value:function(e){var t,n,i=this.jsonParser(e);return null!=(n=null==(t=null==i?void 0:i.step_1)?void 0:t.result)?n:[]}},{key:"getSphereParamsFromResultList",value:function(e){var t,n,i=this.jsonParser(e);return null!=(n=null==(t=null==i?void 0:i.step_1)?void 0:t.resultPoint)?n:[]}},{key:"getSegmentFromResultList",value:function(e){var t,n,i=this.jsonParser(e);return null!=(n=null==(t=null==i?void 0:i.step_1)?void 0:t.segmentation)?n:[]}},{key:"getLineListFromResultList",value:function(e){var t,n,i=this.jsonParser(e);return null!=(n=null==(t=null==i?void 0:i.step_1)?void 0:t.resultLine)?n:[]}},{key:"getPolygonListFromResultList",value:function(e){var t,n,i,o,a=this.jsonParser(e),r="step_1";return null!=(o=null!=(i=null==(t=null==a?void 0:a[r])?void 0:t.resultPolygon)?i:null==(n=null==a?void 0:a[r])?void 0:n.renderPolygon)?o:[]}},{key:"getFrontViewPolygon",value:function(e){var t=e.center,n=t.x,i=t.y,o=t.z,a=e.width,r=e.height,l=e.depth;return[{x:n+a/2,y:i+r/2,z:o-l/2},{x:n+a/2,y:i+r/2,z:o+l/2},{x:n+a/2,y:i-r/2,z:o+l/2},{x:n+a/2,y:i-r/2,z:o-l/2},{x:n+a/2,y:i+r/2,z:o-l/2}]}},{key:"getBackViewPolygon",value:function(e){var t=e.center,n=t.x,i=t.y,o=t.z,a=e.width,r=e.height,l=e.depth;return[{x:n-a/2,y:i-r/2,z:o-l/2},{x:n-a/2,y:i+r/2,z:o-l/2},{x:n-a/2,y:i+r/2,z:o+l/2},{x:n-a/2,y:i-r/2,z:o+l/2},{x:n-a/2,y:i-r/2,z:o-l/2}]}},{key:"getAllDirectionLine",value:function(e){var t=e.center,n=t.x,i=t.y,o=t.z,a=e.width,r=e.height,l=e.depth;return[[{x:n+a/2,y:i-r/2,z:o-l/2},{x:n-a/2,y:i-r/2,z:o-l/2}],[{x:n+a/2,y:i+r/2,z:o-l/2},{x:n-a/2,y:i+r/2,z:o-l/2}],[{x:n+a/2,y:i-r/2,z:o+l/2},{x:n-a/2,y:i-r/2,z:o+l/2}],[{x:n+a/2,y:i+r/2,z:o+l/2},{x:n-a/2,y:i+r/2,z:o+l/2}]]}},{key:"getAllViewData",value:function(e){return[{type:"polygon",pointList:this.getFrontViewPolygon(e)},{type:"polygon",pointList:this.getBackViewPolygon(e)}].concat(Object(E.a)(this.getAllDirectionLine(e).map((function(e){return{type:"line",pointList:e}}))))}},{key:"transferBox2Kitti",value:function(e){var t,n,i;return{height:null!=(t=e.depth)?t:0,length:null!=(n=e.width)?n:0,width:null!=(i=e.height)?i:0,rotation_y:e.rotation?this.transferRotation2KittiRotation_y(e.rotation):0}}},{key:"restrictAngleRange",value:function(e){var t=2*Math.PI,n=e%t;return n<0?t+n:n}},{key:"transferRotation2KittiRotation_y",value:function(e){if(e<0)return-e;var t=2*Math.PI-e;return t>Math.PI&&t<2*Math.PI?-1*e:2*Math.PI-e}},{key:"getAllPointCloudResult",value:function(e){var t=this,n=e.imgList,i=e.step,o=void 0===i?1:i,a=e.extraBoxList,r=e.extraSphereList,l=void 0===r?[]:r,c=e.ignoreIndexList,s=void 0===c?[]:c,u=n.filter((function(e,t){return!(null==s?void 0:s.includes(t))})).map((function(e){return t.jsonParser(e.result)})),d="step_".concat(o),h=[];return u.forEach((function(e){var t,n;(null==(n=null==(t=null==e?void 0:e[d])?void 0:t.result)?void 0:n.length)>0&&(h=h.concat(e[d].result))})),a&&(h=h.concat(a)),l&&(h=h.concat(l)),h}},{key:"getNextTrackID",value:function(e){var t=e.imgList,n=e.step,i=void 0===n?1:n,o=e.extraBoxList,a=e.extraSphereList,r=1;return this.getAllPointCloudResult({imgList:t,step:i,extraBoxList:o,extraSphereList:a}).forEach((function(e){"number"===typeof(null==e?void 0:e.trackID)&&e.trackID>=r&&(r=e.trackID+1)})),r}},{key:"batchUpdateTrackID",value:function(e){var t,n=e.id,i=e.newID,o=e.result,a=e.step,r="step_".concat(void 0===a?1:a),l=this.jsonParser(o),c=null==(t=null==l?void 0:l[r])?void 0:t.result;return c?(c.forEach((function(e){return(null==e?void 0:e.trackID)===n&&(e.trackID=i),e})),JSON.stringify(l)):o}},{key:"batchUpdateTrackIDCheck",value:function(e){var t,n=e.newID,i=e.result,o=e.step,a="step_".concat(void 0===o?1:o),r=this.jsonParser(i),l=null==(t=null==r?void 0:r[a])?void 0:t.result;return!!l&&l.some((function(e){return e.trackID===n}))}},{key:"batchUpdateResultByTrackID",value:function(e){var t,n=e.id,i=e.newData,o=e.result,a=e.step,r="step_".concat(void 0===a?1:a),l=this.jsonParser(o),c=null==(t=null==l?void 0:l[r])?void 0:t.result;return c?(l[r].result=c.map((function(e){if((null==e?void 0:e.trackID)===n){var t=j({},i),o=t.subAttribute;return o&&e.subAttribute&&Object.assign(t,{subAttribute:j(j({},e.subAttribute),o)}),j(j({},e),t)}return e})),JSON.stringify(l)):o}},{key:"getMaxSizeFromBox",value:function(e){var t=this,n=e.trackID,i=e.imgList,o=void 0;return i.forEach((function(e){var i,a="step_".concat(1),r=t.jsonParser(e.result),l=null==(i=null==r?void 0:r[a])?void 0:i.result;l&&l.forEach((function(e){if((null==e?void 0:e.trackID)===n){if(!o)return void(o={width:e.width,height:e.height,depth:e.depth});e.width>o.width&&(o.width=e.width),e.height>o.height&&(o.height=e.height),e.depth>o.depth&&(o.depth=e.depth)}}))})),o}},{key:"getSubAttributeName",value:function(e,t){var n=t.inputList;return Object.entries(e).map((function(e){var t,i=Object(u.a)(e,2),o=i[0],a=i[1],r=n.find((function(e){return e.value===o}));if(r){var l=null==(t=null==r?void 0:r.subSelected)?void 0:t.find((function(e){return e.value===a}));if(l)return{label:r.key,value:l.key}}return{label:o,value:a}}))}},{key:"getIntersectionBySlope",value:function(e){var t,n,i=e.p1,o=e.line1,a=e.p2,r=e.line2;if(i.x===a.x&&i.y===a.y)return i;o[0].x===o[1].x&&(t=i.x),o[0].y===o[1].y&&(n=i.y),r[0].x===r[1].x&&(t=a.x),r[0].y===r[1].y&&(n=a.y);var l=(o[0].y-o[1].y)/(o[0].x-o[1].x),c=(r[0].y-r[1].y)/(r[0].x-r[1].x);return{x:t=null!=t?t:(i.y-a.y-l*i.x+c*a.x)/(c-l),y:n=null!=n?n:i.y-l*(i.x-t)}}},{key:"getCloudKeys",value:function(e,t,n){return[e,t,n].join("@")}},{key:"splitPointsFromIndexes",value:function(e,t){for(var n=new Set,i=0;i<t.length;i+=1)n.add(t[i]);for(var o=[],a=0;a<e.length;a+=1)n.has(e[a])||o.push(e[a]);return o}},{key:"splitPointsFromPoints",value:function(t,n){for(var i=new Map,o=0;o<n.length;o+=3)i.set(e.getCloudKeys(n[o],n[o+1],n[o+2]),1);for(var a=[],r=0;r<t.length;r+=3){var l=e.getCloudKeys(t[r],t[r+1],t[r+2]);i.has(l)||a.push(t[r],t[r+1],t[r+2])}return new Float32Array(a)}},{key:"getDefaultOrthographicParams",value:function(e){return{left:-e.width/2,right:e.width/2,top:e.height/2,bottom:-e.height/2,near:.1,far:1e4}}}]),e}(),V=H;V.jsonParser=function(e){try{return JSON.parse(e)}catch(t){return{}}},V.transferCanvas2World=function(e,t){var n=t.width,i=t.height,o=e,a=o.x,r=o.y,l=_(o,["x","y"]);return j({x:i/2-r,y:-(a-n/2)},l)},V.pointListTransferCanvas2World=function(e,t){return null==e?void 0:e.map((function(e){return j(j({},e),H.transferCanvas2World(e,t))}))},V.transferWorld2Canvas=function(e,t){var n=t.width,i=t.height,o=e,a=o.x,r=o.y,l=_(o,["x","y"]);return j({x:n/2-r,y:i/2-a},l)};var F,Z,z=function(e,t){return[].concat(Object(E.a)(e),Object(E.a)(t))},U=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"transferMatrix34FromKitti2Three",value:function(e){return[].concat(Object(E.a)(e.reduce(z,[])),[0,0,0,1])}},{key:"transferMatrix33FromKitti2Three",value:function(e){return[].concat(Object(E.a)(e.reduce((function(e,t){return[].concat(Object(E.a)(e),Object(E.a)(t)).concat([0])}),[])),[0,0,0,1])}}]),e}(),G=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{size:2},n=t.size,i=void 0===n?2:n;Object(l.a)(this,e),this.cacheMap=new Map,this.size=i}return Object(c.a)(e,[{key:"fetchResource",value:function(e){var t=this;this.cacheMap.has(e)||fetch(e).then((function(){t.cacheMap.set(e,!0)}))}},{key:"preloadResourceList",value:function(e){var t=this;e.forEach((function(e){t.fetchResource(e)}))}},{key:"quickPreload",value:function(e){var t=e.currentIndex,n=e.imgList,i=e.size,o=void 0===i?2:i,a=this.getResourceList({currentIndex:t,imgList:n,size:o});this.preloadResourceList(a)}},{key:"getResourceList",value:function(e){var t=this,n=e.currentIndex,i=e.imgList,o=e.size,a=void 0===o?this.size:o;if(n+1>=i.length)return[];for(var r=[],l=function(e){return e>=0&&e<i.length},c=1;c<=a;c+=1)[n-c,n+c].forEach((function(e){if(l(e)){var n=t.processResourceUrl(i[e]);r=[].concat(Object(E.a)(r),Object(E.a)(n))}}));return r}},{key:"processResourceUrl",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=[];(null==n?void 0:n.url)&&i.push(n.url);var o=null==(t=null==(e=null==n?void 0:n.webPointCloudFile)?void 0:e.lidar)?void 0:t.url;return o&&i.push(o),i}}]),e}(),W=new G;(Z=F||(F={})).Front="FRONT",Z.Back="BACK",Z.Left="LEFT",Z.Right="RIGHT",Z.Top="TOP",Z.LFT="LEFT_FRONT_TOP",Z.RBT="RIGHT_BACK_TOP";var K,Y,X,J,Q,q,$,ee,te,ne,ie,oe,ae={radius:.3,widthSegments:32,heightSegments:16,defaultZ:1};(Y=K||(K={})).Detection="Detection",Y.Segmentation="Segmentation",(J=X||(X={})).Add="ADD",J.Remove="REMOVE",(q=Q||(Q={})).Cover="Cover",q.Uncover="Uncover",(ee=$||($={})).Focus="Focus",ee.Unfocus="Unfocus",(ne=te||(te={})).Ready="READY",ne.Check="CHECK",ne.Edit="EDIT",(oe=ie||(ie={}))[oe.Line=0]="Line",oe[oe.Curve=1]="Curve";var re=n(24),le=[{colorId:0,hexString:"#000000",rgb:{r:0,g:0,b:0},hsl:{h:0,s:0,l:0},name:"Black"},{colorId:1,hexString:"#800000",rgb:{r:128,g:0,b:0},hsl:{h:0,s:100,l:25},name:"Maroon"},{colorId:2,hexString:"#008000",rgb:{r:0,g:128,b:0},hsl:{h:120,s:100,l:25},name:"Green"},{colorId:3,hexString:"#808000",rgb:{r:128,g:128,b:0},hsl:{h:60,s:100,l:25},name:"Olive"},{colorId:4,hexString:"#000080",rgb:{r:0,g:0,b:128},hsl:{h:240,s:100,l:25},name:"Navy"},{colorId:5,hexString:"#800080",rgb:{r:128,g:0,b:128},hsl:{h:300,s:100,l:25},name:"Purple"},{colorId:6,hexString:"#008080",rgb:{r:0,g:128,b:128},hsl:{h:180,s:100,l:25},name:"Teal"},{colorId:7,hexString:"#c0c0c0",rgb:{r:192,g:192,b:192},hsl:{h:0,s:0,l:75},name:"Silver"},{colorId:8,hexString:"#808080",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50},name:"Grey"},{colorId:9,hexString:"#ff0000",rgb:{r:255,g:0,b:0},hsl:{h:0,s:100,l:50},name:"Red"},{colorId:10,hexString:"#00ff00",rgb:{r:0,g:255,b:0},hsl:{h:120,s:100,l:50},name:"Lime"},{colorId:11,hexString:"#ffff00",rgb:{r:255,g:255,b:0},hsl:{h:60,s:100,l:50},name:"Yellow"},{colorId:12,hexString:"#0000ff",rgb:{r:0,g:0,b:255},hsl:{h:240,s:100,l:50},name:"Blue"},{colorId:13,hexString:"#ff00ff",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50},name:"Fuchsia"},{colorId:14,hexString:"#00ffff",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50},name:"Aqua"},{colorId:15,hexString:"#ffffff",rgb:{r:255,g:255,b:255},hsl:{h:0,s:0,l:100},name:"White"},{colorId:16,hexString:"#000000",rgb:{r:0,g:0,b:0},hsl:{h:0,s:0,l:0},name:"Grey0"},{colorId:17,hexString:"#00005f",rgb:{r:0,g:0,b:95},hsl:{h:240,s:100,l:18},name:"NavyBlue"},{colorId:18,hexString:"#000087",rgb:{r:0,g:0,b:135},hsl:{h:240,s:100,l:26},name:"DarkBlue"},{colorId:19,hexString:"#0000af",rgb:{r:0,g:0,b:175},hsl:{h:240,s:100,l:34},name:"Blue3"},{colorId:20,hexString:"#0000d7",rgb:{r:0,g:0,b:215},hsl:{h:240,s:100,l:42},name:"Blue3"},{colorId:21,hexString:"#0000ff",rgb:{r:0,g:0,b:255},hsl:{h:240,s:100,l:50},name:"Blue1"},{colorId:22,hexString:"#005f00",rgb:{r:0,g:95,b:0},hsl:{h:120,s:100,l:18},name:"DarkGreen"},{colorId:23,hexString:"#005f5f",rgb:{r:0,g:95,b:95},hsl:{h:180,s:100,l:18},name:"DeepSkyBlue4"},{colorId:24,hexString:"#005f87",rgb:{r:0,g:95,b:135},hsl:{h:197.777777777778,s:100,l:26},name:"DeepSkyBlue4"},{colorId:25,hexString:"#005faf",rgb:{r:0,g:95,b:175},hsl:{h:207.428571428571,s:100,l:34},name:"DeepSkyBlue4"},{colorId:26,hexString:"#005fd7",rgb:{r:0,g:95,b:215},hsl:{h:213.488372093023,s:100,l:42},name:"DodgerBlue3"},{colorId:27,hexString:"#005fff",rgb:{r:0,g:95,b:255},hsl:{h:217.647058823529,s:100,l:50},name:"DodgerBlue2"},{colorId:28,hexString:"#008700",rgb:{r:0,g:135,b:0},hsl:{h:120,s:100,l:26},name:"Green4"},{colorId:29,hexString:"#00875f",rgb:{r:0,g:135,b:95},hsl:{h:162.222222222222,s:100,l:26},name:"SpringGreen4"},{colorId:30,hexString:"#008787",rgb:{r:0,g:135,b:135},hsl:{h:180,s:100,l:26},name:"Turquoise4"},{colorId:31,hexString:"#0087af",rgb:{r:0,g:135,b:175},hsl:{h:193.714285714286,s:100,l:34},name:"DeepSkyBlue3"},{colorId:32,hexString:"#0087d7",rgb:{r:0,g:135,b:215},hsl:{h:202.325581395349,s:100,l:42},name:"DeepSkyBlue3"},{colorId:33,hexString:"#0087ff",rgb:{r:0,g:135,b:255},hsl:{h:208.235294117647,s:100,l:50},name:"DodgerBlue1"},{colorId:34,hexString:"#00af00",rgb:{r:0,g:175,b:0},hsl:{h:120,s:100,l:34},name:"Green3"},{colorId:35,hexString:"#00af5f",rgb:{r:0,g:175,b:95},hsl:{h:152.571428571429,s:100,l:34},name:"SpringGreen3"},{colorId:36,hexString:"#00af87",rgb:{r:0,g:175,b:135},hsl:{h:166.285714285714,s:100,l:34},name:"DarkCyan"},{colorId:37,hexString:"#00afaf",rgb:{r:0,g:175,b:175},hsl:{h:180,s:100,l:34},name:"LightSeaGreen"},{colorId:38,hexString:"#00afd7",rgb:{r:0,g:175,b:215},hsl:{h:191.162790697674,s:100,l:42},name:"DeepSkyBlue2"},{colorId:39,hexString:"#00afff",rgb:{r:0,g:175,b:255},hsl:{h:198.823529411765,s:100,l:50},name:"DeepSkyBlue1"},{colorId:40,hexString:"#00d700",rgb:{r:0,g:215,b:0},hsl:{h:120,s:100,l:42},name:"Green3"},{colorId:41,hexString:"#00d75f",rgb:{r:0,g:215,b:95},hsl:{h:146.511627906977,s:100,l:42},name:"SpringGreen3"},{colorId:42,hexString:"#00d787",rgb:{r:0,g:215,b:135},hsl:{h:157.674418604651,s:100,l:42},name:"SpringGreen2"},{colorId:43,hexString:"#00d7af",rgb:{r:0,g:215,b:175},hsl:{h:168.837209302326,s:100,l:42},name:"Cyan3"},{colorId:44,hexString:"#00d7d7",rgb:{r:0,g:215,b:215},hsl:{h:180,s:100,l:42},name:"DarkTurquoise"},{colorId:45,hexString:"#00d7ff",rgb:{r:0,g:215,b:255},hsl:{h:189.411764705882,s:100,l:50},name:"Turquoise2"},{colorId:46,hexString:"#00ff00",rgb:{r:0,g:255,b:0},hsl:{h:120,s:100,l:50},name:"Green1"},{colorId:47,hexString:"#00ff5f",rgb:{r:0,g:255,b:95},hsl:{h:142.352941176471,s:100,l:50},name:"SpringGreen2"},{colorId:48,hexString:"#00ff87",rgb:{r:0,g:255,b:135},hsl:{h:151.764705882353,s:100,l:50},name:"SpringGreen1"},{colorId:49,hexString:"#00ffaf",rgb:{r:0,g:255,b:175},hsl:{h:161.176470588235,s:100,l:50},name:"MediumSpringGreen"},{colorId:50,hexString:"#00ffd7",rgb:{r:0,g:255,b:215},hsl:{h:170.588235294118,s:100,l:50},name:"Cyan2"},{colorId:51,hexString:"#00ffff",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50},name:"Cyan1"},{colorId:52,hexString:"#5f0000",rgb:{r:95,g:0,b:0},hsl:{h:0,s:100,l:18},name:"DarkRed"},{colorId:53,hexString:"#5f005f",rgb:{r:95,g:0,b:95},hsl:{h:300,s:100,l:18},name:"DeepPink4"},{colorId:54,hexString:"#5f0087",rgb:{r:95,g:0,b:135},hsl:{h:282.222222222222,s:100,l:26},name:"Purple4"},{colorId:55,hexString:"#5f00af",rgb:{r:95,g:0,b:175},hsl:{h:272.571428571429,s:100,l:34},name:"Purple4"},{colorId:56,hexString:"#5f00d7",rgb:{r:95,g:0,b:215},hsl:{h:266.511627906977,s:100,l:42},name:"Purple3"},{colorId:57,hexString:"#5f00ff",rgb:{r:95,g:0,b:255},hsl:{h:262.352941176471,s:100,l:50},name:"BlueViolet"},{colorId:58,hexString:"#5f5f00",rgb:{r:95,g:95,b:0},hsl:{h:60,s:100,l:18},name:"Orange4"},{colorId:59,hexString:"#5f5f5f",rgb:{r:95,g:95,b:95},hsl:{h:0,s:0,l:37},name:"Grey37"},{colorId:60,hexString:"#5f5f87",rgb:{r:95,g:95,b:135},hsl:{h:240,s:17,l:45},name:"MediumPurple4"},{colorId:61,hexString:"#5f5faf",rgb:{r:95,g:95,b:175},hsl:{h:240,s:33,l:52},name:"SlateBlue3"},{colorId:62,hexString:"#5f5fd7",rgb:{r:95,g:95,b:215},hsl:{h:240,s:60,l:60},name:"SlateBlue3"},{colorId:63,hexString:"#5f5fff",rgb:{r:95,g:95,b:255},hsl:{h:240,s:100,l:68},name:"RoyalBlue1"},{colorId:64,hexString:"#5f8700",rgb:{r:95,g:135,b:0},hsl:{h:77.7777777777778,s:100,l:26},name:"Chartreuse4"},{colorId:65,hexString:"#5f875f",rgb:{r:95,g:135,b:95},hsl:{h:120,s:17,l:45},name:"DarkSeaGreen4"},{colorId:66,hexString:"#5f8787",rgb:{r:95,g:135,b:135},hsl:{h:180,s:17,l:45},name:"PaleTurquoise4"},{colorId:67,hexString:"#5f87af",rgb:{r:95,g:135,b:175},hsl:{h:210,s:33,l:52},name:"SteelBlue"},{colorId:68,hexString:"#5f87d7",rgb:{r:95,g:135,b:215},hsl:{h:220,s:60,l:60},name:"SteelBlue3"},{colorId:69,hexString:"#5f87ff",rgb:{r:95,g:135,b:255},hsl:{h:225,s:100,l:68},name:"CornflowerBlue"},{colorId:70,hexString:"#5faf00",rgb:{r:95,g:175,b:0},hsl:{h:87.4285714285714,s:100,l:34},name:"Chartreuse3"},{colorId:71,hexString:"#5faf5f",rgb:{r:95,g:175,b:95},hsl:{h:120,s:33,l:52},name:"DarkSeaGreen4"},{colorId:72,hexString:"#5faf87",rgb:{r:95,g:175,b:135},hsl:{h:150,s:33,l:52},name:"CadetBlue"},{colorId:73,hexString:"#5fafaf",rgb:{r:95,g:175,b:175},hsl:{h:180,s:33,l:52},name:"CadetBlue"},{colorId:74,hexString:"#5fafd7",rgb:{r:95,g:175,b:215},hsl:{h:200,s:60,l:60},name:"SkyBlue3"},{colorId:75,hexString:"#5fafff",rgb:{r:95,g:175,b:255},hsl:{h:210,s:100,l:68},name:"SteelBlue1"},{colorId:76,hexString:"#5fd700",rgb:{r:95,g:215,b:0},hsl:{h:93.4883720930233,s:100,l:42},name:"Chartreuse3"},{colorId:77,hexString:"#5fd75f",rgb:{r:95,g:215,b:95},hsl:{h:120,s:60,l:60},name:"PaleGreen3"},{colorId:78,hexString:"#5fd787",rgb:{r:95,g:215,b:135},hsl:{h:140,s:60,l:60},name:"SeaGreen3"},{colorId:79,hexString:"#5fd7af",rgb:{r:95,g:215,b:175},hsl:{h:160,s:60,l:60},name:"Aquamarine3"},{colorId:80,hexString:"#5fd7d7",rgb:{r:95,g:215,b:215},hsl:{h:180,s:60,l:60},name:"MediumTurquoise"},{colorId:81,hexString:"#5fd7ff",rgb:{r:95,g:215,b:255},hsl:{h:195,s:100,l:68},name:"SteelBlue1"},{colorId:82,hexString:"#5fff00",rgb:{r:95,g:255,b:0},hsl:{h:97.6470588235294,s:100,l:50},name:"Chartreuse2"},{colorId:83,hexString:"#5fff5f",rgb:{r:95,g:255,b:95},hsl:{h:120,s:100,l:68},name:"SeaGreen2"},{colorId:84,hexString:"#5fff87",rgb:{r:95,g:255,b:135},hsl:{h:135,s:100,l:68},name:"SeaGreen1"},{colorId:85,hexString:"#5fffaf",rgb:{r:95,g:255,b:175},hsl:{h:150,s:100,l:68},name:"SeaGreen1"},{colorId:86,hexString:"#5fffd7",rgb:{r:95,g:255,b:215},hsl:{h:165,s:100,l:68},name:"Aquamarine1"},{colorId:87,hexString:"#5fffff",rgb:{r:95,g:255,b:255},hsl:{h:180,s:100,l:68},name:"DarkSlateGray2"},{colorId:88,hexString:"#870000",rgb:{r:135,g:0,b:0},hsl:{h:0,s:100,l:26},name:"DarkRed"},{colorId:89,hexString:"#87005f",rgb:{r:135,g:0,b:95},hsl:{h:317.777777777778,s:100,l:26},name:"DeepPink4"},{colorId:90,hexString:"#870087",rgb:{r:135,g:0,b:135},hsl:{h:300,s:100,l:26},name:"DarkMagenta"},{colorId:91,hexString:"#8700af",rgb:{r:135,g:0,b:175},hsl:{h:286.285714285714,s:100,l:34},name:"DarkMagenta"},{colorId:92,hexString:"#8700d7",rgb:{r:135,g:0,b:215},hsl:{h:277.674418604651,s:100,l:42},name:"DarkViolet"},{colorId:93,hexString:"#8700ff",rgb:{r:135,g:0,b:255},hsl:{h:271.764705882353,s:100,l:50},name:"Purple"},{colorId:94,hexString:"#875f00",rgb:{r:135,g:95,b:0},hsl:{h:42.2222222222222,s:100,l:26},name:"Orange4"},{colorId:95,hexString:"#875f5f",rgb:{r:135,g:95,b:95},hsl:{h:0,s:17,l:45},name:"LightPink4"},{colorId:96,hexString:"#875f87",rgb:{r:135,g:95,b:135},hsl:{h:300,s:17,l:45},name:"Plum4"},{colorId:97,hexString:"#875faf",rgb:{r:135,g:95,b:175},hsl:{h:270,s:33,l:52},name:"MediumPurple3"},{colorId:98,hexString:"#875fd7",rgb:{r:135,g:95,b:215},hsl:{h:260,s:60,l:60},name:"MediumPurple3"},{colorId:99,hexString:"#875fff",rgb:{r:135,g:95,b:255},hsl:{h:255,s:100,l:68},name:"SlateBlue1"},{colorId:100,hexString:"#878700",rgb:{r:135,g:135,b:0},hsl:{h:60,s:100,l:26},name:"Yellow4"},{colorId:101,hexString:"#87875f",rgb:{r:135,g:135,b:95},hsl:{h:60,s:17,l:45},name:"Wheat4"},{colorId:102,hexString:"#878787",rgb:{r:135,g:135,b:135},hsl:{h:0,s:0,l:52},name:"Grey53"},{colorId:103,hexString:"#8787af",rgb:{r:135,g:135,b:175},hsl:{h:240,s:20,l:60},name:"LightSlateGrey"},{colorId:104,hexString:"#8787d7",rgb:{r:135,g:135,b:215},hsl:{h:240,s:50,l:68},name:"MediumPurple"},{colorId:105,hexString:"#8787ff",rgb:{r:135,g:135,b:255},hsl:{h:240,s:100,l:76},name:"LightSlateBlue"},{colorId:106,hexString:"#87af00",rgb:{r:135,g:175,b:0},hsl:{h:73.7142857142857,s:100,l:34},name:"Yellow4"},{colorId:107,hexString:"#87af5f",rgb:{r:135,g:175,b:95},hsl:{h:90,s:33,l:52},name:"DarkOliveGreen3"},{colorId:108,hexString:"#87af87",rgb:{r:135,g:175,b:135},hsl:{h:120,s:20,l:60},name:"DarkSeaGreen"},{colorId:109,hexString:"#87afaf",rgb:{r:135,g:175,b:175},hsl:{h:180,s:20,l:60},name:"LightSkyBlue3"},{colorId:110,hexString:"#87afd7",rgb:{r:135,g:175,b:215},hsl:{h:210,s:50,l:68},name:"LightSkyBlue3"},{colorId:111,hexString:"#87afff",rgb:{r:135,g:175,b:255},hsl:{h:220,s:100,l:76},name:"SkyBlue2"},{colorId:112,hexString:"#87d700",rgb:{r:135,g:215,b:0},hsl:{h:82.3255813953488,s:100,l:42},name:"Chartreuse2"},{colorId:113,hexString:"#87d75f",rgb:{r:135,g:215,b:95},hsl:{h:100,s:60,l:60},name:"DarkOliveGreen3"},{colorId:114,hexString:"#87d787",rgb:{r:135,g:215,b:135},hsl:{h:120,s:50,l:68},name:"PaleGreen3"},{colorId:115,hexString:"#87d7af",rgb:{r:135,g:215,b:175},hsl:{h:150,s:50,l:68},name:"DarkSeaGreen3"},{colorId:116,hexString:"#87d7d7",rgb:{r:135,g:215,b:215},hsl:{h:180,s:50,l:68},name:"DarkSlateGray3"},{colorId:117,hexString:"#87d7ff",rgb:{r:135,g:215,b:255},hsl:{h:200,s:100,l:76},name:"SkyBlue1"},{colorId:118,hexString:"#87ff00",rgb:{r:135,g:255,b:0},hsl:{h:88.2352941176471,s:100,l:50},name:"Chartreuse1"},{colorId:119,hexString:"#87ff5f",rgb:{r:135,g:255,b:95},hsl:{h:105,s:100,l:68},name:"LightGreen"},{colorId:120,hexString:"#87ff87",rgb:{r:135,g:255,b:135},hsl:{h:120,s:100,l:76},name:"LightGreen"},{colorId:121,hexString:"#87ffaf",rgb:{r:135,g:255,b:175},hsl:{h:140,s:100,l:76},name:"PaleGreen1"},{colorId:122,hexString:"#87ffd7",rgb:{r:135,g:255,b:215},hsl:{h:160,s:100,l:76},name:"Aquamarine1"},{colorId:123,hexString:"#87ffff",rgb:{r:135,g:255,b:255},hsl:{h:180,s:100,l:76},name:"DarkSlateGray1"},{colorId:124,hexString:"#af0000",rgb:{r:175,g:0,b:0},hsl:{h:0,s:100,l:34},name:"Red3"},{colorId:125,hexString:"#af005f",rgb:{r:175,g:0,b:95},hsl:{h:327.428571428571,s:100,l:34},name:"DeepPink4"},{colorId:126,hexString:"#af0087",rgb:{r:175,g:0,b:135},hsl:{h:313.714285714286,s:100,l:34},name:"MediumVioletRed"},{colorId:127,hexString:"#af00af",rgb:{r:175,g:0,b:175},hsl:{h:300,s:100,l:34},name:"Magenta3"},{colorId:128,hexString:"#af00d7",rgb:{r:175,g:0,b:215},hsl:{h:288.837209302326,s:100,l:42},name:"DarkViolet"},{colorId:129,hexString:"#af00ff",rgb:{r:175,g:0,b:255},hsl:{h:281.176470588235,s:100,l:50},name:"Purple"},{colorId:130,hexString:"#af5f00",rgb:{r:175,g:95,b:0},hsl:{h:32.5714285714286,s:100,l:34},name:"DarkOrange3"},{colorId:131,hexString:"#af5f5f",rgb:{r:175,g:95,b:95},hsl:{h:0,s:33,l:52},name:"IndianRed"},{colorId:132,hexString:"#af5f87",rgb:{r:175,g:95,b:135},hsl:{h:330,s:33,l:52},name:"HotPink3"},{colorId:133,hexString:"#af5faf",rgb:{r:175,g:95,b:175},hsl:{h:300,s:33,l:52},name:"MediumOrchid3"},{colorId:134,hexString:"#af5fd7",rgb:{r:175,g:95,b:215},hsl:{h:280,s:60,l:60},name:"MediumOrchid"},{colorId:135,hexString:"#af5fff",rgb:{r:175,g:95,b:255},hsl:{h:270,s:100,l:68},name:"MediumPurple2"},{colorId:136,hexString:"#af8700",rgb:{r:175,g:135,b:0},hsl:{h:46.2857142857143,s:100,l:34},name:"DarkGoldenrod"},{colorId:137,hexString:"#af875f",rgb:{r:175,g:135,b:95},hsl:{h:30,s:33,l:52},name:"LightSalmon3"},{colorId:138,hexString:"#af8787",rgb:{r:175,g:135,b:135},hsl:{h:0,s:20,l:60},name:"RosyBrown"},{colorId:139,hexString:"#af87af",rgb:{r:175,g:135,b:175},hsl:{h:300,s:20,l:60},name:"Grey63"},{colorId:140,hexString:"#af87d7",rgb:{r:175,g:135,b:215},hsl:{h:270,s:50,l:68},name:"MediumPurple2"},{colorId:141,hexString:"#af87ff",rgb:{r:175,g:135,b:255},hsl:{h:260,s:100,l:76},name:"MediumPurple1"},{colorId:142,hexString:"#afaf00",rgb:{r:175,g:175,b:0},hsl:{h:60,s:100,l:34},name:"Gold3"},{colorId:143,hexString:"#afaf5f",rgb:{r:175,g:175,b:95},hsl:{h:60,s:33,l:52},name:"DarkKhaki"},{colorId:144,hexString:"#afaf87",rgb:{r:175,g:175,b:135},hsl:{h:60,s:20,l:60},name:"NavajoWhite3"},{colorId:145,hexString:"#afafaf",rgb:{r:175,g:175,b:175},hsl:{h:0,s:0,l:68},name:"Grey69"},{colorId:146,hexString:"#afafd7",rgb:{r:175,g:175,b:215},hsl:{h:240,s:33,l:76},name:"LightSteelBlue3"},{colorId:147,hexString:"#afafff",rgb:{r:175,g:175,b:255},hsl:{h:240,s:100,l:84},name:"LightSteelBlue"},{colorId:148,hexString:"#afd700",rgb:{r:175,g:215,b:0},hsl:{h:71.1627906976744,s:100,l:42},name:"Yellow3"},{colorId:149,hexString:"#afd75f",rgb:{r:175,g:215,b:95},hsl:{h:80,s:60,l:60},name:"DarkOliveGreen3"},{colorId:150,hexString:"#afd787",rgb:{r:175,g:215,b:135},hsl:{h:90,s:50,l:68},name:"DarkSeaGreen3"},{colorId:151,hexString:"#afd7af",rgb:{r:175,g:215,b:175},hsl:{h:120,s:33,l:76},name:"DarkSeaGreen2"},{colorId:152,hexString:"#afd7d7",rgb:{r:175,g:215,b:215},hsl:{h:180,s:33,l:76},name:"LightCyan3"},{colorId:153,hexString:"#afd7ff",rgb:{r:175,g:215,b:255},hsl:{h:210,s:100,l:84},name:"LightSkyBlue1"},{colorId:154,hexString:"#afff00",rgb:{r:175,g:255,b:0},hsl:{h:78.8235294117647,s:100,l:50},name:"GreenYellow"},{colorId:155,hexString:"#afff5f",rgb:{r:175,g:255,b:95},hsl:{h:90,s:100,l:68},name:"DarkOliveGreen2"},{colorId:156,hexString:"#afff87",rgb:{r:175,g:255,b:135},hsl:{h:100,s:100,l:76},name:"PaleGreen1"},{colorId:157,hexString:"#afffaf",rgb:{r:175,g:255,b:175},hsl:{h:120,s:100,l:84},name:"DarkSeaGreen2"},{colorId:158,hexString:"#afffd7",rgb:{r:175,g:255,b:215},hsl:{h:150,s:100,l:84},name:"DarkSeaGreen1"},{colorId:159,hexString:"#afffff",rgb:{r:175,g:255,b:255},hsl:{h:180,s:100,l:84},name:"PaleTurquoise1"},{colorId:160,hexString:"#d70000",rgb:{r:215,g:0,b:0},hsl:{h:0,s:100,l:42},name:"Red3"},{colorId:161,hexString:"#d7005f",rgb:{r:215,g:0,b:95},hsl:{h:333.488372093023,s:100,l:42},name:"DeepPink3"},{colorId:162,hexString:"#d70087",rgb:{r:215,g:0,b:135},hsl:{h:322.325581395349,s:100,l:42},name:"DeepPink3"},{colorId:163,hexString:"#d700af",rgb:{r:215,g:0,b:175},hsl:{h:311.162790697674,s:100,l:42},name:"Magenta3"},{colorId:164,hexString:"#d700d7",rgb:{r:215,g:0,b:215},hsl:{h:300,s:100,l:42},name:"Magenta3"},{colorId:165,hexString:"#d700ff",rgb:{r:215,g:0,b:255},hsl:{h:290.588235294118,s:100,l:50},name:"Magenta2"},{colorId:166,hexString:"#d75f00",rgb:{r:215,g:95,b:0},hsl:{h:26.5116279069767,s:100,l:42},name:"DarkOrange3"},{colorId:167,hexString:"#d75f5f",rgb:{r:215,g:95,b:95},hsl:{h:0,s:60,l:60},name:"IndianRed"},{colorId:168,hexString:"#d75f87",rgb:{r:215,g:95,b:135},hsl:{h:340,s:60,l:60},name:"HotPink3"},{colorId:169,hexString:"#d75faf",rgb:{r:215,g:95,b:175},hsl:{h:320,s:60,l:60},name:"HotPink2"},{colorId:170,hexString:"#d75fd7",rgb:{r:215,g:95,b:215},hsl:{h:300,s:60,l:60},name:"Orchid"},{colorId:171,hexString:"#d75fff",rgb:{r:215,g:95,b:255},hsl:{h:285,s:100,l:68},name:"MediumOrchid1"},{colorId:172,hexString:"#d78700",rgb:{r:215,g:135,b:0},hsl:{h:37.6744186046512,s:100,l:42},name:"Orange3"},{colorId:173,hexString:"#d7875f",rgb:{r:215,g:135,b:95},hsl:{h:20,s:60,l:60},name:"LightSalmon3"},{colorId:174,hexString:"#d78787",rgb:{r:215,g:135,b:135},hsl:{h:0,s:50,l:68},name:"LightPink3"},{colorId:175,hexString:"#d787af",rgb:{r:215,g:135,b:175},hsl:{h:330,s:50,l:68},name:"Pink3"},{colorId:176,hexString:"#d787d7",rgb:{r:215,g:135,b:215},hsl:{h:300,s:50,l:68},name:"Plum3"},{colorId:177,hexString:"#d787ff",rgb:{r:215,g:135,b:255},hsl:{h:280,s:100,l:76},name:"Violet"},{colorId:178,hexString:"#d7af00",rgb:{r:215,g:175,b:0},hsl:{h:48.8372093023256,s:100,l:42},name:"Gold3"},{colorId:179,hexString:"#d7af5f",rgb:{r:215,g:175,b:95},hsl:{h:40,s:60,l:60},name:"LightGoldenrod3"},{colorId:180,hexString:"#d7af87",rgb:{r:215,g:175,b:135},hsl:{h:30,s:50,l:68},name:"Tan"},{colorId:181,hexString:"#d7afaf",rgb:{r:215,g:175,b:175},hsl:{h:0,s:33,l:76},name:"MistyRose3"},{colorId:182,hexString:"#d7afd7",rgb:{r:215,g:175,b:215},hsl:{h:300,s:33,l:76},name:"Thistle3"},{colorId:183,hexString:"#d7afff",rgb:{r:215,g:175,b:255},hsl:{h:270,s:100,l:84},name:"Plum2"},{colorId:184,hexString:"#d7d700",rgb:{r:215,g:215,b:0},hsl:{h:60,s:100,l:42},name:"Yellow3"},{colorId:185,hexString:"#d7d75f",rgb:{r:215,g:215,b:95},hsl:{h:60,s:60,l:60},name:"Khaki3"},{colorId:186,hexString:"#d7d787",rgb:{r:215,g:215,b:135},hsl:{h:60,s:50,l:68},name:"LightGoldenrod2"},{colorId:187,hexString:"#d7d7af",rgb:{r:215,g:215,b:175},hsl:{h:60,s:33,l:76},name:"LightYellow3"},{colorId:188,hexString:"#d7d7d7",rgb:{r:215,g:215,b:215},hsl:{h:0,s:0,l:84},name:"Grey84"},{colorId:189,hexString:"#d7d7ff",rgb:{r:215,g:215,b:255},hsl:{h:240,s:100,l:92},name:"LightSteelBlue1"},{colorId:190,hexString:"#d7ff00",rgb:{r:215,g:255,b:0},hsl:{h:69.4117647058823,s:100,l:50},name:"Yellow2"},{colorId:191,hexString:"#d7ff5f",rgb:{r:215,g:255,b:95},hsl:{h:75,s:100,l:68},name:"DarkOliveGreen1"},{colorId:192,hexString:"#d7ff87",rgb:{r:215,g:255,b:135},hsl:{h:80,s:100,l:76},name:"DarkOliveGreen1"},{colorId:193,hexString:"#d7ffaf",rgb:{r:215,g:255,b:175},hsl:{h:90,s:100,l:84},name:"DarkSeaGreen1"},{colorId:194,hexString:"#d7ffd7",rgb:{r:215,g:255,b:215},hsl:{h:120,s:100,l:92},name:"Honeydew2"},{colorId:195,hexString:"#d7ffff",rgb:{r:215,g:255,b:255},hsl:{h:180,s:100,l:92},name:"LightCyan1"},{colorId:196,hexString:"#ff0000",rgb:{r:255,g:0,b:0},hsl:{h:0,s:100,l:50},name:"Red1"},{colorId:197,hexString:"#ff005f",rgb:{r:255,g:0,b:95},hsl:{h:337.647058823529,s:100,l:50},name:"DeepPink2"},{colorId:198,hexString:"#ff0087",rgb:{r:255,g:0,b:135},hsl:{h:328.235294117647,s:100,l:50},name:"DeepPink1"},{colorId:199,hexString:"#ff00af",rgb:{r:255,g:0,b:175},hsl:{h:318.823529411765,s:100,l:50},name:"DeepPink1"},{colorId:200,hexString:"#ff00d7",rgb:{r:255,g:0,b:215},hsl:{h:309.411764705882,s:100,l:50},name:"Magenta2"},{colorId:201,hexString:"#ff00ff",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50},name:"Magenta1"},{colorId:202,hexString:"#ff5f00",rgb:{r:255,g:95,b:0},hsl:{h:22.3529411764706,s:100,l:50},name:"OrangeRed1"},{colorId:203,hexString:"#ff5f5f",rgb:{r:255,g:95,b:95},hsl:{h:0,s:100,l:68},name:"IndianRed1"},{colorId:204,hexString:"#ff5f87",rgb:{r:255,g:95,b:135},hsl:{h:345,s:100,l:68},name:"IndianRed1"},{colorId:205,hexString:"#ff5faf",rgb:{r:255,g:95,b:175},hsl:{h:330,s:100,l:68},name:"HotPink"},{colorId:206,hexString:"#ff5fd7",rgb:{r:255,g:95,b:215},hsl:{h:315,s:100,l:68},name:"HotPink"},{colorId:207,hexString:"#ff5fff",rgb:{r:255,g:95,b:255},hsl:{h:300,s:100,l:68},name:"MediumOrchid1"},{colorId:208,hexString:"#ff8700",rgb:{r:255,g:135,b:0},hsl:{h:31.7647058823529,s:100,l:50},name:"DarkOrange"},{colorId:209,hexString:"#ff875f",rgb:{r:255,g:135,b:95},hsl:{h:15,s:100,l:68},name:"Salmon1"},{colorId:210,hexString:"#ff8787",rgb:{r:255,g:135,b:135},hsl:{h:0,s:100,l:76},name:"LightCoral"},{colorId:211,hexString:"#ff87af",rgb:{r:255,g:135,b:175},hsl:{h:340,s:100,l:76},name:"PaleVioletRed1"},{colorId:212,hexString:"#ff87d7",rgb:{r:255,g:135,b:215},hsl:{h:320,s:100,l:76},name:"Orchid2"},{colorId:213,hexString:"#ff87ff",rgb:{r:255,g:135,b:255},hsl:{h:300,s:100,l:76},name:"Orchid1"},{colorId:214,hexString:"#ffaf00",rgb:{r:255,g:175,b:0},hsl:{h:41.1764705882353,s:100,l:50},name:"Orange1"},{colorId:215,hexString:"#ffaf5f",rgb:{r:255,g:175,b:95},hsl:{h:30,s:100,l:68},name:"SandyBrown"},{colorId:216,hexString:"#ffaf87",rgb:{r:255,g:175,b:135},hsl:{h:20,s:100,l:76},name:"LightSalmon1"},{colorId:217,hexString:"#ffafaf",rgb:{r:255,g:175,b:175},hsl:{h:0,s:100,l:84},name:"LightPink1"},{colorId:218,hexString:"#ffafd7",rgb:{r:255,g:175,b:215},hsl:{h:330,s:100,l:84},name:"Pink1"},{colorId:219,hexString:"#ffafff",rgb:{r:255,g:175,b:255},hsl:{h:300,s:100,l:84},name:"Plum1"},{colorId:220,hexString:"#ffd700",rgb:{r:255,g:215,b:0},hsl:{h:50.5882352941176,s:100,l:50},name:"Gold1"},{colorId:221,hexString:"#ffd75f",rgb:{r:255,g:215,b:95},hsl:{h:45,s:100,l:68},name:"LightGoldenrod2"},{colorId:222,hexString:"#ffd787",rgb:{r:255,g:215,b:135},hsl:{h:40,s:100,l:76},name:"LightGoldenrod2"},{colorId:223,hexString:"#ffd7af",rgb:{r:255,g:215,b:175},hsl:{h:30,s:100,l:84},name:"NavajoWhite1"},{colorId:224,hexString:"#ffd7d7",rgb:{r:255,g:215,b:215},hsl:{h:0,s:100,l:92},name:"MistyRose1"},{colorId:225,hexString:"#ffd7ff",rgb:{r:255,g:215,b:255},hsl:{h:300,s:100,l:92},name:"Thistle1"},{colorId:226,hexString:"#ffff00",rgb:{r:255,g:255,b:0},hsl:{h:60,s:100,l:50},name:"Yellow1"},{colorId:227,hexString:"#ffff5f",rgb:{r:255,g:255,b:95},hsl:{h:60,s:100,l:68},name:"LightGoldenrod1"},{colorId:228,hexString:"#ffff87",rgb:{r:255,g:255,b:135},hsl:{h:60,s:100,l:76},name:"Khaki1"},{colorId:229,hexString:"#ffffaf",rgb:{r:255,g:255,b:175},hsl:{h:60,s:100,l:84},name:"Wheat1"},{colorId:230,hexString:"#ffffd7",rgb:{r:255,g:255,b:215},hsl:{h:60,s:100,l:92},name:"Cornsilk1"},{colorId:231,hexString:"#ffffff",rgb:{r:255,g:255,b:255},hsl:{h:0,s:0,l:100},name:"Grey100"},{colorId:232,hexString:"#080808",rgb:{r:8,g:8,b:8},hsl:{h:0,s:0,l:3},name:"Grey3"},{colorId:233,hexString:"#121212",rgb:{r:18,g:18,b:18},hsl:{h:0,s:0,l:7},name:"Grey7"},{colorId:234,hexString:"#1c1c1c",rgb:{r:28,g:28,b:28},hsl:{h:0,s:0,l:10},name:"Grey11"},{colorId:235,hexString:"#262626",rgb:{r:38,g:38,b:38},hsl:{h:0,s:0,l:14},name:"Grey15"},{colorId:236,hexString:"#303030",rgb:{r:48,g:48,b:48},hsl:{h:0,s:0,l:18},name:"Grey19"},{colorId:237,hexString:"#3a3a3a",rgb:{r:58,g:58,b:58},hsl:{h:0,s:0,l:22},name:"Grey23"},{colorId:238,hexString:"#444444",rgb:{r:68,g:68,b:68},hsl:{h:0,s:0,l:26},name:"Grey27"},{colorId:239,hexString:"#4e4e4e",rgb:{r:78,g:78,b:78},hsl:{h:0,s:0,l:30},name:"Grey30"},{colorId:240,hexString:"#585858",rgb:{r:88,g:88,b:88},hsl:{h:0,s:0,l:34},name:"Grey35"},{colorId:241,hexString:"#626262",rgb:{r:98,g:98,b:98},hsl:{h:0,s:0,l:37},name:"Grey39"},{colorId:242,hexString:"#6c6c6c",rgb:{r:108,g:108,b:108},hsl:{h:0,s:0,l:40},name:"Grey42"},{colorId:243,hexString:"#767676",rgb:{r:118,g:118,b:118},hsl:{h:0,s:0,l:46},name:"Grey46"},{colorId:244,hexString:"#808080",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50},name:"Grey50"},{colorId:245,hexString:"#8a8a8a",rgb:{r:138,g:138,b:138},hsl:{h:0,s:0,l:54},name:"Grey54"},{colorId:246,hexString:"#949494",rgb:{r:148,g:148,b:148},hsl:{h:0,s:0,l:58},name:"Grey58"},{colorId:247,hexString:"#9e9e9e",rgb:{r:158,g:158,b:158},hsl:{h:0,s:0,l:61},name:"Grey62"},{colorId:248,hexString:"#a8a8a8",rgb:{r:168,g:168,b:168},hsl:{h:0,s:0,l:65},name:"Grey66"},{colorId:249,hexString:"#b2b2b2",rgb:{r:178,g:178,b:178},hsl:{h:0,s:0,l:69},name:"Grey70"},{colorId:250,hexString:"#bcbcbc",rgb:{r:188,g:188,b:188},hsl:{h:0,s:0,l:73},name:"Grey74"},{colorId:251,hexString:"#c6c6c6",rgb:{r:198,g:198,b:198},hsl:{h:0,s:0,l:77},name:"Grey78"},{colorId:252,hexString:"#d0d0d0",rgb:{r:208,g:208,b:208},hsl:{h:0,s:0,l:81},name:"Grey82"},{colorId:253,hexString:"#dadada",rgb:{r:218,g:218,b:218},hsl:{h:0,s:0,l:85},name:"Grey85"},{colorId:254,hexString:"#e4e4e4",rgb:{r:228,g:228,b:228},hsl:{h:0,s:0,l:89},name:"Grey89"},{colorId:255,hexString:"#eeeeee",rgb:{r:238,g:238,b:238},hsl:{h:0,s:0,l:93},name:"Grey93"}],ce=Object.defineProperty,se=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,fe=function(e,t,n){return t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ve=function(e,t,n){return new Promise((function(i,o){var a=function(e){try{l(n.next(e))}catch(t){o(t)}},r=function(e){try{l(n.throw(e))}catch(t){o(t)}},l=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(a,r)};l((n=n.apply(e,t)).next())}))},pe={r:0,g:0,b:0,a:255},be={r:0,g:0,b:0,a:125},me={r:0,g:0,b:0,a:0},ye=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"createCanvas",value:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return{canvas:t,ctx:n}}},{key:"createImgDom",value:function(e){var t=new Image;return t.crossOrigin="Anonymous",t.src=e,new Promise((function(e){t.onload=function(){e(t)},t.onerror=function(e){console.error(e)}}))}},{key:"renderColorByMask",value:function(t){var n=t.renderCanvas,i=t.imgData,o=t.customColor,a=t.hiddenUndefinedColor,r=void 0!==a&&a,l=t.backgroundRGBA,c=void 0===l?be:l,u=t.basicImgCanvas,d=n.getContext("2d");if(d){if(e.renderPixelByImgData({ctx:d,imgData:i,getColor:function(e){var t,n,i,a=e.r,l=null==(t=null==o?void 0:o.find((function(e){return(null==e?void 0:e.channel)===a})))?void 0:t.rgba;if(!0!==r||l)return null!=l?l:(n=function(e,t){for(var n in t||(t={}))he.call(t,n)&&fe(e,n,t[n]);if(de){var i,o=Object(s.a)(de(t));try{for(o.s();!(i=o.n()).done;)n=i.value,ge.call(t,n)&&fe(e,n,t[n])}catch(a){o.e(a)}finally{o.f()}}return e}({},le[a].rgb),i={a:Math.floor(76.5)},se(n,ue(i)))},originBackgroundRGBA:pe,backgroundRGBA:c}),u){var h=u.getContext("2d");if(h)return h.drawImage(n,0,0),u.toDataURL("image/png")}return n.toDataURL("image/png")}}},{key:"renderMaskByColor",value:function(t){var n=t.renderCanvas,i=t.imgData,o=(t.imgNode,t.customColor),a=t.backgroundRGBA,r=void 0===a?pe:a,l=n.getContext("2d");if(l){return e.renderPixelByImgData({ctx:l,imgData:i,getColor:function(e){var t=e.r,n=e.g,i=e.b,a=void 0;return null==o||o.some((function(e){if(e.rgba){return t>=e.rgba.r-2&&t<=e.rgba.r+2&&n>=e.rgba.g-2&&n<=e.rgba.g+2&&i>=e.rgba.b-2&&i<=e.rgba.b+2&&(a={r:e.channel,g:e.channel,b:e.channel,a:255},!0)}})),a},originBackgroundRGBA:me,backgroundRGBA:r}),n.toDataURL("image/png")}}},{key:"renderPixelByImgData",value:function(e){for(var t=e.ctx,n=e.imgData,i=e.getColor,o=e.originBackgroundRGBA,a=e.backgroundRGBA,r=0;r<n.data.length/4;r++){var l=4*r,c=n.data[l],s=n.data[l+1],u=n.data[l+2],d=n.data[l+3],h=i({r:c,g:s,b:u,a:d});!(o.r===c&&o.g===s&&o.b===u&&o.a===d)&&h?(n.data[l]=h.r,n.data[l+1]=h.g,n.data[l+2]=h.b,n.data[l+3]=h.a):(n.data[l]=a.r,n.data[l+1]=a.g,n.data[l+2]=a.b,n.data[l+3]=a.a)}t.putImageData(n,0,0)}}]),e}(),Ce=ye;Ce.nextTick=function(){return new Promise((function(e){setTimeout((function(){e("")}))}))},Ce.getColorMapBySingleChannelMask=function(e){return ve(ye,null,Object(re.a)().mark((function t(){var n,i,o,a,r,l,c,s,u,d,h,g,f,v,p,b;return Object(re.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.maskSrc,i=e.customColor,o=e.basicImgSrc,a=e.hiddenUndefinedColor,r=void 0!==a&&a,l=e.backgroundRGBA,t.prev=1,t.next=4,ye.createImgDom(n);case 4:if(c=t.sent,s=ye.createCanvas(c),u=s.canvas,(d=s.ctx).drawImage(c,0,0,c.width,c.height),h=ye.createCanvas(c),g=h.canvas,f=h.ctx,!o){t.next=13;break}return t.next=11,ye.createImgDom(o);case 11:v=t.sent,f.drawImage(v,0,0);case 13:return t.next=15,ye.nextTick();case 15:return p=d.getImageData(0,0,c.width,c.height),b=ye.renderColorByMask({renderCanvas:u,imgData:p,imgNode:c,customColor:i,hiddenUndefinedColor:r,basicImgCanvas:g,backgroundRGBA:l}),t.abrupt("return",b);case 20:t.prev=20,t.t0=t.catch(1),console.error("Failed to load image",t.t0);case 23:case"end":return t.stop()}}),t,null,[[1,20]])})))},Ce.getMaskByColorImg=function(e){return ve(ye,[e],(function(e){var t=e.maskSrc,n=e.customColor;return Object(re.a)().mark((function e(){var i,o,a,r,l,c,s;return Object(re.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.createImgDom(t);case 3:return i=e.sent,o=ye.createCanvas(i),(a=o.ctx).drawImage(i,0,0,i.width,i.height),r=ye.createCanvas(i),l=r.canvas,e.next=9,ye.nextTick();case 9:return c=a.getImageData(0,0,i.width,i.height),s=ye.renderMaskByColor({renderCanvas:l,imgData:c,imgNode:i,customColor:n}),e.abrupt("return",s);case 14:e.prev=14,e.t0=e.catch(0),console.error("Failed to load image");case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))()}))}},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(35);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var r=a(i),l=r.default.createContext(void 0),c=o.createDispatchHook(l),s=o.createSelectorHook(l),u=r.default.createContext({hoverKey:-1,setHoverKey:function(){}});t.LLMContext=u,t.LabelBeeContext=l,t.useDispatch=c,t.useSelector=s},,function(e,t,n){"use strict";n.r(t),n.d(t,"RectOperation",(function(){return Yo})),n.d(t,"TagOperation",(function(){return na})),n.d(t,"PointOperation",(function(){return fa})),n.d(t,"LineToolOperation",(function(){return La})),n.d(t,"TextToolOperation",(function(){return Aa})),n.d(t,"PolygonOperation",(function(){return _a})),n.d(t,"MeasureOperation",(function(){return Ka})),n.d(t,"BasicToolOperation",(function(){return Bo})),n.d(t,"ViewOperation",(function(){return Tr})),n.d(t,"ScribbleTool",(function(){return Er})),n.d(t,"PointCloud2dOperation",(function(){return Yr})),n.d(t,"cAnnotation",(function(){return o})),n.d(t,"cAnnotationTask",(function(){return l})),n.d(t,"cKeyCode",(function(){return a})),n.d(t,"cStyle",(function(){return r})),n.d(t,"cTool",(function(){return i})),n.d(t,"CLIENT_TOOL_HEAD_TYPE",(function(){return ke})),n.d(t,"CLIENT_TOOL_NAME",(function(){return Se})),n.d(t,"DEFAULT_FONT",(function(){return be})),n.d(t,"DEFAULT_TEXT_MAX_WIDTH",(function(){return pe})),n.d(t,"EAnnotationMode",(function(){return W})),n.d(t,"EAuditStatus",(function(){return re})),n.d(t,"ECheckModel",(function(){return N})),n.d(t,"EDependPattern",(function(){return V})),n.d(t,"EDragTarget",(function(){return ee})),n.d(t,"EDrawPointPattern",(function(){return ne})),n.d(t,"EFilterToolOperation",(function(){return Z})),n.d(t,"ELineColor",(function(){return J})),n.d(t,"ELineTypes",(function(){return Y})),n.d(t,"EOperationMode",(function(){return xe})),n.d(t,"EPageOperator",(function(){return oe})),n.d(t,"EPointCloudName",(function(){return L})),n.d(t,"EPolygonPattern",(function(){return me})),n.d(t,"ERectPattern",(function(){return R})),n.d(t,"EScribblePattern",(function(){return Ce})),n.d(t,"ESelectedType",(function(){return q})),n.d(t,"ETextType",(function(){return ce})),n.d(t,"EThumbnailOption",(function(){return de})),n.d(t,"EToolName",(function(){return D})),n.d(t,"EToolType",(function(){return T})),n.d(t,"EVideoToolName",(function(){return A})),n.d(t,"OPERATION_LIST",(function(){return ue})),n.d(t,"SEGMENT_NUMBER",(function(){return Pe})),n.d(t,"TEXT_ATTRIBUTE_LINE_HEIGHT",(function(){return ve})),n.d(t,"TEXT_ATTRIBUTE_MAX_LENGTH",(function(){return fe})),n.d(t,"TEXT_TYPE",(function(){return ge})),n.d(t,"TOOL_NAME",(function(){return U})),n.d(t,"TOOL_NAME_EN",(function(){return G})),n.d(t,"edgeAdsorptionScope",(function(){return Le})),n.d(t,"editStepWidth",(function(){return H})),n.d(t,"TagUtils",(function(){return ta})),n.d(t,"uuid",(function(){return bo})),n.d(t,"MarkerUtils",(function(){return po})),n.d(t,"RectUtils",(function(){return ui})),n.d(t,"AxisUtils",(function(){return Tn})),n.d(t,"DrawUtils",(function(){return vo})),n.d(t,"ImgUtils",(function(){return wl})),n.d(t,"MathUtils",(function(){return ei})),n.d(t,"AttributeUtils",(function(){return qi})),n.d(t,"ActionsHistory",(function(){return yo})),n.d(t,"DblClickEventListener",(function(){return Co})),n.d(t,"AnnotationEngine",(function(){return Bl})),n.d(t,"UnitUtils",(function(){return to})),n.d(t,"StyleUtils",(function(){return ia})),n.d(t,"CanvasScheduler",(function(){return jl})),n.d(t,"PointCloud",(function(){return Ec})),n.d(t,"createThreeMatrix4",(function(){return ar})),n.d(t,"getCuboidFromPointCloudBox",(function(){return sr})),n.d(t,"getHighlightIndexByPoints",(function(){return vr})),n.d(t,"isInImage",(function(){return fr})),n.d(t,"lidar2image",(function(){return cr})),n.d(t,"mergeHighlightList",(function(){return pr})),n.d(t,"point2dTo3D",(function(){return gr})),n.d(t,"point3DLidar2Image",(function(){return hr})),n.d(t,"pointCloudLidar2image",(function(){return br})),n.d(t,"rotatePoint",(function(){return lr})),n.d(t,"transferKitti2Matrix",(function(){return rr})),n.d(t,"PointCloudAnnotation",(function(){return Zc})),n.d(t,"CommonToolUtils",(function(){return zc})),n.d(t,"toolUtils",(function(){return Uc}));var i={};n.r(i),n.d(i,"CLIENT_TOOL_HEAD_TYPE",(function(){return ke})),n.d(i,"CLIENT_TOOL_NAME",(function(){return Se})),n.d(i,"DEFAULT_FONT",(function(){return be})),n.d(i,"DEFAULT_TEXT_MAX_WIDTH",(function(){return pe})),n.d(i,"EAnnotationMode",(function(){return W})),n.d(i,"EAuditStatus",(function(){return re})),n.d(i,"ECheckModel",(function(){return N})),n.d(i,"EDependPattern",(function(){return V})),n.d(i,"EDragTarget",(function(){return ee})),n.d(i,"EDrawPointPattern",(function(){return ne})),n.d(i,"EFilterToolOperation",(function(){return Z})),n.d(i,"ELineColor",(function(){return J})),n.d(i,"ELineTypes",(function(){return Y})),n.d(i,"EOperationMode",(function(){return xe})),n.d(i,"EPageOperator",(function(){return oe})),n.d(i,"EPointCloudName",(function(){return L})),n.d(i,"EPolygonPattern",(function(){return me})),n.d(i,"ERectPattern",(function(){return R})),n.d(i,"EScribblePattern",(function(){return Ce})),n.d(i,"ESelectedType",(function(){return q})),n.d(i,"ETextType",(function(){return ce})),n.d(i,"EThumbnailOption",(function(){return de})),n.d(i,"EToolName",(function(){return D})),n.d(i,"EToolType",(function(){return T})),n.d(i,"EVideoToolName",(function(){return A})),n.d(i,"OPERATION_LIST",(function(){return ue})),n.d(i,"SEGMENT_NUMBER",(function(){return Pe})),n.d(i,"TEXT_ATTRIBUTE_LINE_HEIGHT",(function(){return ve})),n.d(i,"TEXT_ATTRIBUTE_MAX_LENGTH",(function(){return fe})),n.d(i,"TEXT_TYPE",(function(){return ge})),n.d(i,"TOOL_NAME",(function(){return U})),n.d(i,"TOOL_NAME_EN",(function(){return G})),n.d(i,"edgeAdsorptionScope",(function(){return Le})),n.d(i,"editStepWidth",(function(){return H}));var o={};n.r(o),n.d(o,"ANNOTATION_MAX_SIZE",(function(){return lt})),n.d(o,"CUBOID_COLUMN",(function(){return It})),n.d(o,"CUBOID_ROW",(function(){return Ct})),n.d(o,"DEFAULT_TEXT_OFFSET",(function(){return ft})),n.d(o,"DEFAULT_TEXT_SHADOW",(function(){return vt})),n.d(o,"DIAGONAL_POINT",(function(){return yt})),n.d(o,"ECuboidDirection",(function(){return ht})),n.d(o,"ECuboidLineDirection",(function(){return bt})),n.d(o,"ECuboidPlain",(function(){return ct})),n.d(o,"ECuboidPosition",(function(){return ut})),n.d(o,"EDragStatus",(function(){return Je})),n.d(o,"EDragTarget",(function(){return qe})),n.d(o,"EGrowthMode",(function(){return tt})),n.d(o,"ELang",(function(){return it})),n.d(o,"EPageOperator",(function(){return Xe})),n.d(o,"ERotateDirection",(function(){return at})),n.d(o,"ESortDirection",(function(){return $e})),n.d(o,"EStepType",(function(){return ze})),n.d(o,"TEXT_ATTRIBUTE_OFFSET",(function(){return pt})),n.d(o,"footerHeight",(function(){return Ke})),n.d(o,"headerHeight",(function(){return Ge})),n.d(o,"sidebarWidth",(function(){return Ye})),n.d(o,"tipsHeight",(function(){return We}));var a={};n.r(a),n.d(a,"default",(function(){return fi}));var r={};n.r(r),n.d(r,"INVALID_ICON",(function(){return xi})),n.d(r,"BASE_ICON",(function(){return ji})),n.d(r,"COLORS_ARRAY",(function(){return Ri})),n.d(r,"EDIT_STEP_WIDTH",(function(){return Mi})),n.d(r,"FILTER_TOOL_COLOR",(function(){return Fi})),n.d(r,"FOOTER_HEIGHT",(function(){return Ei})),n.d(r,"HEADER_HEIGHT",(function(){return ki})),n.d(r,"ICON_ARRAY",(function(){return Bi})),n.d(r,"INVALID_COLOR",(function(){return _i})),n.d(r,"INVALID_COLOR_RGBA",(function(){return Hi})),n.d(r,"NULL_COLOR",(function(){return Vi})),n.d(r,"NULL_ICON",(function(){return wi})),n.d(r,"PADDING",(function(){return Li})),n.d(r,"PAGINATION_HEIGHT",(function(){return Oi})),n.d(r,"SEARCH_HEIGHT",(function(){return Pi})),n.d(r,"SIDERBAR_WIDTH",(function(){return Di})),n.d(r,"TABLE_ROW_HEIGHT",(function(){return Ai})),n.d(r,"TAB_HEIGHT",(function(){return Si})),n.d(r,"THEME_COLOR",(function(){return Ni})),n.d(r,"TIPS_HEIGHT",(function(){return Ti})),n.d(r,"styleString",(function(){return Zi}));var l={};n.r(l),n.d(l,"ANNOTATION_STATUS",(function(){return Jr})),n.d(l,"ANNOTATION_TYPE",(function(){return Xr})),n.d(l,"EAnnotationStatus",(function(){return mr}));var c=n(15),s=n(22),u=n(7),d=n(8),h=n(21),g=n(13),f=n(12),v=n(9),p=n(10),b=n(23),m=n(31),y=n.n(m),C=n(94);function I(e,t,n){var i=void 0===t?null:t,o=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),o=0,a=n.length;o<a;++o)i[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),a=o.indexOf("\n",10)+1,r=o.substring(a)+(i?"//# sourceMappingURL="+i:""),l=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(l)}function x(e,t,n){var i;return function(o){return i=i||I(e,t,n),new Worker(i,o)}}var w,k,S,P,L,A,O,T,E,D,M,N,R,B,j=x("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgdmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTsKICB2YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CiAgdmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7CiAgdmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7CiAgdmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHtlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZX0pIDogb2JqW2tleV0gPSB2YWx1ZTsKICB2YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4gewogICAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKQogICAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoYiwgcHJvcCkpCiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pOwogICAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpCiAgICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhiKSkgewogICAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSkKICAgICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTsKICAgICAgfQogICAgcmV0dXJuIGE7CiAgfTsKICBjbGFzcyBDb21tb25Ub29sVXRpbHMgewogICAgc3RhdGljIGZpbmRBbGxMaW5lKHBvaW50TGlzdCwgaXNDbG9zZSA9IHRydWUpIHsKICAgICAgY29uc3QgYXJyID0gW107CiAgICAgIGNvbnN0IG5ld1BvaW50ID0gWy4uLnBvaW50TGlzdF07CiAgICAgIGlmIChuZXdQb2ludC5sZW5ndGggPj0gMyAmJiBpc0Nsb3NlID09PSB0cnVlKSB7CiAgICAgICAgbmV3UG9pbnQucHVzaChfX3NwcmVhZFZhbHVlcyh7fSwgbmV3UG9pbnRbMF0pKTsKICAgICAgfQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1BvaW50Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKG5ld1BvaW50W2kgKyAxXSkgewogICAgICAgICAgYXJyLnB1c2goewogICAgICAgICAgICBwb2ludDE6IG5ld1BvaW50W2ldLAogICAgICAgICAgICBwb2ludDI6IG5ld1BvaW50W2kgKyAxXSwKICAgICAgICAgICAgcG9pbnRJbmRleDogaQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBhcnI7CiAgICB9CiAgfQogIGNsYXNzIE1hdGhVdGlscyB7CiAgICBzdGF0aWMgaXNJblJhbmdlKHZhbHVlLCByYW5nZSkgewogICAgICBjb25zdCBtaW4gPSBNYXRoLm1pbiguLi5yYW5nZSk7CiAgICAgIGNvbnN0IG1heCA9IE1hdGgubWF4KC4uLnJhbmdlKTsKICAgICAgY29uc3QgaW5SYW5nZSA9ICh2KSA9PiB2IDw9IG1heCAmJiB2ID49IG1pbjsKICAgICAgY29uc3QgdmFsdWVzID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07CiAgICAgIHJldHVybiB2YWx1ZXMuZXZlcnkoKHYpID0+IGluUmFuZ2UodikpOwogICAgfQogICAgc3RhdGljIGdldExpbmVMZW5ndGgocG9pbnQxLCBwb2ludDIpIHsKICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhwb2ludDIueSAtIHBvaW50MS55LCAyKSArIE1hdGgucG93KHBvaW50Mi54IC0gcG9pbnQxLngsIDIpKTsKICAgIH0KICAgIHN0YXRpYyBpc091dE9mUmFuZ2UoY29vcmRpbmF0ZSwgcG9pbnQxLCBwb2ludDIsIHJhbmdlKSB7CiAgICAgIGNvbnN0IHgxID0gcG9pbnQxLnggLSBjb29yZGluYXRlLng7CiAgICAgIGNvbnN0IHgyID0gcG9pbnQyLnggLSBjb29yZGluYXRlLng7CiAgICAgIGNvbnN0IHkxID0gcG9pbnQxLnkgLSBjb29yZGluYXRlLnk7CiAgICAgIGNvbnN0IHkyID0gcG9pbnQyLnkgLSBjb29yZGluYXRlLnk7CiAgICAgIGNvbnN0IHNhbWVTaWRlWCA9IHgxID49IDAgJiYgeDIgPj0gMCB8fCB4MSA8PSAwICYmIHgyIDw9IDA7CiAgICAgIGNvbnN0IHNhbWVTaWRlWSA9IHkxID49IDAgJiYgeTIgPj0gMCB8fCB5MSA8PSAwICYmIHkyIDw9IDA7CiAgICAgIHJldHVybiB4MSA+IHJhbmdlICYmIHgyID4gcmFuZ2UgJiYgc2FtZVNpZGVYIHx8IHkxID4gcmFuZ2UgJiYgeTIgPiByYW5nZSAmJiBzYW1lU2lkZVk7CiAgICB9CiAgICBzdGF0aWMgY3Jvc3ModmVjdG9yMSwgdmVjdG9yMikgewogICAgICByZXR1cm4gdmVjdG9yMS54ICogdmVjdG9yMi55IC0gdmVjdG9yMi54ICogdmVjdG9yMS55OwogICAgfQogICAgc3RhdGljIGdldEZvb3RPZlBlcnBlbmRpY3VsYXIocHQsIGJlZ2luLCBlbmQsIHVzZUF4aXNSYW5nZSA9IGZhbHNlKSB7CiAgICAgIGxldCByZXRWYWwgPSB7eDogMCwgeTogMH07CiAgICAgIGNvbnN0IGR4ID0gYmVnaW4ueCAtIGVuZC54OwogICAgICBjb25zdCBkeSA9IGJlZ2luLnkgLSBlbmQueTsKICAgICAgaWYgKE1hdGguYWJzKGR4KSA8IDFlLTggJiYgTWF0aC5hYnMoZHkpIDwgMWUtOCkgewogICAgICAgIHJldFZhbCA9IGJlZ2luOwogICAgICAgIHJldHVybiByZXRWYWw7CiAgICAgIH0KICAgICAgbGV0IHUgPSAocHQueCAtIGJlZ2luLngpICogKGJlZ2luLnggLSBlbmQueCkgKyAocHQueSAtIGJlZ2luLnkpICogKGJlZ2luLnkgLSBlbmQueSk7CiAgICAgIHUgLz0gZHggKiBkeCArIGR5ICogZHk7CiAgICAgIHJldFZhbC54ID0gYmVnaW4ueCArIHUgKiBkeDsKICAgICAgcmV0VmFsLnkgPSBiZWdpbi55ICsgdSAqIGR5OwogICAgICBjb25zdCBsZW5ndGggPSB0aGlzLmdldExpbmVMZW5ndGgocHQsIHJldFZhbCk7CiAgICAgIGNvbnN0IHJhdGlvID0gMjsKICAgICAgaWYgKGxlbmd0aCA+IDIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZm9vdFBvaW50OiByZXRWYWwsCiAgICAgICAgICBsZW5ndGg6IEluZmluaXR5CiAgICAgICAgfTsKICAgICAgfQogICAgICBjb25zdCBmcm9tWCA9IE1hdGgubWluKGJlZ2luLngsIGVuZC54KTsKICAgICAgY29uc3QgdG9YID0gTWF0aC5tYXgoYmVnaW4ueCwgZW5kLngpOwogICAgICBjb25zdCBmcm9tWSA9IE1hdGgubWluKGJlZ2luLnksIGVuZC55KTsKICAgICAgY29uc3QgdG9ZID0gTWF0aC5tYXgoYmVnaW4ueSwgZW5kLnkpOwogICAgICBjb25zdCBhbGxBeGlzT3ZlclJhbmdlID0gISh0aGlzLmlzSW5SYW5nZShwdC54LCBbZnJvbVgsIHRvWF0pIHx8IHRoaXMuaXNJblJhbmdlKHB0LnksIFtmcm9tWSwgdG9ZXSkpOwogICAgICBjb25zdCBzb21lQXhpc092ZXJSYW5nZSA9IHB0LnggPiB0b1ggKyByYXRpbyB8fCBwdC54IDwgZnJvbVggLSByYXRpbyB8fCBwdC55ID4gdG9ZICsgcmF0aW8gfHwgcHQueSA8IGZyb21ZIC0gcmF0aW87CiAgICAgIGNvbnN0IGlzT3ZlclJhbmdlID0gdXNlQXhpc1JhbmdlID8gYWxsQXhpc092ZXJSYW5nZSA6IHNvbWVBeGlzT3ZlclJhbmdlOwogICAgICBpZiAoaXNPdmVyUmFuZ2UpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZm9vdFBvaW50OiByZXRWYWwsCiAgICAgICAgICBsZW5ndGg6IEluZmluaXR5CiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIGZvb3RQb2ludDogcmV0VmFsLAogICAgICAgIGxlbmd0aAogICAgICB9OwogICAgfQogIH0KICBmdW5jdGlvbiBnZXRDbG9zZXN0UG9pbnQoY29vcmRpbmF0ZSwgcG9seWdvbkxpc3QsIGxpbmVUeXBlID0gMCwgcmFuZ2UgPSAzLCBvcHRpb24pIHsKICAgIGxldCBoYXNDbG9zZWQgPSBmYWxzZTsKICAgIGNvbnN0IGlzQ2xvc2UgPSBvcHRpb24gPyBvcHRpb24uaXNDbG9zZSB8fCB0cnVlIDogZmFsc2U7CiAgICBsZXQgY2xvc2VzdFBvbHlnb25JRCA9ICIiOwogICAgbGV0IGNsb3Nlc3RFZGdlSW5kZXggPSAtMTsKICAgIGxldCBtaW4gPSBJbmZpbml0eTsKICAgIGxldCBkcm9wRm9vdCA9IGNvb3JkaW5hdGU7CiAgICBjb25zdCBudW1iZXJPZlNlZ21lbnRzID0gMjA7CiAgICBsZXQgaXNDbG9zZU5vZGUgPSBmYWxzZTsKICAgIHBvbHlnb25MaXN0LmZvckVhY2goKHYpID0+IHsKICAgICAgaWYgKGlzQ2xvc2VOb2RlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghdi5wb2ludExpc3QpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc3dpdGNoIChsaW5lVHlwZSkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHsKICAgICAgICAgICAgY29uc3QgYWxsTGluZSA9IENvbW1vblRvb2xVdGlscy5maW5kQWxsTGluZSh2LnBvaW50TGlzdCwgaXNDbG9zZSk7CiAgICAgICAgICAgIGFsbExpbmUuZm9yRWFjaCgobGluZSwgbGluZUluZGV4KSA9PiB7CiAgICAgICAgICAgICAgaWYgKGlzQ2xvc2VOb2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNvbnN0IHR3b1BvaW50RGlzdGFuY2UxID0gTWF0aFV0aWxzLmdldExpbmVMZW5ndGgobGluZS5wb2ludDEsIGNvb3JkaW5hdGUpOwogICAgICAgICAgICAgIGNvbnN0IHR3b1BvaW50RGlzdGFuY2UyID0gTWF0aFV0aWxzLmdldExpbmVMZW5ndGgobGluZS5wb2ludDIsIGNvb3JkaW5hdGUpOwogICAgICAgICAgICAgIGlmIChNYXRoVXRpbHMuaXNPdXRPZlJhbmdlKGNvb3JkaW5hdGUsIGxpbmUucG9pbnQxLCBsaW5lLnBvaW50MiwgcmFuZ2UpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCB7bGVuZ3RoLCBmb290UG9pbnR9ID0gTWF0aFV0aWxzLmdldEZvb3RPZlBlcnBlbmRpY3VsYXIoY29vcmRpbmF0ZSwgbGluZS5wb2ludDEsIGxpbmUucG9pbnQyKTsKICAgICAgICAgICAgICBpZiAodHdvUG9pbnREaXN0YW5jZTEgPCByYW5nZSAqIDIpIHsKICAgICAgICAgICAgICAgIGZvb3RQb2ludCA9IGxpbmUucG9pbnQxOwogICAgICAgICAgICAgICAgbGVuZ3RoID0gdHdvUG9pbnREaXN0YW5jZTE7CiAgICAgICAgICAgICAgICBpc0Nsb3NlTm9kZSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0d29Qb2ludERpc3RhbmNlMiA8IHJhbmdlICogMikgewogICAgICAgICAgICAgICAgZm9vdFBvaW50ID0gbGluZS5wb2ludDI7CiAgICAgICAgICAgICAgICBsZW5ndGggPSB0d29Qb2ludERpc3RhbmNlMjsKICAgICAgICAgICAgICAgIGlzQ2xvc2VOb2RlID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGxlbmd0aCA8IG1pbiAmJiBsZW5ndGggPCByYW5nZSkgewogICAgICAgICAgICAgICAgY2xvc2VzdFBvbHlnb25JRCA9IHYuaWQ7CiAgICAgICAgICAgICAgICBjbG9zZXN0RWRnZUluZGV4ID0gbGluZUluZGV4OwogICAgICAgICAgICAgICAgbWluID0gbGVuZ3RoOwogICAgICAgICAgICAgICAgZHJvcEZvb3QgPSBmb290UG9pbnQ7CiAgICAgICAgICAgICAgICBoYXNDbG9zZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbnN0IHBvaW50cyA9IHRoaXMuY3JlYXRlU21vb3RoQ3VydmVQb2ludHModi5wb2ludExpc3QucmVkdWNlKChhY2MsIGN1cikgPT4gewogICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCBjdXIueCwgY3VyLnldOwogICAgICAgICAgICB9LCBbXSksIDAuNSwgaXNDbG9zZSwgbnVtYmVyT2ZTZWdtZW50cyk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgICAgICAgIGNvbnN0IHtsZW5ndGgsIGZvb3RQb2ludH0gPSBNYXRoVXRpbHMuZ2V0Rm9vdE9mUGVycGVuZGljdWxhcihjb29yZGluYXRlLCBwb2ludHNbaV0sIHBvaW50c1tpICsgMV0pOwogICAgICAgICAgICAgIGlmIChsZW5ndGggPCBtaW4gJiYgbGVuZ3RoIDwgcmFuZ2UpIHsKICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2x5Z29uSUQgPSB2LmlkOwogICAgICAgICAgICAgICAgY2xvc2VzdEVkZ2VJbmRleCA9IE1hdGguZmxvb3IoaSAvIChudW1iZXJPZlNlZ21lbnRzICsgMSkpOwogICAgICAgICAgICAgICAgbWluID0gbGVuZ3RoOwogICAgICAgICAgICAgICAgZHJvcEZvb3QgPSBmb290UG9pbnQ7CiAgICAgICAgICAgICAgICBoYXNDbG9zZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHtkcm9wRm9vdCwgY2xvc2VzdEVkZ2VJbmRleCwgY2xvc2VzdFBvbHlnb25JRCwgaGFzQ2xvc2VkfTsKICB9CiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlMihlKSB7CiAgICBjb25zdCB7cG9pbnRzLCBiYWNrZ3JvdW5kTGlzdH0gPSBlLmRhdGE7CiAgICBjb25zdCBjb25uZWN0aW9uUG9pbnRzID0gW107CiAgICBjb25zdCBjYWNoZVNldCA9IG5ldyBTZXQoKTsKICAgIHRyeSB7CiAgICAgIGNvbnN0IGp1ZGdlSXNDb25uZWN0UG9pbnQgPSAocG9pbnQsIHBvbHlnb25MaXN0KSA9PiB7CiAgICAgICAgY29uc3Qge2Ryb3BGb290fSA9IGdldENsb3Nlc3RQb2ludChwb2ludCwgcG9seWdvbkxpc3QsIDAsIDEsIHtpc0Nsb3NlOiBmYWxzZX0pOwogICAgICAgIGlmIChkcm9wRm9vdCAhPT0gcG9pbnQpIHsKICAgICAgICAgIGNvbnN0IHMgPSBgJHtkcm9wRm9vdC54fSArICR7ZHJvcEZvb3QueX1gOwogICAgICAgICAgaWYgKCFjYWNoZVNldC5oYXMocykpIHsKICAgICAgICAgICAgY29ubmVjdGlvblBvaW50cy5wdXNoKHBvaW50KTsKICAgICAgICAgIH0KICAgICAgICAgIGNhY2hlU2V0LmFkZChzKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIHBvaW50c0NhbGMocG9pbnQpIHsKICAgICAgICBqdWRnZUlzQ29ubmVjdFBvaW50KHBvaW50LCBiYWNrZ3JvdW5kTGlzdCk7CiAgICAgIH0pOwogICAgICBiYWNrZ3JvdW5kTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGJhY2tncm91bmRzQ2FsYyh2KSB7CiAgICAgICAgbGV0IHRyYXZlcnNlSUQgPSAiIjsKICAgICAgICB0cmF2ZXJzZUlEID0gdi5pZDsKICAgICAgICBiYWNrZ3JvdW5kTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGJhY2tncm91bmQyQ2FsYyhhbm5vdGF0aW9uLCBpKSB7CiAgICAgICAgICBpZiAoYW5ub3RhdGlvbi5pZCA9PT0gdHJhdmVyc2VJRCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBuZXdQb2x5Z29uTGlzdCA9IFsuLi5iYWNrZ3JvdW5kTGlzdF07CiAgICAgICAgICBuZXdQb2x5Z29uTGlzdC5zcGxpY2UoaSwgMSk7CiAgICAgICAgICBhbm5vdGF0aW9uLnBvaW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGJhY2tncm91bmRQb2ludHNDYWxjKHBvaW50KSB7CiAgICAgICAgICAgIGp1ZGdlSXNDb25uZWN0UG9pbnQocG9pbnQsIG5ld1BvbHlnb25MaXN0KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcG9zdE1lc3NhZ2Uoe2Nvbm5lY3Rpb25Qb2ludHN9KTsKICAgIH0gY2F0Y2ggKEUpIHsKICAgICAgY29uc29sZS5lcnJvcihFKTsKICAgICAgcG9zdE1lc3NhZ2Uoe2Nvbm5lY3Rpb25Qb2ludHM6IFtdfSk7CiAgICB9CiAgfTsKCn0pKCk7Cgo=",null,!1),_=n(14),H=320;(L||(L={})).PointCloud="pointCloudTool",(O=A||(A={})).VideoTextTool="videoTextTool",O.VideoTagTool="videoTagTool",O.VideoClipTool="videoClipTool",(E=T||(T={}))[E.Rect=0]="Rect",E[E.Tag=1]="Tag",(M=D||(D={})).Rect="rectTool",M.Tag="tagTool",M.Point="pointTool",M.PointMarker="pointMarkerTool",M.Segmentation="segmentationTool",M.Filter="filterTool",M.Text="textTool",M.Polygon="polygonTool",M.Line="lineTool",M.LineMarker="lineMarkerTool",M.Empty="emptyTool",M.FolderTag="folderTagTool",M.RectTrack="rectTrackTool",M.ScribbleTool="scribbleTool",M.Face="faceTool",M.ClientAttribute="clientAttributeTool",M.OCRRelation="OCRRelationTool",M.SegmentByRect="segmentByRectTool",M.Cuboid="cuboidTool",M.PointCloudPolygon="pointCloudPolygon",M.LLM="LLMTool",(N||(N={})).Check="check",(B=R||(R={}))[B.nothing=0]="nothing",B[B.RectBG=1]="RectBG",B[B.showOrder=2]="showOrder";var V,F,Z,z,U=(w={},Object(_.a)(w,D.Rect,"\u62c9\u6846"),Object(_.a)(w,D.Tag,"\u6807\u7b7e"),Object(_.a)(w,D.Point,"\u6807\u70b9"),Object(_.a)(w,D.PointMarker,"\u5217\u8868\u6807\u70b9"),Object(_.a)(w,D.Segmentation,"\u524d\u666f\u5206\u5272"),Object(_.a)(w,D.Filter,"\u7b5b\u9009"),Object(_.a)(w,D.Text,"\u6587\u672c"),Object(_.a)(w,D.Polygon,"\u591a\u8fb9\u5f62"),Object(_.a)(w,D.Line,"\u7ebf\u6761"),Object(_.a)(w,D.LineMarker,"\u5217\u8868\u7ebf\u6761"),Object(_.a)(w,D.FolderTag,"\u6587\u4ef6\u5939\u6807\u7b7e"),Object(_.a)(w,D.RectTrack,"\u62c9\u6846\u8ddf\u8e2a"),Object(_.a)(w,D.Face,"\u4eba\u8138106\u5de5\u5177"),Object(_.a)(w,D.ClientAttribute,"\u5ba2\u6237\u7aef\u5c5e\u6027\u5de5\u5177"),Object(_.a)(w,D.OCRRelation,"OCR\u5173\u8054\u5173\u7cfb\u5de5\u5177"),Object(_.a)(w,D.SegmentByRect,"\u7b97\u6cd5\u5206\u5272\u8f85\u52a9\u5de5\u5177"),Object(_.a)(w,A.VideoTextTool,"\u89c6\u9891\u6587\u672c"),Object(_.a)(w,A.VideoTagTool,"\u89c6\u9891\u6807\u7b7e"),Object(_.a)(w,A.VideoClipTool,"\u89c6\u9891\u622a\u53d6"),Object(_.a)(w,L.PointCloud,"\u70b9\u4e91"),Object(_.a)(w,D.Cuboid,"\u7acb\u4f53\u6846"),Object(_.a)(w,D.LLM,"LLM\u6807\u6ce8"),w),G=(k={},Object(_.a)(k,D.Rect,"Rect"),Object(_.a)(k,D.Tag,"Tag"),Object(_.a)(k,D.Point,"Point"),Object(_.a)(k,D.PointMarker,"PointMarker"),Object(_.a)(k,D.Segmentation,"Segmentation"),Object(_.a)(k,D.Filter,"Filter"),Object(_.a)(k,D.Text,"Text"),Object(_.a)(k,D.Polygon,"Polygon"),Object(_.a)(k,D.Line,"Line"),Object(_.a)(k,D.LineMarker,"LineMarker"),Object(_.a)(k,D.FolderTag,"FolderTag"),Object(_.a)(k,D.RectTrack,"RectTrack"),Object(_.a)(k,D.Face,"Face"),Object(_.a)(k,D.ClientAttribute,"ClientAttribute"),Object(_.a)(k,D.OCRRelation,"OCRRelation"),Object(_.a)(k,D.SegmentByRect,"SegmentByRect"),Object(_.a)(k,A.VideoTextTool,"VideoTextTool"),Object(_.a)(k,A.VideoTagTool,"VideoTagTool"),Object(_.a)(k,A.VideoClipTool,"VideoClipTool"),Object(_.a)(k,L.PointCloud,"PointCloud"),Object(_.a)(k,D.Cuboid,"Cuboid"),Object(_.a)(k,D.LLM,"LLM"),k);(F=V||(V={}))[F.noDepend=1]="noDepend",F[F.dependOrigin=2]="dependOrigin",F[F.dependShape=3]="dependShape",F[F.dependLine=4]="dependLine",F[F.dependPolygon=5]="dependPolygon",F[F.dependPreShape=101]="dependPreShape",F[F.dependPreLine=102]="dependPreLine",F[F.dependPrePolygon=103]="dependPrePolygon",(z=Z||(Z={})).lc="leftClick",z.rc="rightClick",z.clc="ctrlLeftClick",z.crc="ctrlRightClick";var W,K,Y,X,J,Q,q,$,ee,te,ne,ie,oe,ae,re,le,ce,se,ue={leftClick:"\u9f20\u6807\u5de6\u952e",rightClick:"\u9f20\u6807\u53f3\u952e",ctrlLeftClick:"ctrl + \u9f20\u6807\u5de6\u952e",ctrlRightClick:"ctrl + \u9f20\u6807\u53f3\u952e"};(K=W||(W={}))[K.Normal=1]="Normal",K[K.Modify=2]="Modify",(X=Y||(Y={}))[X.Line=0]="Line",X[X.Curve=1]="Curve",(Q=J||(J={}))[Q.SingleColor=0]="SingleColor",Q[Q.MultiColor=1]="MultiColor",($=q||(q={}))[$.Form=1]="Form",$[$.Json=2]="Json",(te=ee||(ee={}))[te.Point=0]="Point",te[te.Line=1]="Line",te[te.Plane=2]="Plane",(ie=ne||(ne={}))[ie.None=0]="None",ie[ie.Drawing=1]="Drawing",ie[ie.Edit=2]="Edit",(ae=oe||(oe={}))[ae.Backward=0]="Backward",ae[ae.Forward=1]="Forward",ae[ae.JumpSkip=2]="JumpSkip",ae[ae.None=3]="None",(le=re||(re={}))[le.Wait=0]="Wait",le[le.Pass=1]="Pass",le[le.Fail=2]="Fail",le[le.Loading=3]="Loading",(se=ce||(ce={}))[se.AnyString=0]="AnyString",se[se.Order=1]="Order",se[se.EnglishOnly=2]="EnglishOnly",se[se.NumberOnly=3]="NumberOnly",se[se.CustomFormat=4]="CustomFormat";var de,he,ge={0:"\u4efb\u610f\u5b57\u7b26",1:"\u5e8f\u53f7",2:"\u4ec5\u82f1\u6587",3:"\u4ec5\u6570\u5b57"},fe=1e3,ve=16,pe=300,be="normal normal 500 14px Arial";(he=de||(de={}))[he.ImgList=1e3]="ImgList",he[he.TrackPrediction=1001]="TrackPrediction",he[he.ImgSearch=1002]="ImgSearch";var me,ye,Ce,Ie,xe,we,ke=(S={},Object(_.a)(S,L.PointCloud,"sensebeepc"),Object(_.a)(S,D.ClientAttribute,"sensebeepc-EnumAttributeTool"),Object(_.a)(S,D.Face,"sensebeepc-FacePointsLabellingTool"),Object(_.a)(S,D.OCRRelation,"sensebeepc-OCRRelationTool"),S),Se=(P={},Object(_.a)(P,L.PointCloud,"\u70b9\u4e91\u5ba2\u6237\u7aef"),Object(_.a)(P,D.ClientAttribute,"\u5ba2\u6237\u7aef\u5c5e\u6027\u5de5\u5177"),Object(_.a)(P,D.Face,"\u4eba\u8138106\u70b9\u5de5\u5177"),Object(_.a)(P,D.OCRRelation,"OCR\u5173\u8054\u5173\u7cfb\u5de5\u5177"),P),Pe=16,Le=10;(ye=me||(me={}))[ye.Normal=0]="Normal",ye[ye.Rect=1]="Rect",(Ie=Ce||(Ce={}))[Ie.Scribble=1]="Scribble",Ie[Ie.Erase=2]="Erase",(we=xe||(xe={}))[we.General=1]="General",we[we.MultiMove=2]="MultiMove";var Ae=Object.defineProperty,Oe=Object.defineProperties,Te=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,Ne=function(e,t,n){return t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Re=function(e,t){for(var n in t||(t={}))De.call(t,n)&&Ne(e,n,t[n]);if(Ee){var i,o=Object(b.a)(Ee(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Me.call(t,n)&&Ne(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},Be=function(e,t){return Oe(e,Te(t))};function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16;if(e.length<4)return e;var o,a,r,l,c,s,u,d,h,g,f,v,p,b=[],m=e.slice(0);for(n?(m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.push(e[0]),m.push(e[1])):(m.unshift(e[1]),m.unshift(e[0]),m.push(e[e.length-2]),m.push(e[e.length-1])),p=2;p<m.length-4;p+=2)for(r=(m[p+2]-m[p-2])*t,l=(m[p+4]-m[p-0])*t,c=(m[p+3]-m[p-1])*t,s=(m[p+5]-m[p+1])*t,v=0;v<=i;v++)f=v/i,u=2*Math.pow(f,3)-3*Math.pow(f,2)+1,d=-2*Math.pow(f,3)+3*Math.pow(f,2),h=Math.pow(f,3)-2*Math.pow(f,2)+f,g=Math.pow(f,3)-Math.pow(f,2),o=u*m[p]+d*m[p+2]+h*r+g*l,a=u*m[p+1]+d*m[p+3]+h*c+g*s,b.push(o),b.push(a);for(var y=[],C=0;C<b.length-1;C+=2)y.push({x:b[C],y:b[C+1]});if(n)for(var I=0;I<i+1;I++){var x=y.shift();y.push(x)}return y}var _e,He,Ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return je(e.reduce((function(e,t){return[].concat(Object(c.a)(e),[t.x,t.y])}),[]),.5,!1,t)};function Fe(e,t){var n,i,o,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.Line,l=0;t=Object(c.a)(t),r===Y.Curve&&(t=je(t.reduce((function(e,t){return[].concat(Object(c.a)(e),[t.x,t.y])}),[]),.5,!0,Pe));var u=t,d=Object(s.a)(u,1);o=d[0];var h=t.length;for(n=1;n<=h;n++)a=t[n%h],e.x>Math.min(o.x,a.x)&&e.x<=Math.max(o.x,a.x)&&e.y<=Math.max(o.y,a.y)&&o.x!==a.x&&(i=(e.x-o.x)*(a.y-o.y)/(a.x-o.x)+o.y,(o.y===a.y||e.y<=i)&&l++),o=a;return l%2!==0}function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.map((function(e){return Be(Re({},e),{x:e.x*t,y:e.y*t})}))}var ze,Ue,Ge=61,We=40,Ke=40,Ye=240;(Ue=ze||(ze={}))[Ue.ANNOTATION=1]="ANNOTATION",Ue[Ue.QUALITY_INSPECTION=2]="QUALITY_INSPECTION",Ue[Ue.PRE_ANNOTATION=3]="PRE_ANNOTATION",Ue[Ue.MANUAL_CORRECTION=4]="MANUAL_CORRECTION";var Xe,Je,Qe,qe,$e,et,tt,nt,it,ot,at,rt,lt=1e3;!function(e){e[e.Backward=0]="Backward",e[e.Forward=1]="Forward",e[e.JumpSkip=2]="JumpSkip",e[e.None=3]="None"}(Xe||(Xe={})),(Qe=Je||(Je={}))[Qe.Start=0]="Start",Qe[Qe.Stop=1]="Stop",Qe[Qe.Wait=2]="Wait",Qe[Qe.Move=3]="Move",function(e){e[e.Point=0]="Point",e[e.Line=1]="Line",e[e.Plane=2]="Plane",e[e.Cuboid=3]="Cuboid"}(qe||(qe={})),(et=$e||($e={}))[et.ascend=0]="ascend",et[et.descend=1]="descend",(nt=tt||(tt={}))[nt.Intelligence=0]="Intelligence",nt[nt.Linear=1]="Linear",(ot=it||(it={})).Zh="zh_CN",ot.US="en_US",(rt=at||(at={}))[rt.Clockwise=0]="Clockwise",rt[rt.Anticlockwise=1]="Anticlockwise";var ct,st,ut,dt,ht,gt,ft={offsetX:-10,offsetY:-10},vt={shadowColor:"rgba(0, 0, 0, 1)",shadowOffsetX:1,shadowOffsetY:1,shadowBlur:0},pt={x:8,y:26};(st=ct||(ct={})).Front="front",st.Back="back",st.Side="side",(dt=ut||(ut={})).TL="tl",dt.TR="tr",dt.BL="bl",dt.BR="br",(gt=ht||(ht={})).Front="front",gt.Back="back",gt.Left="left",gt.Right="right",gt.Top="top";var bt,mt,yt={tl:"br",tr:"bl",br:"tl",bl:"tr"};(mt=bt||(bt={})).Row="row",mt.Column="column";var Ct=(_e={},Object(_.a)(_e,ut.TL,ut.TR),Object(_.a)(_e,ut.TR,ut.TL),Object(_.a)(_e,ut.BL,ut.BR),Object(_.a)(_e,ut.BR,ut.BL),_e),It=(He={},Object(_.a)(He,ut.TL,ut.BL),Object(_.a)(He,ut.TR,ut.BR),Object(_.a)(He,ut.BL,ut.TL),Object(_.a)(He,ut.BR,ut.TR),He),xt=Object.defineProperty,wt=Object.defineProperties,kt=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,Lt=Object.prototype.propertyIsEnumerable,At=function(e,t,n){return t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ot=function(e,t){for(var n in t||(t={}))Pt.call(t,n)&&At(e,n,t[n]);if(St){var i,o=Object(b.a)(St(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Lt.call(t,n)&&At(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},Tt=function(e,t){return wt(e,kt(t))},Et=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getStepInfo",value:function(e,t){return null==t?void 0:t.filter((function(t){return t.step===e}))[0]}},{key:"getCurrentStepInfo",value:function(e,t){var n=this.getStepInfo(e,t);return!n||n.type!==ze.QUALITY_INSPECTION&&n.type!==ze.MANUAL_CORRECTION?n:this.getCurrentStepInfo(n.dataSourceStep,t)}},{key:"getMaxOrder",value:function(e){var t=0;return e.forEach((function(e){e.order&&e.order>t&&(t=e.order)})),t}},{key:"hotkeyFilter",value:function(e){var t=e.target||e.srcElement;if(!t)return!0;var n=t.tagName,i=t.type;if(!n||!i)return!0;var o=!0;return(t.isContentEditable||"TEXTAREA"===n||("INPUT"===n&&"radio"!==i||"TEXTAREA"===n)&&!t.readOnly)&&(o=!1),o}},{key:"getNextSelectedRectID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$e.ascend,n=arguments.length>2?arguments[2]:void 0,i=1;t===$e.descend&&(i=-1);var o=e.sort((function(e,t){return e.x-t.x===0?e.y-t.y:i*(e.x-t.x)})),a=o.findIndex((function(e){return e.id===n})),r=o.length;return o[(a+1)%r]}},{key:"getNextSelectedRectIDByEvent",value:function(e,t,n){var i=t.shiftKey?$e.descend:$e.ascend;return this.getNextSelectedRectID(e,i,n)}},{key:"getRenderResultList",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,a=[],r=e.filter((function(e){return o&&o.includes(e.id)?(a.push(e),!1):!(i.length>0&&!i.includes(null==e?void 0:e.attribute))&&!n.isDifferSourceID(null==e?void 0:e.sourceID,t)}));return[r,a]}},{key:"getSourceID",value:function(e){var t;return e&&null!=(t=null==e?void 0:e.id)?t:""}},{key:"findAllLine",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],i=Object(c.a)(e);i.length>=3&&!0===t&&i.push(Ot({},i[0]));for(var o=0;o<i.length;o++)i[o+1]&&n.push({point1:i[o],point2:i[o+1],pointIndex:o});return n}},{key:"translateSourceID",value:function(e){return void 0!==e&&0!==e&&"0"!==e||(e=""),e}},{key:"isDifferSourceID",value:function(e,t){return e=this.translateSourceID(e),t=this.translateSourceID(t),"".concat(e)!=="".concat(t)}},{key:"isSameSourceID",value:function(e,t){return e=this.translateSourceID(e),t=this.translateSourceID(t),"".concat(e)==="".concat(t)}},{key:"getNextMarker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(0!==(null==t?void 0:t.length)){var i=t.map((function(e,t){return Tt(Ot({},e),{index:t})}));if("number"===typeof n&&n>0){var o=t[n];if(o&&e.every((function(e){return e.label!==o.value})))return{label:o.value,index:n};i=[].concat(Object(c.a)(i.slice(n,t.length)),Object(c.a)(i.slice(0,n)))}for(var a=function(t){return e.some((function(e){return e.label===i[t].value}))?"continue":{v:{label:i[t].value,index:i[t].index}}},r=0;r<i.length;r++){var l=a(r);if("continue"!==l&&"object"===typeof l)return l.v}}}},{key:"getCurrentMarkerIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.findIndex((function(t){return e===t.value}))}}]),e}();Et.jsonParser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return"string"===typeof e?JSON.parse(e):Object(m.isObject)(e)?e:t}catch(n){return t}};var Dt,Mt,Nt,Rt=Object.defineProperty,Bt=Object.defineProperties,jt=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertySymbols,Ht=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable,Ft=function(e,t,n){return t in e?Rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Zt=function(e,t){for(var n in t||(t={}))Ht.call(t,n)&&Ft(e,n,t[n]);if(_t){var i,o=Object(b.a)(_t(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Vt.call(t,n)&&Ft(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},zt=function(e,t){return Bt(e,jt(t))};(Mt=Dt||(Dt={}))[Mt.Create=0]="Create",Mt[Mt.Active=1]="Active",Mt[Mt.Edit=1]="Edit",Mt[Mt.None=2]="None",(Nt||(Nt={})).ActiveArea="#B3B8FF";var Ut=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"lineLengthSum",value:function(e){var t=this,n=0;return e.forEach((function(i,o){o>0&&(n+=t.calcDistance(e[o-1],i))})),n}},{key:"isInLine",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=ei.getFootOfPerpendicular(e,t,n),a=o.length;return a<i}}]),e}(),Gt=Ut;Gt.setSpecialEdgeStyle=function(e){e.lineCap="butt",e.setLineDash([10,10])},Gt.setReferenceCtx=function(e){e.lineCap="butt",e.setLineDash([6])},Gt.calcOptimalIntersection=function(e,t,n,i,o){var a,r,l=1/0;return e.find((function(n,i){if(0!==i){var o=Ut.isInLine(t.pointA,n,e[i-1]),a=Ut.isInLine(t.pointB,n,e[i-1]);return o&&a}}))?{point:n}:(e.forEach((function(c,s){if(0!==s){var u={pointA:e[s-1],pointB:c},d=Ut.lineIntersection(t,u);if(d&&t){var h=d.onLine2,g=d.onLine1,f=d.x,v=d.y,p=Ut.calcDistance(n,d);if(Ut.isOnLine(t.pointB.x,t.pointB.y,c.x,c.y,e[s-1].x,e[s-1].y)){if(Ut.calcDistance(n,d)<i/o){var b=t.pointB,m=ei.getFootOfPerpendicular(b,u.pointA,u.pointB,!0),y=m.footPoint,C=m.length;if(void 0!==C){var I=Ut.calcDistance(u.pointA,y),x=Ut.calcDistance(u.pointB,y);r={point:y,minDistance:C},C===1/0&&(r.point=I>x?u.pointB:u.pointA)}}return}p<l&&h&&g&&(l=p,a={x:f,y:v})}}})),a?{point:a,minDistance:l}:r||void 0)},Gt.lineIntersection=function(e,t){var n=!1,i=!1,o=Ut.getAxisDiff(e),a=Ut.getAxisDiff(t),r=a.y*o.x-a.x*o.y;if(0===r)return!1;var l=e.pointA.y-t.pointA.y,c=e.pointA.x-t.pointA.x,s=(t.pointB.x-t.pointA.x)*l-(t.pointB.y-t.pointA.y)*c,u=(e.pointB.x-e.pointA.x)*l-(e.pointB.y-e.pointA.y)*c;return(l=s/r)>0&&l<1&&(n=!0),(c=u/r)>0&&c<1&&(i=!0),{x:e.pointA.x+l*(e.pointB.x-e.pointA.x),y:e.pointA.y+l*(e.pointB.y-e.pointA.y),onLine1:n,onLine2:i}},Gt.getAxisDiff=function(e){return{x:e.pointB.x-e.pointA.x,y:e.pointB.y-e.pointA.y}},Gt.calcDistance=function(e,t){return Math.sqrt(Math.pow(Math.abs(e.x-t.x),2)+Math.pow(Math.abs(e.y-t.y),2))},Gt.drawCurveLine=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,r=Ve(t,16);e.save(),e.lineCap="round",e.lineJoin="round",e.strokeStyle=n.color,i&&(e.lineWidth=n.lineWidth),o&&Ut.setReferenceCtx(e),t.forEach((function(t,n){var i=null==t?void 0:t.specialEdge,o=r.splice(0,17);e.save(),e.beginPath(),a===n&&(e.lineWidth=4),o.forEach((function(t,n){var o=t.x,a=t.y,r=n>0?"lineTo":"moveTo";i&&Ut.setSpecialEdgeStyle(e),e[r](o,a)})),e.stroke(),e.restore()})),e.restore()},Gt.calcTwoPointDistance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},Gt.pointOverTarget=function(e,t,n,i,o,a,r,l,c,s){var u=e;if(!t)return e;if(n===D.Polygon){var d=Ut.getPolygonPointList(i,o);if(0===d.length)return u;if(_n.isInPolygon(e,d))return u;var h=d.concat(d[0]).map((function(e){return c(e)})),g=c(t),f={pointA:g,pointB:c(e)},v=Ut.calcOptimalIntersection(h,f,g,r,l);if(!v)return t;var p=s(null==v?void 0:v.point);return u.x=p.x,u.y=p.y,u}if(n===D.Rect){var b=i.x,m=i.y,y=i.width,C=i.height;return u.x=ei.withinRange(u.x,[b,b+y]),u.y=ei.withinRange(u.y,[m,m+C]),u}return u.x=ei.withinRange(u.x,[0,a.width]),u.y=ei.withinRange(u.y,[0,a.height]),u},Gt.getPolygonPointList=function(e,t){var n=e.pointList;return t.lineType===Y.Line?n:_n.createSmoothCurvePoints(n.reduce((function(e,t){return[].concat(Object(c.a)(e),[t.x,t.y])}),[]),.5,!0,20)},Gt.isOnLine=function(e,t,n,i,o,a){return Math.abs((i-t)/(n-e)*(o-e)+t-a)<1e-6&&o>=e&&o<=n},Gt.inArea=function(e,t){var n=e.top,i=e.left,o=e.right,a=e.bottom,r=t.x,l=t.y;return l>=n&&l<=a&&r>=i&&r<=o},Gt.getVHPoint=function(e,t,n,i){var o=Ut.getAngle(e,n);return Math.abs(o)<45?zt(Zt({},t),{y:i.y}):zt(Zt({},t),{x:i.x})},Gt.getAngle=function(e,t){var n=t.x-e.x,i=t.y-e.y;return 360*Math.atan(i/n)/(2*Math.PI)};var Wt=Math.pow,Kt=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"add",value:function(e,t){return{x:e.x+t.x,y:e.y+t.y}}},{key:"getVector",value:function(e,t){return{x:t.x-e.x,y:t.y-e.y}}},{key:"len",value:function(e){return Math.sqrt(Wt(e.x,2)+Wt(e.y,2))}},{key:"dotProduct",value:function(e,t){return e.x*t.x+e.y+t.y}}]),e}(),Yt=Object.defineProperty,Xt=Object.defineProperties,Jt=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,qt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,en=function(e,t,n){return t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},tn=function(e,t){for(var n in t||(t={}))qt.call(t,n)&&en(e,n,t[n]);if(Qt){var i,o=Object(b.a)(Qt(t));try{for(o.s();!(i=o.n()).done;){n=i.value;$t.call(t,n)&&en(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},nn=function(e,t){return Xt(e,Jt(t))};function on(e){var t=e.tr,n=e.tl,i=e.br;return{width:Math.abs(t.x-n.x),height:Math.abs(i.y-t.y),centerPoints:{x:(n.x+i.x)/2,y:(n.y+i.y)/2}}}function an(e){var t=e.frontPoints,n=e.backPoints,i=on(t),o=i.width,a=i.height,r=i.centerPoints,l=on(n),c=l.width,s=l.height,u=l.centerPoints;return{frontCenter:r,backCenter:u,frontWidth:o,frontHeight:a,backWidth:c,backHeight:s,isLeftSide:u.x<r.x}}function rn(e,t){return{tl:{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y)},tr:{x:Math.max(e.x,t.x),y:Math.min(e.y,t.y)},bl:{x:Math.min(e.x,t.x),y:Math.max(e.y,t.y)},br:{x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)}}}function ln(e){var t=Object.values(e).reduce((function(e,t){return t.x<e?t.x:e}),Number.MAX_SAFE_INTEGER),n=Object.values(e).reduce((function(e,t){return t.x>e?t.x:e}),0),i=Object.values(e).reduce((function(e,t){return t.y<e?t.y:e}),Number.MAX_SAFE_INTEGER),o=Object.values(e).reduce((function(e,t){return t.y>e?t.y:e}),0);return{tl:{x:t,y:i},tr:{x:n,y:i},bl:{x:t,y:o},br:{x:n,y:o}}}function cn(e){var t=e.coord,n=on(e.points),i=n.width,o=n.height;return{br:t,tr:{x:t.x,y:t.y-o},tl:{x:t.x-i,y:t.y-o},bl:{x:t.x-i,y:t.y}}}function sn(e){var t=e.coord,n=on(e.points),i=n.width,o=n.height;return{bl:t,tr:{x:t.x+i,y:t.y-o},tl:{x:t.x,y:t.y-o},br:{x:t.x+i,y:t.y}}}function un(e){var t=e.frontPoints,n=e.backPoints,i=an({frontPoints:t,backPoints:n}).isLeftSide,o=tn({},n),a=function(e){var t=e.frontPoints,n=e.backPoints;return an({frontPoints:t,backPoints:n}).isLeftSide?{top:{p1:t.tl,p2:n.tl},bottom:{p1:t.bl,p2:n.bl}}:{top:{p1:t.tr,p2:n.tr},bottom:{p1:t.br,p2:n.br}}}({frontPoints:t,backPoints:n}),r=Gt.lineIntersection({pointA:a.bottom.p1,pointB:a.bottom.p2},{pointA:a.top.p1,pointB:a.top.p2});if(i){var l=Gt.lineIntersection({pointA:n.bl,pointB:n.br},{pointA:t.br,pointB:r});l&&(o=nn(tn({},n),{br:l,tr:{x:l.x,y:n.tl.y}}))}else{var c=Gt.lineIntersection({pointA:n.bl,pointB:n.br},{pointA:t.bl,pointB:r});c&&(o=nn(tn({},n),{bl:c,tl:{x:c.x,y:n.tr.y}}))}return{backPoints:o}}function dn(e){var t=e.frontPoints,n=e.backPoints,i=an({frontPoints:t,backPoints:n}),o=i.isLeftSide,a=i.frontHeight,r=i.backHeight,l=tn({},n);return l=o?sn({coord:n.bl,points:t}):cn({coord:n.br,points:t}),a>r&&(l=un({frontPoints:t,backPoints:n}).backPoints),{frontPoints:t,backPoints:l}}function hn(e){var t=e.frontPoints,n=e.backPoints,i=an({frontPoints:t,backPoints:n}),o=i.isLeftSide,a=i.frontHeight,r=i.backHeight,l=i.frontWidth,c=i.backWidth,s=tn({},t),u=n;return s=o||c>l?sn({coord:t.bl,points:n}):cn({coord:t.br,points:n}),a>r&&(s.tl.y=t.tl.y,s.tr.y=t.tr.y,u=un({backPoints:n,frontPoints:t}).backPoints),l>=c&&Object.keys(s).forEach((function(e){s[e].x=t[e].x})),{frontPoints:s,backPoints:u}}function gn(e){var t=e.frontPoints,n=e.backPoints;return[{p1:t.bl,p2:n.bl},{p1:t.tl,p2:n.tl},{p1:t.tr,p2:n.tr},{p1:t.br,p2:n.br}]}function fn(e){var t=e.frontPoints,n=e.backPoints,i=an(e).isLeftSide,o=[{p1:t.tl,p2:t.tr,positions:[{plain:ct.Front,position:ut.TL},{plain:ct.Front,position:ut.TR}]},{p1:t.tr,p2:t.br,plain:ct.Front,positions:[{plain:ct.Front,position:ut.TR},{plain:ct.Front,position:ut.BR}]},{p1:t.br,p2:t.bl,plain:ct.Front,positions:[{plain:ct.Front,position:ut.BR},{plain:ct.Front,position:ut.BL}]},{p1:t.bl,p2:t.tl,plain:ct.Front,positions:[{plain:ct.Front,position:ut.BL},{plain:ct.Front,position:ut.TL}]}];return[].concat(o,i?[{p1:n.tl,p2:n.bl,positions:[{plain:ct.Back,position:ut.TL},{plain:ct.Back,position:ut.BL}]}]:[{p1:n.tr,p2:n.br,positions:[{plain:ct.Back,position:ut.TR},{plain:ct.Back,position:ut.BR}]}])}function vn(e){var t=e.backPoints,n=an(e).isLeftSide,i=Object.entries(e.frontPoints).map((function(e){var t=Object(s.a)(e,2),n=t[0],i=t[1];return{positions:[{plain:ct.Front,position:n}],point:i}}));return n?[{point:t.tl,positions:[{position:ut.TL,plain:ct.Back}]},{point:t.bl,positions:[{position:ut.BL,plain:ct.Back}]}].concat(Object(c.a)(i)):[{point:t.tr,positions:[{position:ut.TR,plain:ct.Back}]},{point:t.br,positions:[{position:ut.BR,plain:ct.Back}]}].concat(Object(c.a)(i))}function pn(e){var t=e.frontPoints,n=e.backPoints,i=an(e),o=i.backCenter,a=i.frontCenter,r=i.frontHeight,l=i.frontWidth,c=i.backHeight,s=i.backWidth,u=i.isLeftSide,d=Math.abs(l-s),h=Math.abs(r-c),g=Math.abs(a.x-o.x)>d,f=Math.abs(a.y-o.y)>h;return!(g||f)?[t.tl,t.tr,t.br,t.bl]:f&&!g?[t.tl,n.tl,n.tr,t.tr,t.br,t.bl]:g&&!f?u?[t.tl,t.tr,t.br,t.bl,n.bl,n.tl]:[t.tl,t.tr,n.tr,n.br,t.br,t.bl]:g&&f?u?[n.tl,n.tr,t.tr,t.br,t.bl,n.bl]:[t.tl,n.tl,n.tr,n.br,t.br,t.bl]:[]}function bn(e){var t=e.offset,n=e.frontPoints,i=e.backPoints,o=e.positions,a=Object(m.cloneDeep)(n),r=Object(m.cloneDeep)(i);if(2===(null==o?void 0:o.length)){var l=o.every((function(e){return e.plain===ct.Front})),c=!l,u=function(e){var t=Object(s.a)(e,2),n=t[0],i=t[1];return Ct[n.position]===i.position?bt.Row:It[n.position]===i.position?bt.Column:void 0}([o[0],o[1]]),d=u===bt.Row,h=u===bt.Column,g=t;d&&(g={x:0,y:t.y}),h&&(g={y:0,x:t.x}),l&&(null==o||o.forEach((function(e){var t=e.position,n=a,i=n[t];n[t]={x:i.x+g.x,y:i.y+g.y}})),a=ln(a),r=ln(r)),c&&Object.keys(r).forEach((function(e){r[e]={x:r[e].x+g.x,y:r[e].y+g.y}}));var f=(l?dn:hn)({frontPoints:a,backPoints:r}),v=f.frontPoints,p=f.backPoints;a=v,r=p}return{frontPoints:a,backPoints:r}}function mn(e){var t=e.offset,n=e.cuboid,i=e.dragTarget,o=e.positions;switch(i){case qe.Cuboid:var a=function(e){var t=e.offset,n=e.cuboid,i=n.frontPoints,o=n.backPoints;return{frontPoints:Object.entries(i).reduce((function(e,n){var i=Object(s.a)(n,2),o=i[0],a=i[1];return nn(tn({},e),Object(_.a)({},o,{x:a.x+t.x,y:a.y+t.y}))}),{}),backPoints:Object.entries(o).reduce((function(e,n){var i=Object(s.a)(n,2),o=i[0],a=i[1];return nn(tn({},e),Object(_.a)({},o,{x:a.x+t.x,y:a.y+t.y}))}),{})}}({offset:t,cuboid:n});return tn(tn({},n),a);case qe.Line:var r=function(e){var t=e.offset,n=e.cuboid,i=e.positions;return bn({offset:t,frontPoints:n.frontPoints,backPoints:n.backPoints,positions:i})}({offset:t,cuboid:n,positions:o});return tn(tn({},n),r);case qe.Point:var l=function(e){var t=e.offset,n=e.cuboid,i=e.positions;if(null==i?void 0:i[0]){var o=n.frontPoints,a=n.backPoints,r=i[0],l=r.plain===ct.Front,c=l?o:a,s=c[r.position],u=c[yt[r.position]];if(s&&u){var d=rn(s=Kt.add(s,t),u),h={frontPoints:o,backPoints:d};return l&&(h={frontPoints:d,backPoints:a}),(l?dn:hn)(h)}}}({cuboid:n,offset:t,positions:o});if(l)return tn(tn({},n),l);break;default:console.error("No DragTarget")}}function yn(e){var t=e.direction,n=e.frontPoints,i=e.backPoints;if(t&&n&&i){var o=n;switch(t){case ht.Back:o=i;break;case ht.Left:o={bl:i.bl,br:n.bl,tl:i.tl,tr:n.tl};break;case ht.Right:o={bl:i.br,br:n.br,tl:i.tr,tr:n.tr};break;case ht.Top:o={bl:i.tl,br:n.tl,tl:i.tr,tr:n.tr};break;default:o=n}return Tn.transformPlain2PointList(o)}}function Cn(e){var t=e.cuboid,n=e.currentPos,i=e.zoom,o=e.leftOffset,a=void 0===o?16:o,r=e.topOffset,l=void 0===r?2:r,c=t.frontPoints,s={x:c.bl.x,y:c.bl.y},u=Tn.getOffsetCoordinate(s,n,i);return{left:u.x+a,top:u.y+l}}var In=Object.defineProperty,xn=Object.defineProperties,wn=Object.getOwnPropertyDescriptors,kn=Object.getOwnPropertySymbols,Sn=Object.prototype.hasOwnProperty,Pn=Object.prototype.propertyIsEnumerable,Ln=function(e,t,n){return t in e?In(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},An=function(e,t){for(var n in t||(t={}))Sn.call(t,n)&&Ln(e,n,t[n]);if(kn){var i,o=Object(b.a)(kn(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Pn.call(t,n)&&Ln(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},On=function(e,t){return xn(e,wn(t))},Tn=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getOffsetCoordinate",value:function(e,t,n){return{x:e.x*n+t.x,y:e.y*n+t.y}}},{key:"changeDrawOutsideTarget",value:function(e,t,n,i,o,a){return"boolean"!==typeof i||i||(o&&a?(e.x-t.x>(o.x+o.width)*a&&(e.x=(o.x+o.width)*a+t.x),e.x-t.x<o.x*a&&(e.x=o.x*a+t.x),e.y-t.y>(o.y+o.height)*a&&(e.y=(o.y+o.height)*a+t.y),e.y-t.y<o.y*a&&(e.y=o.y*a+t.y)):(e.x-t.x>n.width&&(e.x=n.width+t.x),e.x-t.x<0&&(e.x=t.x),e.y-t.y>n.height&&(e.y=n.height+t.y),e.y-t.y<0&&(e.y=t.y))),e}},{key:"changeCoordinateByRotate",value:function(e,t,n){var i=n.width,o=n.height,a=e.x,r=e.y;switch(t%360){case 90:return{x:o-r,y:a};case 180:return{x:i-a,y:o-r};case 270:return{x:r,y:i-a};default:return e}}},{key:"changeRectByZoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return On(An({},e),{x:e.x*t+n.x,y:e.y*t+n.y,width:e.width*t,height:e.height*t})}},{key:"changePointByZoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return On(An({},e),{x:e.x*t+n.x,y:e.y*t+n.y})}},{key:"changePointListByZoom",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return null==e?void 0:e.map((function(e){return n.changePointByZoom(e,t,i)}))}},{key:"changePlanePointByZoom",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return Object.entries(t).reduce((function(t,o){var a=Object(s.a)(o,2),r=a[0],l=a[1],c=e.changePointByZoom(l,n,i);return On(An({},t),Object(_.a)({},r,c))}),{})}},{key:"changeCuboidByZoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return On(An({},e),{frontPoints:this.changePlanePointByZoom(e.frontPoints,t,n),backPoints:e.backPoints?this.changePlanePointByZoom(e.backPoints,t,n):e.backPoints})}},{key:"transformPlain2PointList",value:function(e){return[e.tl,e.tr,e.br,e.bl]}},{key:"axisArea",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=e.x,i=e.y,o=[],a=n-t;a<n+t;a+=t/3)for(var r=i-t;r<i+t;r+=t/3)o.push({x:a,y:r});return o}},{key:"getOriginCoordinateWithOffsetCoordinate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}}},{key:"returnClosePointIndex",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=-1,o=0;o<t.length;o++){var a=t[o];this.getIsInScope(e,a,n)&&(i=o)}return i}},{key:"isCloseCuboid",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scope:5,zoom:1},i=vn(t),o=n.scope,a=void 0===o?5:o,r=0;r<i.length;r++){var l=i[r];if(this.getIsInScope(e,l.point,a))return!0}for(var c=fn(t),s=0;s<c.length;s++){var u=c[s],d=ei.getFootOfPerpendicular(e,u.p1,u.p2,!0),h=d.length;if(h<a)return!0}return!!_n.isInPolygon(e,pn(t))}},{key:"isCloseCuboidList",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scope:5,zoom:1};return t.some((function(t){return n.isCloseCuboid(e,t,i)}))}},{key:"returnClosePointOrLineInCuboid",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scope:5,zoom:1},i=vn(t),o=n.scope,a=void 0===o?5:o,r=n.zoom,l=void 0===r?1:r,c=0;c<i.length;c++){var s=i[c];if(this.getIsInScope(e,s.point,a))return[{type:"point",points:[this.changePointByZoom(i[c].point,l)],originCuboid:t,positions:s.positions}]}for(var u,d=a,h=fn(t),g=0;g<h.length;g++){var f=h[g],v=ei.getFootOfPerpendicular(e,f.p1,f.p2,!0),p=v.length;p<d&&(d=p,u=[{type:"line",points:this.changePointListByZoom([f.p1,f.p2],l),originCuboid:t,positions:f.positions}])}if(u)return u}},{key:"getIsInScope",value:function(e,t,n){return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n}}]),e}(),En=function(){function e(t){Object(u.a)(this,e),this.currentPos=t.currentPos,this.zoom=t.zoom,this.basicImgInfo=t.basicImgInfo,this.dependToolName=""}return Object(d.a)(e,[{key:"isDependPolygon",get:function(){return this.dependToolName===D.Polygon}},{key:"isDependRect",get:function(){return this.dependToolName===D.Rect}},{key:"isDependOriginalImage",get:function(){return""===this.dependToolName}},{key:"getAbsCoord",value:function(e){return{x:(e.x-this.currentPos.x)/this.zoom,y:(e.y-this.currentPos.y)/this.zoom}}},{key:"getRenderCoord",value:function(e){return{x:e.x*this.zoom+this.currentPos.x,y:e.y*this.zoom+this.currentPos.y}}},{key:"coordInsideRect",value:function(e,t){var n=t.x,i=t.y,o=t.width,a=t.height;return{x:ei.withinRange(e.x,[n,n+o]),y:ei.withinRange(e.y,[i,i+a])}}},{key:"getPolygonPointList",value:function(e,t){return e===Y.Curve?_n.createSmoothCurvePointsFromPointList(t):t}},{key:"getIntersection",value:function(e,t,n){var i=this.getRenderCoord(t),o={pointA:i,pointB:this.getRenderCoord(e)};return Gt.calcOptimalIntersection(n,o,i,3,this.zoom)}},{key:"coordInsidePolygon",value:function(e,t,n,i){var o=this,a=n.pointList,r=null==i?void 0:i.lineType;if(0===a.length)return e;var l=this.getPolygonPointList(r,a);if(_n.isInPolygon(e,l))return e;var c=l.concat(l[0]).map((function(e){return o.getRenderCoord(e)})),s=this.getIntersection(e,t,c);return s?this.getAbsCoord(null==s?void 0:s.point):e}},{key:"coordInsideImage",value:function(e){return this.coordInsideRect(e,On(An({},this.basicImgInfo),{x:0,y:0}))}},{key:"getNextCoordByDependTool",value:function(e,t){return this.isDependRect?this.coordInsideRect(e,this.basicResult):this.isDependPolygon?this.coordInsidePolygon(e,t,this.basicResult,this.dependToolConfig):this.isDependOriginalImage?this.coordInsideImage(e):void 0}},{key:"setDependInfo",value:function(e,t){this.dependToolName=null!=e?e:"",this.dependToolConfig=e?t:void 0}},{key:"setBasicImgInfo",value:function(e){this.basicImgInfo=e}},{key:"setBasicResult",value:function(e){this.basicResult=e}},{key:"setZoomAndCurrentPos",value:function(e,t){this.zoom=e,this.currentPos=t}},{key:"isCoordInsideTarget",value:function(e){if(this.isDependPolygon)return this.isInBasicPolygon(e);if(this.isDependRect){var t=this.basicResult,n=t.x,i=t.y,o=[n,n+t.width],a=[i,i+t.height];return ei.isInRange(e.x,o)&&ei.isInRange(e.y,a)}return ei.isInRange(e.x,[0,this.basicImgInfo.width])&&ei.isInRange(e.y,[0,this.basicImgInfo.height])}},{key:"isInBasicPolygon",value:function(e){var t,n;return _n.isInPolygon(e,(null==(t=this.basicResult)?void 0:t.pointList)||[],null==(n=this.dependToolConfig)?void 0:n.lineType)}}]),e}(),Dn=Object.defineProperty,Mn=Object.getOwnPropertySymbols,Nn=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,Bn=function(e,t,n){return t in e?Dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},jn=function(e,t){for(var n in t||(t={}))Nn.call(t,n)&&Bn(e,n,t[n]);if(Mn){var i,o=Object(b.a)(Mn(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Rn.call(t,n)&&Bn(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},_n=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getHoverPolygonID",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Y.Line,a="",r=1/0,l=Tn.axisArea(e,i);return t.forEach((function(e){e.pointList&&l.forEach((function(t){var i=n.calcPolygonSize(e.pointList);n.isInPolygon(t,e.pointList,o)&&i<r&&(a=e.id,r=i)}))})),a}},{key:"calcPolygonSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((null==e?void 0:e.length)<=2)return 0;var t=e.length,n=e.reduce((function(e,n,i,o){var a=o[(i+1)%t];return e+n.x*a.y-a.x*n.y}),0);return Math.abs(n)/2}},{key:"isInPolygon",value:function(e,t){var n,i,o,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.Line,l=0;t=Object(c.a)(t),r===Y.Curve&&(t=this.createSmoothCurvePoints(t.reduce((function(e,t){return[].concat(Object(c.a)(e),[t.x,t.y])}),[]),.5,!0,20));var u=t,d=Object(s.a)(u,1);o=d[0];var h=t.length;for(n=1;n<=h;n++)a=t[n%h],e.x>Math.min(o.x,a.x)&&e.x<=Math.max(o.x,a.x)&&e.y<=Math.max(o.y,a.y)&&o.x!==a.x&&(i=(e.x-o.x)*(a.y-o.y)/(a.x-o.x)+o.y,(o.y===a.y||e.y<=i)&&l++),o=a;return l%2!==0}},{key:"createSmoothCurvePointsFromPointList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe,n=this.createSmoothCurvePoints(e.reduce((function(e,t){return[].concat(Object(c.a)(e),[t.x,t.y])}),[]),.5,!1,t);return n.map((function(t,n){var i,o=n/(Pe+1),a=Math.floor(o),r=null!=(i=e[a])?i:{};return jn(a===o?jn({},r):{specialEdge:r.specialEdge},t)}))}},{key:"createSmoothCurvePoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pe;if(e.length<4)return e;var o,a,r,l,c,s,u,d,h,g,f,v,p,b=[],m=e.slice(0);for(n?(m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.push(e[0]),m.push(e[1])):(m.unshift(e[1]),m.unshift(e[0]),m.push(e[e.length-2]),m.push(e[e.length-1])),p=2;p<m.length-4;p+=2)for(r=(m[p+2]-m[p-2])*t,l=(m[p+4]-m[p-0])*t,c=(m[p+3]-m[p-1])*t,s=(m[p+5]-m[p+1])*t,v=0;v<=i;v++)f=v/i,u=2*Math.pow(f,3)-3*Math.pow(f,2)+1,d=-2*Math.pow(f,3)+3*Math.pow(f,2),h=Math.pow(f,3)-2*Math.pow(f,2)+f,g=Math.pow(f,3)-Math.pow(f,2),o=u*m[p]+d*m[p+2]+h*r+g*l,a=u*m[p+1]+d*m[p+3]+h*c+g*s,b.push(o),b.push(a);for(var y=[],C=0;C<b.length-1;C+=2)y.push({x:b[C],y:b[C+1]});if(n)for(var I=0;I<i+1;I++){var x=y.shift();y.push(x)}return y}},{key:"getPolygonByID",value:function(e,t){return e.find((function(e){return e.id===t}))}},{key:"getPolygonByIDs",value:function(e,t){return t&&(null==t?void 0:t.length)>0?e.filter((function(e){return t.includes(e.id)})):[]}},{key:"getHoverEdgeIndex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.Line,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=Object(c.a)(t);n===Y.Curve?o=this.createSmoothCurvePoints(t.reduce((function(e,t){return[].concat(Object(c.a)(e),[t.x,t.y])}),[]),.5,!0,Pe):n===Y.Line&&o.push(o[0]);for(var a=-1,r=i,l=0;l<o.length-1;l++){var s=ei.getFootOfPerpendicular(e,o[l],o[l+1]),u=s.length;u<r&&(a=l,r=u)}return-1===a?-1:n===Y.Curve?Math.floor(a/Pe):a}},{key:"getClosestPoint",value:function(e,t){var n,i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.Line,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,r=arguments.length>4?arguments[4]:void 0,l=!1,s=null==(n=null==r?void 0:r.isClose)||n,u="",d=-1,h=1/0,g=e,f=20,v=!1;return t.forEach((function(t){if(!v&&t.pointList)switch(o){case Y.Line:Et.findAllLine(t.pointList,s).forEach((function(n,i){if(!v){var o=ei.getFootOfPerpendicular(e,n.point1,n.point2),r=o.length,c=o.footPoint,s=ei.getLineLength(n.point1,e),f=ei.getLineLength(n.point2,e);s<2*a&&(c=n.point1,r=s,v=!0),f<2*a&&(c=n.point2,r=f,v=!0),r<h&&r<a&&(u=t.id,d=i,h=r,g=c,l=!0)}}));break;case Y.Curve:for(var n=i.createSmoothCurvePoints(t.pointList.reduce((function(e,t){return[].concat(Object(c.a)(e),[t.x,t.y])}),[]),.5,s,f),r=0;r<n.length-1;r++){var p=ei.getFootOfPerpendicular(e,n[r],n[r+1]),b=p.length,m=p.footPoint;b<h&&b<a&&(u=t.id,d=Math.floor(r/(f+1)),h=b,g=m,l=!0)}}})),{dropFoot:g,closestEdgeIndex:d,closestPolygonID:u,hasClosed:l}}},{key:"isPointListInPolygon",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.Line;return e.every((function(e){return n.isInPolygon(e,t,i)}))}},{key:"isPointListOutSidePolygon",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.Line;return e.some((function(e){return!n.isInPolygon(e,t,i)}))}},{key:"getPolygonArea",value:function(e){for(var t=0,n=0,i=e.length;n<i;n++){t+=e[n].x*e[n===e.length-1?0:n+1].y*.5,t-=e[n===e.length-1?0:n+1].x*e[n].y*.5}return Math.abs(t)}},{key:"updatePolygonByRotate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,i=1;return e===at.Anticlockwise&&(i=-1),i*=t,ei.rotateRectPointList(i,n)}},{key:"deletePolygonLastPoint",value:function(e,t,n,i){return n===i.length-1?e:[].concat(Object(c.a)(e),[{x:t[0],y:t[1]}])}},{key:"concatBeginAndEnd",value:function(e){return e.length<1?e:[].concat(Object(c.a)(e),[e[0]])}},{key:"segmentPolygonByPolygon",value:function(t,n){var i,o;try{var a=Object(C.polygon)([Object(c.a)(e.concatBeginAndEnd(t.map((function(e){return[e.x,e.y]}))))]);return n.forEach((function(t){var n=Object(C.polygon)([Object(c.a)(e.concatBeginAndEnd(t.pointList.map((function(e){return[e.x,e.y]}))))]),i=Object(C.difference)(a,n);i&&(a=i)})),(null!=(o=null==(i=null==a?void 0:a.geometry)?void 0:i.coordinates.map((function(t){var n;return"MultiPolygon"===(null==(n=null==a?void 0:a.geometry)?void 0:n.type)?t[0].reduce(e.deletePolygonLastPoint,[]):t.reduce(e.deletePolygonLastPoint,[])})))?o:[]).reduce((function(e,t){var n=t.length,i=t.filter((function(e,i){var o=(i+1)%n;return!Tn.getIsInScope(e,t[o],1)}));return i.length<3?e:[].concat(Object(c.a)(e),[i])}),[])}catch(r){console.error(r)}}},{key:"getPolygonPointList",value:function(e,t){var n=t.find((function(t){return t.id===e}));return n&&n.pointList&&n.pointList.length>0?n.pointList:[]}},{key:"getWrapPolygonIndex",value:function(t,n){return n.findIndex((function(n){return e.isPointListInPolygon(t,n.pointList)}))}},{key:"clipPolygonFromWrapPolygon",value:function(t,n){var i=e.isPolygonClosewise(n),o=e.isPolygonClosewise(t),a=e.getClosePointDistanceFromPolygon(t[0],n),r=n[a],l=[].concat(Object(c.a)(n.slice(0,a)),[r],Object(c.a)(t),[t[0]],Object(c.a)(n.slice(a,n.length)));return i===o&&(l=[].concat(Object(c.a)(n.slice(0,a)),[r,t[0]],Object(c.a)(t.reverse()),Object(c.a)(n.slice(a,n.length)))),l}},{key:"isPolygonClosewise",value:function(e){var t,n,i,o,a=e.length,r=0;if(a<3)return 0;for(t=0;t<a;t++)i=(t+2)%a,o=(e[n=(t+1)%a].x-e[t].x)*(e[i].y-e[n].y),(o-=(e[n].y-e[t].y)*(e[i].x-e[n].x))<0?r--:o>0&&r++;return r>0?1:r<0?-1:0}},{key:"getClosePointDistanceFromPolygon",value:function(e,t){var n=Number.MAX_SAFE_INTEGER,i=-1;return t.forEach((function(t,o){var a=Gt.calcDistance(e,t);a<n&&(n=a,i=o)})),i}},{key:"combinePolygonWithPolygon",value:function(t,n){var i,o;try{var a=Object(C.polygon)([Object(c.a)(e.concatBeginAndEnd(t.pointList.map((function(e){return[e.x,e.y]}))))]),r=Object(C.polygon)([Object(c.a)(e.concatBeginAndEnd(n.pointList.map((function(e){return[e.x,e.y]}))))]),l=Object(C.union)(a,r),s=[],u=t;if(1===(null==(o=null==(i=null==l?void 0:l.geometry)?void 0:i.coordinates)?void 0:o.length)){s.push(n.id);var d=null==l?void 0:l.geometry.coordinates.map((function(t){var n;return"MultiPolygon"===(null==(n=null==l?void 0:l.geometry)?void 0:n.type)?t[0].reduce(e.deletePolygonLastPoint,[]):t.reduce(e.deletePolygonLastPoint,[])}))[0];u.pointList=d}return{newPolygon:u,unionList:s}}catch(h){console.error(h)}}}]),e}(),Hn=Object.defineProperty,Vn=Object.defineProperties,Fn=Object.getOwnPropertyDescriptors,Zn=Object.getOwnPropertySymbols,zn=Object.prototype.hasOwnProperty,Un=Object.prototype.propertyIsEnumerable,Gn=Math.pow,Wn=function(e,t,n){return t in e?Hn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Kn=function(e,t){for(var n in t||(t={}))zn.call(t,n)&&Wn(e,n,t[n]);if(Zn){var i,o=Object(b.a)(Zn(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Un.call(t,n)&&Wn(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},Yn=function(e,t){return Vn(e,Fn(t))},Xn=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"tanAPlusB",value:function(e,t){return(e+t)/(1-e*t)}},{key:"sinAPlusB",value:function(e,t,n,i){return i*e+t*n}},{key:"cosAPlusB",value:function(e,t,n,i){return t*i-e*n}}]),e}(),Jn=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getRotate",value:function(e){return e+90>=360?e+90-360:e+90}},{key:"getLineLength",value:function(e,t){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}},{key:"getTextArea",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pe,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be,o=arguments.length>4?arguments[4]:void 0;if("string"!==typeof t)return{width:0,height:0};var a=e.getContext("2d");a.font=i;var r=0;"undefined"===typeof o&&(o=e&&parseInt(window.getComputedStyle(e).lineHeight,10)||parseInt(window.getComputedStyle(document.body).lineHeight,10));for(var l=e&&parseInt(window.getComputedStyle(e).fontSize,10)||parseInt(window.getComputedStyle(document.body).fontSize,10)||0,c=t.split("\n"),s=0,u=0;u<c.length;u++){for(var d=c[u].split(""),h="",g=0;g<d.length;g++){var f=h+d[g],v=a.measureText(f),p=v.width;p>n&&g>0?(h=d[g],r+=o,s=n):(h=f,p>s&&(s=p))}u!==c.length-1&&(r+=o)}return{width:s,height:r+l,lineHeight:o,fontHeight:l}}},{key:"getLineCenterPoint",value:function(e){var t=Object(s.a)(e,2),n=t[0],i=t[1],o=Kt.getVector(n,i);return{x:n.x+o.x/2,y:n.y+o.y/2}}},{key:"getPerpendicularLine",value:function(e){if(2===e.length){var t=Object(s.a)(e,2),n=t[0],i=t[1];return[i,{x:i.x+i.y-n.y,y:i.y-(i.x-n.x)}]}}},{key:"getPerpendicularFootOfLine",value:function(e,t){if(2!==e.length)return e;var n=this.getPerpendicularLine(e);if(!n)return e;var i=Object(s.a)(n,2),o=i[0],a=i[1];return this.getFootOfPerpendicular(t,o,a).footPoint}},{key:"getQuadrangleFromTriangle",value:function(e){if(3!==e.length)return e;var t=Object(s.a)(e,3),n=t[0],i=t[1],o=t[2];return[n,i,o,{x:o.x+n.x-i.x,y:o.y+n.y-i.y}]}},{key:"getRectPerpendicularOffset",value:function(e,t,n){var i=Object(s.a)(n,2),o=i[0],a=i[1],r=this.getFootOfPerpendicular(e,o,a).footPoint,l=this.getFootOfPerpendicular(t,o,a).footPoint,c={x:r.x-l.x,y:r.y-l.y},u=Kt.add(t,c);return Kt.getVector(e,u)}},{key:"getArrayIndex",value:function(e,t){return e<0?t+e:e>=t?e-t:e}},{key:"getPointListFromPointOffset",value:function(e,t,n){var i=this.getArrayIndex(t-1,e.length),o=this.getArrayIndex(t+1,e.length),a=this.getArrayIndex(t-2,e.length),r=Object(c.a)(e);r[t]=Kt.add(r[t],n);var l=this.getFootOfPerpendicular(r[t],r[a],r[i]).footPoint,s=this.getFootOfPerpendicular(r[t],r[o],r[a]).footPoint;return r[i]=l,r[o]=s,r}},{key:"getRectCenterPoint",value:function(e){var t=Object(s.a)(e,3),n=t[0],i=t[2];return{x:(n.x+i.x)/2,y:(n.y+i.y)/2}}},{key:"rotateRectPointList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1?arguments[1]:void 0,n=this.getRectCenterPoint(t),i=Math.PI,o=Math.sin(e*i/180),a=Math.cos(e*i/180);return t.map((function(e){var t=Kt.getVector(n,e),i=Kt.len(t),r=t.y/i,l=t.x/i;return{x:i*Xn.cosAPlusB(r,l,o,a)+n.x,y:i*Xn.sinAPlusB(r,l,o,a)+n.y}}))}},{key:"getRectangleByRightAngle",value:function(t,n){if(2!==n.length)return n;var i=e.getPerpendicularFootOfLine(n,t);return e.getQuadrangleFromTriangle([].concat(Object(c.a)(n),[i]))}},{key:"getRadiusFromQuadrangle",value:function(e){var t=Object(s.a)(e,3),n=t[1],i=t[2],o=i.y-n.y,a=n.x-i.x,r=o/this.getLineLength(n,i),l=Math.acos(r);return a>0?2*Math.PI-l:l}},{key:"getCollectionPointByAnnotationDataPromise",value:function(e){var t=e.filter((function(e){return"point"===e.type})).map((function(e){return e.annotation})),n=e.filter((function(e){return!!["polygon","line"].includes(e.type)})).map((function(e){return"polygon"===e.type?Yn(Kn({},e.annotation),{pointList:_n.concatBeginAndEnd(e.annotation.pointList)}):e.annotation})),i=new j;return{promise:new Promise((function(e){i.postMessage({points:t,backgroundList:n}),i.onmessage=function(t){e(t.data),i.terminate()}})),close:function(){i.terminate()}}}},{key:"getCollectionPointByAnnotationData",value:function(e){var t=[],n=new Set,i=e.filter((function(e){return"point"===e.type})).map((function(e){return e.annotation})),o=e.filter((function(e){return!!["polygon","line"].includes(e.type)})).map((function(e){return"polygon"===e.type?Yn(Kn({},e.annotation),{pointList:_n.concatBeginAndEnd(e.annotation.pointList)}):e.annotation})),a=function(e,i){var o=_n.getClosestPoint(e,i,Y.Line,1,{isClose:!1}).dropFoot;if(o!==e){var a="".concat(o.x," + ").concat(o.y);n.has(a)||t.push(e),n.add(a)}};return i.forEach((function(e){a(e,o)})),o.forEach((function(e){var t;t=e.id,o.forEach((function(e,n){if(e.id!==t){var i=Object(c.a)(o);i.splice(n,1),e.pointList.forEach((function(e){a(e,i)}))}}))})),{connectionPoints:t}}},{key:"getModifiedRectangleCoordinates",value:function(e,t,n){if(4!==e.length)throw new Error("Invalid number of coordinates. Four coordinates are required.");var i=e[0],o=e[1],a=e[2],r=t/Math.sqrt(Gn(o.x-i.x,2)+Gn(o.y-i.y,2)),l=n/Math.sqrt(Gn(a.x-o.x,2)+Gn(a.y-o.y,2)),c={x:i.x+(o.x-i.x)*r,y:i.y+(o.y-i.y)*r},s={x:c.x+(a.x-o.x)*l,y:c.y+(a.y-o.y)*l};return[i,c,s,{x:i.x+(s.x-o.x),y:i.y+(s.y-o.y)}]}}]),e}(),Qn=Jn;Qn.isInRange=function(e,t){var n=Math.min.apply(Math,Object(c.a)(t)),i=Math.max.apply(Math,Object(c.a)(t));return(Array.isArray(e)?e:[e]).every((function(e){return function(e){return e<=i&&e>=n}(e)}))},Qn.withinRange=function(e,t){var n=Math.min.apply(Math,Object(c.a)(t)),i=Math.max.apply(Math,Object(c.a)(t));return e>i?i:e<n?n:e},Qn.calcViewportBoundaries=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pe,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return{top:0,bottom:0,left:0,right:0};var o=20/i,a=[],r=[],l=e;t&&(l=Ve(e,n)),l.forEach((function(e){var t=e.x,n=e.y;a.push(t),r.push(n)}));var c=Math.min.apply(Math,a),s=Math.max.apply(Math,a),u=Math.min.apply(Math,r),d=Math.max.apply(Math,r),h=s-c,g=d-u;if(h<o){var f=(o-h)/2;c-=f,s+=f}if(g<o){var v=(o-g)/2;u-=v,d+=v}return{top:u,bottom:d,left:c,right:s}},Qn.getFootOfPerpendicular=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={x:0,y:0},r=t.x-n.x,l=t.y-n.y;if(Math.abs(r)<1e-8&&Math.abs(l)<1e-8)return a=t;var c=(e.x-t.x)*(t.x-n.x)+(e.y-t.y)*(t.y-n.y);c/=r*r+l*l,a.x=t.x+c*r,a.y=t.y+c*l;var s=Jn.getLineLength(e,a),u=2,d=Math.min(t.x,n.x),h=Math.max(t.x,n.x),g=Math.min(t.y,n.y),f=Math.max(t.y,n.y),v=!(Jn.isInRange(e.x,[d,h])||Jn.isInRange(e.y,[g,f])),p=e.x>h+u||e.x<d-u||e.y>f+u||e.y<g-u,b=i?v:p;return!o&&b?{footPoint:a,length:1/0}:{footPoint:a,length:s}};var qn,$n,ei=Qn,ti=Object.defineProperty,ni=Object.defineProperties,ii=Object.getOwnPropertyDescriptors,oi=Object.getOwnPropertySymbols,ai=Object.prototype.hasOwnProperty,ri=Object.prototype.propertyIsEnumerable,li=function(e,t,n){return t in e?ti(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ci=function(e,t){for(var n in t||(t={}))ai.call(t,n)&&li(e,n,t[n]);if(oi){var i,o=Object(b.a)(oi(t));try{for(o.s();!(i=o.n()).done;){n=i.value;ri.call(t,n)&&li(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},si=function(e,t){return ni(e,ii(t))},ui=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"composeResult",value:function(e,t,n,i,o){try{var a=JSON.parse(e),r=Et.getCurrentStepInfo(t,i),l=r.dataSourceStep,c="step_".concat(r.step);if(Object.assign(a,o),a[c]){var s=a[c];return s.result?(s.result=n,JSON.stringify(a)):JSON.stringify(si(ci({},a),Object(_.a)({},c,si(ci({},a[c]),{result:n}))))}return JSON.stringify(si(ci({},a),Object(_.a)({},c,{dataSourceStep:l,toolName:r.tool,result:n})))}catch(u){return e}}},{key:"changeCoordinateByRotate",value:function(e,t,n){var i=e.x,o=e.y,a=e.width,r=e.height,l=Tn.changeCoordinateByRotate({x:i,y:o},t,n);switch(t%360){case 90:return si(ci({},e),{x:l.x-r,y:l.y,width:r,height:a});case 180:return si(ci({},e),{x:l.x-a,y:l.y-r});case 270:return si(ci({},e),{x:l.x,y:l.y-a,width:r,height:a});default:return e}}},{key:"translateRect2Points",value:function(e){var t=e.x,n=e.y,i=e.width,o=e.height;return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]}},{key:"translatePoints2Rect",value:function(e,t){if(4===e.length){var n=e[0],i=n.x,o=n.y,a=e[1].x-e[0].x,r=e[2].y-e[1].y;return si(ci({},t),{x:i,y:o,width:a,height:r})}}},{key:"getRectPointList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[{x:e.x*t,y:e.y*t},{x:(e.x+e.width)*t,y:e.y*t},{x:(e.x+e.width)*t,y:(e.y+e.height)*t},{x:e.x*t,y:(e.y+e.height)*t}]}},{key:"getRectEdgeList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getRectPointList(e,t),i=n.length;return n.map((function(e,t){return{begin:e,end:n[(t+1)%i]}}))}},{key:"isInRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return e.x>=t.x*i-n&&e.x<=(t.x+t.width)*i+n&&e.y>=t.y*i-n&&e.y<=(t.y+t.height)*i+n}},{key:"getRectUnderZoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.x,i=e.y,o=e.width,a=e.height;return si(ci({},e),{x:n*t,y:i*t,width:o*t,height:a*t})}},{key:"isRectNotInPolygon",value:function(e,t){return this.getRectPointList(e).some((function(e){return!Fe(e,t)}))}}]),e}();($n=qn||(qn={}))[$n.A=65]="A",$n[$n.B=66]="B",$n[$n.C=67]="C",$n[$n.D=68]="D",$n[$n.E=69]="E",$n[$n.F=70]="F",$n[$n.G=71]="G",$n[$n.H=72]="H",$n[$n.L=76]="L",$n[$n.R=82]="R",$n[$n.Z=90]="Z",$n[$n.W=87]="W",$n[$n.X=88]="X",$n[$n.Y=89]="Y",$n[$n.S=83]="S",$n[$n.Q=81]="Q",$n[$n.Delete=46]="Delete",$n[$n.F11=122]="F11",$n[$n.Space=32]="Space",$n[$n.Esc=27]="Esc",$n[$n.Left=37]="Left",$n[$n.Up=38]="Up",$n[$n.Right=39]="Right",$n[$n.Down=40]="Down",$n[$n.Enter=13]="Enter",$n[$n.Ctrl=17]="Ctrl",$n[$n.Alt=18]="Alt",$n[$n.Shift=16]="Shift",$n[$n.Tab=9]="Tab",$n[$n.BackSpace=8]="BackSpace";var di,hi,gi,fi=qn;(hi=di||(di={})).NoRotateNotice="noRotateNotice",hi.RectErrorSizeNotice="rectErrorSizeNotice",hi.TextCheckNumberErrorNotice="textCheckNumberErrorNotice",hi.TextCheckEnglishErrorNotice="textCheckEnglishErrorNotice",hi.TextCheckCustomErrorNotice="textCheckCustomErrorNotice",hi.UpperLimitErrorNotice="UpperLimitErrorNotice",hi.LowerLimitErrorNotice="LowerLimitErrorNotice",hi.MinAreaLimitErrorNotice="MinAreaLimitErrorNotice",hi.MinLengthLimitErrorNotice="MinLengthLimitErrorNotice",hi.InvalidImage="InvalidImage",hi.DisableDelete="DisableDelete",hi.ClearPartialData="ClearPartialData",hi.MarkerFinish="MarkerFinish",hi.LowerLimitPoint="LowerLimitPoint",hi.NoRotateInDependence="noRotateInDependence",hi.UnableToReannotation="unableToReannotation",hi.ForbiddenCreationOutsideBoundary="ForbiddenCreationOutsideBoundary",hi.SuccessfulEdgeAdsorption="SuccessfulEdgeAdsorption",hi.ForbidAddNewPoint="ForbidAddNewPoint";var vi,pi=(gi={},Object(_.a)(gi,di.NoRotateNotice,"This Image contains data and cannot be rotated"),Object(_.a)(gi,di.RectErrorSizeNotice,"The drawing frame size is smaller than the minimum drawing size"),Object(_.a)(gi,di.TextCheckNumberErrorNotice,"Please enter in number-only format"),Object(_.a)(gi,di.TextCheckEnglishErrorNotice,"Please enter in English only format"),Object(_.a)(gi,di.TextCheckCustomErrorNotice,"Please enter in the required format"),Object(_.a)(gi,di.UpperLimitErrorNotice,"The number of vertices is not more than"),Object(_.a)(gi,di.LowerLimitErrorNotice,"The number of vertices is not less than"),Object(_.a)(gi,di.MinAreaLimitErrorNotice,"Minimum area is not less than"),Object(_.a)(gi,di.MinLengthLimitErrorNotice,"Length is not less than"),Object(_.a)(gi,di.InvalidImage,"Invalid image, please skip this image"),Object(_.a)(gi,di.DisableDelete,"Disable delete"),Object(_.a)(gi,di.ClearPartialData,"Clear partial data"),Object(_.a)(gi,di.MarkerFinish,"ListAnnotation is finished"),Object(_.a)(gi,di.LowerLimitPoint,"The maximum number of points has been reached"),Object(_.a)(gi,di.NoRotateInDependence,"Disallow rotation in dependent cases"),Object(_.a)(gi,di.UnableToReannotation,"Unabled to reannotation"),Object(_.a)(gi,di.ForbiddenCreationOutsideBoundary,"Fobid creation outside boundary"),Object(_.a)(gi,di.SuccessfulEdgeAdsorption,"Successful edge adsorption"),Object(_.a)(gi,di.ForbidAddNewPoint,"Forbid to add new point in rect-polygon"),gi),bi=(vi={},Object(_.a)(vi,di.NoRotateNotice,"\u672c\u56fe\u542b\u6709\u6570\u636e\uff0c\u65e0\u6cd5\u8fdb\u884c\u65cb\u8f6c"),Object(_.a)(vi,di.RectErrorSizeNotice,"\u7ed8\u5236\u6846\u5c3a\u5bf8\u5c0f\u4e8e\u6700\u5c0f\u7ed8\u5236\u5c3a\u5bf8"),Object(_.a)(vi,di.TextCheckNumberErrorNotice,"\u8bf7\u6309\u4ec5\u6570\u5b57\u7684\u683c\u5f0f\u8f93\u5165"),Object(_.a)(vi,di.TextCheckEnglishErrorNotice,"\u8bf7\u6309\u4ec5\u82f1\u6587\u7684\u683c\u5f0f\u8f93\u5165"),Object(_.a)(vi,di.TextCheckCustomErrorNotice,"\u8bf7\u6309\u8981\u6c42\u7684\u683c\u5f0f\u8f93\u5165"),Object(_.a)(vi,di.UpperLimitErrorNotice,"\u9876\u70b9\u6570\u4e0d\u591a\u4e8e"),Object(_.a)(vi,di.LowerLimitErrorNotice,"\u9876\u70b9\u6570\u4e0d\u5c11\u4e8e"),Object(_.a)(vi,di.MinAreaLimitErrorNotice,"\u6700\u5c0f\u9762\u79ef\u4e0d\u5c0f\u4e8e"),Object(_.a)(vi,di.MinLengthLimitErrorNotice,"\u957f\u5ea6\u4e0d\u5c0f\u4e8e"),Object(_.a)(vi,di.InvalidImage,"\u65e0\u6548\u56fe\u7247\uff0c\u8bf7\u8df3\u8fc7\u6b64\u56fe"),Object(_.a)(vi,di.DisableDelete,"\u8be5\u6570\u636e\u7981\u6b62\u5220\u9664"),Object(_.a)(vi,di.ClearPartialData,"\u5b58\u5728\u90e8\u5206\u6570\u636e\u65e0\u6cd5\u6e05\u9664"),Object(_.a)(vi,di.MarkerFinish,"\u5217\u8868\u6807\u6ce8\u5df2\u5b8c\u6210"),Object(_.a)(vi,di.LowerLimitPoint,"\u5df2\u5230\u8fbe\u6807\u70b9\u6570\u91cf\u4e0a\u9650"),Object(_.a)(vi,di.NoRotateInDependence,"\u4f9d\u8d56\u60c5\u51b5\u4e0b\u65e0\u6cd5\u8fdb\u884c\u65cb\u8f6c"),Object(_.a)(vi,di.UnableToReannotation,"\u65e0\u6cd5\u8fdb\u884c\u7eed\u6807\u64cd\u4f5c"),Object(_.a)(vi,di.ForbiddenCreationOutsideBoundary,"\u8fb9\u754c\u5916\u7981\u6b62\u521b\u5efa"),Object(_.a)(vi,di.SuccessfulEdgeAdsorption,"\u8fb9\u7f18\u5438\u9644\u6210\u529f"),Object(_.a)(vi,di.ForbidAddNewPoint,"\u6846\u4f53\u65e0\u6cd5\u6dfb\u52a0\u70b9"),vi),mi=Object(d.a)((function e(){Object(u.a)(this,e)}));mi.getMessagesByLocale=function(e,t){switch(t){case it.US:return pi[e];case it.Zh:default:return bi[e]}};var yi,Ci=n(17),Ii='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ccc"/></g></g></svg>',xi='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#f33"/></g></g></svg>',wi=Ii,ki=61,Si=80,Pi=62,Li=20,Ai=55,Oi=55,Ti=40,Ei=80,Di=240,Mi=320,Ni="rgba(102, 111, 255, 1)",Ri=["rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"],Bi=[Ii,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#800cf9"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#01ff30"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ff88f7"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ffe232"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#994217"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#0282fa"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ff2323"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#00ffea"/></g></g></svg>'],ji={1:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#1f0bf9"/></g></g></svg>',3:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#3fe"/></g></g></svg>',5:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#33fe33"/></g></g></svg>',7:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#fdff37"/></g></g></svg>',9:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#f70efa"/></g></g></svg>'},_i="rgba(255, 51, 51, 1)",Hi={r:255,g:51,b:51,a:1},Vi="rgba(204, 204, 204, 1)",Fi=(yi={},Object(_.a)(yi,Z.lc,"rgba(153, 51, 255, 1)"),Object(_.a)(yi,Z.rc,"rgba(51, 153, 255, 1)"),Object(_.a)(yi,Z.clc,"rgba(46, 230, 46, 1)"),Object(_.a)(yi,Z.crc,"rgba(255, 51, 51, 1)"),yi),Zi='{"color":1,"width":2,"borderOpacity":9,"fillOpacity":9,"toolColor":{"1":{"valid":{"stroke":"rgba(0,0,255,0.50)","fill":"rgba(0,0,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(0,15,255,1.00)","fill":"rgba(0,15,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(0,15,255,0.80)","fill":"rgba(0,15,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"3":{"valid":{"stroke":"rgba(0,255,255,0.50)","fill":"rgba(0,255,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(0,212,255,1.00)","fill":"rgba(0,212,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(0,212,255,0.80)","fill":"rgba(0,212,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"5":{"valid":{"stroke":"rgba(0,255,0,0.50)","fill":"rgba(0,255,0,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(149,255,1.00)","fill":"rgba(149,255,0,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(149,255,0,0.80)","fill":"rgba(149,255,0,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"7":{"valid":{"stroke":"rgba(255,255,0,0.50)","fill":"rgba(255,255,0,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(255,230,102,1.00)","fill":"rgba(255,213,0,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(255,230,102,0.80)","fill":"rgba(255,230,102,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"9":{"valid":{"stroke":"rgba(255,0,255,0.50)","fill":"rgba(255,0,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(230,102,255,1.00)","fill":"rgba(213,0,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(230,102,255,0.80)","fill":"rgba(230,102,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}}},"attributeColor":[{"valid":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}}],"lineColor":{"1":"rgba(102, 111, 255, 1 )","3":"rgba(102, 230, 255, 1)","5":"rgba(191, 255, 102, 1)","7":"rgba(255, 230, 102, 1)","9":"rgba(230, 102, 255, 1)"},"attributeLineColor":["rgba(204, 204, 204, 1)","rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"]}',zi=Object.defineProperty,Ui=Object.defineProperties,Gi=Object.getOwnPropertyDescriptors,Wi=Object.getOwnPropertySymbols,Ki=Object.prototype.hasOwnProperty,Yi=Object.prototype.propertyIsEnumerable,Xi=function(e,t,n){return t in e?zi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ji=function(e,t){for(var n in t||(t={}))Ki.call(t,n)&&Xi(e,n,t[n]);if(Wi){var i,o=Object(b.a)(Wi(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Yi.call(t,n)&&Xi(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},Qi=function(e,t){return Ui(e,Gi(t))},qi=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getAttributeIcon",value:function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t.findIndex((function(t){return t.value===e})),a=null!=(n=Bi[o%Bi.length])?n:wi;i||(a=xi),a="";var r=new Image;return r.src=a,r}},{key:"checkString",value:function(e,t){var n="";switch(e){case ce.Order:case ce.NumberOnly:n="^[0-9]+$";break;case ce.EnglishOnly:n="^[A-Za-z]+$";break;case ce.CustomFormat:n=t}return n}},{key:"checkTextAttibute",value:function(e,t){if(void 0===e||""===e)return!0;try{return new RegExp(t).test(e)}catch(n){return!1}}},{key:"getAttributeShowText",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{var o=i.findIndex((function(t){return t.value===e}));return null!=(n=null==(t=i[o])?void 0:t.key)?n:e}catch(a){return e}}},{key:"getAttributeIndex",value:function(e,t){try{var n=t.findIndex((function(t){return t.value===e}));return n>=8?n%8:n}catch(i){return-1}}},{key:"getAttributeColor",value:function(e,t){try{var n=this.getAttributeIndex(e,t);return-1===n?Vi:Ri[n%Ri.length]}catch(i){return Vi}}},{key:"getTextAttribute",value:function(e,t){try{if(t===ce.Order){var n=e.map((function(e){return parseInt(e.textAttribute,10)})).filter((function(e){return Object(m.isNumber)(e)&&e<Number.MAX_SAFE_INTEGER&&e>=0}));n.sort((function(e,t){return e-t}));var i=n.pop();return"".concat((i||0)+1)}return""}catch(o){return""}}},{key:"textChange",value:function(e,t,n){return n.map((function(n){return n.id===t?Qi(Ji({},n),{textAttribute:e}):n}))}},{key:"getErrorNotice",value:function(e,t){switch(e){case ce.Order:case ce.NumberOnly:return mi.getMessagesByLocale(di.TextCheckNumberErrorNotice,t);case ce.EnglishOnly:return mi.getMessagesByLocale(di.TextCheckEnglishErrorNotice,t);case ce.CustomFormat:return mi.getMessagesByLocale(di.TextCheckCustomErrorNotice,t);default:return""}}},{key:"textAttributeValidate",value:function(e,t,n){try{return new RegExp(this.checkString(e,t)).test(n)}catch(i){}}},{key:"checkTextAttribute",value:function(e,t,n,i){var o=this,a=!1;return n.forEach((function(n){void 0!==(null==n?void 0:n.textAttribute)&&""!==(null==n?void 0:n.textAttribute)&&(i&&n.id!==i||o.textAttributeValidate(e,t,n.textAttribute)||(a=!0))})),!!a}},{key:"changeTextAttributeInLog",value:function(e,t){return null==e?void 0:e.map((function(e){return null==e?void 0:e.map((function(e){if((null==t?void 0:t.findIndex((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)})))>-1){var n=null==t?void 0:t.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}));return Qi(Ji({},e),{textAttribute:null==n?void 0:n.textAttribute})}return e}))}))}},{key:"getTextIconSvg",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;if(!0===i){var a=(null==n?void 0:n.findIndex((function(e){return(null==e?void 0:e.value)===t})))%Ri.length+1,r=null==(e=null==n?void 0:n.find((function(e){return e.value===t})))?void 0:e.color;if(r){var l=Ci.ToolStyleUtils.rgbaStringToHex(r);return this.generateIconAttribute({fill:l})}return Bi[a]}return o}},{key:"generateIconAttribute",value:function(e){var t=e.fill,n=e.width,i=void 0===n?16:n,o=e.height,a=void 0===o?16:o,r=e.xmlns,l=void 0===r?"http://www.w3.org/2000/svg":r,c=e.xlink,s=void 0===c?"http://www.w3.org/1999/xlink":c;return"<span style={color:".concat(t,"}><svg xmlns=").concat(l," xmlns:xlink=").concat(s," width=").concat(i," height=").concat(a,' viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill=\'currentColor\'/></g></g></svg></span>')}},{key:"getAttributeByKeycode",value:function(e,t){var n,i;return ei.isInRange(e,[48,57])&&(i=e-48),ei.isInRange(e,[96,105])&&(i=e-96),0===i?"":i?null==(n=t[i-1])?void 0:n.value:void 0}}]),e}(),$i=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getMousePositionOnCanvasFromEvent",value:function(e,t){if(t&&e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}return null}},{key:"getClientRect",value:function(e){if(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,width:t.width,height:t.height}}return null}},{key:"getSize",value:function(e){if(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height}}return null}},{key:"inViewPort",value:function(e,t){return!!e&&(ei.isInRange(e.x,[t.left,t.right])&&ei.isInRange(e.y,[t.top,t.bottom]))}}]),e}();$i.getViewPort=function(e,t,n){var i=e.width,o=e.height,a=t.x,r=(0-t.y)/n,l=(0-a)/n;return{top:r,bottom:r+o/n,left:l,right:l+i/n}},$i.getPixelRatio=function(e){if(!e||!window)return 1;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t};var eo=n(187),to=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"deg2rad",value:function(e){return e*Math.PI/180}},{key:"rad2deg",value:function(e){return 180*e/Math.PI}}]),e}(),no=Object.defineProperty,io=Object.defineProperties,oo=Object.getOwnPropertyDescriptors,ao=Object.getOwnPropertySymbols,ro=Object.prototype.hasOwnProperty,lo=Object.prototype.propertyIsEnumerable,co=function(e,t,n){return t in e?no(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},so=function(e,t){for(var n in t||(t={}))ro.call(t,n)&&co(e,n,t[n]);if(ao){var i,o=Object(b.a)(ao(t));try{for(o.s();!(i=o.n()).done;){n=i.value;lo.call(t,n)&&co(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},uo=function(e,t){return io(e,oo(t))},ho={x:0,y:0},go="",fo=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"drawLine",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.getContext("2d"),a=i.color,r=void 0===a?go:a,l=i.thickness,c=void 0===l?1:l,s=i.lineCap,u=void 0===s?"round":s,d=i.lineDash;o.save(),o.strokeStyle=r,o.lineWidth=c,o.lineCap=u,d&&o.setLineDash(d),o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(n.x+1,n.y+1),o.stroke(),o.restore()}},{key:"drawRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.getContext("2d"),o=n.color,a=void 0===o?go:o,r=n.thickness,l=void 0===r?1:r,c=n.lineCap,s=void 0===c?"round":c,u=n.hiddenText,d=void 0!==u&&u,h=n.lineDash;if(i.save(),i.strokeStyle=a,i.lineWidth=l,i.lineCap=s,Array.isArray(h)&&i.setLineDash(h),i.fillStyle=a,i.strokeRect(t.x,t.y,t.width,t.height),!1===d){var g="";if(t.attribute&&(g="".concat(g,"  ").concat(t.attribute)),this.drawText(e,{x:t.x,y:t.y-5},g),t.textAttribute){var f="".concat(~~t.width," * ").concat(~~t.height),v=7*f.length,p=0,b=Math.max(20,t.width-v);this.drawText(e,{x:t.x,y:t.y+t.height+20+p},t.textAttribute,{textMaxWidth:b})}}i.restore()}},{key:"drawRectWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.getContext("2d"),o=n.color,a=void 0===o?go:o;i.save(),i.fillStyle=a,i.fillRect(t.x,t.y,t.width,t.height),i.restore()}},{key:"drawTagByDom",value:function(e,t,n){var i=e;if((null==t?void 0:t.length)>0){var o=document.createElement("div");return o.innerHTML=t,o.setAttribute("id",n),null==i||i.appendChild(o),o}}},{key:"drawTag",value:function(e,t){var n,i=null==e?void 0:e.parentNode,o=window.self.document.getElementById("tagToolTag");if(o&&i&&i.contains(o)&&(null==i||i.removeChild(o)),(null==t?void 0:t.length)>0){var a=document.createElement("div");return a.innerHTML=null!=(n=t.reduce((function(e,t){return"".concat(e).concat(t.keyName,": ").concat(t.value.join(" \u3001 "),"\n")}),""))?n:"",a.setAttribute("id","tagToolTag"),null==i||i.appendChild(a),a}}},{key:"drawLineWithPointList",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t.length<2)){var o=e.getContext("2d"),a=i.color,r=void 0===a?go:a,l=i.thickness,s=void 0===l?1:l,u=i.lineCap,d=void 0===u?"round":u,h=i.lineType,g=void 0===h?Y.Line:h,f=i.lineDash,v=i.hoverEdgeIndex;o.save();var p=function(){o.strokeStyle=r,o.lineWidth=s,o.lineCap=d,Array.isArray(f)?o.setLineDash(f):o.setLineDash([])};p(),g===Y.Curve?(void 0!==v&&v>-1&&t.push(t[0]),t=_n.createSmoothCurvePointsFromPointList(Object(c.a)(t),Pe),void 0!==v&&v>-1&&(t=t.slice((Pe+1)*v,(Pe+1)*(v+1)))):void 0!==v&&v>-1&&(t=(t=[].concat(Object(c.a)(t),[t[0]])).slice(v,v+2));var b=[];o.beginPath(),o.moveTo(t[0].x,t[0].y);for(var m=0;m<t.length-1;m++)t[m].specialEdge&&b.push({i1:m,i2:m+1}),o.lineTo(t[m+1].x,t[m+1].y);o.stroke(),o.save(),o.lineWidth=.8*s,o.lineCap="butt",o.strokeStyle="white",o.setLineDash([3,3]),b.forEach((function(e){var n=t[e.i1],i=t[e.i2];o.beginPath(),o.moveTo(n.x,n.y),o.lineTo(i.x,i.y),o.stroke()})),o.restore();var y=4,C=2;return t.forEach((function(t){t.specialPoint&&(n.drawSpecialPoint(e,t,y+C,r),n.drawSpecialPoint(e,t,y,"white"))})),o.restore(),t}}},{key:"drawCircle",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.getContext("2d"),a=i.startAngleDeg,r=void 0===a?0:a,l=i.endAngleDeg,c=void 0===l?360:l,s=i.thickness,u=void 0===s?1:s,d=i.color,h=void 0===d?go:d,g=i.fill,f=void 0===g?go:g,v=to.deg2rad(r),p=to.deg2rad(c);o.save(),o.beginPath(),o.strokeStyle=h,o.fillStyle=f,o.lineWidth=u,o.arc(t.x,t.y,n,v,p,!1),o.stroke(),f&&o.fill(),o.closePath(),o.restore()}},{key:"drawCircleWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.getContext("2d"),a=i.color,r=void 0===a?go:a;o.save();var l=to.deg2rad(0),c=to.deg2rad(360);o.fillStyle=r,o.beginPath(),o.arc(t.x,t.y,n,l,c,!1),o.fill(),o.restore()}},{key:"drawSpecialPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=arguments.length>3?arguments[3]:void 0,o=e.getContext("2d"),a=t.x,r=t.y;o.save(),o.beginPath(),o.fillStyle=i;var l=1.5*n,c=l*Math.sqrt(3)/2,s=l/2;o.moveTo(a,r-l),o.lineTo(a-c,r+s),o.lineTo(a+c,r+s),o.closePath(),o.fill(),o.restore()}},{key:"drawPolygon",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.isClose,o=void 0!==i&&i,a=n.lineType,r=void 0===a?Y.Line:a;return!0===o&&(t=[].concat(Object(c.a)(t),[t[0]])),r===Y.Curve&&(t=_n.createSmoothCurvePointsFromPointList(Object(c.a)(t))),this.drawLineWithPointList(e,t,uo(so({},n),{lineType:Y.Line})),t}},{key:"drawPolygonWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t.length<2)){var i=e.getContext("2d"),o=n.color,a=void 0===o?go:o,r=n.lineType,l=void 0===r?Y.Line:r;i.save(),i.fillStyle=a,i.beginPath(),l===Y.Curve&&(t=_n.createSmoothCurvePointsFromPointList([].concat(Object(c.a)(t),[t[0]])));var s=t,u=Object(eo.a)(s),d=u[0],h=u.slice(1);return i.moveTo(d.x,d.y),h.forEach((function(e){i.lineTo(e.x,e.y)})),i.fill(),i.restore(),t}}},{key:"drawPolygonWithFillAndLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.strokeColor,o=n.fillColor,a=n.thickness,r=n.lineCap,l=n.isClose,c=n.lineType,s=this.drawPolygon(e,t,{color:i,thickness:a,lineCap:r,isClose:l,lineType:c});return this.drawPolygonWithFill(e,t,{color:o,lineType:c}),s}},{key:"drawPolygonWithKeyPoint",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.pointColor,a=void 0===o?"white":o,r=i.strokeColor,l=this.drawPolygon(e,t,i);return l.forEach((function(t){n.drawCircleWithFill(e,t,4,{color:r}),n.drawCircleWithFill(e,t,3,{color:a})})),l}},{key:"drawSelectedPolygonWithFillAndLine",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.pointColor,a=void 0===o?"white":o,r=i.strokeColor,l=this.drawPolygonWithFillAndLine(e,t,i);return l.forEach((function(t){n.drawCircleWithFill(e,t,4,{color:r}),n.drawCircleWithFill(e,t,3,{color:a})})),l}},{key:"drawText",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n){var o=e.getContext("2d"),a=i.color,r=void 0===a?go:a,l=i.font,c=void 0===l?be:l,s=i.shadowColor,u=void 0===s?"":s,d=i.shadowBlur,h=void 0===d?0:d,g=i.shadowOffsetX,f=void 0===g?0:g,v=i.shadowOffsetY,p=void 0===v?0:v,b=i.textMaxWidth,m=void 0===b?164:b,y=i.offsetX,C=void 0===y?0:y,I=i.offsetY,x=void 0===I?0:I,w=i.textAlign,k=void 0===w?"start":w,S=i.lineHeight;o.save(),o.textAlign=k,o.fillStyle=null!=r?r:"white",o.font=c,o.shadowColor=u,o.shadowOffsetX=f,o.shadowOffsetY=p,o.shadowBlur=h,this.wrapText(e,"".concat(n),t.x+C,t.y+x,m,S),o.restore()}}},{key:"wrapText",value:function(e,t,n,i,o,a){if("string"===typeof t&&"number"===typeof n&&"number"===typeof i){var r=e.getContext("2d");"undefined"===typeof o&&(o=e&&e.width||300),"undefined"===typeof a&&(a=e&&parseInt(window.getComputedStyle(e).lineHeight,10)||parseInt(window.getComputedStyle(document.body).lineHeight,10));for(var l=t.split("\n"),c=0;c<l.length;c++){for(var s=l[c].split(""),u="",d=0;d<s.length;d++){var h=u+s[d];o||(o=300),r.measureText(h).width>o&&d>0?(r.fillText(u,n,i),u=s[d],i+=a):u=h}r.fillText(u,n,i),i+=a}}}},{key:"drawArrow",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.color,a=void 0===o?go:o,r=i.thickness,l=void 0===r?1:r,c=i.lineCap,s=void 0===c?"round":c,u=i.theta,d=void 0===u?30:u,h=i.headLen,g=void 0===h?10:h,f=180*Math.atan2(t.y-n.y,t.x-n.x)/Math.PI,v=(f+d)*Math.PI/180,p=(f-d)*Math.PI/180,b=g*Math.cos(v),m=g*Math.sin(v),y=g*Math.cos(p),C=g*Math.sin(p);e.save(),e.strokeStyle=a,e.lineWidth=l,e.lineCap=s,e.beginPath(),e.moveTo(n.x+b,n.y+m),e.lineTo(n.x,n.y),e.lineTo(n.x+y,n.y+C),e.stroke(),e.restore()}},{key:"drawArrowByCanvas",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.getContext("2d");this.drawArrow(o,t,n,i)}},{key:"drawCuboid",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.backPoints,a=n.direction,r=n.frontPoints,l=i.strokeColor,c=i.thickness,s=i.fillColor,u={color:l,thickness:c};if(o){var d=Tn.transformPlain2PointList(o);e.drawPolygon(t,d,uo(so({},u),{isClose:!0}));var h=gn(n);null==h||h.forEach((function(n){e.drawLine(t,n.p1,n.p2,so({},u))}))}var g=Tn.transformPlain2PointList(r);if(a&&o&&r){var f=yn({direction:a,frontPoints:r,backPoints:o});f&&e.drawPolygonWithFill(t,f,{color:s})}e.drawPolygon(t,g,uo(so({},u),{isClose:!0}))}},{key:"drawCuboidWithText",value:function(t,n,i,o){var a=i.strokeColor,r=a,l=o.config,c=o.hiddenText,s=o.selectedID,u=o.headerText,d=o.bottomText,h=n.backPoints,g=n.frontPoints,f=n.textAttribute,v=g.br.x-g.bl.x;e.drawCuboid(t,n,i);var p="";(null==l?void 0:l.isShowOrder)&&n.order&&(null==n?void 0:n.order)>0&&(p="".concat(n.order)),n.attribute&&(p="".concat(p,"  ").concat(qi.getAttributeShowText(n.attribute,null==l?void 0:l.attributeList))),!c&&h&&p&&e.drawText(t,{x:h.tl.x,y:h.tl.y-5},null!=u?u:p,{color:a,textMaxWidth:300});var b=Cn({cuboid:n,currentPos:{x:0,y:0},zoom:1,topOffset:16,leftOffset:0});if(!c&&f&&n.id!==s){var m=Math.max(20,.8*v);e.drawText(t,{x:b.left,y:b.top},null!=d?d:f,{color:r,textMaxWidth:m})}}}]),e}(),vo=fo;vo.drawImg=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.getContext("2d"),o=n.zoom,a=void 0===o?1:o,r=n.currentPos,l=void 0===r?ho:r,c=n.rotate,s=void 0===c?0:c,u=n.imgAttribute;switch(i.save(),s){case 0:default:i.translate(l.x,l.y);break;case 90:i.translate(l.x+t.height*a,l.y),i.rotate(90*Math.PI/180);break;case 180:i.translate(l.x+t.width*a,l.y+t.height*a),i.rotate(Math.PI);break;case 270:i.translate(l.x,l.y+t.width*a),i.rotate(270*Math.PI/180)}if(u){var d=u.contrast,h=u.saturation,g=u.brightness;i.filter="saturate(".concat(h+100,"%) contrast(").concat(d+100,"%) brightness(").concat(g+100,"%)")}i.drawImage(t,0,0,t.width*a,t.height*a),i.restore()};var po=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getMarkerShowText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return qi.getAttributeShowText(e,t)}}]),e}();function bo(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:62,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(i=i||o.length,n)for(e=0;e<n;e++)a[e]=o[0|Math.random()*i];else for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",e=0;e<36;e++)a[e]||(t=0|16*Math.random(),a[e]=o[19===e?3&t|8:t]);return a.join("")}po.getAuxiliaryLineByMarkerList=function(e,t){for(var n,i=Object(m.cloneDeep)(e),o=[],a=i.shift();a;)null==(n=a.target)||n.forEach((function(e){var n=i.find((function(t){return t.value===e}));n&&(null==a?void 0:a[t])&&o.push({start:a[t],end:n[t]})})),a=i.shift();return o},po.getAuxiliaryLineCoord=function(e,t){var n=[];return e.forEach((function(e){var i=e.start,o=e.end,a=t.find((function(e){return e.label===i}));if(a){var r=t.find((function(e){return e.label===o}));r&&n.push({start:{x:a.x,y:a.y},end:{x:r.x,y:r.y}})}})),n};var mo=n(24),yo=function(){function e(t){var n=this;Object(u.a)(this,e),this.record=[],this.recordIndex=-1,this.minRecordIndex=-1,this.emitHistoryChanged=function(){n.historyChanged&&(("ActionsHistory"===n.constructor.name||n.record.length>0)&&n.historyChanged(n.undoEnabled,n.redoEnabled))},this.historyChanged=t}return Object(d.a)(e,[{key:"undoEnabled",get:function(){return this.recordIndex>this.minRecordIndex}},{key:"redoEnabled",get:function(){return this.recordIndex<this.record.length-1}},{key:"pushHistory",value:function(e){if(this.recordIndex!==this.record.length-1){var t=this.record.slice(0,Math.min(this.recordIndex+1,this.record.length));this.record=t}this.record.push(y.a.cloneDeepWith(e)),this.recordIndex+=1,this.emitHistoryChanged()}},{key:"updateHistory",value:function(e){this.record[this.recordIndex]=y.a.cloneDeep(e)}},{key:"applyAttribute",value:function(e,t,n){e&&this.record.forEach((function(i){var o=i.find((function(t){return t.id===e}));o&&(o[t]=n)}))}},{key:"undo",value:function(){if(this.undoEnabled)return this.recordIndex-=1,this.emitHistoryChanged(),y.a.cloneDeep(this.record[this.recordIndex])||[]}},{key:"redo",value:function(){if(this.redoEnabled)return this.recordIndex+=1,this.emitHistoryChanged(),y.a.cloneDeep(this.record[this.recordIndex])}},{key:"init",value:function(){this.record=[[]],this.recordIndex=0,this.emitHistoryChanged()}},{key:"empty",value:function(){this.record=[],this.recordIndex=-1,this.emitHistoryChanged()}},{key:"initRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length>0||t;this.record=n?[y.a.cloneDeep(e)]:[],this.minRecordIndex=n?0:-1,this.recordIndex=0}}]),e}(),Co=function(){function e(t,n){var i=this;Object(u.a)(this,e),this.rcTime=0,this.mouseDownTime=0,this.onMouseDown=function(){i.mouseDownTime=(new Date).getTime()},this.dom=t,this.isDoubleClick=!1,this.delay=n}return Object(d.a)(e,[{key:"getRcTime",value:function(){return this.rcTime}},{key:"getCoord",value:function(e){return{x:e.clientX,y:e.clientY}}},{key:"removeEvent",value:function(){this.dom&&(this.dom.removeEventListener("mouseup",this.mouseUp),this.dom.removeEventListener("mousemove",this.mouseMove),this.dom.removeEventListener("dblclick",this.dblclick),this.dom.removeEventListener("mousedown",this.onMouseDown))}},{key:"addEvent",value:function(e,t,n,i){var o=this;this.dom&&(this.removeEvent(),this.mouseUp=function(t){var a=(new Date).getTime(),r=!i||i(t);if(a-o.mouseDownTime>o.delay||!0!==r)e(t);else{if(2===t.button){if(0!==o.rcTime)return a-o.rcTime<o.delay&&(n(t),clearTimeout(o.setTimeFun),o.cacheFunction=void 0),void(o.rcTime=0);setTimeout((function(){o.rcTime=0}),o.delay),o.rcTime=a}o.setTimeFun&&clearTimeout(o.setTimeFun),o.clickCoord=o.getCoord(t),o.cacheFunction=function(){return e(t)},o.setTimeFun=setTimeout((function(){o.isDoubleClick?o.isDoubleClick=!1:(o.cacheFunction(),o.clickCoord=void 0)}),o.delay)}},this.mouseMove=function(e){var t=o.getCoord(e);o.clickCoord&&!Tn.getIsInScope(t,o.clickCoord,10)&&(o.cacheFunction&&o.cacheFunction(),o.clickCoord=void 0,o.cacheFunction=null,clearTimeout(o.setTimeFun))},this.dblclick=function(e){o.isDoubleClick=!0,o.clickCoord=void 0,t(e)},this.dom.addEventListener("mouseup",this.mouseUp),this.dom.addEventListener("mousemove",this.mouseMove),this.dom.addEventListener("dblclick",this.dblclick),this.dom.addEventListener("mousedown",this.onMouseDown))}},{key:"clearRightDblClick",value:function(){this.rcTime=0}}]),e}(),Io=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getInitImgPos",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];90!==n&&270!==n||(t={width:t.height,height:t.width});var a=e.width*i/t.width,r=e.height*i/t.height,l=o?1:Math.min(a,r),c={x:(e.width-t.width*l)/2,y:(e.height-t.height*l)/2},s=t.width*l,u=t.height*l;return o&&(l=1),{zoom:l,currentPos:c,imgInfo:{width:s,height:u}}}},{key:"getBasicRecPos",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.9,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t&&e){var r=t.x,l=t.y,c=t.height,s=t.width,u=n.height/c;s/c>n.width/n.height&&(u=n.width/s);var d=a?1:u*i*o,h={x:n.width/2,y:n.height/2},g={x:(r+s/2)*d,y:(l+c/2)*d},f={x:h.x-g.x,y:h.y-g.y};return{currentPos:f,innerZoom:d}}return!1}}]),e}(),xo=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"renderInvalidPage",value:function(e,t,n){var i=document.createElement("div");return i.setAttribute("style","\n        position: absolute;\n        left: 0px;\n        top: 0px;\n        width: ".concat(t.width,"px;\n        height: ").concat(t.height,"px;\n        background: rgba(255, 87, 34, 1);\n        overflow: hidden;\n        color: white;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 30px;\n        opacity: 0.7;\n        z-index: 30;\n      ")),i.innerHTML=mi.getMessagesByLocale(di.InvalidImage,n),i.className="bee-invalid-page",e.appendChild(i),i}}]),e}(),wo=[1,5,10,20,30,50,80,100].concat(Array.from({length:9}).map((function(e,t){return 100*(t+2)}))),ko=Object(d.a)((function e(){Object(u.a)(this,e)}));ko.zoomChanged=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tt.Linear;if(n===tt.Intelligence){var i,o=Math.max.apply(Math,Object(c.a)(wo)),a=Math.min.apply(Math,Object(c.a)(wo)),r=wo.slice(0,wo.length).findIndex((function(t,n){return e>=t&&(e<wo[n+1]||t===o)}));if(-1===r)i=e>=a&&e<=o?t?o:a:t?a:e;else{var l=t?r+1:r-(wo.includes(e)?1:0);i=wo[ei.withinRange(l,[0,wo.length-1])]}return i}var s=t?2:.5;return e*s},ko.wheelChangePos=function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=o.zoom,r=void 0===a?1:a,l=o.innerZoom,c=void 0===l?1:l,s=o.basicZoom,u=void 0===s?1:s,d=o.zoomMax,h=void 0===d?1e3:d,g=o.rotate,f=void 0===g?0:g,v=i.x,p=i.y,b=parseFloat((r+.1).toFixed(1))/5;if(e&&t){var m=e.width,y=e.height;[90,270].includes(f)&&(m=e.height,y=e.width);var C=m*c,I=y*c,x=t.x-v,w=t.y-p,k=x/C,S=w/I,P=r+n*b,L=m*(P=ei.withinRange(P,[u,h]))*k,A=y*P*S,O=v+(x-L),T=p+(w-A);return{zoom:P,currentPos:{x:O,y:T},imgInfo:{width:m*P,height:y*P},ratio:b}}return null};var So,Po=function(){function e(){Object(u.a)(this,e),this._events=new Map}return Object(d.a)(e,[{key:"on",value:function(e,t){var n=this._events.get(e)||[];n.some((function(e){return e===t}))||this._events.set(e,n.concat(t))}},{key:"singleOn",value:function(e,t){this._events.set(e,[t])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=this._events.get(e);o&&o.forEach((function(e){e&&e.apply(void 0,n)}))}},{key:"unbind",value:function(e,t){var n=this._events.get(e);n&&this._events.set(e,n.filter((function(e){return e!==t})))}},{key:"unbindAll",value:function(e){this._events.delete(e)}}]),e}(),Lo=Object.defineProperty,Ao=Object.defineProperties,Oo=Object.getOwnPropertyDescriptors,To=Object.getOwnPropertySymbols,Eo=Object.prototype.hasOwnProperty,Do=Object.prototype.propertyIsEnumerable,Mo=function(e,t,n){return t in e?Lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},No=function(e,t){for(var n in t||(t={}))Eo.call(t,n)&&Mo(e,n,t[n]);if(To){var i,o=Object(b.a)(To(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Do.call(t,n)&&Mo(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},Ro={min:.2,max:1e3,ratio:.4},Bo=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i,o,a,r,l,c,s,d,g,f;return Object(u.a)(this,n),(i=t.call(this)).isDrag=!1,i.isSpaceKey=!1,i.operationMode=xe.General,i.innerZoom=1,i.basicZoom=.01,i.isSpaceClick=!1,i.isDragStart=!1,i.startTime=0,i.zoomInfo=Ro,i.initImgPos=function(){return e=Object(h.a)(i),t=null,n=Object(mo.a)().mark((function e(){var t,n,i,o,a,r,l,c;return Object(mo.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.imgNode){e.next=2;break}return e.abrupt("return");case 2:i=null==(t=this._imgAttribute)?void 0:t.zoomRatio,o=null==(n=this._imgAttribute)?void 0:n.isOriginalSize,a=Io.getInitImgPos(this.size,{width:this.imgNode.width,height:this.imgNode.height},this.rotate,i,o),r=a.currentPos,l=a.imgInfo,c=a.zoom,this.setCurrentPos(r),this.currentPosStorage=r,this.setImgInfo(l),this.setZoom(c),this.render(),this.renderBasicCanvas(),this.emit("dependRender"),this.emit("renderZoom",c,r,l);case 13:case"end":return e.stop()}}),e,this)})),new Promise((function(i,o){var a=function(e){try{l(n.next(e))}catch(t){o(t)}},r=function(e){try{l(n.throw(e))}catch(t){o(t)}},l=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(a,r)};l((n=n.apply(e,t)).next())}));var e,t,n},i.getCurrentPos=function(e){var t=Object(h.a)(i),n=t._firstClickCoordinate,o=t.currentPosStorage;try{return n&&o?{y:o.y+e.y-n.y,x:o.x+e.x-n.x}:{x:0,y:0}}catch(a){return console.error(a),{x:0,y:0}}},i.wheelChangePos=function(e,t,n){var o=Object(h.a)(i),a=o.currentPos,r=o.imgNode;if(r){if(i.zoom!==i.basicZoom||-1!==t){var l=ko.wheelChangePos(r,e,t,a,{zoom:n||i.zoom,innerZoom:i.innerZoom,basicZoom:i.basicZoom,zoomMax:i.zoomInfo.max,rotate:i.rotate});if(l){var c=l.currentPos,s=l.ratio,u=l.zoom,d=l.imgInfo;i.setZoom(u),i.setCurrentPos(c),i.currentPosStorage=c,i.setImgInfo(d),i.zoomInfo.ratio=s,i.emit("renderZoom",u,c,d)}}}else console.error("unable to load image")},i.zoomChanged=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tt.Linear,n=ko.zoomChanged(i.zoom,e,t);i.wheelChangePos(i.getGetCenterCoordinate(),n>i.zoom?1:-1,n),i.render(),i.renderBasicCanvas()},i.zoomChangeOnCenter=function(e){i.wheelChangePos(i.getGetCenterCoordinate(),0,e),i.render(),i.renderBasicCanvas()},i.drawImg=function(){i.imgNode&&!0!==i.hiddenImg&&vo.drawImg(i.basicCanvas,i.imgNode,{zoom:i.zoom,currentPos:i.currentPos,rotate:i.rotate,imgAttribute:i._imgAttribute})},i.container=e.container,i.config=Et.jsonParser(e.config),i.showDefaultCursor=e.showDefaultCursor||!1,i.destroyCanvas(),i.createCanvas(e.size,e.isAppend),i.imgNode=e.imgNode,i.isImgError=!e.imgNode,i.basicImgInfo={width:null!=(a=null==(o=e.imgNode)?void 0:o.width)?a:0,height:null!=(l=null==(r=e.imgNode)?void 0:r.height)?l:0,valid:!0,rotate:0},i.forbidOperation=null!=(c=e.forbidOperation)&&c,i.forbidBasicResultRender=null!=(s=e.forbidBasicResultRender)&&s,i.size=e.size,i.currentPos={x:0,y:0},i.zoom=1,i.coord={x:-1,y:-1},i.currentPosStorage={x:0,y:0},i.isShowCursor=!1,i.style={strokeColor:Ri[4],fillColor:Ri[4],strokeWidth:2,opacity:1},i.attributeLockList=[],i.history=new yo,i.style=null!=(d=e.style)?d:Et.jsonParser(Zi),i._imgAttribute=null!=(g=e.imgAttribute)?g:{},i.isHidden=!1,i.dragStatus=Je.Wait,i.defaultAttribute=null!=(f=null==e?void 0:e.defaultAttribute)?f:"",i.forbidCursorLine=!!e.forbidCursorLine,i.lang=it.Zh,i.onMouseDown=i.onMouseDown.bind(Object(h.a)(i)),i.onMouseMove=i.onMouseMove.bind(Object(h.a)(i)),i.onMouseLeave=i.onMouseLeave.bind(Object(h.a)(i)),i.onMouseUp=i.onMouseUp.bind(Object(h.a)(i)),i.onKeyDown=i.onKeyDown.bind(Object(h.a)(i)),i.onKeyUp=i.onKeyUp.bind(Object(h.a)(i)),i.onWheel=i.onWheel.bind(Object(h.a)(i)),i.onLeftDblClick=i.onLeftDblClick.bind(Object(h.a)(i)),i.onRightDblClick=i.onRightDblClick.bind(Object(h.a)(i)),i.onClick=i.onClick.bind(Object(h.a)(i)),i.clearImgDrag=i.clearImgDrag.bind(Object(h.a)(i)),i.dblClickListener=new Co(i.container,200),i.coordUtils=new En(Object(h.a)(i)),i.coordUtils.setBasicImgInfo(i.basicImgInfo),i.hiddenImg=e.hiddenImg||!1,e.zoomInfo&&(i.zoomInfo=e.zoomInfo),i}return Object(d.a)(n,[{key:"onContextmenu",value:function(e){e.preventDefault()}},{key:"ctx",get:function(){var e;return this._ctx||(null==(e=this.canvas)?void 0:e.getContext("2d"))}},{key:"basicCtx",get:function(){var e;return null==(e=this.basicCanvas)?void 0:e.getContext("2d")}},{key:"rotate",get:function(){var e,t;return null!=(t=null==(e=this.basicImgInfo)?void 0:e.rotate)?t:0}},{key:"valid",get:function(){var e,t;return null==(t=null==(e=this.basicImgInfo)?void 0:e.valid)||t}},{key:"baseIcon",get:function(){return ji[this.style.color]}},{key:"defaultCursor",get:function(){return this.showDefaultCursor?"default":"none"}},{key:"dataList",get:function(){return[]}},{key:"innerPosAndZoom",get:function(){return{innerZoom:this.innerZoom,currentPosStorage:this.currentPosStorage}}},{key:"isShowDefaultCursor",get:function(){return this.showDefaultCursor}},{key:"isMultiMoveMode",get:function(){return this.operationMode===xe.MultiMove}},{key:"hasMarkerConfig",get:function(){return!0===this.config.markerConfigurable&&this.config.markerList&&this.config.markerList.length>0}},{key:"setZoom",value:function(e){this.zoom=e,this.innerZoom=e,this.coordUtils.setZoomAndCurrentPos(this.zoom,this.currentPos)}},{key:"setCurrentPos",value:function(e){this.currentPos=e,this.coordUtils.setZoomAndCurrentPos(this.zoom,this.currentPos)}},{key:"setReferenceData",value:function(e){this.referenceData=e}},{key:"setImgInfo",value:function(e){this.imgInfo=e}},{key:"setCurrentPosStorage",value:function(e){this.currentPosStorage=e}},{key:"setOperationMode",value:function(e){this.operationMode=e}},{key:"recoverOperationMode",value:function(){this.operationMode===xe.MultiMove&&this.setOperationMode(xe.General)}},{key:"updatePosition",value:function(e){var t=e.zoom,n=e.currentPos;this.setZoom(t),this.setCurrentPos(n),this.currentPosStorage=n,this.renderBasicCanvas(),this.render()}},{key:"setLang",value:function(e){this.lang=e}},{key:"setShowDefaultCursor",value:function(e){this.showDefaultCursor=e,this.container.style.cursor=this.defaultCursor}},{key:"setCustomCursor",value:function(e){this.container.style.cursor=e}},{key:"forbidMouseOperation",get:function(){return this.forbidOperation||!1===this.valid}},{key:"pixelRatio",get:function(){var e;return $i.getPixelRatio(null==(e=this.canvas)?void 0:e.getContext("2d"))}},{key:"init",value:function(){this.eventUnbinding(),this.initPosition(),this.eventBinding(),this.render(),this.renderBasicCanvas()}},{key:"destroy",value:function(){this.destroyCanvas(),this.eventUnbinding()}},{key:"updateCanvasBasicStyle",value:function(e,t,n){var i=this.pixelRatio;e.style.position="absolute",e.width=t.width*i,e.height=t.height*i,e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.left="0",e.style.top="0",e.style.zIndex="".concat(n," ")}},{key:"createCanvas",value:function(e){var t,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=this.pixelRatio,a=document.createElement("canvas");this.updateCanvasBasicStyle(a,e,0),this.basicCanvas=a;var r=document.createElement("canvas");this.updateCanvasBasicStyle(r,e,10),i&&(this.container.hasChildNodes()?(this.container.insertBefore(r,this.container.childNodes[0]),this.container.insertBefore(a,this.container.childNodes[0])):(this.container.appendChild(a),this.container.appendChild(r))),this.canvas=r,this.container.style.cursor=this.defaultCursor,null==(t=this.ctx)||t.scale(o,o),null==(n=this.basicCtx)||n.scale(o,o)}},{key:"destroyCanvas",value:function(){this.canvas&&this.container.contains(this.canvas)&&this.container.removeChild(this.canvas),this.basicCanvas&&this.container.contains(this.basicCanvas)&&this.container.removeChild(this.basicCanvas),this.clearInvalidPage(),this.clearImgDrag()}},{key:"setStyle",value:function(e){this.style=e,this.render()}},{key:"setImgNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.imgNode=e,this.setBasicImgInfo(No({width:e.width,height:e.height,valid:!0,rotate:0},t)),!0===this.isImgError&&(this.isImgError=!1,this.emit("changeAnnotationShow")),"boolean"===typeof t.valid&&this.setValid(t.valid),this.initImgPos(),this.render(),this.renderBasicCanvas()}},{key:"setErrorImg",value:function(){var e=this.isImgError;this.isImgError=!0,this.imgNode=void 0,this.setBasicImgInfo({width:0,height:0,valid:!0,rotate:0}),!1===e&&this.emit("changeAnnotationShow")}},{key:"setBasicImgInfo",value:function(e){this.basicImgInfo=e,this.coordUtils.setBasicImgInfo(e)}},{key:"setForbidOperation",value:function(e){this.forbidOperation=e,this.setShowDefaultCursor(e),this.render()}},{key:"setForbidCursorLine",value:function(e){this.forbidCursorLine=e,this.render()}},{key:"setIsHidden",value:function(e){this.isHidden=e,this.emit("hiddenChange")}},{key:"setDefaultAttribute",value:function(e){this.defaultAttribute=e}},{key:"getCoordinateInOrigin",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:(e.clientX-t.left-this.currentPos.x)/this.zoom,y:(e.clientY-t.top-this.currentPos.y)/this.zoom}}},{key:"getTextIconSvg",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return qi.getTextIconSvg(t,null==(e=this.config)?void 0:e.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"setIsShowOrder",value:function(e){this.config.isShowOrder=e,this.render()}},{key:"getCoordinate",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}},{key:"getCoordinateUnderZoom",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.left-this.currentPos.x,y:e.clientY-t.top-this.currentPos.y}}},{key:"getCoordinateUnderZoomByRotate",value:function(e){var t=this.getCoordinateUnderZoom(e),n=t.x,i=t.y;return 90===this.basicImgInfo.rotate?{x:i,y:this.basicImgInfo.height*this.zoom-n}:180===this.basicImgInfo.rotate?{x:this.basicImgInfo.width*this.zoom-n,y:this.basicImgInfo.height*this.zoom-i}:270===this.basicImgInfo.rotate?{x:this.basicImgInfo.width*this.zoom-i,y:n}:{x:n,y:i}}},{key:"getGetCenterCoordinate",value:function(){return{x:this.size.width/2,y:this.size.height/2}}},{key:"initPosition",value:function(){if(this.basicResult&&this.imgInfo){var e=this.basicResult,t=this.size,n=this.imgNode,i=this._imgAttribute,o=this.imgInfo,a=this.dependToolName;if(e&&n&&a){var r=e;switch(a){case D.Polygon:case D.Line:if(e.pointList){var l=ei.calcViewportBoundaries(e.pointList);r={x:l.left,y:l.top,width:l.right-l.left,height:l.bottom-l.top}}}var c=Io.getBasicRecPos(n,r,t,void 0,null==i?void 0:i.zoomRatio,null==i?void 0:i.isOriginalSize);c&&(this.setCurrentPos(c.currentPos),this.currentPosStorage=this.currentPos,this.setImgInfo((s=No({},o),u={width:o.width/this.innerZoom*c.innerZoom,height:o.height/this.innerZoom*c.innerZoom},Ao(s,Oo(u)))),this.setZoom(c.innerZoom),this.render(),this.renderBasicCanvas())}}else this.initImgPos();var s,u}},{key:"undo",value:function(){this.history.undo()}},{key:"redo",value:function(){this.history.redo()}},{key:"clearCanvas",value:function(){var e;null==(e=this.ctx)||e.clearRect(0,0,this.size.width,this.size.height)}},{key:"clearBasicCanvas",value:function(){var e;null==(e=this.basicCtx)||e.clearRect(0,0,this.size.width,this.size.height)}},{key:"eventBinding",value:function(){this.dblClickListener.addEvent((function(){}),this.onLeftDblClick,this.onRightDblClick),this.container.addEventListener("mousedown",this.onMouseDown),this.container.addEventListener("mousemove",this.onMouseMove),this.container.addEventListener("mouseup",this.onMouseUp),this.container.addEventListener("mouseleave",this.onMouseLeave),this.container.addEventListener("click",this.onClick),this.container.addEventListener("wheel",this.onWheel),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),window.parent.document.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"eventUnbinding",value:function(){this.container.removeEventListener("mousedown",this.onMouseDown),this.container.removeEventListener("mousemove",this.onMouseMove),this.container.removeEventListener("mouseup",this.onMouseUp),this.container.removeEventListener("mouseleave",this.onMouseLeave),this.container.removeEventListener("wheel",this.onWheel),this.container.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),window.parent.document.removeEventListener("contextmenu",this.onContextmenu,!1),this.dblClickListener.removeEvent()}},{key:"clearImgDrag",value:function(){this.isDrag=!1,this.isDragStart=!1,this.isSpaceClick=!1,this.startTime=0,this.container.style.cursor=this.defaultCursor,this.forbidCursorLine=!1}},{key:"clearCursorLine",value:function(){this.coord={x:-1,y:-1}}},{key:"onMouseDown",value:function(e){if(!this.canvas||this.isImgError)return!0;var t=this.getCoordinate(e);(this.isSpaceKey&&0===e.button||2===e.button)&&(e.stopPropagation(),this._firstClickCoordinate=t,this.currentPosStorage=this.currentPos,this.isSpaceClick=!0,this.isDragStart=!0,this.startTime=(new Date).getTime())}},{key:"onMouseMove",value:function(e){if(!this.canvas||this.isImgError)return!0;var t=this.getCoordinate(e);this.isShowCursor&&(this.coord=t);try{if(!t||!Object(m.isNumber)(null==t?void 0:t.x)||!Object(m.isNumber)(null==t?void 0:t.y))throw new Error("coord error");if(this.coord=t,(this.isSpaceClick||this.isDragStart)&&this._firstClickCoordinate){var n=this.getCurrentPos(t);this.setCurrentPos(n),this.isDrag=!0,this.container.style.cursor="grabbing",this.forbidCursorLine=!0,this.renderBasicCanvas(),this.emit("dependRender"),this.emit("dragMove",{currentPos:n,zoom:this.zoom,imgInfo:this.imgInfo})}this.render()}catch(i){console.error(i)}}},{key:"onMouseUp",value:function(e){if(!this.canvas||this.isImgError)return!0;if(this.container.style.cursor=this.defaultCursor,this.forbidCursorLine=!1,this.isDrag=!1,this.isDragStart=!1,this.isSpaceClick=!1,0!==this.startTime&&this._firstClickCoordinate){var t=(new Date).getTime(),n=this.getCoordinate(e);if(t-this.startTime>1e3||!0===this.isSpaceKey||Gt.calcTwoPointDistance(n,this._firstClickCoordinate)>10)return e.stopPropagation(),this.startTime=0,this.render(),!0}this.startTime=0,this.render()}},{key:"onMouseLeave",value:function(){this.clearImgDrag()}},{key:"onClick",value:function(e){}},{key:"onLeftDblClick",value:function(e){}},{key:"onRightDblClick",value:function(e){this.clearImgDrag()}},{key:"onKeyDown",value:function(e){switch(e.keyCode===fi.Alt&&e.preventDefault(),e.keyCode){case fi.Space:this.isSpaceKey=!0;break;case fi.Z:if(e.ctrlKey)return e.shiftKey?this.redo():this.undo(),!1}return!0}},{key:"onKeyUp",value:function(e){if(e.keyCode===fi.Space)this.isSpaceKey=!1}},{key:"exportCustomData",value:function(){return{}}},{key:"onWheel",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.imgNode&&this.coord){e.preventDefault(),e.stopPropagation();var n=this.getCoordinate(e),i=e.deltaY||e.wheelDelta,o=0;i>0&&this.zoom>this.zoomInfo.min&&(o=-1),i<0&&this.zoom<this.zoomInfo.max&&(o=1),this.wheelChangePos(n,o),this.emit("dependRender"),t&&this.render(),this.renderBasicCanvas()}}},{key:"renderCursorLine",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null!=(e=t.style.lineColor[0])?e:"";if(this.ctx&&!this.forbidCursorLine&&!this.forbidOperation){var i=this.coord,o=i.x,a=i.y;vo.drawLine(this.canvas,{x:0,y:a},{x:1e4,y:a},{color:n}),vo.drawLine(this.canvas,{x:o,y:0},{x:o,y:1e4},{color:n}),vo.drawCircleWithFill(this.canvas,{x:o,y:a},1,{color:"white"})}}},{key:"setSize",value:function(e){var t;this.size=e,this.container.contains(this.canvas)&&(this.destroyCanvas(),this.createCanvas(e),this.eventUnbinding(),this.init(),!1===(null==(t=this.basicImgInfo)?void 0:t.valid)&&this.renderInvalidPage())}},{key:"setImgAttribute",value:function(e){var t=this._imgAttribute;this._imgAttribute=e,(null==t?void 0:t.zoomRatio)===e.zoomRatio&&t.isOriginalSize===e.isOriginalSize?(this.renderBasicCanvas(),this.render()):this.initImgPos()}},{key:"clearResult",value:function(e){}},{key:"setValid",value:function(e){this.basicImgInfo.valid=e,!1===e?(this.renderInvalidPage(),this.clearResult(!1)):this.clearInvalidPage()}},{key:"setRotate",value:function(e){this.basicImgInfo.rotate=e}},{key:"setBasicResult",value:function(e){this.basicResult=e,this.coordUtils.setBasicResult(e),this.initPosition(),this.emit("dependRender")}},{key:"setDependName",value:function(e,t){this.dependToolName=e,this.coordUtils.setDependInfo(e,t)}},{key:"setAttributeLockList",value:function(e){this.attributeLockList=e,this.render()}},{key:"setConfig",value:function(e){this.config=Et.jsonParser(e)}},{key:"setDataInjectionAtCreation",value:function(e){this.dataInjectionAtCreation=e}},{key:"setRenderEnhance",value:function(e){this.renderEnhance=e}},{key:"setCustomRenderStyle",value:function(e){this.customRenderStyle=e}},{key:"updateRotate",value:function(){if(this.dependToolName)return this.emit("messageInfo",mi.getMessagesByLocale(di.NoRotateInDependence,this.lang)),!1;if(this.dataList.length>0)return this.emit("messageInfo",mi.getMessagesByLocale(di.NoRotateNotice,this.lang)),!1;var e=ei.getRotate(this.basicImgInfo.rotate);this.basicImgInfo.rotate=e,this.initImgPos(),this.emit("updateResult")}},{key:"getColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config;return Ci.toolStyleConverter.getColorByConfig({attribute:e,config:t,style:this.style})}},{key:"getLineColor",value:function(){var e,t,n,i,o,a,r,l,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!0===(null==(e=this.config)?void 0:e.attributeConfigurable)){var s=qi.getAttributeIndex(c,null!=(n=null==(t=this.config)?void 0:t.attributeList)?n:[])+1,u=null==(a=null==(o=null==(i=this.config)?void 0:i.attributeList)?void 0:o.find((function(e){return e.value===c})))?void 0:a.color;return u?null==(l=null==(r=Ci.toolStyleConverter.getColorByConfig({attribute:c,config:this.config}))?void 0:r.valid)?void 0:l.stroke:this.style.attributeLineColor?this.style.attributeLineColor[s]:""}var d=this.style,h=d.color,g=d.lineColor;return h&&g?g[h]:""}},{key:"clearInvalidPage",value:function(){this._invalidDOM&&this.container&&this.container.contains(this._invalidDOM)&&(this.container.removeChild(this._invalidDOM),this._invalidDOM=void 0)}},{key:"renderInvalidPage",value:function(){this.container&&!this._invalidDOM&&(this._invalidDOM=xo.renderInvalidPage(this.container,this.size,this.lang))}},{key:"renderBasicCanvas",value:function(){if(this.basicCanvas){this.clearBasicCanvas(),this.drawImg();if(!this.forbidBasicResultRender&&this.basicResult&&this.dependToolName)switch(this.dependToolName){case D.Rect:vo.drawRect(this.basicCanvas,Tn.changeRectByZoom(this.basicResult,this.zoom,this.currentPos),{color:"rgba(204,204,204,1.00)",thickness:3});break;case D.Polygon:vo.drawPolygonWithFillAndLine(this.basicCanvas,Tn.changePointListByZoom(this.basicResult.pointList,this.zoom,this.currentPos),{fillColor:"transparent",strokeColor:"rgba(204,204,204,1.00)",isClose:!0,thickness:3});break;case D.Line:vo.drawLineWithPointList(this.basicCanvas,Tn.changePointListByZoom(this.basicResult.pointList,this.zoom,this.currentPos),{color:"rgba(204,204,204,1.00)",thickness:3})}}}},{key:"render",value:function(){this.canvas&&this.ctx&&this.imgNode&&this.clearCanvas()}},{key:"changeStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultAttribute;this.emit("changeStyle",{attribute:e})}}]),n}(Po),jo=function(){function e(t){var n=this;Object(u.a)(this,e),this.textKeyDown=function(e){if(e.stopPropagation(),e.keyCode===fi.Enter)n.submitTextarea(),n.appendToContainer()};var i=t.container,o=t.icon,a=t.color,r=t.getCurrentSelectedData,l=t.updateSelectedTextAttribute,c=t.width||164;this.container=i,this.getCurrentSelectedData=r,this.updateSelectedTextAttribute=l,this._textAttributeDOM=this.initTextAttributeDOM(),this._iconDOM=this.initIconDOM(o),this._textDOM=this.initTextDOM(c,ve),this._textareaDOM=this.initTextareaDOM(c,a),this.appendToContainer()}return Object(d.a)(e,[{key:"isExit",get:function(){return!!this._textAttributeDOM&&this.container.contains(this._textAttributeDOM)}},{key:"isExitTextareaDOM",get:function(){return!!this._textareaDOM&&this.container.contains(this._textareaDOM)}},{key:"updateIcon",value:function(e){this._iconDOM&&(this._iconDOM.innerHTML=e)}},{key:"appendToContainer",value:function(){this._textAttributeDOM&&this._textDOM&&this._iconDOM&&(this.container.appendChild(this._textAttributeDOM),this._textAttributeDOM.appendChild(this._textDOM),this._textAttributeDOM.appendChild(this._iconDOM))}},{key:"initTextAttributeDOM",value:function(){var e=document.createElement("div");return e.setAttribute("id","textArea"),e}},{key:"initTextDOM",value:function(e,t){var n=document.createElement("span");return n.setAttribute("style","\n        width: ".concat(Math.max(e,30),"px;\n        line-height: ").concat(t,"px;\n        word-break: break-all;\n        white-space: pre-line;\n        font-style: italic;\n      ")),n}},{key:"initIconDOM",value:function(e){var t=this,n=document.createElement("div");return n.setAttribute("id","annotation_text"),n.innerHTML=e,n.addEventListener("mouseup",(function(e){e.stopPropagation(),t.renderTextarea()})),n.addEventListener("mousedown",(function(e){e.stopPropagation()})),n.addEventListener("contextmenu",(function(e){e.stopPropagation()})),n.setAttribute("style","\n        position: absolute;\n        left: -20px;\n        top: 4px;\n        cursor: pointer;\n        z-index: 10\n      "),n}},{key:"initTextareaDOM",value:function(e,t){var n=document.createElement("textarea");return n.addEventListener("click",(function(e){e.stopPropagation()})),n.addEventListener("mouseup",(function(e){e.stopPropagation()})),n.setAttribute("style","\n      background-color: transparent;\n      border-radius: 5px;\n      border-color: ".concat(t,";\n      outline: none;\n      resize: none;\n      width: ").concat(Math.max(e,30),"px;\n      ")),n.setAttribute("maxLength","".concat(fe)),n}},{key:"removeTextDOM",value:function(){this._textAttributeDOM&&this._textDOM&&this._textAttributeDOM.removeChild(this._textDOM)}},{key:"removeIconDOM",value:function(){this._textAttributeDOM&&this._iconDOM&&this._textAttributeDOM.removeChild(this._iconDOM)}},{key:"removeTextareaDOM",value:function(){var e,t;this._textareaDOM&&this._textAttributeDOM&&(null==(e=this._textAttributeDOM)?void 0:e.contains(this._textareaDOM))&&(null==(t=this._textAttributeDOM)||t.removeChild(this._textareaDOM))}},{key:"submitTextarea",value:function(){var e;this._textareaDOM&&(this.updateSelectedTextAttribute(null==(e=this._textareaDOM)?void 0:e.value),this.removeTextareaDOM(),this.clearTextAttribute())}},{key:"clearTextAttribute",value:function(){this._textAttributeDOM&&this.container.contains(this._textAttributeDOM)&&this.container.removeChild(this._textAttributeDOM)}},{key:"renderTextarea",value:function(){if(this._textAttributeDOM&&this._textareaDOM){var e=this.getCurrentSelectedData();if(e){var t=e.width,n=void 0===t?164:t,i=e.textAttribute,o=e.color;this._textareaDOM.value="".concat(i),this._textareaDOM.setAttribute("style","\n      background-color: rgba(0,0,0,0.4);\n      border-radius: 5px;\n      border-color: ".concat(o,";\n      outline: none;\n      resize: none;\n      font-style: italic;\n      font-weight: 900;\n      text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.6);\n      width: ").concat(Math.max(n,30),"px;\n      ")),this._textareaDOM.setAttribute("maxLength","".concat(fe)),this._textAttributeDOM.appendChild(this._textareaDOM),this.removeIconDOM(),this.removeTextDOM(),this._textareaDOM.focus(),this._textareaDOM.addEventListener("keydown",this.textKeyDown)}}}},{key:"update",value:function(e,t){var n,i=t.left,o=t.top,a=t.color,r=t.width,l=void 0===r?164:r,c=Math.max(l,30);null==(n=this._textAttributeDOM)||n.setAttribute("style","\n        position: absolute; \n        width: ".concat(c,"px;\n        font-size: 14px; \n        left:").concat(i,"px; \n        top: ").concat(o,"px; \n        color: ").concat(a,";\n      ")),this._textDOM&&(this._textDOM.innerHTML="".concat(e)),this._textareaDOM&&(this._textareaDOM.style.width="".concat(c,"px"),this._textareaDOM.style.borderColor="".concat(a))}},{key:"selectedIDsChanged",value:function(e,t){if(1===e.length&&1===t.length){if(Object(m.isEqual)(e,t))return;null==this||this.changeSelected()}1!==(null==t?void 0:t.length)&&(this.removeTextareaDOM(),null==this||this.clearTextAttribute())}},{key:"changeSelected",value:function(){this.isExitTextareaDOM&&this.submitTextarea()}}]),e}(),_o=function(){function e(t){Object(u.a)(this,e),t||console.error("MultipleSelect is require a tool instance"),this._selectedIDs=[],this.toolInstance=t}return Object(d.a)(e,[{key:"selectedIDs",get:function(){return this._selectedIDs},set:function(e){var t;null==(t=this.toolInstance._textAttributeInstance)||t.selectedIDsChanged(this.selectedIDs,e),this._selectedIDs=e,this.toolInstance.render()}},{key:"selectedID",get:function(){return 1===this._selectedIDs.length?this._selectedIDs[0]:void 0}},{key:"visibleDataList",get:function(){var e=this.toolInstance,t=e.dataList,n=e.attributeLockList,i=e.basicResult,o=Et.getRenderResultList(t,Et.getSourceID(i),n);return Object(s.a)(o,1)[0]}},{key:"dataList",get:function(){return this.toolInstance.dataList}},{key:"updateSelectedIDs",value:function(e){e?this.selectedIDs.includes(e)?this.selectedIDs=this.selectedIDs.filter((function(t){return t!==e})):this.selectedIDs=[].concat(Object(c.a)(this.selectedIDs),[e]):this._selectedIDs=[]}},{key:"setSelectedIDs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?this.updateSelectedIDs(e):this.selectedIDs=e?[e]:[]}},{key:"hardSetSelectedIDs",value:function(e){this.selectedIDs=e}},{key:"selectAll",value:function(){this.selectedIDs=this.visibleDataList.map((function(e){return e.id})),this.toolInstance.render()}},{key:"toStashDataList",value:function(){var e=this;this.selectedIDs.length>0&&(this.stashDataList=y.a.cloneDeep(this.dataList.filter((function(t){return e.selectedIDs.includes(t.id)}))))}},{key:"toUnStashDataList",value:function(){if(this.stashDataList){var e=this.stashDataList;return this.stashDataList=void 0,e}}},{key:"mergeStashData",value:function(e){var t=this.toUnStashDataList();t&&(e(y()(this.dataList).keyBy("id").merge(y.a.keyBy(t,"id")).values().value()),this.toolInstance.render())}},{key:"isIdSelected",value:function(e){return this.selectedIDs.includes(e)}},{key:"triggerKeyboardEvent",value:function(e,t){if(e.ctrlKey){if("v"===e.key)return this.mergeStashData(t),!0;if("a"===e.key)return this.selectAll(),!0;if("c"===e.key)return this.toStashDataList(),!0}return!1}}]),e}(),Ho=Object.defineProperty,Vo=Object.defineProperties,Fo=Object.getOwnPropertyDescriptors,Zo=Object.getOwnPropertySymbols,zo=Object.prototype.hasOwnProperty,Uo=Object.prototype.propertyIsEnumerable,Go=function(e,t,n){return t in e?Ho(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Wo=function(e,t){for(var n in t||(t={}))zo.call(t,n)&&Go(e,n,t[n]);if(Zo){var i,o=Object(b.a)(Zo(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Uo.call(t,n)&&Go(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},Ko=function(e,t){return Vo(e,Fo(t))},Yo=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).setMarkerIndex=function(e){i.markerIndex=e},i.setMarkerIndexAndSelect=function(e){if(i.config.markerList){i.markerIndex=e;var t=i.config.markerList[e].value,n=i.currentPageResult.find((function(e){return e.label===t}));n&&(i.setSelectedRectID(n.id),!0===i.config.attributeConfigurable&&i.setDefaultAttribute(n.attribute)),i.emit("markIndexChange")}},i.getHoverRectID=function(e){var t=i.getCoordinateUnderZoom(e),n=Object(h.a)(i).currentShowList;if(n.length>0){if(i.selectedRectID){var o=Object(h.a)(i).selectedRect;if(o&&ui.isInRect(t,o,6,i.zoom))return o.id}var a=n.filter((function(e){return ui.isInRect(t,e,6,i.zoom)}));if(0===a.length)return"";if(1===a.length)return a[0].id;if(a.length>1)return a.map((function(e){return{size:e.width*e.height,id:e.id}})).sort((function(e,t){return e.size-t.size}))[0].id}return""},i.textChange=function(e){!0===i.config.textConfigurable&&i.selectedRectID&&(i.setRectList(qi.textChange(e,i.selectedRectID,i.rectList),!0),i.emit("selectedChange"),i.render())},i.drawOutSideTarget=e.drawOutSideTarget||!1,i.rectList=[],i.isFlow=!0,i.config=Et.jsonParser(e.config),i.hoverRectEdgeIndex=-1,i.hoverRectPointIndex=-1,i.markerIndex=0,i.setStyle(e.style),i.createNewDrawingRect=i.createNewDrawingRect.bind(Object(h.a)(i)),i.getDrawingRectWithRectList=i.getDrawingRectWithRectList.bind(Object(h.a)(i)),i.setSelectedIdAfterAddingDrawingRect=i.setSelectedIdAfterAddingDrawingRect.bind(Object(h.a)(i)),i.getCurrentSelectedData=i.getCurrentSelectedData.bind(Object(h.a)(i)),i.updateSelectedRectTextAttribute=i.updateSelectedRectTextAttribute.bind(Object(h.a)(i)),i.setSelectedID=i.setSelectedID.bind(Object(h.a)(i)),i.selection=new _o(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"setResult",value:function(e){if(this.clearActiveStatus(),this.setRectList(e),this.hasMarkerConfig){var t=Et.getNextMarker(this.getCurrentPageResult(e),this.config.markerList);t&&this.setMarkerIndex(t.index)}this.render()}},{key:"destroy",value:function(){Object(g.a)(Object(f.a)(n.prototype),"destroy",this).call(this),this._textAttributeInstance&&this._textAttributeInstance.clearTextAttribute()}},{key:"setConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.config=Et.jsonParser(e),!0===t&&this.clearResult(!1)}},{key:"setRectList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.rectList.length;this.rectList=e,n!==e.length&&this.emit("updatePageNumber"),t&&this.emit("updateResult")}},{key:"selectedRectID",get:function(){return 1===this.selectedIDs.length?this.selectedIDs[0]:void 0}},{key:"selectedID",get:function(){return this.selectedRectID}},{key:"selectedRect",get:function(){return 1===this.selectedRects.length?this.selectedRects[0]:void 0}},{key:"selectedIDs",get:function(){return this.selection.selectedIDs}},{key:"selectedRects",get:function(){var e=this;return this.rectList.filter((function(t){return e.selectedIDs.includes(t.id)}))}},{key:"selectedText",get:function(){var e;return null==(e=this.selectedRect)?void 0:e.textAttribute}},{key:"dataList",get:function(){return this.rectList}},{key:"currentShowList",get:function(){var e,t=[],n=Et.getRenderResultList(this.rectList,Et.getSourceID(this.basicResult),this.attributeLockList,this.selectedIDs),i=Object(s.a)(n,2),o=i[0],a=i[1];(t=o,this.isHidden&&(t=[]),a)&&(e=t).push.apply(e,Object(c.a)(a));return t}},{key:"currentPageResult",get:function(){var e=Et.getRenderResultList(this.rectList,Et.getSourceID(this.basicResult),[]);return Object(s.a)(e,1)[0]}},{key:"getCurrentPageResult",value:function(e){var t=Et.getRenderResultList(e,Et.getSourceID(this.basicResult),[]);return Object(s.a)(t,1)[0]}},{key:"setSelectedID",value:function(e){this.setSelectedRectID(e)}},{key:"setSelectedRectID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.selection.setSelectedIDs(e,t),this.render(),this.emit("selectedChange")}},{key:"setStyle",value:function(e){var t;Object(g.a)(Object(f.a)(n.prototype),"setStyle",this).call(this,e),this._textAttributeInstance&&!1===this.config.attributeConfigurable&&(null==(t=this._textAttributeInstance)||t.updateIcon(this.getTextIconSvg()))}},{key:"updateSelectedRectTextAttribute",value:function(e){var t=this;if(this._textAttributeInstance&&e&&this.selectedRectID){var n=e;!1===qi.textAttributeValidate(this.config.textCheckType,"",n)&&(this.emit("messageError",qi.getErrorNotice(this.config.textCheckType,this.lang)),n=""),this.setRectList(this.rectList.map((function(e){return e.id===t.selectedRectID?Ko(Wo({},e),{textAttribute:n}):e})),!0),this.emit("updateTextAttribute"),this.render()}}},{key:"getHoverRectPointIndex",value:function(e){return this.selectedRect?Tn.returnClosePointIndex(this.getCoordinateUnderZoom(e),ui.getRectPointList(this.selectedRect,this.zoom),8):-1}},{key:"getHoverRectEdgeIndex",value:function(e){if(!this.selectedRect)return-1;for(var t=-1,n=this.selectedRect,i=ui.getRectEdgeList(n,this.zoom),o=this.getCoordinateUnderZoom(e),a=0;a<i.length;a++){var r=i[a];ei.getFootOfPerpendicular(o,r.begin,r.end).length<16&&(t=a)}return t}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return qi.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"onMouseDown",value:function(e){var t=this;if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation&&!0!==e.ctrlKey){var i=this.getCoordinateUnderZoom(e),o=this.getHoverRectID(e);if(2!==e.button&&(0!==e.button||!0!==this.isSpaceKey)){if(this.selectedRectID){var a=this.currentShowList.find((function(e){return e.id===t.selectedRectID}));if(!a)return;if(this.getHoverRectPointIndex(e)>-1){var r=ee.Point;return this.dragInfo={dragStartCoord:i,dragTarget:r,startTime:+new Date,firstRect:a},void(this.dragStatus=Je.Start)}if(this.getHoverRectEdgeIndex(e)>-1){var l=ee.Line;return this.dragInfo={dragStartCoord:i,dragTarget:l,startTime:+new Date,firstRect:a},void(this.dragStatus=Je.Start)}}if(this.selection.isIdSelected(o)&&!this.drawingRect){var c=ee.Plane;this.dragInfo={dragStartCoord:i,dragTarget:c,firstRect:this.selectedRect,startTime:+new Date,originRectList:this.selectedRects},this.dragStatus=Je.Start}}}}},{key:"appendOffsetRect",value:function(e,t){return Ko(Wo({},e),{x:e.x+t.x/this.zoom,y:e.y+t.y/this.zoom})}},{key:"getRectsBoundaries",value:function(e,t){var n=this,i=e.reduce((function(e,i){return e.concat.apply(e,Object(c.a)(ui.getRectPointList(n.appendOffsetRect(i,t))))}),[]);return ei.calcViewportBoundaries(i)}},{key:"isRectsOutOfTarget",value:function(e,t){var n,i,o,a;if(!1!==this.config.drawOutsideTarget)return!1;var r=this.getRectsBoundaries(e,t),l={y:r.top,x:r.left,height:r.bottom-r.top,width:r.right-r.left};if((null==(i=null==(n=this.basicResult)?void 0:n.pointList)?void 0:i.length)>0)return ui.isRectNotInPolygon(l,Ze(this.basicResult.pointList,this.zoom));if(this.basicResult||this.imgInfo){var c=this.basicResult?this.basicResult:{x:0,y:0,height:null==(o=this.imgNode)?void 0:o.height,width:null==(a=this.imgNode)?void 0:a.width};if(c)return[{x:r.left,y:r.top},{x:r.right,y:r.bottom}].some((function(e){return!ui.isInRect(e,c)}))}return!1}},{key:"moveRects",value:function(e){var t,n=this;if(null==(t=this.dragInfo)?void 0:t.originRectList){var i=y.a.cloneDeep(this.dragInfo.originRectList);if(this.isRectsOutOfTarget(i,e))return;i=this.dragInfo.originRectList.map((function(t){return Ko(Wo({},t),{x:t.x+e.x/n.zoom,y:t.y+e.y/n.zoom})})),this.setRectList(this.rectList.map((function(e){var t=i.find((function(t){return t.id===e.id}));return t||e})))}}},{key:"onDragMoveAll",value:function(e){var t,n,i=this;(null==(n=null==(t=this.dragInfo)?void 0:t.originRectList)?void 0:n.length)&&(this.setRectList(this.dragInfo.originRectList.map((function(t){return Ko(Wo({},t),{x:t.x+e.x/i.zoom,y:t.y+e.y/i.zoom})}))),this.render())}},{key:"onDragMove",value:function(e){var t,n,i,o,a=this;if(this.dragInfo){var r={x:e.x-this.dragInfo.dragStartCoord.x,y:e.y-this.dragInfo.dragStartCoord.y};if(this.dragStatus=Je.Move,this.dragInfo.dragTarget!==ee.Plane){if(this.dragInfo.firstRect){var l=ui.getRectUnderZoom(this.dragInfo.firstRect,this.zoom),c=l.x,s=l.y,u=l.width,d=l.height,h=this.rectList.filter((function(e){return e.id===a.selectedRectID}))[0];switch(this.dragInfo.dragTarget){case ee.Point:var g=c,f=s,v=u,p=d;switch(this.hoverRectPointIndex){case 0:g=u-r.x<0?c+u:c+r.x,f=d-r.y<0?s+d:s+r.y,v=Math.abs(r.x-u),p=Math.abs(r.y-d);break;case 1:g=u+r.x>0?c:c+u+r.x,f=d-r.y<0?s+d:s+r.y,v=Math.abs(u+r.x),p=Math.abs(d-r.y);break;case 2:g=u+r.x>0?c:c+u+r.x,f=d+r.y>0?s:s+d+r.y,v=Math.abs(u+r.x),p=d+r.y>0?d+r.y:Math.abs(d+r.y);break;case 3:g=u-r.x<0?c+u:c+r.x,f=d+r.y>0?s:s+d+r.y,v=Math.abs(r.x-u),p=d+r.y>0?d+r.y:Math.abs(d+r.y);break;default:return}h=Ko(Wo({},h),{x:g,y:f,width:v,height:p});break;case ee.Line:var b=c,m=s,y=u,C=d;switch(this.hoverRectEdgeIndex){case 0:m=d-r.y<0?s+d:s+r.y,C=Math.abs(r.y-d);break;case 1:b=u+r.x>0?c:c+u+r.x,y=Math.abs(u+r.x);break;case 2:m=d+r.y>0?s:s+d+r.y,C=d+r.y>0?d+r.y:Math.abs(d+r.y);break;case 3:b=u-r.x<0?c+u:c+r.x,y=Math.abs(r.x-u);break;default:return}h=Ko(Wo({},h),{x:b,y:m,width:y,height:C});break;default:return}if(!1===this.config.drawOutsideTarget)if(this.basicResult){if((null==(n=null==(t=this.basicResult)?void 0:t.pointList)?void 0:n.length)>0&&ui.isRectNotInPolygon(h,Ze(this.basicResult.pointList,this.zoom)))return;var I=this.basicResult.x*this.zoom,x=this.basicResult.y*this.zoom,w=this.basicResult.width*this.zoom,k=this.basicResult.height*this.zoom;if(h.x<I-.01||h.y<x-.01||h.width>I+w-h.x+.01||h.height>x+k-h.y+.01)return;if(h.x<I&&(h.x=I),h.y<x&&(h.y=x),h.width>I+w-h.x)switch(this.dragInfo.dragTarget){case ee.Point:case ee.Line:r.x>0&&r.y>0&&(h.width=I+w-h.x);break;default:return}h.height>x+k-h.y&&this.dragInfo.dragTarget}else if(h.x<0&&(h.x=0),h.y<0&&(h.y=0),this.imgInfo&&(this.dragInfo.dragTarget,h.x+h.width>(null==(i=this.imgInfo)?void 0:i.width)+.01||h.y+h.height>(null==(o=this.imgInfo)?void 0:o.height)+.01))return;this.setRectList(this.rectList.map((function(e){return e.id===h.id?ui.getRectUnderZoom(h,1/a.zoom):e}))),this.render()}}else this.moveRects(r)}}},{key:"onMouseMove",value:function(e){var t,i;if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var o=this.getCoordinateUnderZoom(e),a=Tn.changeDrawOutsideTarget(o,{x:0,y:0},this.imgInfo,this.config.drawOutsideTarget,this.basicResult,this.zoom);if(this.selectedIDs.length>0&&this.dragInfo)this.onDragMove(a);else{if(this.selectedRectID){var r=this.getHoverRectPointIndex(e);if(r!==this.hoverRectPointIndex)return this.hoverRectPointIndex=r,this.hoverRectEdgeIndex=-1,void this.render();if(-1===this.hoverRectPointIndex){var l=this.getHoverRectEdgeIndex(e);if(l!==this.hoverRectEdgeIndex)return this.hoverRectEdgeIndex=l,void this.render()}}var c=this.getHoverRectID(e),s=this.hoverRectID;if(this.hoverRectID=c,c!==s&&this.render(),this.drawingRect&&this.firstClickCoord){var u=this.firstClickCoord,d=u.x,h=u.y,v=this.drawingRect,p=v.width,b=v.height;if(p=Math.abs(d-a.x),b=Math.abs(h-a.y),a.x<d&&(d=a.x),a.y<h&&(h=a.y),!1===this.config.drawOutsideTarget){if((null==(i=null==(t=this.basicResult)?void 0:t.pointList)?void 0:i.length)>0&&ui.isRectNotInPolygon(Ko(Wo({},this.drawingRect),{x:d,y:h,width:p,height:b}),Ze(this.basicResult.pointList,this.zoom)))return;a.x<0&&(p=Math.abs(this.firstClickCoord.x),d=0),a.y<0&&(b=Math.abs(this.firstClickCoord.y),h=0),this.imgInfo&&(d+p>this.imgInfo.width&&(p=Math.abs(this.imgInfo.width-d)),h+b>this.imgInfo.height&&(b=Math.abs(this.imgInfo.height-h)))}this.drawingRect=Ko(Wo({},this.drawingRect),{x:d,y:h,width:p,height:b}),this.render()}}}}},{key:"setAttributeLockList",value:function(e){this.setSelectedRectID(void 0),Object(g.a)(Object(f.a)(n.prototype),"setAttributeLockList",this).call(this,e)}},{key:"setBasicResult",value:function(e){Object(g.a)(Object(f.a)(n.prototype),"setBasicResult",this).call(this,e),this.clearActiveStatus()}},{key:"setRectValidAndRender",value:function(e){e&&(this.setRectList(this.rectList.map((function(t){return t.id===e?Ko(Wo({},t),{valid:!t.valid}):t})),!0),this.render(),this.emit("updateResult"))}},{key:"createNewDrawingRect",value:function(e,t){if(this.imgInfo){var n=this.getCoordinateUnderZoom(e),i=Tn.changeDrawOutsideTarget(n,{x:0,y:0},this.imgInfo,this.config.drawOutsideTarget,this.basicResult,this.zoom);if(this.setSelectedRectID(""),this.hoverRectID="",this.drawOutSideTarget&&(i.x<0&&(i.x=0),i.y<0&&(i.y=0)),this.drawingRect=Ko(Wo({},i),{width:0,height:0,attribute:this.defaultAttribute,valid:!e.ctrlKey,id:bo(8,62),sourceID:t,textAttribute:""}),this.hasMarkerConfig){var o=Et.getNextMarker(this.currentPageResult,this.config.markerList,this.markerIndex);if(!o)return this.emit("messageInfo",mi.getMessagesByLocale(di.MarkerFinish,this.lang)),void(this.drawingRect=void 0);this.drawingRect&&(this.drawingRect=Ko(Wo({},this.drawingRect),{label:o.label})),this.markerIndex=o.index,this.emit("markIndexChange")}if(this.config.textConfigurable){var a;a=qi.getTextAttribute(this.rectList.filter((function(e){return Et.isSameSourceID(e.sourceID,t)})),this.config.textCheckType),this.drawingRect&&(this.drawingRect=Ko(Wo({},this.drawingRect),{textAttribute:a}))}if(Object.assign(this.drawingRect,{order:Et.getMaxOrder(this.rectList.filter((function(e){return Et.isSameSourceID(e.sourceID,t)})))+1}),this.firstClickCoord=Wo({},i),this.firstCurrentPos=Wo({},this.currentPos),this.dataInjectionAtCreation){var r=this.dataInjectionAtCreation(this.drawingRect);r&&Object.assign(this.drawingRect,r)}}}},{key:"addDrawingRectToRectList",value:function(){if(this.drawingRect){var e=this.drawingRect,t=e.width,n=e.height;if(t/=this.zoom,n/=this.zoom,Math.round(t)<this.config.minWidth||Math.round(n)<this.config.minHeight)return this.emit("messageInfo",mi.getMessagesByLocale(di.RectErrorSizeNotice,this.lang)),this.drawingRect=void 0,this.firstClickCoord=void 0,this.dragInfo=void 0,this.dragStatus=Je.Wait,void this.render();var i=this.getDrawingRectWithRectList();this.setRectList(i,!0),this.history.pushHistory(this.rectList),this.setSelectedIdAfterAddingDrawingRect(),this.firstClickCoord=void 0,this.drawingRect=void 0,this.dragInfo=void 0,this.dragStatus=Je.Wait}}},{key:"setSelectedIdAfterAddingDrawingRect",value:function(){this.drawingRect&&(this.config.textConfigurable?this.setSelectedRectID(this.drawingRect.id):this.setSelectedRectID())}},{key:"getDrawingRectWithRectList",value:function(){if(!this.drawingRect)return this.rectList;var e=this.drawingRect,t=e.x,n=e.y,i=e.width,o=e.height;return t/=this.zoom,n/=this.zoom,i/=this.zoom,o/=this.zoom,[].concat(Object(c.a)(this.rectList),[Ko(Wo({},this.drawingRect),{x:t,y:n,width:i,height:o})])}},{key:"rightMouseUp",value:function(e){var t,n,i,o=this.getHoverRectID(e),a=this.rectList.find((function(e){return e.id===o}));if(this.drawingRect)this.drawingRect=void 0,this.firstClickCoord=void 0;else if((null==(t=this.dragInfo)?void 0:t.dragStartCoord)&&Object(C.distance)(null==(n=this.dragInfo)?void 0:n.dragStartCoord,this.getCoordinateUnderZoom(e))>3&&this.dblClickListener.clearRightDblClick(),this.setSelectedRectID(o,e.ctrlKey),a&&1===(null==(i=this.selectedIDs)?void 0:i.length)&&this.setDefaultAttribute(a.attribute),this.hoverRectID="",(null==a?void 0:a.label)&&this.hasMarkerConfig){var r=Et.getCurrentMarkerIndex(a.label,this.config.markerList);r>=0&&(this.setMarkerIndex(r),this.emit("markIndexChange"))}this.render()}},{key:"shiftRightMouseUp",value:function(e){var t=this.getHoverRectID(e);this.emit("shiftRightMouseUp",t)}},{key:"onMouseUp",value:function(e){if(Object(g.a)(Object(f.a)(n.prototype),"onMouseUp",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;if(this.dragInfo&&this.dragStatus===Je.Move)return this.dragInfo=void 0,this.dragStatus=Je.Wait,this.history.pushHistory(this.rectList),void this.emit("updateResult");if(2!==e.button||!0!==e.shiftKey)if(2!==e.button){var t=Et.getSourceID(this.basicResult);this.drawingRect?this.addDrawingRectToRectList():!0===e.ctrlKey&&0===e.button&&this.hoverRectID?this.setRectValidAndRender(this.hoverRectID):(this.createNewDrawingRect(e,t),this.render())}else this.rightMouseUp(e);else this.shiftRightMouseUp(e)}},{key:"onRightDblClick",value:function(e){Object(g.a)(Object(f.a)(n.prototype),"onRightDblClick",this).call(this,e);var t=this.getHoverRectID(e);this.selection.isIdSelected(t)&&this.deleteSelectedRect()}},{key:"deleteSelectedRect",value:function(){var e=this;this.selectedRects.forEach((function(t){e.deleteRect(t.id)}))}},{key:"onKeyDown",value:function(e){if(Et.hotkeyFilter(e)&&!1!==Object(g.a)(Object(f.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode;switch(t){case fi.Ctrl:this.drawingRect&&(this.drawingRect=Ko(Wo({},this.drawingRect),{valid:!e.ctrlKey}),this.render());break;case fi.F:this.selectedRectID&&this.setRectValidAndRender(this.selectedRectID);break;case fi.Z:this.setIsHidden(!this.isHidden),this.render();break;case fi.Delete:this.deleteSelectedRect();break;case fi.Tab:if(e.preventDefault(),this.drawingRect)return;var i=$e.ascend;e.shiftKey&&(i=$e.descend);var o=Et.getRenderResultList(this.rectList,Et.getSourceID(this.basicResult),this.attributeLockList,this.selectedIDs),a=Object(s.a)(o,2),r=a[0],l=a[1],u=Object(c.a)(r);l&&(u=[].concat(Object(c.a)(u),Object(c.a)(l)));var d=$i.getViewPort(this.canvas,this.currentPos,this.zoom);u=u.filter((function(e){return $i.inViewPort({x:e.x,y:e.y},d)}));var h=Et.getNextSelectedRectID(u,i,this.selectedRectID);h&&(this.setSelectedRectID(h.id),!0===this.config.attributeConfigurable&&this.setDefaultAttribute(h.attribute));break;default:if(this.config.attributeConfigurable){var v=qi.getAttributeByKeycode(t,this.config.attributeList);void 0!==v&&this.setDefaultAttribute(v)}}return!0}}},{key:"onKeyUp",value:function(e){if(Object(g.a)(Object(f.a)(n.prototype),"onKeyUp",this).call(this,e),!this.selection.triggerKeyboardEvent(e,this.setRectList.bind(this))&&e.keyCode===fi.Ctrl)this.drawingRect&&(this.drawingRect=Ko(Wo({},this.drawingRect),{valid:!0}),this.render())}},{key:"onWheel",value:function(e){var t,i,o=this.zoom;this.drawingRect&&this.firstClickCoord&&(t=ui.getRectUnderZoom(this.drawingRect,1/o),i=Tn.changePointByZoom(this.firstClickCoord,1/o)),Object(g.a)(Object(f.a)(n.prototype),"onWheel",this).call(this,e,!1),t&&i&&(this.drawingRect=ui.getRectUnderZoom(t,this.zoom),this.firstClickCoord=Tn.changePointByZoom(i,this.zoom)),this.render()}},{key:"getCurrentSelectedData",value:function(){var e=this.selectedRect;if(e){var t=this.getColor(e.attribute),n=e.valid?null==t?void 0:t.valid.stroke:null==t?void 0:t.invalid.stroke;return{width:e.width*this.zoom*.6,textAttribute:e.textAttribute,color:n}}}},{key:"getRenderStyle",value:function(e){var t=this.customRenderStyle&&this.customRenderStyle(e);if(t)return t;var n,i,o=this.getColor(e.attribute);return!1===e.valid?(n=null==o?void 0:o.invalid.stroke,i=null==o?void 0:o.invalid.fill):(n=null==o?void 0:o.valid.stroke,i=null==o?void 0:o.valid.fill),{strokeColor:n,fillColor:i,textColor:n,toolColor:o}}},{key:"renderTextAttribute",value:function(){var e,t=this.selectedRect;if(this.ctx&&!0===this.config.textConfigurable&&t){var n=t.x,i=t.y,o=t.width,a=t.height,r=t.attribute,l=t.valid,c=o*this.zoom*.6,s=Tn.getOffsetCoordinate({x:n,y:i+a},this.currentPos,this.zoom),u=this.getColor(r),d=l?null==u?void 0:u.valid.stroke:null==u?void 0:u.invalid.stroke;this._textAttributeInstance||(this._textAttributeInstance=new jo({width:c,container:this.container,icon:this.getTextIconSvg(r),color:d,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedRectTextAttribute})),this._textAttributeInstance&&!(null==(e=this._textAttributeInstance)?void 0:e.isExit)&&this._textAttributeInstance.appendToContainer(),this._textAttributeInstance.update("".concat(t.textAttribute),{left:s.x,top:s.y+4,color:d,width:c})}}},{key:"renderSelectedRect",value:function(e){var t=this;if(this.ctx&&e){var n=this.ctx,i=10,o=ui.getRectPointList(e),a=o.length,r=this.getColor(e.attribute);o.forEach((function(l,c){var s,u;if(n.save(),n.moveTo(l.x,l.y),n.beginPath(),i=t.hoverRectPointIndex===c?12:6,!1===e.valid?(n.strokeStyle=null==r?void 0:r.invalid.stroke,n.fillStyle=null==r?void 0:r.invalid.stroke):(n.strokeStyle=null==r?void 0:r.valid.stroke,n.fillStyle=null==r?void 0:r.valid.stroke),n.arc(l.x*t.zoom+t.currentPos.x,l.y*t.zoom+t.currentPos.y,i,0,2*Math.PI),n.fill(),t.hoverRectEdgeIndex===c){n.beginPath(),n.lineWidth=10;var d=t.getColor(e.attribute),h=!1===e.valid?null==(s=null==d?void 0:d.invalid)?void 0:s.stroke:null==(u=null==d?void 0:d.valid)?void 0:u.stroke;n.strokeStyle=h,n.moveTo(o[c].x*t.zoom+t.currentPos.x,o[c].y*t.zoom+t.currentPos.y),n.lineTo(o[(c+1)%a].x*t.zoom+t.currentPos.x,o[(c+1)%a].y*t.zoom+t.currentPos.y),n.stroke()}n.restore()})),this.renderTextAttribute()}}},{key:"renderDrawingRect",value:function(e){var t,n,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.ctx&&e){var l=this.ctx,c=this.style,s=c.hiddenText,u=void 0!==s&&s;l.save();var d=this.getRenderStyle(e),h=d.strokeColor,g=d.fillColor,f=d.textColor;l.font="lighter 14px Arial";var v="";if((null==(t=this.config)?void 0:t.isShowOrder)&&e.order&&(null==e?void 0:e.order)>0&&(v="".concat(e.order)),e.label&&this.hasMarkerConfig){var p=Et.getCurrentMarkerIndex(e.label,this.config.markerList)+1;v="".concat(p,"_").concat(po.getMarkerShowText(e.label,this.config.markerList))}e.attribute&&(v="".concat(v,"  ").concat(qi.getAttributeShowText(e.attribute,null==(n=this.config)?void 0:n.attributeList)));var b=Tn.changeRectByZoom(e,r?a:this.zoom,this.currentPos);u||vo.drawText(this.canvas,{x:b.x,y:b.y-6},v,Ko(Wo({color:h,font:"normal normal 900 14px SourceHanSansCN-Regular"},vt),{textMaxWidth:300}));var m=null!=(o=null==(i=this.style)?void 0:i.width)?o:2;(e.id===this.hoverRectID||e.id===this.selectedRectID||this.isMultiMoveMode)&&vo.drawRectWithFill(this.canvas,b,{color:g}),vo.drawRect(this.canvas,b,{color:h,thickness:m,hiddenText:!0}),l.restore();var y="".concat(Math.round(e.width)," * ").concat(Math.round(e.height));!0===r&&(y="".concat(Math.round(e.width/this.zoom)," * ").concat(Math.round(b.height/this.zoom)));var C=7*y.length;if(u||vo.drawText(this.canvas,{x:b.x+b.width-C,y:b.y+b.height+15},y,Wo({color:f,font:"normal normal 600 14px Arial"},vt)),!u&&e.textAttribute&&e.id!==this.selectedRectID){var I=0,x=Math.max(20,b.width-C);vo.drawText(this.canvas,{x:b.x,y:b.y+b.height+20+I},e.textAttribute,Wo({color:f,font:"italic normal 900 14px Arial",textMaxWidth:x},vt))}}}},{key:"renderStaticRect",value:function(){var e,t=this;if((null==(e=this.rectList)?void 0:e.length)>0&&JSON.stringify(this.rectList)){var n=this.renderEnhance,i=void 0===n?{}:n,o=Et.getRenderResultList(this.rectList,Et.getSourceID(this.basicResult),this.attributeLockList,this.selectedIDs),a=Object(s.a)(o,2),r=a[0],l=a[1];this.isHidden||null==r||r.forEach((function(e){t.renderDrawingRect(e),i.staticRender&&i.staticRender(t.canvas,Tn.changeRectByZoom(e,t.zoom,t.currentPos),t.getRenderStyle(e))})),l&&l.forEach((function(e){t.renderDrawingRect(e),t.renderSelectedRect(e),i.selectedRender&&i.selectedRender(t.canvas,Tn.changeRectByZoom(e,t.zoom,t.currentPos),t.getRenderStyle(e))}))}}},{key:"renderCreatingRect",value:function(){if(this.drawingRect){var e=this.renderEnhance,t=void 0===e?{}:e;this.renderDrawingRect(this.drawingRect,1,!0),t.creatingRender&&t.creatingRender(this.canvas,Tn.changeRectByZoom(this.drawingRect,1,this.currentPos),this.getRenderStyle(this.drawingRect))}}},{key:"renderRect",value:function(){this.renderStaticRect(),this.renderCreatingRect()}},{key:"render",value:function(){this.ctx&&(Object(g.a)(Object(f.a)(n.prototype),"render",this).call(this),this.renderRect(),this.renderCursorLine(this.getLineColor(this.defaultAttribute)))}},{key:"setDefaultAttribute",value:function(e){var t=this,n=this.defaultAttribute;if(this.defaultAttribute=null!=e?e:"",n!==e&&(this.changeStyle(e),this.emit("changeAttributeSidebar"),this.selectedRects&&(this.setRectList(this.rectList.map((function(e){return t.selection.isIdSelected(e.id)?Ko(Wo({},e),{attribute:t.defaultAttribute}):e})),!0),this.history.pushHistory(this.rectList),this.render()),this.drawingRect&&(this.drawingRect=Ko(Wo({},this.drawingRect),{attribute:this.defaultAttribute}),this.render()),this._textAttributeInstance)){if(this.attributeLockList.length>0&&!this.attributeLockList.includes(this.defaultAttribute))return void this._textAttributeInstance.clearTextAttribute();this._textAttributeInstance.updateIcon(this.getTextIconSvg(e))}}},{key:"setValid",value:function(e){Object(g.a)(Object(f.a)(n.prototype),"setValid",this).call(this,e),this.emit("updateResult")}},{key:"clearActiveStatus",value:function(){this.drawingRect=void 0,this.firstClickCoord=void 0,this.dragInfo=void 0,this.dragStatus=Je.Wait,this.setSelectedRectID(void 0),this.setOperationMode(xe.General)}},{key:"clearResult",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.rectList.filter((function(e){return!0===e.disableDelete}));t.length>0&&e&&this.emit("messageInfo",mi.getMessagesByLocale(di.ClearPartialData,this.lang)),this.setRectList(t,!0),this.setSelectedRectID(void 0)}},{key:"deleteRect",value:function(e){var t;if(e){var n=this.rectList.find((function(t){return t.id===e}));!0!==(null==n?void 0:n.disableDelete)?(this.setRectList(this.rectList.filter((function(t){return t.id!==e})),!0),this.history.pushHistory(this.rectList),this.setSelectedRectID(void 0),null==(t=this._textAttributeInstance)||t.clearTextAttribute(),this.render()):this.emit("messageInfo",mi.getMessagesByLocale(di.DisableDelete,this.lang))}}},{key:"exportData",value:function(){return[this.rectList,this.basicImgInfo]}},{key:"undo",value:function(){var e=this.history.undo();e&&(e.length!==this.rectList.length&&this.setSelectedRectID(""),this.setRectList(e,!0),this.render())}},{key:"redo",value:function(){var e=this.history.redo();e&&(e.length!==this.rectList.length&&this.setSelectedRectID(""),this.setRectList(e,!0),this.render())}}]),n}(Bo),Xo=Object.defineProperty,Jo=Object.getOwnPropertySymbols,Qo=Object.prototype.hasOwnProperty,qo=Object.prototype.propertyIsEnumerable,$o=function(e,t,n){return t in e?Xo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ea=function(e,t){for(var n in t||(t={}))Qo.call(t,n)&&$o(e,n,t[n]);if(Jo){var i,o=Object(b.a)(Jo(t));try{for(o.s();!(i=o.n()).done;){n=i.value;qo.call(t,n)&&$o(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},ta=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getTagKeyName",value:function(e,t){var n,i;if(t)return null!=(i=null==(n=t.find((function(t){return t.value===e})))?void 0:n.key)?i:""}},{key:"getTagName",value:function(e,t){var n=Object(s.a)(e,2),i=n[0],o=void 0===i?"":i,a=n[1],r=void 0===a?"":a;if(t){var l,c=Object(b.a)(t);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(u.value===o){if(!u.subSelected)return console.error("\u6807\u7b7e\u89e3\u6790\u9519\u8bef",o,r),"";var d,h=Object(b.a)(u.subSelected);try{for(h.s();!(d=h.n()).done;){var g=d.value;if(g.value===r)return g.key}}catch(f){h.e(f)}finally{h.f()}}}}catch(f){c.e(f)}finally{c.f()}}}},{key:"getTagNameList",value:function(e,t){var n=this;return Object.keys(e).length<=0?[]:Object.entries(e).reduce((function(e,i){var o=Object(s.a)(i,2),a=o[0],r=o[1];if(r&&r.length>0){var l=r.split(";"),u={keyName:n.getTagKeyName(a,t),value:l.map((function(e){return n.getTagName([a,e],t)}))};return[].concat(Object(c.a)(e),[u])}return e}),[]).filter((function(e){return e}))}},{key:"getTagnameListWithoutConfig",value:function(e){return Object.keys(e).length<=0?[]:Object.entries(e).reduce((function(e,t){var n=Object(s.a)(t,2),i={keyName:n[0],value:n[1].split(";")};return[].concat(Object(c.a)(e),[i])}),[]).filter((function(e){return e}))}},{key:"judgeResultIsInInputList",value:function(e,t,n){return!!(e&&t&&n)&&n.filter((function(n){if(n.value===e&&n.subSelected){var i=null==t?void 0:t.split(";");return(null==n?void 0:n.subSelected.filter((function(e){return i.indexOf(e.value)>-1})).length)>0}return!1})).length>0}},{key:"getDefaultResultByConfig",value:function(e){return e.reduce((function(e,t){return t.subSelected&&t.subSelected.forEach((function(n){var i;if(n.isDefault){var o=null!=(i=e[t.value])?i:"",a=[];o.length>0&&(a=o.split(";")),a.push(n.value),e[t.value]=a.join(";")}})),e}),{})}},{key:"getDefaultTagResult",value:function(e,t){var n=this.getDefaultResultByConfig(e);return t.length>0?t.map((function(e){return{id:bo(),sourceID:e.id,result:ea({},n)}})):[{id:bo(),sourceID:"",result:ea({},n)}]}}]),e}(),na=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).getInitResultList=function(e,t){return 0!==e&&void 0!==e&&0===t.length?[]:ta.getDefaultTagResult(i.config.inputList,t)},i.setLabel=function(e,t){var n,o;if(!i.isImgError&&(i.basicResult||!i.dependToolName)){var a=i.config.inputList;if(a[e]){var r=a[e].subSelected;if(e<a.length&&a[e].subSelected&&r&&t<r.length){var l=a[e].value,c=null==(n=r[t])?void 0:n.value,s=null==(o=a[e])?void 0:o.isMulti,u=i.tagResult.filter((function(e){var t="".concat(e.sourceID);return Et.isSameSourceID(t,i.sourceID)}))[0];if(u){var d=0,h=u.result;for(var g in 0===u.sourceID&&(u.sourceID="0"),u.result)if(g===a[e].value){if(d++,!0===s){var f=h[g].split(";").filter((function(e){return""!==e})),v=f.indexOf(c);-1===v?f.push(c):f.splice(v,1),c=f.join(";")}""===c?1===Object.keys(h).length?i.tagResult=i.tagResult.filter((function(e){var t="".concat(e.sourceID);return Et.isDifferSourceID(t,i.sourceID)})):Object.keys(h).length>1&&delete h[g]:h[g]=c}0===d&&Object.assign(u.result,Object(_.a)({},l,c))}else i.tagResult=[{sourceID:i.sourceID,id:bo(8,62),result:Object(_.a)({},l,c)}];i.render()}}}},i.clearResult=function(){var e=arguments.length>1?arguments[1]:void 0;i.tagResult=e?i.tagResult.map((function(t){return(null==t?void 0:t.result[e])&&delete t.result[e],t})):[],i.render()},i.config=Et.jsonParser(e.config),i.tagResult=[],i.labelSelectedList=[],i.setShowDefaultCursor(!0),i}return Object(d.a)(n,[{key:"destroy",value:function(){this.clearTag(),Object(g.a)(Object(f.a)(n.prototype),"destroy",this).call(this)}},{key:"setResult",value:function(e){this.tagResult=e,this.render()}},{key:"currentPageResult",get:function(){return[this.currentTagResult]}},{key:"currentTagResult",get:function(){var e,t=this;return null!=(e=this.tagResult.filter((function(e){var n="".concat(e.sourceID);return Et.isSameSourceID(n,t.sourceID)}))[0])?e:{}}},{key:"sourceID",get:function(){return Et.getSourceID(this.basicResult)}},{key:"onKeyDown",value:function(e){var t=this;if(Et.hotkeyFilter(e)&&!1!==Object(g.a)(Object(f.a)(n.prototype),"onKeyDown",this).call(this,e)){var i=e.keyCode;if(i&&(i<=57&&i>=49||i<=105&&i>=97)){if(i-=i>57?97:49,1===this.config.inputList.length)return this.labelSelectedList=[0,i],this.setLabel(0,i),void setTimeout((function(){t.labelSelectedList=[],t.render()}),500);1===this.labelSelectedList.length?(this.labelSelectedList=[this.labelSelectedList[0],i],this.setLabel(this.labelSelectedList[0],i),setTimeout((function(){t.labelSelectedList=[],t.render()}),500)):(this.labelSelectedList=[i],this.emit("expend"))}}}},{key:"clearTag",value:function(){var e,t=null==(e=this.canvas)?void 0:e.parentNode,n=window.self.document.getElementById("tagToolTag");n&&t&&t.contains(n)&&(null==t||t.removeChild(n))}},{key:"renderTag",value:function(){var e,t,n,i,o,a;if(this.clearTag(),(null==(e=this.tagResult)?void 0:e.length)>0){var r=document.createElement("div"),l=ta.getTagNameList(null!=(n=null==(t=this.currentTagResult)?void 0:t.result)?n:{},this.config.inputList);r.innerHTML=null!=(i=l.reduce((function(e,t){return"".concat(e).concat(t.keyName,": ").concat(t.value.join(" \u3001 "),"\n")}),""))?i:"",r.setAttribute("id","tagToolTag"),r.setAttribute("style","\n        position: absolute;\n        top: 0;\n        right: 0;\n        z-index: 5;\n      \n        padding: 0 20px;\n      \n        font-size: 15px;\n        color: white;\n        text-align: right;\n        line-height: 32px;\n        white-space: pre;\n      \n        background: rgba(102, 111, 255, 1);\n        opacity: 0.6;\n        clear: both;\n      "),null==(a=null==(o=this.canvas)?void 0:o.parentNode)||a.appendChild(r)}}},{key:"render",value:function(){this.renderTag(),Object(g.a)(Object(f.a)(n.prototype),"render",this).call(this),this.emit("render")}},{key:"exportData",value:function(){var e=this.tagResult;return this.isImgError&&(e=[]),[e,this.basicImgInfo]}}]),n}(Bo),ia=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getStrokeAndFill",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.isSelected,o=void 0!==i&&i,a=n.isHover,r=void 0!==a&&a;return o?{stroke:t?e.validSelected.stroke:e.invalidSelected.stroke,fill:t?e.validSelected.fill:e.invalidSelected.fill}:r?{stroke:t?e.validHover.stroke:e.invalidHover.stroke,fill:t?e.validHover.fill:e.invalidHover.fill}:{stroke:t?e.valid.stroke:e.invalid.stroke,fill:t?e.valid.fill:e.invalid.fill}}},{key:"getStyle2String",value:function(e){if(e)return Object.entries(e).reduce((function(e,t){return"".concat(e," ").concat(t[0],": ").concat(t[1],";")}),"")}}]),e}(),oa=Object.defineProperty,aa=Object.defineProperties,ra=Object.getOwnPropertyDescriptors,la=Object.getOwnPropertySymbols,ca=Object.prototype.hasOwnProperty,sa=Object.prototype.propertyIsEnumerable,ua=Math.pow,da=function(e,t,n){return t in e?oa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ha=function(e,t){for(var n in t||(t={}))ca.call(t,n)&&da(e,n,t[n]);if(la){var i,o=Object(b.a)(la(t));try{for(o.s();!(i=o.n()).done;){n=i.value;sa.call(t,n)&&da(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},ga=function(e,t){return aa(e,ra(t))},fa=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i,o,a;return Object(u.a)(this,n),(i=t.call(this,e)).setMarkerIndex=function(e){i.markerIndex=e},i.setMarkerIndexAndSelect=function(e){if(i.config.markerList){i.markerIndex=e;var t=i.config.markerList[e].value,n=i.currentPageResult.find((function(e){return e.label===t}));n&&(i.setSelectedID(n.id),!0===i.config.attributeConfigurable&&i.setDefaultAttribute(n.attribute)),i.emit("markIndexChange")}},i.textChange=function(e){!0===i.config.textConfigurable&&i.selectedID&&(i.setPointList(qi.textChange(e,i.selectedID,i.pointList)),i.emit("selectedChange"),i.render())},i.isMinDistance=function(e){var t=Tn.changePointByZoom(e,i.zoom);return i.pointList.some((function(e){var n=Tn.changePointByZoom(e,i.zoom);return ei.getLineLength(n,t)<.2}))},i.config=Et.jsonParser(e.config),i.pointList=[],i.markerIndex=0,i.selection=new _o(Object(h.a)(i)),i.setStyle(e.style),i.createPoint=i.createPoint.bind(Object(h.a)(i)),i.getCurrentSelectedData=i.getCurrentSelectedData.bind(Object(h.a)(i)),i.updateSelectedTextAttribute=i.updateSelectedTextAttribute.bind(Object(h.a)(i)),i.setSelectedID=i.setSelectedID.bind(Object(h.a)(i)),i.forbidAddNew=null!=(o=e.forbidAddNew)&&o,i.forbidDelete=null!=(a=e.forbidDelete)&&a,i}return Object(d.a)(n,[{key:"dataList",get:function(){return this.pointList}},{key:"drawOutsideTarget",get:function(){var e;return null!=(e=this.config.drawOutsideTarget)?e:this.config.drawPointOut}},{key:"selectedID",get:function(){return this.selection.selectedID}},{key:"selectedIDs",get:function(){return this.selection.selectedIDs}},{key:"selectedPoints",get:function(){var e=this;return this.pointList.filter((function(t){return e.selection.isIdSelected(t.id)}))}},{key:"setNextMarker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pointList;if(this.hasMarkerConfig){var t=Et.getNextMarker(this.getCurrentPageResult(e),this.config.markerList);t&&this.setMarkerIndexAndSelect(t.index)}}},{key:"setResult",value:function(e){this.clearActiveStatus(),this.setPointList(e),this.setNextMarker(e),this.recoverOperationMode(),this.render()}},{key:"setPointList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.pointList.length;this.pointList=e,n!==e.length&&this.emit("updatePageNumber"),t&&this.emit("updateResult")}},{key:"setConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.config=Et.jsonParser(e),!0===t&&this.clearResult()}},{key:"clearResult",value:function(){this.setPointList([]),this.setSelectedID(void 0),this.history.pushHistory([]),this.hoverID="",this.render()}},{key:"setDefaultAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.defaultAttribute;if(this.defaultAttribute=e,t!==e&&(this.changeStyle(e),this.emit("changeAttributeSidebar"),this.selectedPoints.length>0&&(this.selectedPoints.forEach((function(t){t.attribute=e})),this.history.pushHistory(this.pointList),this.render()),this._textAttributeInstance)){if(this.attributeLockList.length>0&&!this.attributeLockList.includes(e))return void this._textAttributeInstance.clearTextAttribute();this._textAttributeInstance.updateIcon(this.getTextIconSvg(e))}}},{key:"selectedText",get:function(){var e,t=this;return null==(e=this.pointList.find((function(e){return e.id===t.selectedID})))?void 0:e.textAttribute}},{key:"setStyle",value:function(e){var t;Object(g.a)(Object(f.a)(n.prototype),"setStyle",this).call(this,e),this._textAttributeInstance&&!1===this.config.attributeConfigurable&&(null==(t=this._textAttributeInstance)||t.updateIcon(this.getTextIconSvg()))}},{key:"setSelectedID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.selection.setSelectedIDs(e,t),this.render(),this.emit("selectedChange")}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return qi.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"clearActiveStatus",value:function(){this.hoverID=void 0,this.dragStatus=Je.Wait,this.setSelectedID(void 0)}},{key:"setBasicResult",value:function(e){Object(g.a)(Object(f.a)(n.prototype),"setBasicResult",this).call(this,e),this.setNextMarker(),this.clearActiveStatus()}},{key:"onDragMoveAll",value:function(e){var t,n,i=this;(null==(n=null==(t=this.dragInfo)?void 0:t.originPointList)?void 0:n.length)&&(this.setPointList(this.dragInfo.originPointList.map((function(t){return ga(ha({},t),{x:t.x+e.x/i.zoom,y:t.y+e.y/i.zoom})}))),this.render())}},{key:"onMouseDown",value:function(e){if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation)return 0!==e.button||this.hoverID?this.hoverID&&this.selection.isIdSelected(this.hoverID)&&0===e.button?(this.dragStatus=Je.Start,void(this.dragInfo={dragStartCoord:this.getCoordinateUnderZoom(e),originPointList:y.a.cloneDeep(this.selectedPoints)})):(this.render(),!0):(this.recoverOperationMode(),this.createPoint(e),void this.render())}},{key:"onMouseMove",value:function(e){Object(g.a)(Object(f.a)(n.prototype),"onMouseMove",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo||(this.hoverID=this.getHoverId(),this.dragStatus!==Je.Start&&this.dragStatus!==Je.Move||this.onDragMove(e),this.hoverID&&this.render())}},{key:"onMouseUp",value:function(e){var t,i=this;if(Object(g.a)(Object(f.a)(n.prototype),"onMouseUp",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;2===e.button&&this.rightMouseUp(e),this.dragStatus===Je.Move&&(this.history.pushHistory(this.pointList),this.emit("updatePointByDrag",this.pointList.find((function(e){return(null==e?void 0:e.id)===i.selectedID})),null==(t=this.dragInfo)?void 0:t.originPointList),this.dragInfo=void 0),this.dragStatus=Je.Wait,this.render()}},{key:"onDragMove",value:function(e){var t,n,i=this;if(this.imgInfo){this.dragStatus=Je.Move;var o=this.getCoordinateUnderZoom(e);if(this.selectedIDs.length>1&&this.dragInfo){var a={x:o.x-this.dragInfo.dragStartCoord.x,y:o.y-this.dragInfo.dragStartCoord.y};this.onDragMoveAll(a)}else{var r=Tn.changeDrawOutsideTarget(o,{x:0,y:0},this.imgInfo,this.drawOutsideTarget,this.basicResult,this.zoom),l=this.drawOutsideTarget?Tn.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos):Tn.changePointByZoom(r,1/this.zoom);!1===this.drawOutsideTarget&&this.dependToolName===D.Polygon&&(null==(n=null==(t=this.basicResult)?void 0:t.pointList)?void 0:n.length)>0&&!_n.isInPolygon(l,this.basicResult.pointList)||(this.pointList.forEach((function(e){e.id===i.selectedID&&(e.x=l.x,e.y=l.y)})),this.render())}}}},{key:"onKeyUp",value:function(e){Object(g.a)(Object(f.a)(n.prototype),"onKeyUp",this).call(this,e),this.selection.triggerKeyboardEvent(e,this.setPointList.bind(this))}},{key:"onKeyDown",value:function(e){if(Et.hotkeyFilter(e)&&!1!==Object(g.a)(Object(f.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode;switch(t){case fi.Delete:this.deletePoint();break;case fi.Tab:this.onTabKeyDown(e);break;case fi.Z:this.setIsHidden(!this.isHidden),this.render();break;case fi.A:this.selection.selectAll();break;default:if(this.config.attributeConfigurable){var i=qi.getAttributeByKeycode(t,this.config.attributeList);void 0!==i&&this.setDefaultAttribute(i)}}}}},{key:"createPoint",value:function(e){var t,n,i,o;if(this.imgInfo&&!this.forbidAddNew){var a=this.config.upperLimit;if(a&&this.currentPageResult.length>=a)this.emit("messageInfo","".concat(mi.getMessagesByLocale(di.LowerLimitPoint,this.lang)));else{var r=Et.getSourceID(this.basicResult),l=this.getCoordinateUnderZoom(e),s=Tn.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos);if(this.config.edgeAdsorption&&this.referenceData)if([D.Polygon,D.Line].includes(null==(t=this.referenceData)?void 0:t.toolName)){var u=(null==(n=this.referenceData)?void 0:n.toolName)===D.Polygon,d=_n.getClosestPoint(s,this.referenceData.result,null!=(o=null==(i=this.referenceData.config)?void 0:i.lineType)?o:Y.Line,Le/this.zoom,{isClose:u}),h=d.dropFoot;h&&(s=h),d.hasClosed&&this.emit("messageSuccess","".concat(mi.getMessagesByLocale(di.SuccessfulEdgeAdsorption,this.lang)))}if(!1===this.drawOutsideTarget){if(this.dependToolName&&this.basicCanvas){var g=!1;switch(this.dependToolName){case D.Rect:g=!ui.isInRect(s,this.basicResult);break;case D.Polygon:g=!_n.isInPolygon(s,this.basicResult.pointList)}if(g)return}if(l.x<0||l.y<0||l.x>this.imgInfo.width||l.y>this.imgInfo.height)return}if(!this.isMinDistance(s)){var f=ga(ha({},s),{attribute:this.defaultAttribute,valid:!e.ctrlKey,id:bo(8,62),sourceID:r,textAttribute:"",order:Et.getMaxOrder(this.pointList.filter((function(e){return Et.isSameSourceID(e.sourceID,r)})))+1});if(this.config.textConfigurable){var v;v=qi.getTextAttribute(this.pointList.filter((function(e){return Et.isSameSourceID(e.sourceID,r)})),this.config.textCheckType),f=ga(ha({},f),{textAttribute:v})}if(this.hasMarkerConfig){var p=Et.getNextMarker(this.currentPageResult,this.config.markerList,this.markerIndex);if(!p)return void this.emit("messageInfo",mi.getMessagesByLocale(di.MarkerFinish,this.lang));f=ga(ha({},f),{label:p.label}),this.markerIndex=p.index,this.emit("markIndexChange")}this.hoverID=f.id;var b=[].concat(Object(c.a)(this.pointList),[f]);this.setPointList(b),this.emit("pointCreated",f,this.zoom),this.history.pushHistory(b),this.setSelectedID(f.id)}}}}},{key:"isInPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.zoom;return(this.style.width+2)/n>=Math.sqrt(ua(e.x-t.x,2)+ua(e.y-t.y,2))}},{key:"getHoverId",value:function(){var e,t=this,n=Tn.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos),i=null==(e=this.pointList)?void 0:e.find((function(e){return t.isInPoint(n,e)}));return null==i?void 0:i.id}},{key:"selectedPoint",get:function(){var e=this;return this.pointList.find((function(t){return t.id===e.selectedID}))}},{key:"rightMouseUp",value:function(e){var t=this;if(this.recoverOperationMode(),this.selectedID===this.hoverID){if(this.forbidDelete)return;var n=this.pointList.filter((function(e){return e.id!==t.selectedID}));return this.setPointList(n),this.history.pushHistory(n),this.emit("pointDeleted",this.selectedID),this.setSelectedID(""),void(this.hoverID="")}var i=this.pointList.find((function(e){return e.id===t.hoverID}));if(this.setSelectedID(this.hoverID,e.ctrlKey),this.emit("pointSelected",this.hoverID),i&&this.setDefaultAttribute(null==i?void 0:i.attribute),(null==i?void 0:i.label)&&this.hasMarkerConfig){var o=Et.getCurrentMarkerIndex(i.label,this.config.markerList);o>=0&&(this.setMarkerIndex(o),this.emit("markIndexChange"))}}},{key:"onTabKeyDown",value:function(e){if(e.preventDefault(),this.dragStatus!==Je.Move&&this.dragStatus!==Je.Start){var t=$e.ascend;e.shiftKey&&(t=$e.descend);var n=Et.getRenderResultList(this.pointList,Et.getSourceID(this.basicResult),this.attributeLockList,this.selectedIDs),i=Object(s.a)(n,2),o=i[0],a=i[1],r=Object(c.a)(o);a&&(r=[].concat(Object(c.a)(r),Object(c.a)(a)));var l=Et.getNextSelectedRectID(r,t,this.selectedID);l&&this.setSelectedID(l.id)}}},{key:"currentPageResult",get:function(){var e=Et.getRenderResultList(this.pointList,Et.getSourceID(this.basicResult),[]);return Object(s.a)(e,1)[0]}},{key:"getCurrentPageResult",value:function(e){var t=Et.getRenderResultList(e,Et.getSourceID(this.basicResult),[]);return Object(s.a)(t,1)[0]}},{key:"exportData",value:function(){return[this.pointList,this.basicImgInfo]}},{key:"deletePoint",value:function(){var e,t=this;this.selectedIDs.length>0&&(this.setPointList(this.pointList.filter((function(e){return t.selection.isIdSelected(e.id)}))),this.history.pushHistory(this.pointList),null==(e=this._textAttributeInstance)||e.clearTextAttribute(),this.emit("selectedChange"),this.emit("pointDeleted",this.selectedID),this.render())}},{key:"undoAndRedo",value:function(e){var t,n,i=this;if(this.dragStatus!==Je.Move&&this.dragStatus!==Je.Start){var o=null==(n=(t=this.history)[e])?void 0:n.call(t);(null==o?void 0:o.some((function(e){return e.id===i.selectedID})))||this.setSelectedID(""),o&&(this.setPointList(o,!0),this.render())}}},{key:"undo",value:function(){this.undoAndRedo("undo")}},{key:"redo",value:function(){this.undoAndRedo("redo")}},{key:"getCurrentSelectedData",value:function(){var e,t=this;if(this.selectedID){var n=null==(e=this.pointList)?void 0:e.find((function(e){return e.id===t.selectedID})),i=this.getColor(null==n?void 0:n.attribute),o=(null==n?void 0:n.valid)?null==i?void 0:i.valid.stroke:null==i?void 0:i.invalid.stroke;return this.dragStatus=Je.Wait,{width:200*this.zoom*.6,textAttribute:(null==n?void 0:n.textAttribute)||"",color:o}}}},{key:"updateSelectedTextAttribute",value:function(e){if(this._textAttributeInstance&&e&&this.selectedID){var t=e;!1===qi.textAttributeValidate(this.config.textCheckType,"",t)&&(this.emit("messageError",qi.getErrorNotice(this.config.textCheckType,this.lang)),t=""),this.setPointList(qi.textChange(t,this.selectedID,this.pointList)),this.emit("updateTextAttribute"),this.render()}}},{key:"renderTextAttribute",value:function(){var e,t,n=this,i=null==(e=this.pointList)?void 0:e.find((function(e){return e.id===n.selectedID}));if(this.ctx&&!0===this.config.textConfigurable&&i){var o=i.x,a=i.y,r=i.attribute,l=i.valid,c=200*this.zoom*.6,s=Tn.getOffsetCoordinate({x:o,y:a},this.currentPos,this.zoom),u=this.getColor(r),d=l?null==u?void 0:u.valid.stroke:null==u?void 0:u.invalid.stroke;this._textAttributeInstance||(this._textAttributeInstance=new jo({width:c,container:this.container,icon:this.getTextIconSvg(r),color:d,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedTextAttribute})),this._textAttributeInstance&&!(null==(t=this._textAttributeInstance)?void 0:t.isExit)&&this._textAttributeInstance.appendToContainer(),this._textAttributeInstance.update("".concat(i.textAttribute),{left:s.x,top:s.y+4,color:d,width:c})}}},{key:"renderPoint",value:function(e){var t,n,i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.textAttribute,r=void 0===a?"":a,l=e.attribute,c=o||e.id===this.selectedID,s=this.getColor(l),u=Tn.changePointByZoom(e,this.zoom,this.currentPos),d=this.style,h=d.width,g=void 0===h?2:h,f=d.hiddenText,v=void 0!==f&&f,p=ia.getStrokeAndFill(s,e.valid,{isSelected:c||e.id===this.hoverID});vo.drawCircle(this.canvas,u,g,{startAngleDeg:0,endAngleDeg:360,thickness:1,color:p.stroke,fill:p.fill});var b="",m=(null==(t=this.config)?void 0:t.isShowOrder)||(null==(n=this.config)?void 0:n.showOrder);if(m&&e.order&&(null==e?void 0:e.order)>0&&(b="".concat(e.order)),e.label&&this.hasMarkerConfig){var y=Et.getCurrentMarkerIndex(e.label,this.config.markerList)+1;b="".concat(y,"_").concat(po.getMarkerShowText(e.label,this.config.markerList))}e.attribute&&!this.config.hideAttribute&&(b="".concat(b,"  ").concat(qi.getAttributeShowText(e.attribute,null==(i=this.config)?void 0:i.attributeList))),v||vo.drawText(this.canvas,{x:u.x+g/2,y:u.y-g-4},b,{textAlign:"center",color:p.stroke}),c?this.renderTextAttribute():v||vo.drawText(this.canvas,{x:u.x+g,y:u.y+g+24},r,ha({color:p.stroke},ft))}},{key:"renderMultiSelectedPoint",value:function(){var e=this;this.selectedPoints.forEach((function(t){e.renderPoint(t,!0)}))}},{key:"renderPointList",value:function(){var e=this,t=Et.getRenderResultList(this.pointList,Et.getSourceID(this.basicResult),this.attributeLockList,this.selectedIDs),n=Object(s.a)(t,2),i=n[0],o=n[1];this.isHidden||i.forEach((function(t){e.renderPoint(t)})),o&&o.forEach((function(t){e.renderPoint(t,!0)}))}},{key:"renderAuxiliaryLine",value:function(){var e,t=this;if(this.config.markerConfigurable&&(null==(e=this.config.markerList)?void 0:e.length)){var n=Et.getRenderResultList(this.pointList,Et.getSourceID(this.basicResult),this.attributeLockList,this.selectedIDs),i=Object(s.a)(n,2),o=i[0],a=i[1],r=o;if(a&&r.push.apply(r,Object(c.a)(a)),!(r.length<2)){var l=po.getAuxiliaryLineByMarkerList(this.config.markerList,"value");po.getAuxiliaryLineCoord(l,r).forEach((function(e){var n=e.start,i=e.end,o=Tn.changePointListByZoom([n,i],t.zoom,t.currentPos);vo.drawLine(t.canvas,o[0],o[1],{color:"#C5C5C5"})}))}}}},{key:"renderTop",value:function(){var e,t,n,i=this.getLineColor(this.defaultAttribute);if(this.renderCursorLine(i),this.config.edgeAdsorption&&this.referenceData){var o=Tn.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos),a=(null==(e=this.referenceData)?void 0:e.toolName)===D.Polygon,r=_n.getClosestPoint(o,this.referenceData.result,null!=(n=null==(t=this.referenceData.config)?void 0:t.lineType)?n:Y.Line,Le/this.zoom,{isClose:a}).dropFoot;r&&o!==r&&o!==r&&(o=r,vo.drawCircle(this.canvas,Tn.changePointByZoom(o,this.zoom,this.currentPos),5,{color:"white",fill:"white"}),vo.drawCircle(this.canvas,Tn.changePointByZoom(o,this.zoom,this.currentPos),3,{fill:i,color:i}))}}},{key:"render",value:function(){this.ctx&&(Object(g.a)(Object(f.a)(n.prototype),"render",this).call(this),this.renderAuxiliaryLine(),this.renderPointList(),this.renderTop())}}]),n}(Bo),va=Object.defineProperty,pa=Object.defineProperties,ba=Object.getOwnPropertyDescriptors,ma=Object.getOwnPropertySymbols,ya=Object.prototype.hasOwnProperty,Ca=Object.prototype.propertyIsEnumerable,Ia=function(e,t,n){return t in e?va(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},xa=function(e,t){for(var n in t||(t={}))ya.call(t,n)&&Ia(e,n,t[n]);if(ma){var i,o=Object(b.a)(ma(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Ca.call(t,n)&&Ia(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},wa=function(e,t){return pa(e,ba(t))};!function(e){e[e.Create=0]="Create",e[e.Active=1]="Active",e[e.None=2]="None"}(So||(So={}));var ka=16,Sa=0,Pa=20,La=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i,o,a,r;return Object(u.a)(this,n),(r=t.call(this,e)).drawActivatedLine=function(e,t,n){var i=r.isCreate?y.a.cloneDeep([{pointList:r.activeLine,order:r.nextOrder(),attribute:r.defaultAttribute,valid:r.isLineValid}]):y.a.cloneDeep(r.selectedLines),o=r.isActiveLineValid();i.forEach((function(t){if((null==t?void 0:t.pointList)&&(t.pointList=t.pointList.map((function(e){return Object.assign(e,{actual:{x:e.x,y:e.y}},r.coordUtils.getRenderCoord(e))}))),t.pointList){var i=r.getLineColorByAttribute({attribute:t.attribute,valid:t.valid});return r.selectedLines.length>0&&(r.drawLineLength(t.pointList,i),r.renderActiveArea(ei.calcViewportBoundaries(t.pointList,r.isCurve,ka))),r.drawLine(t.pointList,e,i,!0,!0),r.drawLineNumber(t.pointList[0],t.order,i,"",r.defaultAttribute,o),e&&r.isCreate&&r.arc(e,3,i),!r.cursor||r.selectedPoint||n||r.isShift||r.arc(r.cursor,5,i),t}}))},r.drawHoverPoint=function(e){if(!r.isMousedown&&e&&r.selectedID){var t,n=r.getPointList(r.activeLine),i=r.activeLine.find((function(t){return Gt.calcDistance(r.coordUtils.getRenderCoord(t),e)<=5}));!i&&r.activeLine&&(t=r.findNearestPoint(n,e)),r.hoverPointID=i?i.id:void 0,r.cursor=i||null==t?void 0:t.point}},r.updatedLine={id:"",valid:!1,order:0},r.toolName="lineTool",r.lineList=[],r.activeLine=[],r.coordsInsideActiveArea=!1,r.hoverLineSegmentIndex=-1,r.isShift=!1,r.isReference=!1,r.drawCurveLine=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,r=Ve(t,ka);e.save(),e.lineCap="round",e.lineJoin="round",e.strokeStyle=n.color,i&&(e.lineWidth=n.lineWidth),o&&Gt.setReferenceCtx(e),t.forEach((function(t,n){var i=t.specialEdge,o=r.splice(0,17);e.save(),e.beginPath(),a===n&&(e.lineWidth=4),o.forEach((function(t,n){var o=t.x,a=t.y,r=n>0?"lineTo":"moveTo";i&&Gt.setSpecialEdgeStyle(e),e[r](o,a)})),e.stroke(),e.restore()})),e.restore()},r.drawLine=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t?e.concat(t):e,l={color:n,lineWidth:o?1:r.lineStyle.lineWidth};r.isCurve?Gt.drawCurveLine(r.ctx,a,l,!i,r.isReference,o?r.hoverLineSegmentIndex:-1):r.drawStraightLine(a,l,o),i&&e.forEach((function(e){var t,i,o=e.id,a=o&&[r.hoverPointID,null==(t=r.selectedPoint)?void 0:t.id].includes(o)?5:3;r.arc(e,a,n),[r.hoverPointID,null==(i=r.selectedPoint)?void 0:i.id].includes(o)||r.arc(e,2,"white")}))},r.drawStraightLine=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(h.a)(r),o=i.ctx;o&&(o.save(),o.lineCap="round",o.lineJoin="round",o.strokeStyle=t.color,o.lineWidth=t.lineWidth,r.isReference&&Gt.setReferenceCtx(o),e.forEach((function(t,i){if(o.beginPath(),i>0){var a=e[i-1];o.save(),(null==a?void 0:a.specialEdge)&&Gt.setSpecialEdgeStyle(o),n&&r.hoverLineSegmentIndex+1===i&&(o.lineWidth=4),o.moveTo(a.x,a.y),o.lineTo(t.x,t.y),o.stroke(),o.restore()}})),o.restore())},r.drawLines=function(){try{var e=y.a.cloneDeep(r.attributeFilteredLines);if(r.isHidden)return;e.forEach((function(e){if(!r.selection.isIdSelected(e.id)&&e.pointList){e.pointList.map((function(e){return Object.assign(e,{actual:{x:e.x,y:e.y}},r.coordUtils.getRenderCoord(e))}));var t=e.order,n=e.label,i=t,o=e&&r.getLineColorByAttribute(e);r.drawLine(e.pointList,void 0,o,!1),r.drawLineNumber(e.pointList[0],i,o,n,e.attribute,e.valid),e.id!==r.textEditingID&&(r.drawLineTextAttribute(e.pointList[1],o,null==e?void 0:e.textAttribute),r.drawLineLength(e.pointList,o))}}))}catch(t){console.error(t,"\u7ebf\u6761\u5de5\u5177\u6570\u636e\u89e3\u6790\u9519\u8bef"),r.lineList=[],r.clearCanvas()}},r.render=function(e){Object(g.a)((i=Object(h.a)(r),Object(f.a)(n.prototype)),"render",i).call(i),r.drawLines(),r.drawActivatedLine(e,void 0,!1),r.renderTextAttribute(),r.renderCursorLine(r.getLineColor(r.defaultAttribute))},r.moveLineInPolygon=function(e,t){var n;if(!Array.isArray(r.activeLine))return!1;(null==(n=r.activeLine)?void 0:n.every((function(n){return r.isInBasicPolygon({x:n.x+e,y:n.y+t})})))&&(r.lineDragging=!0,r.moveActiveArea(e,t))},r.getSelectedLinesArea=function(){return ei.calcViewportBoundaries(r.selectedLines.reduce((function(e,t){return(null==t?void 0:t.pointList)?e.concat.apply(e,Object(c.a)(null==t?void 0:t.pointList)):e}),[]))},r.moveLineInRectRange=function(e,t,n,i){if(0!==r.selectedLines.length){var o=r.getSelectedLinesArea(),a=o.top,l=o.left,c=o.right,s=o.bottom,u=[l,c].map((function(t){return y.a.isNumber(t)?t+e:0})),d=[a,s].map((function(e){return y.a.isNumber(e)?e+t:0})),h=l>=0&&c&&ei.isInRange(u,n),g=a>=0&&s&&ei.isInRange(d,i),f=h?e:0,v=g?t:0;r.lineDragging=!0,r.moveActiveArea(f,v)}},r.onRightClick=function(e){if(r.cursor=void 0,r.isCreate){if(r.isLinePointsNotEnough())return;return Gt.lineLengthSum(r.activeLine||[])<r.minLength?(r.emit("messageInfo","".concat(mi.getMessagesByLocale(di.MinLengthLimitErrorNotice,r.lang)).concat(r.minLength)),!0):void r.stopLineCreating(!0)}var t=r.findHoverLine(r.getCoordinate(e));r.setSelectedLineID(null==t?void 0:t.id,e.ctrlKey),r.emit("contextmenu")},r.updateSelectedAttributeAfterHistoryChanged=function(){if(r.selectedIDs.length>0){var e=r.lineList.find((function(e){return e.id===r.selectedIDs[0]})),t=null==e?void 0:e.attribute;"string"===typeof t&&(r.defaultAttribute=t,r.updateAttribute(t),r.render())}},r.onLeftClick=function(e){var t=r.getCoordinate(e),n=Object(h.a)(r).lineDragging;if(r.lineDragging=!1,!r.isSpaceKey)if(r.isNone&&e.ctrlKey){var i=r.findHoverLine(t);i&&r.setInvalidLine(i.id)}else if(!r.isLinePointsExceed()){var o=r.getNextPoint(e,t);if(r.isCreate||r.isNone)r.setCreateStatusAndAddPoint(o);else if(r.isActive){if(n)return;if(r.isMouseCoordOutsideActiveArea())return r.setNoneStatus(!1),void r.setCreateStatusAndAddPoint(o);if(e.shiftKey)return void r.updateLineSegmentSpecial(t);r.coordsInsideActiveArea&&e.ctrlKey&&r.setInvalidLine(r.selectedID),r.addLinePointToActiveLine()}}},r.onDblclick=function(){},r.onKeyUp=function(e){if(Object(g.a)((o=Object(h.a)(r),Object(f.a)(n.prototype)),"onKeyUp",o).call(o,e),r.isShift=!1,r.hoverLineSegmentIndex=-1,!r.selection.triggerKeyboardEvent(e,r.setLineList))if(e.keyCode!==fi.Esc){if(r.selectedLine){if("Delete"===e.key)return void r.deleteLine();if("f"===e.key)return void r.setInvalidLine(r.selectedID);if(" "===e.key)return void r.continueToEdit()}r.keyboardEventWhileLineCreating(e)}else r.stopLineCreating(!1)},r.onRightDblClick=function(e){Object(g.a)((a=Object(h.a)(r),Object(f.a)(n.prototype)),"onRightDblClick",a).call(a,e);var t=r.getCoordinate(e);if(r.isActive){var i=r.findHoveredPoint(t);if(i)return void r.deleteSelectedLinePoint(i.id);r.deleteSelectedLine(t)}},r.setReference=function(e){r.isReference=e},r.pointsWithinRange=function(e){return!(r.lowerLimitPointNum&&e<r.lowerLimitPointNum)&&!(r.upperLimitPointNum&&e>r.upperLimitPointNum)},r.setLineList=function(e){var t=e.length!==r.lineListLen;r.lineList=e,t&&r.emit("updatePageNumber")},r.textChange=function(e){!1!==r.config.textConfigurable&&r.selectedID&&(r.updateSelectedTextAttribute(e),r.emit("selectedChange"))},r.status=2,r.isMousedown=!1,r.lineDragging=!1,r.isLineValid=!0,r.setConfig(e.config),r.prevAxis={x:0,y:0},r.textEditingID="",r.updateSelectedTextAttribute=r.updateSelectedTextAttribute.bind(Object(h.a)(r)),r.getCurrentSelectedData=r.getCurrentSelectedData.bind(Object(h.a)(r)),r.actionsHistory=new yo,r.selection=new _o(Object(h.a)(r)),r.dependToolConfig={lineType:Y.Line},r}return Object(d.a)(n,[{key:"selectedLines",get:function(){var e=this;return this.lineList.filter((function(t){return e.selection.isIdSelected(t.id)}))}},{key:"isLineSelected",get:function(){return this.selectedID&&this.activeLine}},{key:"selectedLine",get:function(){var e=this;return this.lineList.find((function(t){return t.id===e.selectedID}))}},{key:"isCreate",get:function(){return 0===this.status}},{key:"isActive",get:function(){return this.selectedLines.length>0}},{key:"isNone",get:function(){return!this.isCreate&&0===this.selectedIDs.length}},{key:"isCurve",get:function(){return this.config.lineType===Y.Curve}},{key:"isMultipleColor",get:function(){return this.config.lineColor===J.MultiColor}},{key:"imageSize",get:function(){return this.rotate%180===0?this.basicImgInfo:{width:this.basicImgInfo.height,height:this.basicImgInfo.width}}},{key:"lineListLen",get:function(){return this.lineList.length}},{key:"edgeAdsorptionEnabled",get:function(){return this.edgeAdsorption&&!this.isCurve&&this.lineListLen>0}},{key:"attributeConfigurable",get:function(){return this.config.attributeConfigurable}},{key:"isTextConfigurable",get:function(){return this.config.textConfigurable}},{key:"isDependPolygon",get:function(){return this.dependToolName===D.Polygon}},{key:"isDependRect",get:function(){return this.dependToolName===D.Rect}},{key:"isCurrentAttributeLocked",get:function(){return this.attributeLockList.includes(this.defaultAttribute)}},{key:"attributeFilteredLines",get:function(){var e=this;return this.attributeLockList.length>0?this.lineList.filter((function(t){return e.attributeLockList.includes((null==t?void 0:t.attribute)||"")})):this.lineList}},{key:"selectedIDs",get:function(){return this.selection.selectedIDs}},{key:"selectedID",get:function(){return this.selection.selectedID}},{key:"enableOutOfTarget",get:function(){return this.config.enableOutOfTarget||this.config.outOfTarget||this.config.drawOutsideTarget}},{key:"showOrder",get:function(){var e;return null!=(e=this.config.showOrder)?e:this.config.isShowOrder}},{key:"edgeAdsorption",get:function(){return this.config.edgeAdsorption}},{key:"attributeList",get:function(){return this.config.attributeList}},{key:"lowerLimitPointNum",get:function(){return this.config.lowerLimitPointNum}},{key:"minLength",get:function(){var e;return(null==(e=this.config)?void 0:e.minLength)||0}},{key:"upperLimitPointNum",get:function(){return this.config.upperLimitPointNum}},{key:"textCheckType",get:function(){return this.config.textCheckType}},{key:"customFormat",get:function(){return this.config.customFormat}},{key:"dataList",get:function(){return this.lineList}},{key:"hasActiveLine",get:function(){return this.activeLine&&this.activeLine.length>0}},{key:"viewPortLines",get:function(){var e=$i.getViewPort(this.canvas,this.currentPos,this.zoom);return this.isHidden?[]:this.attributeFilteredLines.filter((function(t){var n;return null==(n=null==t?void 0:t.pointList)?void 0:n.some((function(t){return $i.inViewPort(t,e)}))}))}},{key:"lineStyle",get:function(){return{lineWidth:this.style.width,color:this.getLineColor(this.defaultAttribute),opacity:this.style.opacity}}},{key:"selectedText",get:function(){var e,t,n=this;return null!=(t=null==(e=this.lineList.find((function(e){return e.id===n.selectedID})))?void 0:e.textAttribute)?t:""}},{key:"currentPageResult",get:function(){return this.lineList}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e!==this.status){if(t){var n="";this.textCheckType===ce.Order&&this.isTextConfigurable&&(n=qi.getTextAttribute(this.lineList,this.textCheckType)),this.emit("updateText",n)}this.status=e,this.lineStatusChanged()}}},{key:"isInBasicPolygon",value:function(e){var t,n;return Fe(e,(null==(t=this.basicResult)?void 0:t.pointList)||[],null==(n=this.dependToolConfig)?void 0:n.lineType)}},{key:"getPolygonPointList",value:function(){if(!this.basicResult)return[];var e=this.basicResult.pointList;return this.dependToolConfig.lineType===Y.Curve?je(e.reduce((function(e,t){return[].concat(Object(c.a)(e),[t.x,t.y])}),[]),.5,!0,20):e}},{key:"getNextCoordByRenderCoord",value:function(e){return this.getNextCoordByAbsCoord(this.coordUtils.getAbsCoord(e))}},{key:"getNextCoordByAbsCoord",value:function(e){var t,n=null==(t=this.activeLine)?void 0:t.slice(-1)[0];return n?this.coordUtils.getNextCoordByDependTool(e,n):e}},{key:"pointInLine",value:function(e,t,n){var i=this;return!(e.filter((function(e){return e})).length<2)&&e.some((function(o,a){if(0===a)return!1;var r=i.coordUtils.getRenderCoord(e[a-1]),l=i.coordUtils.getRenderCoord(o);return Gt.isInLine(t,r,l,n)}))}},{key:"arc",value:function(e){var t,n,i,o,a,r,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,c=arguments.length>2?arguments[2]:void 0;if(this.ctx){var s=e.x,u=e.y;null==(t=this.ctx)||t.save(),null==(n=this.ctx)||n.beginPath(),this.ctx.fillStyle=c||this.lineStyle.color,null==(i=this.ctx)||i.arc(s,u,l,0,360),null==(o=this.ctx)||o.closePath(),null==(a=this.ctx)||a.fill(),null==(r=this.ctx)||r.restore()}}},{key:"renderActiveArea",value:function(e){var t=e.top,n=e.left,i=e.right,o=e.bottom;this.ctx&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.strokeStyle="#B3B8FF",this.ctx.rect(n,t,i-n,o-t),this.ctx.stroke(),this.ctx.restore())}},{key:"addLinePoint",value:function(e){var t,n,i,o;this.arc(e),null==(t=this.activeLine)||t.push(wa(xa({},e),{id:bo()})),1===(null==(n=this.activeLine)?void 0:n.length)?null==(i=this.actionsHistory)||i.initRecord(this.activeLine):null==(o=this.actionsHistory)||o.pushHistory(this.activeLine),this.render()}},{key:"setCreateStatusAndAddPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.updateStatus(0,t),this.addLinePoint(e)}},{key:"isActiveLineValid",value:function(){var e,t=this;return this.selectedID?null==(e=this.lineList.find((function(e){return e.id===t.selectedID})))?void 0:e.valid:this.isLineValid}},{key:"nextOrder",value:function(){return 0===this.lineListLen?1:this.lineList.slice(-1)[0].order+1}},{key:"getLineColorByAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ia.getStrokeAndFill(this.getColor(e.attribute),e.valid,{isSelected:t}).stroke}},{key:"drawLineNumber",value:function(e){var t,n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4?arguments[4]:void 0,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if((this.showOrder||this.attributeConfigurable)&&this.ctx){var s=this.showOrder?o.toString():"".concat(r);if(this.attributeConfigurable){var u=l?null!=(i=null==(n=null==(t=this.attributeList)?void 0:t.find((function(e){return e.value===l})))?void 0:n.key)?i:l:"";s=[s,"".concat(!c&&u?"\u65e0\u6548":"").concat(u)].filter((function(e){return e})).join("_")}this.drawText(e,s,a)}}},{key:"drawLineTextAttribute",value:function(e,t,n){if(e&&n)return this.drawText(e,n,t,200)}},{key:"drawLineLength",value:function(e,t){var n;if((null==(n=this.config)?void 0:n.showLineLength)&&e){var i=e.reduce((function(t,n,i){return i<=0||!e[i-1].actual||!n.actual?t:t+Gt.calcDistance(e[i-1].actual,n.actual)}),0),o=e[e.length-1];this.drawText(o,"l = ".concat(i.toFixed(2)),t)}}},{key:"drawText",value:function(e,t,n,i){var o,a;this.ctx&&(null==(o=this.ctx)||o.save(),this.ctx.font="italic bold 14px SourceHanSansCN-Regular",this.ctx.fillStyle=n,this.ctx.strokeStyle=n,this.ctx.shadowColor="rgba(0, 0, 0, 0.6)",this.ctx.shadowOffsetY=2,this.ctx.shadowBlur=4,i?vo.wrapText(this.canvas,t,e.x-Sa,e.y-Pa,i):this.ctx.fillText(t,e.x-Sa,e.y-Pa),null==(a=this.ctx)||a.restore())}},{key:"moveActiveArea",value:function(e,t){this.selectedLines.length>0&&(this.selectedLines.forEach((function(n){var i;null==(i=n.pointList)||i.forEach((function(n){return Object.assign(n,{x:n.x+e,y:n.y+t})}))})),this.render()),this.emit("dataUpdated",this.lineList,this.selectedIDs)}},{key:"findHoveredPoint",value:function(e){var t=this;if(this.activeLine)return this.activeLine.find((function(n){var i=t.coordUtils.getRenderCoord(n);return Gt.calcDistance(i,e)<=5}))}},{key:"findHoverLine",value:function(e){var t=this;return y.a.cloneDeep(this.lineList).reverse().find((function(n){var i=n.pointList,o=i?t.getPointList(i):[],a=t.getLineWidthScope();return o.some((function(n,i){if(0===i)return!1;var r=t.coordUtils.getRenderCoord(n),l=t.coordUtils.getRenderCoord(o[i-1]);return Gt.isInLine(e,r,l,a)}))}))}},{key:"getAdsorptionPoint",value:function(e){var t,n,i=this;return y.a.cloneDeep(this.lineList).reverse().forEach((function(o){var a=o.pointList;if(o.id!==i.selectedID&&a&&!((null==a?void 0:a.length)<2)){var r=i.findNearestPoint(a,e);if(r){if(0===r.minDistance)return void(t=r.point);(void 0===n||r.minDistance<n)&&(t=r.point,n=r.minDistance)}}})),t}},{key:"findNearestPoint",value:function(e,t){for(var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,o=i,a=1;a<=e.length-1;a++){var r=this.coordUtils.getRenderCoord(e[a]),l=this.coordUtils.getRenderCoord(e[a-1]),c=ei.getFootOfPerpendicular(t,r,l),s=c.length,u=c.footPoint,d=Gt.calcTwoPointDistance(r,t),h=Gt.calcTwoPointDistance(l,t);if(d<=2*i){n=r,i=0;break}if(h<=2*i){n=l,i=0;break}s<i&&(n=u,i=s)}return n?{point:n,minDistance:o}:void 0}},{key:"getPointList",value:function(e){return this.isCurve?Ve(e,ka):e}},{key:"moveSelectedLine",value:function(e){var t=(e.x-this.prevAxis.x)/this.zoom,n=(e.y-this.prevAxis.y)/this.zoom;if(this.enableOutOfTarget)return this.lineDragging=!0,void this.moveActiveArea(t,n);if(this.isDependPolygon)this.moveLineInPolygon(t,n);else{var i=[0,this.imageSize.width],o=[0,this.imageSize.height];if(this.isDependRect){var a=this.basicResult,r=a.x,l=a.y;i=[r,r+a.width],o=[l,l+a.height]}this.moveLineInRectRange(t,n,i,o)}}},{key:"moveSelectPoint",value:function(e){if(this.selectedPoint){var t=e.x-this.prevAxis.x,n=e.y-this.prevAxis.y,i={x:(this.selectedPoint?this.selectedPoint.x:0)+t/this.zoom,y:(this.selectedPoint?this.selectedPoint.y:0)+n/this.zoom};Object.assign(this.selectedPoint,this.getNextCoordByAbsCoord(i)),this.updateLines(),this.render()}}},{key:"getCoordByConfig",value:function(e,t){var n,i=!!e.shiftKey,o=e.altKey;if((null==(n=this.activeLine)?void 0:n.length)>0&&i){var a=this.activeLine.slice(-1)[0];return Gt.getVHPoint(a,t,this.coordUtils.getAbsCoord(t),this.coordUtils.getRenderCoord(a))}return this.edgeAdsorptionEnabled&&!o?this.getAdsorptionPoint(t):t}},{key:"getNextPoint",value:function(e,t){var n=this.getCoordByConfig(e,t)||t;return this.enableOutOfTarget?this.coordUtils.getAbsCoord(n):this.getNextCoordByRenderCoord(n)}},{key:"lineHover",value:function(){this.render()}},{key:"mouseMoveHandler",value:function(e){var t=this.getCoordinate(e),n=1===e.which;if(this.isCreate)this.hasActiveLine&&this.renderNextPoint(e,t);else{if(this.isNone&&(this.lineHover(),this.edgeAdsorptionEnabled&&!e.altKey)){var i=this.getAdsorptionPoint(t);i&&this.arc(i)}if(this.isActive){if(this.isMousedown&&n){if(this.selectedPoint)return void this.moveSelectPoint(t);if(this.coordsInsideActiveArea)return this.moveSelectedLine(t),void this.drawActivatedLine(void 0,void 0,!0)}this.drawHoverPoint(t),this.render()}}}},{key:"onMouseMove",value:function(e){if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.getCoordinate(e);this.mouseMoveHandler(e),this.prevAxis=t}}},{key:"setActiveLine",value:function(e){this.activeLine=e?y.a.cloneDeep(e):void 0}},{key:"historyChanged",value:function(e){var t=this,n="".concat(e,"Enabled");if(this.isCreate){if(this.actionsHistory&&this.actionsHistory[n]){var i=this.actionsHistory&&this.actionsHistory[e]();this.setActiveLine(i),this.render()}}else{if(this.history&&this.history[n]){var o=this.history[e](),a=null==o?void 0:o.find((function(e){return e.id===t.selectedID}));this.lineList=o,this.selectedID&&a?this.setActiveLine(null==a?void 0:a.pointList):this.setNoneStatus(),this.render()}this.emit("dataUpdated",this.lineList)}}},{key:"undo",value:function(){this.historyChanged("undo"),this.updateSelectedAttributeAfterHistoryChanged()}},{key:"redo",value:function(){this.historyChanged("redo"),this.updateSelectedAttributeAfterHistoryChanged()}},{key:"isCoordInsideTarget",value:function(e){if(this.isDependPolygon)return this.isInBasicPolygon(e);if(this.isDependRect){var t=this.basicResult,n=t.x,i=t.y,o=[n,n+t.width],a=[i,i+t.height];return ei.isInRange(e.x,o)&&ei.isInRange(e.y,a)}return ei.isInRange(e.x,[0,this.imageSize.width])&&ei.isInRange(e.y,[0,this.imageSize.height])}},{key:"getPointInsertIndex",value:function(e,t){var n=this;if(e&&this.activeLine){var i=this.getPointList(this.activeLine);return 2===this.activeLine.length?1:this.activeLine.findIndex((function(o,a){if(a>0){var r=n.activeLine?n.activeLine[a-1]:void 0,l=n.isCurve?i.slice(17*(a-1),17*a):[r,o];return n.pointInLine(l,e,t||n.getLineWidthScope())}return!1}))}return-1}},{key:"getLineWidthScope",value:function(){return this.lineStyle.lineWidth}},{key:"isMouseCoordOutsideActiveArea",value:function(){return!this.coordsInsideActiveArea&&!this.selectedPoint}},{key:"isLinePointsExceed",value:function(){return this.isCreate&&this.activeLine&&this.upperLimitPointNum&&~~this.upperLimitPointNum<=this.activeLine.length}},{key:"isLinePointsNotEnough",value:function(){var e;return this.activeLine&&(null==(e=this.activeLine)?void 0:e.length)<this.lowerLimitPointNum}},{key:"updateLineSegmentSpecial",value:function(e){var t=this.getPointInsertIndex(e,2)-1;if(t>-1){var n=this.activeLine[t];n.specialEdge=!n.specialEdge,this.hoverLineSegmentIndex=-1,this.render()}}},{key:"addLinePointToActiveLine",value:function(){var e,t=this.getPointInsertIndex(this.cursor),n=this.pointsWithinRange(this.activeLine.length+1);this.cursor&&t>-1&&n&&(this.activeLine.splice(t,0,wa(xa({},this.coordUtils.getAbsCoord(this.cursor)),{id:bo()})),this.updateLines(),null==(e=this.history)||e.pushHistory(this.lineList),this.render(),this.cursor=void 0)}},{key:"isCoordOnSelectedArea",value:function(e){var t=this;return this.selectedLines.some((function(n){return Gt.inArea(ei.calcViewportBoundaries(n.pointList),t.coordUtils.getAbsCoord(e))}))}},{key:"onMouseDown",value:function(e){if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.getCoordinate(e);this.isMousedown=!0,this.prevAxis=t,3!==e.which?(this.selectedPoint=this.findHoveredPoint(t),this.coordsInsideActiveArea=this.selectedLines.length>0&&this.isCoordOnSelectedArea(t),this.lineDragging=!1):this.cursor=void 0}}},{key:"lineHasChanged",value:function(){var e=this,t=this.lineList.find((function(t){return t.id===e.selectedID}));return!!t&&JSON.stringify(t.pointList)!==JSON.stringify(this.activeLine)}},{key:"updateLines",value:function(){var e=this,t=this.lineList.find((function(t){return t.id===e.selectedID}));t&&(t.pointList=y.a.cloneDeep(this.activeLine),this.updatedLine=t,this.emit("dataUpdated",this.lineList))}},{key:"onMouseUp",value:function(e){var t=this,i=function(){t.isMousedown=!1,t.hoverPointID=void 0,t.cursor=void 0,t.selectedPoint=void 0};this.hoverPointID=void 0,Object(g.a)(Object(f.a)(n.prototype),"onMouseUp",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo||(1===e.which&&this.onLeftClick(e),3===e.which&&this.onRightClick(e)),i()}},{key:"isTextValid",value:function(e){return qi.textAttributeValidate(this.textCheckType,this.customFormat,e)}},{key:"createLineData",value:function(){var e=bo(),t={pointList:y.a.cloneDeep(this.activeLine),id:e,valid:this.isLineValid,order:this.nextOrder()};return t.attribute=this.defaultAttribute,t}},{key:"stopLineCreating",value:function(){var e,t,n,i,o,a=this,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],l=!!this.selectedID||!!this.isTextConfigurable;if(r)if(this.selectedID){var s=this.lineList.find((function(e){return e.id===a.selectedID}));o=this.selectedID,s&&(s.pointList=y.a.cloneWith(this.activeLine),y.a.isEqual(s.pointList,null==(e=this.history)?void 0:e.pushHistory(this.lineList))||null==(t=this.history)||t.pushHistory(this.lineList))}else if(this.isCreate&&this.activeLine&&this.activeLine.length>1){var u=this.createLineData();o=u.id,this.setLineList([].concat(Object(c.a)(this.lineList),[u])),null==(n=this.history)||n.pushHistory(this.lineList)}this.setNoneStatus(),l&&(this.activeLine=[],this.setSelectedLineID(o,!1,!1)),null==(i=this.actionsHistory)||i.empty(),this.emit("dataUpdated",this.lineList,this.selectedIDs),this.render()}},{key:"setNoneStatus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.updateStatus(2),this.activeLine=[],this.setSelectedLineID(void 0),this.isLineValid=!0,this.cursor=void 0}},{key:"setKeyDownStatus",value:function(e,t){this.isShift=null!=t?t:e.keyCode===fi.Shift}},{key:"continueToEdit",value:function(){var e,t;(null==(e=this.selectedLine)?void 0:e.pointList)&&(this.updateStatus(0),this.cursor=void 0,this.setActiveLine(this.selectedLine.pointList),null==(t=this.actionsHistory)||t.pushHistory(this.activeLine),this.render())}},{key:"setInvalidLineOnCreating",value:function(e){if((!this.selectedID||e.keyCode===fi.Ctrl)&&this.isCreate){var t=!e.ctrlKey;this.selectedID?this.setInvalidLine(this.selectedID,t,!1):this.isLineValid=t}}},{key:"onKeyDown",value:function(e){if(Object(g.a)(Object(f.a)(n.prototype),"onKeyDown",this).call(this,e),this.setKeyDownStatus(e),e.keyCode!==fi.Z||e.ctrlKey||this.toggleIsHide(),e.keyCode===fi.Shift&&this.render(),e.keyCode===fi.Tab)return e.preventDefault(),void this.selectToNextLine(e);if(this.isCreate&&this.keyboardEventWhileLineCreating(e),this.config.attributeConfigurable){var t=qi.getAttributeByKeycode(e.keyCode,this.config.attributeList);void 0!==t&&this.setDefaultAttribute(t)}}},{key:"selectToNextLine",value:function(e){var t=Et.getNextSelectedRectIDByEvent(this.viewPortLines.map((function(e){var t,n,i,o;return wa(xa({},e),{x:null!=(n=null==(t=e.pointList[0])?void 0:t.x)?n:0,y:null!=(o=null==(i=e.pointList[0])?void 0:i.y)?o:0})})),e,this.selectedID);t&&this.selection.setSelectedIDs(t.id)}},{key:"keyboardEventWhileLineCreating",value:function(e){this.isCreate&&(e.keyCode===fi.Ctrl&&this.setInvalidLineOnCreating(e),[fi.Shift,fi.Alt].includes(e.keyCode)&&this.renderNextPoint(e,this.prevAxis))}},{key:"renderNextPoint",value:function(e,t){var n=this.coordUtils.getRenderCoord(this.getNextPoint(e,t));this.render(n)}},{key:"deleteSelectedLine",value:function(e){var t;if(this.selectedLine){var n=ei.calcViewportBoundaries(null==(t=this.selectedLine)?void 0:t.pointList,this.isCurve,ka,this.zoom);Gt.inArea(n,this.coordUtils.getAbsCoord(e))&&this.deleteLine()}}},{key:"deleteSelectedLinePoint",value:function(e){var t;this.pointsWithinRange(this.activeLine.length-1)&&e&&(this.setActiveLine(this.activeLine.filter((function(t){return t.id!==e}))),this.updateLines(),null==(t=this.history)||t.pushHistory(this.lineList)),this.cursor=void 0,this.render()}},{key:"deleteLine",value:function(){var e,t=this;this.lineList=this.lineList.filter((function(e){return!t.selection.isIdSelected(e.id)})),null==(e=this.history)||e.pushHistory(this.lineList),this.setNoneStatus(),this.emit("dataUpdated",this.lineList),this.render()}},{key:"setInvalidLine",value:function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.lineList.find((function(t){return t.id===e}));o&&(o.valid=void 0!==t?t:!o.valid,null==(n=this.history)||n.pushHistory(this.lineList),this.emit("dataUpdated",this.lineList),i&&this.render())}},{key:"empty",value:function(){var e,t;this.lineList=[],this.setNoneStatus(),this.selectedPoint=void 0,null==(e=this.actionsHistory)||e.empty(),null==(t=this.history)||t.init(),this.emit("dataUpdated",this.lineList),this.render()}},{key:"setAttribute",value:function(e){var t;this.attributeConfigurable&&(this.defaultAttribute=e,this.setLineAttribute("attribute",e),this.selectedIDs.length>0&&(null==(t=this.history)||t.pushHistory(this.lineList)))}},{key:"setTextAttribute",value:function(e){var t;this.isTextConfigurable&&(this.setLineAttribute("textAttribute",e),null==(t=this.history)||t.applyAttribute(this.selectedID,"textAttribute",e))}},{key:"setLineAttribute",value:function(e,t){var n=this;this.selectedIDs.length>0&&(this.lineList.forEach((function(i){n.selection.isIdSelected(i.id)&&(i[e]=t)})),this.render())}},{key:"updateAttribute",value:function(e){this.emit("updateAttribute",e)}},{key:"updateLineAttributes",value:function(e){var t;if(this.attributeConfigurable&&e){var n=(null==e?void 0:e.attribute)||"";this.defaultAttribute=n,this.updateAttribute(n)}if(this.isTextConfigurable&&e){var i=(null==e?void 0:e.textAttribute)||"";this.updateTextAttribute(i)}null==(t=this.history)||t.updateHistory(this.lineList)}},{key:"lineStatusChanged",value:function(){this.emit("lineStatusChanged",{status:this.status,selectedLineID:this.selectedID})}},{key:"updateTextAttribute",value:function(e){var t=this;if(this.selectedID){var n=this.lineList.find((function(e){return e.id===t.selectedID}));n&&(n.textAttribute=e)}this.emit("updateText",e)}},{key:"saveData",value:function(){this.stopLineCreating(),this.setNoneStatus(),this.render()}},{key:"setTextEditingID",value:function(e){this.textEditingID=e,this.render()}},{key:"updateAttrWhileIDChanged",value:function(e){if(e){var t=this.lineList.find((function(t){return t.id===e}));t&&this.setDefaultAttribute(t.attribute)}}},{key:"setSelectedLineID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.selection.setSelectedIDs(e,t),n&&e&&this.updateAttrWhileIDChanged(this.selectedID),this.selectedLine&&this.setActiveLine(this.selectedLine.pointList),0===this.selectedIDs.length&&this.setActiveLine([]),this.emit("dataUpdated",this.lineList,this.selectedIDs)}},{key:"attributeLockListChange",value:function(e){this.attributeLockList=e,this.render()}},{key:"setResult",value:function(e){this.setLineList(e),this.render()}},{key:"setConfig",value:function(e){Object(g.a)(Object(f.a)(n.prototype),"setConfig",this).call(this,e)}},{key:"toggleIsHide",value:function(){this.setIsHidden(!this.isHidden),this.render()}},{key:"clearCanvas",value:function(){Object(g.a)(Object(f.a)(n.prototype),"clearCanvas",this).call(this)}},{key:"clearResult",value:function(){this.setResult([]),this.setSelectedLineID(void 0),this.render()}},{key:"exportData",value:function(){return[this.lineList,this.basicImgInfo]}},{key:"setDefaultAttribute",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.attributeConfigurable&&(this.defaultAttribute=t,this.changeStyle(this.defaultAttribute),this.setLineAttribute("attribute",t),this.selectedIDs.length>0&&(null==(e=this.history)||e.pushHistory(this.lineList)),this.emit("changeAttributeSidebar"))}},{key:"getCurrentSelectedData",value:function(){var e,t,n=this,i=this.isActiveLineValid(),o=this.defaultAttribute,a=this.getColor(o);return{color:i?null==a?void 0:a.valid.stroke:null==a?void 0:a.invalid.stroke,textAttribute:null!=(t=null==(e=this.lineList.find((function(e){return e.id===n.selectedID})))?void 0:e.textAttribute)?t:""}}},{key:"renderTextAttribute",value:function(){var e,t,n,i,o=this;if(this.ctx&&this.selectedLine&&!(this.activeLine&&(null==(e=this.activeLine)?void 0:e.length)<2)){var a=this.isActiveLineValid(),r=this.defaultAttribute,l=this.selectedLine.pointList[1],c=l.x,s=l.y,u=this.coordUtils.getRenderCoord({x:c,y:s}),d=this.getColor(r),h=a?null==d?void 0:d.valid.stroke:null==d?void 0:d.invalid.stroke,g=null!=(n=null==(t=this.lineList.find((function(e){return e.id===o.selectedID})))?void 0:t.textAttribute)?n:"";this._textAttributeInstance||(this._textAttributeInstance=new jo({container:this.container,icon:this.getTextIconSvg(r),color:h,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedTextAttribute})),this._textAttributeInstance&&!(null==(i=this._textAttributeInstance)?void 0:i.isExit)&&this._textAttributeInstance.appendToContainer(),this._textAttributeInstance.update("".concat(g),{left:u.x,top:u.y,color:h}),this._textAttributeInstance.updateIcon(this.getTextIconSvg(r))}}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return qi.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"updateSelectedTextAttribute",value:function(e){if(this._textAttributeInstance&&e&&this.selectedID){var t=e;!qi.textAttributeValidate(this.config.textCheckType,"",t)&&(this.emit("messageError",qi.getErrorNotice(this.config.textCheckType,this.lang)),t=""),this.setTextAttribute(t),this.emit("updateTextAttribute"),this.render()}}}]),n}(Bo),Aa=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).getSingleResult=function(e){var t={};return i.config.configList.length>0&&i.config.configList.forEach((function(e){var n;t[e.key]=null!=(n=e.default)?n:""})),{value:t,id:bo(),sourceID:null!=e?e:Et.getSourceID()}},i.getInitResultList=function(e,t){return e>0?t.map((function(e){return i.getSingleResult(e.id)})):[i.getSingleResult()]},i.textList=[],i.setShowDefaultCursor(!0),i.setConfig(e.config),i.initTextDisplayContainer(),i}return Object(d.a)(n,[{key:"dataList",get:function(){return this.textList}},{key:"textValueContainerID",get:function(){return"textValueContainer"}},{key:"textValueContainer",get:function(){return document.getElementById(this.textValueContainerID)}},{key:"currentPageResult",get:function(){return this.textList}},{key:"setResult",value:function(e){var t,n=this;this.textList=e,this.toggleTextContainerVisible(!0);var i=null==(t=this.textList[0])?void 0:t.value;i&&Object.keys(i).forEach((function(e){n.renderText(e,i[e])})),this.emit("valueUpdated"),this.toggleTextContainerVisible(!!i)}},{key:"updateTextValue",value:function(e,t){this.textList[0].value[e]=t,this.renderText(e,t),this.emit("valueUpdated")}},{key:"renderText",value:function(e,t){var n=document.getElementById("textKey".concat(e));n&&(n.innerText=t)}},{key:"getTextDomID",value:function(e){return"textKey".concat(e)}},{key:"initTextDisplayContainer",value:function(){var e=this,t=document.createElement("div"),n={position:"absolute",right:"0",top:"0","z-index":"20","max-width":"20%","font-family":"SourceHanSansCN-Regular",background:"rgb(102, 230, 255)",color:"white","word-break":"break-all","line-height":"24px","white-space":"pre-wrap","max-height":"80%","overflow-y":"auto",opacity:"0.6"};t.setAttribute("style",Object.keys(n).reduce((function(e,t){return e+="".concat(t,": ").concat(n[t],";")}),"")),t.setAttribute("id",this.textValueContainerID),this.config.configList.forEach((function(n){var i=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div");i.setAttribute("style","padding: 8px 16px"),o.innerText="".concat(n.key,":"),a.innerText="",a.setAttribute("id",e.getTextDomID(n.key)),i.appendChild(o),i.appendChild(a),t.appendChild(i)})),this.container.appendChild(t)}},{key:"exportData",value:function(){return[this.textList,this.basicImgInfo]}},{key:"destroyCanvas",value:function(){Object(g.a)(Object(f.a)(n.prototype),"destroyCanvas",this).call(this),this.textValueContainer&&this.container.removeChild(this.textValueContainer)}},{key:"onKeyDown",value:function(e){Object(g.a)(Object(f.a)(n.prototype),"onKeyDown",this).call(this,e),e.keyCode===fi.Z&&this.toggleTextContainerVisible()}},{key:"toggleTextContainerVisible",value:function(e){if(this.textValueContainer){var t=(void 0!==e?e:"block"!==this.textValueContainer.style.display)?"block":"none";this.textValueContainer.style.display=t}}}]),n}(Bo),Oa=Object.defineProperty,Ta=Object.defineProperties,Ea=Object.getOwnPropertyDescriptors,Da=Object.getOwnPropertySymbols,Ma=Object.prototype.hasOwnProperty,Na=Object.prototype.propertyIsEnumerable,Ra=function(e,t,n){return t in e?Oa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ba=function(e,t){for(var n in t||(t={}))Ma.call(t,n)&&Ra(e,n,t[n]);if(Da){var i,o=Object(b.a)(Da(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Na.call(t,n)&&Ra(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},ja=function(e,t){return Ta(e,Ea(t))},_a=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).isAllowDouble=function(e){var t=Object(h.a)(i).selectedID,n=i.getHoverID(e);return!(!t||t!==n)},i.textChange=function(e){!1!==i.config.textConfigurable&&i.selectedID&&(i.setPolygonList(qi.textChange(e,i.selectedID,i.polygonList)),i.emit("selectedChange"),i.render())},i.emitUpdatePolygonByDrag=function(){if(i.dragInfo){var e=i.dragInfo.originPolygon;i.emit("updatePolygonByDrag",[{newPolygon:i.selectedPolygon,originPolygon:e}])}},i.config=Et.jsonParser(e.config),i.drawingPointList=[],i.polygonList=[],i.hoverPointIndex=-1,i.hoverEdgeIndex=-1,i.drawingHistory=new yo,i.isCtrl=!1,i.isAlt=!1,i.isCombined=!1,i.pattern=me.Normal,i.getCurrentSelectedData=i.getCurrentSelectedData.bind(Object(h.a)(i)),i.updateSelectedTextAttribute=i.updateSelectedTextAttribute.bind(Object(h.a)(i)),i.selection=new _o(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"selectedIDs",get:function(){return this.selection.selectedIDs}},{key:"selectedID",get:function(){return this.selection.selectedID}},{key:"minArea",get:function(){return this.config.minArea||0}},{key:"eventBinding",value:function(){Object(g.a)(Object(f.a)(n.prototype),"eventBinding",this).call(this),this.container.removeEventListener("mouseup",this.onMouseUp),this.container.addEventListener("mouseup",this.dragMouseUp),this.dblClickListener.addEvent(this.onMouseUp,this.onLeftDblClick,this.onRightDblClick,this.isAllowDouble)}},{key:"eventUnbinding",value:function(){Object(g.a)(Object(f.a)(n.prototype),"eventUnbinding",this).call(this),this.container.removeEventListener("mouseup",this.dragMouseUp)}},{key:"destroy",value:function(){Object(g.a)(Object(f.a)(n.prototype),"destroy",this).call(this),this._textAttributeInstance&&this._textAttributeInstance.clearTextAttribute()}},{key:"selectedPolygon",get:function(){return _n.getPolygonByID(this.visiblePolygonList,this.selectedID)}},{key:"selectedPolygons",get:function(){return _n.getPolygonByIDs(this.polygonList,this.selectedIDs)}},{key:"hoverPolygon",get:function(){var e=this;return this.visiblePolygonList.find((function(t){return t.id===e.hoverID&&t.id!==e.selectedID}))}},{key:"enableDrag",get:function(){return Boolean(this.selectedID&&this.dragInfo)}},{key:"visiblePolygonList",get:function(){return this.polygonList}},{key:"polygonListUnderZoom",get:function(){var e=this;return this.visiblePolygonList.map((function(t){return ja(Ba({},t),{pointList:Tn.changePointListByZoom(t.pointList,e.zoom)})}))}},{key:"selectedText",get:function(){var e;return null==(e=this.selectedPolygon)?void 0:e.textAttribute}},{key:"dataList",get:function(){return this.polygonList}},{key:"setPattern",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(null==(t=this.drawingPointList)?void 0:t.length)>0&&!0===n||(this.pattern=e)}},{key:"currentShowList",get:function(){var e,t=[],n=Et.getRenderResultList(this.polygonList,Et.getSourceID(this.basicResult),this.attributeLockList,this.selectedIDs),i=Object(s.a)(n,2),o=i[0],a=i[1];(t=o,this.isHidden&&(t=[]),a)&&(e=t).push.apply(e,Object(c.a)(a));return t}},{key:"currentPageResult",get:function(){var e=Et.getRenderResultList(this.polygonList,Et.getSourceID(this.basicResult),[]);return Object(s.a)(e,1)[0]}},{key:"setResultAndSelectedID",value:function(e,t){this.setPolygonList(e),t&&this.setSelectedID(t),this.render()}},{key:"setResult",value:function(e){this.clearActiveStatus(),this.setPolygonList(e),this.render()}},{key:"setPolygonDataByID",value:function(e,t){return this.polygonList.map((function(n){return n.id===t?Ba(Ba({},n),e):n}))}},{key:"rotatePolygon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.Clockwise,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectedID;if(n){var i=_n.getPolygonByID(this.polygonList,n);if(i){var o=_n.updatePolygonByRotate(t,e,null==i?void 0:i.pointList);this.setPolygonList(this.setPolygonDataByID({pointList:o},n)),this.render()}}}},{key:"addPointInDrawing",value:function(e){if(this.imgInfo&&(!this.forbidAddNewPolygonFuc||!this.forbidAddNewPolygonFuc(e))){var t=this.config,n=t.upperLimitPointNum,i=t.edgeAdsorption;if(n&&this.drawingPointList.length>=n)this.emit("messageInfo","".concat(mi.getMessagesByLocale(di.UpperLimitErrorNotice,this.lang)).concat(n));else{this.deleteSelectedID();var o=this.getCoordinateUnderZoom(e),a=Tn.changeDrawOutsideTarget(o,{x:0,y:0},this.imgInfo,this.config.drawOutsideTarget,this.basicResult,this.zoom);if(0!==Tn.returnClosePointIndex(a,Tn.changePointListByZoom(this.drawingPointList,this.zoom))){var r=_n.getClosestPoint(a,this.polygonListUnderZoom,this.config.lineType,Le).dropFoot,l=Tn.changePointByZoom(r&&!1===e.altKey&&i?r:a,1/this.zoom);if(this.pattern!==me.Rect||2!==this.drawingPointList.length)this.drawingPointList.push(l),1===this.drawingPointList.length?this.drawingHistory.initRecord(this.drawingPointList):this.drawingHistory.pushHistory(this.drawingPointList);else{var c=ei.getRectangleByRightAngle(l,this.drawingPointList);if(this.drawingPointList=c,!1===this.config.drawOutsideTarget&&this.imgInfo&&this.isPolygonOutSide(this.drawingPointList))return this.emit("messageInfo","".concat(mi.getMessagesByLocale(di.ForbiddenCreationOutsideBoundary,this.lang))),void(this.drawingPointList=[]);this.addDrawingPointToPolygonList(!0)}}else this.addDrawingPointToPolygonList()}}}},{key:"clearResult",value:function(){this.setPolygonList([]),this.deleteSelectedID(),this.render()}},{key:"clearPolygonDrag",value:function(){this.drawingPointList=[],this.dragInfo=void 0,this.dragStatus=Je.Wait,this.hoverEdgeIndex=-1,this.hoverPointIndex=-1,this.hoverID=""}},{key:"clearActiveStatus",value:function(){this.clearPolygonDrag(),this.deleteSelectedID()}},{key:"clearDrawingStatus",value:function(){this.drawingPointList=[]}},{key:"setPolygonList",value:function(e){var t=this.polygonList.length;this.polygonList=e,t!==e.length&&this.emit("updatePageNumber")}},{key:"setSelectedID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.selection.setSelectedIDs(e,t),this.render(),this.emit("selectedChange")}},{key:"setDefaultAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.defaultAttribute;if(this.defaultAttribute=e,t!==e&&(this.changeStyle(e),this.emit("changeAttributeSidebar"),this.selectedPolygons.length>0&&(this.selectedPolygons.forEach((function(t){t.attribute=e})),this.history.pushHistory(this.polygonList),this.render()),this._textAttributeInstance)){if(this.attributeLockList.length>0&&!this.attributeLockList.includes(e))return void this._textAttributeInstance.clearTextAttribute();this._textAttributeInstance.updateIcon(this.getTextIconSvg(e))}}},{key:"setStyle",value:function(e){var t;Object(g.a)(Object(f.a)(n.prototype),"setStyle",this).call(this,e),this._textAttributeInstance&&!1===this.config.attributeConfigurable&&(null==(t=this._textAttributeInstance)||t.updateIcon(this.getTextIconSvg()))}},{key:"setPolygonValidAndRender",value:function(e,t){if(e){var n=this.polygonList.map((function(n){var i;if(n.id===e){var o=null==(i=null==n?void 0:n.valid)||i;return ja(Ba({},n),{valid:null!=t?t:!o})}return n}));this.setPolygonList(n),this.history.pushHistory(this.polygonList),this.render(),this.emit("updateResult")}}},{key:"addDrawingPointToPolygonList",value:function(e){var t,n=this,i=this.config.lowerLimitPointNum,o=void 0===i?3:i;if(o<3&&(o=3),this.drawingPointList.length<o)return this.drawingPointList=[],void(this.editPolygonID="");if(_n.calcPolygonSize(this.drawingPointList||[])<this.minArea)this.emit("messageInfo","".concat(mi.getMessagesByLocale(di.MinAreaLimitErrorNotice,this.lang)).concat(this.minArea));else{var a=Et.getSourceID(this.basicResult),r=Object(c.a)(this.polygonList);if(this.editPolygonID){var l=r.find((function(e){return e.id===n.editPolygonID}));if(!l)return;l.pointList=this.drawingPointList,this.editPolygonID=""}else{var s=bo(8,62),u={id:s,sourceID:a,valid:!this.isCtrl,textAttribute:"",pointList:this.drawingPointList,attribute:this.defaultAttribute,order:Et.getMaxOrder(r.filter((function(e){return Et.isSameSourceID(e.sourceID,a)})))+1};if(this.config.textConfigurable){var d;d=qi.getTextAttribute(this.polygonList.filter((function(e){return Et.isSameSourceID(e.sourceID,a)})),this.config.textCheckType),u=ja(Ba({},u),{textAttribute:d})}this.pattern===me.Rect&&!0===e&&(u=ja(Ba({},u),{isRect:!0})),r.push(u),t=u,this.setSelectedIdAfterAddingDrawing(s)}this.setPolygonList(r),this.isCtrl=!1,this.drawingPointList=[],this.history.pushHistory(r),t&&this.emit("polygonCreated",t,this.zoom,this.currentPos)}}},{key:"setSelectedIdAfterAddingDrawing",value:function(e){0!==this.drawingPointList.length&&(this.config.textConfigurable?this.setSelectedID(e):this.deleteSelectedID())}},{key:"getHoverID",value:function(e){var t,n=this,i=this.getCoordinateUnderZoom(e),o=this.currentShowList.map((function(e){return ja(Ba({},e),{pointList:Tn.changePointListByZoom(e.pointList,n.zoom)})}));return _n.getHoverPolygonID(i,o,10,null==(t=this.config)?void 0:t.lineType)}},{key:"getHoverEdgeIndex",value:function(e){var t;if(!this.selectedID)return-1;var n=this.selectedPolygon;if(!n)return-1;var i=this.getCoordinateUnderZoom(e),o=Tn.changePointListByZoom(n.pointList,this.zoom);return _n.getHoverEdgeIndex(i,o,null==(t=this.config)?void 0:t.lineType)}},{key:"getHoverPointIndex",value:function(e){if(!this.selectedID)return-1;var t=this.selectedPolygon;if(!t)return-1;var n=this.getCoordinateUnderZoom(e),i=Tn.changePointListByZoom(t.pointList,this.zoom);return Tn.returnClosePointIndex(n,i)}},{key:"deletePolygons",value:function(e){var t,n=this;if(e&&0!==e.length){var i=this.polygonList.filter((function(e){return n.selection.isIdSelected(e.id)}));this.emit("deletedObject",{deletedObject:i[0],id:i[0].id}),this.setPolygonList(this.polygonList.filter((function(e){return!n.selection.isIdSelected(e.id)}))),this.history.pushHistory(this.polygonList),null==(t=this._textAttributeInstance)||t.clearTextAttribute(),this.emit("selectedChange"),this.render()}}},{key:"deletePolygonPoint",value:function(e){if(this.selectedID){var t=this.selectedPolygon;if(t){var n=this.config.lowerLimitPointNum;n<3&&(n=3),t.pointList.length<=n?this.emit("messageInfo","".concat(mi.getMessagesByLocale(di.LowerLimitErrorNotice,this.lang)).concat(n)):(null==t||t.pointList.splice(e,1),this.history.pushHistory(this.polygonList),this.render())}}}},{key:"spaceKeydown",value:function(){var e,t,n;if(this.selectedID){if(!0===(null==(e=this.selectedPolygon)?void 0:e.isRect))return void this.emit("messageInfo","".concat(mi.getMessagesByLocale(di.UnableToReannotation,this.lang)));this.editPolygonID=this.selectedID,this.drawingPointList=null!=(n=null==(t=this.selectedPolygon)?void 0:t.pointList)?n:[],this.drawingHistory.empty(),this.drawingHistory.initRecord(this.drawingPointList),this.hoverID="",this.deleteSelectedID(),this.render()}}},{key:"onTabKeyDown",value:function(e){e.preventDefault();var t=$e.ascend;e.shiftKey&&(t=$e.descend),this.switchToNextPolygon(t)}},{key:"switchToNextPolygon",value:function(e){if(!(this.drawingPointList.length>0)){var t=Et.getRenderResultList(this.polygonList,Et.getSourceID(this.basicResult),this.attributeLockList,this.selectedIDs),n=Object(s.a)(t,2),i=n[0],o=n[1],a=Object(c.a)(i);o&&(a=[].concat(Object(c.a)(a),Object(c.a)(o)));var r=$i.getViewPort(this.canvas,this.currentPos,this.zoom),l=a.map((function(e){var t,n,i,o;return ja(Ba({},e),{x:null!=(n=null==(t=e.pointList[0])?void 0:t.x)?n:0,y:null!=(o=null==(i=e.pointList[0])?void 0:i.y)?o:0})})).filter((function(e){return $i.inViewPort({x:e.x,y:e.y},r)})),u=Et.getNextSelectedRectID(l,e,this.selectedID);if(u){this.setSelectedID(u.id);var d=this.selectedPolygon;d&&this.setDefaultAttribute(d.attribute)}this.render()}}},{key:"onKeyDown",value:function(e){if(Et.hotkeyFilter(e)&&!1!==Object(g.a)(Object(f.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode;switch(t){case fi.Space:this.spaceKeydown();break;case fi.Esc:this.drawingPointList=[],this.editPolygonID="";break;case fi.F:this.selectedID&&this.setPolygonValidAndRender(this.selectedID);break;case fi.Z:if(e.altKey)return void this.onCombinedExecute();this.setIsHidden(!this.isHidden),this.render();break;case fi.Delete:this.deletePolygons(this.selectedIDs),this.render();break;case fi.Ctrl:this.isCtrl=!0;break;case fi.Alt:!1===this.isAlt&&(e.preventDefault(),this.isAlt=!0,this.render());break;case fi.Tab:this.onTabKeyDown(e);break;case fi.X:e.altKey&&this.segment();break;default:if(this.config.attributeConfigurable){var i=qi.getAttributeByKeycode(t,this.config.attributeList);void 0!==i&&this.setDefaultAttribute(i)}}}}},{key:"onKeyUp",value:function(e){if(Object(g.a)(Object(f.a)(n.prototype),"onKeyUp",this).call(this,e),!this.selection.triggerKeyboardEvent(e,this.setPolygonList.bind(this)))switch(e.keyCode){case fi.Ctrl:this.isCtrl=!1;break;case fi.Alt:var t=this.isAlt;this.isAlt=!1,!0===t&&this.render()}}},{key:"rightMouseUp",value:function(e){if(this.drawingPointList.length>0)this.addDrawingPointToPolygonList();else{this.setSelectedID(this.hoverID,e.ctrlKey);var t=this.selectedPolygon;t&&this.setDefaultAttribute(t.attribute)}}},{key:"onLeftDblClick",value:function(e){if(this.hoverEdgeIndex>-1){var t=this.getCoordinateUnderZoom(e),n=this.selectedPolygon;if(!n)return;if(!0===n.isRect)return this.emit("messageInfo","".concat(mi.getMessagesByLocale(di.ForbidAddNewPoint,this.lang))),void this.clearPolygonDrag();var i=_n.getClosestPoint(t,this.polygonListUnderZoom,this.config.lineType,Le).dropFoot;if(!i)return;var o=this.config.upperLimitPointNum;if(o&&n.pointList.length>=o)return this.emit("messageInfo","".concat(mi.getMessagesByLocale(di.UpperLimitErrorNotice,this.lang)).concat(o)),void this.clearPolygonDrag();null==n||n.pointList.splice(this.hoverEdgeIndex+1,0,Tn.changePointByZoom(i,1/this.zoom)),this.setPolygonDataByID(n,this.selectedID),this.history.pushHistory(this.polygonList),this.hoverPointIndex=-1,this.hoverEdgeIndex=-1,this.render()}this.dragInfo=void 0}},{key:"onRightDblClick",value:function(e){this.dragInfo=void 0,this.clearImgDrag();var t=this.getHoverID(e),n=this.getHoverPointIndex(e);if(this.hoverPointIndex>-1&&this.hoverPointIndex===n)return this.deletePolygonPoint(n),this.dragInfo=void 0,this.hoverPointIndex=-1,void this.render();this.hoverID===this.selectedID&&this.deletePolygons([t]),this.render()}},{key:"onMouseDown",value:function(e){if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation&&!0!==e.ctrlKey)return this.dragMouseDown(e),!0}},{key:"onMouseLeave",value:function(){this.dragInfo&&(this.emitUpdatePolygonByDrag(),this.clearPolygonDrag(),this.history.pushHistory(this.polygonList))}},{key:"dragMouseDown",value:function(e){if(0===e.button){var t=this.getHoverID(e);if(this.selection.isIdSelected(t)){var n=[0],i=qe.Plane,o=this.selectedPolygons[0].pointList,a=this.getCoordinateUnderZoom(e);if(1===this.selectedPolygons.length){this.dragStatus=Je.Start;var r=this.getHoverPointIndex(e),l=this.getHoverEdgeIndex(e);r>-1?(i=qe.Point,n=[r]):l>-1&&this.hoverEdgeIndex>-1&&(i=qe.Line,n=[l,(l+1)%o.length])}this.dragInfo={dragStartCoord:a,dragTarget:i,initPointList:o,changePointIndex:n,originPolygon:this.selectedPolygon,selectedPolygons:this.selectedPolygons,dragPrevCoord:a,originPolygonList:this.polygonList}}}}},{key:"segment",value:function(){var e,t=this;if(this.selectedID&&(null==(e=this.config)?void 0:e.lineType)===Y.Line){var n=_n.getPolygonPointList(this.selectedID,this.currentShowList),i=this.currentShowList.filter((function(e){return e.id!==t.selectedID}));if(0!==i.length&&0!==n.length){var o=_n.getWrapPolygonIndex(n,i),a=Object(c.a)(this.polygonList);if(-1===o){var r=_n.segmentPolygonByPolygon(n,i);if(!r)return;var l=r.shift();if(!l)return;var s="",u=!0,d=Et.getSourceID(this.basicResult),h="";a=this.polygonList.map((function(e){var n,i;return e.id===t.selectedID?(s=e.attribute,u=null==(n=null==e?void 0:e.valid)||n,h=null!=(i=null==e?void 0:e.textAttribute)?i:"",ja(Ba({},e),{pointList:l})):e})),r.length>0&&r.forEach((function(e,n){a.push({sourceID:d,id:bo(8,62),pointList:e,valid:u,order:Et.getMaxOrder(t.currentShowList)+1+n,attribute:s,textAttribute:h})}))}else a[o].pointList=_n.clipPolygonFromWrapPolygon(n,a[o].pointList),a=a.filter((function(e){return e.id!==t.selectedID}));this.setPolygonList(a),this.history.pushHistory(a),this.render()}}}},{key:"onCombinedExecute",value:function(){this.selectedID?this.isCombined=!this.isCombined:this.emit("messageInfo",Ci.i18n.t("PolygonsToBeCombinedNeedToBeSelected"))}},{key:"combine",value:function(e){var t,n=this,i=this.getHoverID(e);if(i&&this.selectedID&&this.selectedID!==i)if((null==(t=this.config)?void 0:t.lineType)===Y.Line){var o=this.polygonList.find((function(e){return e.id===n.selectedID})),a=this.currentShowList.find((function(e){return e.id===i}));if(a&&o){var r=_n.combinePolygonWithPolygon(o,a);if(r){var l=r.newPolygon,c=r.unionList;if(1===c.length&&l){var s=this.polygonList.filter((function(e){return!c.includes(e.id)})).map((function(e){return e.id===n.selectedID?l:e}));this.setPolygonList(s),this.history.pushHistory(s),this.render(),this.emit("messageInfo",Ci.i18n.t("CombineSuccess"))}else this.emit("messageInfo",Ci.i18n.t("CombiningFailedNotify"));this.isCombined=!1}}}else this.emit("messageInfo",Ci.i18n.t("CurveModeDoesNotSupportCutting"))}},{key:"isPolygonOutSide",value:function(e){var t=this;if(this.dependToolName&&this.basicCanvas&&this.basicResult){var n=!1;switch(this.dependToolName){case D.Rect:n=e.filter((function(e){return!ui.isInRect(e,t.basicResult)})).length>0;break;case D.Polygon:n=_n.isPointListOutSidePolygon(e,this.basicResult.pointList,this.config.lineType)}return n}if(!this.imgInfo)return!1;var i=ei.calcViewportBoundaries(Tn.changePointListByZoom(e,this.zoom)),o=i.left,a=i.top,r=i.right,l=i.bottom,c=1e-5;return o<0||a<0||r>this.imgInfo.width+c||l>this.imgInfo.height+c}},{key:"onDragMove",value:function(e){var t=this,n=this.polygonList.map((function(n){if(t.selectedIDs.includes(n.id)){var i=t.dragPolygon(e,n);if(!i)return n;var o=ja(Ba({},n),{pointList:i});return!0===n.isRect&&t.pattern===me.Normal&&Object.assign(o,{isRect:!1}),o}return n}));this.dragInfo.dragPrevCoord=this.getCoordinateUnderZoom(e),this.setPolygonList(n),this.render()}},{key:"getDragOffset",value:function(e,t){var n,i=this.getCoordinateUnderZoom(e),o=this.dragInfo,a=o.dragTarget,r=o.dragPrevCoord,l=o.changePointIndex,c=o.initPointList,s=o.dragStartCoord;if(this.pattern===me.Rect&&!0===(null==t?void 0:t.isRect)&&l&&[qe.Line].includes(a)){var u=ei.getArrayIndex(l[0]-2,4),d=ei.getArrayIndex(l[0]-1,4),h=[c[u],c[d]],g=ei.getRectPerpendicularOffset(s,i,h);return{x:g.x/this.zoom,y:g.y/this.zoom}}return(null==(n=this.dragInfo)?void 0:n.dragTarget)===qe.Plane?{x:(i.x-r.x)/this.zoom,y:(i.y-r.y)/this.zoom}:{x:(i.x-s.x)/this.zoom,y:(i.y-s.y)/this.zoom}}},{key:"dragPolygon",value:function(e,t){var n=y.a.cloneDeep(null==t?void 0:t.pointList);if(n&&this.dragInfo){var i=this.dragInfo,o=i.initPointList,a=i.dragTarget,r=i.changePointIndex,l=this.getDragOffset(e,t);switch(this.dragStatus=Je.Move,a){case qe.Plane:n=n.map((function(e){return ja(Ba({},e),{x:e.x+l.x,y:e.y+l.y})}));break;case qe.Point:case qe.Line:n=n.map((function(e,t){return r&&r.includes(t)?ja(Ba({},e),{x:o[t].x+l.x,y:o[t].y+l.y}):e}))}if(this.pattern===me.Rect&&!0===(null==t?void 0:t.isRect)&&a===qe.Point&&r)n=ei.getPointListFromPointOffset(o,r[0],l);if(!1===this.config.drawOutsideTarget&&this.imgInfo)if(this.isPolygonOutSide(n))return;return n}}},{key:"onMouseMove",value:function(e){if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=-1,i=-1;if(this.selectedID&&(this.hoverEdgeIndex=-1,this.hoverPointIndex=-1,(t=this.getHoverPointIndex(e))>-1?this.hoverPointIndex=t:(i=this.getHoverEdgeIndex(e),this.hoverEdgeIndex=i)),!(this.drawingPointList.length>0)){var o=this.getHoverID(e);this.hoverID!==o&&(this.hoverID=o,this.render()),this.selectedIDs.length>0&&this.dragInfo&&this.onDragMove(e)}}}},{key:"leftMouseUpdateValid",value:function(e){var t=this.getHoverID(e);return!(0!==this.drawingPointList.length||!0!==e.ctrlKey||!t)&&(this.setPolygonValidAndRender(t),!0)}},{key:"leftMouseUp",value:function(e){this.leftMouseUpdateValid(e)||this.addPointInDrawing(e)}},{key:"onMouseUp",value:function(e){if(this.isCombined)switch(e.button){case 0:this.combine(e);break;case 2:this.isCombined=!1;break;default:return}else if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseUp",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){if(this.dragInfo&&this.dragStatus===Je.Move)return this.emit("updateResult"),this.emitUpdatePolygonByDrag(),this.dragInfo=void 0,this.dragStatus=Je.Wait,void this.history.pushHistory(this.polygonList);switch(e.button){case 0:this.leftMouseUp(e);break;case 2:this.rightMouseUp(e)}this.render()}}},{key:"dragMouseUp",value:function(){this.dragStatus===Je.Start&&(this.dragInfo=void 0,this.dragStatus=Je.Wait)}},{key:"exportData",value:function(){return[this.polygonList,this.basicImgInfo]}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return qi.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"getCurrentSelectedData",value:function(){var e=this.selectedPolygon;if(e){var t=this.getColor(e.attribute),n=e.valid?null==t?void 0:t.valid.stroke:null==t?void 0:t.invalid.stroke;return{width:164,textAttribute:e.textAttribute,color:n}}}},{key:"updateSelectedTextAttribute",value:function(e){if(this._textAttributeInstance&&e&&this.selectedID){var t=e;!1===qi.textAttributeValidate(this.config.textCheckType,"",t)&&(this.emit("messageError",qi.getErrorNotice(this.config.textCheckType,this.lang)),t=""),this.setPolygonList(qi.textChange(t,this.selectedID,this.polygonList)),this.emit("updateTextAttribute"),this.render()}}},{key:"renderTextAttribute",value:function(){var e,t=this.selectedPolygon;if(this.ctx&&!1!==this.config.textConfigurable&&t){var n=t.pointList,i=t.attribute,o=t.valid,a=t.textAttribute,r=n[n.length-1],l=r.x,c=r.y,s=Tn.getOffsetCoordinate({x:l,y:c},this.currentPos,this.zoom),u=this.getColor(i),d=o?null==u?void 0:u.valid.stroke:null==u?void 0:u.invalid.stroke;this._textAttributeInstance||(this._textAttributeInstance=new jo({width:164,container:this.container,icon:this.getTextIconSvg(i),color:d,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedTextAttribute})),this._textAttributeInstance&&!(null==(e=this._textAttributeInstance)?void 0:e.isExit)&&this._textAttributeInstance.appendToContainer(),this._textAttributeInstance.update("".concat(a),{left:s.x,top:s.y,color:d,width:164})}}},{key:"renderStaticPolygon",value:function(){var e,t=this;!1===this.isHidden&&(null==(e=this.visiblePolygonList)||e.forEach((function(e){var n,i,o,a,r;if(![t.selectedID,t.editPolygonID].includes(e.id)){var l=e.textAttribute,c=e.attribute,s=t.getColor(c),u=ia.getStrokeAndFill(s,e.valid),d=Tn.changePointListByZoom(e.pointList||[],t.zoom,t.currentPos);vo.drawPolygonWithFillAndLine(t.canvas,d,{fillColor:u.fill,strokeColor:u.stroke,pointColor:"white",thickness:null!=(i=null==(n=t.style)?void 0:n.width)?i:2,lineCap:"round",isClose:!0,lineType:null==(o=t.config)?void 0:o.lineType});var h="".concat(null!=(a=qi.getAttributeShowText(c,t.config.attributeList))?a:"");(null==(r=t.config)?void 0:r.isShowOrder)&&(null==e?void 0:e.order)>0&&(h="".concat(e.order," ").concat(h)),vo.drawText(t.canvas,d[0],h,Ba({color:u.stroke},ft));var g=d[d.length-1];vo.drawText(t.canvas,{x:g.x+pt.x,y:g.y+pt.y},l,Ba({color:u.stroke},ft))}})))}},{key:"renderSelectedPolygons",value:function(){var e=this;this.selectedPolygons.forEach((function(t){e.renderSelectedPolygon(t)}))}},{key:"renderSelectedPolygon",value:function(e){var t,n,i;if(e){var o=this.getColor(e.attribute),a=ia.getStrokeAndFill(o,e.valid,{isSelected:!0});vo.drawSelectedPolygonWithFillAndLine(this.canvas,Tn.changePointListByZoom(e.pointList,this.zoom,this.currentPos),{fillColor:a.fill,strokeColor:a.stroke,pointColor:"white",thickness:2,lineCap:"round",isClose:!0,lineType:null==(t=this.config)?void 0:t.lineType});var r="".concat(null!=(n=qi.getAttributeShowText(e.attribute,this.config.attributeList))?n:"");(null==(i=this.config)?void 0:i.isShowOrder)&&(null==e?void 0:e.order)>0&&(r="".concat(e.order," ").concat(r)),vo.drawText(this.canvas,Tn.changePointByZoom(e.pointList[0],this.zoom,this.currentPos),r,Ba({color:a.stroke},ft)),this.renderTextAttribute()}}},{key:"renderHoverPolygon",value:function(){var e;if(this.hoverID&&this.hoverID!==this.editPolygonID){var t=this.hoverPolygon;if(t){var n="",i=this.getColor(t.attribute);n=t.valid?i.validHover.fill:ia.getStrokeAndFill(i,!1,{isHover:!0}).fill,vo.drawPolygonWithFill(this.canvas,Tn.changePointListByZoom(t.pointList,this.zoom,this.currentPos),{color:n,lineType:null==(e=this.config)?void 0:e.lineType})}}}},{key:"renderPolygon",value:function(){var e,t,n,i;this.renderStaticPolygon(),this.renderHoverPolygon(),this.renderSelectedPolygons();var o=this.getColor(this.defaultAttribute),a=ia.getStrokeAndFill(o,!this.isCtrl);if((null==(e=this.drawingPointList)?void 0:e.length)>0){var r=Object(c.a)(this.drawingPointList),l=Tn.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos);if(this.pattern===me.Rect&&2===r.length)r=ei.getRectangleByRightAngle(l,r);else{if((null==(t=this.config)?void 0:t.edgeAdsorption)&&!1===this.isAlt){var s=_n.getClosestPoint(l,this.polygonList,null==(n=this.config)?void 0:n.lineType,Le/this.zoom).dropFoot;s&&(l=s)}r.push(l)}vo.drawSelectedPolygonWithFillAndLine(this.canvas,Tn.changePointListByZoom(r,this.zoom,this.currentPos),{fillColor:a.fill,strokeColor:a.stroke,pointColor:"white",thickness:2,lineCap:"round",isClose:!1,lineType:this.config.lineType})}if(this.hoverPointIndex>-1&&this.selectedID){var u=this.selectedPolygon;if(!u)return;var d=ia.getStrokeAndFill(o,u.valid,{isSelected:!0}),h=null==u?void 0:u.pointList[this.hoverPointIndex];if(h){var g=Tn.changePointByZoom(h,this.zoom,this.currentPos),f=g.x,v=g.y;vo.drawCircleWithFill(this.canvas,{x:f,y:v},5,{color:d.fill})}}if(this.hoverEdgeIndex>-1&&this.selectedID){var p=this.selectedPolygon;if(!p)return;var b=ia.getStrokeAndFill(o,p.valid,{isSelected:!0});vo.drawLineWithPointList(this.canvas,Tn.changePointListByZoom(p.pointList,this.zoom,this.currentPos),{color:b.stroke,thickness:10,hoverEdgeIndex:this.hoverEdgeIndex,lineType:null==(i=this.config)?void 0:i.lineType})}}},{key:"render",value:function(){this.ctx&&(Object(g.a)(Object(f.a)(n.prototype),"render",this).call(this),this.renderPolygon(),this.renderCursorLine(this.getLineColor(this.defaultAttribute)))}},{key:"renderCursorLine",value:function(e){if(Object(g.a)(Object(f.a)(n.prototype),"renderCursorLine",this).call(this,e),this.isCombined){var t=this.coord,i=t.x,o=t.y,a=10;vo.drawRectWithFill(this.canvas,{x:i+a,y:o-40-1,width:186,height:32},{color:"black"}),vo.drawText(this.canvas,{x:i,y:o},Ci.i18n.t("ClickAnotherPolygon"),{textAlign:"center",color:"white",offsetX:103,offsetY:-21}),vo.drawRect(this.canvas,{x:i-a,y:o-a,width:20,height:20},{lineDash:[6],color:"white"})}}},{key:"undo",value:function(){if(this.drawingPointList.length>0){var e=this.drawingHistory.undo();if(!e)return;return this.drawingPointList=e,void this.render()}var t=this.history.undo();t&&(t.length!==this.polygonList.length&&this.deleteSelectedID(),this.setPolygonList(t),this.render())}},{key:"redo",value:function(){if(this.drawingPointList.length>0){var e=this.drawingHistory.redo();if(!e)return;return this.drawingPointList=e,void this.render()}var t=this.history.redo();t&&(t.length!==this.polygonList.length&&this.deleteSelectedID(),this.setPolygonList(t),this.render())}},{key:"deleteSelectedID",value:function(){this.setSelectedID("")}}]),n}(Bo),Ha=Object.defineProperty,Va=Object.defineProperties,Fa=Object.getOwnPropertyDescriptors,Za=Object.getOwnPropertySymbols,za=Object.prototype.hasOwnProperty,Ua=Object.prototype.propertyIsEnumerable,Ga=function(e,t,n){return t in e?Ha(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Wa={textConfigurable:!1,attributeConfigurable:!0,attributeList:[]},Ka=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,(i=function(e,t){for(var n in t||(t={}))za.call(t,n)&&Ga(e,n,t[n]);if(Za){var i,o=Object(b.a)(Za(t));try{for(o.s();!(i=o.n()).done;)n=i.value,Ua.call(t,n)&&Ga(e,n,t[n])}catch(a){o.e(a)}finally{o.f()}}return e}({},e),o={config:JSON.stringify(Wa)},Va(i,Fa(o))));var i,o}return Object(d.a)(n,[{key:"setSelectedIdAfterAddingDrawingRect",value:function(){this.drawingRect&&this.setSelectedRectID(this.drawingRect.id)}}]),n}(Yo),Ya=n(202),Xa=n.n(Ya),Ja=function(){function e(t){Object(u.a)(this,e),this._domMap=new Map,this._container=t.container,this._height=t.height}return Object(d.a)(e,[{key:"wheelChange",value:function(e){e.stopPropagation()}},{key:"clearTag",value:function(e){var t=this._container,n=window.self.document.getElementById(e);n&&t&&t.contains(n)&&(n.removeEventListener("wheel",this.wheelChange),null==t||t.removeChild(n))}},{key:"render",value:function(e){var t=this,n=Array.from(this._domMap.keys()),i=e.map((function(e){return e.id}));e.forEach((function(e){var n=e.text,i=e.textMaxWidth,o=e.color,a=void 0===o?"white":o,r=e.background,l=void 0===r?"rgba(0, 0, 0, 0.6)":r,c=e.style;if(t._domMap.has(e.id)){var s=t._domMap.get(e.id);s&&(s.innerHTML=n)}else{var u=vo.drawTagByDom(t._container,n,e.id);u&&(u.setAttribute("style","\n              position: absolute;\n              top: 0;\n              right: 0;\n              z-index: 20;\n              padding: 8px 20px;\n              font-size: 15px;\n              max-width: ".concat(i,"px;\n              color: ").concat(a,";\n              text-align: left;\n              line-height: 32px;\n              word-break: break-all;\n              white-space: pre-wrap;\n              background: ").concat(l,";\n              opacity: 0.9;\n              max-height: ").concat(.8*t._height,"px;\n              overflow-y: scroll;\n              clear: both;\n              ").concat(ia.getStyle2String(c),"\n            ")),u.addEventListener("wheel",t.wheelChange),t._domMap.set(e.id,u))}})),n.forEach((function(e){-1===i.indexOf(e)&&(t.clearTag(e),t._domMap.delete(e))}))}}]),e}(),Qa=n(16),qa=Object.defineProperty,$a=Object.defineProperties,er=Object.getOwnPropertyDescriptors,tr=Object.getOwnPropertySymbols,nr=Object.prototype.hasOwnProperty,ir=Object.prototype.propertyIsEnumerable,or=function(e,t,n){return t in e?qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n};function ar(e){var t;return(t=new Qa.t).set.apply(t,Object(c.a)(e))}function rr(e,t,n){var i=Ci.MatrixUtils.transferMatrix34FromKitti2Three(e),o=Ci.MatrixUtils.transferMatrix33FromKitti2Three(t),a=Ci.MatrixUtils.transferMatrix34FromKitti2Three(n),r=ar(i),l=ar(o),c=ar(a);return{composeMatrix4:c.clone().premultiply(l).premultiply(r),PM:r,RM:l,TM:c}}function lr(e,t,n){var i,o=new Qa.M(e.x,e.y,null!=(i=null==e?void 0:e.z)?i:1),a=(new Qa.t).makeRotationZ(n),r=(new Qa.t).makeTranslation(t.x,t.y,t.z),l=(new Qa.t).makeTranslation(-t.x,-t.y,-t.z);return o.clone().applyMatrix4(l).applyMatrix4(a).applyMatrix4(r)}function cr(e,t){var n=new Qa.N(e.x,e.y,e.z).applyMatrix4(t);if(!(n.z<0)){var i=1/n.z,o=(new Qa.t).set(i,0,0,0,0,i,0,0,0,0,i,0,0,0,0,1);return n.applyMatrix4(o)}}function sr(e){var t,n=e.center,i=e.width,o=e.height,a=e.depth,r=e.rotation,l=[{x:n.x+i/2,y:n.y-o/2},{x:n.x+i/2,y:n.y+o/2},{x:n.x-i/2,y:n.y+o/2},{x:n.x-i/2,y:n.y-o/2}].map((function(e){var t=lr(e,n,r);return{x:t.x,y:t.y}})),c=n.z+a/2,s=n.z-a/2;return t=function(e,t){for(var n in t||(t={}))nr.call(t,n)&&or(e,n,t[n]);if(tr){var i,o=Object(b.a)(tr(t));try{for(o.s();!(i=o.n()).done;)n=i.value,ir.call(t,n)&&or(e,n,t[n])}catch(a){o.e(a)}finally{o.f()}}return e}({},e),$a(t,er({polygonPointList:l,zMax:c,zMin:s}))}function ur(e,t,n){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x;return i*(n.y-e.y)-a*o}function dr(e){for(var t=function(e){var t=e.slice();return t.sort((function(e,t){return e.x===t.x?t.y-e.y:e.x-t.x})),t}(e),n=[],i=0;i<t.length;i++){for(;n.length>=2&&ur(n[n.length-2],n[n.length-1],t[i])<=0;)n.pop();n.push(t[i])}for(var o=[],a=t.length-1;a>=0;a--){for(;o.length>=2&&ur(o[o.length-2],o[o.length-1],t[a])<=0;)o.pop();o.push(t[a])}return n.pop(),o.pop(),n.concat(o)}var hr=function(e,t){return cr(e,rr(t.P,t.R,t.T).composeMatrix4)},gr=function(e,t){var n=rr(t.P,t.R,t.T).composeMatrix4;return new Qa.N(e.x,e.y,e.z).applyMatrix4(n.invert())},fr=function(e){var t=e.point,n=e.calib,i=e.width,o=e.height;if(!n)return!1;var a=hr(t,n);return!!a&&(a.x>=0&&a.x<=i&&a.y>=0&&a.y<=o)},vr=function(e){for(var t=e.points,n=e.calib,i=e.width,o=e.height,a=[],r=0;r<t.length;r+=3){var l=t[r],c=t[r+1],s=t[r+2];fr({point:{x:l,y:c,z:s},calib:n,width:i,height:o})?a.push(1):a.push(0)}return a},pr=function(e){if(0===e.length)return[];for(var t=[],n=0;n<e[0].length;n++){for(var i=0;i<e.length;i++)if(1===e[i][n]){t.push(1);break}t.length===n&&t.push(0)}return t};function br(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{createRange:!1},i=n.createRange,o=Ci.PointCloudUtils.getAllViewData(e),a=t.P,r=t.R,l=t.T,s=rr(a,r,l),u=s.composeMatrix4,d=o.map((function(t){return{type:t.type,pointList:t.pointList.map((function(t){return lr(t,e.center,e.rotation)})).map((function(e){return cr(e,u)})).map((function(e){if(e)return{id:bo(),x:null==e?void 0:e.x,y:null==e?void 0:e.y}})).filter((function(e){return void 0!==e}))}})).filter((function(e){return 0!==e.pointList.length})),h=[];if(6===d.length&&!0===i){var g=d[0].pointList,f=d[1].pointList;h=dr([].concat(Object(c.a)(g),Object(c.a)(f)))}return{transferViewData:d,viewRangePointList:h}}var mr,yr,Cr=Object.defineProperty,Ir=Object.defineProperties,xr=Object.getOwnPropertyDescriptors,wr=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,Sr=Object.prototype.propertyIsEnumerable,Pr=function(e,t,n){return t in e?Cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Lr=function(e,t){for(var n in t||(t={}))kr.call(t,n)&&Pr(e,n,t[n]);if(wr){var i,o=Object(b.a)(wr(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Sr.call(t,n)&&Pr(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},Ar=function(e,t){return Ir(e,xr(t))},Or="#6371FF",Tr=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i,o;return Object(u.a)(this,n),(i=t.call(this,Ar(Lr({},e),{showDefaultCursor:!0}))).style={},i.annotations=[],i.connectionPoints=[],i.getHoverRectID=function(e){var t,n,o=i.getCoordinateUnderZoom(e),a=Tn.changePointByZoom(o,1/i.zoom);if(!((null==(t=i.annotations)?void 0:t.length)<=0)&&(null==(n=i.annotations)?void 0:n.length)){for(var r="",l=Number.MAX_SAFE_INTEGER,c=0;c<i.annotations.length;c++){var s=i.annotations[c];switch(s.type){case"rect":var u=s.annotation;if(ui.isInRect(o,u,3,i.zoom)){var d=u.width*u.height;d<l&&(r=u.id,l=d)}break;case"polygon":var h=s.annotation;if(_n.isInPolygon(a,h.pointList)){var g=_n.getPolygonArea(h.pointList);g<l&&(r=h.id,l=g)}}}return r}},i.style=null!=(o=e.style)?o:{stroke:Or,thickness:3},i.annotations=e.annotations,i.loading=!1,i.renderDomInstance=new Ja({container:i.container,height:i.canvas.height}),i}return Object(d.a)(n,[{key:"clearConnectionPoints",value:function(){this.connectionPoints=[],this.render()}},{key:"checkConnectionPoints",value:function(){var e,t,n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annotations;this.connectPointsStatus&&(null==(t=(e=this.connectPointsStatus).close)||t.call(e)),this.emit("connectionPointsStatusUpdate",(function(){return new Promise((function(e){var t=ei.getCollectionPointByAnnotationDataPromise(i),o=t.promise,a=t.close;n.connectPointsStatus={close:a},o.then((function(t){n.connectionPoints=t.connectionPoints,n.render(),n.connectPointsStatus=void 0,e({connectionPoints:t.connectionPoints})}))}))}))}},{key:"setLoading",value:function(e){this.loading=e,this.render()}},{key:"onMouseLeave",value:function(){Object(g.a)(Object(f.a)(n.prototype),"onMouseLeave",this).call(this),this.mouseHoverID=void 0,this.emit("onChange","hover",[])}},{key:"onMouseDown",value:function(e){if(Object(g.a)(Object(f.a)(n.prototype),"onMouseDown",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;var t=this.mouseHoverID;if(0===e.button){var i=[];t&&(i=[t]),this.emit("onChange","selected",i),this.render()}}},{key:"onMouseMove",value:function(e){if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.mouseHoverID,i=this.getHoverRectID(e);if(t!==i){this.mouseHoverID=i;var o=[];i&&(o=[i]),this.emit("onChange","hover",o),this.render()}}}},{key:"updateData",value:function(e){this.annotations=e,this.render()}},{key:"getSpecificStyle",value:function(e){var t=y.a.pick(e,["stroke","thickness","fill","radius"]),n=Lr(Lr({},this.style),t);return n.stroke&&Object.assign(n,{color:n.stroke}),n}},{key:"getFontStyle",value:function(e,t){var n,i,o=null!=(n=null==e?void 0:e.fontSize)?n:14,a=null!=(i=null==e?void 0:e.fontFamily)?i:"Arial";return Ar(Lr({},vt),{color:t.stroke,font:"normal normal 600 ".concat(o,"px ").concat(a)})}},{key:"appendOffset",value:function(e){var t=e.x,n=e.y;return{x:t+ft.offsetX,y:n+ft.offsetY}}},{key:"getRenderText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="",i="";return e&&!0!==t?((null==e?void 0:e.order)&&(n="".concat(e.order)),(null==e?void 0:e.label)&&(n=n?"".concat(n,"_").concat(e.label):"".concat(e.label)),(null==e?void 0:e.attribute)&&(n=n?"".concat(n,"  ").concat(e.attribute):"".concat(e.attribute)),(null==e?void 0:e.textAttribute)&&(i=null==e?void 0:e.textAttribute),{headerText:n,bottomText:i}):{headerText:n,bottomText:i}}},{key:"getReferenceOptions",value:function(e){return e?{lineCap:"butt",lineDash:[20,20]}:{}}},{key:"focusPositionByPointList",value:function(e){var t=ei.calcViewportBoundaries(e),n={x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top},i=Io.getBasicRecPos(this.imgNode,n,this.size,.5);if(i){this.setCurrentPos(i.currentPos),this.setCurrentPosStorage(i.currentPos);var o=this.imgInfo,a=this.innerPosAndZoom.innerZoom;o&&this.setImgInfo(Ar(Lr({},o),{width:o.width/a*i.innerZoom,height:o.height/a*i.innerZoom})),this.setZoom(i.innerZoom),this.render(),this.renderBasicCanvas()}}},{key:"renderConnectionPoints",value:function(){var e=this;this.connectionPoints.forEach((function(t){var n=Tn.changePointByZoom(t,e.zoom,e.currentPos);vo.drawCircleWithFill(e.canvas,n,4,{color:"#fff"}),vo.drawCircleWithFill(e.canvas,n,2,{color:"#000"})}))}},{key:"getRenderStyle",value:function(e){var t=this.getSpecificStyle(e.annotation);return{style:t,fontStyle:this.getFontStyle(e.annotation,t)}}},{key:"renderLine",value:function(e){var t,n,i;if("line"===e.type){var o=this.getRenderStyle(e),a=o.style,r=o.fontStyle,l=e.annotation;if((null==(t=null==l?void 0:l.pointList)?void 0:t.length)>=2){var c=l.lineType,s=void 0===c?Y.Line:c,u=Tn.changePointListByZoom(null!=(n=null==l?void 0:l.pointList)?n:[],this.zoom,this.currentPos),d=Ar(Lr(Lr({},a),this.getReferenceOptions(null==l?void 0:l.isReference)),{lineType:s,strokeColor:a.stroke}),h=[];if(h=l.showKeyPoint?vo.drawPolygonWithKeyPoint(this.canvas,u,d):vo.drawPolygon(this.canvas,u,d),!0===(null==l?void 0:l.showDirection)&&(null==(i=null==l?void 0:l.pointList)?void 0:i.length)>=2){var g=u[0],f=ei.getLineCenterPoint([u[0],u[1]]);if(s===Y.Curve){var v=Math.floor(Pe/2);g=h[v],f=h[v+1]}vo.drawArrowByCanvas(this.canvas,g,f,{color:a.stroke,thickness:a.thickness}),vo.drawCircle(this.canvas,u[0],a.thickness+6,{color:a.stroke,thickness:a.thickness})}var p=this.getRenderText(l,null==l?void 0:l.hiddenText),b=p.headerText,m=p.bottomText;if(b&&vo.drawText(this.canvas,this.appendOffset(u[0]),b,r),m){f=u[u.length-1];vo.drawText(this.canvas,this.appendOffset({x:f.x+pt.x,y:f.y+pt.y}),m,r)}}}}},{key:"renderPolygon",value:function(e){var t,n,i,o,a;if("polygon"===e.type){var r=this.getRenderStyle(e),l=r.style,c=r.fontStyle,s=e.annotation;if((null==(t=null==s?void 0:s.pointList)?void 0:t.length)>=3){var u=s.lineType,d=void 0===u?Y.Line:u,h=Tn.changePointListByZoom(null!=(n=null==s?void 0:s.pointList)?n:[],this.zoom,this.currentPos);if(s.id===this.mouseHoverID||l.fill){var g=Xa()(null!=(o=null!=(i=null==l?void 0:l.fill)?i:null==l?void 0:l.stroke)?o:Or),f="rgba(".concat(g[0],", ").concat(g[1],", ").concat(g[2],",").concat(.8*g[3],")");vo.drawPolygonWithFill(this.canvas,h,{color:f,lineType:d})}var v=Ar(Lr(Ar(Lr({},l),{isClose:!0}),this.getReferenceOptions(null==s?void 0:s.isReference)),{lineType:d,strokeColor:l.stroke}),p=[];if(p=s.showKeyPoint?vo.drawPolygonWithKeyPoint(this.canvas,h,v):vo.drawPolygon(this.canvas,h,v),!0===(null==s?void 0:s.showDirection)&&(null==(a=null==s?void 0:s.pointList)?void 0:a.length)>=2){var b=h[0],m=ei.getLineCenterPoint([h[0],h[1]]);if(d===Y.Curve){var y=Math.floor(Pe/2);b=p[y],m=p[y+1]}vo.drawArrowByCanvas(this.canvas,b,m,{color:l.stroke,thickness:l.thickness}),vo.drawCircle(this.canvas,h[0],l.thickness+6,{color:l.stroke,thickness:l.thickness})}var C=this.getRenderText(s,null==s?void 0:s.hiddenText),I=C.headerText,x=C.bottomText;if(I&&vo.drawText(this.canvas,this.appendOffset(h[0]),I,c),x){m=h[h.length-1];vo.drawText(this.canvas,this.appendOffset({x:m.x+pt.x,y:m.y+pt.y}),x,c)}}}}},{key:"renderSingleCuboid",value:function(e){var t,n,i=this.getRenderStyle(e).style,o=e.annotation,a=Xa()(null!=(n=null!=(t=null==i?void 0:i.fill)?t:null==i?void 0:i.stroke)?n:Or),r="rgba(".concat(a[0],", ").concat(a[1],", ").concat(a[2],",").concat(.8*a[3],")"),l=i.stroke,c=Tn.changeCuboidByZoom(o,this.zoom,this.currentPos),s=this.getRenderText(o,null==o?void 0:o.hiddenText),u=s.headerText,d=s.bottomText;vo.drawCuboidWithText(this.canvas,c,{strokeColor:l,fillColor:r,thickness:i.thickness},{config:this.config,hiddenText:null==o?void 0:o.hiddenText,headerText:u,bottomText:d})}},{key:"renderBox3d",value:function(e){var t=this;if("box3d"===e.type){var n=e.annotation,i=br(n,n.calib).transferViewData,o={fill:"transparent"},a=y.a.pick(n,["stroke","thickness"]);i.forEach((function(n,i){var r=Lr(Ar(Lr({},a),{id:"".concat(e.annotation.id,"-").concat(i),pointList:n.pointList}),o);switch(n.type){case"line":t.renderLine({type:"line",annotation:r});break;case"polygon":t.renderPolygon({type:"polygon",annotation:r})}}))}}},{key:"render",value:function(){var e=this;try{if(Object(g.a)(Object(f.a)(n.prototype),"render",this).call(this),!0===this.loading)return;var t=this.annotations.filter((function(e){return"text"===e.type&&"rt"===e.annotation.position})).map((function(e){return e.annotation}));this.renderDomInstance.render(t),this.annotations.forEach((function(t){var n,i,o,a,r,l=e.getSpecificStyle(t.annotation),c=e.getFontStyle(t.annotation,l);switch(t.type){case"rect":var s=t.annotation,u=s.hiddenText,d=void 0!==u&&u,h=s.isReference,g=s.hiddenRectSize,f=void 0!==g&&g,v=e.zoom,p=Tn.changeRectByZoom(s,e.zoom,e.currentPos),b=p.x,m=p.y,y=p.width,C=p.height;if(s.id===e.mouseHoverID||l.fill){var I=Xa()(null!=(i=null!=(n=null==l?void 0:l.fill)?n:null==l?void 0:l.stroke)?i:Or),x="rgba(".concat(I[0],", ").concat(I[1],", ").concat(I[2],",").concat(.8*I[3],")");vo.drawRectWithFill(e.canvas,p,{color:x})}vo.drawRect(e.canvas,p,Lr(Ar(Lr({},l),{hiddenText:!0}),e.getReferenceOptions(h)));var w=e.getRenderText(s,null==s?void 0:s.hiddenText),k=w.headerText,S=w.bottomText;k&&vo.drawText(e.canvas,{x:b,y:m-6},k,Lr({textMaxWidth:300},c));var P="".concat(Math.round(y/v)," * ").concat(Math.round(C/v)),L=7*P.length;if(d||f||vo.drawText(e.canvas,{x:b+y-L,y:m+C+15},P,c),S){var A=Math.max(20,y-L);vo.drawText(e.canvas,{x:b,y:m+C+20},s.textAttribute,Lr({textMaxWidth:A},c))}break;case"polygon":e.renderPolygon(t);break;case"line":e.renderLine(t);break;case"point":var O=t.annotation,T=Tn.changePointByZoom(O,e.zoom,e.currentPos),E=null!=(o=l.radius)?o:3;vo.drawCircle(e.canvas,T,E,l);var D=e.getRenderText(O,null==O?void 0:O.hiddenText),M=D.headerText,N=D.bottomText;M&&vo.drawText(e.canvas,{x:T.x+E/2,y:T.y-E-4},M,Lr({textAlign:"center"},c)),N&&vo.drawText(e.canvas,e.appendOffset({x:T.x+E,y:T.y+E+24}),N,c);break;case"text":var R=t.annotation,B=R.text,j=R.x,_=R.y,H=R.textMaxWidth,V=R.color,F=void 0===V?"white":V,Z=R.background,z=void 0===Z?"rgba(0, 0, 0, 0.6)":Z,U=R.lineHeight,G=void 0===U?25:U,W=R.font,K=void 0===W?be:W,Y=R.position,X=Tn.changePointByZoom({x:j,y:_},e.zoom,e.currentPos),J=ei.getTextArea(e.canvas,R.text,H,K,G),Q=J.width,q=J.height,$=J.fontHeight,ee=void 0===$?0:$;if("rt"===Y)break;vo.drawRectWithFill(e.canvas,{x:X.x,y:X.y,width:Q+20,height:q+20,id:"",sourceID:"",valid:!0,textAttribute:"",attribute:""},{color:z}),vo.drawText(e.canvas,{x:X.x+10,y:X.y+ee+10},B,{color:F,lineHeight:G,font:K,textMaxWidth:H});break;case"box3d":e.renderBox3d(t);break;case"cuboid":e.renderSingleCuboid(t)}null==(r=null==(a=t.annotation)?void 0:a.renderEnhance)||r.call(a,{ctx:e.ctx,canvas:e.canvas,currentPos:e.currentPos,zoom:e.zoom,data:t,toolInstance:e})})),this.renderConnectionPoints()}catch(i){console.error("ViewOperation Render Error",i)}}}]),n}(Bo),Er=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i,o,a,r,l;if(Object(u.a)(this,n),(r=t.call(this,e)).toolName=D.ScribbleTool,r.action=Ce.Scribble,r.getOriginCoordinate=function(e){return Tn.changePointByZoom(r.getCoordinateUnderZoomByRotate(e),1/r.zoom)},r.onMouseDown=function(e){Object(g.a)((i=Object(h.a)(r),Object(f.a)(n.prototype)),"onMouseDown",i).call(i,e)||r.forbidMouseOperation||!r.imgInfo||(r.initCacheCanvas(r.imgNode),r.mouseEvents("onMouseDown").call(Object(h.a)(r),e))},r.onMouseMove=function(e){Object(g.a)((o=Object(h.a)(r),Object(f.a)(n.prototype)),"onMouseMove",o).call(o,e)||r.forbidMouseOperation||!r.imgInfo||r.mouseEvents("onMouseMove").call(Object(h.a)(r),e)},r.onMouseUp=function(e){Object(g.a)((a=Object(h.a)(r),Object(f.a)(n.prototype)),"onMouseUp",a).call(a,e)||r.forbidMouseOperation||!r.imgInfo||r.mouseEvents("onMouseUp").call(Object(h.a)(r),e)},r.mouseEvents=function(e){var t;return(t={},Object(_.a)(t,Ce.Scribble,{onMouseMove:r.onScribbleMove,onMouseUp:r.onScribbleEnd,onMouseDown:r.onScribbleStart}),Object(_.a)(t,Ce.Erase,{onMouseMove:r.onEraseMove,onMouseUp:r.onEraseEnd,onMouseDown:r.onEraseStart}),t)[r.action][e]},r.setPattern=function(e){if(r.action=e,e===Ce.Erase)r.setCustomCursor(r.cursorErase);else r.setCustomCursor("none")},r.penSize=20,(null==(l=r.config.attributeList)?void 0:l.length)>0){var c=r.config.attributeList[0];r.setDefaultAttribute(c.value)}return r}return Object(d.a)(n,[{key:"cursorErase",get:function(){var e="data:image/svg+xml;base64,".concat(window.btoa(unescape(encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?><svg width="24" heighst="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#icon-65e7e1747c11bad3)"><path d="M44.7818 24.1702L31.918 7.09935L14.1348 20.5L27.5 37L30.8556 34.6643L44.7818 24.1702Z" fill="#141414" stroke="#000000" stroke-width="4" stroke-linejoin="miter"/><path d="M27.4998 37L23.6613 40.0748L13.0978 40.074L10.4973 36.6231L4.06543 28.0876L14.4998 20.2248" stroke="#000000" stroke-width="4" stroke-linejoin="miter"/><path d="M13.2056 40.072L44.5653 40.072" stroke="#000000" stroke-width="4" stroke-linecap="round"/></g><defs><clipPath id="icon-65e7e1747c11bad3"><rect width="48" height="48" fill="#df4c4c"/></clipPath></defs></svg>'))));return"url(".concat(e,") 0 0, auto")}},{key:"defaultCursor",get:function(){return this.action===Ce.Erase?this.cursorErase:this.isShowDefaultCursor?"default":"none"}},{key:"color",get:function(){var e,t;return null!=(t=null==(e=null==this?void 0:this.defaultAttributeInfo)?void 0:e.color)?t:"white"}},{key:"penSizeWithZoom",get:function(){return this.penSize/this.zoom}},{key:"cacheCanvasToDataUrl",get:function(){var e;return null==(e=this.cacheCanvas)?void 0:e.toDataURL("image/png",0)}},{key:"setPenSize",value:function(e){this.penSize=e}},{key:"initCacheCanvas",value:function(e){if(!this.cacheCanvas&&e){var t=Ci.ImgConversionUtils.createCanvas(e),n=t.canvas,i=t.ctx;this.cacheCanvas=n,this.cacheContext=i}}},{key:"updateCacheCanvasSize",value:function(e){this.cacheCanvas&&(this.cacheCanvas.width=e.width,this.cacheCanvas.height=e.height)}},{key:"updateUrl2CacheContext",value:function(e){var t=this;Ci.ImgConversionUtils.createImgDom(e).then((function(e){t.cacheContext||t.initCacheCanvas(e),t.cacheContext&&(t.cacheContext.save(),t.clearCacheCanvas(),t.cacheContext.drawImage(e,0,0,e.width,e.height),t.cacheContext.restore(),t.render())}))}},{key:"setImgNode",value:function(e,t){Object(g.a)(Object(f.a)(n.prototype),"setImgNode",this).call(this,e,t),this.cacheCanvas?this.updateCacheCanvasSize(e):this.initCacheCanvas(e)}},{key:"setResult",value:function(e){var t,n,i=(null!=(t=null==e?void 0:e[0])?t:{}).url;this.clearCacheCanvas(),i||(i=null!=(n=this.cacheCanvasToDataUrl)?n:""),this.history.initRecord([i],!0),i?this.updateUrl2CacheContext(i):this.render()}},{key:"onKeyDown",value:function(e){if(Et.hotkeyFilter(e)&&!1!==Object(g.a)(Object(f.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode,i=qi.getAttributeByKeycode(t,this.config.attributeList);void 0!==i&&this.setDefaultAttribute(i)}}},{key:"eventBinding",value:function(){Object(g.a)(Object(f.a)(n.prototype),"eventBinding",this).call(this)}},{key:"setDefaultAttribute",value:function(e){var t=this.config.attributeList.find((function(t){return t.value===e}));t&&(this.defaultAttribute=t.value,this.defaultAttributeInfo=t,this.emit("changeAttributeSidebar"),this.render())}},{key:"clearStatusAfterLeave",value:function(){this.onScribbleEnd(),this.startPoint=void 0}},{key:"onMouseLeave",value:function(){Object(g.a)(Object(f.a)(n.prototype),"onMouseLeave",this).call(this),this.clearStatusAfterLeave()}},{key:"onScribbleStart",value:function(e){if(this.cacheContext){this.cacheContext.save(),this.cacheContext.beginPath(),this.cacheContext.strokeStyle=this.color,this.cacheContext.lineWidth=this.penSizeWithZoom,this.cacheContext.lineCap="round",this.cacheContext.lineJoin="round";var t=this.getOriginCoordinate(e);this.cacheContext.moveTo(t.x,t.y),this.startPoint=t}}},{key:"onScribbleMove",value:function(e){if(1===e.buttons&&this.cacheContext&&this.startPoint){var t=this.getOriginCoordinate(e);this.cacheContext.lineTo(t.x,t.y),this.cacheContext.stroke()}}},{key:"onScribbleEnd",value:function(){var e,t;this.startPoint&&(null==(e=this.cacheContext)||e.closePath(),null==(t=this.cacheContext)||t.restore(),this.startPoint=void 0,this.history.pushHistory(this.cacheCanvasToDataUrl))}},{key:"eraseArc",value:function(e){var t;if(this.cacheContext){var n=this.getOriginCoordinate(e);this.cacheContext.save(),this.cacheContext.beginPath(),this.cacheContext.arc(n.x,n.y,this.penSizeWithZoom/2,0,2*Math.PI,!1),this.cacheContext.clip(),this.cacheContext.clearRect(0,0,this.cacheContext.canvas.width,this.cacheContext.canvas.height),null==(t=this.cacheContext)||t.restore()}}},{key:"onEraseStart",value:function(e){this.cacheContext&&1===e.buttons&&this.eraseArc(e)}},{key:"onEraseMove",value:function(e){this.cacheContext&&1===e.buttons&&this.eraseArc(e)}},{key:"onEraseEnd",value:function(){}},{key:"exportData",value:function(){var e=this.cacheCanvasToDataUrl;return[[],this.basicImgInfo,{imgBase64:e}]}},{key:"clearCacheCanvas",value:function(){var e;null==(e=this.cacheContext)||e.clearRect(0,0,this.cacheContext.canvas.width,this.cacheContext.canvas.height),this.render()}},{key:"clearResult",value:function(){this.clearCacheCanvas(),this.history.pushHistory(this.cacheCanvasToDataUrl)}},{key:"renderPoint",value:function(e){vo.drawCircleWithFill(this.canvas,this.coord,e,{color:this.color})}},{key:"renderBorderPoint",value:function(e){vo.drawCircle(this.canvas,this.coord,e,{color:"black"})}},{key:"render",value:function(){if(Object(g.a)(Object(f.a)(n.prototype),"render",this).call(this),this.ctx&&this.cacheCanvas&&(this.ctx.save(),this.ctx.globalAlpha=.5,vo.drawImg(this.canvas,this.cacheCanvas,{zoom:this.zoom,currentPos:this.currentPos,rotate:this.rotate}),this.ctx.restore(),!this.forbidOperation&&!this.forbidCursorLine)){var e=this.penSize/2;this.action===Ce.Erase?this.renderBorderPoint(e):this.renderPoint(e)}}},{key:"undo",value:function(){var e=this.history.undo();e&&this.cacheCanvas&&this.updateUrl2CacheContext(e)}},{key:"redo",value:function(){var e=this.history.redo();e&&this.cacheCanvas&&this.updateUrl2CacheContext(e)}}]),n}(Bo),Dr={showConfirm:!1,skipWhileNoDependencies:!1,drawOutsideTarget:!1,copyBackwardResult:!1,minWidth:1,minHeight:1,isShowOrder:!1,filterData:["valid","invalid"],attributeConfigurable:!0,attributeList:[],textConfigurable:!0,textCheckType:0,customFormat:""},Mr={showConfirm:!1,skipWhileNoDependencies:!1,inputList:[{key:"\u7c7b\u522b1",value:"class1",isMulti:!1,subSelected:[{key:"\u9009\u98791",value:"option1",isDefault:!1},{key:"\u9009\u98792",value:"option1-2",isDefault:!1}]},{key:"\u7c7b\u522b2",value:"class-AH",isMulti:!0,subSelected:[{key:"\u9009\u98792-1",value:"option2-1",isDefault:!1},{key:"\u9009\u98792-2",value:"option2-2",isDefault:!1},{key:"\u9009\u98792-3",value:"option2-3",isDefault:!1}]},{key:"\u7c7b\u522b3",value:"class-0P",isMulti:!1,subSelected:[{key:"\u9009\u98793-1",value:"option3-1",isMulti:!1},{key:"\u9009\u98793-2",value:"option3-2",isDefault:!1},{key:"\u9009\u98793-3",value:"option3-3",isDefault:!1}]}]},Nr={lineType:0,lineColor:0,edgeAdsorption:!1,outOfTarget:!0,copyBackwardResult:!1,isShowOrder:!1,attributeConfigurable:!0,attributeList:[{key:"\u7c7b\u522b1",value:"\u7c7b\u522b1"},{key:"\u7c7b\u522bao",value:"class-ao"},{key:"\u7c7b\u522bM1",value:"class-M1"},{key:"\u7c7b\u522bCm",value:"class-Cm"},{key:"\u7c7b\u522bc3",value:"class-c3"},{key:"\u7c7b\u522ba0",value:"class-a0"},{key:"\u7c7b\u522bu7",value:"class-u7"},{key:"\u7c7b\u522bZb",value:"class-Zb"},{key:"\u7c7b\u522bzi",value:"class-zi"}],textConfigurable:!1,textCheckType:2,customFormat:"",showConfirm:!1,lowerLimitPointNum:2,upperLimitPointNum:"",preReferenceStep:0,skipWhileNoDependencies:!1,filterData:["valid","invalid"]},Rr={showConfirm:!1,skipWhileNoDependencies:!1,enableTextRecognition:!1,recognitionMode:"general",configList:[{label:"\u6587\u672c",key:"text",required:!1,default:"",maxLength:1e3}],filterData:["valid","invalid"]},Br={lineType:0,lineColor:0,lowerLimitPointNum:3,edgeAdsorption:!1,drawOutsideTarget:!1,copyBackwardResult:!1,isShowOrder:!1,attributeConfigurable:!1,attributeList:[],textConfigurable:!0,textCheckType:0,customFormat:""},jr=function(e){return"lineTool"===e?Nr:"rectTool"===e?Dr:"tagTool"===e?Mr:"textTool"===e?Rr:"polygonTool"===e?Br:Dr},_r={toolColor:{1:{valid:{stroke:"rgba(0,0,255,0.50)",fill:"rgba(0,0,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(0,15,255,1.00)",fill:"rgba(0,15,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(0,15,255,0.80)",fill:"rgba(0,15,255,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},3:{valid:{stroke:"rgba(0,255,255,0.50)",fill:"rgba(0,255,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(0,212,255,1.00)",fill:"rgba(0,212,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(0,212,255,0.80)",fill:"rgba(0,212,255,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},5:{valid:{stroke:"rgba(0,255,0,0.50)",fill:"rgba(0,255,0,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(149,255,1.00)",fill:"rgba(149,255,0,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(149,255,0,0.80)",fill:"rgba(149,255,0,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},7:{valid:{stroke:"rgba(255,255,0,0.50)",fill:"rgba(255,255,0,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(255,230,102,1.00)",fill:"rgba(255,213,0,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(255,230,102,0.80)",fill:"rgba(255,230,102,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},9:{valid:{stroke:"rgba(255,0,255,0.50)",fill:"rgba(255,0,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(230,102,255,1.00)",fill:"rgba(213,0,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(230,102,255,0.80)",fill:"rgba(230,102,255,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}}},attributeColor:[{valid:{stroke:"rgba(204,204,204,1.00)",fill:"rgba(204,204,204,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(204,204,204,1.00)",fill:"rgba(204,204,204,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(204,204,204,1.00)",fill:"rgba(204,204,204,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(153,51,255,1.00)",fill:"rgba(153,51,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(153,51,255,1.00)",fill:"rgba(153,51,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(153,51,255,1.00)",fill:"rgba(153,51,255,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(51,254,51,1.00)",fill:"rgba(51,254,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(51,254,51,1.00)",fill:"rgba(51,254,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(51,254,51,1.00)",fill:"rgba(51,254,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(255,51,255,1.00)",fill:"rgba(255,51,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(255,51,255,1.00)",fill:"rgba(255,51,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(255,51,255,1.00)",fill:"rgba(255,51,255,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(204,255,51,1.00)",fill:"rgba(204,255,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(204,255,51,1.00)",fill:"rgba(204,255,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(204,255,51,1.00)",fill:"rgba(204,255,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(51,153,255,1.00)",fill:"rgba(51,153,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(51,153,255,1.00)",fill:"rgba(51,153,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(51,153,255,1.00)",fill:"rgba(51,153,255,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(255,153,51,1.00)",fill:"rgba(255,153,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(255,153,51,1.00)",fill:"rgba(255,153,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(255,153,51,1.00)",fill:"rgba(255,153,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(51,255,238,1.00)",fill:"rgba(51,255,238,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(51,255,238,1.00)",fill:"rgba(51,255,238,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(51,255,238,1.00)",fill:"rgba(51,255,238,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(255,221,51,1.00)",fill:"rgba(255,221,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(255,221,51,1.00)",fill:"rgba(255,221,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(255,221,51,1.00)",fill:"rgba(255,221,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}}],lineColor:{1:"rgba(102, 111, 255, 1 )",3:"rgba(102, 230, 255, 1)",5:"rgba(191, 255, 102, 1)",7:"rgba(255, 230, 102, 1)",9:"rgba(230, 102, 255, 1)"},attributeLineColor:["rgba(204, 204, 204, 1)","rgba(153, 51, 255, 1)","rgba(51, 254, 51, 1)","rgba(255, 51, 255, 1)","rgba(204, 255, 51, 1)","rgba(51, 153, 255, 1)","rgba(255, 153, 51, 1)","rgba(51, 255, 238, 1)","rgba(255, 221, 51, 1)"],color:1,width:2,opacity:9},Hr=Object.defineProperty,Vr=Object.defineProperties,Fr=Object.getOwnPropertyDescriptors,Zr=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,Ur=Object.prototype.propertyIsEnumerable,Gr=function(e,t,n){return t in e?Hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Wr=function(e,t){for(var n in t||(t={}))zr.call(t,n)&&Gr(e,n,t[n]);if(Zr){var i,o=Object(b.a)(Zr(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Ur.call(t,n)&&Gr(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},Kr=function(e,t){return Vr(e,Fr(t))},Yr=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i,o,a,r,l,c,s;return Object(u.a)(this,n),(i=t.call(this,e)).highlightAttributeList=[],i.rightMouseUp=function(e){var t;if(i.drawingPointList.length>0)i.addDrawingPointToPolygonList();else{i.selection.setSelectedIDs(i.hoverID,e.ctrlKey),i.emit("setSelectedIDs",i.selection.selectedIDs);var n=null==(t=i.polygonList.find((function(e){return e.id===i.hoverID})))?void 0:t.attribute;n&&n!==i.defaultAttribute&&i.emit("syncAttribute",n)}},i.onKeyDown=function(){},i.onKeyUp=function(){},i.renderSingleSelectedPolygon=function(e){var t;if(e){var n=i.getPointCloudLineColor(e),o=Tn.changePointListByZoom(e.pointList,i.zoom,i.currentPos);vo.drawSelectedPolygonWithFillAndLine(i.canvas,o,{fillColor:"transparent",strokeColor:n,pointColor:"white",thickness:2,lineCap:"round",isClose:!0,lineType:null==(t=i.config)?void 0:t.lineType}),!0===e.isRect&&!0===i.showDirectionLine&&(i.renderRectPolygonDirection(o),(null==e?void 0:e.trackID)&&i.renderdrawTrackID(e))}},i.emitUpdatePolygonByDrag=function(){if(i.dragInfo){var e=i.dragInfo.originPolygonList;if(i.selectedIDs.length>0){var t=[];i.polygonList.forEach((function(n){if(i.selectedIDs.includes(n.id)){var o=e.find((function(e){return e.id===n.id}));o&&t.push({newPolygon:n,originPolygon:o})}})),i.emit("updatePolygonByDrag",t)}}},i.showDirectionLine=null==(o=e.showDirectionLine)||o,i.forbidAddNew=null!=(a=e.forbidAddNew)&&a,i.pointCloudConfig=null!=(r=Et.jsonParser(e.config))?r:{},i.hideAttributes=[],i.checkMode=null!=(l=e.checkMode)&&l,!1===i.forbidAddNew&&!0===e.checkMode&&(i.forbidAddNew=!0),i.config=Kr(Wr({},Br),{textConfigurable:!1,attributeConfigurable:!0,attributeList:null!=(s=null==(c=i.pointCloudConfig)?void 0:c.attributeList)?s:[]}),i}return Object(d.a)(n,[{key:"getSelectedIDs",get:function(){return this.selectedIDs}},{key:"enableDrag",get:function(){return Boolean(this.selectedIDs.length>0&&this.dragInfo)}},{key:"visiblePolygonList",get:function(){var e=this;return this.polygonList.filter((function(t){return!e.hideAttributes.includes(t.attribute)}))}},{key:"setHiddenAttributes",value:function(e){this.hideAttributes=e}},{key:"setConfig",value:function(e){var t,n=Et.jsonParser(e);this.pointCloudConfig=n,this.config=Kr(Wr({},this.config),{attributeList:null!=(t=null==n?void 0:n.attributeList)?t:[]})}},{key:"dragMouseDown",value:function(e){this.checkMode||Object(g.a)(Object(f.a)(n.prototype),"dragMouseDown",this).call(this,e)}},{key:"deletePolygon",value:function(e){this.checkMode||Object(g.a)(Object(f.a)(n.prototype),"deletePolygons",this).call(this,e?[e]:void 0)}},{key:"deletePolygonPoint",value:function(e){this.checkMode||Object(g.a)(Object(f.a)(n.prototype),"deletePolygonPoint",this).call(this,e)}},{key:"setSelectedIDs",value:function(e){this.selection.hardSetSelectedIDs(e),this.selectedIDs.length<2&&this.setSelectedID(1===this.selectedIDs.length?this.selectedIDs[0]:""),this.render()}},{key:"deleteSelectedID",value:function(){Object(g.a)(Object(f.a)(n.prototype),"deleteSelectedID",this).call(this),this.selection.setSelectedIDs(),this.emit("deleteSelectedIDs")}},{key:"selectedPolygons",get:function(){return _n.getPolygonByIDs(this.polygonList,this.selectedIDs)}},{key:"updateSelectedPolygonsPoints",value:function(e){var t,n;if(this.selectedPolygons&&(null==(t=this.selectedPolygons)?void 0:t.length)>0){var i=y.a.cloneDeep(this.selectedPolygons),o=[];null==(n=this.selectedPolygons)||n.forEach((function(t,n){t.pointList=t.pointList.map((function(t){var n,i,o=t.x,a=t.y;return Kr(Wr({},t),{x:o+(null!=(n=e.x)?n:0),y:a+(null!=(i=e.y)?i:0)})})),o.push({originPolygon:i[n],newPolygon:t})})),this.emit("updateResult"),this.emit("updatePolygonByDrag",o),this.render(),this.history.pushHistory(this.polygonList)}}},{key:"getLineColor",value:function(){return"rgba(0, 255, 255, 0.5)"}},{key:"getPointCloudLineColor",value:function(e){return!1===e.valid?Ci.INVALID_COLOR:Ci.toolStyleConverter.getColorFromConfig({attribute:e.attribute},Kr(Wr({},this.pointCloudConfig),{attributeConfigurable:!0}),{}).stroke}},{key:"renderStaticPolygon",value:function(){var e,t=this;!1===this.isHidden&&(null==(e=this.visiblePolygonList)||e.forEach((function(e){var n,i,o;if(![].concat(Object(c.a)(t.selectedIDs),[t.editPolygonID]).includes(e.id)){var a=t.getPointCloudLineColor(e),r=Tn.changePointListByZoom(e.pointList||[],t.zoom,t.currentPos),l=t.highlightAttributeList.includes(e.attribute);vo.drawPolygonWithFillAndLine(t.canvas,r,{fillColor:l?a:"transparent",strokeColor:a,pointColor:"white",thickness:null!=(i=null==(n=t.style)?void 0:n.width)?i:2,lineCap:"round",isClose:!0,lineType:null==(o=t.config)?void 0:o.lineType}),(null==e?void 0:e.trackID)&&t.renderdrawTrackID(e),!0===e.isRect&&!0===t.showDirectionLine&&t.renderRectPolygonDirection(r)}})))}},{key:"renderSelectedPolygon",value:function(){var e,t=this;null==(e=this.selectedPolygons)||e.forEach((function(e){t.renderSingleSelectedPolygon(e)}))}},{key:"renderdrawTrackID",value:function(e){var t=Tn.changePointListByZoom(e.pointList,this.zoom,this.currentPos),n=t[t.length-1],i=null==e?void 0:e.trackID;vo.drawText(this.canvas,n,"".concat(i),Wr({textAlign:"center",color:"white"},ft))}},{key:"renderRectPolygonDirection",value:function(e){e.length<2||vo.drawLine(this.canvas,e[0],e[1],{color:"white",thickness:3,lineDash:[6]})}},{key:"currentPolygonListByPattern",get:function(){var e=this;return this.polygonList.filter((function(t){return e.pattern===me.Rect?!0===t.isRect:e.pattern!==me.Normal||!0!==t.isRect}))}},{key:"getHoverID",value:function(e){var t,n=this,i=this.getCoordinateUnderZoom(e),o=this.currentPolygonListByPattern.map((function(e){return Kr(Wr({},e),{pointList:Tn.changePointListByZoom(e.pointList,n.zoom)})}));return _n.getHoverPolygonID(i,o,10,null==(t=this.config)?void 0:t.lineType)}},{key:"switchToNextPolygon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e.ascend;if(!(this.drawingPointList.length>0)){var t=this.currentPolygonListByPattern.map((function(e){var t,n,i,o;return Kr(Wr({},e),{x:null!=(n=null==(t=e.pointList[0])?void 0:t.x)?n:0,y:null!=(o=null==(i=e.pointList[0])?void 0:i.y)?o:0})})),n=Et.getNextSelectedRectID(t,e,this.selectedID);return n?(this.setSelectedIDs([n.id]),this.render(),[n.id]):void 0}}},{key:"setSelectedIdAfterAddingDrawing",value:function(e){0!==this.drawingPointList.length&&this.setSelectedID(e)}},{key:"updateTextAttribute",value:function(e){var t,n,i=this.selectedID;e!==i&&i&&(null==(t=this._textAttributeInstance)||t.changeSelected()),e||null==(n=this._textAttributeInstance)||n.clearTextAttribute()}},{key:"setSelectedID",value:function(e){this.updateTextAttribute(e),this.selection.setSelectedIDs(e),this.render()}},{key:"addPointInDrawing",value:function(e){this.forbidAddNew||Object(g.a)(Object(f.a)(n.prototype),"addPointInDrawing",this).call(this,e)}},{key:"setCanvasSize",value:function(e){var t,n,i=this.pixelRatio;this.size=e,this.setImgInfo(e),this.updateCanvasBasicStyle(this.basicCanvas,e,0),this.updateCanvasBasicStyle(this.canvas,e,10),null==(t=this.ctx)||t.scale(i,i),null==(n=this.basicCtx)||n.scale(i,i),this.initImgPos(),this.renderBasicCanvas(),this.render()}},{key:"setPolygonValidAndRender",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;t?Object(g.a)(Object(f.a)(n.prototype),"setPolygonValidAndRender",this).call(this,e,i):this.emit("validUpdate",e)}},{key:"onMouseDown",value:function(e){if(!Bo.prototype.onMouseDown.call(this,e)&&!this.forbidMouseOperation&&!0!==e.ctrlKey&&0===e.button){if(this.selectedIDs.length<2)return Object(g.a)(Object(f.a)(n.prototype),"onMouseDown",this).call(this,e);var t=this.getCoordinateUnderZoom(e);this.dragInfo={dragStartCoord:t,dragTarget:qe.Plane,initPointList:[],changePointIndex:[0],originPolygon:this.selectedPolygon,dragPrevCoord:t,originPolygonList:this.polygonList,selectedPolygons:this.selectedPolygons}}}},{key:"setResultAndSelectedID",value:function(e,t){this.setPolygonList(e),this.setSelectedIDs([t])}},{key:"setHighlightAttribute",value:function(e){this.highlightAttributeList=[e],this.render()}}]),n}(_a),Xr={0:"\u76ee\u6807\u68c0\u6d4b",1:"\u56fe\u50cf\u5206\u7c7b"},Jr={0:"\u6807\u6ce8\u6587\u4ef6\u4f20\u8f93\u4e2d",1:"\u6807\u6ce8\u6587\u4ef6\u4f20\u8f93\u91cd\u8bd5",2:"\u6807\u6ce8\u6587\u4ef6\u4f20\u8f93\u5931\u8d25",3:"\u6807\u6ce8\u4e2d",4:"\u4efb\u52a1\u7ec8\u6b62",5:"\u4efb\u52a1\u5b8c\u6210",6:"\u6570\u636e\u5df2\u53d1\u5e03"};(yr=mr||(mr={}))[yr.Upload=0]="Upload",yr[yr.UploadRetry=1]="UploadRetry",yr[yr.UploadFail=2]="UploadFail",yr[yr.Annotation=3]="Annotation",yr[yr.Terminated=4]="Terminated",yr[yr.Finish=5]="Finish",yr[yr.Publish=6]="Publish";var Qr,qr,$r=[{icon:'<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path\n        d="M16.425 5.04961C16.35 4.82461 16.2 4.67461 15.975 4.59961L9.525 1.14961C9.225 0.999609 8.85 0.999609 8.55 1.14961L2.025 4.59961C1.725 4.74961 1.5 5.12461 1.5 5.49961V12.2496C1.5 12.6246 1.725 12.9996 2.025 13.1496L8.475 16.5996C8.7 16.6746 8.925 16.7496 9.15 16.6746C9.225 16.6746 9.375 16.5996 9.45 16.5996L15.9 13.1496C16.275 12.9996 16.5 12.6246 16.5 12.2496V5.49961C16.5 5.34961 16.425 5.19961 16.425 5.04961ZM9.15 8.87461V15.2496L9 15.3996L2.85 12.0996V5.64961L9 2.34961L15.15 5.64961L9.15 8.87461Z"\n        fill="#2C7EFF" />\n</svg>',id:"cuboidRight"},{icon:'<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path\n        d="M16.425 5.04961C16.35 4.82461 16.2 4.67461 15.975 4.59961L9.525 1.14961C9.225 0.999609 8.85 0.999609 8.55 1.14961L2.025 4.59961C1.725 4.74961 1.5 5.12461 1.5 5.49961V12.2496C1.5 12.6246 1.725 12.9996 2.025 13.1496L8.475 16.5996C8.7 16.6746 8.925 16.7496 9.15 16.6746C9.225 16.6746 9.375 16.5996 9.45 16.5996L15.9 13.1496C16.275 12.9996 16.5 12.6246 16.5 12.2496V5.49961C16.5 5.34961 16.425 5.19961 16.425 5.04961ZM9.15 8.87461V15.2496L9 15.3996L2.85 12.0996V5.64961L9 2.34961L15.15 5.64961L9.15 8.87461Z"\n        fill="#2C7EFF" />\n    <path d="M9 8.5V2.5L8.5 2L2.5 5.5V12.5L9 8.5Z" fill="#2C7EFF" />\n    <path d="M15.5 6L15 5.5L14.5 6L9 8.5V15.5H9.5L15.5 12.5V6Z" fill="white" />\n</svg>',id:"cuboidLeft"},{icon:'<svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <g clip-path="url(#clip0_2295_37199)">\n        <path\n            d="M5.16087 7.8398C5.00351 8.01726 4.94861 8.22216 4.99615 8.45452L5.23337 15.7654C5.25346 16.1002 5.44096 16.4249 5.72087 16.6098L11.9712 20.5356C12.2511 20.7204 12.6883 20.7277 13.0131 20.5402L18.8587 17.1652C19.1835 16.9777 19.3958 16.5954 19.3757 16.2606L19.1385 8.94971C19.0909 8.71735 19.0434 8.485 18.8659 8.32764C18.8284 8.26269 18.6885 8.17029 18.651 8.10533L12.4382 4.24447C12.1208 3.99471 11.6835 3.98735 11.3587 4.17485L5.51308 7.54985C5.38317 7.62485 5.29077 7.7648 5.16087 7.8398ZM12.1109 12.2276L17.6318 9.04014L17.8367 9.09505L18.0538 16.0711L12.468 19.2961L6.5351 15.62L6.31798 8.64399L12.1109 12.2276Z"\n            fill="#2C7EFF" />\n    </g>\n    <defs>\n        <clipPath id="clip0_2295_37199">\n            <rect width="18" height="18" fill="white" transform="translate(9 24.5898) rotate(-120)" />\n        </clipPath>\n    </defs>\n</svg>',id:"cuboidTop"}],el=function(){function e(t){Object(u.a)(this,e);var n=t.container,i=t.cuboidButtonMove,o=t.toggleDirection;this.container=n,this.direction=ht.Front,this.isFrontSide=!0,this.cuboidButtonMove=i,this.onToggleDirection=o,this._cuboidButtonDOM=this.initCuboidButtonDOM(),this._cuboidFABDOM=this.initcuboidFABDOM('<svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path\n        d="M13.5525 3.01367C7.75439 3.01367 3.03467 7.73076 3.03467 13.5289C3.0373 19.3297 7.75439 24.0468 13.5525 24.0468C19.3507 24.0468 24.0678 19.3297 24.0678 13.5315C24.0678 7.7334 19.3507 3.01367 13.5525 3.01367ZM19.3085 15.9072V15.9521C19.3085 15.9652 19.3059 15.9784 19.3059 15.9942C19.3059 16.0021 19.3059 16.0101 19.3032 16.018C19.3032 16.0312 19.3006 16.0443 19.2979 16.0575C19.2979 16.0654 19.2953 16.076 19.2953 16.0839C19.2927 16.0944 19.2927 16.105 19.29 16.1155C19.2874 16.1261 19.2848 16.1393 19.2848 16.1498C19.2821 16.1577 19.2821 16.1656 19.2795 16.1709C19.2769 16.1867 19.2716 16.2025 19.2689 16.2184C19.2689 16.221 19.2663 16.2236 19.2663 16.2263C19.2083 16.4504 19.0923 16.664 18.9156 16.8406L15.8386 19.9177C15.3112 20.445 14.449 20.445 13.9243 19.9177C13.397 19.3903 13.397 18.5281 13.9243 18.0034L14.6863 17.2414H9.14922C8.40303 17.2414 7.79394 16.6323 7.79394 15.8861C7.79394 15.1399 8.40303 14.5309 9.14922 14.5309H17.9559C18.3039 14.5309 18.652 14.6627 18.9156 14.9264C19.1793 15.19 19.3111 15.5381 19.3111 15.8861C19.3111 15.894 19.3085 15.902 19.3085 15.9072ZM19.3111 11.1743C19.3111 11.9205 18.7021 12.5296 17.9559 12.5296H9.14922C8.80117 12.5296 8.45312 12.3978 8.18945 12.1341C7.92578 11.8704 7.79394 11.5224 7.79394 11.1743V11.1532V11.111C7.79394 11.0979 7.79658 11.082 7.79658 11.0688C7.79658 11.0609 7.79658 11.053 7.79922 11.0451C7.79922 11.0319 7.80186 11.0187 7.80449 11.0056C7.80449 10.9977 7.80713 10.9871 7.80713 10.9792C7.80977 10.9687 7.80976 10.9581 7.8124 10.9476C7.81504 10.937 7.81768 10.9238 7.81768 10.9133C7.82031 10.9054 7.82031 10.8975 7.82295 10.8922C7.82559 10.8764 7.83086 10.8605 7.8335 10.8447C7.8335 10.8421 7.83613 10.8395 7.83613 10.8368C7.89414 10.6127 8.01016 10.3991 8.18682 10.2225L11.2612 7.14805C11.7886 6.6207 12.6508 6.6207 13.1755 7.14805C13.7028 7.67539 13.7028 8.5376 13.1755 9.0623L12.4187 9.82168H17.9559C18.6994 9.82168 19.3111 10.4308 19.3111 11.1743Z"\n        fill="#2C7EFF" />\n</svg>'),this._cuboidMoreDOM=this.initcuboidMoreDOM('<svg width="16" height="4" viewBox="0 0 16 4" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <circle cx="2" cy="2" r="2" fill="#2C7EFF" />\n    <circle cx="8" cy="2" r="2" fill="#2C7EFF" />\n    <circle cx="14" cy="2" r="2" fill="#2C7EFF" />\n</svg>'),this._cuboidMoreListDOM=this.initcuboidMoreListDOM(),this.appendToContainer()}return Object(d.a)(e,[{key:"appendToContainer",value:function(){this._cuboidButtonDOM&&this._cuboidFABDOM&&this._cuboidMoreDOM&&(this.container.appendChild(this._cuboidButtonDOM),this._cuboidButtonDOM.appendChild(this._cuboidFABDOM),this._cuboidButtonDOM.appendChild(this._cuboidMoreDOM))}},{key:"initCuboidButtonDOM",value:function(){var e=this,t=document.createElement("div");return t.setAttribute("id","LABELBEE_CUBOID_BUTTON_BOX"),t.setAttribute("style","\n        width: 40px;\n        height: 74px;\n        border-radius: 10px;\n        background-color: #FFFFFF;\n        z-index: 10;\n      "),t.addEventListener("mouseover",(function(t){t.stopPropagation(),setTimeout((function(){e.cuboidButtonMove("in")}),100)})),t.addEventListener("mouseleave",(function(t){t.stopPropagation(),setTimeout((function(){e.cuboidButtonMove("out")}),100)})),t}},{key:"initcuboidFABDOM",value:function(e){var t=this,n=document.createElement("div");return n.setAttribute("id","CUBOID_FORWARD_AND_BACK_SWITCH"),n.innerHTML=e,n.addEventListener("mouseup",(function(e){e.stopPropagation(),t.isFrontSide=!t.isFrontSide,t.direction=t.isFrontSide?ht.Front:ht.Back,t.onToggleDirection(t.direction)})),n}},{key:"initcuboidMoreDOM",value:function(e){var t=this,n=document.createElement("div");return n.setAttribute("id","CUBOID_MORE_ICON"),n.innerHTML=e,n.addEventListener("mouseup",(function(e){t._cuboidButtonDOM&&t._cuboidMoreListDOM&&(t._cuboidButtonDOM.contains(t._cuboidMoreListDOM)?t.clearCuboidMoreListDOM():t._cuboidButtonDOM.appendChild(t._cuboidMoreListDOM)),e.stopPropagation()})),n.addEventListener("mousedown",(function(e){e.stopPropagation()})),n.addEventListener("contextmenu",(function(e){e.stopPropagation()})),n}},{key:"initcuboidMoreListDOM",value:function(){var e=this,t=document.createElement("div");t.setAttribute("id","CUBOID_MORE_LIST_ICON"),t.setAttribute("style","\n        height: 36px;\n        border-radius: 10px;\n        background-color: #FFFFFF;\n        z-index: 10;\n        padding: 8px 10px;\n        position: absolute;\n        bottom: 0px;\n        left: 44px;\n        display: flex;\n      ");var n="";return $r.forEach((function(e,t){var i=t===$r.length-1?"margin-left:0px;margin-right:0px;":"";n+="<span id=".concat(e.id," key=").concat(t," style=").concat("margin-left:4px;margin-right:4px;display:flex;align-items:center;").concat(i,">").concat(e.icon,"</span>")})),t.innerHTML=n,t.childNodes.forEach((function(t){t.addEventListener("click",(function(n){switch(n.stopPropagation(),null==t?void 0:t.id){case"cuboidLeft":e.onToggleDirection(ht.Left);break;case"cuboidRight":e.onToggleDirection(ht.Right);break;case"cuboidTop":e.onToggleDirection(ht.Top)}e.clearCuboidMoreListDOM(),e.cuboidButtonMove("out")}))})),t}},{key:"update",value:function(e){var t,n=e.left,i=e.top,o=e.color;null==(t=this._cuboidButtonDOM)||t.setAttribute("style","\n        position: absolute; \n        font-size: 14px; \n        left:".concat(n,"px; \n        top: ").concat(i,"px; \n        color: ").concat(o,";\n        width: 41px;\n        height: 74px;\n        border-radius: 10px;\n        background-color: #FFFFFF;\n        cursor: pointer;\n        text-align: center;\n        padding-top: 10px;\n        z-index: 10;\n      "))}},{key:"clearCuboidButtonDOM",value:function(){this._cuboidButtonDOM&&this.container.contains(this._cuboidButtonDOM)&&this.container.removeChild(this._cuboidButtonDOM)}},{key:"clearCuboidMoreListDOM",value:function(){this._cuboidButtonDOM&&this._cuboidMoreListDOM&&this._cuboidButtonDOM.contains(this._cuboidMoreListDOM)&&this._cuboidButtonDOM.removeChild(this._cuboidMoreListDOM)}}]),e}(),tl=Object.defineProperty,nl=Object.defineProperties,il=Object.getOwnPropertyDescriptors,ol=Object.getOwnPropertySymbols,al=Object.prototype.hasOwnProperty,rl=Object.prototype.propertyIsEnumerable,ll=function(e,t,n){return t in e?tl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},cl=function(e,t){for(var n in t||(t={}))al.call(t,n)&&ll(e,n,t[n]);if(ol){var i,o=Object(b.a)(ol(t));try{for(o.s();!(i=o.n()).done;){n=i.value;rl.call(t,n)&&ll(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},sl=function(e,t){return nl(e,il(t))};(qr=Qr||(Qr={}))[qr.Ready=1]="Ready",qr[qr.FirstPoint=2]="FirstPoint",qr[qr.Cuboid=3]="Cuboid";var ul=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).drawingStatus=1,i.cuboidList=[],i.hoverID="",i.getHoverData=function(e){var t=i.getCoordinateUnderZoom(e),n=Object(h.a)(i).currentShowList;if((null==n?void 0:n.length)>0){var o=n.map((function(e){return{id:e.id,pointList:Tn.changePointListByZoom(pn(e),i.zoom)}})),a=_n.getHoverPolygonID(t,o);if(a)return{hoverID:a,hoverCuboid:n.find((function(e){return e.id===a}))}}return{}},i.textChange=function(e){!1!==i.config.textConfigurable&&i.selectedID&&(i.setCuboidList(qi.textChange(e,i.selectedID,i.cuboidList)),i.emit("selectedChange"),i.render())},i.config=Et.jsonParser(e.config),i.getCurrentSelectedData=i.getCurrentSelectedData.bind(Object(h.a)(i)),i.updateSelectedTextAttribute=i.updateSelectedTextAttribute.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"selectedText",get:function(){var e,t;return null!=(t=null==(e=this.selectedCuboid)?void 0:e.textAttribute)?t:""}},{key:"destroy",value:function(){Object(g.a)(Object(f.a)(n.prototype),"destroy",this).call(this),this._textAttributeInstance&&this._textAttributeInstance.clearTextAttribute()}},{key:"currentShowList",get:function(){var e=[],t=Et.getRenderResultList(this.cuboidList,Et.getSourceID(this.basicResult),this.attributeLockList,this.selectedID?[this.selectedID]:void 0),n=Object(s.a)(t,2),i=n[0],o=n[1];return e=i,this.isHidden&&(e=[]),1===o.length&&e.push(o[0]),e}},{key:"selectedCuboid",get:function(){var e=this;return this.cuboidList.find((function(t){return t.id===e.selectedID}))}},{key:"dataList",get:function(){return this.cuboidList}},{key:"isNeedCheckCuboidSize",get:function(){var e,t;return(null==(e=this.config)?void 0:e.minWidth)>=0&&(null==(t=this.config)?void 0:t.minHeight)>=0}},{key:"getIsHoverSelectedCuboid",value:function(e){var t=this.getCoordinateUnderZoom(e),n=this.selectedCuboid;return n&&Tn.isCloseCuboid(t,Tn.changeCuboidByZoom(n,this.zoom))}},{key:"isForbiddenMove",value:function(e,t){return this.getCoordinateInOrigin(e).y>t.frontPoints.br.y}},{key:"updateSelectedCuboid",value:function(e){var t=this;this.cuboidList=this.cuboidList.map((function(n){return n.id===t.selectedID?e:n}))}},{key:"getStylesToRender",value:function(e,t){var n,i,o=this.getColor(e);return{strokeColor:t?null==o?void 0:o.valid.stroke:null==o?void 0:o.invalid.stroke,toolColor:o,fillColor:t?null==o?void 0:o.valid.fill:null==o?void 0:o.invalid.fill,lineWidth:null!=(i=null==(n=this.style)?void 0:n.width)?i:2}}},{key:"getCurrentSelectedData",value:function(){var e=this.selectedCuboid;if(e){var t=this.getStylesToRender(e.attribute,e.valid).strokeColor;return{width:164,textAttribute:e.textAttribute,color:t}}}},{key:"updateSelectedTextAttribute",value:function(e){if(this._textAttributeInstance&&e&&this.selectedID){var t=e;!1===qi.textAttributeValidate(this.config.textCheckType,"",t)&&(this.emit("messageError",qi.getErrorNotice(this.config.textCheckType,this.lang)),t=""),this.setCuboidList(qi.textChange(t,this.selectedID,this.cuboidList)),this.history.pushHistory(this.cuboidList),this.emit("updateTextAttribute"),this.render()}}},{key:"setResult",value:function(e){this.clearActiveStatus(),this.setCuboidList(e),this.render()}},{key:"currentPageResult",get:function(){return this.cuboidList}},{key:"clearResult",value:function(){this.setCuboidList([],!0),this.deleteSelectedID(),this.render()}},{key:"exportData",value:function(){return[this.cuboidList,this.basicImgInfo]}},{key:"setSelectedID",value:function(e){var t,n,i=this.selectedID;e!==i&&i&&(null==(t=this._textAttributeInstance)||t.changeSelected()),e||null==(n=this._textAttributeInstance)||n.clearTextAttribute(),this.selectedID=e,this.emit("selectedChange")}},{key:"setSelectedIDAndRender",value:function(e){this.setSelectedID(e),this.render()}},{key:"setCuboidValidAndRender",value:function(e){if(e){var t=this.cuboidList.map((function(t){return t.id===e?sl(cl({},t),{valid:!t.valid}):t}));this.setCuboidList(t,!0),this.history.pushHistory(this.cuboidList),this.render()}}},{key:"onRightDblClick",value:function(e){Object(g.a)(Object(f.a)(n.prototype),"onRightDblClick",this).call(this,e);var t=this.getHoverData(e).hoverID;this.selectedID&&this.selectedID===t&&this.deleteCuboid(t)}},{key:"setCuboidList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.cuboidList.length;this.cuboidList=e,n!==e.length&&this.emit("updatePageNumber"),t&&this.emit("updateResult")}},{key:"deleteCuboid",value:function(e){var t;e&&(this.setCuboidList(this.cuboidList.filter((function(t){return t.id!==e}))),this.history.pushHistory(this.cuboidList),this.setSelectedID(""),null==(t=this._textAttributeInstance)||t.clearTextAttribute(),this.render())}},{key:"onKeyDown",value:function(e){if(Et.hotkeyFilter(e)&&!1!==Object(g.a)(Object(f.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode;switch(t){case fi.Ctrl:this.drawingCuboid&&(this.drawingCuboid=sl(cl({},this.drawingCuboid),{valid:!1}),this.render());break;case fi.Delete:this.selectedID&&this.deleteCuboid(this.selectedID);break;case fi.Z:this.setIsHidden(!this.isHidden),this.render();break;case fi.F:this.selectedID&&this.setCuboidValidAndRender(this.selectedID);break;default:if(this.config.attributeConfigurable){var i=qi.getAttributeByKeycode(t,this.config.attributeList);void 0!==i&&this.setDefaultAttribute(i)}}}}},{key:"onKeyUp",value:function(e){if(Object(g.a)(Object(f.a)(n.prototype),"onKeyUp",this).call(this,e),e.keyCode===fi.Ctrl)this.drawingCuboid&&(this.drawingCuboid=sl(cl({},this.drawingCuboid),{valid:!0}),this.render())}},{key:"onMouseDown",value:function(e){if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation&&!0!==e.ctrlKey){var t=this.selectedCuboid;if(t&&2!==e.button&&(0!==e.button||!0!==this.isSpaceKey)&&this.getIsHoverSelectedCuboid(e)){this.dragStatus=Je.Start;var i=this.getCoordinateUnderZoom(e),o={initCuboid:t,dragStartCoord:i},a=Tn.returnClosePointOrLineInCuboid(i,Tn.changeCuboidByZoom(t,this.zoom)),r=null==a?void 0:a[0];switch(null==r?void 0:r.type){case"point":this.dragInfo=sl(cl({},o),{dragTarget:qe.Point,positions:r.positions});break;case"line":this.dragInfo=sl(cl({},o),{dragTarget:qe.Line,positions:r.positions});break;default:this.dragInfo=sl(cl({},o),{dragTarget:qe.Cuboid})}}}}},{key:"onMouseUp",value:function(e){if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseUp",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){if(this.dragInfo&&this.dragStatus===Je.Move)return this.dragInfo=void 0,this.dragStatus=Je.Wait,this.history.pushHistory(this.cuboidList),void this.emit("updateResult");var t=Et.getSourceID(this.basicResult);if(0===e.button){if(this.hoverID&&e.ctrlKey&&!this.drawingCuboid)return void this.setCuboidValidAndRender(this.hoverID);if(!this.drawingCuboid)return void this.createNewDrawingCuboid(e,t);if(this.drawingCuboid)switch(this.drawingStatus){case 2:this.closeNewDrawingFrontPlane();break;case 3:this.closeAndCreateNewCuboid()}}2===e.button&&this.rightMouseUp(e)}}},{key:"onMouseMove",value:function(e){var t;if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo)if(this.selectedID&&this.dragInfo)this.onDragMove(e);else if(this.drawingCuboid){if(this.drawingFrontPlanesMove(e))return;this.drawingBackPlaneMove(e)}else this.hoverID=null!=(t=this.getHoverData(e).hoverID)?t:"",this.onHoverMove(e)}},{key:"drawingFrontPlanesMove",value:function(e){if(this.drawingCuboid&&this.firstClickCoord&&2===this.drawingStatus){var t=this.getCoordinateInOrigin(e);return this.drawingCuboid=sl(cl({},this.drawingCuboid),{frontPoints:rn(this.firstClickCoord,t)}),this.render(),!0}}},{key:"drawingBackPlaneMove",value:function(e){if(this.drawingCuboid&&this.firstClickCoord&&3===this.drawingStatus){var t=this.getCoordinateInOrigin(e);if(this.isForbiddenMove(e,this.drawingCuboid))return;this.drawingCuboid=sl(cl({},this.drawingCuboid),{backPoints:cn({coord:t,points:this.drawingCuboid.frontPoints})}),this.render()}}},{key:"onDragMove",value:function(e){if(this.dragInfo&&this.selectedID){var t=this.dragInfo,n=t.dragTarget,i=t.initCuboid,o=t.dragStartCoord,a=t.positions,r=this.getCoordinateUnderZoom(e),l={x:(r.x-o.x)/this.zoom,y:(r.y-o.y)/this.zoom};this.dragStatus=Je.Move;var c=mn({offset:l,cuboid:i,dragTarget:n,positions:a});(null==c?void 0:c.backPoints)&&(null==c?void 0:c.backPoints.br.y)>(null==c?void 0:c.frontPoints.br.y)||(c&&this.updateSelectedCuboid(c),this.render())}}},{key:"onHoverMove",value:function(e){var t=this.selectedCuboid;if(t){var n=this.getCoordinateUnderZoom(e),i=Tn.returnClosePointOrLineInCuboid(n,Tn.changeCuboidByZoom(t,this.zoom),{zoom:1/this.zoom,scope:5});this.highlightInfo=i,this.render()}}},{key:"createNewDrawingCuboid",value:function(e,t){if(this.imgInfo){var n=this.getCoordinateInOrigin(e);if(this.drawingCuboid={attribute:this.defaultAttribute,direction:ht.Front,valid:!e.ctrlKey,id:bo(8,62),sourceID:t,textAttribute:"",order:Et.getMaxOrder(this.cuboidList.filter((function(e){return Et.isSameSourceID(e.sourceID,t)})))+1,frontPoints:{tl:n,bl:n,tr:n,br:n}},this.firstClickCoord=cl({},n),this.drawingStatus=2,this.config.textConfigurable){var i;i=qi.getTextAttribute(this.cuboidList.filter((function(e){return Et.isSameSourceID(e.sourceID,t)})),this.config.textCheckType),this.drawingCuboid=sl(cl({},this.drawingCuboid),{textAttribute:i})}}}},{key:"closeNewDrawingFrontPlane",value:function(){this.drawingStatus=3}},{key:"closeAndCreateNewCuboid",value:function(){var e,t;(null==(e=this.drawingCuboid)?void 0:e.frontPoints)&&this.drawingCuboid.backPoints&&(this.isNeedCheckCuboidSize&&!1===function(e){var t=e.cuboid,n=e.config,i=n.minHeight,o=n.minWidth,a=on(t.frontPoints),r=a.width,l=a.height;return r>=o&&l>=i}({cuboid:this.drawingCuboid,config:this.config})?this.emit("messageInfo",mi.getMessagesByLocale(di.RectErrorSizeNotice,this.lang)):(this.setCuboidList([].concat(Object(c.a)(this.cuboidList),[this.drawingCuboid])),this.setSelectedID(null==(t=this.drawingCuboid)?void 0:t.id),this.history.pushHistory(this.cuboidList)),this.clearDrawingStatus(),this.render())}},{key:"deleteSelectedID",value:function(){this.setSelectedID("")}},{key:"clearDrawingStatus",value:function(){this.drawingCuboid&&(this.drawingCuboid=void 0,this.drawingStatus=1)}},{key:"clearActiveStatus",value:function(){this.clearDrawingStatus(),this.deleteSelectedID()}},{key:"rightMouseUp",value:function(e){var t=this.getHoverData(e),n=t.hoverID,i=t.hoverCuboid;this.setSelectedID(n),i&&this.setDefaultAttribute(i.attribute),this.drawingCuboid&&this.clearDrawingStatus(),this.render()}},{key:"renderHighlightCuboidCom",value:function(e){var t=this,n=Tn.changeCuboidByZoom(e,this.zoom,this.currentPos),i=n.id===this.hoverID,o=n.id===this.selectedID,a=this.getStylesToRender(n.attribute,n.valid),r=a.strokeColor,l=a.lineWidth,c={color:r,thickness:l};if(i||o){var s=vn(n);if(s.forEach((function(e){vo.drawCircleWithFill(t.canvas,e.point,5,cl({},c))})),o)fn(n).forEach((function(e){vo.drawLine(t.canvas,e.p1,e.p2,{color:r,thickness:l+2})})),s.forEach((function(e){vo.drawCircleWithFill(t.canvas,e.point,3,{color:"white"})}))}}},{key:"renderSingleCuboid",value:function(e){var t,n,i=Tn.changeCuboidByZoom(e,this.zoom,this.currentPos),o=this.getStylesToRender(i.attribute,i.valid),a=o.strokeColor,r=o.fillColor,l=null!=(n=null==(t=this.style)?void 0:t.width)?n:2,c=this.style.hiddenText,s=void 0!==c&&c;vo.drawCuboidWithText(this.canvas,i,{strokeColor:a,fillColor:r,thickness:l},{config:this.config,hiddenText:s,selectedID:this.selectedID}),this.renderTextAttribute()}},{key:"setDefaultAttribute",value:function(e){var t=this,n=this.defaultAttribute;if(this.defaultAttribute=null!=e?e:"",n!==e){this.changeStyle(e),this.emit("changeAttributeSidebar");var i=this.selectedCuboid;if(this._textAttributeInstance&&(this.attributeLockList.length>0&&!this.attributeLockList.includes(this.defaultAttribute)?this._textAttributeInstance.clearTextAttribute():this._textAttributeInstance.updateIcon(this.getTextIconSvg(e))),i)return this.setCuboidList(this.cuboidList.map((function(e){return e.id===t.selectedID?sl(cl({},e),{attribute:t.defaultAttribute}):e}))),this.history.pushHistory(this.cuboidList),void this.render();this.drawingCuboid&&(this.drawingCuboid=sl(cl({},this.drawingCuboid),{attribute:this.defaultAttribute}),this.render())}}},{key:"renderToggleButton",value:function(){var e=this,t=this.selectedCuboid;if(this.ctx&&t){var n=t.attribute,i=t.valid,o=this.getStylesToRender(n,i).strokeColor;this.toggleButtonInstance||(this.toggleButtonInstance=new el({container:this.container,cuboidButtonMove:function(t){return e.updateMouseOperation(t)},toggleDirection:function(t){return e.toggleDirection(t)}}));var a=function(e){var t=e.cuboid,n=e.currentPos,i=e.zoom,o=t.frontPoints,a=40,r=74,l={x:(o.bl.x+o.tl.x)/2,y:(o.bl.y+o.tl.y)/2},c=a+10,s=r/2,u={x:l.x,y:l.y},d=Tn.getOffsetCoordinate(u,n,i);return{left:d.x-c,top:d.y-s}}({cuboid:t,zoom:this.zoom,currentPos:this.currentPos});this.toggleButtonInstance.update({left:a.left,top:a.top,color:o})}}},{key:"renderTextAttribute",value:function(){var e,t=this.selectedCuboid;if(this.ctx&&!1!==this.config.textConfigurable&&t){var n=this.getStylesToRender(t.attribute,t.valid).strokeColor,i=t.attribute,o=t.textAttribute,a=t.frontPoints,r=Cn({cuboid:t,currentPos:this.currentPos,zoom:this.zoom}),l=(a.br.x-a.bl.x)*this.zoom*.8;this._textAttributeInstance||(this._textAttributeInstance=new jo({width:pe,container:this.container,icon:this.getTextIconSvg(i),color:n,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedTextAttribute})),this._textAttributeInstance&&!(null==(e=this._textAttributeInstance)?void 0:e.isExit)&&this._textAttributeInstance.appendToContainer(),this._textAttributeInstance.update("".concat(o),{left:r.left,top:r.top,color:n,width:l})}}},{key:"renderDrawing",value:function(){this.drawingCuboid&&this.renderSingleCuboid(this.drawingCuboid)}},{key:"renderStatic",value:function(){var e=this;this.isHidden||this.currentShowList.forEach((function(t){return e.renderSingleCuboid(t)}))}},{key:"renderSelected",value:function(){var e,t=this.selectedCuboid;t?(this.renderSingleCuboid(t),this.renderHighlightCuboidCom(t),this.renderToggleButton()):(null==(e=this.toggleButtonInstance)||e.clearCuboidButtonDOM(),this.toggleButtonInstance=void 0)}},{key:"updateMouseOperation",value:function(e){"in"===e?(this.setForbidCursorLine(!0),this.setForbidOperation(!0),this.setShowDefaultCursor(!0)):(this.setForbidCursorLine(!1),this.setShowDefaultCursor(!1),this.setForbidOperation(!1))}},{key:"toggleDirection",value:function(e){var t=this;this.cuboidList&&this.selectedCuboid&&(this.setCuboidList(this.cuboidList.map((function(n){var i;return n.id===(null==(i=t.selectedCuboid)?void 0:i.id)?sl(cl({},n),{direction:e}):n}))),this.history.pushHistory(this.cuboidList),this.render())}},{key:"renderHover",value:function(){var e,t=this;this.dragInfo||null==(e=this.highlightInfo)||e.forEach((function(e){var n,i,o=t.getStylesToRender(e.originCuboid.attribute,e.originCuboid.valid).strokeColor;switch(e.type){case"point":null==(n=e.points)||n.forEach((function(e){vo.drawCircleWithFill(t.canvas,Tn.changePointByZoom(e,t.zoom,t.currentPos),8,{color:o})}));break;case"line":var a=null==(i=e.points)?void 0:i.map((function(e){return Tn.changePointByZoom(e,t.zoom,t.currentPos)}));a&&vo.drawLineWithPointList(t.canvas,a,{color:o,thickness:8})}}))}},{key:"renderCuboid",value:function(){this.renderStatic(),this.renderDrawing(),this.renderSelected(),this.renderHover()}},{key:"render",value:function(){this.ctx&&(Object(g.a)(Object(f.a)(n.prototype),"render",this).call(this),this.renderCuboid(),this.renderCursorLine(this.getLineColor(this.defaultAttribute)))}},{key:"undo",value:function(){var e=this.history.undo();e&&(e.length!==this.cuboidList.length&&this.setSelectedID(""),this.setCuboidList(e,!0),this.render())}},{key:"redo",value:function(){var e=this.history.redo();e&&(e.length!==this.cuboidList.length&&this.setSelectedID(""),this.setCuboidList(e,!0),this.render())}}]),n}(Bo),dl=Object.defineProperty,hl=Object.getOwnPropertySymbols,gl=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable,vl=function(e,t,n){return t in e?dl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},pl=function(e,t){for(var n in t||(t={}))gl.call(t,n)&&vl(e,n,t[n]);if(hl){var i,o=Object(b.a)(hl(t));try{for(o.s();!(i=o.n()).done;){n=i.value;fl.call(t,n)&&vl(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},bl=8,ml=26,yl=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).getHoverRectID=function(e){var t,n,o=i.getCoordinateUnderZoom(e),a=null!=(n=null==(t=i.resultList.find((function(e){return e.toolName===D.Rect})))?void 0:t.result)?n:[];if(a.length>0){var r=a.filter((function(e){return ui.isInRect(o,e,2,i.zoom)}));if(0===r.length)return"";if(1===r.length)return r[0].id;if(r.length>1)return r.map((function(e){return{size:e.width*e.height,id:e.id}})).sort((function(e,t){return e.size-t.size}))[0].id}return""},i.resultList=[],i.hoverID=[],i.fillID=[],i.render=i.render.bind(Object(h.a)(i)),i.drawPolygon=i.drawPolygon.bind(Object(h.a)(i)),i.drawRect=i.drawRect.bind(Object(h.a)(i)),i.drawTag=i.drawTag.bind(Object(h.a)(i)),i.setShowDefaultCursor(!0),i.forbidOperation=!0,i}return Object(d.a)(n,[{key:"onMouseDown",value:function(e){var t,i;if(Object(g.a)(Object(f.a)(n.prototype),"onMouseDown",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;var o=this.mouseHoverID,a=null!=(i=null==(t=this.resultList.find((function(e){return e.toolName===D.Rect})))?void 0:t.result)?i:[];if(0===e.button){var r=[o],l=!0;o&&a.find((function(e){return e.id===o&&(null==e?void 0:e.isSelected)}))&&(l=!1),o||(r=a.map((function(e){return e.id})),l=!1),this.emit("setSelectedID",r,l),this.render()}}},{key:"updateRotate",value:function(){}},{key:"onMouseMove",value:function(e){if(!Object(g.a)(Object(f.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.mouseHoverID,i=this.getHoverRectID(e);if(t!==i){this.mouseHoverID=i;var o=[i];i||(o=[]),this.emit("setHoverID",o),this.render()}}}},{key:"setResult",value:function(e){this.resultList=Object(m.cloneDeep)(e),this.render()}},{key:"drawPolygon",value:function(e,t){var n=this;null==e||e.forEach((function(e){var i,o,a,r,l,c=n.getColor(e.attribute,t),s=ia.getStrokeAndFill(c,e.valid),u=null!=(o=null==(i=n.style)?void 0:i.width)?o:2;n.hoverID.includes(e.id)?(u=4,vo.drawPolygonWithFillAndLine(n.canvas,Tn.changePointListByZoom(e.pointList,n.zoom,n.currentPos),{fillColor:s.fill,strokeColor:s.stroke,pointColor:"white",thickness:u,lineCap:"round",isClose:!0,lineType:null==t?void 0:t.lineType})):vo.drawPolygon(n.canvas,Tn.changePointListByZoom(e.pointList,n.zoom,n.currentPos),{color:s.fill,lineType:null==(a=n.config)?void 0:a.lineType,thickness:u,isClose:!0});var d="".concat(null!=(l=qi.getAttributeShowText(e.attribute,null!=(r=null==t?void 0:t.attributeList)?r:[]))?l:"");(null==t?void 0:t.isShowOrder)&&(null==e?void 0:e.order)>0&&(d="".concat(e.order," ").concat(d)),vo.drawText(n.canvas,Tn.changePointByZoom(e.pointList[0],n.zoom,n.currentPos),d,pl({color:s.stroke},ft));var h=Tn.changePointListByZoom(e.pointList||[],n.zoom,n.currentPos),g=h[h.length-1];vo.drawText(n.canvas,{x:g.x+bl,y:g.y+ml},null==e?void 0:e.textAttribute,pl({color:s.stroke},ft))}))}},{key:"drawRect",value:function(e,t){var n=this;null==e||e.forEach((function(e){var i=1;n.hoverID.includes(e.id)&&(i=3);var o=n.getColor(e.attribute,t),a=Tn.changeRectByZoom(e,n.zoom,n.currentPos);vo.drawRect(n.canvas,a,{color:(null==e?void 0:e.valid)?o.valid.stroke:o.invalid.stroke,thickness:i}),n.fillID.includes(e.id)&&vo.drawRectWithFill(n.canvas,a,{color:(null==e?void 0:e.valid)?o.valid.fill:o.invalid.fill})}))}},{key:"drawTag",value:function(e,t){var n=e.reduce((function(e,n){return[].concat(Object(c.a)(e),Object(c.a)((null==t?void 0:t.inputList)?ta.getTagNameList(n.result,t.inputList):ta.getTagnameListWithoutConfig(n.result)))}),[]);vo.drawTag(this.canvas,n)}},{key:"setHoverID",value:function(e){this.hoverID=e,this.render()}},{key:"setFillID",value:function(e){this.fillID=e,this.render()}},{key:"render",value:function(){var e,t=this;Object(g.a)(Object(f.a)(n.prototype),"render",this).call(this),null==(e=this.resultList)||e.forEach((function(e){switch(null==e?void 0:e.toolName){case D.Rect:t.drawRect(e.result,Et.jsonParser(e.config));break;case D.Polygon:t.drawPolygon(e.result,Et.jsonParser(e.config));break;case D.Tag:t.drawTag(e.result,Et.jsonParser(e.config))}}))}},{key:"exportData",value:function(){return[[],{}]}}]),n}(Bo),Cl=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).onKeydown=function(e){switch(e.keyCode){case fi.Esc:e.preventDefault(),e.stopPropagation(),i.clearPredictionInfo();break;case fi.Z:e.ctrlKey&&(e.preventDefault(),e.stopPropagation(),i.rectList=[],i.render())}},i.segmentPrediction=function(e){return t=Object(h.a)(i),n=null,o=Object(mo.a)().mark((function t(){var n;return Object(mo.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getCoordinateUnderZoom(e),this.isRunSegment=!0,this.render(),this.runPrediction){t.next=7;break}return this.emit("messageError","You needs to set runPrediction function"),this.clearPredictionInfo(),t.abrupt("return");case 7:return t.next=9,this.runPrediction({point:n,rect:{x:this.rectList[0].x,y:this.rectList[0].y,w:this.rectList[0].width,h:this.rectList[0].height}});case 9:this.clearPredictionInfo();case 10:case"end":return t.stop()}}),t,this)})),new Promise((function(i,a){var r=function(t){try{c(o.next(t))}catch(e){a(e)}},l=function(t){try{c(o.throw(t))}catch(e){a(e)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,l)};c((o=o.apply(t,n)).next())}));var t,n,o},i.isRunSegment=!1,i.runPrediction=e.runPrediction,i}return Object(d.a)(n,[{key:"setRunPrediction",value:function(e){this.runPrediction=e}},{key:"eventBinding",value:function(){var e=this;document.addEventListener("keydown",(function(t){return e.onKeydown(t)})),Object(g.a)(Object(f.a)(n.prototype),"eventBinding",this).call(this)}},{key:"clearPredictionInfo",value:function(){this.rectList=[],this.isShowCursor=!1,this.coord={x:-1,y:-1},this.drawingRect=void 0,this.isRunSegment=!1,this.clearCanvas(),this.render()}},{key:"onMouseUp",value:function(e){if(!this.isRunSegment)return 0!==e.button||1!==this.rectList.length||this.isRunSegment?void Object(g.a)(Object(f.a)(n.prototype),"onMouseUp",this).call(this,e):(e.stopPropagation(),this.segmentPrediction(e),void this.clearActiveStatus())}},{key:"onMouseDown",value:function(e){this.isRunSegment||Object(g.a)(Object(f.a)(n.prototype),"onMouseDown",this).call(this,e)}},{key:"renderCursorLine",value:function(){var e;if(this.ctx){var t=this.ctx,i=10,o=this.coord,a=o.x,r=o.y;t.save(),t.strokeStyle="white",t.setLineDash([6]),t.lineWidth=1,t.strokeRect(a-i,r-i,20,20),t.restore();var l="\u2460 ".concat(Ci.i18n.t("FramingOfObjectToBeDivided")),c="en"===Ci.i18n.language,s=c?326:186;if(1===(null==(e=this.rectList)?void 0:e.length)){l="\u2461 ".concat(Ci.i18n.t("ClickOnTarget")),s=c?232:142;t.save(),t.strokeStyle="white";t.beginPath(),t.moveTo(a+11+4,r+11+2),t.arc(a+11+2,r+11+2,2,0,2*Math.PI,!0),t.stroke(),t.restore()}this.isRunSegment&&(s=c?316:136,l=Ci.i18n.t("SplittingAlgorithmPrediction")),t.save(),t.fillStyle=this.style.strokeColor,t.fillRect(a+i,r-40-1,s,32),t.restore(),t.save(),t.font="14px Source Han Sans CN",t.fillStyle="white",t.fillText(l,a+i+14,r-20),t.restore(),Object(g.a)(Object(f.a)(n.prototype),"renderCursorLine",this).call(this)}}},{key:"renderDrawingRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.ctx&&e){var i=Tn.changeRectByZoom(e,n?t:this.zoom,this.currentPos),o=i.x,a=i.y,r=i.width,l=i.height;this.ctx.save(),this.ctx.lineCap="butt",this.ctx.lineWidth=this.style.strokeWidth,this.ctx.strokeStyle="white",this.ctx.strokeRect(o,a,r,l),this.ctx.strokeStyle=this.style.strokeColor,this.ctx.setLineDash([6]),this.ctx.strokeRect(o,a,r,l),this.ctx.restore()}}},{key:"renderTextAttribute",value:function(){}},{key:"renderSelectedRect",value:function(){}}]),n}(Yo),Il=function(e){switch(e){case D.Rect:case D.RectTrack:return Yo;case D.SegmentByRect:return Cl;case D.Tag:return na;case D.Polygon:return _a;case N.Check:return yl;case D.Line:return La;case D.Point:return fa;case D.Text:return Aa;case D.ScribbleTool:return Er;case D.Cuboid:return ul;case D.PointCloudPolygon:return Yr;default:throw new Error("not match tool")}},xl=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(Et);xl.getCurrentOperation=Il;var wl=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"load",value:function(e){return new Promise((function(t,n){var i=new Image;i.crossOrigin="anonymous",e.startsWith("file")?i.src=encodeURI(e):i.src=e,i.onload=function(){t(i)},i.onerror=function(){n(i)}}))}}]),e}(),kl=Object.defineProperty,Sl=Object.defineProperties,Pl=Object.getOwnPropertyDescriptors,Ll=Object.getOwnPropertySymbols,Al=Object.prototype.hasOwnProperty,Ol=Object.prototype.propertyIsEnumerable,Tl=function(e,t,n){return t in e?kl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},El=function(e,t,n){var i=e[t];return e[t]=e[n],e[n]=i,e},Dl=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"isSingleTool",value:function(e){return!this.isHybridTool(e)}},{key:"isHybridTool",value:function(e){return Array.isArray(e)}}]),e}(),Ml=Dl;Ml.getTopToolName=function(e){return Dl.isHybridTool(e)?e[e.length-1]:e};var Nl=function(){function e(t){var n,i;Object(u.a)(this,e),this.toolOperationList=[],this.toolOperationDom=[],this.toolOperationNameList=[],this.container=t.container,this.size=t.size,this.imgNode=t.imgNode,this.config=null!=(n=t.config)?n:JSON.stringify(jr(Ml.getTopToolName(t.toolName))),this.style=null!=(i=t.style)?i:_r,this.proxyMode=t.proxyMode,this.onWheel=this.onWheel.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.init()}return Object(d.a)(e,[{key:"setImgNode",value:function(e,t){this.toolOperationList.forEach((function(n){n.setImgNode(e,t)}))}},{key:"setImgAttribute",value:function(e){this.toolOperationList.forEach((function(t){t.setImgAttribute(e)}))}},{key:"syncAllAttributeListInConfig",value:function(e){this.toolOperationList.forEach((function(t){var n,i=(n=function(e,t){for(var n in t||(t={}))Al.call(t,n)&&Tl(e,n,t[n]);if(Ll){var i,o=Object(b.a)(Ll(t));try{for(o.s();!(i=o.n()).done;)n=i.value,Ol.call(t,n)&&Tl(e,n,t[n])}catch(a){o.e(a)}finally{o.f()}}return e}({},t.config),Sl(n,Pl({attributeList:e})));t.setConfig(JSON.stringify(i))}))}},{key:"setSize",value:function(e){e.width&&e.height&&this.toolOperationDom.forEach((function(t){t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px")})),this.toolOperationList.forEach((function(t){t.setSize(e)}))}},{key:"syncPosition",value:function(e,t,n,i){this.toolOperationList.forEach((function(o){i!==o&&(o.setCurrentPos(e),o.setZoom(t),o.setImgInfo(n),o.renderBasicCanvas(),o.render())}))}},{key:"defaultSize",get:function(){var e,t;return{width:(null==(e=this.imgNode)?void 0:e.width)||this.size.width,height:(null==(t=this.imgNode)?void 0:t.height)||this.size.height}}},{key:"createDom",value:function(){var e=this.defaultSize,t=e.width,n=e.height,i=window.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.width="".concat(t,"px"),i.style.height="".concat(n,"px");var o=this.toolOperationList.length+1;return i.style.zIndex="".concat(o),i}},{key:"getEmptyImage",value:function(e,t){var n=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n?(n.fillStyle="transparent",n.fillRect(0,0,e.width,e.height),t.toDataURL()):""}({width:e,height:t}),i=new Image;return i.src=n,i}},{key:"createOperation",value:function(e,t,n){var i,o,a=this,r=this.defaultSize,l=r.width,c=r.height,s=this.createDom(),u=this.getEmptyImage(l,c),d={container:s,size:this.size,config:null!=(i=null==this?void 0:this.config)?i:"{}",drawOutSideTarget:!1,style:this.style,imgNode:t||u,hiddenImg:!!e};if(n&&Object.assign(d,n),e){var h=Il(e);if(!h)return;o=new h(d)}else o=new Bo(d),s.style.zIndex="0",o.init();return null==o||o.init(),o.canvas.id=null!=e?e:"basicCanvas",o.on("dragMove",(function(e){var t=e.currentPos,n=e.zoom,i=e.imgInfo;a.syncPosition(t,n,i,o)})),o.on("renderZoom",(function(e,t,n){e&&t&&a.syncPosition(t,e,n,o)})),e?(this.container.appendChild(s),this.toolOperationList.push(o),this.toolOperationNameList.push(e),this.toolOperationDom.push(s),o):(this.container.insertBefore(s,this.container.childNodes[0]),this.toolOperationList.unshift(o),this.toolOperationDom.unshift(s),o)}},{key:"switchLastTwoCanvas",value:function(){if(this.toolOperationDom.length<3)console.error("switchLastTwoCanvas is just used the layer which has 3 canvas");else{var e=this.toolOperationDom.length,t=e-1,n=e-2,i=this.toolOperationDom[t],o=this.toolOperationDom[n];if(o&&i)return i.style.zIndex="".concat(t-1),o.style.zIndex="".concat(t),this.toolOperationList[t].clearActiveStatus(),this.toolOperationList[t].clearCursorLine(),this.toolOperationList[t].render(),this.toolOperationList=El(this.toolOperationList,t,n),this.toolOperationDom=El(this.toolOperationDom,t,n),this.toolOperationList[t]}}},{key:"getFirstToolOperation",value:function(){return this.toolOperationList.length>1?this.toolOperationList[1]:this.toolOperationList[0]}},{key:"switchToCanvas",value:function(e){var t,n,i,o,a=this.toolOperationNameList.indexOf(e);if(!(a<0||this.toolOperationList.length<1||a>this.toolOperationDom.length-1)){var r=this.toolOperationDom.length-1,l=this.toolOperationDom[a],c=this.toolOperationDom[r];if(l&&c){var s=c.style.zIndex;return c.style.zIndex="".concat(l.style.zIndex),l.style.zIndex="".concat(s),null==(n=(t=this.toolOperationList[r]).clearActiveStatus)||n.call(t),null==(o=(i=this.toolOperationList[r]).clearCursorLine)||o.call(i),this.toolOperationList[r].render(),this.toolOperationList=El(this.toolOperationList,r,a),this.toolOperationDom=El(this.toolOperationDom,r,a),this.toolOperationNameList=El(this.toolOperationNameList,r,a),this.toolOperationList[r]}}}},{key:"updateDataByToolName",value:function(e,t){var n=this.toolOperationNameList.indexOf(e);n>=0&&this.toolOperationList[n].setResult(t)}},{key:"clearStatusAndResult",value:function(){this.toolOperationList.forEach((function(e){var t;null==(t=e.clearActiveStatus)||t.call(e),e.clearResult()}))}},{key:"destroyAllLayer",value:function(){var e=this;this.toolOperationList.forEach((function(t){t.destroyCanvas(),e.init()}))}},{key:"init",value:function(){this.toolOperationList=[],this.toolOperationDom=[],this.eventBinding()}},{key:"destroy",value:function(){this.destroyAllLayer(),this.eventUnBinding()}},{key:"eventBinding",value:function(){this.proxyMode&&(this.container.addEventListener("wheel",this.onWheel),this.container.addEventListener("mousedown",this.onMouseDown),this.container.addEventListener("mousemove",this.onMouseMove),this.container.addEventListener("mouseup",this.onMouseUp))}},{key:"eventUnBinding",value:function(){this.proxyMode&&(this.container.removeEventListener("wheel",this.onWheel),this.container.removeEventListener("mousedown",this.onMouseDown),this.container.removeEventListener("mousemove",this.onMouseMove),this.container.removeEventListener("mouseup",this.onMouseUp))}},{key:"onWheel",value:function(e){if(e.preventDefault(),e.stopPropagation(),0!==this.toolOperationList.length){var t=this.toolOperationDom.length-1;this.toolOperationList[t].onWheel(e)}}},{key:"onMouseDown",value:function(e){if(e.preventDefault(),e.stopPropagation(),0!==this.toolOperationList.length){var t=this.toolOperationDom.length-1;this.toolOperationList[t].onMouseDown(e)}}},{key:"onMouseMove",value:function(e){if(e.preventDefault(),e.stopPropagation(),0!==this.toolOperationList.length){var t=this.toolOperationDom.length-1;this.toolOperationList[t].onMouseMove(e)}}},{key:"onMouseUp",value:function(e){if(e.preventDefault(),e.stopPropagation(),0!==this.toolOperationList.length){var t=this.toolOperationDom.length-1;this.toolOperationList[t].onMouseUp(e)}}},{key:"getCurrentToolName",value:function(){return this.toolOperationNameList[this.toolOperationNameList.length-1]}}]),e}(),Rl=function(e){return new Promise((function(t,n){var i=document.createElement("img");i.crossOrigin="Anonymous",i.onerror=function(e){console.error(e),n(i)},i.src=e,i.onload=function(){t(i)}}))},Bl=function(){function e(t){var n,i,o=this;Object(u.a)(this,e),this.setImgSrc=function(e){return t=o,n=null,i=Object(mo.a)().mark((function t(){var n;return Object(mo.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Rl(e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:this.setImgNode(n);case 6:case"end":return t.stop()}}),t,this)})),new Promise((function(e,o){var a=function(e){try{l(i.next(e))}catch(t){o(t)}},r=function(e){try{l(i.throw(e))}catch(t){o(t)}},l=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(a,r)};l((i=i.apply(t,n)).next())}));var t,n,i},this.container=t.container,this.size=t.size,this.toolName=t.toolName,this.imgNode=t.imgNode,this.config=null!=(n=t.config)?n:JSON.stringify(jr(Ml.getTopToolName(t.toolName))),this.style=null!=(i=t.style)?i:_r,this.toolScheduler=new Nl(t),this.i18nLanguage="cn",this._initToolOperation()}return Object(d.a)(e,[{key:"setToolName",value:function(e,t){this.toolName=e;var n=t||JSON.stringify(jr(Ml.getTopToolName(e)));this.config=n,this._initToolOperation()}},{key:"setImgNode",value:function(e,t){this.toolScheduler.setImgNode(e,t),this.imgNode=e}},{key:"setImgAttribute",value:function(e){this.toolScheduler.setImgAttribute(e)}},{key:"setSize",value:function(e){this.size=e,this.toolScheduler.setSize(e)}},{key:"setStyle",value:function(e){this.style=e}},{key:"_initToolOperation",value:function(){var e=this;this.toolScheduler.destroyAllLayer();var t=[],n={hiddenImg:!0};Ml.isSingleTool(this.toolName)?(t=[this.toolName],Object.assign(n,{hiddenImg:!1})):t=this.toolName,t.length>1&&this.toolScheduler.createOperation(void 0,this.imgNode),t.forEach((function(i,o){var a=e.toolScheduler.createOperation(i,void 0,n);o===t.length-1&&(e.toolInstance=a)})),this.setLang(this.i18nLanguage)}},{key:"setBasicInfo",value:function(e,t){this.dependToolName=e,this.basicResult=t,this.toolInstance.setDependName(e),this.toolInstance.setBasicResult(t),this.toolInstance.renderBasicCanvas()}},{key:"clearBasicResult",value:function(){this.setBasicInfo()}},{key:"forbidOperation",value:function(){this.toolInstance.setForbidOperation(!0)}},{key:"launchOperation",value:function(){this.toolInstance.setForbidOperation(!1)}},{key:"setLang",value:function(e){switch(this.i18nLanguage=e,e){case"cn":this.toolInstance.setLang(it.Zh);break;case"en":this.toolInstance.setLang(it.US)}}},{key:"setDataInjectionAtCreation",value:function(e){this.toolInstance.setDataInjectionAtCreation(e)}},{key:"setRenderEnhance",value:function(e){this.toolInstance.setRenderEnhance(e)}},{key:"switchLastTwoCanvas",value:function(){var e=this.toolScheduler.switchLastTwoCanvas();if(e)return this.toolInstance=e,e}},{key:"firstToolInstance",get:function(){return this.toolScheduler.getFirstToolOperation()}},{key:"setCustomRenderStyle",value:function(e){this.toolInstance.setCustomRenderStyle(e)}}]),e}(),jl=function(){function e(t){Object(u.a)(this,e),this.container=t.container}return Object(d.a)(e,[{key:"createCanvas",value:function(e,t){if("string"!==typeof e)return this.container.appendChild(e),e.style.position="absolute",e.style.left="0",e.style.top="0",e;var n=document.createElement("canvas");return n.id=e,t&&t.size&&(n.width=t.size.width,n.height=t.size.height),this.container.appendChild(n),n}},{key:"destroyCanvas",value:function(e){var t=document.getElementById(e);return t&&this.container.removeChild(t),t}}]),e}(),_l=n(188),Hl=x("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAndXNlIHN0cmljdCc7CgogIGZ1bmN0aW9uIGdldEluZGV4KHopIHsKICAgIGNvbnN0IG1pblogPSAtNzsKICAgIGNvbnN0IG1heFogPSAzOwogICAgY29uc3QgbGVuID0gbWF4WiAtIG1pblo7CiAgICBpZiAoeiA8IG1pblopIHsKICAgICAgeiA9IG1pblo7CiAgICB9CiAgICBpZiAoeiA+IG1heFopIHsKICAgICAgeiA9IG1heFo7CiAgICB9CiAgICByZXR1cm4gTWF0aC5mbG9vcigoeiAtIG1pblopIC8gbGVuICogMjU1KTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlQ29sb3JNYXBKZXQoKSB7CiAgICBsZXQgczsKICAgIGNvbnN0IHAgPSBuZXcgQXJyYXkoMjU2KS5maWxsKCIiKS5tYXAoKCkgPT4gbmV3IEFycmF5KDMpLmZpbGwoIiIpKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykgewogICAgICBmb3IgKHMgPSAwOyBzIDwgMzI7IHMrKykgewogICAgICAgIHBbc11bMF0gPSAxMjggKyA0ICogczsKICAgICAgICBwW3NdWzFdID0gMDsKICAgICAgICBwW3NdWzJdID0gMDsKICAgICAgfQogICAgICBwWzMyXVswXSA9IDI1NTsKICAgICAgcFszMl1bMV0gPSAwOwogICAgICBwWzMyXVsyXSA9IDA7CiAgICAgIGZvciAocyA9IDA7IHMgPCA2MzsgcysrKSB7CiAgICAgICAgcFszMyArIHNdWzBdID0gMjU1OwogICAgICAgIHBbMzMgKyBzXVsxXSA9IDQgKyA0ICogczsKICAgICAgICBwWzMzICsgc11bMl0gPSAwOwogICAgICB9CiAgICAgIHBbOTZdWzBdID0gMjU0OwogICAgICBwWzk2XVsxXSA9IDI1NTsKICAgICAgcFs5Nl1bMl0gPSAyOwogICAgICBmb3IgKHMgPSAwOyBzIDwgNjI7IHMrKykgewogICAgICAgIHBbOTcgKyBzXVswXSA9IDI1MCAtIDQgKiBzOwogICAgICAgIHBbOTcgKyBzXVsxXSA9IDI1NTsKICAgICAgICBwWzk3ICsgc11bMl0gPSA2ICsgNCAqIHM7CiAgICAgIH0KICAgICAgcFsxNTldWzBdID0gMTsKICAgICAgcFsxNTldWzFdID0gMjU1OwogICAgICBwWzE1OV1bMl0gPSAyNTQ7CiAgICAgIGZvciAocyA9IDA7IHMgPCA2NDsgcysrKSB7CiAgICAgICAgcFsxNjAgKyBzXVswXSA9IDA7CiAgICAgICAgcFsxNjAgKyBzXVsxXSA9IDI1MiAtIHMgKiA0OwogICAgICAgIHBbMTYwICsgc11bMl0gPSAyNTU7CiAgICAgIH0KICAgICAgZm9yIChzID0gMDsgcyA8IDMyOyBzKyspIHsKICAgICAgICBwWzIyNCArIHNdWzBdID0gMDsKICAgICAgICBwWzIyNCArIHNdWzFdID0gMDsKICAgICAgICBwWzIyNCArIHNdWzJdID0gMjUyIC0gNCAqIHM7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBwOwogIH0KICBjb25zdCBDT0xPUl9NQVBfSkVUID0gY3JlYXRlQ29sb3JNYXBKZXQoKTsKICBmdW5jdGlvbiBpc0luUG9seWdvbihjaGVja1BvaW50LCBwb2x5Z29uUG9pbnRzLCBsaW5lVHlwZSA9IDApIHsKICAgIGxldCBjb3VudGVyID0gMDsKICAgIGxldCBpOwogICAgbGV0IHhpbnRlcnM7CiAgICBsZXQgcDE7CiAgICBsZXQgcDI7CiAgICBwb2x5Z29uUG9pbnRzID0gWy4uLnBvbHlnb25Qb2ludHNdOwogICAgaWYgKGxpbmVUeXBlID09PSAxKSB7CiAgICAgIHBvbHlnb25Qb2ludHMgPSBjcmVhdGVTbW9vdGhDdXJ2ZVBvaW50cyhwb2x5Z29uUG9pbnRzLnJlZHVjZSgoYWNjLCBjdXIpID0+IHsKICAgICAgICByZXR1cm4gWy4uLmFjYywgY3VyLngsIGN1ci55XTsKICAgICAgfSwgW10pLCAwLjUsIHRydWUsIFNFR01FTlRfTlVNQkVSKTsKICAgIH0KICAgIFtwMV0gPSBwb2x5Z29uUG9pbnRzOwogICAgY29uc3QgcG9pbnRDb3VudCA9IHBvbHlnb25Qb2ludHMubGVuZ3RoOwogICAgZm9yIChpID0gMTsgaSA8PSBwb2ludENvdW50OyBpKyspIHsKICAgICAgcDIgPSBwb2x5Z29uUG9pbnRzW2kgJSBwb2ludENvdW50XTsKICAgICAgaWYgKGNoZWNrUG9pbnQueCA+IE1hdGgubWluKHAxLngsIHAyLngpICYmIGNoZWNrUG9pbnQueCA8PSBNYXRoLm1heChwMS54LCBwMi54KSkgewogICAgICAgIGlmIChjaGVja1BvaW50LnkgPD0gTWF0aC5tYXgocDEueSwgcDIueSkpIHsKICAgICAgICAgIGlmIChwMS54ICE9PSBwMi54KSB7CiAgICAgICAgICAgIHhpbnRlcnMgPSAoY2hlY2tQb2ludC54IC0gcDEueCkgKiAocDIueSAtIHAxLnkpIC8gKHAyLnggLSBwMS54KSArIHAxLnk7CiAgICAgICAgICAgIGlmIChwMS55ID09PSBwMi55IHx8IGNoZWNrUG9pbnQueSA8PSB4aW50ZXJzKSB7CiAgICAgICAgICAgICAgY291bnRlcisrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHAxID0gcDI7CiAgICB9CiAgICBpZiAoY291bnRlciAlIDIgPT09IDApIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQogIGZ1bmN0aW9uIGdldE5ld0NvbG9yQnlCb3goe3pNaW4sIHpNYXgsIHBvbHlnb25Qb2ludExpc3QsIGF0dHJpYnV0ZSwgeCwgeSwgeiwgY29sb3JMaXN0LCB2YWxpZH0pIHsKICAgIGNvbnN0IGluUG9seWdvbiA9IGlzSW5Qb2x5Z29uKHt4LCB5fSwgcG9seWdvblBvaW50TGlzdCk7CiAgICBpZiAoaW5Qb2x5Z29uICYmIHogPj0gek1pbiAmJiB6IDw9IHpNYXgpIHsKICAgICAgaWYgKHZhbGlkID09PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbMSwgMTAzIC8gMjU1LCAxMDIgLyAyNTVdOwogICAgICB9CiAgICAgIGlmIChjb2xvckxpc3RbYXR0cmlidXRlXSkgewogICAgICAgIHJldHVybiBjb2xvckxpc3RbYXR0cmlidXRlXS5yZ2JhLnNsaWNlKDAsIDMpLm1hcCgodikgPT4gdiAvIDI1NSk7CiAgICAgIH0KICAgICAgcmV0dXJuIFsxLCAwLCAwXTsKICAgIH0KICB9CiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlMihlKSB7CiAgICBjb25zdCB7cG9zaXRpb246IHBvaW50cywgY29sb3IsIGN1Ym9pZExpc3QsIGNvbG9yTGlzdCwgaGlnaGxpZ2h0SW5kZXh9ID0gZS5kYXRhOwogICAgbGV0IG51bSA9IDA7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gMykgewogICAgICBjb25zdCB4ID0gcG9pbnRzW2ldOwogICAgICBjb25zdCB5ID0gcG9pbnRzW2kgKyAxXTsKICAgICAgY29uc3QgeiA9IHBvaW50c1tpICsgMl07CiAgICAgIGNvbnN0IG5ld0NvbG9ySW5mbyA9IGN1Ym9pZExpc3QubWFwKCh2KSA9PiB7CiAgICAgICAgcmV0dXJuIGdldE5ld0NvbG9yQnlCb3goewogICAgICAgICAgcG9seWdvblBvaW50TGlzdDogdi5wb2x5Z29uUG9pbnRMaXN0LAogICAgICAgICAgek1pbjogdi56TWluLAogICAgICAgICAgek1heDogdi56TWF4LAogICAgICAgICAgeCwKICAgICAgICAgIHksCiAgICAgICAgICB6LAogICAgICAgICAgYXR0cmlidXRlOiB2LmF0dHJpYnV0ZSwKICAgICAgICAgIGNvbG9yTGlzdCwKICAgICAgICAgIHZhbGlkOiB2LnZhbGlkCiAgICAgICAgfSk7CiAgICAgIH0pLmZpbHRlcigodikgPT4gdikucG9wKCk7CiAgICAgIGlmIChuZXdDb2xvckluZm8pIHsKICAgICAgICBudW0rKzsKICAgICAgICBjb25zdCBbciwgZywgYl0gPSBuZXdDb2xvckluZm87CiAgICAgICAgY29sb3JbaV0gPSByOwogICAgICAgIGNvbG9yW2kgKyAxXSA9IGc7CiAgICAgICAgY29sb3JbaSArIDJdID0gYjsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBwb2ludEluZGV4ID0gTWF0aC5mbG9vcihpIC8gMyk7CiAgICAgICAgaWYgKGhpZ2hsaWdodEluZGV4ICYmIGhpZ2hsaWdodEluZGV4W3BvaW50SW5kZXhdID09PSAxKSB7CiAgICAgICAgICBjb2xvcltpXSA9IDA7CiAgICAgICAgICBjb2xvcltpICsgMV0gPSAwOwogICAgICAgICAgY29sb3JbaSArIDJdID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgaW5kZXggPSBnZXRJbmRleCh6KTsKICAgICAgICAgIGNvbnN0IG5ld0NvbG9yID0gQ09MT1JfTUFQX0pFVFtpbmRleF07CiAgICAgICAgICBjb25zdCBbciwgZywgYl0gPSBuZXdDb2xvcjsKICAgICAgICAgIGNvbG9yW2ldID0gciAvIDI1NTsKICAgICAgICAgIGNvbG9yW2kgKyAxXSA9IGcgLyAyNTU7CiAgICAgICAgICBjb2xvcltpICsgMl0gPSBiIC8gMjU1OwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcG9zdE1lc3NhZ2Uoe3BvaW50cywgY29sb3IsIG51bX0pOwogIH07CgogIGV4cG9ydHMuaXNJblBvbHlnb24gPSBpc0luUG9seWdvbjsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTsKCiAgcmV0dXJuIGV4cG9ydHM7Cgp9KSh7fSk7Cgo=",null,!1),Vl=x("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAndXNlIHN0cmljdCc7CgogIGZ1bmN0aW9uIGdldEluZGV4KHopIHsKICAgIGNvbnN0IG1pblogPSAtNzsKICAgIGNvbnN0IG1heFogPSAzOwogICAgY29uc3QgbGVuID0gbWF4WiAtIG1pblo7CiAgICBpZiAoeiA8IG1pblopIHsKICAgICAgeiA9IG1pblo7CiAgICB9CiAgICBpZiAoeiA+IG1heFopIHsKICAgICAgeiA9IG1heFo7CiAgICB9CiAgICByZXR1cm4gTWF0aC5mbG9vcigoeiAtIG1pblopIC8gbGVuICogMjU1KTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlQ29sb3JNYXBKZXQoKSB7CiAgICBsZXQgczsKICAgIGNvbnN0IHAgPSBuZXcgQXJyYXkoMjU2KS5maWxsKCIiKS5tYXAoKCkgPT4gbmV3IEFycmF5KDMpLmZpbGwoIiIpKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykgewogICAgICBmb3IgKHMgPSAwOyBzIDwgMzI7IHMrKykgewogICAgICAgIHBbc11bMF0gPSAxMjggKyA0ICogczsKICAgICAgICBwW3NdWzFdID0gMDsKICAgICAgICBwW3NdWzJdID0gMDsKICAgICAgfQogICAgICBwWzMyXVswXSA9IDI1NTsKICAgICAgcFszMl1bMV0gPSAwOwogICAgICBwWzMyXVsyXSA9IDA7CiAgICAgIGZvciAocyA9IDA7IHMgPCA2MzsgcysrKSB7CiAgICAgICAgcFszMyArIHNdWzBdID0gMjU1OwogICAgICAgIHBbMzMgKyBzXVsxXSA9IDQgKyA0ICogczsKICAgICAgICBwWzMzICsgc11bMl0gPSAwOwogICAgICB9CiAgICAgIHBbOTZdWzBdID0gMjU0OwogICAgICBwWzk2XVsxXSA9IDI1NTsKICAgICAgcFs5Nl1bMl0gPSAyOwogICAgICBmb3IgKHMgPSAwOyBzIDwgNjI7IHMrKykgewogICAgICAgIHBbOTcgKyBzXVswXSA9IDI1MCAtIDQgKiBzOwogICAgICAgIHBbOTcgKyBzXVsxXSA9IDI1NTsKICAgICAgICBwWzk3ICsgc11bMl0gPSA2ICsgNCAqIHM7CiAgICAgIH0KICAgICAgcFsxNTldWzBdID0gMTsKICAgICAgcFsxNTldWzFdID0gMjU1OwogICAgICBwWzE1OV1bMl0gPSAyNTQ7CiAgICAgIGZvciAocyA9IDA7IHMgPCA2NDsgcysrKSB7CiAgICAgICAgcFsxNjAgKyBzXVswXSA9IDA7CiAgICAgICAgcFsxNjAgKyBzXVsxXSA9IDI1MiAtIHMgKiA0OwogICAgICAgIHBbMTYwICsgc11bMl0gPSAyNTU7CiAgICAgIH0KICAgICAgZm9yIChzID0gMDsgcyA8IDMyOyBzKyspIHsKICAgICAgICBwWzIyNCArIHNdWzBdID0gMDsKICAgICAgICBwWzIyNCArIHNdWzFdID0gMDsKICAgICAgICBwWzIyNCArIHNdWzJdID0gMjUyIC0gNCAqIHM7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBwOwogIH0KICBjb25zdCBDT0xPUl9NQVBfSkVUID0gY3JlYXRlQ29sb3JNYXBKZXQoKTsKICBmdW5jdGlvbiBpc0luUG9seWdvbihjaGVja1BvaW50LCBwb2x5Z29uUG9pbnRzLCBsaW5lVHlwZSA9IDApIHsKICAgIGxldCBjb3VudGVyID0gMDsKICAgIGxldCBpOwogICAgbGV0IHhpbnRlcnM7CiAgICBsZXQgcDE7CiAgICBsZXQgcDI7CiAgICBwb2x5Z29uUG9pbnRzID0gWy4uLnBvbHlnb25Qb2ludHNdOwogICAgaWYgKGxpbmVUeXBlID09PSAxKSB7CiAgICAgIHBvbHlnb25Qb2ludHMgPSBjcmVhdGVTbW9vdGhDdXJ2ZVBvaW50cyhwb2x5Z29uUG9pbnRzLnJlZHVjZSgoYWNjLCBjdXIpID0+IHsKICAgICAgICByZXR1cm4gWy4uLmFjYywgY3VyLngsIGN1ci55XTsKICAgICAgfSwgW10pLCAwLjUsIHRydWUsIFNFR01FTlRfTlVNQkVSKTsKICAgIH0KICAgIFtwMV0gPSBwb2x5Z29uUG9pbnRzOwogICAgY29uc3QgcG9pbnRDb3VudCA9IHBvbHlnb25Qb2ludHMubGVuZ3RoOwogICAgZm9yIChpID0gMTsgaSA8PSBwb2ludENvdW50OyBpKyspIHsKICAgICAgcDIgPSBwb2x5Z29uUG9pbnRzW2kgJSBwb2ludENvdW50XTsKICAgICAgaWYgKGNoZWNrUG9pbnQueCA+IE1hdGgubWluKHAxLngsIHAyLngpICYmIGNoZWNrUG9pbnQueCA8PSBNYXRoLm1heChwMS54LCBwMi54KSkgewogICAgICAgIGlmIChjaGVja1BvaW50LnkgPD0gTWF0aC5tYXgocDEueSwgcDIueSkpIHsKICAgICAgICAgIGlmIChwMS54ICE9PSBwMi54KSB7CiAgICAgICAgICAgIHhpbnRlcnMgPSAoY2hlY2tQb2ludC54IC0gcDEueCkgKiAocDIueSAtIHAxLnkpIC8gKHAyLnggLSBwMS54KSArIHAxLnk7CiAgICAgICAgICAgIGlmIChwMS55ID09PSBwMi55IHx8IGNoZWNrUG9pbnQueSA8PSB4aW50ZXJzKSB7CiAgICAgICAgICAgICAgY291bnRlcisrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHAxID0gcDI7CiAgICB9CiAgICBpZiAoY291bnRlciAlIDIgPT09IDApIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQogIG9ubWVzc2FnZSA9IGZ1bmN0aW9uIG9ubWVzc2FnZTIoZSkgewogICAgY29uc3Qge3pNaW4sIHpNYXgsIHBvbHlnb25Qb2ludExpc3QsIHBvc2l0aW9uOiBwb2ludHMsIGNvbG9yfSA9IGUuZGF0YTsKICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gW107CiAgICBjb25zdCBuZXdDb2xvciA9IFtdOwogICAgbGV0IG51bSA9IDA7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gMykgewogICAgICBjb25zdCB4ID0gcG9pbnRzW2ldOwogICAgICBjb25zdCB5ID0gcG9pbnRzW2kgKyAxXTsKICAgICAgY29uc3QgeiA9IHBvaW50c1tpICsgMl07CiAgICAgIGNvbnN0IGluUG9seWdvbiA9IGlzSW5Qb2x5Z29uKHt4LCB5fSwgcG9seWdvblBvaW50TGlzdCk7CiAgICAgIGlmIChpblBvbHlnb24gJiYgeiA+PSB6TWluICYmIHogPD0gek1heCkgewogICAgICAgIG5ld1Bvc2l0aW9uLnB1c2goeCk7CiAgICAgICAgbmV3UG9zaXRpb24ucHVzaCh5KTsKICAgICAgICBuZXdQb3NpdGlvbi5wdXNoKHopOwogICAgICAgIGlmIChjb2xvci5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGNvbnN0IGluZGV4ID0gZ2V0SW5kZXgoeik7CiAgICAgICAgICBjb25zdCBuZXdDb2xvclJHQiA9IENPTE9SX01BUF9KRVRbaW5kZXhdOwogICAgICAgICAgY29uc3QgW3IsIGcsIGJdID0gbmV3Q29sb3JSR0I7CiAgICAgICAgICBuZXdDb2xvci5wdXNoKHIgLyAyNTUpOwogICAgICAgICAgbmV3Q29sb3IucHVzaChnIC8gMjU1KTsKICAgICAgICAgIG5ld0NvbG9yLnB1c2goYiAvIDI1NSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5ld0NvbG9yLnB1c2goY29sb3JbaV0pOwogICAgICAgICAgbmV3Q29sb3IucHVzaChjb2xvcltpICsgMV0pOwogICAgICAgICAgbmV3Q29sb3IucHVzaChjb2xvcltpICsgMl0pOwogICAgICAgIH0KICAgICAgICBudW0rKzsKICAgICAgfQogICAgfQogICAgdGhpcy5wb3N0TWVzc2FnZSh7cG9zaXRpb246IG5ld1Bvc2l0aW9uLCBjb2xvcjogbmV3Q29sb3IsIG51bX0pOwogIH07CgogIGV4cG9ydHMuaXNJblBvbHlnb24gPSBpc0luUG9seWdvbjsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTsKCiAgcmV0dXJuIGV4cG9ydHM7Cgp9KSh7fSk7Cgo=",null,!1),Fl=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).littleEndian=!0,i}return Object(d.a)(n,[{key:"load",value:function(e,t,n,i){var o=this,a=new Qa.k(o.manager);a.setPath(o.path),a.setResponseType("arraybuffer"),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,(function(n){try{t(o.parse(n))}catch(a){i?i(a):console.error(a),o.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t=Qa.q.decodeText(new Uint8Array(e)),n=function(e){var t={},n=e.search(/[\n\r]data\s(\S*)\s/i),i=/[\n\r]data\s(\S*)\s/i.exec(e.slice(n-1));if(t.data=i[1],t.headerLen=i[0].length+n,t.str=e.slice(0,t.headerLen),t.str=t.str.replace(/#.*/gi,""),t.version=/version (.*)/i.exec(t.str),t.fields=/fields (.*)/i.exec(t.str),t.size=/size (.*)/i.exec(t.str),t.type=/type (.*)/i.exec(t.str),t.count=/count (.*)/i.exec(t.str),t.width=/width (.*)/i.exec(t.str),t.height=/height (.*)/i.exec(t.str),t.viewpoint=/viewpoint (.*)/i.exec(t.str),t.points=/points (.*)/i.exec(t.str),null!==t.version&&(t.version=parseFloat(t.version[1])),t.fields=null!==t.fields?t.fields[1].split(" "):[],null!==t.type&&(t.type=t.type[1].split(" ")),null!==t.width&&(t.width=parseInt(t.width[1])),null!==t.height&&(t.height=parseInt(t.height[1])),null!==t.viewpoint&&(t.viewpoint=t.viewpoint[1]),null!==t.points&&(t.points=parseInt(t.points[1],10)),null===t.points&&(t.points=t.width*t.height),null!==t.size&&(t.size=t.size[1].split(" ").map((function(e){return parseInt(e,10)}))),null!==t.count)t.count=t.count[1].split(" ").map((function(e){return parseInt(e,10)}));else{t.count=[];for(var o=0,a=t.fields.length;o<a;o++)t.count.push(1)}t.offset={};for(var r=0,l=0,c=t.fields.length;l<c;l++)"ascii"===t.data?t.offset[t.fields[l]]=l:(t.offset[t.fields[l]]=r,r+=t.size[l]*t.count[l]);return t.rowSize=r,t}(t),i=[],o=[],a=[];if("ascii"===n.data)for(var r=n.offset,l=t.slice(n.headerLen).split("\n"),s=0,u=l.length;s<u;s++)if(""!==l[s]){var d=l[s].split(" ");if(void 0!==r.x&&(i.push(parseFloat(d[r.x])),i.push(parseFloat(d[r.y])),i.push(parseFloat(d[r.z]))),this.genColorByZ){var h=this.genColorByZ(parseFloat(d[r.x]),parseFloat(d[r.y]),parseFloat(d[r.z])).map((function(e){return e/255}));a.push.apply(a,Object(c.a)(h))}void 0!==r.normal_x&&(o.push(parseFloat(d[r.normal_x])),o.push(parseFloat(d[r.normal_y])),o.push(parseFloat(d[r.normal_z])))}if("binary_compressed"===n.data)for(var g=new Uint32Array(e.slice(n.headerLen,n.headerLen+8)),f=g[0],v=g[1],p=function(e,t){var n,i,o,a=e.length,r=new Uint8Array(t),l=0,c=0;do{if((n=e[l++])<32){if(c+ ++n>t)throw new Error("Output buffer is not large enough");if(l+n>a)throw new Error("Invalid compressed data");do{r[c++]=e[l++]}while(--n)}else{if(i=n>>5,o=c-((31&n)<<8)-1,l>=a)throw new Error("Invalid compressed data");if(7===i&&(i+=e[l++],l>=a))throw new Error("Invalid compressed data");if(o-=e[l++],c+i+2>t)throw new Error("Output buffer is not large enough");if(o<0)throw new Error("Invalid compressed data");if(o>=c)throw new Error("Invalid compressed data");do{r[c++]=r[o++]}while(2+--i)}}while(l<a);return r}(new Uint8Array(e,n.headerLen+8,f),v),b=new DataView(p.buffer),m=n.offset,y=0;y<n.points;y++)if(void 0!==m.x&&(i.push(b.getFloat32(n.points*m.x+n.size[0]*y,this.littleEndian)),i.push(b.getFloat32(n.points*m.y+n.size[1]*y,this.littleEndian)),i.push(b.getFloat32(n.points*m.z+n.size[2]*y,this.littleEndian))),void 0!==m.normal_x&&(o.push(b.getFloat32(n.points*m.normal_x+n.size[4]*y,this.littleEndian)),o.push(b.getFloat32(n.points*m.normal_y+n.size[5]*y,this.littleEndian)),o.push(b.getFloat32(n.points*m.normal_z+n.size[6]*y,this.littleEndian))),this.genColorByZ){var C=this.genColorByZ(b.getFloat32(n.points*m.x+n.size[0]*y,this.littleEndian),b.getFloat32(n.points*m.y+n.size[0]*y,this.littleEndian),b.getFloat32(n.points*m.z+n.size[0]*y,this.littleEndian)).map((function(e){return e/255}));a.push.apply(a,Object(c.a)(C))}if("binary"===n.data)for(var I=new DataView(e,n.headerLen),x=n.offset,w=0,k=0;w<n.points;w++,k+=n.rowSize)if(void 0!==x.x&&(i.push(I.getFloat32(k+x.x,this.littleEndian)),i.push(I.getFloat32(k+x.y,this.littleEndian)),i.push(I.getFloat32(k+x.z,this.littleEndian))),void 0!==x.normal_x&&(o.push(I.getFloat32(k+x.normal_x,this.littleEndian)),o.push(I.getFloat32(k+x.normal_y,this.littleEndian)),o.push(I.getFloat32(k+x.normal_z,this.littleEndian))),this.genColorByZ){var S=this.genColorByZ(I.getFloat32(k+x.x,this.littleEndian),I.getFloat32(k+x.y,this.littleEndian),I.getFloat32(k+x.z,this.littleEndian)).map((function(e){return e/255}));a.push.apply(a,Object(c.a)(S))}var P=new Qa.f;i.length>0&&P.setAttribute("position",new Qa.l(i,3)),o.length>0&&P.setAttribute("normal",new Qa.l(o,3)),a.length>0&&P.setAttribute("color",new Qa.l(a,3)),P.computeBoundingSphere();var L=new Qa.A({size:.01});return a.length>0?L.vertexColors=!0:L.color.setHex(16777215),new Qa.z(P,L)}},{key:"genColorByCoord",value:function(e,t,n){return n<=0?[128,128,128]:n<5?[255,0,0]:n<10?[0,255,0]:[0,0,255]}},{key:"genColorByZ",value:function(e,t,n){var i=function(e){var t=-7,n=3,i=n-t;e<t&&(e=t);e>n&&(e=n);return Math.floor((e-t)/i*255)}(n),o=Ci.COLOR_MAP_JET[i];return[o[0],o[1],o[2]]}}]),n}(Qa.p);var Zl=Object.defineProperty,zl=function(e,t,n){return function(e,t,n){t in e?Zl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==typeof t?t+"":t,n),n},Ul={type:"change"},Gl={type:"start"},Wl={type:"end"},Kl=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e,i){var o;Object(u.a)(this,n),o=t.call(this),zl(Object(h.a)(o),"listenToKeyEvents",(function(e){e.addEventListener("keydown",onKeyDown),o._domElementKeyEvents=e})),void 0===i&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),o.object=e,o.domElement=i,o.domElement.style.touchAction="none",o.enabled=!0,o.target=new Qa.M,o.minDistance=0,o.maxDistance=1/0,o.minZoom=0,o.maxZoom=1/0,o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.enableDamping=!1,o.dampingFactor=.05,o.enableZoom=!0,o.zoomSpeed=1,o.enableRotate=!0,o.rotateSpeed=1,o.enablePan=!0,o.panSpeed=1,o.screenSpacePanning=!0,o.keyPanSpeed=7,o.autoRotate=!1,o.autoRotateSpeed=2,o.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},o.mouseButtons={LEFT:Qa.r.ROTATE,MIDDLE:Qa.r.DOLLY,RIGHT:Qa.r.PAN},o.touches={ONE:Qa.J.ROTATE,TWO:Qa.J.DOLLY_PAN},o.target0=o.target.clone(),o.position0=o.object.position.clone(),o.zoom0=o.object.zoom,o._domElementKeyEvents=null,o.getPolarAngle=function(){return s.phi},o.getAzimuthalAngle=function(){return s.theta},o.getDistance=function(){return this.object.position.distanceTo(this.target)},o.saveState=function(){a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object.zoom},o.reset=function(){a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(Ul),a.update(),l=r.NONE},o.update=function(){var t=new Qa.M,n=(new Qa.B).setFromUnitVectors(e.up,new Qa.M(0,1,0)),i=n.clone().invert(),o=new Qa.M,u=new Qa.B,h=2*Math.PI;return function(){var e=a.object.position;t.copy(e).sub(a.target),t.applyQuaternion(n),s.setFromVector3(t),a.autoRotate&&l===r.NONE&&A(2*Math.PI/60/60*a.autoRotateSpeed),a.enableDamping?(s.theta+=d.theta*a.dampingFactor,s.phi+=d.phi*a.dampingFactor):(s.theta+=d.theta,s.phi+=d.phi);var p=a.minAzimuthAngle,b=a.maxAzimuthAngle;return isFinite(p)&&isFinite(b)&&(p<-Math.PI?p+=h:p>Math.PI&&(p-=h),b<-Math.PI?b+=h:b>Math.PI&&(b-=h),s.theta=p<=b?Math.max(p,Math.min(b,s.theta)):s.theta>(p+b)/2?Math.max(p,s.theta):Math.min(b,s.theta)),s.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=g,s.radius=Math.max(a.minDistance,Math.min(a.maxDistance,s.radius)),!0===a.enableDamping?a.target.addScaledVector(f,a.dampingFactor):a.target.add(f),t.setFromSpherical(s),t.applyQuaternion(i),e.copy(a.target).add(t),a.object.lookAt(a.target),!0===a.enableDamping?(d.theta*=1-a.dampingFactor,d.phi*=1-a.dampingFactor,f.multiplyScalar(1-a.dampingFactor)):(d.set(0,0,0),f.set(0,0,0)),g=1,!!(v||o.distanceToSquared(a.object.position)>c||8*(1-u.dot(a.object.quaternion))>c)&&(a.dispatchEvent(Ul),o.copy(a.object.position),u.copy(a.object.quaternion),v=!1,!0)}}(),o.dispose=function(){a.domElement.removeEventListener("contextmenu",X),a.domElement.removeEventListener("pointerdown",z),a.domElement.removeEventListener("pointercancel",W),a.domElement.removeEventListener("wheel",K),a.domElement.removeEventListener("pointermove",U),a.domElement.removeEventListener("pointerup",G),null!==a._domElementKeyEvents&&a._domElementKeyEvents.removeEventListener("keydown",Y)};var a=Object(h.a)(o),r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},l=r.NONE,c=1e-6,s=new Qa.G,d=new Qa.G,g=1,f=new Qa.M,v=!1,p=new Qa.L,b=new Qa.L,m=new Qa.L,y=new Qa.L,C=new Qa.L,I=new Qa.L,x=new Qa.L,w=new Qa.L,k=new Qa.L,S=[],P={};function L(){return Math.pow(.95,a.zoomSpeed)}function A(e){d.theta-=e}function O(e){d.phi-=e}var T=function(){var e=new Qa.M;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),f.add(e)}}(),E=function(){var e=new Qa.M;return function(t,n){!0===a.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(a.object.up,e)),e.multiplyScalar(t),f.add(e)}}(),D=function(){var e=new Qa.M;return function(t,n){var i=a.domElement;if(a.object.isPerspectiveCamera){var o=a.object.position;e.copy(o).sub(a.target);var r=e.length();r*=Math.tan(a.object.fov/2*Math.PI/180),T(2*t*r/i.clientHeight,a.object.matrix),E(2*n*r/i.clientHeight,a.object.matrix)}else a.object.isOrthographicCamera?(T(t*(a.object.right-a.object.left)/a.object.zoom/i.clientWidth,a.object.matrix),E(n*(a.object.top-a.object.bottom)/a.object.zoom/i.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}}();function M(e){a.object.isPerspectiveCamera?g/=e:a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom*e)),a.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function N(e){a.object.isPerspectiveCamera?g*=e:a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/e)),a.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function R(e){p.set(e.clientX,e.clientY)}function B(e){y.set(e.clientX,e.clientY)}function j(){if(1===S.length)p.set(S[0].pageX,S[0].pageY);else{var e=.5*(S[0].pageX+S[1].pageX),t=.5*(S[0].pageY+S[1].pageY);p.set(e,t)}}function _(){if(1===S.length)y.set(S[0].pageX,S[0].pageY);else{var e=.5*(S[0].pageX+S[1].pageX),t=.5*(S[0].pageY+S[1].pageY);y.set(e,t)}}function H(){var e=S[0].pageX-S[1].pageX,t=S[0].pageY-S[1].pageY,n=Math.sqrt(e*e+t*t);x.set(0,n)}function V(e){if(1==S.length)b.set(e.pageX,e.pageY);else{var t=q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);b.set(n,i)}m.subVectors(b,p).multiplyScalar(a.rotateSpeed);var o=a.domElement;A(2*Math.PI*m.x/o.clientHeight),O(2*Math.PI*m.y/o.clientHeight),p.copy(b)}function F(e){if(1===S.length)C.set(e.pageX,e.pageY);else{var t=q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);C.set(n,i)}I.subVectors(C,y).multiplyScalar(a.panSpeed),D(I.x,I.y),y.copy(C)}function Z(e){var t=q(e),n=e.pageX-t.x,i=e.pageY-t.y,o=Math.sqrt(n*n+i*i);w.set(0,o),k.set(0,Math.pow(w.y/x.y,a.zoomSpeed)),M(k.y),x.copy(w)}function z(e){!1!==a.enabled&&(0===S.length&&(a.domElement.setPointerCapture(e.pointerId),a.domElement.addEventListener("pointermove",U),a.domElement.addEventListener("pointerup",G)),function(e){S.push(e)}(e),"touch"===e.pointerType?function(e){switch(Q(e),S.length){case 1:switch(a.touches.ONE){case Qa.J.ROTATE:if(!1===a.enableRotate)return;j(),l=r.TOUCH_ROTATE;break;case Qa.J.PAN:if(!1===a.enablePan)return;_(),l=r.TOUCH_PAN;break;default:l=r.NONE}break;case 2:switch(a.touches.TWO){case Qa.J.DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;a.enableZoom&&H(),a.enablePan&&_(),l=r.TOUCH_DOLLY_PAN;break;case Qa.J.DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;a.enableZoom&&H(),a.enableRotate&&j(),l=r.TOUCH_DOLLY_ROTATE;break;default:l=r.NONE}break;default:l=r.NONE}l!==r.NONE&&a.dispatchEvent(Gl)}(e):function(e){var t;switch(e.button){case 0:t=a.mouseButtons.LEFT;break;case 1:t=a.mouseButtons.MIDDLE;break;case 2:t=a.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Qa.r.DOLLY:if(!1===a.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),l=r.DOLLY;break;case Qa.r.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enablePan)return;B(e),l=r.PAN}else{if(!1===a.enableRotate)return;R(e),l=r.ROTATE}break;case Qa.r.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enableRotate)return;R(e),l=r.ROTATE}else{if(!1===a.enablePan)return;B(e),l=r.PAN}break;default:l=r.NONE}l!==r.NONE&&a.dispatchEvent(Gl)}(e))}function U(e){!1!==a.enabled&&("touch"===e.pointerType?function(e){switch(Q(e),l){case r.TOUCH_ROTATE:if(!1===a.enableRotate)return;V(e),a.update();break;case r.TOUCH_PAN:if(!1===a.enablePan)return;F(e),a.update();break;case r.TOUCH_DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;!function(e){a.enableZoom&&Z(e),a.enablePan&&F(e)}(e),a.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;!function(e){a.enableZoom&&Z(e),a.enableRotate&&V(e)}(e),a.update();break;default:l=r.NONE}}(e):function(e){if(!1===a.enabled)return;switch(l){case r.ROTATE:if(!1===a.enableRotate)return;!function(e){b.set(e.clientX,e.clientY),m.subVectors(b,p).multiplyScalar(a.rotateSpeed);var t=a.domElement;A(2*Math.PI*m.x/t.clientHeight),O(2*Math.PI*m.y/t.clientHeight),p.copy(b),a.update()}(e);break;case r.DOLLY:if(!1===a.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),k.subVectors(w,x),k.y>0?M(L()):k.y<0&&N(L()),x.copy(w),a.update()}(e);break;case r.PAN:if(!1===a.enablePan)return;!function(e){C.set(e.clientX,e.clientY),I.subVectors(C,y).multiplyScalar(a.panSpeed),D(I.x,I.y),y.copy(C),a.update()}(e)}}(e))}function G(e){J(e),0===S.length&&(a.domElement.releasePointerCapture(e.pointerId),a.domElement.removeEventListener("pointermove",U),a.domElement.removeEventListener("pointerup",G)),a.dispatchEvent(Wl),l=r.NONE}function W(e){J(e)}function K(e){!1!==a.enabled&&!1!==a.enableZoom&&l===r.NONE&&(e.preventDefault(),a.dispatchEvent(Gl),function(e){e.deltaY<0?N(L()):e.deltaY>0&&M(L()),a.update()}(e),a.dispatchEvent(Wl))}function Y(e){!1!==a.enabled&&!1!==a.enablePan&&function(e){var t=!1;switch(e.code){case a.keys.UP:D(0,a.keyPanSpeed),t=!0;break;case a.keys.BOTTOM:D(0,-a.keyPanSpeed),t=!0;break;case a.keys.LEFT:D(a.keyPanSpeed,0),t=!0;break;case a.keys.RIGHT:D(-a.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),a.update())}(e)}function X(e){!1!==a.enabled&&e.preventDefault()}function J(e){delete P[e.pointerId];for(var t=0;t<S.length;t++)if(S[t].pointerId==e.pointerId)return void S.splice(t,1)}function Q(e){var t=P[e.pointerId];void 0===t&&(t=new Qa.L,P[e.pointerId]=t),t.set(e.pageX,e.pageY)}function q(e){var t=e.pointerId===S[0].pointerId?S[1]:S[0];return P[t.pointerId]}return a.domElement.addEventListener("contextmenu",X),a.domElement.addEventListener("pointerdown",z),a.domElement.addEventListener("pointercancel",W),a.domElement.addEventListener("wheel",K,{passive:!1}),o.update(),o}return Object(d.a)(n)}(Qa.j),Yl=function(){function e(){var t=this;Object(u.a)(this,e),this.MAX_SIZE=50,this.cacheList=[],this.loadPCDFile=function(e){return new Promise((function(n,i){var o=t.pointsMap.get(e),a=t.colorMap.get(e);if(o&&a)n({points:o,color:a});else{if(t.cacheList.length>t.MAX_SIZE){var r=t.cacheList.shift();r&&t.pointsMap.delete(r.src)}t.cacheList.push({src:e}),t.pcdLoader.load(e,(function(i){var o=i.geometry.attributes.position.array,a=i.geometry.attributes.color.array;t.pointsMap.set(e,o),t.colorMap.set(e,a),n({points:o,color:a})}),(function(){}),(function(e){i(e)}))}}))},this.pcdLoader=new Fl,this.pointsMap=new Map,this.colorMap=new Map,this.cache2DHighlightIndex=new Map}return Object(d.a)(e,[{key:"updateColor",value:function(e,t){this.colorMap.set(e,t)}},{key:"clearCache2DHighlightIndex",value:function(){this.cache2DHighlightIndex.clear()}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}(),Xl=function(){function e(t){Object(u.a)(this,e),this.store=t,this.polygon2d=[]}return Object(d.a)(e,[{key:"pushPoint",value:function(e,t){this.polygon2d.push({x:e,y:t}),this.store.syncPolygon2d(this.polygon2d)}},{key:"updatePolygon2d",value:function(e){this.polygon2d=e,this.store.syncPolygon2d(this.polygon2d)}}]),e}(),Jl=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"mouseDown",value:function(e){2===e.button&&this.pushPoint(e.offsetX,e.offsetY)}},{key:"mouseUp",value:function(e){2===e.button&&(this.store.getPointsInPolygon(this.polygon2d),this.updatePolygon2d([]))}},{key:"mouseMove",value:function(e){2===e.button&&this.pushPoint(e.offsetX,e.offsetY)}}]),n}(Xl),Ql=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.apply(this,arguments)).radius=20,e}return Object(d.a)(n,[{key:"mouseDown",value:function(e){2===e.button&&(this.pushPoint(e.offsetX,e.offsetY),this.startX=e.offsetX,this.startY=e.offsetY)}},{key:"mouseUp",value:function(e){2===e.button&&(this.store.getPointsInPolygon(this.polygon2d),this.polygon2d.length=0,this.startX=this.startY=NaN)}},{key:"mouseMove",value:function(e){if(2===e.button&&this.startX&&this.startY){this.polygon2d.length=0;for(var t=2*Math.PI,n=this.startX,i=this.startY,o=e.offsetX,a=e.offsetY,r=Math.sqrt((o-n)*(o-n)+(a-i)*(a-i)),l=0;l<t;l+=t/64)this.pushPoint(n+r*Math.cos(l),i-r*Math.sin(l))}}}]),n}(Xl),ql=function(){function e(t){var n=this;Object(u.a)(this,e),this.onMouseMove=function(e){if((n.store.isCheckStatus||n.store.isReadyStatus)&&n.store.updateMouse({x:e.offsetX,y:e.offsetY}),!n.isForbid&&!n.store.checkMode){var t={offsetX:e.offsetX,offsetY:e.offsetY,button:e.buttons};n.currentTool.mouseMove(t)}},this.onMouseDown=function(e){n.isForbid||n.store.checkMode||n.currentTool.mouseDown(e)},this.onMouseUp=function(e){n.isForbid||!0===n.store.orbiting||n.store.checkMode||n.baseMouseDown(e)||n.currentTool.mouseUp(e)},this.baseMouseDown=function(e){if(!n.store.checkMode&&0===e.button)if(n.store.isReadyStatus||n.store.isCheckStatus)return n.store.checkPoints(),!0},this._raycasting=function(){if([Ci.EPointCloudSegmentStatus.Ready,Ci.EPointCloudSegmentStatus.Check].includes(n.store.segmentStatus)){var e=n.store,t=e.mouse,i=e.camera,o=e.raycaster;o.setFromCamera(t,i);var a=o.intersectObjects(n.store.allSegmentPoints,!1)[0];a?n.store.highlightPoints(a.object):(n.store.resetAllSegDataSizeAndRender(),n.store.resetHoverPointsID())}},this.dom=t.dom,this.store=t.store,this.lassoSelector=new Jl(this.store),this.circleSelector=new Ql(this.store),this.currentTool=this.lassoSelector,this.currentToolName="LassoSelector",this.dom.addEventListener("pointermove",this.onMouseMove.bind(this)),this.dom.addEventListener("pointerdown",this.onMouseDown.bind(this)),this.dom.addEventListener("pointerup",this.onMouseUp.bind(this)),this.updateSelector2Lasso=this.updateSelector2Lasso.bind(this),this.updateSelector2Circle=this.updateSelector2Circle.bind(this)}return Object(d.a)(e,[{key:"getCoordinate",value:function(e){var t=this.dom.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}},{key:"forbidOperation",get:function(){return this.store.forbidOperation}},{key:"isForbid",get:function(){return this.forbidOperation}},{key:"updateSelector2Lasso",value:function(){this.currentTool=this.lassoSelector,this.currentToolName="LassoSelector"}},{key:"updateSelector2Circle",value:function(){this.currentTool=this.circleSelector,this.currentToolName="CircleSelector"}}]),e}(),$l=new(function(){function e(){Object(u.a)(this,e),this.segmentStatus=Ci.EPointCloudSegmentStatus.Ready}return Object(d.a)(e,[{key:"statusToggle",value:function(){switch(this.segmentStatus){case Ci.EPointCloudSegmentStatus.Ready:this.segmentStatus=Ci.EPointCloudSegmentStatus.Check;break;case Ci.EPointCloudSegmentStatus.Check:this.segmentStatus=Ci.EPointCloudSegmentStatus.Edit;break;case Ci.EPointCloudSegmentStatus.Edit:this.segmentStatus=Ci.EPointCloudSegmentStatus.Ready;break;default:console.error("Error Status in PointCloudSegmentFSM")}}},{key:"updateStatus2Edit",value:function(){this.segmentStatus=Ci.EPointCloudSegmentStatus.Edit}},{key:"updateStatus2Check",value:function(){this.segmentStatus=Ci.EPointCloudSegmentStatus.Check}},{key:"updateStatus2Ready",value:function(){this.segmentStatus=Ci.EPointCloudSegmentStatus.Ready}},{key:"isReadyStatus",get:function(){return this.segmentStatus===Ci.EPointCloudSegmentStatus.Ready}},{key:"isCheckStatus",get:function(){return this.segmentStatus===Ci.EPointCloudSegmentStatus.Check}},{key:"isEditStatus",get:function(){return this.segmentStatus===Ci.EPointCloudSegmentStatus.Edit}}]),e}()),ec=Object.defineProperty,tc=Object.defineProperties,nc=Object.getOwnPropertyDescriptors,ic=Object.getOwnPropertySymbols,oc=Object.prototype.hasOwnProperty,ac=Object.prototype.propertyIsEnumerable,rc=function(e,t,n){return t in e?ec(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},lc=function(e,t){for(var n in t||(t={}))oc.call(t,n)&&rc(e,n,t[n]);if(ic){var i,o=Object(b.a)(ic(t));try{for(o.s();!(i=o.n()).done;){n=i.value;ac.call(t,n)&&rc(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},cc=function(e,t){return tc(e,nc(t))},sc=function(){function e(t){var n=this,i=t.container,o=t.scene,a=t.camera,r=t.renderer,l=t.emit,c=t.on,s=t.unbind,d=t.checkMode;Object(u.a)(this,e),this.canvas2d=null,this.polygon2d=[],this.forbidOperation=!1,this.raycaster=new Qa.C,this.mouse=new Qa.L,this.cloudData=new Map,this.originPoints=new Float32Array([]),this.segmentData=new Map,this.hoverPointsID="",this.segmentMode=Ci.EPointCloudSegmentMode.Add,this.segmentCoverMode=Ci.EPointCloudSegmentCoverMode.Cover,this.segmentFocusMode=Ci.EPointCloudSegmentFocusMode.Unfocus,this.hideSegment=!1,this.checkMode=!1,this.updatePointCloud=!1,this.addPointCloud=!1,this.orbiting=!1,this.currentAttribute="",this.highlightAttribute="",this.hiddenAttributes=[],this.pointCloudObjectName="pointCloud",this.updatePointCloudBySegment=function(e){n.segmentData.forEach((function(e,t){var i;if(t!==(null==(i=n.cacheSegData)?void 0:i.id)){var o=n.scene.getObjectByName(t);o&&o.removeFromParent()}}));var t=null==e?void 0:e.filter((function(e){var t;return!n.hiddenAttributes.some((function(t){return t===e.attribute}))&&e.id!==(null==(t=n.cacheSegData)?void 0:t.id)}));0!==(null==t?void 0:t.length)&&t.map((function(e){return n.emit("addNewPointsCloud",e),e})),n.emit("reRender3d")},this.updateCoverPoints=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n.segmentData.forEach((function(t,i){var o;if(i!==(null==(o=n.cacheSegData)?void 0:o.id)){var a=Ci.PointCloudUtils.splitPointsFromIndexes(t.indexes,e),r=[];a.forEach((function(e){r.push(n.originPoints[3*e],n.originPoints[3*e+1],n.originPoints[3*e+2])})),t.indexes=a,t.points=new Float32Array(r);var l=n.scene.getObjectByName(i);l&&(l.geometry.setAttribute("position",new Qa.l(new Float32Array(r),3)),l.geometry.attributes.position.needsUpdate=!0)}})),n.syncSegmentData(),n.emit("reRender3d")},this.container=i,this.scene=o,this.camera=a,this.renderer=r,this.emit=l,this.on=c,this.unbind=s,this.checkMode=d,this.createCanvas2d(),this.clearStash=this.clearStash.bind(this),this.addStash2Store=this.addStash2Store.bind(this),this.updateCheck2Edit=this.updateCheck2Edit.bind(this),this.setAttribute=this.setAttribute.bind(this),this.setSegmentMode=this.setSegmentMode.bind(this),this.setSegmentCoverMode=this.setSegmentCoverMode.bind(this),this.setSegmentFocusMode=this.setSegmentFocusMode.bind(this),this.switchSegmentHideMode=this.switchSegmentHideMode.bind(this),this.highlightPointsByAttribute=this.highlightPointsByAttribute.bind(this),this.setHiddenAttributes=this.setHiddenAttributes.bind(this),this.clearAllSegmentData=this.clearAllSegmentData.bind(this),this.deleteSelectedSegmentData=this.deleteSelectedSegmentData.bind(this),this.initMsg(),this.setupRaycaster()}return Object(d.a)(e,[{key:"initMsg",value:function(){this.on("clearStash",this.clearStash),this.on("addStash2Store",this.addStash2Store),this.on("updateCheck2Edit",this.updateCheck2Edit),this.on("setSegmentMode",this.setSegmentMode),this.on("setSegmentCoverMode",this.setSegmentCoverMode),this.on("setSegmentFocusMode",this.setSegmentFocusMode),this.on("switchHideSegment",this.switchSegmentHideMode),this.on("clearAllSegmentData",this.clearAllSegmentData),this.on("deleteSelectedSegmentData",this.deleteSelectedSegmentData)}},{key:"unbindMsg",value:function(){this.unbind("clearStash",this.clearStash),this.unbind("addStash2Store",this.addStash2Store),this.unbind("updateCheck2Edit",this.updateCheck2Edit),this.unbind("setSegmentMode",this.setSegmentMode),this.unbind("setSegmentCoverMode",this.setSegmentCoverMode),this.unbind("setSegmentFocusMode",this.setSegmentFocusMode),this.unbind("switchHideSegment",this.switchSegmentHideMode),this.unbind("clearAllSegmentData",this.clearAllSegmentData),this.unbind("deleteSelectedSegmentData",this.deleteSelectedSegmentData)}},{key:"containerWidth",get:function(){return this.container.clientWidth}},{key:"containerHeight",get:function(){return this.container.clientHeight}},{key:"allSegmentPoints",get:function(){var e=this;return this.scene.children.filter((function(t){return"Points"===t.type&&t.name!==e.pointCloudObjectName}))}},{key:"selectedSegmentPoints",get:function(){var e,t;return this.scene.getObjectByName(null!=(t=null==(e=this.cacheSegData)?void 0:e.id)?t:"")}},{key:"segmentStatus",get:function(){return $l.segmentStatus}},{key:"isReadyStatus",get:function(){return $l.isReadyStatus}},{key:"isCheckStatus",get:function(){return $l.isCheckStatus}},{key:"isEditStatus",get:function(){return $l.isEditStatus}},{key:"formatData",get:function(){var e,t=this.segmentData.values(),n=[],i=Object(b.a)(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;n.push({attribute:o.attribute,id:o.id,indexes:o.indexes})}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"pointCloudArray",get:function(){return this.scene.getObjectByName(this.pointCloudObjectName)}},{key:"clearAllSegmentData",value:function(){this.segmentData=new Map,this.syncSegmentData()}},{key:"updateCurrentSegment",value:function(e){var t=this;this.updatePointCloudBySegment([]),this.segmentData=new Map;var n=this.pointCloudArray;if(n){var i=n.geometry.attributes.position.array;e.forEach((function(e){var n=[];e.indexes.forEach((function(e){n.push(i[3*e],i[3*e+1],i[3*e+2]),t.cloudData.set("".concat(i[3*e],"@").concat(i[3*e+1],"@").concat(i[3*e+2]),{visible:!0})}));var o=cc(lc({},e),{points:new Float32Array(n)});t.segmentData.set(e.id,o),t.emit("addNewPointsCloud",cc(lc({},e),{points:new Float32Array(n)}))})),this.syncSegmentData()}}},{key:"statusToggle",value:function(){$l.statusToggle()}},{key:"updateStatus2Edit",value:function(){$l.updateStatus2Edit()}},{key:"createCanvas",value:function(e){var t=document.createElement("canvas");return t.id=e,this.updateCanvasBasicStyle(t,{width:this.containerWidth,height:this.containerHeight},10),t}},{key:"createCanvas2d",value:function(){this.canvas2d=this.createCanvas("".concat("LABELBEE_CANVAS_","2d")),this.container.appendChild(this.canvas2d)}},{key:"setupRaycaster",value:function(){this.raycaster.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:.2},Sprite:{}}}},{key:"setHoverPointsID",value:function(e){this.hoverPointsID=e}},{key:"setSegmentMode",value:function(e){this.segmentMode=e}},{key:"setSegmentCoverMode",value:function(e){this.segmentCoverMode=e}},{key:"setSegmentFocusMode",value:function(e){this.segmentFocusMode=e,e===Ci.EPointCloudSegmentFocusMode.Focus&&this.emit("clearPointCloud"),e===Ci.EPointCloudSegmentFocusMode.Unfocus&&this.emit("loadPCDFile"),this.emit("reRender3d"),this.updatePointCloudBySegment(e===Ci.EPointCloudSegmentFocusMode.Focus?[]:Object(c.a)(this.segmentData.values()))}},{key:"switchSegmentHideMode",value:function(e){this.hideSegment=e,this.updatePointCloudBySegment(!0===e?[]:Object(c.a)(this.segmentData.values()))}},{key:"setHiddenAttributes",value:function(e){this.hiddenAttributes=e,this.updatePointCloudBySegment(Object(c.a)(this.segmentData.values()))}},{key:"setOriginPoints",value:function(e){this.originPoints=e}},{key:"updateCanvasBasicStyle",value:function(e,t,n){e.style.position="absolute",e.width=1*t.width,e.height=1*t.height,e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.left="0",e.style.top="0",e.style.zIndex="".concat(n," ")}},{key:"syncPolygon2d",value:function(e){this.polygon2d=e}},{key:"getPointsInPolygon",value:function(e){if(this.isReadyStatus||this.isEditStatus){var t=e,n=this.originPoints;if(n){for(var i=n.length,o=[],a=[],r=[],l=0;l<i;l+=3){var c=new Qa.M(n[l],n[l+1],n[l+2]);c.project(this.camera);var s={x:0,y:0};if(s.x=Math.round(c.x*this.container.clientWidth/2+this.container.clientWidth/2),s.y=Math.round(-c.y*this.container.clientHeight/2+this.container.clientHeight/2),Fe(s,t)){var u=n[l],d=n[l+1],h=n[l+2],g=Ci.PointCloudUtils.getCloudKeys(u,d,h);this.segmentMode===Ci.EPointCloudSegmentMode.Remove&&(this.cloudData.get(g).visible=!1,o.push(n[l],n[l+1],n[l+2]),r.push(l/3)),this.segmentMode===Ci.EPointCloudSegmentMode.Add&&(this.segmentCoverMode===Ci.EPointCloudSegmentCoverMode.Cover&&(o.push(n[l],n[l+1],n[l+2]),r.push(l/3),!0===this.cloudData.get(g).visible&&a.push(l/3)),this.segmentCoverMode===Ci.EPointCloudSegmentCoverMode.Uncover&&!1===this.cloudData.get(g).visible&&(o.push(n[l],n[l+1],n[l+2]),r.push(l/3)),!1===this.cloudData.get(g).visible&&(this.cloudData.get(g).visible=!0))}}if(0===r.length||!this.cacheSegData&&this.segmentMode===Ci.EPointCloudSegmentMode.Remove)return;var f=new Float32Array(o);this.updateStatusBySelector(f,a,r)}}}},{key:"updateStatusBySelector",value:function(e,t,n){switch(this.segmentMode){case Ci.EPointCloudSegmentMode.Add:if(this.cacheSegData){var i=this.cacheSegData,o=i.points,a=i.coverPoints,r=void 0===a?new Float32Array([]):a,l=o.length+e.length,s=new Float32Array(l);s.set(o,0),s.set(e,o.length);var u=Object(c.a)(new Set([].concat(Object(c.a)(r),Object(c.a)(t))));this.cacheSegData=cc(lc({},this.cacheSegData),{points:s,coverPoints:u,indexes:this.cacheSegData.indexes.concat(n)}),this.emit("updateNewPoints",this.cacheSegData)}else this.cacheSegData={id:bo(),attribute:this.currentAttribute,points:e,coverPoints:t,indexes:n},this.emit("addNewPointsCloud",this.cacheSegData);break;case Ci.EPointCloudSegmentMode.Remove:if(this.cacheSegData){var d=this.cacheSegData,h=d.points,g=d.indexes;this.cacheSegData=cc(lc({},this.cacheSegData),{points:Ci.PointCloudUtils.splitPointsFromPoints(h,e),indexes:Ci.PointCloudUtils.splitPointsFromIndexes(g,n)}),this.emit("updateNewPoints",this.cacheSegData)}}this.updateStatus2Edit(),this.emit("syncPointCloudStatus",{segmentStatus:this.segmentStatus,cacheSegData:this.cacheSegData})}},{key:"syncPointCloudStatus",value:function(){this.statusToggle();var e=this.segmentStatus,t=this.cacheSegData;this.emit("syncPointCloudStatus",{segmentStatus:e,cacheSegData:t})}},{key:"syncSegmentData",value:function(){this.emit("syncSegmentData",this.formatData)}},{key:"addStash2Store",value:function(){this.isEditStatus&&this.cacheSegData&&(this.cacheSegData.coverPoints&&0!==this.cacheSegData.coverPoints.length&&this.updateCoverPoints(this.cacheSegData.coverPoints),delete this.cacheSegData.coverPoints,this.segmentData.set(this.cacheSegData.id,this.cacheSegData),this.cacheSegData=void 0,this.syncPointCloudStatus(),this.syncSegmentData())}},{key:"updateCloudDataStatus",value:function(e,t){for(var n=this,i=function(i){var o=e[i],a=e[i+1],r=e[i+2],l=Ci.PointCloudUtils.getCloudKeys(o,a,r),c=n.cloudData.get(l);Object.keys(t).forEach((function(e){c[e]=t[e]}))},o=0;o<e.length;o+=3)i(o)}},{key:"clearStash",value:function(){if(this.isEditStatus&&this.cacheSegData){if(this.updateCloudDataStatus(this.cacheSegData.points,{visible:!1}),this.segmentData.has(this.cacheSegData.id)){var e=this.segmentData.get(this.cacheSegData.id);e&&(this.emit("updateNewPoints",e),this.updateCloudDataStatus(null==e?void 0:e.points,{visible:!0}))}else this.emit("clearStashRender");this.syncSegmentData(),this.cacheSegData=void 0,this.syncPointCloudStatus()}}},{key:"deleteSelectedSegmentData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if((this.isCheckStatus||this.isEditStatus)&&this.cacheSegData){var t=this.scene.getObjectByName(e),n=this.cacheSegData.indexes;if(t&&n){for(var i=t.geometry.attributes.position.array,o=0;o<n.length;o++){var a=this.cloudData.get(Ci.PointCloudUtils.getCloudKeys(i[o],i[o+1],i[o+2]));a&&(a.visible=!1)}this.resetSelectedSegmentStatus()}}}},{key:"resetSelectedSegmentStatus",value:function(){this.cacheSegData=void 0,$l.updateStatus2Ready(),this.emit("syncPointCloudStatus",{segmentStatus:this.segmentStatus,cacheSegData:this.cacheSegData})}},{key:"updateCheck2Edit",value:function(){this.isCheckStatus&&this.syncPointCloudStatus()}},{key:"checkPoints",value:function(){if(this.isReadyStatus||this.isCheckStatus){var e=this.segmentData.get(this.hoverPointsID);e?(this.cacheSegData=cc(lc({},e),{points:new Float32Array(e.points)}),$l.updateStatus2Check(),this.emit("syncPointCloudStatus",{segmentStatus:this.segmentStatus,cacheSegData:this.cacheSegData})):this.resetSelectedSegmentStatus()}}},{key:"editPoints",value:function(){var e=this.segmentData.get(this.hoverPointsID);e&&(this.cacheSegData=cc(lc({},e),{points:new Float32Array(e.points)}),this.emit("updateNewPoints"),this.syncPointCloudStatus())}},{key:"setForbidOperation",value:function(e){this.forbidOperation=e}},{key:"updateMouse",value:function(e){var t=e.x/this.containerWidth*2-1,n=-e.y/this.containerHeight*2+1;this.mouse.setX(t),this.mouse.setY(n)}},{key:"resetAllSegDataSize",value:function(){var e=this;""===this.highlightAttribute&&this.allSegmentPoints.forEach((function(t){var n;(null==(n=e.cacheSegData)?void 0:n.id)!==t.name&&(t.material.size=5)}))}},{key:"resetHoverPointsID",value:function(){this.hoverPointsID=""}},{key:"resetAllSegDataSizeAndRender",value:function(){this.resetAllSegDataSize(),this.emit("reRender3d")}},{key:"highlightPoints",value:function(e){(this.isCheckStatus||this.isReadyStatus)&&(this.resetAllSegDataSize(),e.material.size=10,this.hoverPointsID=e.name,this.emit("reRender3d"))}},{key:"highlightPointsByAttribute",value:function(e){var t=this;this.highlightAttribute=e,0!==this.segmentData.size&&(this.resetAllSegDataSize(),this.segmentData.forEach((function(n,i){if(n.attribute===e){var o=t.scene.getObjectByName(i);o&&(null==o?void 0:o.material)&&(o.material.size=10)}})),this.emit("reRender3d"))}},{key:"setAttribute",value:function(e){this.currentAttribute=e}}]),e}(),uc=Object.defineProperty,dc=Object.defineProperties,hc=Object.getOwnPropertyDescriptors,gc=Object.getOwnPropertySymbols,fc=Object.prototype.hasOwnProperty,vc=Object.prototype.propertyIsEnumerable,pc=function(e,t,n){return t in e?uc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},bc=function(e,t){for(var n in t||(t={}))fc.call(t,n)&&pc(e,n,t[n]);if(gc){var i,o=Object(b.a)(gc(t));try{for(o.s();!(i=o.n()).done;){n=i.value;vc.call(t,n)&&pc(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},mc=function(e,t){return dc(e,hc(t))},yc=function(){function e(t){var n=this,i=t.store,o=t.on,a=t.unbind,r=t.nextTick,l=t.config;Object(u.a)(this,e),this.clearStash=function(){var e,t,i=n.scene.getObjectByName(null!=(t=null==(e=n.store.cacheSegData)?void 0:e.id)?t:"");i&&(i.removeFromParent(),n.render3d())},this.generateNewPoints=function(e){var t=new Qa.f;t.setAttribute("position",new Qa.e(e.points,3));var i=new Qa.A({color:n.getCurrentColor(e.attribute),size:10}),o=new Qa.z(t,i);o.name=e.id,n.store.scene.add(o),n.render3d()},this.updateNewPoints=function(e){var t,i=n.store.scene.getObjectByName(null!=(t=null==e?void 0:e.id)?t:"");i&&e&&(i.geometry.setAttribute("position",new Qa.l(e.points,3)),i.material=new Qa.A({color:n.getCurrentColor(e.attribute),size:10}),i.geometry.attributes.position.needsUpdate=!0,i.geometry.computeBoundingSphere(),n.render3d())},this.updatePointsColor=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.store.cacheSegData,i=n.store.scene.getObjectByName(null!=(e=null==t?void 0:t.id)?e:"");i&&t&&(t.attribute=n.store.currentAttribute,i.material=new Qa.A({color:n.getCurrentColor(t.attribute),size:10}),n.render3d())},this.render3d=function(){n.store.renderer.render(n.store.scene,n.store.camera)},this.store=i,this.on=o,this.unbind=a,this.nextTick=r,this.config=l,this.generateNewPoints=this.generateNewPoints.bind(this),this.clearStash=this.clearStash.bind(this),this.render3d=this.render3d.bind(this),this.updateNewPoints=this.updateNewPoints.bind(this),this.updatePointsColor=this.updatePointsColor.bind(this),this.clearAllSegmentData=this.clearAllSegmentData.bind(this),this.clearSelectedSegmentRender=this.clearSelectedSegmentRender.bind(this),this.initMsg(),this.animate()}return Object(d.a)(e,[{key:"scene",get:function(){return this.store.scene}},{key:"getCurrentColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store.currentAttribute;if(!e||!this.config)return Ci.colorArr[0].hexString;var t=Ci.toolStyleConverter.getColorFromConfig({attribute:e},mc(bc({},this.config),{attributeConfigurable:!0}),{}),n=t.fill;return n}},{key:"initMsg",value:function(){this.on("addNewPointsCloud",this.generateNewPoints),this.on("updateNewPoints",this.updateNewPoints),this.on("clearStashRender",this.clearStash),this.on("clearAllSegmentData",this.clearAllSegmentData),this.on("reRender3d",this.render3d),this.on("deleteSelectedSegmentData",this.clearSelectedSegmentRender)}},{key:"unbindMsg",value:function(){this.unbind("addNewPointsCloud",this.generateNewPoints),this.unbind("updateNewPoints",this.updateNewPoints),this.unbind("clearStashRender",this.clearStash),this.unbind("clearAllSegmentData",this.clearAllSegmentData),this.unbind("reRender3d",this.render3d),this.unbind("deleteSelectedSegmentData",this.clearSelectedSegmentRender)}},{key:"canvas2d",get:function(){return this.store.canvas2d}},{key:"clearCanvasMouse",value:function(){var e,t;null==(t=null==(e=this.canvas2d)?void 0:e.getContext("2d"))||t.clearRect(0,0,this.store.containerWidth,this.store.containerHeight)}},{key:"renderCanvas2dPolygon",value:function(){var e;(null==(e=this.store.polygon2d)?void 0:e.length)>0&&this.canvas2d&&vo.drawPolygon(this.canvas2d,this.store.polygon2d,{isClose:!1,color:this.getCurrentColor(),thickness:4})}},{key:"clearAllSegmentData",value:function(){for(var e=this.scene.children.length-1;e>=0;e--){var t=this.scene.children[e];"Points"===t.type&&t.name!==this.store.pointCloudObjectName&&t.removeFromParent()}this.render3d()}},{key:"clearSelectedSegmentRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.scene.getObjectByName(e);t&&(t.removeFromParent(),this.render3d())}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.clearCanvasMouse(),this.renderCanvas2dPolygon(),this.nextTick()}}]),e}(),Cc=Object.defineProperty,Ic=Object.defineProperties,xc=Object.getOwnPropertyDescriptors,wc=Object.getOwnPropertySymbols,kc=Object.prototype.hasOwnProperty,Sc=Object.prototype.propertyIsEnumerable,Pc=function(e,t,n){return t in e?Cc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Lc=function(e,t){for(var n in t||(t={}))kc.call(t,n)&&Pc(e,n,t[n]);if(wc){var i,o=Object(b.a)(wc(t));try{for(o.s();!(i=o.n()).done;){n=i.value;Sc.call(t,n)&&Pc(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},Ac=function(e,t){return Ic(e,xc(t))},Oc=function(e,t,n){return new Promise((function(i,o){var a=function(e){try{l(n.next(e))}catch(t){o(t)}},r=function(e){try{l(n.throw(e))}catch(t){o(t)}},l=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(a,r)};l((n=n.apply(e,t)).next())}))},Tc=new Hl({type:"module"}),Ec=function(e){Object(v.a)(n,e);var t=Object(p.a)(n);function n(e){var i,o=e.container,a=e.noAppend,r=e.isOrthographicCamera,l=e.orthographicParams,c=e.backgroundColor,s=void 0===c?"#4C4C4C":c,d=e.config,g=e.isSegment,f=e.checkMode;return Object(u.a)(this,n),(i=t.call(this)).zAxisLimit=10,i.initCameraPosition=i.DEFAULT_INIT_CAMERA_POSITION,i.isOrthographicCamera=!1,i.pointsUuid="",i.pointCloudObjectName="pointCloud",i.rangeObjectName="range",i.highlightGroupName="highlightBoxes",i.showDirection=!0,i.pointsMaterialSize=1,i.isSegment=!1,i.checkMode=!1,i.nextTick=function(){i.segmentOperation&&i.segmentOperation._raycasting()},i.keydown=function(e){if(i.store&&" "===e.key)i.controls.enablePan=!0,i.store.setForbidOperation(!0)},i.keyup=function(e){if(i.store&&" "===e.key)i.controls.enablePan=!1,i.store.setForbidOperation(!1)},i.addSphereToSense=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blue",o=null!=(t=e.id)?t:bo();i.removeObjectByName(o,"sphere");var a=Ci.DEFAULT_SPHERE_PARAMS.radius,r=Ci.DEFAULT_SPHERE_PARAMS.widthSegments,l=Ci.DEFAULT_SPHERE_PARAMS.heightSegments,c=e.center,s=new Qa.m,u=new Qa.F(a,r,l),d=new Qa.v({color:n}),h=new Qa.u(u,d);h.position.set(c.x,c.y,c.z),s.add(h),s.name="sphere".concat(o),i.scene.add(s)},i.generateSphere=function(e){var t=Ci.toolStyleConverter.getColorFromConfig({attribute:e.attribute},Ac(Lc({},i.config),{attributeConfigurable:!0}),{}).fill;i.addSphereToSense(e,t),i.render()},i.generateSpheres=function(e){e.forEach((function(e){var t=Ci.toolStyleConverter.getColorFromConfig({attribute:e.attribute},Ac(Lc({},i.config),{attributeConfigurable:!0}),{}).fill;i.addSphereToSense(e,t)})),i.render()},i.addBoxToSense=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215,o=null!=(t=e.id)?t:bo();i.removeObjectByName(o,"box");var a=e.center,r=e.width,l=e.height,c=e.depth,s=e.rotation,u=new Qa.m,d=new Qa.c(r,l,c),h=new Qa.v({color:"blue"}),g=new Qa.u(d,h),f=new Qa.d(g,n),v=i.generateBoxArrow(e),p=i.generateBoxTrackID(e);p&&u.add(p),u.add(f),u.add(v),a&&u.position.set(a.x,a.y,a.z),s&&u.rotation.set(0,0,s),u.name="box".concat(o),i.scene.add(u)},i.applyCameraTarget=function(e){if("OrthographicCamera"===i.camera.type&&e){var t=i.getOrthographicCameraTarget(e);i.updateCameraZoom(e.zoom),i.updateCamera(e.position,t)}},i.initShaderMaterial=function(){return{vertexShader:"\n      attribute vec3 dimensions;\n      varying vec3 vDimensions;\n      uniform float pointSize;\n      attribute float visibility;\n\n      void main() {\n        // Pass the vertex coordinates to the fragment shader\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n          // Pass the dimensions to the fragment shader\n          vDimensions = dimensions;\n          gl_PointSize = pointSize;\n\n          if (visibility < 0.5) {\n            gl_Position = vec4(0.0, 0.0, 0.0, 1.0);  // Invalid Position.\n          }\n      }",fragmentShader:"\n      varying vec3 vDimensions;\n      void main() {\n        // Calculate color based on dimensions\n        vec3 color = vec3(vDimensions.x, vDimensions.y, vDimensions.z);\n\n        // If vDimensions is default value, the color change to white-rgb(255,255,255)\n        if (vDimensions.x == 0.0 && vDimensions.y == 0.0 && vDimensions.z == 0.0) {\n          color = vec3(255, 255, 255);\n        }\n\n        // Output the final color        \n        gl_FragColor = vec4(color, 1.0);\n      }",uniforms:{pointSize:{value:i.pointsMaterialSize}}}},i.loadPCDFile=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Oc(Object(h.a)(i),[].concat(t),(function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentPCDSrc,n=arguments.length>1?arguments[1]:void 0;return Object(mo.a)().mark((function i(){var o,a,r,l,c;return Object(mo.a)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return");case 2:return e.clearPointCloud(),e.cacheInstance.clearCache2DHighlightIndex(),e.currentPCDSrc=t,i.next=7,e.cacheInstance.loadPCDFile(t);case 7:o=i.sent,a=o.points,r=o.color,(l=new Qa.f).setAttribute("position",new Qa.e(a,3)),e.isSegment||l.setAttribute("dimensions",new Qa.e(r,3)),e.initCloudData(a),c=new Qa.z(l),e.renderPointCloud(c,n);case 16:case"end":return i.stop()}}),i)}))()}))},i.getHighlightIndexByMappingImgList=function(e){return Oc(Object(h.a)(i),[e],(function(e){var t=this,n=e.mappingImgList,i=e.points;return Object(mo.a)().mark((function e(){var o,a,r;return Object(mo.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=4;break}e.t0=[],e.next=7;break;case 4:return e.next=6,Promise.all(n.map((function(e){return wl.load(e.url)})));case 6:e.t0=e.sent;case 7:return o=e.t0,a=n.map((function(e,n){var a;if(t.cacheInstance.cache2DHighlightIndex.has(e.url))return null!=(a=t.cacheInstance.cache2DHighlightIndex.get(e.url))?a:[];var r=vr({points:i,calib:e.calib,width:o[n].width,height:o[n].height});return t.cacheInstance.cache2DHighlightIndex.set(e.url,r),r})),r=pr(a),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)}))()}))},i.loadPCDFileByBox=function(e,t,n){return Oc(Object(h.a)(i),null,Object(mo.a)().mark((function i(){var o,a,r,l,c=this;return Object(mo.a)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=function(i,o){return Oc(c,null,Object(mo.a)().mark((function a(){var r,l,c,s,u,d,h,g,f;return Object(mo.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=(r=null!=n?n:{}).width,c=void 0===l?0:l,s=r.height,u=void 0===s?0:s,d=r.depth,h=void 0===d?0:d,a.next=3,this.filterPointsByBox(Ac(Lc({},t),{width:t.width+c,height:t.height+u,depth:t.depth+h}),i,o);case 3:if(g=a.sent){a.next=7;break}return console.error("filter Error"),a.abrupt("return");case 7:this.clearPointCloud(),this.currentPCDSrc=e,(f=new Qa.z(g.geometry)).name=this.pointCloudObjectName,this.scene.add(f),this.render();case 13:case"end":return a.stop()}}),a,this)})))},i.next=3,this.cacheInstance.loadPCDFile(e);case 3:a=i.sent,r=a.points,l=a.color,o(r,l);case 7:case"end":return i.stop()}}),i,this)})))},i.generateRange=function(e){var t=i.createRange(e);i.scene.add(t)},i.generateBoxArrow=function(e){var t=e.width,n=new Qa.M(1,0,0),o=new Qa.M(t/2,0,0),a=new Qa.a(n,o,2,16776960);return a.visible=i.showDirection,a},i.generateBoxTrackID=function(e){if(e.trackID){var t=new Qa.K(i.getTextCanvas(e.trackID.toString()));t.needsUpdate=!0;var n=new Qa.I({map:t,depthWrite:!1}),o=new Qa.H(n);return o.scale.set(5,5,5),o.position.set(-e.width/2,0,e.depth/2+.5),o}},i.applyZAxisPoints=function(e){i.zAxisLimit=e,i.filterZAxisPoints(),i.render()},i.updatePointSize=function(e){var t=e.zoomIn,n=e.customSize,o=i.scene.getObjectByName(i.pointCloudObjectName);if(o){var a=o.material.uniforms.pointSize.value;o.material.uniforms.pointSize.value=t?Math.min(1.2*a,10):Math.max(a/1.2,1),n&&(o.material.uniforms.pointSize.value=n,i.pointsMaterialSize=n),o.material.uniformsNeedUpdate=!0,i.render()}},i.container=o,i.renderer=new Qa.O({antialias:!0}),i.backgroundColor=s,i.config=d,i.checkMode=null!=f&&f,r&&l?(i.isOrthographicCamera=!0,i.camera=new Qa.w(l.left,l.right,l.top,l.bottom,l.near,l.far)):i.camera=new Qa.x(30,i.containerWidth/i.containerHeight,1,1e3),i.initCamera(),i.scene=new Qa.D,i.controls=new Kl(i.camera,g?i.container:i.renderer.domElement),i.pcdLoader=new Fl,i.axesHelper=new Qa.b(1e3),i.scene.add(i.camera),a||o.appendChild(i.renderer.domElement),i.init(),i.cacheInstance=Yl.getInstance(),!0===g&&(i.initSegment(),i.isSegment=!0),i}return Object(d.a)(n,[{key:"initSegment",value:function(){this.store=new sc(this.pointCloudDelegate),this.controls.enablePan=!1,this.controls.addEventListener("start",this.orbiterStart.bind(this)),this.controls.addEventListener("change",this.orbiterChange.bind(this)),this.controls.addEventListener("end",this.orbiterEnd.bind(this)),this.segmentOperation=new ql({dom:this.container,store:this.store}),this.pointCloudRender=new yc(Ac(Lc({store:this.store},this.eventBus),{nextTick:this.nextTick,config:this.config})),this.initMsg(),document.addEventListener("keydown",this.keydown),document.addEventListener("keyup",this.keyup)}},{key:"orbiterStart",value:function(){}},{key:"orbiterChange",value:function(){this.store&&(this.store.orbiting=!0)}},{key:"orbiterEnd",value:function(){this.store&&(this.store.orbiting=!1)}},{key:"currentSegmentTool",get:function(){var e;return null==(e=this.segmentOperation)?void 0:e.currentToolName}},{key:"pointCloudObject",get:function(){return this.scene.getObjectByName(this.pointCloudObjectName)}},{key:"initMsg",value:function(){this.segmentOperation&&(this.on("CircleSelector",this.segmentOperation.updateSelector2Circle.bind(this.segmentOperation)),this.on("LassoSelector",this.segmentOperation.updateSelector2Lasso.bind(this.segmentOperation)),this.on("clearPointCloud",this.clearPointCloud.bind(this)),this.on("loadPCDFile",this.loadPCDFile.bind(this)))}},{key:"unbindMsg",value:function(){this.segmentOperation&&(this.unbind("CircleSelector",this.segmentOperation.updateSelector2Circle.bind(this.segmentOperation)),this.unbind("LassoSelector",this.segmentOperation.updateSelector2Lasso.bind(this.segmentOperation)),this.unbind("clearPointCloud",this.clearPointCloud.bind(this)),this.unbind("loadPCDFile",this.loadPCDFile.bind(this)))}},{key:"eventBus",get:function(){return{on:this.on.bind(this),emit:this.emit.bind(this),unbind:this.unbind.bind(this)}}},{key:"pointCloudDelegate",get:function(){return Lc({container:this.container,scene:this.scene,camera:this.camera,renderer:this.renderer,checkMode:this.checkMode},this.eventBus)}},{key:"DEFAULT_INIT_CAMERA_POSITION",get:function(){return new Qa.M(-.01,0,1e3)}},{key:"containerWidth",get:function(){return this.container.clientWidth}},{key:"containerHeight",get:function(){return this.container.clientHeight}},{key:"setInitCameraPosition",value:function(e){this.initCameraPosition=e}},{key:"setConfig",value:function(e){this.config=e}},{key:"initOrthographicCamera",value:function(e){if("OrthographicCamera"===this.camera.type){var t=e.left,n=e.right,i=e.top,o=e.bottom,a=e.near,r=e.far;this.camera.left=t,this.camera.right=n,this.camera.top=i,this.camera.bottom=o,this.camera.near=a,this.camera.far=r,this.camera.updateProjectionMatrix()}}},{key:"initPerspectiveCamera",value:function(){"PerspectiveCamera"===this.camera.type&&(this.camera.fov=30,this.camera.aspect=this.containerWidth/this.containerHeight,this.camera.near=1,this.camera.far=1e3,this.camera.updateProjectionMatrix())}},{key:"initCamera",value:function(){var e=this.camera;if(this.isOrthographicCamera){var t=this.initCameraPosition,n=t.x,i=t.y,o=t.z;e.position.set(n,i,o)}else e.position.set(-1,0,500);e.up.set(0,0,1)}},{key:"initControls",value:function(){var e=this;this.controls.addEventListener("change",(function(){e.render()})),this.setDefaultControls()}},{key:"setDefaultControls",value:function(){var e=this,t=this.controls;t.target=Object(_l.a)(Qa.M,[0,0,0]),t.addEventListener("change",(function(){e.render()})),t.maxPolarAngle=Math.PI/2,t.update()}},{key:"initRenderer",value:function(){var e=this.renderer;e.setPixelRatio(window.devicePixelRatio),e.setSize(this.containerWidth,this.containerHeight)}},{key:"init",value:function(){this.scene.background=new Qa.g(this.backgroundColor),this.initControls(),this.initRenderer()}},{key:"removeObjectByName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.scene.getObjectByName(t+e);n&&n.removeFromParent()}},{key:"generateBox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215,n=t;this.addBoxToSense(e,n),this.render()}},{key:"getAllAttributeColor",value:function(e){var t=this;return e.reduce((function(e,n){return e[n.attribute]=Ci.toolStyleConverter.getColorFromConfig({attribute:n.attribute},Ac(Lc({},t.config),{attributeConfigurable:!0}),{}),e}),{})}},{key:"generateBoxes",value:function(e){var t=this;e.forEach((function(e){t.addBoxToSense(e)})),this.render()}},{key:"getOrthographicCamera",value:function(e){var t=e.center,n=e.width,i=e.height;return{left:t.x-n/2-10,right:t.x-n/2+10,top:t.y+i/2+10,bottom:t.y-i/2-10,near:100,far:-100,zoom:5}}},{key:"updateCameraZoom",value:function(e){this.camera.zoom=e,this.camera.updateProjectionMatrix()}},{key:"updateCameraByBox",value:function(e,t,n){var i=e.center,o=e.width,a=e.height,r=e.depth,l=e.rotation,c=this.getCameraVector(i,l,{width:o,height:a,depth:r},t);return n?(this.updateCamera(n,i),new Qa.M(n.x,n.y,n.z)):(this.updateCamera(c,i),c)}},{key:"updateCameraBySphere",value:function(e,t){var n=e.center,i=Ci.DEFAULT_SPHERE_PARAMS.radius,o=this.getCameraVector(n,0,{width:2*i,height:2*i,depth:2*i},t);return this.updateCamera(o,n),o}},{key:"updateOrthoCamera",value:function(e,t){var n=this.updateCameraByBox(e,t);return this.camera.zoom=1,this.camera.updateProjectionMatrix(),{cameraPositionVector:n}}},{key:"updateOrthoCameraBySphere",value:function(e,t){var n=this.updateCameraBySphere(e,t);return this.camera.zoom=1,this.camera.updateProjectionMatrix(),{cameraPositionVector:n}}},{key:"updateTopCamera",value:function(){this.setInitCameraPosition(this.DEFAULT_INIT_CAMERA_POSITION),this.camera.zoom=1,this.initCamera(),this.setDefaultControls(),this.camera.updateProjectionMatrix(),this.render()}},{key:"updateCamera",value:function(e,t){this.camera.position.set(e.x,e.y,e.z),this.controls.target=new Qa.M(t.x,t.y,t.z),this.controls.update()}},{key:"resetCamera",value:function(){this.updateCamera(this.DEFAULT_INIT_CAMERA_POSITION,{x:0,y:0,z:0})}},{key:"getOrthographicCameraTarget",value:function(e){var t=new Qa.M(0,0,-1).applyQuaternion(e.quaternion);return e.position.clone().add(t)}},{key:"createThreeMatrix4",value:function(e){var t;return(t=new Qa.t).set.apply(t,Object(c.a)(e))}},{key:"filterPointsByBox",value:function(e,t,n){var i,o,a;if(!t){var r=this.scene.getObjectByName(this.pointCloudObjectName);if(!r)return console.error("There is no corresponding point cloud object"),Promise.resolve(void 0);t=null==(a=null==(o=null==(i=null==r?void 0:r.geometry)?void 0:i.attributes)?void 0:o.position)?void 0:a.array}if(window.Worker){var l=sr(e),c=t,s={boxParams:e,zMin:l.zMin,zMax:l.zMax,polygonPointList:l.polygonPointList,color:n=null!=n?n:new Float32Array([]),position:c};return new Promise((function(e){var t=new Vl;t.postMessage(s),t.onmessage=function(n){var i=n.data,o=i.color,a=i.position,r=i.num,l=new Qa.f;l.setAttribute("position",new Qa.l(a,3)),l.setAttribute("color",new Qa.l(o,3)),l.computeBoundingSphere(),t.terminate(),e({geometry:l,num:r})}}))}return Promise.resolve(void 0)}},{key:"getCameraVector",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ci.EPerspectiveView.Front,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=Ci.PerspectiveShiftUtils.frontViewMatrix4(o);switch(i){case Ci.EPerspectiveView.Front:break;case Ci.EPerspectiveView.Back:a=Ci.PerspectiveShiftUtils.backViewMatrix4(o);break;case Ci.EPerspectiveView.Left:a=Ci.PerspectiveShiftUtils.leftViewMatrix4(o);break;case Ci.EPerspectiveView.Right:a=Ci.PerspectiveShiftUtils.rightViewMatrix4(o);break;case Ci.EPerspectiveView.Top:a=Ci.PerspectiveShiftUtils.topViewMatrix4(o);break;case Ci.EPerspectiveView.LFT:a=Ci.PerspectiveShiftUtils.leftFrontTopViewMatrix4(o,n);break;case Ci.EPerspectiveView.RBT:a=Ci.PerspectiveShiftUtils.rightBackTopViewMatrix4(o,n)}var r=this.createThreeMatrix4(a),l=(new Qa.t).makeTranslation(-e.x,-e.y,-e.z),c=(new Qa.t).makeTranslation(e.x,e.y,e.z),s=(new Qa.t).makeRotationZ(t),u=new Qa.M(e.x,e.y,e.z),d=u.clone().applyMatrix4(r).applyMatrix4(l).applyMatrix4(s).applyMatrix4(c);return d}},{key:"createRange",value:function(e){this.removeObjectByName(this.rangeObjectName);var t=new Qa.i(0,0,e,e,0,2*Math.PI,!1,0).getPoints(50),n=(new Qa.f).setFromPoints(t),i=new Qa.o({color:16711680}),o=new Qa.n(n,i);return o.name=this.rangeObjectName,o}},{key:"renderPointCloud",value:function(e,t){e.name=this.pointCloudObjectName;var n=new Qa.E(this.initShaderMaterial());t&&this.generateRange(t),this.pointsUuid=e.uuid,e.material=n,this.filterZAxisPoints(e),this.scene.add(e),this.render()}},{key:"clearAllBox",value:function(){this.clearAllGroupByPrefix("box")}},{key:"clearAllSphere",value:function(){this.clearAllGroupByPrefix("sphere")}},{key:"clearAllGroupByPrefix",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.scene.children,n=t.length-1;n>=0;n--){var i=t[n];"Group"===i.type&&i.name.startsWith(e)&&this.removeObjectByName(i.name)}}},{key:"clearPointCloud",value:function(){this.removeObjectByName(this.pointCloudObjectName)}},{key:"clearPointCloudAndRender",value:function(){this.clearPointCloud(),this.render()}},{key:"initCloudData",value:function(e){if(this.store){for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];this.store.cloudData.set("".concat(n,"@").concat(i,"@").concat(o),{visible:!1})}this.store.setOriginPoints(e)}}},{key:"highlightOriginPointCloud",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.scene.getObjectByName(this.pointCloudObjectName);if(i)return this.highlightPCDSrc=this.currentPCDSrc,new Promise((function(o,a){if(window.Worker){var r=(e?Object(c.a)(e):[]).map((function(e){return sr(e)})),l=t.getAllAttributeColor(r),s={cuboidList:r,position:i.geometry.attributes.position.array,color:i.geometry.attributes.dimensions.array,colorList:l,highlightIndex:n};Tc.postMessage(s),Tc.onmessage=function(e){var n=e.data.color,r=new Qa.e(n,3);t.highlightPCDSrc&&t.highlightPCDSrc===t.currentPCDSrc&&i.geometry.attributes.position.array.length===n.length?(t.cacheInstance.updateColor(t.highlightPCDSrc,n),t.highlightPCDSrc=void 0,r.needsUpdate=!0,i.geometry.setAttribute("dimensions",r),i.geometry.attributes.dimensions.needsUpdate=!0,o(n),t.render()):a(new Error("Error Path"))}}}))}},{key:"clearHighlightBoxes",value:function(){this.removeObjectByName(this.highlightGroupName)}},{key:"clearHighlightBoxesAndRender",value:function(){this.clearHighlightBoxes(),this.render()}},{key:"highlightBoxes",value:function(e){var t=this,n=new Qa.m;e.forEach((function(e){var i=e.center,o=i.x,a=i.y,r=i.z,l=e.width,c=e.height,s=e.depth,u=e.rotation,d=Ci.toolStyleConverter.getColorFromConfig({attribute:e.attribute},Ac(Lc({},t.config),{attributeConfigurable:!0}),{}).fill,h=new Qa.c(l,c,s),g=new Qa.v({color:d,transparent:!0,opacity:.2,depthTest:!1});h.rotateZ(u),h.translate(o,a,r);var f=new Qa.u(h,g);n.add(f);var v=new Qa.y(s,c);v.rotateY(Math.PI/2),v.rotateZ(u);var p=new Qa.M(l/2,0,0),b=(new Qa.t).makeRotationY(Math.PI/2).makeRotationZ(u);p.applyMatrix4(b),v.translate(o+p.x,a+p.y,r+p.z);var m=new Qa.v({color:d,side:Qa.h,transparent:!0,opacity:.8,depthTest:!1}),y=new Qa.u(v,m);n.add(y)})),n.name=this.highlightGroupName,this.scene.add(n),this.render()}},{key:"updateColor",value:function(e){var t=this.scene.getObjectByName(this.pointCloudObjectName);if(t){var n=new Qa.e(e,3);t.geometry.setAttribute("dimensions",n),t.geometry.attributes.dimensions.needsUpdate=!0,this.render()}}},{key:"setShowDirection",value:function(e){this.showDirection=e,this.scene.children.forEach((function(t){"Group"===t.type&&t.children.forEach((function(t){"ArrowHelper"===t.type&&(t.visible=e)}))})),this.render()}},{key:"getTextCanvas",value:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return n&&(n.font="".concat(50,'px " bold'),n.fillStyle="white",n.textAlign="center",n.textBaseline="middle",n.fillText(e,t.width/2,t.height/2)),t}},{key:"filterNoise",value:function(e){var t=Object(c.a)(e);t.sort((function(e,t){return e.z-t.z}));var n=t[Math.floor(.05*t.length)];t=t.filter((function(e){return e.z>n.z+.1}));var i=.005,o=Math.floor(.995*t.length);(t=t.slice(0,o)).sort((function(e,t){return e.x-t.x}));var a=Math.floor(t.length*i),r=Math.floor(.995*t.length);(t=t.slice(a,r)).sort((function(e,t){return e.y-t.y}));var l=Math.floor(t.length*i),s=Math.floor(.995*t.length);return(t=t.slice(l,s)).length>100?t:e}},{key:"getFittedCoordinates",value:function(e,t){var n=[],i=[].concat(Object(c.a)(e),[e[0]]);t.forEach((function(t){var o=t.x,a=t.y;e.forEach((function(e,t){var r=i[t+1],l=ei.getFootOfPerpendicular({x:o,y:a},e,r,!1,!0).length;(!n[t]||l<n[t].distance)&&(n[t]={distance:l,point:{x:o,y:a}})}))})),i=[e[e.length-1]].concat(Object(c.a)(e),[e[0]]);var o=[n[n.length-1]].concat(n);return e.map((function(e,t){var n=i[t],a=i[t+1],r=i[t+2];return Ci.PointCloudUtils.getIntersectionBySlope({p1:o[t].point,line1:[n,a],p2:o[t+1].point,line2:[a,r]})}))}},{key:"getSensesPointZAxisInPolygon",value:function(e,t,n){for(var i,o,a,r=this,l=this.scene.children.find((function(e){return e.uuid===r.pointsUuid})),c=0,s=0,u=0,d=0,h=[],g=[],f=(null==(a=null==(o=null==(i=null==l?void 0:l.geometry)?void 0:i.attributes)?void 0:o.position)?void 0:a.array)||[],v=0;v<f.length;v+=3){var p=f[v],b=f[v+1],m=f[v+2];Fe({x:p,y:b},e)&&(m||0===m)&&g.push({x:p,y:b,z:m})}return g.length?(n&&(g=this.filterNoise(g),h=this.getFittedCoordinates(e,g)),g.sort((function(e,t){return e.z-t.z})),c=g[0].z-.01,s=g[g.length-1].z+.01,d=g.length,t&&(u=g.filter((function(e){var n=e.z;return n>=t[0]&&n<=t[1]})).length),{maxZ:s,minZ:c,count:u,zCount:d,fittedCoordinates:h}):{maxZ:s,minZ:c,count:u,zCount:d,fittedCoordinates:h}}},{key:"getBasicCoordinate2Canvas",value:function(e){var t=this.containerWidth/2,n=this.containerHeight/2;return{x:e.x*t+t,y:e.y*n+n,z:e.z}}},{key:"basicCoordinate2CanvasMatrix4",get:function(){var e=this.containerWidth/2,t=this.containerHeight/2;return(new Qa.t).set(e,0,0,e,0,t,0,t,0,0,1,0,0,0,0,1)}},{key:"getCanvas2BasicCoordinate",value:function(e){var t=this.containerWidth/2,n=this.containerHeight/2;return new Qa.M(e.x/t-t/2,-(e.y/n-n/2),1)}},{key:"getPolygonSidePoints",value:function(e){var t=e.center,n=t.x,i=t.y,o=t.z,a=e.height,r=e.width,l=e.depth;return[{x:n+r/2,y:i+a/2,z:o-l/2},{x:n+r/2,y:i+a/2,z:o+l/2},{x:n-r/2,y:i+a/2,z:o+l/2},{x:n-r/2,y:i+a/2,z:o-l/2}]}},{key:"getPolygonBackPoints",value:function(e){var t=e.center,n=t.x,i=t.y,o=t.z,a=e.height,r=e.width,l=e.depth;return[{x:n-r/2,y:i+a/2,z:o+l/2},{x:n-r/2,y:i+a/2,z:o-l/2},{x:n-r/2,y:i-a/2,z:o-l/2},{x:n-r/2,y:i-a/2,z:o+l/2}]}},{key:"getPolygonTopPoints",value:function(e){var t=e.center,n=t.x,i=t.y,o=t.z,a=e.height,r=e.width,l=e.depth;return[{x:n+r/2,y:i+a/2,z:o+l/2},{x:n+r/2,y:i-a/2,z:o+l/2},{x:n-r/2,y:i-a/2,z:o+l/2},{x:n-r/2,y:i+a/2,z:o+l/2}]}},{key:"getModelTransformationMatrix",value:function(e){var t=e.center,n=t.x,i=t.y,o=t.z,a=e.rotation,r=(new Qa.t).makeTranslation(-n,-i,-o),l=(new Qa.t).makeTranslation(n,i,o),c=(new Qa.t).makeRotationZ(a);return(new Qa.t).multiply(l).multiply(c).multiply(r)}},{key:"getBoxSidePolygon2DCoordinate",value:function(e){return this.getBoxPolygon2DCoordinate(e,Ci.EPerspectiveView.Left)}},{key:"getBoxBackPolygon2DCoordinate",value:function(e){return this.getBoxPolygon2DCoordinate(e,Ci.EPerspectiveView.Back)}},{key:"getSphereSidePoint2DCoordinate",value:function(e){return this.getSpherePoint2DCoordinate(e)}},{key:"getSphereBackPoint2DCoordinate",value:function(e){return this.getSpherePoint2DCoordinate(e)}},{key:"boxParams2ViewPolygon",value:function(e,t){switch(t){case Ci.EPerspectiveView.Left:return this.getPolygonSidePoints(e);case Ci.EPerspectiveView.Back:return this.getPolygonBackPoints(e);default:return this.getPolygonTopPoints(e)}}},{key:"getBoxPolygon2DCoordinate",value:function(e,t){var n=this,i=this.boxParams2ViewPolygon(e,t),o=e.width,a=e.height,r=(new Qa.t).premultiply(this.camera.matrixWorldInverse).premultiply(this.camera.projectionMatrix),l=(new Qa.t).premultiply(this.getModelTransformationMatrix(e)).premultiply(r).premultiply(this.basicCoordinate2CanvasMatrix4);this.sideMatrix=l;var c=i.map((function(e){return new Qa.M(e.x,e.y,e.z)})).map((function(e){return e.applyMatrix4(n.sideMatrix)})),s=this.containerWidth/o,u=this.containerHeight/a;return{polygon2d:c,zoom:Math.min(s,u)/2}}},{key:"getSpherePoint2DCoordinate",value:function(e){var t=e.center,n=e.attribute,i=e.id,o=e.valid,a=Ci.DEFAULT_SPHERE_PARAMS.radius,r={center:t,attribute:n,id:i,valid:o,width:2*a,height:2*a,depth:2*a,rotation:0},l=(new Qa.t).premultiply(this.camera.matrixWorldInverse).premultiply(this.camera.projectionMatrix),c=(new Qa.t).premultiply(this.getModelTransformationMatrix(r)).premultiply(l).premultiply(this.basicCoordinate2CanvasMatrix4);this.sideMatrix=c;var s=new Qa.M(t.x,t.y,t.z).applyMatrix4(this.sideMatrix),u=this.containerWidth/(2*a),d=this.containerHeight/(2*a);return{point2d:s,zoom:Math.min(u,d)/2}}},{key:"getSphereTopPoint2DCoordinate",value:function(e){var t=e.center,n=Ci.DEFAULT_SPHERE_PARAMS.radius,i={x:-(t.y-this.containerWidth/2),y:-(t.x-this.containerHeight/2)},o=this.containerWidth/(2*n),a=this.containerHeight/(2*n);return{point2d:i,zoom:Math.min(o,a)/2}}},{key:"getBoxTopPolygon2DCoordinate",value:function(e){var t=this,n=e.width,i=e.height,o=this.getPolygonTopPoints(e).map((function(e){return new Qa.M(e.x,e.y,e.z)})).map((function(n){return n.applyMatrix4(t.getModelTransformationMatrix(e))})).map((function(e){return{x:e.y,y:e.x}})).map((function(e){return{x:-(e.x-t.containerWidth/2),y:-(e.y-t.containerHeight/2)}})),a=this.containerWidth/n,r=this.containerHeight/i;return{polygon2d:o,zoom:Math.min(a,r)/2}}},{key:"getNewBoxBySideUpdate",value:function(e,t,n,i){var o=(new Qa.t).makeRotationZ(i.rotation),a=new Qa.M(-e.x,0,0).applyMatrix4(o),r=i;return r.center={x:r.center.x+a.x,y:r.center.y+a.y,z:r.center.z-e.z},{newBoxParams:r=Ac(Lc({},r),{width:Math.abs(r.width+t),height:r.height,depth:Math.abs(r.depth+n)})}}},{key:"getNewBoxByBackUpdate",value:function(e,t,n,i){var o=(new Qa.t).makeRotationZ(i.rotation),a=new Qa.M(0,-e.x,0).applyMatrix4(o),r=i;return r.center={x:r.center.x+a.x,y:r.center.y+a.y,z:r.center.z-e.z},{newBoxParams:r=Ac(Lc({},r),{width:r.width,height:Math.abs(r.height+t),depth:Math.abs(r.depth+n)})}}},{key:"getNewBoxBySideUpdateByPoints",value:function(e,t,n,i){var o,a=null==(o=this.sideMatrix)?void 0:o.invert();if(this.sideMatrix&&a){this.camera.zoom=1,this.camera.updateProjectionMatrix();var r=e.map((function(e){return new Qa.M(e.x,e.y,e.z)})).map((function(e){return e.applyMatrix4(a)})),l=Object(s.a)(r,4),c=l[0],u=l[1],d=l[2],h=l[3],g=Math.max(Math.abs(c.x-d.x),Math.abs(c.x-u.x)),f=u.add(h).applyMatrix3((new Qa.s).set(.5,0,0,0,.5,0,0,0,.5)).clone().applyMatrix3((new Qa.s).set(-1,0,0,0,-1,0,0,0,-1)).add(new Qa.M(i.center.x,i.center.y,i.center.z));return{newBoxParams:Ac(Lc({},i),{center:{x:i.center.x-f.x,y:i.center.y-f.y,z:i.center.z-n},width:g,height:i.height,depth:i.depth+t,rotation:i.rotation})}}console.error("No sideMatrix")}},{key:"filterZAxisPoints",value:function(e){var t=this,n=e||this.scene.children.find((function(e){return e.uuid===t.pointsUuid}));if(n){for(var i=n.geometry.attributes.position,o=[],a=i.count,r=0;r<a;r++){var l=i.getZ(r);o.push(l>this.zAxisLimit?0:1)}n.geometry.setAttribute("visibility",new Qa.l(o,1)),n.geometry.attributes.visibility.needsUpdate=!0}}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),n}(Po),Dc=Object.defineProperty,Mc=Object.defineProperties,Nc=Object.getOwnPropertyDescriptors,Rc=Object.getOwnPropertySymbols,Bc=Object.prototype.hasOwnProperty,jc=Object.prototype.propertyIsEnumerable,_c=function(e,t,n){return t in e?Dc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Hc=function(e,t){for(var n in t||(t={}))Bc.call(t,n)&&_c(e,n,t[n]);if(Rc){var i,o=Object(b.a)(Rc(t));try{for(o.s();!(i=o.n()).done;){n=i.value;jc.call(t,n)&&_c(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},Vc=function(e,t){return Mc(e,Nc(t))},Fc=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n?(n.fillStyle="black",n.fillRect(0,0,e.width,e.height),t.toDataURL()):""},Zc=function(){function e(t){var n=this,i=t.size,o=t.container,a=t.pcdPath,r=t.extraProps,l=t.config,c=t.checkMode,s=t.toolName,d=t.proxyMode;Object(u.a)(this,e),this.updateLineList=function(e){var t=(null!=e?e:[]).map((function(e){var t,i=null==(t=e.pointList)?void 0:t.map((function(e){return Hc({i:e},Ci.PointCloudUtils.transferWorld2Canvas(e,n.toolInstance.size))}));return Vc(Hc({},e),{pointList:i})}));n.toolScheduler.updateDataByToolName(D.Line,t)},this.updatePolygonList=function(e,t){var i=e.map((function(e){var t,i=n.pointCloudInstance.getBoxTopPolygon2DCoordinate(e).polygon2d;return{id:e.id,sourceID:"",pointList:i,isRect:!0,valid:null==(t=e.valid)||t,attribute:e.attribute,trackID:null==e?void 0:e.trackID}}));t&&(i=i.concat(t.map((function(e){var t;return Vc(Hc({},e),{pointList:null==(t=null==e?void 0:e.pointList)?void 0:t.map((function(e){return Ci.PointCloudUtils.transferWorld2Canvas(e,n.toolInstance.size)}))})})))),n.toolScheduler.updateDataByToolName(D.PointCloudPolygon,i)},this.updatePointList=function(e){var t=null==e?void 0:e.map((function(e){var t,i=n.pointCloudInstance.getSphereTopPoint2DCoordinate(e).point2d;return Vc(Hc({},i),{id:e.id,sourceID:"",valid:null==(t=e.valid)||t,attribute:e.attribute,textAttribute:""})}));n.toolScheduler.updateDataByToolName(D.Point,t)};var h=Ci.PointCloudUtils.getDefaultOrthographicParams(i),g=Fc(i),f=new Image;f.src=g;var v=new Nl({container:o,size:i,toolName:s,proxyMode:d}),p=new jl({container:o}),b=new Ec({container:o,noAppend:!0,isOrthographicCamera:!0,orthographicParams:h});a&&b.loadPCDFile(a),p.createCanvas(b.renderer.domElement);var m={size:i,config:JSON.stringify(Vc(Hc({},l),{attributeConfigurable:!0,hideAttribute:!0})),imgNode:f,checkMode:c};r&&Object.assign(m,r);var y=[];(y=Ml.isSingleTool(s)?[s]:s).forEach((function(e,t){var i;if(e===D.PointCloudPolygon){var o=v.createOperation(e,f,m);o.eventBinding(),o.setPattern(me.Rect),n.toolInstance=o,n.toolInstance.eventBinding(),n.pointCloud2dOperation=o}else i=v.createOperation(e,f,Vc(Hc({},m),{textConfigurable:!1}));t===y.length-1&&(n.toolInstance||(n.toolInstance=i,n.toolInstance.eventBinding()))})),this.pointCloudInstance=b,this.canvasScheduler=p,this.toolScheduler=v,this.config=l}return Object(d.a)(e,[{key:"updateConfig",value:function(e){this.config=e,this.pointCloud2dOperation.setConfig(JSON.stringify(e))}},{key:"updateAttributeList",value:function(e){this.config=Vc(Hc({},this.config),{attributeList:e}),this.toolScheduler.syncAllAttributeListInConfig(e)}},{key:"initSize",value:function(e){var t=this;this.pointCloudInstance.updateTopCamera(),this.pointCloudInstance.setDefaultControls(),this.toolScheduler.setSize(e),this.pointCloudInstance.initRenderer(),this.pointCloudInstance.initOrthographicCamera(Ci.PointCloudUtils.getDefaultOrthographicParams(e)),this.pointCloudInstance.render();var n=Fc(e),i=new Image;i.src=n,i.onload=function(){t.toolInstance.setImgNode(i),t.toolInstance.initImgPos()}}},{key:"addPolygonListOnTopView",value:function(e){var t=Ci.PointCloudUtils.getBoxParamsFromResultList(e),n=Ci.PointCloudUtils.getPolygonListFromResultList(e);this.updatePolygonList(t,n)}},{key:"addLineListOnTopView",value:function(e){var t=Ci.PointCloudUtils.getLineListFromResultList(e);this.updateLineList(t)}},{key:"addPointListOnTopView",value:function(e){var t=Ci.PointCloudUtils.getSphereParamsFromResultList(e);this.updatePointList(t)}},{key:"updateData",value:function(e,t,n){this.toolInstance&&this.pointCloudInstance&&(this.pointCloudInstance.loadPCDFile(e,null==n?void 0:n.radius),this.addPolygonListOnTopView(t),this.addLineListOnTopView(t),this.addPointListOnTopView(t))}},{key:"switchToCanvas",value:function(e){var t=this.toolScheduler.switchToCanvas(e);return t?(this.toolInstance.eventUnbinding(),t.eventBinding(),this.toolInstance=t,t):this.toolInstance}},{key:"initAllPosition",value:function(){this.pointCloudInstance.updateTopCamera(),this.pointCloud2dOperation.initPosition()}},{key:"clearAllData",value:function(){this.pointCloudInstance.clearPointCloudAndRender(),this.pointCloud2dOperation.clearResult()}}]),e}(),zc=xl,Uc=xl},,,,function(e,t,n){"use strict";var i=n(81).default,o=n(62).default,a=n(28).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),l=n(0),c=n(32),s=n(30),u=n(49);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(l),g=h.default.createContext({pointCloudBoxList:[],pointCloudSphereList:[],displayPointCloudList:[],displaySphereList:[],displayLineList:[],polygonList:[],lineList:[],selectedID:"",selectedIDs:[],valid:!0,setSelectedIDs:function(){},setPointCloudResult:function(){},setPointCloudSphereList:function(){},setPointCloudValid:function(){},setTopViewInstance:function(){},setSideViewInstance:function(){},setBackViewInstance:function(){},setMainViewInstance:function(){},addSelectedID:function(){},selectedAllBoxes:function(){},addPointCloudBox:function(){return[]},addPointCloudSphere:function(){return[]},setPolygonList:function(){},setLineList:function(){},zoom:1,setZoom:function(){},history:new c.ActionsHistory,hideAttributes:[],setHideAttributes:function(){},toggleAttributesVisible:function(){},reRender:function(){},setAttrPanelLayout:function(){},attrPanelLayout:"",syncAllViewPointCloudColor:function(){return Promise.resolve()},defaultAttribute:"",setDefaultAttribute:function(){},pointCloudPattern:c.EToolName.Rect,setPointCloudPattern:function(){},selectSpecAttr:function(){},globalPattern:r.EPointCloudPattern.Detection,setGlobalPattern:function(){},setPtSegmentInstance:function(){},segmentation:[],setSegmentation:function(){},clearAllDetectionInstance:function(){},highlight2DDataList:[],setHighlight2DDataList:function(){}});t.PointCloudContext=g,t.PointCloudProvider=function(e){var t=e.children,n=l.useState([]),d=a(n,2),f=d[0],v=d[1],p=l.useState([]),b=a(p,2),m=b[0],y=b[1],C=l.useState([]),I=a(C,2),x=I[0],w=I[1],k=l.useState([]),S=a(k,2),P=S[0],L=S[1],A=l.useState([]),O=a(A,2),T=O[0],E=O[1],D=l.useState(!0),M=a(D,2),N=M[0],R=M[1],B=l.useState(1),j=a(B,2),_=j[0],H=j[1],V=l.useState(),F=a(V,2),Z=F[0],z=F[1],U=l.useState(),G=a(U,2),W=G[0],K=G[1],Y=l.useState(),X=a(Y,2),J=X[0],Q=X[1],q=l.useState(),$=a(q,2),ee=$[0],te=$[1],ne=l.useState(""),ie=a(ne,2),oe=ie[0],ae=ie[1],re=l.useState(c.EToolName.Rect),le=a(re,2),ce=le[0],se=le[1],ue=l.useRef(new c.ActionsHistory).current,de=l.useState([]),he=a(de,2),ge=he[0],fe=he[1],ve=l.useState(""),pe=a(ve,2),be=pe[0],me=pe[1],ye=l.useState(r.EPointCloudPattern.Detection),Ce=a(ye,2),Ie=Ce[0],xe=Ce[1],we=l.useState(void 0),ke=a(we,2),Se=ke[0],Pe=ke[1],Le=l.useState([]),Ae=a(Le,2),Oe=Ae[0],Te=Ae[1],Ee=l.useState([]),De=a(Ee,2),Me=De[0],Ne=De[1],Re=s.useDispatch(),Be=l.useMemo((function(){return 1===T.length?T[0]:""}),[T]),je=l.useMemo((function(){var e=f.find((function(e){return e.id===Be})),t=function(e){void 0===e&&E([]),"string"===typeof e&&E([e]),Array.isArray(e)&&E(Array.from(new Set(e)))},n=f.filter((function(e){return!ge.includes(e.attribute)})),a=m.filter((function(e){return!ge.includes(e.attribute)})),l=P.filter((function(e){return e.attribute&&!ge.includes(e.attribute)})),s=function(e,t){return n=void 0,o=null,a=i().mark((function n(){var o,a,r,l;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(ee){n.next=2;break}return n.abrupt("return");case 2:if(a=ee.pointCloudObject){n.next=5;break}return n.abrupt("return");case 5:return n.prev=5,n.next=8,ee.getHighlightIndexByMappingImgList({mappingImgList:null!=t?t:Me,points:a.geometry.attributes.position.array});case 8:return r=n.sent,n.next=11,null==ee?void 0:ee.highlightOriginPointCloud(e,r);case 11:return(l=n.sent)&&(null==(o=null==Z?void 0:Z.pointCloudInstance)||o.updateColor(l)),n.abrupt("return",l);case 16:n.prev=16,n.t0=n.catch(5),console.error(n.t0);case 19:case"end":return n.stop()}}),n,null,[[5,16]])})),new Promise((function(e,t){var i=function(e){try{l(a.next(e))}catch(n){t(n)}},r=function(e){try{l(a.throw(e))}catch(n){t(n)}},l=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(i,r)};l((a=a.apply(n,o)).next())}));var n,o,a};return{selectedID:Be,pointCloudBoxList:f,pointCloudSphereList:m,displayPointCloudList:n,displaySphereList:a,displayLineList:l,selectedIDs:T,setPointCloudResult:v,setSelectedIDs:t,addPointCloudBox:function(e){var t=f.concat(e);return v(t),t},addPointCloudSphere:function(e){var t=m.concat(e);return y(t),t},setPointCloudSphereList:y,valid:N,selectedPointCloudBox:e,setPointCloudValid:function(e){R(!1!==e)},addSelectedID:function(e){T.includes(e)?t(T.filter((function(t){return t!==e}))):t([].concat(o(T),[e]))},selectedAllBoxes:function(){if(ce===c.EToolName.Rect){var e=f.map((function(e){return e.id}));t(e),null==Z||Z.pointCloud2dOperation.setSelectedIDs(e)}},topViewInstance:Z,setTopViewInstance:z,sideViewInstance:W,setSideViewInstance:K,backViewInstance:J,setBackViewInstance:Q,mainViewInstance:ee,setMainViewInstance:te,polygonList:x,setPolygonList:w,lineList:P,setLineList:L,zoom:_,setZoom:H,history:ue,toggleAttributesVisible:function(e){if(ge.includes(e))fe(ge.filter((function(t){return t!==e})));else{var t=ge.concat(e);fe(t)}},hideAttributes:ge,setHideAttributes:fe,reRender:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Oe;null==ee||ee.clearAllBox(),null==ee||ee.clearAllSphere(),null==Z||Z.updatePolygonList(t,i),null==Z||Z.updatePointList(o),null==Z||Z.updateLineList(r),null==ee||ee.generateBoxes(t),null==ee||ee.generateSpheres(o),null==(e=null==Se?void 0:Se.store)||e.updateCurrentSegment(c),s(t)},attrPanelLayout:be,setAttrPanelLayout:me,syncAllViewPointCloudColor:s,defaultAttribute:oe,setDefaultAttribute:ae,pointCloudPattern:ce,setPointCloudPattern:se,selectSpecAttr:function(e){t(f.filter((function(t){return t.attribute===e})).map((function(e){return e.id})))},globalPattern:Ie,setGlobalPattern:function(e){Ie!==e&&(Re(u.ChangeSave),xe(e),e===r.EPointCloudPattern.Detection&&Pe(void 0))},ptSegmentInstance:Se,setPtSegmentInstance:Pe,segmentation:Oe,setSegmentation:Te,clearAllDetectionInstance:function(){z(void 0),K(void 0),Q(void 0),te(void 0)},highlight2DDataList:Me,setHighlight2DDataList:Ne}}),[N,T,f,m,x,P,Z,W,J,ee,_,ge,be,oe,ce,Ie,Se,Oe,Me]);return l.useEffect((function(){var e,t,n,i;!function(){var e=f.filter((function(e){return ge.includes(e.attribute)})),t=je.setSelectedIDs,n=je.reRender,i=e.map((function(e){return e.id}));i.length>0&&t(T.filter((function(e){return!i.includes(e)}))),n()}(),null==(t=null==(e=null==Z?void 0:Z.toolInstance)?void 0:e.setHiddenAttributes)||t.call(e,ge),null==(i=null==(n=null==Se?void 0:Se.store)?void 0:n.setHiddenAttributes)||i.call(n,ge)}),[ge]),h.default.createElement(g.Provider,{value:je},t)}},,,,,function(e,t,n){"use strict";var i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.EStepType=void 0,(i=t.EStepType||(t.EStepType={}))[i.Check=0]="Check",i[i.ANNOTATION=1]="ANNOTATION",i[i.QUALITY_INSPECTION=2]="QUALITY_INSPECTION",i[i.PRE_ANNOTATION=3]="PRE_ANNOTATION",i[i.MANUAL_CORRECTION=4]="MANUAL_CORRECTION",t.ESubmitType=void 0,(o=t.ESubmitType||(t.ESubmitType={}))[o.Backward=1]="Backward",o[o.Forward=2]="Forward",o[o.Jump=3]="Jump",o[o.Quit=4]="Quit",o[o.Export=5]="Export",o[o.StepChanged=6]="StepChanged",o[o.Save=7]="Save",o[o.BatchUpdateTrackID=8]="BatchUpdateTrackID",o[o.BatchUpdateImgList=9]="BatchUpdateImgList",o[o.SyncImgList=10001]="SyncImgList",o[o.SyncCurrentPageData=10002]="SyncCurrentPageData";var a="".concat("bee","-component");t.componentCls=a,t.prefix="bee"},function(e,t,n){"use strict";function i(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(44));t.classnames=function(e){if(Array.isArray(e))return e.filter((function(e){return e})).join(" ");if(o.default.isObject(e)){var t=[];return Object.keys(e).forEach((function(n){e[n]&&t.push(n)})),t.join(" ")}return""},t.jsonParser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return"string"===typeof e?JSON.parse(e):o.default.isObject(e)?e:t}catch(n){return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(41);t.getClassName=function(e,t,n){return"".concat(i.prefix,"-").concat(e).concat(t?"__"+t:"").concat(n?"__"+n:"")},t.getTargetElement=function(e,t){return e?"function"===typeof e?e():"current"in e?e.current:e:t}},,,,,,function(e,t,n){"use strict";var i=n(81).default,o=n(62).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(73),r=n(82),l=n(41),c=n(210),s=n(425),u=n(42),d=n(211),h=function(e,t,n){return new Promise((function(i,o){var a=function(e){try{l(n.next(e))}catch(t){o(t)}},r=function(e){try{l(n.throw(e))}catch(t){o(t)}},l=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(a,r)};l((n=n.apply(e,t)).next())}))},g=function(e,t){return t.map((function(t){return e(t)}))},f=function(e){return e===c.EPageTurningOperation.Forward?l.ESubmitType.Forward:e===c.EPageTurningOperation.Backward?l.ESubmitType.Backward:e===c.EPageTurningOperation.Jump?l.ESubmitType.Jump:l.ESubmitType.Forward},v=function(e,t){var n,i,o=e.imgList,a=e.imgIndex,l=r.getStepConfig(e.stepList,e.step).dataSourceStep;return(null==(i=null==(n=u.jsonParser(o[a-1].result)["step_".concat(l)])?void 0:n.result)?void 0:i.length)-1||t};function p(e){var t=e.stepList;return{type:a.ANNOTATION_ACTIONS.SET_TASK_STEP_LIST,payload:{stepList:t}}}function b(e){var t=e.stepList,n=e.step;return{type:a.ANNOTATION_ACTIONS.SET_TASK_CONFIG,payload:{stepList:t,step:n}}}function m(e){return{type:a.ANNOTATION_ACTIONS.UPDATE_ON_SUBMIT,payload:{onSubmit:e}}}function y(e){return{type:a.ANNOTATION_ACTIONS.UPDATE_ON_SAVE,payload:{onSave:e}}}function C(e){return{type:a.ANNOTATION_ACTIONS.UPDATE_ON_PAGE_CHANGE,payload:{onPageChange:e}}}function I(e){return{type:a.ANNOTATION_ACTIONS.UPDATE_ON_STEP_CHANGE,payload:{onStepChange:e}}}function x(e){return{type:a.ANNOTATION_ACTIONS.UPDATE_GET_FILE_DATA,payload:{getFileData:e}}}function w(e){return{type:a.ANNOTATION_ACTIONS.UPDATE_PAGE_SIZE,payload:{pageSize:e}}}function k(e){return{type:a.ANNOTATION_ACTIONS.UPDATE_LOAD_FILE_LIST,payload:{loadFileList:e}}}function S(e){return{type:a.ANNOTATION_ACTIONS.SKIP_BEFORE_PAGE_TURNING,payload:{skipBeforePageTurning:e}}}function P(e){return{type:a.ANNOTATION_ACTIONS.UPDATE_BEFORE_ROTATE,payload:{beforeRotate:e}}}function L(e){return{type:a.ANNOTATION_ACTIONS.UPDATE_PRE_DATA_PROCESS,payload:{preDataProcess:e}}}var A=function(e){return{type:a.ANNOTATION_ACTIONS.SET_CHECK_MODE,payload:{checkMode:e}}},O=function(e){return{type:a.ANNOTATION_ACTIONS.SET_HIGHLIGHT_ATTRIBUTE,payload:{attribute:e}}};var T=function(e,t){return function(n,i){var o,c,s=i().annotation;null==(o=null==s?void 0:s.onStepChange)||o.call(s,e);var u=null!=(c=null==s?void 0:s.imgIndex)?c:0;return[n({type:a.ANNOTATION_ACTIONS.SUBMIT_RESULT}),n({type:a.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA,payload:{submitType:l.ESubmitType.StepChanged}}),n({type:a.ANNOTATION_ACTIONS.SET_STEP,payload:{toStep:e}}),n({type:a.ANNOTATION_ACTIONS.CALC_STEP_PROGRESS}),n(r.LoadFileAndFileData(null!=t?t:u,0))]}},E=function(e){return function(t){return[t({type:a.ANNOTATION_ACTIONS.SUBMIT_RESULT}),t({type:a.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA,payload:{submitType:e}})]}},D=function(e,t,n,i){return[e(E(n)),e(r.LoadFileAndFileData(t,i))]},M=function(e,t){return[e({type:a.ANNOTATION_ACTIONS.SUBMIT_RESULT}),e({type:a.ANNOTATION_ACTIONS.SET_BASIC_INDEX,payload:{basicIndex:t}})]},N=function(e,t){e({type:a.ANNOTATION_ACTIONS.SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED,payload:{triggerEventAfterIndexChanged:t}})},R=function(e,t,n,r){return h(void 0,null,i().mark((function l(){var c,s,u,d,h,g,f,v;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=t().annotation,u=s.loadFileList,d=s.imgList,h=s.pageSize,g=Math.floor(n/h),j(e,!0),i.prev=3,i.next=6,u(g,h);case 6:if(f=i.sent,j(e,!1),(null==(c=null==f?void 0:f.fileList)?void 0:c.length)&&(null==f?void 0:f.total)){i.next=10;break}throw new Error("fileList and total are required");case 10:return(v=r?new Array(f.total):o(d)).splice.apply(v,[g*h,h].concat(o(f.fileList))),e({type:a.ANNOTATION_ACTIONS.UPDATE_IMG_LIST,payload:{imgList:v}}),i.abrupt("return",!0);case 16:i.prev=16,i.t0=i.catch(3),j(e,!1),console.error(i.t0);case 20:case"end":return i.stop()}}),l,null,[[3,16]])})))},B=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0;return h(void 0,null,i().mark((function r(){var c,u,d,h,g,p,b,m,y;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(u=t().annotation,d=s.getNextPageInfo(n,u,a),h=d.fileIndexChanged,g=d.fileIndex,p=d.basicIndexChanged,b=d.basicIndex,m=f(n),N(e,o),!h){i.next=16;break}if(!u.loading){i.next=7;break}return i.abrupt("return");case 7:if(u.imgList[g]){i.next=13;break}return i.next=10,R(e,t,g);case 10:if(i.sent){i.next=13;break}return i.abrupt("return");case 13:return null==(c=u.onPageChange)||c.call(u,g),y=m===l.ESubmitType.Backward?v(t().annotation,b):b,i.abrupt("return",D(e,g,m,y));case 16:if(!p){i.next=18;break}return i.abrupt("return",M(e,b));case 18:return i.abrupt("return",e(E(m)));case 19:case"end":return i.stop()}}),r)})))},j=function(e,t){e({type:a.ANNOTATION_ACTIONS.SET_LOADING,payload:{loading:t}})};t.BatchUpdateImgListResultByPredictResult=function(){return{type:a.ANNOTATION_ACTIONS.BATCH_UPDATE_IMG_LIST_RESULT_BY_PREDICT_RESULT,payload:{}}},t.BatchUpdateResultByTrackID=function(e,t,n){return{type:a.ANNOTATION_ACTIONS.BATCH_UPDATE_RESULT_BY_TRACK_ID,payload:{id:e,newData:t,rangeIndex:n}}},t.BatchUpdateTrackID=function(e){var t=e.id,n=e.newID,i=e.rangeIndex,o=e.imgList;return{type:a.ANNOTATION_ACTIONS.BATCH_UPDATE_TRACK_ID,payload:{id:t,newID:n,rangeIndex:i,imgList:o}}},t.ChangeSave=function(e){e(E(l.ESubmitType.Save)),e({type:a.ANNOTATION_ACTIONS.SAVE_RESULT})},t.CopyBackWordResult=function(){return{type:a.ANNOTATION_ACTIONS.COPY_BACKWARD_RESULT}},t.DispatcherTurning=B,t.GetBoxesByID=function(e,t){return function(n,i){var o=i().annotation,a=o.imgList,r=o.step;return d.getBoxesByTrackID(a,r,e,t)}},t.InitAnnotationState=function(e){e({type:a.ANNOTATION_ACTIONS.INIT_ALL_STATE,payload:{}})},t.InitTaskData=function(e){var t=e.onSubmit,n=e.onSave,i=e.onPageChange,o=e.onStepChange,r=e.getFileData,l=e.pageSize,c=e.loadFileList,s=e.step,u=e.stepList,d=e.skipBeforePageTurning,h=e.beforeRotate,f=e.checkMode,v=e.highlightAttribute,p=e.preDataProcess,T=[];return t&&T.push(m(t)),n&&T.push(y(n)),i&&T.push(C(i)),o&&T.push(I(o)),r&&T.push(x(r)),c&&T.push(k(c)),l&&T.push(w(l)),d&&T.push(S(d)),h&&T.push(P(h)),p&&T.push(L(p)),"boolean"===typeof f&&T.push(A(f)),T.push(O(v)),T.push(b({stepList:u,step:s})),T.push({type:a.ANNOTATION_ACTIONS.CALC_STEP_PROGRESS}),T.push({type:a.ANNOTATION_ACTIONS.INIT_TOOL}),function(e){return g(e,T)}},t.PageBackward=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return B(t,n,c.EPageTurningOperation.Backward,e)}},t.PageForward=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return B(t,n,c.EPageTurningOperation.Forward,e)}},t.PageJump=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,i){if(e!==i().imgIndex)return B(n,i,c.EPageTurningOperation.Jump,t,e)}},t.PreDataProcess=function(e){return function(t,n){var i,o,a=n().annotation;return null!=(o=null==(i=null==a?void 0:a.preDataProcess)?void 0:i.call(a,e))?o:e.dataList}},t.SetAnnotationLoading=j,t.SetLoadPCDFileLoading=function(e,t){e({type:a.ANNOTATION_ACTIONS.SET_LOADPCDFILE_LOADING,payload:{loadPCDFileLoading:t}})},t.SetPointCloudLoading=function(e,t){e({type:a.ANNOTATION_ACTIONS.SET_LOADING,payload:{loading:t}})},t.SetPredictResult=function(e,t){e({type:a.ANNOTATION_ACTIONS.SET_PREDICT_RESULT,payload:{result:t}})},t.SetPredictResultVisible=function(e,t){e({type:a.ANNOTATION_ACTIONS.SET_PREDICT_RESULT_VISIBLE,payload:{visible:t}})},t.SetTaskConfig=b,t.SetTaskStepList=p,t.ToNextStep=function(e){return function(t,n){var i=n().annotation,o=function(e,t){var n,i=null==t?void 0:t.findIndex((function(t){return(null==t?void 0:t.step)===e}));return null==(n=t[i+1])?void 0:n.step}(i.step,i.stepList);return[t(T(o,e))]}},t.ToSubmitFileData=E,t.UpdateBeforeRotate=P,t.UpdateCheckMode=A,t.UpdateGetFileData=x,t.UpdateGetFileList=k,t.UpdateHighlightAttribute=O,t.UpdateInjectFunc=function(e){var t=e.onSubmit,n=e.onSave,i=e.onPageChange,o=e.onStepChange,a=e.getFileData,r=e.pageSize,l=e.loadFileList,c=e.stepList,s=e.beforeRotate,u=e.highlightAttribute,d=e.preDataProcess,h=[];return t&&h.push(m(t)),n&&h.push(y(n)),i&&h.push(C(i)),o&&h.push(I(o)),a&&h.push(x(a)),l&&h.push(k(l)),r&&h.push(w(r)),s&&h.push(P(s)),d&&h.push(L(d)),h.push(O(u)),h.push(p({stepList:c})),function(e){return g(e,h)}},t.UpdateOnPageChange=C,t.UpdateOnSave=y,t.UpdateOnStepChange=I,t.UpdateOnSubmit=m,t.UpdatePageSize=w,t.UpdatePreDataProcess=L,t.UpdateProcessingStep=T,t.UpdateRotate=function(){return{type:a.ANNOTATION_ACTIONS.UPDATE_ROTATE}},t.UpdateSkipBeforePageTurning=S,t.UpdateToolInstance=function(e){return{type:a.ANNOTATION_ACTIONS.UPDATE_TOOL_INSTANCE,payload:{toolInstance:e}}},t.loadImgList=R},,,,,,function(e,t,n){"use strict";var i=n(83).default,o=n(84).default,a=n(41),r=n(108),l=function(){function e(){i(this,e)}return o(e,null,[{key:"getCurrentStepInfo",value:function(e,t){var n=this.getStepInfo(e,t);return[a.EStepType.QUALITY_INSPECTION,a.EStepType.MANUAL_CORRECTION].includes(null==n?void 0:n.type)?this.getStepInfo(n.dataSourceStep,t):n}},{key:"getStepInfo",value:function(e,t){return null==t?void 0:t.filter((function(t){return t.step===e}))[0]}},{key:"currentToolIsVideo",value:function(t,n){var i=e.getCurrentStepInfo(t,n);return r.isVideoTool(null==i?void 0:i.tool)}},{key:"currentToolIsPointCloud",value:function(t,n){var i=e.getCurrentStepInfo(t,n);return r.isPointCloudTool(null==i?void 0:i.tool)}}]),e}();e.exports=l},,,,,,,,function(e,t,n){"use strict";var i=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(44),r=n(36),l=n(32),c=n(85),s=n(145);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var d=u(a),h=Object.defineProperty,g=Object.defineProperties,f=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,m=function(e,t,n){return t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},y=l.cAnnotation.ESortDirection;t.useSingleBox=function(){var e=o.useContext(r.PointCloudContext),t=e.pointCloudBoxList,n=e.setPointCloudResult,a=e.topViewInstance,u=e.backViewInstance,h=e.sideViewInstance,C=e.selectedIDs,I=e.selectedID,x=e.mainViewInstance,w=e.setSelectedIDs,k=e.syncAllViewPointCloudColor,S=e.polygonList,P=e.pointCloudPattern,L=s.usePolygon(),A=L.selectedPolygon,O=L.updateSelectedPolygon,T=L.updatePolygonValidByID,E=L.deletePolygon,D=c.useHistory().pushHistoryWithList,M=o.useMemo((function(){var e=t.findIndex((function(e){return e.id===I}));if(e>-1)return{info:t[e],index:e}}),[I,t]),N=o.useCallback((function(e){if(null==M?void 0:M.info){t.splice(M.index,1,d.default.merge(M.info,e));var i=d.default.cloneDeep(t);return n(i),D({pointCloudBoxList:i}),i}return t}),[I,t]),R=o.useCallback((function(e,i){var o=t.findIndex((function(e){return e.id===i}));if(o>-1){t.splice(o,1,d.default.merge(t[o],e));var a=d.default.cloneDeep(t);return n(a),a}return t}),[t]),B=o.useCallback((function(e){null==a||a.pointCloud2dOperation.setPolygonValidAndRender(e,!0),null==h||h.pointCloud2dOperation.setPolygonValidAndRender(e,!0),null==u||u.pointCloud2dOperation.setPolygonValidAndRender(e,!0)}),[a,h,u]),j=o.useCallback((function(){if(null==M?void 0:M.info){var e=M.info,t=e.id,n=e.valid,o=N({valid:!(void 0===n||n)});k(o),B(t)}var r,l;A&&(O((r=function(e,t){for(var n in t||(t={}))p.call(t,n)&&m(e,n,t[n]);if(v){var o,a=i(v(t));try{for(a.s();!(o=a.n()).done;)n=o.value,b.call(t,n)&&m(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},A),l={valid:!A.valid},g(r,f(l)))),null==a||a.pointCloud2dOperation.setPolygonValidAndRender(A.id,!0))}),[B,M,A]),_=o.useCallback((function(e){var n=t.find((function(t){return t.id===e}));if(n){var i=n.id,o=n.valid,a=R({valid:!(void 0===o||o)},i);return B(i),a}T(e)}),[B,t,S]),H=o.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.ascend,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a&&!(C.length>1))if(P===l.EToolName.Rect||P===l.EToolName.Polygon){var n=a.pointCloud2dOperation,i=n.switchToNextPolygon(e);i&&w(i)}else t&&document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:9,shiftKey:e!==y.ascend}))}),[a,P,null==a?void 0:a.toolInstance]),V=function(e){var i=t.filter((function(t){return t.id!==e}));n(i),null==x||x.removeObjectByName(e,"box"),null==x||x.render(),k(i)},F=o.useMemo((function(){return t.filter((function(e){return C.includes(e.id)}))}),[C,t]),Z=o.useCallback((function(e){var i=d.default.cloneDeep(t),o=!1;if(e.forEach((function(e){var t=i.findIndex((function(t){return t.id===e.id}));if(t>-1){var n=d.default.merge(i[t],e);i.splice(t,1,n),null==x||x.generateBox(n),o=!0}})),o)return n(i),D({pointCloudBoxList:i}),null==x||x.render(),i}),[C,t]),z=o.useCallback((function(e){return t.find((function(t){return t.id===e}))}),[t]);return{selectedBox:M,updateSelectedBox:N,changeSelectedBoxValid:j,changeValidByID:_,selectNextBox:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];H(y.ascend,e)},selectPrevBox:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];H(y.descend,e)},deletePointCloudBox:V,selectedBoxes:F,updateSelectedBoxes:Z,getPointCloudByID:z,deleteSelectedPointCloudBoxAndPolygon:function(){M&&(V(M.info.id),null==a||a.pointCloud2dOperation.deletePolygon(M.info.id)),A&&(E(A.id),null==a||a.pointCloud2dOperation.deletePolygon(A.id))}}}},,function(e,t,n){"use strict";var i=n(28).default,o=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(227),r=n(406),l=n(246),c=n(17),s=n(0),u=n(26),d=n(35),h=n(417),g=n(608),f=n(49),v=n(614),p=n(36),b=n(30),m=n(274),y=n(284),C=n(41);function I(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var x=I(s),w=Object.defineProperty,k=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,O=function(e,t,n){return t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},T=g(),E=x.default.forwardRef((function(e,t){var n,a=s.useState(),r=i(a,2),l=r[0],g=r[1];return s.useImperativeHandle(t,(function(){return{toolInstance:l,annotationEngine:T.getState().annotation.annotationEngine,pageBackwardActions:function(){return T.dispatch(f.PageBackward())},pageForwardActions:function(){return T.dispatch(f.PageForward())},pageJump:function(e){var t=~~e-1;T.dispatch(f.PageJump(t))},hello:function(){return alert("hello labelBee!!!")}}}),[l]),x.default.createElement(d.Provider,{store:T,context:b.LabelBeeContext},x.default.createElement(u.I18nextProvider,{i18n:c.i18n},x.default.createElement(p.PointCloudProvider,null,x.default.createElement(h,(n=function(e,t){for(var n in t||(t={}))L.call(t,n)&&O(e,n,t[n]);if(P){var i,a=o(P(t));try{for(a.s();!(i=a.n()).done;)n=i.value,A.call(t,n)&&O(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},e),k(n,S({setToolInstance:function(t){var n;g(t),null==(n=e.onLoad)||n.call(e,{toolInstance:t})}})))))))}));t.AnnotationView=a,t.PointCloudAnnotationView=r,t.QuestionView=l,Object.defineProperty(t,"i18n",{enumerable:!0,get:function(){return c.i18n}}),t.VideoTagTool=v.VideoTagTool,t.PredictTracking=m,t.LLMToolView=y,Object.defineProperty(t,"EStepType",{enumerable:!0,get:function(){return C.EStepType}}),Object.defineProperty(t,"ESubmitType",{enumerable:!0,get:function(){return C.ESubmitType}}),t.componentCls=C.componentCls,t.prefix=C.prefix,t.default=E,t.store=T},,,,function(e,t,n){"use strict";var i,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.EScribblePattern=void 0,(i=t.EScribblePattern||(t.EScribblePattern={}))[i.Scribble=1]="Scribble",i[i.Erase=2]="Erase",t.EToolName=void 0,(o=t.EToolName||(t.EToolName={})).Rect="rectTool",o.Tag="tagTool",o.Point="pointTool",o.PointMarker="pointMarkerTool",o.Segmentation="segmentationTool",o.Filter="filterTool",o.Text="textTool",o.Polygon="polygonTool",o.Line="lineTool",o.LineMarker="lineMarkerTool",o.Empty="emptyTool",o.FolderTag="folderTagTool",o.RectTrack="rectTrackTool",o.ScribbleTool="scribbleTool",o.Face="faceTool",o.ClientAttribute="clientAttributeTool",o.OCRRelation="OCRRelationTool",o.SegmentByRect="segmentByRectTool",o.Cuboid="cuboidTool",o.PointCloudPolygon="pointCloudPolygon",o.LLM="LLMTool",t.ETextType=void 0,(a=t.ETextType||(t.ETextType={}))[a.AnyString=0]="AnyString",a[a.Order=1]="Order",a[a.EnglishOnly=2]="EnglishOnly",a[a.NumberOnly=3]="NumberOnly",a[a.CustomFormat=4]="CustomFormat";t.TEXT_ATTRIBUTE_MAX_LENGTH=1e3},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(495),o=n(496),a=n(497),r=n(498),l=n(499),c=n(500),s=n(501),u=n(502),d=n(262),h=n(263),g=n(111),f=n(110),v=n(264),p=n(503),b=n(504),m=n(505),y=n(506),C=n(507),I=n(508),x=n(509),w={name:"Undo",icon:i,shortCut:["Ctrl","Z"]},k={name:"Redo",icon:o,shortCut:["Ctrl","Shift","Z"]},S={name:"Scale",icon:a,shortCut:[r]},P={name:"Fullscreen",icon:l,shortCut:["F11"]},L={name:"Rotate",icon:c,shortCut:["R"],noticeInfo:"ToOriginalStep"},A={name:"ToggleEffectiveness",icon:s,shortCut:["Y"]},O={name:"PreviousImage",icon:u,shortCut:["A"]},T={name:"NextImage",icon:d,shortCut:["D"]},E={name:"Drag",icon:h,shortCut:[g],noticeInfo:"Press"},D={name:"Drag",icon:h,shortCut:["Space",f]},M={name:"ToggleSelected",icon:v,shortCut:["Tab"]},N={name:"ToggleSelectedReverse",icon:p,shortCut:["Shift","Tab"]},R={name:"HideGraphics",icon:y,noticeInfo:"",shortCut:["Z"]},B={name:"ToggleLineParticularity",icon:m,noticeInfo:"ToSide",shortCut:["Shift",f]},j={name:"Save",icon:b,shortCut:["Ctrl","S"]},_={name:"Speed",icon:n(510),shortCut:["&#8593;","&#8595;"],shortCutUseHtml:!0},H={name:"PlayPause",icon:C,shortCut:["Space"]},V={name:"FastForward",icon:I,shortCut:["&#8594;"],shortCutUseHtml:!0},F={name:"Rewind",icon:x,shortCut:["&#8592;"],shortCutUseHtml:!0};t.backward=O,t.changeSpecialLine=B,t.dargWithLeftClick=D,t.dargWithRightClick=E,t.forward=T,t.forwardForward=V,t.fullScreen=P,t.hidden=R,t.playPause=H,t.restore=k,t.revoke=w,t.rewind=F,t.rotate=L,t.saveResult=j,t.scale=S,t.setValid=A,t.speed=_,t.tabChangeSelected=M,t.tabReverseChangeSelected=N},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ANNOTATION_ACTIONS={INIT_ALL_STATE:"@@INIT_ALL_STATE",UPDATE_TOOL_INSTANCE:"@@UPDATE_TOOL_INSTANCE",UPDATE_IMG_LIST:"@@UPDATE_IMG_LIST",UPDATE_ANNOTATION_CONFIG:"@@UPDATE_ANNOTATION_CONFIG",LOAD_FILE_DATA:"@@LOAD_FILE_DATA",SUBMIT_FILE_DATA:"@@SUBMIT_FILE_DATA",SET_TASK_CONFIG:"@@SET_TASK_CONFIG",INIT_TOOL:"@@INIT_TOOL",SET_TOOL:"@@SET_TOOL",UPDATE_ON_SUBMIT:"@@UPDATE_ON_SUBMIT",UPDATE_ON_SAVE:"@@UPDATE_ON_SAVE",UPDATE_ON_PAGE_CHANGE:"@@UPDATE_ON_PAGE_CHANGE",UPDATE_ON_STEP_CHANGE:"@@UPDATE_ON_STEP_CHANGE",UPDATE_ROTATE:"@@UPDATE_ROTATE",UPDATE_GET_FILE_DATA:"@@UPDATE_GET_FILE_DATA",UPDATE_PAGE_SIZE:"@@UPDATE_PAGE_SIZE",UPDATE_LOAD_FILE_LIST:"@@UPDATE_LOAD_FILE_LIST",GET_FILE_DATA:"@@GET_FILE_DATA",SET_FILE_DATA:"@@SET_FILE_DATA",COPY_BACKWARD_RESULT:"@@COPY_BACKWARD_RESULT",SET_STEP:"@@SET_STEP",SUBMIT_RESULT:"@@SUBMIT_RESULT",SAVE_RESULT:"@@SAVE_RESULT",SET_BASIC_INDEX:"@@SET_BASIC_INDEX",CALC_STEP_PROGRESS:"@@CALC_STEP_PROGRESS",SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED:"@@SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED",SKIP_BEFORE_PAGE_TURNING:"@@SKIP_BEFORE_PAGE_TURNING",UPDATE_BEFORE_ROTATE:"@@UPDATE_BEFORE_ROTATE",SET_LOADING:"@@SET_LOADING",SET_LOADPCDFILE_LOADING:"@@SET_LOADPCDFILE_LOADING",SET_POINT_CLOUD_LOADING:"@@SET_POINT_CLOUD_LOADING",SET_CHECK_MODE:"@@SET_CHECK_MODE",SET_TASK_STEP_LIST:"@@SET_TASK_STEP_LIST",UPDATE_ANNOTATION_VALID:"@@UPDATE_ANNOTATION_VALID",BATCH_UPDATE_TRACK_ID:"@@BATCH_UPDATE_TRACK_ID",BATCH_UPDATE_RESULT_BY_TRACK_ID:"@@BATCH_UPDATE_RESULT_BY_TRACK_ID",BATCH_UPDATE_IMG_LIST_RESULT_BY_PREDICT_RESULT:"@@BATCH_UPDATE_IMG_LIST_RESULT_BY_PREDICT_RESULT",SET_PREDICT_RESULT_VISIBLE:"@@SET_PREDICT_RESULT_VISIBLE",SET_PREDICT_RESULT:"@@SET_PREDICT_RESULT",SET_HIGHLIGHT_ATTRIBUTE:"@@SET_HIGHLIGHT_ATTRIBUTE",UPDATE_PRE_DATA_PROCESS:"@@UPDATE_PRE_DATA_PROCESS"},t.IMAGE_ATTRIBUTE_ACTIONS={UPDATE_IMG_ATTRIBUTE:"@@UPDATE_IMG_ATTRIBUTE",INIT_IMG_ATTRIBUTE:"@@INIT_IMG_ATTRIBUTE"},t.TOOL_STYLE_ACTIONS={INIT_TOOL_STYLE_CONFIG:"@@INIT_TOOL_STYLE_CONFIG",UPDATE_TOOL_STYLE_CONFIG:"@@UPDATE_TOOL_STYLE_CONFIG"}},,,,,,,,,function(e,t,n){"use strict";var i=n(62).default,o=n(28).default,a=n(81).default,r=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var l=n(249),c=n(41),s=n(422),u=n(73),d=n(42),h=n(423),g=n(250),f=n(424),v=n(55),p=n(108),b=n(32),m=n(17),y=n(25),C=n(25),I=n(44),x=n(49),w=n(69);function k(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var S=k(I),P=Object.defineProperty,L=Object.defineProperties,A=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,D=function(e,t,n){return t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},M=function(e,t){for(var n in t||(t={}))T.call(t,n)&&D(e,n,t[n]);if(O){var i,o=r(O(t));try{for(o.s();!(i=o.n()).done;){n=i.value;E.call(t,n)&&D(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},N=function(e,t){return L(e,A(t))},R=function(e,t,n){return new Promise((function(i,o){var a=function(e){try{l(n.next(e))}catch(t){o(t)}},r=function(e){try{l(n.throw(e))}catch(t){o(t)}},l=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(a,r)};l((n=n.apply(e,t)).next())}))},B=function(e,t){return e.find((function(e){return e.step===t}))},j={annotationEngine:null,toolInstance:null,imgList:[],config:"{}",imgIndex:-1,basicIndex:0,imgPageSize:1,step:1,stepList:[],imgNode:new Image,basicResultList:[],resultList:[],stepProgress:0,loading:!1,loadPCDFileLoading:!0,triggerEventAfterIndexChanged:!1,pointCloudLoading:!1,checkMode:!1,predictionResult:[],predictionResultVisible:!1,highlightAttribute:""},_=function(e,t){return e.reduce((function(e,n){if(n){var i=n.result;if(d.jsonParser(i)["step_".concat(t)])return e+1}return e}),0)/e.length},H=function(e,t){var n=e.step,i=e.stepList,o=v.getCurrentStepInfo(n,i),a=g.ConfigUtils.jsonParser(o.config);if(!p.isVideoTool(null==o?void 0:o.tool)&&!p.isPointCloudTool(null==o?void 0:o.tool)&&w.EToolName.LLM!==(null==o?void 0:o.tool)){var r=document.getElementById("toolContainer");if(!r)throw"Not exist dom named id-toolContainer";var c=l.getFormatSize({width:window.innerWidth,height:window.innerHeight}),u=new b.AnnotationEngine({container:r,toolName:o.tool,size:c,imgNode:t,config:a,style:JSON.parse(s)});return{toolInstance:null==u?void 0:u.toolInstance,annotationEngine:u}}},V=function(e){return function(t,n){return R(void 0,null,a().mark((function i(){var o,r,l,c;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=n().annotation,r=o.getFileData,l=o.imgList,!r){i.next=6;break}return i.next=4,r(l[e],e);case 4:c=i.sent,t({type:u.ANNOTATION_ACTIONS.SET_FILE_DATA,payload:{fileData:c,index:e}});case 6:case"end":return i.stop()}}),i)})))}},F=function(e){return function(t){x.SetAnnotationLoading(t,!1),t({type:u.ANNOTATION_ACTIONS.LOAD_FILE_DATA,payload:{nextIndex:e}})}},Z=function(e,t){return function(n,i){var o,a=i().annotation,r=a.toolInstance,l=a.imgList,c=null==(o=null==l?void 0:l[e])?void 0:o.url;b.ImgUtils.load(c).then((function(i){x.SetAnnotationLoading(n,!1),n({type:u.ANNOTATION_ACTIONS.LOAD_FILE_DATA,payload:{imgNode:i,nextIndex:e,nextBasicIndex:t}})})).catch((function(){x.SetAnnotationLoading(n,!1),null==r||r.setErrorImg(),n({type:u.ANNOTATION_ACTIONS.LOAD_FILE_DATA,payload:{nextIndex:e,nextBasicIndex:t}})}))}};t.LoadFileAndFileData=function(e,t){return function(n,i){return R(void 0,null,a().mark((function o(){var r,l,c,s,u,d,h;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=i().annotation,c=l.stepList,s=l.step,u=v.currentToolIsVideo(s,c),d=v.currentToolIsPointCloud(s,c),h=(null==(r=v.getCurrentStepInfo(s,c))?void 0:r.tool)===w.EToolName.LLM,x.SetAnnotationLoading(n,!0),o.next=7,n(V(e));case 7:if(!(u||d||h)){o.next=10;break}return n(F(e)),o.abrupt("return");case 10:n(Z(e,t));case 11:case"end":return o.stop()}}),o)})))}},t.annotationReducer=function(){var e,t,n,a,r,l,s,g,p,I,x,w,k,P,L,A,O,T,E,D,R,V,F,Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M({},j),z=arguments.length>1?arguments[1]:void 0;switch(z.type){case u.ANNOTATION_ACTIONS.INIT_ALL_STATE:return M(M({},Z),j);case u.ANNOTATION_ACTIONS.UPDATE_TOOL_INSTANCE:return N(M({},Z),{toolInstance:z.payload.toolInstance});case u.ANNOTATION_ACTIONS.UPDATE_IMG_LIST:return N(M({},Z),{imgList:z.payload.imgList});case u.ANNOTATION_ACTIONS.CALC_STEP_PROGRESS:var U=Z.imgList,G=Z.step,W=_(U,G);return N(M({},Z),{stepProgress:W});case u.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA:var K=Z.imgList,Y=Z.imgIndex,X=Z.step,J=Z.stepList,Q=Z.toolInstance,q=Z.onSubmit,$=Z.resultList;if(!Q||!K[Y])return Z;var ee=(null==(e=K[Y])?void 0:e.result)||"",te=null!=(t=null==Q?void 0:Q.exportData())?t:[],ne=o(te,3),ie=ne[1],oe=ne[2],ae=null!=(a=null==(n=null==Q?void 0:Q.exportCustomData)?void 0:n.call(Q))?a:{},re=f.composeResultWithBasicImgInfo(ee,ie),le=f.composeResult(re,{step:X,stepList:J},{rect:$},ae),ce=Z.imgList.map((function(e,t){if(t===Y){var n=h.dataCorrection(le,ee,X,J);return M(N(M({},e),{result:n}),oe)}return e}));if((null==(r=z.payload)?void 0:r.submitType)===c.ESubmitType.SyncImgList)return N(M({},Z),{imgList:ce});q&&q([ce[Y]],null==(l=z.payload)?void 0:l.submitType,Y,ce);var se=_(ce,X);return N(M({},Z),{stepProgress:se,imgList:ce});case u.ANNOTATION_ACTIONS.SAVE_RESULT:var ue=Z.imgList,de=Z.imgIndex,he=Z.onSave;return null==he||he(ue[de],de,ue),M({},Z);case u.ANNOTATION_ACTIONS.SUBMIT_RESULT:var ge=Z.imgList,fe=Z.basicIndex,ve=Z.resultList,pe=Z.toolInstance,be=Z.basicResultList;if(!pe)return Z;var me=null!=(s=null==pe?void 0:pe.exportData())?s:[],ye=o(me,1),Ce=ye[0],Ie=Ce;if((null==be?void 0:be.length)>0){var xe,we=null==(g=be[fe])?void 0:g.id,ke=Ce.map((function(e){return N(M({},e),{sourceID:we})}));(xe=Ie=S.default.cloneDeep(ve).filter((function(e){return e.sourceID!==we}))).push.apply(xe,i(ke))}return N(M({},Z),{resultList:Ie,imgList:ge});case u.ANNOTATION_ACTIONS.SET_BASIC_INDEX:var Se=Z.toolInstance,Pe=Z.step,Le=Z.imgList,Ae=Z.imgIndex,Oe=Z.stepList,Te=Z.annotationEngine,Ee=Z.resultList,De=Z.basicResultList;if(!Se||!Te)return Z;var Me=z.payload.basicIndex,Ne=null==(p=De[Me])?void 0:p.id,Re=d.jsonParser(null==(I=Le[Ae])?void 0:I.result),Be=(Ee||[]).filter((function(e){return e.sourceID===Ne})),je=B(Oe,Pe),_e=je.dataSourceStep,He=je.tool,Ve=B(Oe,_e),Fe=[];return _e&&He&&((null==(Fe=null==(x=Re["step_".concat(_e)])?void 0:x.result)?void 0:Fe.length)>0?(null==Te||Te.setBasicInfo(Ve.tool,Fe[Me]),null==Te||Te.launchOperation()):(null==Te||Te.setBasicInfo(Ve.tool),null==Te||Te.forbidOperation(),C.message.info(m.i18n.t("NoDependency")))),null==Se||Se.setResult(Be),null==Se||Se.history.initRecord(Be,!0),N(M({},Z),{basicIndex:Me});case u.ANNOTATION_ACTIONS.SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED:var Ze=z.payload.triggerEventAfterIndexChanged;return N(M({},Z),{triggerEventAfterIndexChanged:!!Ze});case u.ANNOTATION_ACTIONS.LOAD_FILE_DATA:var ze=Z.imgList,Ue=Z.step,Ge=Z.toolInstance,We=Z.annotationEngine,Ke=Z.stepList;if(!Ge)return N(M({},Z),{imgIndex:z.payload.nextIndex});var Ye=v.getCurrentStepInfo(Ue,Ke),Xe=z.payload,Je=Xe.nextIndex,Qe=Xe.imgNode,qe=Xe.nextBasicIndex,$e=Xe.imgError,et=null!=qe?qe:0,tt=d.jsonParser(null==(w=ze[Je])?void 0:w.result),nt=tt["step_".concat(Ye.step)],it=!nt,ot={rotate:null!=(k=tt.rotate)?k:0,valid:null==(P=tt.valid)||P};Qe&&!0!==$e?null==We||We.setImgNode(Qe,ot):null==Ge||Ge.setValid(ot.valid);var at=B(Ke,Ye.step),rt=at.dataSourceStep,lt=at.tool,ct=B(Ke,rt),st=rt&&lt,ut=null!=(A=null==(L=tt["step_".concat(rt)])?void 0:L.result)?A:[],dt=h.getInitialResultList(null==nt?void 0:nt.result,Ge,at,ut,it);if(null==We||We.launchOperation(),st&&((null==ut?void 0:ut.length)>0?null==We||We.setBasicInfo(ct.tool,ut[et]):(null==We||We.setBasicInfo(ct.tool),null==We||We.forbidOperation(),C.message.info(m.i18n.t("NoDependency")))),"check"!==Ye.tool){var ht=null!=(T=null==(O=ut[et])?void 0:O.id)?T:"",gt=st?dt.filter((function(e){return b.CommonToolUtils.isSameSourceID(e.sourceID,ht)})):dt;null==Ge||Ge.history.initRecord(dt,!0),null==Ge||Ge.setResult(gt)}return N(M({},Z),{imgIndex:Je,basicIndex:et,basicResultList:ut,resultList:dt});case u.ANNOTATION_ACTIONS.UPDATE_ANNOTATION_CONFIG:return N(M({},Z),{config:null!=(E=z.payload.config)?E:"{}"});case u.ANNOTATION_ACTIONS.SET_TASK_STEP_LIST:var ft=z.payload.stepList;return N(M({},Z),{stepList:ft});case u.ANNOTATION_ACTIONS.SET_TASK_CONFIG:var vt=z.payload,pt=vt.stepList,bt=vt.step;return N(M({},Z),{stepList:pt,step:bt});case u.ANNOTATION_ACTIONS.INIT_TOOL:var mt=Z.imgNode,yt=H(Z,mt);if(yt){var Ct=yt.toolInstance,It=yt.annotationEngine;return N(M({},Z),{toolInstance:Ct,annotationEngine:It})}return M({},Z);case u.ANNOTATION_ACTIONS.SET_TOOL:var xt=null==(D=z.payload)?void 0:D.instance;return xt?N(M({},Z),{toolInstance:xt}):M({},Z);case u.ANNOTATION_ACTIONS.UPDATE_ON_SUBMIT:return N(M({},Z),{onSubmit:z.payload.onSubmit});case u.ANNOTATION_ACTIONS.UPDATE_ON_SAVE:return N(M({},Z),{onSave:z.payload.onSave});case u.ANNOTATION_ACTIONS.UPDATE_ON_PAGE_CHANGE:return N(M({},Z),{onPageChange:z.payload.onPageChange});case u.ANNOTATION_ACTIONS.SET_PREDICT_RESULT:return N(M({},Z),{predictionResult:z.payload.result});case u.ANNOTATION_ACTIONS.SET_PREDICT_RESULT_VISIBLE:return N(M({},Z),{predictionResultVisible:z.payload.visible});case u.ANNOTATION_ACTIONS.UPDATE_ON_STEP_CHANGE:return N(M({},Z),{onStepChange:z.payload.onStepChange});case u.ANNOTATION_ACTIONS.UPDATE_GET_FILE_DATA:return N(M({},Z),{getFileData:z.payload.getFileData});case u.ANNOTATION_ACTIONS.UPDATE_PAGE_SIZE:return N(M({},Z),{pageSize:z.payload.pageSize});case u.ANNOTATION_ACTIONS.UPDATE_LOAD_FILE_LIST:return N(M({},Z),{loadFileList:z.payload.loadFileList});case u.ANNOTATION_ACTIONS.UPDATE_BEFORE_ROTATE:return N(M({},Z),{beforeRotate:z.payload.beforeRotate});case u.ANNOTATION_ACTIONS.UPDATE_PRE_DATA_PROCESS:return N(M({},Z),{preDataProcess:z.payload.preDataProcess});case u.ANNOTATION_ACTIONS.SKIP_BEFORE_PAGE_TURNING:return N(M({},Z),{skipBeforePageTurning:z.payload.skipBeforePageTurning});case u.ANNOTATION_ACTIONS.SET_FILE_DATA:var wt=z.payload,kt=wt.fileData,St=wt.index,Pt=Z.imgList,Lt=i(Pt);return Lt[St]=M(M({},Lt[St]),kt),N(M({},Z),{imgList:Lt});case u.ANNOTATION_ACTIONS.UPDATE_ROTATE:var At=Z.toolInstance,Ot=Z.beforeRotate;return Ot&&!1===Ot()||(null==At||At.updateRotate()),Z;case u.ANNOTATION_ACTIONS.UPDATE_ANNOTATION_VALID:var Tt=Z.toolInstance,Et=null==(R=null==Tt?void 0:Tt.valid)||R;return y.Modal.destroyAll(),y.Modal.confirm({content:m.i18n.t(Et?"updateValidFromValidToInValid":"updateValidFromInValidToValid"),onOk:function(){null==Tt||Tt.setValid(!Et)},okText:m.i18n.t("Confirm"),cancelText:m.i18n.t("Cancel")}),Z;case u.ANNOTATION_ACTIONS.COPY_BACKWARD_RESULT:var Dt=Z.toolInstance,Mt=Z.imgIndex,Nt=Z.imgList,Rt=Z.step;if(!Dt)return Z;if(0===Mt||Mt>=Nt.length)return console.error("\u65e0\u6cd5\u590d\u5236\u8fb9\u754c\u5916\u7684\u5185\u5bb9"),Z;var Bt=Nt[Mt-1].result;if(!Bt)return Z;var jt=h.copyResultChange(Bt,Rt,null!=(V=Nt[Mt].result)?V:"");Nt[Mt]=N(M({},Nt[Mt]),{result:jt});var _t=d.jsonParser(jt),Ht=_t["step_".concat(Rt)],Vt=(null==Ht?void 0:Ht.result)||[];return null==Dt||Dt.setResult(Vt),null==Dt||Dt.history.pushHistory(Vt),null==(F=null==Dt?void 0:Dt.asyncData)||F.call(Dt,Nt[Mt]),N(M({},Z),{imgList:i(Nt)});case u.ANNOTATION_ACTIONS.SET_STEP:var Ft=Z.stepList,Zt=Z.annotationEngine,zt=z.payload.toStep;if(!Zt)return Z;var Ut=B(Ft,zt);return null==Zt||Zt.setToolName(Ut.tool,Ut.config),N(M({},Z),{step:zt,toolInstance:null==Zt?void 0:Zt.toolInstance});case u.ANNOTATION_ACTIONS.SET_LOADPCDFILE_LOADING:var Gt=z.payload.loadPCDFileLoading;return N(M({},Z),{loadPCDFileLoading:!!Gt});case u.ANNOTATION_ACTIONS.SET_LOADING:var Wt=z.payload.loading;return N(M({},Z),{loading:!!Wt});case u.ANNOTATION_ACTIONS.SET_POINT_CLOUD_LOADING:var Kt=z.payload.pointCloudLoading;return N(M({},Z),{pointCloudLoading:!!Kt});case u.ANNOTATION_ACTIONS.SET_CHECK_MODE:var Yt=z.payload.checkMode;return N(M({},Z),{checkMode:!!Yt});case u.ANNOTATION_ACTIONS.SET_HIGHLIGHT_ATTRIBUTE:var Xt=z.payload.attribute;return N(M({},Z),{highlightAttribute:Xt});case u.ANNOTATION_ACTIONS.BATCH_UPDATE_TRACK_ID:var Jt=z.payload,Qt=Jt.id,qt=Jt.newID,$t=Jt.rangeIndex,en=Jt.imgList,tn=Z.imgIndex,nn=Z.onSubmit,on=[],an=en.map((function(e,t){if(b.MathUtils.isInRange(t,$t)){var n=N(M({},e),{result:m.PointCloudUtils.batchUpdateTrackID({id:Qt,newID:qt,result:e.result})});return on.push({imgIndex:t,newInfo:n}),n}return e}));return nn&&nn([an[tn]],c.ESubmitType.BatchUpdateTrackID,tn,an,{updateImgList:on}),N(M({},Z),{imgList:an});case u.ANNOTATION_ACTIONS.BATCH_UPDATE_RESULT_BY_TRACK_ID:var rn=z.payload,ln=rn.id,cn=rn.newData,sn=rn.rangeIndex,un=Z.imgList,dn=Z.imgIndex,hn=Z.onSubmit,gn=[],fn=un.map((function(e,t){if(b.MathUtils.isInRange(t,sn)){var n=N(M({},e),{result:m.PointCloudUtils.batchUpdateResultByTrackID({id:ln,newData:cn,result:e.result})});return gn.push({imgIndex:t,newInfo:n}),n}return e}));return hn&&hn([fn[dn]],c.ESubmitType.BatchUpdateTrackID,dn,fn,{updateImgList:gn}),N(M({},Z),{imgList:fn});case u.ANNOTATION_ACTIONS.BATCH_UPDATE_IMG_LIST_RESULT_BY_PREDICT_RESULT:var vn=Z.onSubmit,pn=Z.imgList,bn=Z.stepList,mn=Z.step,yn=Z.predictionResult,Cn={};yn.forEach((function(e){var t=e.index;Cn[t]=S.default.pick(e,["center","width","height","depth","rotation","id","attribute","valid","trackID"])}));var In="step_".concat(mn),xn=[],wn=pn.map((function(e,t){if(Cn[t]){var n="{}"===e.result?d.jsonParser(f.composeResult("",{step:mn,stepList:bn},{rect:[]},{})):d.jsonParser(e.result);n[In].result.push(Cn[t]);var i=N(M({},e),{result:JSON.stringify(n)});return xn.push({imgIndex:t,newInfo:i}),i}return e}));return null==vn||vn(wn,c.ESubmitType.BatchUpdateImgList,-1,wn,{updateImgList:xn}),N(M({},Z),{imgList:wn});default:return Z}},t.composeResultByToolInstance=function(e){var t,n,i,a,r=e.toolInstance,l=e.imgList,c=e.imgIndex,s=e.stepList,u=e.step,d=void 0===u?1:u,h=(null==(t=l[c])?void 0:t.result)||"",g=null!=(n=null==r?void 0:r.exportData())?n:[],v=o(g,3),p=v[0],b=v[1],m=v[2],y=null!=(a=null==(i=null==r?void 0:r.exportCustomData)?void 0:i.call(r))?a:{},C=f.composeResultWithBasicImgInfo(h,b),I=f.composeResult(C,{step:d,stepList:s},{rect:p},y);return l.map((function(e,t){return t===c?M(N(M({},e),{result:I}),m):M({},e)}))},t.getStepConfig=B,t.getTotalPage=function(e){var t=e.imgList,n=e.imgPageSize;return Math.ceil(t.length/n)}},,,function(e,t,n){"use strict";var i=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(36),r=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,u=function(e,t,n){return t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},d=function(e,t){for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(l){var o,a=i(l(t));try{for(a.s();!(o=a.n()).done;){n=o.value;s.call(t,n)&&u(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e};t.useHistory=function(){var e=o.useContext(a.PointCloudContext),t=e.history,n=e.setPointCloudResult,i=e.setSelectedIDs,r=e.pointCloudBoxList,l=e.pointCloudSphereList,c=e.setPointCloudSphereList,s=e.mainViewInstance,u=e.topViewInstance,h=e.polygonList,g=e.setPolygonList,f=e.lineList,v=e.setLineList,p=e.syncAllViewPointCloudColor,b=e.segmentation,m=function(e){if(e){var t=e.pointCloudBoxList,o=void 0===t?[]:t,a=e.polygonList,d=void 0===a?[]:a,h=e.lineList,f=void 0===h?[]:h,b=e.pointCloudSphereList,m=void 0===b?[]:b;o&&(r.length!==o.length&&i(),null==s||s.clearAllBox(),null==s||s.generateBoxes(o),n(o),p(o)),m&&(l.length!==m.length&&i(),null==s||s.clearAllSphere(),null==s||s.generateSpheres(m),c(m)),d&&g(d),f&&v(f),null==u||u.updatePolygonList(null!=o?o:[],null!=d?d:[]),null==u||u.updateLineList(null!=f?f:[]),null==u||u.updatePointList(m)}};return{addHistory:function(e){var n=e.newBoxParams,i=e.newPolygon,o=e.newLine,a=e.newSphereParams,c={pointCloudBoxList:r,polygonList:h,lineList:f,pointCloudSphereList:l};n&&(c.pointCloudBoxList=r.concat(n)),i&&(c.polygonList=h.concat(i)),o&&(c.lineList=f.concat(o)),a&&(c.pointCloudSphereList=l.concat(a)),t.pushHistory(c)},pushHistoryWithList:function(e){var n={pointCloudBoxList:r,polygonList:h,lineList:f,pointCloudSphereList:l,segmentation:b};e.pointCloudBoxList&&(n.pointCloudBoxList=e.pointCloudBoxList),e.polygonList&&(n.polygonList=e.polygonList),e.lineList&&(n.lineList=e.lineList),e.pointCloudSphereList&&(n.pointCloudSphereList=e.pointCloudSphereList),e.segmentation&&(n.segmentation=e.segmentation),t.pushHistory(n)},initHistory:function(e){var n=e.pointCloudBoxList,i=e.polygonList,o=e.pointCloudSphereList;t.initRecord({pointCloudBoxList:n,polygonList:i,pointCloudSphereList:o,lineList:f},!0)},pushHistoryUnderUpdatePolygon:function(e){if(h.find((function(t){return t.id===e.id}))){var n=h.map((function(t){return t.id===e.id?e:d({},t)}));t.pushHistory({pointCloudBoxList:r,polygonList:n}),g(n)}},pushHistoryUnderUpdateLine:function(e){if(f.find((function(t){return t.id===e.id}))){var n=f.map((function(t){return t.id===e.id?e:d({},t)}));t.pushHistory({lineList:n}),v(n)}},redo:function(){m(t.redo())},undo:function(){m(t.undo())}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(55),o=n(42);t.a2MapStateToProps=function(e){var t,n,a,r=e.annotation,l=r.imgList,c=r.imgIndex,s=r.highlightAttribute,u=r.loadPCDFileLoading,d=null!=(t=l[c])?t:{},h=i.getCurrentStepInfo(null==(n=e.annotation)?void 0:n.step,null==(a=e.annotation)?void 0:a.stepList);return{currentData:d,imgIndex:c,imgList:l,stepInfo:h,config:o.jsonParser(null==h?void 0:h.config),configString:null==h?void 0:h.config,highlightAttribute:s,loadPCDFileLoading:u}}},,,,,,,,,function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(87),r=n(43),l=n(427),c=n(44);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(a);e.exports=function(e){var t=l((function(){var t,n,i=r.getTargetElement(e);return{width:null!=(t=(i||{}).clientWidth)?t:0,height:null!=(n=(i||{}).clientHeight)?n:0}})),n=i(t,2),a=n[0],s=n[1],d=o.useMemo((function(){return c.debounce((function(e){var t,n;s({width:null!=(t=e.target.clientWidth)?t:0,height:null!=(n=e.target.clientHeight)?n:0})}),100)}),[]);return o.useLayoutEffect((function(){var t=r.getTargetElement(e);if(!t)return function(){};var n=new u.default((function(e){e.forEach((function(e){d(e)}))}));return n.observe(t),function(){n.disconnect()}}),[e]),a}},function(e,t,n){"use strict";var i=n(81).default,o=n(51).default,a=n(62).default,r=n(28).default,l=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var c=n(32),s=n(17),u=n(0),d=n(36),h=n(63),g=n(109),f=n(30),v=n(55),p=n(42),b=n(49),m=n(25),y=n(26),C=n(85),I=n(145),x=Object.defineProperty,w=Object.defineProperties,k=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,A=function(e,t,n){return t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},O=function(e,t){for(var n in t||(t={}))P.call(t,n)&&A(e,n,t[n]);if(S){var i,o=l(S(t));try{for(o.s();!(i=o.n()).done;){n=i.value;L.call(t,n)&&A(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},T=function(e,t){return w(e,k(t))},E=function(e,t,n){return new Promise((function(i,o){var a=function(e){try{l(n.next(e))}catch(t){o(t)}},r=function(e){try{l(n.throw(e))}catch(t){o(t)}},l=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(a,r)};l((n=n.apply(e,t)).next())}))},D=90,M="3D",N="Top",R="Side",B="Back",j=function(e,t,n,i,o){var a=s.PointCloudUtils.transferCanvas2World(e,t),r={center:{x:a.x,y:a.y,z:s.DEFAULT_SPHERE_PARAMS.defaultZ},id:e.id},l=i?O(O({},i),r):T(O({},r),{attribute:"",valid:!0});return o&&Object.assign(l,o),l},_=function(e,t,n,i,o,a){var l=e.pointList.map((function(e){return s.PointCloudUtils.transferCanvas2World(e,t)})),u=0,d=1,h={};if(n){var g=n.getSensesPointZAxisInPolygon(l,void 0,a);a&&g.fittedCoordinates.length>0&&(l=g.fittedCoordinates),u=(g.maxZ+g.minZ)/2,d=g.maxZ-g.minZ,h={count:g.zCount}}var f=r(l,3),v=f[0],p=f[1],b=f[2],m=c.MathUtils.getLineCenterPoint([v,b]),y=c.MathUtils.getLineLength(v,p),C=c.MathUtils.getLineLength(p,b),I=c.MathUtils.getRadiusFromQuadrangle(e.pointList);i&&(u=i.center.z,d=i.depth);var x={center:{x:m.x,y:m.y,z:u},width:a?C+.01:C,height:a?y+.01:y,depth:d,rotation:I,id:e.id},w=O(i?O(O({},i),x):T(O({},x),{attribute:"",valid:!0}),h);return o&&Object.assign(w,o),{boxParams:w,newPointList:l.map((function(e){return s.PointCloudUtils.transferWorld2Canvas(e,t)}))}},H=function(e,t,n){var i=e.x-t.x,o=e.y-t.y;return T(O({},n),{center:{x:n.center.x-i,y:n.center.y,z:n.center.z-o}})},V=function(e,t,n,i){var o=r(e.pointList,3),a=o[0],l=o[1],s=o[2],u=r(t.pointList,3),d=u[0],h=u[1],g=u[2],f=c.MathUtils.getLineCenterPoint([a,s]),v=c.MathUtils.getLineCenterPoint([d,g]),p={x:{x:f.x-v.x,y:f.y-v.y}.x,y:0,z:f.y-v.y},b=c.MathUtils.getLineLength(a,l)-c.MathUtils.getLineLength(d,h),m=c.MathUtils.getLineLength(l,s)-c.MathUtils.getLineLength(h,g);return i.getNewBoxBySideUpdate(p,m,b,n).newBoxParams},F=function(e,t,n){var i=e.x-t.x,o=e.y-t.y;return T(O({},n),{center:{x:n.center.x,y:n.center.y-i,z:n.center.z-o}})},Z=function(e,t,n,i){var o=r(e.pointList,3),a=o[0],l=o[1],s=o[2],u=r(t.pointList,3),d=u[0],h=u[1],g=u[2],f=c.MathUtils.getLineCenterPoint([a,s]),v=c.MathUtils.getLineCenterPoint([d,g]),p={x:{x:f.x-v.x,y:f.y-v.y}.x,y:0,z:f.y-v.y},b=c.MathUtils.getLineLength(a,l)-c.MathUtils.getLineLength(d,h),m=c.MathUtils.getLineLength(l,s)-c.MathUtils.getLineLength(h,g);return i.getNewBoxByBackUpdate(p,m,b,n).newBoxParams},z=function(e,t,n,i,o){var a;if(n){var r=n.toolInstance,l=n.pointCloudInstance;l.loadPCDFile(i,null!=(a=null==o?void 0:o.radius)?a:D);var c=l.updateOrthoCameraBySphere(e,s.EPerspectiveView.Left).cameraPositionVector;l.setInitCameraPosition(c);var u=l.getSphereSidePoint2DCoordinate(e),d=u.point2d,h=u.zoom;l.camera.zoom=h,l.camera.updateProjectionMatrix(),l.render(),r.initPosition(),r.zoomChangeOnCenter(h),r.setResult([T(O(O({},t),d),{valid:e.valid,textAttribute:"",attribute:e.attribute})]),r.setSelectedID(t.id)}},U=function(e,t,n,i){if(n){var o=n.pointCloud2dOperation,a=n.pointCloudInstance;a.loadPCDFileByBox(i,e,{width:5,depth:5});var r=a.updateOrthoCamera(e,s.EPerspectiveView.Left).cameraPositionVector;a.setInitCameraPosition(r);var l=a.getBoxSidePolygon2DCoordinate(e),c=l.polygon2d,u=l.zoom;a.camera.zoom=u,a.camera.updateProjectionMatrix(),a.render(),o.initPosition(),o.zoomChangeOnCenter(u),o.setResultAndSelectedID([{id:t.id,valid:e.valid,pointList:c,textAttribute:"",isRect:!0,attribute:e.attribute}],t.id)}},G=function(e,t,n,i,o){var a;if(n){var r=n.toolInstance,l=n.pointCloudInstance;l.loadPCDFile(i,null!=(a=null==o?void 0:o.radius)?a:D);var c=l.updateOrthoCameraBySphere(e,s.EPerspectiveView.Back).cameraPositionVector;l.setInitCameraPosition(c);var u=l.getSphereBackPoint2DCoordinate(e),d=u.point2d,h=u.zoom;l.camera.zoom=h,l.camera.updateProjectionMatrix(),l.render(),r.initPosition(),r.zoomChangeOnCenter(h),r.setResult([T(O(O({},t),d),{valid:e.valid,textAttribute:"",attribute:e.attribute})]),r.setSelectedID(t.id)}},W=function(e,t,n,i){if(n){var o=n.pointCloud2dOperation,a=n.pointCloudInstance;a.loadPCDFileByBox(i,e,{height:5,depth:5});var r=a.updateOrthoCamera(e,s.EPerspectiveView.Back).cameraPositionVector;a.setInitCameraPosition(r);var l=a.getBoxBackPolygon2DCoordinate(e),c=l.polygon2d,u=l.zoom;a.camera.zoom=u,a.camera.updateProjectionMatrix(),a.render(),o.initPosition(),o.zoomChangeOnCenter(u),o.setResultAndSelectedID([{id:t.id,valid:e.valid,pointList:c,textAttribute:"",isRect:!0,attribute:e.attribute}],t.id)}},K=function(e,t,n,i){if(n&&i){i.generateSphere(e),i.updateCameraBySphere(e,s.EPerspectiveView.Top),i.render();var o=n.toolInstance,r=n.pointCloudInstance.getSphereTopPoint2DCoordinate(e).point2d,l=a(o.pointList).map((function(n){return n.id===t.id?T(O(O({},t),r),{valid:e.valid,textAttribute:"",attribute:e.attribute}):n}));o.setResult(l),o.setSelectedID(t.id)}},Y=function(e,t,n,i){var o,r;if(n&&i){i.generateBox(e,t.id),i.render();var l=n.pointCloud2dOperation,c=n.pointCloudInstance.getBoxTopPolygon2DCoordinate(e).polygon2d,s=a(l.polygonList),u=s.find((function(e){return e.id===t.id}));u?(u.pointList=c,u.valid=null==(o=e.valid)||o):s.push({id:t.id,pointList:c,textAttribute:"",isRect:!0,valid:null==(r=e.valid)||r}),l.setResultAndSelectedID(s,t.id)}};t.syncBackViewByPoint=G,t.syncSideViewByPoint=z,t.syncTopViewByPoint=K,t.synchronizeBackView=W,t.synchronizeSideView=U,t.synchronizeTopView=Y,t.topViewPoint2PointCloud=j,t.topViewPolygon2PointCloud=_,t.usePointCloudViews=function(){var e=u.useContext(d.PointCloudContext),t=e.topViewInstance,n=e.sideViewInstance,a=e.backViewInstance,r=e.mainViewInstance,l=e.addPointCloudBox,x=e.addPointCloudSphere,w=e.setSelectedIDs,k=e.selectedIDs,S=e.pointCloudBoxList,P=e.pointCloudSphereList,L=e.hideAttributes,A=e.setHighlight2DDataList,X=C.useHistory(),J=X.addHistory,Q=X.initHistory,q=X.pushHistoryUnderUpdatePolygon,$=X.pushHistoryUnderUpdateLine,ee=I.usePolygon().selectedPolygon,te=h.useSingleBox(),ne=te.updateSelectedBox,ie=te.updateSelectedBoxes,oe=te.getPointCloudByID,ae=g.useSphere(),re=ae.getPointCloudSphereByID,le=ae.updatePointCloudSphere,ce=ae.selectedSphere,se=f.useSelector((function(e){var t=e.annotation,n=t.stepList,i=t.step;return{currentData:t.imgList[t.imgIndex],config:p.jsonParser(v.getCurrentStepInfo(i,n).config)}})),ue=se.currentData,de=se.config,he=f.useDispatch(),ge=h.useSingleBox().selectedBox,fe=y.useTranslation().t,ve=null==ge?void 0:ge.info;if(!t||!n||!a)return{topViewAddSphere:function(){},topViewAddBox:function(){},topViewSelectedChanged:function(){},sideViewUpdateBox:function(){},backViewUpdateBox:function(){}};var pe=t.pointCloudInstance,be=function(e){null==r||r.generateBox(e),null==r||r.controls.update(),null==r||r.render()},me=function(e){null==r||r.generateSphere(e),null==r||r.controls.update(),null==r||r.render()},ye=function(e,t,i){if(ve){var o,a;if(i===B)o=Z;else o=V;a=o(e,t,ve,n.pointCloudInstance);var l=he(b.PreDataProcess({tool:c.EPointCloudName.PointCloud,dataList:[a],stepConfig:de,action:"viewUpdateBox"}))[0],s=a.valid!==l.valid;if(a=l,r){var u=r.getSensesPointZAxisInPolygon(c.getCuboidFromPointCloudBox(a).polygonPointList,[a.center.z-a.depth/2,a.center.z+a.depth/2]).count;a=T(O({},a),{count:u})}var d=ne(a);return a=d.find((function(e){return e.id===a.id})),xe({omitView:s?void 0:i,polygon:e,boxParams:a,newPointCloudBoxList:d}),d}},Ce=function(e,t,n){if(ce){var i,o;if(n===B)i=F;else i=H;o=i(e,t,ce);var a=le(o);return Ie(n,e,o,void 0,a,de),a}},Ie=function(e,l,c,s,u,d){return E(void 0,null,i().mark((function u(){var h,g,f;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:g=null==ue?void 0:ue.url,o(h={},R,(function(){z(c,l,n,g,d)})),o(h,B,(function(){a&&G(c,l,a,g,d)})),o(h,N,(function(){K(c,l,t,r)})),f=h,Object.keys(f).forEach((function(t){t!==e&&f[t]()})),s&&(null==r||r.updateCameraZoom(s)),me(c);case 5:case"end":return i.stop()}}),u)})))},xe=function(l){return E(void 0,null,i().mark((function c(){var s,u,d,h,g,f,v,p;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(u=l.omitView,d=l.polygon,h=l.boxParams,g=l.zoom,f=l.newPointCloudBoxList,v=null==ue?void 0:ue.url,!f){i.next=5;break}return i.next=5,e.syncAllViewPointCloudColor(f);case 5:o(s={},R,(function(){U(h,d,n,v)})),o(s,B,(function(){a&&W(h,d,a,v)})),o(s,N,(function(){Y(h,d,t,r)})),p=s,Object.keys(p).forEach((function(e){e!==u&&p[e]()})),g&&(null==r||r.updateCameraZoom(g)),be(h);case 9:case"end":return i.stop()}}),c)})))};return{topViewAddSphere:function(e){var n,i=e.newPoint,o=e.size,a=e.zoom,r=e.trackConfigurable,l={attribute:null!=(n=t.toolInstance.defaultAttribute)?n:""};!0===r&&Object.assign(l,{trackID:s.PointCloudUtils.getNextTrackID({imgList:[],extraBoxList:[],extraSphereList:P})});var c=j(i,o,0,void 0,l);w(i.id);var u=x(c);Ie(N,i,c,a,u,de),J({newSphereParams:c})},topViewAddBox:function(n){var i,o,a=n.polygon,u=n.size,d=(n.imgList,n.trackConfigurable),h=n.zoom,g=n.intelligentFit,f={attribute:null!=(i=t.toolInstance.defaultAttribute)?i:""};!0===d&&Object.assign(f,{trackID:s.PointCloudUtils.getNextTrackID({imgList:[],extraBoxList:S,extraSphereList:P})});var v=null==t?void 0:t.toolInstance,p=O({},a),y=_(p,u,pe,void 0,f,g),C=y.boxParams,I=y.newPointList;if(C=he(b.PreDataProcess({tool:c.EPointCloudName.PointCloud,dataList:[C],stepConfig:de,action:"viewUpdateBox"}))[0],(null==de?void 0:de.lowerLimitPointsNumInBox)&&"number"===typeof C.count&&C.count<de.lowerLimitPointsNumInBox)return m.message.info(fe("LowerLimitPointsNumInBox",{num:de.lowerLimitPointsNumInBox})),void v.deletePolygon(C.id);g&&(null==I?void 0:I.length)&&(p.pointList=I);var x=L.includes(p.attribute),k=l(C),A=null!=(o=null==e?void 0:e.polygonList)?o:[];null==t||t.updatePolygonList(null!=k?k:[],A),x?w([]):(w(C.id),v.selection.setSelectedIDs(p.id),xe({omitView:N,polygon:p,boxParams:C,zoom:h,newPointCloudBoxList:k}),g&&Y(C,p,t,r)),J({newBoxParams:C})},topViewSelectedChanged:function(e){var n,i=e.newSelectedBox,o=e.newPointCloudList,a=e.newSelectedSphere,r=e.newSphereList,l=null==t?void 0:t.toolInstance;if(0!==k.length&&l){if(i||(null==ge?void 0:ge.info)){var c=null!=i?i:null==ge?void 0:ge.info;null==(n=null==l?void 0:l.selection)||n.setSelectedIDs(k[0]);var s=l.selectedPolygon;if(1===k.length&&c)return void xe({omitView:N,polygon:s,boxParams:c,newPointCloudBoxList:o})}if((a||ce)&&1===k.length){var u=null!=a?a:ce;l.setSelectedID(k[0]);var d=l.selectedPoint;u&&Ie(N,d,u,void 0,r,de)}}},topViewUpdatePoint:function(e,t){var n=re(e.id),i=j(e,t,0,n),o=le(i);Ie(N,e,i,void 0,o,de)},sideViewUpdatePoint:function(e,t){Ce(e,t,R)},backViewUpdatePoint:function(e,t){Ce(e,t,B)},topViewUpdateBox:function(n,i){if(ee){var o=n[0].newPolygon;return o.pointList=o.pointList.map((function(e){return s.PointCloudUtils.transferCanvas2World(e,i)})),void q(n[0].newPolygon)}var a=n.map((function(e){var n=e.newPolygon,o=oe(n.id);return _(n,i,t.pointCloudInstance,o).boxParams}));if(1===(a=he(b.PreDataProcess({tool:c.EPointCloudName.PointCloud,dataList:a,stepConfig:de,action:"viewUpdateBox"}))).length){var r=n[0].newPolygon,l=ie(a);xe({polygon:r,boxParams:a[0],newPointCloudBoxList:l})}else{var u=ie(a);u&&e.syncAllViewPointCloudColor(u)}},topViewUpdateLine:function(e,t){$(e)},sideViewUpdateBox:function(e,t){ye(e,t,R)},backViewUpdateBox:function(e,t){ye(e,t,B)},pointCloudBoxListUpdated:function(e){t.updatePolygonList(e),null==r||r.generateBoxes(e)},initPointCloud3d:function(e){if(r){var t=s.PointCloudUtils.getDefaultOrthographicParams(e);r.initOrthographicCamera(t),r.initRenderer(),r.render()}},updatePointCloudData:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return E(void 0,[].concat(o),(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;return i().mark((function o(){var a,l,c,u,d,h,g,f,v,m,y;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((null==n?void 0:n.url)&&r){i.next=2;break}return i.abrupt("return");case 2:return A([]),b.SetPointCloudLoading(he,!0),b.SetLoadPCDFileLoading(he,!0),i.next=7,r.loadPCDFile(n.url,null!=(a=null==de?void 0:de.radius)?a:D);case 7:if(null==r||r.clearAllBox(),null==r||r.clearAllSphere(),g=[],f=[],v=[],m=[],r.updateTopCamera(),y=null==(c=null==(l=p.jsonParser(n.result))?void 0:l.valid)||c,e.setPointCloudValid(y),null==(u=e.sideViewInstance)||u.clearAllData(),null==(d=e.backViewInstance)||d.clearAllData(),t.updateData(n.url,n.result,{radius:null!=(h=null==de?void 0:de.radius)?h:D}),!n.result){i.next=28;break}return g=s.PointCloudUtils.getBoxParamsFromResultList(n.result),v=s.PointCloudUtils.getPolygonListFromResultList(n.result),f=s.PointCloudUtils.getLineListFromResultList(n.result),m=s.PointCloudUtils.getSphereParamsFromResultList(n.result),null==r||r.generateBoxes(g),null==r||r.generateSpheres(m),i.next=28,e.syncAllViewPointCloudColor(g,[]);case 28:Q({pointCloudBoxList:g,polygonList:v,lineList:f,pointCloudSphereList:m}),b.SetPointCloudLoading(he,!1),b.SetLoadPCDFileLoading(he,!1);case 31:case"end":return i.stop()}}),o)}))()}))},updateViewsByDefaultSize:function(e){var n,i,o,a,r;if(ge){var l=Number(e.widthDefault),u=Number(e.depthDefault),d=Number(e.heightDefault),h=null==ge?void 0:ge.info.trackID,g=(null==(n=null==t?void 0:t.toolInstance)?void 0:n.polygonList).find((function(e){return(null==e?void 0:e.trackID)===h})),f={width:null==(o=null==(i=null==t?void 0:t.toolInstance)?void 0:i.basicImgInfo)?void 0:o.width,height:null==(r=null==(a=null==t?void 0:t.toolInstance)?void 0:a.basicImgInfo)?void 0:r.height},v=g.pointList.map((function(e){return s.PointCloudUtils.transferCanvas2World(e,f)})),p=c.MathUtils.getModifiedRectangleCoordinates(v,d,l),b=p[0],m=p[2],y=c.MathUtils.getLineCenterPoint([b,m]),C=ge.info.center.z-ge.info.depth/2,I=T(O({},ge.info),{center:{x:y.x,y:y.y,z:C+u/2},width:l,height:d,depth:u,valid:!0}),x=ie([I]);xe({omitView:M,polygon:g,boxParams:I,newPointCloudBoxList:x})}}}}},,,,,,,,,,,,function(e,t,n){"use strict";var i=n(83).default,o=n(84).default,a=n(32).cTool,r=a.EVideoToolName,l=a.EPointCloudName,c=a.EToolName,s=function(){function e(){i(this,e)}return o(e,null,[{key:"isVideoTool",value:function(e){return!!e&&Object.values(r).includes(e)}},{key:"isPointCloudTool",value:function(e){return!!e&&Object.values(l).includes(e)}},{key:"getPointCloudToolList",value:function(){return[c.Point,c.Line,c.PointCloudPolygon]}},{key:"getPointToLineDistance",value:function(e,t,n){var i=Math.abs(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),o=Math.abs(Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))),a=Math.abs(Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))),r=(i+o+a)/2;return 2*Math.abs(Math.sqrt(r*(r-i)*(r-o)*(r-a)))/a}}]),e}();e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(36),a=n(44),r=n(85),l=n(32);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=c(a),u=l.cAnnotation.ESortDirection;t.useSphere=function(){var e=i.useContext(o.PointCloudContext),t=e.pointCloudSphereList,n=e.setPointCloudSphereList,a=e.selectedID,l=e.setSelectedIDs,c=e.mainViewInstance,d=e.topViewInstance,h=r.useHistory().pushHistoryWithList,g=i.useMemo((function(){return t.find((function(e){return e.id===a}))}),[a,t]),f=i.useCallback((function(e){return t.find((function(t){return t.id===e}))}),[t]),v=i.useCallback((function(e){var i=t.findIndex((function(t){return t.id===e.id}));if(i>-1){t.splice(i,1,s.default.merge(t[i],e));var o=s.default.cloneDeep(t);return n(o),h({pointCloudSphereList:o}),o}return t}),[t]),p=i.useCallback((function(e){var i=t.filter((function(t){return t.id!==e}));n(i),null==c||c.removeObjectByName(e,"sphere"),null==c||c.render()}),[t]),b=i.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.ascend;if(d){var t=d.toolInstance.pointList,n=d.toolInstance.selectedID,i=t.findIndex((function(e){return(null==e?void 0:e.id)===n}));if(i>-1){var o=1;e===u.descend&&(o=-1);var a=t.length,r=t[(i+o+a)%a];l(r.id)}}}),[d]);return{selectedSphere:g,getPointCloudSphereByID:f,updatePointCloudSphere:v,deletePointCloudSphere:p,switchToNextSphere:b}}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_mouse_left_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23ff5770%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e9%bc%a0%e6%a0%87%e6%bb%9a%e8%bd%ae'%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.982v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.97-9.7H5.865V0a5.7%2c5.7%2c0%2c0%2c1%2c3.53%2c1.267A3.812%2c3.812%2c0%2c0%2c1%2c10.85%2c4.19V5.98Zm-5.866%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.456%2c1.267%2c5.693%2c5.693%2c0%2c0%2c1%2c4.984%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(-0.698 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_mouse_right_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23ff5770%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e9%bc%a0%e6%a0%87%e6%bb%9a%e8%bd%ae'%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.982v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.97-9.7H5.865V0a5.7%2c5.7%2c0%2c0%2c1%2c3.53%2c1.267A3.812%2c3.812%2c0%2c0%2c1%2c10.85%2c4.19V5.98Zm-5.866%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.456%2c1.267%2c5.693%2c5.693%2c0%2c0%2c1%2c4.984%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(5.302 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3c/g%3e%3c/svg%3e"},,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(41),o=n(49),a=n(82),r=n(25),l=n(0),c=n(26),s=n(35),u=n(30),d=n(488),h=n(546),g=n(547),f=n(271),v=n(272),p=n(273),b=n(32),m=n(217);function y(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var C=y(l),I=b.cTool.EPointCloudName,x="".concat(i.prefix,"-footer"),w=function(){return C.default.createElement(r.Divider,{type:"vertical",style:{background:"rgba(153, 153, 153, 1)",height:"16px"}})},k=function(e){var t=e.footerTips,n=e.hiddenTips,i=e.pageNumber,o=e.pagination,a=e.zoomController,r=e.curItems,l=e.footerDivider,c=e.annotateAttrList;return C.default.createElement(C.default.Fragment,null,t,c,C.default.createElement("div",{style:{flex:1}}),n,i,o,r,l,a)},S=s.connect((function(e){return{totalPage:a.getTotalPage(e.annotation),imgIndex:e.annotation.imgIndex,stepList:e.annotation.stepList,step:e.annotation.step,basicIndex:e.annotation.basicIndex,basicResultList:e.annotation.basicResultList,skipBeforePageTurning:e.annotation.skipBeforePageTurning}}),null,null,{context:u.LabelBeeContext})((function(e){var t,n=e.stepList,i=e.step,a=e.basicResultList,r=e.basicIndex,l=e.mode,s=void 0===l?"light":l,b=e.footer,y=void 0===b?k:b,S=e.skipBeforePageTurning,P=u.useDispatch(),L=c.useTranslation().t,A=null!=(t=n[i-1])?t:{},O=!!A.dataSourceStep,T=C.default.createElement(v.Pagination,{imgIndex:e.imgIndex,totalPage:e.totalPage,pageJump:function(e){var t=~~e-1;S?S((function(){return P(o.PageJump(t))})):P(o.PageJump(t))},pageBackward:function(){S?S((function(){return P(o.PageBackward())})):P(o.PageBackward())},pageForward:function(){S?S((function(){return P(o.PageForward())})):P(o.PageForward())},footerCls:x}),E=O&&a.length>0?C.default.createElement("span",null,L("curItems",{current:r+1,total:a.length})):null;return"function"===typeof y?y===k&&A.tool===I.PointCloud?C.default.createElement("div",{className:"".concat(x),style:e.style},C.default.createElement(d,null),C.default.createElement(p.AnnotatedAttributesIcon,null),C.default.createElement("div",{style:{flex:1}}),T):C.default.createElement("div",{className:"".concat(x),style:e.style},y({footerTips:C.default.createElement(d,null),hiddenTips:C.default.createElement(h,null),pageNumber:C.default.createElement(g,null),annotateAttrList:C.default.createElement(p.AnnotatedAttributesIcon,null),pagination:T,zoomController:C.default.createElement(f.default,{mode:s}),curItems:E,footerDivider:C.default.createElement(w,null),shortCutTable:m.shortCutTable,ToolHotKeyCom:m.ToolHotKeyCom})):y}));t.FooterDivider=w,t.default=S,t.footerCls=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(43),o=n(5),a=n(0);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(o),c=r(a);t.PointCloudContainer=function(e){var t=e.title,n=e.toolbar,o=e.children,a=e.className,r=e.style,s=e.titleOnSurface;return c.default.createElement("div",{className:l.default([a,i.getClassName("point-cloud-container")]),style:r},s?c.default.createElement("span",{className:i.getClassName("point-cloud-container","header-title-box")},t):c.default.createElement("div",{className:i.getClassName("point-cloud-container","header")},t&&c.default.createElement("span",{className:i.getClassName("point-cloud-container","header-title")},t),n&&c.default.createElement("div",{className:i.getClassName("point-cloud-container","header-toolbar")},n)),o)}},function(e,t,n){"use strict";var i=n(0),o=n(45),a=n(43);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(i);e.exports=function(e){var t=e.title,n=e.onClick,i=e.style;return l.default.createElement("span",{className:a.getClassName("point-cloud-container","title-button"),style:i},t,n&&l.default.createElement(o.ExpandAltOutlined,{onClick:n,style:{marginLeft:4}}))}},,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(34).default,o=n(0),a=n(25),r=n(287),l=n(41),c=n(45);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(o),d=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,b=function(e,t,n){return t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},m=function(e,t){for(var n in t||(t={}))v.call(t,n)&&b(e,n,t[n]);if(f){var o,a=i(f(t));try{for(a.s();!(o=a.n()).done;){n=o.value;p.call(t,n)&&b(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},y="".concat(l.prefix,"-longText");e.exports=function(e){var t,n,i=e.text,l=e.placement,s=void 0===l?"bottom":l,d=e.icon,f=void 0===d?u.default.createElement(c.SearchOutlined,null):d,v=e.openByText,p=e.style,b=e.isToolTips,C=e.wordCount,I=o.useRef(null);r.useSize(I);var x,w=I.current&&(null==(t=I.current)?void 0:t.clientWidth)<(null==(n=I.current)?void 0:n.scrollWidth);if(C){if((null==i?void 0:i.length)>C){var k=i.slice(0,C);return u.default.createElement(a.Popover,{placement:s,overlayClassName:"".concat(y,"-popover"),content:i},u.default.createElement("span",{style:{cursor:"pointer"}},k,"..."))}return u.default.createElement("div",null," ",i)}if(v){var S={placement:s,overlayClassName:"".concat(y,"-popover"),content:i,key:"".concat(w)};w||Object.assign(S,{open:!1});var P=u.default.createElement("div",{className:"".concat(y,"-text"),style:p,ref:I},i);return b?u.default.createElement(a.Tooltip,(x=m({},S),h(x,g({title:i}))),P):u.default.createElement(a.Popover,m({},S),P)}return u.default.createElement("div",{className:y,style:p},u.default.createElement("div",{className:"".concat(y,"-text"),ref:I},i),w&&u.default.createElement(a.Popover,{placement:s,overlayClassName:"".concat(y,"-popover"),content:i},f))}},function(e,t,n){"use strict";var i=n(51).default,o=n(28).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(41),r=n(69),l=n(55),c=n(25),s=n(0),u=n(26),d=n(428),h=n(430),g=n(431),f=n(442),v=n(448),p=n(256),b=n(456),m=n(457),y=n(469),C=n(32),I=n(474),x=n(257),w=n(30),k=n(25),S=n(42),P=n(479),L=n(480);function A(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var O=A(s),T=C.cTool,E=T.EVideoToolName,D=T.EPointCloudName,M=c.Collapse.Panel,N="".concat(a.prefix,"-sidebar");t.default=function(e){var t=e.sider,n=e.enableColorPicker,a=e.setSiderWidth,C=(e.propsSiderWidth,e.checkMode),A=w.useSelector((function(e){return l.getCurrentStepInfo(e.annotation.step,e.annotation.stepList)})),T=s.useState(!0),R=o(T,2),B=R[0],j=R[1],_=null==A?void 0:A.tool,H=u.useTranslation().t;if(!_)return null;var V=O.default.createElement(x.ToolIcons,{toolName:_,onChange:function(){}}),F=O.default.createElement(v,null),Z=O.default.createElement(d,null),z=O.default.createElement(c.Collapse,{defaultActiveKey:["1","imgAttribute"],bordered:!1,expandIconPosition:"right",className:"".concat(N,"__content"),expandIcon:p.expandIconFuc},function(e){var t=O.default.createElement(y,null);return O.default.createElement(M,{header:H("Style"),className:"panel",key:e},t)}("1")),U=O.default.createElement(c.Collapse,{defaultActiveKey:["1","imgAttribute"],bordered:!1,expandIconPosition:"right",className:"".concat(N,"__content"),expandIcon:p.expandIconFuc},O.default.createElement(M,{header:O.default.createElement("div",null,H("Adjust"),O.default.createElement(h,null)),className:"panel",key:"imgAttribute"},O.default.createElement(f,null))),G=O.default.createElement(g.default,null),W=O.default.createElement(p.default,null),K=O.default.createElement(b.default,null),Y=O.default.createElement(I,{onChange:function(e,t){}}),X=O.default.createElement(L,{checkMode:C}),J=O.default.createElement("div",{className:"".concat(N,"__horizontal")}),Q=O.default.createElement(m.default,{enableColorPicker:n}),q=O.default.createElement(g.PointCloudOperation,null);if(t)return"function"===typeof t?O.default.createElement("div",{className:"".concat(N)},t({toolIcon:V,attributeList:F,annotationText:Z,toolStyle:z,imageAttributeInfo:U,operation:G,tagToolSideBar:W,textToolSideBar:K,horizontal:J,pointCloudToolSidebar:Q,pointCloudOperation:q,scribbleSidebar:Y,LLMSidebar:X})):t;if([r.EToolName.Rect,r.EToolName.Point,r.EToolName.Line,r.EToolName.Rect,r.EToolName.Polygon,r.EToolName.Cuboid].includes(_))return O.default.createElement("div",{className:"".concat(N)},V,J,F,Z,J,O.default.createElement("div",{className:"".concat(N,"__content")},z,U),G);if(_===r.EToolName.Tag)return O.default.createElement("div",{className:"".concat(N)},O.default.createElement(p.default,null));if(_===E.VideoTagTool)return O.default.createElement("div",{className:"".concat(N)},O.default.createElement("div",{className:"".concat(N,"__content")},O.default.createElement(p.default,null)),G);if(_===r.EToolName.Text)return O.default.createElement("div",{className:"".concat(N)},O.default.createElement(b.default,null));if(_===D.PointCloud){var $,ee=function(){(j(!B),a)&&a(B?48:void 0)},te=O.default.createElement("div",{style:{width:"48px",height:"100%",display:"flex",justifyContent:"center",background:"#ffffff"}},O.default.createElement("span",{onClick:function(){return ee()}},O.default.createElement("img",{style:{width:"16px",height:"16px",marginTop:"18px",cursor:"pointer",transform:"rotate(180deg)"},src:P})));return B?O.default.createElement(k.Tabs,{type:"card",activeKey:"1",className:S.classnames(($={},i($,"".concat(N),!0),i($,"".concat(N,"__pointCloud"),!0),$)),tabBarExtraContent:{left:O.default.createElement("span",{onClick:function(){return ee()},style:{padding:"0px 4px"}},O.default.createElement("img",{style:{width:"16px",height:"16px",marginLeft:"4px",cursor:"pointer"},src:P}))}},O.default.createElement(k.Tabs.TabPane,{tab:"\u5de5\u5177\u9762\u677f",key:"1",style:{height:"100%",display:"flex",flexDirection:"column"}},O.default.createElement("div",{className:"".concat(N,"__content")},O.default.createElement(m.default,null)),O.default.createElement(g.PointCloudOperation,null))):te}return _===r.EToolName.ScribbleTool?O.default.createElement("div",{className:"".concat(N)},O.default.createElement("div",{className:"".concat(N,"__content")},Y,F),G):_===r.EToolName.LLM?X:null},t.sidebarCls=N},function(e,t,n){"use strict";var i=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(36),r=n(85),l=Object.defineProperty,c=Object.defineProperties,s=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},f=function(e,t){for(var n in t||(t={}))d.call(t,n)&&g(e,n,t[n]);if(u){var o,a=i(u(t));try{for(a.s();!(o=a.n()).done;){n=o.value;h.call(t,n)&&g(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e};t.usePolygon=function(){var e=o.useContext(a.PointCloudContext),t=e.polygonList,n=e.setPolygonList,i=e.selectedID,l=r.useHistory(),u=l.addHistory,d=l.pushHistoryWithList,h=t.find((function(e){return e.id===i}));return{addPolygon:function(e){n(t.concat(e)),u({newPolygon:e})},deletePolygon:function(e){var i=t.filter((function(t){return t.id!==e})).map((function(e){return f({},e)}));n(i),d({polygonList:i})},selectedPolygon:h,updateSelectedPolygon:function(e){h&&n(t.map((function(t){return t.id===i?e:t})))},updatePolygonValidByID:function(e){t.find((function(t){return t.id===e}))&&n(t.map((function(t){return t.id===e?(n=f({},t),i={valid:!t.valid},c(n,s(i))):t;var n,i})))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(36),a=n(32),r=n(85),l=n(17),c=a.cTool,s=c.EToolName,u=c.EPolygonPattern;t.useStatus=function(){var e=i.useContext(o.PointCloudContext),t=e.topViewInstance,n=e.sideViewInstance,a=e.backViewInstance,c=e.mainViewInstance,d=e.setPointCloudResult,h=e.setPointCloudSphereList,g=e.setPolygonList,f=e.pointCloudPattern,v=e.setPointCloudPattern,p=e.syncAllViewPointCloudColor,b=e.globalPattern,m=e.setLineList,y=r.useHistory().pushHistoryWithList,C=function(){null==n||n.toolInstance.clearResult(),null==a||a.toolInstance.clearResult()},I=i.useMemo((function(){return b===l.EPointCloudPattern.Detection}),[b]),x=i.useMemo((function(){return b===l.EPointCloudPattern.Segmentation}),[b]);return{clearAllResult:function(){null==c||c.clearAllBox(),null==c||c.clearAllSphere(),null==c||c.render(),d([]),g([]),h([]),m([]),null==t||t.toolScheduler.clearStatusAndResult(),p([]),y({pointCloudBoxList:[],polygonList:[],pointCloudSphereList:[]})},updatePointCloudPattern:function(e){if(e!==f){var i=[t,n,a];switch(e){case s.Rect:C(),i.forEach((function(e){null==e||e.switchToCanvas(s.PointCloudPolygon),null==e||e.toolInstance.setPattern(u.Rect)})),v(s.Rect);break;case s.Polygon:C(),i.forEach((function(e){null==e||e.switchToCanvas(s.PointCloudPolygon),null==e||e.toolInstance.setPattern(u.Normal)})),v(s.Polygon);break;case s.Point:C(),i.forEach((function(e){null==e||e.switchToCanvas(s.Point)})),v(s.Point);break;case s.Line:C(),i.forEach((function(e){null==e||e.switchToCanvas(s.Line)})),v(s.Line)}}},pointCloudPattern:f,isPointCloudDetectionPattern:I,isPointCloudSegmentationPattern:x}}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_279' data-name='%e8%b7%af%e5%be%84 279' class='cls-1' d='M11.345-10.437H8.754c0-.488-.379-1.077-.848-1.077H4.94c-.468%2c0-.848.589-.848%2c1.077H1.5c-.572%2c0-1.2.085-1.2.658v.886H12.248v-.886C12.248-10.352%2c11.917-10.437%2c11.345-10.437ZM1.357-7.857V.582a2.019%2c2.019%2c0%2c0%2c0%2c1.7%2c1.9H9.79c.859%2c0%2c1.421-1.046%2c1.421-1.9V-7.857ZM4.186.758H3.15V-6.709H4.186Zm2.6%2c0H5.747V-6.709H6.783Zm2.6%2c0H8.344V-6.709H9.38Z' transform='translate(-0.3 11.514)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_del_kj' transform='translate(0.7 10.514)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_95' data-name='%e7%9f%a9%e5%bd%a2 95' class='cls-1' width='16' height='16' transform='translate(-0.7 -10.514)'/%3e %3cg id='%e7%bb%84_481' data-name='%e7%bb%84 481' class='cls-2' transform='translate(1.3 -9.514)'%3e %3cpath id='%e8%b7%af%e5%be%84_278' data-name='%e8%b7%af%e5%be%84 278' class='cls-3' d='M-4.7-16.514H19.956V10.194H-4.7Z' transform='translate(-1.654 10.16)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){var i=n.find((function(t){return t.value===e})),o=i.subSelected.find((function(e){return e.value===t}));return{keyLabel:i.key,valueLabel:o.key}},o=function(e,t){return e.sort((function(e,n){return t.findIndex((function(t){return e===t.value}))-t.findIndex((function(e){return n===e.value}))}))},a=function(e,t,n,o){e.forEach((function(e){var a=i(t,e,n),r=a.keyLabel,l=a.valueLabel,c=o.find((function(e){return e.keyLabel===r}));c?c.valuesLabelArray.push(l):o.push({keyLabel:r,valuesLabelArray:[l]})}))};t.decimalReserved=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"number"===typeof e?parseFloat(e.toFixed(t)):e},t.findTagLabel=i,t.getKeyCodeNumber=function(e){return e<=57&&e>=49?e-48:e<=105&&e>=97?e-96:0},t.result2LabelKey=function(e,t){var n;try{return null!=(n=null==e?void 0:e.reduce((function(e,n){return o(Object.keys(n.result),t).forEach((function(i){var o,r=null==(o=n.result[i])?void 0:o.split(";");a(r,i,t,e)})),e}),[]))?n:[]}catch(i){return[]}},t.tagsSortThruInputList=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o,a,r;t.EStepType=void 0,(i=t.EStepType||(t.EStepType={}))[i.ANNOTATION=1]="ANNOTATION",i[i.QUALITY_INSPECTION=2]="QUALITY_INSPECTION",i[i.PRE_ANNOTATION=3]="PRE_ANNOTATION",i[i.MANUAL_CORRECTION=4]="MANUAL_CORRECTION",t.EPageTurningOperation=void 0,(o=t.EPageTurningOperation||(t.EPageTurningOperation={}))[o.Backward=0]="Backward",o[o.Forward=1]="Forward",o[o.Jump=2]="Jump",t.EDragStatus=void 0,(a=t.EDragStatus||(t.EDragStatus={}))[a.Start=0]="Start",a[a.Stop=1]="Stop",a[a.Wait=2]="Wait",t.EDragTarget=void 0,(r=t.EDragTarget||(t.EDragTarget={}))[r.Point=0]="Point",r[r.Line=1]="Line",r[r.Plane=2]="Plane",t.editStepWidth=320,t.footerHeight=40,t.headerHeight=61,t.sidebarWidth=240},function(e,t,n){"use strict";var i=n(81).default,o=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(42),r=n(32),l=n(17),c=Object.defineProperty,s=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=function(e,t,n){return t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},v=function(e,t){for(var n in t||(t={}))h.call(t,n)&&f(e,n,t[n]);if(d){var i,a=o(d(t));try{for(a.s();!(i=a.n()).done;){n=i.value;g.call(t,n)&&f(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},p=function(e,t){return s(e,u(t))},b=function(e,t,n){return new Promise((function(i,o){var a=function(e){try{l(n.next(e))}catch(t){o(t)}},r=function(e){try{l(n.throw(e))}catch(t){o(t)}},l=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(a,r)};l((n=n.apply(e,t)).next())}))},m=160,y=110,C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return b(void 0,null,i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",x(e.domElement,m,y,t));case 1:case"end":return n.stop()}}),n)})))},I=[l.EPerspectiveView.Top,l.EPerspectiveView.Left,l.EPerspectiveView.Back],x=function(e,t,n,i){if(!e)return"";var o=e.width/2-t/2,a=e.height/2-n/2,r=document.createElement("canvas");r.width=t*i,r.height=n*i;var l=r.getContext("2d");return null==l||l.drawImage(e,o,a,t,n,0,0,t*i,n*i),r.toDataURL()},w=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(t-e)/(n+1),o=new Array(n),a=0;a<n;a++)o[a]=e+i*(a+1);return o};t.getBoxesByTrackID=function(e,t,n,i){var o=[];return e.some((function(e,r){var l,c=a.jsonParser(null==e?void 0:e.result),s=null==(l=null==c?void 0:c["step_".concat(t)])?void 0:l.result,u=null==s?void 0:s.find((function(e){return e.trackID===n}));return u&&o.push(p(v({},u),{index:r})),(null==u?void 0:u.id)===i})),o},t.getViewsDataUrl=function(e,t,n){return b(void 0,null,i().mark((function a(){var r,l,c;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r=o(I),i.prev=1,r.s();case 3:if((l=r.n()).done){i.next=12;break}return c=l.value,i.next=7,e.updateCameraByBox(t,c);case 7:return i.next=9,C(e.renderer,n);case 9:t[c]=i.sent;case 10:i.next=3;break;case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(1),r.e(i.t0);case 17:return i.prev=17,r.f(),i.finish(17);case 20:case"end":return i.stop()}}),a,null,[[1,14,17,20]])})))},t.predict=function(e,t){var n=t.index-e.index-1,i=[],o={},a=["x","y","z"],l=["center","depth","height","index","rotation","width"];a.forEach((function(i){o[i]=w(e.center[i],t.center[i],n)})),l.forEach((function(i){"center"!==i&&(o[i]=w(e[i],t[i],n))}));for(var c=function(e){var n=a.reduce((function(t,n){return t[n]=o[n][e],t}),{x:0,y:0,z:0}),c=l.reduce((function(t,n){return"center"===n||(t[n]=o[n][e]),t}),p(v({},t),{id:r.uuid(),center:n}));i.push(c)},s=0;s<n;s++)c(s);return i},t.sleep=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;return new Promise((function(t){setTimeout((function(){t("")}),e)}))},t.views=I},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12.004' height='11.999' viewBox='0 0 12.004 11.999'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='icon_clearSmall_a' class='cls-1' d='M17526.469-1204.464l-.678-.678%2c1.752-1.751a.489.489%2c0%2c0%2c0-.006-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-1.039-1.043%2c1.752-1.751a.484.484%2c0%2c0%2c0%2c0-.691.489.489%2c0%2c0%2c0-.7%2c0l-1.752%2c1.751-1.037-1.038%2c1.75-1.756a.484.484%2c0%2c0%2c0%2c0-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-.682-.678a1%2c1%2c0%2c0%2c1%2c0-1.417l3.1-3.1a.972.972%2c0%2c0%2c1%2c0-1.384.981.981%2c0%2c0%2c1%2c1.387%2c0l2.422%2c2.422%2c1.736-1.732a1.47%2c1.47%2c0%2c0%2c1%2c2.076%2c0%2c1.476%2c1.476%2c0%2c0%2c1%2c0%2c2.081l-1.73%2c1.731%2c2.426%2c2.427a.98.98%2c0%2c0%2c1%2c0%2c1.386.985.985%2c0%2c0%2c1-1.391%2c0l-3.1%2c3.1a.989.989%2c0%2c0%2c1-.707.294A.987.987%2c0%2c0%2c1%2c17526.469-1204.464Z' transform='translate(-17520.656 1216.17)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12.004' height='11.999' viewBox='0 0 12.004 11.999'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23999%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='icon_clearSmall' class='cls-1' d='M17526.469-1204.464l-.678-.678%2c1.752-1.751a.489.489%2c0%2c0%2c0-.006-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-1.039-1.043%2c1.752-1.751a.484.484%2c0%2c0%2c0%2c0-.691.489.489%2c0%2c0%2c0-.7%2c0l-1.752%2c1.751-1.037-1.038%2c1.75-1.756a.484.484%2c0%2c0%2c0%2c0-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-.682-.678a1%2c1%2c0%2c0%2c1%2c0-1.417l3.1-3.1a.972.972%2c0%2c0%2c1%2c0-1.384.981.981%2c0%2c0%2c1%2c1.387%2c0l2.422%2c2.422%2c1.736-1.732a1.47%2c1.47%2c0%2c0%2c1%2c2.076%2c0%2c1.476%2c1.476%2c0%2c0%2c1%2c0%2c2.081l-1.73%2c1.731%2c2.426%2c2.427a.98.98%2c0%2c0%2c1%2c0%2c1.386.985.985%2c0%2c0%2c1-1.391%2c0l-3.1%2c3.1a.989.989%2c0%2c0%2c1-.707.294A.987.987%2c0%2c0%2c1%2c17526.469-1204.464Z' transform='translate(-17520.656 1216.17)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(62).default,o=n(28).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(215),r=n(449),l=n(25),c=n(0),s=n(25),u=n(450),d=n(45),h=n(26),g=n(453);function f(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var v=f(c),p=[a.NULL_COLOR].concat(a.COLORS_ARRAY),b=v.default.forwardRef((function(e,t){var n=v.default.useRef(),f=h.useTranslation().t,b=e.list||[],m=c.useState(!1),y=o(m,2),C=y[0],I=y[1],x=c.useState(void 0),w=o(x,2),k=w[0],S=w[1],P=i(p);!0===e.forbidDefault&&(P=P.slice(1));var L="sensebee-radio-group";e.noHeightLimit&&(L="sensebee-radio-group-no-limit-height");return v.default.createElement("div",{className:L,style:e.style},v.default.createElement(l.Radio.Group,{name:"radiogroup",defaultValue:null==e?void 0:e.selectedAttribute,value:null==e?void 0:e.selectedAttribute,onChange:function(t){return e.attributeChanged(t.target.value)},ref:t},b.map((function(t,i){var o,c,h,p=null!=(o=null==e?void 0:e.num)?o:i,b=(null==t?void 0:t.value)===(null==e?void 0:e.selectedAttribute);!0===e.forbidDefault&&"number"===typeof p&&p++,"number"===typeof p&&p<=9&&p>=0||(p="-");var m=i>8&&!e.forbidDefault?a.COLORS_ARRAY[(i-1)%a.COLORS_ARRAY.length]:P[i%P.length];(null==t?void 0:t.color)&&(m=t.color);var y=(null==(c=null==t?void 0:t.limit)?void 0:c.sizeLimit)||{},x=y.defaultSize,w=y.logicalCondition,L=y.sizeRange,A=(null==(h=null==t?void 0:t.limit)?void 0:h.positionLimit)||x||L||(null==w?void 0:w.length)>0,O=b&&A;return v.default.createElement(l.Radio,{value:t.value,ref:n,key:t.label+i},v.default.createElement("span",{className:"sensebee-radio-label",title:t.label},!(null==e?void 0:e.forbidColor)&&v.default.createElement(s.Popover,{content:v.default.createElement(u,{defaultColor:m,setColor:function(n){return function(t,n){e.updateColorConfig&&e.updateColorConfig(t,n)}(t.value,n)}}),title:v.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},v.default.createElement("span",null,f("Palette")),v.default.createElement(d.CloseOutlined,{onClick:function(){return I(!1)}})),visible:C&&k===i,onVisibleChange:function(e){e&&I(e)}},v.default.createElement(r.ColorTag,{color:m,style:{cursor:"pointer",marginRight:"8px"},onClick:function(){(null==e?void 0:e.enableColorPicker)&&(S(i),I(!0))}})),t.label),O&&v.default.createElement(g,{limit:t.limit,updateSize:null==e?void 0:e.updateSize}),v.default.createElement("span",{className:"sensebee-radio-num"},p))}))))}));t.ATTRIBUTE_COLORS=p,t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BORDER_OPACITY_LEVEL={0:0,1:.2,3:.4,5:.6,7:.8,9:1,10:1},t.CHANGE_COLOR={1:{valid:"rgba(0, 0, 255, 0.5)",select:{stroke:"rgba(0, 15, 255, 1)",fill:"rgba(0,15,255, 1)"},hover:"rgba(0, 15, 255, 0.8)",line:"rgba(102, 111, 255, 1 )"},3:{valid:"rgba(0, 255, 255, 0.5)",select:{stroke:"rgba(0, 212, 255,  1)",fill:"rgba(0,212,255, 1)"},hover:"rgba(0, 212, 255, 0.8)",line:"rgba(102, 230, 255, 1)"},5:{valid:"rgba(0, 255, 0, 0.5)",select:{stroke:"rgba(149, 255, 1)",fill:"rgba(149,255,0, 1)"},hover:"rgba(149, 255, 0, 0.8)",line:"rgba(191, 255, 102, 1)"},7:{valid:"rgba(255, 255, 0, 0.5)",select:{stroke:"rgba(255, 230, 102, 1)",fill:"rgba(255,213,0, 1)"},hover:"rgba(255, 230, 102, 0.8)",line:"rgba(255, 230, 102, 1)"},9:{valid:"rgba(255, 0, 255, 0.5)",select:{stroke:"rgba(230, 102, 255, 1)",fill:"rgba(213,0,255, 1)"},hover:"rgba(230, 102, 255, 0.8)",line:"rgba(230, 102, 255, 1)"}},t.COLORS_ARRAY=["rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"],t.DEFAULT_COLOR={valid:{stroke:"rgba(102, 111, 255, 0.6)",fill:"rgba(102, 111, 255, 0.3)"},invalid:{stroke:"rgba(255, 153, 102,1)",fill:"rgba(255, 153, 102, 0.5)"},validSelected:{stroke:"rgba(0, 15, 255, 0.8)",fill:"rgba(0, 15, 255, 0.4)"},invalidSelected:{stroke:"rgba(255,153,102,0.8)",fill:"rgba(255,153,102,0.3)"},validHover:{stroke:"rgba(0, 15, 255, 1)",fill:"rgba(0, 15, 255, 0.5)"},invalidHover:{stroke:"rgba(255,153,102,1)",fill:"rgba(255,153,102,0.5)"}},t.FILL_OPACITY_LEVEL={1:0,3:.2,5:.4,7:.6,9:.8,10:1},t.NULL_COLOR="rgba(204, 204, 204, 1)"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(36);t.useAttribute=function(){var e=i.useContext(o.PointCloudContext),t=e.topViewInstance,n=e.sideViewInstance,a=e.backViewInstance,r=e.mainViewInstance,l=e.ptSegmentInstance,c=e.defaultAttribute,s=e.setDefaultAttribute;i.useEffect((function(){if(null==t?void 0:t.toolInstance){var e=function(){s(null==t?void 0:t.toolInstance.defaultAttribute)};return null==t||t.toolInstance.on("changeAttributeSidebar",e),function(){null==t||t.toolInstance.unbind("changeAttributeSidebar",e)}}}),[null==t?void 0:t.toolInstance]);return{syncThreeViewsAttribute:function(e){[null==t?void 0:t.toolInstance,null==n?void 0:n.toolInstance,null==a?void 0:a.toolInstance].forEach((function(t){null==t||t.setDefaultAttribute(e)}))},updateDefaultAttribute:function(e){null==t||t.toolInstance.setDefaultAttribute(e)},reRenderPointCloud3DBox:function(e){null==r||r.generateBox(e)},defaultAttribute:c,updateSegmentAttribute:i.useCallback((function(e){var t,n;l&&(null==(t=l.store)||t.setAttribute(e),null==(n=l.pointCloudRender)||n.updatePointsColor(),s(e))}),[l])}}},function(e,t,n){"use strict";var i,o=n(51).default,a=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),l=n(489),c=n(490),s=n(69),u=n(261),d=n(511),h=n(265),g=n(522),f=n(269),v=n(530),p=n(531),b=n(532),m=n(543),y=n(544),C=n(545),I=n(127),x=n(26),w=n(32),k=n(36),S=n(270),P=n(17);function L(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var A=L(r),O=Object.defineProperty,T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,M=function(e,t,n){return t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},N=w.cTool,R=N.EVideoToolName,B=N.EPointCloudName,j=(o(i={},s.EToolName.Rect,u.default),o(i,s.EToolName.Tag,f.default),o(i,s.EToolName.Point,d.default),o(i,s.EToolName.Polygon,h.default),o(i,s.EToolName.Line,g.default),o(i,s.EToolName.Text,v),o(i,R.VideoTagTool,p),o(i,B.PointCloud,b.default),o(i,B.PointCloud+"_POLYGON",b.pointCloudShortCutTable_POLYGON),o(i,B.PointCloud+"_SEGMENT",b.pointCloudShortCutTable_SEGMENT),o(i,s.EToolName.ScribbleTool,m),o(i,s.EToolName.Cuboid,y),o(i,s.EToolName.LLM,C.default),i),_=function(e){var t=e.icon;return"string"===typeof t?A.default.createElement("img",{width:16,height:16,src:t}):t||null},H=function(e){e.title;var t=e.style,n=e.shortCutList,i=x.useTranslation().t,o={width:320,display:"flex",justifyContent:"space-between",margin:16},a={display:"block",padding:"0 3px",minWidth:"20px",marginRight:"3px",border:"1px solid rgba(204,204,204,1)",verticalAlign:"middle",fontSize:"12px",textAlign:"center"},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"+";if(!e)return null;var i=e.map((function(i,o){var r,l,c={display:"flex",alignItems:"center"};return t?A.default.createElement("span",{key:o,style:c},A.default.createElement("span",{style:a,dangerouslySetInnerHTML:{__html:i}})):o<e.length-1?"number"===typeof i?A.default.createElement("span",{key:o,style:c},A.default.createElement("span",{style:a},i),A.default.createElement("span",{style:{marginRight:"3px"}},"~")):(null==(r=null==i?void 0:i.startsWith)?void 0:r.call(i,"data"))?A.default.createElement("span",{key:o,style:c},A.default.createElement("span",{className:"shortCutButton",style:{marginRight:"3px"}},A.default.createElement("img",{width:16,height:23,src:i})),A.default.createElement("span",{style:{marginRight:"3px"}},"+")):A.default.createElement("span",{key:o,style:c},A.default.createElement("span",{style:a},i),A.default.createElement("span",{style:{marginRight:"3px"}},n)):"number"===typeof i?A.default.createElement("span",{key:o,style:c},A.default.createElement("span",{style:a},i)):(null==(l=null==i?void 0:i.startsWith)?void 0:l.call(i,"data"))?A.default.createElement("span",{className:"shortCutButton",key:o,style:{marginRight:"3px"}},A.default.createElement("img",{width:16,height:23,src:i})):A.default.createElement("span",{style:a,key:o},i)}));return A.default.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"}},i)},s=A.default.createElement("div",{className:"".concat(I.footerCls,"__hotkey-content")},null==n?void 0:n.map((function(e,t){return function(e,t){return A.default.createElement("div",{style:o,key:t},A.default.createElement("span",{style:{display:"flex",alignItems:"center"}},A.default.createElement(_,{icon:e.icon}),A.default.createElement("span",{style:{marginLeft:e.icon?16:0}},i(e.name))),A.default.createElement("span",{style:{display:"flex",alignItems:"center"}},e.noticeInfo&&A.default.createElement("span",{style:{marginRight:"5px",color:"#CCCCCC"}},i(e.noticeInfo)),r(e.shortCut,e.shortCutUseHtml,e.linkSymbol)))}(e,t)}))),u=t||{};return A.default.createElement(S,{hoverIcon:c,icon:l,title:i("Hotkeys"),content:s,containerStyle:u})};t.ToolHotKeyCom=H,t.default=function(e){var t=e.style,n=e.title,i=e.toolName,o=r.useContext(k.PointCloudContext),l=o.pointCloudPattern,c=o.globalPattern;if(!i)return null;if(!j[i])return null;var u=i;switch(c){case P.EPointCloudPattern.Detection:switch(l){case s.EToolName.Polygon:u+="_POLYGON";break;case s.EToolName.Line:u=s.EToolName.Line;break;case s.EToolName.Point:u=s.EToolName.Point}break;case P.EPointCloudPattern.Segmentation:u=B.PointCloud+"_SEGMENT"}var d={style:t,title:n,shortCutList:j[u]};return A.default.createElement(H,function(e,t){for(var n in t||(t={}))E.call(t,n)&&M(e,n,t[n]);if(T){var i,o=a(T(t));try{for(o.s();!(i=o.n()).done;)n=i.value,D.call(t,n)&&M(e,n,t[n])}catch(r){o.e(r)}finally{o.f()}}return e}({},d))},t.shortCutTable=j},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(36);t.useZoom=function(){var e=i.useContext(o.PointCloudContext),t=e.topViewInstance,n=e.sideViewInstance,a=e.backViewInstance,r=i.useContext(o.PointCloudContext);return{zoom:r.zoom,setZoom:r.setZoom,initialPosition:function(){null==t||t.toolInstance.initImgPos()},zoomOut:function(){null==t||t.toolInstance.zoomChanged(!1)},zoomIn:function(){null==t||t.toolInstance.zoomChanged(!0)},syncTopviewToolZoom:function(e,n,i){null==t||t.toolScheduler.syncPosition(e,n,i,null==t?void 0:t.toolInstance)},syncSideviewToolZoom:function(e,t,i){null==n||n.toolScheduler.syncPosition(e,t,i,null==n?void 0:n.toolInstance)},syncBackviewToolZoom:function(e,t,n){null==a||a.toolScheduler.syncPosition(e,t,n,null==a?void 0:a.toolInstance)}}}},function(e,t,n){"use strict";var i=n(28).default,o=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),r=n(0),l=n(36),c=n(32),s=n(63),u=n(26);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(r),g=Object.defineProperty,f=Object.defineProperties,v=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=function(e,t,n){return t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},C=function(e,t){for(var n in t||(t={}))b.call(t,n)&&y(e,n,t[n]);if(p){var i,a=o(p(t));try{for(a.s();!(i=a.n()).done;){n=i.value;m.call(t,n)&&y(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},I=function(e,t){return f(e,v(t))},x={color:"white",backgroundColor:"rgba(153, 153, 153, 0.3)",padding:"8px 10px",zIndex:20,fontSize:12};t.BoxInfos=function(e){var t=e.checkMode,n=e.config,o=e.style,d=h.default.useContext(l.PointCloudContext),g=s.useSingleBox().selectedBox,f=r.useState([]),v=i(f,2),p=v[0],b=v[1],m=u.useTranslation(),y=m.t,w=m.i18n,k=o;return r.useEffect((function(){var e;if(g){var i=a.PointCloudUtils.transferBox2Kitti(g.info),o=i.length,r=i.width,l=i.height,s=i.rotation_y,u=g.info.center,h=u.x,f=u.y,v=u.z,p=[{label:"x",value:h.toFixed(2)},{label:"y",value:f.toFixed(2)},{label:"z",value:v.toFixed(2)},{label:y("Length"),value:o.toFixed(2)},{label:y("Width"),value:r.toFixed(2)},{label:y("Height"),value:l.toFixed(2)},{label:y("Rotation_y"),value:c.UnitUtils.rad2deg(s).toFixed(2)}];null==(e=d.mainViewInstance)||e.filterPointsByBox(g.info).then((function(e){if(e){if(p.push({label:y("PointCount"),value:"".concat(e.num)}),!0===t&&g.info.subAttribute&&n)a.PointCloudUtils.getSubAttributeName(g.info.subAttribute,n).forEach((function(e){return p.push(e)}));b(p)}else b(p)}))}}),[g,w.language]),g?h.default.createElement("div",{style:o||I(C({position:"absolute"},x),{right:8,bottom:8})},p.map((function(e){return k?h.default.createElement("div",{key:e.label,style:{margin:"0px 4px"}},"".concat(e.label,": ").concat(e.value)):h.default.createElement("div",{key:e.label},h.default.createElement("span",{style:{width:"38px",display:"inline-block",textAlign:"end"}},e.label),": ",h.default.createElement("span",null,e.value))}))):null},t.PointCloudValidity=function(){var e=h.default.useContext(l.PointCloudContext),t=u.useTranslation().t;return!1===e.valid?h.default.createElement("div",{style:{position:"absolute",backgroundColor:"rgb(242, 101, 73)",color:"white",opacity:.7,left:0,top:0,fontSize:30,padding:"8px 16px",zIndex:20,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},t("Invalid")):null},t.SizeInfoForView=function(e){var t=e.perspectiveView,n=h.default.useContext(l.PointCloudContext),i=n.pointCloudBoxList,o=n.selectedID,r=i.find((function(e){return e.id===o})),c=u.useTranslation().t;if(o&&r){var s=a.PointCloudUtils.transferBox2Kitti(r),d=s.length,g=s.width,f=s.height,v=t===a.EPerspectiveView.Back?[{label:c("Width"),value:g},{label:c("Height"),value:f}]:[{label:c("Length"),value:d},{label:c("Height"),value:f}];return h.default.createElement("div",{style:I(C({position:"absolute"},x),{bottom:"4%",left:"50%",transform:"translate(-50%, 0)"})},v.map((function(e,t){return h.default.createElement("span",{key:t,style:{marginRight:0===t?16:0}},"".concat(e.label,": ").concat(e.value.toFixed(2)))})))}return null}},,,,,,,,function(e,t,n){"use strict";var i=n(28).default,o=n(34).default,a=n(0),r=n(32),l=n(25),c=n(405);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(a),d=Object.defineProperty,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=function(e,t,n){return t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},p=function(e,t){for(var n in t||(t={}))g.call(t,n)&&v(e,n,t[n]);if(h){var i,a=o(h(t));try{for(a.s();!(i=a.n()).done;){n=i.value;f.call(t,n)&&v(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},b={width:455,height:100},m=u.default.forwardRef((function(e,t){var n,o,s=e.src,d=e.annotations,h=void 0===d?[]:d,g=e.style,f=void 0===g?{stroke:"blue",thickness:3}:g,v=e.zoomChange,m=e.backgroundStyle,y=void 0===m?{}:m,C=e.onChange,I=e.showLoading,x=void 0!==I&&I,w=e.globalStyle,k=e.afterImgOnLoad,S=function(e){if(!e)return b;if(e.width&&e.height)return e;var t=p({},e);return t.width||(t.width=b.width),t.height||(t.height=b.height),t}(e.size),P=a.useState(!1),L=i(P,2),A=L[0],O=L[1],T=a.useRef(null),E=a.useRef(),D=c(k);a.useImperativeHandle(t,(function(){var e=E.current;return e?{zoomIn:function(){return e.zoomChanged(!0)},zoomOut:function(){return e.zoomChanged(!1)},initImgPos:function(){return e.initImgPos()},toolInstance:e}:{}}),[E.current]),a.useEffect((function(){return T.current&&(E.current=new r.ViewOperation({container:T.current,size:S,style:f,annotations:h,config:"{}",zoomInfo:e.zoomInfo}),E.current.init()),function(){var e;null==(e=E.current)||e.destroy()}}),[]),a.useEffect((function(){var e;E.current&&(O(!0),null==(e=E.current)||e.setLoading(!0),r.ImgUtils.load(s).then((function(e){var t,n;null==(t=E.current)||t.setLoading(!1),O(!1),null==(n=E.current)||n.setImgNode(e),D.current&&D.current(e)})).catch((function(){var e;null==(e=E.current)||e.setLoading(!1),O(!1)})))}),[s]),a.useEffect((function(){E.current&&E.current.updateData(h)}),[h]),a.useEffect((function(){var e=E.current;(null==e?void 0:e.setSize)&&(e.setSize(S),e.initPosition())}),[null==(n=e.size)?void 0:n.width,null==(o=e.size)?void 0:o.height]),a.useEffect((function(){var e,t;return E.current&&(null==(e=E.current)||e.on("onChange",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==C||C.apply(null,t)})),null==(t=E.current)||t.on("renderZoom",(function(e){v&&v(e)}))),function(){var e,t;null==(e=E.current)||e.unbindAll("onChange"),null==(t=E.current)||t.unbindAll("renderZoom")}}),[v,C]);var M=u.default.createElement("div",{ref:T,style:p(p({position:"relative"},S),y)});return u.default.createElement(l.Spin,{spinning:x||A,delay:300,style:w},M)}));e.exports=m},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(51).default,o=n(34).default,a=n(0),r=n(25),l=n(143),c=n(41),s=n(5),u=n(26),d=n(17);function h(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var g=h(a),f=h(s),v=Object.defineProperty,p=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=function(e,t,n){return t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},C="".concat(c.prefix,"-LLMView"),I=function(e){var t=e.hoverKey,n=e.question,o=e.answerList,c=e.lang,s=u.useTranslation().t;return a.useEffect((function(){var e;c&&(null==(e=d.i18n)||e.changeLanguage(c))}),[]),g.default.createElement("div",{className:C},g.default.createElement("div",{className:"".concat(C,"__textBox"),style:{borderBottom:"1px solid #EBEBEB"}},g.default.createElement("div",{className:"".concat(C,"__title")},s("Title")),g.default.createElement("div",{className:"".concat(C,"__content")},g.default.createElement(l,{wordCount:200,text:n}))),g.default.createElement("div",{className:"".concat(C,"__textBox")},g.default.createElement("div",{className:"".concat(C,"__title")},s("Answer")),o.map((function(e,n){var o;return g.default.createElement("div",{className:f.default((o={},i(o,"".concat(C,"__content"),!0),i(o,"".concat(C,"__contentActive"),t===(null==e?void 0:e.order)),o)),key:n},g.default.createElement(r.Tag,{style:{color:"#666FFF",background:"#eeefff",height:"20px",padding:"0px 8px",border:"none"}},null==e?void 0:e.order),g.default.createElement(l,{wordCount:1e3,text:null==e?void 0:e.answer}))}))))};e.exports=function(e){return g.default.createElement(u.I18nextProvider,{i18n:d.i18n},g.default.createElement(I,function(e,t){for(var n in t||(t={}))b.call(t,n)&&y(e,n,t[n]);if(p){var i,a=o(p(t));try{for(a.s();!(i=a.n()).done;)n=i.value,m.call(t,n)&&y(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},e)))}},,,function(e,t,n){"use strict";var i=n(28).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(210),a=n(32),r=n(0),l=n(35),c=n(49),s=n(25),u=n(30);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(r),g=a.cKeyCode.default,f=h.default.createContext({width:window.innerWidth,height:window.innerHeight}),v=function(e){var t=e.children,n=e.dispatch,o=e.annotation,l=o.skipBeforePageTurning,u=o.checkMode,d=r.useState(window.innerWidth),v=i(d,1)[0],p=r.useState(window.innerHeight),b=i(p,1)[0],m=function(t){var i;if(a.toolUtils.hotkeyFilter(t)&&!u){if(!t.shiftKey&&!t.ctrlKey){if(t.keyCode===g.A){if(l)return void l((function(){return n(c.PageBackward())}));n(c.PageBackward())}if(t.keyCode===g.D){if(l)return void l((function(){return n(c.PageForward())}));n(c.PageForward())}t.keyCode===g.R&&n(c.UpdateRotate()),t.keyCode===g.C&&!0===t.altKey&&n(c.CopyBackWordResult())}if(!0===t.shiftKey&&!0===t.ctrlKey&&!0===t.altKey&&t.keyCode===g.C){s.message.success("DEVELOPMENT TESTING - Switch Last Two Canvas");var o=null==(i=e.annotation)?void 0:i.annotationEngine.switchLastTwoCanvas();if(!o)return;n(c.UpdateToolInstance(o))}}};r.useEffect((function(){return window.addEventListener("keydown",m),function(){window.removeEventListener("keydown",m)}}),[e.annotation.annotationEngine,e.annotation.skipBeforePageTurning,u]);var y=r.useMemo((function(){return{width:v,height:b}}),[v,b]);return h.default.createElement(f.Provider,{value:y},t)},p=l.connect((function(e){return{annotation:e.annotation}}),null,null,{context:u.LabelBeeContext})(v);t.ViewportProvider=p,t.ViewportProviderComponent=v,t.getFormatSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.width,a=e.height,r=o.headerHeight+o.footerHeight,l=n?40+r+40:r,c=t?o.editStepWidth+o.sidebarWidth:o.sidebarWidth;return{width:i-c,height:a-l}},t.viewportContext=f},function(e,t,n){"use strict";var i=n(83).default,o=n(84).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(44),r=function(){function e(){i(this,e)}return o(e,null,[{key:"jsonParser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return"string"===typeof e?JSON.parse(e):a.isObject(e)?e:t}catch(n){return t}}}]),e}();r.getStepConfig=function(e,t){return e.find((function(e){return e.step===t}))},t.ConfigUtils=r},function(e,t,n){"use strict";var i=n(45),o=n(25),a=n(0),r=n(26);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=l(a);e.exports=function(e){var t=e.width,n=e.height,a=e.reloadImage,l=e.hideSetInvalidTips,s=e.ignoreOffsetY,u=e.backgroundColor,d=e.fileType,h=void 0===d?"image":d,g=r.useTranslation().t,f=s?0:40,v=e.layerStyle||{position:"absolute",left:0,top:f,cursor:"initial",zIndex:20,fontSize:12};t&&n?Object.assign(v,{width:t,height:n}):Object.assign(v,{bottom:0,right:0}),u&&Object.assign(v,{backgroundColor:u});return c.default.createElement("div",{style:v},c.default.createElement("div",{style:{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%, -50%)"}},c.default.createElement("div",{style:{textAlign:"center",marginBottom:10}},c.default.createElement(o.Button,{type:"primary",shape:"circle",icon:c.default.createElement(i.ReloadOutlined,null),onClick:a})),c.default.createElement("div",null,"".concat(g("".concat(h,"ErrorAndReload"))).concat(l?"":g("orMaskAsInvalid")))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(73);t.InitToolStyleConfig=function(){return{type:i.TOOL_STYLE_ACTIONS.INIT_TOOL_STYLE_CONFIG,payload:void 0}},t.UpdateToolStyleConfig=function(e){return{type:i.TOOL_STYLE_ACTIONS.UPDATE_TOOL_STYLE_CONFIG,payload:e}}},function(e,t,n){"use strict";var i=n(0),o=n(25),a=n(41);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(i);e.exports=function(e){var t=e.path,n=e.tips;return t||n?l.default.createElement("div",{className:"".concat(a.prefix,"-tips")},l.default.createElement(o.Tooltip,{placement:"bottomRight",title:n},l.default.createElement("span",{className:"".concat(a.prefix,"-tips__leftContent"),title:n},n)),l.default.createElement(o.Tooltip,{placement:"bottomRight",title:t},l.default.createElement("span",{className:"".concat(a.prefix,"-tips__path")},t))):null}},function(e,t,n){"use strict";var i=n(83).default,o=n(84).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(69),r=n(17),l="^[0-9]+$",c="^[A-Za-z]+$",s=function(){function e(){i(this,e)}return o(e,null,[{key:"checkString",value:function(e,t){var n="";switch(e){case a.ETextType.Order:case a.ETextType.NumberOnly:n=l;break;case a.ETextType.EnglishOnly:n=c;break;case a.ETextType.CustomFormat:n=t}return n}},{key:"getErrorNotice",value:function(e){switch(e){case a.ETextType.Order:case a.ETextType.NumberOnly:return r.i18n.t("TextCheckNumberOnly");case a.ETextType.EnglishOnly:return r.i18n.t("TextCheckEnglishOnly");case a.ETextType.CustomFormat:return r.i18n.t("TextCheckCustomFormat");default:return""}}}]),e}();t.REGEXP_ENGLISH=c,t.REGEXP_NUMBER=l,t.TextUtils=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(73);function o(e){return{type:i.IMAGE_ATTRIBUTE_ACTIONS.UPDATE_IMG_ATTRIBUTE,payload:e}}function a(){return{type:i.IMAGE_ATTRIBUTE_ACTIONS.INIT_IMG_ATTRIBUTE,payload:{}}}var r={UpdateImgAttribute:o,InitImgAttribute:a};t.InitImgAttribute=a,t.UpdateImgAttribute=o,t.default=r},function(e,t,n){"use strict";var i=n(28).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(214),a=n(455),r=n(45),l=n(25),c=n(44),s=n(0),u=n(213),d=n(212),h=n(32),g=n(35),f=n(26),v=n(30);function p(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var b=p(s),m=l.Collapse.Panel,y=function(e){var t=e.isActive;return b.default.createElement(r.CaretRightOutlined,{rotate:t?90:0})};var C=g.connect((function(e){return{toolInstance:e.annotation.toolInstance,imgIndex:e.annotation.imgIndex}}),null,null,{context:v.LabelBeeContext})((function(e){var t=e.toolInstance,n=e.imgIndex,r=s.useState([]),g=i(r,2),v=g[0],p=g[1],C=s.useRef(null),I=s.useState(0),x=i(I,2)[1],w=s.useState(-1),k=i(w,2),S=k[0],P=k[1],L=f.useTranslation().t;s.useEffect((function(){t&&(p(t.config.inputList.map((function(e){return e.value}))),t.singleOn("render",(function(){x((function(e){return e+1}))})))}),[t]),s.useEffect((function(){if(t&&(t.singleOn("expend",A),1===t.labelSelectedList.length)){for(var e=0,n=0;n<t.labelSelectedList[0];n++)e+=46,E[n]&&""!==v[n]&&E[n].subSelected.forEach((function(t){e+=40}));C.current&&(C.current.children[0].scrollTop=e)}})),s.useEffect((function(){C.current&&(C.current.children[0].scrollTop=0)}),[n]);var A=function(){var e,n=t.labelSelectedList[0],i=null==(e=E.filter((function(e,t){return t===n}))[0])?void 0:e.value;O(n,i,!0)},O=s.useCallback((function(e,t,n){var i=c.cloneDeep(v);""===i[e]||!0===n?i[e]=t:i[e]="",p(i)}),[v]);if(!t)return null;var T=t.labelSelectedList,E=t.config.inputList,D=t.currentTagResult,M=t.setLabel,N=function(e){return T.length>0&&T[0]===e?b.default.createElement("span",{className:"keyDownIconActive"},e+1):b.default.createElement("span",{className:"keyDownIcon"},e+1)},R=window.innerHeight-61-80;return b.default.createElement("div",{className:"tagOperationMenu",ref:C},0===(null==E?void 0:E.length)?b.default.createElement("div",{style:{padding:20,textAlign:"center"}},L("NoConfiguration")):b.default.createElement("div",{className:"main",style:{height:R}},function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n?n.map((function(n,r){var c,s,g,f,p;if(n.subSelected){var C=h.TagUtils.judgeResultIsInInputList(n.value,null==(c=null==D?void 0:D.result)?void 0:c[n.value],E);return b.default.createElement(l.Collapse,{bordered:!1,expandIcon:y,key:"collapse_".concat(r,"_").concat(i+1),onChange:function(){return O(r,n.value)},activeKey:[v[r]]},b.default.createElement(m,{header:b.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flex:1}},b.default.createElement("span",null,n.key,b.default.createElement(l.Tooltip,{placement:"bottom",title:L("ClearThisOption")},b.default.createElement("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(e){e.stopPropagation(),t.clearResult(!0,n.value)},src:S===r||C?d:u,onMouseEnter:function(){P(r)},onMouseLeave:function(){P(-1)}})),C&&""===v[r]&&b.default.createElement(l.Badge,{color:"#87d068"})),(null==E?void 0:E.length)>1&&N(r)),key:n.value},b.default.createElement("div",{className:"level",style:{backgroundColor:T.length>0&&T[0]===r?"rgba(158, 158, 158, 0.18)":""}},e(n.subSelected,r))))}var I=(null==E?void 0:E[i])?null==E?void 0:E[i].value:0,x=(null==(f=null==(g=null==(s=null==D?void 0:D.result)?void 0:s[I])?void 0:g.split(";"))?void 0:f.indexOf(n.value))>-1?n.value:"";return!0===(null==(p=null==E?void 0:E[i])?void 0:p.isMulti)?b.default.createElement("div",{className:"singleBar",key:"".concat(I,"_").concat(i,"_").concat(r)},b.default.createElement(a,{attributeChanged:function(){return M(i,r)},selectedAttribute:[x],list:[{value:n.value,label:n.key}],num:r+1})):b.default.createElement("div",{className:"singleBar",key:"".concat(I,"_").concat(i,"_").concat(r)},b.default.createElement(o.default,{forbidColor:!0,attributeChanged:function(){return M(i,r)},selectedAttribute:x,list:[{value:n.value,label:n.key}],num:r+1}))})):null}(E)))}));t.default=C,t.expandIconFuc=y},function(e,t,n){"use strict";var i=n(51).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(69),a=n(0),r=n(144),l=n(458),c=n(459),s=n(460),u=n(461),d=n(462),h=n(463),g=n(464),f=n(465),v=n(32),p=n(5),b=n(26);function m(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var y=m(a),C=m(p),I=v.cTool,x=I.EPointCloudName,w=I.TOOL_NAME,k=I.TOOL_NAME_EN,S=[{toolName:o.EToolName.Rect,commonSvg:g,selectedSvg:f},{toolName:o.EToolName.Polygon,commonSvg:h,selectedSvg:d},{toolName:o.EToolName.Line,commonSvg:l,selectedSvg:c},{toolName:o.EToolName.Point,commonSvg:s,selectedSvg:u}];t.ToolIcons=function(e){var t=e.toolName,n=e.selectedToolName,a=e.onChange,l=b.useTranslation().i18n,c=null==S?void 0:S.filter((function(e){return t===x.PointCloud?[o.EToolName.Polygon,o.EToolName.Rect,o.EToolName.Point,o.EToolName.Line].includes(null==e?void 0:e.toolName):(null==e?void 0:e.toolName)===t})),s=c.length>1;return y.default.createElement("div",{className:"".concat(r.sidebarCls,"__level")},c.map((function(e){var t,o=s&&n===e.toolName;return y.default.createElement("span",{className:"".concat(r.sidebarCls,"__toolOption"),key:e.toolName,onClick:function(){return null==a?void 0:a(e.toolName)}},y.default.createElement("img",{className:"".concat(r.sidebarCls,"__singleTool"),src:o?null==e?void 0:e.selectedSvg:null==e?void 0:e.commonSvg}),y.default.createElement("span",{className:C.default(i({},"".concat(r.sidebarCls,"__toolOption__selected"),o))},(t=l.language,"en"===t?k:w)[e.toolName]))})))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='24.000000' height='24.000000' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cmask id='mask1_15945' mask-type='alpha' maskUnits='userSpaceOnUse' x='0.000000' y='0.000000' width='24.000000' height='24.000000'%3e %3crect id='Frame 1312316543 (Background/Mask)' width='24.000000' height='24.000000' fill='%23999999'/%3e %3c/mask%3e %3cg mask='url(%23mask1_15945)'%3e %3cpath id='Vector 197' d='M6.82031 21.1879C7.30859 20.8242 7.65674 20.4422 7.89697 20.0767C8.56055 19.0654 7.91553 17.8707 7.32861 16.813C6.78955 15.8416 6.34033 14.9126 5.68604 14.0402C3.5 11.1254 3.98877 7.18506 6.86133 4.94373C9.97998 2.51038 13.4199 2.427 15.9365 3.36963C16.5493 3.59912 17.186 3.94055 17.7881 4.3363C20.1196 5.86804 21.0063 8.93555 19.5503 11.3146C17.5649 14.5581 13.4385 15.5564 10.3657 15.641' stroke='%23999999' stroke-width='1.995000' stroke-linejoin='round' stroke-linecap='round' stroke-dasharray='0 0'/%3e %3c/g%3e %3cg mask='url(%23mask1_15945)'%3e %3cpath id='Vector 198' d='M4.979 17.3167C3.92969 16.8472 3.81592 15.4429 4.79492 14.8404C5.9707 14.1169 7.58301 13.7576 9.354 14.7828C10.374 15.3734 10.4321 16.5123 9.39893 17.0798C8.32764 17.6683 6.73828 18.1039 4.979 17.3167Z' stroke='%23999999' stroke-width='1.895129' stroke-linejoin='round' stroke-dasharray='0 0'/%3e %3c/g%3e %3cdefs/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='24.000000' height='24.000000' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cmask id='mask1_15950' mask-type='alpha' maskUnits='userSpaceOnUse' x='0.000000' y='0.000000' width='24.000000' height='24.000000'%3e %3crect id='Frame 1312316549 (Background/Mask)' width='24.000000' height='24.000000' fill='%23C4C4C4'/%3e %3c/mask%3e %3cg mask='url(%23mask1_15950)'%3e %3ccircle id='Ellipse 1677' cx='12.000000' cy='12.000000' r='9.000000' stroke='%23999999' stroke-width='2.000000' stroke-dasharray='0 0'/%3e %3c/g%3e %3cg mask='url(%23mask1_15950)'%3e %3ccircle id='Ellipse 1678' cx='12.000000' cy='12.000000' r='4.000000' fill='%23999999'/%3e %3c/g%3e %3cdefs/%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(30),a=n(73);t.useCustomToolInstance=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.basicInfo,r=o.useDispatch(),l={valid:null==(e=null==n?void 0:n.valid)||e,exportData:function(){return[[],{}]},exportCustomData:function(){return{}},clearResult:function(){},singleOn:function(){},on:function(){},unbind:function(){},setResult:function(){},history:{initRecord:function(){},pushHistory:function(){}},setDefaultAttribute:function(e){},setForbidOperation:function(){},setShowDefaultCursor:function(){},setSubAttribute:function(e,t){},setValid:function(){},updateRotate:function(){},redo:function(){},undo:function(){},setPointCloudGlobalPattern:function(e){}},c=i.useRef(l),s=function(e){r({type:a.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:e}})},u=function(){r({type:a.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:void 0}})},d=function(){Object.assign(c.current,l)};return i.useEffect((function(){return s(c.current),function(){u()}}),[]),{toolInstanceRef:c,clearToolInstance:d}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(491),o=n(492),a=n(110),r=n(493),l=n(111),c=n(494),s=n(147),u=n(70),d={name:"AnnotateRect",icon:i,shortCut:[a,a]},h={name:"AnnotateInvalidRect",icon:o,shortCut:[a,"Ctrl",a]},g={name:"SelectRect",icon:r,shortCut:[l],noticeInfo:"RightClick"},f={name:"ToggleRectEffectiveness",icon:c,shortCut:["F"]},v={name:"ToggleRectEffectiveness",icon:c,shortCut:["Ctrl",a]},p={name:"DeleteRect",icon:s,shortCut:[l],noticeInfo:"SelectAndDoubleClick"},b=[d,h,g,f,v,p,u.revoke,u.restore,u.rotate,u.scale,u.backward,u.forward,u.dargWithRightClick,u.tabChangeSelected,u.tabReverseChangeSelected];t.changeValid=f,t.changeValidByClick=v,t.default=b,t.deleteRect=p,t.drawInvalidRect=h,t.drawRect=d,t.selectRect=g},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_next_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M8.268%2c6.632.7.1A.428.428%2c0%2c0%2c0%2c0%2c.47V13.53a.428.428%2c0%2c0%2c0%2c.7.368l7.572-6.53A.5.5%2c0%2c0%2c0%2c8.268%2c6.632Z' transform='translate(4 1)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_277' data-name='%e8%b7%af%e5%be%84 277' class='cls-1' d='M6.857-116.857h-3.3v1.4L0-118l3.556-2.54v1.4h3.3v-3.3H9.143v3.3h3.3v-1.4L16-118l-3.556%2c2.54v-1.4h-3.3v3.3h1.4L8-110l-2.54-3.556h1.4ZM8-126l2.54%2c3.556H5.46Z' transform='translate(0 126)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_276' data-name='%e8%b7%af%e5%be%84 276' class='cls-2' d='M-37-137.6h25.4V-163H-37Z' transform='translate(37 163)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_move_kj' transform='translate(1 128)'%3e %3cg id='%e7%bb%84_475' data-name='%e7%bb%84 475' class='cls-3' transform='translate(-1 -128)'%3e %3cg id='%e7%bb%84_474' data-name='%e7%bb%84 474' class='cls-4' transform='translate(-4.698 -4.698)'%3e %3cpath id='%e8%b7%af%e5%be%84_275' data-name='%e8%b7%af%e5%be%84 275' class='cls-5' d='M-5-131H12.27v17.27H-5Z' transform='translate(9.063 135.064)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M2.1-1.769a.381.381%2c0%2c0%2c1-.382-.382h0V-7.087A.381.381%2c0%2c0%2c1%2c2.1-7.469H8.4a.381.381%2c0%2c0%2c1%2c.382.382h0V-2.15a.381.381%2c0%2c0%2c1-.382.382H2.1Zm.525-.906H7.874V-6.562H2.627Z' transform='translate(-1.721 7.469)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M17.723-5.652A4.782%2c4.782%2c0%2c0%2c0%2c19.561-9.4l.763%2c0a.093.093%2c0%2c0%2c0%2c.073-.15l-1.2-1.526a.094.094%2c0%2c0%2c0-.147%2c0L17.841-9.555a.093.093%2c0%2c0%2c0%2c.073.15h.762a4.019%2c4.019%2c0%2c0%2c1-.03.463%2c3.888%2c3.888%2c0%2c0%2c1-.461%2c1.419A3.9%2c3.9%2c0%2c0%2c1%2c17.179-6.35a3.884%2c3.884%2c0%2c0%2c1-1.381.693%2c3.887%2c3.887%2c0%2c0%2c1-1.488.106c-.064-.008-.129-.017-.192-.029v.893A4.752%2c4.752%2c0%2c0%2c0%2c17.723-5.652Z' transform='translate(-14.118 11.118)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='c'%3e%3cpath d='M19.678-21a.381.381%2c0%2c0%2c1%2c.382.382h0v4.937a.381.381%2c0%2c0%2c1-.382.382h-6.3A.381.381%2c0%2c0%2c1%2c13-15.682h0v-4.937A.381.381%2c0%2c0%2c1%2c13.382-21h6.3Zm-.525.906H13.906v3.887h5.247Z' transform='translate(-13 21)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='d'%3e%3cpath d='M3.673-17.359a4.782%2c4.782%2c0%2c0%2c0-1.839%2c3.751l-.763%2c0a.093.093%2c0%2c0%2c0-.073.15l1.2%2c1.526a.094.094%2c0%2c0%2c0%2c.147%2c0l1.206-1.528a.093.093%2c0%2c0%2c0-.073-.15H2.72a4.017%2c4.017%2c0%2c0%2c1%2c.03-.463%2c3.888%2c3.888%2c0%2c0%2c1%2c.461-1.419%2c3.9%2c3.9%2c0%2c0%2c1%2c1.005-1.173A3.884%2c3.884%2c0%2c0%2c1%2c5.6-17.354a3.887%2c3.887%2c0%2c0%2c1%2c1.488-.106c.064.008.129.017.192.029v-.893A4.752%2c4.752%2c0%2c0%2c0%2c3.673-17.359Z' transform='translate(-0.978 18.372)' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(-957 -603)'%3e%3crect width='16' height='16' transform='translate(957 603)' fill='none'/%3e%3cg transform='translate(956.022 624)'%3e%3cg transform='translate(1.545 -10.994)' clip-path='url(%23a)'%3e%3cpath d='M11.412.863H-3.279V-12.469H11.412Z' transform='translate(-0.537 8.653)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(10.679 -13.779)' clip-path='url(%23b)'%3e%3cpath d='M23.049-16.118V-2.007H9.118V-16.118Z' transform='translate(-12.934 12.302)' fill='%23666'/%3e%3c/g%3e%3crect width='6' height='5' transform='translate(10.652 -20.897)' fill='%23ccc'/%3e%3cg transform='translate(9.826 -21)' clip-path='url(%23c)'%3e%3cpath d='M8-26H22.691v13.331H8Z' transform='translate(-11.816 22.184)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(0.978 -18.995)' clip-path='url(%23d)'%3e%3cpath d='M-4.022-9.261V-23.372H9.909V-9.261Z' transform='translate(0.206 19.556)' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(266),o=n(515),a=n(516),r=n(517),l=n(518),c=n(110),s=n(111),u=n(267),d=n(519),h=n(268),g=n(520),f=n(521),v=n(70),p={name:"AnnotatePolygon",icon:i,shortCut:[c]},b={name:"AnnotateInvalidPolygon",icon:o,shortCut:["Ctrl",c]},m={name:"SelectPolygon",icon:a,shortCut:[s],noticeInfo:"RightClick"},y={name:"TogglePolygonEffectiveness",icon:r,shortCut:["F"]},C={name:"DeletePolygon",icon:l,shortCut:["Del"]},I={name:"ContinueToLabel",icon:u,shortCut:["Space"]},x={name:"InsertPoint",icon:d,noticeInfo:"SelectAndDoubleClick",shortCut:[c]},w={name:"DeletePoint",icon:l,noticeInfo:"SelectAndDoubleClick",shortCut:[s]},k={name:"StopAdsorption",icon:h,noticeInfo:"Press",shortCut:["Alt"]},S={name:"CropOverlapArea",icon:g,noticeInfo:"",shortCut:["ALT","X"]},P={name:"CombineOverlapArea",icon:f,noticeInfo:"",shortCut:["Alt","Z"]},L=[p,b,m,y,C,I,x,w,k,v.revoke,v.restore,v.rotate,v.scale,v.backward,v.forward,v.setValid,v.dargWithRightClick,v.dargWithLeftClick,v.tabChangeSelected,v.tabReverseChangeSelected,P,S];t.changePolygonAttribute=y,t.combinePolygon=P,t.default=L,t.deletePolygon=C,t.deletePolygonPoint=w,t.insertPolygonPoint=x,t.invalidPolygon=b,t.keepLine=I,t.polygon=p,t.selectedPolygon=m,t.splitPolygon=S,t.suspendAbsorption=k},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygon_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2%2c .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-2 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-4' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-4' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineCont_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-3 %7b fill: none%3b %7d .cls-2%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_unGrip_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_14' data-name='%e5%87%8f%e5%8e%bb 14' class='cls-2' d='M12806.69-12915.114c-.083%2c0-.175%2c0-.282-.008a5.869%2c5.869%2c0%2c0%2c1-3.878-1.69%2c5.509%2c5.509%2c0%2c0%2c1-1.6-4.091%2c6.209%2c6.209%2c0%2c0%2c1%2c2.044-4.437l1.039-.934%2c2.459%2c2.731-1.168%2c1.052a2.434%2c2.434%2c0%2c0%2c0-.522%2c2.823%2c2.39%2c2.39%2c0%2c0%2c0%2c1.854.923%2c2%2c2%2c0%2c0%2c0%2c1.346-.508l1.3-1.171%2c2.46%2c2.732-1.169%2c1.054A5.813%2c5.813%2c0%2c0%2c1%2c12806.69-12915.114Zm6.1-3.518h0l-2.477-2.717%2c1.962-1.769a.619.619%2c0%2c0%2c1%2c.412-.164.6.6%2c0%2c0%2c1%2c.454.209l1.639%2c1.824a.6.6%2c0%2c0%2c1-.046.863l-1.942%2c1.753Zm-5.33-5.8h0l-2.523-2.675%2c1.938-1.745a.614.614%2c0%2c0%2c1%2c.412-.163.609.609%2c0%2c0%2c1%2c.455.209l1.769%2c1.7a.6.6%2c0%2c0%2c1-.046.866l-2%2c1.8Z' transform='translate(-12800 12929.97)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_271' data-name='%e7%9f%a9%e5%bd%a2 271' class='cls-2' width='1.166' height='18.662' transform='matrix(0.719%2c -0.695%2c 0.695%2c 0.719%2c 0.745%2c 2.047)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(529),o=n(70),a={name:"Tagging",icon:i,shortCut:[1,9]},r=[a,o.rotate,o.scale,o.backward,o.forward,o.dargWithRightClick,o.dargWithLeftClick];t.default=r,t.tagInSingleImg=a},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(25);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(o),c=function(e){var t=e.source;return"string"===typeof t?l.default.createElement("img",{src:t,width:14,height:14,style:{marginRight:4}}):t};e.exports=function(e){var t=e.hoverIcon,n=e.icon,r=e.containerStyle,s=e.content,u=e.title,d=o.useState(!1),h=i(d,2),g=h[0],f=h[1],v=l.default.createElement(c,{source:g&&null!=t?t:n});return l.default.createElement(a.Popover,{placement:"topLeft",content:s,onMouseMove:function(){f(!0)},onMouseLeave:function(){f(!1)},overlayClassName:"tool-hotkeys-popover",className:"tipsBar"},l.default.createElement("div",{className:"shortCutTitle",onMouseMove:function(){return f(!0)},onMouseLeave:function(){return f(!1)},style:r},l.default.createElement("a",{className:"svg"},v,u)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(548),a=n(549),r=n(45),l=n(35),c=n(550),s=n(127),u=n(30);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(i),g=function(e){var t=e.mode,n=e.initialPosition,i=e.zoomOut,l=e.zoomIn,u=e.zoom,d="light"===t?o:a;return h.default.createElement("div",null,h.default.createElement("span",{className:"".concat(s.footerCls,"__zoomController")},h.default.createElement(r.MinusOutlined,{className:"".concat(s.footerCls,"__highlight"),onClick:function(){null==i||i()}}),h.default.createElement("span",{className:"".concat(s.footerCls,"__zoomText"),onClick:function(){null==n||n()}},h.default.createElement("img",{src:d,className:"adaptIcon"}),h.default.createElement(c,{zoom:u})),h.default.createElement(r.PlusOutlined,{className:"".concat(s.footerCls,"__highlight"),onClick:function(){null==l||l()}})))},f=l.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:u.LabelBeeContext})((function(e){var t=e.toolInstance;return h.default.createElement(g,{initialPosition:function(){t.initImgPos()},zoomIn:function(){t.zoomChanged(!0)},zoomOut:function(){t.zoomChanged(!1)}})}));t.ZoomController=g,t.default=f},function(e,t,n){"use strict";var i=n(28).default,o=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(43),r=n(45),l=n(25),c=n(0);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(c),d=Object.defineProperty,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=function(e,t,n){return t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},p=function(e,t){for(var n in t||(t={}))g.call(t,n)&&v(e,n,t[n]);if(h){var i,a=o(h(t));try{for(a.s();!(i=a.n()).done;){n=i.value;f.call(t,n)&&v(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},b=function(e){var t=e.jumpSkip,n=e.imgIndex,o=c.useState(n),r=i(o,2),s=r[0],d=r[1],h=c.useRef(null);c.useEffect((function(){d(n+1)}),[n]);return u.default.createElement(l.Input,{className:a.getClassName("page-input"),ref:h,onChange:function(e){/^\d*$/.test(e.target.value)&&d(e.target.value)},value:s,onKeyDown:function(e){13===e.keyCode&&t(e.target.value)}})},m=function(e){return e.isVideo?u.default.createElement(r.StepForwardFilled,p({},e.iconProps)):u.default.createElement(r.RightOutlined,p({},e.iconProps))},y=function(e){return e.isVideo?u.default.createElement(r.StepBackwardFilled,p({},e.iconProps)):u.default.createElement(r.LeftOutlined,p({},e.iconProps))};t.PageInput=b,t.Pagination=function(e){var t=e.pageBackward,n=e.imgIndex,i=e.pageJump,o=e.totalPage,a=e.pageForward,r=e.isVideo,l=e.footerCls;return u.default.createElement("div",{className:"".concat(l,"__pagination")},u.default.createElement(y,{isVideo:r,iconProps:{className:"".concat(l,"__highlight"),onClick:t}}),u.default.createElement(b,{imgIndex:n,jumpSkip:i}),"/",u.default.createElement("span",{className:"".concat(l,"__pageAll")},o),u.default.createElement(m,{isVideo:r,iconProps:{className:"".concat(l,"__highlight"),onClick:a}}))}},function(e,t,n){"use strict";var i=n(62).default,o=n(28).default,a=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(36),l=n(25),c=n(0),s=n(553),u=n(30),d=n(17),h=n(45),g=n(85),f=n(43),v=n(55),p=n(32),b=n(26),m=n(270),y=n(143);function C(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var I=C(c),x=Object.defineProperty,w=Object.defineProperties,k=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,A=function(e,t,n){return t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},O=function(e,t){for(var n in t||(t={}))P.call(t,n)&&A(e,n,t[n]);if(S){var i,o=a(S(t));try{for(o.s();!(i=o.n()).done;){n=i.value;L.call(t,n)&&A(e,n,t[n])}}catch(r){o.e(r)}finally{o.f()}}return e},T=function(e,t){return w(e,k(t))},E=function(e){var t=e.attribute,n=c.useContext(r.PointCloudContext),a=n.pointCloudBoxList,s=n.pointCloudSphereList,u=n.hideAttributes,v=n.toggleAttributesVisible,p=n.polygonList,b=n.setPolygonList,m=n.lineList,C=n.setLineList,x=n.setPointCloudResult,w=n.setPointCloudSphereList,k=n.reRender,S=n.selectSpecAttr,P=n.segmentation,L=n.setSegmentation,A=c.useState(!0),E=o(A,2),D=E[0],M=E[1],N=g.useHistory().pushHistoryWithList,R=[].concat(i(a),i(p),i(s),i(m),i(P)).filter((function(e){return e.attribute===t.value})),B=function(){v(t.value)},j=u.includes(t.value),_=function(e){var t=e.trackID,n=e.order;return t?"trackID_".concat(t):"order_".concat(n)},H=function(e){l.Modal.confirm({content:d.i18n.t("onDeleteGraphByAttr",{attribute:e.key}),onOk:function(){!function(e){if(0!==R.length){var t=p.filter((function(t){return e!==t.attribute})),n=a.filter((function(t){return e!==t.attribute})),i=m.filter((function(t){return e!==t.attribute})),o=s.filter((function(t){return e!==t.attribute})),r=P.filter((function(t){return e!==t.attribute}));k(n,t,o,i,r),b(t),x(n),w(o),C(i),L(r),N({pointCloudBoxList:n,polygonList:t,lineList:i,pointCloudSphereList:o,segmentation:r})}}(e.value)},okText:d.i18n.t("Confirm"),cancelText:d.i18n.t("Cancel")})};return I.default.createElement(I.default.Fragment,null,I.default.createElement("div",{className:f.getClassName("annotated-attribute","item")},j?I.default.createElement(h.EyeInvisibleFilled,{onClick:B}):I.default.createElement(h.EyeFilled,{onClick:B}),I.default.createElement(h.CaretDownFilled,{rotate:D?0:270,onClick:function(){M(!D)}}),I.default.createElement("span",{className:f.getClassName("annotated-attribute","item","text"),style:{width:"100%",overflow:"hidden"},onClick:function(){S(t.value)}},I.default.createElement(y,{text:t.key,openByText:!0})),I.default.createElement(h.DeleteOutlined,{onClick:function(){return H(t)}})),D&&R.map((function(e,n){return I.default.createElement("div",{key:_(T(O({},e),{order:n})),style:{paddingLeft:54}},"".concat(function(e){var t=e.trackID,n=e.order;return t||n}(T(O({},e),{order:n})),".").concat(t.key))})))},D=function(){var e=u.useSelector(s.stepConfigSelector),t=c.useContext(r.PointCloudContext),n=t.attrPanelLayout,o=t.setAttrPanelLayout,a=t.pointCloudBoxList,l=t.pointCloudSphereList,d=t.polygonList,g=t.lineList,v=t.segmentation,p=b.useTranslation().t,m=c.useMemo((function(){return[].concat(i(a),i(l),i(d),i(g),i(v)).map((function(e){return e.attribute}))}),[a,l,d,g,v]),y=c.useMemo((function(){return e.attributeList.filter((function(e){return m.includes(e.value)}))}),[m]);return I.default.createElement("div",{className:f.getClassName("annotated-attribute")},n?I.default.createElement("div",{className:f.getClassName("annotated-attribute","text")},I.default.createElement("span",null,p("AnnotatedResult")),I.default.createElement("span",{className:f.getClassName("annotated-attribute","pin"),onClick:function(){o("")}},I.default.createElement(h.PushpinFilled,null),p("CancelFixed"))):I.default.createElement("div",{className:f.getClassName("annotated-attribute","text")},I.default.createElement("span",{onClick:function(){o("left")},className:f.getClassName("annotated-attribute","pin")},I.default.createElement(h.PushpinFilled,null),p("FixedOnLeft")),I.default.createElement("span",{onClick:function(){o("right")},className:f.getClassName("annotated-attribute","pin")},I.default.createElement(h.PushpinFilled,null),p("FixedOnRight"))),I.default.createElement("div",null,y.length>0?y.map((function(e){return I.default.createElement(E,{attribute:e,key:e.value})})):I.default.createElement("div",{style:{textAlign:"center",height:200,lineHeight:"200px"}},p("NoData"))))};t.AnnotatedAttributesIcon=function(){var e=c.useContext(r.PointCloudContext).attrPanelLayout,t=b.useTranslation().t,n=u.useSelector((function(e){var t,n;return v.getCurrentStepInfo(null==(t=null==e?void 0:e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList)}));return(null==n?void 0:n.tool)!==p.EPointCloudName.PointCloud||e?null:I.default.createElement(m,{hoverIcon:I.default.createElement(h.UnorderedListOutlined,{style:{marginRight:4}}),icon:I.default.createElement(h.UnorderedListOutlined,{style:{marginRight:4}}),title:t("AnnotatedList"),content:I.default.createElement(D,null)})},t.AnnotatedAttributesPanel=D,t.AnnotatedAttributesPanelFixedLeft=function(){return"left"===c.useContext(r.PointCloudContext).attrPanelLayout?I.default.createElement(D,null):null},t.AnnotatedAttributesPanelFixedRight=function(){return"right"===c.useContext(r.PointCloudContext).attrPanelLayout?I.default.createElement(D,null):null}},function(e,t,n){"use strict";var i=n(81).default,o=n(25),a=n(0),r=n(26),l=n(35),c=n(568),s=n(63),u=n(49),d=n(30),h=n(211),g=n(146);function f(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var v=f(a),p=l.connect((function(e){return{loading:e.annotation.loading,predictionResultVisible:e.annotation.predictionResultVisible}}),null,null,{context:d.LabelBeeContext})((function(e){var t=d.useDispatch(),n=r.useTranslation().t,a=g.useStatus().isPointCloudSegmentationPattern,l=e.loading,f=e.predictionResultVisible,p=s.useSingleBox().selectedBox;return a?null:v.default.createElement(o.Button,{type:"link",onClick:function(){return e=void 0,a=null,r=i().mark((function e(){var a,r,c,s,d,g,v,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l&&!f){e.next=2;break}return e.abrupt("return");case 2:if(a=null==p?void 0:p.info.trackID){e.next=6;break}return o.message.error(n("BeforePredictStarting")),e.abrupt("return");case 6:return e.next=8,t(u.ChangeSave);case 8:return r=null==p?void 0:p.info.id,e.next=11,t(u.GetBoxesByID(a,r));case 11:if(!((c=e.sent).length<2)){e.next=15;break}return o.message.error(n("MarkOnlyOne")),e.abrupt("return");case 15:if(s=c.findIndex((function(e){return e.id===r})),d=c[s-1],g=c[s],!((v=g.index-d.index)<2)){e.next=22;break}return o.message.error(n("HaveNoNeed")),e.abrupt("return");case 22:if(!(v>8)){e.next=25;break}return o.message.error(n("ThePredictedPointCloud")),e.abrupt("return");case 25:o.message.success(n("PredictingDataFrom",{startPage:d.index+1,endPage:g.index+1,selectedBoxTrackID:a})),u.SetPointCloudLoading(t,!0),b=h.predict(d,g),u.SetPredictResult(t,b),u.SetPredictResultVisible(t,!0);case 30:case"end":return e.stop()}}),e)})),new Promise((function(t,n){var i=function(e){try{l(r.next(e))}catch(t){n(t)}},o=function(e){try{l(r.throw(e))}catch(t){n(t)}},l=function(e){return e.done?t(e.value):Promise.resolve(e.value).then(i,o)};l((r=r.apply(e,a)).next())}));var e,a,r},style:{display:"flex",flexDirection:"column",height:"auto",alignItems:"center"}},v.default.createElement("img",{src:c,style:{alignSelf:"center"}}),v.default.createElement("span",{style:{color:"#797979"}},n("ComplementaryTracking")))}));e.exports=p},function(e,t,n){"use strict";var i=n(83).default,o=n(84).default,a=n(276).default,r=n(277).default;Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),c=n(32),s=n(55),u=n(42),d=n(278),h=n(580),g=n(44),f=n(148);function v(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var p=v(l),b=v(g),m=function(e){a(n,e);var t=r(n);function n(e){var o;return i(this,n),(o=t.call(this,e)).fns={},o.labelSelectedList=[],o.clearResult=function(){var e=arguments.length>1?arguments[1]:void 0,t=e?o.state.tagResult.map((function(t){return(null==t?void 0:t.result[e])&&delete t.result[e],t})):[];o.setState({tagResult:t},(function(){return o.emitEvent("render")}))},o.exportData=function(){var e,t,n,i,a,r,l,c=null!=(t=null==(e=o.videoRef)?void 0:e.duration)?t:0,s=null==(n=o.videoRef)?void 0:n.getVideoPlaybackQuality(),u=null==s?void 0:s.totalVideoFrames,d=null!=(a=null==(i=o.videoRef)?void 0:i.videoWidth)?a:0,h=null!=(l=null==(r=o.videoRef)?void 0:r.videoHeight)?l:0;return[o.state.tagResult,{valid:o.state.valid,duration:c,frames:u,videoWidth:d,videoHeight:h}]},o.emitEvent=function(e){o.fns[e]&&o.fns[e]()},o.combineResult=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.isMulti,a=e.value,r=a.key,l=a.value;if(o){var c=null!=(n=null==(t=i[r])?void 0:t.split(";"))?n:[];c.includes(l)?c=c.filter((function(e){return e!==l})):c.push(l);var s=new Set(c);return i[r]=Array.from(s).join(";"),b.default.pickBy(i,(function(e){return e}))}return i[r]=i[r]===l?void 0:l,b.default.pickBy(i,(function(e){return e}))},o.setResult=function(e){o.setState({tagResult:e}),o.fns.render&&o.fns.render()},o.setLabel=function(e,t){o.setLabelBySelectedList(e,t)},o.keydown=function(e){var t=f.getKeyCodeNumber(e.keyCode);if(t){var n=t-1;if(1===o.config.inputList.length)return o.labelSelectedList=[0,n],o.setLabel(0,n),void setTimeout((function(){o.labelSelectedList=[],o.emitEvent("render")}),500);1===o.labelSelectedList.length?(o.labelSelectedList=[o.labelSelectedList[0],n],o.setLabel(o.labelSelectedList[0],n),setTimeout((function(){o.labelSelectedList=[],o.emitEvent("render")}),500)):(o.labelSelectedList=[n],o.emitEvent("expend"))}},o.setValid=function(e){o.setState({valid:e}),!1===e&&o.setState({tagResult:[]}),o.emitEvent("render")},o.setResultFromImgList=function(e){var t,n=e.imgList,i=e.imgIndex,a=e.step;if(n[i]){var r=u.jsonParser(n[i].result),l=r["step_".concat(a)];o.setState({tagResult:null!=(t=null==l?void 0:l.result)?t:[],valid:void 0===(null==r?void 0:r.valid)||r.valid})}},o.state={tagResult:[],labelSelectedList:[],valid:!0},o}return o(n,[{key:"config",get:function(){var e=s.getCurrentStepInfo(this.props.step,this.props.stepList);return u.jsonParser(null==e?void 0:e.config)}},{key:"history",get:function(){return{initRecord:function(){},pushHistory:function(){}}}},{key:"currentTagResult",get:function(){var e;return null!=(e=this.state.tagResult[0])?e:{}}},{key:"valid",get:function(){return this.state.valid}},{key:"singleOn",value:function(e,t){this.fns[e]=t}},{key:"on",value:function(e,t){this.singleOn(e,t)}},{key:"getTagResultByCode",value:function(e,t){var n,i,o;try{var a=null!=(i=null==(n=this.config)?void 0:n.inputList)?i:[],r=a.length>1,l=void 0!==t?t:e,c=r?a[void 0!==t?e:0]:a[0],s=(null!=(o=c.subSelected)?o:[])[l];if(c&&s)return{value:{key:c.value,value:s.value},isMulti:c.isMulti}}catch(u){return}}},{key:"setLabelBySelectedList",value:function(e,t){var n,i,o,a,r=this,l=this.getTagResultByCode(e,t);if(l){var s=this.combineResult(l,null!=(i=null==(n=this.state.tagResult[0])?void 0:n.result)?i:{}),u=[{sourceID:c.CommonToolUtils.getSourceID(),id:null!=(a=null==(o=this.currentTagResult)?void 0:o.id)?a:c.uuid(8,62),result:s}];this.setState({tagResult:u},(function(){return r.emitEvent("render")}))}}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keydown),this.props.onMounted(this),this.setResultFromImgList(this.props)}},{key:"componentWillUnmount",value:function(){document.addEventListener("keydown",this.keydown),this.props.onUnmounted()}},{key:"shouldComponentUpdate",value:function(e){return e.imgIndex!==this.props.imgIndex&&this.setResultFromImgList(e),!0}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.imgIndex,o=n.imgList,a=n.pageForward,r=n.pageJump,l=n.pageBackward,c=this.state,s=c.tagResult,u=c.valid;return p.default.createElement("div",{style:{height:"100%",width:"100%",position:"relative"}},p.default.createElement(d.VideoPlayer,{imgIndex:i,imgList:o,pageBackward:l,pageForward:a,pageJump:r,valid:u,setVideoRef:function(e){t.videoRef=e}}),p.default.createElement(h.VideoTagLayer,{result:s,inputList:null==(e=this.config)?void 0:e.inputList}))}}]),n}(p.default.Component);t.TagToolInstanceAdaptor=m},,,function(e,t,n){"use strict";var i=n(83).default,o=n(84).default,a=n(276).default,r=n(277).default;Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),c=n(576),s=n(43),u=n(32),d=n(148),h=n(578);function g(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var f=g(l),v=u.cKeyCode.default,p=f.default.createContext({isPlay:!1,playPause:function(){},updateNextPlaybackRate:function(){},playbackRate:1,currentTime:0,duration:0,buffered:0,setCurrentTime:function(){},imgList:[],imgIndex:-1,pageBackward:function(){},pageJump:function(e){},pageForward:function(){}}),b=[.5,1,1.5,2,4,6,8,16],m=function(e){a(n,e);var t=r(n);function n(e){var o;return i(this,n),(o=t.call(this,e)).changePlaybackPate=function(e){o.videoElm&&(o.videoElm.playbackRate=e,o.setState({playbackRate:e}))},o.playPause=function(){var e,t,n;(null==(e=o.videoElm)?void 0:e.paused)?null==(t=o.videoElm)||t.play():null==(n=o.videoElm)||n.pause()},o.updateNextPlaybackRate=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=b.findIndex((function(e){return e===o.state.playbackRate})),n=e?Math.min(t+1,b.length-1):Math.max(t-1,0);o.changePlaybackPate(b[n])},o.fastForward=function(){o.videoElm&&o.setCurrentTime(o.videoElm.currentTime+.1)},o.rewind=function(){o.videoElm&&o.setCurrentTime(o.videoElm.currentTime-.1)},o.keydown=function(e){e.keyCode===v.Space&&(e.preventDefault(),o.playPause()),e.keyCode===v.Up&&(e.preventDefault(),o.updateNextPlaybackRate()),e.keyCode===v.Down&&(e.preventDefault(),o.updateNextPlaybackRate(!1)),e.keyCode===v.Left&&(e.preventDefault(),o.rewind()),e.keyCode===v.Right&&(e.preventDefault(),o.fastForward())},o.onPlay=function(){o.setState({isPlay:!0},o.onVideoStart)},o.onPause=function(){o.onVideoStopped()},o.onVideoStopped=function(){o.setState({isPlay:!1}),o.timeInterval&&(clearInterval(o.timeInterval),o.timeInterval=void 0),o.videoElm&&o.setCurrentTime(o.videoElm.currentTime)},o.onVideoStart=function(){o.timeInterval=window.setInterval((function(){var e,t,n;if(o.videoElm)try{if((null==(e=o.videoElm)?void 0:e.buffered.length)>0){var i=null==(t=o.videoElm)?void 0:t.buffered.end(0);o.setState({currentTime:d.decimalReserved(null==(n=o.videoElm)?void 0:n.currentTime,1),buffered:i})}}catch(a){console.error(a)}}),50)},o.resetVideoData=function(){o.setState({currentTime:0,buffered:0,error:!1,isPlay:!1}),o.videoElm&&(o.videoElm.playbackRate=o.state.playbackRate),o.onVideoStopped()},o.setDuration=function(){var e;if(o.videoElm){var t=d.decimalReserved(null==(e=o.videoElm)?void 0:e.duration,1);o.setState({duration:t})}},o.setCurrentTime=function(e){o.videoElm&&(o.videoElm.currentTime=e,o.setState({currentTime:e}))},o.reload=function(){var e;null==(e=o.videoElm)||e.load()},o.onError=function(){o.resetVideoData(),o.setState({error:!0})},o.state={playbackRate:1,currentTime:0,isPlay:!1,duration:0,buffered:0,error:!1},o.videoRef=f.default.createRef(),o}return o(n,[{key:"videoElm",get:function(){var e;return null==(e=this.videoRef)?void 0:e.current}},{key:"videoSrc",get:function(){var e,t,n=this.props,i=n.imgIndex,o=n.imgList;return i>-1&&null!=(t=null==(e=o[i])?void 0:e.url)?t:""}},{key:"componentDidMount",value:function(){var e,t;window.addEventListener("keydown",this.keydown),(null==(e=this.videoRef)?void 0:e.current)&&this.props.setVideoRef&&this.props.setVideoRef(null==(t=this.videoRef)?void 0:t.current)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keydown)}},{key:"render",value:function(){var e=this.state,t=e.isPlay,n=e.playbackRate,i=e.currentTime,o=e.duration,a=e.buffered,r=e.error,l=this.props,u=l.imgList,d=l.imgIndex,g=l.pageBackward,v=l.pageJump,b=l.pageForward,m=l.valid,y=this.playPause,C=this.updateNextPlaybackRate,I=this.onPause,x=this.onPlay,w=this.resetVideoData,k=this.setDuration,S=this.setCurrentTime,P=this.onError,L=this.videoRef,A=this.videoSrc;return f.default.createElement(p.Provider,{value:{videoRef:this.videoRef,isPlay:t,playPause:y,updateNextPlaybackRate:C,playbackRate:n,currentTime:i,duration:o,buffered:a,setCurrentTime:S,imgIndex:d,imgList:u,pageBackward:g,pageJump:v,pageForward:b}},f.default.createElement("div",{className:s.getClassName("video-wrapper")},f.default.createElement("div",{className:s.getClassName("video-container")},f.default.createElement("video",{ref:L,className:s.getClassName("video"),src:A,onPause:I,onPlay:x,onLoadedMetadata:w,onError:P,onDurationChange:k,width:"100%",height:"100%",onClick:y}),f.default.createElement(h,{fileType:"video",errorProps:{reloadImage:this.reload,backgroundColor:"#e2e2e2",ignoreOffsetY:!0,isError:r},invalidProps:{isValid:m}})),f.default.createElement(c,null)))}}]),n}(f.default.Component);t.VideoPlayer=m,t.VideoPlayerCtx=p,t.default=m},function(e,t,n){"use strict";var i=n(0),o=n(43),a=n(25);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(i);e.exports=function(e){var t=e.onChange;return l.default.createElement("span",{className:o.getClassName("point-cloud-container","slider-container")},l.default.createElement("span",{className:o.getClassName("point-cloud-container","slider-container","circle")}),l.default.createElement("span",{className:o.getClassName("point-cloud-container","slider-container","slider")},l.default.createElement(a.Slider,{onChange:t,min:1,max:8})),l.default.createElement("span",{className:o.getClassName("point-cloud-container","slider-container","circle"),style:{width:"10px",height:"10px"}}))}},function(e,t,n){"use strict";var i=n(32),o=n(43),a=n(128),r=n(0),l=n(36),c=n(17),s=n(63),u=n(109),d=n(218),h=n(219),g=n(35),f=n(86),v=n(96),p=n(95),b=n(281),m=n(26),y=n(30),C=n(108),I=n(129);function x(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var w=x(r),k=function(e,t,n,i,o){var a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.width,o=t.height,a={x:e.x+i*n/2,y:e.y+o*n/2},r={x:t.width/2,y:t.height/2};return{offsetX:(r.x-a.x)/n,offsetY:-(r.y-a.y)/n}}(e,n,t),r=a.offsetX,l=a.offsetY;if(o.camera.zoom=t,e){var c=r*Math.cos(i),s=r*Math.sin(i),u=o.initCameraPosition,d=u.x,h=u.y,g=u.z;o.camera.position.set(d+s,h-c,g+l)}o.camera.updateProjectionMatrix(),o.render()},S=g.connect(f.a2MapStateToProps,null,null,{context:y.LabelBeeContext})((function(e){e.currentData;var t=e.config,n=e.checkMode,g=w.default.useContext(l.PointCloudContext),f=r.useRef(null),y=p(f),x=s.useSingleBox().selectedBox,S=u.useSphere().selectedSphere,P=d.useZoom().syncBackviewToolZoom,L=m.useTranslation().t,A=v.usePointCloudViews(),O=A.backViewUpdateBox,T=A.backViewUpdatePoint;return r.useEffect((function(){if(f.current){var e={width:f.current.clientWidth,height:f.current.clientHeight},o=new i.PointCloudAnnotation({container:f.current,size:e,extraProps:{showDirectionLine:!1,forbidAddNew:!0,forbidDelete:!0},config:t,checkMode:n,toolName:C.getPointCloudToolList()});g.setBackViewInstance(o)}}),[]),r.useEffect((function(){if(y&&g.backViewInstance){var e=g.backViewInstance,t=e.toolInstance,n=e.pointCloudInstance;t.singleOn("renderZoom",(function(e,t){return g.selectedPointCloudBox?(k(t,e,y,g.selectedPointCloudBox.rotation,n),void P(t,e,y)):S?(k(t,e,y,0,n),void P(t,e,y)):void 0})),t.singleOn("dragMove",(function(e){var t=e.currentPos,i=e.zoom;(g.selectedPointCloudBox||S)&&k(t,i,y,g.selectedPointCloudBox?g.selectedPointCloudBox.rotation:0,n)})),t.singleOn("updatePointByDrag",(function(e,t){S&&(null==T||T(e,t[0]))})),t.singleOn("updatePolygonByDrag",(function(e){if(1===g.selectedIDs.length&&1===e.length){var t=e[0],n=t.newPolygon,i=t.originPolygon;n&&i&&O(n,i)}}))}}),[g,y]),r.useEffect((function(){var e;null==(e=null==g?void 0:g.backViewInstance)||e.initSize(y)}),[y]),w.default.createElement(a.PointCloudContainer,{className:o.getClassName("point-cloud-container","back-view"),title:w.default.createElement(I,{title:L("BackView")}),titleOnSurface:!0},w.default.createElement("div",{className:o.getClassName("point-cloud-container","bottom-view-content")},w.default.createElement("div",{className:o.getClassName("point-cloud-container","core-instance"),ref:f}),!x&&!S&&w.default.createElement(b,null),w.default.createElement(h.SizeInfoForView,{perspectiveView:c.EPerspectiveView.Back})))}));e.exports=S},function(e,t,n){"use strict";var i=n(0),o=n(583),a=n(43),r=n(26);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=l(i);e.exports=function(){var e=r.useTranslation().t;return c.default.createElement("div",{className:a.getClassName("point-cloud-container","empty-page")},c.default.createElement("img",{src:o}),c.default.createElement("span",{className:a.getClassName("point-cloud-container","empty-page","text")},e("NoData")))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(96),a=n(63),r=n(36),l=n(32),c=n(17),s=n(287),u=l.cAnnotation.ERotateDirection;t.useRotate=function(e){var t=e.currentData,n=i.useContext(r.PointCloudContext),l=a.useSingleBox(),d=l.selectedBox,h=l.updateSelectedBox;return{updateRotate:s.useThrottleFn((function(e){var i=n.topViewInstance,a=n.mainViewInstance,r=n.syncAllViewPointCloudColor;if(i&&a){var l=i.pointCloud2dOperation,s=null==d?void 0:d.info;if(s&&(null==t?void 0:t.url)&&n.backViewInstance){var g=h({rotation:c.PointCloudUtils.restrictAngleRange(s.rotation+Number(Math.PI*e)/180)});l.rotatePolygon(e,u.Anticlockwise);var f=l.selectedPolygon;a.generateBox(s),r(g),o.synchronizeSideView(s,f,n.sideViewInstance,t.url),o.synchronizeBackView(s,f,n.backViewInstance,t.url),a.render()}}}),{wait:800}).run}}},function(e,t,n){"use strict";var i=n(32),o=n(43),a=n(128),r=n(0),l=n(17),c=n(36),s=n(219),u=n(35),d=n(86),h=n(96),g=n(63),f=n(109),v=n(281),p=n(95),b=n(26),m=n(30),y=n(108),C=n(218),I=n(129);function x(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var w=x(r),k=function(e,t,n,i,o){var a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.width,o=t.height,a={x:e.x+i*n/2,y:e.y+o*n/2},r={x:t.width/2,y:t.height/2};return{offsetX:(r.x-a.x)/n,offsetY:-(r.y-a.y)/n}}(e,n,t),r=a.offsetX,l=a.offsetY;if(o.camera.zoom=t,e){var c=r*Math.cos(i),s=r*Math.sin(i),u=o.initCameraPosition,d=u.x,h=u.y,g=u.z;o.camera.position.set(d-c,h-s,g+l)}o.camera.updateProjectionMatrix(),o.render()},S=u.connect(d.a2MapStateToProps,null,null,{context:m.LabelBeeContext})((function(e){var t=e.config,n=e.checkMode,u=w.default.useContext(c.PointCloudContext),d=h.usePointCloudViews(),m=d.sideViewUpdateBox,x=d.sideViewUpdatePoint,S=g.useSingleBox().selectedBox,P=f.useSphere().selectedSphere,L=r.useRef(null),A=p(L),O=b.useTranslation().t,T=C.useZoom().syncSideviewToolZoom;return r.useEffect((function(){if(L.current){var e={width:L.current.clientWidth,height:L.current.clientHeight},o=new i.PointCloudAnnotation({container:L.current,size:e,extraProps:{showDirectionLine:!1,forbidAddNew:!0,forbidDelete:!0},config:t,checkMode:n,toolName:y.getPointCloudToolList()});u.setSideViewInstance(o)}}),[]),r.useEffect((function(){if(A&&u.sideViewInstance){var e=u.sideViewInstance,t=e.toolInstance,n=e.pointCloudInstance;t.singleOn("renderZoom",(function(e,t){if(u.selectedPointCloudBox)return k(t,e,A,u.selectedPointCloudBox.rotation,n),void T(t,e,A);P&&(k(t,e,A,0,n),T(t,e,A))})),t.singleOn("dragMove",(function(e){var t=e.currentPos,i=e.zoom;(u.selectedPointCloudBox||P)&&k(t,i,A,u.selectedPointCloudBox?u.selectedPointCloudBox.rotation:0,n)})),t.singleOn("updatePointByDrag",(function(e,t){P&&(null==x||x(e,t[0]))})),t.singleOn("updatePolygonByDrag",(function(e){if(1===u.selectedIDs.length&&1===e.length){var t=e[0],n=t.newPolygon,i=t.originPolygon;m(n,i)}}))}}),[u,A]),r.useEffect((function(){var e;null==(e=null==u?void 0:u.sideViewInstance)||e.initSize(A)}),[A]),w.default.createElement(a.PointCloudContainer,{className:o.getClassName("point-cloud-container","side-view"),title:w.default.createElement(I,{title:O("SideView")}),titleOnSurface:!0},w.default.createElement("div",{className:o.getClassName("point-cloud-container","bottom-view-content")},w.default.createElement("div",{className:o.getClassName("point-cloud-container","core-instance"),ref:L}),!S&&!P&&w.default.createElement(v,null),w.default.createElement(s.SizeInfoForView,{perspectiveView:l.EPerspectiveView.Left})))}));e.exports=S},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(35),r=n(30),l=n(25),c=n(41),s=n(25),u=n(246),d=n(26),h=n(253);function g(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var f=g(o),v="".concat(c.prefix,"-LLMView"),p=a.connect((function(e){return{annotation:e.annotation}}),null,null,{context:r.LabelBeeContext})((function(e){var t=e.annotation,n=e.checkMode,a=e.tips,c=e.showTips,g=t.imgIndex,p=t.imgList,b=o.useContext(r.LLMContext).hoverKey,m=o.useState([]),y=i(m,2),C=y[0],I=y[1],x=o.useState(""),w=i(x,2),k=w[0],S=w[1],P=d.useTranslation().t;return o.useEffect((function(){var e;if(!n)return e=setInterval((function(){l.message.info(P("EfficientListening"))}),6e4),function(){e&&clearInterval(e)}}),[]),o.useEffect((function(){var e;if(p[g]){var t=null==(e=p[g])?void 0:e.questionList;S(null==t?void 0:t.question),I((null==t?void 0:t.answerList)||[])}}),[g]),f.default.createElement(s.Layout,{className:v},f.default.createElement("div",{className:"".concat(v,"-question")},!0===c&&f.default.createElement(h,{tips:a}),f.default.createElement(u,{hoverKey:b,question:k,answerList:C})))}));e.exports=p},,,,,,,,,,,,,,,,function(e){e.exports=JSON.parse('{"calName":"P2","timestamp":1,"P":[[721.5377,0,609.5593,44.85728],[0,721.5377,172.854,0.2163791],[0,0,1,0.002745884]],"R":[[0.9999239,0.00983776,-0.007445048],[-0.009869795,0.9999421,-0.004278459],[0.007402527,0.004351614,0.9999631]],"T":[[0.007533745,-0.9999714,-0.000616602,-0.004069766],[0.01480249,0.0007280733,-0.9998902,-0.07631618],[0.9998621,0.00752379,0.01480755,-0.2717806]]}')},function(e){e.exports=JSON.parse('{"calName":"P2","timestamp":2,"P":[[721.5377,0,609.5593,44.85728],[0,721.5377,172.854,0.2163791],[0,0,1,0.002745884]],"R":[[0.9999239,0.00983776,-0.007445048],[-0.009869795,0.9999421,-0.004278459],[0.007402527,0.004351614,0.9999631]],"T":[[0.007533745,-0.9999714,-0.000616602,-0.004069766],[0.01480249,0.0007280733,-0.9998902,-0.07631618],[0.9998621,0.00752379,0.01480755,-0.2717806]]}')},,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(0);e.exports=function(e){var t=i.useRef(e);return i.useEffect((function(){t.current=e}),[e]),t}},function(e,t,n){"use strict";var i=n(32),o=n(17),a=n(0);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(a);e.exports=function(e){var t=e.src,n=e.result,r=e.size,c=e.isOrthographicCamera,s=void 0!==c&&c,u=e.backgroundColor,d=void 0===u?"#ccc":u,h=a.useRef(),g=a.useRef(),f=a.useCallback((function(e){h.current=e}),[]);return a.useEffect((function(){var e={container:h.current,backgroundColor:d,isOrthographicCamera:s};s&&Object.assign(e,{orthographicParams:o.PointCloudUtils.getDefaultOrthographicParams(r)});var t=new i.PointCloud(e);return g.current=t,function(){var e;null==(e=g.current.renderer)||e.forceContextLoss()}}),[]),a.useEffect((function(){var e,t,n;g.current&&(null==(e=g.current)||e.init(),null==(t=g.current)||t.initOrthographicCamera(o.PointCloudUtils.getDefaultOrthographicParams(r)),null==(n=g.current)||n.render())}),[r]),a.useEffect((function(){var e;g.current&&t&&(null==(e=g.current)||e.loadPCDFile(t))}),[t]),a.useEffect((function(){n&&o.PointCloudUtils.getBoxParamsFromResultList(n).forEach((function(e){var t;null==(t=g.current)||t.generateBox(e,e.id)}));return function(){var e;o.PointCloudUtils.getBoxParamsFromResultList(n).forEach((function(e){var t;null==(t=g.current)||t.removeObjectByName(e.id,"box")})),null==(e=g.current)||e.render()}}),[n]),l.default.createElement("div",{style:r,ref:f})}},,,,,,,,,,,function(e,t,n){"use strict";var i=n(28).default,o=n(34).default,a=n(418),r=n(17),l=n(0),c=n(35),s=n(65),u=n(30),d=n(73),h=n(49),g=n(82),f=n(25),v=n(632),p=n(120);function b(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var m=b(l),y=b(v),C=b(p),I=Object.defineProperty,x=Object.defineProperties,w=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,L=function(e,t,n){return t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},A=c.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:u.LabelBeeContext})((function(e){var t=l.useState(0),n=i(t,2),c=(n[0],n[1]),u=e.imgList,v=e.step,p=void 0===v?1:v,b=e.stepList,I=e.onSubmit,A=e.onSave,O=e.onPageChange,T=e.onStepChange,E=e.initialIndex,D=void 0===E?0:E,M=e.toolInstance,N=e.setToolInstance,R=e.getFileData,B=e.pageSize,j=void 0===B?10:B,_=e.loadFileList,H=e.defaultLang,V=void 0===H?"cn":H,F=e.skipBeforePageTurning,Z=e.beforeRotate,z=e.checkMode,U=void 0!==z&&z,G=e.intelligentFit,W=void 0===G||G,K=e.highlightAttribute,Y=void 0===K?"":K,X=e.preDataProcess;l.useEffect((function(){s.store.dispatch(h.InitTaskData({onSubmit:I,stepList:b,step:p,getFileData:R,pageSize:j,loadFileList:_,onSave:A,onPageChange:O,onStepChange:T,skipBeforePageTurning:F,beforeRotate:Z,checkMode:U,highlightAttribute:Y,preDataProcess:X})),Q(),r.i18n.changeLanguage(V);var e=function(){c((function(e){return e+1}))};return r.i18n.on("languageChanged",e),function(){r.i18n.off("languageChanged",e),h.InitAnnotationState(s.store.dispatch)}}),[]),l.useEffect((function(){s.store.dispatch(h.UpdateInjectFunc({onSubmit:I,stepList:b,getFileData:R,pageSize:j,loadFileList:_,onSave:A,onPageChange:O,onStepChange:T,beforeRotate:Z,highlightAttribute:Y,preDataProcess:X})),r.i18n.changeLanguage(V)}),[I,b,R,j,_,A,O,T,V,Z,Y,X]),l.useEffect((function(){null==N||N(M)}),[M]);var J,Q=function(){_?h.loadImgList(s.store.dispatch,s.store.getState,D,!0).then((function(e){e&&s.store.dispatch(g.LoadFileAndFileData(D))})):u&&u.length>0&&(s.store.dispatch({type:d.ANNOTATION_ACTIONS.UPDATE_IMG_LIST,payload:{imgList:u}}),s.store.dispatch(g.LoadFileAndFileData(D)))};return m.default.createElement("div",null,m.default.createElement(f.ConfigProvider,{locale:"en"===r.i18n.language?C.default:y.default},m.default.createElement(a,(J=function(e,t){for(var n in t||(t={}))S.call(t,n)&&L(e,n,t[n]);if(k){var i,a=o(k(t));try{for(a.s();!(i=a.n()).done;)n=i.value,P.call(t,n)&&L(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},e),x(J,w({intelligentFit:W}))))))}));e.exports=A},function(e,t,n){"use strict";var i=n(28).default,o=n(34).default,a=n(249),r=n(41),l=n(25),c=n(25),s=n(0),u=n(426),d=n(253),h=n(144),g=n(127),f=n(554),v=n(82),p=n(570),b=n(35),m=n(108),y=n(581),C=n(43),I=n(42),x=n(606),w=n(30),k=n(69),S=n(607),P=n(45),L=n(26);function A(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var O=A(s),T=Object.defineProperty,E=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,N=function(e,t,n){return t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},R=function(e,t){for(var n in t||(t={}))D.call(t,n)&&N(e,n,t[n]);if(E){var i,a=o(E(t));try{for(a.s();!(i=a.n()).done;){n=i.value;M.call(t,n)&&N(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},B=c.Layout,j=B.Sider,_=B.Content,H="".concat(r.prefix,"-layout"),V=function(e){var t;return O.default.createElement(O.default.Fragment,null,!0===e.showTips&&O.default.createElement(d,{path:e.path,tips:e.tips}),O.default.createElement(u,R({},e)),O.default.createElement(g.default,{style:null==(t=e.style)?void 0:t.footer,mode:e.mode,footer:null==e?void 0:e.footer}))},F=function(e){var t;return O.default.createElement(O.default.Fragment,null,O.default.createElement(y,{drawLayerSlot:e.drawLayerSlot,checkMode:e.checkMode,intelligentFit:e.intelligentFit}),O.default.createElement(g.default,{style:null==(t=e.style)?void 0:t.footer,mode:e.mode,footer:null==e?void 0:e.footer}))},Z=function(e){var t,n=e.stepList,i=e.step,o=null==(t=v.getStepConfig(n,i))?void 0:t.tool,a=m.isVideoTool(o),r=m.isPointCloudTool(o);return a?O.default.createElement(p,R({},e)):r?O.default.createElement(F,R({},e)):O.default.createElement(V,R({},e))},z=function(e){var t,n,i,o=L.useTranslation().t,r=e.stepList,s=e.step,u=null==(t=v.getStepConfig(r,s))?void 0:t.tool;return O.default.createElement(a.ViewportProvider,null,O.default.createElement(l.Spin,{spinning:e.loading,indicator:O.default.createElement(P.LoadingOutlined,null),tip:O.default.createElement("span",{style:{marginTop:200}},o("LoadingTips")),delay:500},O.default.createElement(c.Layout,{className:I.classnames([H,e.className]),style:null==(n=e.style)?void 0:n.layout},O.default.createElement("header",{className:"".concat(H,"__header"),style:null==(i=e.style)?void 0:i.header},O.default.createElement(f,{header:null==e?void 0:e.header,headerName:e.headerName,goBack:e.goBack,exportData:e.exportData,hasLangNode:k.EToolName.LLM!==u,hasHeaderOption:k.EToolName.LLM!==u,hasPredictTrackingIcon:k.EToolName.LLM!==u})),e.children)))},U=b.connect((function(e){var t,n,i,o=e.annotation,a=o.imgList,r=o.loading,l=null!=(t=a[o.imgIndex])?t:{};return{path:null!=(i=null!=(n=null==l?void 0:l.path)?n:null==l?void 0:l.url)?i:"",loading:r}}),null,null,{context:w.LabelBeeContext})((function(e){var t,n,o,a,r,l,u,d=s.useState(void 0),g=i(d,2),f=g[0],p=g[1],b=null==(n=null==(t=e.style)?void 0:t.sider)?void 0:n.width,m=e.stepList,y=e.step,I=null==(o=v.getStepConfig(m,y))?void 0:o.tool;return k.EToolName.LLM===I?O.default.createElement(z,R({},e),O.default.createElement(S,R({},e))):O.default.createElement(z,R({},e),O.default.createElement(c.Layout,{className:C.getClassName("layout","container")},null==e?void 0:e.leftSider,O.default.createElement(_,{className:"".concat(H,"__content")},O.default.createElement(Z,R({},e)),O.default.createElement(x,null)),O.default.createElement(j,{className:"".concat(H,"__side"),width:null!=(a=null!=f?f:b)?a:240,style:null==(r=e.style)?void 0:r.sider},O.default.createElement(h.default,{sider:null==e?void 0:e.sider,enableColorPicker:null==e?void 0:e.enableColorPicker,setSiderWidth:p,propsSiderWidth:null==(u=null==(l=e.style)?void 0:l.sider)?void 0:u.width}))))}));e.exports=U},,,,function(e,t,n){"use strict";e.exports='{"color":1,"width":2,"borderOpacity":9,"fillOpacity":9,"toolColor":{"1":{"valid":{"stroke":"rgba(0,0,255,0.50)","fill":"rgba(0,0,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(0,15,255,1.00)","fill":"rgba(0,15,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(0,15,255,0.80)","fill":"rgba(0,15,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"3":{"valid":{"stroke":"rgba(0,255,255,0.50)","fill":"rgba(0,255,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(0,212,255,1.00)","fill":"rgba(0,212,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(0,212,255,0.80)","fill":"rgba(0,212,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"5":{"valid":{"stroke":"rgba(0,255,0,0.50)","fill":"rgba(0,255,0,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(149,255,1.00)","fill":"rgba(149,255,0,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(149,255,0,0.80)","fill":"rgba(149,255,0,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"7":{"valid":{"stroke":"rgba(255,255,0,0.50)","fill":"rgba(255,255,0,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(255,230,102,1.00)","fill":"rgba(255,213,0,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(255,230,102,0.80)","fill":"rgba(255,230,102,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"9":{"valid":{"stroke":"rgba(255,0,255,0.50)","fill":"rgba(255,0,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(230,102,255,1.00)","fill":"rgba(213,0,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(230,102,255,0.80)","fill":"rgba(230,102,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}}},"attributeColor":[{"valid":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}}],"lineColor":{"1":"rgba(102, 111, 255, 1 )","3":"rgba(102, 230, 255, 1)","5":"rgba(191, 255, 102, 1)","7":"rgba(255, 230, 102, 1)","9":"rgba(230, 102, 255, 1)"},"attributeLineColor":["rgba(204, 204, 204, 1)","rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"]}'},function(e,t,n){"use strict";var i=n(83).default,o=n(84).default,a=n(34).default,r=n(32),l=n(42),c=n(69),s=n(44),u=n(55);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(s),g=Object.defineProperty,f=Object.defineProperties,v=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=function(e,t,n){return t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},C=function(){function e(){i(this,e)}return o(e,null,[{key:"copyResultChange",value:function(e,t,n){try{var i=l.jsonParser(e),o=l.jsonParser(n),c="step_".concat(t);if(i[c]){var s=i[c];if(s.result)return s.result=s.result.map((function(e){return t=function(e,t){for(var n in t||(t={}))b.call(t,n)&&y(e,n,t[n]);if(p){var i,o=a(p(t));try{for(o.s();!(i=o.n()).done;)n=i.value,m.call(t,n)&&y(e,n,t[n])}catch(r){o.e(r)}finally{o.f()}}return e}({},e),n={id:r.uuid(8,62)},f(t,v(n));var t,n})),o[c]=s,JSON.stringify(o)}return e}catch(u){return e}}},{key:"isResultSourceMatchedDependence",value:function(e,t){var n=null==e?void 0:e.map((function(e){return e.sourceID})).sort(),i=null==t?void 0:t.map((function(e){return e.id})).sort();return h.default.isEqual(n,i)}},{key:"deltaUpdateBasicResultList",value:function(e,t){var n=null==e?void 0:e.map((function(e){return e.sourceID})).sort();return t.filter((function(e){return!n.includes(e.id)}))}},{key:"getInitialResultList",value:function(e,t,n,i,o){var a=null!=e?e:[];switch(n.tool){case c.EToolName.Tag:case c.EToolName.Text:if(n.dataSourceStep>0){var r=this.deltaUpdateBasicResultList(a,i);if(r.length>0)return a.concat(t.getInitResultList(n.dataSourceStep,r))}return!0!==o?a:t.getInitResultList(n.dataSourceStep,i);default:return a}}},{key:"dataCorrection",value:function(e,t,n,i){var o,a;try{var r=u.getStepInfo(n,i),c="step_".concat(r.step),s=l.jsonParser(e),d=l.jsonParser(t),g=null==(o=s[c])?void 0:o.result,f=null==(a=d[c])?void 0:a.result;if(!f)return e;if(h.default.isEqual(g.sort(this.idCmp),f.sort(this.idCmp)))return e;var v=this.findDeletedIds(g,f);if(0===v.length)return e;var p=n,b=this.getStepKeys(s).sort();return this.deleteRes(s,p,v,b),JSON.stringify(s)}catch(m){return console.error(m),e}}},{key:"idCmp",value:function(e,t){var n=e.id,i=t.id;return n<i?-1:n>i?1:0}},{key:"findDeletedIds",value:function(e,t){return this.findDeletedItems(t,e).map((function(e){return e.id}))}},{key:"findDeletedItems",value:function(e,t){var n=[];return e.forEach((function(e){t.some((function(t){return t.id===e.id}))||n.push(e)})),n}},{key:"getStepKeys",value:function(e){return Object.keys(e).map((function(e){return parseInt(e.replace("step_",""),10)})).filter((function(e){return!isNaN(e)}))}},{key:"deleteRes",value:function(e,t,n,i){var o=this;i.forEach((function(a){if(a>t){var r=e["step_".concat(a)];if([c.EToolName.FolderTag,c.EToolName.Segmentation].includes(r.tool))return;if(r.dataSourceStep===t){var l=[];r.result=r.result.filter((function(e){return!n.includes(e.sourceID)||(l.push(e.id),!1)})),o.deleteRes(e,a,l,i)}else r.result=r.result.filter((function(e){return!n.includes(e.sourceID)}))}}))}}]),e}();e.exports=C},function(e,t,n){"use strict";var i=n(51).default,o=n(62).default,a=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(42),l=n(55),c=Object.defineProperty,s=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=function(e,t,n){return t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},v=function(e,t){for(var n in t||(t={}))h.call(t,n)&&f(e,n,t[n]);if(d){var i,o=a(d(t));try{for(o.s();!(i=o.n()).done;){n=i.value;g.call(t,n)&&f(e,n,t[n])}}catch(r){o.e(r)}finally{o.f()}}return e},p=function(e,t){return s(e,u(t))};t.composeResult=function(e,t,n,a){var c=t.step,s=t.stepList,u=n.rect,d=n.basicRectID;try{var h=r.jsonParser(e),g=l.getCurrentStepInfo(c,s),f=g.dataSourceStep,b="step_".concat(g.step);if(h[b]){var m=h[b];return Object.assign(m,a),m.result?(JSON.stringify(m.result)===JSON.stringify(u)||(m.result=d?[].concat(o(m.result.filter((function(e){return!(e.sourceID&&e.sourceID===d)}))),o(u.filter((function(e){return e.sourceID&&e.sourceID===d})))):u),JSON.stringify(h)):JSON.stringify(p(v({},h),i({},b,p(v(v({},h[b]),a),{result:u}))))}return JSON.stringify(p(v({},h),i({},b,p(v({dataSourceStep:f},a),{toolName:s[c-1].tool,result:u}))))}catch(y){return e}},t.composeResultWithBasicImgInfo=function(e,t){return JSON.stringify(v(v({},r.jsonParser(e)),t))}},function(e,t,n){"use strict";var i=n(83).default,o=n(84).default,a=n(210),r=n(44),l=n(42);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=c(r),u=function(){function e(){i(this,e)}return o(e,null,[{key:"getPageInfo",value:function(e){var t=e.imgIndex,n=e.imgList,i=e.basicResultList;return{fileIndex:t,basicIndex:e.basicIndex,basicList:i,fileList:n,step:e.step,stepList:e.stepList}}},{key:"getNextPageInfo",value:function(t,n,i){var o=e.getPageInfo(n),r=e.getPageInfo(n).fileIndex,l=e.getNextFileIndex(t,o,i),c=e.getNextBasicIndex(t,o.basicIndex),s=l!==r,u=e.hasNextBasicIndex(t,o),d={fileIndex:l,basicIndex:c,fileIndexChanged:s,basicIndexChanged:u};return u?(d.fileIndexChanged=!1,d.fileIndex=r,d):(d.basicIndex=t===a.EPageTurningOperation.Backward?e.getBasicResultIndexForNextFile(o,d.fileIndex):0,d)}}]),e}(),d=u;d.getNextBasicIndex=function(e,t){return t+(e===a.EPageTurningOperation.Forward?1:-1)},d.hasNextBasicIndex=function(e,t){var n=t.basicList;if((null==n?void 0:n.length)>0){var i=u.getNextBasicIndex(e,t.basicIndex);return i>=0&&n.length>i}return!1},d.getBasicResultIndexForNextFile=function(e,t){var n,i=e.stepList,o=e.step,a=e.fileList,r=i.find((function(e){return e.step===o})),c=null==r?void 0:r.dataSourceStep;if(c){var s=null==(n=l.jsonParser(a[t].result)["step_".concat(c)])?void 0:n.result;return s&&(null==s?void 0:s.length)?(null==s?void 0:s.length)-1:0}return 0},d.getNextFileIndex=function(e,t,n){var i=t.fileIndex,o=t.fileList,r=void 0!==n?n:i;switch(e){case a.EPageTurningOperation.Forward:r+=1;break;case a.EPageTurningOperation.Backward:r-=1;case a.EPageTurningOperation.Jump:}return s.default.inRange(r,0,o.length)?r:i},e.exports=d},function(e,t,n){"use strict";var i=n(28).default,o=n(34).default,a=n(65),r=n(30),l=n(25),c=n(44),s=n(0),u=n(35),d=n(251),h=n(95),g=n(252),f=n(32),v=n(17),p=n(55);function b(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var m=b(c),y=b(s),C=Object.defineProperty,I=Object.defineProperties,x=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=function(e,t,n){return t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},L=function(e,t){for(var n in t||(t={}))k.call(t,n)&&P(e,n,t[n]);if(w){var i,a=o(w(t));try{for(a.s();!(i=a.n()).done;){n=i.value;S.call(t,n)&&P(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},A=u.connect((function(e){var t=m.default.pickBy(e.annotation,(function(e,t){return["imgList","imgIndex","stepList","step","toolInstance","annotationEngine","loading"].includes(t)}));return L({imgAttribute:e.imgAttribute,toolStyle:e.toolStyle},t)}),null,null,{context:r.LabelBeeContext})((function(e){var t=s.useState(0),n=i(t,2)[1],o=e.imgAttribute,r=e.toolStyle,c=e.toolInstance,u=e.annotationEngine,b=e.imgList,m=e.imgIndex,C=e.dataInjectionAtCreation,w=e.renderEnhance,k=e.customRenderStyle,S=e.stepList,P=e.step,A=e.drawLayerSlot,O=s.useState({zoom:1,currentPos:{x:0,y:0}}),T=i(O,2),E=T[0],D=T[1],M=s.useRef(null),N=s.useRef(null),R=h(M);s.useEffect((function(){a.store.dispatch(g.InitToolStyleConfig())}),[]),s.useEffect((function(){if(u){switch(v.i18n.language){case"cn":case"en":u.setLang(v.i18n.language)}null==u||u.setDataInjectionAtCreation(C),null==u||u.setRenderEnhance(w),k&&(null==u||u.setCustomRenderStyle(k))}}),[u,C,w,k]),s.useEffect((function(){var e=function(e,t){D({zoom:e,currentPos:t})},t=function(e){D(e)};return c&&(c.singleOn("messageError",(function(e){l.message.error(e)})),c.singleOn("messageInfo",(function(e){l.message.info(e)})),c.singleOn("changeAnnotationShow",(function(){n((function(e){return e+1}))})),c.on("renderZoom",e),c.on("dragMove",t)),function(){c&&(c.unbind("renderZoom",e),c.unbind("dragMove",t))}}),[c]),s.useEffect((function(){var e;(null==u?void 0:u.setImgAttribute)?u.setImgAttribute(o):null==(e=null==c?void 0:c.setImgAttribute)||e.call(c,o)}),[o,u]),s.useEffect((function(){c&&c.setStyle(r),u&&u.setStyle(r)}),[r]),s.useEffect((function(){(null==c?void 0:c.setSize)&&c.setSize(R),u&&u.setSize(R)}),[R]),s.useEffect((function(){var e=p.getCurrentStepInfo(P,S);null==c||c.setConfig(e.config)}),[S]);var B;return y.default.createElement("div",{ref:M,className:"annotationOperation"},y.default.createElement("div",{className:"canvas",ref:N,style:R,id:"toolContainer"},null==A?void 0:A(E)),!0===(null==c?void 0:c.isImgError)&&y.default.createElement(d,(B=L({},R),I(B,x({reloadImage:function(){var e=null==b?void 0:b[m];(null==e?void 0:e.url)&&f.ImgUtils.load(e.url).then((function(e){u.setImgNode(e)}))},backgroundColor:"#e2e2e2",ignoreOffsetY:!0})))))}));e.exports=A},function(e,t,n){"use strict";var i=n(28).default,o=n(0);e.exports=function(e){var t=o.useRef(0),n=o.useState(e),a=i(n,2),r=a[0],l=a[1],c=o.useCallback((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){l(e)}))}),[]);return o.useEffect((function(){return function(){return cancelAnimationFrame(t.current)}}),[]),[r,c]}},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(25),r=n(429),l=n(254),c=n(35),s=n(30);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var d=u(o);var h=c.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:s.LabelBeeContext})((function(e){var t,n=e.toolInstance,c=o.useState(0),s=i(c,2)[1];if(o.useEffect((function(){n&&(n.singleOn("selectedChange",(function(){s((function(e){return e+1}))})),n.singleOn("updateTextAttribute",(function(){s((function(e){return e+1}))})),n.singleOn("messageError",(function(e){a.message.error(e)})))}),[n]),!n)return null;var u=n.config;return d.default.createElement("div",null,(null==(t=null==n?void 0:n.config)?void 0:t.textConfigurable)&&n.selectedID&&d.default.createElement(r,{onChange:n.textChange,textValue:n.selectedText,checkString:l.TextUtils.checkString(null==u?void 0:u.textCheckType,null==u?void 0:u.customFormat),textCheckType:u.textCheckType}))}));e.exports=h},function(e,t,n){"use strict";var i=n(28).default,o=n(69),a=n(254),r=n(25),l=n(0),c=n(212),s=n(213),u=n(42),d=n(26);function h(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var g=h(l);e.exports=function(e){var t=d.useTranslation().t,n=e.onChange,h=e.textValue,f=e.checkString,v=e.textCheckType,p=l.useState(0),b=i(p,2),m=b[0],y=b[1],C=l.useState(!1),I=i(C,2),x=I[0],w=I[1],k=l.useState(!1),S=i(k,2),P=S[0],L=S[1],A=l.useState(!1),O=i(A,2),T=O[0],E=O[1],D=g.default.createElement("a",null,g.default.createElement(r.Tooltip,{placement:"bottom",title:t("EmptyTextInput")},g.default.createElement("img",{onMouseEnter:function(){return E(!0)},onMouseLeave:function(){return E(!1)},style:{marginLeft:6},src:T?c:s,onClick:function(e){e.stopPropagation(),n("")}})));l.useEffect((function(){h&&y(h.length)}),[]),l.useEffect((function(){var e;if(void 0===h||""===h)w(!1);else try{h&&w(!new RegExp(f).test(h))}catch(n){w(!0),r.message.destroy(),r.message.error(t("RegularExpIncorrectly"))}y(null!=(e=null==h?void 0:h.length)?e:0)}),[h]);return g.default.createElement("div",{className:"textInputContainer"},g.default.createElement("div",{className:"label"},t("TextInput"),D),g.default.createElement("div",{className:u.classnames({textareaContainer:!0,focus:P})},g.default.createElement("div",{className:u.classnames({toolTextAreaBox:!0,toolTextAreaBoxFocus:P})},g.default.createElement(r.Input.TextArea,{style:{resize:"none",height:120,wordBreak:"break-all"},maxLength:o.TEXT_ATTRIBUTE_MAX_LENGTH,onKeyDownCapture:function(e){e.stopPropagation()},onKeyUpCapture:function(e){e.stopPropagation()},onChange:function(e){n(e.target.value),y(e.target.value.length)},onFocus:function(e){return L(!0)},onBlur:function(e){!function(e){if(x||!new RegExp(f).test(e.target.value))return n(""),r.message.error(a.TextUtils.getErrorNotice(v)),!0;n(e.target.value,!0)}(e),L(!1)},value:h,onKeyDown:function(e){e.stopPropagation()},className:x?"warning":""}),g.default.createElement("div",{className:"textAreaFooter"},g.default.createElement("span",{className:"wordCount"},g.default.createElement("span",{className:m>o.TEXT_ATTRIBUTE_MAX_LENGTH||x?"warning":""},m),"/",g.default.createElement("span",null,o.TEXT_ATTRIBUTE_MAX_LENGTH))))))}},function(e,t,n){"use strict";var i=n(28).default,o=n(25),a=n(0),r=n(213),l=n(255),c=n(65),s=n(212),u=n(26);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(a);e.exports=function(){var e=a.useState(!1),t=i(e,2),n=t[0],d=t[1],g=u.useTranslation().t;return h.default.createElement(o.Tooltip,{placement:"bottom",title:g("RestoreImageAttributes")},h.default.createElement("img",{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},style:{marginLeft:6},src:n?s:r,onClick:function(e){e.stopPropagation(),c.store.dispatch(l.InitImgAttribute())}}))}},function(e,t,n){"use strict";var i=n(28).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(35),r=n(55),l=n(42),c=n(432),s=n(433),u=n(30),d=n(438),h=n(439),g=n(440),f=n(26),v=n(441),p=n(63),b=n(82),m=n(146);function y(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var C=y(o),I=function(e){var t,n,i=r.getCurrentStepInfo(null==(t=e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList);return{toolInstance:e.annotation.toolInstance,stepInfo:i,imgList:e.annotation.imgList,imgIndex:e.annotation.imgIndex,stepList:e.annotation.stepList}},x=a.connect(I,null,null,{context:u.LabelBeeContext})((function(e){var t=e.toolInstance,n=e.stepInfo,a=e.imgList,r=e.stepList,u=e.imgIndex,y=f.useTranslation().t,I=p.useSingleBox().selectedBox,x=s(t),w=o.useState(!1),k=i(w,2),S=k[0],P=k[1],L=o.useState([]),A=i(L,2),O=A[0],T=A[1],E=m.useStatus(),D=E.isPointCloudDetectionPattern,M=E.isPointCloudSegmentationPattern,N=l.jsonParser(n.config),R=[x.copyPrevious,x.empty,x.setValidity];if(D&&!0===N.trackConfigurable){var B=!I,j={name:y("UnifyParams"),key:"UnifyParams",imgSvg:B?h:d,hoverSvg:g,onClick:function(){T(b.composeResultByToolInstance({toolInstance:t,imgList:a,imgIndex:u,stepList:r})),P(!0)},forbidConfirm:!0,forbidOperation:B};R.unshift(j)}var _=o.useCallback((function(){P(!1)}),[]),H=null==I?void 0:I.info;return M&&(R=R.filter((function(e){return!["setValidity","copyPrevious"].includes(e.key)}))),C.default.createElement(C.default.Fragment,null,C.default.createElement(c,{allOperation:R}),C.default.createElement(v,{id:null==H?void 0:H.trackID,visible:S,onCancel:_,config:N,imgList:O}))})),w=a.connect(I,null,null,{context:u.LabelBeeContext})((function(e){var t=e.toolInstance,n=e.stepInfo,i=s(t),o=l.jsonParser(null==n?void 0:n.config),a=[i.empty];return 0===(null==n?void 0:n.dataSourceStep)&&a.push(i.setValidity),(null==o?void 0:o.copyBackwardResult)&&a.push(i.copyPrevious),C.default.createElement(c,{allOperation:a})}));t.PointCloudOperation=x,t.default=w},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(25),r=n(26),l=n(41);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=c(o),u={color:"#CCCCCC"},d=function(e){var t=e.info,n=r.useTranslation().t;return t.key.startsWith("sure")?s.default.createElement("div",{key:t.key},"".concat(n("ConfirmTo")).concat(t.name.slice(0),"\uff1f")):s.default.createElement("span",null,t.name)},h=function(e){var t=e.icon;return"string"===typeof t?s.default.createElement("img",{width:23,height:25,src:t}):t},g=function(e){var t=e.isHover,n=e.info,i=!!n.forbidOperation,o=n.key===t&&!i,a={color:o?"#666fff":""};return i&&(a=u),s.default.createElement("div",{style:{cursor:i?"not-allowed":"default"},onClick:function(){var e;return(null==n?void 0:n.forbidConfirm)&&!i&&(null==(e=null==n?void 0:n.onClick)?void 0:e.call(n))}},s.default.createElement("div",{className:"icon"},s.default.createElement(h,{icon:o?n.hoverSvg:n.imgSvg})),s.default.createElement("div",{className:"toolName",style:a},n.name))};e.exports=function(e){var t=e.allOperation,n=o.useRef(null),c=o.useState(null),u=i(c,2),h=u[0],f=u[1],v=r.useTranslation().t,p=Math.floor(24/t.length);return s.default.createElement("div",{className:"generalOperation",ref:n},t.map((function(e,t){return s.default.createElement(a.Col,{span:p,key:t},s.default.createElement("div",{key:e.key,className:"item",onMouseEnter:function(){f(e.key)},onMouseLeave:function(){f(null)}},e.forbidConfirm?s.default.createElement(g,{info:e,isHover:h}):s.default.createElement(a.Popconfirm,{title:s.default.createElement(d,{info:e}),placement:"topRight",okText:v("Confirm"),cancelText:v("Cancel"),getPopupContainer:function(){var e;return null!=(e=n.current)?e:document.body},onConfirm:e.onClick,overlayClassName:"".concat(l.prefix,"-pop-confirm")},s.default.createElement("div",null,s.default.createElement(g,{info:e,isHover:h})))))})))}},function(e,t,n){"use strict";var i=n(28).default,o=n(34).default,a=n(434),r=n(435),l=n(436),c=n(437),s=n(45),u=n(26),d=n(0),h=n(49),g=n(65),f=n(30);function v(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var p=v(d),b=Object.defineProperty,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,I=function(e,t,n){return t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x=function(e,t){for(var n in t||(t={}))y.call(t,n)&&I(e,n,t[n]);if(m){var i,a=o(m(t));try{for(a.s();!(i=a.n()).done;){n=i.value;C.call(t,n)&&I(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e};e.exports=function(e){var t=d.useState(0),n=i(t,2),o=n[0],v=n[1],b=u.useTranslation(),m=b.t,y=b.i18n,C=f.useSelector((function(e){var t=e.annotation;return{currentData:t.imgList[t.imgIndex]}})).currentData,I={height:"25px",lineHeight:"25px",display:"flex",justifyContent:"center",alignItems:"center"},w={name:m("ClearLabel"),key:"empty",imgSvg:a,hoverSvg:r,onClick:function(){null==e||e.clearResult()}},k={name:m(!1===(null==e?void 0:e.valid)?"SetAsValid":"SetAsInvalid"),key:"setValidity",imgSvg:p.default.createElement(s.StopOutlined,{style:I}),hoverSvg:p.default.createElement(s.StopOutlined,{style:x({color:"#666fff"},I)}),onClick:function(){e.setValid(!e.valid),setTimeout((function(){v((function(e){return e+1}))}))}},S={name:m("CopyThePrevious"),key:"copyPrevious",imgSvg:l,hoverSvg:c,onClick:function(){g.store.dispatch(h.CopyBackWordResult())}};return d.useMemo((function(){return{empty:w,setValidity:k,copyPrevious:S}}),[e,o,C,y.language])}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='25px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3e%e5%bd%a2%e7%8a%b6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-46.000000%2c -141.000000)' fill-rule='nonzero'%3e %3cg id='%e6%b8%85%e7%a9%ba%e6%a0%87%e6%b3%a8' transform='translate(18.000000%2c 123.000000)'%3e %3cg id='icon_clear_normal' transform='translate(28.000000%2c 18.000000)'%3e %3crect id='icon_clear' fill='black' opacity='0' x='0' y='0.00780487805' width='24' height='24'%3e%3c/rect%3e %3cpath d='M24%2c10.6934683 C24%2c9.29483367 22.8777821%2c8.15502957 21.4955096%2c8.15502957 L15.5587661%2c8.15502957 L15.5587661%2c3.13276778 C15.5587661%2c1.40881408 14.1764936%2c0.00780487805 12.4755955%2c0.00780487805 L11.6485748%2c0.00780487805 C9.94767669%2c0.00780487805 8.56540414%2c1.40881408 8.56540414%2c3.13276778 L8.56540414%2c8.15502957 L2.5021476%2c8.15502957 C1.12221788%2c8.15502957 0%2c9.29245908 0%2c10.6934683 C0%2c11.835647 0.754392815%2c12.7926075 1.78055447%2c13.1108028 L1.78055447%2c21.9680305 C1.78055447%2c23.093587 2.68254588%2c24.0078049 3.79304959%2c24.0078049 L20.3615775%2c24.0078049 C21.4720812%2c24.0078049 22.3740726%2c23.093587 22.3740726%2c21.9680305 L22.3740726%2c13.0609364 C23.3205779%2c12.6999984 24%2c11.7786568 24%2c10.6934683 Z M10.114018%2c3.13276778 C10.114018%2c2.27554011 10.8028114%2c1.5774101 11.6485748%2c1.5774101 L12.4755955%2c1.5774101 C13.3213588%2c1.5774101 14.0101523%2c2.27554011 14.0101523%2c3.13276778 L14.0101523%2c8.15502957 L10.114018%2c8.15502957 L10.114018%2c3.13276778 Z M20.3615775%2c22.4381997 L17.8055447%2c22.4381997 L17.8055447%2c19.2206277 C17.8055447%2c18.7860774 17.4588052%2c18.4370124 17.0324092%2c18.4370124 C16.6060133%2c18.4370124 16.2592737%2c18.788452 16.2592737%2c19.2206277 L16.2592737%2c22.4381997 L12.8527919%2c22.4381997 L12.8527919%2c19.2206277 C12.8527919%2c18.7860774 12.5060523%2c18.4370124 12.0796564%2c18.4370124 C11.6509176%2c18.4370124 11.3065209%2c18.788452 11.3065209%2c19.2206277 L11.3065209%2c22.4381997 L7.89769621%2c22.4381997 L7.89769621%2c19.2206277 C7.89769621%2c18.7860774 7.55095666%2c18.4370124 7.12456072%2c18.4370124 C6.69582194%2c18.4370124 6.35142522%2c18.788452 6.35142522%2c19.2206277 L6.35142522%2c22.4381997 L3.79304959%2c22.4381997 C3.53768059%2c22.4381997 3.32916829%2c22.226861 3.32916829%2c21.9680305 L3.32916829%2c13.2295324 L20.8254588%2c13.2295324 L20.8254588%2c21.9656559 C20.8254588%2c22.226861 20.6169465%2c22.4381997 20.3615775%2c22.4381997 Z M21.4978524%2c11.6599272 L2.5021476%2c11.6599272 C1.97500976%2c11.6599272 1.54861382%2c11.2253769 1.54861382%2c10.6934683 C1.54861382%2c10.1591851 1.9773526%2c9.7246348 2.5021476%2c9.7246348 L21.4955096%2c9.7246348 C22.0226474%2c9.7246348 22.4513862%2c10.1591851 22.4513862%2c10.6934683 C22.4513862%2c11.2277514 22.0226474%2c11.6599272 21.4978524%2c11.6599272 Z' id='%e5%bd%a2%e7%8a%b6' fill='%23666666'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_clear_a%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-166.000000%2c -141.000000)' fill-rule='nonzero'%3e %3cg id='%e6%b8%85%e7%a9%ba%e6%a0%87%e6%b3%a8%e5%a4%87%e4%bb%bd' transform='translate(138.000000%2c 123.000000)'%3e %3cg id='icon_clear' transform='translate(28.000000%2c 18.000000)'%3e %3crect id='icon_clear_active' fill='black' opacity='0' x='0' y='0.00780487805' width='24' height='24'%3e%3c/rect%3e %3cpath d='M24%2c10.6934683 C24%2c9.29483367 22.8777821%2c8.15502957 21.4955096%2c8.15502957 L15.5587661%2c8.15502957 L15.5587661%2c3.13276778 C15.5587661%2c1.40881408 14.1764936%2c0.00780487805 12.4755955%2c0.00780487805 L11.6485748%2c0.00780487805 C9.94767669%2c0.00780487805 8.56540414%2c1.40881408 8.56540414%2c3.13276778 L8.56540414%2c8.15502957 L2.5021476%2c8.15502957 C1.12221788%2c8.15502957 0%2c9.29245908 0%2c10.6934683 C0%2c11.835647 0.754392815%2c12.7926075 1.78055447%2c13.1108028 L1.78055447%2c21.9680305 C1.78055447%2c23.093587 2.68254588%2c24.0078049 3.79304959%2c24.0078049 L20.3615775%2c24.0078049 C21.4720812%2c24.0078049 22.3740726%2c23.093587 22.3740726%2c21.9680305 L22.3740726%2c13.0609364 C23.3205779%2c12.6999984 24%2c11.7786568 24%2c10.6934683 Z M10.114018%2c3.13276778 C10.114018%2c2.27554011 10.8028114%2c1.5774101 11.6485748%2c1.5774101 L12.4755955%2c1.5774101 C13.3213588%2c1.5774101 14.0101523%2c2.27554011 14.0101523%2c3.13276778 L14.0101523%2c8.15502957 L10.114018%2c8.15502957 L10.114018%2c3.13276778 Z M20.3615775%2c22.4381997 L17.8055447%2c22.4381997 L17.8055447%2c19.2206277 C17.8055447%2c18.7860774 17.4588052%2c18.4370124 17.0324092%2c18.4370124 C16.6060133%2c18.4370124 16.2592737%2c18.788452 16.2592737%2c19.2206277 L16.2592737%2c22.4381997 L12.8527919%2c22.4381997 L12.8527919%2c19.2206277 C12.8527919%2c18.7860774 12.5060523%2c18.4370124 12.0796564%2c18.4370124 C11.6509176%2c18.4370124 11.3065209%2c18.788452 11.3065209%2c19.2206277 L11.3065209%2c22.4381997 L7.89769621%2c22.4381997 L7.89769621%2c19.2206277 C7.89769621%2c18.7860774 7.55095666%2c18.4370124 7.12456072%2c18.4370124 C6.69582194%2c18.4370124 6.35142522%2c18.788452 6.35142522%2c19.2206277 L6.35142522%2c22.4381997 L3.79304959%2c22.4381997 C3.53768059%2c22.4381997 3.32916829%2c22.226861 3.32916829%2c21.9680305 L3.32916829%2c13.2295324 L20.8254588%2c13.2295324 L20.8254588%2c21.9656559 C20.8254588%2c22.226861 20.6169465%2c22.4381997 20.3615775%2c22.4381997 Z M21.4978524%2c11.6599272 L2.5021476%2c11.6599272 C1.97500976%2c11.6599272 1.54861382%2c11.2253769 1.54861382%2c10.6934683 C1.54861382%2c10.1591851 1.9773526%2c9.7246348 2.5021476%2c9.7246348 L21.4955096%2c9.7246348 C22.0226474%2c9.7246348 22.4513862%2c10.1591851 22.4513862%2c10.6934683 C22.4513862%2c11.2277514 22.0226474%2c11.6599272 21.4978524%2c11.6599272 Z' id='%e5%bd%a2%e7%8a%b6' fill='%23666FFF'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_invalid%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='24' height='24'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-49.000000%2c -234.000000)'%3e %3cg id='%e6%a0%87%e6%b3%a8%e6%97%a0%e6%95%88' transform='translate(21.000000%2c 215.000000)'%3e %3cg id='icon_invalid' transform='translate(28.000000%2c 19.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg%3e%3c/g%3e %3cpath d='M14.8132711%2c20.5 L3.35714286%2c20.5 C2.91670867%2c20.5 2.57142857%2c20.1826213 2.57142857%2c19.8055556 L2.57142857%2c3.19444444 C2.57142857%2c2.81737868 2.91670867%2c2.5 3.35714286%2c2.5 L20.6428571%2c2.5 C21.0832913%2c2.5 21.4285714%2c2.81737868 21.4285714%2c3.19444444 L21.4285714%2c15.2898676 L23%2c16.4514553 L23%2c3.19444444 C23%2c1.97602093 21.938175%2c1 20.6428571%2c1 L3.35714286%2c1 C2.06182497%2c1 1%2c1.97602093 1%2c3.19444444 L1%2c19.8055556 C1%2c21.0239791 2.06182497%2c22 3.35714286%2c22 L15.9411765%2c22 L14.8132711%2c20.5 Z' id='%e8%b7%af%e5%be%84' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M8.5%2c10 C9.88071187%2c10 11%2c8.88071187 11%2c7.5 C11%2c6.11928813 9.88071187%2c5 8.5%2c5 C7.11928813%2c5 6%2c6.11928813 6%2c7.5 C6%2c8.88071187 7.11928813%2c10 8.5%2c10 Z M8.5%2c8.57142857 C7.90826634%2c8.57142857 7.42857143%2c8.09173366 7.42857143%2c7.5 C7.42857143%2c6.90826634 7.90826634%2c6.42857143 8.5%2c6.42857143 C9.09173366%2c6.42857143 9.57142857%2c6.90826634 9.57142857%2c7.5 C9.57142857%2c8.09173366 9.09173366%2c8.57142857 8.5%2c8.57142857 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M1.93578343%2c18 C4.08872055%2c14.8551688 6.74336715%2c13.7936147 9.20632589%2c14.9383326 C9.39666832%2c15.0267988 9.58966667%2c15.1227541 9.8383972%2c15.2511189 C11.2590222%2c15.9842746 11.4672631%2c16.0801404 12.0929951%2c16.2047792 C13.2715953%2c16.4395429 14.3253377%2c16.0173433 15.3845587%2c14.7865988 C17.834834%2c11.9395412 19.5284667%2c10.6940174 22%2c10.3111164 L21.8385808%2c9 C19.0487146%2c9.43221863 17.1525949%2c10.8266545 14.5357091%2c13.8673024 C13.7408033%2c14.7909303 13.0776295%2c15.056642 12.2992772%2c14.9016031 C11.8197086%2c14.8060784 11.6287028%2c14.7181469 10.3315315%2c14.0487032 C10.0702502%2c13.9138612 9.86453995%2c13.8115857 9.65795075%2c13.7155685 C6.66190483%2c12.3230858 3.4571787%2c13.6046086 1%2c17.1938506 L1.93578343%2c18 Z' id='%e8%b7%af%e5%be%84' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M19.5%2c23 C21.4329966%2c23 23%2c21.4329966 23%2c19.5 C23%2c17.5670034 21.4329966%2c16 19.5%2c16 C17.5670034%2c16 16%2c17.5670034 16%2c19.5 C16%2c21.4329966 17.5670034%2c23 19.5%2c23 Z M19.5%2c22 C18.1192881%2c22 17%2c20.8807119 17%2c19.5 C17%2c18.1192881 18.1192881%2c17 19.5%2c17 C20.8807119%2c17 22%2c18.1192881 22%2c19.5 C22%2c20.8807119 20.8807119%2c22 19.5%2c22 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M21.2928932%2c17.7692308 L21.6464466%2c18.1227842 L21.6464466%2c17.4156774 L21.2928932%2c17.7692308 Z M17.7692308%2c21.2928932 L17.4156774%2c21.6464466 L18.1227842%2c21.6464466 L17.7692308%2c21.2928932 Z M17.7071068%2c21.2307692 L17.3535534%2c20.8772158 L17.3535534%2c21.5843226 L17.7071068%2c21.2307692 Z M21.2307692%2c17.7071068 L21.5843226%2c17.3535534 L20.8772158%2c17.3535534 L21.2307692%2c17.7071068 Z' id='%e7%9f%a9%e5%bd%a2' stroke='%23666666' mask='url(%23mask-2)'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_invalid_a%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='24' height='24'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-166.000000%2c -234.000000)'%3e %3cg id='%e6%a0%87%e6%b3%a8%e6%97%a0%e6%95%88%e5%a4%87%e4%bb%bd' transform='translate(138.000000%2c 215.000000)'%3e %3cg id='icon_invalid' transform='translate(28.000000%2c 19.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='icon_invalid_active'%3e%3c/g%3e %3cpath d='M14.8132711%2c20.5 L3.35714286%2c20.5 C2.91670867%2c20.5 2.57142857%2c20.1826213 2.57142857%2c19.8055556 L2.57142857%2c3.19444444 C2.57142857%2c2.81737868 2.91670867%2c2.5 3.35714286%2c2.5 L20.6428571%2c2.5 C21.0832913%2c2.5 21.4285714%2c2.81737868 21.4285714%2c3.19444444 L21.4285714%2c15.2898676 L23%2c16.4514553 L23%2c3.19444444 C23%2c1.97602093 21.938175%2c1 20.6428571%2c1 L3.35714286%2c1 C2.06182497%2c1 1%2c1.97602093 1%2c3.19444444 L1%2c19.8055556 C1%2c21.0239791 2.06182497%2c22 3.35714286%2c22 L15.9411765%2c22 L14.8132711%2c20.5 Z' id='%e8%b7%af%e5%be%84' fill='%23666FFF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M8.5%2c10 C9.88071187%2c10 11%2c8.88071187 11%2c7.5 C11%2c6.11928813 9.88071187%2c5 8.5%2c5 C7.11928813%2c5 6%2c6.11928813 6%2c7.5 C6%2c8.88071187 7.11928813%2c10 8.5%2c10 Z M8.5%2c8.57142857 C7.90826634%2c8.57142857 7.42857143%2c8.09173366 7.42857143%2c7.5 C7.42857143%2c6.90826634 7.90826634%2c6.42857143 8.5%2c6.42857143 C9.09173366%2c6.42857143 9.57142857%2c6.90826634 9.57142857%2c7.5 C9.57142857%2c8.09173366 9.09173366%2c8.57142857 8.5%2c8.57142857 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%236674FF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M1.93578343%2c18 C4.08872055%2c14.8551688 6.74336715%2c13.7936147 9.20632589%2c14.9383326 C9.39666832%2c15.0267988 9.58966667%2c15.1227541 9.8383972%2c15.2511189 C11.2590222%2c15.9842746 11.4672631%2c16.0801404 12.0929951%2c16.2047792 C13.2715953%2c16.4395429 14.3253377%2c16.0173433 15.3845587%2c14.7865988 C17.834834%2c11.9395412 19.5284667%2c10.6940174 22%2c10.3111164 L21.8385808%2c9 C19.0487146%2c9.43221863 17.1525949%2c10.8266545 14.5357091%2c13.8673024 C13.7408033%2c14.7909303 13.0776295%2c15.056642 12.2992772%2c14.9016031 C11.8197086%2c14.8060784 11.6287028%2c14.7181469 10.3315315%2c14.0487032 C10.0702502%2c13.9138612 9.86453995%2c13.8115857 9.65795075%2c13.7155685 C6.66190483%2c12.3230858 3.4571787%2c13.6046086 1%2c17.1938506 L1.93578343%2c18 Z' id='%e8%b7%af%e5%be%84' fill='%23666FFF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M19.5%2c23 C21.4329966%2c23 23%2c21.4329966 23%2c19.5 C23%2c17.5670034 21.4329966%2c16 19.5%2c16 C17.5670034%2c16 16%2c17.5670034 16%2c19.5 C16%2c21.4329966 17.5670034%2c23 19.5%2c23 Z M19.5%2c22 C18.1192881%2c22 17%2c20.8807119 17%2c19.5 C17%2c18.1192881 18.1192881%2c17 19.5%2c17 C20.8807119%2c17 22%2c18.1192881 22%2c19.5 C22%2c20.8807119 20.8807119%2c22 19.5%2c22 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%236674FF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M21.2928932%2c17.7692308 L21.6464466%2c18.1227842 L21.6464466%2c17.4156774 L21.2928932%2c17.7692308 Z M17.7692308%2c21.2928932 L17.4156774%2c21.6464466 L18.1227842%2c21.6464466 L17.7692308%2c21.2928932 Z M17.7071068%2c21.2307692 L17.3535534%2c20.8772158 L17.3535534%2c21.5843226 L17.7071068%2c21.2307692 Z M21.2307692%2c17.7071068 L21.5843226%2c17.3535534 L20.8772158%2c17.3535534 L21.2307692%2c17.7071068 Z' id='%e7%9f%a9%e5%bd%a2' stroke='%23666FFF' mask='url(%23mask-2)'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M12.0355 1.96447L8.5 5.5L12.0354 9.03545L15.571 5.49991L12.0355 1.96447Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M18.5355 8.46447L15 12L18.5354 15.5354L22.071 11.9999L18.5355 8.46447Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M5.53553 8.46447L2 12L5.53544 15.5354L9.07098 11.9999L5.53553 8.46447Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M12.0355 14.9645L8.5 18.5L12.0354 22.0354L15.571 18.4999L12.0355 14.9645Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M12.0355 1.96447L8.5 5.5L12.0354 9.03545L15.571 5.49991L12.0355 1.96447Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M18.5355 8.46447L15 12L18.5354 15.5354L22.071 11.9999L18.5355 8.46447Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M5.53553 8.46447L2 12L5.53544 15.5354L9.07098 11.9999L5.53553 8.46447Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M12.0355 14.9645L8.5 18.5L12.0354 22.0354L15.571 18.4999L12.0355 14.9645Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M12.0355 1.96447L8.5 5.5L12.0354 9.03545L15.571 5.49991L12.0355 1.96447Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M18.5355 8.46447L15 12L18.5354 15.5354L22.071 11.9999L18.5355 8.46447Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M5.53553 8.46447L2 12L5.53544 15.5354L9.07098 11.9999L5.53553 8.46447Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M12.0355 14.9645L8.5 18.5L12.0354 22.0354L15.571 18.4999L12.0355 14.9645Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(51).default,o=n(28).default,a=n(34).default,r=n(41),l=n(49),c=n(30),s=n(25),u=n(0),d=n(26),h=n(45),g=n(17),f=n(35),v=n(63),p=n(32);function b(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var m=b(u),y=Object.defineProperty,C=Object.defineProperties,I=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,S=function(e,t,n){return t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},P=function(e,t){for(var n in t||(t={}))w.call(t,n)&&S(e,n,t[n]);if(x){var i,o=a(x(t));try{for(o.s();!(i=o.n()).done;){n=i.value;k.call(t,n)&&S(e,n,t[n])}}catch(r){o.e(r)}finally{o.f()}}return e},L={labelCol:{span:8},wrapperCol:{span:16}},A=[{required:!0,message:"\u8bf7\u586b\u5199\u4e00\u4e2a\u6570\u5b57"}],O=[{required:!0,message:"\u8bf7\u9009\u62e9\u4e3b\u5c5e\u6027"}],T=function(e){var t=e.text;return m.default.createElement("span",{style:{borderRadius:"4px 0px 0px 4px",padding:"0px 12px",background:"#FAFAFA",border:"1px solid rgb(217 217 217)",borderRight:"0",display:"flex",alignItems:"center",height:32}},t)},E=f.connect((function(e){return{imgIndex:e.annotation.imgIndex}}),null,null,{context:c.LabelBeeContext})((function(e){var t=e.id,n=e.visible,a=e.onCancel,f=e.config,b=e.imgList,y=e.imgIndex,x=c.useDispatch(),w=v.useSingleBox().selectedBox,k=u.useState(),S=o(k,2),E=S[0],D=S[1],M=s.Form.useForm(),N=o(M,1)[0],R=d.useTranslation().t;u.useEffect((function(){!1===n?(N.resetFields(),D(void 0)):j()}),[n]);var B,j=u.useCallback((function(){var e,t=N.getFieldsValue(["prevPage","nextPage"]),n=t.prevPage,i=t.nextPage,o=b.filter((function(e,t){return p.MathUtils.isInRange(t,[n-1,i-1])}));if((null==o?void 0:o.length)>0&&(null==w?void 0:w.info)&&void 0!==(null==(e=null==w?void 0:w.info)?void 0:e.trackID)){var a=g.PointCloudUtils.getMaxSizeFromBox({trackID:w.info.trackID,imgList:o});D(a)}else D(void 0)}),[b,w,y]),_={width:"200px"},H={marginBottom:"24px",display:"flex",alignItems:"center"};return m.default.createElement(s.Modal,{title:R("UnifyParams"),visible:n,onCancel:a,onOk:function(){return N.submit()},wrapClassName:"labelbee-custom-modal"},m.default.createElement(s.Form,(B=P({},L),C(B,I({form:N,onFinish:function(e){var n;if(t)if(E){x(l.ToSubmitFileData(r.ESubmitType.SyncImgList));var o={attribute:e.attribute};if(f.secondaryAttributeConfigurable){var c={};null==(n=f.inputList)||n.forEach((function(t){var n=e[t.value];void 0!==n&&Object.assign(c,i({},t.value,n))})),Object.keys(c).length>0&&Object.assign(o,{subAttribute:c})}E&&Object.assign(o,E),x(l.BatchUpdateResultByTrackID(t,o,[e.prevPage-1,e.nextPage-1])),a()}else s.message.info("\u8be5\u8303\u56f4\u4e0d\u5b58\u5728\u66f4\u6539\u6570\u636e, \u8bf7\u66f4\u6539\u7edf\u4e00\u8303\u56f4")}}))),m.default.createElement(s.Form.Item,{name:"id",label:R("UnifyTrackID")},t),m.default.createElement(s.Form.Item,{label:R("UnifyAttributeRange"),required:!0},m.default.createElement(s.Form.Item,{style:{display:"inline-block"},rules:A,name:"prevPage",noStyle:!0,initialValue:1},m.default.createElement(s.InputNumber,{precision:0,min:1,style:{width:"80px"},onChange:function(){return j()}})),m.default.createElement("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}},"-"),m.default.createElement(s.Form.Item,{style:{display:"inline-block"},rules:A,name:"nextPage",noStyle:!0,initialValue:b.length},m.default.createElement(s.InputNumber,{precision:0,min:1,style:{width:"80px"},onChange:function(){return j()}})),m.default.createElement("span",{style:{display:"inline-block",width:"40x",marginLeft:"10px",textAlign:"center"}},R("Page"))),m.default.createElement(s.Form.Item,{name:"UnifySize",label:R("UnifySize")},function(){if(E&&(null==w?void 0:w.info)){var e={marginRight:16},t=g.PointCloudUtils.transferBox2Kitti(P(P({},null==w?void 0:w.info),E)),n=t.length,i=t.width,o=t.height;return m.default.createElement("div",null,m.default.createElement("span",{style:e},R("Length"),": ",n.toFixed(2)),m.default.createElement("span",{style:e},R("Width"),": ",i.toFixed(2)),m.default.createElement("span",{style:e},R("Height"),": ",o.toFixed(2)),m.default.createElement(s.Popover,{placement:"rightBottom",content:"\u7edf\u4e00\u5c3a\u5bf8\u4e3a\u8be5ID\u7684\u6240\u6709\u6807\u6ce8\u6846\u4e2d\u6700\u5927\u7684\u5c3a\u5bf8"},m.default.createElement(h.QuestionCircleOutlined,null)))}}()),m.default.createElement(s.Form.Item,{label:R("UnifyTag"),required:!0},m.default.createElement("div",{style:H},m.default.createElement(T,{text:R("Attribute")}),m.default.createElement(s.Form.Item,{name:"attribute",noStyle:!0,rules:O},m.default.createElement(s.Select,{style:_},f.attributeList.map((function(e){return m.default.createElement(s.Select.Option,{key:e.value,value:e.value},e.key)}))))),f.secondaryAttributeConfigurable&&f.inputList.map((function(e){var t;return m.default.createElement("div",{key:e.value,style:H},m.default.createElement(T,{text:e.key}),m.default.createElement(s.Form.Item,{name:e.value,noStyle:!0,required:!1},m.default.createElement(s.Select,{style:_},null==(t=e.subSelected)?void 0:t.map((function(e){return m.default.createElement(s.Select.Option,{key:e.value,value:e.value},e.key)})))))})))))}));e.exports=E},function(e,t,n){"use strict";var i=n(25),o=n(35),a=n(44),r=n(0),l=n(255),c=n(65),s=n(30),u=n(443),d=n(444),h=n(445),g=n(446),f=n(447),v=n(26);function p(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var b=p(r);var m=o.connect((function(e){return{imgAttribute:e.imgAttribute}}),null,null,{context:s.LabelBeeContext})((function(e){var t=e.imgAttribute,n=t.contrast,o=t.saturation,s=t.brightness,p=t.zoomRatio,m=t.isOriginalSize,y=v.useTranslation().t,C=a.throttle((function(e){c.store.dispatch(l.default.UpdateImgAttribute(e))}),60,{trailing:!0}),I=[{name:"Saturation",min:-100,max:500,step:2,onChange:function(e){return C({saturation:e})},value:o,svg:u},{name:"Contrast",min:-100,max:300,step:2,onChange:function(e){return C({contrast:e})},value:n,svg:d},{name:"Exposure",min:-100,max:400,step:2,onChange:function(e){return C({brightness:e})},value:s,svg:h},{name:"ScreenRatio",min:.1,max:10,step:.1,onChange:function(e){return C({zoomRatio:e})},value:p,svg:g}];return r.useEffect((function(){return function(){c.store.dispatch(l.default.InitImgAttribute())}}),[]),b.default.createElement("div",null,I.map((function(e,t){return b.default.createElement("div",{className:"imgAttributeController",key:"option_".concat(t)},b.default.createElement(i.Row,{className:"tools",style:{padding:"0px 0"}},b.default.createElement(i.Col,{span:24},b.default.createElement("span",{className:"singleTool"},b.default.createElement("img",{width:12,height:12,src:e.svg}),b.default.createElement("span",{className:"toolName"},y(e.name))))),b.default.createElement(i.Row,null,b.default.createElement(i.Col,{span:20},b.default.createElement(i.Slider,{min:e.min,max:e.max,step:e.step,value:e.value,onChange:e.onChange,trackStyle:{background:"#666fff"}})),b.default.createElement(i.Col,{span:4},b.default.createElement(i.Input,{value:e.value,disabled:!0,style:{fontSize:12,marginBottom:23,padding:"0px 2px",textAlign:"center"}}))))})),b.default.createElement("div",{className:"imgAttributeController"},b.default.createElement(i.Row,{className:"tools",style:{padding:"10px 0"}},b.default.createElement(i.Col,{span:18},b.default.createElement("span",{className:"singleTool"},b.default.createElement("img",{src:f,width:16,style:{marginTop:"-2px"}}),b.default.createElement("span",{className:"toolName"},y("OriginalScale")))),b.default.createElement(i.Col,null,b.default.createElement(i.Switch,{checked:m,onChange:function(e){return C({isOriginalSize:e})}})))))}));e.exports=m},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e9%a5%b1%e5%92%8c%e5%ba%a6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-481.000000%2c -124.000000)'%3e %3cg id='%e9%a5%b1%e5%92%8c%e5%ba%a6' transform='translate(481.000000%2c 124.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg id='%e9%a5%b1%e5%92%8c%e5%ba%a6-(1)' mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cg transform='translate(2.000000%2c 0.000000)'%3e %3cpath d='M6.28551136%2c15.9450284 C2.821875%2c15.9450284 0.0127840909%2c13.1268466 0.0127840909%2c9.67230114 C0.0127840909%2c5.09048295 5.24914773%2c0.00866477273 6.28551136%2c0.00866477273 C7.15823864%2c0.00866477273 12.5582386%2c5.39957386 12.5582386%2c9.67230114 C12.5582386%2c13.1268466 9.74914773%2c15.9450284 6.28551136%2c15.9450284 Z M6.26732955%2c1.21775568 C5.21278409%2c1.96321023 1.14914773%2c5.79957386 1.14914773%2c9.66321023 C1.14914773%2c12.4995739 3.45823864%2c14.8086648 6.29460227%2c14.8086648 C9.13096591%2c14.8086648 11.4400568%2c12.4995739 11.4400568%2c9.66321023 C11.4309659%2c6.2359375 7.30369318%2c2.04502841 6.26732955%2c1.21775568 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3cpath d='M9.20369318%2c6.91775568 C10.7764205%2c8.49048295 10.7764205%2c11.0450284 9.20369318%2c12.6177557 C7.63096591%2c14.190483 5.07642045%2c14.190483 3.50369318%2c12.6177557 L9.20369318%2c6.91775568 Z' id='%e8%b7%af%e5%be%84'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e6%94%be%e5%a4%a7%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-437.000000%2c -125.000000)'%3e %3cg id='%e6%94%be%e5%a4%a7' transform='translate(437.000000%2c 125.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg id='%e5%af%b9%e6%af%94%e5%ba%a6' mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cpath d='M2.25471549%2c13.5345736 L2.28377061%2c13.5698491 C3.71170509%2c15.0309327 5.68912337%2c15.9414593 7.8824479%2c15.9747872 L7.90975417%2c15.9750853 C10.0876767%2c15.988818 12.0717327%2c15.1310159 13.5224026%2c13.7355349 L13.5574794%2c13.6912368 C15.0213452%2c12.2613547 15.9294671%2c10.2834793 15.953216%2c8.07801203 C15.9769053%2c5.87765227 15.1116308%2c3.87626648 13.6789465%2c2.40995617 C12.2489055%2c0.958829251 10.2741105%2c0.0535890334 8.08152127%2c0.0199232337 L8.054215%2c0.0194677151 C5.86069173%2c0.00607137034 3.86417498%2c0.868563587 2.40521788%2c2.28856852 C0.946896739%2c3.72375685 0.0338461956%2c5.70596465 0.0101569293%2c7.90634429 C-0.0134329775%2c10.0976219 0.837115237%2c12.0836653 2.25471549%2c13.5345736 Z M8.67367358%2c1.27768049 C10.286452%2c1.44950722 11.7315969%2c2.17528929 12.8057027%2c3.27521081 L12.8101743%2c3.27525056 L12.8057027%2c3.27521081 C14.0068005%2c4.50975576 14.7514227%2c6.20240594 14.7313703%2c8.06481599 C14.7112582%2c9.93241304 13.9304662%2c11.5989096 12.7029763%2c12.8173769 L12.6725102%2c12.8468295 C11.5832608%2c13.8981403 10.127702%2c14.5878121 8.52895439%2c14.7198719 L8.67367358%2c1.27768049 Z M7.29456842%2c14.7066162 C6.99960518%2c14.6688366 6.70388674%2c14.6358664 6.42424602%2c14.5580416 L7.305479%2c13.6932043 L7.29456842%2c14.7066162 Z M7.31664792%2c12.655169 L5.61932747%2c14.3211687 C5.35725495%2c14.2186411 5.10778228%2c14.1065343 4.87090943%2c13.9751901 L7.32835345%2c11.5672908 L7.31664792%2c12.655169 L7.31664792%2c12.655169 Z M7.33948263%2c10.5341444 L4.20886184%2c13.5905772 C3.99188241%2c13.4490378 3.79237184%2c13.2931298 3.59790914%2c13.1165136 L7.35124779%2c9.44143698 L7.33948263%2c10.5341444 L7.33948263%2c10.5341444 Z M7.36247634%2c8.39823455 L3.0596539%2c12.6145077 C2.88230233%2c12.4284316 2.71542413%2c12.2330349 2.5667501%2c12.0178242 L7.37412224%2c7.31524528 L7.36247634%2c8.39823455 Z M7.38531104%2c6.27721 L2.16071359%2c11.3977495 C2.01426539%2c11.1672561 1.89530231%2c10.9274022 1.79380809%2c10.6783866 L7.3969967%2c5.19414125 L7.38531104%2c6.27721 L7.38531104%2c6.27721 Z M7.40816562%2c4.15584759 L1.5134718%2c9.91983307 C1.42966504%2c9.63568106 1.36076343%2c9.34198971 1.31408045%2c9.04817915 L7.41983141%2c3.0727987 L7.40816562%2c4.15584759 Z M3.26558364%2c3.17250431 C3.94068814%2c2.50868797 4.75868348%2c1.98561613 5.66915047%2c1.65295276 L1.69467882%2c5.54002052 C2.04222748%2c4.64447857 2.58529212%2c3.83556545 3.26558364%2c3.17250431 Z M7.06902349%2c1.30580157 C7.19108684%2c1.29187021 7.32002644%2c1.28326497 7.43928762%2c1.26440497 L7.43109971%2c2.02476702 L1.23742818%2c8.09337428 L1.23929629%2c7.91958009 C1.24287352%2c7.58679748 1.26860978%2c7.25951986 1.31737946%2c6.93695225 L7.06902349%2c1.30580157 L7.06902349%2c1.30580157 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e5%bd%a2%e7%8a%b6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-525.000000%2c -124.000000)'%3e %3cg id='%e6%9b%9d%e5%85%89' transform='translate(525.000000%2c 124.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg mask='url(%23mask-2)' fill-rule='nonzero' id='%e5%bd%a2%e7%8a%b6'%3e %3cpath d='M2.6123501%2c13.1851491 L2.64065558%2c13.2166896 L2.6413572%2c13.2203755 C4.01642052%2c14.6273605 5.88331047%2c15.4443523 7.88790599%2c15.474817 L7.9129068%2c15.4750953 C9.90015586%2c15.4876256 11.7740345%2c14.7236019 13.1304117%2c13.4251429 L13.2081022%2c13.333556 C14.6189485%2c11.9554626 15.4315386%2c10.0884174 15.453245%2c8.0726293 C15.4749051%2c6.06074757 14.701873%2c4.17234442 13.3228152%2c2.76091268 C11.944524%2c1.36229865 10.0794546%2c0.550659153 8.07318152%2c0.519853677 L8.05116145%2c0.519458391 C6.04381797%2c0.507199088 4.15921827%2c1.27912879 2.7559335%2c2.64493708 C1.34678056%2c4.03173715 0.531741066%2c5.90419121 0.510127959%2c7.91172667 C0.488530813%2c9.91789572 1.24972356%2c11.7905061 2.6123501%2c13.1851491 Z' stroke='%23666666'%3e%3c/path%3e %3cpath d='M11.8970207%2c7.47681347 L9.88251295%2c7.47681347 C9.70012953%2c6.78873057 9.16126943%2c6.24158031 8.46489637%2c6.05919689 L8.46489637%2c4.04468912 C8.46489637%2c3.77111399 8.24106218%2c3.54727979 7.96748705%2c3.54727979 C7.69391192%2c3.54727979 7.47007772%2c3.77111399 7.47007772%2c4.04468912 L7.47007772%2c6.05919689 C6.78199482%2c6.24158031 6.23484456%2c6.78044041 6.05246114%2c7.47681347 L4.03795337%2c7.47681347 C3.76437824%2c7.47681347 3.54054404%2c7.70064767 3.54054404%2c7.9742228 C3.54054404%2c8.24779793 3.76437824%2c8.47163212 4.03795337%2c8.47163212 L6.05246114%2c8.47163212 C6.23484456%2c9.15971503 6.77370466%2c9.70686528 7.47007772%2c9.8892487 L7.47007772%2c11.9037565 C7.47007772%2c12.1773316 7.69391192%2c12.4011658 7.96748705%2c12.4011658 C8.24106218%2c12.4011658 8.46489637%2c12.1773316 8.46489637%2c11.9037565 L8.46489637%2c9.8892487 C9.15297927%2c9.70686528 9.70012953%2c9.16800518 9.88251295%2c8.47163212 L11.8970207%2c8.47163212 C12.1705959%2c8.47163212 12.3944301%2c8.24779793 12.3944301%2c7.9742228 C12.3944301%2c7.70064767 12.178886%2c7.47681347 11.8970207%2c7.47681347 Z M7.96748705%2c8.9607513 C7.42862694%2c8.9607513 6.9892487%2c8.52137306 6.9892487%2c7.98251295 C6.9892487%2c7.44365285 7.42862694%2c7.00427461 7.96748705%2c7.00427461 C8.50634715%2c7.00427461 8.94572539%2c7.44365285 8.94572539%2c7.98251295 C8.94572539%2c8.52137306 8.51463731%2c8.9607513 7.96748705%2c8.9607513 L7.96748705%2c8.9607513 Z' fill='%23666666'%3e%3c/path%3e %3cpath d='M10.1643782%2c6.27474093 C10.2887306%2c6.27474093 10.4213731%2c6.225 10.5125648%2c6.12551813 L11.0928756%2c5.54520725 C11.2835492%2c5.35453368 11.2835492%2c5.03950777 11.0928756%2c4.84054404 C10.9022021%2c4.64987047 10.5871762%2c4.64987047 10.3882124%2c4.84054404 L9.80790155%2c5.42085492 C9.61722798%2c5.6115285 9.61722798%2c5.9265544 9.80790155%2c6.12551813 C9.91567358%2c6.225 10.0400259%2c6.27474093 10.1643782%2c6.27474093 Z M5.42240933%2c6.13380829 C5.52189119%2c6.23329016 5.64624352%2c6.28303109 5.77059585%2c6.28303109 C5.89494819%2c6.28303109 6.02759067%2c6.23329016 6.11878238%2c6.13380829 C6.30945596%2c5.94313472 6.30945596%2c5.62810881 6.11878238%2c5.42914508 L5.5384715%2c4.8488342 C5.34779793%2c4.65816062 5.03277202%2c4.65816062 4.83380829%2c4.8488342 C4.64313472%2c5.03950777 4.64313472%2c5.35453368 4.83380829%2c5.55349741 L5.42240933%2c6.13380829 L5.42240933%2c6.13380829 Z M5.42240933%2c9.82292746 L4.84209845%2c10.4032383 C4.65142487%2c10.5939119 4.65142487%2c10.9089378 4.84209845%2c11.1079016 C4.94158031%2c11.2073834 5.06593264%2c11.2571244 5.19028497%2c11.2571244 C5.31463731%2c11.2571244 5.44727979%2c11.2073834 5.5384715%2c11.1079016 L6.11878238%2c10.5275907 C6.30945596%2c10.3369171 6.30945596%2c10.0218912 6.11878238%2c9.82292746 C5.92810881%2c9.63225389 5.6130829%2c9.63225389 5.42240933%2c9.82292746 L5.42240933%2c9.82292746 Z M10.5208549%2c9.82292746 C10.3301813%2c9.63225389 10.0151554%2c9.63225389 9.81619171%2c9.82292746 C9.62551813%2c10.013601 9.62551813%2c10.3286269 9.81619171%2c10.5275907 L10.3965026%2c11.1079016 C10.4959845%2c11.2073834 10.6203368%2c11.2571244 10.7446891%2c11.2571244 C10.8690415%2c11.2571244 11.0016839%2c11.2073834 11.0928756%2c11.1079016 C11.2835492%2c10.917228 11.2835492%2c10.6022021 11.0928756%2c10.4032383 L10.5208549%2c9.82292746 L10.5208549%2c9.82292746 Z' fill='%23666666'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e6%94%be%e5%a4%a7%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-350.000000%2c -125.000000)'%3e %3cg id='%e6%94%be%e5%a4%a7' transform='translate(350.000000%2c 125.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cpath d='M15.6609771%2c14.3520065 L13.3912778%2c12.0823072 C14.3805588%2c10.8144379 14.9758006%2c9.22447711 14.9758007%2c7.49438563 C14.9758007%2c3.36659478 11.617683%2c0.00889542279 7.48989215%2c0.00889542279 C3.3625196%2c0.00889542279 0.00482025735%2c3.36659476 0.00482025735%2c7.49438563 C0.00482025735%2c11.6221765 3.36251961%2c14.9802941 7.48989215%2c14.9802941 C9.15116518%2c14.9805622 10.764591%2c14.4240002 12.0723758%2c13.399536 L14.3420752%2c15.6700719 C14.706368%2c16.0359836 15.2981418%2c16.0378552 15.6647418%2c15.6742549 C16.0284092%2c15.3079133 16.0267247%2c14.7162714 15.6609771%2c14.3520065 L15.6609771%2c14.3520065 Z M1.42997059%2c7.49480392 C1.42997059%2c4.15341829 4.14850654%2c1.43530066 7.48989215%2c1.43530066 C10.8312778%2c1.43530066 13.5498137%2c4.15383662 13.5498137%2c7.49480392 C13.5498137%2c10.8357712 10.8312778%2c13.5547255 7.48989215%2c13.5547255 C4.14850653%2c13.5547255 1.42997059%2c10.8357713 1.42997059%2c7.49480392 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3cpath d='M10.0122451%2c6.78201961 L8.20309478%2c6.78201961 L8.20309478%2c4.97203268 C8.20309478%2c4.59347059 7.88351309%2c4.28685621 7.48989215%2c4.28685621 C7.09627123%2c4.28685621 6.77710783%2c4.5930523 6.77710785%2c4.97203268 L6.77710785%2c6.78201961 L4.96753921%2c6.78201961 C4.58897711%2c6.78201961 4.28194445%2c7.10118301 4.28194445%2c7.49522222 C4.28194445%2c7.88884314 4.58814053%2c8.20842483 4.96753921%2c8.20842483 L6.77710785%2c8.20842483 L6.77710785%2c10.0179935 C6.77710785%2c10.3961372 7.09627125%2c10.7035882 7.48989215%2c10.7035882 C7.88351305%2c10.7035882 8.20309476%2c10.3965556 8.20309478%2c10.0179935 L8.20309478%2c8.20842483 L10.0122451%2c8.20842483 C10.3908072%2c8.20842483 10.6982582%2c7.88926143 10.6982582%2c7.49522222 C10.6982582%2c7.10118301 10.3908072%2c6.78201961 10.0122451%2c6.78201961 Z' id='%e8%b7%af%e5%be%84'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3cg transform='translate(-1838 -1616)'%3e%3crect width='16' height='16' transform='translate(1838 1616)' fill='none'/%3e%3cpath d='M1%2c1V11H11V1H1M1%2c0H11a1%2c1%2c0%2c0%2c1%2c1%2c1V11a1%2c1%2c0%2c0%2c1-1%2c1H1a1%2c1%2c0%2c0%2c1-1-1V1A1%2c1%2c0%2c0%2c1%2c1%2c0Z' transform='translate(1840 1618)' fill='%23707070'/%3e%3cpath d='M9030-7951h-1v-3h3v1h-2Z' transform='translate(-7187 9574)' fill='%23999'/%3e%3cpath d='M9030-7951h-1v-3h3v1h-2Z' transform='translate(10878.999 -6326) rotate(180)' fill='%23999'/%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(35),r=n(214),l=n(55),c=n(42),s=n(26),u=n(69),d=n(30);function h(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var g=h(o),f=a.connect((function(e){var t,n,i=l.getCurrentStepInfo(null==(t=e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList);return{toolInstance:e.annotation.toolInstance,stepInfo:i}}),null,null,{context:d.LabelBeeContext})((function(e){var t,n=o.useState(0),a=i(n,2),l=(a[0],a[1]),d=o.useRef(null),h=e.toolInstance,f=s.useTranslation().t;if(o.useEffect((function(){return h&&h.singleOn("changeAttributeSidebar",(function(e){var t;l((function(e){return e+1})),d.current&&(null==(t=d.current.children[e])||t.scrollIntoView({block:"center"}))})),function(){null==h||h.unbindAll("changeAttributeSidebar")}}),[h,d]),!e.stepInfo)return null;var v=c.jsonParser(e.stepInfo.config),p=e.stepInfo.tool===u.EToolName.ScribbleTool;if(!0!==v.attributeConfigurable&&!p)return null;if((!0===v.attributeConfigurable||p)&&(null==v?void 0:v.attributeList)){var b=v.attributeList.map((function(e){return{label:e.key,value:e.value,color:null==e?void 0:e.color}}));p||b.unshift({label:f("NoAttribute"),value:""});return g.default.createElement("div",null,g.default.createElement(r.default,{list:b,attributeChanged:function(e){h.setDefaultAttribute(e),l((function(e){return e+1}))},selectedAttribute:null!=(t=null==h?void 0:h.defaultAttribute)?t:"",ref:d,forbidDefault:p}))}return null}));e.exports=f},function(e,t,n){"use strict";var i=n(34).default;function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(0)),r=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,u=function(e,t,n){return t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},d=function(e,t){for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(l){var o,a=i(l(t));try{for(a.s();!(o=a.n()).done;){n=o.value;s.call(t,n)&&u(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e};t.ColorTag=function(e){var t=e.color,n=e.style,i=e.onClick;return a.default.createElement("div",{style:d({display:"inline-block",height:14,width:14,backgroundColor:t,verticalAlign:"middle"},n),onClick:i})}},function(e,t,n){"use strict";var i=n(0),o=n(451),a=n(452);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(i);e.exports=function(e){var t=e.setColor,n=e.defaultColor;return l.default.createElement(o.RgbaColorPicker,{color:a.toRGBAObj(n),onChange:function(e){var n=a.toRGBAStr(e);t(n)}})}},,function(e,t,n){"use strict";var i=n(28).default;Object.defineProperty(t,"__esModule",{value:!0});t.toRGBAObj=function(e){if(e){var t=e.replace(/[rgba()]/g,"").split(",");if(t){var n=i(t,4),o=n[0],a=n[1],r=n[2],l=n[3];return{r:Number(o),g:Number(a),b:Number(r),a:Number(l)}}}},t.toRGBAStr=function(e){return"rgba(".concat(e.r,",").concat(e.g,",").concat(e.b,",").concat(e.a,")")}},function(e,t,n){"use strict";var i=n(0),o=n(25),a=n(454),r=n(26);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=l(i);e.exports=function(e){var t,n,i,l,s=e.limit,u=e.updateSize,d=r.useTranslation().t,h={and:d("And"),or:d("Or")},g=null==(t=null==s?void 0:s.sizeLimit)?void 0:t.defaultSize,f=null==(n=null==s?void 0:s.sizeLimit)?void 0:n.sizeRange,v=(null==(i=null==s?void 0:s.sizeLimit)?void 0:i.logicalCondition)||[],p=null==s?void 0:s.positionLimit,b=g||{},m=b.heightDefault,y=b.depthDefault,C=b.widthDefault,I=f||{},x=I.heightMax,w=I.heightMin,k=I.depthMax,S=I.depthMin,P=I.widthMax,L=I.widthMin,A=p||{},O=A.XMin,T=A.XMax,E=A.YMin,D=A.YMax,M=A.ZMin,N=A.ZMax,R=v.length>0||f,B=function(e){switch(e){case"width":return d("Length");case"height":return d("Width");case"depth":return d("Height")}return""};return c.default.createElement(o.Tooltip,{color:"rgba(0, 0, 0, 0.75)",title:c.default.createElement("div",{style:{padding:"8px"}},g&&c.default.createElement("div",{style:{marginBottom:"24px"}},c.default.createElement("div",null,"\u3010",d("DefaultSize"),"\u3011"),c.default.createElement("span",null,"".concat(d("Length"),": ").concat(C,"m\u3001")),c.default.createElement("span",null,"".concat(d("Width"),": ").concat(m,"m\u3001")),c.default.createElement("span",null,"".concat(d("Height"),": ").concat(y,"m"))),R&&c.default.createElement("div",{style:{marginBottom:"24px"}},c.default.createElement("div",null,"*",d("NormalSizeRange")),f&&c.default.createElement("span",null,"(",c.default.createElement("span",null,"".concat(d("Length"),": ").concat(L,"~").concat(P,"m\u3001")),c.default.createElement("span",null,"".concat(d("Width"),": ").concat(w,"~").concat(x,"m\u3001")),c.default.createElement("span",null,"".concat(d("Height"),": ").concat(S,"~").concat(k,"m")),")"),v.length>0&&c.default.createElement(c.default.Fragment,null,f?" ".concat(h[null==(l=v[0])?void 0:l.logical]," "):null,c.default.createElement("span",null,"(",v.map((function(e,t){var n=B(null==e?void 0:e.dimensionLeft),i=B(null==e?void 0:e.dimensionRight);return c.default.createElement("span",{key:t},0!==t?" ".concat(h[null==e?void 0:e.logical]," "):null,"".concat(n," ").concat(null==e?void 0:e.condition," ").concat(i," "))})),")"))),p&&c.default.createElement("div",null,c.default.createElement("div",null,"*",d("NormalCenterPointRange")),c.default.createElement("span",null,"X: ".concat(O,"~").concat(T,"\u3001")),c.default.createElement("span",null,"Y: ".concat(E,"~").concat(D,"\u3001")),c.default.createElement("span",null,"Z: ".concat(M,"~").concat(N)))),placement:"bottomRight"},c.default.createElement("img",{src:a,style:{margin:"0px 8px"},onClick:function(e){e.preventDefault(),g&&(null==u||u(g))}}))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cmask id='mask0_98686_26848' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='0' y='0' width='16' height='16'%3e %3cpath d='M0 16H16V0H0V16Z' fill='black'/%3e %3c/mask%3e %3cg mask='url(%23mask0_98686_26848)'%3e %3c/g%3e %3cmask id='mask1_98686_26848' style='mask-type:luminance' maskUnits='userSpaceOnUse' x='8' y='3' width='8' height='10'%3e %3cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.2139 6.64981H14.4827V5.50925C14.4827 4.12824 13.3678 3 12.003 3C10.6382 3 9.5232 4.12824 9.5232 5.50925V6.64981H8.78597C8.34729 6.64981 8 7.00739 8 7.44512V12.2047C8 12.6486 8.35338 13 8.78597 13H15.2139C15.6526 13 15.9999 12.6424 15.9999 12.2047V7.45129C16.0059 7.01356 15.6465 6.64981 15.2139 6.64981ZM12.0096 3.90915C12.9925 3.90915 13.4251 4.52059 13.4251 5.6041V6.63636H10.5777V5.6041C10.5777 4.52059 11.0267 3.90246 12.0096 3.90915ZM12.5796 9.64888V10.8309C12.5796 10.9294 12.5288 11.0094 12.4357 11.0772C12.3426 11.1449 12.2241 11.1818 12.0972 11.1818C11.8348 11.1818 11.6147 11.0217 11.6147 10.8309V9.64888C11.3693 9.53191 11.2 9.32875 11.2 9.10096C11.2 8.74389 11.5978 8.45454 12.0887 8.45454C12.5796 8.45454 12.9774 8.74389 12.9774 9.10096C12.9859 9.32875 12.8251 9.53191 12.5796 9.64888Z' fill='white'/%3e %3c/mask%3e %3cg mask='url(%23mask1_98686_26848)'%3e %3cpath d='M8 3H16V13H8V3Z' fill='%23666666'/%3e %3c/g%3e %3cpath fill-rule='evenodd' clip-rule='evenodd' d='M1 1H3.5V1.625L8.5 1.625V1H11V1.91949C10.1468 2.21687 9.45952 2.88195 9.125 3.72563V3.5H8.5V2.875L3.5 2.875V3.5H2.875V10H3.5V10.625H7V11.875H3.5V12.5H1V10H1.625V3.5H1V1ZM11 9.3677V9.38464C11 9.38185 10.9999 9.37906 10.9999 9.37626C10.9999 9.3734 11 9.37055 11 9.3677ZM10.2222 5.77769L10.3701 6.2954H10.2222V5.77769Z' fill='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(25);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var a=o(n(0));e.exports=function(e){var t=a.default.useRef(null),n=e.list||[];return a.default.createElement("div",{className:"sensebee-checkbox-group"},a.default.createElement(i.Checkbox.Group,{name:"checkboxgroup",value:e.selectedAttribute,onChange:function(){return e.attributeChanged()}},n.map((function(n,o){var r;return a.default.createElement(i.Checkbox,{value:n.value,ref:t,onFocus:function(){var e;null==(e=null==t?void 0:t.current)||e.blur()},key:o},a.default.createElement("span",{className:"sensebee-checkbox-label",title:n.label},n.label),a.default.createElement("span",{className:"sensebee-checkbox-num"},null!=(r=null==e?void 0:e.num)?r:o))}))))}},function(e,t,n){"use strict";var i=n(28).default,o=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(35),l=n(44),c=n(42),s=n(25),u=n(32),d=n(49),h=n(250),g=n(26),f=n(30);function v(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var p=v(a),b=Object.defineProperty,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,I=function(e,t,n){return t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x=u.cKeyCode.default,w=function(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},k=function(e){var t=e.textareaProps,n=e.footer;return p.default.createElement(p.default.Fragment,null,p.default.createElement(s.Input.TextArea,function(e,t){for(var n in t||(t={}))y.call(t,n)&&I(e,n,t[n]);if(m){var i,a=o(m(t));try{for(a.s();!(i=a.n()).done;)n=i.value,C.call(t,n)&&I(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({bordered:!1,rows:6,onKeyDown:w,onKeyUp:w},t)),p.default.createElement("div",{className:c.classnames({textAreaLength:!0})},n))},S=function(e){var t,n=a.useRef(null),o=a.useState(!1),r=i(o,2),l=r[0],s=r[1],u=a.useState(!1),d=i(u,2),h=d[0],f=d[1],v=g.useTranslation().t,b=e.disabled,m=e.config,y=e.result,C=e.updateText,I=e.index,w=e.switchToNextTextarea,S=e.hasMultiple,P=e.onNext,L=m.maxLength,A=y?y[m.key]:"",O=null!=(t=null==A?void 0:A.length)?t:0,T=function(e){C&&(C(e,m.key),m.required&&f(!e))},E=S&&w,D={id:"textInput-".concat(I),ref:n,disabled:b,value:A,maxLength:L,autoSize:{minRows:2,maxRows:6},onChange:function(e){var t=e.target.value;T(t)},onFocus:function(){s(!0)},onBlur:function(e){s(!1),m.required&&f(!e.target.value)},style:{resize:"none",wordBreak:"break-all"},onKeyDownCapture:function(e){e.ctrlKey&&e.keyCode===x.Enter&&(P&&P(),e.preventDefault()),e.keyCode===x.Tab&&E&&(e.preventDefault(),e.nativeEvent.stopImmediatePropagation(),w(I)),e.nativeEvent.stopPropagation()}},M=p.default.createElement("div",{className:"textAreaFooter"},p.default.createElement("div",{className:"hotkeyTip"},E&&p.default.createElement("span",null,"[".concat(v("Switch"),"]Tab")),p.default.createElement("span",null,"[".concat(v("TurnPage"),"]Ctrl+Enter"))),p.default.createElement("div",{className:"wordCount"},p.default.createElement("span",{className:O>=L?"warning":""},O),"/",p.default.createElement("span",null,L)));return a.useEffect((function(){b&&s(!1)}),[b]),p.default.createElement("div",{className:"textField"},p.default.createElement("div",{className:"label"},p.default.createElement("span",{className:c.classnames({required:m.required})},m.label),p.default.createElement("i",{className:c.classnames({clearText:!0,disabled:b}),onClick:function(){b||T("")}})),p.default.createElement("div",{className:c.classnames({disabled:b,"textarea-outline":!0,"ant-input-focused":l,textareaContainer:!0,focus:l,invalid:h})},p.default.createElement(k,{footer:M,textareaProps:D})))};var P=r.connect((function(e){return{toolInstance:e.annotation.toolInstance,imgIndex:e.annotation.imgIndex,step:e.annotation.step,basicResultList:e.annotation.basicResultList,stepList:e.annotation.stepList,triggerEventAfterIndexChanged:e.annotation.triggerEventAfterIndexChanged}}),null,null,{context:f.LabelBeeContext})((function(e){var t,n,o=e.toolInstance,r=e.imgIndex,c=e.dispatch,s=e.triggerEventAfterIndexChanged,u=e.step,g=e.stepList,f=e.basicResultList,v=a.useState([]),b=i(v,2),m=b[0],y=b[1],C=a.useState(0),I=i(C,2),x=I[0],w=I[1],k=a.useState(0),P=i(k,2)[1],L=function(e){var t=(e+1)%m.length;A(t)},A=function(e){setTimeout((function(){var t=document.getElementById("textInput-".concat(e));t&&(w(e),t.focus(),t.select(),t.scrollIntoView({behavior:"smooth",block:"center"}))}))};a.useEffect((function(){o&&(y(l.cloneDeep(o.config.configList)),o.singleOn("valueUpdated",(function(){P((function(e){return e+1}))})))}),[o]);var O=function(e,t){o.updateTextValue(t,e)};a.useEffect((function(){r>-1&&s&&A(0)}),[r]);var T=null!=(n=null==(t=o.textList[0])?void 0:t.value)?n:{},E=function(){c(d.PageForward(!0))},D=h.ConfigUtils.getStepConfig(g,u).dataSourceStep>0&&0===f.length;return p.default.createElement("div",{className:"textToolOperationMenu"},m.map((function(e,t){return p.default.createElement(S,{config:e,key:e.key,index:t,result:T,updateText:O,switchToNextTextarea:L,hasMultiple:m.length>1,focus:x===t,onNext:E,disabled:D})})))}));t.SingleTextInput=S,t.TextareaWithFooter=k,t.default=P},function(e,t,n){"use strict";var i=n(51).default,o=n(28).default,a=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),l=n(45),c=n(257),s=n(32),u=n(36),d=n(25),h=n(55),g=n(35),f=n(42),v=n(146),p=n(63),b=n(26),m=n(30),y=n(466),C=n(17),I=n(214),x=n(216),w=n(258),k=n(467),S=n(259),P=n(468),L=n(144),A=n(49),O=n(96);function T(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var E=T(r),D=Object.defineProperty,M=Object.defineProperties,N=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,_=function(e,t,n){return t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},H=function(e,t){for(var n in t||(t={}))B.call(t,n)&&_(e,n,t[n]);if(R){var i,o=a(R(t));try{for(o.s();!(i=o.n()).done;){n=i.value;j.call(t,n)&&_(e,n,t[n])}}catch(r){o.e(r)}finally{o.f()}}return e},V=function(e,t){return M(e,N(t))},F=function(e){var t=e.imgList,n=e.imgIndex,i=r.useContext(u.PointCloudContext),a=r.useState([]),l=o(a,2),c=l[0],s=l[1],h=b.useTranslation().t;r.useEffect((function(){var e=t,i=new Map;s(C.PointCloudUtils.getAllPointCloudResult({imgList:e,extraBoxList:g,ignoreIndexList:[n]}).filter((function(e){return!!e.trackID&&(!i.get(e.trackID)&&(i.set(e.trackID,!0),!0))})).sort((function(e,t){var n,i;return(null!=(n=null==e?void 0:e.trackID)?n:0)-(null!=(i=null==t?void 0:t.trackID)?i:0)})).map((function(e){var t;return null!=(t=null==e?void 0:e.trackID)?t:0})))}),[i.pointCloudBoxList,t]);var g=i.pointCloudBoxList;return E.default.createElement("div",{style:{padding:24,borderBottom:"1px solid #eee"}},E.default.createElement("div",{style:{marginBottom:16}},h("AllTrackIDs")),E.default.createElement("div",null,c.map((function(e){return E.default.createElement(d.Tag,{color:"#F3F4FF",key:e,style:{color:"#666",marginBottom:8}},e)}))))},Z=function(){var e=r.useState(!1),t=o(e,2),n=t[0],i=t[1],a=r.useContext(u.PointCloudContext),c=a.pointCloudBoxList,s=p.useSingleBox(),h=s.selectedBox,g=s.updateSelectedBox,f=r.useState(""),v=o(f,2),m=v[0],C=v[1],I=b.useTranslation().t,x=null==h?void 0:h.info.trackID,w=function(e){return!!c.find((function(t){return t.trackID===e&&t.id!==(null==h?void 0:h.info.id)}))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=parseInt(m,10);e&&i(!1),isNaN(t)?d.message.error(I("PositiveIntegerCheck")):m.indexOf(".")>-1?d.message.error(I("NotAllowDecimalPointsInTrackID")):w(t)?d.message.error(I("DuplicateTrackIDsExist")):t>0?S(t):d.message.error(I("PositiveIntegerCheck"))};r.useEffect((function(){i(!1)}),[x]);var S=function(e){var t,n=g({trackID:e});null==(t=null==a?void 0:a.topViewInstance)||t.updatePolygonList(null!=n?n:[])};return E.default.createElement("div",{style:{padding:24}},E.default.createElement("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"}},E.default.createElement("span",null,I("CurrentBoxTrackIDs")),x&&E.default.createElement(y,{id:x,updateCurrentPolygonList:function(e){return S(e)}})),E.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n&&x?E.default.createElement(d.Input,{defaultValue:x,onChange:function(e){C(e.target.value)},disabled:!x,size:"small",onBlur:function(){k()},onPressEnter:function(){k(!0)}}):E.default.createElement("span",null,x),E.default.createElement(l.EditFilled,{style:{color:"#999",marginLeft:16,cursor:"undefined"!==typeof x?"pointer":"not-allowed"},onClick:function(){x&&i(!n)}})))},z=function(e){var t=e.attributeList,n=e.subAttributeList,i=e.toolInstance,o=e.config,a=e.stepList,l=e.stepInfo,c=e.enableColorPicker,s=p.useSingleBox().selectedBox,h=r.useContext(u.PointCloudContext),g=b.useTranslation().t,f=x.useAttribute().defaultAttribute,v=O.usePointCloudViews(),y=m.useDispatch(),C={margin:"12px 20px 8px",fontSize:14,fontWeight:500,wordWrap:"break-word"},w=function(e,t){i.setSubAttribute(e,t)},k=t.map((function(e){return{label:e.key,value:e.value,color:null==e?void 0:e.color,limit:null==e?void 0:e.limit,isDefault:null==e?void 0:e.isDefault}}));return E.default.createElement("div",null,E.default.createElement("div",{style:{fontWeight:500,fontSize:14,margin:"12px 0 8px 20px"}},g("Attribute")),E.default.createElement(I.default,{list:k,forbidDefault:!0,selectedAttribute:null!=f?f:"",attributeChanged:function(e){return function(e){i.setDefaultAttribute(e)}(e)},updateColorConfig:function(e,t){var n,i,r,c,s,u=null==(n=null==o?void 0:o.attributeList)?void 0:n.map((function(n){return n.value===e?V(H({},n),{color:t}):n})),d=V(H({},o),{attributeList:u}),g=JSON.stringify(d),f=null==a?void 0:a.map((function(e){return(null==e?void 0:e.step)===(null==l?void 0:l.step)?V(H({},e),{config:g}):e}));null==(i=null==h?void 0:h.topViewInstance)||i.updateAttributeList(u),null==(r=null==h?void 0:h.sideViewInstance)||r.updateAttributeList(u),null==(c=null==h?void 0:h.backViewInstance)||c.updateAttributeList(u),null==(s=null==h?void 0:h.mainViewInstance)||s.setConfig(d),y(A.SetTaskStepList({stepList:f}))},enableColorPicker:c,updateSize:function(e){v.updateViewsByDefaultSize&&v.updateViewsByDefaultSize(e)}}),E.default.createElement(d.Divider,{style:{margin:0}}),s&&E.default.createElement(E.default.Fragment,null,n.map((function(e){var t,n,i,o,a;return(null==e?void 0:e.subSelected)&&E.default.createElement("div",{style:{marginTop:12},key:e.value},E.default.createElement("div",{style:C},g("SubAttribute"),"-",e.key),(null==(t=e.subSelected)?void 0:t.length)<5?E.default.createElement(I.default,{list:e.subSelected.map((function(e){return{label:e.key,value:e.value}})),selectedAttribute:null==(i=null==(n=h.selectedPointCloudBox)?void 0:n.subAttribute)?void 0:i[e.value],num:"-",forbidColor:!0,forbidDefault:!0,attributeChanged:function(t){return w(e.value,t)},style:{marginBottom:12}}):E.default.createElement(d.Select,{style:{margin:"0px 21px 17px 16px",width:"87%"},value:null==(a=null==(o=h.selectedPointCloudBox)?void 0:o.subAttribute)?void 0:a[e.value],placeholder:g("PleaseSelect"),onChange:function(t){return w(e.value,t)},allowClear:!0},e.subSelected.map((function(e){return E.default.createElement(d.Select.Option,{key:e.value,value:e.value},e.key)}))),E.default.createElement(d.Divider,{style:{margin:0}}))}))))},U=[{toolName:"LassoSelector",commonSvg:w,selectedSvg:k},{toolName:"CircleSelector",commonSvg:S,selectedSvg:P}],G=function(e){e.toolInstance;var t=r.useContext(u.PointCloudContext).ptSegmentInstance,n=r.useState("LassoSelector"),a=o(n,2),l=a[0],c=a[1],s=b.useTranslation().t;return r.useEffect((function(){if(t){var e=function(){c("LassoSelector")},n=function(){c("CircleSelector")};return t.on("LassoSelector",e),t.on("CircleSelector",n),function(){t.unbind("LassoSelector",e),t.unbind("CircleSelector",n)}}}),[t]),E.default.createElement("div",{className:"".concat(L.sidebarCls,"__level")},U.map((function(e){var n=l===e.toolName;return E.default.createElement("span",{className:"".concat(L.sidebarCls,"__toolOption"),key:e.toolName,onClick:function(){return null==t?void 0:t.emit(e.toolName)}},E.default.createElement("img",{className:"".concat(L.sidebarCls,"__singleTool"),src:n?null==e?void 0:e.selectedSvg:null==e?void 0:e.commonSvg}),E.default.createElement("span",{className:f.classnames(i({},"".concat(L.sidebarCls,"__toolOption__selected"),n))},s(e.toolName)))})))},W=g.connect((function(e){var t,n,i,o,a=h.getCurrentStepInfo(null==(t=e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList),r=null==(i=e.annotation)?void 0:i.toolInstance,l=null==(o=e.annotation)?void 0:o.stepList;return{stepInfo:a,toolInstance:r,imgList:e.annotation.imgList,imgIndex:e.annotation.imgIndex,stepList:l}}),null,null,{context:m.LabelBeeContext})((function(e){var t,n,i=e.stepInfo,o=e.toolInstance,a=e.imgList,r=e.imgIndex,l=e.stepList,u=e.enableColorPicker,h=v.useStatus(),g=h.updatePointCloudPattern,p=h.pointCloudPattern,b=h.isPointCloudSegmentationPattern,m=f.jsonParser(i.config),y=null!=(t=null==m?void 0:m.attributeList)?t:[],C=!0===(null==m?void 0:m.secondaryAttributeConfigurable)&&null!=(n=null==m?void 0:m.inputList)?n:[];return b?E.default.createElement(E.default.Fragment,null,E.default.createElement(G,{toolInstance:o}),E.default.createElement(z,{toolInstance:o,attributeList:y,subAttributeList:C,config:m,stepList:l,stepInfo:i,enableColorPicker:u})):E.default.createElement(E.default.Fragment,null,E.default.createElement(c.ToolIcons,{toolName:s.cTool.EPointCloudName.PointCloud,selectedToolName:p,onChange:function(e){return null==g?void 0:g(e)}}),E.default.createElement(z,{toolInstance:o,attributeList:y,subAttributeList:C,config:m,stepList:l,stepInfo:i,enableColorPicker:u}),!0===(null==m?void 0:m.trackConfigurable)&&E.default.createElement(E.default.Fragment,null,E.default.createElement(Z,null),E.default.createElement(d.Divider,{style:{margin:0}}),E.default.createElement(F,{imgList:a,imgIndex:r})))}));t.PointCloudSegToolIcon=G,t.default=W},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_line' xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='20' height='20'/%3e %3cpath id='%e5%bd%a2%e7%8a%b6%e7%bb%93%e5%90%88' class='cls-2' d='M3.889%2c15.556V13.042l9.153-9.153h2.514V0H11.667V2.514L2.514%2c11.667H0v3.889Z' transform='translate(2.222 2.222)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M50.0005 17.7692L17.7697 50H20.0005H22.0005L22.0005 52V54.2545L54.255 22H52.0005H50.0005V20V17.7692ZM56.255 20L56.6707 19.5843L52.428 15.3417L52.0005 15.7692V20L56.255 20ZM20.0005 56.2545L20.0005 52H15.7697L15.4648 52.3048L19.7075 56.5475L20.0005 56.2545Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.125 1H8.875V5.5H11.125V1Z' fill='%23999999'/%3e%3cpath d='M11.125 14.5H8.875V19H11.125V14.5Z' fill='%23999999'/%3e%3cpath d='M14.5 8.96582V11.2158H19V8.96582H14.5Z' fill='%23999999'/%3e%3cpath d='M1 8.96582L1 11.2158H5.5V8.96582H1Z' fill='%23999999'/%3e%3cpath d='M10 13C11.6569 13 13 11.6569 13 10C13 8.34315 11.6569 7 10 7C8.34315 7 7 8.34315 7 10C7 11.6569 8.34315 13 10 13Z' fill='%23999999'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M39 8H33V62H39V8Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 33H8V39H64V33Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3crect x='28' y='28' width='16' height='16' rx='8' fill='%23666FFF' stroke='white' stroke-width='2'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M55 22H61V50H55V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 55L50 61L22 61L22 55L50 55Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath d='M64 52H52V64H64V52Z' fill='%23666FFF'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M50.0005 17.7692L17.7697 50H20.0005H22.0005L22.0005 52V54.2545L54.255 22H52.0005H50.0005V20V17.7692ZM56.255 20L56.6707 19.5843L52.428 15.3417L52.0005 15.7692V20L56.255 20ZM20.0005 56.2545L20.0005 52H15.7697L15.4648 52.3048L19.7075 56.5475L20.0005 56.2545Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M17 17H15V15H17V17ZM17 13H15V11H17V13ZM17 9H15V7H17V9ZM17 5H15V3H17V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15.4286V15H17V17ZM13.8571 17H12.2857V15H13.8571V17ZM10.7143 17H9.14286V15H10.7143V17ZM7.57143 17H6V15H7.57143V17Z' fill='%23999999'/%3e%3cpath d='M18 2H14V6H18V2Z' fill='%23999999'/%3e%3cpath d='M6 14H2V18H6V14Z' fill='%23999999'/%3e%3cpath d='M18 14H14V18H18V14Z' fill='%23999999'/%3e%3cpath d='M15.2236 3L16.6378 4.41421L4.4144 16.6377L3.00019 15.2234L15.2236 3Z' fill='%23999999'/%3e%3cpath d='M15 15L15 17L5 17L5 15L15 15Z' fill='%23999999'/%3e%3cpath d='M15 6H17V15H15V6Z' fill='%23999999'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M17 5H15.4286V3H17V5ZM13.8571 5H12.2857V3H13.8571V5ZM10.7143 5H9.14286V3H10.7143V5ZM7.57143 5H6V3H7.57143V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15V15H17V17ZM17 13H15V11H17V13ZM17 9H15V7H17V9ZM17 5H15V3H17V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15.4286V15H17V17ZM13.8571 17H12.2857V15H13.8571V17ZM10.7143 17H9.14286V15H10.7143V17ZM7.57143 17H6V15H7.57143V17Z' fill='%23999999'/%3e%3cpath d='M6 2H2V6H6V2Z' fill='%23999999'/%3e%3cpath d='M18 2H14V6H18V2Z' fill='%23999999'/%3e%3cpath d='M6 14H2V18H6V14Z' fill='%23999999'/%3e%3cpath d='M18 14H14V18H18V14Z' fill='%23999999'/%3e%3cpath d='M5 6H3V15H5V6Z' fill='white'/%3e%3cpath d='M3 6H5V15H3V6Z' fill='%23999999'/%3e%3cpath d='M15 3L15 5L5 5L5 3L15 3Z' fill='%23999999'/%3e%3cpath d='M15 15L15 17L5 17L5 15L15 15Z' fill='%23999999'/%3e%3cpath d='M15 6H17V15H15V6Z' fill='%23999999'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M20 8H8V20H20V8Z' fill='%23666FFF'/%3e%3cpath d='M11 22H17V50H11V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M55 22H61V50H55V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 55L50 61L22 61L22 55L50 55Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 11L50 17L22 17L22 11L50 11Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath d='M64 52H52V64H64V52Z' fill='%23666FFF'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(28).default,o=n(34).default,a=n(49),r=n(82),l=n(30),c=n(25),s=n(0),u=n(26),d=n(35),h=n(17);function g(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var f=g(s),v=Object.defineProperty,p=Object.defineProperties,b=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,I=function(e,t,n){return t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x={labelCol:{span:8},wrapperCol:{span:16}},w={width:"80px"},k=d.connect((function(e){return{toolInstance:e.annotation.toolInstance,imgList:e.annotation.imgList,imgIndex:e.annotation.imgIndex,stepList:e.annotation.stepList}}),null,null,{context:l.LabelBeeContext})((function(e){var t,n=e.id,d=e.stepList,g=e.imgList,v=e.imgIndex,k=e.toolInstance,S=e.updateCurrentPolygonList,P=l.useDispatch(),L=s.useState(!1),A=i(L,2),O=A[0],T=A[1],E=c.Form.useForm(),D=i(E,1)[0],M=u.useTranslation().t,N=[{required:!0,message:M("PositiveIntegerCheck")}];return f.default.createElement(f.default.Fragment,null,f.default.createElement("a",{style:{color:"#666FFF"},onClick:function(){return T(!0)}},M("BatchUpdateText")),f.default.createElement(c.Modal,{title:M("BatchUpdateTrackID"),visible:O,onCancel:function(){return T(!1)},onOk:function(){return D.submit()},wrapClassName:"labelbee-custom-modal"},f.default.createElement(c.Form,(t=function(e,t){for(var n in t||(t={}))y.call(t,n)&&I(e,n,t[n]);if(m){var i,a=o(m(t));try{for(a.s();!(i=a.n()).done;)n=i.value,C.call(t,n)&&I(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},x),p(t,b({form:D,onFinish:function(e){var t=r.composeResultByToolInstance({toolInstance:k,imgList:g,imgIndex:v,stepList:d});if(!(e.prevPage>e.nextPage))if(t.slice(e.prevPage-1,e.nextPage).some((function(t){var n=parseInt(e.newID,10);return h.PointCloudUtils.batchUpdateTrackIDCheck({newID:n,result:t.result})})))c.message.error(M("DuplicateTrackIDsExist"));else{P(a.BatchUpdateTrackID({id:n,newID:e.newID,rangeIndex:[e.prevPage-1,e.nextPage-1],imgList:t}));var i=parseInt(e.newID,10);T(!1),S(i)}}}))),f.default.createElement(c.Form.Item,{name:"id",label:M("CurrentBoxTrackIDs")},n),f.default.createElement(c.Form.Item,{name:"newID",label:M("TrackIDUnifyAs"),rules:N},f.default.createElement(c.InputNumber,{precision:0,min:1,style:w})),f.default.createElement(c.Form.Item,{label:M("UnifyTrackIDRange"),required:!0},f.default.createElement(c.Form.Item,{style:{display:"inline-block"},rules:N,name:"prevPage",noStyle:!0},f.default.createElement(c.InputNumber,{precision:0,min:1,style:w})),f.default.createElement("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}},"-"),f.default.createElement(c.Form.Item,{style:{display:"inline-block"},rules:N,name:"nextPage",noStyle:!0},f.default.createElement(c.InputNumber,{precision:0,min:1,style:w})),f.default.createElement("span",{style:{display:"inline-block",width:"40x",marginLeft:"10px",textAlign:"center"}},M("Page"))))))}));e.exports=k},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='24.000000' height='24.000000' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cmask id='mask1_15945' mask-type='alpha' maskUnits='userSpaceOnUse' x='0.000000' y='0.000000' width='24.000000' height='24.000000'%3e %3crect id='Frame 1312316543 (Background/Mask)' width='24.000000' height='24.000000' fill='%23C4C4C4'/%3e %3c/mask%3e %3cg mask='url(%23mask1_15945)'%3e %3cpath id='Vector 197' d='M6.82031 21.1879C7.30859 20.8242 7.65674 20.4422 7.89697 20.0767C8.56055 19.0654 7.91553 17.8707 7.32861 16.813C6.78955 15.8416 6.34033 14.9126 5.68604 14.0402C3.5 11.1254 3.98877 7.18506 6.86133 4.94373C9.97998 2.51038 13.4199 2.427 15.9365 3.36963C16.5493 3.59912 17.186 3.94055 17.7881 4.3363C20.1196 5.86804 21.0063 8.93555 19.5503 11.3146C17.5649 14.5581 13.4385 15.5564 10.3657 15.641' stroke='%231664FF' stroke-width='1.995000' stroke-linejoin='round' stroke-linecap='round' stroke-dasharray='0 0'/%3e %3c/g%3e %3cg mask='url(%23mask1_15945)'%3e %3cpath id='Vector 198' d='M4.979 17.3167C3.92969 16.8472 3.81592 15.4429 4.79492 14.8404C5.9707 14.1169 7.58301 13.7576 9.354 14.7828C10.374 15.3734 10.4321 16.5123 9.39893 17.0798C8.32764 17.6683 6.73828 18.1039 4.979 17.3167Z' stroke='%231664FF' stroke-width='1.895129' stroke-linejoin='round' stroke-dasharray='0 0'/%3e %3c/g%3e %3cdefs/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='24.000000' height='24.000000' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cmask id='mask1_15950' mask-type='alpha' maskUnits='userSpaceOnUse' x='0.000000' y='0.000000' width='24.000000' height='24.000000'%3e %3crect id='Frame 1312316549 (Background/Mask)' width='24.000000' height='24.000000' fill='%231664FF'/%3e %3c/mask%3e %3cg mask='url(%23mask1_15950)'%3e %3ccircle id='Ellipse 1677' cx='12.000000' cy='12.000000' r='9.000000' stroke='%231664FF' stroke-width='2.000000' stroke-dasharray='0 0'/%3e %3c/g%3e %3cg mask='url(%23mask1_15950)'%3e %3ccircle id='Ellipse 1678' cx='12.000000' cy='12.000000' r='4.000000' fill='%231664FF'/%3e %3c/g%3e %3cdefs/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(51).default,o=n(25),a=n(0),r=n(470),l=n(471),c=n(472),s=n(473),u=n(35),d=n(252),h=n(65),g=n(30),f=n(26);function v(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var p=v(a),b=function(e,t){var n=[],i={};switch(e){case"width":n=[{step:1,value:"1"},{step:2,value:"2"},{step:3,value:"3"},{step:4,value:"4"},{step:5,value:"5"}];break;case"color":n=[{step:1,value:"Blue"},{step:3,value:"Cyan"},{step:5,value:"Green"},{step:7,value:"Yellow"},{step:9,value:"Pink"}];break;case"borderOpacity":n=[{step:1,value:"0.2"},{step:3,value:"0.4"},{step:5,value:"0.6"},{step:7,value:"0.8"},{step:9,value:"1.0"}];break;case"fillOpacity":n=[{step:1,value:"0"},{step:3,value:"0.2"},{step:5,value:"0.4"},{step:7,value:"0.6"},{step:9,value:"0.8"}]}return n.forEach((function(e){var n=e.step,o=e.value;i[n]={style:{color:"#999999",fontSize:"12px"},label:p.default.createElement("span",null,t(o))}})),i},m=function(e){switch(e){case"width":return r;case"color":return l;case"borderOpacity":return c;case"fillOpacity":return s}},y=function(e){switch(e){case"width":return 2;case"color":return 1;case"borderOpacity":case"fillOpacity":return 9}},C=function(e){return["width"].includes(e)},I=u.connect((function(e){return{toolStyle:e.toolStyle,config:e.annotation.toolInstance.config}}),null,null,{context:g.LabelBeeContext})((function(e){var t=e.toolStyle,n={width:t.width,color:t.color,borderOpacity:t.borderOpacity,fillOpacity:t.fillOpacity},a=f.useTranslation().t,r=e.config;return p.default.createElement("div",{className:"toolStyle"},Object.entries(n).map((function(e){var n,l=e[0];return!0===(null==r?void 0:r.attributeConfigurable)&&"color"===l?null:p.default.createElement("div",{id:"style-".concat(l),className:"styleSlider",key:l},p.default.createElement("span",{className:"title"},p.default.createElement("img",{src:m(l),className:"icon"}),a(function(e){switch(e){case"width":return"BorderThickness";case"color":return"Color";case"borderOpacity":return"BorderOpacity";case"fillOpacity":return"FillOpacity";default:return""}}(l))),p.default.createElement("span",{className:"slider"},p.default.createElement(o.Slider,{tipFormatter:null,max:C(l)?5:10,min:C(l)?1:0,step:C(l)?1:null,value:null!=(n=t[l])?n:y(l),marks:b(l,a),onChange:function(e){return t=i({},l,e),void h.store.dispatch(d.UpdateToolStyleConfig(t));var t}})))})))}));e.exports=I},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2%2c .cls-4 %7b fill: none%3b %7d .cls-1 %7b stroke: %23707070%3b %7d .cls-3%2c .cls-5 %7b stroke: none%3b %7d .cls-5 %7b fill: %23ccc%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_border' transform='translate(0 -1.609)'%3e %3cg id='%e7%9f%a9%e5%bd%a2_162' data-name='%e7%9f%a9%e5%bd%a2 162' class='cls-1' transform='translate(0 1.609)'%3e %3crect class='cls-3' width='10' height='10'/%3e %3crect class='cls-4' x='0.5' y='0.5' width='9' height='9'/%3e %3c/g%3e %3cg id='%e8%81%94%e5%90%88_2' data-name='%e8%81%94%e5%90%88 2' class='cls-2' transform='translate(10987 5359.61)'%3e %3cpath class='cls-3' d='M-10982.4-5349v-3.6h-3.6v-.8h3.6v-3.6h.8v3.6h3.6v.8h-3.6v3.6Z'/%3e %3cpath class='cls-5' d='M -10981.6005859375 -5349 L -10982.3994140625 -5349 L -10982.3994140625 -5352.6005859375 L -10986.0009765625 -5352.6005859375 L -10986.0009765625 -5353.400390625 L -10982.3994140625 -5353.400390625 L -10982.3994140625 -5357.0009765625 L -10981.6005859375 -5357.0009765625 L -10981.6005859375 -5353.400390625 L -10977.9990234375 -5353.400390625 L -10977.9990234375 -5352.6005859375 L -10981.6005859375 -5352.6005859375 L -10981.6005859375 -5349 Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='12' height='12' viewBox='0 0 12 12'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23fafafa%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-5 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-6 %7b fill: %23999%3b %7d .cls-7 %7b clip-path: url(%23clip-path-3)%3b %7d .cls-8 %7b clip-path: url(%23clip-path-4)%3b %7d .cls-9 %7b clip-path: url(%23clip-path-5)%3b %7d .cls-10 %7b clip-path: url(%23clip-path-6)%3b %7d .cls-11 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_422' data-name='%e8%b7%af%e5%be%84 422' class='cls-1' d='M0-4H12V-16H0Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_424' data-name='%e8%b7%af%e5%be%84 424' class='cls-1' d='M11.759-9.6a.729.729%2c0%2c0%2c0%2c.729.729.729.729%2c0%2c0%2c0%2c.729-.729.729.729%2c0%2c0%2c0-.729-.729A.729.729%2c0%2c0%2c0%2c11.759-9.6Z' transform='translate(-11.759 10.33)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-3'%3e %3cpath id='%e8%b7%af%e5%be%84_426' data-name='%e8%b7%af%e5%be%84 426' class='cls-1' d='M9.031-12.726a.742.742%2c0%2c0%2c0%2c.742.742.742.742%2c0%2c0%2c0%2c.742-.742.742.742%2c0%2c0%2c0-.742-.742.742.742%2c0%2c0%2c0-.742.742Z' transform='translate(-9.031 13.469)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-4'%3e %3cpath id='%e8%b7%af%e5%be%84_428' data-name='%e8%b7%af%e5%be%84 428' class='cls-1' d='M4.727-12.239a.747.747%2c0%2c0%2c0%2c.747.747.747.747%2c0%2c0%2c0%2c.747-.747.747.747%2c0%2c0%2c0-.747-.747A.747.747%2c0%2c0%2c0%2c4.727-12.239Z' transform='translate(-4.727 12.986)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-5'%3e %3cpath id='%e8%b7%af%e5%be%84_430' data-name='%e8%b7%af%e5%be%84 430' class='cls-1' d='M2.362-8.573a.73.73%2c0%2c0%2c0%2c.365.632.73.73%2c0%2c0%2c0%2c.73%2c0%2c.73.73%2c0%2c0%2c0%2c.365-.632.73.73%2c0%2c0%2c0-.365-.632.73.73%2c0%2c0%2c0-.73%2c0%2c.73.73%2c0%2c0%2c0-.365.632Z' transform='translate(-2.362 9.303)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-6'%3e %3cpath id='%e8%b7%af%e5%be%84_432' data-name='%e8%b7%af%e5%be%84 432' class='cls-2' d='M5.887-4.052H5.873A5.888%2c5.888%2c0%2c0%2c1%2c0-10.018a5.922%2c5.922%2c0%2c0%2c1%2c6-5.931%2c5.853%2c5.853%2c0%2c0%2c1%2c6%2c5.335A3.662%2c3.662%2c0%2c0%2c1%2c9.645-7.28a6.77%2c6.77%2c0%2c0%2c1-2.439.232l-.122%2c0a.538.538%2c0%2c0%2c0-.154.408.342.342%2c0%2c0%2c0%2c.009.1.431.431%2c0%2c0%2c0%2c.046.048%2c1.36%2c1.36%2c0%2c0%2c1%2c.387%2c1.083A1.29%2c1.29%2c0%2c0%2c1%2c7-4.47%2c1.682%2c1.682%2c0%2c0%2c1%2c5.887-4.052ZM6-14.939a4.945%2c4.945%2c0%2c0%2c0-4.989%2c4.922A4.916%2c4.916%2c0%2c0%2c0%2c5.883-5.061c.22%2c0%2c.477-.063.477-.355%2c0-.274-.039-.315-.109-.388a1.093%2c1.093%2c0%2c0%2c1-.333-.841A1.319%2c1.319%2c0%2c0%2c1%2c7.077-8.064l.168%2c0A6.391%2c6.391%2c0%2c0%2c0%2c9.28-8.223a2.677%2c2.677%2c0%2c0%2c0%2c1.707-2.391A4.83%2c4.83%2c0%2c0%2c0%2c6-14.939Z' transform='translate(0 15.948)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_borderColor' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_670' data-name='%e7%bb%84 670' class='cls-3' transform='translate(0 -16)'%3e %3cpath id='%e8%b7%af%e5%be%84_421' data-name='%e8%b7%af%e5%be%84 421' class='cls-4' d='M-5-21H14.5V-1.5H-5Z' transform='translate(1.25 17.25)'/%3e %3c/g%3e %3cg id='%e7%bb%84_671' data-name='%e7%bb%84 671' class='cls-5' transform='translate(8.121 -11.61)'%3e %3cpath id='%e8%b7%af%e5%be%84_423' data-name='%e8%b7%af%e5%be%84 423' class='cls-6' d='M6.759-15.33H14.9v8.145H6.759Z' transform='translate(-10.103 11.986)'/%3e %3c/g%3e %3cg id='%e7%bb%84_672' data-name='%e7%bb%84 672' class='cls-7' transform='translate(6.765 -13.853)'%3e %3cpath id='%e8%b7%af%e5%be%84_425' data-name='%e8%b7%af%e5%be%84 425' class='cls-6' d='M4.031-18.469h8.291v8.291H4.031Z' transform='translate(-7.434 15.066)'/%3e %3c/g%3e %3cg id='%e7%bb%84_673' data-name='%e7%bb%84 673' class='cls-8' transform='translate(3.702 -13.515)'%3e %3cpath id='%e8%b7%af%e5%be%84_427' data-name='%e8%b7%af%e5%be%84 427' class='cls-6' d='M-.273-17.986H8.073V-9.64H-.273Z' transform='translate(-3.152 14.56)'/%3e %3c/g%3e %3cg id='%e7%bb%84_674' data-name='%e7%bb%84 674' class='cls-9' transform='translate(2.723 -10.881)'%3e %3cpath id='%e8%b7%af%e5%be%84_429' data-name='%e8%b7%af%e5%be%84 429' class='cls-6' d='M-2.638-14.3H5.512v8.149H-2.638Z' transform='translate(-0.707 10.958)'/%3e %3c/g%3e %3cg id='%e7%bb%84_675' data-name='%e7%bb%84 675' class='cls-10' transform='translate(0 -15.948)'%3e %3cpath id='%e8%b7%af%e5%be%84_431' data-name='%e8%b7%af%e5%be%84 431' class='cls-11' d='M-5-20.948H14.5V-1.568H-5Z' transform='translate(1.25 17.207)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='10.001' height='10.001' viewBox='0 0 10.001 10.001'%3e%3cg transform='translate(1.001 1)'%3e%3cg transform='translate(0 -1)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(0 7.334)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(9 0.334) rotate(90)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(0.666 0.334) rotate(90)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(-1 -1)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(-1 7.333)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(7.333 -1)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(7.333 7.333)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='9.999' height='9.999' viewBox='0 0 9.999 9.999'%3e%3cg transform='translate(0 0)'%3e%3crect width='3.333' height='3.333' transform='translate(0 0)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(0 6.667)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(6.666 0)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(3.333 3.333)' fill='%23707070'/%3e%3crect width='3.333' height='3.333' transform='translate(6.666 6.667)' fill='%23ccc'/%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(25),r=n(475),l=n(476),c=n(477),s=n(478),u=n(43),d=n(69),h=n(30);function g(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var f=g(o);e.exports=function(e){var t=e.onChange,n=h.useSelector((function(e){return e.annotation.toolInstance})),g=o.useState(20),v=i(g,2),p=v[0],b=v[1],m=o.useState(d.EScribblePattern.Scribble),y=i(m,2),C=y[0],I=y[1],x=function(){t(C,p)};return f.default.createElement("div",{className:u.getClassName("scribble")},f.default.createElement("div",{className:u.getClassName("scribble","select")},f.default.createElement("img",{src:C===d.EScribblePattern.Scribble?r:l,onClick:function(){I(d.EScribblePattern.Scribble),null==n||n.setPattern(d.EScribblePattern.Scribble),x()}}),f.default.createElement("img",{src:C===d.EScribblePattern.Erase?c:s,onClick:function(){I(d.EScribblePattern.Erase),null==n||n.setPattern(d.EScribblePattern.Erase),x()}})),f.default.createElement("div",{className:u.getClassName("scribble","silder")},f.default.createElement("span",{className:u.getClassName("scribble","circle")}),f.default.createElement(a.Slider,{onChange:function(e){b(e),x(),null==n||n.setPenSize(e)},min:1,max:50,style:{width:"60%"},value:p}),f.default.createElement("span",{className:u.getClassName("scribble","circle"),style:{width:"10px",height:"10px"}})))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='12' height='13' viewBox='0 0 12 13' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='9.07153' y='1' width='3' height='10' rx='1' transform='rotate(45 9.07153 1)' fill='%236272FB' /%3e %3cpath d='M1.06068 11.182L1.73311 8.67247L3.57023 10.5096L1.06068 11.182Z' fill='%236272FB' /%3e %3ccircle cx='11.0002' cy='1' r='1' fill='%236272FB' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='12' height='13' viewBox='0 0 12 13' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='9.07153' y='1' width='3' height='10' rx='1' transform='rotate(45 9.07153 1)' fill='%23BAB8B8' /%3e %3cpath d='M1.06068 11.182L1.73311 8.67247L3.57023 10.5096L1.06068 11.182Z' fill='%23BAB8B8' /%3e %3ccircle cx='11.0002' cy='1' r='1' fill='%23BAB8B8' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='10' height='10' viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='6.34875' y='0.353553' width='4.5' height='8.47848' rx='2.25' transform='rotate(45 6.34875 0.353553)' fill='%236272FB' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='1.74547' y1='4.60767' x2='4.92401' y2='8.46733' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='2.00061' y1='9.75' x2='10.0006' y2='9.75' stroke='%236272FB' stroke-width='0.5' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='10' height='10' viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='6.34875' y='0.353553' width='4.5' height='8.47848' rx='2.25' transform='rotate(45 6.34875 0.353553)' fill='%23E6E6E6' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='1.74547' y1='4.60767' x2='4.92401' y2='8.46733' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='2.00061' y1='9.75' x2='10.0006' y2='9.75' stroke='%23BAB8B8' stroke-width='0.5' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cg clip-path='url(%23clip0_98103_43035)'%3e %3cpath d='M0.593516 3.68361H8.23035C8.49598 3.68361 8.76161 3.35158 8.76161 3.01954C8.76161 2.6211 8.56239 2.35547 8.23035 2.35547H0.593516C0.327888 2.35547 0.0622578 2.6211 0.0622578 3.01954C0.0622578 3.35158 0.26148 3.68361 0.593516 3.68361ZM7.96472 5.67583H0.726331C0.327888 5.67583 -0.00415039 6.00787 -0.00415039 6.3399C-0.00415039 6.73835 0.327888 7.00398 0.726331 7.00398H7.96472C8.36317 7.00398 8.6952 6.73835 8.6952 6.3399C8.6952 5.94146 8.36317 5.67583 7.96472 5.67583ZM7.96472 10.3243C8.36317 10.3243 8.6952 9.9923 8.6952 9.66027C8.6952 9.26182 8.36317 8.9962 7.96472 8.9962H0.726331C0.327888 8.9962 -0.00415039 9.26182 -0.00415039 9.66027C-0.00415039 10.0587 0.327888 10.3243 0.726331 10.3243H7.96472ZM7.89831 12.3166H0.859145C0.394294 12.3166 0.0622578 12.5822 0.0622578 12.9806C0.0622578 13.3791 0.394294 13.6447 0.859145 13.6447H7.89831C8.36317 13.6447 8.6952 13.3791 8.6952 12.9806C8.6952 12.5822 8.36317 12.3166 7.89831 12.3166ZM10.8866 12.715C11.1523 12.9806 11.6171 12.9806 11.8828 12.715L15.8008 8.46494C16.0664 8.19931 16.0664 7.66805 15.8008 7.40242L11.8828 3.15236C11.6171 2.88673 11.1523 2.88673 10.8866 3.15236C10.621 3.41799 10.621 3.94924 10.8866 4.21487L14.3398 7.93368L10.8866 11.6525C10.621 11.9845 10.621 12.4494 10.8866 12.715Z' fill='%23AAAAAA' /%3e %3c/g%3e %3cdefs%3e %3cclipPath id='clip0_98103_43035'%3e %3crect width='16' height='16' fill='white' transform='matrix(-1 0 0 1 16 0)' /%3e %3c/clipPath%3e %3c/defs%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(51).default,o=n(62).default,a=n(28).default,r=n(34).default,l=n(0),c=n(41),s=n(25),u=n(481),d=n(35),h=n(44),g=n(482),f=n(30),v=n(42),p=n(82),b=n(260),m=n(49),y=n(32),C=n(26),I=n(485),x=n(486),w=n(487);function k(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var S=k(l),P=Object.defineProperty,L=Object.defineProperties,A=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,D=function(e,t,n){return t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},M=function(e,t){for(var n in t||(t={}))T.call(t,n)&&D(e,n,t[n]);if(O){var i,o=r(O(t));try{for(o.s();!(i=o.n()).done;){n=i.value;E.call(t,n)&&D(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},N=function(e,t){return L(e,A(t))},R=y.cKeyCode.default,B="".concat(c.prefix,"-sidebar"),j=d.connect((function(e){return{annotation:e.annotation}}),null,null,{context:f.LabelBeeContext})((function(e){var t,n=e.annotation,r=e.dispatch,c=e.checkMode,d=n.imgIndex,f=n.imgList,k=n.stepList,P=n.step,L=n.skipBeforePageTurning,A=C.useTranslation().t,O=null!=(t=f[d])?t:{},T=v.jsonParser(null==O?void 0:O.result),E=b.useCustomToolInstance({basicInfo:T}).toolInstanceRef,D=l.useState({}),j=a(D,2),_=j[0],H=j[1],V=l.useState([]),F=a(V,2),Z=F[0],z=F[1],U=l.useState(void 0),G=a(U,2),W=G[0],K=G[1],Y=l.useState([]),X=a(Y,2),J=X[0],Q=X[1],q=l.useState([]),$=a(q,2),ee=$[0],te=$[1];l.useEffect((function(){var e;if(k&&P){var t=null==(e=p.getStepConfig(k,P))?void 0:e.config;H(v.jsonParser(t))}}),[k,P]),l.useEffect((function(){if(O){var e=I.getCurrentResultFromResultList(null==O?void 0:O.result),t=(null==e?void 0:e.answerList)?e:null==O?void 0:O.questionList;(null==t?void 0:t.answerList)&&(ie(t.answerList),z(t.answerList||[])),K(null==e?void 0:e.textAttribute)}}),[d,O]),l.useEffect((function(){E.current.exportData=function(){var e=I.formatSort(J);return[[{answerList:Z,sort:e,textAttribute:W,id:null==O?void 0:O.id}],{}]};var e=I.formatSort(J),t={answerList:Z,sort:e,textAttribute:W,id:null==O?void 0:O.id,toolName:y.EToolName.LLM};E.current.currentPageResult=t}),[Z,J,W]),l.useEffect((function(){return window.addEventListener("keydown",ne),function(){window.removeEventListener("keydown",ne)}}),[]);var ne=function(e){if(e.ctrlKey&&e.keyCode===R.Enter){if(L)return void L((function(){return r(m.PageForward())}));r(m.PageForward())}},ie=function(e){var t,n=[],i=[];if((null==e?void 0:e.length)>0){var a=I.getCurrentResultFromResultList(null==O?void 0:O.result),r=(null==a?void 0:a.length)>0?a[0]:a;(null==(t=null==r?void 0:r.sort)?void 0:t.length)>0&&(i=r.sort.reduce((function(e,t){var n=[{title:t[0],id:t[0]}];return t.length>1&&(n=t.map((function(e){return{title:e,id:e}}))),[].concat(o(e),[n])}),[])),e.forEach((function(e){i.some((function(t){return t.length>1?t.some((function(t){return t.id===e.order})):t[0].id===e.order}))||n.push({title:e.order,id:e.order})}))}Q(i),te(n)};if(function(){var e,t,n=_.indicatorScore,i=void 0===n?[]:n,o=_.indicatorDetermine,a=void 0===o?[]:o,r=_.text,l=void 0===r?[]:r,c=_.enableSort,s=(null==(e=null==i?void 0:i.filter((function(e){return e.label&&e.value&&e.score})))?void 0:e.length)>0,u=(null==(t=null==a?void 0:a.filter((function(e){return e.label&&e.value})))?void 0:t.length)>0,d=(null==l?void 0:l.length)>0;return!(s||u||d||c)}())return S.default.createElement("div",{className:"".concat(B)},S.default.createElement("div",{className:"".concat(B,"__content"),style:{display:"flex",justifyContent:"center",alignItems:"center"}},S.default.createElement(s.Empty,{description:S.default.createElement("span",{style:{color:"#ccc"}},A("NoScoringScale")),imageStyle:{width:200,height:200},image:S.default.createElement("img",{src:x})})));var oe=_.indicatorScore,ae=void 0===oe?[]:oe,re=_.indicatorDetermine,le=void 0===re?[]:re,ce=_.enableSort,se=Z.length>0&&((null==le?void 0:le.length)>0||(null==ae?void 0:ae.length)>0);return S.default.createElement("div",{className:"".concat(B)},S.default.createElement("div",{className:"".concat(B,"__content")},ce&&S.default.createElement(u,{waitSortList:ee,sortList:J,setSortList:Q,checkMode:c}),se&&S.default.createElement(g,{list:Z,LLMConfig:_,updateValue:function(e){var t=e.order,n=e.value,o=e.key,a=null==Z?void 0:Z.map((function(e){var a;if((null==e?void 0:e.order)===t){if(h.isNumber(n))return N(M({},e),{score:n});if(h.isObject(n)&&o){var r=i({},null==n?void 0:n.key,n.value),l=null!=(a=e[o])?a:{};return N(M({},e),i({},o,M(M({},l),r)))}}return e}));z(a)},checkMode:c}),(null==_?void 0:_.text)&&S.default.createElement("div",{style:{padding:"0px 16px",marginTop:"16px"}},S.default.createElement(w,{textAttribute:W||[],LLMConfig:_,setText:K,checkMode:c}))),S.default.createElement("div",{style:{margin:"24px 16px",display:"flex"}},(null==f?void 0:f.length)-1!==d&&S.default.createElement(s.Button,{type:"primary",style:{marginLeft:"auto"},onClick:function(){L?L((function(){return r(m.PageForward())})):r(m.PageForward())},disabled:c},A("Save"))))}));e.exports=j},function(e,t,n){"use strict";var i=n(62).default,o=n(51).default,a=n(28).default,r=n(34).default,l=n(0),c=n(41),s=n(25),u=n(26),d=n(45),h=n(42),g=n(44),f=n(32),v=n(30);function p(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var b,m,y=p(l),C=Object.defineProperty,I=Object.defineProperties,x=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=function(e,t,n){return t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},L=function(e,t){for(var n in t||(t={}))k.call(t,n)&&P(e,n,t[n]);if(w){var i,o=r(w(t));try{for(o.s();!(i=o.n()).done;){n=i.value;S.call(t,n)&&P(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e};(m=b||(b={})).Top="Top",m.Right="Right",m.Bottom="Bottom",m.Left="Left";var A="".concat(c.prefix,"-LLMSidebar-contentBox"),O=function(){var e=u.useTranslation().t;return y.default.createElement("div",{className:"".concat(A,"__navigation")},y.default.createElement("span",null,e("Best")),y.default.createElement("div",{style:{display:"flex",alignItems:"center"}},y.default.createElement(d.LeftOutlined,null),y.default.createElement("div",{style:{height:0,border:"1px solid #999999",width:"450px"}})),y.default.createElement("span",null,e("Worst")))};e.exports=function(e){var t=l.useReducer((function(e){return e+1}),0),n=a(t,2)[1],r=e.sortList,c=e.setSortList,d=e.waitSortList,p=e.checkMode,m=l.useContext(v.LLMContext).setHoverKey,C=p,w=l.useState(void 0),k=a(w,2),S=k[0],P=k[1],T=l.useState(void 0),E=a(T,2),D=E[0],M=E[1],N=l.useState([]),R=a(N,2),B=R[0],j=R[1],_=u.useTranslation().t;l.useEffect((function(){j(d)}),[d]),l.useEffect((function(){Z()}),[JSON.stringify(r)]);var H=function(e){var t=e.item,n=e.operation,i=e.id,a=o({},"border".concat(S),"2px solid #8C9AFF");return y.default.createElement("div",L({key:"".concat(null==t?void 0:t.id),color:"#EBEBEB",id:i,className:h.classnames(o({},"".concat(A,"__answerTag"),!0)),style:D===(null==t?void 0:t.id)&&S?a:void 0,draggable:C?"":"true",onMouseMove:function(){m(t.id)},onMouseLeave:function(){m(-1)}},n),null==t?void 0:t.title)},V=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},F=function(e,t){var n=function(e,t){var n=f.MathUtils.getLineLength(e,V(t.tl,t.tr)),i=f.MathUtils.getLineLength(e,V(t.tr,t.tr)),o=f.MathUtils.getLineLength(e,V(t.bl,t.br)),a=f.MathUtils.getLineLength(e,V(t.tl,t.bl));return{minDistance:Math.min(n,i,o,a),toTopDistance:n,toRightDistance:i,toBottompDistance:o,toLeftDistance:a}}(e,t),i=n.minDistance,o=n.toTopDistance,a=n.toRightDistance,r=n.toBottompDistance,l=n.toLeftDistance;switch(i){case o:P(b.Top);break;case a:P(b.Right);break;case r:P(b.Bottom);break;case l:P(b.Left)}},Z=function(){var e=document.getElementById("sortBox");if(null==e?void 0:e.childNodes){var t=[];e.childNodes.forEach((function(e,n){var o,a=e;(null==(o=null==e?void 0:e.childNodes)?void 0:o.length)>1&&(a=e.childNodes[0]);var l=a.getBoundingClientRect()||{},c=l.bottom,s=l.top,u=l.left,d=l.right,h=l.width,f=l.height,v=l.x,p=l.y,b={x:u+h/2,y:s+f/2},m={tl:{x:v,y:p},tr:{x:d,y:s},br:{x:d,y:c},bl:{x:u,y:c}},y=r[n].reduce((function(e,t){var n,o=t;return g.isArray(t)&&t.length>1&&(o=t[0]),n=L({},o),o=I(n,x({tagCenterPoint:b,tagVertexPoint:m})),[].concat(i(e),[o])}),[]);t.push(y)})),c(t)}},z=function(e){var t,n,i,o,a,l,c={x:e.pageX,y:e.pageY},s=r;if((null==s?void 0:s.length)>0){for(var u=s[0],d=0;d<s.length;d++)if(d>0){var h=null==(t=s[d][0])?void 0:t.tagCenterPoint,g=null==(n=u[0])?void 0:n.tagCenterPoint;f.MathUtils.getLineLength(c,h)<f.MathUtils.getLineLength(c,g)&&(u=r[d])}if(!c.x||!c.y)return;if(G(e.target.id)===(null==(i=u[0])?void 0:i.id))return void M(void 0);M(null==(o=u[0])?void 0:o.id),(null==(a=u[0])?void 0:a.tagVertexPoint)&&c&&F(c,null==(l=u[0])?void 0:l.tagVertexPoint)}},U=function(e){var t,o,a=e.target,l=-1,s=-1,u=-1,d=[],h=g.cloneDeep(r);if(u=h.findIndex((function(e){return e[0].id===Number(D)})),"sortBox"===(null==(o=null==a?void 0:a.parentNode)?void 0:o.parentNode.id)){l=G(a.parentNode.id);var f=G(a.id);d=h[~~l].filter((function(e){return e.id===~~f}));var v=h[~~l].findIndex((function(e){return e.id===~~f}));h[~~l].splice(v,1)}if("sortBox"===(null==a?void 0:a.parentNode.id)){if(!D)return;l=G(a.id),s=h.findIndex((function(e){return e[0].id===l}));var p=h.find((function(e){return e[0].id===l}));p&&(d=p),h.splice(s,1),u=h.findIndex((function(e){return e[0].id===~~D}))}switch("waitBox"===a.parentNode.id&&(l=G(a.id),s=B.findIndex((function(e){return e.id===l})),d=[B[s]],B.splice(s,1)),S){case b.Left:h.splice(u,0,d);break;case b.Right:h.splice(u+1,0,d);break;case b.Top:case b.Bottom:(t=h[u]).push.apply(t,i(d));break;default:h.push(d)}c(h),P(void 0),n()},G=function(e){var t=e.indexOf("-");return Number(e.substring(t+1,e.length))};return y.default.createElement("div",{style:{padding:"0px 16px",marginBottom:"16px"}},y.default.createElement("div",{className:"".concat(A,"__title")},y.default.createElement("span",null,_("RankingQualityOfAnswers")),B.length>0&&y.default.createElement(s.Tag,{color:"#FFD9D9",style:{color:"#F26549",marginLeft:8}},_("Unfinished"))),y.default.createElement("div",null,y.default.createElement("div",{style:{display:"flex",alignItems:"center"}},y.default.createElement("span",{style:{marginRight:"16px"}},_("ToBeSorted")),y.default.createElement("div",{id:"waitBox",className:"".concat(A,"__answerBox")},B.length>0&&B.map((function(e){return H({item:e,id:"waitBoxItem-".concat(null==e?void 0:e.id),operation:{onDrag:z,onDragEnd:U}})})))),y.default.createElement(O,null),y.default.createElement("div",{id:"sortBox",className:"".concat(A,"__answerBox")},r.map((function(e,t){var n;return e.length>1?y.default.createElement("div",{key:"item-".concat(t),id:"sortBox-".concat(t)},e.map((function(e){return H({item:e,id:"sortBoxItem-".concat(null==e?void 0:e.id),operation:{onDrag:z,onDragEnd:U}})}))):H({item:e[0],id:"sortBox-".concat(null==(n=e[0])?void 0:n.id),operation:{onDrag:z,onDragEnd:U}})})))))}},function(e,t,n){"use strict";var i=n(51).default,o=n(0),a=n(41),r=n(25),l=n(26),c=n(483),s=n(484),u=n(30),d=n(42),h=n(45),g=n(256),f=n(44),v=n(143);function p(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var b,m,y=p(o);(m=b||(b={}))[m.Finish=0]="Finish",m[m.UnFinish=1]="UnFinish",m[m.Default=2]="Default";var C=r.Collapse.Panel,I="".concat(a.prefix,"-LLMSidebar");e.exports=function(e){var t=e.list,n=void 0===t?[]:t,a=e.LLMConfig,p=void 0===a?{}:a,b=e.updateValue,m=e.checkMode,x=o.useContext(u.LLMContext),w=x.hoverKey,k=x.setHoverKey,S=l.useTranslation().t,P=m,L=function(e){var t=function(e){var t=p.indicatorScore,n=void 0===t?[]:t,i=p.indicatorDetermine,o=void 0===i?[]:i,a=2;if((null==n?void 0:n.length)>0){if(n.some((function(t){var n,i;return!(null==(n=null==e?void 0:e.indicatorScore)?void 0:n[t.value])||(null==(i=null==e?void 0:e.indicatorScore)?void 0:i[t.value])>Number(null==t?void 0:t.score)})))return 1;a=0}if((null==o?void 0:o.length)>0){if(o.some((function(t){var n,i=null==(n=null==e?void 0:e.indicatorDetermine)?void 0:n[t.value];return!f.isBoolean(i)})))return 1;a=0}return a}(e),n=e.order;switch(t){case 0:return{backgroundColor:"#D9FFDF",fontColor:"#36B34A",tagText:"".concat(n," ").concat(S("Finished")),tagStatus:t};case 1:return{backgroundColor:"#FFD9D9",fontColor:"#F26549",tagText:"".concat(n," ").concat(S("Unfinished")),tagStatus:t};default:return{backgroundColor:"#EBEBEB",fontColor:"#999999",tagText:n,tagStatus:t}}};return y.default.createElement(r.Collapse,{bordered:!1,expandIcon:g.expandIconFuc,expandIconPosition:"end",defaultActiveKey:n.length>0?n.map((function(e,t){return t})):void 0,style:{margin:"16px 0px"}},n.map((function(e,t){var n,o=p.indicatorScore,a=void 0===o?[]:o,l=p.indicatorDetermine,u=void 0===l?[]:l,g=L(e),f=g.backgroundColor,m=g.fontColor,x=g.tagText,S=g.tagStatus,A=y.default.createElement("div",{style:{display:"flex",width:"500px",alignItems:"center",whiteSpace:"nowrap"},onMouseMove:function(){k(e.order)},onMouseLeave:function(){k(-1)}},y.default.createElement(r.Tag,{color:f,style:{color:m,padding:"0px 8px"}},x),y.default.createElement("span",{style:{textOverflow:"ellipsis",overflow:"hidden",lineHeight:"32px",paddingRight:"24px"}},e.answer));return y.default.createElement(C,{header:A,key:t,className:d.classnames((n={},i(n,"".concat(I,"-panel"),!0),i(n,"".concat(I,"-panelHover"),w===e.order),i(n,"".concat(I,"-errorPanel"),1===S),n))},(null==a?void 0:a.length)>0&&a.map((function(t,n){var i,o=t.label,a=t.text,l=t.value,s=t.score,u=y.default.createElement("div",{className:"".concat(I,"-indicatorScore")},y.default.createElement(v,{text:o,openByText:!0}),a&&y.default.createElement(r.Popover,{placement:"bottom",content:a,overlayClassName:"".concat(I,"-indicatorScore-title")},y.default.createElement(h.InfoCircleOutlined,{style:{margin:"0px 4px",cursor:"pointer"}})));return o&&s?y.default.createElement(c,{score:s,title:u,selectScore:null==(i=null==e?void 0:e.indicatorScore)?void 0:i[l],updateScore:function(t){var n={key:l,value:t};b({order:e.order,value:n,key:"indicatorScore"})},key:n,isDisableAll:P}):null})),(null==u?void 0:u.length)>0&&u.map((function(t,n){var i,o=t.label,a=t.value;return o?y.default.createElement(s,{selectValue:null==(i=null==e?void 0:e.indicatorDetermine)?void 0:i[a],title:o,updateValue:function(t){var n={key:a,value:t};b({order:e.order,value:n,key:"indicatorDetermine"})},key:n,isDisableAll:P}):null})))})))}},function(e,t,n){"use strict";var i=n(0),o=n(41),a=n(25);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(i);e.exports=function(e){var t=e.title,n=e.score,i=void 0===n?5:n,r=e.selectScore,c=e.updateScore,s=e.isDisableAll,u=Array.from({length:i},(function(e,t){return t+1}));return l.default.createElement("div",{className:"".concat(o.prefix,"-LLMSidebar-contentBox")},l.default.createElement("span",{style:{width:"100px"}},t),l.default.createElement(a.Radio.Group,{value:r,onChange:function(e){return c(Number(e.target.value))},disabled:s},u.map((function(e,t){return l.default.createElement(a.Radio.Button,{value:e,key:t,style:{padding:"0px 16px"}},e)}))))}},function(e,t,n){"use strict";var i=n(0),o=n(41),a=n(25),r=n(26),l=n(143);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=c(i);e.exports=function(e){var t=e.title,n=e.selectValue,i=e.isDisableAll,c=e.updateValue,u=r.useTranslation().t;return s.default.createElement("div",{className:"".concat(o.prefix,"-LLMSidebar-contentBox")},s.default.createElement("span",{style:{width:"160px"}},s.default.createElement(l,{text:t,openByText:!0})),s.default.createElement(a.Radio.Group,{value:n,onChange:function(e){return c(e.target.value)},disabled:i},s.default.createElement(a.Radio,{value:!0,key:1},u("Yes")),s.default.createElement(a.Radio,{value:!1,key:2},u("No"))))}},function(e,t,n){"use strict";var i=n(62).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(42);t.formatSort=function(e){return e.reduce((function(e,t){var n=t;return n=t.length>1?t.map((function(e){return e.id})):[t[0].id],[].concat(i(e),[n])}),[])},t.getCurrentResultFromResultList=function(e){var t,n,i=o.jsonParser(e);return null!=(n=null==(t=null==i?void 0:i.step_1)?void 0:t.result[0])?n:{}}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='206' height='205' viewBox='0 0 206 205' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='103' cy='102.5' r='102.5' fill='url(%23paint0_linear_2082_2108)' /%3e %3cpath fill-rule='evenodd' clip-rule='evenodd' d='M56.5 193.87V34H150.5V193.353C136.3 200.792 120.142 205 103 205C86.2595 205 70.4563 200.987 56.5 193.87Z' fill='white' /%3e %3crect x='64.5' y='42' width='24' height='10' fill='%23EEEEEE' /%3e %3crect x='118.5' y='161' width='24' height='10' fill='%23EEEEEE' /%3e %3crect x='87.5' y='162' width='22' height='8' stroke='%23EEEEEE' stroke-width='2' /%3e %3crect x='64.5' y='60' width='78' height='10' fill='%23EEEEEE' /%3e %3crect x='64.5' y='78' width='78' height='10' fill='%23EEEEEE' /%3e %3crect x='64.5' y='96' width='78' height='10' fill='%23EEEEEE' /%3e %3crect x='64.5' y='114' width='60' height='10' fill='%23EEEEEE' /%3e %3crect x='132.5' y='114' width='10' height='10' fill='%23EEEEEE' /%3e %3cdefs%3e %3clinearGradient id='paint0_linear_2082_2108' x1='103' y1='0' x2='103' y2='205' gradientUnits='userSpaceOnUse'%3e %3cstop stop-color='%23C4C4C4' /%3e %3cstop offset='1' stop-color='%23F2F2F2' /%3e %3c/linearGradient%3e %3c/defs%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(51).default,o=n(28).default,a=n(34).default,r=n(0),l=n(25),c=n(5),s=n(26),u=n(44);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(r),g=d(c),f=Object.defineProperty,v=Object.defineProperties,p=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,C=function(e,t,n){return t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n};e.exports=function(e){var t=e.checkMode,n=e.LLMConfig,c=e.textAttribute,d=e.setText,f=(null==n?void 0:n.text)&&u.isArray(n.text)?null==n?void 0:n.text:[],I=l.Input.TextArea,x=l.Form.useForm(),w=o(x,1)[0],k=s.useTranslation().t;return r.useEffect((function(){var e=f.map((function(e,t){var n,i,o,r=c.filter((function(t){return(null==t?void 0:t.textId)===(null==e?void 0:e.textId)}))||[];return i=function(e,t){for(var n in t||(t={}))m.call(t,n)&&C(e,n,t[n]);if(b){var i,o=a(b(t));try{for(o.s();!(i=o.n()).done;)n=i.value,y.call(t,n)&&C(e,n,t[n])}catch(r){o.e(r)}finally{o.f()}}return e}({},e),o={value:null==(n=r[0])?void 0:n.value},v(i,p(o))}));w.setFieldsValue({text:e})}),[f,c]),h.default.createElement(l.Form,{form:w,onValuesChange:function(e,t){d(t.text)}},h.default.createElement(l.Form.List,{name:"text"},(function(e,n){return h.default.createElement(h.default.Fragment,null,e.map((function(e,n){var o,a=f[e.name]||{},r=a.max,c=a.min,s=a.title,u=a.tip,v=s,p=k("LeastCharacterError",{num:c});return h.default.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:"16px"},key:n},v&&h.default.createElement(l.Form.Item,{name:[e.name,"title"],extra:u,style:{fontSize:"16px",lineHeight:"22px",fontWeight:500,color:"#333333",marginBottom:8},required:!!c,label:" ",colon:!1},s,v&&h.default.createElement("span",{className:g.default((o={},i(o,"clearText",!0),i(o,"clearText__disabled",t),o)),style:{verticalAlign:"initial"},onClick:function(){if(!t){w.setFields([{name:["text",e.name,"value"],value:void 0,errors:c?[p]:[]}]);var n=w.getFieldValue("text");d(n)}}})),v&&h.default.createElement(l.Form.Item,{name:[e.name,"value"],style:{marginBottom:8},rules:[{validator:function(e,t){return c&&(null==t?void 0:t.length)<Number(c)?Promise.reject(p):Promise.resolve()}}],initialValue:void 0},h.default.createElement(I,{maxLength:r,disabled:t,showCount:!!r,style:{width:"100%"}})))})))})))}},function(e,t,n){"use strict";var i=n(0),o=n(217),a=n(55),r=n(30);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=l(i);e.exports=function(){var e=r.useSelector((function(e){var t,n;return a.getCurrentStepInfo(null==(t=null==e?void 0:e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList)}));return c.default.createElement(o.default,{toolName:null==e?void 0:e.tool})}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3crect width='16' height='16' fill='none'/%3e%3cg transform='translate(1 2)'%3e%3cpath d='M2%2c12a2.071%2c2.071%2c0%2c0%2c1-1.412-.54A1.791%2c1.791%2c0%2c0%2c1%2c0%2c10.151v-8.3A1.935%2c1.935%2c0%2c0%2c1%2c2.006%2c0h9.988A1.935%2c1.935%2c0%2c0%2c1%2c14%2c1.849v8.3a1.77%2c1.77%2c0%2c0%2c1-.588%2c1.308A2.075%2c2.075%2c0%2c0%2c1%2c12%2c12H2Zm1-3.692a.926.926%2c0%2c1%2c0%2c0%2c1.846H11a.926.926%2c0%2c1%2c0%2c0-1.846Zm7.273-3.692C10.2%2c4.616%2c10%2c4.67%2c10%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H11.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm-4%2c0C6.2%2c4.616%2c6%2c4.67%2c6%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H7.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm-4%2c0C2.2%2c4.616%2c2%2c4.67%2c2%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H3.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm8-2.77c-.065%2c0-.268.054-.268.18V3.451c0%2c.078%2c0%2c.241.268.241H11.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Zm-4%2c0C6.2%2c1.846%2c6%2c1.9%2c6%2c2.026V3.451c0%2c.078%2c0%2c.241.268.241H7.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Zm-4%2c0C2.2%2c1.846%2c2%2c1.9%2c2%2c2.026V3.451c0%2c.078%2c0%2c.241.268.241H3.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Z' fill='white'/%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='17' height='15' viewBox='0 0 17 15'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666fff%3b stroke-miterlimit: 10%3b %7d .cls-2%2c .cls-3 %7b stroke: none%3b %7d .cls-3 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_kj_h' transform='translate(1 1)'%3e %3cg id='%e5%9b%be%e6%a0%87_%e8%ae%be%e7%bd%ae_%e5%bf%ab%e6%8d%b7%e9%94%ae'%3e %3cg id='%e5%bd%a2%e7%8a%b6' class='cls-1'%3e %3cpath class='cls-2' d='M 2.142650127410889 13.49960994720459 L 2.14231014251709 13.49960994720459 L 2.141970157623291 13.49960994720459 C 1.443660259246826 13.49962043762207 0.7852402329444885 13.24412059783936 0.2880001962184906 12.78017997741699 C -0.2126297950744629 12.31418991088867 -0.4999997913837433 11.66413974761963 -0.4999997913837433 10.99709987640381 L -0.4999997913837433 2.003400325775146 C -0.4999997913837433 0.6230202317237854 0.6884301900863647 -0.4999997913837433 2.149200201034546 -0.4999997913837433 L 12.85109996795654 -0.4999997913837433 C 14.31187057495117 -0.4999997913837433 15.50030040740967 0.6230202317237854 15.50030040740967 2.003400325775146 L 15.50030040740967 10.99709987640381 C 15.49915027618408 11.6742000579834 15.21883010864258 12.30697059631348 14.71096038818359 12.77968978881836 C 14.2135705947876 13.24379062652588 13.55419063568115 13.49960041046143 12.85474014282227 13.49960041046143 L 2.149200201034546 13.49960041046143 L 2.142650127410889 13.49960994720459 Z M 3.208500146865845 9.5 C 2.89663028717041 9.5 2.642900228500366 9.724249839782715 2.642900228500366 9.999899864196777 C 2.642900228500366 10.27554988861084 2.89663028717041 10.49980068206787 3.208500146865845 10.49980068206787 L 11.79090023040771 10.49980068206787 C 12.10327053070068 10.49980068206787 12.35739994049072 10.27554988861084 12.35739994049072 9.999899864196777 C 12.35739994049072 9.724249839782715 12.10327053070068 9.5 11.79090023040771 9.5 L 3.208500146865845 9.5 Z M 11.21450042724609 6.500200271606445 L 12.35739994049072 6.500200271606445 L 12.35739994049072 5.500400066375732 L 11.21450042724609 5.500400066375732 L 11.21450042724609 6.500200271606445 Z M 6.928699970245361 6.500200271606445 L 8.071599960327148 6.500200271606445 L 8.071599960327148 5.500400066375732 L 6.928699970245361 5.500400066375732 L 6.928699970245361 6.500200271606445 Z M 2.642900228500366 6.500200271606445 L 3.785800218582153 6.500200271606445 L 3.785800218582153 5.500400066375732 L 2.642900228500366 5.500400066375732 L 2.642900228500366 6.500200271606445 Z M 11.21450042724609 3.499600172042847 L 12.35739994049072 3.499600172042847 L 12.35739994049072 2.499800205230713 L 11.21450042724609 2.499800205230713 L 11.21450042724609 3.499600172042847 Z M 6.928699970245361 3.499600172042847 L 8.071599960327148 3.499600172042847 L 8.071599960327148 2.499800205230713 L 6.928699970245361 2.499800205230713 L 6.928699970245361 3.499600172042847 Z M 2.642900228500366 3.499600172042847 L 3.785800218582153 3.499600172042847 L 3.785800218582153 2.499800205230713 L 2.642900228500366 2.499800205230713 L 2.642900228500366 3.499600172042847 Z'/%3e %3cpath class='cls-3' d='M 2.141960144042969 12.99960994720459 L 2.149200201034546 12.99960041046143 L 12.85474014282227 12.99960041046143 C 13.4271297454834 12.99960041046143 13.96537017822266 12.79152011871338 14.37030029296875 12.41370010375977 C 14.77565002441406 12.03639984130859 14.99939060211182 11.53330039978027 15.00030040740967 10.99709987640381 L 15.00030040740967 2.003400325775146 C 15.00030040740967 0.8987202048301697 14.03617000579834 2.188110386214248e-07 12.85109996795654 2.188110386214248e-07 L 2.149200201034546 2.188110386214248e-07 C 0.9641302227973938 2.188110386214248e-07 2.037048290048915e-07 0.8987202048301697 2.037048290048915e-07 2.003400325775146 L 2.037048290048915e-07 10.99709987640381 C 2.037048290048915e-07 11.52581024169922 0.2293002009391785 12.04246044158936 0.6291002035140991 12.41460037231445 C 1.033440232276917 12.79186058044434 1.570720195770264 12.99962043762207 2.141960144042969 12.99960994720459 M 3.208500146865845 9 L 11.79090023040771 9 C 12.3789701461792 9 12.85739994049072 9.448550224304199 12.85739994049072 9.999899864196777 C 12.85739994049072 10.55125045776367 12.3789701461792 10.99980068206787 11.79090023040771 10.99980068206787 L 3.208500146865845 10.99980068206787 C 2.620930194854736 10.99980068206787 2.142900228500366 10.55125045776367 2.142900228500366 9.999899864196777 C 2.142900228500366 9.448550224304199 2.620930194854736 9 3.208500146865845 9 M 11.00160026550293 5.000400066375732 L 12.60449981689453 5.000400066375732 C 12.79372024536133 5.000400066375732 12.85739994049072 5.157999992370605 12.85739994049072 5.229900360107422 L 12.85739994049072 6.769800186157227 C 12.85739994049072 6.844580173492432 12.85739994049072 7.000200271606445 12.64050006866455 7.000200271606445 L 11.00160026550293 7.000200271606445 C 10.71450042724609 7.000200271606445 10.71450042724609 6.823920249938965 10.71450042724609 6.739200115203857 L 10.71450042724609 5.19480037689209 C 10.71450042724609 5.058890342712402 10.9323902130127 5.000400066375732 11.00160026550293 5.000400066375732 M 6.715800285339355 5.000400066375732 L 8.318699836730957 5.000400066375732 C 8.507920265197754 5.000400066375732 8.571599960327148 5.157999992370605 8.571599960327148 5.229900360107422 L 8.571599960327148 6.769800186157227 C 8.571599960327148 6.844580173492432 8.571599960327148 7.000200271606445 8.354700088500977 7.000200271606445 L 6.715800285339355 7.000200271606445 C 6.428699970245361 7.000200271606445 6.428699970245361 6.823920249938965 6.428699970245361 6.739200115203857 L 6.428699970245361 5.19480037689209 C 6.428699970245361 5.058890342712402 6.646590232849121 5.000400066375732 6.715800285339355 5.000400066375732 M 2.430000305175781 5.000400066375732 L 4.032900333404541 5.000400066375732 C 4.22212028503418 5.000400066375732 4.285799980163574 5.157999992370605 4.285799980163574 5.229900360107422 L 4.285799980163574 6.769800186157227 C 4.285799980163574 6.844580173492432 4.285799980163574 7.000200271606445 4.068900108337402 7.000200271606445 L 2.430000305175781 7.000200271606445 C 2.142900228500366 7.000200271606445 2.142900228500366 6.823920249938965 2.142900228500366 6.739200115203857 L 2.142900228500366 5.19480037689209 C 2.142900228500366 5.058890342712402 2.360790252685547 5.000400066375732 2.430000305175781 5.000400066375732 M 11.00160026550293 1.999800205230713 L 12.60449981689453 1.999800205230713 C 12.79372024536133 1.999800205230713 12.85739994049072 2.158020257949829 12.85739994049072 2.230200290679932 L 12.85739994049072 3.770100116729736 C 12.85739994049072 3.844590187072754 12.85739994049072 3.999600172042847 12.64050006866455 3.999600172042847 L 11.00160026550293 3.999600172042847 C 10.71450042724609 3.999600172042847 10.71450042724609 3.823320150375366 10.71450042724609 3.738600254058838 L 10.71450042724609 2.1951003074646 C 10.71450042724609 2.058560132980347 10.9323902130127 1.999800205230713 11.00160026550293 1.999800205230713 M 6.715800285339355 1.999800205230713 L 8.318699836730957 1.999800205230713 C 8.507920265197754 1.999800205230713 8.571599960327148 2.158020257949829 8.571599960327148 2.230200290679932 L 8.571599960327148 3.770100116729736 C 8.571599960327148 3.844590187072754 8.571599960327148 3.999600172042847 8.354700088500977 3.999600172042847 L 6.715800285339355 3.999600172042847 C 6.428699970245361 3.999600172042847 6.428699970245361 3.823320150375366 6.428699970245361 3.738600254058838 L 6.428699970245361 2.1951003074646 C 6.428699970245361 2.058560132980347 6.646590232849121 1.999800205230713 6.715800285339355 1.999800205230713 M 2.430000305175781 1.999800205230713 L 4.032900333404541 1.999800205230713 C 4.22212028503418 1.999800205230713 4.285799980163574 2.158020257949829 4.285799980163574 2.230200290679932 L 4.285799980163574 3.770100116729736 C 4.285799980163574 3.844590187072754 4.285799980163574 3.999600172042847 4.068900108337402 3.999600172042847 L 2.430000305175781 3.999600172042847 C 2.142900228500366 3.999600172042847 2.142900228500366 3.823320150375366 2.142900228500366 3.738600254058838 L 2.142900228500366 2.1951003074646 C 2.142900228500366 2.058560132980347 2.360790252685547 1.999800205230713 2.430000305175781 1.999800205230713 M 2.143340110778809 13.99960994720459 L 2.142660140991211 13.99960994720459 L 2.141980171203613 13.99960994720459 C 1.316610217094421 13.99962043762207 0.537050187587738 13.69639015197754 -0.05309979617595673 13.14577007293701 C -0.654549777507782 12.58592987060547 -0.9999998211860657 11.80247020721436 -0.9999998211860657 10.99709987640381 L -0.9999998211860657 2.003400325775146 C -0.9999998211860657 0.3473202288150787 0.4127302169799805 -0.9999997615814209 2.149200201034546 -0.9999997615814209 L 12.85109996795654 -0.9999997615814209 C 14.58757019042969 -0.9999997615814209 16.00029945373535 0.3473202288150787 16.00029945373535 2.003400325775146 L 16.00029945373535 10.99709987640381 C 15.99890995025635 11.81510066986084 15.66200065612793 12.57754039764404 15.0516300201416 13.14568042755127 C 14.46177005767822 13.6960506439209 13.68125057220459 13.99960041046143 12.85474014282227 13.99960041046143 L 2.149200201034546 13.99960041046143 L 2.143340110778809 13.99960994720459 Z'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_27' data-name='%e8%b7%af%e5%be%84 27' class='cls-1' d='M3.5-16v.874h7V-16H14v3.5h-.875v7H14V-2H10.5v-.875h-7V-2H0V-5.5H.875v-7H0V-16Zm0%2c2.624v.876H2.625v7H3.5v.875h7V-5.5h.875v-7H10.5v-.875Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_26' data-name='%e8%b7%af%e5%be%84 26' class='cls-2' d='M-1747%2c836H-67V-109H-1747Z' transform='translate(1747 109)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frame_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cg id='%e7%bb%84_25' data-name='%e7%bb%84 25' class='cls-3' transform='translate(0 -16)'%3e %3cg id='%e7%bb%84_24' data-name='%e7%bb%84 24' class='cls-4' transform='translate(-1528.625 -81.375)'%3e %3cpath id='%e8%b7%af%e5%be%84_25' data-name='%e8%b7%af%e5%be%84 25' class='cls-5' d='M-5-21H17.75V1.75H-5Z' transform='translate(1529.25 98)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2%2c .cls-6 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d .cls-6 %7b stroke: %23666%3b %7d .cls-7 %7b stroke: none%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_27' data-name='%e8%b7%af%e5%be%84 27' class='cls-1' d='M3.5-16v.874h7V-16H14v3.5h-.875v7H14V-2H10.5v-.875h-7V-2H0V-5.5H.875v-7H0V-16Zm0%2c2.624v.876H2.625v7H3.5v.875h7V-5.5h.875v-7H10.5v-.875Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_26' data-name='%e8%b7%af%e5%be%84 26' class='cls-2' d='M-1747%2c836H-67V-109H-1747Z' transform='translate(1747 109)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frameNull_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_131' data-name='%e7%9f%a9%e5%bd%a2 131' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3cg id='%e7%bb%84_25' data-name='%e7%bb%84 25' class='cls-3' transform='translate(0 -16)'%3e %3cg id='%e7%bb%84_24' data-name='%e7%bb%84 24' class='cls-4' transform='translate(-1528.625 -81.375)'%3e %3cpath id='%e8%b7%af%e5%be%84_25' data-name='%e8%b7%af%e5%be%84 25' class='cls-5' d='M-5-21H17.75V1.75H-5Z' transform='translate(1529.25 98)'/%3e %3c/g%3e %3c/g%3e %3cg id='%e7%9f%a9%e5%bd%a2_92' data-name='%e7%9f%a9%e5%bd%a2 92' class='cls-6' transform='translate(1.699 -12.97) rotate(-45)'%3e %3crect class='cls-7' width='1.6' height='13'/%3e %3crect class='cls-2' x='0.5' y='0.5' width='0.6' height='12'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666%3b %7d .cls-2 %7b fill: none%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_frameActive_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_2' data-name='%e5%87%8f%e5%8e%bb 2' class='cls-1' d='M1768.5%2c9503H1765v-3.5h.875v-7H1765V9489h3.5v.873l7%2c0V9489h3.5v3.5h-.875v4.5h-1.75v-4.5h-.873v-.873l-7%2c0v.875h-.873v7h.873v.873h4.5v1.751h-4.5V9503Z' transform='translate(-1765 -9505)'/%3e %3cpath id='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd_4' data-name='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd 4' class='cls-1' d='M2.628%2c0%2c5.256%2c5.256%2c2.632%2c4.129%2c0%2c5.256Z' transform='translate(7.667 -6.406) rotate(-30)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_399' data-name='%e8%b7%af%e5%be%84 399' class='cls-2' d='M2.139-17.789H7.33L8-17.12H3.813l1.172%2c1.34h-1ZM7.5-18.627H2.306l-.67-.669H5.823l-1.172-1.34h1L7.5-18.627Z' transform='translate(-1.636 20.636)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frameChange_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_2' data-name='%e5%87%8f%e5%8e%bb 2' class='cls-1' d='M1768.5%2c9503H1765v-3.5h.875v-7H1765V9489h3.5v.873l7%2c0V9489h3.5v3.5h-.875v4.933l-1.75.025V9492.5h-.873v-.873l-7%2c0v.875h-.873v7h.873v.873h3.841l1.391%2c1.751H1768.5V9503Z' transform='translate(-1765 -9505)'/%3e %3cg id='%e7%bb%84_647' data-name='%e7%bb%84 647' transform='translate(7 14)'%3e %3cg id='%e7%bb%84_646' data-name='%e7%bb%84 646' class='cls-3' transform='translate(1.636 -20.636)'%3e %3cpath id='%e8%b7%af%e5%be%84_398' data-name='%e8%b7%af%e5%be%84 398' class='cls-1' d='M-3.364-25.636H6.07v7.927H-3.364Z' transform='translate(1.829 24.101)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_cencel_kj' transform='translate(0.494)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='15.963' transform='translate(-0.494)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.057%2c3.54C8.654%2c7.1%2c4.678%2c7.648.279%2c5.143A.544.544%2c0%2c0%2c1%2c0%2c4.662a.578.578%2c0%2c0%2c1%2c.283-.493A.548.548%2c0%2c0%2c1%2c.84%2c4.163C4.822%2c6.431%2c8.263%2c5.956%2c11.318%2c2.722L8.918.065%2c13.99%2c0l-.072%2c5.6Z' transform='translate(10.937 16) rotate(-138)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_reform_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='15.963'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.057%2c3.148C8.654-.415%2c4.678-.96.279%2c1.546A.544.544%2c0%2c0%2c0%2c0%2c2.027a.578.578%2c0%2c0%2c0%2c.283.493.548.548%2c0%2c0%2c0%2c.557.005C4.822.257%2c8.263.733%2c11.318%2c3.967l-2.4%2c2.657%2c5.072.065-.072-5.6Z' transform='translate(0.094 11.029) rotate(-42)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_274' data-name='%e8%b7%af%e5%be%84 274' class='cls-1' d='M1.732-140.268a5.914%2c5.914%2c0%2c0%2c1%2c8.364%2c0%2c5.916%2c5.916%2c0%2c0%2c1%2c.581%2c7.69L14-129.255%2c12.745-128l-3.323-3.323a5.916%2c5.916%2c0%2c0%2c1-7.69-.581A5.914%2c5.914%2c0%2c0%2c1%2c1.732-140.268Zm7.528.836a4.732%2c4.732%2c0%2c0%2c0-6.691%2c0%2c4.732%2c4.732%2c0%2c0%2c0%2c0%2c6.691%2c4.732%2c4.732%2c0%2c0%2c0%2c6.691%2c0A4.732%2c4.732%2c0%2c0%2c0%2c9.26-139.431Z' transform='translate(0 142)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_273' data-name='%e8%b7%af%e5%be%84 273' class='cls-2' d='M-29-160.285H-9.285V-180H-29Z' transform='translate(29 180)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_loupe_kj' transform='translate(4 144)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_110' data-name='%e7%9f%a9%e5%bd%a2 110' class='cls-2' width='16' height='16' transform='translate(-4 -144)'/%3e %3cg id='%e7%bb%84_470' data-name='%e7%bb%84 470' class='cls-3' transform='translate(-3 -143)'%3e %3cg id='%e7%bb%84_469' data-name='%e7%bb%84 469' class='cls-4' transform='translate(-2.859 -3.746)'%3e %3cpath id='%e8%b7%af%e5%be%84_272' data-name='%e8%b7%af%e5%be%84 272' class='cls-5' d='M-5-147H9.986v14.986H-5Z' transform='translate(7.366 150.253)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_mouse_middle_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5%2c .cls-7 %7b fill: %23ff5770%3b %7d .cls-5 %7b opacity: 0%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.983v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.969-9.7H5.865V0A5.69%2c5.69%2c0%2c0%2c1%2c9.394%2c1.267%2c3.813%2c3.813%2c0%2c0%2c1%2c10.849%2c4.19V5.98Zm-5.864%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.455%2c1.267%2c5.692%2c5.692%2c0%2c0%2c1%2c4.985%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(-0.698 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3cpath id='%e8%b7%af%e5%be%84-3' data-name='%e8%b7%af%e5%be%84' class='cls-7' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_321' data-name='%e8%b7%af%e5%be%84 321' class='cls-1' d='M0%2c0H16V-16H0Z'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_323' data-name='%e8%b7%af%e5%be%84 323' class='cls-1' d='M5.344-14.625H1.875a.5.5%2c0%2c0%2c0-.5.5v3.5a.251.251%2c0%2c0%2c0%2c.25.25h.75a.251.251%2c0%2c0%2c0%2c.25-.25v-2.75H5.344a.251.251%2c0%2c0%2c0%2c.25-.25v-.75A.251.251%2c0%2c0%2c0%2c5.344-14.625Zm9.031%2c9h-.75a.251.251%2c0%2c0%2c0-.25.25v2.75H10.656a.251.251%2c0%2c0%2c0-.25.25v.75a.251.251%2c0%2c0%2c0%2c.25.25h3.469a.5.5%2c0%2c0%2c0%2c.5-.5v-3.5A.251.251%2c0%2c0%2c0%2c14.375-5.625Zm-9.031%2c3H2.625v-2.75a.251.251%2c0%2c0%2c0-.25-.25h-.75a.251.251%2c0%2c0%2c0-.25.25v3.5a.5.5%2c0%2c0%2c0%2c.5.5H5.344a.251.251%2c0%2c0%2c0%2c.25-.25v-.75A.251.251%2c0%2c0%2c0%2c5.344-2.625Zm8.781-12H10.656a.251.251%2c0%2c0%2c0-.25.25v.75a.251.251%2c0%2c0%2c0%2c.25.25h2.719v2.75a.251.251%2c0%2c0%2c0%2c.25.25h.75a.251.251%2c0%2c0%2c0%2c.25-.25v-3.5A.5.5%2c0%2c0%2c0%2c14.125-14.625Z'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_fullView_kj' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_567' data-name='%e7%bb%84 567' class='cls-2'%3e %3cpath id='%e8%b7%af%e5%be%84_320' data-name='%e8%b7%af%e5%be%84 320' class='cls-3' d='M-5-21H21V5H-5Z'/%3e %3c/g%3e %3cg id='%e7%bb%84_568' data-name='%e7%bb%84 568' class='cls-4'%3e %3cpath id='%e8%b7%af%e5%be%84_322' data-name='%e8%b7%af%e5%be%84 322' class='cls-5' d='M-3.625-19.625h23.25V3.625H-3.625Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_reload_kj' transform='translate(-1 -1.432)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16' transform='translate(1 1.432)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.917%2c1.955l-.9.735A6.615%2c6.615%2c0%2c0%2c0%2c6.72%2c0%2c6.86%2c6.86%2c0%2c0%2c0%2c0%2c6.992%2c6.864%2c6.864%2c0%2c0%2c0%2c6.72%2c14a6.745%2c6.745%2c0%2c0%2c0%2c6.315-4.6.135.135%2c0%2c0%2c0-.078-.172L12.05%2c8.9a.127.127%2c0%2c0%2c0-.162.08c-.029.083-.061.167-.094.248a5.722%2c5.722%2c0%2c0%2c1-1.18%2c1.823%2c5.511%2c5.511%2c0%2c0%2c1-1.749%2c1.23%2c5.32%2c5.32%2c0%2c0%2c1-4.283%2c0%2c5.459%2c5.459%2c0%2c0%2c1-1.749-1.23A5.722%2c5.722%2c0%2c0%2c1%2c1.653%2c9.23a5.979%2c5.979%2c0%2c0%2c1%2c0-4.463%2c5.722%2c5.722%2c0%2c0%2c1%2c1.18-1.823%2c5.511%2c5.511%2c0%2c0%2c1%2c1.749-1.23%2c5.32%2c5.32%2c0%2c0%2c1%2c4.283%2c0%2c5.459%2c5.459%2c0%2c0%2c1%2c1.749%2c1.23%2c5.678%2c5.678%2c0%2c0%2c1%2c.445.523L10.1%2c4.25a.135.135%2c0%2c0%2c0%2c.048.235l2.81.717a.13.13%2c0%2c0%2c0%2c.158-.128l.013-3.015a.129.129%2c0%2c0%2c0-.208-.1Z' transform='translate(2 2.432)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg xmlns='http://www.w3.org/2000/svg' class='icon' viewBox='0 0 1024 1024'%3e %3cpath d='M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_last_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M.163%2c6.632%2c7.735.1a.428.428%2c0%2c0%2c1%2c.7.368V13.53a.428.428%2c0%2c0%2c1-.7.368L.163%2c7.368A.5.5%2c0%2c0%2c1%2c.163%2c6.632Z' transform='translate(4 1)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M8.4-7.469a.381.381%2c0%2c0%2c1%2c.382.382h0V-2.15a.381.381%2c0%2c0%2c1-.382.382H2.1a.381.381%2c0%2c0%2c1-.382-.382h0V-7.087A.381.381%2c0%2c0%2c1%2c2.1-7.469H8.4Zm-.525.906H2.627v3.887H7.874Z' transform='translate(-1.721 7.469)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M16.812-10.1a4.782%2c4.782%2c0%2c0%2c0-1.839%2c3.751l-.763%2c0a.093.093%2c0%2c0%2c0-.073.15l1.2%2c1.526a.094.094%2c0%2c0%2c0%2c.147%2c0L16.694-6.2a.093.093%2c0%2c0%2c0-.073-.15H15.86a4.019%2c4.019%2c0%2c0%2c1%2c.03-.463%2c3.888%2c3.888%2c0%2c0%2c1%2c.461-1.419%2c3.9%2c3.9%2c0%2c0%2c1%2c1.005-1.173%2c3.884%2c3.884%2c0%2c0%2c1%2c1.381-.693%2c3.887%2c3.887%2c0%2c0%2c1%2c1.488-.106c.064.008.129.017.192.029v-.893A4.752%2c4.752%2c0%2c0%2c0%2c16.812-10.1Z' transform='translate(-14.118 11.118)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='c'%3e%3cpath d='M13.382-15.3A.381.381%2c0%2c0%2c1%2c13-15.682h0v-4.937A.381.381%2c0%2c0%2c1%2c13.382-21h6.3a.381.381%2c0%2c0%2c1%2c.382.382h0v4.937a.381.381%2c0%2c0%2c1-.382.382h-6.3Zm.525-.906h5.247v-3.887H13.906Z' transform='translate(-13 21)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='d'%3e%3cpath d='M4.583-12.907a4.782%2c4.782%2c0%2c0%2c0%2c1.839-3.751l.763%2c0a.093.093%2c0%2c0%2c0%2c.073-.15l-1.2-1.526a.094.094%2c0%2c0%2c0-.147%2c0L4.7-16.809a.093.093%2c0%2c0%2c0%2c.073.15h.762a4.017%2c4.017%2c0%2c0%2c1-.03.463%2c3.888%2c3.888%2c0%2c0%2c1-.461%2c1.419A3.9%2c3.9%2c0%2c0%2c1%2c4.039-13.6a3.884%2c3.884%2c0%2c0%2c1-1.381.693%2c3.887%2c3.887%2c0%2c0%2c1-1.488.106c-.064-.008-.129-.017-.192-.029v.893A4.752%2c4.752%2c0%2c0%2c0%2c4.583-12.907Z' transform='translate(-0.978 18.372)' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(0)'%3e%3crect width='16' height='16' transform='translate(0)' fill='none'/%3e%3cg transform='translate(0 0.294)'%3e%3cg transform='translate(8.374)' clip-path='url(%23a)'%3e%3cpath d='M-3.279-12.469H11.412V.863H-3.279Z' transform='translate(-0.537 8.653)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(0 2.005)' clip-path='url(%23b)'%3e%3cpath d='M9.118-2.007V-16.118H23.049V-2.007Z' transform='translate(-12.934 12.302)' fill='%23666'/%3e%3c/g%3e%3crect width='6' height='5' transform='translate(0.327 10.603)' fill='%23ccc'/%3e%3cg transform='translate(0.093 10.006)' clip-path='url(%23c)'%3e%3cpath d='M22.691-12.669H8V-26H22.691Z' transform='translate(-11.816 22.184)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(9.701 7.221)' clip-path='url(%23d)'%3e%3cpath d='M9.909-23.372V-9.261H-4.022V-23.372Z' transform='translate(0.206 19.556)' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M0%2c0H16V-16H0Z' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M13.958-11.417l-2.541-2.541a1%2c1%2c0%2c0%2c0-.708-.292H2.25a.5.5%2c0%2c0%2c0-.5.5v11.5a.5.5%2c0%2c0%2c0%2c.5.5h11.5a.5.5%2c0%2c0%2c0%2c.5-.5v-8.461A1%2c1%2c0%2c0%2c0%2c13.958-11.417ZM6-13.25h4v1.75H6ZM8-4.594a2.251%2c2.251%2c0%2c0%2c1-2.25-2.25A2.251%2c2.251%2c0%2c0%2c1%2c8-9.094a2.251%2c2.251%2c0%2c0%2c1%2c2.25%2c2.25A2.251%2c2.251%2c0%2c0%2c1%2c8-4.594Zm0-3.5a1.25%2c1.25%2c0%2c0%2c0-1.25%2c1.25A1.25%2c1.25%2c0%2c0%2c0%2c8-5.594a1.25%2c1.25%2c0%2c0%2c0%2c1.25-1.25A1.25%2c1.25%2c0%2c0%2c0%2c8-8.094Z' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(0 16)'%3e%3cg clip-path='url(%23a)'%3e%3cpath d='M-5-21H21V5H-5Z' fill='rgba(0%2c0%2c0%2c0)'/%3e%3c/g%3e%3cg clip-path='url(%23b)'%3e%3cpath d='M-3.25-19.25h22.5V3.25H-3.25Z' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineSpecial_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23ccc%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='%e8%b7%af%e5%be%84_607' data-name='%e8%b7%af%e5%be%84 607' class='cls-1' d='M12.564%2c4.659l-8.833%2c9.22h8.833Z' transform='translate(0 -1)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(5.604 11.916) rotate(-135)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(8.115 9.239) rotate(-135)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(10.625 6.561) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='7' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-5' width='1.5' height='8' transform='translate(4.75 13.5) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_492' data-name='%e8%b7%af%e5%be%84 492' class='cls-1' d='M0%2c2H16V-14H0Z' transform='translate(0 14)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_noDisplay' transform='translate(0 15)'%3e %3cg id='%e7%bb%84_817' data-name='%e7%bb%84 817' class='cls-3' transform='translate(0 -15)'%3e %3cpath id='%e8%b7%af%e5%be%84_491' data-name='%e8%b7%af%e5%be%84 491' class='cls-4' d='M-5-19H21V7H-5Z' transform='translate(0 15)'/%3e %3c/g%3e %3cpath id='%e5%87%8f%e5%8e%bb_1' data-name='%e5%87%8f%e5%8e%bb 1' class='cls-2' d='M7.114%2c9.861a7.321%2c7.321%2c0%2c0%2c1-3.965-1.19A8.865%2c8.865%2c0%2c0%2c1%2c.159%2c5.522a1.179%2c1.179%2c0%2c0%2c1%2c0-1.181%2c8.865%2c8.865%2c0%2c0%2c1%2c2.989-3.15c.1-.065.206-.128.311-.188l1.51%2c1.628a2.682%2c2.682%2c0%2c0%2c0-.27%2c1.2.42.42%2c0%2c0%2c0%2c.111.292.351.351%2c0%2c0%2c0%2c.267.119.367.367%2c0%2c0%2c0%2c.274-.119.414.414%2c0%2c0%2c0%2c.111-.292%2c1.928%2c1.928%2c0%2c0%2c1%2c.086-.582L9.065%2c7.047a3.241%2c3.241%2c0%2c0%2c1-1.949.623A3.325%2c3.325%2c0%2c0%2c1%2c4.6%2c6.545%2c3.852%2c3.852%2c0%2c0%2c1%2c3.556%2c3.836%2c3.98%2c3.98%2c0%2c0%2c1%2c4.04%2c1.91%2c8.1%2c8.1%2c0%2c0%2c0%2c1.015%2c4.931a8.574%2c8.574%2c0%2c0%2c0%2c2.647%2c2.8%2c6.217%2c6.217%2c0%2c0%2c0%2c3.451%2c1.04A6.16%2c6.16%2c0%2c0%2c0%2c10%2c8.057l.755.814A7.261%2c7.261%2c0%2c0%2c1%2c7.114%2c9.861Zm4.659-1.67h0l-.739-.8A8.7%2c8.7%2c0%2c0%2c0%2c13.21%2c4.931%2c8.088%2c8.088%2c0%2c0%2c0%2c10.185%2c1.91a3.981%2c3.981%2c0%2c0%2c1%2c.484%2c1.926%2c3.868%2c3.868%2c0%2c0%2c1-.751%2c2.357L6.295%2c2.286a1.512%2c1.512%2c0%2c0%2c1%2c.818-.23.357.357%2c0%2c0%2c0%2c.27-.12.409.409%2c0%2c0%2c0%2c.111-.292.417.417%2c0%2c0%2c0-.111-.292.355.355%2c0%2c0%2c0-.27-.12%2c2.2%2c2.2%2c0%2c0%2c0-1.368.46L4.6.46A7.088%2c7.088%2c0%2c0%2c1%2c7.114%2c0a7.321%2c7.321%2c0%2c0%2c1%2c3.965%2c1.19%2c8.85%2c8.85%2c0%2c0%2c1%2c2.989%2c3.15%2c1.179%2c1.179%2c0%2c0%2c1%2c0%2c1.181%2c8.821%2c8.821%2c0%2c0%2c1-2.295%2c2.669Z' transform='translate(1.088 -11.738)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_235' data-name='%e7%9f%a9%e5%bd%a2 235' class='cls-2' width='1.166' height='18.662' transform='matrix(0.719%2c -0.695%2c 0.695%2c 0.719%2c 0.745%2c -12.953)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: white%3b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_playPause' transform='translate(0.16 0.16)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16' transform='translate(-0.16 -0.16)'/%3e %3cg id='%e7%bb%84_1221' data-name='%e7%bb%84 1221' transform='translate(1.84 3.671)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M6.038%2c3.829.508.059A.32.32%2c0%2c0%2c0%2c0%2c.271V7.813a.32.32%2c0%2c0%2c0%2c.508.212l5.53-3.771A.249.249%2c0%2c0%2c0%2c6.038%2c3.829Z' transform='translate(1 0)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_400' data-name='%e7%9f%a9%e5%bd%a2 400' class='cls-2' width='1.524' height='7.618' rx='0.762' transform='translate(6.828 0.233)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_401' data-name='%e7%9f%a9%e5%bd%a2 401' class='cls-2' width='1.524' height='7.618' rx='0.762' transform='translate(9.718 0.233)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_forward_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1225' data-name='%e7%bb%84 1225' transform='translate(-0.347 0.145)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M6%2c3.807.505.058A.318.318%2c0%2c0%2c0%2c0%2c.27v7.5a.318.318%2c0%2c0%2c0%2c.505.211L6%2c4.229A.248.248%2c0%2c0%2c0%2c6%2c3.807Z' transform='translate(2.348 3.855)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M6%2c3.807.505.058A.318.318%2c0%2c0%2c0%2c0%2c.27v7.5a.318.318%2c0%2c0%2c0%2c.505.211L6%2c4.229A.248.248%2c0%2c0%2c0%2c6%2c3.807Z' transform='translate(7.824 3.855)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_back_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1224' data-name='%e7%bb%84 1224' transform='translate(-0.347 0.145)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M.118%2c3.807%2c5.615.058A.318.318%2c0%2c0%2c1%2c6.12.27v7.5a.318.318%2c0%2c0%2c1-.505.211L.118%2c4.229A.248.248%2c0%2c0%2c1%2c.118%2c3.807Z' transform='translate(7.824 3.855)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M.118%2c3.807%2c5.615.058A.318.318%2c0%2c0%2c1%2c6.12.27v7.5a.318.318%2c0%2c0%2c1-.505.211L.118%2c4.229A.248.248%2c0%2c0%2c1%2c.118%2c3.807Z' transform='translate(2.348 3.855)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_speed_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1223' data-name='%e7%bb%84 1223' transform='translate(-0.118 0.286)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_402' data-name='%e7%9f%a9%e5%bd%a2 402' class='cls-2' width='1.5' height='6' rx='0.75' transform='translate(8.118 12.043) rotate(90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_403' data-name='%e7%9f%a9%e5%bd%a2 403' class='cls-2' width='1.5' height='4' rx='0.75' transform='translate(6.118 9.043) rotate(90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_404' data-name='%e7%9f%a9%e5%bd%a2 404' class='cls-2' width='1.5' height='3' rx='0.75' transform='translate(5.118 6.043) rotate(90)'/%3e %3cpath id='%e5%80%8d%e9%80%9f' class='cls-2' d='M219.687%2c4.153H217.4L218.806.2a.267.267%2c0%2c0%2c0%2c.017-.084.278.278%2c0%2c0%2c0-.289-.269h-2.872a.28.28%2c0%2c0%2c0-.269.186l-2.312%2c6.454a.267.267%2c0%2c0%2c0-.017.084.278.278%2c0%2c0%2c0%2c.289.269h2.552l-.541%2c4.539c0%2c.008-.008.02-.008.029a.278.278%2c0%2c0%2c0%2c.289.269.285.285%2c0%2c0%2c0%2c.253-.157l4.042-6.986a.248.248%2c0%2c0%2c0%2c.029-.111.272.272%2c0%2c0%2c0-.281-.273Z' transform='translate(-206.065 1.862)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(512),o=n(513),a=n(514),r=n(147),l=n(110),c=n(111),s=n(70),u={name:"AnnotatePoint",icon:i,shortCut:[l]},d={name:"AnnotateInvalidPoint",icon:o,shortCut:["Ctrl",l]},h={name:"SelectPoint",icon:a,shortCut:[c],noticeInfo:"RightClick"},g={name:"DeletePoint",icon:r,shortCut:["Del"]},f=[u,d,h,g,s.revoke,s.restore,s.rotate,s.scale,s.backward,s.forward,s.dargWithRightClick,s.tabChangeSelected,s.tabReverseChangeSelected];t.default=f,t.deletePoint=g,t.drawInvalidPoint=d,t.drawPoint=u,t.selectPoint=h},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_point_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3ccircle id='%e6%a4%ad%e5%9c%86%e5%bd%a2' class='cls-2' cx='2.392' cy='2.392' r='2.392' transform='translate(4.811 4.811)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_pointNull_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d .cls-3%2c .cls-5 %7b fill: none%3b %7d .cls-3 %7b stroke: %23666%3b %7d .cls-4 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3ccircle id='%e6%a4%ad%e5%9c%86%e5%bd%a2' class='cls-2' cx='2.392' cy='2.392' r='2.392' transform='translate(4.811 4.811)'/%3e %3c/g%3e %3cg id='%e7%9f%a9%e5%bd%a2_92' data-name='%e7%9f%a9%e5%bd%a2 92' class='cls-3' transform='translate(2.757 4.089) rotate(-45)'%3e %3crect class='cls-4' width='1.6' height='13'/%3e %3crect class='cls-5' x='0.5' y='0.5' width='0.6' height='12'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_pointActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_3' data-name='%e5%87%8f%e5%8e%bb 3' class='cls-2' d='M1506.068%2c9508.987a2.393%2c2.393%2c0%2c1%2c1%2c2.391-2.394l-1.919%2c0v2.345A2.436%2c2.436%2c0%2c0%2c1%2c1506.068%2c9508.987Z' transform='translate(-1498.865 -9499.393)'/%3e %3c/g%3e %3cpath id='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd_4' data-name='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd 4' class='cls-2' d='M2.628%2c0%2c5.256%2c5.256%2c2.632%2c4.129%2c0%2c5.256Z' transform='translate(7.139 9.595) rotate(-30)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16.707' height='16' viewBox='0 0 16.707 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-1%2c .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d .cls-1%2c .cls-3 %7b stroke-miterlimit: 10%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b stroke: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_polygonNull_kj' transform='translate(0 -2)'%3e %3cg id='icon_line' transform='translate(10)'%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-1' width='1.499' height='15.5' transform='translate(-6.021 6.04) rotate(-45)'/%3e %3c/g%3e %3cg id='icon_polygonNull_kj-2' data-name='icon_polygonNull_kj' transform='translate(0 2)'%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_10' data-name='%e5%87%8f%e5%8e%bb 10' class='cls-4' d='M18500.451%2c2801h-6v-1.5h4.514l1.488%2c1.487%2c0%2c.012Zm-5.148-1.584h0l-1.059-1.058%2c1.783-1.789%2c1.061%2c1.059-1.785%2c1.788Zm7.895-2.75%2c0%2c0-1.5-1.5V2792.5h1.5v4.166Zm-2.578-2.579h0l-1.061-1.06%2c1.047-1.051%2c1.064%2c1.059-1.051%2c1.052Z' transform='translate(-18489.699 -2787.496)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-3 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-4' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-4' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonChange_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23ccc%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='%e5%87%8f%e5%8e%bb_12' data-name='%e5%87%8f%e5%8e%bb 12' class='cls-1' d='M18493%2c2716.574l0%2c0%2c8.451-8.572.242%2c4.933h-3.889v3.513l-4.8.129Z' transform='translate(-18489.408 -2704.132)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_11' data-name='%e5%87%8f%e5%8e%bb 11' class='cls-5' d='M18496.65%2c2716.5H18493V2715h3.65v1.5Zm5.1-4.7h-1.5V2708h1.5v3.8Z' transform='translate(-18488.25 -2703)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonDel_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonInsert_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(9.222 9.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-4' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-5' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect opacity='0.01' width='16' height='16' fill='black'/%3e%3crect x='13.5' y='9.49963' width='7' height='7' transform='rotate(180 13.5 9.49963)' fill='%23CCCCCC' stroke='%23666666'/%3e%3crect x='9.5' y='13.4996' width='7' height='7' transform='rotate(180 9.5 13.4996)' fill='%23CCCCCC' stroke='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect opacity='0.01' width='16' height='16' fill='black'/%3e%3cpath d='M10.002 9.52532H9.50201V10.0253V13.5406L2.50202 13.5406L2.50202 6.51493L6.00397 6.51493H6.50397V6.01493L6.50397 2.49963L13.5001 2.49963L13.5001 9.52532H10.002Z' fill='%23CCCCCC' stroke='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(266),o=n(110),a=n(523),r=n(524),l=n(525),c=n(111),s=n(526),u=n(147),d=n(267),h=n(527),g=n(528),f=n(268),v=n(70),p={name:"AnnotateLine",icon:i,shortCut:[o]},b={name:"AnnotateInvalidLine",icon:a,shortCut:["Ctrl",o]},m={name:"HorizontalOrVertical",icon:r,shortCut:["Shift",o]},y={name:"SelectLine",icon:l,shortCut:[c]},C={name:"ToggleLineEffectiveness",icon:s,shortCut:["F"]},I={name:"DeleteLine",icon:u,noticeInfo:"SelectAndDoubleClick",shortCut:[c]},x={name:"ContinueToLabel",icon:d,noticeInfo:"Select",shortCut:["Space"]},w={name:"InsertPoint",icon:h,noticeInfo:"ClickOnLine",shortCut:[o]},k={name:"DeletePoint",icon:g,noticeInfo:"DblClickOnPoint",shortCut:[c]},S={name:"StopAdsorption",icon:f,noticeInfo:"Press",shortCut:["Alt"]},P=[p,b,m,y,C,I,x,v.changeSpecialLine,w,k,S,v.revoke,v.restore,v.rotate,v.scale,v.backward,v.forward,v.setValid,v.dargWithRightClick,v.dargWithLeftClick,v.hidden,v.tabChangeSelected,v.tabReverseChangeSelected];t.changeLineAttribute=C,t.default=P,t.deleteLine=I,t.deletePoint=k,t.horizontalLine=m,t.insertPoint=w,t.invalidLine=b,t.keepLine=x,t.line=p,t.selectLine=y,t.suspendAbsorption=S},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineNull_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b stroke: rgba(0%2c0%2c0%2c0)%3b stroke-miterlimit: 10%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_6' data-name='%e5%87%8f%e5%8e%bb 6' class='cls-2' d='M14710.063%2c1373.254h0l-1.063-1.059%2c2.184-2.182%2c1.062%2c1.061-2.18%2c2.181Zm5.009-5.009h0l-1.061-1.06%2c2.417-2.415%2c1.06%2c1.06-2.414%2c2.415Z' transform='translate(-14705.021 -1360.788)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.499' height='7.5' transform='translate(4.979 6.04) rotate(-45)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_straightLine_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b stroke: rgba(0%2c0%2c0%2c0)%3b stroke-miterlimit: 10%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_955' data-name='%e7%bb%84 955' transform='translate(-0.721)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(12.721 9.721) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(1.721 9.723) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.5' height='10.5' transform='translate(3.471 9.002) rotate(-90)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: %23666%3b %7d .cls-4 %7b fill: white%3b stroke: %23707070%3b %7d .cls-5 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%9f%a9%e5%bd%a2_254' data-name='%e7%9f%a9%e5%bd%a2 254' class='cls-2' transform='translate(1.22 1.22)'%3e %3crect class='cls-5' width='14.4' height='14.4'/%3e %3crect class='cls-1' x='0.5' y='0.5' width='13.4' height='13.4'/%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' width='1.5' height='10.5' transform='translate(5.04 12.465) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-4' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-4' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineChange_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: %23666%3b %7d .cls-4 %7b clip-path: url(%23clip-path)%3b %7d .cls-5 %7b fill: white%3b stroke: %23707070%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_399' data-name='%e8%b7%af%e5%be%84 399' class='cls-1' d='M2.139-17.789H7.33L8-17.12H3.813l1.172%2c1.34h-1ZM7.5-18.627H2.306l-.67-.669H5.823l-1.172-1.34h1L7.5-18.627Z' transform='translate(-1.636 20.636)'/%3e %3c/clipPath%3e %3c/defs%3e %3cpath id='%e8%b7%af%e5%be%84_599' data-name='%e8%b7%af%e5%be%84 599' class='cls-2' d='M9.937%2c14.746h-7.9V1.654' transform='translate(-0.316)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' width='1.5' height='10.5' transform='translate(5.04 12.465) rotate(-135)'/%3e %3cpath id='%e8%b7%af%e5%be%84_598' data-name='%e8%b7%af%e5%be%84 598' class='cls-2' d='M2.035%2c1.654H15.557V9.5' transform='translate(-0.815)'/%3e %3cg id='%e7%bb%84_965' data-name='%e7%bb%84 965' transform='translate(8 31)'%3e %3cg id='%e7%bb%84_646' data-name='%e7%bb%84 646' class='cls-4' transform='translate(1.636 -20.636)'%3e %3cpath id='%e8%b7%af%e5%be%84_398' data-name='%e8%b7%af%e5%be%84 398' class='cls-3' d='M-3.364-25.636H6.07v7.927H-3.364Z' transform='translate(1.829 24.101)'/%3e %3c/g%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-5' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-5' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineInsert_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='4' height='4' transform='translate(10.222 10.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineDel_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: white%3b %7d .cls-3%2c .cls-4 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-5 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d .cls-6 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3cg id='%e7%9f%a9%e5%bd%a2_273' data-name='%e7%9f%a9%e5%bd%a2 273' class='cls-1' transform='translate(1.221 1.22)'%3e %3crect class='cls-6' width='14' height='14'/%3e %3crect class='cls-2' x='0.5' y='0.5' width='13' height='13'/%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-4' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-5' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_317' data-name='%e8%b7%af%e5%be%84 317' class='cls-1' d='M0%2c0H16V-16H0Z'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_319' data-name='%e8%b7%af%e5%be%84 319' class='cls-1' d='M14.656-8.831l-.462-4.884a.531.531%2c0%2c0%2c0-.478-.478l-4.884-.462H8.825a.16.16%2c0%2c0%2c0-.119.045L1.389-7.294a.156.156%2c0%2c0%2c0%2c0%2c.22L7.073-1.389a.155.155%2c0%2c0%2c0%2c.111.045A.155.155%2c0%2c0%2c0%2c7.3-1.389l7.317-7.317A.165.165%2c0%2c0%2c0%2c14.656-8.831ZM10.922-9.953a1%2c1%2c0%2c0%2c1-1-1%2c1%2c1%2c0%2c0%2c1%2c1-1%2c1%2c1%2c0%2c0%2c1%2c1%2c1A1%2c1%2c0%2c0%2c1%2c10.922-9.953Z'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_tag_kj' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_561' data-name='%e7%bb%84 561' class='cls-2'%3e %3cpath id='%e8%b7%af%e5%be%84_316' data-name='%e8%b7%af%e5%be%84 316' class='cls-3' d='M-5-21H21V5H-5Z'/%3e %3c/g%3e %3cg id='%e7%bb%84_562' data-name='%e7%bb%84 562' class='cls-4'%3e %3cpath id='%e8%b7%af%e5%be%84_318' data-name='%e8%b7%af%e5%be%84 318' class='cls-5' d='M-3.657-19.656H19.657V3.656H-3.657Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(70),o=[i.saveResult,i.scale,i.rotate,i.fullScreen,i.setValid,i.backward,i.forward,i.dargWithRightClick,i.dargWithLeftClick];e.exports=o},function(e,t,n){"use strict";var i=n(44),o=n(70),a=n(269);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(i),c=l.default.cloneDeep(o.forward),s=l.default.cloneDeep(o.backward);c.name="NextFile",s.name="PreviousFile";var u=[o.saveResult,a.tagInSingleImg,o.playPause,o.speed,o.rewind,o.forwardForward,o.fullScreen,s,c];e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(70),o=n(263),a=n(110),r=n(111),l=n(533),c=n(534),s=n(535),u=n(536),d=n(537),h=n(538),g=n(539),f=n(540),v=n(264),p=n(147),b=n(258),m=n(259),y=n(541),C=n(542),I=n(0),x=n(45),w=n(265);function k(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var S=k(I),P={name:"PointThickness",icon:S.default.createElement("span",{style:{display:" inline-block",width:14,height:14,borderRadius:"50%",border:"1px solid"}}),shortCut:["+","-"],linkSymbol:""},L={name:"RotateAroundCenterPoint",icon:S.default.createElement(x.ReloadOutlined,null),shortCut:[a],noticeInfo:"DragOperation"},A={name:"PointCloudViewTranslate",icon:o,shortCut:[r],noticeInfo:"Drag"},O={name:"TopViewTranslate",icon:o,shortCut:[r]},T={name:"ChangePointCloudValid",icon:l,shortCut:["V"]},E={name:"CopyBox",icon:c,shortCut:["Ctrl","C"]},D={name:"PasteBox",icon:u,shortCut:["Ctrl","V"]},M={name:"RotateLeft",icon:S.default.createElement(x.RotateLeftOutlined,null),shortCut:["Q"]},N={name:"RotateRight",icon:S.default.createElement(x.RotateRightOutlined,null),shortCut:["E"]},R={name:"PreviousBox",icon:d,shortCut:["Shift","Tab"]},B={name:"NextBox",icon:s,shortCut:["Tab"]},j={name:"Rotate180",icon:h,shortCut:["G"],noticeInfo:"SelectedStatus"},_={name:"CopyPrevPage",icon:c,shortCut:["Alt","C"]},H={name:"ChangeBoxValid",icon:v,shortCut:["F"],noticeInfo:"SelectedStatus"},V={name:"MultiSelect",icon:f,shortCut:["Ctrl",r]},F={name:"SelectAllBox",icon:g,shortCut:["Ctrl","A"]},Z={name:"Delete",icon:p,shortCut:["Del"],noticeInfo:"SelectedStatus"},z={name:"LassoSelector",icon:b,shortCut:["H"],noticeInfo:"SelectorMsg"},U={name:"CircleSelector",icon:m,shortCut:["J"],noticeInfo:"SelectorMsg"},G={name:"PointCloudViewTranslate",icon:o,shortCut:["space",r]},W={name:"AddPoint",icon:y,shortCut:["U"]},K={name:"DeletePoint",icon:C,shortCut:["I"]},Y=[{name:"GeneralOperation"},i.backward,i.forward,P,i.scale,L,A,O,T,{name:"RectPattern"},E,D,M,N,R,B,j,_,H,Z,V,F,i.fullScreen],X=[{name:"GeneralOperation"},i.backward,i.forward,P,i.scale,L,A,O,T,{name:"PolygonPattern"},w.polygon,w.invalidPolygon,w.selectedPolygon,w.changePolygonAttribute,w.deletePolygon,w.insertPolygonPoint,w.deletePolygonPoint],J=[i.backward,i.forward,L,G,z,U,W,K];t.default=Y,t.pointCloudShortCutTable_POLYGON=X,t.pointCloudShortCutTable_SEGMENT=J},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect x='4.81982' y='12.3096' width='1.49968' height='10.4997' transform='rotate(-135 4.81982 12.3096)' fill='%23666666'/%3e%3cg clip-path='url(%23clip0_90_7913)'%3e%3cg clip-path='url(%23clip1_90_7913)'%3e%3cmask id='mask0_90_7913' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='9' y='10' width='7' height='6'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.91842 13.0569L15.1098 13.0582L15.7797 13.7267H11.5931L12.7653 15.0664H11.7605L9.91842 13.0569ZM15.2773 12.2195L10.0859 12.2182L9.41602 11.5497H13.6026L12.4304 10.21H13.4351L15.2772 12.2195H15.2773Z' fill='white'/%3e%3c/mask%3e%3cg mask='url(%23mask0_90_7913)'%3e%3cpath d='M7.88104 8.6748H17.3149V16.6014H7.88104V8.6748Z' fill='%23666666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3crect x='14.0015' y='5.06738' width='2.99984' height='2.99984' transform='rotate(180 14.0015 5.06738)' fill='white' stroke='%23707070'/%3e%3crect x='5.00146' y='14.0674' width='2.99984' height='2.99984' transform='rotate(180 5.00146 14.0674)' fill='white' stroke='%23707070'/%3e%3cdefs%3e%3cclipPath id='clip0_90_7913'%3e%3crect width='6.36365' height='4.85646' fill='white' transform='translate(9.41602 10.21)'/%3e%3c/clipPath%3e%3cclipPath id='clip1_90_7913'%3e%3crect width='6.36365' height='4.85646' fill='white' transform='translate(9.41602 10.21)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M10.7292 4.8335H2.60419C2.08642 4.8335 1.66669 5.25323 1.66669 5.771V13.896C1.66669 14.4138 2.08642 14.8335 2.60419 14.8335H10.7292C11.247 14.8335 11.6667 14.4138 11.6667 13.896V5.771C11.6667 5.25323 11.247 4.8335 10.7292 4.8335Z' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M7.63151 12.7676L1.10109 5.19533C0.858489 4.91296 1.07723 4.49935 1.46897 4.49935H14.5298C14.9215 4.49935 15.1403 4.91296 14.8977 5.19533L8.36727 12.7676C8.18035 12.9844 7.81843 12.9844 7.6315 12.7676H7.63151Z' fill='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' fill='%23CCCCCC'/%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M10.7292 4.8335H2.60419C2.08642 4.8335 1.66669 5.25323 1.66669 5.771V13.896C1.66669 14.4138 2.08642 14.8335 2.60419 14.8335H10.7292C11.247 14.8335 11.6667 14.4138 11.6667 13.896V5.771C11.6667 5.25323 11.247 4.8335 10.7292 4.8335Z' fill='%23CCCCCC' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M7.63151 4.23239L1.10109 11.8047C0.858489 12.087 1.07723 12.5006 1.46897 12.5006H14.5298C14.9215 12.5006 15.1403 12.087 14.8977 11.8047L8.36727 4.23239C8.18035 4.01564 7.81843 4.01564 7.6315 4.23239H7.63151Z' fill='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M14.0606 2.74219V5.16642H11.6364' stroke='%23666666' stroke-width='0.8' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M14.6667 8.50016C14.6667 12.1821 11.6819 15.1668 8.00002 15.1668C4.31812 15.1668 1.33335 12.1821 1.33335 8.50016C1.33335 4.81826 4.31812 1.8335 8.00002 1.8335C10.4674 1.8335 12.6217 3.17387 13.7744 5.1662' stroke='%23666666' stroke-width='1.3' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M4.219 11V6.016H3.281L2.518 6.611V7.661L3.281 7.115V11H4.219ZM7.6968 9.572C7.6968 9.299 7.6758 9.012 7.5638 8.781C7.4938 8.641 7.3958 8.529 7.2628 8.424C7.3818 8.326 7.4658 8.221 7.5288 8.095C7.6408 7.857 7.6618 7.612 7.6618 7.353C7.6618 6.926 7.5918 6.562 7.3048 6.275C7.0878 6.058 6.7798 5.96 6.4438 5.96C6.1078 5.96 5.8138 6.058 5.5968 6.275C5.3098 6.562 5.2398 6.926 5.2398 7.353C5.2398 7.612 5.2608 7.857 5.3728 8.095C5.4358 8.221 5.5198 8.326 5.6388 8.424C5.5058 8.529 5.4078 8.641 5.3378 8.781C5.2258 9.012 5.2048 9.299 5.2048 9.572C5.2048 10.041 5.2328 10.412 5.5618 10.734C5.7858 10.951 6.1148 11.056 6.4508 11.056C6.7868 11.056 7.1158 10.951 7.3398 10.734C7.6688 10.412 7.6968 10.041 7.6968 9.572ZM6.7588 9.523C6.7588 9.656 6.7728 9.978 6.6748 10.111C6.6258 10.174 6.5418 10.216 6.4508 10.216C6.3598 10.216 6.2758 10.181 6.2268 10.111C6.1288 9.971 6.1428 9.656 6.1428 9.523C6.1428 9.39 6.1218 9.061 6.2268 8.921C6.2758 8.851 6.3598 8.816 6.4508 8.816C6.5418 8.816 6.6188 8.851 6.6748 8.921C6.7798 9.061 6.7588 9.39 6.7588 9.523ZM6.7238 7.402C6.7238 7.528 6.7518 7.843 6.6258 7.969C6.5838 8.011 6.5208 8.032 6.4508 8.032C6.3808 8.032 6.3248 8.011 6.2758 7.969C6.1428 7.85 6.1778 7.528 6.1778 7.402C6.1778 7.283 6.1568 7.003 6.2548 6.884C6.3038 6.828 6.3738 6.8 6.4508 6.8C6.5278 6.8 6.5978 6.828 6.6468 6.884C6.7448 7.003 6.7238 7.283 6.7238 7.402ZM10.6496 9.838V7.178C10.6496 6.744 10.5306 6.492 10.3066 6.282C10.0826 6.065 9.75359 5.96 9.41759 5.96C9.08159 5.96 8.75259 6.065 8.52859 6.282C8.30459 6.492 8.18559 6.744 8.18559 7.178V9.838C8.18559 10.272 8.30459 10.524 8.52859 10.734C8.75259 10.951 9.08159 11.056 9.41759 11.056C9.75359 11.056 10.0826 10.951 10.3066 10.734C10.5306 10.524 10.6496 10.272 10.6496 9.838ZM9.71159 9.873C9.71159 10.104 9.58559 10.216 9.41759 10.216C9.24959 10.216 9.12359 10.104 9.12359 9.873V7.143C9.12359 6.912 9.24959 6.8 9.41759 6.8C9.58559 6.8 9.71159 6.912 9.71159 7.143V9.873ZM13.6304 7.129C13.6304 6.443 13.0774 5.89 12.3914 5.89C11.7054 5.89 11.1524 6.443 11.1524 7.129C11.1524 7.815 11.7054 8.368 12.3914 8.368C13.0774 8.368 13.6304 7.815 13.6304 7.129ZM12.8044 7.129C12.8044 7.36 12.6224 7.542 12.3914 7.542C12.1604 7.542 11.9784 7.36 11.9784 7.129C11.9784 6.898 12.1604 6.716 12.3914 6.716C12.6224 6.716 12.8044 6.898 12.8044 7.129Z' fill='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.3334 2.1665H2.66669C2.1144 2.1665 1.66669 2.61422 1.66669 3.1665V11.8332C1.66669 12.3855 2.1144 12.8332 2.66669 12.8332H11.3334C11.8857 12.8332 12.3334 12.3855 12.3334 11.8332V3.1665C12.3334 2.61422 11.8857 2.1665 11.3334 2.1665Z' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3cpath d='M14.6666 4.83398V14.5C14.6666 14.8682 14.3681 15.1667 13.9999 15.1667H4.33447' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M4.33331 7.32861L6.33321 9.17031L9.66665 5.73975' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M14 7.16667V13.5C14 14.0523 13.5523 14.5 13 14.5H3C2.44772 14.5 2 14.0523 2 13.5V3.5C2 2.94772 2.44772 2.5 3 2.5H10' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M5.33331 7.16683L8.66665 9.8335L13.6666 2.8335' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='9.201172' height='9.200073' viewBox='0 0 9.20117 9.20007' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cpath id='Exclude' d='M8.20117 5.59998L5.60156 5.59998L5.60156 8.20007C5.60156 8.75232 5.15234 9.20007 4.60156 9.20007C4.04883 9.20007 3.60156 8.75232 3.60156 8.20007L3.60156 5.59998L1 5.59998C0.449219 5.59998 0 5.15234 0 4.59998C0 4.04773 0.449219 3.59998 1 3.59998L3.60156 3.59998L3.60156 1C3.60156 0.447754 4.04883 0 4.60156 0C5.15234 0 5.60156 0.447754 5.60156 1L5.60156 3.59998L8.20117 3.59998C8.75391 3.59998 9.20117 4.04773 9.20117 4.59998C9.20117 5.15234 8.75391 5.59998 8.20117 5.59998Z' fill-rule='evenodd' fill='%23999999'/%3e %3cdefs/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='10.000000' height='2.000000' viewBox='0 0 10 2' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cpath id='%e6%b7%bb%e5%8a%a0' d='M4.44434 0L5.55566 0L9.44434 0C9.75146 0 10 0.447754 10 1C10 1.55225 9.75146 2 9.44434 2L5.55566 2L4.44434 2L0.555664 2C0.248535 2 0 1.55225 0 1C0 0.447754 0.248535 0 0.555664 0L4.44434 0Z' fill-rule='evenodd' fill='%23464A53'/%3e %3cdefs/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(70),o=[i.scale,i.saveResult,i.restore,i.revoke,i.rotate,i.backward,i.forward,i.dargWithRightClick,i.setValid];e.exports=o},function(e,t,n){"use strict";var i=n(70),o=n(261),a=[i.backward,i.forward,o.drawRect,o.drawInvalidRect,i.dargWithRightClick,o.selectRect,o.deleteRect,o.changeValid,o.changeValidByClick,i.scale,i.saveResult,i.restore,i.revoke,i.rotate,i.setValid,i.hidden];e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(70),o={name:"Save",icon:n(262),shortCut:["Ctrl","Enter"]},a=[i.backward,i.forward,o];t.default=a,t.forwardWithEnter=o},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(35),r=n(25),l=n(26),c=n(30);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(o),d=a.connect((function(e){var t;return{toolInstance:null==(t=e.annotation)?void 0:t.toolInstance}}),null,null,{context:c.LabelBeeContext})((function(e){var t=e.toolInstance,n=o.useState(0),a=i(n,2),c=(a[0],a[1]),s=l.useTranslation().t;return o.useEffect((function(){t&&t.singleOn("hiddenChange",(function(){c((function(e){return e+1}))}))}),[t]),t&&t.isHidden?u.default.createElement("span",null,s("HideDrawnAnnotation"),u.default.createElement(r.Divider,{type:"vertical",style:{background:"rgba(153, 153, 153, 1)",height:"16px"}})):null}));e.exports=d},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(35),r=n(25),l=n(26),c=n(30),s=n(36),u=n(17);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(o),g=a.connect((function(e){var t;return{toolInstance:null==(t=e.annotation)?void 0:t.toolInstance}}),null,null,{context:c.LabelBeeContext})((function(e){var t,n,a=e.toolInstance,c=o.useState(0),d=i(c,2),g=(d[0],d[1]),f=o.useContext(s.PointCloudContext),v=f.pointCloudBoxList,p=f.segmentation,b=f.globalPattern,m=l.useTranslation().t;if(o.useEffect((function(){a&&a.singleOn("updatePageNumber",(function(){g((function(e){return e+1}))}))}),[a]),!a)return null;var y=null!=(n=null==(t=null==a?void 0:a.currentPageResult)?void 0:t.length)?n:b===u.EPointCloudPattern.Detection?v.length:p.length;return y>=0?h.default.createElement("span",null,"".concat(m("ItemsOfThisPage"),": ").concat(y),h.default.createElement(r.Divider,{type:"vertical",style:{background:"rgba(153, 153, 153, 1)",height:"16px"}})):null}));e.exports=g},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_adapt' transform='translate(-1021.825 -996)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_200' data-name='%e7%9f%a9%e5%bd%a2 200' class='cls-1' width='16' height='16' transform='translate(1021.825 996)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_191' data-name='%e7%9f%a9%e5%bd%a2 191' class='cls-2' width='8' height='7' transform='translate(1025.825 1000.167)'/%3e %3cpath id='%e8%81%94%e5%90%88_5' data-name='%e8%81%94%e5%90%88 5' class='cls-2' d='M3%2c4V1H0V0H4V4Z' transform='translate(1033.825 997)'/%3e %3cpath id='%e8%81%94%e5%90%88_7' data-name='%e8%81%94%e5%90%88 7' class='cls-2' d='M0%2c4V3H3V0H4V4Z' transform='translate(1025.825 1001.001) rotate(180)'/%3e %3cpath id='%e8%81%94%e5%90%88_8' data-name='%e8%81%94%e5%90%88 8' class='cls-2' d='M3%2c4V1H0V0H4V4Z' transform='translate(1025.825 1010.335) rotate(180)'/%3e %3cpath id='%e8%81%94%e5%90%88_6' data-name='%e8%81%94%e5%90%88 6' class='cls-2' d='M0%2c4V0H4V1H1V4Z' transform='translate(1037.824 1010.335) rotate(180)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12 4.16699H4V11.167H12V4.16699Z' fill='%23707070'/%3e%3cpath d='M15 5V2H12V1H16V5H15Z' fill='%23707070'/%3e%3cpath d='M4 1.00098V2.00098L1 2.00098L1 5.00098L0 5.00098L0 1.00098L4 1.00098Z' fill='%23707070'/%3e%3cpath d='M1 10.335L1 13.335H4V14.335H0L0 10.335H1Z' fill='%23707070'/%3e%3cpath d='M16 10.335V14.335H12V13.335H15V10.335H16Z' fill='%23707070'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(35),r=n(551),l=n(30);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=c(o),u=a.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:l.LabelBeeContext})((function(e){var t,n=e.toolInstance,a=e.zoom,l=r(0),c=i(l,2)[1];o.useEffect((function(){var e=function(){c((function(e){return e+1}))};return n&&n.on("renderZoom",e),function(){n&&n.unbind("renderZoom",e)}}),[n]);var u=null!=(t=null!=a?a:null==n?void 0:n.zoom)?t:1;return s.default.createElement("span",{className:"zoomValue"},(100*u).toFixed(1),"%")}));e.exports=u},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(552);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(o);e.exports=function(e){var t=a(),n=l.default.useState(e),o=i(n,2),r=o[0],c=o[1];return[r,l.default.useCallback((function(e){t.current||c(e)}),[])]}},function(e,t,n){"use strict";var i=n(0);e.exports=function(){var e=i.useRef(!1);return i.useEffect((function(){return e.current=!1,function(){e.current=!0}}),[]),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(42),o=n(82);t.stepConfigSelector=function(e){var t,n=e.annotation,a=n.stepList,r=n.step;return i.jsonParser(null==(t=o.getStepConfig(a,r))?void 0:t.config)}},function(e,t,n){"use strict";var i=n(28).default,o=n(41),a=n(95),r=n(49),l=n(45),c=n(17),s=n(25),u=n(5),d=n(44),h=n(0),g=n(26),f=n(35),v=n(30),p=n(65),b=n(555),m=n(556),y=n(565),C=n(274),I=n(569);function x(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var w=x(u),k=x(h),S=function(e){var t=e.disabled,n=e.imgList,i=g.useTranslation().t;return k.default.createElement(s.Button,{type:"primary",style:{marginLeft:10},onClick:function(){var e=p.store,t=e.dispatch,i=e.getState;n[0]?t(r.ToNextStep(0)):r.loadImgList(t,i,0).then((function(e){e&&t(r.ToNextStep(0))}))},disabled:t},i("NextStep"))},P=function(e){var t,n=e.step,i=e.stepProgress,o=e.stepList,a=e.imgList,r=g.useTranslation().t,l=null==(t=d.last(o))?void 0:t.step;if(o.length<2||n===l)return null;var c=i<1;return c?k.default.createElement(s.Tooltip,{title:r("StepNotFinishedNotify")},k.default.createElement("span",null,k.default.createElement(S,{disabled:c,imgList:a}))):k.default.createElement(S,{disabled:c,imgList:a})},L=f.connect((function(e){var t;return{imgList:e.annotation.imgList,annotationEngine:e.annotation.annotationEngine,stepProgress:e.annotation.stepProgress,toolName:null==(t=e.annotation.stepList[e.annotation.step-1])?void 0:t.tool,stepList:e.annotation.stepList,stepInfo:e.annotation.stepList[e.annotation.step-1],step:e.annotation.step}}),null,null,{context:v.LabelBeeContext})((function(e){var t,n=e.goBack,s=e.exportData,u=e.header,d=e.headerName,g=e.imgList,f=e.stepProgress,p=e.stepInfo,x=e.stepList,S=e.step,L=e.annotationEngine,A=e.hasLangNode,O=e.hasHeaderOption,T=e.hasPredictTrackingIcon,E=v.useDispatch(),D=h.useReducer((function(e){return e+1}),0),M=i(D,2)[1],N=h.useRef(null),R=a(N),B=k.default.createElement(b,{exportData:s}),j=function(e){c.i18n.changeLanguage(e),null==L||L.setLang(e),M()},_=c.i18n.language,H=null!=(t=null==R?void 0:R.width)?t:window.innerWidth,V=k.default.createElement(l.LeftOutlined,{className:"".concat(o.prefix,"-header__icon"),onClick:function(){E(r.ToSubmitFileData(o.ESubmitType.Quit)),n&&n(g)}}),F=d?k.default.createElement("span",{className:"".concat(o.prefix,"-header__name")},d):"",Z=x.length>1&&k.default.createElement(k.default.Fragment,null,k.default.createElement(y,{stepProgress:f}),k.default.createElement(P,{step:S,stepProgress:f,stepList:x,imgList:g})),z=O?k.default.createElement(m,{stepInfo:p}):null,U=I,G=k.default.createElement("div",{className:"".concat(o.prefix,"-header__lang")},k.default.createElement("span",{className:"".concat(o.prefix,"-langCN ").concat("cn"===_?"active":""),onClick:function(){return j("cn")}},"\u4e2d\u6587")," / ",k.default.createElement("span",{className:"".concat(o.prefix,"-langEN ").concat("en"===_?"active":""),onClick:function(){return j("en")}},"En")),W=k.default.createElement(k.default.Fragment,null,T&&k.default.createElement(C,null),A&&G);return u?"function"===typeof u?k.default.createElement("div",{className:w.default("".concat(o.prefix,"-header")),ref:N},k.default.createElement("div",{className:"".concat(o.prefix,"-header__title")},u({backNode:V,headerNameNode:F,stepListNode:Z,headerOptionNode:z,langNode:W,PointCloudSwitchPattern:U}))):u:k.default.createElement("div",{className:w.default("".concat(o.prefix,"-header")),ref:N},k.default.createElement("div",{className:"".concat(o.prefix,"-header__title")},V,F,Z,B,k.default.createElement("div",{id:"operationNode",className:"".concat(o.prefix,"-header__operationNode"),style:{left:H/2-87}},z),k.default.createElement("div",{className:"".concat(o.prefix,"-header__titlePlacement")}),k.default.createElement(I,null),W))}));e.exports=L},function(e,t,n){"use strict";var i=n(0),o=n(25),a=n(35),r=n(73),l=n(41),c=n(26),s=n(30);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var d=u(i),h=a.connect((function(e){return{toolInstance:e.annotation.toolInstance,imgList:e.annotation.imgList,onSubmit:e.annotation.onSubmit}}),null,null,{context:s.LabelBeeContext})((function(e){var t=e.imgList,n=e.dispatch,i=(e.onSubmit,e.exportData),a=c.useTranslation().t;if(!i)return null;return d.default.createElement(o.Button,{style:{marginLeft:20},onClick:function(){n({type:r.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA,payload:{submitType:l.ESubmitType.Export}}),i&&i(t)}},a("Export"))}));e.exports=h},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(30),r=n(557),l=n(558),c=n(559),s=n(560),u=n(561),d=n(562),h=n(563),g=n(564),f=n(41),v=n(69),p=n(49),b=n(26),m=n(32),y=n(36),C=n(17);function I(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var x,w,k=I(o),S=m.cTool,P=S.EVideoToolName,L=S.EPointCloudName;(w=x||(x={})).Hover="#666fff",w.Normal="#999999";e.exports=function(e){var t=o.useState(""),n=i(t,2),m=n[0],I=n[1],w=e.stepInfo,S=a.useDispatch(),A=a.useSelector((function(e){return{annotation:e.annotation,imgAttribute:e.imgAttribute}})).annotation,O=A.toolInstance,T=A.onSave,E=o.useContext(y.PointCloudContext).globalPattern,D=b.useTranslation().t,M=[v.EToolName.Tag,P.VideoTagTool].includes(null==w?void 0:w.tool),N=[P.VideoTagTool].includes(null==w?void 0:w.tool),R=[L.PointCloud].includes(null==w?void 0:w.tool),B=e.isBegin||M,j=o.useCallback((function(){null==O||O.undo()}),[O]),_=o.useCallback((function(){null==O||O.redo()}),[O]),H=[{toolName:"save",title:"Save",show:!!T,commonSvg:h,selectedSvg:g,click:function(){S(p.ChangeSave)},style:{fontSize:"12px",color:B||"save"!==m?x.Normal:x.Hover}},{toolName:"revocation",title:"Undo",show:!0,commonSvg:c,selectedSvg:d,click:function(){M||j()},style:{opacity:!0===B?.4:1,fontSize:"12px",color:B||"revocation"!==m?x.Normal:x.Hover}},{toolName:"restore",title:"Redo",show:!0,commonSvg:l,selectedSvg:u,click:function(){M||_()},style:{opacity:!0===B?.4:1,fontSize:"12px",color:B||"restore"!==m?x.Normal:x.Hover}},{toolName:"rotate",title:"Rotate",show:!0,selectedSvg:s,commonSvg:r,click:function(){N||0!==w.dataSourceStep&&void 0!==w.dataSourceStep||null==O||O.updateRotate()},style:{opacity:!0===N?.4:1,fontSize:"12px",color:B||"rotate"!==m?x.Normal:x.Hover}}];if(R)switch(E){case C.EPointCloudPattern.Segmentation:H=H.slice(0,1);break;case C.EPointCloudPattern.Detection:H=H.slice(0,3)}return k.default.createElement("div",{className:"".concat(f.prefix,"-header__hotKey")},H.map((function(e){return e.show&&k.default.createElement("div",{key:e.toolName,className:"item",onMouseEnter:function(){return I(e.toolName)},onMouseLeave:function(){return I("")}},k.default.createElement("a",{className:"item",onClick:e.click},k.default.createElement("img",{className:"singleTool",src:m===e.toolName?e.selectedSvg:e.commonSvg,style:e.style}),k.default.createElement("div",{style:e.style},D(e.title))))})))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_r' xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22'/%3e %3cg id='reload' transform='translate(1 1)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-2' data-name='%e7%9f%a9%e5%bd%a2' class='cls-1' width='20' height='20'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M14.762%2c2.234l-1.032.84A7.56%2c7.56%2c0%2c0%2c0%2c7.68%2c0%2c7.84%2c7.84%2c0%2c0%2c0%2c0%2c7.99%2c7.845%2c7.845%2c0%2c0%2c0%2c7.68%2c16%2c7.709%2c7.709%2c0%2c0%2c0%2c14.9%2c10.741a.154.154%2c0%2c0%2c0-.09-.2l-1.037-.371a.145.145%2c0%2c0%2c0-.185.091c-.033.1-.07.19-.108.284a6.539%2c6.539%2c0%2c0%2c1-1.348%2c2.084%2c6.3%2c6.3%2c0%2c0%2c1-2%2c1.406%2c6.08%2c6.08%2c0%2c0%2c1-4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1-2-1.406%2c6.539%2c6.539%2c0%2c0%2c1-1.348-2.084%2c6.833%2c6.833%2c0%2c0%2c1%2c0-5.1A6.539%2c6.539%2c0%2c0%2c1%2c3.237%2c3.364a6.3%2c6.3%2c0%2c0%2c1%2c2-1.406%2c6.08%2c6.08%2c0%2c0%2c1%2c4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1%2c2%2c1.406%2c6.489%2c6.489%2c0%2c0%2c1%2c.508.6l-1.1.9a.155.155%2c0%2c0%2c0%2c.055.269l3.212.819a.148.148%2c0%2c0%2c0%2c.181-.147L15%2c2.352a.147.147%2c0%2c0%2c0-.238-.118Z' transform='translate(2 2)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='22.001' height='22.017' viewBox='0 0 22.001 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_next' transform='translate(-0.999)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(1 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.884%2c4.3C12.188-.639%2c6.625-1.322.4%2c2.294A.794.794%2c0%2c0%2c0%2c.39%2c3.665a.765.765%2c0%2c0%2c0%2c.781%2c0C6.8.387%2c11.616.983%2c15.831%2c5.467L12.41%2c9.255l7.109-.016.018-7.875Z' transform='translate(0.99 15.142) rotate(-42)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_back' xmlns='http://www.w3.org/2000/svg' width='22' height='22.017' viewBox='0 0 22 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(0 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.88%2c4.954C12.184%2c9.894%2c6.621%2c10.576.4%2c6.96A.794.794%2c0%2c0%2c1%2c.386%2c5.59a.765.765%2c0%2c0%2c1%2c.781%2c0C6.8%2c8.868%2c11.612%2c8.272%2c15.827%2c3.788L12.406%2c0l7.109.016.018%2c7.875Z' transform='translate(15.814 22.017) rotate(-138)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_rA' xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22'/%3e %3cg id='reload' transform='translate(1 1)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-2' data-name='%e7%9f%a9%e5%bd%a2' class='cls-1' width='20' height='20'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M14.762%2c2.234l-1.032.84A7.56%2c7.56%2c0%2c0%2c0%2c7.68%2c0%2c7.84%2c7.84%2c0%2c0%2c0%2c0%2c7.99%2c7.845%2c7.845%2c0%2c0%2c0%2c7.68%2c16%2c7.709%2c7.709%2c0%2c0%2c0%2c14.9%2c10.741a.154.154%2c0%2c0%2c0-.09-.2l-1.037-.371a.145.145%2c0%2c0%2c0-.185.091c-.033.1-.07.19-.108.284a6.539%2c6.539%2c0%2c0%2c1-1.348%2c2.084%2c6.3%2c6.3%2c0%2c0%2c1-2%2c1.406%2c6.08%2c6.08%2c0%2c0%2c1-4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1-2-1.406%2c6.539%2c6.539%2c0%2c0%2c1-1.348-2.084%2c6.833%2c6.833%2c0%2c0%2c1%2c0-5.1A6.539%2c6.539%2c0%2c0%2c1%2c3.237%2c3.364a6.3%2c6.3%2c0%2c0%2c1%2c2-1.406%2c6.08%2c6.08%2c0%2c0%2c1%2c4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1%2c2%2c1.406%2c6.489%2c6.489%2c0%2c0%2c1%2c.508.6l-1.1.9a.155.155%2c0%2c0%2c0%2c.055.269l3.212.819a.148.148%2c0%2c0%2c0%2c.181-.147L15%2c2.352a.147.147%2c0%2c0%2c0-.238-.118Z' transform='translate(2 2)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='22.001' height='22.017' viewBox='0 0 22.001 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_nextA' transform='translate(-0.999)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(1 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.884%2c4.3C12.188-.639%2c6.625-1.322.4%2c2.294A.794.794%2c0%2c0%2c0%2c.39%2c3.665a.765.765%2c0%2c0%2c0%2c.781%2c0C6.8.387%2c11.616.983%2c15.831%2c5.467L12.41%2c9.255l7.109-.016.018-7.875Z' transform='translate(0.99 15.142) rotate(-42)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_backA' xmlns='http://www.w3.org/2000/svg' width='22' height='22.017' viewBox='0 0 22 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(0 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.88%2c4.954C12.184%2c9.894%2c6.621%2c10.576.4%2c6.96A.794.794%2c0%2c0%2c1%2c.386%2c5.59a.765.765%2c0%2c0%2c1%2c.781%2c0C6.8%2c8.868%2c11.612%2c8.272%2c15.827%2c3.788L12.406%2c0l7.109.016.018%2c7.875Z' transform='translate(15.814 22.017) rotate(-138)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3c!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg t='1632896115713' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='1995' width='22' height='22' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath d='M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184z m456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840z' p-id='1996' fill='%23666666'%3e%3c/path%3e%3cpath d='M512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144z m0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z' p-id='1997' fill='%23666666'%3e%3c/path%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3c!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg t='1632896115713' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='1995' width='22' height='22' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath d='M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184z m456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840z' p-id='1996' fill='%23666fff'%3e%3c/path%3e%3cpath d='M512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144z m0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z' p-id='1997' fill='%23666fff'%3e%3c/path%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(25),o=n(45),a=n(0),r=n(35),l=n(30),c=n(566),s=n(41),u=n(567),d=n(49),h=n(26);function g(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var f=g(a),v=r.connect((function(e){return{stepList:e.annotation.stepList,step:e.annotation.step}}),null,null,{context:l.LabelBeeContext})((function(e){e.stepProgress;var t=e.step,n=e.stepList,a=l.useDispatch(),r=h.useTranslation().t;return f.default.createElement("span",{className:"".concat(s.prefix)},f.default.createElement(i.Dropdown,{overlay:f.default.createElement(u,{stepList:n,updateStep:function(e){a(d.UpdateProcessingStep(e))},currentStep:t})},f.default.createElement(c,{text:r("Steps"),Icon:o.OrderedListOutlined,iconChildren:f.default.createElement(o.CaretDownOutlined,{style:{fontSize:8}})})))}));e.exports=v},function(e,t,n){"use strict";var i=n(34).default,o=n(41);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var r=a(n(0)),l=Object.defineProperty,c=Object.defineProperties,s=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n};e.exports=function(e){var t,n,a=e,l=a.Icon,f=a.text,v=a.iconChildren,p=function(e,t){var n={};for(var o in e)d.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&u){var a,r=i(u(e));try{for(r.s();!(a=r.n()).done;)o=a.value,t.indexOf(o)<0&&h.call(e,o)&&(n[o]=e[o])}catch(l){r.e(l)}finally{r.f()}}return n}(a,["Icon","text","iconChildren"]),b=void 0===e.marginLeft?30:e.marginLeft;return r.default.createElement("div",(t=function(e,t){for(var n in t||(t={}))d.call(t,n)&&g(e,n,t[n]);if(u){var o,a=i(u(t));try{for(a.s();!(o=a.n()).done;)n=o.value,h.call(t,n)&&g(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},p),n={className:o.componentCls},c(t,s(n))),r.default.createElement("div",{className:"".concat(o.componentCls,"__iconWithText"),style:{marginLeft:b}},r.default.createElement("div",{className:"iconGroup"},r.default.createElement(l,{className:"icon"}),v),r.default.createElement("span",{className:"name"},f)))}},function(e,t,n){"use strict";var i=n(41),o=n(42),a=n(0),r=n(26);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=l(a);e.exports=function(e){var t=r.useTranslation().t,n=e.stepList,a=e.updateStep,l=e.currentStep;return c.default.createElement("div",{className:"".concat(i.componentCls,"__annotationStepPopover")},n.map((function(e){var n=e.step===l;return c.default.createElement("div",{key:"stepList".concat(e.step),className:o.classnames({step:!0}),onClick:function(){l&&!n&&a(e.step)}},c.default.createElement("div",{className:o.classnames({name:!0,highlight:n})},"".concat(e.step," - ").concat(e.name||t(e.tool))))})))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='19' height='19' viewBox='0 0 19 19'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23797979%3b stroke: rgba(0%2c0%2c0%2c0)%3b stroke-miterlimit: 10%3b %7d .cls-2 %7b fill: none%3b opacity: 0.3%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_buquan' transform='translate(0.501 0.5)'%3e %3cpath id='Clip_2' data-name='Clip 2' class='cls-2' d='M0%2c0H18V18H0Z'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_15' data-name='%e5%87%8f%e5%8e%bb 15' class='cls-1' d='M473.725%2c6954H462.273a1.561%2c1.561%2c0%2c0%2c1-1.159-.529%2c1.88%2c1.88%2c0%2c0%2c1-.48-1.272v-.9h-.815a.809.809%2c0%2c0%2c1-.585-.271.9.9%2c0%2c0%2c1-.236-.6V6947.7a.863.863%2c0%2c0%2c1%2c.819-.9h.817c0-3.474%2c2.569-6.3%2c5.726-6.3h.824v-1.143a1.83%2c1.83%2c0%2c0%2c1-.819-1.557%2c1.914%2c1.914%2c0%2c0%2c1%2c.48-1.274%2c1.532%2c1.532%2c0%2c0%2c1%2c2.312%2c0%2c1.9%2c1.9%2c0%2c0%2c1%2c.48%2c1.272%2c1.836%2c1.836%2c0%2c0%2c1-.817%2c1.559v1.141h.817a6.041%2c6.041%2c0%2c0%2c1%2c5.726%2c6.3h.819a.862.862%2c0%2c0%2c1%2c.817.9v2.733a.916.916%2c0%2c0%2c1-.234.6.809.809%2c0%2c0%2c1-.585.271h-.819v.9a1.879%2c1.879%2c0%2c0%2c1-.48%2c1.272A1.578%2c1.578%2c0%2c0%2c1%2c473.725%2c6954ZM471%2c6946a1%2c1%2c0%2c0%2c0-1%2c1v1a1%2c1%2c0%2c1%2c0%2c2%2c0v-1A1%2c1%2c0%2c0%2c0%2c471%2c6946Zm-6%2c0a1%2c1%2c0%2c0%2c0-1%2c1v1a1%2c1%2c0%2c1%2c0%2c2%2c0v-1A1%2c1%2c0%2c0%2c0%2c465%2c6946Z' transform='translate(-459 -6936)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(0),o=n(32),a=n(17),r=n(25),l=n(35),c=n(30),s=n(36),u=n(26);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(i),g=l.connect((function(e){var t,n;return{toolName:null!=(n=null==(t=e.annotation.stepList[e.annotation.step-1])?void 0:t.tool)?n:""}}),null,null,{context:c.LabelBeeContext})((function(e){var t=e.toolName,n=e.forbidSegmentationText,l=void 0===n?"":n,c=u.useTranslation().t,d=i.useContext(s.PointCloudContext),g=d.globalPattern,f=d.setGlobalPattern,v=d.setTopViewInstance,p=d.setSideViewInstance,b=d.setBackViewInstance,m=d.setMainViewInstance,y=d.ptSegmentInstance,C=d.setSelectedIDs;if(t!==o.EPointCloudName.PointCloud)return null;var I=""!==l,x=h.default.createElement(r.Button,{type:g===a.EPointCloudPattern.Segmentation?"primary":void 0,onClick:function(){C([]),v(void 0),p(void 0),b(void 0),m(void 0),f(a.EPointCloudPattern.Segmentation)},disabled:I},c("SegmentationMode"));return h.default.createElement("span",{style:{margin:"0 10px"}},h.default.createElement(r.Button,{type:g===a.EPointCloudPattern.Detection?"primary":void 0,onClick:function(){null==y||y.emit("clearStash"),f(a.EPointCloudPattern.Detection)}},c("DetectionMode")),I?h.default.createElement(r.Tooltip,{title:l},x):x)}));e.exports=g},function(e,t,n){"use strict";var i=n(0),o=n(35),a=n(30),r=n(73),l=n(49),c=n(275);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(i),d=o.connect((function(e){return{annotation:e.annotation}}),null,null,{context:a.LabelBeeContext})((function(e){var t=e.annotation,n=t.imgList,i=t.imgIndex,o=t.stepList,s=t.step,d=a.useDispatch();return u.default.createElement(c.TagToolInstanceAdaptor,{imgIndex:i,imgList:n,pageBackward:function(){return d(l.PageBackward())},pageForward:function(){return d(l.PageForward())},pageJump:function(e){return d(l.PageJump(~~e))},onMounted:function(e){d({type:r.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:e}})},onUnmounted:function(){d({type:r.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:void 0}})},stepList:o,step:s})}));e.exports=d},,,,,,function(e,t,n){"use strict";var i=n(0),o=n(43),a=n(45),r=n(278),l=n(272),c=n(577),s=n(217),u=n(26),d=n(148),h=n(32);function g(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var f=g(i),v=h.cTool.EVideoToolName,p=function(e){var t=Math.floor(e/60),n=~~(e%60).toFixed(),i=(10*e).toString().split("").pop(),o=function(e){return e<10?"0".concat(e):e};return"".concat(o(t),":").concat(o(n),":").concat(i)},b=function(){var e=f.default.useContext(r.VideoPlayerCtx),t=e.currentTime,n=e.duration,i=e.buffered,a=e.setCurrentTime,l=f.default.useRef(null),c="".concat(d.decimalReserved(i/n*100,1),"%"),s="".concat(d.decimalReserved(t/n*100,1),"%");return f.default.createElement("div",{className:o.getClassName("video-progress"),ref:l,onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),function(e){if(l.current){var t=e.clientX,i=l.current.clientWidth,o=d.decimalReserved(t/i*n,1);a(o)}}(e)}},f.default.createElement("div",{className:o.getClassName("video-slider")},f.default.createElement("div",{className:o.getClassName("video-slider","played"),style:{width:s}}),f.default.createElement("div",{className:o.getClassName("video-slider","loaded"),style:{width:c}}),f.default.createElement("div",{className:o.getClassName("video-slider","played"),style:{width:s}})),f.default.createElement("div",{className:o.getClassName("video-slider-bar"),style:{left:s}}))},m=function(){var e=f.default.useContext(r.VideoPlayerCtx),t=e.updateNextPlaybackRate,n=e.playbackRate,i=u.useTranslation().t;return f.default.createElement("span",{className:o.getClassName("video-controller","speed")},f.default.createElement("span",null,i("Speed")),f.default.createElement("span",{className:o.getClassName("video-controller","speedNum")},"".concat(n,"x")),f.default.createElement("span",{className:o.getClassName("video-controller","speedButton")},f.default.createElement(a.CaretUpOutlined,{onClick:function(){t()}}),f.default.createElement(a.CaretDownOutlined,{onClick:function(){t(!1)}})))},y=function(){var e=u.useTranslation().t;return f.default.createElement(s.default,{title:f.default.createElement("span",{className:o.getClassName("video-controller","hotkey")},f.default.createElement("img",{src:c}),e("Hotkeys")),style:{},toolName:v.VideoTagTool})},C=function(){var e=f.default.useContext(r.VideoPlayerCtx),t=e.imgIndex,n=e.imgList,i=e.pageBackward,a=e.pageJump,c=e.pageForward;return f.default.createElement(l.Pagination,{isVideo:!0,pageBackward:i,imgIndex:t,pageJump:a,totalPage:n.length,pageForward:c,footerCls:o.getClassName("video-controller")})},I=function(){var e=f.default.useContext(r.VideoPlayerCtx),t=e.currentTime,n=10*e.duration-10*t,i=(n>0?n:0)/10;return f.default.createElement("div",{className:o.getClassName("video-controller","time")},"".concat(p(t)," / -").concat(p(i)))};e.exports=function(){var e=f.default.useContext(r.VideoPlayerCtx),t=e.playPause,n=e.isPlay;return f.default.createElement("div",{className:o.getClassName("video-controller","wrapper")},f.default.createElement(b,null),f.default.createElement("div",{className:o.getClassName("video-controller")},f.default.createElement("span",{onClick:function(){t()},className:o.getClassName("video-controller","playButton")},n?f.default.createElement(a.PauseOutlined,null):f.default.createElement(a.CaretRightOutlined,null)),f.default.createElement(I,null),f.default.createElement(m,null),f.default.createElement("div",{className:o.getClassName("video-controller","holder")}),f.default.createElement(C,null),f.default.createElement(y,null)))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='15' height='13' viewBox='0 0 15 13'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0.8%3b %7d .cls-2 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_keyboard_h' class='cls-1'%3e %3cg id='%e5%9b%be%e6%a0%87_%e8%ae%be%e7%bd%ae_%e5%bf%ab%e6%8d%b7%e9%94%ae'%3e %3cpath id='%e5%bd%a2%e7%8a%b6' class='cls-2' d='M2.142%2c13a2.205%2c2.205%2c0%2c0%2c1-1.513-.585A1.949%2c1.949%2c0%2c0%2c1%2c0%2c11V2A2.083%2c2.083%2c0%2c0%2c1%2c2.149%2c0h10.7A2.083%2c2.083%2c0%2c0%2c1%2c15%2c2V11a1.927%2c1.927%2c0%2c0%2c1-.63%2c1.417A2.209%2c2.209%2c0%2c0%2c1%2c12.855%2c13H2.142ZM3.209%2c9a1%2c1%2c0%2c1%2c0%2c0%2c2h8.582a1%2c1%2c0%2c1%2c0%2c0-2ZM11%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261h1.639c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c12.6%2c5ZM6.716%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261H8.355c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c8.319%2c5ZM2.43%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261H4.069c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c4.033%2c5ZM11%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261h1.639c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c12.6%2c2ZM6.716%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261H8.355c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c8.319%2c2ZM2.43%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261H4.069c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c4.033%2c2Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(34).default,o=n(0),a=n(251),r=n(579);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=l(o),s=Object.defineProperty,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=function(e,t,n){return t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},f=function(e,t){for(var n in t||(t={}))d.call(t,n)&&g(e,n,t[n]);if(u){var o,a=i(u(t));try{for(a.s();!(o=a.n()).done;){n=o.value;h.call(t,n)&&g(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e};e.exports=function(e){var t=e.invalidProps,n=e.errorProps,i=e.fileType;return t.isValid?n.isError?c.default.createElement(a,f({},f({fileType:i},n))):null:c.default.createElement(r,f({},f({fileType:i},t)))}},function(e,t,n){"use strict";var i=n(0),o=n(26);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var r=a(i);e.exports=function(e){var t=e.fileType,n=void 0===t?"image":t,i=e.isValid,a=o.useTranslation().t;return i?null:r.default.createElement("div",{style:{position:"absolute",inset:0,color:"white",display:"flex",alignItems:"center",fontSize:30,opacity:.7,background:"rgba(255, 87, 34, 1)",justifyContent:"center"}},a("".concat(n,"InvalidAndSkip")))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(148);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var r=a(i),l={position:"absolute",zIndex:20,padding:"0 20px",color:"white",fontSize:15,lineHeight:"32px",background:"rgba(0, 255, 255, 0.32)",top:0,right:0,maxHeight:"calc(100% - 80px)",overflowY:"scroll"};t.VideoTagLayer=function(e){var t=e.result,n=e.inputList,i=o.result2LabelKey(t,n);return r.default.createElement("div",{style:l},r.default.createElement("table",null,r.default.createElement("tbody",null,i.map((function(e){var t=e.keyLabel,n=e.valuesLabelArray;return r.default.createElement("tr",{key:t},r.default.createElement("td",{style:{paddingRight:8}},"".concat(t,":")),r.default.createElement("td",null,"".concat(n.join("\u3001"))))})))))}},function(e,t,n){"use strict";var i=n(51).default,o=n(28).default,a=n(43),r=n(0),l=n(582),c=n(280),s=n(584),u=n(283),d=n(585),h=n(592),g=n(596),f=n(597),v=n(598),p=n(601),b=n(35),m=n(30),y=n(273),C=n(36),I=n(17),x=n(260),w=n(42),k=n(86),S=n(5),P=n(605),L=n(49);function A(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var O=A(r),T=A(S),E=b.connect(k.a2MapStateToProps,null,null,{context:m.LabelBeeContext})((function(e){var t,n,b=e.currentData,k=e.imgList,S=e.drawLayerSlot,A=e.checkMode,E=e.intelligentFit,D=e.imgIndex,M=(e.loadPCDFileLoading,r.useContext(C.PointCloudContext)),N=M.globalPattern,R=M.setGlobalPattern,B=M.selectedIDs,j=m.useDispatch(),_=r.useState(!1),H=o(_,2),V=H[0],F=H[1],Z=(null==B?void 0:B.length)>0&&V,z=w.jsonParser(b.result),U=x.useCustomToolInstance({basicInfo:z}),G=U.toolInstanceRef,W=U.clearToolInstance;if(r.useEffect((function(){G.current.setPointCloudGlobalPattern=function(e){e!==N&&(R(e),M.clearAllDetectionInstance(),W())}}),[N]),r.useEffect((function(){var e;if(L.SetLoadPCDFileLoading(j,!0),b){var t=I.PointCloudUtils.parsePointCloudCurrentResult(null!=(e=null==b?void 0:b.result)?e:""),n=t.boxParamsList,i=t.polygonList,o=t.lineList,a=t.sphereParamsList,r=t.segmentation;M.setPointCloudResult(n),M.setPolygonList(i),M.setLineList(o),M.setPointCloudSphereList(a),M.setSegmentation(r)}}),[D]),r.useEffect((function(){G.current.exportData=function(){return[M.pointCloudBoxList,{valid:M.valid}]},G.current.exportCustomData=function(){var e,t,n,i;return{resultPolygon:null!=(e=M.polygonList)?e:[],resultLine:null!=(t=M.lineList)?t:[],resultPoint:null!=(n=M.pointCloudSphereList)?n:[],segmentation:null!=(i=M.segmentation)?i:[]}}}),[M.pointCloudBoxList,M.valid,M.polygonList,M.lineList,M.pointCloudSphereList,M.ptSegmentInstance,M.segmentation]),0===k.length)return null;if(N===I.EPointCloudPattern.Segmentation)return O.default.createElement(O.default.Fragment,null,O.default.createElement(g,{checkMode:A,toolInstanceRef:G}),O.default.createElement(p,null),O.default.createElement(f,{checkMode:A}),O.default.createElement(v,null),null==S?void 0:S({direct:!0}));var K=O.default.createElement("div",{className:a.getClassName("point-cloud-container","left-bottom")},O.default.createElement(c,{checkMode:A}),O.default.createElement(u,{checkMode:A}));return V&&(K=O.default.createElement(P,{selectAndEnlarge:Z,checkMode:A})),O.default.createElement(O.default.Fragment,null,O.default.createElement(h,{checkMode:A,toolInstanceRef:G}),O.default.createElement("div",{className:a.getClassName("point-cloud-layout"),onContextMenu:function(e){return e.preventDefault()}},O.default.createElement("div",{className:a.getClassName("point-cloud-wrapper")},O.default.createElement(y.AnnotatedAttributesPanelFixedLeft,null),O.default.createElement("div",{className:a.getClassName("point-cloud-content")},O.default.createElement("div",{className:a.getClassName("point-cloud-container","left")},O.default.createElement(l,null),K),O.default.createElement("div",{className:T.default((t={},i(t,a.getClassName("point-cloud-container","right"),!0),i(t,a.getClassName("point-cloud-container","rightZoom"),V),t))},O.default.createElement(s,{drawLayerSlot:S,checkMode:A,intelligentFit:E,setIsEnlargeTopView:F,onExitZoom:function(){F(!1)},isEnlargeTopView:V}),O.default.createElement("div",{className:T.default((n={},i(n,a.getClassName("point-cloud-container","right-bottom"),!V),i(n,a.getClassName("point-cloud-container","right-bottom-floatLeft"),V),n))},O.default.createElement(d,{isEnlargeTopView:V,thumbnailWidth:V?300:455})))),O.default.createElement(y.AnnotatedAttributesPanelFixedRight,null))))}));e.exports=E},function(e,t,n){"use strict";var i=n(28).default,o=n(51).default,a=n(34).default,r=n(43),l=n(32),c=n(17),s=n(5),u=n(0),d=n(128),h=n(36),g=n(86),f=n(35),v=n(42),p=n(63),b=n(109),m=n(25),y=n(95),C=n(96),I=n(26),x=n(30),w=n(279),k=n(129),S=n(45);function P(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var L=P(s),A=P(u),O=Object.defineProperty,T=Object.defineProperties,E=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,R=function(e,t,n){return t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},B=function(e,t){for(var n in t||(t={}))M.call(t,n)&&R(e,n,t[n]);if(D){var i,o=a(D(t));try{for(o.s();!(i=o.n()).done;){n=i.value;N.call(t,n)&&R(e,n,t[n])}}catch(r){o.e(r)}finally{o.f()}}return e},j=l.cKeyCode.default,_=A.default.createContext({isActive:!1,setTarget3DView:function(){},reset3DView:function(){},followTopView:function(){}}),H=function(e){var t=e.perspectiveView,n=u.useContext(_),i=n.isActive,a=n.setTarget3DView;return A.default.createElement("span",{onClick:function(){a(c.EPerspectiveView[t])},className:function(e){var t;return L.default((o(t={},r.getClassName("point-cloud-3d-view",e),!0),o(t,"active",i),t))}(t.toLocaleLowerCase())})},V=function(e){var t=e.isEnlarge,n=u.useContext(_),i=n.reset3DView,o=n.followTopView,a=I.useTranslation().t,l=A.default.createElement(A.default.Fragment,null,A.default.createElement(H,{perspectiveView:"Top"}),A.default.createElement(H,{perspectiveView:"Front"}),A.default.createElement(H,{perspectiveView:"Left"}),A.default.createElement(H,{perspectiveView:"Back"}),A.default.createElement(H,{perspectiveView:"Right"}),A.default.createElement(H,{perspectiveView:"LFT"}),A.default.createElement(H,{perspectiveView:"RBT"})),c=A.default.createElement(A.default.Fragment,null,A.default.createElement(m.Tooltip,{title:a("CameraFollowTopView")},A.default.createElement("span",{onClick:function(){o()},className:r.getClassName("point-cloud-3d-view","followTop")})),A.default.createElement("span",{onClick:function(){i()},className:r.getClassName("point-cloud-3d-view","reset")}));return t?A.default.createElement("div",{className:r.getClassName("point-cloud-3d-sidebarZoom")},c,l):A.default.createElement("div",{className:r.getClassName("point-cloud-3d-sidebar")},l,c)},F=f.connect(g.a2MapStateToProps,null,null,{context:x.LabelBeeContext})((function(e){var t,n=e.currentData,a=e.config,s=e.highlightAttribute,g=u.useContext(h.PointCloudContext),f=u.useState(!0),x=i(f,2),P=x[0],O=x[1],D=u.useState(!1),M=i(D,2),N=M[0],R=M[1],H=u.useRef(null),F=C.usePointCloudViews().initPointCloud3d,Z=y(H),z=I.useTranslation().t;u.useEffect((function(){g.mainViewInstance&&(null==F||F(Z))}),[Z]);var U=p.useSingleBox().selectedBox,G=b.useSphere().selectedSphere,W=function(e){var t,n,i=null==U?void 0:U.info;if(i){var o=B({},i.center);o.x=o.x-.01,o.z=1e3;var a=e===c.EPerspectiveView.Top;null==(t=g.mainViewInstance)||t.updateCameraByBox(i,e,a?o:void 0)}G&&(null==(n=g.mainViewInstance)||n.updateCameraBySphere(G,e))},K=function(){var e;null==(e=g.mainViewInstance)||e.resetCamera()},Y=function(){var e,t,n=null==(e=g.topViewInstance)?void 0:e.pointCloudInstance.camera;n&&(null==(t=g.mainViewInstance)||t.applyCameraTarget(n))};u.useEffect((function(){if(H.current&&(null==n?void 0:n.url)){var e=g.mainViewInstance;!e&&Z.width&&(e=new l.PointCloud({container:H.current,isOrthographicCamera:!0,orthographicParams:c.PointCloudUtils.getDefaultOrthographicParams(Z),config:a}),g.setMainViewInstance(e))}}),[Z,n]),u.useEffect((function(){var e;if(H.current&&(null==n?void 0:n.url)&&n.result&&g.mainViewInstance){var t=g.mainViewInstance,i=c.PointCloudUtils.getBoxParamsFromResultList(n.result);i.forEach((function(e){var n,i,o=null==(n=c.toolStyleConverter.getColorFromConfig({attribute:e.attribute},(i=B({},a),T(i,E({attributeConfigurable:!0}))),{}))?void 0:n.hex;null==t||t.addBoxToSense(e,o)})),t.render(),g.setPointCloudResult(i),g.setPointCloudValid(null==(e=v.jsonParser(n.result))?void 0:e.valid)}}),[n,g.mainViewInstance]),u.useEffect((function(){var e,t,n,i;if(U){W(c.EPerspectiveView.Top);var o=null!=(n=null==(t=null==(e=g.topViewInstance)?void 0:e.pointCloudInstance)?void 0:t.camera.zoom)?n:1;null==(i=g.mainViewInstance)||i.updateCameraZoom(o)}}),[U]),u.useEffect((function(){var e,t,n,i;if(G){W(c.EPerspectiveView.Top);var o=null!=(n=null==(t=null==(e=g.topViewInstance)?void 0:e.pointCloudInstance)?void 0:t.camera.zoom)?n:1;null==(i=g.mainViewInstance)||i.updateCameraZoom(o)}}),[G]),u.useEffect((function(){return window.addEventListener("keydown",X),function(){window.removeEventListener("keydown",X)}}),[]);var X=function(e){e.keyCode!==j.Esc||R(!1)},J=u.useMemo((function(){return{reset3DView:K,setTarget3DView:W,isActive:!!U,followTopView:Y}}),[U,g.mainViewInstance]);u.useEffect((function(){var e,t,n,i=g.pointCloudBoxList.filter((function(e){return e.attribute===s}));(null==i?void 0:i.length)>0&&(null==(e=g.mainViewInstance)||e.clearHighlightBoxes(),null==(t=g.mainViewInstance)||t.highlightBoxes(i)),0===i.length&&(null==(n=g.mainViewInstance)||n.clearHighlightBoxesAndRender())}),[s,g.mainViewInstance]);var Q=A.default.createElement(A.default.Fragment,null,A.default.createElement(w,{onChange:function(e){var t;null==(t=g.mainViewInstance)||t.updatePointSize({customSize:e})}}),A.default.createElement("span",{style:{marginRight:8}},z("ShowArrows")),A.default.createElement(m.Switch,{size:"small",checked:P,onChange:function(e){var t;O(e),null==(t=g.mainViewInstance)||t.setShowDirection(e)}}),N&&A.default.createElement(_.Provider,{value:J},A.default.createElement(V,{isEnlarge:N})));return A.default.createElement(d.PointCloudContainer,{className:L.default((t={},o(t,r.getClassName("point-cloud-3d-container"),!0),o(t,r.getClassName("point-cloud-container","zoom"),N),t)),title:N?A.default.createElement("div",{style:{display:"flex",alignItems:"center"}},A.default.createElement(S.LeftOutlined,{style:{cursor:"pointer",marginRight:"12px"},onClick:function(){R(!1)}}),z("3DView")):A.default.createElement(k,{title:z("3DView"),onClick:function(){R(!0)}}),toolbar:Q},A.default.createElement("div",{className:r.getClassName("point-cloud-3d-content")},!N&&A.default.createElement(_.Provider,{value:J},A.default.createElement(V,null)),A.default.createElement("div",{className:r.getClassName("point-cloud-3d-view"),id:"LABELBEE-POINTCLOUD",ref:H})))}));e.exports=F},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='68' height='76' viewBox='0 0 68 76' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cg clip-path='url(%23clip0_96880_20054)'%3e%3crect x='6.45483' y='0.848145' width='54.0956' height='56.7089' rx='1.04533' fill='url(%23paint0_linear_96880_20054)' fill-opacity='0.12'/%3e%3cpath d='M67 41.3584V75H0V57.755L65.6869 40.348C66.3501 40.1722 67 40.6723 67 41.3584Z' fill='url(%23paint1_linear_96880_20054)'/%3e%3cpath d='M0.182861 35.8192V75.3775H67.0837V59.9767L1.60277 34.8433C0.91818 34.5806 0.182861 35.086 0.182861 35.8192Z' fill='url(%23paint2_linear_96880_20054)'/%3e%3cpath d='M34.8791 22C31.5247 22 28.8956 22.9519 26.9464 24.8558C25.4935 26.2426 24.5938 28.0144 24.2124 30.171C23.9638 31.5762 25.1568 32.7431 26.5838 32.7431V32.7431C28.0108 32.7431 29.098 31.5652 29.4401 30.1799C29.627 29.423 29.912 28.7815 30.3008 28.2555C31.2074 27.0316 32.6126 26.4423 34.5618 26.4423C36.103 26.4423 37.3269 26.8503 38.1882 27.7115C39.0041 28.5728 39.4574 29.7514 39.4574 31.2473C39.4574 32.3805 39.0494 33.4684 38.2335 34.4657L37.6896 35.1003C34.7431 37.7294 32.9753 39.6332 32.386 40.8571C31.9171 41.7614 31.6462 42.8142 31.5366 43.9972C31.4651 44.7702 31.9823 45.4588 32.7224 45.6932V45.6932C33.2639 45.8647 33.8406 45.8939 34.3967 45.778L34.957 45.6612C35.9679 45.4505 36.6494 44.5444 36.9087 43.5449C37.0201 43.1152 37.1747 42.7029 37.3723 42.3077C37.7802 41.4918 38.3695 40.7212 39.1854 40.0865C41.3613 38.1827 42.6758 36.9588 43.0838 36.5055C44.1717 35.0549 44.761 33.1964 44.761 30.9299C44.761 28.1648 43.8544 25.989 42.0412 24.4025C40.228 22.7706 37.8255 22 34.8791 22ZM34.0632 48.1552C33.0659 48.1552 32.25 48.4725 31.6154 49.1071C30.8901 49.7418 30.5728 50.5577 30.5728 51.5549C30.5728 52.5522 30.8901 53.3681 31.6154 54.0027C32.25 54.6374 33.0659 55 34.0632 55C35.0604 55 35.8764 54.6827 36.6016 54.0481C37.2363 53.4135 37.5989 52.5522 37.5989 51.5549C37.5989 50.5577 37.2363 49.7418 36.6016 49.1071C35.9217 48.4725 35.0604 48.1552 34.0632 48.1552Z' fill='%23F3F3F3' fill-opacity='0.25'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear_96880_20054' x1='33.5026' y1='0.848145' x2='33.5026' y2='57.557' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23EDEDED'/%3e%3cstop offset='1' stop-color='white'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear_96880_20054' x1='33.5' y1='32.9214' x2='33.5' y2='62.8103' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23373737'/%3e%3cstop offset='1' stop-color='%230E0E0E'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear_96880_20054' x1='33.6333' y1='31.097' x2='33.6333' y2='74.1393' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%232C2C2C'/%3e%3cstop offset='1' stop-color='%23424242'/%3e%3c/linearGradient%3e%3cclipPath id='clip0_96880_20054'%3e%3crect width='68' height='76.0002' fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(28).default,o=n(34).default,a=n(43),r=n(127),l=n(271),c=n(45),s=n(32),u=n(17),d=n(0),h=n(36),g=n(282),f=n(63),v=n(128),p=n(219),b=n(145),m=n(109),y=n(218),C=n(25),I=n(86),x=n(35),w=n(96),k=n(95),S=n(26),P=n(30),L=n(42),A=n(108),O=n(44),T=n(279),E=n(85),D=n(129);function M(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var N=M(d),R=M(O),B=Object.defineProperty,j=Object.defineProperties,_=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,Z=function(e,t,n){return t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},z=function(e,t){for(var n in t||(t={}))V.call(t,n)&&Z(e,n,t[n]);if(H){var i,a=o(H(t));try{for(a.s();!(i=a.n()).done;){n=i.value;F.call(t,n)&&Z(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},U=function(e,t){return j(e,_(t))},G=s.cTool,W=G.EPolygonPattern,K=G.EToolName,Y=s.cAnnotation.ESortDirection,X=s.cKeyCode.default,J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.width,o=t.height,a={x:e.x+i*n/2,y:e.y+o*n/2},r={x:t.width/2,y:t.height/2};return{offsetX:(r.x-a.x)/n,offsetY:-(r.y-a.y)/n}},Q=function(e){var t,n,i=e.currentData,o=y.useZoom(),s=o.zoom,u=o.zoomIn,d=o.zoomOut,v=o.initialPosition,p=f.useSingleBox(),b=p.selectNextBox,C=p.selectPrevBox,I=m.useSphere().switchToNextSphere,x=g.useRotate({currentData:i}).updateRotate,w=N.default.useContext(h.PointCloudContext),k=w.topViewInstance,S=null==(n=null==(t=null==w?void 0:w.topViewInstance)?void 0:t.toolScheduler)?void 0:n.getCurrentToolName();return N.default.createElement(N.default.Fragment,null,N.default.createElement(T,{onChange:function(e){var t;null==(t=null==k?void 0:k.pointCloudInstance)||t.updatePointSize({customSize:e})}}),N.default.createElement("span",{onClick:function(){x(2)},className:a.getClassName("point-cloud","rotate-reserve")}),N.default.createElement("span",{onClick:function(){x(-2)},className:a.getClassName("point-cloud","rotate")}),N.default.createElement("span",{onClick:function(){x(180)},className:a.getClassName("point-cloud","rotate-180")}),N.default.createElement(r.FooterDivider,null),N.default.createElement(c.UpSquareOutlined,{onClick:function(){S!==K.Point?C(!0):I(Y.descend)},className:a.getClassName("point-cloud","prev")}),N.default.createElement(c.DownSquareOutlined,{onClick:function(){S!==K.Point?b(!0):I(Y.ascend)},className:a.getClassName("point-cloud","next")}),N.default.createElement(r.FooterDivider,null),N.default.createElement(l.ZoomController,{initialPosition:v,zoomIn:u,zoomOut:d,zoom:s}))},q=function(e){var t=e.setZAxisLimit,n=e.zAxisLimit;return e.checkMode?null:N.default.createElement("div",{style:{position:"absolute",top:128,right:8,height:"50%",zIndex:20}},N.default.createElement(C.Slider,{vertical:!0,step:.5,max:10,min:.5,defaultValue:n,onAfterChange:function(e){t(e)}}))},$=x.connect(I.a2MapStateToProps,null,null,{context:P.LabelBeeContext})((function(e){var t,n,o=e.currentData,r=e.imgList,l=e.stepInfo,g=e.drawLayerSlot,C=e.checkMode,I=e.intelligentFit,x=e.setIsEnlargeTopView,P=e.isEnlargeTopView,O=e.onExitZoom,T=e.highlightAttribute,M=d.useState({zoom:1,currentPos:{x:0,y:0}}),B=i(M,2),j=B[0],_=B[1],H=d.useRef(null),V=N.default.useContext(h.PointCloudContext),F=k(H),Z=L.jsonParser(l.config),G=y.useZoom(),K=G.setZoom,Y=G.syncTopviewToolZoom,$=V.hideAttributes,ee=b.usePolygon(),te=ee.addPolygon,ne=ee.deletePolygon,ie=m.useSphere().deletePointCloudSphere,oe=f.useSingleBox(),ae=oe.deletePointCloudBox,re=oe.changeValidByID,le=d.useState(10),ce=i(le,2),se=ce[0],ue=ce[1],de=S.useTranslation().t,he=w.usePointCloudViews(),ge=E.useHistory().pushHistoryWithList;d.useLayoutEffect((function(){if(!V.topViewInstance&&H.current&&(null==o?void 0:o.url)&&(null==o?void 0:o.result)){var e={width:H.current.clientWidth,height:H.current.clientHeight},t=new s.PointCloudAnnotation({container:H.current,size:e,pcdPath:o.url,config:U(z({},Z),{pointCloudPattern:V.pointCloudPattern}),checkMode:C,toolName:A.getPointCloudToolList(),proxyMode:C});V.setTopViewInstance(t)}}),[o]),d.useEffect((function(){if(F&&V.topViewInstance&&V.sideViewInstance){var e=V.topViewInstance.toolInstance;e.singleOn("dataUpdated",(function(e,t){var n=R.default.cloneDeep(e).map((function(e){return U(z({},e),{pointList:u.PointCloudUtils.pointListTransferCanvas2World(e.pointList,F)})}));V.setSelectedIDs(t),V.setLineList(n),ge({lineList:n})})),e.singleOn("pointCreated",(function(e,t){he.topViewAddSphere({newPoint:e,size:F,trackConfigurable:Z.trackConfigurable,zoom:t})})),e.singleOn("pointDeleted",(function(e){ie(e)})),e.singleOn("pointSelected",(function(e){V.setSelectedIDs([e])})),e.singleOn("updatePointByDrag",(function(e,t){var n;null==(n=he.topViewUpdatePoint)||n.call(he,e,F)})),e.singleOn("polygonCreated",(function(t,n){if(e.pattern===W.Normal||!(null==o?void 0:o.url)){var i=U(z({},t),{pointList:t.pointList.map((function(e){return u.PointCloudUtils.transferCanvas2World(e,F)}))});return te(i),void V.setSelectedIDs($.includes(t.attribute)?"":t.id)}he.topViewAddBox({polygon:t,size:F,imgList:r,trackConfigurable:Z.trackConfigurable,zoom:n,intelligentFit:I})})),e.singleOn("deletedObject",(function(e){var t=e.id;ae(t),ne(t)})),e.singleOn("deleteSelectedIDs",(function(){V.setSelectedIDs([])})),e.singleOn("addSelectedIDs",(function(e){V.addSelectedID(e)})),e.singleOn("setSelectedIDs",(function(e){V.setSelectedIDs(e)})),e.singleOn("updatePolygonByDrag",(function(e){var t;null==(t=he.topViewUpdateBox)||t.call(he,e,F)}));var t=function(e){var t,n=re(e);n&&V.syncAllViewPointCloudColor(n),V.polygonList.find((function(t){return t.id===e}))&&(null==(t=V.topViewInstance)||t.toolInstance.setPolygonValidAndRender(e,!0))};return e.on("validUpdate",t),function(){e.unbind("validUpdate",t)}}}),[V,F,o,he,V.polygonList,V.lineList,null==(t=V.topViewInstance)?void 0:t.toolInstance]),d.useEffect((function(){var e,t;if((null==F?void 0:F.width)&&V.topViewInstance){var n=null==(t=null==(e=null==Z?void 0:Z.attributeList)?void 0:e[0])?void 0:t.value;n&&V.topViewInstance.toolInstance.setDefaultAttribute(n),V.topViewInstance.initSize(F),V.topViewInstance.updatePolygonList(V.displayPointCloudList,V.polygonList),V.topViewInstance.updatePointList(V.displaySphereList),V.topViewInstance.updateLineList(V.displayLineList);var i=V.topViewInstance,o=i.pointCloudInstance,a=i.toolInstance;a.singleOn("renderZoom",(function(e,t){var n=J(t,F,e),i=n.offsetX,a=n.offsetY;if(o.camera.zoom=e,t){var r=o.initCameraPosition,l=r.x,c=r.y,s=r.z;o.camera.position.set(l+a,c-i,s)}o.camera.updateProjectionMatrix(),o.render(),K(e),Y(t,e,F),_({zoom:e,currentPos:t})})),a.singleOn("dragMove",(function(e){var t=e.currentPos,n=e.zoom,i=J(t,F,n),a=i.offsetX,r=i.offsetY;o.camera.zoom=n;var l=o.initCameraPosition,c=l.x,s=l.y,u=l.z;o.camera.position.set(c+r,s-a,u),o.render(),Y(t,n,F),_({zoom:n,currentPos:t})}))}}),[F,V.topViewInstance,null==(n=V.topViewInstance)?void 0:n.toolInstance]),d.useEffect((function(){var e,t;null==(t=null==(e=V.topViewInstance)?void 0:e.pointCloudInstance)||t.applyZAxisPoints(se)}),[se]),d.useEffect((function(){he.topViewSelectedChanged({})}),[V.selectedIDs]),d.useEffect((function(){return window.addEventListener("keydown",fe),function(){window.removeEventListener("keydown",fe)}}),[]);var fe=function(e){e.keyCode===X.Esc&&O()};return d.useEffect((function(){var e,t,n;null==(n=null==(t=null==(e=V.topViewInstance)?void 0:e.pointCloud2dOperation)?void 0:t.setHighlightAttribute)||n.call(t,T)}),[V.topViewInstance,T]),N.default.createElement(v.PointCloudContainer,{className:a.getClassName("point-cloud-container","top-view"),title:P?N.default.createElement("div",{style:{display:"flex",alignItems:"center",position:"relative"}},N.default.createElement(c.LeftOutlined,{style:{cursor:"pointer",marginRight:"12px"},onClick:function(){O()}}),N.default.createElement("span",null,de("TopView")),N.default.createElement(p.BoxInfos,{checkMode:C,config:Z,style:{display:"flex",position:"initial",margin:"0px 20px"}})):N.default.createElement(D,{title:de("TopView"),onClick:function(){x(!0)}}),toolbar:N.default.createElement(Q,{currentData:o})},N.default.createElement("div",{style:{position:"relative",flex:1}},N.default.createElement("div",{style:{width:"100%",height:"100%"},ref:H},null==g?void 0:g(j)),!P&&N.default.createElement(p.BoxInfos,{checkMode:C,config:Z}),N.default.createElement(q,{checkMode:C,zAxisLimit:se,setZAxisLimit:ue}),N.default.createElement(p.PointCloudValidity,null)))}));e.exports=$},function(e,t,n){"use strict";var i=n(51).default,o=n(62).default,a=n(28).default,r=n(34).default,l=n(43),c=n(0),s=n(128),u=n(36),d=n(35),h=n(32),g=n(30),f=n(86),v=n(17),p=n(586),b=n(129),m=n(45),y=n(5),C=n(589),I=n(590),x=n(591);function w(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var k=w(c),S=w(y),P=Object.defineProperty,L=Object.defineProperties,A=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,D=function(e,t,n){return t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},M=function(e,t){for(var n in t||(t={}))T.call(t,n)&&D(e,n,t[n]);if(O){var i,o=r(O(t));try{for(o.s();!(i=o.n()).done;){n=i.value;E.call(t,n)&&D(e,n,t[n])}}catch(a){o.e(a)}finally{o.f()}}return e},N=function(e,t){return L(e,A(t))},R=h.cKeyCode.default,B=function(e){var t=e.showEnlarge,n=e.isEnlargeTopView,i=e.data,o=e.setIsEnlarge,a=e.setCurIndex,r=e.curIndex,l=void 0===r?0:r,c=e.index,s=e.annotations2d;return n?k.default.createElement(b,{title:null==i?void 0:i.calName,style:{background:"rgba(0, 0, 0, 0.74)",color:"#FFFFFF"}}):t?k.default.createElement("div",{style:{display:"flex",alignItems:"center"}},k.default.createElement(m.LeftOutlined,{style:{cursor:"pointer",marginRight:"12px"},onClick:function(){o(!1),a(void 0)}}),k.default.createElement("span",null,null==i?void 0:i.calName),k.default.createElement("span",{style:{marginLeft:"8px"}},l+1,"/",null==s?void 0:s.length)):k.default.createElement(b,{title:null==i?void 0:i.calName,onClick:function(){o(!0),a(c)},style:{background:"rgba(0, 0, 0, 0.74)",color:"#FFFFFF"}})},j=d.connect(f.a2MapStateToProps,null,null,{context:g.LabelBeeContext})((function(e){var t,n=e.currentData,r=e.config,d=e.thumbnailWidth,g=e.isEnlargeTopView,f=e.highlightAttribute,b=e.loadPCDFileLoading,m=c.useState([]),y=a(m,2),w=y[0],P=y[1],L=c.useContext(u.PointCloudContext),A=L.topViewInstance,O=L.displayPointCloudList,T=c.useState(""),E=a(T,2),D=E[0],j=E[1],_=c.useState(!1),H=a(_,2),V=H[0],F=H[1],Z=c.useState(void 0),z=a(Z,2),U=z[0],G=z[1];c.useEffect((function(){var e;if(!b&&A&&(null==n?void 0:n.mappingImgList)&&(null==(e=null==n?void 0:n.mappingImgList)?void 0:e.length)>0){var t={fill:"transparent",color:"green"},i=[];null==n||n.mappingImgList.forEach((function(e){var n,a=O.reduce((function(n,i){var a,l=i.id===D||f===i.attribute,c=h.pointCloudLidar2image(i,e.calib,{createRange:l}),s=c.transferViewData,u=c.viewRangePointList,d=null==(a=v.toolStyleConverter.getColorFromConfig({attribute:i.attribute},N(M({},r),{attributeConfigurable:!0}),{}))?void 0:a.stroke,g=X({viewDataPointList:s,pointCloudBox:i,defaultViewStyle:t,stroke:d}),p=[].concat(o(n),o(g));return(null==u?void 0:u.length)>0&&p.push({type:"polygon",annotation:N(M({id:D,pointList:u},t),{stroke:d,fill:"rgba(255, 255, 255, 0.6)"})}),p}),[]);i.push({annotations:a,url:null==e?void 0:e.url,calName:null==(n=e.calib)?void 0:n.calName,calib:null==e?void 0:e.calib})})),P(i)}}),[O,null==n?void 0:n.mappingImgList,D,f,b]),c.useEffect((function(){return window.addEventListener("keydown",W),function(){window.removeEventListener("keydown",W)}}),[U]);var W=function(e){switch(e.keyCode){case R.Esc:V&&F(!1);break;case R.Left:K();break;case R.Right:Y()}},K=function(){void 0!==U&&V&&Number(U)>0&&G(U-1)},Y=function(){void 0!==U&&V&&Number(U)<(null==w?void 0:w.length)-1&&G(U+1)},X=function(e){var t=e.viewDataPointList,n=e.pointCloudBox,i=e.defaultViewStyle,o=e.stroke;return t.map((function(e){return{type:e.type,annotation:N(M({id:n.id,pointList:e.pointList},i),{stroke:o})}}))},J=!n||!(null==n?void 0:n.mappingImgList)||!((null==(t=null==n?void 0:n.mappingImgList)?void 0:t.length)>0),Q=k.default.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"14px"}},k.default.createElement("img",{src:I,style:{height:"24px",marginRight:"8px",cursor:"pointer"},onClick:function(){return K()}}),k.default.createElement("span",{style:{marginRight:"12px"}},"\u952e\u76d8\u5de6\u952e\u4e0a\u4e00\u5f20"),k.default.createElement("span",{style:{margin:"0px 8px 0px 12px"}},"\u952e\u76d8\u53f3\u952e\u4e0a\u4e00\u5f20"),k.default.createElement("img",{src:x,style:{height:"24px",marginRight:"12px",cursor:"pointer"},onClick:function(){return Y()}}),k.default.createElement("img",{src:C,style:{height:"24px",margin:"0px 8px 0px 12px",cursor:"pointer"},onClick:function(){F(!1),G(void 0)}}),k.default.createElement("span",null,"\u952e\u9000\u51fa"));return(null==w?void 0:w.length)>0?k.default.createElement(k.default.Fragment,null,w.map((function(e,t){var o,a=V&&t===U;return k.default.createElement(s.PointCloudContainer,{className:S.default((o={},i(o,l.getClassName("point-cloud-2d-container"),!0),i(o,l.getClassName("point-cloud-container","zoom"),a),o)),title:k.default.createElement(B,{showEnlarge:a,isEnlargeTopView:g,data:e,setIsEnlarge:F,setCurIndex:G,curIndex:U,index:t,annotations2d:w}),titleOnSurface:!a,style:{display:J?"none":"flex",width:a?"100%":d},key:t,toolbar:Q},(null==e?void 0:e.annotations)&&(null==e?void 0:e.url)&&k.default.createElement(p,{currentData:n,view2dData:e,setSelectedID:j,showEnlarge:a}))}))):null}));e.exports=j},function(e,t,n){"use strict";var i=n(81).default,o=n(28).default,a=n(43),r=n(0),l=n(227),c=n(95),s=n(63),u=n(587),d=n(588);function h(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var g=h(r);e.exports=function(e){var t,n=e.view2dData,h=e.setSelectedID,f=e.currentData,v=e.showEnlarge,p=r.useRef(null),b=r.useRef(),m=s.useSingleBox().selectedBox,y=c(p),C=n.url,I=n.calib,x=u.useHighlight({currentData:f}),w=x.toggle2dVisible,k=x.isHighlightVisible,S=r.useState(!1),P=o(S,2),L=P[0],A=P[1],O=!n,T=r.useCallback((function(){var e,t,i=null==(e=b.current)?void 0:e.toolInstance;if(h(""),m&&i){var o=n.annotations.find((function(e){return e.annotation.id===m.info.id})),a="";o&&(null==(t=null==o?void 0:o.annotation.pointList)?void 0:t.length)>0&&(i.focusPositionByPointList(null==o?void 0:o.annotation.pointList),a=m.info.id,h(a))}}),[m,b.current,n.annotations]);r.useEffect((function(){T()}),[T]);return g.default.createElement("div",{className:a.getClassName("point-cloud-2d-image"),ref:p},g.default.createElement(l,{src:null!=(t=null==n?void 0:n.url)?t:"",annotations:n.annotations,size:y,ref:b,globalStyle:{display:O?"none":"block"},afterImgOnLoad:function(e){T()},zoomInfo:{min:.01,max:1e3,ratio:.4}}),g.default.createElement(d,{visible:k(C),onClick:function(){return e=void 0,t=null,n=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=3,w(C,I);case 3:A(!1);case 4:case"end":return e.stop()}}),e)})),new Promise((function(i,o){var a=function(e){try{l(n.next(e))}catch(t){o(t)}},r=function(e){try{l(n.throw(e))}catch(t){o(t)}},l=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(a,r)};l((n=n.apply(e,t)).next())}));var e,t,n},loading:L,style:{position:"absolute",right:16,top:16,zIndex:v?-1:101}}))}},function(e,t,n){"use strict";var i=n(81).default,o=n(62).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(36);t.useHighlight=function(e){var t,n=e.currentData,l=a.useContext(r.PointCloudContext),c=l.mainViewInstance,s=l.topViewInstance,u=l.pointCloudBoxList,d=l.highlight2DDataList,h=l.setHighlight2DDataList,g=null!=(t=null==n?void 0:n.mappingImgList)?t:[];return{toggle2dVisible:function(e,t){return n=void 0,a=null,r=i().mark((function n(){var a,r,l,f,v;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=o(d),d.find((function(t){return t.url===e}))?r=d.filter((function(t){return t.url!==e})):r.push({url:e,calib:t}),h(r),c&&0!==(null==g?void 0:g.length)){n.next=5;break}return n.abrupt("return");case 5:if(l=c.pointCloudObject){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,c.getHighlightIndexByMappingImgList({mappingImgList:r,points:l.geometry.attributes.position.array});case 10:return f=n.sent,n.next=13,c.highlightOriginPointCloud(u,f);case 13:(v=n.sent)&&(null==(a=null==s?void 0:s.pointCloudInstance)||a.updateColor(v));case 15:case"end":return n.stop()}}),n)})),new Promise((function(e,t){var i=function(e){try{l(r.next(e))}catch(n){t(n)}},o=function(e){try{l(r.throw(e))}catch(n){t(n)}},l=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(i,o)};l((r=r.apply(n,a)).next())}));var n,a,r},isHighlightVisible:a.useCallback((function(e){return d.findIndex((function(t){return t.url===e}))>=0}),[d])}}},function(e,t,n){"use strict";var i=n(34).default,o=n(0),a=n(45),r=n(43);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=l(o),s=Object.defineProperty,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=function(e,t,n){return t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},f=function(e,t){for(var n in t||(t={}))d.call(t,n)&&g(e,n,t[n]);if(u){var o,a=i(u(t));try{for(a.s();!(o=a.n()).done;){n=o.value;h.call(t,n)&&g(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e};e.exports=function(e){var t=e.visible,n=e.style,i=e.onClick,o=e.loading,l={background:"rgba(0, 0, 0, 0.74)",color:"white",borderRadius:2,padding:6,fontSize:16},s=t?a.EyeFilled:a.EyeInvisibleFilled;return o&&(s=a.LoadingOutlined,Object.assign(l,{borderRadius:100})),c.default.createElement(s,{className:r.getClassName("point-cloud-highlight-view"),style:f(f({},l),n),onClick:o?function(){}:i})}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='25' height='24' viewBox='0 0 25 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M22.5 1C22.7652 1 23.0196 1.10536 23.2071 1.29289C23.3946 1.48043 23.5 1.73478 23.5 2V22C23.5 22.2652 23.3946 22.5196 23.2071 22.7071C23.0196 22.8946 22.7652 23 22.5 23H2.5C2.23478 23 1.98043 22.8946 1.79289 22.7071C1.60536 22.5196 1.5 22.2652 1.5 22V2C1.5 1.73478 1.60536 1.48043 1.79289 1.29289C1.98043 1.10536 2.23478 1 2.5 1H22.5ZM22.5 0H2.5C1.96957 0 1.46086 0.210714 1.08579 0.585786C0.710714 0.960859 0.5 1.46957 0.5 2V22C0.5 22.5304 0.710714 23.0391 1.08579 23.4142C1.46086 23.7893 1.96957 24 2.5 24H22.5C23.0304 24 23.5391 23.7893 23.9142 23.4142C24.2893 23.0391 24.5 22.5304 24.5 22V2C24.5 1.46957 24.2893 0.960859 23.9142 0.585786C23.5391 0.210714 23.0304 0 22.5 0V0Z' fill='white' /%3e %3cpath d='M3.45881 16V7.27273H8.9304V8.40625H4.77557V11.0653H8.64489V12.1946H4.77557V14.8665H8.98153V16H3.45881ZM15.4918 11.0526L14.337 11.2571C14.2887 11.1094 14.212 10.9687 14.1069 10.8352C14.0046 10.7017 13.8654 10.5923 13.6893 10.5071C13.5131 10.4219 13.293 10.3793 13.0288 10.3793C12.668 10.3793 12.3668 10.4602 12.1254 10.6222C11.8839 10.7812 11.7631 10.9872 11.7631 11.2401C11.7631 11.4588 11.8441 11.6349 12.006 11.7685C12.168 11.902 12.4293 12.0114 12.7901 12.0966L13.8299 12.3352C14.4322 12.4744 14.881 12.6889 15.1765 12.9787C15.4719 13.2685 15.6197 13.6449 15.6197 14.108C15.6197 14.5 15.506 14.8494 15.2788 15.1562C15.0543 15.4602 14.7404 15.6989 14.337 15.8722C13.9364 16.0455 13.4719 16.1321 12.9435 16.1321C12.2106 16.1321 11.6126 15.9759 11.1495 15.6634C10.6864 15.348 10.4023 14.9006 10.2972 14.321L11.5288 14.1335C11.6055 14.4545 11.7631 14.6974 12.0018 14.8622C12.2404 15.0241 12.5515 15.1051 12.935 15.1051C13.3526 15.1051 13.6864 15.0185 13.9364 14.8452C14.1864 14.669 14.3114 14.4545 14.3114 14.2017C14.3114 13.9972 14.2347 13.8253 14.0813 13.6861C13.9308 13.5469 13.6992 13.4418 13.3867 13.3707L12.2788 13.1278C11.668 12.9886 11.2163 12.767 10.9237 12.4631C10.6339 12.1591 10.489 11.7741 10.489 11.3082C10.489 10.9219 10.5969 10.5838 10.8129 10.294C11.0288 10.0043 11.3271 9.77841 11.7077 9.61648C12.0884 9.4517 12.5245 9.36932 13.016 9.36932C13.7234 9.36932 14.2802 9.52273 14.6864 9.82955C15.0927 10.1335 15.3612 10.5412 15.4918 11.0526ZM19.7777 16.1321C19.1442 16.1321 18.5987 15.9886 18.1413 15.7017C17.6868 15.4119 17.3374 15.0128 17.093 14.5043C16.8487 13.9957 16.7266 13.4134 16.7266 12.7571C16.7266 12.0923 16.8516 11.5057 17.1016 10.9972C17.3516 10.4858 17.7038 10.0866 18.1584 9.79972C18.6129 9.51278 19.1484 9.36932 19.7649 9.36932C20.2621 9.36932 20.7053 9.46165 21.0945 9.64631C21.4837 9.82812 21.7976 10.0838 22.0362 10.4134C22.2777 10.7429 22.4212 11.1278 22.4666 11.5682H21.2266C21.1584 11.2614 21.0021 10.9972 20.7578 10.7756C20.5163 10.554 20.1925 10.4432 19.7862 10.4432C19.4311 10.4432 19.12 10.5369 18.853 10.7244C18.5888 10.9091 18.3828 11.1733 18.2351 11.517C18.0874 11.858 18.0135 12.2614 18.0135 12.7273C18.0135 13.2045 18.0859 13.6165 18.2308 13.9631C18.3757 14.3097 18.5803 14.5781 18.8445 14.7685C19.1115 14.9588 19.4254 15.054 19.7862 15.054C20.0277 15.054 20.2464 15.0099 20.4425 14.9219C20.6413 14.831 20.8075 14.7017 20.9411 14.5341C21.0774 14.3665 21.1726 14.1648 21.2266 13.929H22.4666C22.4212 14.3523 22.2834 14.7301 22.0533 15.0625C21.8232 15.3949 21.5149 15.6562 21.1286 15.8466C20.745 16.0369 20.2947 16.1321 19.7777 16.1321Z' fill='white' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='25' height='24' viewBox='0 0 25 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M22.5 1C22.7652 1 23.0196 1.10536 23.2071 1.29289C23.3946 1.48043 23.5 1.73478 23.5 2V22C23.5 22.2652 23.3946 22.5196 23.2071 22.7071C23.0196 22.8946 22.7652 23 22.5 23H2.5C2.23478 23 1.98043 22.8946 1.79289 22.7071C1.60536 22.5196 1.5 22.2652 1.5 22V2C1.5 1.73478 1.60536 1.48043 1.79289 1.29289C1.98043 1.10536 2.23478 1 2.5 1H22.5ZM22.5 0H2.5C1.96957 0 1.46086 0.210714 1.08579 0.585786C0.710714 0.960859 0.5 1.46957 0.5 2V22C0.5 22.5304 0.710714 23.0391 1.08579 23.4142C1.46086 23.7893 1.96957 24 2.5 24H22.5C23.0304 24 23.5391 23.7893 23.9142 23.4142C24.2893 23.0391 24.5 22.5304 24.5 22V2C24.5 1.46957 24.2893 0.960859 23.9142 0.585786C23.5391 0.210714 23.0304 0 22.5 0V0Z' fill='white' /%3e %3cpath d='M11.0237 12L14.3567 15.2C14.4018 15.2425 14.4377 15.2938 14.4622 15.3507C14.4868 15.4077 14.4995 15.469 14.4995 15.531C14.4995 15.593 14.4868 15.6543 14.4622 15.7112C14.4377 15.7682 14.4018 15.8195 14.3567 15.862C14.2637 15.9503 14.1404 15.9996 14.0122 15.9996C13.8839 15.9996 13.7606 15.9503 13.6677 15.862L9.98966 12.331C9.94456 12.2885 9.90864 12.2372 9.88408 12.1802C9.85952 12.1233 9.84685 12.062 9.84685 12C9.84685 11.938 9.85952 11.8767 9.88408 11.8197C9.90864 11.7628 9.94456 11.7115 9.98966 11.669L13.6677 8.13699C13.7606 8.04864 13.8839 7.99937 14.0122 7.99937C14.1404 7.99937 14.2637 8.04864 14.3567 8.13699C14.4019 8.17954 14.438 8.2309 14.4626 8.28791C14.4873 8.34492 14.5 8.40638 14.5 8.46849C14.5 8.53061 14.4873 8.59206 14.4626 8.64907C14.438 8.70609 14.4019 8.75745 14.3567 8.79999L11.0237 12Z' fill='white' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='25' height='24' viewBox='0 0 25 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M2.5 1C2.23478 1 1.98043 1.10536 1.79289 1.29289C1.60536 1.48043 1.5 1.73478 1.5 2V22C1.5 22.2652 1.60536 22.5196 1.79289 22.7071C1.98043 22.8946 2.23478 23 2.5 23H22.5C22.7652 23 23.0196 22.8946 23.2071 22.7071C23.3946 22.5196 23.5 22.2652 23.5 22V2C23.5 1.73478 23.3946 1.48043 23.2071 1.29289C23.0196 1.10536 22.7652 1 22.5 1H2.5ZM2.5 0H22.5C23.0304 0 23.5391 0.210714 23.9142 0.585786C24.2893 0.960859 24.5 1.46957 24.5 2V22C24.5 22.5304 24.2893 23.0391 23.9142 23.4142C23.5391 23.7893 23.0304 24 22.5 24H2.5C1.96957 24 1.46086 23.7893 1.08579 23.4142C0.710714 23.0391 0.5 22.5304 0.5 22V2C0.5 1.46957 0.710714 0.960859 1.08579 0.585786C1.46086 0.210714 1.96957 0 2.5 0V0Z' fill='white' /%3e %3cpath d='M13.9763 12L10.6433 15.2C10.5982 15.2425 10.5623 15.2938 10.5378 15.3507C10.5132 15.4077 10.5005 15.469 10.5005 15.531C10.5005 15.593 10.5132 15.6543 10.5378 15.7112C10.5623 15.7682 10.5982 15.8195 10.6433 15.862C10.7363 15.9503 10.8596 15.9996 10.9878 15.9996C11.1161 15.9996 11.2394 15.9503 11.3323 15.862L15.0103 12.331C15.0554 12.2885 15.0914 12.2372 15.1159 12.1802C15.1405 12.1233 15.1531 12.062 15.1531 12C15.1531 11.938 15.1405 11.8767 15.1159 11.8197C15.0914 11.7628 15.0554 11.7115 15.0103 11.669L11.3323 8.13699C11.2394 8.04864 11.1161 7.99937 10.9878 7.99937C10.8596 7.99937 10.7363 8.04864 10.6433 8.13699C10.5981 8.17954 10.562 8.2309 10.5374 8.28791C10.5127 8.34492 10.5 8.40638 10.5 8.46849C10.5 8.53061 10.5127 8.59206 10.5374 8.64907C10.562 8.70609 10.5981 8.75745 10.6433 8.79999L13.9763 12Z' fill='white' /%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(51).default,o=n(34).default,a=n(36),r=n(282),l=n(593),c=n(63),s=n(109),u=n(0),d=n(32),h=n(25),g=n(35),f=n(86),v=n(146),p=n(96),b=n(30),m=n(85),y=n(216),C=n(594),I=n(145),x=n(595),w=n(26),k=n(49),S=Object.defineProperty,P=Object.defineProperties,L=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=function(e,t,n){return t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},D=function(e,t){for(var n in t||(t={}))O.call(t,n)&&E(e,n,t[n]);if(A){var i,a=o(A(t));try{for(a.s();!(i=a.n()).done;){n=i.value;T.call(t,n)&&E(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},M=function(e,t){return P(e,L(t))},N=d.cTool.EPolygonPattern,R=g.connect(f.a2MapStateToProps,null,null,{context:b.LabelBeeContext})((function(e){var t=e.currentData,n=e.config,o=e.checkMode,g=e.configString,f=e.imgIndex,S=e.toolInstanceRef,P=u.useContext(a.PointCloudContext),L=c.useSingleBox(),A=L.changeSelectedBoxValid,O=L.selectNextBox,T=L.selectPrevBox,E=L.updateSelectedBox,R=L.deleteSelectedPointCloudBoxAndPolygon,B=s.useSphere(),j=B.selectedSphere,_=B.updatePointCloudSphere,H=v.useStatus(),V=H.clearAllResult,F=H.updatePointCloudPattern,Z=l.useBoxes({config:n}),z=Z.copySelectedBoxes,U=Z.pasteSelectedBoxes,G=Z.copiedBoxes,W=r.useRotate({currentData:t}).updateRotate,K=p.usePointCloudViews(),Y=K.updatePointCloudData,X=K.topViewSelectedChanged,J=m.useHistory(),Q=J.redo,q=J.undo,$=J.pushHistoryWithList,ee=J.pushHistoryUnderUpdatePolygon,te=J.pushHistoryUnderUpdateLine,ne=b.useDispatch(),ie=y.useAttribute().syncThreeViewsAttribute,oe=C.useConfig(),ae=oe.syncAllViewsConfig,re=oe.reRenderTopViewRange,le=I.usePolygon().selectedPolygon,ce=x.useLine().selectedLine,se=w.useTranslation().t,ue=function(e){var t,n=P.topViewInstance;n&&(null==(t=n.pointCloud2dOperation)||t.updateSelectedPolygonsPoints(e))},de=function(e){if(d.CommonToolUtils.hotkeyFilter(e)&&!0!==o){var t=e.key.toLocaleLowerCase();e.ctrlKey?function(e,t){switch(e){case"c":z();break;case"v":U();break;case"a":t.preventDefault(),P.selectedAllBoxes();break;case"z":t.shiftKey?Q():q()}}(t,e):function(e,t){var o,a,r=P.topViewInstance,l=P.mainViewInstance;if(r){var c=r.pointCloud2dOperation;switch(e){case"q":W(2);break;case"e":W(-2);break;case"g":W(180);break;case"u":var s,u=c.pattern===N.Normal?d.EToolName.Rect:d.EToolName.Polygon;F(u);var g=(i(s={},d.EToolName.Polygon,se("PolygonPattern")),i(s,d.EToolName.Rect,se("RectPattern")),s);h.message.success(se("ChangePatternMsg",{pattern:g[u]})),c.clearActiveStatus(),c.clearDrawingStatus();break;case"+":null==l||l.updatePointSize({zoomIn:!0});break;case"-":null==l||l.updatePointSize({zoomIn:!1});break;case"v":P.setPointCloudValid(!P.valid);break;case"tab":if(t.shiftKey){T();break}O(),t.preventDefault();break;case"f":A();break;case"arrowup":ue({y:-1});break;case"arrowdown":ue({y:1});break;case"arrowleft":ue({x:-1});break;case"arrowright":ue({x:1});break;case"delete":R();break;default:if((null==(o=n.attributeList)?void 0:o.length)>0){var f=d.AttributeUtils.getAttributeByKeycode(t.keyCode,n.attributeList);void 0!==f&&(null==(a=S.current)||a.setDefaultAttribute(f))}}}}(t,e)}};return u.useEffect((function(){if(P.topViewInstance)return window.addEventListener("keydown",de),function(){window.removeEventListener("keydown",de)}}),[P,G,n,P.pointCloudBoxList,P.polygonList]),u.useEffect((function(){ae(n)}),[g]),u.useEffect((function(){(null==n?void 0:n.radius)&&re(null==n?void 0:n.radius)}),[null==n?void 0:n.radius]),u.useEffect((function(){null==Y||Y()}),[f,P.mainViewInstance]),u.useEffect((function(){P.setHideAttributes([])}),[f]),u.useEffect((function(){S.current.setDefaultAttribute=function(e){var t,i,o,a;ie(e);var r=P.selectedPointCloudBox;if(r){r.attribute=e;var l=ne(k.PreDataProcess({tool:d.EPointCloudName.PointCloud,dataList:[r],stepConfig:n,action:"viewUpdateBox"}));r.valid=l[0].valid;var c=E(r);null==(o=null==(i=null==(t=null==P?void 0:P.topViewInstance)?void 0:t.pointCloud2dOperation)?void 0:i.setPolygonValidAndRender)||o.call(i,r.id,!0,r.valid),P.mainViewInstance&&X({newSelectedBox:r,newPointCloudList:c})}if(le&&ee(M(D({},le),{attribute:e})),ce&&te(M(D({},ce),{attribute:e})),j){var s=_(M(D({},j),{attribute:e}));P.mainViewInstance&&(null==(a=P.mainViewInstance)||a.generateSpheres(s),X({newSelectedSphere:j,newSphereList:s}))}},S.current.setSubAttribute=function(e,t){var n,o=P.selectedPointCloudBox;if(o){var a=null!=(n=null==o?void 0:o.subAttribute)?n:{};o.subAttribute=M(D({},a),i({},e,t)),E(o)}},S.current.clearResult=function(){null==V||V()},S.current.redo=function(){Q()},S.current.undo=function(){q()},S.current.setValid=function(e){S.current.valid=e,setTimeout((function(){P.setPointCloudValid(e),!1===e&&V()}))},S.current.setForbidOperation=function(e){var t,n;null==(n=null==(t=P.topViewInstance)?void 0:t.pointCloud2dOperation)||n.setForbidOperation(e),!0===e&&P.setSelectedIDs(void 0)},S.current.setShowDefaultCursor=function(e){var t,n;null==(n=null==(t=P.topViewInstance)?void 0:t.pointCloud2dOperation)||n.setShowDefaultCursor(e)},S.current.asyncData=function(e){setTimeout((function(){null==Y||Y(e)}))}}),[P.pointCloudBoxList,P.pointCloudSphereList,P.selectedID,P.valid,P.polygonList,P.lineList,P.mainViewInstance,P.ptSegmentInstance]),u.useEffect((function(){S.current.updateSegmentTool=function(e){var t;null==(t=P.ptSegmentInstance)||t.emit(e)},S.current.segmentInstance=P.ptSegmentInstance}),[P.ptSegmentInstance]),u.useEffect((function(){S.current.history={pushHistory:function(e){$({pointCloudBoxList:e})},initRecord:function(){}}}),[]),u.useEffect((function(){var e,t=null==(e=P.topViewInstance)?void 0:e.toolInstance;if(t&&!o){var n=function(e){ie(e)},i=function(e){h.message.error(e)},a=function(e){h.message.info(e)};return t.on("syncAttribute",n),t.on("messageError",i),t.on("messageInfo",a),function(){t.unbind("syncAttribute",n),t.unbind("messageError",i),t.unbind("messageInfo",a)}}}),[P.topViewInstance]),null}));e.exports=R},function(e,t,n){"use strict";var i=n(62).default,o=n(28).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(44),l=n(25),c=n(96),s=n(36),u=n(26);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(r);t.useBoxes=function(e){var t=e.config,n=a.useContext(s.PointCloudContext),r=n.selectedIDs,d=n.pointCloudBoxList,g=n.displayPointCloudList,f=n.setPointCloudResult,v=n.syncAllViewPointCloudColor,p=a.useState([]),b=o(p,2),m=b[0],y=b[1],C=c.usePointCloudViews().pointCloudBoxListUpdated,I=u.useTranslation(),x=I.t,w=I.i18n,k=a.useMemo((function(){return g.filter((function(e){return r.includes(e.id)}))}),[r,g]);return{copySelectedBoxes:a.useCallback((function(){k.length>0?y(h.default.cloneDeep(k)):(y([]),l.message.error(x("CopyEmptyInPointCloud")))}),[r,g,w.language]),pasteSelectedBoxes:a.useCallback((function(){if(0!==m.length){var e,n=(e=m,!0===t.trackConfigurable&&d.some((function(t){return e.some((function(e){return e.trackID===t.trackID}))}))),o=function(e){f(e),null==C||C(e),y([]),v(e)};if(n)l.Modal.confirm({title:x("HasDuplicateIDHeader"),content:x("HasDuplicateIDMsg"),onOk:function(){var e=d.filter((function(e){return!m.find((function(t){return t.trackID===e.trackID}))})).concat(m);o(e)}});else{var a=[].concat(i(g),i(m));o(a)}}else l.message.error(x("PasteEmptyInPointCloud"))}),[m,g,w.language]),copiedBoxes:m,selectedBoxes:k}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(36),o=n(0);t.useConfig=function(){var e=o.useContext(i.PointCloudContext),t=e.topViewInstance,n=e.sideViewInstance,a=e.backViewInstance,r=e.mainViewInstance;return{syncAllViewsConfig:function(e){[t,n,a].forEach((function(t){var n,i;null==t||t.updateConfig(e);var o=null==(i=null==(n=null==e?void 0:e.attributeList)?void 0:n[0])?void 0:i.value;o&&(null==t||t.pointCloud2dOperation.setDefaultAttribute(o))})),null==r||r.setConfig(e)},reRenderTopViewRange:function(e){var n,i,o;null==(i=null==(n=null==t?void 0:t.pointCloudInstance)?void 0:n.generateRange)||i.call(n,e),null==(o=null==t?void 0:t.pointCloudInstance)||o.render()}}}},function(e,t,n){"use strict";var i=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(36),r=n(85),l=Object.defineProperty,c=Object.defineProperties,s=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},f=function(e,t){for(var n in t||(t={}))d.call(t,n)&&g(e,n,t[n]);if(u){var o,a=i(u(t));try{for(a.s();!(o=a.n()).done;){n=o.value;h.call(t,n)&&g(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e};t.useLine=function(){var e=o.useContext(a.PointCloudContext),t=e.lineList,n=e.setLineList,i=e.selectedID,l=r.useHistory(),u=l.addHistory,d=l.pushHistoryWithList,h=t.find((function(e){return e.id===i}));return{addLine:function(e){n(t.concat(e)),u({newLine:e})},deleteLine:function(e){var i=t.filter((function(t){return t.id!==e})).map((function(e){return f({},e)}));n(i),d({lineList:i})},selectedLine:h,updateSelectedLine:function(e){h&&n(t.map((function(t){return t.id===i?e:t})))},updateLineValidByID:function(e){t.find((function(t){return t.id===e}))&&n(t.map((function(t){return t.id===e?(n=f({},t),i={valid:!t.valid},c(n,s(i))):t;var n,i})))}}}},function(e,t,n){"use strict";var i=n(0),o=n(86),a=n(35),r=n(30),l=n(36),c=n(32),s=n(17),u=n(216),d=a.connect(o.a2MapStateToProps,null,null,{context:r.LabelBeeContext})((function(e){var t=e.checkMode,n=e.currentData,o=e.imgIndex,a=e.highlightAttribute,r=(e.config,e.toolInstanceRef),d=u.useAttribute().updateSegmentAttribute,h=i.useContext(l.PointCloudContext),g=h.ptSegmentInstance,f=h.setSegmentation;i.useEffect((function(){var e;if(g&&n.url)return g.emit("clearStash"),g.emit("clearAllSegmentData"),g.loadPCDFile(null!=(e=null==n?void 0:n.url)?e:"").then((function(){var e,t,i=s.PointCloudUtils.getSegmentFromResultList(null!=(e=null==n?void 0:n.result)?e:"");null==(t=null==g?void 0:g.store)||t.updateCurrentSegment(i)})),g.on("syncSegmentData",f),function(){g.unbind("syncSegmentData",f)}}),[o,g]),i.useEffect((function(){var e;null==(e=null==g?void 0:g.store)||e.highlightPointsByAttribute(null!=a?a:"")}),[a,g]);var v=function(e){c.CommonToolUtils.hotkeyFilter(e)&&!0!==t&&function(e,t){var n,i;switch(e){case"h":null==g||g.emit("LassoSelector");break;case"j":null==g||g.emit("CircleSelector");break;case"u":null==g||g.emit("setSegmentMode",s.EPointCloudSegmentMode.Add);break;case"i":null==g||g.emit("setSegmentMode",s.EPointCloudSegmentMode.Remove);break;case"enter":null==g||g.emit("updateCheck2Edit");break;case"delete":null==g||g.emit("deleteSelectedSegmentData",null==(i=null==(n=g.store)?void 0:n.cacheSegData)?void 0:i.id)}}(e.key.toLocaleLowerCase())};return i.useEffect((function(){return window.addEventListener("keydown",v),r.current.setDefaultAttribute=function(e){d(e)},function(){window.removeEventListener("keydown",v)}}),[g]),i.useEffect((function(){r.current.clearResult=function(){h.ptSegmentInstance&&h.ptSegmentInstance.emit("clearAllSegmentData")}}),[h.pointCloudBoxList,h.valid,h.polygonList,h.lineList,h.pointCloudSphereList,h.ptSegmentInstance]),null}));e.exports=d},function(e,t,n){"use strict";var i=n(95),o=n(86),a=n(30),r=n(43),l=n(32),c=n(0),s=n(35),u=n(36),d=n(17);function h(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var g=h(c),f=s.connect(o.a2MapStateToProps,null,null,{context:a.LabelBeeContext})((function(e){e.currentData;var t,n,o=e.config,a=e.checkMode,s=c.useRef(null),h=c.useContext(u.PointCloudContext),f=h.setPtSegmentInstance,v=h.setDefaultAttribute,p=h.ptSegmentInstance,b=i(s),m=null==(n=null==(t=null==o?void 0:o.attributeList)?void 0:t[0])?void 0:n.value;return c.useEffect((function(){var e;if((null==b?void 0:b.width)&&s.current&&!p){var t=new l.PointCloud({container:s.current,isOrthographicCamera:!0,isSegment:!0,orthographicParams:d.PointCloudUtils.getDefaultOrthographicParams(b),config:o,checkMode:a});null==(e=t.store)||e.setAttribute(m),v(m),f(t)}}),[b]),c.useEffect((function(){p&&(p.initRenderer(),p.initOrthographicCamera(d.PointCloudUtils.getDefaultOrthographicParams(b)),p.render())}),[b]),g.default.createElement("div",{className:r.getClassName("point-cloud-layout"),ref:s})}));e.exports=f},function(e,t,n){"use strict";var i=n(28).default,o=n(0),a=n(43),r=n(599),l=n(600),c=n(36),s=n(17),u=n(26);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(o),g=function(e){var t=e.infoList,n=u.useTranslation().t;return t?h.default.createElement("div",{className:a.getClassName("point-cloud-status","info")},t.map((function(e){return h.default.createElement("div",{key:e.key},h.default.createElement("span",null,n(e.key),"\uff1a "),h.default.createElement("span",null,e.value))}))):null};e.exports=function(){var e,t,n,d,f,v=u.useTranslation().t,p=o.useContext(c.PointCloudContext),b=p.ptSegmentInstance,m=p.setDefaultAttribute,y=o.useState({segmentStatus:s.EPointCloudSegmentStatus.Ready}),C=i(y,2),I=C[0],x=C[1];o.useEffect((function(){if(b){var e=function(e){x(e),e.cacheSegData&&m(e.cacheSegData.attribute)};return null==b||b.on("syncPointCloudStatus",e),function(){null==b||b.unbind("syncPointCloudStatus",e)}}}),[b]);var w=I.segmentStatus;if(w===s.EPointCloudSegmentStatus.Ready)return null;var k=w===s.EPointCloudSegmentStatus.Check,S=w===s.EPointCloudSegmentStatus.Edit,P=null,L=[{key:"SelectedPoints",value:(null!=(n=null==(t=null==(e=I.cacheSegData)?void 0:e.points)?void 0:t.length)?n:0)/3},{key:"Attribute",value:null!=(f=null==(d=I.cacheSegData)?void 0:d.attribute)?f:""}];return k&&(P=h.default.createElement("div",{className:a.getClassName("point-cloud-status","operation")},h.default.createElement("span",{className:a.getClassName("point-cloud-status","button"),onClick:function(){null==b||b.emit("updateCheck2Edit")}},v("EnterEditMode"),"(Enter)"))),S&&(P=h.default.createElement("div",{className:a.getClassName("point-cloud-status","operation")},h.default.createElement("span",{className:a.getClassName("point-cloud-status","button"),onClick:function(){var e;null==b||b.emit("addStash2Store"),(null==(e=null==b?void 0:b.store)?void 0:e.segmentFocusMode)===s.EPointCloudSegmentFocusMode.Focus&&(null==b||b.emit("setSegmentFocusMode",s.EPointCloudSegmentFocusMode.Unfocus))}},h.default.createElement("img",{className:a.getClassName("point-cloud-status","icon"),src:r}),v("Finish")),h.default.createElement("span",{className:a.getClassName("point-cloud-status","button"),onClick:function(){var e;null==b||b.emit("clearStash"),(null==(e=null==b?void 0:b.store)?void 0:e.segmentFocusMode)===s.EPointCloudSegmentFocusMode.Focus&&(null==b||b.emit("setSegmentFocusMode",s.EPointCloudSegmentFocusMode.Unfocus))}},h.default.createElement("img",{className:a.getClassName("point-cloud-status","icon"),src:l}),v("Cancel")))),h.default.createElement(h.default.Fragment,null,P,h.default.createElement(g,{infoList:L}))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='13.666504' height='9.666687' viewBox='0 0 13.6665 9.66669' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cpath id='%e6%ad%a3%e7%a1%ae' d='M13.4761 1.1333L5.30957 9.46661C5.18164 9.59692 5.00635 9.66919 4.82373 9.66663C4.6416 9.664 4.46826 9.58679 4.34424 9.45294L0.177734 4.95294C-0.0727539 4.6828 -0.0566406 4.26099 0.213867 4.0108C0.483887 3.76068 0.905762 3.77692 1.15576 4.04706L4.84717 8.03357L12.5239 0.200073C12.7817 -0.0629272 13.2036 -0.0671997 13.4668 0.190552C13.7295 0.448242 13.7339 0.8703 13.4761 1.1333Z' fill-rule='evenodd' fill='%23333333'/%3e %3cdefs/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='10.450195' height='10.420227' viewBox='0 0 10.4502 10.4202' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cpath id='%e9%94%99%e8%af%af' d='M10.1914 0.194397C9.93066 -0.0654907 9.50879 -0.0646973 9.24854 0.196106L5.21533 4.2442L1.16699 0.210693C0.90625 -0.0491943 0.484375 -0.0484619 0.224121 0.212402C-0.0356445 0.473206 -0.034668 0.895325 0.226074 1.15521L4.27393 5.18872L0.194336 9.28302C-0.0654297 9.54382 -0.0649414 9.96594 0.196289 10.2258C0.457031 10.4857 0.878906 10.4849 1.13867 10.2241L5.21875 6.12982L9.31299 10.2095C9.57373 10.4694 9.99609 10.4687 10.2559 10.2079C10.5156 9.94702 10.5151 9.52496 10.2539 9.26508L6.15967 5.1853L10.1934 1.13721C10.4531 0.876404 10.4526 0.454285 10.1914 0.194397Z' fill-rule='evenodd' fill='%23333333'/%3e %3cdefs/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(28).default,o=n(43),a=n(25),r=n(602),l=n(603),c=n(0),s=n(604),u=n(36),d=n(17),h=n(26);function g(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var f=g(c);e.exports=function(){var e,t,n,g,v,p,b,m,y=h.useTranslation().t,C=c.useContext(u.PointCloudContext).ptSegmentInstance,I=c.useState(null!=(t=null==(e=null==C?void 0:C.store)?void 0:e.segmentMode)?t:d.EPointCloudSegmentMode.Add),x=i(I,2),w=x[0],k=x[1],S=c.useState(null!=(g=null==(n=null==C?void 0:C.store)?void 0:n.segmentCoverMode)?g:d.EPointCloudSegmentCoverMode.Cover),P=i(S,2),L=P[0],A=P[1],O=c.useState(null!=(p=null==(v=null==C?void 0:C.store)?void 0:v.segmentFocusMode)?p:d.EPointCloudSegmentFocusMode.Unfocus),T=i(O,2),E=T[0],D=T[1],M=c.useState(null!=(m=null==(b=null==C?void 0:C.store)?void 0:b.hideSegment)&&m),N=i(M,2),R=N[0],B=N[1],j=c.useState({segmentStatus:d.EPointCloudSegmentStatus.Ready}),_=i(j,2),H=_[0],V=_[1];c.useEffect((function(){if(C){var e=function(e){k(e)},t=function(e){A(e)},n=function(e){D(e)},i=function(e){B(e)},o=function(e){V(e)};return C.on("setSegmentMode",e),C.on("setSegmentCoverMode",t),C.on("setSegmentFocusMode",n),C.on("switchHideSegment",i),C.on("syncPointCloudStatus",o),function(){C.unbind("setSegmentMode",e),C.unbind("setSegmentCoverMode",t),C.unbind("setSegmentFocusMode",n),C.unbind("switchHideSegment",i),C.unbind("syncPointCloudStatus",o)}}}),[C]);var F=w===d.EPointCloudSegmentMode.Add,Z=!0===R||!(null==H?void 0:H.cacheSegData),z=E===d.EPointCloudSegmentFocusMode.Focus;return f.default.createElement("div",{className:o.getClassName("point-cloud-toolbar")},f.default.createElement(a.Switch,{checkedChildren:"+",unCheckedChildren:"-",checked:F,onChange:function(e){null==C||C.emit("setSegmentMode",e?d.EPointCloudSegmentMode.Add:d.EPointCloudSegmentMode.Remove)}}),f.default.createElement("div",{className:o.getClassName("point-cloud-toolbox"),onClick:function(){null==C||C.emit("setSegmentCoverMode",L===d.EPointCloudSegmentCoverMode.Cover?d.EPointCloudSegmentCoverMode.Uncover:d.EPointCloudSegmentCoverMode.Cover),a.message.info({content:y(L===d.EPointCloudSegmentCoverMode.Cover?"PointCloudUncoverMode":"PointCloudCoverMode"),icon:function(){return null}})}},f.default.createElement("img",{src:L===d.EPointCloudSegmentCoverMode.Cover?r:l})),f.default.createElement(a.Tooltip,{title:Z?y(!0===R?"PointCloudHideFocusInvalid_hide":"PointCloudHideFocusInvalid_none"):""},f.default.createElement("div",{className:o.getClassName("point-cloud-toolbox"),onClick:function(){Z||(null==C||C.emit("setSegmentFocusMode",E===d.EPointCloudSegmentFocusMode.Focus?d.EPointCloudSegmentFocusMode.Unfocus:d.EPointCloudSegmentFocusMode.Focus),a.message.success(y(E===d.EPointCloudSegmentFocusMode.Focus?"PointCloudUnfocusMode":"PointCloudFocusMode")))}},f.default.createElement(s.FocusModeSvg,{color:Z?"#CCC":E===d.EPointCloudSegmentFocusMode.Focus?"#1664FF":"#FFF"}))),f.default.createElement(a.Tooltip,{title:z?y("PointCloudHideSegmentInvalid"):""},f.default.createElement("div",{className:o.getClassName("point-cloud-toolbox"),onClick:function(){z||(null==C||C.emit("switchHideSegment",!R),a.message.success(y(!0===R?"PointCloudShowSegment":"PointCloudHideSegment")))}},f.default.createElement(s.HidePointCloudSegmentSvg,{color:z?"#CCC":R?"#1664FF":"#FFF"}))))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3ctitle%3eFrame 1312316531%3c/title%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='24' height='24'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7%e4%bc%98%e5%8c%96' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='%e7%82%b9%e4%ba%91%e5%b7%a5%e5%85%b7-%e5%88%86%e5%89%b2%e6%a8%a1%e5%bc%8f' transform='translate(-1432.000000%2c -88.000000)'%3e %3cg id='%e7%bc%96%e7%bb%84-10' transform='translate(1352.000000%2c 84.000000)'%3e %3cg id='Frame-1312316531' transform='translate(80.000000%2c 4.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='Frame-1312316531-(Background/Mask)'%3e%3c/g%3e %3cg id='Group-1312317594' mask='url(%23mask-2)'%3e %3cg transform='translate(3.000000%2c 3.000000)'%3e %3cpath d='M0%2c0 L14%2c0 L14%2c14 L0%2c14 L0%2c0 Z' id='Vector-205' stroke='white' stroke-width='2' fill='none' stroke-linejoin='round' stroke-dasharray='0%2c0'%3e%3c/path%3e %3cpath d='M4%2c3 L17%2c3 C17.5522847%2c3 18%2c3.44771525 18%2c4 L18%2c17 C18%2c17.5522847 17.5522847%2c18 17%2c18 L4%2c18 C3.44771525%2c18 3%2c17.5522847 3%2c17 L3%2c4 C3%2c3.44771525 3.44771525%2c3 4%2c3 Z' id='Vector-206' stroke='none' fill='white' fill-rule='evenodd'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='24.000000' height='24.000000' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cmask id='mask155_5132' mask-type='alpha' maskUnits='userSpaceOnUse' x='0.000000' y='0.000000' width='24.000000' height='24.000000'%3e %3crect id='Frame 1312316531 (Background/Mask)' width='24.000000' height='24.000000' fill='%23C4C4C4'/%3e %3c/mask%3e %3cg mask='url(%23mask155_5132)'%3e %3cpath id='Vector 205' d='M3 3L17 3L17 17L3 17L3 3Z' fill-rule='evenodd' fill='white'/%3e %3cpath id='Vector 205' d='M17 3L17 17L3 17L3 3L17 3Z' stroke='white' stroke-width='2.000000' stroke-linejoin='round' stroke-dasharray='0 0'/%3e %3cpath id='Vector 206' d='M6 7C6 6.44775 6.44775 6 7 6L20 6C20.5522 6 21 6.44775 21 7L21 20C21 20.5522 20.5522 21 20 21L7 21C6.44775 21 6 20.5522 6 20L6 7ZM19 8L8 8L8 19L19 19L19 8Z' fill-rule='evenodd' fill='white'/%3e %3c/g%3e %3cdefs/%3e%3c/svg%3e"},function(e,t,n){"use strict";function i(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0));t.FocusModeSvg=function(e){var t,n,i,a,r,l;return o.default.createElement("svg",{width:"24.000000",height:"24.000000",viewBox:"0 0 24 24",fill:"none"},o.default.createElement("g",null,o.default.createElement("path",{id:"Vector",d:"M14.5811 6.89233L14.5811 3.22339L9.58105 3.22339L9.58105 6.89233C8.08643 7.75684 7.08105 9.37268 7.08105 11.2234C7.08105 13.9849 9.31982 16.2234 12.0811 16.2234C14.8423 16.2234 17.0811 13.9849 17.0811 11.2234C17.0811 9.37268 16.0757 7.75684 14.5811 6.89233ZM14.5811 6.89233C13.8457 6.46692 12.9917 6.22339 12.0811 6.22339C11.1704 6.22339 10.3164 6.46692 9.58105 6.89233L9.58105 7.22339L14.5811 7.22339L14.5811 6.89233Z",clipRule:"evenodd",fillRule:"evenodd",fill:null!=(t=e.color)?t:"#FFFFFF",fillOpacity:"1.000000"}),o.default.createElement("path",{id:"Vector 170",d:"M2.36572 10.2231L5.41895 10.2231",stroke:null!=(n=e.color)?n:"#FFFFFF",strokeWidth:"2.000000",strokeDasharray:"0 0"}),o.default.createElement("path",{id:"Vector 172",d:"M11.0811 17.7231L11.0811 20.7763",stroke:null!=(i=e.color)?i:"#FFFFFF",strokeWidth:"2.000000",strokeDasharray:"0 0"}),o.default.createElement("path",{id:"Vector 173",d:"M17.0015 15.6702L19.1602 17.8291",stroke:null!=(a=e.color)?a:"#FFFFFF",strokeWidth:"2.000000",strokeDasharray:"0 0"}),o.default.createElement("path",{id:"Vector 174",d:"M4.58105 17.8293L6.73975 15.6704",stroke:null!=(r=e.color)?r:"#FFFFFF",strokeWidth:"2.000000",strokeDasharray:"0 0"}),o.default.createElement("path",{id:"Vector 171",d:"M18.5811 10.2231L21.6343 10.2231",stroke:null!=(l=e.color)?l:"#FFFFFF",strokeWidth:"2.000000",strokeDasharray:"0 0"})),o.default.createElement("defs",null))},t.HidePointCloudSegmentSvg=function(e){var t,n,i;return o.default.createElement("svg",{width:"24.000000",height:"24.000000",viewBox:"0 0 24 24",fill:"none"},o.default.createElement("g",null,o.default.createElement("rect",{id:"Rectangle 12065",x:"2.500000",y:"7.002930",rx:"0.500000",width:"8.127075",height:"10.000000",fill:null!=(t=e.color)?t:"#FFFFFF"}),o.default.createElement("rect",{id:"Rectangle 12066",x:"15.503906",y:"8.002930",width:"5.996094",height:"8.000000",stroke:null!=(n=e.color)?n:"#FFFFFF",strokeWidth:"2.000000",strokeLinejoin:"round",strokeDasharray:"0 0"}),o.default.createElement("path",{id:"Vector 183",d:"M12.5098 4L12.5098 20",stroke:null!=(i=e.color)?i:"#FFFFFF",strokeWidth:"2.000000",strokeLinejoin:"round",strokeLinecap:"round",strokeDasharray:"0 0"})),o.default.createElement("defs",null))}},function(e,t,n){"use strict";var i=n(51).default,o=n(28).default,a=n(5),r=n(0),l=n(280),c=n(283),s=n(43),u=n(26);function d(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var h=d(a),g=d(r);e.exports=function(e){var t,n=u.useTranslation().t,a=e.selectAndEnlarge,d=e.checkMode,f=window.innerWidth-360,v=window.innerHeight-400,p=r.useState({x:f,y:v}),b=o(p,2),m=b[0],y=b[1],C=r.useState({x:0,y:0}),I=o(C,2),x=I[0],w=I[1];r.useEffect((function(){return window.addEventListener("resize",k),function(){window.removeEventListener("resize",k),y({x:f,y:v}),w({x:0,y:0})}}),[]);var k=function(){var e=window.innerWidth-360,t=window.innerHeight-400;y({x:e,y:t})};return g.default.createElement("div",{className:h.default((t={},i(t,s.getClassName("point-cloud-container","left-bottom"),!0),i(t,s.getClassName("point-cloud-container","left-bottom-float"),!0),t)),style:{top:m.y,left:m.x,width:360,height:400,zIndex:a?1003:-1}},g.default.createElement("div",{className:s.getClassName("point-cloud-container","left-bottom-floatHeader"),draggable:"true",onDragStart:function(e){a&&w({x:e.clientX-m.x,y:e.clientY-m.y})},onDrag:function(e){var t=e.clientX-x.x,n=e.clientY-x.y;y({x:t,y:n})},onDragEnd:function(e){var t=e.clientX-x.x,n=e.clientY-x.y;y({x:t,y:n})}},n("DragAndDrop")),g.default.createElement(l,{checkMode:d}),g.default.createElement(c,{checkMode:d}))}},function(e,t,n){"use strict";var i=n(81).default,o=n(28).default,a=n(34).default,r=n(5),l=n(0),c=n(26),s=n(35),u=n(36),d=n(49),h=n(30),g=n(43),f=n(32),v=n(17),p=n(211);function b(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var m=b(r),y=b(l),C=Object.defineProperty,I=Object.defineProperties,x=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,P=function(e,t,n){return t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},L=function(e,t){for(var n in t||(t={}))k.call(t,n)&&P(e,n,t[n]);if(w){var i,o=a(w(t));try{for(o.s();!(i=o.n()).done;){n=i.value;S.call(t,n)&&P(e,n,t[n])}}catch(r){o.e(r)}finally{o.f()}}return e},A=function(e,t,n){return new Promise((function(i,o){var a=function(e){try{l(n.next(e))}catch(t){o(t)}},r=function(e){try{l(n.throw(e))}catch(t){o(t)}},l=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(a,r)};l((n=n.apply(e,t)).next())}))},O=function(e){var t=e.list,n=c.useTranslation().t,i=[n("TopView"),n("SideView"),n("BackView")];return y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:g.getClassName("point-cloud-predict-tracking-container","left")},i.map((function(e){return y.default.createElement("div",{className:g.getClassName("point-cloud-predict-tracking-container","title"),key:e},e)}))),y.default.createElement("div",{className:g.getClassName("point-cloud-predict-tracking-container","right")},t.map((function(e){return y.default.createElement("div",{className:g.getClassName("point-cloud-predict-tracking-container","item"),key:e.id},p.views.map((function(t){var n=e[t];return y.default.createElement("div",{className:g.getClassName("point-cloud-predict-tracking-container","view"),key:"".concat(e.id,"-").concat(t)},y.default.createElement("img",{src:n}))})))}))))},T=function(e){var t=y.default.useContext(u.PointCloudContext),n=h.useDispatch(),o=e.result,r=e.imgList,c=e.setList,s=l.useRef(null),g={width:600,height:600};return l.useEffect((function(){A(void 0,null,i().mark((function e(){var l,u,h,b,m,y,C,w,k,S,P,A,O,T,E;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(C=null==(l=t.mainViewInstance)?void 0:l.config)||!s.current){e.next=38;break}w=v.PointCloudUtils.getDefaultOrthographicParams(g),(k=new f.PointCloud({container:s.current,isOrthographicCamera:!0,orthographicParams:w,config:C})).setShowDirection(!1),S=a(o),e.prev=6,S.s();case 8:if((P=S.n()).done){e.next=28;break}return A=P.value,O=A.index,T=r[O].url?r[O].url:null!=(m=null==(b=null==(h=null==(u=r[O])?void 0:u.webPointCloudFile)?void 0:h.lidar)?void 0:b.url)?m:"",e.next=14,k.loadPCDFileByBox(T,A,{width:2,height:2,depth:2});case 14:return e.next=16,k.updateCameraZoom(t.zoom);case 16:return E=null==(y=v.toolStyleConverter.getColorFromConfig({attribute:A.attribute},(i=L({},C),I(i,x({attributeConfigurable:!0}))),{}))?void 0:y.fill,k.generateBox(A,E),e.next=20,p.sleep(500);case 20:return e.next=22,p.getViewsDataUrl(k,A,t.zoom);case 22:return e.next=24,k.removeObjectByName(A.id,"box");case 24:return e.next=26,k.clearPointCloudAndRender();case 26:e.next=8;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(6),S.e(e.t0);case 33:return e.prev=33,S.f(),e.finish(33);case 36:c(o),d.SetPointCloudLoading(n,!1);case 38:case"end":return e.stop()}var i}),e,null,[[6,30,33,36]])})))}),[]),y.default.createElement("div",{style:g,ref:s,className:"generate-view"})},E=s.connect((function(e){return{predictionResult:e.annotation.predictionResult,predictionResultVisible:e.annotation.predictionResultVisible,imgList:e.annotation.imgList}}),null,null,{context:h.LabelBeeContext})((function(e){var t=e.predictionResult,n=e.predictionResultVisible,a=e.imgList,r=l.useState([]),s=o(r,2),u=s[0],f=s[1],v=h.useDispatch(),p=c.useTranslation().t,b=function(){d.SetPredictResultVisible(v,!1),d.SetPredictResult(v,[]),f([])};return n?y.default.createElement(y.default.Fragment,null,u.length>0&&y.default.createElement("div",{className:g.getClassName("point-cloud-predict-tracking-container")},y.default.createElement("div",{className:g.getClassName("point-cloud-predict-tracking-container","bar")},y.default.createElement("div",{className:g.getClassName("point-cloud-predict-tracking-container","title")},y.default.createElement("div",null,p("ComplementaryTrackingPrediction"),u.length>0?"\uff08".concat(u.length,"\uff09"):""),y.default.createElement("div",{className:g.getClassName("point-cloud-predict-tracking-container","option")},y.default.createElement("div",{className:m.default([g.getClassName("point-cloud-predict-tracking-container","cancelOption"),g.getClassName("point-cloud-predict-tracking-container","button")]),onClick:b},p("Cancel")),y.default.createElement("div",{className:m.default([g.getClassName("point-cloud-predict-tracking-container","okOption"),g.getClassName("point-cloud-predict-tracking-container","button")]),onClick:function(){return A(void 0,null,i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.SetPointCloudLoading(v,!0),e.next=3,v(d.BatchUpdateImgListResultByPredictResult());case 3:d.SetPointCloudLoading(v,!1),b();case 5:case"end":return e.stop()}}),e)})))}},p("Apply")))),y.default.createElement("div",{className:g.getClassName("point-cloud-predict-tracking-container","content")},y.default.createElement(O,{list:u})))),t.length>0&&y.default.createElement(T,{result:t,imgList:a,setList:f})):null}));e.exports=E},function(e,t,n){"use strict";var i=n(51).default,o=n(28).default,a=n(41),r=n(25),l=n(0),c=n(144),s=n(127),u=n(43),d=n(42),h=n(30),g=n(284);function f(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var v=f(l),p=r.Layout,b=p.Sider,m=p.Content,y="".concat(a.prefix,"-layout");e.exports=function(e){var t,n,f,p=l.useState(-1),C=o(p,2),I=C[0],x=C[1];return v.default.createElement(r.Layout,{className:u.getClassName("layout","container")},v.default.createElement(h.LLMContext.Provider,{value:l.useMemo((function(){return{hoverKey:I,setHoverKey:x}}),[I])},null==e?void 0:e.leftSider,v.default.createElement(m,{className:d.classnames((t={},i(t,"".concat(y,"__content"),!0),i(t,"".concat(a.prefix,"-LLMLayout"),!0),t))},v.default.createElement(g,{checkMode:e.checkMode,showTips:e.showTips,tips:e.tips}),v.default.createElement(s.default,{style:null==(n=e.style)?void 0:n.footer,mode:e.mode,footer:null==e?void 0:e.footer})),v.default.createElement(b,{className:"".concat(y,"__side"),width:600,style:{position:"relative"}},v.default.createElement(c.default,{sider:null==e?void 0:e.sider,checkMode:null==e?void 0:e.checkMode}),null==(f=e.drawLayerSlot)?void 0:f.call(e,{}))))}},function(e,t,n){"use strict";var i=n(285),o=n(609),a=n(610);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(o);e.exports=function(){return i.createStore(a.rootReducer,i.applyMiddleware(l.default))}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(285),o=n(82),a=n(611),r=n(612),l=i.combineReducers({annotation:o.annotationReducer,imgAttribute:a.imgAttributeReducer,toolStyle:r.toolStyleReducer});t.rootReducer=l},function(e,t,n){"use strict";var i=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(73),a=Object.defineProperty,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=function(e,t,n){return t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},u=function(e,t){for(var n in t||(t={}))l.call(t,n)&&s(e,n,t[n]);if(r){var o,a=i(r(t));try{for(a.s();!(o=a.n()).done;){n=o.value;c.call(t,n)&&s(e,n,t[n])}}catch(u){a.e(u)}finally{a.f()}}return e},d={contrast:1,saturation:1,brightness:1,zoomRatio:1,isOriginalSize:!1};t.imgAttributeReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u({},d),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.IMAGE_ATTRIBUTE_ACTIONS.UPDATE_IMG_ATTRIBUTE:return u(u({},e),t.payload);case o.IMAGE_ATTRIBUTE_ACTIONS.INIT_IMG_ATTRIBUTE:return u({},d);default:return e}}},function(e,t,n){"use strict";var i=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(215),a=n(613),r=n(73),l=Object.defineProperty,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},h=function(e,t){for(var n in t||(t={}))s.call(t,n)&&d(e,n,t[n]);if(c){var o,a=i(c(t));try{for(a.s();!(o=a.n()).done;){n=o.value;u.call(t,n)&&d(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},g={color:1,width:2,borderOpacity:9,fillOpacity:9,toolColor:a.ToolStyleUtils.getToolColors(),attributeColor:a.ToolStyleUtils.getAttributeColors(),lineColor:a.ToolStyleUtils.getDefaultToolLineColors(),attributeLineColor:[o.NULL_COLOR].concat(o.COLORS_ARRAY)};t.toolStyleReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h({},g),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.TOOL_STYLE_ACTIONS.INIT_TOOL_STYLE_CONFIG:return h({},g);case r.TOOL_STYLE_ACTIONS.UPDATE_TOOL_STYLE_CONFIG:var n={},i=t.payload;return((null==i?void 0:i.borderOpacity)||(null==i?void 0:i.fillOpacity))&&Object.assign(n,a.ToolStyleUtils.initByOpacity(i.borderOpacity||e.borderOpacity,i.fillOpacity||e.fillOpacity)),h(h(h({},e),t.payload),n);default:return e}}},function(e,t,n){"use strict";var i=n(83).default,o=n(84).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(215);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=r(n(44)),c=.8,s=function(){function e(){i(this,e)}return o(e,null,[{key:"colorSplit",value:function(e,t){return e.split(" ").join("").replace(/,[0-9]+([.]{1}[0-9]+){0,1}\)/,",".concat(t.toFixed(2),")"))}},{key:"computeOpacity",value:function(e,t){var n,i,o=null==(i=((null==(n=t.split(" ").join("").match(/,[0-9]+([.]{1}[0-9]+){0,1}\)/))?void 0:n[0])||"").match(/[0-9]+([.]{1}[0-9]+){0,1}/))?void 0:i[0];return e*Number(o)}},{key:"getToolColors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,i=e.colorSplit,o=e.computeOpacity,r=l.default.cloneDeep(a.CHANGE_COLOR),s=a.BORDER_OPACITY_LEVEL[t],u=a.FILL_OPACITY_LEVEL[n];return Object.keys(a.CHANGE_COLOR).forEach((function(e){var t=l.default.cloneDeep(a.DEFAULT_COLOR);t.valid.stroke=i(a.CHANGE_COLOR[e].valid,o(s,a.CHANGE_COLOR[e].valid)),t.valid.fill=i(a.CHANGE_COLOR[e].valid,o(u,a.CHANGE_COLOR[e].valid)*c),t.validSelected.stroke=i(a.CHANGE_COLOR[e].select.stroke,o(s,a.CHANGE_COLOR[e].select.stroke)),t.validSelected.fill=i(a.CHANGE_COLOR[e].select.fill,o(u,a.CHANGE_COLOR[e].select.fill)*c),t.validHover.stroke=i(a.CHANGE_COLOR[e].hover,o(s,a.CHANGE_COLOR[e].hover)),t.validHover.fill=i(a.CHANGE_COLOR[e].hover,o(u,a.CHANGE_COLOR[e].hover)*c),t.invalid.stroke=i(t.invalid.stroke,o(s,t.invalid.stroke)),t.invalid.fill=i(t.invalid.stroke,o(u,t.invalid.stroke)*c),t.invalidSelected.stroke=i(t.invalidSelected.stroke,o(s,t.invalidSelected.stroke)),t.invalidSelected.fill=i(t.invalidSelected.fill,o(u,t.invalidSelected.fill)*c),t.invalidHover.stroke=i(t.invalidHover.stroke,o(s,t.invalidHover.fill)),t.invalidHover.fill=i(t.invalidHover.fill,o(u,t.invalidHover.fill)*c),r[e]=t})),r}},{key:"getAttributeColors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,i=e.colorSplit,o=e.computeOpacity,r=a.BORDER_OPACITY_LEVEL[t],s=a.FILL_OPACITY_LEVEL[n],u=l.default.cloneDeep(a.COLORS_ARRAY);return u.unshift(a.NULL_COLOR),u=u.map((function(e){var t=JSON.parse(JSON.stringify(a.DEFAULT_COLOR));return t.valid.stroke=i(e,o(r,e)),t.valid.fill=i(e,o(s,e)*c*.5),t.validSelected.stroke=i(e,o(r,e)),t.validSelected.fill=i(e,o(s,e)*c),t.validHover.stroke=i(e,o(r,e)),t.validHover.fill=i(e,o(s,e)*c),t.invalid.stroke=i(t.invalid.stroke,o(r,e)),t.invalid.fill=i(t.invalid.fill,o(s,e)*c*.5),t.invalidSelected.stroke=i(t.invalidSelected.stroke,o(r,e)),t.invalidSelected.fill=i(t.invalidSelected.fill,o(s,e)*c),t.invalidHover.stroke=i(t.invalidHover.stroke,o(r,e)),t.invalidHover.fill=i(t.invalidHover.fill,o(s,e)*c),t}))}},{key:"getDefaultToolLineColors",value:function(){var e={};return Object.keys(a.CHANGE_COLOR).forEach((function(t){e[t]=a.CHANGE_COLOR[t].line})),e}},{key:"initByOpacity",value:function(e,t){return{toolColor:this.getToolColors(e,t),attributeColor:this.getAttributeColors(e,t)}}}]),e}(),u=s;u.changeOpacity={1:.2,3:.4,5:.6,7:.8,9:1},t.ToolStyleUtils=u},function(e,t,n){"use strict";var i=n(34).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(17),r=n(26),l=n(275);function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=c(o),u=Object.defineProperty,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=function(e,t,n){return t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n};t.VideoTagTool=function(e){return o.useEffect((function(){a.i18n.changeLanguage(e.lang)}),[e.lang]),s.default.createElement(r.I18nextProvider,{i18n:a.i18n},s.default.createElement(l.TagToolInstanceAdaptor,function(e,t){for(var n in t||(t={}))h.call(t,n)&&f(e,n,t[n]);if(d){var o,a=i(d(t));try{for(a.s();!(o=a.n()).done;)n=o.value,g.call(t,n)&&f(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},e)))}},,,,,,,,,,,function(e,t){},,function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var i=n(0),o=n(38),a=n.n(o),r=(n(314),n(22)),l=n(19),c=n(65),s=n.n(c),u=n(55),d=n.n(u),h=(n(615),n(299)),g=n.n(h),f=(n(627),n(628),n.p,n.p,n.p,n.p,JSON.stringify({step_1:{dataSourceStep:0,result:[{id:"00684b5d",rotation:.02,valid:!0,center:{x:73.57,y:-3.99,z:2.25},width:4.28,height:1.91,depth:1.54,trackID:28,attribute:"1"},{id:"045b54cc",rotation:3.14,valid:!0,center:{x:51.35,y:8.02,z:1.05},width:4.13,height:1.96,depth:1.5,trackID:24,attribute:"1"},{id:"0c42d57f",rotation:.03,valid:!0,center:{x:58.43,y:9.5,z:1.6},width:.49,height:.48,depth:1.61,trackID:43,attribute:"2"},{id:"169d029a",rotation:3.12,valid:!0,center:{x:58.39,y:7.95,z:1.45},width:4.25,height:1.78,depth:1.63,trackID:31,attribute:"1"},{id:"18eedc63",rotation:3.12,valid:!0,center:{x:52.36,y:3.41,z:1.58},width:4.16,height:1.85,depth:1.44,trackID:22,attribute:"1"},{id:"1f58834b",rotation:1.52,valid:!0,center:{x:27.3,y:17.42,z:.15},width:5.66,height:2.15,depth:2.06,trackID:16,attribute:"1"},{id:"34a40609",rotation:.02,valid:!0,center:{x:52.85,y:10.48,z:1.34},width:.96,height:.48,depth:1.76,trackID:41,attribute:"2"},{id:"36b62ec0",rotation:3.14,valid:!0,center:{x:46.16,y:7.85,z:1.07},width:4.39,height:2.07,depth:1.52,trackID:23,attribute:"1"},{id:"385cccc3",rotation:6.24,valid:!0,center:{x:-30.16,y:-3.38,z:.72},width:4.08,height:1.84,depth:1.41,trackID:6,attribute:"1"},{id:"4588976e",rotation:3.16,valid:!0,center:{x:44.71,y:3.49,z:1.36},width:4.12,height:1.88,depth:1.36,trackID:21,attribute:"1"},{id:"46874415",rotation:3.11,valid:!0,center:{x:38.33,y:4.34,z:1.27},width:4.15,height:2.1,depth:1.53,trackID:20,attribute:"1"},{id:"4fd28eec",rotation:6.24,valid:!0,center:{x:-48.22,y:-3.15,z:.69},width:4.2,height:1.81,depth:1.33,trackID:9,attribute:"1"},{id:"64f5fabb",rotation:6.28,valid:!0,center:{x:-42.77,y:-3.35,z:.75},width:4.19,height:1.89,depth:1.38,trackID:8,attribute:"1"},{id:"659adc9e",rotation:.02,valid:!0,center:{x:-54.4,y:-3.08,z:.7},width:4.08,height:1.85,depth:1.3,trackID:10,attribute:"1"},{id:"66c9e0af",rotation:1.57,valid:!0,center:{x:27.48,y:23.71,z:-.22},width:5.31,height:2.16,depth:2.2,trackID:17,attribute:"1"},{id:"7262d63b",rotation:3.18,valid:!0,center:{x:50.98,y:-4.98,z:1.78},width:.68,height:.46,depth:1.67,trackID:40,attribute:"2"},{id:"76c51f8d",rotation:.03,valid:!0,center:{x:-10.35,y:-3.51,z:.77},width:4.28,height:2.01,depth:1.7,trackID:3,attribute:"1"},{id:"7d52441c",rotation:.57,valid:!0,center:{x:12.89,y:14.21,z:.22},width:.55,height:.74,depth:1.68,trackID:15,attribute:"2"},{id:"7f6d3f36",rotation:1.6,valid:!0,center:{x:27.63,y:30.17,z:-1.11},width:4.12,height:1.83,depth:1.52,trackID:18,attribute:"1"},{id:"8aa4aa46",rotation:6.21,valid:!0,center:{x:51.59,y:-4.06,z:1.78},width:.72,height:.9,depth:1.57,trackID:27,attribute:"2"},{id:"938c4493",rotation:1.98,valid:!0,center:{x:2.92,y:-2.01,z:.82},width:.68,height:.7,depth:1.67,trackID:29,attribute:"2"},{id:"998e33e7",rotation:3.12,valid:!0,center:{x:27.15,y:11.48,z:.75},width:.71,height:.8,depth:1.6,trackID:30,attribute:"2"},{id:"9c34552c",rotation:3.18,valid:!0,center:{x:75.39,y:7.33,z:2.22},width:4.32,height:2,depth:1.45,trackID:25,attribute:"1"},{id:"a9138b37",rotation:.02,valid:!0,center:{x:48.32,y:-4.3,z:1.97},width:.45,height:.76,depth:1.78,trackID:26,attribute:"2"},{id:"b91823aa",rotation:.06,valid:!0,center:{x:.87,y:-3.12,z:.91},width:4.91,height:2.15,depth:1.87,trackID:1,attribute:"1"},{id:"bd701a17",rotation:1.55,valid:!0,center:{x:23.36,y:29.96,z:-1.34},width:4.27,height:1.98,depth:1.63,trackID:19,attribute:"1"},{id:"c684f76c",rotation:4.69,valid:!0,center:{x:11.94,y:.14,z:.96},width:1.1,height:.59,depth:1.79,trackID:11,attribute:"2"},{id:"c869c0b6",rotation:6.28,valid:!0,center:{x:-4.56,y:-3.6,z:.83},width:4.71,height:2.18,depth:1.69,trackID:2,attribute:"1"},{id:"ca78a91d",rotation:6.27,valid:!0,center:{x:-17.56,y:-3.59,z:.69},width:4.37,height:1.92,depth:1.37,trackID:4,attribute:"1"},{id:"cc201c28",rotation:6.24,valid:!0,center:{x:-35.81,y:-3.2,z:.7},width:4.14,height:1.82,depth:1.38,trackID:7,attribute:"1"},{id:"dad7a81b",rotation:1.62,valid:!0,center:{x:4.41,y:-6.9,z:1.01},width:.62,height:.75,depth:1.75,trackID:13,attribute:"2"},{id:"dc20211c",rotation:.01,valid:!0,center:{x:-23.75,y:-3.57,z:.69},width:4.17,height:2.04,depth:1.39,trackID:5,attribute:"1"},{id:"ee7ee126",rotation:2.49,valid:!0,center:{x:37.24,y:-7.72,z:1.85},width:.45,height:.57,depth:1.69,trackID:39,attribute:"2"},{id:"f2a3902b",rotation:.05,valid:!0,center:{x:3.29,y:-5.63,z:1},width:.5,height:.59,depth:1.93,trackID:12,attribute:"2"},{id:"f54a0dea",rotation:1.58,valid:!0,center:{x:23.37,y:-13.49,z:2.09},width:4.17,height:1.86,depth:1.81,trackID:14,attribute:"1"}],resultPolygon:[],toolName:"pointCloudTool"},valid:!0}),{step_1:{dataSourceStep:0,result:[{sort:[],answerList:[{order:1,answer:"\u91d1\u767e\u5473"},{order:2,answer:"\u5168\u5200\u624b"},{order:3,answer:"\u8d39\u5927\u53a8"},{order:4,answer:"\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002"}],textAttribute:"\u6587\u4ef6"}],toolName:"LLMTool"}}),v={question:"\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002\u9898\u76ee\u9650\u5236\u6700\u591a\u4e8c\u767e\u5b57\u3002",answerList:[{order:1,answer:"\u91d1\u767e\u5473"},{order:2,answer:"\u5168\u5200\u624b \u3002"},{order:3,answer:"\u8d39\u5927\u53a8"},{order:4,answer:"\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002\u6211\u662f\u7b54\u68481\uff0c\u6211\u96501000\u4e2a\u5b57\u7b26\u3002"}]},p=n.p+"static/media/1.68c25480.png",b=n.p+"static/media/2.bc1c9e06.png",m=n.p+"static/media/3.f06742c7.png",y=n.p+"static/media/4.aa8e8bb8.png",C=n.p+"static/media/5.3508d17c.png",I=n.p+"static/media/pro1.24a55a60.pcd",x=n.p+"static/media/2.fdb50962.pcd",w=n.p+"static/media/3.be07e849.pcd",k=n.p+"static/media/4.31f36ea0.pcd",S=n.p+"static/media/5.240c50a0.pcd",P=n.p+"static/media/6.d03db5c0.pcd",L=n.p+"static/media/7.776a1de3.pcd",A=n.p+"static/media/8.d1c11e1f.pcd",O=n.p+"static/media/9.0ff49899.pcd",T=n.p+"static/media/1.379e7e82.png",E=n.p+"static/media/2.8ce0bca2.png",D=n(300),M=n(301),N=[p,b,m,y,C],R=["http://127.0.0.1:8080/a.mp4","http://127.0.0.1:8080/d.mp4","http://127.0.0.1:8080/c.mp4","http://127.0.0.1:8080/e.mp4"],B=[I,x,w,k,S,P,L,A,O],j=[{url:T,calib:D},{url:E,calib:M}],_=JSON.stringify({height:200,width:100,rotate:0,step_1:{dataSource:0,tool:"rectTool",result:[]}}),H=JSON.stringify({height:200,width:100,rotate:0,step_1:{dataSource:0,tool:"polygonTool",result:[]}}),V=JSON.stringify({height:200,width:100,rotate:0,step_1:{dataSource:0,tool:"tagTool",result:[]}}),F=JSON.stringify({step_1:{dataSource:0,tool:"videoTagTool",result:[]}}),Z=function(e){return"rectTool"===e?_:"tagTool"===e?V:"polygonTool"===e?H:"videoTagTool"===e?F:"LLMTool"===e?f:"pointCloudTool"===e?"{}":""},z=[{type:"rect",annotation:{id:"123123",x:123,y:23,width:100,height:100,stroke:"pink",label:"laoluo",attribute:"asdasd",order:1}},{type:"polygon",annotation:{id:"3",stroke:"green",lineType:1,pointList:[{x:12,y:123},{x:122,y:123},{x:2,y:3}]}},{type:"line",annotation:{stroke:"yellow",thickness:5,id:"4",pointList:[{x:123,y:12},{x:2,y:12},{x:34,y:132}]}},{type:"point",annotation:{id:"5",x:10,y:10,fill:"green",stroke:"blue",thickness:"20",radius:10}},{type:"rect",annotation:{id:"10",x:13,y:3,width:1020,height:100}},{type:"text",annotation:{position:"rt",id:"11",x:223,y:23,textMaxWidth:416,color:"yellow",text:"\u6807\u7b7e1: \u6d4b\u8bd51LoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooog\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\n\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52"}},{type:"text",annotation:{id:"12",x:12,y:123,textMaxWidth:500,lineHeight:25,text:"Key: Loooooooooooooooooooooooooooooooooog value\nSecond One: short value"}},{type:"rect",annotation:{id:"g5r2l7mcrv8",x:60,y:260,width:100,height:100,stroke:"pink",name:"Bag",hiddenRectSize:!0,renderEnhance:function(e){var t=e.ctx,n=e.data.annotation,i=e.zoom,o=e.currentPos;t.fillStyle=n.stroke,t.fillRect(n.x*i+o.x-2,n.y*i+o.y-25,40,25),t.strokeStyle="white",t.strokeText(n.name,n.x*i+o.x+6,n.y*i+o.y-7)}}},{type:"box3d",annotation:{id:"fJGtJkho",center:{x:65.40254070595145,y:-.3830958425132849,z:.45834684240952583},width:3.8735671799451086,height:2.6857128643132304,depth:3.4032850127098584,rotation:3.107123552590266,attribute:"class-8f",valid:!0,trackID:3,calib:{P:[[721.5377,0,609.5593,44.85728],[0,721.5377,172.854,.2163791],[0,0,1,.002745884]],R:[[.9999239,.00983776,-.007445048],[-.009869795,.9999421,-.004278459],[.007402527,.004351614,.9999631]],T:[[.007533745,-.9999714,-616602e-9,-.004069766],[.01480249,.0007280733,-.9998902,-.07631618],[.9998621,.00752379,.01480755,-.2717806]]},stroke:"pink"}},{type:"box3d",annotation:{id:"asGtJk23",center:{x:15.40254070595145,y:2.383095842513285,z:.45834684240952583},width:1.8735671799451086,height:3.6857128643132304,depth:4.403285012709858,rotation:2.107123552590266,attribute:"class-8f",valid:!0,trackID:3,calib:{P:[[721.5377,0,609.5593,44.85728],[0,721.5377,172.854,.2163791],[0,0,1,.002745884]],R:[[.9999239,.00983776,-.007445048],[-.009869795,.9999421,-.004278459],[.007402527,.004351614,.9999631]],T:[[.007533745,-.9999714,-616602e-9,-.004069766],[.01480249,.0007280733,-.9998902,-.07631618],[.9998621,.00752379,.01480755,-.2717806]]},stroke:"rgb(255, 226, 50)"}},{type:"cuboid",annotation:{attribute:"class-gF",direction:"front",valid:!0,id:"dmjIbMoD",sourceID:"",textAttribute:"text",order:1,frontPoints:{tl:{x:189.98858647936788,y:192.48726953467954},tr:{x:254.1510096575944,y:192.48726953467954},bl:{x:189.98858647936788,y:253.65144863915717},br:{x:254.1510096575944,y:253.65144863915717}},backPoints:{br:{x:296.7260755048288,y:217.07287093942054},tr:{x:296.7260755048288,y:155.9086918349429},tl:{x:232.56365232660232,y:155.9086918349429},bl:{x:232.56365232660232,y:217.07287093942054}}}}],U=n(636),G=n(64),W=function(e){var t=Object(i.useRef)(),n=e.fileList,o=e.goBack,a=e.stepList,r=e.step;Object(i.useEffect)((function(){setTimeout((function(){var e;if(null!==(e=t.current)&&void 0!==e&&e.annotationEngine){var n,i=t.current.annotationEngine,o=i.firstToolInstance;null===o||void 0===o||null===(n=o.setRunPrediction)||void 0===n||n.call(o,(function(e){return new Promise((function(e){setTimeout((function(){e(""),U.b.success("Predict successfully"),i.switchLastTwoCanvas()}),1e3)}))}))}}))}),[]);return Object(G.jsx)("div",{children:Object(G.jsx)(s.a,{ref:t,headerName:"\u6d4b\u8bd5\u5404\u7c7b\u5de5\u5177",onSubmit:function(e,t,n,i){console.log("submitData",e,t,n,i)},imgList:n,pageSize:10,goBack:o,stepList:a,step:r,onSave:function(e,t,n){console.log("save",e,t,n)},dataInjectionAtCreation:function(e){return{testDataInjection:1}}})})},K=n(32),Y=K.cTool.EVideoToolName,X=K.cTool.EToolName,J=K.cTool.EPointCloudName,Q={showConfirm:!1,skipWhileNoDependencies:!1,drawOutsideTarget:!1,copyBackwardResult:!0,minWidth:1,minHeight:1,isShowOrder:!0,filterData:["valid","invalid"],attributeConfigurable:!0,attributeList:[{key:"\u73a9\u5076",value:"doll"},{key:"\u55b7\u58f6",value:"wateringCan"},{key:"\u8138\u76c6",value:"washbasin"},{key:"\u4fdd\u6e29\u676f",value:"vacuumCup"},{key:"\u7eb8\u5dfe",value:"tissue"},{key:"\u6c34\u58f6",value:"kettle"}],textConfigurable:!0,textCheckType:0,customFormat:""},q={attributeList:[{key:"\u7c7b\u522b1",value:"\u7c7b\u522b1",color:"rgba(128, 12, 249, 1)"},{key:"\u7c7b\u522bbm",value:"class-bm",color:"rgba(0, 255, 48, 1)"},{key:"\u7c7b\u522beg",value:"class-eg",color:"rgba(255, 136, 247, 1)"},{key:"\u7c7b\u522bvj",value:"class-vj",color:"rgba(255, 226, 50, 1)"},{key:"\u7c7b\u522b0x",value:"class-0x",color:"rgba(153, 66, 23, 1)"},{key:"\u7c7b\u522bGR",value:"class-GR",color:"rgba(2, 130, 250, 1)"},{key:"\u7c7b\u522b2c",value:"class-2c",color:"rgba(220,94,94,1)"},{key:"\u7c7b\u522bBj",value:"class-Bj",color:"rgba(0, 255, 234, 1)"}],showConfirm:!0,showDirection:!1,skipWhileNoDependencies:!1},$={showConfirm:!0,skipWhileNoDependencies:!1,inputList:[{key:"\u7c7b\u522b1",value:"class1",isMulti:!1,subSelected:[{key:"\u9009\u98791",value:"option1",isDefault:!0},{key:"\u9009\u98792",value:"option1-2",isDefault:!1}]},{key:"\u7c7b\u522b2",value:"class-AH",isMulti:!0,subSelected:[{key:"\u9009\u98792-1",value:"option2-1",isDefault:!0},{key:"\u9009\u98792-2",value:"option2-2",isDefault:!0},{key:"\u9009\u98792-3",value:"option2-3",isDefault:!1}]},{key:"\u7c7b\u522b3",value:"class-0P",isMulti:!1,subSelected:[{key:"\u9009\u98793-1",value:"option3-1",isDefault:!1},{key:"\u9009\u98793-2",value:"option3-2",isDefault:!1},{key:"\u9009\u98793-3",value:"option3-3",isDefault:!1}]},{key:"\u7c7b\u522b4",value:"class-4",isMulti:!0,subSelected:[{key:"\u9009\u98792-1",value:"option2-1",isDefault:!1},{key:"\u9009\u98792-2",value:"option2-2",isDefault:!1},{key:"\u9009\u98792-3",value:"option2-3",isDefault:!1}]}]},ee={lineType:0,lineColor:0,edgeAdsorption:!0,outOfTarget:!0,copyBackwardResult:!0,isShowOrder:!0,attributeConfigurable:!0,attributeList:[{key:"\u7c7b\u522b1",value:"\u7c7b\u522b1"},{key:"\u7c7b\u522bao",value:"class-ao"},{key:"\u7c7b\u522bM1",value:"class-M1"},{key:"\u7c7b\u522bCm",value:"class-Cm"},{key:"\u7c7b\u522bc3",value:"class-c3"},{key:"\u7c7b\u522ba0",value:"class-a0"},{key:"\u7c7b\u522bu7",value:"class-u7"},{key:"\u7c7b\u522bZb",value:"class-Zb"},{key:"\u7c7b\u522bzi",value:"class-zi"}],textConfigurable:!0,textCheckType:2,customFormat:"",showConfirm:!0,lowerLimitPointNum:2,upperLimitPointNum:"",preReferenceStep:0,skipWhileNoDependencies:!1,filterData:["valid","invalid"],showLineLength:!0},te={showConfirm:!1,skipWhileNoDependencies:!1,enableTextRecognition:!1,recognitionMode:"general",configList:[{label:"\u6587\u672c",key:"text",required:!1,default:"default1",maxLength:1e3},{label:"\u6587\u672c2",key:"text2",required:!0,default:"default2",maxLength:1e3},{label:"\u6587\u672c3",key:"text3",required:!0,default:"default3",maxLength:1e3}],filterData:["valid","invalid"]},ne={lineType:0,lineColor:0,edgeAdsorption:!0,drawOutsideTarget:!1,copyBackwardResult:!1,isShowOrder:!1,attributeConfigurable:!0,attributeList:[{key:"\u73a9\u5076",value:"doll"},{key:"\u55b7\u58f6",value:"wateringCan"},{key:"\u8138\u76c6",value:"washbasin"},{key:"\u4fdd\u6e29\u676f",value:"vacuumCup"},{key:"\u7eb8\u5dfe",value:"tissue"},{key:"\u6c34\u58f6",value:"kettle"}],textConfigurable:!0,textCheckType:0,customFormat:""},ie={attributeList:[{key:"\u7c7b\u522b1",value:"\u7c7b\u522b1"},{key:"\u7c7b\u522b8f",value:"class-8f"},{key:"\u7c7b\u522bMy",value:"class-My"},{key:"\u7c7b\u522bcN",value:"class-cN"},{key:"\u7c7b\u522b4H",value:"class-4H"}],radius:90,secondaryAttributeConfigurable:!0,inputList:[{key:"\u7c7b\u522b1",value:"class1",subSelected:[{key:"\u9009\u98791-1",value:"option1"},{key:"\u9009\u98791-2",value:"option2"}]},{key:"\u7c7b\u522bv0",value:"class-v0",subSelected:[{key:"\u9009\u98792-1",value:"option2-1"},{key:"\u9009\u98792-2",value:"option2-2"},{key:"\u9009\u98792-3",value:"option2-3"},{key:"\u9009\u98792-4",value:"option2-4"},{key:"\u9009\u98792-5",value:"option2-5"},{key:"\u9009\u98792-6",value:"option2-6"}]},{key:"\u7c7b\u522bRt",value:"class-Rt",subSelected:[{key:"\u9009\u98793-1",value:"option3-1"}]}],lowerLimitPointsNumInBox:5,trackConfigurable:!0},oe={isShowCursor:!1,showConfirm:!1,skipWhileNoDependencies:!1,drawOutsideTarget:!1,copyBackwardResult:!0,minWidth:1,attributeConfigurable:!0,textConfigurable:!0,textCheckType:0,customFormat:"",attributeList:[{key:"\u8dd1\u8f66",value:"sports car"},{key:"\u5409\u666e\u8f66",value:"jeep"},{key:"\u7d27\u51d1\u8f66\u578b",value:"single"},{key:"SUV\u7b49\u8f66\u578b",value:"suv"},{key:"\u8d27\u8f66",value:"trucks"}]},ae={enableSort:!0,enableTextAttribute:!0,score:7,indicatorScore:[{label:"\u53ef\u8bfb\u6027",value:"readability",text:"\u9605\u8bfb\u8d77\u6765\u662f\u5426\u987a\u7545",score:10},{label:"\u4e0d\u53ef\u8bfb\u6027",value:"unReadability",text:"\u5076\u662f\u57fa\u7763\u6559\u7cbe\u795e",score:10}],indicatorDetermine:[{label:"\u5305\u542b\u654f\u611f\u4fe1\u606f",value:"sensitiveInfo"},{label:"\u5305\u542b\u654f\u611f\u4fe1\u606f2",value:"sensitiveInfo2"}],text:[{title:"\u8fd9\u662f\u6807\u98981",tip:"\u8fd9\u662f\u63d0\u793a\u8bed1",min:0,max:100},{title:"\u8fd9\u662f\u6807\u98982",tip:"\u8fd9\u662f\u63d0\u793a\u8bed2",min:10,max:100}]},re=function(e){return e===X.Line?ee:e===X.Rect?Q:e===X.Tag?$:e===X.Text?te:e===X.Polygon?ne:e===Y.VideoTagTool?$:e===J.PointCloud?ie:e===X.ScribbleTool?q:e===X.Cuboid?oe:e===X.LLM?ae:Q},le=function(e,t,n){var i=null!==e&&void 0!==e?e:X.Rect,o=e;return i.indexOf(" ")>-1&&(o=(i=e.split(" "))[i.length-1]),{step:null!==t&&void 0!==t?t:1,dataSourceStep:n||0,tool:i,config:JSON.stringify(re(o))}},ce=function(){var e=g.a.parse(window.location.search,{ignoreQueryPrefix:!0,comma:!0}).tool,t=!Array.isArray(e),n=t?function(e,t,n){return[le(e)]}(e):e.map((function(e,t){return le(e,t+1,t)})),o=d.a.currentToolIsVideo(1,n),a=d.a.currentToolIsPointCloud(1,n),s=Object(i.useState)(function(){var n=N,i={};return o&&(n=R),a&&(n=B,Object.assign(i,{mappingImgList:j})),K.EToolName.LLM===e?n.map((function(e,t){return Object(l.a)(Object(l.a)({},i),{},{id:t+1,url:e,result:JSON.stringify(f.step_1.result.map((function(e){return t+1+e.answer}))),questionList:Object(l.a)(Object(l.a)({},v),{},{question:"".concat(t+1,"-").concat(v.question),answerList:v.answerList.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{answer:t+1+e.answer})}))})})})):n.map((function(n,o){return Object(l.a)(Object(l.a)({},i),{},{id:o+1,url:n,result:t?Z(e):"",questionList:v})}))}()),u=Object(r.a)(s,1)[0],h=Object(i.useState)(z),b=Object(r.a)(h,2),m=b[0],y=b[1];if("annotationView"===e)return Object(G.jsxs)("div",{children:[Object(G.jsxs)("div",{style:{height:1e3},children:[Object(G.jsx)(c.AnnotationView,{src:p,annotations:m,style:{stroke:"blue",thickness:3},size:{width:1280,height:720},onChange:function(e,t){"hover"===e&&y((function(e){return e.map((function(e){if("g5r2l7mcrv8"===e.annotation.id){var n=e.annotation;return Object(l.a)(Object(l.a)({},e),{},{annotation:Object(l.a)(Object(l.a)({},n),{},{hiddenRectSize:!t.includes("g5r2l7mcrv8")})})}return e}))}))}})," "]})," "]});if("PointCloudAnnotationView"===e)return Object(G.jsx)(c.PointCloudAnnotationView,{src:B[0],size:{height:1080,width:1e3}});return u.length>0?Object(G.jsx)(W,{fileList:u,goBack:function(e){console.log("goBack",e)},stepList:n,step:1}):Object(G.jsx)("div",{className:"App",children:" "})};a.a.render(Object(G.jsx)(ce,{}),document.getElementById("root"))}],[[631,1,2]]]);
//# sourceMappingURL=main.67f3c76b.chunk.js.map