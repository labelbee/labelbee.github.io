{"version":3,"sources":["../../lb-utils/es/i18n/resources.json.js","../../lb-utils/es/i18n/index.js","../../lb-utils/es/toolStyle/ToolStyleUtils.js","../../lb-utils/es/toolStyle/index.js","../../lb-utils/es/PerspectiveShiftUtils.js","../../lb-utils/es/PointCloudUtils.js","../../lb-utils/es/MatrixUtils.js","../../lb-utils/es/constant/pointCloud.js","../../lb-utils/es/annotation/ResourceManager.js","../../lb-utils/es/types/common.js","../../lb-utils/es/constant/color.js","../../lb-utils/es/annotation/ImgConversionUtils.js","../../../src/store/ctx.ts","../../lb-annotation/es/_virtual/_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js","../../lb-annotation/es/_virtual/MathUtilsWorker.js","../../lb-annotation/es/constant/tool.js","../../lb-annotation/es/utils/tool/polygonTool.js","../../lb-annotation/es/constant/annotation.js","../../lb-annotation/es/utils/tool/CommonToolUtils.js","../../lb-annotation/es/utils/tool/LineToolUtils.js","../../lb-annotation/es/utils/VectorUtils.js","../../lb-annotation/es/utils/tool/CuboidUtils.js","../../lb-annotation/es/utils/tool/AxisUtils.js","../../lb-annotation/es/utils/tool/PolygonUtils.js","../../lb-annotation/es/utils/MathUtils.js","../../lb-annotation/es/constant/keyCode.js","../../lb-annotation/es/utils/tool/RectUtils.js","../../lb-annotation/es/locales/constants.js","../../lb-annotation/es/locales/en_US/message.js","../../lb-annotation/es/locales/zh_CN/message.js","../../lb-annotation/es/locales/index.js","../../lb-annotation/es/assets/attributeIcon/icon_canvasEdit0.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_canvasEdit_miss.svg.js","../../lb-annotation/es/constant/style.js","../../lb-annotation/es/assets/attributeIcon/icon_canvasEdit6.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_canvasEdit3.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_canvasEdit7.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_canvasEdit2.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_canvasEdit8.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_canvasEdit5.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_canvasEdit1.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_canvasEdit4.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_editLAN.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_editQING.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_editLV.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_editHUANG.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_editFEN.svg.js","../../lb-annotation/es/utils/tool/AttributeUtils.js","../../lb-annotation/es/utils/tool/CanvasUtils.js","../../lb-annotation/es/utils/tool/UnitUtils.js","../../lb-annotation/es/utils/tool/DrawUtils.js","../../lb-annotation/es/utils/tool/MarkerUtils.js","../../lb-annotation/es/utils/uuid.js","../../lb-annotation/es/utils/ActionsHistory.js","../../lb-annotation/es/utils/tool/DblClickEventListener.js","../../lb-annotation/es/utils/tool/ImgPosUtils.js","../../lb-annotation/es/utils/tool/RenderDomUtils.js","../../lb-annotation/es/utils/tool/ZoomUtils.js","../../lb-annotation/es/core/toolOperation/LineToolOperation.js","../../lb-annotation/es/core/toolOperation/eventListener.js","../../lb-annotation/es/core/toolOperation/basicToolOperation.js","../../lb-annotation/es/core/toolOperation/textAttributeClass.js","../../lb-annotation/es/core/toolOperation/Selection.js","../../lb-annotation/es/core/toolOperation/rectOperation.js","../../lb-annotation/es/utils/tool/TagUtils.js","../../lb-annotation/es/core/toolOperation/tagOperation.js","../../lb-annotation/es/utils/tool/StyleUtils.js","../../lb-annotation/es/core/toolOperation/pointOperation.js","../../lb-annotation/es/core/toolOperation/TextToolOperation.js","../../lb-annotation/es/core/toolOperation/polygonOperation.js","../../lb-annotation/es/core/toolOperation/measureOperation.js","../../lb-annotation/es/utils/tool/RenderDomClass.js","../../lb-annotation/es/core/pointCloud/matrix.js","../../lb-annotation/es/core/toolOperation/ViewOperation.js","../../lb-annotation/es/constant/annotationTask.js","../../lb-annotation/es/core/toolOperation/ScribbleTool.js","../../lb-annotation/es/constant/defaultConfig.js","../../lb-annotation/es/core/toolOperation/pointCloud2dOperation.js","../../lb-annotation/es/assets/attributeIcon/icon_cuboidFAB.svg.js","../../lb-annotation/es/core/toolOperation/cuboidOperation.js","../../lb-annotation/es/core/toolOperation/cuboidToggleButtonClass.js","../../lb-annotation/es/assets/attributeIcon/icon_cuboidRight.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_cuboidLeft.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_cuboidTop.svg.js","../../lb-annotation/es/assets/attributeIcon/icon_cuboidMore.svg.js","../../lb-annotation/es/core/toolOperation/checkOperation.js","../../lb-annotation/es/core/toolOperation/segmentByRect.js","../../lb-annotation/es/utils/tool/EnhanceCommonToolUtils.js","../../lb-annotation/es/utils/ImgUtils.js","../../lb-annotation/es/core/scheduler.js","../../lb-annotation/es/core/index.js","../../lb-annotation/es/newCore/CanvasScheduler.js","../../lb-annotation/es/_virtual/highlightWorker.js","../../lb-annotation/es/_virtual/filterBoxWorker.js","../../lb-annotation/es/core/pointCloud/PCDLoader.js","../../lb-annotation/es/core/pointCloud/OrbitControls.js","../../lb-annotation/es/core/pointCloud/cache.js","../../lb-annotation/es/core/pointCloud/selector/selector.js","../../lb-annotation/es/core/pointCloud/selector/lassoSelector.js","../../lb-annotation/es/core/pointCloud/selector/circleSelector.js","../../lb-annotation/es/core/pointCloud/segmentation.js","../../lb-annotation/es/core/pointCloud/store/fsm.js","../../lb-annotation/es/core/pointCloud/store/index.js","../../lb-annotation/es/core/pointCloud/render/index.js","../../lb-annotation/es/core/pointCloud/index.js","../../lb-annotation/es/core/pointCloud/annotation.js","../../lb-annotation/es/index.js","../../../../src/components/pointCloudView/PointCloudContext.tsx","../../../src/constant/index.tsx","../../../src/utils/index.ts","../../../src/utils/dom.ts","../../../../src/store/annotation/actionCreators.ts","../../../src/utils/StepUtils.ts","../../../../../src/components/pointCloudView/hooks/useSingleBox.ts","../../src/index.tsx","../../../../src/data/enums/ToolType.ts","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/common/index.tsx","../../../src/store/Actions.ts","../../../../src/store/annotation/reducer.ts","../../../../../src/components/pointCloudView/hooks/useHistory.ts","../../../../src/store/annotation/map.ts","../../../src/hooks/useSize.ts","../../../../../src/components/pointCloudView/hooks/usePointCloudViews.ts","../../../src/utils/ToolUtils.ts","../../../../../src/components/pointCloudView/hooks/useSphere.ts","../../../../../src/assets/annotation/toolHotKeyIcon/icon_mouse_left_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_mouse_right_kj.svg","../../../../../src/views/MainView/toolFooter/index.tsx","../../../../src/components/pointCloudView/PointCloudLayout.tsx","../../../../../../src/components/pointCloudView/components/TitleButton/index.tsx","../../../../src/components/longText/index.tsx","../../../../../src/views/MainView/sidebar/index.tsx","../../../../../src/components/pointCloudView/hooks/usePolygon.ts","../../../../../src/components/pointCloudView/hooks/useStatus.ts","../../../../../src/assets/annotation/toolHotKeyIcon/icon_del_kj.svg","../../../../src/components/videoPlayer/utils.ts","../../../../src/data/enums/AnnotationSize.ts","../../../../../src/components/predictTracking/previewResult/util.ts","../../../../../src/assets/annotation/common/icon_clearSmall_a.svg","../../../../../src/assets/annotation/common/icon_clearSmall.svg","../../../../src/components/attributeList/index.tsx","../../../src/data/Style.ts","../../../../../src/components/pointCloudView/hooks/useAttribute.ts","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/index.tsx","../../../../../src/components/pointCloudView/hooks/useZoom.ts","../../../../src/components/pointCloudView/PointCloudInfos.tsx","../../../../src/components/AnnotationView/index.tsx","../../../../../src/components/LLMToolView/questionView/index.tsx","../../../../src/components/customResizeHook/index.tsx","../../../src/utils/ConfigUtils.ts","../../../../src/components/fileException/FileError.tsx","../../../../src/store/toolStyle/actionCreators.ts","../../../../../src/views/MainView/annotationTips/index.tsx","../../../src/utils/TextUtils.ts","../../../../src/store/imgAttribute/actionCreators.ts","../../../../../../src/views/MainView/sidebar/TagSidebar/index.tsx","../../../../../src/views/MainView/sidebar/ToolIcons.tsx","../../../../../src/assets/annotation/pointCloudTool/lassoSelector.svg","../../../../../src/assets/annotation/pointCloudTool/circleSelector.svg","../../../src/hooks/annotation.ts","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/rectToolShortCutTable/index.tsx","../../../../../src/assets/annotation/toolHotKeyIcon/icon_next_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_move_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_tab_kj.svg","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/polygon/index.tsx","../../../../../src/assets/annotation/toolHotKeyIcon/icon_line_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_lineCont_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_unGrip_kj.svg","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/tag/index.ts","../../../../../src/views/MainView/toolFooter/FooterPopover.tsx","../../../../../../src/views/MainView/toolFooter/ZoomController/index.tsx","../../../../../src/views/MainView/toolFooter/Pagination.tsx","../../../../../../src/views/MainView/toolFooter/AnnotatedAttributes/index.tsx","../../../../../src/components/predictTracking/predictTrackingIcon/index.tsx","../../../../src/components/videoPlayer/TagToolInstanceAdaptor.tsx","../../../../src/components/videoPlayer/index.tsx","../../../../../../src/components/pointCloudView/components/PointCloudSizeSlider/index.tsx","../../../../src/components/pointCloudView/PointCloudBackView.tsx","../../../../../../src/components/pointCloudView/components/EmptyPage/index.tsx","../../../../../src/components/pointCloudView/hooks/useRotate.ts","../../../../src/components/pointCloudView/PointCloudSideView.tsx","../../../../src/components/LLMToolView/index.tsx","../../../src/hooks/useRefCache.ts","../../../../src/components/AnnotationView/pointCloudAnnotationView.tsx","../../src/App.tsx","../../../../src/views/MainView/index.tsx","../../../src/constant/styleString.ts","../../../src/utils/AnnotationDataUtils.ts","../../../src/utils/data.ts","../../../src/utils/PageOperator.ts","../../../../../src/views/MainView/annotationOperation/index.tsx","../../../src/hooks/useRafState.ts","../../../../../../src/views/MainView/sidebar/AnnotationText/index.tsx","../../../../../../src/views/MainView/sidebar/TextAreaFormat/index.tsx","../../../../../../src/views/MainView/sidebar/ClearIcon/index.tsx","../../../../../../src/views/MainView/sidebar/GeneralOperation/index.tsx","../../../../../../src/views/MainView/sidebar/GeneralOperation/ActionsConfirm.tsx","../../../../../../src/views/MainView/sidebar/GeneralOperation/useOperationList.tsx","../../../../../src/assets/annotation/common/icon_clear.svg","../../../../../src/assets/annotation/common/icon_clear_a.svg","../../../../../src/assets/annotation/common/icon_invalid.svg","../../../../../src/assets/annotation/common/icon_invalid_a.svg","../../../../../src/assets/annotation/pointCloudTool/unitAttribute.svg","../../../../../src/assets/annotation/pointCloudTool/unitAttributeForbid.svg","../../../../../src/assets/annotation/pointCloudTool/unitAttributeHover.svg","../../../../../../src/components/pointCloudView/components/UnifyParamsModal/index.tsx","../../../../../../src/views/MainView/sidebar/ImgAttributeInfo/index.tsx","../../../../../src/assets/annotation/image/saturation.svg","../../../../../src/assets/annotation/image/contrast.svg","../../../../../src/assets/annotation/image/brightness.svg","../../../../src/assets/attributeIcon/zoomUp.svg","../../../../../src/assets/annotation/image/icon_yuantu.svg","../../../../../../src/views/MainView/sidebar/SwitchAttributeList/index.tsx","../../../../src/components/colorTag/index.tsx","../../../../src/components/colorPalette/index.tsx","../../../src/utils/colorUtils.ts","../../../../../../src/components/attributeList/components/limitPopover/index.tsx","../../../../src/assets/toolStyle/icon_defaultSize.svg","../../../../src/components/checkboxList/index.tsx","../../../../../../src/views/MainView/sidebar/TextToolSidebar/index.tsx","../../../../../../src/views/MainView/sidebar/PointCloudToolSidebar/index.tsx","../../../../../src/assets/annotation/lineTool/icon_line.svg","../../../../../src/assets/annotation/lineTool/icon_line_a.svg","../../../../../src/assets/annotation/pointTool/icon_point.svg","../../../../../src/assets/annotation/pointTool/icon_point_a.svg","../../../../../src/assets/annotation/polygonTool/icon_polygon_a.svg","../../../../../src/assets/annotation/polygonTool/icon_polygon.svg","../../../../../src/assets/annotation/rectTool/icon_rect.svg","../../../../../src/assets/annotation/rectTool/icon_rect_a.svg","../../../../../../../src/views/MainView/sidebar/PointCloudToolSidebar/components/batchUpdateModal/index.tsx","../../../../../src/assets/annotation/pointCloudTool/lassoSelector_a.svg","../../../../../src/assets/annotation/pointCloudTool/circleSelector_a.svg","../../../../../../src/views/MainView/sidebar/ToolStyle/index.tsx","../../../../src/assets/toolStyle/icon_border.svg","../../../../src/assets/toolStyle/icon_borderColor.svg","../../../../src/assets/toolStyle/icon_opacityStroke.svg","../../../../src/assets/toolStyle/icon_opacityFill.svg","../../../../../../src/views/MainView/sidebar/ScribbleSidebar/index.tsx","../../../../src/assets/attributeIcon/pen_a.svg","../../../../src/assets/attributeIcon/pen.svg","../../../../src/assets/attributeIcon/eraser_a.svg","../../../../src/assets/attributeIcon/eraser.svg","../../../../../src/assets/annotation/common/icon_menu_fold.svg","../../../../../src/components/LLMToolView/sidebar/index.tsx","../../../../../../../src/components/LLMToolView/sidebar/components/answerSort/index.tsx","../../../../../../../src/components/LLMToolView/sidebar/components/answerList/index.tsx","../../../../../../../src/components/LLMToolView/sidebar/components/scoreGroupButton/index.tsx","../../../../../../../src/components/LLMToolView/sidebar/components/determineGroup/index.tsx","../../../../../src/components/LLMToolView/utils/data.ts","../../../../../src/assets/annotation/LLMTool/empty.svg","../../../../../../../src/components/LLMToolView/sidebar/components/textInputBox/index.tsx","../../../../../../src/views/MainView/toolFooter/FooterTips/index.tsx","../../../../../src/assets/annotation/toolHotKeyIcon/icon_kj1.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_kj_h.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_frame_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_frameNull_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_frameActive_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_frameChange_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_cencel_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_reform_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_loupe_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_mouse_middle_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_fullView_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_reload_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/setValid.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_last_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_alttab_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_save_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_lineSpecial_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_noDisplay.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_playPause.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_forward_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_back_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_speed_kj.svg","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/point/index.tsx","../../../../../src/assets/annotation/toolHotKeyIcon/icon_point_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_pointNull_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_pointActive_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_polygonNull_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_polygonActive_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_polygonChange_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_polygonDel_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_polygonInsert_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_segment.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_polygonMerge_kj.svg","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/line/index.tsx","../../../../../src/assets/annotation/toolHotKeyIcon/icon_lineNull_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_straightLine_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_lineActive_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_lineChange_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_lineInsert_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_lineDel_kj.svg","../../../../../src/assets/annotation/toolHotKeyIcon/icon_tag_kj.svg","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/text/index.ts","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/videoTag/index.ts","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/pointCloud/index.tsx","../../../../../src/assets/annotation/pointCloudTool/changePointCloudValid.svg","../../../../../src/assets/annotation/pointCloudTool/copy.svg","../../../../../src/assets/annotation/pointCloudTool/nextBox.svg","../../../../../src/assets/annotation/pointCloudTool/patse.svg","../../../../../src/assets/annotation/pointCloudTool/prevBox.svg","../../../../../src/assets/annotation/pointCloudTool/rotate180_black.svg","../../../../../src/assets/annotation/pointCloudTool/selectAll.svg","../../../../../src/assets/annotation/pointCloudTool/selectMultiple.svg","../../../../../src/assets/annotation/pointCloudTool/addSvg.svg","../../../../../src/assets/annotation/pointCloudTool/clearSvg.svg","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/scribble/index.tsx","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/cuboid/index.tsx","../../../../../../../src/views/MainView/toolFooter/FooterTips/ToolHotKey/LLM/index.tsx","../../../../../../src/views/MainView/toolFooter/HiddenTips/index.tsx","../../../../../../src/views/MainView/toolFooter/PageNumber/index.tsx","../../../../../src/assets/annotation/common/icon_adapt.svg","../../../../../src/assets/annotation/common/icon_adapt_black.svg","../../../../../../../src/views/MainView/toolFooter/ZoomController/ZoomLevel/index.tsx","../../../src/hooks/useSafeSate.ts","../../../src/hooks/useUnmountedRef.ts","../../../../src/store/annotation/selectors.ts","../../../../../src/views/MainView/toolHeader/index.tsx","../../../../../../src/views/MainView/toolHeader/ExportData/index.tsx","../../../../../../src/views/MainView/toolHeader/headerOption/index.tsx","../../../../../src/assets/annotation/common/icon_r.svg","../../../../../src/assets/annotation/common/icon_next.svg","../../../../../src/assets/annotation/common/icon_back.svg","../../../../../src/assets/annotation/common/icon_rA.svg","../../../../../src/assets/annotation/common/icon_nextA.svg","../../../../../src/assets/annotation/common/icon_backA.svg","../../../../../src/assets/annotation/common/icon_save.svg","../../../../../src/assets/annotation/common/icon_saveA.svg","../../../../../../src/views/MainView/toolHeader/StepSwitch/index.tsx","../../../../../src/components/customAntd/IconWithText/index.tsx","../../../../src/components/annotationStepPopover/index.tsx","../../../../src/assets/predictTracking/icon.svg","../../../../../../src/views/MainView/toolHeader/SwitchPattern/index.tsx","../../../../src/components/videoAnnotate/index.tsx","../../../../../../src/components/videoPlayer/components/controller/index.tsx","../../../../../src/assets/annotation/video/icon_keyboard_h.svg","../../../../src/components/fileException/index.tsx","../../../../src/components/fileException/FileInvalid.tsx","../../../../src/components/videoPlayer/VideoTagLayer.tsx","../../../../src/components/pointCloudView/index.tsx","../../../../src/components/pointCloudView/PointCloud3DView.tsx","../../../../../src/assets/annotation/pointCloudTool/nodata.svg","../../../../src/components/pointCloudView/PointCloudTopView.tsx","../../../../src/components/pointCloudView/PointCloud2DView.tsx","../../../../src/components/pointCloudView/PointCloud2DSingleView.tsx","../../../../../src/components/pointCloudView/hooks/useHighlight.ts","../../../../../../src/components/pointCloudView/components/HighlightVisible/index.tsx","../../../../../src/assets/annotation/common/icon_esc.svg","../../../../../src/assets/annotation/common/icon_left_squareOutlined.svg","../../../../../src/assets/annotation/common/icon_right_squareOutlined.svg","../../../../src/components/pointCloudView/PointCloudListener.tsx","../../../../../src/components/pointCloudView/hooks/useBoxes.ts","../../../../../src/components/pointCloudView/hooks/useConfig.ts","../../../../../src/components/pointCloudView/hooks/useLine.ts","../../../../src/components/pointCloudView/PointCloudSegmentListener.tsx","../../../../src/components/pointCloudView/PointCloudSegment.tsx","../../../../src/components/pointCloudView/PointCloudSegmentStatus.tsx","../../../../../src/assets/annotation/pointCloudTool/finish.svg","../../../../../src/assets/annotation/pointCloudTool/cancel.svg","../../../../src/components/pointCloudView/PointCloudSegmentToolbar.tsx","../../../../../src/assets/annotation/pointCloudTool/coverMode.svg","../../../../../src/assets/annotation/pointCloudTool/unCoverMode.svg","../../../../../src/assets/annotation/pointCloudTool/svg.tsx","../../../../../../src/components/pointCloudView/components/sideAndBackOverView/index.tsx","../../../../../src/components/predictTracking/previewResult/index.tsx","../../../../../src/views/MainView/LLMLayout/index.tsx","../../src/configureStore.ts","../../../src/store/index.ts","../../../../src/store/imgAttribute/reducer.ts","../../../../src/store/toolStyle/reducer.ts","../../../src/utils/ToolStyleUtils.ts","../../../../src/components/videoPlayer/TagToolInstanceAdaptorI18nProvider.tsx","mock/LLMTool.js","mock/images/10.jpg","mock/images/19.jpg","mock/images/20.jpg","mock/images/66.jpg","mock/pointCloud.js","mock/cuboidImages/1.png","mock/cuboidImages/2.png","mock/cuboidImages/3.png","mock/cuboidImages/4.png","mock/cuboidImages/5.png","mock/pointCloud/lidar/pro1.pcd","mock/pointCloud/lidar/2.pcd","mock/pointCloud/lidar/3.pcd","mock/pointCloud/lidar/4.pcd","mock/pointCloud/lidar/5.pcd","mock/pointCloud/lidar/6.pcd","mock/pointCloud/lidar/7.pcd","mock/pointCloud/lidar/8.pcd","mock/pointCloud/lidar/9.pcd","mock/pointCloud/image/P2/1.png","mock/pointCloud/image/P2/2.png","mock/index.js","components/Annotation/index.jsx","mock/taskConfig.js","App.js","index.js"],"names":["resources","ConfirmTo","TextInput","NoAttribute","Save","Undo","Redo","Rotate","Style","Adjust","BorderThickness","Color","BorderOpacity","FillOpacity","Saturation","Contrast","Exposure","ScreenRatio","OriginalScale","CopyThePrevious","ClearLabel","SetAsInvalid","SetAsValid","Confirm","Finish","Cancel","ItemsOfThisPage","Hotkeys","AnnotateRect","AnnotateInvalidRect","SelectRect","RightClick","ToggleRectEffectiveness","ToggleEffectiveness","DeleteRect","SelectAndDoubleClick","Scale","Fullscreen","PreviousImage","PreviousFile","NextImage","NextFile","PreviousFolder","NextFolder","Drag","ToggleSelected","ToggleSelectedReverse","HideGraphics","ToggleLineParticularity","ToSide","SpecifiedAttributesOnly","Press","ToOriginalStep","HorizontalOrVertical","AnnotateInvalidLine","AnnotateLine","SelectLine","ToggleLineEffectiveness","DeleteLine","ContinueToLabel","Select","InsertPoint","ClickOnLine","DeletePoint","DblClickOnPoint","StopAdsorption","PreviousLine","NextLine","SelectPoint","AnnotateInvalidPoint","AnnotatePoint","AnnotatePolygon","SelectPolygon","AnnotateInvalidPolygon","TogglePolygonEffectiveness","DeletePolygon","Delete","TogglePointParticularity","CropOverlapArea","SegmentationRecognition","SwitchPattern","Tagging","Hide","HideDrawnAnnotation","Blue","Cyan","Green","Yellow","Pink","Steps","Export","NextStep","StepNotFinishedNotify","curItems","TurnPage","Switch","EmptyTextInput","RegularExpIncorrectly","NoConfiguration","ClearThisOption","RestoreImageAttributes","rectTool","tagTool","polygonTool","lineTool","pointTool","textTool","Speed","PlayPause","FastForward","Rewind","videoInvalidAndSkip","imageInvalidAndSkip","videoErrorAndReload","imageErrorAndReload","orMaskAsInvalid","ClickAnotherPolygon","PolygonsToBeCombinedNeedToBeSelected","CurveModeDoesNotSupportCutting","CombineSuccess","CombiningFailedNotify","CombineOverlapArea","NoDependency","TextCheckNumberOnly","TextCheckEnglishOnly","TextCheckCustomFormat","FramingOfObjectToBeDivided","ClickOnTarget","SplittingAlgorithmPrediction","TopView","SideView","BackView","ShowArrows","Length","Width","Height","Rotation_y","PointCount","Invalid","Tag","Attribute","SubAttribute","PleaseSelect","CopyEmptyInPointCloud","PasteEmptyInPointCloud","HasDuplicateID","HasDuplicateIDHeader","HasDuplicateIDMsg","LowerLimitPointsNumInBox","PointThickness","RotateAroundCenterPoint","PointCloudViewTranslate","TopViewTranslate","ChangePointCloudValid","LassoSelector","SelectorMsg","AddPoint","CircleSelector","DetectionMode","SegmentationMode","EnterEditMode","SelectedPoints","CopyBox","PasteBox","RotateLeft","RotateRight","NextBox","PreviousBox","Rotate180","CopyPrevPage","ChangeBoxValid","MultiSelect","SelectAllBox","GeneralOperation","RectPattern","PolygonPattern","ChangePatternMsg","DragOperation","SelectedStatus","updateValidFromValidToInValid","updateValidFromInValidToValid","AllTrackIDs","CurrentBoxTrackIDs","PositiveIntegerCheck","NotAllowDecimalPointsInTrackID","DuplicateTrackIDsExist","BatchUpdateText","BatchUpdateTrackID","TrackIDUnifyAs","UnifyTrackIDRange","Page","OkText","CancelText","UnifyParams","UnifyAttributeRange","UnifyTrackID","UnifySize","UnifyTag","NoData","AnnotatedList","onDeleteGraphByAttr","CancelFixed","FixedOnLeft","FixedOnRight","AnnotatedResult","ComplementaryTracking","ComplementaryTrackingPrediction","Apply","BeforePredictStarting","ThePredictedPointCloud","CameraFollowTopView","MarkOnlyOne","HaveNoNeed","PredictingDataFrom","PointCloudCoverMode","PointCloudUncoverMode","PointCloudFocusMode","PointCloudUnfocusMode","PointCloudHideSegment","PointCloudShowSegment","PointCloudHideSegmentInvalid","PointCloudHideFocusInvalid_hide","PointCloudHideFocusInvalid_none","Palette","EfficientListening","Title","Answer","Finished","Unfinished","OverallScore","NoScoringScale","Best","Worst","RankingQualityOfAnswers","ToBeSorted","Yes","No","AdditionalContent","Submit","DragAndDrop","DefaultSize","NormalSizeRange","NormalCenterPointRange","LoadingTips","Unlocked","Locked","LeastCharacterError","And","Or","i18n","language","use","initReactI18next","init","lng","interpolation","escapeValue","react","useSuspense","addResourceBundle","BORDER_OPACITY_LEVEL","FILL_OPACITY_LEVEL","_ToolStyleUtils","rgbaString","rgbaArr","substring","length","replace","split","r","parseInt","g","b","a","parseFloat","toString","padStart","Math","round","ToolStyleUtils","replaceAFromRGBA","rgba","opacity","join","toFixed","toRGBAArr","rgbStr","match","getToolStrokeAndFill","color","options","hover","selected","borderOpacity","fillOpacity","commonOpacity","stroke","fill","getStrokeAndFill","getToolColorList","borderOpacityParam","fillOpacityParam","valid","invalid","INVALID_COLOR","validSelected","invalidSelected","validHover","invalidHover","getAttributeIndex","attribute","attributeList","findIndex","i","value","error","__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","enumerable","configurable","writable","DEFAULT_COLORS","ATTRIBUTE_COLORS","COLORS_ARRAY_MULTI","hex","NULL_COLOR","ToolStyleConverter","this","_defaultColors","_attributeColors","result","config","styleConfig","_a","_b","_c","_d","_e","call","colorIndex","multiColorIndex","defaultStatus","colorList","defaultColors","attributeConfigurable","attributeColors","hexColor","attributeIndex","find","rgbaStringToHex","colorDecimal","colorHex","prop","__spreadValues","style","attributeColor","toolColor","COLOR_MAP_JET","s","p","Array","map","v","createColorMapJet","index","PerspectiveShiftUtils","x","y","z","distance","translationMatrix","scale","volume","offsetX","width","offsetY","height","offsetZ","depth","__objRest","source","exclude","target","indexOf","_PointCloudUtils","genColorByCoord","_f","_g","data","jsonParser","ptResult","boxParamsList","polygonList","resultPolygon","renderPolygon","lineList","resultLine","sphereParamsList","resultPoint","segmentation","DEFAULT_STEP","boxParams","center","type","pointList","getFrontViewPolygon","getBackViewPolygon","getAllDirectionLine","rotation_y","rotation","transferRotation2KittiRotation_y","standardRange","PI","updatedRotation","newRotation","imgList","step","extraBoxList","extraSphereList","ignoreIndexList","resultList","filter","_","includes","DEFAULT_STEP_NAME","boxList","forEach","concat","trackID","getAllPointCloudResult","id","newID","originResult","dataList","JSON","stringify","some","newData","updateResult","newSubAttribute","subAttribute","assign","basicSize","imgInfo","subAttributeList","inputList","entries","label","subValue","subSelected","params","p1","line1","p2","line2","k1","k2","originIndexes","splitIndexes","splitSet","Set","add","has","push","originPoints","splitPoints","splitMap","Map","set","getCloudKeys","Float32Array","size","left","right","top","bottom","near","far","PointCloudUtils","content","parse","e","transferCanvas2World","currentPos","w","h","otherProps","pointListTransferCanvas2World","transferWorld2Canvas","EPerspectiveView","EPerspectiveView2","flat","acc","cur","MatrixUtils","matrix34Kitti","reduce","matrix33Kitti","ResourceManager","cacheMap","url","fetch","then","urlList","fetchResource","currentIndex","getResourceList","preloadResourceList","withInRange","i2","newUrlList","processResourceUrl","lidarUrl","webPointCloudFile","lidar","resourceManagerInstance","EPointCloudPattern","EPointCloudPattern2","EPointCloudSegmentMode","EPointCloudSegmentMode2","EPointCloudSegmentCoverMode","EPointCloudSegmentCoverMode2","EPointCloudSegmentFocusMode","EPointCloudSegmentFocusMode2","EPointCloudSegmentStatus","EPointCloudSegmentStatus2","ELineTypes","ELineTypes2","DEFAULT_SPHERE_PARAMS","radius","widthSegments","heightSegments","defaultZ","colorArr","colorId","hexString","rgb","hsl","l","name","__async","__this","__arguments","generator","Promise","resolve","reject","fulfilled","next","rejected","throw","done","apply","BLACK_BACKGROUND_RGBA","BLACK_BACKGROUND_RGBA_WITH_OPACITY","TRANSPARENCY_BACKGROUND_RGBA","_ImgConversionUtils","imgNode","canvas","document","createElement","ctx","getContext","src","Image","crossOrigin","onload","onerror","console","renderCanvas","imgData","customColor","hiddenUndefinedColor","backgroundRGBA","basicImgCanvas","renderPixelByImgData","getColor","colorByCustom","channel","floor","originBackgroundRGBA","basicCtx","drawImage","toDataURL","putImageData","ImgConversionUtils","nextTick","setTimeout","getColorMapBySingleChannelMask","maskSrc","basicImgSrc","createImgDom","createCanvas","maskCanvas","basicImgRenderCtx","basicImg","getImageData","newImgSrc","renderColorByMask","getMaskByColorImg","_0","renderMaskByColor","LabelBeeContext","React","createContext","useDispatch","createDispatchHook","useSelector","createSelectorHook","LLMContext","hoverKey","setHoverKey","createURL","base64","sourcemapArg","enableUnicodeArg","sourcemap","undefined","enableUnicode","binaryString","atob","binaryView","Uint8Array","n","charCodeAt","String","fromCharCode","Uint16Array","buffer","decodeBase64","start","body","blob","Blob","URL","createObjectURL","createBase64WorkerFactory","Worker","EPointCloudName","EVideoToolName","EVideoToolName2","EToolType","EToolType2","EToolName","EToolName2","ECheckModel","ERectPattern","ERectPattern2","WorkerFactory","editStepWidth","EDependPattern","EDependPattern2","EFilterToolOperation","EFilterToolOperation2","TOOL_NAME","Rect","Point","PointMarker","Segmentation","Filter","Text","Polygon","Line","LineMarker","FolderTag","RectTrack","Face","ClientAttribute","OCRRelation","SegmentByRect","VideoTextTool","VideoTagTool","VideoClipTool","PointCloud","Cuboid","LLM","TOOL_NAME_EN","EAnnotationMode","EAnnotationMode2","ELineColor","ELineColor2","ESelectedType","ESelectedType2","EDragTarget","EDragTarget2","EDrawPointPattern","EDrawPointPattern2","EPageOperator","EPageOperator2","EAuditStatus","EAuditStatus2","ETextType","ETextType2","OPERATION_LIST","leftClick","rightClick","ctrlLeftClick","ctrlRightClick","EThumbnailOption","EThumbnailOption2","TEXT_TYPE","TEXT_ATTRIBUTE_MAX_LENGTH","TEXT_ATTRIBUTE_LINE_HEIGHT","DEFAULT_TEXT_MAX_WIDTH","DEFAULT_FONT","EPolygonPattern","EPolygonPattern2","EScribblePattern","EScribblePattern2","EOperationMode","EOperationMode2","CLIENT_TOOL_HEAD_TYPE","CLIENT_TOOL_NAME","SEGMENT_NUMBER","edgeAdsorptionScope","__spreadProps","createSmoothCurvePoints","points","tension","closed","numberOfSegments","t1x","t2x","t1y","t2y","c1","c2","c3","c4","st","t","ps","slice","unshift","pow","formatResult","j","d","shift","createSmoothCurvePointsFromPointList","isInPolygon","checkPoint","polygonPoints","xinters","lineType","counter","Curve","pointCount","min","max","getPolygonPointUnderZoom","zoom","EStepType","EStepType2","headerHeight","tipsHeight","footerHeight","sidebarWidth","EDragStatus","EDragStatus2","ESortDirection","ESortDirection2","EGrowthMode","EGrowthMode2","ELang","ELang2","ERotateDirection","ERotateDirection2","ANNOTATION_MAX_SIZE","ECuboidPlain","ECuboidPlain2","ECuboidPosition","ECuboidPosition2","ECuboidDirection","ECuboidDirection2","DEFAULT_TEXT_OFFSET","DEFAULT_TEXT_SHADOW","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","TEXT_ATTRIBUTE_OFFSET","ECuboidLineDirection","ECuboidLineDirection2","DIAGONAL_POINT","tl","tr","br","bl","CUBOID_ROW","TL","TR","BL","BR","CUBOID_COLUMN","CommonToolUtils","stepList","info","currentStep","currentStepInfo","getStepInfo","QUALITY_INSPECTION","MANUAL_CORRECTION","getCurrentStepInfo","dataSourceStep","order","event","srcElement","tagName","flag","isContentEditable","readOnly","rectList","sort","ascend","selectedID","sign","descend","sortRectList","len","sortDirection","shiftKey","getNextSelectedRectID","sourceID","attributeLockList","selectedIDs","selectedRect","showingRect","isDifferSourceID","basicResult","isClose","arr","newPoint","point1","point2","pointIndex","sourceIDA","sourceIDB","translateSourceID","markerList","markerIndex","newSortList","markerInfo","every","rect","marker","defaultValue","isObject","EStatus","EStatus2","EColor","_LineToolUtils","point","calcDistance","scope","MathUtils","getFootOfPerpendicular","LineToolUtils","setSpecialEdgeStyle","lineCap","setLineDash","setReferenceCtx","calcOptimalIntersection","matchLine","matchPoint","pointRadius","optimalIntersection","scopeIntersection","minDistance","Infinity","pointAOnLine","isInLine","pointA","pointBOnLine","pointB","intersection","lineIntersection","onLine2","onLine1","isOnLine","cPoint","footPoint","distPointA","distPointB","lineA","lineB","lineADiff","getAxisDiff","lineBDiff","denominator","numerator1","numerator2","line","sqrt","abs","drawCurveLine","applyLineWidth","isReference","hoverEdgeIndex","save","lineJoin","strokeStyle","lineWidth","specialEdge","curveLinePoints","splice","beginPath","fn","restore","calcTwoPointDistance","pointOverTarget","axis","preAxis","dependToolName","dependData","dependConfig","imageSize","getRenderAxis","getAbsAxis","absAxis","polygonPointList","getPolygonPointList","PolygonUtils","intersectionAbsAxis","withinRange","endX","endY","px","py","inArea","getVHPoint","lastPoint","nextPoint","absNextPoint","renderLastPoint","angle","getAngle","startPoint","endPoint","diffX","diffY","atan","__pow","Vector","vector1","vector2","vector","getPlanePointsBasicInfo","centerPoints","getCuboidBasicInfo","frontPoints","backPoints","frontWidth","frontHeight","frontCenter","backWidth","backHeight","backCenter","isLeftSide","getPlainPointsByDiagonalPoints","getMaxExternalQuadrilateral","minX","values","coord","Number","MAX_SAFE_INTEGER","maxX","minY","maxY","getPointsByBottomRightPoint","getPointsByBottomLeftPoint","getPointsByIntersection","newBackPoints","sideLine","getCuboidShowingSideLine","intersectionPoint","newBRPoint","newBLPoint","getBackPointsByFrontPoints","getFrontPointsByBackPoints","newFrontPoints","keys","getCuboidAllSideLine","getHighlightLines","cuboid","frontLine","positions","plain","Front","position","Back","getHighlightPoints","frontPointsData","getCuboidHoverRange","diffWidth","diffHeight","isOverX","isOverY","getNewPointsAfterOffset","offset","cloneDeep","isFrontPlain","isBackPlain","lineDirection","firstPosition","secondPosition","Row","Column","judgeCuboidLineIsRowOrColumn","forbidX","forbidY","newOffset","movePoint","newFrontPoints2","newBackPoints2","getCuboidDragMove","dragTarget","newCuboidPoints","moveCuboidByCuboid","moveCuboidByLine","pointPosition","movePoints","diagonalPoint","newPlainsPoints","payload","moveCuboidByPoints","getPointListsByDirection","direction","Left","Right","Top","AxisUtils","transformPlain2PointList","getCuboidTextAttributeOffset","leftOffset","topOffset","moveCoordinate","coordinate","getOffsetCoordinate","drawOutsideTarget","rotate","imgSize","changePointByZoom","planePoints","newCoord","changePlanePointByZoom","axisArray","cX","cY","getIsInScope","pointData","lines","cuboidList","isCloseCuboid","originCuboid","linePoints","minLength","changePointListByZoom","currentCoord","targetCoord","CoordinateUtils","props","basicImgInfo","renderCoord","absCoord","curCoord","preCoord","polygonPointListToLineList","getRenderCoord","drawingLine","polygon","polygonToolConfig","getIntersection","getAbsCoord","coordInsideRect","curAbsCoord","preAbsCoord","isDependRect","isDependPolygon","coordInsidePolygon","dependToolConfig","isDependOriginalImage","coordInsideImage","isInBasicPolygon","rectHorizontalRange","rectVerticalRange","isInRange","hoverPolygonID","minSize","axisList","axisArea","calcPolygonSize","nextVal","newPoints","pos","m","ids","edgeIndex","range","option","hasClosed","closestPolygonID","closestEdgeIndex","dropFoot","isCloseNode","findAllLine","lineIndex","twoPointDistance1","getLineLength","twoPointDistance2","total","Anticlockwise","rotateRectPointList","array","selectedPolygon","concatBeginAndEnd","backgroundPolygon","diff","difference","geometry","coordinates","_a2","deletePolygonLastPoint","pointLists","newPointList","nextIndex","selectedPolygonID","isPointListInPolygon","wrapPointList","wrapDirection","isPolygonClosewise","selectedDirection","linkIndex","getClosePointDistanceFromPolygon","linkPoint","reverse","k","count","minLen","combinedPolygon","turfSelectedPolygon","turfCombinedPolygon","unionPolygon","union","unionList","newPolygon","Trigonometric","tanA","tanB","sinA","cosA","sinB","cosB","_MathUtils","text","maxWidth","font","lineHeight","context","window","getComputedStyle","fontHeight","fontSize","arrParagraph","arrText","testLine","metrics","measureText","textWidth","getVector","perpendicularLine","getPerpendicularLine","begin","end","triangle","p3","dragStartCoord","basicLine","footer1","footer2","changePointIndex","prePointIndex","getArrayIndex","nextPointIndex","originIndex","newFooter1","newFooter2","rectPointList","centerPoint","getRectCenterPoint","sin","cos","cosAPlusB","sinAPlusB","getPerpendicularFootOfLine","getQuadrangleFromTriangle","point3","cosX","acos","annotations","annotation","backgroundList","mathUtilsWorker","promise","postMessage","onmessage","terminate","close","connectionPoints","cacheSet","judgeIsConnectPoint","getClosestPoint","traverseID","newPolygonList","newWidth","newHeight","Error","fixedPoint","secondPoint","thirdPoint","lengthScaleFactor","widthScaleFactor","newSecondPoint","newThirdPoint","isArray","inRange","calcViewportBoundaries","isCurve","MIN_LENGTH","xAxis","yAxis","addLen","pt","useAxisRange","allowOverRange","retVal","dx","dy","u","ratio","fromX","toX","fromY","toY","allAxisOverRange","someAxisOverRange","isOverRange","EKeyCode","EKeyCode2","MathUtils$1","RectUtils","stepName","toolName","tool","leftTopCoordinate","changeCoordinateByRotate","basicRect","getRectPointList","EMessage","EMessage2","EKeyCode$1","message","NoRotateNotice","RectErrorSizeNotice","TextCheckNumberErrorNotice","TextCheckEnglishErrorNotice","TextCheckCustomErrorNotice","UpperLimitErrorNotice","LowerLimitErrorNotice","MinAreaLimitErrorNotice","MinLengthLimitErrorNotice","InvalidImage","DisableDelete","ClearPartialData","MarkerFinish","LowerLimitPoint","NoRotateInDependence","UnableToReannotation","ForbiddenCreationOutsideBoundary","SuccessfulEdgeAdsorption","ForbidAddNewPoint","Locale","getMessagesByLocale","locale","US","message$1","Zh","canvasEdit0","INVALID_ICON","NULL_ICON","HEADER_HEIGHT","TAB_HEIGHT","SEARCH_HEIGHT","PADDING","TABLE_ROW_HEIGHT","PAGINATION_HEIGHT","TIPS_HEIGHT","FOOTER_HEIGHT","SIDERBAR_WIDTH","EDIT_STEP_WIDTH","THEME_COLOR","COLORS_ARRAY","ICON_ARRAY","BASE_ICON","INVALID_COLOR_RGBA","FILTER_TOOL_COLOR","lc","rc","clc","crc","styleString","AttributeUtils","img","textCheckType","customFormat","regExpString","Order","NumberOnly","EnglishOnly","CustomFormat","checkStrings","RegExp","test","toolResultList","textAttributeList","textAttribute","isNumber","maxOrder","pop","toolList","item","lang","checkString","textAttributeValidate","toolLog","changeRect","baseIcon","getHexColor","generateIconAttribute","xmlns","xlink","keyCode","num","CanvasUtils","canvasRect","getBoundingClientRect","clientX","clientY","viewPort","getViewPort","originOffset","canvasWidth","canvasHeight","getPixelRatio","backingStore","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","devicePixelRatio","UnitUtils","angleDeg","angleRad","DEFAULT_CURRENT_POS","DEFAULT_COLOR","_DrawUtils","thickness","lineDash","moveTo","lineTo","hiddenText","fillStyle","strokeRect","showText","drawText","textSizeWidth","marginTop","textMaxWidth","fillRect","parent","parentNode","dom","innerHTML","setAttribute","appendChild","tagList","oldDom","self","getElementById","contains","removeChild","keyName","setStyle","specialEdgeList","i1","DEFAULT_SPECIAL_POINT_RADIUS","DEFAULT_BORDER","specialPoint","drawSpecialPoint","anchorPoint","startAngleDeg","endAngleDeg","startAngleRad","deg2rad","endAngleRad","arc","closePath","newPointRadius","xl","yl","drawLineWithPointList","otherPointList","strokeColor","fillColor","drawPolygon","drawPolygonWithFill","pointColor","drawCircleWithFill","drawPolygonWithFillAndLine","textAlign","wrapText","fillText","theta","headLen","atan2","angle1","angle2","topX","topY","botX","botY","drawArrow","defaultStyle","backPointList","drawLine","dataConfig","textColor","headerText","bottomText","frontPointsSizeWidth","drawCuboid","isShowOrder","getAttributeShowText","textPosition","DrawUtils","drawImg","imgAttribute","translate","contrast","saturation","brightness","MarkerUtils","uuid","radix","chars","random","getAuxiliaryLineByMarkerList","attr","queue","auxiliaryLines","currentNode","element","targetMarkerListItem","getAuxiliaryLineCoord","targetPoint","ActionsHistory","historyChanged","record","recordIndex","minRecordIndex","emitHistoryChanged","constructor","undoEnabled","redoEnabled","action","newRecord","cloneDeepWith","isExitData","existData","DblClickEventListener","delay","rcTime","mouseDownTime","onMouseDown","Date","getTime","isDoubleClick","removeEventListener","mouseUp","mouseMove","dblclick","singleClickFun","leftDblClick","rightDblClick","isAllowDouble","removeEvent","cTime","button","clearTimeout","setTimeFun","cacheFunction","clickCoord","getCoord","addEventListener","ImgPosUtils","canvasSize","zoomRatio","isOriginalSize","wScale","hScale","shrinkRatio","initZoom","viewCenter","imgCenter","innerZoom","RenderDomUtils","container","invalidDOM","className","ZOOM_LEVEL","from","ZoomUtils","zoomChanged","isZoomIn","growthMode","Linear","Intelligence","newZoom","maxZoom","minZoom","zoomIndex","newZoomIndex","wheelChangePos","operator","oldCurrentPos","basicZoom","zoomMax","imgWidth","imgHeight","offsetLeft","offsetTop","ratioX","ratioY","currentZoom","changeX","changeY","currentX","currentY","EventListener","_events","eventName","callback","existEvents","get","args","listener","delete","DEFAULT_ZOOM_INFO","BasicToolOperation","_h","_i","isDrag","isSpaceKey","operationMode","General","isSpaceClick","isDragStart","startTime","zoomInfo","initImgPos","_imgAttribute","getInitImgPos","setCurrentPos","currentPosStorage","setImgInfo","setZoom","render","renderBasicCanvas","emit","getCurrentPos","_firstClickCoordinate","newCurrentPos","getGetCenterCoordinate","zoomChangeOnCenter","hiddenImg","basicCanvas","showDefaultCursor","destroyCanvas","isAppend","isImgError","forbidOperation","forbidBasicResultRender","isShowCursor","strokeWidth","history","isHidden","dragStatus","Wait","defaultAttribute","forbidCursorLine","bind","onMouseMove","onMouseLeave","onMouseUp","onKeyDown","onKeyUp","onWheel","onLeftDblClick","onRightDblClick","onClick","clearImgDrag","dblClickListener","coordUtils","setBasicImgInfo","preventDefault","_ctx","MultiMove","markerConfigurable","setZoomAndCurrentPos","referenceData","setOperationMode","cursor","defaultCursor","eventUnbinding","initPosition","eventBinding","zIndex","pixel","pixelRatio","updateCanvasBasicStyle","hasChildNodes","insertBefore","childNodes","clearInvalidPage","toolStyle","setValid","originIsImgError","setShowDefaultCursor","bounding","getTextIconSvg","getCoordinateUnderZoom","newBoundry","basicZone","getBasicRecPos","undo","redo","clearRect","addEvent","onContextmenu","getCoordinate","stopPropagation","time","Alt","Space","Z","ctrlKey","isRender","delta","deltaY","wheelDelta","lineColor","renderInvalidPage","oldImgAttribute","sendMessage","clearResult","setBasicResult","setDependInfo","dataInjectionAtCreation","renderEnhance","customRenderStyle","getRotate","toolStyleConverter","getColorByConfig","color2","attributeLineColor","_invalidDOM","clearBasicCanvas","drawRect","changeRectByZoom","clearCanvas","newAttribute","TextAttributeClass","textKeyDown","Enter","submitTextarea","appendToContainer","icon","getCurrentSelectedData","updateSelectedTextAttribute","_textAttributeDOM","initTextAttributeDOM","_iconDOM","initIconDOM","_textDOM","initTextDOM","_textareaDOM","initTextareaDOM","renderTextarea","removeTextareaDOM","clearTextAttribute","removeIconDOM","removeTextDOM","focus","borderColor","oldIDs","newIDs","isEqual","changeSelected","isExitTextareaDOM","Selection","toolInstance","_selectedIDs","_textAttributeInstance","selectedIDsChanged","getRenderResultList","getSourceID","updateSelectedIDs","visibleDataList","stashDataList","_stashDataList","setDataList","stashList","toUnStashDataList","keyBy","merge","mergeStashData","selectAll","toStashDataList","RectOperation","setMarkerIndex","setMarkerIndexAndSelect","markerValue","currentRect","currentPageResult","setSelectedRectID","setDefaultAttribute","getHoverRectID","currentShowList","selectedRectID","isInRect","hoverList","textChange","textConfigurable","setRectList","drawOutSideTarget","isFlow","hoverRectEdgeIndex","hoverRectPointIndex","createNewDrawingRect","getDrawingRectWithRectList","setSelectedIdAfterAddingDrawingRect","updateSelectedRectTextAttribute","setSelectedID","selection","clearActiveStatus","hasMarkerConfig","nextMarkerInfo","getNextMarker","getCurrentPageResult","isClear","isUpload","oldLen","selectedRects","setSelectedIDs","updateIcon","newTextAttribute","getErrorNotice","returnClosePointIndex","edgeList","getRectEdgeList","edge","forbidMouseOperation","hoverRectID","firstRect","getHoverRectPointIndex","dragInfo","Start","getHoverRectEdgeIndex","isIdSelected","drawingRect","Plane","originRectList","rects","rectsPoint","pre","appendOffsetRect","rectsBoundaries","getRectsBoundaries","selectedRectRange","isRectNotInPolygon","isRectsOutOfTarget","updatedRect","Move","dragRect","getRectUnderZoom","newX","newY","basicX","basicY","basicWidth","basicHeight","moveRects","coordinateZoom","changeDrawOutsideTarget","onDragMove","oldHoverRectID","firstClickCoord","basicSourceID","nextMarkInfo","getTextAttribute","isSameSourceID","getMaxOrder","firstCurrentPos","minWidth","minHeight","newRectList","pushHistory","hoverRect","clearRightDblClick","getCurrentMarkerIndex","addDrawingRectToRectList","setRectValidAndRender","rightMouseUp","shiftRightMouseUp","deleteSelectedRect","deleteRect","hotkeyFilter","Ctrl","F","setIsHidden","Tab","inViewPort","nextSelectedRect","keyCode2Attribute","getAttributeByKeycode","triggerKeyboardEvent","newDrawingRect","newFirsClickCoord","oldZoom","customStyle","isExit","update","renderTextAttribute","isZoom","getRenderStyle","getMarkerShowText","transformRect","isMultiMoveMode","drawRectWithFill","rectSize","renderDrawingRect","staticRender","renderSelectedRect","selectedRender","creatingRender","renderStaticRect","renderCreatingRect","renderRect","renderCursorLine","getLineColor","oldDefault","changeStyle","disableDelete","rectID","TagUtil","labelInfoSet","valueList","nameList","getTagKeyName","getTagName","resultValue","isDefault","originResultList","basicResultList","defaultResult","getDefaultResultByConfig","TagOperation","getInitResultList","getDefaultTagResult","setLabel","isMulti","basicTagResult","tagResult","times","oldKey","keyList","labelSelectedList","clearTag","currentTagResult","tagInfoList","getTagNameList","renderTag","StyleUtils","isSelected","isHover","PointOperation","currentPoint","setPointList","isMinDistance","transformCoord","transformPoint","createPoint","forbidAddNew","forbidDelete","drawPointOut","setNextMarker","recoverOperationMode","hoverID","selectedPoints","originPointList","getHoverId","onDragMoveAll","zoomCoordinate","getOriginCoordinateWithOffsetCoordinate","deletePoint","onTabKeyDown","A","upperLimit","edgeAdsorption","isOutSide","newDrawingPoint","selectPoint","print","isInPoint","hoverPoint","showingResult","selectedResult","undoAndRedo","toolData","drawCircle","showOrder","hideAttribute","renderPoint","showingPointList","selectedPoint","startCoord","endCoord","pointListCoord","renderAuxiliaryLine","renderPointList","renderTop","LINE_ORDER_OFFSET","LineToolOperation","drawActivatedLine","hideTempAxis","isCreate","activeLine","nextOrder","isLineValid","selectedLines","isActiveLineValid","actual","getLineColorByAttribute","drawLineLength","renderActiveArea","drawLineNumber","isShift","drawHoverPoint","isMousedown","nearestPoint","getPointList","findNearestPoint","hoverPointID","updatedLine","coordsInsideActiveArea","hoverLineSegmentIndex","showPoint","isActive","pointsToDraw","lineConfig","lineStyle","drawStraightLine","pointID","prePoint","drawLines","attributeFilteredLines","displayOrder","textEditingID","drawLineTextAttribute","moveLineInPolygon","lineDragging","moveActiveArea","getSelectedLinesArea","moveLineInRectRange","hBoundaries","vBoundaries","horizontalInRange","verticalInRange","calcOffsetX","calcOffsetY","onRightClick","isLinePointsNotEnough","lineLengthSum","stopLineCreating","findHoverLine","setSelectedLineID","updateSelectedAttributeAfterHistoryChanged","updateAttribute","onLeftClick","isNone","hoveredLine","setInvalidLine","isLinePointsExceed","nextAxis","getNextPoint","setCreateStatusAndAddPoint","isMouseCoordOutsideActiveArea","setNoneStatus","updateLineSegmentSpecial","addLinePointToActiveLine","onDblclick","setLineList","Esc","selectedLine","deleteLine","continueToEdit","keyboardEventWhileLineCreating","findHoveredPoint","deleteSelectedLinePoint","deleteSelectedLine","setReference","pointsWithinRange","lowerLimitPointNum","upperLimitPointNum","lengthChanged","lineListLen","status","setConfig","prevAxis","actionsHistory","MultiColor","enableOutOfTarget","outOfTarget","resetText","defaultText","isTextConfigurable","lineStatusChanged","getNextCoordByAbsCoord","getNextCoordByDependTool","initRecord","isRestText","updateStatus","addLinePoint","keyForAttribute","showLineLength","renderPos","iAxis","list","getLineWidthScope","updateLines","isVH","disabledAdsorb","altKey","edgeAdsorptionEnabled","getAdsorptionPoint","getCoordByConfig","getNextCoordByRenderCoord","isLeftClick","which","hasActiveLine","renderNextPoint","lineHover","edgeAdsorptionPoint","moveSelectPoint","moveSelectedLine","mouseMoveHandler","funcName","enableKeyName","setActiveLine","currentHistory","straightLinePoints","pointInLine","specialEdgeIndex","getPointInsertIndex","insertIndex","pointsWithInRange","isCoordOnSelectedArea","reset","newLine","setActiveAfterCreating","cloneWith","createLineData","empty","Shift","setKeyDownStatus","toggleIsHide","selectToNextLine","nextSelectedLine","getNextSelectedRectIDByEvent","viewPortLines","setInvalidLineOnCreating","boundary","setLineAttribute","applyAttribute","updateTextAttribute","updateHistory","selectedLineID","triggerAttrUpdate","updateAttrWhileIDChanged","setResult","setTextAttribute","TextToolOperation","getSingleResult","initValue","configList","default","textList","initTextDisplayContainer","textValueContainerID","textResultList","toggleTextContainerVisible","renderText","textDom","innerText","domStyle","background","div","getTextDomID","textValueContainer","isVisible","display","PolygonOperation","currentSelectedID","getHoverID","setPolygonList","emitUpdatePolygonByDrag","originPolygon","drawingPointList","hoverPointIndex","drawingHistory","isCtrl","isAlt","isCombined","pattern","Normal","minArea","dragMouseUp","getPolygonByID","visiblePolygonList","getPolygonByIDs","Boolean","isForce","showingPolygon","selectedPolygons","newPolygonData","Clockwise","rotatePointList","updatePolygonByRotate","setPolygonDataByID","forbidAddNewPolygonFuc","deleteSelectedID","polygonListUnderZoom","coordinateWithOrigin","getRectangleByRightAngle","isPolygonOutSide","addDrawingPointToPolygonList","clearPolygonDrag","currentValid","isRect","createPolygon","editPolygonID","samePolygon","setSelectedIdAfterAddingDrawing","polygonListWithZoom","getHoverPolygonID","selectPolygon","editPointListUnderZoom","getHoverEdgeIndex","deletedPolygon","deletedObject","switchToNextPolygon","sortList","nextSelectedResult","spaceKeydown","setPolygonValidAndRender","onCombinedExecute","deletePolygons","X","segment","oldAlt","getHoverPointIndex","deletePolygonPoint","dragMouseDown","initPointList","closePointIndex","closeEdgeIndex","dragPrevCoord","originPolygonList","selectedPointList","backgroundPolygonList","wrapIndex","getWrapPolygonIndex","newPointListArray","segmentPolygonByPolygon","clipPolygonFromWrapPolygon","composeData","combinePolygonWithPolygon","isPointListOutSidePolygon","dragPolygon","firstPointIndex","secondPointIndex","perpendicularOffset","getRectPerpendicularOffset","getDragOffset","getPointListFromPointOffset","newHoverID","leftMouseUpdateValid","addPointInDrawing","combine","leftMouseUp","transformPointList","renderSelectedPolygon","drawSelectedPolygonWithFillAndLine","hoverPolygon","renderStaticPolygon","renderHoverPolygon","renderSelectedPolygons","defaultColor","selectdPolygon","hoverColor","selectedColor","padding","rectWidth","MeasureOperation","RenderDomClass","_domMap","_container","_height","wheelChange","oldKeys","newKeys","drawTagByDom","getStyle2String","createThreeMatrix4","matrix4","THREE","transferKitti2Matrix","P","R","T","PMA","transferMatrix34FromKitti2Three","RMA","transferMatrix33FromKitti2Three","TMA","PM","RM","TM","composeMatrix4","clone","premultiply","rotatePoint","rotationZ","pointVector","Rz","makeRotationZ","TFrom","makeTranslation","TBack","applyMatrix4","lidar2image","newV","fixMatrix4","getCuboidFromPointCloudBox","zMax","zMin","crossProduct","x1","y1","x2","buildConvexHull","sortedPoints","sortPoints","lowerHull","upperHull","point3DLidar2Image","cameraMatrix","point2dTo3D","invert","isInImage","calib","image2D","getHighlightIndexByPoints","highlightIndex","mergeHighlightList","indexList","pointCloudLidar2image","createRange","allViewData","getAllViewData","transferViewData","viewData","viewRangePointList","frontPointList","EAnnotationStatus","EAnnotationStatus2","DEFAULT_STROKE_COLOR","ViewOperation","originCoordinate","area","getPolygonArea","loading","renderDomInstance","newAnnotations","connectPointsStatus","getCollectionPointByAnnotationDataPromise","res","mouseHoverID","newMouseSelectedID","oldMouseHoverID","newMouseHoverID","specificStyle","pick","newStyle","fontFamily","newBoundary","setCurrentPosStorage","innerPosAndZoom","getSpecificStyle","fontStyle","getFontStyle","renderLineWithZoom","lineRenderOptions","getReferenceOptions","showKeyPoint","drawPolygonWithKeyPoint","showDirection","getLineCenterPoint","drawArrowByCanvas","getRenderText","appendOffset","fillArr","polygonRenderOptions","transformCuboid","changeCuboidByZoom","drawCuboidWithText","viewDataPointList","defaultViewStyle","extraData","newAnnotation","renderLine","globalDomTextAnnotation","hiddenRectSize","textAnnotation","getTextArea","paddingLR","paddingTB","renderBox3d","renderSingleCuboid","renderConnectionPoints","ScribbleTool","Scribble","getOriginCoordinate","getCoordinateUnderZoomByRotate","initCacheCanvas","mouseEvents","eventType","onScribbleMove","onScribbleEnd","onScribbleStart","Erase","onEraseMove","onEraseEnd","onEraseStart","setPattern","setCustomCursor","cursorErase","penSize","firstAttributeInfo","iconUrl","btoa","unescape","encodeURIComponent","isShowDefaultCursor","defaultAttributeInfo","cacheCanvas","cacheContext","clearCacheCanvas","updateCacheCanvasSize","cacheCanvasToDataUrl","updateUrl2CacheContext","attributeValue","attributeInfo","clearStatusAfterLeave","penSizeWithZoom","buttons","clip","eraseArc","imgBase64","globalAlpha","renderBorderPoint","rectToolConfig","showConfirm","skipWhileNoDependencies","copyBackwardResult","filterData","tagToolConfig","lineToolConfig","preReferenceStep","textToolConfig","enableTextRecognition","recognitionMode","required","maxLength","polygonConfig","getConfig","styleDefaultConfig","PointCloud2dOperation","highlightAttributeList","hoverAttribute","renderSingleSelectedPolygon","getPointCloudLineColor","showDirectionLine","renderRectPolygonDirection","renderdrawTrackID","emitUpdateList","pointCloudConfig","hideAttributes","checkMode","newConfig","hardSetSelectedIDs","updateList","_b2","getColorFromConfig","isHighlight","currentPolygonListByPattern","oldID","isUpdate","ANNOTATION_TYPE","ANNOTATION_STATUS","EDrawingStatus","EDrawingStatus2","MORE_ICON_LISTS","CuboidToggleButtonClass","cuboidButtonMove","toggleDirection","isFrontSide","onToggleDirection","_cuboidButtonDOM","initCuboidButtonDOM","_cuboidFABDOM","initcuboidFABDOM","_cuboidMoreDOM","initcuboidMoreDOM","_cuboidMoreListDOM","initcuboidMoreListDOM","_cuboidFAB","clearCuboidMoreListDOM","cuboidMoreListDOM","str","lastIconStyle","CuboidOperation","drawingStatus","getHoverData","hoverCuboid","setCuboidList","selectedCuboid","showingCuboid","selectedCuboids","getCoordinateInOrigin","newCuboid","getStylesToRender","deleteCuboid","drawingCuboid","setCuboidValidAndRender","getIsHoverSelectedCuboid","DEFAULT_DRAG_INFO","initCuboid","highlightInfo","returnClosePointOrLineInCuboid","firstHighlightInfo","createNewDrawingCuboid","closeNewDrawingFrontPlane","closeAndCreateNewCuboid","drawingFrontPlanesMove","drawingBackPlaneMove","onHoverMove","isForbiddenMove","updateSelectedCuboid","isNeedCheckCuboidSize","isCuboidWithInLimits","clearDrawingStatus","hoverPointList","toggleButtonInstance","updateMouseOperation","toggleOffset","toggleSize","frontPointsCenter","getToggleDirectionButtonOffset","renderHighlightCuboidCom","renderToggleButton","clearCuboidButtonDOM","setForbidCursorLine","setForbidOperation","renderStatic","renderDrawing","renderSelected","renderHover","renderCuboid","CheckOperation","fillID","drawTag","isShow","getTagnameListWithoutConfig","onKeydown","clearPredictionInfo","segmentPrediction","isRunSegment","runPrediction","isEn","getCurrentOperation","Check","PointCloudPolygon","EnhanceCommonToolUtils","ImgUtils","startsWith","encodeURI","arraySwap","index1","index2","_HybridToolUtils","isHybridTool","HybridToolUtils","getTopToolName","ToolScheduler","toolOperationList","toolOperationDom","toolOperationNameList","proxyMode","setImgNode","setImgAttribute","setSize","currentToolInstance","defaultSize","imgSrc","createEmptyImage","emptyImgNode","createDom","getEmptyImage","defaultData","ToolOperation","on","syncPosition","lastOneIndex","last2SecondIndex","lastOneDom","last2SecondDom","clearCursorLine","chosenIndex","chosenDom","temp","operationIndex","destroyAllLayer","eventUnBinding","loadImage","AnnotationEngine","setImgSrc","toolScheduler","i18nLanguage","_initToolOperation","defaultConfig","isSingleTool","createOperation","setLang","setDependName","setBasicInfo","setDataInjectionAtCreation","setRenderEnhance","newInstance","switchLastTwoCanvas","getFirstToolOperation","setCustomRenderStyle","CanvasScheduler","PCDLoader","manager","littleEndian","onLoad","onProgress","onError","loader","FileLoader","setPath","path","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","load","itemError","textData","LoaderUtils","decodeText","PCDheader","data2","PCDheader2","result1","search","result2","exec","headerLen","version","fields","viewpoint","sizeSum","rowSize","parseHeader","normal","genColorByZ","pdColorUnit8","normal_x","normal_y","normal_z","sizes","Uint32Array","compressedSize","decompressedSize","decompressed","inData","outLength","ctrl","ref","inLength","outData","inPtr","outPtr","decompressLZF","dataview","DataView","getFloat32","row","BufferGeometry","Float32BufferAttribute","computeBoundingSphere","material","PointsMaterial","vertexColors","setHex","Points","minZ","maxZ","getIndex","Loader","__publicField","_changeEvent","_startEvent","_endEvent","OrbitControls","object","domElement","_domElementKeyEvents","warn","touchAction","enabled","Vector3","maxDistance","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","position0","zoom0","getPolarAngle","spherical","phi","getAzimuthalAngle","getDistance","distanceTo","saveState","copy","updateProjectionMatrix","dispatchEvent","state","STATE","NONE","quat","Quaternion","setFromUnitVectors","up","quatInverse","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","isFinite","makeSafe","addScaledVector","panOffset","setFromSpherical","lookAt","multiplyScalar","distanceToSquared","EPS","dot","quaternion","dispose","onContextMenu","onPointerDown","onPointerCancel","onMouseWheel","onPointerMove","onPointerUp","onKeyDown2","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","clientWidth","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","handleTouchMoveRotate","getSecondPointerPosition","subVectors","handleTouchMovePan","handleTouchMoveDolly","setPointerCapture","pointerId","addPointer","pointerType","trackPointer","DOLLY_ROTATE","onTouchStart","mouseAction","handleMouseDownDolly","metaKey","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","onTouchMove","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","removePointer","releasePointerCapture","handleMouseWheel","needsUpdate","code","handleKeyDown","pointer","passive","EventDispatcher","PointCloudCache","MAX_SIZE","cacheList","loadPCDFile","clonePoints","pointsMap","cloneColor","colorMap","firstCacheInfo","pcdLoader","pointsArray","attributes","colorArray","err","cache2DHighlightIndex","clear","instance","DefaultSelector","store","polygon2d","syncPolygon2d","ev","pushPoint","getPointsInPolygon","updatePolygon2d","arguments","startX","startY","NaN","PI2","ox","oy","nx","ny","PointCloudSegmentOperation","iev","isCheckStatus","isReadyStatus","updateMouse","isForbid","currentTool","mouseDown","orbiting","baseMouseDown","checkPoints","_raycasting","Ready","segmentStatus","mouse","camera","raycaster","setFromCamera","intersect","intersectObjects","allSegmentPoints","highlightPoints","resetAllSegDataSizeAndRender","resetHoverPointsID","lassoSelector","circleSelector","currentToolName","updateSelector2Lasso","updateSelector2Circle","Edit","PointCloudStore","scene","renderer","unbind","canvas2d","cloudData","segmentData","hoverPointsID","segmentMode","Add","segmentCoverMode","Cover","segmentFocusMode","Unfocus","hideSegment","updatePointCloud","addPointCloud","currentAttribute","highlightAttribute","hiddenAttributes","pointCloudObjectName","updatePointCloudBySegment","segArr","seg","cacheSegData","segPoints","getObjectByName","removeFromParent","displaySeg","f","updateCoverPoints","coverPoints","newIndexes","splitPointsFromIndexes","indexes","syncSegmentData","createCanvas2d","clearStash","addStash2Store","updateCheck2Edit","setSegmentMode","setSegmentCoverMode","setSegmentFocusMode","switchSegmentHideMode","highlightPointsByAttribute","setHiddenAttributes","clearAllSegmentData","deleteSelectedSegmentData","initMsg","setupRaycaster","children","isEditStatus","newArray","pointCloudArray","visible","statusToggle","updateStatus2Edit","containerWidth","containerHeight","Mesh","threshold","LOD","Sprite","mode","coverMode","focusMode","Focus","cloudDataArrayLike","vertices","covers","vector3d","project","projection","Remove","Uncover","verticesArray","updateStatusBySelector","combinedLength","combined","coverCombined","splitPointsFromPoints","formatData","syncPointCloudStatus","updateCloudDataStatus","originSegmentData","segmentPoints","resetSelectedSegmentStatus","updateStatus2Ready","hoverPoints","updateStatus2Check","setX","setY","resetAllSegDataSize","PointCloudRender","pointsGeo","render3d","generateNewPoints","pointsMaterial","getCurrentColor","updateNewPoints","updatePointsColor","clearSelectedSegmentRender","animate","requestAnimationFrame","clearCanvasMouse","renderCanvas2dPolygon","highlightWorker","noAppend","orthographicParams","backgroundColor","isSegment","zAxisLimit","initCameraPosition","DEFAULT_INIT_CAMERA_POSITION","pointsUuid","rangeObjectName","highlightGroupName","pointsMaterialSize","segmentOperation","keydown","controls","keyup","addSphereToSense","sphereParams","removeObjectByName","group","spGeo","spMaterial","sphere","generateSphere","generateSpheres","spheres","addBoxToSense","cube","box","arrow","generateBoxArrow","boxID","generateBoxTrackID","applyCameraTarget","cameraTarget","getOrthographicCameraTarget","updateCameraZoom","updateCamera","initShaderMaterial","vertexShader","fragmentShader","uniforms","pointSize","currentPCDSrc","clearPointCloud","cacheInstance","clearCache2DHighlightIndex","initCloudData","renderPointCloud","getHighlightIndexByMappingImgList","mappingImgList","all","imgNodeList","highlightIndexList","mergeList","loadPCDFileByBox","cb","points2","filterPointsByBox","generateRange","circle","dir","origin","arrowHelper","texture","getTextCanvas","sprite","depthWrite","applyZAxisPoints","filterZAxisPoints","updatePointSize","zoomIn","customSize","preSize","uniformsNeedUpdate","antialias","initCamera","axesHelper","getInstance","initSegment","pointCloudDelegate","orbiterStart","orbiterChange","orbiterEnd","pointCloudRender","eventBus","aspect","setDefaultControls","setPixelRatio","initControls","initRenderer","prefix","oldBox","newColor","boxes","perspectiveView","customCameraVector","cameraPositionVector","getCameraVector","updateCameraByBox","updateCameraBySphere","setInitCameraPosition","filterBoxWorker","WorkerFactory$1","newPosition","defaultDistance","TcMatrix4","frontViewMatrix4","backViewMatrix4","leftViewMatrix4","rightViewMatrix4","topViewMatrix4","LFT","leftFrontTopViewMatrix4","RBT","rightBackTopViewMatrix4","Tc","centerVector","cameraVector","getPoints","setFromPoints","ellipse","clearAllGroupByPrefix","child","setOriginPoints","pointCloudBoxList","oldPointCloud","highlightPCDSrc","getAllAttributeColor","dimensions","colorAttribute","updateColor","clearHighlightBoxes","transparent","depthTest","rotateZ","mesh","planeGeo","rotateY","rM","makeRotationY","plainMaterial","side","plainMesh","textBaseline","innerPointList","roadPoint","noisePercent","endIndexZ","startIndexX","endIndexX","startIndexY","endIndexY","minDistanceList","_polygon","_minDistanceList","getIntersectionBySlope","zScope","intelligentFit","zCount","fittedCoordinates","pointPosArray","idx","filterNoise","getFittedCoordinates","multiply","getBoxPolygon2DCoordinate","getSpherePoint2DCoordinate","getPolygonSidePoints","getPolygonBackPoints","getPolygonTopPoints","vectorList","boxParams2ViewPolygon","projectMatrix","matrixWorldInverse","projectionMatrix","boxSideMatrix","getModelTransformationMatrix","basicCoordinate2CanvasMatrix4","sideMatrix","wZoom","hZoom","transParams","point2d","offsetCenterPoint","offsetWidth","offsetDepth","selectedPointCloudBox","offsetVector","newBoxParams","offsetHeight","invertMatrix","polygonWorld","p1v","p2v","p3v","p4v","applyMatrix3","pcdPoints","visibility","getZ","PointCloudAnnotation","pcdPath","extraProps","updateLineList","canvasLineList","updateDataByToolName","updatePolygonList","pointCloudDataList","extraList","pointCloudInstance","getBoxTopPolygon2DCoordinate","updatePointList","sphereList","getSphereTopPoint2DCoordinate","defaultOrthographic","getDefaultOrthographicParams","image","canvasScheduler","pointCloud","defaultProps","pointCloudPolygonOperation","pointCloud2dOperation","syncAllAttributeListInConfig","updateTopCamera","initOrthographicCamera","getBoxParamsFromResultList","getPolygonListFromResultList","getLineListFromResultList","getSphereParamsFromResultList","addPolygonListOnTopView","addLineListOnTopView","addPointListOnTopView","switchToCanvas","clearPointCloudAndRender","toolUtils","PointCloudContext","pointCloudSphereList","displayPointCloudList","displaySphereList","displayLineList","setPointCloudResult","setPointCloudSphereList","setPointCloudValid","setTopViewInstance","setSideViewInstance","setBackViewInstance","setMainViewInstance","addSelectedID","selectedAllBoxes","addPointCloudBox","addPointCloudSphere","setHideAttributes","toggleAttributesVisible","reRender","setAttrPanelLayout","attrPanelLayout","syncAllViewPointCloudColor","pointCloudPattern","setPointCloudPattern","selectSpecAttr","globalPattern","Detection","setGlobalPattern","setPtSegmentInstance","setSegmentation","clearAllDetectionInstance","highlight2DDataList","setHighlight2DDataList","useState","setSelectedIDsState","topViewInstance","sideViewInstance","backViewInstance","mainViewInstance","useRef","current","ptSegmentInstance","dispatch","useMemo","ptCtx","pointCloudList","newHighlight2DDataList","pointCloudObject","highlightOriginPointCloud","newPointCloudList","newSphereList","tAttribute","updatedHideAttributes","_displayPointCloudList","_polygonList","_displaySphereList","_lineList","_segmentation","clearAllBox","clearAllSphere","generateBoxes","updateCurrentSegment","ChangeSave","useEffect","pointCloudForFilteredList","filteredIDs","updateSelectedIDsAndRenderAfterHide","Provider","ESubmitType","componentCls","classArray","block","elm","modify","defaultElement","dispatchTasks","tasks","task","getSubmitByPageOperation","pageTurningOperation","EPageTurningOperation","Forward","Backward","Jump","getBasicIndex","annotationStore","basicIndex","imgIndex","getStepConfig","SetTaskStepList","ANNOTATION_ACTIONS","SET_TASK_STEP_LIST","SET_TASK_CONFIG","UpdateOnSubmit","onSubmit","UPDATE_ON_SUBMIT","UpdateOnSave","onSave","UPDATE_ON_SAVE","UpdateOnPageChange","onPageChange","UPDATE_ON_PAGE_CHANGE","UpdateOnStepChange","onStepChange","UPDATE_ON_STEP_CHANGE","UpdateGetFileData","getFileData","UPDATE_GET_FILE_DATA","UpdatePageSize","pageSize","UPDATE_PAGE_SIZE","UpdateGetFileList","loadFileList","UPDATE_LOAD_FILE_LIST","UpdateSkipBeforePageTurning","skipBeforePageTurning","SKIP_BEFORE_PAGE_TURNING","UpdateBeforeRotate","beforeRotate","UPDATE_BEFORE_ROTATE","UpdatePreDataProcess","preDataProcess","UPDATE_PRE_DATA_PROCESS","UpdateCheckMode","SET_CHECK_MODE","UpdateHighlightAttribute","SET_HIGHLIGHT_ATTRIBUTE","UpdateProcessingStep","toStep","getState","SUBMIT_RESULT","SUBMIT_FILE_DATA","submitType","StepChanged","SET_STEP","CALC_STEP_PROGRESS","LoadFileAndFileData","ToSubmitFileData","SubmitAndChangeFileIndex","nextBasicIndex","ChangeBasicIndex","SET_BASIC_INDEX","ChangeTriggerEventAfterIndexChanged","triggerEventAfterIndexChanged","SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED","loadImgList","isInitial","page","SetAnnotationLoading","fileList","newImgList","UPDATE_IMG_LIST","DispatcherTurning","toIndex","PageOperator","getNextPageInfo","fileIndexChanged","fileIndex","basicIndexChanged","SET_LOADING","BATCH_UPDATE_IMG_LIST_RESULT_BY_PREDICT_RESULT","rangeIndex","BATCH_UPDATE_RESULT_BY_TRACK_ID","BATCH_UPDATE_TRACK_ID","SAVE_RESULT","COPY_BACKWARD_RESULT","selectedBoxTrackID","selectedBoxID","getBoxesByTrackID","INIT_ALL_STATE","SetTaskConfig","INIT_TOOL","loadPCDFileLoading","SET_LOADPCDFILE_LOADING","SET_PREDICT_RESULT","SET_PREDICT_RESULT_VISIBLE","pageNumber","nextStep","currentStepIndex","getNextStep","UPDATE_ROTATE","UPDATE_TOOL_INSTANCE","StepUtils","ToolUtils","isVideoTool","isPointCloudTool","cAnnotation","useContext","usePolygon","updateSelectedPolygon","updatePolygonValidByID","deletePolygon","pushHistoryWithList","useHistory","selectedBox","boxIndex","updateSelectedBox","useCallback","newPointCloudBoxList","updateBoxByID","changePolygonViewValid","changeSelectedBoxValid","changeValidByID","boxInfo","switchToNext","manual","newSelectedIDs","KeyboardEvent","deletePointCloudBox","selectedBoxes","updateSelectedBoxes","hasModify","updatedBoxParam","generateBox","getPointCloudByID","selectNextBox","selectPrevBox","deleteSelectedPointCloudBoxAndPolygon","configureStore","forwardRef","useImperativeHandle","annotationEngine","pageBackwardActions","PageBackward","pageForwardActions","PageForward","pageJump","PageJump","hello","alert","I18nextProvider","PointCloudProvider","setToolInstance","revoke","shortCut","fullScreen","noticeInfo","backward","forward","dargWithRightClick","dargWithLeftClick","tabChangeSelected","tabReverseChangeSelected","hidden","changeSpecialLine","saveResult","speed","shortCutUseHtml","playPause","forwardForward","rewind","UPDATE_ANNOTATION_CONFIG","LOAD_FILE_DATA","SET_TOOL","GET_FILE_DATA","SET_FILE_DATA","SET_POINT_CLOUD_LOADING","UPDATE_ANNOTATION_VALID","UPDATE_IMG_ATTRIBUTE","INIT_IMG_ATTRIBUTE","INIT_TOOL_STYLE_CONFIG","UPDATE_TOOL_STYLE_CONFIG","initialState","imgPageSize","stepProgress","pointCloudLoading","predictionResult","predictionResultVisible","calcStepProgress","resultStr","updateToolInstance","stepConfig","ConfigUtils","getFormatSize","innerWidth","innerHeight","TryGetFileDataByAPI","fileData","AfterVideoLoaded","AfterImageLoaded","catch","setErrorImg","currentIsVideo","currentToolIsVideo","currentIsPointCloud","currentToolIsPointCloud","currentIsLLM","oldResultString","exportData","customObject","exportCustomData","resultWithBasicInfo","composeResultWithBasicImgInfo","newResultString","composeResult","newResult","AnnotationDataUtils","dataCorrection","SyncImgList","exportResult","previousResultList","newResultData","fileResult","dependStepConfig","stepBasicResultList","launchOperation","imgError","stepResult","isInitData","hasDataSourceStep","getInitialResultList","resultForBasicIndex","updateRotate","Modal","confirm","onOk","okText","cancelText","backwardResult","copyResultChange","asyncData","setToolName","updateImgList","newInfo","batchUpdateTrackID","batchUpdateResultByTrackID","tmpMap","nextImgList","elementResult","BatchUpdateImgList","ceil","newLineList","newPointCloudSphereList","addHistory","newSphereParams","historyRecord","initHistory","pushHistoryUnderUpdatePolygon","pushHistoryUnderUpdateLine","currentData","stepInfo","configString","useRafState","el","getTargetElement","setState","onChangeSize","debounce","entry","useLayoutEffect","resizeObserver","ResizeObserver","observe","disconnect","DEFAULT_RADIUS","PointCloudView","topViewPoint2PointCloud","selectedPointCloudSphere","topViewPolygon2PointCloud","worldPointList","zInfo","getSensesPointZAxisInPolygon","getRadiusFromQuadrangle","sideViewPoint2PointCloud","originPoint","selectedSphere","sideViewPolygon2PointCloud","op1","op2","op3","newCenterPoint","oldCenterPoint","getNewBoxBySideUpdate","backViewPoint2PointCloud","backViewPolygon2PointCloud","getNewBoxByBackUpdate","syncSideViewByPoint","updateOrthoCameraBySphere","getSphereSidePoint2DCoordinate","synchronizeSideView","updateOrthoCamera","getBoxSidePolygon2DCoordinate","setResultAndSelectedID","syncBackViewByPoint","getSphereBackPoint2DCoordinate","synchronizeBackView","BackViewInstance","backPointCloudPolygonOperation","backPointCloud","getBoxBackPolygon2DCoordinate","syncTopViewByPoint","synchronizeTopView","oldPolygon","useSingleBox","useSphere","getPointCloudSphereByID","updatePointCloudSphere","useTranslation","topViewAddSphere","topViewAddBox","topViewSelectedChanged","sideViewUpdateBox","backViewUpdateBox","topViewPointCloud","mainViewGenBox","mainViewGenSphere","viewUpdateBox","fromView","transfer2PointCloud","newBox","PreDataProcess","updateCurrentView","omitView","viewUpdatePoint","syncPointCloudPoint","dataUrl","viewToBeUpdated","syncPointCloudViews","trackConfigurable","getNextTrackID","polygonOperation","lowerLimitPointsNumInBox","isBoxHidden","newSelectedBox","newSelectedSphere","operation","topViewUpdatePoint","updatePoint","pointCloudSphere","sideViewUpdatePoint","backViewUpdatePoint","topViewUpdateBox","updatePointCloudList","pointCloudBox","topViewUpdateLine","pointCloudBoxListUpdated","newBoxes","initPointCloud3d","updatePointCloudData","SetPointCloudLoading","SetLoadPCDFileLoading","clearAllData","updateData","updateViewsByDefaultSize","widthDefault","depthDefault","heightDefault","pointsInWorld","newPolygonPoints","getModifiedRectangleCoordinates","bottomZ","cTool","B","C","sphereIndex","deletePointCloudSphere","switchToNextSphere","currentSelectedId","selectedIndex","newSelectedPoint","footerCls","FooterDivider","Divider","renderFooter","footerTips","hiddenTips","pagination","zoomController","footerDivider","annotateAttrList","flex","connect","totalPage","getTotalPage","footer","hasSourceStep","Pagination","pageBackward","pageForward","FooterTips","AnnotatedAttributesIcon","HiddenTips","PageNumber","ZoomController","shortCutTable","ToolHotKeyCom","title","toolbar","titleOnSurface","getClassName","ExpandAltOutlined","marginLeft","longTextCls","placement","SearchOutlined","openByText","isToolTips","wordCount","useSize","isOverflow","scrollWidth","Popover","overlayClassName","tipsProps","open","TextDom","Tooltip","Panel","Collapse","sidebarCls","sider","enableColorPicker","setSiderWidth","propsSiderWidth","showSide","setShowSide","toolIcon","ToolIcons","onChange","SwitchAttributeList","annotationText","AnnotationText","defaultActiveKey","bordered","expandIconPosition","expandIcon","expandIconFuc","ToolStyleComponent","ToolStyle","header","renderStylePanel","imageAttributeInfo","ClearIcon","ImgAttributeInfo","tagToolSideBar","TagSidebar","textToolSideBar","TextToolSidebar","scribbleSidebar","ScribbleSidebar","LLMSidebar","LLMToolSidebar","horizontal","pointCloudToolSidebar","PointCloudToolSidebar","pointCloudOperation","PointCloudOperation","showFoldSide","hideSideBox","justifyContent","transform","Tabs","activeKey","classnames","tabBarExtraContent","TabPane","tab","flexDirection","addPolygon","clearSBViewResult","isPointCloudDetectionPattern","isPointCloudSegmentationPattern","clearAllResult","clearStatusAndResult","updatePointCloudPattern","instanceArr","findTagLabel","primaryTagConfig","secondaryTagConfig","keyLabel","valueLabel","tagsSortThruInputList","tagsKeys","key1","key2","input","findLabelFromValuesArray","valuesArray","exitsTags","tagHasAssign","valuesLabelArray","places","EXAMPLE_IMAGE_SIZE","getDataUrl","cropAndEnlarge","views","sx","sy","newCanvas","newCtx","getInteriorNumbersByStartAndEnd","resultArr","imageList","targetStep","matchingBoxes","view","centerKeys","predictKeys","nextCenter","nextValue","AttributeList","radioRef","paletteVisible","setPaletteVisible","editConfigIndex","setEditConfigIndex","NEW_ATTRIBUTE_COLORS","forbidDefault","noHeightLimit","Radio","Group","selectedAttribute","attributeChanged","hotKey","isChosen","limit","sizeLimit","logicalCondition","sizeRange","hasLimit","positionLimit","showLimitPopover","forbidColor","ColorPalette","setColor","updateColorConfig","changeColor","alignItems","CloseOutlined","onVisibleChange","ColorTag","marginRight","LimitPopover","updateSize","select","syncThreeViewsAttribute","updateDefaultAttribute","reRenderPointCloud3DBox","updateSegmentAttribute","pointCloudShortCutTable_POLYGON","pointCloudShortCutTable_SEGMENT","ToolHotKeyIcon","shortCutList","shortCutStyle","margin","shortCutNameStyles","border","verticalAlign","setSVG","useDangerInnerHtml","linkSymbol","listDom","wrapperStyle","dangerouslySetInnerHTML","__html","setHotKey","containerStyle","FooterPopover","hoverIcon","newToolName","initialPosition","zoomOut","syncTopviewToolZoom","syncSideviewToolZoom","syncBackviewToolZoom","DEFAULT_BOX_INFO_STYLE","infos","setInfos","trans","isShowOnHeader","transferBox2Kitti","rad2deg","getSubAttributeName","DEFAULT_SIZE","zoomChange","backgroundStyle","showLoading","globalStyle","afterImgOnLoad","newSize","sizeInitialized","setLoading","annotationRef","viewOperation","afterImgOnLoadRef","useRefCache","destroy","unbindAll","mainRender","Spin","spinning","LLMViewCls","QuestionView","question","answerList","changeLanguage","borderBottom","LongText","classNames","answer","cKeyCode","viewportContext","ViewportProviderComponent","D","UpdateRotate","CopyBackWordResult","success","UpdateToolInstance","ViewportProvider","windowSize","isEdit","isTips","otherHeight","placeholderHeight","placeholderWidth","reloadImage","hideSetInvalidTips","ignoreOffsetY","fileType","layerStyle","marginBottom","Button","shape","ReloadOutlined","TOOL_STYLE_ACTIONS","tips","REGEXP_NUMBER","REGEXP_ENGLISH","UpdateImgAttribute","IMAGE_ATTRIBUTE_ACTIONS","InitImgAttribute","CaretRightOutlined","expandKeyList","setExpandKeyList","sidebarRef","forceRender","hoverDeleteIndex","setHoverDeleteIndex","singleOn","expendRender","scrollTop","setExpendKeyList","expend","newKeyList","selectedButton","labelPanel","isResult","TagUtils","judgeResultIsInInputList","clearSmallA","onMouseEnter","Badge","CheckBoxList","RadioList","commonSvg","selectedSvg","selectedToolName","renderTools","hasMultiTools","basicInfo","initialCustomToolInstance","setSubAttribute","setPointCloudGlobalPattern","toolInstanceRef","onMounted","onUnmounted","clearToolInstance","MouseLeftSvg","drawInvalidRect","selectRect","changeValid","changeValidByClick","rectToolShortcutTable","invalidPolygon","changePolygonAttribute","keepLine","insertPolygonPoint","suspendAbsorption","splitPolygon","combinePolygon","pointToolShortCutTable","tagInSingleImg","tagToolSingleShortCutTable","Icon","isOpen","setIsOpen","displayIcon","defaultIcon","adaptIcon","MinusOutlined","ZoomLevel","PlusOutlined","PageInput","jumpSkip","newIndex","setIndex","inputEl","Input","NextPage","isVideo","StepForwardFilled","iconProps","PrevPage","StepBackwardFilled","AnnotatedAttributesItem","pointCloudCtx","expanded","setExpanded","pointCloudListForSpecAttribute","getItemKey","newSegmentation","deleteGraphByAttr","EyeInvisibleFilled","EyeFilled","CaretDownFilled","overflow","DeleteOutlined","paddingLeft","getItemID","AnnotatedAttributesPanel","stepConfigSelector","existAttributes","displayAttrList","PushpinFilled","UnorderedListOutlined","useStatus","GetBoxesByID","selectedBoxIDIndex","startPage","endPage","predict","SetPredictResult","SetPredictResultVisible","alignSelf","newTag","emitEvent","duration","videoRef","videoQulity","getVideoPlaybackQuality","frames","totalVideoFrames","videoWidth","videoHeight","fns","inputValue","existValue","valuesSet","pickBy","num1","num2","setLabelBySelectedList","getKeyCodeNumber","keyIndex","setResultFromImgList","stepRes","func","mulitTags","keycode2","newTagConfig","getTagResultByCode","tagRes","combineResult","VideoPlayer","setVideoRef","video","VideoTagLayer","Component","VideoPlayerCtx","isPlay","updateNextPlaybackRate","playbackRate","currentTime","buffered","setCurrentTime","PLAYBACK_RATES","changePlaybackPate","videoElm","paused","play","pause","isForward","nextIdx","fastForward","Up","Down","onPlay","onVideoStart","onPause","onVideoStopped","timeInterval","clearInterval","setInterval","decimalReserved","resetVideoData","setDuration","reload","createRef","videoSrc","onLoadedMetadata","onDurationChange","FileException","errorProps","isError","invalidProps","isValid","VideoController","Slider","updateBackViewByCanvas2D","canvasCenterPoint","worldCenterPoint","TransferCanvas2WorldOffset","offsetXX","offsetXY","a2MapStateToProps","useZoom","usePointCloudViews","pointCloudAnnotation","getPointCloudToolList","oldPointList","initSize","PointCloudContainer","TitleButton","EmptyPage","SizeInfoForView","useThrottleFn","TopPointCloudPolygonOperation","restrictAngleRange","rotatePolygon","wait","run","updateSideViewByCanvas2D","SidePointCloud","showTips","setAnswerList","setQuestion","interval","qaData","questionList","Layout","AnnotationTips","refCallback","node","pointCloudProps","forceContextLoss","initialIndex","defaultLang","InitTaskData","initImgList","i18nLanguageChangedFunc","off","InitAnnotationState","UpdateInjectFunc","isSuccess","ConfigProvider","enUS","MainView","Sider","Content","layoutCls","ImageAnnotate","ToolFooter","PointCloudAnnotate","drawLayerSlot","AnnotatedArea","VideoAnnotate","ViewportProviderLayout","indicator","LoadingOutlined","tip","layout","ToolHeader","headerName","goBack","hasLangNode","hasHeaderOption","hasPredictTrackingIcon","siderWidth","LLMLayout","leftSider","PreviewResult","Sidebar","copyResult","currentResult","copyData","sourceIDForCurStep","sourceIDForDependStep","deltaResultList","deltaUpdateBasicResultList","newResStr","oldResStr","curStep","stepKey","newRes","oldRes","newResForCurStep","oldResForCurStep","idCmp","deletedIds","findDeletedIds","stepKeys","getStepKeys","deleteRes","idA","idB","findDeletedItems","deletedItems","isNaN","resData","newDeletedIds","basicRectID","basicList","pageInfo","getPageInfo","currentFileIndex","nextFileIndex","getNextFileIndex","getNextBasicIndex","hasNextBasicIndex","pageChangedInfo","getBasicResultIndexForNextFile","annotationState","annotationPos","setAnnotationPos","containerRef","InitToolStyleConfig","renderZoom","dragMove","frame","setRafState","cancelAnimationFrame","TextAreaFormat","textValue","selectedText","TextUtils","textLength","setTextLength","setError","onFocus","setOnFocus","hoverDelete","setHoverDelete","clearIcon","IconClearSmallA","textareaContainer","toolTextAreaBox","toolTextAreaBoxFocus","TextArea","resize","wordBreak","onKeyDownCapture","onKeyUpCapture","onBlur","mapStateToProps","operationList","useOperationList","isShowModal","setShowModal","composeImgList","setComposeImgList","allOperation","copyPrevious","setValidity","imgSvg","UnifyParamsForbidSvg","hoverSvg","composeResultByToolInstance","forbidConfirm","onCancel","selectedBoxInfo","ActionsConfirm","UnifyParamsModal","forbidStyle","PopconfirmTitle","ActionIcon","ShowIcon","disabled","_isHover","textStyle","setHover","annotationLength","Col","span","Popconfirm","getPopupContainer","onConfirm","updateNum","iconStyle","StopOutlined","labelCol","wrapperCol","defaultNumberRules","defaultSelectedAttribute","PrefixTag","borderRadius","borderRight","Form","useForm","form","resetFields","recalculateSize","getFieldsValue","prevPage","nextPage","newMaxSize","getMaxSizeFromBox","selectStyle","attributeStyle","submit","wrapClassName","onFinish","secondaryAttributeConfigurable","subData","BatchUpdateResultByTrackID","Item","rules","noStyle","initialValue","InputNumber","precision","QuestionCircleOutlined","sizeShow","Option","imgAttributeChange","throttle","ImgAttribute","trailing","imgAttributeInfo","svg","trackStyle","checked","listRef","scrollIntoView","isScribbleTool","RgbaColorPicker","toRGBAObj","colorStr","toRGBAStr","LOGICAL_TEXT","and","or","heightMax","heightMin","depthMax","depthMin","widthMax","widthMin","XMin","XMax","YMin","YMax","ZMin","ZMax","showNormalSizeRangeBox","gitText","logical","leftText","dimensionLeft","rightText","dimensionRight","condition","checkboxRef","Checkbox","blur","syntheticEventStopPagination","nativeEvent","stopImmediatePropagation","TextareaWithFooter","textareaProps","rows","textAreaLength","SingleTextInput","textAreaFocus","setTextAreaFocus","setInvalid","updateText","switchToNextTextarea","hasMultiple","onNext","updateTextWithKey","newVal","tabToSwitchEnabled","autoSize","minRows","maxRows","TextareaFooter","clearText","setConfigList","focusIndex","setFocusIndex","textareaFocus","textarea","behavior","updateTextValue","AnnotatedBox","showIDs","setShowIds","trackMap","BoxTrackIDInput","setIsEdit","setInputValue","hasDuplicateTrackID","applyInputValue","isBlurEvent","newTrackID","BatchUpdateModal","updateCurrentPolygonList","onPressEnter","EditFilled","AttributeUpdater","ptx","useAttribute","pointCloudViews","subTitleStyle","fontWeight","wordWrap","formatConfig","configStr","formatStepList","updateAttributeList","placeholder","allowClear","renderSegmentTools","PointCloudSegToolIcon","setCurrentTool","updateLassoSelector","updateCircleSelector","inputStyle","setVisible","batchUpdateTrackIDCheck","getMarks","marks","getImage","getDefaultValue","getStyleType","annotationConfig","getTitle","tipFormatter","UpdateToolStyleConfig","silderValue","setSilderValue","selectTool","setSelectTool","changeValue","penActivate","pen","eraserActivate","eraser","setPenSize","useCustomToolInstance","LLMConfig","setLLMConfig","setText","setSortList","waitSortList","setWaitSortList","LLMStepConfig","getCurrentResultFromResultList","getWaitSortList","formatSort","waitSorts","newSort","tagColumn","sortItem","indicatorScore","indicatorDetermine","enableSort","hasIndicatorScore","score","hasIndicatorDetermine","hasText","isNoConfig","Empty","description","imageStyle","showAnwerList","AnswerSort","AnswerList","updateValue","newList","originData","TextInputBox","EDirection","contentBoxCls","Navigation","useReducer","forceUpdate","isDisableAll","activateDirection","setActivateDirection","targetTagKey","setTargetTagKey","answers","setAnswers","formatSortList","singleAnswerItem","borderStyle","draggable","middlePoint","P1","P2","setActivateDirectionBycompareDistance","sourceTagCenterPoint","tagVertexPoint","toTopDistance","toRightDistance","toBottompDistance","toLeftDistance","getMinDistanceBySideCenterPoint","Bottom","sortBox","nodeIndex","itemBox","tagClientRectValues","tagCenterPoint","onDrag","filterValue","tagNearest","lastTagCenterPoint","onDragEnd","oldIndex","tagIndex","formatList","curKey","removeIndex","newAnswerValue","ETagType","LLMSidebarCls","getTagStyle","tagStatus","finishStatus","determineResult","isBoolean","getFinishStatus","tagText","fontColor","whiteSpace","textOverflow","paddingRight","renderTitle","InfoCircleOutlined","ScoreGroupButton","selectScore","updateScore","DetermineGroup","selectValue","scoreLists","val","textConfig","combinResult","textId","setFieldsValue","onValuesChange","__","allValues","List","field","showTextInput","messageError","extra","colon","setFields","errors","newText","getFieldValue","validator","rule","showCount","ToolHotKey","drawPoint","drawInvalidPoint","invalidLine","horizontalLine","selectLine","changeLineAttribute","insertPoint","lineToolShortCutTable","textToolShortCutTable","videoForward","videoBackward","videoTagToolShortCurTable","changePointSize","rotateRoundCenter","Drag3D","DragTopView","ChangeInvalid","changePointCloudValid","LeftRotate","RotateLeftOutlined","RightRotate","RotateRightOutlined","PrevBox","prevBox","nextBox","rotate180_black","ChangeBoxInvalid","SelectMulti","selectMultiple","SelectAll","deleteBox","Drag3DBySpace","AddMove","pointCloudShortCutTable","scribbleShortCutTable","cuboidShortCutTable","forwardWithEnter","LLMShortCutTable","useSafeState","unmountedRef","useUnmountedRef","currentState","NextButton","ToNextStep","lastStep","currentOption","ExportData","curLang","backNode","LeftOutlined","Quit","headerNameNode","stepListNode","StepSwitch","headerOptionNode","HeaderOption","PointCloudSwitchPattern","langNode","rightActions","toolHover","setToolHover","isTagTool","isPointCloud","isBegin","revocation","commonOptionList","show","click","Hover","Dropdown","overlay","AnnotationStepPopover","updateStep","IconWithText","OrderedListOutlined","iconChildren","CaretDownOutlined","highlight","forbidSegmentationText","disabledSegmentation","segmentButton","TagToolInstanceAdaptor","videoTimeFormat","sec","minSec","fillZero","VideoProgress","progressRef","bufferLoadedPercent","playedPercent","toTime","VideoSpeedButton","CaretUpOutlined","VideoHotKeys","VideoPageChange","VideoTime","remained10x","remaingTime","PauseOutlined","inset","tagLayerCSSProperty","maxHeight","overflowY","tagsLabel","result2LabelKey","isEnlargeTopView","setIsEnlargeTopView","selectAndEnlarge","parsePointCloudCurrentResult","PointCloudSegmentListener","PointCloudSegment","PointCloudSegmentStatus","direct","backAndSideView","PointCloudBackView","PointCloudSideView","SideAndBackOverView","PointCloudListener","PointCloudTopView","onExitZoom","PointCloud2DView","thumbnailWidth","AnnotatedAttributesPanelFixedRight","PointCloud3DContext","setTarget3DView","reset3DView","followTopView","PointCloudViewIcon","getTarget3DViewClassName","toLocaleLowerCase","PointCloud3DSideBar","isEnlarge","viewIconList","localizeIcon","setShowDirection","setIsEnlarge","topViewVector","isTopView","resetCamera","topViewCamera","ptCloud3DCtx","highlightBoxes","clearHighlightBoxesAndRender","PointCloud3DTitle","PointCloudSizeSlider","TopViewToolbar","useRotate","getCurrentToolName","UpSquareOutlined","DownSquareOutlined","ZAxisSlider","setZAxisLimit","vertical","onAfterChange","TopView2dOperation","updateLine","transferLine","oldList","validUpdate","setHighlightAttribute","BoxInfos","PointCloudValidity","ContainerTitle","showEnlarge","setCurIndex","curIndex","annotations2d","calName","setAnnotations2d","newAnnotations2dList","mappingData","newAnnotations2d","viewDataPointLists","formatViewDataPointList","newArr","lastPage","hiddenData","PointCloud2DTitle","PointCloud2DSingleView","view2dData","viewRef","useHighlight","toggle2dVisible","isHighlightVisible","focusSelectBox","selected2data","focusPositionByPointList","AnnotationView","HighlightVisible","newHighlightList","useBoxes","copySelectedBoxes","pasteSelectedBoxes","copiedBoxes","useConfig","syncAllViewsConfig","reRenderTopViewRange","useLine","updatePolygonOffset","updateSelectedPolygonsPoints","lowerCaseKey","ctrlKeydownEvents","POLYGON_PATTERN","keydownEvents","selectBox","nextResult","originSubAttribute","updateSegmentTool","segmentInstance","syncAttribute","messageInfo","setCopiedBoxes","checkBoxList","hasDuplicate","updatePointCloudResult","newPointCloudResult","c","updateConfig","addLine","updateSelectedLine","updateLineValidByID","getSegmentFromResultList","segmentKeydownEvents","domRef","newPtSegmentInstance","SegmentInfo","infoList","setData","updateVisible","customButton","setMode","setCoverMode","setFocusMode","setHideSegment","updateSegmentMode","updateCoverMode","updateFocusMode","switchHideSegment","focusInvalid","hideInvalid","checkedChildren","unCheckedChildren","CoverMode","FocusModeSvg","HidePointCloudSegmentSvg","viewBox","clipRule","fillRule","strokeDasharray","rx","strokeLinejoin","strokeLinecap","initPositionX","initPositionY","setPosition","setOffset","onResize","onDragStart","moveX","moveY","Result","viewsTitle","GenerateViewsDataUrl","setList","sleep","getViewsDataUrl","BatchUpdateImgListResultByPredictResult","LLMToolView","createStore","rootReducer","applyMiddleware","combineReducers","annotationReducer","imgAttributeReducer","toolStyleReducer","getToolColors","getAttributeColors","getDefaultToolLineColors","computeColor","initByOpacity","FILL_OPACITY","firstOpacity","colorSplit","computeOpacity","CHANGE_COLOR","showColor","AttributeColorList","changeOpacity","LLMToolResult","step_1","LLMToolQa","car1","car2","car3","car4","car5","videoList","pcd1","pcd2","pcd3","pcd4","pcd5","pcd6","pcd7","pcd8","pcd9","pointCloudMappingImgList","pointCloudImg1","calib1","pointCloudImg2","calib2","rectDefaultResult","dataSource","polygonDefaultResult","tagDefaultResult","videoTagDefaultResult","getMockResult","DEFAULT_ANNOTATIONS","strokeText","Annotation","firstToolInstance","setRunPrediction","log","testDataInjection","scribbleToolConfig","cuboidToolConfig","LLMToolConfig","enableTextAttribute","sourceStep","App","qs","location","ignoreQueryPrefix","comma","getStepList","srcList","mockFileList","getMockList","ReactDOM"],"mappings":"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,EACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,QAER,CACEL,QAAS,EACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,EACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,QAER,CACEL,QAAS,EACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,EACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,QAER,CACEL,QAAS,EACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,EACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,OAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,QAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,QAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,QAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,KAELC,KAAM,SAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,EACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,GAELC,KAAM,SAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,EACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,YAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,YAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,SAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,SAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,SAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,GACHC,EAAG,GAELwR,IAAK,CACHpD,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IAELC,KAAM,qBAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,SAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,SAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,EACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,EACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,aAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,iBAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,eAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,iBAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,kBAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,aAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,kBAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,eAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,iBAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,aAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,aAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,YAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,eAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,aAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,eAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,mBAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,eAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,aAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,aAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,aAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,eAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,kBAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,EACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,EACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,aAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,eAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,eAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,EACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,SAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,iBAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,iBAER,CACEL,QAAS,GACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,kBAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD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GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,YAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,YAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,iBAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,gBAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,SAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,GACHoL,EAAG,IAELC,KAAM,SAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,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AM,cAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,GACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,iBAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,kBAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,gBAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,SAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,SAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,iBACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,SAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,mBAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,mBAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,gBAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,cAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,IACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,YAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,WAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,mBAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,GACH/H,EAAG,IACHoL,EAAG,IAELC,KAAM,aAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,KAELC,KAAM,WAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,EACHE,EAAG,EACHC,EAAG,GAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,GAELC,KAAM,SAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,GAELC,KAAM,SAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,GACHE,EAAG,GACHC,EAAG,IAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,EAAG,EACH/H,EAAG,EACHoL,EAAG,IAELC,KAAM,UAER,CACEL,QAAS,IACTC,UAAW,UACXC,IAAK,CACH1R,EAAG,IACHE,EAAG,IACHC,EAAG,KAELwR,IAAK,CACHpD,E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","file":"static/js/main.67f3c76b.chunk.js","sourcesContent":["var en = {\n\tConfirmTo: \"Confirm To \",\n\tTextInput: \"Text Input\",\n\tNoAttribute: \"No Attribute\",\n\tSave: \"Save\",\n\tUndo: \"Undo\",\n\tRedo: \"Redo\",\n\tRotate: \"Rotate\",\n\tStyle: \"Style\",\n\tAdjust: \"Adjust\",\n\tBorderThickness: \"Border Thickness\",\n\tColor: \"Color\",\n\tBorderOpacity: \"Border Opacity\",\n\tFillOpacity: \"Fill Opacity\",\n\tSaturation: \"Saturation\",\n\tContrast: \"Contrast\",\n\tExposure: \"Exposure\",\n\tScreenRatio: \"Screen Ratio\",\n\tOriginalScale: \"Original Scale\",\n\tCopyThePrevious: \"Copy Prev\",\n\tClearLabel: \"Clear\",\n\tSetAsInvalid: \"Set As Invalid\",\n\tSetAsValid: \"Set As Valid\",\n\tConfirm: \"Confirm\",\n\tFinish: \"Finish\",\n\tCancel: \"Cancel\",\n\tItemsOfThisPage: \"Items Of This Page\",\n\tHotkeys: \"Hotkeys\",\n\tAnnotateRect: \"Annotate Rect\",\n\tAnnotateInvalidRect: \"Annotate Invalid Rect\",\n\tSelectRect: \"Select Rect\",\n\tRightClick: \"Right Click\",\n\tToggleRectEffectiveness: \"Toggle Rect Validity\",\n\tToggleEffectiveness: \"Toggle Validity\",\n\tDeleteRect: \"Delete Rect\",\n\tSelectAndDoubleClick: \"Select And Double Click\",\n\tScale: \"Scale\",\n\tFullscreen: \"Fullscreen\",\n\tPreviousImage: \"Previous\",\n\tPreviousFile: \"Previous\",\n\tNextImage: \"Next\",\n\tNextFile: \"Next\",\n\tPreviousFolder: \"Previous Folder\",\n\tNextFolder: \"Next Folder\",\n\tDrag: \"Drag\",\n\tToggleSelected: \"Toggle Selected\",\n\tToggleSelectedReverse: \"Toggle Selected Reverse\",\n\tHideGraphics: \"Hide Graphics\",\n\tToggleLineParticularity: \"Toggle Line Particularity\",\n\tToSide: \"To Line\",\n\tSpecifiedAttributesOnly: \"Specified Attributes Only\",\n\t\"Number\": \"Number\",\n\tPress: \"Press\",\n\tToOriginalStep: \"To Original\",\n\tHorizontalOrVertical: \"Horizontal/Vertical\",\n\tAnnotateInvalidLine: \"Annotate Invalid Line\",\n\tAnnotateLine: \"Annotate Line\",\n\tSelectLine: \"Select Line\",\n\tToggleLineEffectiveness: \"Toggle Line Validity\",\n\tDeleteLine: \"Delete Line\",\n\tContinueToLabel: \"Continue To Label\",\n\tSelect: \"Select\",\n\tInsertPoint: \"Insert Point\",\n\tClickOnLine: \"Click On Line\",\n\tDeletePoint: \"Delete Point\",\n\tDblClickOnPoint: \"Double Click On Point\",\n\tStopAdsorption: \"Stop Adsorption\",\n\tPreviousLine: \"Previous Line\",\n\tNextLine: \"Next Line\",\n\tSelectPoint: \"Select Point\",\n\tAnnotateInvalidPoint: \"Annotate Invalid Point\",\n\tAnnotatePoint: \"Annotate Point\",\n\tAnnotatePolygon: \"Annotate Polygon\",\n\tSelectPolygon: \"Select Polygon\",\n\tAnnotateInvalidPolygon: \"Annotate Invalid Polygon\",\n\tTogglePolygonEffectiveness: \"Toggle Polygon Validity\",\n\tDeletePolygon: \"Delete Polygon\",\n\tDelete: \"Delete\",\n\tTogglePointParticularity: \"Toggle Point Particularity\",\n\tCropOverlapArea: \"Crop Overlap Area\",\n\tSegmentationRecognition: \"Segmentation Recognition\",\n\tSwitchPattern: \"Switch Pattern\",\n\tTagging: \"Tagging\",\n\tHide: \"Hide \",\n\tHideDrawnAnnotation: \"Hidden Drawn Annotation\",\n\tBlue: \"Blue\",\n\tCyan: \"Cyan\",\n\tGreen: \"Green\",\n\tYellow: \"Yellow\",\n\tPink: \"Pink\",\n\tSteps: \"Steps\",\n\tExport: \"Export\",\n\tNextStep: \"Next Step\",\n\tStepNotFinishedNotify: \"There are unannotated files in the current step , please finish before the next step\",\n\tcurItems: \"{{current}}/{{total}} Items\",\n\tTurnPage: \"Turn Page\",\n\tSwitch: \"Switch\",\n\tEmptyTextInput: \"Empty Text Input\",\n\tRegularExpIncorrectly: \"Regular expression is incorrectly\",\n\tNoConfiguration: \"Missing Configuration\",\n\tClearThisOption: \"Clear This Option\",\n\tRestoreImageAttributes: \"Restore Image Attributes\",\n\trectTool: \"RectTool\",\n\ttagTool: \"TagTool\",\n\tpolygonTool: \"PolygonTool\",\n\tlineTool: \"LineTool\",\n\tpointTool: \"PointTool\",\n\ttextTool: \"TextTool\",\n\tSpeed: \"Speed\",\n\tPlayPause: \"Play / Pause\",\n\tFastForward: \"Fast Forward\",\n\tRewind: \"Rewind\",\n\tvideoInvalidAndSkip: \"Video invalid, please skip\",\n\timageInvalidAndSkip: \"Image invalid, please skip\",\n\tvideoErrorAndReload: \"Failed to load video, please reload\",\n\timageErrorAndReload: \"Failed to load image, please reload\",\n\torMaskAsInvalid: \" or mask it as invalid\",\n\tClickAnotherPolygon: \"Click another polygon\",\n\tPolygonsToBeCombinedNeedToBeSelected: \"Polygons to be combined need to be selected\",\n\tCurveModeDoesNotSupportCutting: \"Curve mode does not support cutting\",\n\tCombineSuccess: \"Combine success\",\n\tCombiningFailedNotify: \"Combining failed. Please check whether two polygons intersect or whether polygon combining forms a leak\",\n\tCombineOverlapArea: \"Combine Overlap Area\",\n\tNoDependency: \"This image does not need to be labeled\",\n\tTextCheckNumberOnly: \"Please enter the number\",\n\tTextCheckEnglishOnly: \"Please enter English\",\n\tTextCheckCustomFormat: \"Please enter data in custom format\",\n\tFramingOfObjectToBeDivided: \"Please frame the object to be divided first\",\n\tClickOnTarget: \"Please click on target object\",\n\tSplittingAlgorithmPrediction: \"Splitting algorithm prediction in progress...\",\n\t\"2DView\": \"2DView\",\n\t\"3DView\": \"3DView\",\n\tTopView: \"TopView\",\n\tSideView: \"SideView\",\n\tBackView: \"BackView\",\n\tShowArrows: \"Show Arrows\",\n\tLength: \"Length\",\n\tWidth: \"Width\",\n\tHeight: \"Height\",\n\tRotation_y: \"Rotation_y\",\n\tPointCount: \"Point Count\",\n\tInvalid: \"Invalid\",\n\tTag: \"Tag\",\n\tAttribute: \"Attribute\",\n\tSubAttribute: \"SubAttribute\",\n\tPleaseSelect: \"Please Select\",\n\tCopyEmptyInPointCloud: \"The copy content is empty, please select the corresponding point cloud data\",\n\tPasteEmptyInPointCloud: \"Please copy the pointCloud data before pasting\",\n\tHasDuplicateID: \"Duplicate ID exists, copy failed\",\n\tHasDuplicateIDHeader: \"TrackID duplication exists\",\n\tHasDuplicateIDMsg: \"There is an issue with duplicate trackIDs, override it?\",\n\tLowerLimitPointsNumInBox: \"The number of points in the box must not be less than {{num}}\",\n\tPointThickness: \"Point Thickness\",\n\tRotateAroundCenterPoint: \"Rotate Around Center Point\",\n\tPointCloudViewTranslate: \"PointCloudView Translation\",\n\tTopViewTranslate: \"TopView Translation\",\n\tChangePointCloudValid: \"Change PointCloud Valid\",\n\tLassoSelector: \"Lasso\",\n\tSelectorMsg: \"Right-click drag to select\",\n\tAddPoint: \"Add Point\",\n\tCircleSelector: \"Point\",\n\tDetectionMode: \"DetectionMode\",\n\tSegmentationMode: \"SegmentationMode\",\n\tEnterEditMode: \"Enter edit mode\",\n\tSelectedPoints: \"Selected Points\",\n\tCopyBox: \"Copy Box\",\n\tPasteBox: \"Paste Box\",\n\tRotateLeft: \"Rotate Left\",\n\tRotateRight: \"Rotate Right\",\n\tNextBox: \"Next Box\",\n\tPreviousBox: \"Previous Box\",\n\tRotate180: \"Rotate 180°\",\n\tCopyPrevPage: \"Copy Previous Page\",\n\tChangeBoxValid: \"Change Box's Valid\",\n\tMultiSelect: \"Multi Select\",\n\tSelectAllBox: \"Select All Boxes\",\n\tGeneralOperation: \"General Operation\",\n\tRectPattern: \"Rect Pattern\",\n\tPolygonPattern: \"Polygon Pattern\",\n\tChangePatternMsg: \"Change Pattern to {{pattern}} successfully\",\n\tDragOperation: \"Drag\",\n\tSelectedStatus: \"Selected\",\n\tupdateValidFromValidToInValid: \"Confirm update as invalid page？\",\n\tupdateValidFromInValidToValid: \"Confirm update as valid page？\",\n\tAllTrackIDs: \"All TrackIDs\",\n\tCurrentBoxTrackIDs: \"Current TrackID\",\n\tPositiveIntegerCheck: \"Please enter a positive integer\",\n\tNotAllowDecimalPointsInTrackID: \"TrackID is not allowed to be decimal\",\n\tDuplicateTrackIDsExist: \"Duplicate trackIDs exits\",\n\tBatchUpdateText: \"Batch Update\",\n\tBatchUpdateTrackID: \"Batch update trackIDs\",\n\tTrackIDUnifyAs: \"TrackID is Unify as\",\n\tUnifyTrackIDRange: \"Unify TrackID Range\",\n\tPage: \"Page\",\n\tOkText: \"OK\",\n\tCancelText: \"Cancel\",\n\tUnifyParams: \"Unify Params\",\n\tUnifyAttributeRange: \"Unify Range\",\n\tUnifyTrackID: \"Unify TrackID\",\n\tUnifySize: \"Unify Size\",\n\tUnifyTag: \"Unify Tag\",\n\tNoData: \"No Data\",\n\tAnnotatedList: \"Annotated List\",\n\tonDeleteGraphByAttr: \"Are you sure to delete the data with attribute {{attribute}}?\",\n\tCancelFixed: \"Cancel Fixed\",\n\tFixedOnLeft: \"Fixed On Left\",\n\tFixedOnRight: \"Fixed On Right\",\n\tAnnotatedResult: \"Annotated Result\",\n\tComplementaryTracking: \"Complementary tracking\",\n\tComplementaryTrackingPrediction: \"Complementary tracking prediction\",\n\tApply: \"Apply\",\n\tBeforePredictStarting: \"Before starting, please mark the first and last box, need the same trackID\",\n\tThePredictedPointCloud: \"The predicted point cloud now needs to be less than 10 frames\",\n\tCameraFollowTopView: \"Positioned by top view\",\n\tMarkOnlyOne: \"Mark only one frame of data, need to mark the first and last frame of data\",\n\tHaveNoNeed: \"Have no need to predict the data between two frames, please mark the first and last frame first, and need the same serial number\",\n\tPredictingDataFrom: \"Predicting data from page {{startPage}} to page {{endPage}} with box ID {{selectedBoxTrackID}}\",\n\tPointCloudCoverMode: \"When the same point cloud is selected, the later marker overwrites the previous one\",\n\tPointCloudUncoverMode: \"When the same point cloud is selected, the latter marker cannot overwrite the former marker\",\n\tPointCloudFocusMode: \"Focus mode has been turned on\",\n\tPointCloudUnfocusMode: \"Focus mode is turned off\",\n\tPointCloudHideSegment: \"Marked point cloud is hidden\",\n\tPointCloudShowSegment: \"All point clouds have been displayed\",\n\tPointCloudHideSegmentInvalid: \"Unavailable in focus mode\",\n\tPointCloudHideFocusInvalid_hide: \"Focus mode is not available, please show the marked point first\",\n\tPointCloudHideFocusInvalid_none: \"Focus mode is not available, please select the marker to be focused first\",\n\tPalette: \"Palette\",\n\tEfficientListening: \"The task is marked in the efficiency monitoring...\",\n\tTitle: \"Title\",\n\tAnswer: \"Answer\",\n\tFinished: \"Finished\",\n\tUnfinished: \"Unfinished\",\n\tOverallScore: \"OverallScore\",\n\tNoScoringScale: \"Configurable step details on the left\",\n\tBest: \"Best\",\n\tWorst: \"Worst\",\n\tRankingQualityOfAnswers: \"RankingQualityOfAnswers\",\n\tToBeSorted: \"ToBeSorted\",\n\tYes: \"Yes\",\n\tNo: \"No\",\n\tAdditionalContent: \"AdditionalContent\",\n\tSubmit: \"Submit\",\n\tDragAndDrop: \"Drag and drap\",\n\tDefaultSize: \"Click to use the default size.\",\n\tNormalSizeRange: \"Normal size range\",\n\tNormalCenterPointRange: \"Normal center point range\",\n\tLoadingTips: \"Wait a minute, Data Loading ~\",\n\tUnlocked: \"Unlocked\",\n\tLocked: \"Locked\",\n\tLeastCharacterError: \"Please enter at least {{num}} characters\",\n\tAnd: \"And\",\n\tOr: \"Or\"\n};\nvar cn = {\n\tTextInput: \"文本输入\",\n\tNoAttribute: \"无属性\",\n\tSave: \"保存\",\n\tUndo: \"撤销\",\n\tRedo: \"重做\",\n\tRotate: \"旋转\",\n\tStyle: \"样式\",\n\tAdjust: \"图片调整\",\n\tBorderThickness: \"边框粗细\",\n\tColor: \"颜色\",\n\tBorderOpacity: \"边框透明度\",\n\tFillOpacity: \"填充透明度\",\n\tSaturation: \"饱和度\",\n\tContrast: \"对比度\",\n\tExposure: \"曝光度\",\n\tScreenRatio: \"画面占比\",\n\tOriginalScale: \"按原图比例显示\",\n\tCopyThePrevious: \"复制上张\",\n\tClearLabel: \"清空标注\",\n\tSetAsInvalid: \"标为无效\",\n\tSetAsValid: \"取消无效\",\n\tConfirm: \"确认\",\n\tFinish: \"完成\",\n\tCancel: \"取消\",\n\tItemsOfThisPage: \"本页件数\",\n\tHotkeys: \"快捷键\",\n\tAnnotateRect: \"拉框\",\n\tAnnotateInvalidRect: \"拉无效框\",\n\tSelectRect: \"选中框\",\n\tRightClick: \"右击\",\n\tToggleRectEffectiveness: \"切换框是否有效\",\n\tToggleEffectiveness: \"是否标为无效\",\n\tDeleteRect: \"删除框\",\n\tSelectAndDoubleClick: \"选中双击\",\n\tScale: \"缩放\",\n\tFullscreen: \"全屏\",\n\tPreviousImage: \"上一张\",\n\tPreviousFile: \"上一个\",\n\tNextImage: \"下一张\",\n\tNextFile: \"下一个\",\n\tPreviousFolder: \"上一文件夹\",\n\tNextFolder: \"下一文件夹\",\n\tDrag: \"拖动图片\",\n\tToggleSelected: \"切换选中\",\n\tToggleSelectedReverse: \"逆序切换选中\",\n\tHideGraphics: \"隐藏图形\",\n\tToggleLineParticularity: \"换特殊边\",\n\tToSide: \"对边\",\n\tSpecifiedAttributesOnly: \"仅看指定属性\",\n\t\"Number\": \"数字\",\n\tPress: \"长按\",\n\tToOriginalStep: \"仅原图\",\n\tHorizontalOrVertical: \"标水平/垂直线\",\n\tAnnotateInvalidLine: \"标无效线\",\n\tAnnotateLine: \"标线\",\n\tSelectLine: \"选中线\",\n\tToggleLineEffectiveness: \"切换线是否有效\",\n\tDeleteLine: \"删除线\",\n\tContinueToLabel: \"续标\",\n\tSelect: \"选中\",\n\tInsertPoint: \"插入点\",\n\tClickOnLine: \"对线单击\",\n\tDeletePoint: \"删除点\",\n\tDblClickOnPoint: \"对点双击\",\n\tStopAdsorption: \"暂停吸附\",\n\tPreviousLine: \"上条线\",\n\tNextLine: \"下条线\",\n\tSelectPoint: \"选中点\",\n\tAnnotateInvalidPoint: \"标无效点\",\n\tAnnotatePoint: \"标点\",\n\tAnnotatePolygon: \"标多边形\",\n\tSelectPolygon: \"选中多边形\",\n\tAnnotateInvalidPolygon: \"标无效多边形\",\n\tTogglePolygonEffectiveness: \"切换多边形是否有效\",\n\tDeletePolygon: \"删除多边形\",\n\tDelete: \"删除\",\n\tTogglePointParticularity: \"换特殊点\",\n\tCropOverlapArea: \"裁剪重叠区域\",\n\tSegmentationRecognition: \"分割辅助\",\n\tSwitchPattern: \"切换绘制形式\",\n\tTagging: \"打标签\",\n\tHide: \"打标签\",\n\tHideDrawnAnnotation: \"标注隐藏中\",\n\tBlue: \"蓝\",\n\tCyan: \"青\",\n\tGreen: \"绿\",\n\tYellow: \"黄\",\n\tPink: \"粉\",\n\tSteps: \"标注步骤\",\n\tExport: \"导出\",\n\tNextStep: \"下一步\",\n\tStepNotFinishedNotify: \"当前步骤存在为未标注过的图片，请标注完成再点击下一步\",\n\tcurItems: \"第{{current}}/{{total}}分页\",\n\tTurnPage: \"翻页\",\n\tSwitch: \"切换\",\n\tEmptyTextInput: \"清空文本输入\",\n\tRegularExpIncorrectly: \"正则表达式填写错误\",\n\tNoConfiguration: \"暂无信息配置\",\n\tClearThisOption: \"清空此选项\",\n\tRestoreImageAttributes: \"还原图片属性\",\n\tConfirmTo: \"确认\",\n\trectTool: \"标签\",\n\ttagTool: \"标点\",\n\tpolygonTool: \"多边形\",\n\tlineTool: \"线条\",\n\tpointTool: \"标点\",\n\ttextTool: \"文本\",\n\tSpeed: \"倍速\",\n\tPlayPause: \"播放/暂停\",\n\tFastForward: \"快进\",\n\tRewind: \"快退\",\n\tvideoInvalidAndSkip: \"无效视频，请跳过\",\n\timageInvalidAndSkip: \"无效图片，请跳过\",\n\tvideoErrorAndReload: \"视频加载失败, 请重新加载\",\n\timageErrorAndReload: \"图片加载失败, 请重新加载\",\n\torMaskAsInvalid: \" 或 将其标为无效\",\n\tClickAnotherPolygon: \"请点击希望合并的多边形\",\n\tPolygonsToBeCombinedNeedToBeSelected: \"需要选中需要合并的多边形\",\n\tCurveModeDoesNotSupportCutting: \"曲线模式暂不支持裁剪\",\n\tCombineSuccess: \"合并成功\",\n\tCombiningFailedNotify: \"合并失败，请检查是否两个多边形是否有相交，或多边形合并是否形成漏空\",\n\tCombineOverlapArea: \"合并重叠区域\",\n\tNoDependency: \"该图片无需标注\",\n\tTextCheckNumberOnly: \"请按仅数字的格式输入\",\n\tTextCheckEnglishOnly: \"请按仅英文的格式输入\",\n\tTextCheckCustomFormat: \"请按要求的格式输入\",\n\tFramingOfObjectToBeDivided: \"请先框出需分割的物体\",\n\tClickOnTarget: \"请单击目标物体\",\n\tSplittingAlgorithmPrediction: \"分割算法预测中...\",\n\t\"2DView\": \"2D视图\",\n\t\"3DView\": \"3D视图\",\n\tTopView: \"俯视图\",\n\tSideView: \"侧视图\",\n\tBackView: \"背视图\",\n\tShowArrows: \"显示箭头\",\n\tLength: \"长\",\n\tWidth: \"宽\",\n\tHeight: \"高\",\n\tRotation_y: \"朝向角\",\n\tPointCount: \"点数\",\n\tInvalid: \"无效\",\n\tTag: \"标签\",\n\tAttribute: \"主属性\",\n\tSubAttribute: \"副属性\",\n\tPleaseSelect: \"请选择\",\n\tCopyEmptyInPointCloud: \"复制内容为空，请选择对应的点云数据\",\n\tPasteEmptyInPointCloud: \"请先复制需要的点云数据再进行粘贴\",\n\tHasDuplicateID: \"存在重复ID,复制失败\",\n\tHasDuplicateIDHeader: \"存在标注框 ID 重复\",\n\tHasDuplicateIDMsg: \"存在标注框 ID 重复的问题，是否要覆盖?\",\n\tLowerLimitPointsNumInBox: \"框体内点数不允许低于 {{num}} 个\",\n\tPointThickness: \"点的显示粗细\",\n\tRotateAroundCenterPoint: \"绕中心点旋转画面\",\n\tPointCloudViewTranslate: \"点云平移\",\n\tTopViewTranslate: \"俯视图平移\",\n\tChangePointCloudValid: \"切换点云有效性\",\n\tLassoSelector: \"套索\",\n\tSelectorMsg: \"右键拖动进行范围获取\",\n\tAddPoint: \"添加点\",\n\tCircleSelector: \"选点\",\n\tDetectionMode: \"检测模式\",\n\tSegmentationMode: \"分割模式\",\n\tEnterEditMode: \"进入编辑\",\n\tSelectedPoints: \"选中点数\",\n\tCopyBox: \"复制框\",\n\tPasteBox: \"粘贴框\",\n\tRotateLeft: \"向左旋转微调\",\n\tRotateRight: \"向右旋转微调\",\n\tPreviousBox: \"上一框\",\n\tNextBox: \"下一框\",\n\tRotate180: \"旋转180°\",\n\tCopyPrevPage: \"复制上一页\",\n\tChangeBoxValid: \"切换标注框有效性\",\n\tMultiSelect: \"多选\",\n\tSelectAllBox: \"全选\",\n\tGeneralOperation: \"通用\",\n\tRectPattern: \"拉框模式\",\n\tPolygonPattern: \"多边形模式\",\n\tChangePatternMsg: \"成功更改为{{pattern}}模式\",\n\tDragOperation: \"拖动\",\n\tSelectedStatus: \"选中时\",\n\tupdateValidFromValidToInValid: \"是否确认标为无效文件？\",\n\tupdateValidFromInValidToValid: \"是否确认取消无效文件？\",\n\tAllTrackIDs: \"所有已标注的框ID\",\n\tCurrentBoxTrackIDs: \"当前标注框ID\",\n\tPositiveIntegerCheck: \"请输入正整数\",\n\tNotAllowDecimalPointsInTrackID: \"输入trackID不允许包含小数点\",\n\tDuplicateTrackIDsExist: \"存在重复的trackID\",\n\tBatchUpdateText: \"批量修改\",\n\tBatchUpdateTrackID: \"批量修改ID\",\n\tTrackIDUnifyAs: \"统一标注框ID为\",\n\tUnifyTrackIDRange: \"统一ID范围\",\n\tPage: \"页\",\n\tOkText: \"确认\",\n\tCancelText: \"取消\",\n\tUnifyParams: \"统一参数\",\n\tUnifyAttributeRange: \"统一属性范围\",\n\tUnifyTrackID: \"统一标注框ID\",\n\tUnifySize: \"统一尺寸\",\n\tUnifyTag: \"统一标签\",\n\tNoData: \"暂无数据\",\n\tAnnotatedList: \"标注列表\",\n\tonDeleteGraphByAttr: \"确定要删除属性为 {{attribute}} 的标注数据吗?\",\n\tCancelFixed: \"取消固定\",\n\tFixedOnLeft: \"固定在左侧\",\n\tFixedOnRight: \"固定在右侧\",\n\tAnnotatedResult: \"标注结果\",\n\tComplementaryTracking: \"补全跟踪\",\n\tComplementaryTrackingPrediction: \"补全跟踪预测\",\n\tApply: \"应用\",\n\tBeforePredictStarting: \"启动前，请先标出首尾的框，需同序号\",\n\tThePredictedPointCloud: \"现预测点云需要小于 10 帧\",\n\tCameraFollowTopView: \"按俯视图定位\",\n\tMarkOnlyOne: \"仅标注一帧数据，需标出首尾的帧数据\",\n\tHaveNoNeed: \"两帧之间暂无需预测的数据，请先标出首尾的框，需同序号\",\n\tPredictingDataFrom: \"正在预测第 {{startPage}} 页到第 {{endPage}} 页之间框ID为 {{selectedBoxTrackID}} 的数据\",\n\tPointCloudCoverMode: \"选中相同点云时，后一标记覆盖前一标记\",\n\tPointCloudUncoverMode: \"选中相同点云时，后一标记不可覆盖前一标记\",\n\tPointCloudFocusMode: \"已开启聚焦模式\",\n\tPointCloudUnfocusMode: \"已关闭聚焦模式\",\n\tPointCloudHideSegment: \"已隐藏标注点云\",\n\tPointCloudShowSegment: \"已显示全部点云\",\n\tPointCloudHideSegmentInvalid: \"隐藏已标注不可用，请先关闭聚焦\",\n\tPointCloudHideFocusInvalid_hide: \"聚焦不可用，请先关闭“隐藏已标注”\",\n\tPointCloudHideFocusInvalid_none: \"聚焦不可用，请先选择需要聚焦的标记\",\n\tPalette: \"调色盘\",\n\tEfficientListening: \"该任务标注效率监控中...\",\n\tTitle: \"题目\",\n\tAnswer: \"回答\",\n\tFinished: \"已完成\",\n\tUnfinished: \"未完成\",\n\tOverallScore: \"整体评分\",\n\tNoScoringScale: \"可在左侧配置步骤详情\",\n\tBest: \"最好\",\n\tWorst: \"最差\",\n\tRankingQualityOfAnswers: \"请对每个回答的质量进行排序\",\n\tToBeSorted: \"待排序\",\n\tYes: \"是\",\n\tNo: \"否\",\n\tAdditionalContent: \"（选填）请填写任何你对答案的评价或其他补充内容\",\n\tSubmit: \"提交\",\n\tDragAndDrop: \"按住拖动\",\n\tDefaultSize: \"点击图标以使用默认尺寸\",\n\tNormalSizeRange: \"正常尺寸范围\",\n\tNormalCenterPointRange: \"正常中心点范围\",\n\tLoadingTips: \"数据加载中~请稍后\",\n\tUnlocked: \"未开启\",\n\tLocked: \"已开启\",\n\tLeastCharacterError: \"请至少输入{{num}}个字符\",\n\tAnd: \"且\",\n\tOr: \"或\"\n};\nvar resources = {\n\ten: en,\n\tcn: cn\n};\n\nexport { cn, resources as default, en };\n","import i18n from 'i18next';\nexport { default, default as i18n } from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport resources from './resources.json.js';\n\nif (!i18n.language) {\n  i18n.use(initReactI18next).init({\n    lng: \"en\",\n    interpolation: {\n      escapeValue: false\n    },\n    react: {\n      useSuspense: false\n    }\n  });\n}\ni18n.addResourceBundle(\"en\", \"translation\", resources.en, true);\ni18n.addResourceBundle(\"cn\", \"translation\", resources.cn, true);\n","import { INVALID_COLOR } from './index.js';\n\nconst BORDER_OPACITY_LEVEL = {\n  0: 0,\n  1: 0.2,\n  3: 0.4,\n  5: 0.6,\n  7: 0.8,\n  9: 1,\n  10: 1\n};\nconst FILL_OPACITY_LEVEL = {\n  0: 0,\n  1: 0,\n  3: 0.2,\n  5: 0.4,\n  7: 0.6,\n  9: 0.8,\n  10: 1\n};\nconst _ToolStyleUtils = class {\n  static rgbaStringToHex(rgbaString) {\n    const rgbaArr = rgbaString.substring(5, rgbaString.length - 1).replace(/ /g, \"\").split(\",\");\n    const r = parseInt(rgbaArr[0]);\n    const g = parseInt(rgbaArr[1]);\n    const b = parseInt(rgbaArr[2]);\n    const a = parseFloat(rgbaArr[3]);\n    const hexR = r.toString(16).padStart(2, \"0\");\n    const hexG = g.toString(16).padStart(2, \"0\");\n    const hexB = b.toString(16).padStart(2, \"0\");\n    const hexA = Math.round(a * 255).toString(16).padStart(2, \"0\");\n    return \"#\" + hexR + hexG + hexB + hexA;\n  }\n};\nlet ToolStyleUtils = _ToolStyleUtils;\nToolStyleUtils.replaceAFromRGBA = (rgba, opacity) => {\n  return rgba.split(\" \").join(\"\").replace(/,[0-9]+([.]{1}[0-9]+){0,1}\\)/, `,${opacity.toFixed(2)})`);\n};\nToolStyleUtils.toRGBAArr = (rgbStr, opacity = 1) => {\n  const match = rgbStr.match(/\\d+/g);\n  if (match) {\n    const [r, g, b, a] = match;\n    return [r, g, b, a];\n  }\n};\nToolStyleUtils.getToolStrokeAndFill = (color, options) => {\n  const {\n    hover = false,\n    selected = false,\n    borderOpacity = 1,\n    fillOpacity = 1,\n    commonOpacity = 0.8\n  } = options;\n  if (selected || hover) {\n    return {\n      stroke: _ToolStyleUtils.replaceAFromRGBA(color, borderOpacity),\n      fill: _ToolStyleUtils.replaceAFromRGBA(color, fillOpacity),\n      rgba: _ToolStyleUtils.toRGBAArr(color)\n    };\n  }\n  return {\n    stroke: _ToolStyleUtils.replaceAFromRGBA(color, borderOpacity * commonOpacity),\n    fill: _ToolStyleUtils.replaceAFromRGBA(color, fillOpacity * commonOpacity),\n    rgba: _ToolStyleUtils.toRGBAArr(color)\n  };\n};\nToolStyleUtils.getStrokeAndFill = (color, opacity = 1, fillOpacity = 1) => {\n  return {\n    stroke: _ToolStyleUtils.replaceAFromRGBA(color, opacity),\n    fill: _ToolStyleUtils.replaceAFromRGBA(color, fillOpacity)\n  };\n};\nToolStyleUtils.getToolColorList = (color, borderOpacityParam = 9, fillOpacityParam = 9) => {\n  const borderOpacity = BORDER_OPACITY_LEVEL[borderOpacityParam];\n  const fillOpacity = FILL_OPACITY_LEVEL[fillOpacityParam];\n  return {\n    valid: _ToolStyleUtils.getStrokeAndFill(color, 1 * borderOpacity, 0.4 * fillOpacity),\n    invalid: _ToolStyleUtils.getStrokeAndFill(INVALID_COLOR, 1 * borderOpacity, 0.8 * fillOpacity),\n    validSelected: _ToolStyleUtils.getStrokeAndFill(color, 1 * borderOpacity, 0.8 * fillOpacity),\n    invalidSelected: _ToolStyleUtils.getStrokeAndFill(INVALID_COLOR, 1 * borderOpacity, 0.24 * fillOpacity),\n    validHover: _ToolStyleUtils.getStrokeAndFill(color, 1 * borderOpacity, 0.64 * fillOpacity),\n    invalidHover: _ToolStyleUtils.getStrokeAndFill(INVALID_COLOR, 1 * borderOpacity, 0.4 * fillOpacity)\n  };\n};\nToolStyleUtils.getAttributeIndex = (attribute, attributeList) => {\n  try {\n    const attributeIndex = attributeList.findIndex((i) => i.value === attribute);\n    return attributeIndex;\n  } catch (error) {\n    return -1;\n  }\n};\n\nexport { ToolStyleUtils as default };\n","import ToolStyleUtils from './ToolStyleUtils.js';\nexport { default as ToolStyleUtils } from './ToolStyleUtils.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst DEFAULT_COLORS = [\n  \"rgba(102, 111, 255, 1)\",\n  \"rgba(102, 230, 255, 1)\",\n  \"rgba(191, 255, 102, 1)\",\n  \"rgba(255, 230, 102, 1)\",\n  \"rgba(230, 102, 255, 1)\"\n];\nconst ATTRIBUTE_COLORS = [\n  \"rgba(128, 12, 249, 1)\",\n  \"rgba(0, 255, 48, 1)\",\n  \"rgba(255, 136, 247, 1)\",\n  \"rgba(255, 226, 50, 1)\",\n  \"rgba(153, 66, 23, 1)\",\n  \"rgba(2, 130, 250, 1)\",\n  \"rgba(255, 35, 35, 1)\",\n  \"rgba(0, 255, 234, 1)\"\n];\nconst COLORS_ARRAY_MULTI = [\n  {\n    rgba: \"rgba(128, 12, 249, 1)\",\n    hex: 8391929\n  },\n  {\n    rgba: \"rgba(0, 255, 48, 1)\",\n    hex: 65328\n  },\n  {\n    rgba: \"rgba(255, 136, 247, 1)\",\n    hex: 16746743\n  },\n  {\n    rgba: \"rgba(255, 226, 50, 1)\",\n    hex: 16769586\n  },\n  {\n    rgba: \"rgba(153, 66, 23, 1)\",\n    hex: 10043927\n  },\n  {\n    rgba: \"rgba(2, 130, 250, 1)\",\n    hex: 164602\n  },\n  {\n    rgba: \"rgba(255, 35, 35, 1)\",\n    hex: 16720675\n  },\n  {\n    rgba: \"rgba(0, 255, 234, 1)\",\n    hex: 65514\n  }\n];\nconst INVALID_COLOR = \"rgba(255, 153, 102, 1)\";\nconst NULL_COLOR = \"rgba(204, 204, 204, 1)\";\nclass ToolStyleConverter {\n  constructor() {\n    this._defaultColors = DEFAULT_COLORS;\n    this._attributeColors = ATTRIBUTE_COLORS;\n  }\n  get defaultColors() {\n    return this._defaultColors;\n  }\n  get attributeColors() {\n    return this._attributeColors;\n  }\n  getColorFromConfig(result, config, styleConfig, options) {\n    var _a, _b, _c, _d, _e;\n    if (Object.prototype.toString.call(config) !== \"[object Object]\") {\n      throw \"Config must be Object\";\n    }\n    if (Object.prototype.toString.call(result) !== \"[object Object]\") {\n      throw \"Result must be Object\";\n    }\n    const {borderOpacity = 1, fillOpacity = 0.6, colorIndex = 0} = styleConfig;\n    if (!options) {\n      options = {};\n    }\n    const valid = (_a = result == null ? void 0 : result.valid) != null ? _a : true;\n    const {multiColorIndex = -1, selected, hover} = options;\n    const defaultStatus = {\n      selected,\n      hover,\n      borderOpacity,\n      fillOpacity\n    };\n    let colorList = this.defaultColors;\n    if ((config == null ? void 0 : config.attributeConfigurable) === true || multiColorIndex > -1) {\n      colorList = this.attributeColors;\n    }\n    if (valid === false) {\n      return ToolStyleUtils.getToolStrokeAndFill(INVALID_COLOR, defaultStatus);\n    }\n    if ((config == null ? void 0 : config.attributeConfigurable) === true) {\n      const attributeIndex = ToolStyleUtils.getAttributeIndex(result == null ? void 0 : result.attribute, config == null ? void 0 : config.attributeList);\n      let color = (_c = (_b = config == null ? void 0 : config.attributeList) == null ? void 0 : _b.find((i) => i.value === (result == null ? void 0 : result.attribute))) == null ? void 0 : _c.color;\n      let hexColor = \"\";\n      if (!color && attributeIndex !== -1) {\n        color = colorList[attributeIndex % colorList.length];\n      }\n      if (attributeIndex === -1) {\n        color = NULL_COLOR;\n      }\n      hexColor = ToolStyleUtils.rgbaStringToHex(color).toString().substring(1);\n      const colorDecimal = parseInt(hexColor, 16);\n      const colorHex = (_e = (_d = COLORS_ARRAY_MULTI[attributeIndex % colorList.length]) == null ? void 0 : _d.hex) != null ? _e : \"\";\n      return __spreadProps(__spreadValues({}, ToolStyleUtils.getToolStrokeAndFill(color, defaultStatus)), {\n        hex: colorDecimal || colorHex\n      });\n    }\n    if (multiColorIndex > -1) {\n      return ToolStyleUtils.getToolStrokeAndFill(colorList[multiColorIndex % colorList.length], defaultStatus);\n    }\n    return ToolStyleUtils.getToolStrokeAndFill(colorList[colorIndex % colorList.length], defaultStatus);\n  }\n  getColorByConfig({\n    attribute,\n    config,\n    style\n  }) {\n    var _a, _b, _c;\n    if ((config == null ? void 0 : config.attributeConfigurable) === true) {\n      const color = (_b = (_a = config == null ? void 0 : config.attributeList) == null ? void 0 : _a.find((i) => i.value === attribute)) == null ? void 0 : _b.color;\n      if (color) {\n        return ToolStyleUtils.getToolColorList(color, style == null ? void 0 : style.borderOpacity, style == null ? void 0 : style.fillOpacity);\n      }\n      if (style == null ? void 0 : style.attributeColor) {\n        const attributeIndex = ToolStyleUtils.getAttributeIndex(attribute, (_c = config == null ? void 0 : config.attributeList) != null ? _c : []) % 8 + 1;\n        return style.attributeColor[attributeIndex];\n      }\n    }\n    if (style) {\n      const {color, toolColor} = style;\n      if (toolColor) {\n        return toolColor[color];\n      }\n    }\n    return ToolStyleUtils.getToolColorList(NULL_COLOR);\n  }\n}\nfunction createColorMapJet() {\n  let s;\n  const p = new Array(256).fill(\"\").map((v) => new Array(3).fill(\"\"));\n  for (let i = 0; i < 20; i++) {\n    for (s = 0; s < 32; s++) {\n      p[s][0] = 128 + 4 * s;\n      p[s][1] = 0;\n      p[s][2] = 0;\n    }\n    p[32][0] = 255;\n    p[32][1] = 0;\n    p[32][2] = 0;\n    for (s = 0; s < 63; s++) {\n      p[33 + s][0] = 255;\n      p[33 + s][1] = 4 + 4 * s;\n      p[33 + s][2] = 0;\n    }\n    p[96][0] = 254;\n    p[96][1] = 255;\n    p[96][2] = 2;\n    for (s = 0; s < 62; s++) {\n      p[97 + s][0] = 250 - 4 * s;\n      p[97 + s][1] = 255;\n      p[97 + s][2] = 6 + 4 * s;\n    }\n    p[159][0] = 1;\n    p[159][1] = 255;\n    p[159][2] = 254;\n    for (s = 0; s < 64; s++) {\n      p[160 + s][0] = 0;\n      p[160 + s][1] = 252 - s * 4;\n      p[160 + s][2] = 255;\n    }\n    for (s = 0; s < 32; s++) {\n      p[224 + s][0] = 0;\n      p[224 + s][1] = 0;\n      p[224 + s][2] = 252 - 4 * s;\n    }\n  }\n  return p;\n}\nconst COLOR_MAP_JET = createColorMapJet();\nvar index = new ToolStyleConverter();\n\nexport { ATTRIBUTE_COLORS, COLORS_ARRAY_MULTI, COLOR_MAP_JET, INVALID_COLOR, NULL_COLOR, ToolStyleConverter, index as default };\n","class PerspectiveShiftUtils {\n  static translationMatrix(x, y, z) {\n    return [1, 0, 0, x, 0, 1, 0, y, 0, 0, 1, z, 0, 0, 0, 1];\n  }\n  static frontViewMatrix4(distance) {\n    return this.translationMatrix(distance, 0, 0);\n  }\n  static backViewMatrix4(distance) {\n    return this.translationMatrix(-distance, 0, 0);\n  }\n  static leftViewMatrix4(distance) {\n    return this.translationMatrix(0, distance, 0);\n  }\n  static rightViewMatrix4(distance) {\n    return this.translationMatrix(0, -distance, 0);\n  }\n  static topViewMatrix4(distance) {\n    return this.translationMatrix(-0.01, 0, distance);\n  }\n  static leftFrontTopViewMatrix4(scale, volume) {\n    const offsetX = volume.width / 2;\n    const offsetY = volume.height / 2;\n    const offsetZ = volume.depth / 2;\n    return this.translationMatrix(offsetX * scale, offsetY * scale, offsetZ * scale);\n  }\n  static rightBackTopViewMatrix4(scale, volume) {\n    const offsetX = -volume.width / 2;\n    const offsetY = -volume.height / 2;\n    const offsetZ = volume.depth / 2;\n    return this.translationMatrix(offsetX * scale, offsetY * scale, offsetZ * scale);\n  }\n}\n\nexport { PerspectiveShiftUtils as default };\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nconst _PointCloudUtils = class {\n  static genColorByCoord(x, y, z) {\n    if (z <= 0) {\n      return [128, 128, 128];\n    }\n    if (z < 5) {\n      return [255, 0, 0];\n    }\n    if (z < 10) {\n      return [0, 255, 0];\n    }\n    return [0, 0, 255];\n  }\n  static getStandardColorByCoord(x, y, z) {\n    const pdColor = this.genColorByCoord(x, y, z);\n    return pdColor.map((hex) => hex / 255);\n  }\n  static parsePointCloudCurrentResult(result) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const data = this.jsonParser(result);\n    const DEFAULT_STEP = `step_1`;\n    const ptResult = (_a = data == null ? void 0 : data[DEFAULT_STEP]) != null ? _a : {};\n    const boxParamsList = (_b = ptResult == null ? void 0 : ptResult.result) != null ? _b : [];\n    const polygonList = (_d = (_c = ptResult == null ? void 0 : ptResult.resultPolygon) != null ? _c : ptResult == null ? void 0 : ptResult.renderPolygon) != null ? _d : [];\n    const lineList = (_e = ptResult == null ? void 0 : ptResult.resultLine) != null ? _e : [];\n    const sphereParamsList = (_f = ptResult == null ? void 0 : ptResult.resultPoint) != null ? _f : [];\n    const segmentation = (_g = ptResult == null ? void 0 : ptResult.segmentation) != null ? _g : [];\n    return {\n      boxParamsList,\n      polygonList,\n      lineList,\n      sphereParamsList,\n      segmentation\n    };\n  }\n  static getBoxParamsFromResultList(result) {\n    var _a, _b;\n    const data = this.jsonParser(result);\n    const DEFAULT_STEP = `step_1`;\n    const pointCloudDataList = (_b = (_a = data == null ? void 0 : data[DEFAULT_STEP]) == null ? void 0 : _a.result) != null ? _b : [];\n    return pointCloudDataList;\n  }\n  static getSphereParamsFromResultList(result) {\n    var _a, _b;\n    const data = this.jsonParser(result);\n    const DEFAULT_STEP = `step_1`;\n    const pointCloudDataList = (_b = (_a = data == null ? void 0 : data[DEFAULT_STEP]) == null ? void 0 : _a.resultPoint) != null ? _b : [];\n    return pointCloudDataList;\n  }\n  static getSegmentFromResultList(result) {\n    var _a, _b;\n    const data = this.jsonParser(result);\n    const DEFAULT_STEP = `step_1`;\n    const pointCloudDataList = (_b = (_a = data == null ? void 0 : data[DEFAULT_STEP]) == null ? void 0 : _a.segmentation) != null ? _b : [];\n    return pointCloudDataList;\n  }\n  static getLineListFromResultList(result) {\n    var _a, _b;\n    const data = this.jsonParser(result);\n    const DEFAULT_STEP = `step_1`;\n    const pointCloudDataList = (_b = (_a = data == null ? void 0 : data[DEFAULT_STEP]) == null ? void 0 : _a.resultLine) != null ? _b : [];\n    return pointCloudDataList;\n  }\n  static getPolygonListFromResultList(result) {\n    var _a, _b, _c, _d;\n    const data = this.jsonParser(result);\n    const DEFAULT_STEP = `step_1`;\n    const pointCloudDataList = (_d = (_c = (_a = data == null ? void 0 : data[DEFAULT_STEP]) == null ? void 0 : _a.resultPolygon) != null ? _c : (_b = data == null ? void 0 : data[DEFAULT_STEP]) == null ? void 0 : _b.renderPolygon) != null ? _d : [];\n    return pointCloudDataList;\n  }\n  static getFrontViewPolygon(boxParams) {\n    const {\n      center: {x, y, z},\n      width,\n      height,\n      depth\n    } = boxParams;\n    return [\n      {\n        x: x + width / 2,\n        y: y + height / 2,\n        z: z - depth / 2\n      },\n      {\n        x: x + width / 2,\n        y: y + height / 2,\n        z: z + depth / 2\n      },\n      {\n        x: x + width / 2,\n        y: y - height / 2,\n        z: z + depth / 2\n      },\n      {\n        x: x + width / 2,\n        y: y - height / 2,\n        z: z - depth / 2\n      },\n      {\n        x: x + width / 2,\n        y: y + height / 2,\n        z: z - depth / 2\n      }\n    ];\n  }\n  static getBackViewPolygon(boxParams) {\n    const {\n      center: {x, y, z},\n      width,\n      height,\n      depth\n    } = boxParams;\n    return [\n      {\n        x: x - width / 2,\n        y: y - height / 2,\n        z: z - depth / 2\n      },\n      {\n        x: x - width / 2,\n        y: y + height / 2,\n        z: z - depth / 2\n      },\n      {\n        x: x - width / 2,\n        y: y + height / 2,\n        z: z + depth / 2\n      },\n      {\n        x: x - width / 2,\n        y: y - height / 2,\n        z: z + depth / 2\n      },\n      {\n        x: x - width / 2,\n        y: y - height / 2,\n        z: z - depth / 2\n      }\n    ];\n  }\n  static getAllDirectionLine(boxParams) {\n    const {\n      center: {x, y, z},\n      width,\n      height,\n      depth\n    } = boxParams;\n    return [\n      [\n        {\n          x: x + width / 2,\n          y: y - height / 2,\n          z: z - depth / 2\n        },\n        {\n          x: x - width / 2,\n          y: y - height / 2,\n          z: z - depth / 2\n        }\n      ],\n      [\n        {\n          x: x + width / 2,\n          y: y + height / 2,\n          z: z - depth / 2\n        },\n        {\n          x: x - width / 2,\n          y: y + height / 2,\n          z: z - depth / 2\n        }\n      ],\n      [\n        {\n          x: x + width / 2,\n          y: y - height / 2,\n          z: z + depth / 2\n        },\n        {\n          x: x - width / 2,\n          y: y - height / 2,\n          z: z + depth / 2\n        }\n      ],\n      [\n        {\n          x: x + width / 2,\n          y: y + height / 2,\n          z: z + depth / 2\n        },\n        {\n          x: x - width / 2,\n          y: y + height / 2,\n          z: z + depth / 2\n        }\n      ]\n    ];\n  }\n  static getAllViewData(boxParams) {\n    return [\n      {\n        type: \"polygon\",\n        pointList: this.getFrontViewPolygon(boxParams)\n      },\n      {\n        type: \"polygon\",\n        pointList: this.getBackViewPolygon(boxParams)\n      },\n      ...this.getAllDirectionLine(boxParams).map((v) => ({\n        type: \"line\",\n        pointList: v\n      }))\n    ];\n  }\n  static transferBox2Kitti(boxParams) {\n    var _a, _b, _c;\n    return {\n      height: (_a = boxParams.depth) != null ? _a : 0,\n      length: (_b = boxParams.width) != null ? _b : 0,\n      width: (_c = boxParams.height) != null ? _c : 0,\n      rotation_y: boxParams.rotation ? this.transferRotation2KittiRotation_y(boxParams.rotation) : 0\n    };\n  }\n  static restrictAngleRange(rotation) {\n    const standardRange = Math.PI * 2;\n    let updatedRotation = rotation % standardRange;\n    if (updatedRotation < 0) {\n      return standardRange + updatedRotation;\n    }\n    return updatedRotation;\n  }\n  static transferRotation2KittiRotation_y(rotation) {\n    if (rotation < 0) {\n      return -rotation;\n    }\n    const newRotation = 2 * Math.PI - rotation;\n    if (newRotation > Math.PI && newRotation < 2 * Math.PI) {\n      return -1 * rotation;\n    }\n    return 2 * Math.PI - rotation;\n  }\n  static getAllPointCloudResult({\n    imgList,\n    step = 1,\n    extraBoxList,\n    extraSphereList = [],\n    ignoreIndexList = []\n  }) {\n    const resultList = imgList.filter((_, i) => !(ignoreIndexList == null ? void 0 : ignoreIndexList.includes(i))).map((v) => this.jsonParser(v.result));\n    const DEFAULT_STEP_NAME = `step_${step}`;\n    let boxList = [];\n    resultList.forEach((result) => {\n      var _a, _b;\n      if (((_b = (_a = result == null ? void 0 : result[DEFAULT_STEP_NAME]) == null ? void 0 : _a[\"result\"]) == null ? void 0 : _b.length) > 0) {\n        boxList = boxList.concat(result[DEFAULT_STEP_NAME][\"result\"]);\n      }\n    });\n    if (extraBoxList) {\n      boxList = boxList.concat(extraBoxList);\n    }\n    if (extraSphereList) {\n      boxList = boxList.concat(extraSphereList);\n    }\n    return boxList;\n  }\n  static getNextTrackID({\n    imgList,\n    step = 1,\n    extraBoxList,\n    extraSphereList\n  }) {\n    let trackID = 1;\n    const boxList = this.getAllPointCloudResult({imgList, step, extraBoxList, extraSphereList});\n    boxList.forEach((data) => {\n      if (typeof (data == null ? void 0 : data.trackID) === \"number\" && data.trackID >= trackID) {\n        trackID = data.trackID + 1;\n      }\n    });\n    return trackID;\n  }\n  static batchUpdateTrackID({\n    id,\n    newID,\n    result,\n    step = 1\n  }) {\n    var _a;\n    const DEFAULT_STEP_NAME = `step_${step}`;\n    const originResult = this.jsonParser(result);\n    const dataList = (_a = originResult == null ? void 0 : originResult[DEFAULT_STEP_NAME]) == null ? void 0 : _a.result;\n    if (!dataList) {\n      return result;\n    }\n    dataList.forEach((v) => {\n      if ((v == null ? void 0 : v.trackID) === id) {\n        v.trackID = newID;\n      }\n      return v;\n    });\n    return JSON.stringify(originResult);\n  }\n  static batchUpdateTrackIDCheck({\n    newID,\n    result,\n    step = 1\n  }) {\n    var _a;\n    const DEFAULT_STEP_NAME = `step_${step}`;\n    const originResult = this.jsonParser(result);\n    const dataList = (_a = originResult == null ? void 0 : originResult[DEFAULT_STEP_NAME]) == null ? void 0 : _a.result;\n    if (!dataList) {\n      return false;\n    }\n    return dataList.some((v) => v.trackID === newID);\n  }\n  static batchUpdateResultByTrackID({\n    id,\n    newData,\n    result,\n    step = 1\n  }) {\n    var _a;\n    const DEFAULT_STEP_NAME = `step_${step}`;\n    const originResult = this.jsonParser(result);\n    const dataList = (_a = originResult == null ? void 0 : originResult[DEFAULT_STEP_NAME]) == null ? void 0 : _a.result;\n    if (!dataList) {\n      return result;\n    }\n    originResult[DEFAULT_STEP_NAME].result = dataList.map((v) => {\n      if ((v == null ? void 0 : v.trackID) === id) {\n        const updateResult = __spreadValues({}, newData);\n        const newSubAttribute = updateResult.subAttribute;\n        if (newSubAttribute && v.subAttribute) {\n          Object.assign(updateResult, {subAttribute: __spreadValues(__spreadValues({}, v.subAttribute), newSubAttribute)});\n        }\n        return __spreadValues(__spreadValues({}, v), updateResult);\n      }\n      return v;\n    });\n    return JSON.stringify(originResult);\n  }\n  static getMaxSizeFromBox({\n    trackID,\n    imgList\n  }) {\n    let basicSize = void 0;\n    imgList.forEach((imgInfo) => {\n      var _a;\n      const DEFAULT_STEP_NAME = `step_${1}`;\n      const originResult = this.jsonParser(imgInfo.result);\n      const dataList = (_a = originResult == null ? void 0 : originResult[DEFAULT_STEP_NAME]) == null ? void 0 : _a.result;\n      if (!dataList) {\n        return;\n      }\n      dataList.forEach((v) => {\n        if ((v == null ? void 0 : v.trackID) === trackID) {\n          if (!basicSize) {\n            basicSize = {\n              width: v.width,\n              height: v.height,\n              depth: v.depth\n            };\n            return;\n          }\n          if (v.width > basicSize.width) {\n            basicSize.width = v.width;\n          }\n          if (v.height > basicSize.height) {\n            basicSize.height = v.height;\n          }\n          if (v.depth > basicSize.depth) {\n            basicSize.depth = v.depth;\n          }\n        }\n      });\n    });\n    return basicSize;\n  }\n  static getSubAttributeName(subAttribute, config) {\n    const subAttributeList = config.inputList;\n    return Object.entries(subAttribute).map(([label, value]) => {\n      var _a;\n      const data = subAttributeList.find((v) => v.value === label);\n      if (data) {\n        const subValue = (_a = data == null ? void 0 : data.subSelected) == null ? void 0 : _a.find((v) => v.value === value);\n        if (subValue) {\n          return {\n            label: data.key,\n            value: subValue.key\n          };\n        }\n      }\n      return {\n        label,\n        value\n      };\n    });\n  }\n  static getIntersectionBySlope(params) {\n    const {p1, line1, p2, line2} = params;\n    if (p1.x === p2.x && p1.y === p2.y) {\n      return p1;\n    }\n    let x, y;\n    if (line1[0].x === line1[1].x) {\n      x = p1.x;\n    }\n    if (line1[0].y === line1[1].y) {\n      y = p1.y;\n    }\n    if (line2[0].x === line2[1].x) {\n      x = p2.x;\n    }\n    if (line2[0].y === line2[1].y) {\n      y = p2.y;\n    }\n    const k1 = (line1[0].y - line1[1].y) / (line1[0].x - line1[1].x);\n    const k2 = (line2[0].y - line2[1].y) / (line2[0].x - line2[1].x);\n    x = x != null ? x : (p1.y - p2.y - k1 * p1.x + k2 * p2.x) / (k2 - k1);\n    y = y != null ? y : p1.y - k1 * (p1.x - x);\n    return {x, y};\n  }\n  static getCloudKeys(x, y, z) {\n    return [x, y, z].join(\"@\");\n  }\n  static splitPointsFromIndexes(originIndexes, splitIndexes) {\n    const splitSet = new Set();\n    for (let i = 0; i < splitIndexes.length; i += 1) {\n      splitSet.add(splitIndexes[i]);\n    }\n    const result = [];\n    for (let i = 0; i < originIndexes.length; i += 1) {\n      if (!splitSet.has(originIndexes[i])) {\n        result.push(originIndexes[i]);\n      }\n    }\n    return result;\n  }\n  static splitPointsFromPoints(originPoints, splitPoints) {\n    const splitMap = new Map();\n    for (let i = 0; i < splitPoints.length; i += 3) {\n      splitMap.set(_PointCloudUtils.getCloudKeys(splitPoints[i], splitPoints[i + 1], splitPoints[i + 2]), 1);\n    }\n    const result = [];\n    for (let i = 0; i < originPoints.length; i += 3) {\n      const key = _PointCloudUtils.getCloudKeys(originPoints[i], originPoints[i + 1], originPoints[i + 2]);\n      if (!splitMap.has(key)) {\n        result.push(originPoints[i], originPoints[i + 1], originPoints[i + 2]);\n      }\n    }\n    return new Float32Array(result);\n  }\n  static getDefaultOrthographicParams(size) {\n    return {\n      left: -size.width / 2,\n      right: size.width / 2,\n      top: size.height / 2,\n      bottom: -size.height / 2,\n      near: 0.1,\n      far: 1e4\n    };\n  }\n};\nlet PointCloudUtils = _PointCloudUtils;\nPointCloudUtils.jsonParser = (content) => {\n  try {\n    return JSON.parse(content);\n  } catch (e) {\n    return {};\n  }\n};\nPointCloudUtils.transferCanvas2World = (currentPos, size) => {\n  const {width: w, height: h} = size;\n  const _a = currentPos, {x, y} = _a, otherProps = __objRest(_a, [\"x\", \"y\"]);\n  return __spreadValues({\n    x: -y + h / 2,\n    y: -(x - w / 2)\n  }, otherProps);\n};\nPointCloudUtils.pointListTransferCanvas2World = (pointList, size) => {\n  return pointList == null ? void 0 : pointList.map((i) => __spreadValues(__spreadValues({}, i), _PointCloudUtils.transferCanvas2World(i, size)));\n};\nPointCloudUtils.transferWorld2Canvas = (currentPos, size) => {\n  const {width: w, height: h} = size;\n  const _a = currentPos, {x, y} = _a, otherProps = __objRest(_a, [\"x\", \"y\"]);\n  return __spreadValues({\n    x: -y + w / 2,\n    y: -x + h / 2\n  }, otherProps);\n};\n\nexport { PointCloudUtils as default };\n","const flat = (acc, cur) => {\n  return [...acc, ...cur];\n};\nclass MatrixUtils {\n  static transferMatrix34FromKitti2Three(matrix34Kitti) {\n    return [...matrix34Kitti.reduce(flat, []), 0, 0, 0, 1];\n  }\n  static transferMatrix33FromKitti2Three(matrix33Kitti) {\n    return [\n      ...matrix33Kitti.reduce((acc, cur) => {\n        const newList = [...acc, ...cur].concat([0]);\n        return newList;\n      }, []),\n      0,\n      0,\n      0,\n      1\n    ];\n  }\n}\n\nexport { MatrixUtils as default };\n","var EPerspectiveView;\n(function(EPerspectiveView2) {\n  EPerspectiveView2[\"Front\"] = \"FRONT\";\n  EPerspectiveView2[\"Back\"] = \"BACK\";\n  EPerspectiveView2[\"Left\"] = \"LEFT\";\n  EPerspectiveView2[\"Right\"] = \"RIGHT\";\n  EPerspectiveView2[\"Top\"] = \"TOP\";\n  EPerspectiveView2[\"LFT\"] = \"LEFT_FRONT_TOP\";\n  EPerspectiveView2[\"RBT\"] = \"RIGHT_BACK_TOP\";\n})(EPerspectiveView || (EPerspectiveView = {}));\nconst DEFAULT_SPHERE_PARAMS = {\n  radius: 0.3,\n  widthSegments: 32,\n  heightSegments: 16,\n  defaultZ: 1\n};\nvar EPointCloudPattern;\n(function(EPointCloudPattern2) {\n  EPointCloudPattern2[\"Detection\"] = \"Detection\";\n  EPointCloudPattern2[\"Segmentation\"] = \"Segmentation\";\n})(EPointCloudPattern || (EPointCloudPattern = {}));\nvar EPointCloudSegmentMode;\n(function(EPointCloudSegmentMode2) {\n  EPointCloudSegmentMode2[\"Add\"] = \"ADD\";\n  EPointCloudSegmentMode2[\"Remove\"] = \"REMOVE\";\n})(EPointCloudSegmentMode || (EPointCloudSegmentMode = {}));\nvar EPointCloudSegmentCoverMode;\n(function(EPointCloudSegmentCoverMode2) {\n  EPointCloudSegmentCoverMode2[\"Cover\"] = \"Cover\";\n  EPointCloudSegmentCoverMode2[\"Uncover\"] = \"Uncover\";\n})(EPointCloudSegmentCoverMode || (EPointCloudSegmentCoverMode = {}));\nvar EPointCloudSegmentFocusMode;\n(function(EPointCloudSegmentFocusMode2) {\n  EPointCloudSegmentFocusMode2[\"Focus\"] = \"Focus\";\n  EPointCloudSegmentFocusMode2[\"Unfocus\"] = \"Unfocus\";\n})(EPointCloudSegmentFocusMode || (EPointCloudSegmentFocusMode = {}));\nvar EPointCloudSegmentStatus;\n(function(EPointCloudSegmentStatus2) {\n  EPointCloudSegmentStatus2[\"Ready\"] = \"READY\";\n  EPointCloudSegmentStatus2[\"Check\"] = \"CHECK\";\n  EPointCloudSegmentStatus2[\"Edit\"] = \"EDIT\";\n})(EPointCloudSegmentStatus || (EPointCloudSegmentStatus = {}));\n\nexport { DEFAULT_SPHERE_PARAMS, EPerspectiveView, EPointCloudPattern, EPointCloudSegmentCoverMode, EPointCloudSegmentFocusMode, EPointCloudSegmentMode, EPointCloudSegmentStatus };\n","const DEFAULT_CACHE_SIZE = 2;\nclass ResourceManager {\n  constructor({size = DEFAULT_CACHE_SIZE} = {size: DEFAULT_CACHE_SIZE}) {\n    this.cacheMap = new Map();\n    this.size = size;\n  }\n  fetchResource(url) {\n    if (this.cacheMap.has(url)) {\n      return;\n    }\n    fetch(url).then(() => {\n      this.cacheMap.set(url, true);\n    });\n  }\n  preloadResourceList(urlList) {\n    urlList.forEach((url) => {\n      this.fetchResource(url);\n    });\n  }\n  quickPreload({\n    currentIndex,\n    imgList,\n    size = DEFAULT_CACHE_SIZE\n  }) {\n    const urlList = this.getResourceList({currentIndex, imgList, size});\n    this.preloadResourceList(urlList);\n  }\n  getResourceList({\n    currentIndex,\n    imgList,\n    size = this.size\n  }) {\n    if (currentIndex + 1 >= imgList.length) {\n      return [];\n    }\n    let urlList = [];\n    const withInRange = (index) => index >= 0 && index < imgList.length;\n    for (let i = 1; i <= size; i += 1) {\n      [currentIndex - i, currentIndex + i].forEach((i2) => {\n        if (withInRange(i2)) {\n          const newUrlList = this.processResourceUrl(imgList[i2]);\n          urlList = [...urlList, ...newUrlList];\n        }\n      });\n    }\n    return urlList;\n  }\n  processResourceUrl(imgInfo = {}) {\n    var _a, _b;\n    const urlList = [];\n    if (imgInfo == null ? void 0 : imgInfo.url) {\n      urlList.push(imgInfo.url);\n    }\n    const lidarUrl = (_b = (_a = imgInfo == null ? void 0 : imgInfo.webPointCloudFile) == null ? void 0 : _a.lidar) == null ? void 0 : _b.url;\n    if (lidarUrl) {\n      urlList.push(lidarUrl);\n    }\n    return urlList;\n  }\n}\nconst resourceManagerInstance = new ResourceManager();\n\nexport { ResourceManager, resourceManagerInstance };\n","var ELineTypes;\n(function(ELineTypes2) {\n  ELineTypes2[ELineTypes2[\"Line\"] = 0] = \"Line\";\n  ELineTypes2[ELineTypes2[\"Curve\"] = 1] = \"Curve\";\n})(ELineTypes || (ELineTypes = {}));\n\nexport { ELineTypes };\n","const colorArr = [\n  {\n    colorId: 0,\n    hexString: \"#000000\",\n    rgb: {\n      r: 0,\n      g: 0,\n      b: 0\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 0\n    },\n    name: \"Black\"\n  },\n  {\n    colorId: 1,\n    hexString: \"#800000\",\n    rgb: {\n      r: 128,\n      g: 0,\n      b: 0\n    },\n    hsl: {\n      h: 0,\n      s: 100,\n      l: 25\n    },\n    name: \"Maroon\"\n  },\n  {\n    colorId: 2,\n    hexString: \"#008000\",\n    rgb: {\n      r: 0,\n      g: 128,\n      b: 0\n    },\n    hsl: {\n      h: 120,\n      s: 100,\n      l: 25\n    },\n    name: \"Green\"\n  },\n  {\n    colorId: 3,\n    hexString: \"#808000\",\n    rgb: {\n      r: 128,\n      g: 128,\n      b: 0\n    },\n    hsl: {\n      h: 60,\n      s: 100,\n      l: 25\n    },\n    name: \"Olive\"\n  },\n  {\n    colorId: 4,\n    hexString: \"#000080\",\n    rgb: {\n      r: 0,\n      g: 0,\n      b: 128\n    },\n    hsl: {\n      h: 240,\n      s: 100,\n      l: 25\n    },\n    name: \"Navy\"\n  },\n  {\n    colorId: 5,\n    hexString: \"#800080\",\n    rgb: {\n      r: 128,\n      g: 0,\n      b: 128\n    },\n    hsl: {\n      h: 300,\n      s: 100,\n      l: 25\n    },\n    name: \"Purple\"\n  },\n  {\n    colorId: 6,\n    hexString: \"#008080\",\n    rgb: {\n      r: 0,\n      g: 128,\n      b: 128\n    },\n    hsl: {\n      h: 180,\n      s: 100,\n      l: 25\n    },\n    name: \"Teal\"\n  },\n  {\n    colorId: 7,\n    hexString: \"#c0c0c0\",\n    rgb: {\n      r: 192,\n      g: 192,\n      b: 192\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 75\n    },\n    name: \"Silver\"\n  },\n  {\n    colorId: 8,\n    hexString: \"#808080\",\n    rgb: {\n      r: 128,\n      g: 128,\n      b: 128\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 50\n    },\n    name: \"Grey\"\n  },\n  {\n    colorId: 9,\n    hexString: \"#ff0000\",\n    rgb: {\n      r: 255,\n      g: 0,\n      b: 0\n    },\n    hsl: {\n      h: 0,\n      s: 100,\n      l: 50\n    },\n    name: \"Red\"\n  },\n  {\n    colorId: 10,\n    hexString: \"#00ff00\",\n    rgb: {\n      r: 0,\n      g: 255,\n      b: 0\n    },\n    hsl: {\n      h: 120,\n      s: 100,\n      l: 50\n    },\n    name: \"Lime\"\n  },\n  {\n    colorId: 11,\n    hexString: \"#ffff00\",\n    rgb: {\n      r: 255,\n      g: 255,\n      b: 0\n    },\n    hsl: {\n      h: 60,\n      s: 100,\n      l: 50\n    },\n    name: \"Yellow\"\n  },\n  {\n    colorId: 12,\n    hexString: \"#0000ff\",\n    rgb: {\n      r: 0,\n      g: 0,\n      b: 255\n    },\n    hsl: {\n      h: 240,\n      s: 100,\n      l: 50\n    },\n    name: \"Blue\"\n  },\n  {\n    colorId: 13,\n    hexString: \"#ff00ff\",\n    rgb: {\n      r: 255,\n      g: 0,\n      b: 255\n    },\n    hsl: {\n      h: 300,\n      s: 100,\n      l: 50\n    },\n    name: \"Fuchsia\"\n  },\n  {\n    colorId: 14,\n    hexString: \"#00ffff\",\n    rgb: {\n      r: 0,\n      g: 255,\n      b: 255\n    },\n    hsl: {\n      h: 180,\n      s: 100,\n      l: 50\n    },\n    name: \"Aqua\"\n  },\n  {\n    colorId: 15,\n    hexString: \"#ffffff\",\n    rgb: {\n      r: 255,\n      g: 255,\n      b: 255\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 100\n    },\n    name: \"White\"\n  },\n  {\n    colorId: 16,\n    hexString: \"#000000\",\n    rgb: {\n      r: 0,\n      g: 0,\n      b: 0\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 0\n    },\n    name: \"Grey0\"\n  },\n  {\n    colorId: 17,\n    hexString: \"#00005f\",\n    rgb: {\n      r: 0,\n      g: 0,\n      b: 95\n    },\n    hsl: {\n      h: 240,\n      s: 100,\n      l: 18\n    },\n    name: \"NavyBlue\"\n  },\n  {\n    colorId: 18,\n    hexString: \"#000087\",\n    rgb: {\n      r: 0,\n      g: 0,\n      b: 135\n    },\n    hsl: {\n      h: 240,\n      s: 100,\n      l: 26\n    },\n    name: \"DarkBlue\"\n  },\n  {\n    colorId: 19,\n    hexString: \"#0000af\",\n    rgb: {\n      r: 0,\n      g: 0,\n      b: 175\n    },\n    hsl: {\n      h: 240,\n      s: 100,\n      l: 34\n    },\n    name: \"Blue3\"\n  },\n  {\n    colorId: 20,\n    hexString: \"#0000d7\",\n    rgb: {\n      r: 0,\n      g: 0,\n      b: 215\n    },\n    hsl: {\n      h: 240,\n      s: 100,\n      l: 42\n    },\n    name: \"Blue3\"\n  },\n  {\n    colorId: 21,\n    hexString: \"#0000ff\",\n    rgb: {\n      r: 0,\n      g: 0,\n      b: 255\n    },\n    hsl: {\n      h: 240,\n      s: 100,\n      l: 50\n    },\n    name: \"Blue1\"\n  },\n  {\n    colorId: 22,\n    hexString: \"#005f00\",\n    rgb: {\n      r: 0,\n      g: 95,\n      b: 0\n    },\n    hsl: {\n      h: 120,\n      s: 100,\n      l: 18\n    },\n    name: \"DarkGreen\"\n  },\n  {\n    colorId: 23,\n    hexString: \"#005f5f\",\n    rgb: {\n      r: 0,\n      g: 95,\n      b: 95\n    },\n    hsl: {\n      h: 180,\n      s: 100,\n      l: 18\n    },\n    name: \"DeepSkyBlue4\"\n  },\n  {\n    colorId: 24,\n    hexString: \"#005f87\",\n    rgb: {\n      r: 0,\n      g: 95,\n      b: 135\n    },\n    hsl: {\n      h: 197.777777777778,\n      s: 100,\n      l: 26\n    },\n    name: \"DeepSkyBlue4\"\n  },\n  {\n    colorId: 25,\n    hexString: \"#005faf\",\n    rgb: {\n      r: 0,\n      g: 95,\n      b: 175\n    },\n    hsl: {\n      h: 207.428571428571,\n      s: 100,\n      l: 34\n    },\n    name: \"DeepSkyBlue4\"\n  },\n  {\n    colorId: 26,\n    hexString: \"#005fd7\",\n    rgb: {\n      r: 0,\n      g: 95,\n      b: 215\n    },\n    hsl: {\n      h: 213.488372093023,\n      s: 100,\n      l: 42\n    },\n    name: \"DodgerBlue3\"\n  },\n  {\n    colorId: 27,\n    hexString: \"#005fff\",\n    rgb: {\n      r: 0,\n      g: 95,\n      b: 255\n    },\n    hsl: {\n      h: 217.647058823529,\n      s: 100,\n      l: 50\n    },\n    name: \"DodgerBlue2\"\n  },\n  {\n    colorId: 28,\n    hexString: \"#008700\",\n    rgb: {\n      r: 0,\n      g: 135,\n      b: 0\n    },\n    hsl: {\n      h: 120,\n      s: 100,\n      l: 26\n    },\n    name: \"Green4\"\n  },\n  {\n    colorId: 29,\n    hexString: \"#00875f\",\n    rgb: {\n      r: 0,\n      g: 135,\n      b: 95\n    },\n    hsl: {\n      h: 162.222222222222,\n      s: 100,\n      l: 26\n    },\n    name: \"SpringGreen4\"\n  },\n  {\n    colorId: 30,\n    hexString: \"#008787\",\n    rgb: {\n      r: 0,\n      g: 135,\n      b: 135\n    },\n    hsl: {\n      h: 180,\n      s: 100,\n      l: 26\n    },\n    name: \"Turquoise4\"\n  },\n  {\n    colorId: 31,\n    hexString: \"#0087af\",\n    rgb: {\n      r: 0,\n      g: 135,\n      b: 175\n    },\n    hsl: {\n      h: 193.714285714286,\n      s: 100,\n      l: 34\n    },\n    name: \"DeepSkyBlue3\"\n  },\n  {\n    colorId: 32,\n    hexString: \"#0087d7\",\n    rgb: {\n      r: 0,\n      g: 135,\n      b: 215\n    },\n    hsl: {\n      h: 202.325581395349,\n      s: 100,\n      l: 42\n    },\n    name: \"DeepSkyBlue3\"\n  },\n  {\n    colorId: 33,\n    hexString: \"#0087ff\",\n    rgb: {\n      r: 0,\n      g: 135,\n      b: 255\n    },\n    hsl: {\n      h: 208.235294117647,\n      s: 100,\n      l: 50\n    },\n    name: \"DodgerBlue1\"\n  },\n  {\n    colorId: 34,\n    hexString: \"#00af00\",\n    rgb: {\n      r: 0,\n      g: 175,\n      b: 0\n    },\n    hsl: {\n      h: 120,\n      s: 100,\n      l: 34\n    },\n    name: \"Green3\"\n  },\n  {\n    colorId: 35,\n    hexString: \"#00af5f\",\n    rgb: {\n      r: 0,\n      g: 175,\n      b: 95\n    },\n    hsl: {\n      h: 152.571428571429,\n      s: 100,\n      l: 34\n    },\n    name: \"SpringGreen3\"\n  },\n  {\n    colorId: 36,\n    hexString: \"#00af87\",\n    rgb: {\n      r: 0,\n      g: 175,\n      b: 135\n    },\n    hsl: {\n      h: 166.285714285714,\n      s: 100,\n      l: 34\n    },\n    name: \"DarkCyan\"\n  },\n  {\n    colorId: 37,\n    hexString: \"#00afaf\",\n    rgb: {\n      r: 0,\n      g: 175,\n      b: 175\n    },\n    hsl: {\n      h: 180,\n      s: 100,\n      l: 34\n    },\n    name: \"LightSeaGreen\"\n  },\n  {\n    colorId: 38,\n    hexString: \"#00afd7\",\n    rgb: {\n      r: 0,\n      g: 175,\n      b: 215\n    },\n    hsl: {\n      h: 191.162790697674,\n      s: 100,\n      l: 42\n    },\n    name: \"DeepSkyBlue2\"\n  },\n  {\n    colorId: 39,\n    hexString: \"#00afff\",\n    rgb: {\n      r: 0,\n      g: 175,\n      b: 255\n    },\n    hsl: {\n      h: 198.823529411765,\n      s: 100,\n      l: 50\n    },\n    name: \"DeepSkyBlue1\"\n  },\n  {\n    colorId: 40,\n    hexString: \"#00d700\",\n    rgb: {\n      r: 0,\n      g: 215,\n      b: 0\n    },\n    hsl: {\n      h: 120,\n      s: 100,\n      l: 42\n    },\n    name: \"Green3\"\n  },\n  {\n    colorId: 41,\n    hexString: \"#00d75f\",\n    rgb: {\n      r: 0,\n      g: 215,\n      b: 95\n    },\n    hsl: {\n      h: 146.511627906977,\n      s: 100,\n      l: 42\n    },\n    name: \"SpringGreen3\"\n  },\n  {\n    colorId: 42,\n    hexString: \"#00d787\",\n    rgb: {\n      r: 0,\n      g: 215,\n      b: 135\n    },\n    hsl: {\n      h: 157.674418604651,\n      s: 100,\n      l: 42\n    },\n    name: \"SpringGreen2\"\n  },\n  {\n    colorId: 43,\n    hexString: \"#00d7af\",\n    rgb: {\n      r: 0,\n      g: 215,\n      b: 175\n    },\n    hsl: {\n      h: 168.837209302326,\n      s: 100,\n      l: 42\n    },\n    name: \"Cyan3\"\n  },\n  {\n    colorId: 44,\n    hexString: \"#00d7d7\",\n    rgb: {\n      r: 0,\n      g: 215,\n      b: 215\n    },\n    hsl: {\n      h: 180,\n      s: 100,\n      l: 42\n    },\n    name: \"DarkTurquoise\"\n  },\n  {\n    colorId: 45,\n    hexString: \"#00d7ff\",\n    rgb: {\n      r: 0,\n      g: 215,\n      b: 255\n    },\n    hsl: {\n      h: 189.411764705882,\n      s: 100,\n      l: 50\n    },\n    name: \"Turquoise2\"\n  },\n  {\n    colorId: 46,\n    hexString: \"#00ff00\",\n    rgb: {\n      r: 0,\n      g: 255,\n      b: 0\n    },\n    hsl: {\n      h: 120,\n      s: 100,\n      l: 50\n    },\n    name: \"Green1\"\n  },\n  {\n    colorId: 47,\n    hexString: \"#00ff5f\",\n    rgb: {\n      r: 0,\n      g: 255,\n      b: 95\n    },\n    hsl: {\n      h: 142.352941176471,\n      s: 100,\n      l: 50\n    },\n    name: \"SpringGreen2\"\n  },\n  {\n    colorId: 48,\n    hexString: \"#00ff87\",\n    rgb: {\n      r: 0,\n      g: 255,\n      b: 135\n    },\n    hsl: {\n      h: 151.764705882353,\n      s: 100,\n      l: 50\n    },\n    name: \"SpringGreen1\"\n  },\n  {\n    colorId: 49,\n    hexString: \"#00ffaf\",\n    rgb: {\n      r: 0,\n      g: 255,\n      b: 175\n    },\n    hsl: {\n      h: 161.176470588235,\n      s: 100,\n      l: 50\n    },\n    name: \"MediumSpringGreen\"\n  },\n  {\n    colorId: 50,\n    hexString: \"#00ffd7\",\n    rgb: {\n      r: 0,\n      g: 255,\n      b: 215\n    },\n    hsl: {\n      h: 170.588235294118,\n      s: 100,\n      l: 50\n    },\n    name: \"Cyan2\"\n  },\n  {\n    colorId: 51,\n    hexString: \"#00ffff\",\n    rgb: {\n      r: 0,\n      g: 255,\n      b: 255\n    },\n    hsl: {\n      h: 180,\n      s: 100,\n      l: 50\n    },\n    name: \"Cyan1\"\n  },\n  {\n    colorId: 52,\n    hexString: \"#5f0000\",\n    rgb: {\n      r: 95,\n      g: 0,\n      b: 0\n    },\n    hsl: {\n      h: 0,\n      s: 100,\n      l: 18\n    },\n    name: \"DarkRed\"\n  },\n  {\n    colorId: 53,\n    hexString: \"#5f005f\",\n    rgb: {\n      r: 95,\n      g: 0,\n      b: 95\n    },\n    hsl: {\n      h: 300,\n      s: 100,\n      l: 18\n    },\n    name: \"DeepPink4\"\n  },\n  {\n    colorId: 54,\n    hexString: \"#5f0087\",\n    rgb: {\n      r: 95,\n      g: 0,\n      b: 135\n    },\n    hsl: {\n      h: 282.222222222222,\n      s: 100,\n      l: 26\n    },\n    name: \"Purple4\"\n  },\n  {\n    colorId: 55,\n    hexString: \"#5f00af\",\n    rgb: {\n      r: 95,\n      g: 0,\n      b: 175\n    },\n    hsl: {\n      h: 272.571428571429,\n      s: 100,\n      l: 34\n    },\n    name: \"Purple4\"\n  },\n  {\n    colorId: 56,\n    hexString: \"#5f00d7\",\n    rgb: {\n      r: 95,\n      g: 0,\n      b: 215\n    },\n    hsl: {\n      h: 266.511627906977,\n      s: 100,\n      l: 42\n    },\n    name: \"Purple3\"\n  },\n  {\n    colorId: 57,\n    hexString: \"#5f00ff\",\n    rgb: {\n      r: 95,\n      g: 0,\n      b: 255\n    },\n    hsl: {\n      h: 262.352941176471,\n      s: 100,\n      l: 50\n    },\n    name: \"BlueViolet\"\n  },\n  {\n    colorId: 58,\n    hexString: \"#5f5f00\",\n    rgb: {\n      r: 95,\n      g: 95,\n      b: 0\n    },\n    hsl: {\n      h: 60,\n      s: 100,\n      l: 18\n    },\n    name: \"Orange4\"\n  },\n  {\n    colorId: 59,\n    hexString: \"#5f5f5f\",\n    rgb: {\n      r: 95,\n      g: 95,\n      b: 95\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 37\n    },\n    name: \"Grey37\"\n  },\n  {\n    colorId: 60,\n    hexString: \"#5f5f87\",\n    rgb: {\n      r: 95,\n      g: 95,\n      b: 135\n    },\n    hsl: {\n      h: 240,\n      s: 17,\n      l: 45\n    },\n    name: \"MediumPurple4\"\n  },\n  {\n    colorId: 61,\n    hexString: \"#5f5faf\",\n    rgb: {\n      r: 95,\n      g: 95,\n      b: 175\n    },\n    hsl: {\n      h: 240,\n      s: 33,\n      l: 52\n    },\n    name: \"SlateBlue3\"\n  },\n  {\n    colorId: 62,\n    hexString: \"#5f5fd7\",\n    rgb: {\n      r: 95,\n      g: 95,\n      b: 215\n    },\n    hsl: {\n      h: 240,\n      s: 60,\n      l: 60\n    },\n    name: \"SlateBlue3\"\n  },\n  {\n    colorId: 63,\n    hexString: \"#5f5fff\",\n    rgb: {\n      r: 95,\n      g: 95,\n      b: 255\n    },\n    hsl: {\n      h: 240,\n      s: 100,\n      l: 68\n    },\n    name: \"RoyalBlue1\"\n  },\n  {\n    colorId: 64,\n    hexString: \"#5f8700\",\n    rgb: {\n      r: 95,\n      g: 135,\n      b: 0\n    },\n    hsl: {\n      h: 77.7777777777778,\n      s: 100,\n      l: 26\n    },\n    name: \"Chartreuse4\"\n  },\n  {\n    colorId: 65,\n    hexString: \"#5f875f\",\n    rgb: {\n      r: 95,\n      g: 135,\n      b: 95\n    },\n    hsl: {\n      h: 120,\n      s: 17,\n      l: 45\n    },\n    name: \"DarkSeaGreen4\"\n  },\n  {\n    colorId: 66,\n    hexString: \"#5f8787\",\n    rgb: {\n      r: 95,\n      g: 135,\n      b: 135\n    },\n    hsl: {\n      h: 180,\n      s: 17,\n      l: 45\n    },\n    name: \"PaleTurquoise4\"\n  },\n  {\n    colorId: 67,\n    hexString: \"#5f87af\",\n    rgb: {\n      r: 95,\n      g: 135,\n      b: 175\n    },\n    hsl: {\n      h: 210,\n      s: 33,\n      l: 52\n    },\n    name: \"SteelBlue\"\n  },\n  {\n    colorId: 68,\n    hexString: \"#5f87d7\",\n    rgb: {\n      r: 95,\n      g: 135,\n      b: 215\n    },\n    hsl: {\n      h: 220,\n      s: 60,\n      l: 60\n    },\n    name: \"SteelBlue3\"\n  },\n  {\n    colorId: 69,\n    hexString: \"#5f87ff\",\n    rgb: {\n      r: 95,\n      g: 135,\n      b: 255\n    },\n    hsl: {\n      h: 225,\n      s: 100,\n      l: 68\n    },\n    name: \"CornflowerBlue\"\n  },\n  {\n    colorId: 70,\n    hexString: \"#5faf00\",\n    rgb: {\n      r: 95,\n      g: 175,\n      b: 0\n    },\n    hsl: {\n      h: 87.4285714285714,\n      s: 100,\n      l: 34\n    },\n    name: \"Chartreuse3\"\n  },\n  {\n    colorId: 71,\n    hexString: \"#5faf5f\",\n    rgb: {\n      r: 95,\n      g: 175,\n      b: 95\n    },\n    hsl: {\n      h: 120,\n      s: 33,\n      l: 52\n    },\n    name: \"DarkSeaGreen4\"\n  },\n  {\n    colorId: 72,\n    hexString: \"#5faf87\",\n    rgb: {\n      r: 95,\n      g: 175,\n      b: 135\n    },\n    hsl: {\n      h: 150,\n      s: 33,\n      l: 52\n    },\n    name: \"CadetBlue\"\n  },\n  {\n    colorId: 73,\n    hexString: \"#5fafaf\",\n    rgb: {\n      r: 95,\n      g: 175,\n      b: 175\n    },\n    hsl: {\n      h: 180,\n      s: 33,\n      l: 52\n    },\n    name: \"CadetBlue\"\n  },\n  {\n    colorId: 74,\n    hexString: \"#5fafd7\",\n    rgb: {\n      r: 95,\n      g: 175,\n      b: 215\n    },\n    hsl: {\n      h: 200,\n      s: 60,\n      l: 60\n    },\n    name: \"SkyBlue3\"\n  },\n  {\n    colorId: 75,\n    hexString: \"#5fafff\",\n    rgb: {\n      r: 95,\n      g: 175,\n      b: 255\n    },\n    hsl: {\n      h: 210,\n      s: 100,\n      l: 68\n    },\n    name: \"SteelBlue1\"\n  },\n  {\n    colorId: 76,\n    hexString: \"#5fd700\",\n    rgb: {\n      r: 95,\n      g: 215,\n      b: 0\n    },\n    hsl: {\n      h: 93.4883720930233,\n      s: 100,\n      l: 42\n    },\n    name: \"Chartreuse3\"\n  },\n  {\n    colorId: 77,\n    hexString: \"#5fd75f\",\n    rgb: {\n      r: 95,\n      g: 215,\n      b: 95\n    },\n    hsl: {\n      h: 120,\n      s: 60,\n      l: 60\n    },\n    name: \"PaleGreen3\"\n  },\n  {\n    colorId: 78,\n    hexString: \"#5fd787\",\n    rgb: {\n      r: 95,\n      g: 215,\n      b: 135\n    },\n    hsl: {\n      h: 140,\n      s: 60,\n      l: 60\n    },\n    name: \"SeaGreen3\"\n  },\n  {\n    colorId: 79,\n    hexString: \"#5fd7af\",\n    rgb: {\n      r: 95,\n      g: 215,\n      b: 175\n    },\n    hsl: {\n      h: 160,\n      s: 60,\n      l: 60\n    },\n    name: \"Aquamarine3\"\n  },\n  {\n    colorId: 80,\n    hexString: \"#5fd7d7\",\n    rgb: {\n      r: 95,\n      g: 215,\n      b: 215\n    },\n    hsl: {\n      h: 180,\n      s: 60,\n      l: 60\n    },\n    name: \"MediumTurquoise\"\n  },\n  {\n    colorId: 81,\n    hexString: \"#5fd7ff\",\n    rgb: {\n      r: 95,\n      g: 215,\n      b: 255\n    },\n    hsl: {\n      h: 195,\n      s: 100,\n      l: 68\n    },\n    name: \"SteelBlue1\"\n  },\n  {\n    colorId: 82,\n    hexString: \"#5fff00\",\n    rgb: {\n      r: 95,\n      g: 255,\n      b: 0\n    },\n    hsl: {\n      h: 97.6470588235294,\n      s: 100,\n      l: 50\n    },\n    name: \"Chartreuse2\"\n  },\n  {\n    colorId: 83,\n    hexString: \"#5fff5f\",\n    rgb: {\n      r: 95,\n      g: 255,\n      b: 95\n    },\n    hsl: {\n      h: 120,\n      s: 100,\n      l: 68\n    },\n    name: \"SeaGreen2\"\n  },\n  {\n    colorId: 84,\n    hexString: \"#5fff87\",\n    rgb: {\n      r: 95,\n      g: 255,\n      b: 135\n    },\n    hsl: {\n      h: 135,\n      s: 100,\n      l: 68\n    },\n    name: \"SeaGreen1\"\n  },\n  {\n    colorId: 85,\n    hexString: \"#5fffaf\",\n    rgb: {\n      r: 95,\n      g: 255,\n      b: 175\n    },\n    hsl: {\n      h: 150,\n      s: 100,\n      l: 68\n    },\n    name: \"SeaGreen1\"\n  },\n  {\n    colorId: 86,\n    hexString: \"#5fffd7\",\n    rgb: {\n      r: 95,\n      g: 255,\n      b: 215\n    },\n    hsl: {\n      h: 165,\n      s: 100,\n      l: 68\n    },\n    name: \"Aquamarine1\"\n  },\n  {\n    colorId: 87,\n    hexString: \"#5fffff\",\n    rgb: {\n      r: 95,\n      g: 255,\n      b: 255\n    },\n    hsl: {\n      h: 180,\n      s: 100,\n      l: 68\n    },\n    name: \"DarkSlateGray2\"\n  },\n  {\n    colorId: 88,\n    hexString: \"#870000\",\n    rgb: {\n      r: 135,\n      g: 0,\n      b: 0\n    },\n    hsl: {\n      h: 0,\n      s: 100,\n      l: 26\n    },\n    name: \"DarkRed\"\n  },\n  {\n    colorId: 89,\n    hexString: \"#87005f\",\n    rgb: {\n      r: 135,\n      g: 0,\n      b: 95\n    },\n    hsl: {\n      h: 317.777777777778,\n      s: 100,\n      l: 26\n    },\n    name: \"DeepPink4\"\n  },\n  {\n    colorId: 90,\n    hexString: \"#870087\",\n    rgb: {\n      r: 135,\n      g: 0,\n      b: 135\n    },\n    hsl: {\n      h: 300,\n      s: 100,\n      l: 26\n    },\n    name: \"DarkMagenta\"\n  },\n  {\n    colorId: 91,\n    hexString: \"#8700af\",\n    rgb: {\n      r: 135,\n      g: 0,\n      b: 175\n    },\n    hsl: {\n      h: 286.285714285714,\n      s: 100,\n      l: 34\n    },\n    name: \"DarkMagenta\"\n  },\n  {\n    colorId: 92,\n    hexString: \"#8700d7\",\n    rgb: {\n      r: 135,\n      g: 0,\n      b: 215\n    },\n    hsl: {\n      h: 277.674418604651,\n      s: 100,\n      l: 42\n    },\n    name: \"DarkViolet\"\n  },\n  {\n    colorId: 93,\n    hexString: \"#8700ff\",\n    rgb: {\n      r: 135,\n      g: 0,\n      b: 255\n    },\n    hsl: {\n      h: 271.764705882353,\n      s: 100,\n      l: 50\n    },\n    name: \"Purple\"\n  },\n  {\n    colorId: 94,\n    hexString: \"#875f00\",\n    rgb: {\n      r: 135,\n      g: 95,\n      b: 0\n    },\n    hsl: {\n      h: 42.2222222222222,\n      s: 100,\n      l: 26\n    },\n    name: \"Orange4\"\n  },\n  {\n    colorId: 95,\n    hexString: \"#875f5f\",\n    rgb: {\n      r: 135,\n      g: 95,\n      b: 95\n    },\n    hsl: {\n      h: 0,\n      s: 17,\n      l: 45\n    },\n    name: \"LightPink4\"\n  },\n  {\n    colorId: 96,\n    hexString: \"#875f87\",\n    rgb: {\n      r: 135,\n      g: 95,\n      b: 135\n    },\n    hsl: {\n      h: 300,\n      s: 17,\n      l: 45\n    },\n    name: \"Plum4\"\n  },\n  {\n    colorId: 97,\n    hexString: \"#875faf\",\n    rgb: {\n      r: 135,\n      g: 95,\n      b: 175\n    },\n    hsl: {\n      h: 270,\n      s: 33,\n      l: 52\n    },\n    name: \"MediumPurple3\"\n  },\n  {\n    colorId: 98,\n    hexString: \"#875fd7\",\n    rgb: {\n      r: 135,\n      g: 95,\n      b: 215\n    },\n    hsl: {\n      h: 260,\n      s: 60,\n      l: 60\n    },\n    name: \"MediumPurple3\"\n  },\n  {\n    colorId: 99,\n    hexString: \"#875fff\",\n    rgb: {\n      r: 135,\n      g: 95,\n      b: 255\n    },\n    hsl: {\n      h: 255,\n      s: 100,\n      l: 68\n    },\n    name: \"SlateBlue1\"\n  },\n  {\n    colorId: 100,\n    hexString: \"#878700\",\n    rgb: {\n      r: 135,\n      g: 135,\n      b: 0\n    },\n    hsl: {\n      h: 60,\n      s: 100,\n      l: 26\n    },\n    name: \"Yellow4\"\n  },\n  {\n    colorId: 101,\n    hexString: \"#87875f\",\n    rgb: {\n      r: 135,\n      g: 135,\n      b: 95\n    },\n    hsl: {\n      h: 60,\n      s: 17,\n      l: 45\n    },\n    name: \"Wheat4\"\n  },\n  {\n    colorId: 102,\n    hexString: \"#878787\",\n    rgb: {\n      r: 135,\n      g: 135,\n      b: 135\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 52\n    },\n    name: \"Grey53\"\n  },\n  {\n    colorId: 103,\n    hexString: \"#8787af\",\n    rgb: {\n      r: 135,\n      g: 135,\n      b: 175\n    },\n    hsl: {\n      h: 240,\n      s: 20,\n      l: 60\n    },\n    name: \"LightSlateGrey\"\n  },\n  {\n    colorId: 104,\n    hexString: \"#8787d7\",\n    rgb: {\n      r: 135,\n      g: 135,\n      b: 215\n    },\n    hsl: {\n      h: 240,\n      s: 50,\n      l: 68\n    },\n    name: \"MediumPurple\"\n  },\n  {\n    colorId: 105,\n    hexString: \"#8787ff\",\n    rgb: {\n      r: 135,\n      g: 135,\n      b: 255\n    },\n    hsl: {\n      h: 240,\n      s: 100,\n      l: 76\n    },\n    name: \"LightSlateBlue\"\n  },\n  {\n    colorId: 106,\n    hexString: \"#87af00\",\n    rgb: {\n      r: 135,\n      g: 175,\n      b: 0\n    },\n    hsl: {\n      h: 73.7142857142857,\n      s: 100,\n      l: 34\n    },\n    name: \"Yellow4\"\n  },\n  {\n    colorId: 107,\n    hexString: \"#87af5f\",\n    rgb: {\n      r: 135,\n      g: 175,\n      b: 95\n    },\n    hsl: {\n      h: 90,\n      s: 33,\n      l: 52\n    },\n    name: \"DarkOliveGreen3\"\n  },\n  {\n    colorId: 108,\n    hexString: \"#87af87\",\n    rgb: {\n      r: 135,\n      g: 175,\n      b: 135\n    },\n    hsl: {\n      h: 120,\n      s: 20,\n      l: 60\n    },\n    name: \"DarkSeaGreen\"\n  },\n  {\n    colorId: 109,\n    hexString: \"#87afaf\",\n    rgb: {\n      r: 135,\n      g: 175,\n      b: 175\n    },\n    hsl: {\n      h: 180,\n      s: 20,\n      l: 60\n    },\n    name: \"LightSkyBlue3\"\n  },\n  {\n    colorId: 110,\n    hexString: \"#87afd7\",\n    rgb: {\n      r: 135,\n      g: 175,\n      b: 215\n    },\n    hsl: {\n      h: 210,\n      s: 50,\n      l: 68\n    },\n    name: \"LightSkyBlue3\"\n  },\n  {\n    colorId: 111,\n    hexString: \"#87afff\",\n    rgb: {\n      r: 135,\n      g: 175,\n      b: 255\n    },\n    hsl: {\n      h: 220,\n      s: 100,\n      l: 76\n    },\n    name: \"SkyBlue2\"\n  },\n  {\n    colorId: 112,\n    hexString: \"#87d700\",\n    rgb: {\n      r: 135,\n      g: 215,\n      b: 0\n    },\n    hsl: {\n      h: 82.3255813953488,\n      s: 100,\n      l: 42\n    },\n    name: \"Chartreuse2\"\n  },\n  {\n    colorId: 113,\n    hexString: \"#87d75f\",\n    rgb: {\n      r: 135,\n      g: 215,\n      b: 95\n    },\n    hsl: {\n      h: 100,\n      s: 60,\n      l: 60\n    },\n    name: \"DarkOliveGreen3\"\n  },\n  {\n    colorId: 114,\n    hexString: \"#87d787\",\n    rgb: {\n      r: 135,\n      g: 215,\n      b: 135\n    },\n    hsl: {\n      h: 120,\n      s: 50,\n      l: 68\n    },\n    name: \"PaleGreen3\"\n  },\n  {\n    colorId: 115,\n    hexString: \"#87d7af\",\n    rgb: {\n      r: 135,\n      g: 215,\n      b: 175\n    },\n    hsl: {\n      h: 150,\n      s: 50,\n      l: 68\n    },\n    name: \"DarkSeaGreen3\"\n  },\n  {\n    colorId: 116,\n    hexString: \"#87d7d7\",\n    rgb: {\n      r: 135,\n      g: 215,\n      b: 215\n    },\n    hsl: {\n      h: 180,\n      s: 50,\n      l: 68\n    },\n    name: \"DarkSlateGray3\"\n  },\n  {\n    colorId: 117,\n    hexString: \"#87d7ff\",\n    rgb: {\n      r: 135,\n      g: 215,\n      b: 255\n    },\n    hsl: {\n      h: 200,\n      s: 100,\n      l: 76\n    },\n    name: \"SkyBlue1\"\n  },\n  {\n    colorId: 118,\n    hexString: \"#87ff00\",\n    rgb: {\n      r: 135,\n      g: 255,\n      b: 0\n    },\n    hsl: {\n      h: 88.2352941176471,\n      s: 100,\n      l: 50\n    },\n    name: \"Chartreuse1\"\n  },\n  {\n    colorId: 119,\n    hexString: \"#87ff5f\",\n    rgb: {\n      r: 135,\n      g: 255,\n      b: 95\n    },\n    hsl: {\n      h: 105,\n      s: 100,\n      l: 68\n    },\n    name: \"LightGreen\"\n  },\n  {\n    colorId: 120,\n    hexString: \"#87ff87\",\n    rgb: {\n      r: 135,\n      g: 255,\n      b: 135\n    },\n    hsl: {\n      h: 120,\n      s: 100,\n      l: 76\n    },\n    name: \"LightGreen\"\n  },\n  {\n    colorId: 121,\n    hexString: \"#87ffaf\",\n    rgb: {\n      r: 135,\n      g: 255,\n      b: 175\n    },\n    hsl: {\n      h: 140,\n      s: 100,\n      l: 76\n    },\n    name: \"PaleGreen1\"\n  },\n  {\n    colorId: 122,\n    hexString: \"#87ffd7\",\n    rgb: {\n      r: 135,\n      g: 255,\n      b: 215\n    },\n    hsl: {\n      h: 160,\n      s: 100,\n      l: 76\n    },\n    name: \"Aquamarine1\"\n  },\n  {\n    colorId: 123,\n    hexString: \"#87ffff\",\n    rgb: {\n      r: 135,\n      g: 255,\n      b: 255\n    },\n    hsl: {\n      h: 180,\n      s: 100,\n      l: 76\n    },\n    name: \"DarkSlateGray1\"\n  },\n  {\n    colorId: 124,\n    hexString: \"#af0000\",\n    rgb: {\n      r: 175,\n      g: 0,\n      b: 0\n    },\n    hsl: {\n      h: 0,\n      s: 100,\n      l: 34\n    },\n    name: \"Red3\"\n  },\n  {\n    colorId: 125,\n    hexString: \"#af005f\",\n    rgb: {\n      r: 175,\n      g: 0,\n      b: 95\n    },\n    hsl: {\n      h: 327.428571428571,\n      s: 100,\n      l: 34\n    },\n    name: \"DeepPink4\"\n  },\n  {\n    colorId: 126,\n    hexString: \"#af0087\",\n    rgb: {\n      r: 175,\n      g: 0,\n      b: 135\n    },\n    hsl: {\n      h: 313.714285714286,\n      s: 100,\n      l: 34\n    },\n    name: \"MediumVioletRed\"\n  },\n  {\n    colorId: 127,\n    hexString: \"#af00af\",\n    rgb: {\n      r: 175,\n      g: 0,\n      b: 175\n    },\n    hsl: {\n      h: 300,\n      s: 100,\n      l: 34\n    },\n    name: \"Magenta3\"\n  },\n  {\n    colorId: 128,\n    hexString: \"#af00d7\",\n    rgb: {\n      r: 175,\n      g: 0,\n      b: 215\n    },\n    hsl: {\n      h: 288.837209302326,\n      s: 100,\n      l: 42\n    },\n    name: \"DarkViolet\"\n  },\n  {\n    colorId: 129,\n    hexString: \"#af00ff\",\n    rgb: {\n      r: 175,\n      g: 0,\n      b: 255\n    },\n    hsl: {\n      h: 281.176470588235,\n      s: 100,\n      l: 50\n    },\n    name: \"Purple\"\n  },\n  {\n    colorId: 130,\n    hexString: \"#af5f00\",\n    rgb: {\n      r: 175,\n      g: 95,\n      b: 0\n    },\n    hsl: {\n      h: 32.5714285714286,\n      s: 100,\n      l: 34\n    },\n    name: \"DarkOrange3\"\n  },\n  {\n    colorId: 131,\n    hexString: \"#af5f5f\",\n    rgb: {\n      r: 175,\n      g: 95,\n      b: 95\n    },\n    hsl: {\n      h: 0,\n      s: 33,\n      l: 52\n    },\n    name: \"IndianRed\"\n  },\n  {\n    colorId: 132,\n    hexString: \"#af5f87\",\n    rgb: {\n      r: 175,\n      g: 95,\n      b: 135\n    },\n    hsl: {\n      h: 330,\n      s: 33,\n      l: 52\n    },\n    name: \"HotPink3\"\n  },\n  {\n    colorId: 133,\n    hexString: \"#af5faf\",\n    rgb: {\n      r: 175,\n      g: 95,\n      b: 175\n    },\n    hsl: {\n      h: 300,\n      s: 33,\n      l: 52\n    },\n    name: \"MediumOrchid3\"\n  },\n  {\n    colorId: 134,\n    hexString: \"#af5fd7\",\n    rgb: {\n      r: 175,\n      g: 95,\n      b: 215\n    },\n    hsl: {\n      h: 280,\n      s: 60,\n      l: 60\n    },\n    name: \"MediumOrchid\"\n  },\n  {\n    colorId: 135,\n    hexString: \"#af5fff\",\n    rgb: {\n      r: 175,\n      g: 95,\n      b: 255\n    },\n    hsl: {\n      h: 270,\n      s: 100,\n      l: 68\n    },\n    name: \"MediumPurple2\"\n  },\n  {\n    colorId: 136,\n    hexString: \"#af8700\",\n    rgb: {\n      r: 175,\n      g: 135,\n      b: 0\n    },\n    hsl: {\n      h: 46.2857142857143,\n      s: 100,\n      l: 34\n    },\n    name: \"DarkGoldenrod\"\n  },\n  {\n    colorId: 137,\n    hexString: \"#af875f\",\n    rgb: {\n      r: 175,\n      g: 135,\n      b: 95\n    },\n    hsl: {\n      h: 30,\n      s: 33,\n      l: 52\n    },\n    name: \"LightSalmon3\"\n  },\n  {\n    colorId: 138,\n    hexString: \"#af8787\",\n    rgb: {\n      r: 175,\n      g: 135,\n      b: 135\n    },\n    hsl: {\n      h: 0,\n      s: 20,\n      l: 60\n    },\n    name: \"RosyBrown\"\n  },\n  {\n    colorId: 139,\n    hexString: \"#af87af\",\n    rgb: {\n      r: 175,\n      g: 135,\n      b: 175\n    },\n    hsl: {\n      h: 300,\n      s: 20,\n      l: 60\n    },\n    name: \"Grey63\"\n  },\n  {\n    colorId: 140,\n    hexString: \"#af87d7\",\n    rgb: {\n      r: 175,\n      g: 135,\n      b: 215\n    },\n    hsl: {\n      h: 270,\n      s: 50,\n      l: 68\n    },\n    name: \"MediumPurple2\"\n  },\n  {\n    colorId: 141,\n    hexString: \"#af87ff\",\n    rgb: {\n      r: 175,\n      g: 135,\n      b: 255\n    },\n    hsl: {\n      h: 260,\n      s: 100,\n      l: 76\n    },\n    name: \"MediumPurple1\"\n  },\n  {\n    colorId: 142,\n    hexString: \"#afaf00\",\n    rgb: {\n      r: 175,\n      g: 175,\n      b: 0\n    },\n    hsl: {\n      h: 60,\n      s: 100,\n      l: 34\n    },\n    name: \"Gold3\"\n  },\n  {\n    colorId: 143,\n    hexString: \"#afaf5f\",\n    rgb: {\n      r: 175,\n      g: 175,\n      b: 95\n    },\n    hsl: {\n      h: 60,\n      s: 33,\n      l: 52\n    },\n    name: \"DarkKhaki\"\n  },\n  {\n    colorId: 144,\n    hexString: \"#afaf87\",\n    rgb: {\n      r: 175,\n      g: 175,\n      b: 135\n    },\n    hsl: {\n      h: 60,\n      s: 20,\n      l: 60\n    },\n    name: \"NavajoWhite3\"\n  },\n  {\n    colorId: 145,\n    hexString: \"#afafaf\",\n    rgb: {\n      r: 175,\n      g: 175,\n      b: 175\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 68\n    },\n    name: \"Grey69\"\n  },\n  {\n    colorId: 146,\n    hexString: \"#afafd7\",\n    rgb: {\n      r: 175,\n      g: 175,\n      b: 215\n    },\n    hsl: {\n      h: 240,\n      s: 33,\n      l: 76\n    },\n    name: \"LightSteelBlue3\"\n  },\n  {\n    colorId: 147,\n    hexString: \"#afafff\",\n    rgb: {\n      r: 175,\n      g: 175,\n      b: 255\n    },\n    hsl: {\n      h: 240,\n      s: 100,\n      l: 84\n    },\n    name: \"LightSteelBlue\"\n  },\n  {\n    colorId: 148,\n    hexString: \"#afd700\",\n    rgb: {\n      r: 175,\n      g: 215,\n      b: 0\n    },\n    hsl: {\n      h: 71.1627906976744,\n      s: 100,\n      l: 42\n    },\n    name: \"Yellow3\"\n  },\n  {\n    colorId: 149,\n    hexString: \"#afd75f\",\n    rgb: {\n      r: 175,\n      g: 215,\n      b: 95\n    },\n    hsl: {\n      h: 80,\n      s: 60,\n      l: 60\n    },\n    name: \"DarkOliveGreen3\"\n  },\n  {\n    colorId: 150,\n    hexString: \"#afd787\",\n    rgb: {\n      r: 175,\n      g: 215,\n      b: 135\n    },\n    hsl: {\n      h: 90,\n      s: 50,\n      l: 68\n    },\n    name: \"DarkSeaGreen3\"\n  },\n  {\n    colorId: 151,\n    hexString: \"#afd7af\",\n    rgb: {\n      r: 175,\n      g: 215,\n      b: 175\n    },\n    hsl: {\n      h: 120,\n      s: 33,\n      l: 76\n    },\n    name: \"DarkSeaGreen2\"\n  },\n  {\n    colorId: 152,\n    hexString: \"#afd7d7\",\n    rgb: {\n      r: 175,\n      g: 215,\n      b: 215\n    },\n    hsl: {\n      h: 180,\n      s: 33,\n      l: 76\n    },\n    name: \"LightCyan3\"\n  },\n  {\n    colorId: 153,\n    hexString: \"#afd7ff\",\n    rgb: {\n      r: 175,\n      g: 215,\n      b: 255\n    },\n    hsl: {\n      h: 210,\n      s: 100,\n      l: 84\n    },\n    name: \"LightSkyBlue1\"\n  },\n  {\n    colorId: 154,\n    hexString: \"#afff00\",\n    rgb: {\n      r: 175,\n      g: 255,\n      b: 0\n    },\n    hsl: {\n      h: 78.8235294117647,\n      s: 100,\n      l: 50\n    },\n    name: \"GreenYellow\"\n  },\n  {\n    colorId: 155,\n    hexString: \"#afff5f\",\n    rgb: {\n      r: 175,\n      g: 255,\n      b: 95\n    },\n    hsl: {\n      h: 90,\n      s: 100,\n      l: 68\n    },\n    name: \"DarkOliveGreen2\"\n  },\n  {\n    colorId: 156,\n    hexString: \"#afff87\",\n    rgb: {\n      r: 175,\n      g: 255,\n      b: 135\n    },\n    hsl: {\n      h: 100,\n      s: 100,\n      l: 76\n    },\n    name: \"PaleGreen1\"\n  },\n  {\n    colorId: 157,\n    hexString: \"#afffaf\",\n    rgb: {\n      r: 175,\n      g: 255,\n      b: 175\n    },\n    hsl: {\n      h: 120,\n      s: 100,\n      l: 84\n    },\n    name: \"DarkSeaGreen2\"\n  },\n  {\n    colorId: 158,\n    hexString: \"#afffd7\",\n    rgb: {\n      r: 175,\n      g: 255,\n      b: 215\n    },\n    hsl: {\n      h: 150,\n      s: 100,\n      l: 84\n    },\n    name: \"DarkSeaGreen1\"\n  },\n  {\n    colorId: 159,\n    hexString: \"#afffff\",\n    rgb: {\n      r: 175,\n      g: 255,\n      b: 255\n    },\n    hsl: {\n      h: 180,\n      s: 100,\n      l: 84\n    },\n    name: \"PaleTurquoise1\"\n  },\n  {\n    colorId: 160,\n    hexString: \"#d70000\",\n    rgb: {\n      r: 215,\n      g: 0,\n      b: 0\n    },\n    hsl: {\n      h: 0,\n      s: 100,\n      l: 42\n    },\n    name: \"Red3\"\n  },\n  {\n    colorId: 161,\n    hexString: \"#d7005f\",\n    rgb: {\n      r: 215,\n      g: 0,\n      b: 95\n    },\n    hsl: {\n      h: 333.488372093023,\n      s: 100,\n      l: 42\n    },\n    name: \"DeepPink3\"\n  },\n  {\n    colorId: 162,\n    hexString: \"#d70087\",\n    rgb: {\n      r: 215,\n      g: 0,\n      b: 135\n    },\n    hsl: {\n      h: 322.325581395349,\n      s: 100,\n      l: 42\n    },\n    name: \"DeepPink3\"\n  },\n  {\n    colorId: 163,\n    hexString: \"#d700af\",\n    rgb: {\n      r: 215,\n      g: 0,\n      b: 175\n    },\n    hsl: {\n      h: 311.162790697674,\n      s: 100,\n      l: 42\n    },\n    name: \"Magenta3\"\n  },\n  {\n    colorId: 164,\n    hexString: \"#d700d7\",\n    rgb: {\n      r: 215,\n      g: 0,\n      b: 215\n    },\n    hsl: {\n      h: 300,\n      s: 100,\n      l: 42\n    },\n    name: \"Magenta3\"\n  },\n  {\n    colorId: 165,\n    hexString: \"#d700ff\",\n    rgb: {\n      r: 215,\n      g: 0,\n      b: 255\n    },\n    hsl: {\n      h: 290.588235294118,\n      s: 100,\n      l: 50\n    },\n    name: \"Magenta2\"\n  },\n  {\n    colorId: 166,\n    hexString: \"#d75f00\",\n    rgb: {\n      r: 215,\n      g: 95,\n      b: 0\n    },\n    hsl: {\n      h: 26.5116279069767,\n      s: 100,\n      l: 42\n    },\n    name: \"DarkOrange3\"\n  },\n  {\n    colorId: 167,\n    hexString: \"#d75f5f\",\n    rgb: {\n      r: 215,\n      g: 95,\n      b: 95\n    },\n    hsl: {\n      h: 0,\n      s: 60,\n      l: 60\n    },\n    name: \"IndianRed\"\n  },\n  {\n    colorId: 168,\n    hexString: \"#d75f87\",\n    rgb: {\n      r: 215,\n      g: 95,\n      b: 135\n    },\n    hsl: {\n      h: 340,\n      s: 60,\n      l: 60\n    },\n    name: \"HotPink3\"\n  },\n  {\n    colorId: 169,\n    hexString: \"#d75faf\",\n    rgb: {\n      r: 215,\n      g: 95,\n      b: 175\n    },\n    hsl: {\n      h: 320,\n      s: 60,\n      l: 60\n    },\n    name: \"HotPink2\"\n  },\n  {\n    colorId: 170,\n    hexString: \"#d75fd7\",\n    rgb: {\n      r: 215,\n      g: 95,\n      b: 215\n    },\n    hsl: {\n      h: 300,\n      s: 60,\n      l: 60\n    },\n    name: \"Orchid\"\n  },\n  {\n    colorId: 171,\n    hexString: \"#d75fff\",\n    rgb: {\n      r: 215,\n      g: 95,\n      b: 255\n    },\n    hsl: {\n      h: 285,\n      s: 100,\n      l: 68\n    },\n    name: \"MediumOrchid1\"\n  },\n  {\n    colorId: 172,\n    hexString: \"#d78700\",\n    rgb: {\n      r: 215,\n      g: 135,\n      b: 0\n    },\n    hsl: {\n      h: 37.6744186046512,\n      s: 100,\n      l: 42\n    },\n    name: \"Orange3\"\n  },\n  {\n    colorId: 173,\n    hexString: \"#d7875f\",\n    rgb: {\n      r: 215,\n      g: 135,\n      b: 95\n    },\n    hsl: {\n      h: 20,\n      s: 60,\n      l: 60\n    },\n    name: \"LightSalmon3\"\n  },\n  {\n    colorId: 174,\n    hexString: \"#d78787\",\n    rgb: {\n      r: 215,\n      g: 135,\n      b: 135\n    },\n    hsl: {\n      h: 0,\n      s: 50,\n      l: 68\n    },\n    name: \"LightPink3\"\n  },\n  {\n    colorId: 175,\n    hexString: \"#d787af\",\n    rgb: {\n      r: 215,\n      g: 135,\n      b: 175\n    },\n    hsl: {\n      h: 330,\n      s: 50,\n      l: 68\n    },\n    name: \"Pink3\"\n  },\n  {\n    colorId: 176,\n    hexString: \"#d787d7\",\n    rgb: {\n      r: 215,\n      g: 135,\n      b: 215\n    },\n    hsl: {\n      h: 300,\n      s: 50,\n      l: 68\n    },\n    name: \"Plum3\"\n  },\n  {\n    colorId: 177,\n    hexString: \"#d787ff\",\n    rgb: {\n      r: 215,\n      g: 135,\n      b: 255\n    },\n    hsl: {\n      h: 280,\n      s: 100,\n      l: 76\n    },\n    name: \"Violet\"\n  },\n  {\n    colorId: 178,\n    hexString: \"#d7af00\",\n    rgb: {\n      r: 215,\n      g: 175,\n      b: 0\n    },\n    hsl: {\n      h: 48.8372093023256,\n      s: 100,\n      l: 42\n    },\n    name: \"Gold3\"\n  },\n  {\n    colorId: 179,\n    hexString: \"#d7af5f\",\n    rgb: {\n      r: 215,\n      g: 175,\n      b: 95\n    },\n    hsl: {\n      h: 40,\n      s: 60,\n      l: 60\n    },\n    name: \"LightGoldenrod3\"\n  },\n  {\n    colorId: 180,\n    hexString: \"#d7af87\",\n    rgb: {\n      r: 215,\n      g: 175,\n      b: 135\n    },\n    hsl: {\n      h: 30,\n      s: 50,\n      l: 68\n    },\n    name: \"Tan\"\n  },\n  {\n    colorId: 181,\n    hexString: \"#d7afaf\",\n    rgb: {\n      r: 215,\n      g: 175,\n      b: 175\n    },\n    hsl: {\n      h: 0,\n      s: 33,\n      l: 76\n    },\n    name: \"MistyRose3\"\n  },\n  {\n    colorId: 182,\n    hexString: \"#d7afd7\",\n    rgb: {\n      r: 215,\n      g: 175,\n      b: 215\n    },\n    hsl: {\n      h: 300,\n      s: 33,\n      l: 76\n    },\n    name: \"Thistle3\"\n  },\n  {\n    colorId: 183,\n    hexString: \"#d7afff\",\n    rgb: {\n      r: 215,\n      g: 175,\n      b: 255\n    },\n    hsl: {\n      h: 270,\n      s: 100,\n      l: 84\n    },\n    name: \"Plum2\"\n  },\n  {\n    colorId: 184,\n    hexString: \"#d7d700\",\n    rgb: {\n      r: 215,\n      g: 215,\n      b: 0\n    },\n    hsl: {\n      h: 60,\n      s: 100,\n      l: 42\n    },\n    name: \"Yellow3\"\n  },\n  {\n    colorId: 185,\n    hexString: \"#d7d75f\",\n    rgb: {\n      r: 215,\n      g: 215,\n      b: 95\n    },\n    hsl: {\n      h: 60,\n      s: 60,\n      l: 60\n    },\n    name: \"Khaki3\"\n  },\n  {\n    colorId: 186,\n    hexString: \"#d7d787\",\n    rgb: {\n      r: 215,\n      g: 215,\n      b: 135\n    },\n    hsl: {\n      h: 60,\n      s: 50,\n      l: 68\n    },\n    name: \"LightGoldenrod2\"\n  },\n  {\n    colorId: 187,\n    hexString: \"#d7d7af\",\n    rgb: {\n      r: 215,\n      g: 215,\n      b: 175\n    },\n    hsl: {\n      h: 60,\n      s: 33,\n      l: 76\n    },\n    name: \"LightYellow3\"\n  },\n  {\n    colorId: 188,\n    hexString: \"#d7d7d7\",\n    rgb: {\n      r: 215,\n      g: 215,\n      b: 215\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 84\n    },\n    name: \"Grey84\"\n  },\n  {\n    colorId: 189,\n    hexString: \"#d7d7ff\",\n    rgb: {\n      r: 215,\n      g: 215,\n      b: 255\n    },\n    hsl: {\n      h: 240,\n      s: 100,\n      l: 92\n    },\n    name: \"LightSteelBlue1\"\n  },\n  {\n    colorId: 190,\n    hexString: \"#d7ff00\",\n    rgb: {\n      r: 215,\n      g: 255,\n      b: 0\n    },\n    hsl: {\n      h: 69.4117647058823,\n      s: 100,\n      l: 50\n    },\n    name: \"Yellow2\"\n  },\n  {\n    colorId: 191,\n    hexString: \"#d7ff5f\",\n    rgb: {\n      r: 215,\n      g: 255,\n      b: 95\n    },\n    hsl: {\n      h: 75,\n      s: 100,\n      l: 68\n    },\n    name: \"DarkOliveGreen1\"\n  },\n  {\n    colorId: 192,\n    hexString: \"#d7ff87\",\n    rgb: {\n      r: 215,\n      g: 255,\n      b: 135\n    },\n    hsl: {\n      h: 80,\n      s: 100,\n      l: 76\n    },\n    name: \"DarkOliveGreen1\"\n  },\n  {\n    colorId: 193,\n    hexString: \"#d7ffaf\",\n    rgb: {\n      r: 215,\n      g: 255,\n      b: 175\n    },\n    hsl: {\n      h: 90,\n      s: 100,\n      l: 84\n    },\n    name: \"DarkSeaGreen1\"\n  },\n  {\n    colorId: 194,\n    hexString: \"#d7ffd7\",\n    rgb: {\n      r: 215,\n      g: 255,\n      b: 215\n    },\n    hsl: {\n      h: 120,\n      s: 100,\n      l: 92\n    },\n    name: \"Honeydew2\"\n  },\n  {\n    colorId: 195,\n    hexString: \"#d7ffff\",\n    rgb: {\n      r: 215,\n      g: 255,\n      b: 255\n    },\n    hsl: {\n      h: 180,\n      s: 100,\n      l: 92\n    },\n    name: \"LightCyan1\"\n  },\n  {\n    colorId: 196,\n    hexString: \"#ff0000\",\n    rgb: {\n      r: 255,\n      g: 0,\n      b: 0\n    },\n    hsl: {\n      h: 0,\n      s: 100,\n      l: 50\n    },\n    name: \"Red1\"\n  },\n  {\n    colorId: 197,\n    hexString: \"#ff005f\",\n    rgb: {\n      r: 255,\n      g: 0,\n      b: 95\n    },\n    hsl: {\n      h: 337.647058823529,\n      s: 100,\n      l: 50\n    },\n    name: \"DeepPink2\"\n  },\n  {\n    colorId: 198,\n    hexString: \"#ff0087\",\n    rgb: {\n      r: 255,\n      g: 0,\n      b: 135\n    },\n    hsl: {\n      h: 328.235294117647,\n      s: 100,\n      l: 50\n    },\n    name: \"DeepPink1\"\n  },\n  {\n    colorId: 199,\n    hexString: \"#ff00af\",\n    rgb: {\n      r: 255,\n      g: 0,\n      b: 175\n    },\n    hsl: {\n      h: 318.823529411765,\n      s: 100,\n      l: 50\n    },\n    name: \"DeepPink1\"\n  },\n  {\n    colorId: 200,\n    hexString: \"#ff00d7\",\n    rgb: {\n      r: 255,\n      g: 0,\n      b: 215\n    },\n    hsl: {\n      h: 309.411764705882,\n      s: 100,\n      l: 50\n    },\n    name: \"Magenta2\"\n  },\n  {\n    colorId: 201,\n    hexString: \"#ff00ff\",\n    rgb: {\n      r: 255,\n      g: 0,\n      b: 255\n    },\n    hsl: {\n      h: 300,\n      s: 100,\n      l: 50\n    },\n    name: \"Magenta1\"\n  },\n  {\n    colorId: 202,\n    hexString: \"#ff5f00\",\n    rgb: {\n      r: 255,\n      g: 95,\n      b: 0\n    },\n    hsl: {\n      h: 22.3529411764706,\n      s: 100,\n      l: 50\n    },\n    name: \"OrangeRed1\"\n  },\n  {\n    colorId: 203,\n    hexString: \"#ff5f5f\",\n    rgb: {\n      r: 255,\n      g: 95,\n      b: 95\n    },\n    hsl: {\n      h: 0,\n      s: 100,\n      l: 68\n    },\n    name: \"IndianRed1\"\n  },\n  {\n    colorId: 204,\n    hexString: \"#ff5f87\",\n    rgb: {\n      r: 255,\n      g: 95,\n      b: 135\n    },\n    hsl: {\n      h: 345,\n      s: 100,\n      l: 68\n    },\n    name: \"IndianRed1\"\n  },\n  {\n    colorId: 205,\n    hexString: \"#ff5faf\",\n    rgb: {\n      r: 255,\n      g: 95,\n      b: 175\n    },\n    hsl: {\n      h: 330,\n      s: 100,\n      l: 68\n    },\n    name: \"HotPink\"\n  },\n  {\n    colorId: 206,\n    hexString: \"#ff5fd7\",\n    rgb: {\n      r: 255,\n      g: 95,\n      b: 215\n    },\n    hsl: {\n      h: 315,\n      s: 100,\n      l: 68\n    },\n    name: \"HotPink\"\n  },\n  {\n    colorId: 207,\n    hexString: \"#ff5fff\",\n    rgb: {\n      r: 255,\n      g: 95,\n      b: 255\n    },\n    hsl: {\n      h: 300,\n      s: 100,\n      l: 68\n    },\n    name: \"MediumOrchid1\"\n  },\n  {\n    colorId: 208,\n    hexString: \"#ff8700\",\n    rgb: {\n      r: 255,\n      g: 135,\n      b: 0\n    },\n    hsl: {\n      h: 31.7647058823529,\n      s: 100,\n      l: 50\n    },\n    name: \"DarkOrange\"\n  },\n  {\n    colorId: 209,\n    hexString: \"#ff875f\",\n    rgb: {\n      r: 255,\n      g: 135,\n      b: 95\n    },\n    hsl: {\n      h: 15,\n      s: 100,\n      l: 68\n    },\n    name: \"Salmon1\"\n  },\n  {\n    colorId: 210,\n    hexString: \"#ff8787\",\n    rgb: {\n      r: 255,\n      g: 135,\n      b: 135\n    },\n    hsl: {\n      h: 0,\n      s: 100,\n      l: 76\n    },\n    name: \"LightCoral\"\n  },\n  {\n    colorId: 211,\n    hexString: \"#ff87af\",\n    rgb: {\n      r: 255,\n      g: 135,\n      b: 175\n    },\n    hsl: {\n      h: 340,\n      s: 100,\n      l: 76\n    },\n    name: \"PaleVioletRed1\"\n  },\n  {\n    colorId: 212,\n    hexString: \"#ff87d7\",\n    rgb: {\n      r: 255,\n      g: 135,\n      b: 215\n    },\n    hsl: {\n      h: 320,\n      s: 100,\n      l: 76\n    },\n    name: \"Orchid2\"\n  },\n  {\n    colorId: 213,\n    hexString: \"#ff87ff\",\n    rgb: {\n      r: 255,\n      g: 135,\n      b: 255\n    },\n    hsl: {\n      h: 300,\n      s: 100,\n      l: 76\n    },\n    name: \"Orchid1\"\n  },\n  {\n    colorId: 214,\n    hexString: \"#ffaf00\",\n    rgb: {\n      r: 255,\n      g: 175,\n      b: 0\n    },\n    hsl: {\n      h: 41.1764705882353,\n      s: 100,\n      l: 50\n    },\n    name: \"Orange1\"\n  },\n  {\n    colorId: 215,\n    hexString: \"#ffaf5f\",\n    rgb: {\n      r: 255,\n      g: 175,\n      b: 95\n    },\n    hsl: {\n      h: 30,\n      s: 100,\n      l: 68\n    },\n    name: \"SandyBrown\"\n  },\n  {\n    colorId: 216,\n    hexString: \"#ffaf87\",\n    rgb: {\n      r: 255,\n      g: 175,\n      b: 135\n    },\n    hsl: {\n      h: 20,\n      s: 100,\n      l: 76\n    },\n    name: \"LightSalmon1\"\n  },\n  {\n    colorId: 217,\n    hexString: \"#ffafaf\",\n    rgb: {\n      r: 255,\n      g: 175,\n      b: 175\n    },\n    hsl: {\n      h: 0,\n      s: 100,\n      l: 84\n    },\n    name: \"LightPink1\"\n  },\n  {\n    colorId: 218,\n    hexString: \"#ffafd7\",\n    rgb: {\n      r: 255,\n      g: 175,\n      b: 215\n    },\n    hsl: {\n      h: 330,\n      s: 100,\n      l: 84\n    },\n    name: \"Pink1\"\n  },\n  {\n    colorId: 219,\n    hexString: \"#ffafff\",\n    rgb: {\n      r: 255,\n      g: 175,\n      b: 255\n    },\n    hsl: {\n      h: 300,\n      s: 100,\n      l: 84\n    },\n    name: \"Plum1\"\n  },\n  {\n    colorId: 220,\n    hexString: \"#ffd700\",\n    rgb: {\n      r: 255,\n      g: 215,\n      b: 0\n    },\n    hsl: {\n      h: 50.5882352941176,\n      s: 100,\n      l: 50\n    },\n    name: \"Gold1\"\n  },\n  {\n    colorId: 221,\n    hexString: \"#ffd75f\",\n    rgb: {\n      r: 255,\n      g: 215,\n      b: 95\n    },\n    hsl: {\n      h: 45,\n      s: 100,\n      l: 68\n    },\n    name: \"LightGoldenrod2\"\n  },\n  {\n    colorId: 222,\n    hexString: \"#ffd787\",\n    rgb: {\n      r: 255,\n      g: 215,\n      b: 135\n    },\n    hsl: {\n      h: 40,\n      s: 100,\n      l: 76\n    },\n    name: \"LightGoldenrod2\"\n  },\n  {\n    colorId: 223,\n    hexString: \"#ffd7af\",\n    rgb: {\n      r: 255,\n      g: 215,\n      b: 175\n    },\n    hsl: {\n      h: 30,\n      s: 100,\n      l: 84\n    },\n    name: \"NavajoWhite1\"\n  },\n  {\n    colorId: 224,\n    hexString: \"#ffd7d7\",\n    rgb: {\n      r: 255,\n      g: 215,\n      b: 215\n    },\n    hsl: {\n      h: 0,\n      s: 100,\n      l: 92\n    },\n    name: \"MistyRose1\"\n  },\n  {\n    colorId: 225,\n    hexString: \"#ffd7ff\",\n    rgb: {\n      r: 255,\n      g: 215,\n      b: 255\n    },\n    hsl: {\n      h: 300,\n      s: 100,\n      l: 92\n    },\n    name: \"Thistle1\"\n  },\n  {\n    colorId: 226,\n    hexString: \"#ffff00\",\n    rgb: {\n      r: 255,\n      g: 255,\n      b: 0\n    },\n    hsl: {\n      h: 60,\n      s: 100,\n      l: 50\n    },\n    name: \"Yellow1\"\n  },\n  {\n    colorId: 227,\n    hexString: \"#ffff5f\",\n    rgb: {\n      r: 255,\n      g: 255,\n      b: 95\n    },\n    hsl: {\n      h: 60,\n      s: 100,\n      l: 68\n    },\n    name: \"LightGoldenrod1\"\n  },\n  {\n    colorId: 228,\n    hexString: \"#ffff87\",\n    rgb: {\n      r: 255,\n      g: 255,\n      b: 135\n    },\n    hsl: {\n      h: 60,\n      s: 100,\n      l: 76\n    },\n    name: \"Khaki1\"\n  },\n  {\n    colorId: 229,\n    hexString: \"#ffffaf\",\n    rgb: {\n      r: 255,\n      g: 255,\n      b: 175\n    },\n    hsl: {\n      h: 60,\n      s: 100,\n      l: 84\n    },\n    name: \"Wheat1\"\n  },\n  {\n    colorId: 230,\n    hexString: \"#ffffd7\",\n    rgb: {\n      r: 255,\n      g: 255,\n      b: 215\n    },\n    hsl: {\n      h: 60,\n      s: 100,\n      l: 92\n    },\n    name: \"Cornsilk1\"\n  },\n  {\n    colorId: 231,\n    hexString: \"#ffffff\",\n    rgb: {\n      r: 255,\n      g: 255,\n      b: 255\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 100\n    },\n    name: \"Grey100\"\n  },\n  {\n    colorId: 232,\n    hexString: \"#080808\",\n    rgb: {\n      r: 8,\n      g: 8,\n      b: 8\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 3\n    },\n    name: \"Grey3\"\n  },\n  {\n    colorId: 233,\n    hexString: \"#121212\",\n    rgb: {\n      r: 18,\n      g: 18,\n      b: 18\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 7\n    },\n    name: \"Grey7\"\n  },\n  {\n    colorId: 234,\n    hexString: \"#1c1c1c\",\n    rgb: {\n      r: 28,\n      g: 28,\n      b: 28\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 10\n    },\n    name: \"Grey11\"\n  },\n  {\n    colorId: 235,\n    hexString: \"#262626\",\n    rgb: {\n      r: 38,\n      g: 38,\n      b: 38\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 14\n    },\n    name: \"Grey15\"\n  },\n  {\n    colorId: 236,\n    hexString: \"#303030\",\n    rgb: {\n      r: 48,\n      g: 48,\n      b: 48\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 18\n    },\n    name: \"Grey19\"\n  },\n  {\n    colorId: 237,\n    hexString: \"#3a3a3a\",\n    rgb: {\n      r: 58,\n      g: 58,\n      b: 58\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 22\n    },\n    name: \"Grey23\"\n  },\n  {\n    colorId: 238,\n    hexString: \"#444444\",\n    rgb: {\n      r: 68,\n      g: 68,\n      b: 68\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 26\n    },\n    name: \"Grey27\"\n  },\n  {\n    colorId: 239,\n    hexString: \"#4e4e4e\",\n    rgb: {\n      r: 78,\n      g: 78,\n      b: 78\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 30\n    },\n    name: \"Grey30\"\n  },\n  {\n    colorId: 240,\n    hexString: \"#585858\",\n    rgb: {\n      r: 88,\n      g: 88,\n      b: 88\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 34\n    },\n    name: \"Grey35\"\n  },\n  {\n    colorId: 241,\n    hexString: \"#626262\",\n    rgb: {\n      r: 98,\n      g: 98,\n      b: 98\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 37\n    },\n    name: \"Grey39\"\n  },\n  {\n    colorId: 242,\n    hexString: \"#6c6c6c\",\n    rgb: {\n      r: 108,\n      g: 108,\n      b: 108\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 40\n    },\n    name: \"Grey42\"\n  },\n  {\n    colorId: 243,\n    hexString: \"#767676\",\n    rgb: {\n      r: 118,\n      g: 118,\n      b: 118\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 46\n    },\n    name: \"Grey46\"\n  },\n  {\n    colorId: 244,\n    hexString: \"#808080\",\n    rgb: {\n      r: 128,\n      g: 128,\n      b: 128\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 50\n    },\n    name: \"Grey50\"\n  },\n  {\n    colorId: 245,\n    hexString: \"#8a8a8a\",\n    rgb: {\n      r: 138,\n      g: 138,\n      b: 138\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 54\n    },\n    name: \"Grey54\"\n  },\n  {\n    colorId: 246,\n    hexString: \"#949494\",\n    rgb: {\n      r: 148,\n      g: 148,\n      b: 148\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 58\n    },\n    name: \"Grey58\"\n  },\n  {\n    colorId: 247,\n    hexString: \"#9e9e9e\",\n    rgb: {\n      r: 158,\n      g: 158,\n      b: 158\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 61\n    },\n    name: \"Grey62\"\n  },\n  {\n    colorId: 248,\n    hexString: \"#a8a8a8\",\n    rgb: {\n      r: 168,\n      g: 168,\n      b: 168\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 65\n    },\n    name: \"Grey66\"\n  },\n  {\n    colorId: 249,\n    hexString: \"#b2b2b2\",\n    rgb: {\n      r: 178,\n      g: 178,\n      b: 178\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 69\n    },\n    name: \"Grey70\"\n  },\n  {\n    colorId: 250,\n    hexString: \"#bcbcbc\",\n    rgb: {\n      r: 188,\n      g: 188,\n      b: 188\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 73\n    },\n    name: \"Grey74\"\n  },\n  {\n    colorId: 251,\n    hexString: \"#c6c6c6\",\n    rgb: {\n      r: 198,\n      g: 198,\n      b: 198\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 77\n    },\n    name: \"Grey78\"\n  },\n  {\n    colorId: 252,\n    hexString: \"#d0d0d0\",\n    rgb: {\n      r: 208,\n      g: 208,\n      b: 208\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 81\n    },\n    name: \"Grey82\"\n  },\n  {\n    colorId: 253,\n    hexString: \"#dadada\",\n    rgb: {\n      r: 218,\n      g: 218,\n      b: 218\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 85\n    },\n    name: \"Grey85\"\n  },\n  {\n    colorId: 254,\n    hexString: \"#e4e4e4\",\n    rgb: {\n      r: 228,\n      g: 228,\n      b: 228\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 89\n    },\n    name: \"Grey89\"\n  },\n  {\n    colorId: 255,\n    hexString: \"#eeeeee\",\n    rgb: {\n      r: 238,\n      g: 238,\n      b: 238\n    },\n    hsl: {\n      h: 0,\n      s: 0,\n      l: 93\n    },\n    name: \"Grey93\"\n  }\n];\n\nexport { colorArr };\n","import { colorArr } from '../constant/color.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nconst BLACK_BACKGROUND_RGBA = {\n  r: 0,\n  g: 0,\n  b: 0,\n  a: 255\n};\nconst BLACK_BACKGROUND_RGBA_WITH_OPACITY = {\n  r: 0,\n  g: 0,\n  b: 0,\n  a: 125\n};\nconst TRANSPARENCY_BACKGROUND_RGBA = {\n  r: 0,\n  g: 0,\n  b: 0,\n  a: 0\n};\nconst _ImgConversionUtils = class {\n  static createCanvas(imgNode) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = imgNode.width;\n    canvas.height = imgNode.height;\n    const ctx = canvas.getContext(\"2d\");\n    return {canvas, ctx};\n  }\n  static createImgDom(src) {\n    const imgNode = new Image();\n    imgNode.crossOrigin = \"Anonymous\";\n    imgNode.src = src;\n    return new Promise((resolve) => {\n      imgNode.onload = () => {\n        resolve(imgNode);\n      };\n      imgNode.onerror = (e) => {\n        console.error(e);\n      };\n    });\n  }\n  static renderColorByMask({\n    renderCanvas,\n    imgData,\n    customColor,\n    hiddenUndefinedColor = false,\n    backgroundRGBA = BLACK_BACKGROUND_RGBA_WITH_OPACITY,\n    basicImgCanvas\n  }) {\n    const ctx = renderCanvas.getContext(\"2d\");\n    if (ctx) {\n      const opacity = 0.3;\n      const getColor = ({r}) => {\n        var _a;\n        const colorByCustom = (_a = customColor == null ? void 0 : customColor.find((i) => (i == null ? void 0 : i.channel) === r)) == null ? void 0 : _a.rgba;\n        if (hiddenUndefinedColor === true && !colorByCustom) {\n          return void 0;\n        }\n        return colorByCustom != null ? colorByCustom : __spreadProps(__spreadValues({}, colorArr[r].rgb), {\n          a: Math.floor(255 * opacity)\n        });\n      };\n      _ImgConversionUtils.renderPixelByImgData({\n        ctx,\n        imgData,\n        getColor,\n        originBackgroundRGBA: BLACK_BACKGROUND_RGBA,\n        backgroundRGBA\n      });\n      if (basicImgCanvas) {\n        const basicCtx = basicImgCanvas.getContext(\"2d\");\n        if (basicCtx) {\n          basicCtx.drawImage(renderCanvas, 0, 0);\n          return basicImgCanvas.toDataURL(\"image/png\");\n        }\n      }\n      const newImgSrc = renderCanvas.toDataURL(\"image/png\");\n      return newImgSrc;\n    }\n  }\n  static renderMaskByColor({\n    renderCanvas,\n    imgData,\n    imgNode,\n    customColor,\n    backgroundRGBA = BLACK_BACKGROUND_RGBA\n  }) {\n    const ctx = renderCanvas.getContext(\"2d\");\n    if (ctx) {\n      const getColor = ({r, g, b}) => {\n        let color = void 0;\n        customColor == null ? void 0 : customColor.some((v) => {\n          if (v.rgba) {\n            const scope = 2;\n            if (r >= v.rgba.r - scope && r <= v.rgba.r + scope && g >= v.rgba.g - scope && g <= v.rgba.g + scope && b >= v.rgba.b - scope && b <= v.rgba.b + scope) {\n              color = {\n                r: v.channel,\n                g: v.channel,\n                b: v.channel,\n                a: 255\n              };\n              return true;\n            }\n            return false;\n          }\n        });\n        return color;\n      };\n      _ImgConversionUtils.renderPixelByImgData({\n        ctx,\n        imgData,\n        getColor,\n        originBackgroundRGBA: TRANSPARENCY_BACKGROUND_RGBA,\n        backgroundRGBA\n      });\n      const newImgSrc = renderCanvas.toDataURL(\"image/png\");\n      return newImgSrc;\n    }\n  }\n  static renderPixelByImgData({\n    ctx,\n    imgData,\n    getColor,\n    originBackgroundRGBA,\n    backgroundRGBA\n  }) {\n    for (let i = 0; i < imgData.data.length / 4; i++) {\n      const index = i * 4;\n      const r = imgData.data[index];\n      const g = imgData.data[index + 1];\n      const b = imgData.data[index + 2];\n      const a = imgData.data[index + 3];\n      const color = getColor({r, g, b, a});\n      const isOriginBackground = originBackgroundRGBA.r === r && originBackgroundRGBA.g === g && originBackgroundRGBA.b === b && originBackgroundRGBA.a === a;\n      if (isOriginBackground || !color) {\n        imgData.data[index] = backgroundRGBA.r;\n        imgData.data[index + 1] = backgroundRGBA.g;\n        imgData.data[index + 2] = backgroundRGBA.b;\n        imgData.data[index + 3] = backgroundRGBA.a;\n        continue;\n      }\n      imgData.data[index] = color.r;\n      imgData.data[index + 1] = color.g;\n      imgData.data[index + 2] = color.b;\n      imgData.data[index + 3] = color.a;\n    }\n    ctx.putImageData(imgData, 0, 0);\n  }\n};\nlet ImgConversionUtils = _ImgConversionUtils;\nImgConversionUtils.nextTick = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(\"\");\n    });\n  });\n};\nImgConversionUtils.getColorMapBySingleChannelMask = (params) => __async(_ImgConversionUtils, null, function* () {\n  const {\n    maskSrc,\n    customColor,\n    basicImgSrc,\n    hiddenUndefinedColor = false,\n    backgroundRGBA\n  } = params;\n  try {\n    const imgNode = yield _ImgConversionUtils.createImgDom(maskSrc);\n    const {canvas: maskCanvas, ctx: basicCtx} = _ImgConversionUtils.createCanvas(imgNode);\n    basicCtx.drawImage(imgNode, 0, 0, imgNode.width, imgNode.height);\n    const {canvas: basicImgCanvas, ctx: basicImgRenderCtx} = _ImgConversionUtils.createCanvas(imgNode);\n    if (basicImgSrc) {\n      const basicImg = yield _ImgConversionUtils.createImgDom(basicImgSrc);\n      basicImgRenderCtx.drawImage(basicImg, 0, 0);\n    }\n    yield _ImgConversionUtils.nextTick();\n    const imgData = basicCtx.getImageData(0, 0, imgNode.width, imgNode.height);\n    const newImgSrc = _ImgConversionUtils.renderColorByMask({\n      renderCanvas: maskCanvas,\n      imgData,\n      imgNode,\n      customColor,\n      hiddenUndefinedColor,\n      basicImgCanvas,\n      backgroundRGBA\n    });\n    return newImgSrc;\n  } catch (e) {\n    console.error(\"Failed to load image\", e);\n  }\n});\nImgConversionUtils.getMaskByColorImg = (_0) => __async(_ImgConversionUtils, [_0], function* ({\n  maskSrc,\n  customColor\n}) {\n  try {\n    const imgNode = yield _ImgConversionUtils.createImgDom(maskSrc);\n    const {ctx: basicCtx} = _ImgConversionUtils.createCanvas(imgNode);\n    basicCtx.drawImage(imgNode, 0, 0, imgNode.width, imgNode.height);\n    const {canvas: renderCanvas} = _ImgConversionUtils.createCanvas(imgNode);\n    yield _ImgConversionUtils.nextTick();\n    const imgData = basicCtx.getImageData(0, 0, imgNode.width, imgNode.height);\n    const newImgSrc = _ImgConversionUtils.renderMaskByColor({\n      renderCanvas,\n      imgData,\n      imgNode,\n      customColor\n    });\n    return newImgSrc;\n  } catch (e) {\n    console.error(\"Failed to load image\");\n  }\n});\n\nexport { ImgConversionUtils as default };\n","import React from 'react';\nimport { createDispatchHook, createSelectorHook } from 'react-redux';\nimport { AnyAction, Dispatch } from 'redux';\ninterface ILLMContext {\n  hoverKey: number;\n  setHoverKey: (value: number) => void;\n}\nexport const LabelBeeContext = React.createContext(undefined) as any;\nexport const useDispatch = createDispatchHook(LabelBeeContext) as () => Dispatch<AnyAction | any>; // TODO, Any need to be updated.\nexport const useSelector = createSelectorHook(LabelBeeContext);\nexport const LLMContext = React.createContext<ILLMContext>({\n  hoverKey: -1,\n  setHoverKey: () => {},\n});\n","function decodeBase64(base64, enableUnicode) {\n    var binaryString = atob(base64);\n    if (enableUnicode) {\n        var binaryView = new Uint8Array(binaryString.length);\n        for (var i = 0, n = binaryString.length; i < n; ++i) {\n            binaryView[i] = binaryString.charCodeAt(i);\n        }\n        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));\n    }\n    return binaryString;\n}\n\nfunction createURL(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    var blob = new Blob([body], { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var url;\n    return function WorkerFactory(options) {\n        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);\n        return new Worker(url, options);\n    };\n}\n\nexport { createBase64WorkerFactory };\n","import { createBase64WorkerFactory } from './_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js';\n\nvar WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgdmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTsKICB2YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CiAgdmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7CiAgdmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7CiAgdmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHtlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZX0pIDogb2JqW2tleV0gPSB2YWx1ZTsKICB2YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4gewogICAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKQogICAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoYiwgcHJvcCkpCiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pOwogICAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpCiAgICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhiKSkgewogICAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSkKICAgICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTsKICAgICAgfQogICAgcmV0dXJuIGE7CiAgfTsKICBjbGFzcyBDb21tb25Ub29sVXRpbHMgewogICAgc3RhdGljIGZpbmRBbGxMaW5lKHBvaW50TGlzdCwgaXNDbG9zZSA9IHRydWUpIHsKICAgICAgY29uc3QgYXJyID0gW107CiAgICAgIGNvbnN0IG5ld1BvaW50ID0gWy4uLnBvaW50TGlzdF07CiAgICAgIGlmIChuZXdQb2ludC5sZW5ndGggPj0gMyAmJiBpc0Nsb3NlID09PSB0cnVlKSB7CiAgICAgICAgbmV3UG9pbnQucHVzaChfX3NwcmVhZFZhbHVlcyh7fSwgbmV3UG9pbnRbMF0pKTsKICAgICAgfQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1BvaW50Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKG5ld1BvaW50W2kgKyAxXSkgewogICAgICAgICAgYXJyLnB1c2goewogICAgICAgICAgICBwb2ludDE6IG5ld1BvaW50W2ldLAogICAgICAgICAgICBwb2ludDI6IG5ld1BvaW50W2kgKyAxXSwKICAgICAgICAgICAgcG9pbnRJbmRleDogaQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBhcnI7CiAgICB9CiAgfQogIGNsYXNzIE1hdGhVdGlscyB7CiAgICBzdGF0aWMgaXNJblJhbmdlKHZhbHVlLCByYW5nZSkgewogICAgICBjb25zdCBtaW4gPSBNYXRoLm1pbiguLi5yYW5nZSk7CiAgICAgIGNvbnN0IG1heCA9IE1hdGgubWF4KC4uLnJhbmdlKTsKICAgICAgY29uc3QgaW5SYW5nZSA9ICh2KSA9PiB2IDw9IG1heCAmJiB2ID49IG1pbjsKICAgICAgY29uc3QgdmFsdWVzID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07CiAgICAgIHJldHVybiB2YWx1ZXMuZXZlcnkoKHYpID0+IGluUmFuZ2UodikpOwogICAgfQogICAgc3RhdGljIGdldExpbmVMZW5ndGgocG9pbnQxLCBwb2ludDIpIHsKICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhwb2ludDIueSAtIHBvaW50MS55LCAyKSArIE1hdGgucG93KHBvaW50Mi54IC0gcG9pbnQxLngsIDIpKTsKICAgIH0KICAgIHN0YXRpYyBpc091dE9mUmFuZ2UoY29vcmRpbmF0ZSwgcG9pbnQxLCBwb2ludDIsIHJhbmdlKSB7CiAgICAgIGNvbnN0IHgxID0gcG9pbnQxLnggLSBjb29yZGluYXRlLng7CiAgICAgIGNvbnN0IHgyID0gcG9pbnQyLnggLSBjb29yZGluYXRlLng7CiAgICAgIGNvbnN0IHkxID0gcG9pbnQxLnkgLSBjb29yZGluYXRlLnk7CiAgICAgIGNvbnN0IHkyID0gcG9pbnQyLnkgLSBjb29yZGluYXRlLnk7CiAgICAgIGNvbnN0IHNhbWVTaWRlWCA9IHgxID49IDAgJiYgeDIgPj0gMCB8fCB4MSA8PSAwICYmIHgyIDw9IDA7CiAgICAgIGNvbnN0IHNhbWVTaWRlWSA9IHkxID49IDAgJiYgeTIgPj0gMCB8fCB5MSA8PSAwICYmIHkyIDw9IDA7CiAgICAgIHJldHVybiB4MSA+IHJhbmdlICYmIHgyID4gcmFuZ2UgJiYgc2FtZVNpZGVYIHx8IHkxID4gcmFuZ2UgJiYgeTIgPiByYW5nZSAmJiBzYW1lU2lkZVk7CiAgICB9CiAgICBzdGF0aWMgY3Jvc3ModmVjdG9yMSwgdmVjdG9yMikgewogICAgICByZXR1cm4gdmVjdG9yMS54ICogdmVjdG9yMi55IC0gdmVjdG9yMi54ICogdmVjdG9yMS55OwogICAgfQogICAgc3RhdGljIGdldEZvb3RPZlBlcnBlbmRpY3VsYXIocHQsIGJlZ2luLCBlbmQsIHVzZUF4aXNSYW5nZSA9IGZhbHNlKSB7CiAgICAgIGxldCByZXRWYWwgPSB7eDogMCwgeTogMH07CiAgICAgIGNvbnN0IGR4ID0gYmVnaW4ueCAtIGVuZC54OwogICAgICBjb25zdCBkeSA9IGJlZ2luLnkgLSBlbmQueTsKICAgICAgaWYgKE1hdGguYWJzKGR4KSA8IDFlLTggJiYgTWF0aC5hYnMoZHkpIDwgMWUtOCkgewogICAgICAgIHJldFZhbCA9IGJlZ2luOwogICAgICAgIHJldHVybiByZXRWYWw7CiAgICAgIH0KICAgICAgbGV0IHUgPSAocHQueCAtIGJlZ2luLngpICogKGJlZ2luLnggLSBlbmQueCkgKyAocHQueSAtIGJlZ2luLnkpICogKGJlZ2luLnkgLSBlbmQueSk7CiAgICAgIHUgLz0gZHggKiBkeCArIGR5ICogZHk7CiAgICAgIHJldFZhbC54ID0gYmVnaW4ueCArIHUgKiBkeDsKICAgICAgcmV0VmFsLnkgPSBiZWdpbi55ICsgdSAqIGR5OwogICAgICBjb25zdCBsZW5ndGggPSB0aGlzLmdldExpbmVMZW5ndGgocHQsIHJldFZhbCk7CiAgICAgIGNvbnN0IHJhdGlvID0gMjsKICAgICAgaWYgKGxlbmd0aCA+IDIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZm9vdFBvaW50OiByZXRWYWwsCiAgICAgICAgICBsZW5ndGg6IEluZmluaXR5CiAgICAgICAgfTsKICAgICAgfQogICAgICBjb25zdCBmcm9tWCA9IE1hdGgubWluKGJlZ2luLngsIGVuZC54KTsKICAgICAgY29uc3QgdG9YID0gTWF0aC5tYXgoYmVnaW4ueCwgZW5kLngpOwogICAgICBjb25zdCBmcm9tWSA9IE1hdGgubWluKGJlZ2luLnksIGVuZC55KTsKICAgICAgY29uc3QgdG9ZID0gTWF0aC5tYXgoYmVnaW4ueSwgZW5kLnkpOwogICAgICBjb25zdCBhbGxBeGlzT3ZlclJhbmdlID0gISh0aGlzLmlzSW5SYW5nZShwdC54LCBbZnJvbVgsIHRvWF0pIHx8IHRoaXMuaXNJblJhbmdlKHB0LnksIFtmcm9tWSwgdG9ZXSkpOwogICAgICBjb25zdCBzb21lQXhpc092ZXJSYW5nZSA9IHB0LnggPiB0b1ggKyByYXRpbyB8fCBwdC54IDwgZnJvbVggLSByYXRpbyB8fCBwdC55ID4gdG9ZICsgcmF0aW8gfHwgcHQueSA8IGZyb21ZIC0gcmF0aW87CiAgICAgIGNvbnN0IGlzT3ZlclJhbmdlID0gdXNlQXhpc1JhbmdlID8gYWxsQXhpc092ZXJSYW5nZSA6IHNvbWVBeGlzT3ZlclJhbmdlOwogICAgICBpZiAoaXNPdmVyUmFuZ2UpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZm9vdFBvaW50OiByZXRWYWwsCiAgICAgICAgICBsZW5ndGg6IEluZmluaXR5CiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIGZvb3RQb2ludDogcmV0VmFsLAogICAgICAgIGxlbmd0aAogICAgICB9OwogICAgfQogIH0KICBmdW5jdGlvbiBnZXRDbG9zZXN0UG9pbnQoY29vcmRpbmF0ZSwgcG9seWdvbkxpc3QsIGxpbmVUeXBlID0gMCwgcmFuZ2UgPSAzLCBvcHRpb24pIHsKICAgIGxldCBoYXNDbG9zZWQgPSBmYWxzZTsKICAgIGNvbnN0IGlzQ2xvc2UgPSBvcHRpb24gPyBvcHRpb24uaXNDbG9zZSB8fCB0cnVlIDogZmFsc2U7CiAgICBsZXQgY2xvc2VzdFBvbHlnb25JRCA9ICIiOwogICAgbGV0IGNsb3Nlc3RFZGdlSW5kZXggPSAtMTsKICAgIGxldCBtaW4gPSBJbmZpbml0eTsKICAgIGxldCBkcm9wRm9vdCA9IGNvb3JkaW5hdGU7CiAgICBjb25zdCBudW1iZXJPZlNlZ21lbnRzID0gMjA7CiAgICBsZXQgaXNDbG9zZU5vZGUgPSBmYWxzZTsKICAgIHBvbHlnb25MaXN0LmZvckVhY2goKHYpID0+IHsKICAgICAgaWYgKGlzQ2xvc2VOb2RlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghdi5wb2ludExpc3QpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc3dpdGNoIChsaW5lVHlwZSkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHsKICAgICAgICAgICAgY29uc3QgYWxsTGluZSA9IENvbW1vblRvb2xVdGlscy5maW5kQWxsTGluZSh2LnBvaW50TGlzdCwgaXNDbG9zZSk7CiAgICAgICAgICAgIGFsbExpbmUuZm9yRWFjaCgobGluZSwgbGluZUluZGV4KSA9PiB7CiAgICAgICAgICAgICAgaWYgKGlzQ2xvc2VOb2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNvbnN0IHR3b1BvaW50RGlzdGFuY2UxID0gTWF0aFV0aWxzLmdldExpbmVMZW5ndGgobGluZS5wb2ludDEsIGNvb3JkaW5hdGUpOwogICAgICAgICAgICAgIGNvbnN0IHR3b1BvaW50RGlzdGFuY2UyID0gTWF0aFV0aWxzLmdldExpbmVMZW5ndGgobGluZS5wb2ludDIsIGNvb3JkaW5hdGUpOwogICAgICAgICAgICAgIGlmIChNYXRoVXRpbHMuaXNPdXRPZlJhbmdlKGNvb3JkaW5hdGUsIGxpbmUucG9pbnQxLCBsaW5lLnBvaW50MiwgcmFuZ2UpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCB7bGVuZ3RoLCBmb290UG9pbnR9ID0gTWF0aFV0aWxzLmdldEZvb3RPZlBlcnBlbmRpY3VsYXIoY29vcmRpbmF0ZSwgbGluZS5wb2ludDEsIGxpbmUucG9pbnQyKTsKICAgICAgICAgICAgICBpZiAodHdvUG9pbnREaXN0YW5jZTEgPCByYW5nZSAqIDIpIHsKICAgICAgICAgICAgICAgIGZvb3RQb2ludCA9IGxpbmUucG9pbnQxOwogICAgICAgICAgICAgICAgbGVuZ3RoID0gdHdvUG9pbnREaXN0YW5jZTE7CiAgICAgICAgICAgICAgICBpc0Nsb3NlTm9kZSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0d29Qb2ludERpc3RhbmNlMiA8IHJhbmdlICogMikgewogICAgICAgICAgICAgICAgZm9vdFBvaW50ID0gbGluZS5wb2ludDI7CiAgICAgICAgICAgICAgICBsZW5ndGggPSB0d29Qb2ludERpc3RhbmNlMjsKICAgICAgICAgICAgICAgIGlzQ2xvc2VOb2RlID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGxlbmd0aCA8IG1pbiAmJiBsZW5ndGggPCByYW5nZSkgewogICAgICAgICAgICAgICAgY2xvc2VzdFBvbHlnb25JRCA9IHYuaWQ7CiAgICAgICAgICAgICAgICBjbG9zZXN0RWRnZUluZGV4ID0gbGluZUluZGV4OwogICAgICAgICAgICAgICAgbWluID0gbGVuZ3RoOwogICAgICAgICAgICAgICAgZHJvcEZvb3QgPSBmb290UG9pbnQ7CiAgICAgICAgICAgICAgICBoYXNDbG9zZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbnN0IHBvaW50cyA9IHRoaXMuY3JlYXRlU21vb3RoQ3VydmVQb2ludHModi5wb2ludExpc3QucmVkdWNlKChhY2MsIGN1cikgPT4gewogICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCBjdXIueCwgY3VyLnldOwogICAgICAgICAgICB9LCBbXSksIDAuNSwgaXNDbG9zZSwgbnVtYmVyT2ZTZWdtZW50cyk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgICAgICAgIGNvbnN0IHtsZW5ndGgsIGZvb3RQb2ludH0gPSBNYXRoVXRpbHMuZ2V0Rm9vdE9mUGVycGVuZGljdWxhcihjb29yZGluYXRlLCBwb2ludHNbaV0sIHBvaW50c1tpICsgMV0pOwogICAgICAgICAgICAgIGlmIChsZW5ndGggPCBtaW4gJiYgbGVuZ3RoIDwgcmFuZ2UpIHsKICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2x5Z29uSUQgPSB2LmlkOwogICAgICAgICAgICAgICAgY2xvc2VzdEVkZ2VJbmRleCA9IE1hdGguZmxvb3IoaSAvIChudW1iZXJPZlNlZ21lbnRzICsgMSkpOwogICAgICAgICAgICAgICAgbWluID0gbGVuZ3RoOwogICAgICAgICAgICAgICAgZHJvcEZvb3QgPSBmb290UG9pbnQ7CiAgICAgICAgICAgICAgICBoYXNDbG9zZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHtkcm9wRm9vdCwgY2xvc2VzdEVkZ2VJbmRleCwgY2xvc2VzdFBvbHlnb25JRCwgaGFzQ2xvc2VkfTsKICB9CiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlMihlKSB7CiAgICBjb25zdCB7cG9pbnRzLCBiYWNrZ3JvdW5kTGlzdH0gPSBlLmRhdGE7CiAgICBjb25zdCBjb25uZWN0aW9uUG9pbnRzID0gW107CiAgICBjb25zdCBjYWNoZVNldCA9IG5ldyBTZXQoKTsKICAgIHRyeSB7CiAgICAgIGNvbnN0IGp1ZGdlSXNDb25uZWN0UG9pbnQgPSAocG9pbnQsIHBvbHlnb25MaXN0KSA9PiB7CiAgICAgICAgY29uc3Qge2Ryb3BGb290fSA9IGdldENsb3Nlc3RQb2ludChwb2ludCwgcG9seWdvbkxpc3QsIDAsIDEsIHtpc0Nsb3NlOiBmYWxzZX0pOwogICAgICAgIGlmIChkcm9wRm9vdCAhPT0gcG9pbnQpIHsKICAgICAgICAgIGNvbnN0IHMgPSBgJHtkcm9wRm9vdC54fSArICR7ZHJvcEZvb3QueX1gOwogICAgICAgICAgaWYgKCFjYWNoZVNldC5oYXMocykpIHsKICAgICAgICAgICAgY29ubmVjdGlvblBvaW50cy5wdXNoKHBvaW50KTsKICAgICAgICAgIH0KICAgICAgICAgIGNhY2hlU2V0LmFkZChzKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIHBvaW50c0NhbGMocG9pbnQpIHsKICAgICAgICBqdWRnZUlzQ29ubmVjdFBvaW50KHBvaW50LCBiYWNrZ3JvdW5kTGlzdCk7CiAgICAgIH0pOwogICAgICBiYWNrZ3JvdW5kTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGJhY2tncm91bmRzQ2FsYyh2KSB7CiAgICAgICAgbGV0IHRyYXZlcnNlSUQgPSAiIjsKICAgICAgICB0cmF2ZXJzZUlEID0gdi5pZDsKICAgICAgICBiYWNrZ3JvdW5kTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGJhY2tncm91bmQyQ2FsYyhhbm5vdGF0aW9uLCBpKSB7CiAgICAgICAgICBpZiAoYW5ub3RhdGlvbi5pZCA9PT0gdHJhdmVyc2VJRCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBuZXdQb2x5Z29uTGlzdCA9IFsuLi5iYWNrZ3JvdW5kTGlzdF07CiAgICAgICAgICBuZXdQb2x5Z29uTGlzdC5zcGxpY2UoaSwgMSk7CiAgICAgICAgICBhbm5vdGF0aW9uLnBvaW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIGJhY2tncm91bmRQb2ludHNDYWxjKHBvaW50KSB7CiAgICAgICAgICAgIGp1ZGdlSXNDb25uZWN0UG9pbnQocG9pbnQsIG5ld1BvbHlnb25MaXN0KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcG9zdE1lc3NhZ2Uoe2Nvbm5lY3Rpb25Qb2ludHN9KTsKICAgIH0gY2F0Y2ggKEUpIHsKICAgICAgY29uc29sZS5lcnJvcihFKTsKICAgICAgcG9zdE1lc3NhZ2Uoe2Nvbm5lY3Rpb25Qb2ludHM6IFtdfSk7CiAgICB9CiAgfTsKCn0pKCk7Cgo=', null, false);\n/* eslint-enable */\n\nexport { WorkerFactory as default };\n","const editStepWidth = 320;\nvar EPointCloudName;\n(function(EPointCloudName2) {\n  EPointCloudName2[\"PointCloud\"] = \"pointCloudTool\";\n})(EPointCloudName || (EPointCloudName = {}));\nvar EVideoToolName;\n(function(EVideoToolName2) {\n  EVideoToolName2[\"VideoTextTool\"] = \"videoTextTool\";\n  EVideoToolName2[\"VideoTagTool\"] = \"videoTagTool\";\n  EVideoToolName2[\"VideoClipTool\"] = \"videoClipTool\";\n})(EVideoToolName || (EVideoToolName = {}));\nvar EToolType;\n(function(EToolType2) {\n  EToolType2[EToolType2[\"Rect\"] = 0] = \"Rect\";\n  EToolType2[EToolType2[\"Tag\"] = 1] = \"Tag\";\n})(EToolType || (EToolType = {}));\nvar EToolName;\n(function(EToolName2) {\n  EToolName2[\"Rect\"] = \"rectTool\";\n  EToolName2[\"Tag\"] = \"tagTool\";\n  EToolName2[\"Point\"] = \"pointTool\";\n  EToolName2[\"PointMarker\"] = \"pointMarkerTool\";\n  EToolName2[\"Segmentation\"] = \"segmentationTool\";\n  EToolName2[\"Filter\"] = \"filterTool\";\n  EToolName2[\"Text\"] = \"textTool\";\n  EToolName2[\"Polygon\"] = \"polygonTool\";\n  EToolName2[\"Line\"] = \"lineTool\";\n  EToolName2[\"LineMarker\"] = \"lineMarkerTool\";\n  EToolName2[\"Empty\"] = \"emptyTool\";\n  EToolName2[\"FolderTag\"] = \"folderTagTool\";\n  EToolName2[\"RectTrack\"] = \"rectTrackTool\";\n  EToolName2[\"ScribbleTool\"] = \"scribbleTool\";\n  EToolName2[\"Face\"] = \"faceTool\";\n  EToolName2[\"ClientAttribute\"] = \"clientAttributeTool\";\n  EToolName2[\"OCRRelation\"] = \"OCRRelationTool\";\n  EToolName2[\"SegmentByRect\"] = \"segmentByRectTool\";\n  EToolName2[\"Cuboid\"] = \"cuboidTool\";\n  EToolName2[\"PointCloudPolygon\"] = \"pointCloudPolygon\";\n  EToolName2[\"LLM\"] = \"LLMTool\";\n})(EToolName || (EToolName = {}));\nvar ECheckModel;\n(function(ECheckModel2) {\n  ECheckModel2[\"Check\"] = \"check\";\n})(ECheckModel || (ECheckModel = {}));\nvar ERectPattern;\n(function(ERectPattern2) {\n  ERectPattern2[ERectPattern2[\"nothing\"] = 0] = \"nothing\";\n  ERectPattern2[ERectPattern2[\"RectBG\"] = 1] = \"RectBG\";\n  ERectPattern2[ERectPattern2[\"showOrder\"] = 2] = \"showOrder\";\n})(ERectPattern || (ERectPattern = {}));\nconst TOOL_NAME = {\n  [EToolName.Rect]: \"\\u62C9\\u6846\",\n  [EToolName.Tag]: \"\\u6807\\u7B7E\",\n  [EToolName.Point]: \"\\u6807\\u70B9\",\n  [EToolName.PointMarker]: \"\\u5217\\u8868\\u6807\\u70B9\",\n  [EToolName.Segmentation]: \"\\u524D\\u666F\\u5206\\u5272\",\n  [EToolName.Filter]: \"\\u7B5B\\u9009\",\n  [EToolName.Text]: \"\\u6587\\u672C\",\n  [EToolName.Polygon]: \"\\u591A\\u8FB9\\u5F62\",\n  [EToolName.Line]: \"\\u7EBF\\u6761\",\n  [EToolName.LineMarker]: \"\\u5217\\u8868\\u7EBF\\u6761\",\n  [EToolName.FolderTag]: \"\\u6587\\u4EF6\\u5939\\u6807\\u7B7E\",\n  [EToolName.RectTrack]: \"\\u62C9\\u6846\\u8DDF\\u8E2A\",\n  [EToolName.Face]: \"\\u4EBA\\u8138106\\u5DE5\\u5177\",\n  [EToolName.ClientAttribute]: \"\\u5BA2\\u6237\\u7AEF\\u5C5E\\u6027\\u5DE5\\u5177\",\n  [EToolName.OCRRelation]: \"OCR\\u5173\\u8054\\u5173\\u7CFB\\u5DE5\\u5177\",\n  [EToolName.SegmentByRect]: \"\\u7B97\\u6CD5\\u5206\\u5272\\u8F85\\u52A9\\u5DE5\\u5177\",\n  [EVideoToolName.VideoTextTool]: \"\\u89C6\\u9891\\u6587\\u672C\",\n  [EVideoToolName.VideoTagTool]: \"\\u89C6\\u9891\\u6807\\u7B7E\",\n  [EVideoToolName.VideoClipTool]: \"\\u89C6\\u9891\\u622A\\u53D6\",\n  [EPointCloudName.PointCloud]: \"\\u70B9\\u4E91\",\n  [EToolName.Cuboid]: \"\\u7ACB\\u4F53\\u6846\",\n  [EToolName.LLM]: \"LLM\\u6807\\u6CE8\"\n};\nconst TOOL_NAME_EN = {\n  [EToolName.Rect]: \"Rect\",\n  [EToolName.Tag]: \"Tag\",\n  [EToolName.Point]: \"Point\",\n  [EToolName.PointMarker]: \"PointMarker\",\n  [EToolName.Segmentation]: \"Segmentation\",\n  [EToolName.Filter]: \"Filter\",\n  [EToolName.Text]: \"Text\",\n  [EToolName.Polygon]: \"Polygon\",\n  [EToolName.Line]: \"Line\",\n  [EToolName.LineMarker]: \"LineMarker\",\n  [EToolName.FolderTag]: \"FolderTag\",\n  [EToolName.RectTrack]: \"RectTrack\",\n  [EToolName.Face]: \"Face\",\n  [EToolName.ClientAttribute]: \"ClientAttribute\",\n  [EToolName.OCRRelation]: \"OCRRelation\",\n  [EToolName.SegmentByRect]: \"SegmentByRect\",\n  [EVideoToolName.VideoTextTool]: \"VideoTextTool\",\n  [EVideoToolName.VideoTagTool]: \"VideoTagTool\",\n  [EVideoToolName.VideoClipTool]: \"VideoClipTool\",\n  [EPointCloudName.PointCloud]: \"PointCloud\",\n  [EToolName.Cuboid]: \"Cuboid\",\n  [EToolName.LLM]: \"LLM\"\n};\nvar EDependPattern;\n(function(EDependPattern2) {\n  EDependPattern2[EDependPattern2[\"noDepend\"] = 1] = \"noDepend\";\n  EDependPattern2[EDependPattern2[\"dependOrigin\"] = 2] = \"dependOrigin\";\n  EDependPattern2[EDependPattern2[\"dependShape\"] = 3] = \"dependShape\";\n  EDependPattern2[EDependPattern2[\"dependLine\"] = 4] = \"dependLine\";\n  EDependPattern2[EDependPattern2[\"dependPolygon\"] = 5] = \"dependPolygon\";\n  EDependPattern2[EDependPattern2[\"dependPreShape\"] = 101] = \"dependPreShape\";\n  EDependPattern2[EDependPattern2[\"dependPreLine\"] = 102] = \"dependPreLine\";\n  EDependPattern2[EDependPattern2[\"dependPrePolygon\"] = 103] = \"dependPrePolygon\";\n})(EDependPattern || (EDependPattern = {}));\nvar EFilterToolOperation;\n(function(EFilterToolOperation2) {\n  EFilterToolOperation2[\"lc\"] = \"leftClick\";\n  EFilterToolOperation2[\"rc\"] = \"rightClick\";\n  EFilterToolOperation2[\"clc\"] = \"ctrlLeftClick\";\n  EFilterToolOperation2[\"crc\"] = \"ctrlRightClick\";\n})(EFilterToolOperation || (EFilterToolOperation = {}));\nconst OPERATION_LIST = {\n  leftClick: \"\\u9F20\\u6807\\u5DE6\\u952E\",\n  rightClick: \"\\u9F20\\u6807\\u53F3\\u952E\",\n  ctrlLeftClick: \"ctrl + \\u9F20\\u6807\\u5DE6\\u952E\",\n  ctrlRightClick: \"ctrl + \\u9F20\\u6807\\u53F3\\u952E\"\n};\nvar EAnnotationMode;\n(function(EAnnotationMode2) {\n  EAnnotationMode2[EAnnotationMode2[\"Normal\"] = 1] = \"Normal\";\n  EAnnotationMode2[EAnnotationMode2[\"Modify\"] = 2] = \"Modify\";\n})(EAnnotationMode || (EAnnotationMode = {}));\nvar ELineTypes;\n(function(ELineTypes2) {\n  ELineTypes2[ELineTypes2[\"Line\"] = 0] = \"Line\";\n  ELineTypes2[ELineTypes2[\"Curve\"] = 1] = \"Curve\";\n})(ELineTypes || (ELineTypes = {}));\nvar ELineColor;\n(function(ELineColor2) {\n  ELineColor2[ELineColor2[\"SingleColor\"] = 0] = \"SingleColor\";\n  ELineColor2[ELineColor2[\"MultiColor\"] = 1] = \"MultiColor\";\n})(ELineColor || (ELineColor = {}));\nvar ESelectedType;\n(function(ESelectedType2) {\n  ESelectedType2[ESelectedType2[\"Form\"] = 1] = \"Form\";\n  ESelectedType2[ESelectedType2[\"Json\"] = 2] = \"Json\";\n})(ESelectedType || (ESelectedType = {}));\nvar EDragTarget;\n(function(EDragTarget2) {\n  EDragTarget2[EDragTarget2[\"Point\"] = 0] = \"Point\";\n  EDragTarget2[EDragTarget2[\"Line\"] = 1] = \"Line\";\n  EDragTarget2[EDragTarget2[\"Plane\"] = 2] = \"Plane\";\n})(EDragTarget || (EDragTarget = {}));\nvar EDrawPointPattern;\n(function(EDrawPointPattern2) {\n  EDrawPointPattern2[EDrawPointPattern2[\"None\"] = 0] = \"None\";\n  EDrawPointPattern2[EDrawPointPattern2[\"Drawing\"] = 1] = \"Drawing\";\n  EDrawPointPattern2[EDrawPointPattern2[\"Edit\"] = 2] = \"Edit\";\n})(EDrawPointPattern || (EDrawPointPattern = {}));\nvar EPageOperator;\n(function(EPageOperator2) {\n  EPageOperator2[EPageOperator2[\"Backward\"] = 0] = \"Backward\";\n  EPageOperator2[EPageOperator2[\"Forward\"] = 1] = \"Forward\";\n  EPageOperator2[EPageOperator2[\"JumpSkip\"] = 2] = \"JumpSkip\";\n  EPageOperator2[EPageOperator2[\"None\"] = 3] = \"None\";\n})(EPageOperator || (EPageOperator = {}));\nvar EAuditStatus;\n(function(EAuditStatus2) {\n  EAuditStatus2[EAuditStatus2[\"Wait\"] = 0] = \"Wait\";\n  EAuditStatus2[EAuditStatus2[\"Pass\"] = 1] = \"Pass\";\n  EAuditStatus2[EAuditStatus2[\"Fail\"] = 2] = \"Fail\";\n  EAuditStatus2[EAuditStatus2[\"Loading\"] = 3] = \"Loading\";\n})(EAuditStatus || (EAuditStatus = {}));\nvar ETextType;\n(function(ETextType2) {\n  ETextType2[ETextType2[\"AnyString\"] = 0] = \"AnyString\";\n  ETextType2[ETextType2[\"Order\"] = 1] = \"Order\";\n  ETextType2[ETextType2[\"EnglishOnly\"] = 2] = \"EnglishOnly\";\n  ETextType2[ETextType2[\"NumberOnly\"] = 3] = \"NumberOnly\";\n  ETextType2[ETextType2[\"CustomFormat\"] = 4] = \"CustomFormat\";\n})(ETextType || (ETextType = {}));\nconst TEXT_TYPE = {\n  0: \"\\u4EFB\\u610F\\u5B57\\u7B26\",\n  1: \"\\u5E8F\\u53F7\",\n  2: \"\\u4EC5\\u82F1\\u6587\",\n  3: \"\\u4EC5\\u6570\\u5B57\"\n};\nconst TEXT_ATTRIBUTE_MAX_LENGTH = 1e3;\nconst TEXT_ATTRIBUTE_LINE_HEIGHT = 16;\nconst DEFAULT_TEXT_MAX_WIDTH = 300;\nconst DEFAULT_FONT = \"normal normal 500 14px Arial\";\nvar EThumbnailOption;\n(function(EThumbnailOption2) {\n  EThumbnailOption2[EThumbnailOption2[\"ImgList\"] = 1e3] = \"ImgList\";\n  EThumbnailOption2[EThumbnailOption2[\"TrackPrediction\"] = 1001] = \"TrackPrediction\";\n  EThumbnailOption2[EThumbnailOption2[\"ImgSearch\"] = 1002] = \"ImgSearch\";\n})(EThumbnailOption || (EThumbnailOption = {}));\nconst CLIENT_TOOL_HEAD_TYPE = {\n  [EPointCloudName.PointCloud]: \"sensebeepc\",\n  [EToolName.ClientAttribute]: \"sensebeepc-EnumAttributeTool\",\n  [EToolName.Face]: \"sensebeepc-FacePointsLabellingTool\",\n  [EToolName.OCRRelation]: \"sensebeepc-OCRRelationTool\"\n};\nconst CLIENT_TOOL_NAME = {\n  [EPointCloudName.PointCloud]: \"\\u70B9\\u4E91\\u5BA2\\u6237\\u7AEF\",\n  [EToolName.ClientAttribute]: \"\\u5BA2\\u6237\\u7AEF\\u5C5E\\u6027\\u5DE5\\u5177\",\n  [EToolName.Face]: \"\\u4EBA\\u8138106\\u70B9\\u5DE5\\u5177\",\n  [EToolName.OCRRelation]: \"OCR\\u5173\\u8054\\u5173\\u7CFB\\u5DE5\\u5177\"\n};\nconst SEGMENT_NUMBER = 16;\nconst edgeAdsorptionScope = 10;\nvar EPolygonPattern;\n(function(EPolygonPattern2) {\n  EPolygonPattern2[EPolygonPattern2[\"Normal\"] = 0] = \"Normal\";\n  EPolygonPattern2[EPolygonPattern2[\"Rect\"] = 1] = \"Rect\";\n})(EPolygonPattern || (EPolygonPattern = {}));\nvar EScribblePattern;\n(function(EScribblePattern2) {\n  EScribblePattern2[EScribblePattern2[\"Scribble\"] = 1] = \"Scribble\";\n  EScribblePattern2[EScribblePattern2[\"Erase\"] = 2] = \"Erase\";\n})(EScribblePattern || (EScribblePattern = {}));\nvar EOperationMode;\n(function(EOperationMode2) {\n  EOperationMode2[EOperationMode2[\"General\"] = 1] = \"General\";\n  EOperationMode2[EOperationMode2[\"MultiMove\"] = 2] = \"MultiMove\";\n})(EOperationMode || (EOperationMode = {}));\n\nexport { CLIENT_TOOL_HEAD_TYPE, CLIENT_TOOL_NAME, DEFAULT_FONT, DEFAULT_TEXT_MAX_WIDTH, EAnnotationMode, EAuditStatus, ECheckModel, EDependPattern, EDragTarget, EDrawPointPattern, EFilterToolOperation, ELineColor, ELineTypes, EOperationMode, EPageOperator, EPointCloudName, EPolygonPattern, ERectPattern, EScribblePattern, ESelectedType, ETextType, EThumbnailOption, EToolName, EToolType, EVideoToolName, OPERATION_LIST, SEGMENT_NUMBER, TEXT_ATTRIBUTE_LINE_HEIGHT, TEXT_ATTRIBUTE_MAX_LENGTH, TEXT_TYPE, TOOL_NAME, TOOL_NAME_EN, edgeAdsorptionScope, editStepWidth };\n","import { ELineTypes, SEGMENT_NUMBER } from '../../constant/tool.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction createSmoothCurvePoints(points, tension = 0.5, closed = false, numberOfSegments = 16) {\n  if (points.length < 4) {\n    return points;\n  }\n  const result = [];\n  const ps = points.slice(0);\n  let x;\n  let y;\n  let t1x;\n  let t2x;\n  let t1y;\n  let t2y;\n  let c1;\n  let c2;\n  let c3;\n  let c4;\n  let st;\n  let t;\n  let i;\n  if (closed) {\n    ps.unshift(points[points.length - 1]);\n    ps.unshift(points[points.length - 2]);\n    ps.unshift(points[points.length - 1]);\n    ps.unshift(points[points.length - 2]);\n    ps.push(points[0]);\n    ps.push(points[1]);\n  } else {\n    ps.unshift(points[1]);\n    ps.unshift(points[0]);\n    ps.push(points[points.length - 2]);\n    ps.push(points[points.length - 1]);\n  }\n  for (i = 2; i < ps.length - 4; i += 2) {\n    t1x = (ps[i + 2] - ps[i - 2]) * tension;\n    t2x = (ps[i + 4] - ps[i - 0]) * tension;\n    t1y = (ps[i + 3] - ps[i - 1]) * tension;\n    t2y = (ps[i + 5] - ps[i + 1]) * tension;\n    for (t = 0; t <= numberOfSegments; t++) {\n      st = t / numberOfSegments;\n      c1 = 2 * Math.pow(st, 3) - 3 * Math.pow(st, 2) + 1;\n      c2 = -(2 * Math.pow(st, 3)) + 3 * Math.pow(st, 2);\n      c3 = Math.pow(st, 3) - 2 * Math.pow(st, 2) + st;\n      c4 = Math.pow(st, 3) - Math.pow(st, 2);\n      x = c1 * ps[i] + c2 * ps[i + 2] + c3 * t1x + c4 * t2x;\n      y = c1 * ps[i + 1] + c2 * ps[i + 3] + c3 * t1y + c4 * t2y;\n      result.push(x);\n      result.push(y);\n    }\n  }\n  const formatResult = [];\n  for (let j = 0; j < result.length - 1; j += 2) {\n    formatResult.push({\n      x: result[j],\n      y: result[j + 1]\n    });\n  }\n  if (closed) {\n    for (let j = 0; j < numberOfSegments + 1; j++) {\n      const d = formatResult.shift();\n      formatResult.push(d);\n    }\n  }\n  return formatResult;\n}\nconst createSmoothCurvePointsFromPointList = (pointList, numberOfSegments = 16) => createSmoothCurvePoints(pointList.reduce((acc, cur) => {\n  return [...acc, cur.x, cur.y];\n}, []), 0.5, false, numberOfSegments);\nfunction isInPolygon(checkPoint, polygonPoints, lineType = ELineTypes.Line) {\n  let counter = 0;\n  let i;\n  let xinters;\n  let p1;\n  let p2;\n  polygonPoints = [...polygonPoints];\n  if (lineType === ELineTypes.Curve) {\n    polygonPoints = createSmoothCurvePoints(polygonPoints.reduce((acc, cur) => {\n      return [...acc, cur.x, cur.y];\n    }, []), 0.5, true, SEGMENT_NUMBER);\n  }\n  [p1] = polygonPoints;\n  const pointCount = polygonPoints.length;\n  for (i = 1; i <= pointCount; i++) {\n    p2 = polygonPoints[i % pointCount];\n    if (checkPoint.x > Math.min(p1.x, p2.x) && checkPoint.x <= Math.max(p1.x, p2.x)) {\n      if (checkPoint.y <= Math.max(p1.y, p2.y)) {\n        if (p1.x !== p2.x) {\n          xinters = (checkPoint.x - p1.x) * (p2.y - p1.y) / (p2.x - p1.x) + p1.y;\n          if (p1.y === p2.y || checkPoint.y <= xinters) {\n            counter++;\n          }\n        }\n      }\n    }\n    p1 = p2;\n  }\n  if (counter % 2 === 0) {\n    return false;\n  }\n  return true;\n}\nfunction getPolygonPointUnderZoom(pointList, zoom = 1) {\n  return pointList.map((v) => __spreadProps(__spreadValues({}, v), {x: v.x * zoom, y: v.y * zoom}));\n}\n\nexport { createSmoothCurvePoints, createSmoothCurvePointsFromPointList, getPolygonPointUnderZoom, isInPolygon };\n","const headerHeight = 61;\nconst tipsHeight = 40;\nconst footerHeight = 40;\nconst sidebarWidth = 240;\nvar EStepType;\n(function(EStepType2) {\n  EStepType2[EStepType2[\"ANNOTATION\"] = 1] = \"ANNOTATION\";\n  EStepType2[EStepType2[\"QUALITY_INSPECTION\"] = 2] = \"QUALITY_INSPECTION\";\n  EStepType2[EStepType2[\"PRE_ANNOTATION\"] = 3] = \"PRE_ANNOTATION\";\n  EStepType2[EStepType2[\"MANUAL_CORRECTION\"] = 4] = \"MANUAL_CORRECTION\";\n})(EStepType || (EStepType = {}));\nconst ANNOTATION_MAX_SIZE = 1e3;\nvar EPageOperator;\n(function(EPageOperator2) {\n  EPageOperator2[EPageOperator2[\"Backward\"] = 0] = \"Backward\";\n  EPageOperator2[EPageOperator2[\"Forward\"] = 1] = \"Forward\";\n  EPageOperator2[EPageOperator2[\"JumpSkip\"] = 2] = \"JumpSkip\";\n  EPageOperator2[EPageOperator2[\"None\"] = 3] = \"None\";\n})(EPageOperator || (EPageOperator = {}));\nvar EDragStatus;\n(function(EDragStatus2) {\n  EDragStatus2[EDragStatus2[\"Start\"] = 0] = \"Start\";\n  EDragStatus2[EDragStatus2[\"Stop\"] = 1] = \"Stop\";\n  EDragStatus2[EDragStatus2[\"Wait\"] = 2] = \"Wait\";\n  EDragStatus2[EDragStatus2[\"Move\"] = 3] = \"Move\";\n})(EDragStatus || (EDragStatus = {}));\nvar EDragTarget;\n(function(EDragTarget2) {\n  EDragTarget2[EDragTarget2[\"Point\"] = 0] = \"Point\";\n  EDragTarget2[EDragTarget2[\"Line\"] = 1] = \"Line\";\n  EDragTarget2[EDragTarget2[\"Plane\"] = 2] = \"Plane\";\n  EDragTarget2[EDragTarget2[\"Cuboid\"] = 3] = \"Cuboid\";\n})(EDragTarget || (EDragTarget = {}));\nvar ESortDirection;\n(function(ESortDirection2) {\n  ESortDirection2[ESortDirection2[\"ascend\"] = 0] = \"ascend\";\n  ESortDirection2[ESortDirection2[\"descend\"] = 1] = \"descend\";\n})(ESortDirection || (ESortDirection = {}));\nvar EGrowthMode;\n(function(EGrowthMode2) {\n  EGrowthMode2[EGrowthMode2[\"Intelligence\"] = 0] = \"Intelligence\";\n  EGrowthMode2[EGrowthMode2[\"Linear\"] = 1] = \"Linear\";\n})(EGrowthMode || (EGrowthMode = {}));\nvar ELang;\n(function(ELang2) {\n  ELang2[\"Zh\"] = \"zh_CN\";\n  ELang2[\"US\"] = \"en_US\";\n})(ELang || (ELang = {}));\nvar ERotateDirection;\n(function(ERotateDirection2) {\n  ERotateDirection2[ERotateDirection2[\"Clockwise\"] = 0] = \"Clockwise\";\n  ERotateDirection2[ERotateDirection2[\"Anticlockwise\"] = 1] = \"Anticlockwise\";\n})(ERotateDirection || (ERotateDirection = {}));\nconst DEFAULT_TEXT_OFFSET = {\n  offsetX: -10,\n  offsetY: -10\n};\nconst DEFAULT_TEXT_SHADOW = {\n  shadowColor: \"rgba(0, 0, 0, 1)\",\n  shadowOffsetX: 1,\n  shadowOffsetY: 1,\n  shadowBlur: 0\n};\nconst TEXT_ATTRIBUTE_OFFSET = {\n  x: 8,\n  y: 26\n};\nvar ECuboidPlain;\n(function(ECuboidPlain2) {\n  ECuboidPlain2[\"Front\"] = \"front\";\n  ECuboidPlain2[\"Back\"] = \"back\";\n  ECuboidPlain2[\"Side\"] = \"side\";\n})(ECuboidPlain || (ECuboidPlain = {}));\nvar ECuboidPosition;\n(function(ECuboidPosition2) {\n  ECuboidPosition2[\"TL\"] = \"tl\";\n  ECuboidPosition2[\"TR\"] = \"tr\";\n  ECuboidPosition2[\"BL\"] = \"bl\";\n  ECuboidPosition2[\"BR\"] = \"br\";\n})(ECuboidPosition || (ECuboidPosition = {}));\nvar ECuboidDirection;\n(function(ECuboidDirection2) {\n  ECuboidDirection2[\"Front\"] = \"front\";\n  ECuboidDirection2[\"Back\"] = \"back\";\n  ECuboidDirection2[\"Left\"] = \"left\";\n  ECuboidDirection2[\"Right\"] = \"right\";\n  ECuboidDirection2[\"Top\"] = \"top\";\n})(ECuboidDirection || (ECuboidDirection = {}));\nconst DIAGONAL_POINT = {\n  tl: \"br\",\n  tr: \"bl\",\n  br: \"tl\",\n  bl: \"tr\"\n};\nvar ECuboidLineDirection;\n(function(ECuboidLineDirection2) {\n  ECuboidLineDirection2[\"Row\"] = \"row\";\n  ECuboidLineDirection2[\"Column\"] = \"column\";\n})(ECuboidLineDirection || (ECuboidLineDirection = {}));\nconst CUBOID_ROW = {\n  [ECuboidPosition.TL]: ECuboidPosition.TR,\n  [ECuboidPosition.TR]: ECuboidPosition.TL,\n  [ECuboidPosition.BL]: ECuboidPosition.BR,\n  [ECuboidPosition.BR]: ECuboidPosition.BL\n};\nconst CUBOID_COLUMN = {\n  [ECuboidPosition.TL]: ECuboidPosition.BL,\n  [ECuboidPosition.TR]: ECuboidPosition.BR,\n  [ECuboidPosition.BL]: ECuboidPosition.TL,\n  [ECuboidPosition.BR]: ECuboidPosition.TR\n};\n\nexport { ANNOTATION_MAX_SIZE, CUBOID_COLUMN, CUBOID_ROW, DEFAULT_TEXT_OFFSET, DEFAULT_TEXT_SHADOW, DIAGONAL_POINT, ECuboidDirection, ECuboidLineDirection, ECuboidPlain, ECuboidPosition, EDragStatus, EDragTarget, EGrowthMode, ELang, EPageOperator, ERotateDirection, ESortDirection, EStepType, TEXT_ATTRIBUTE_OFFSET, footerHeight, headerHeight, sidebarWidth, tipsHeight };\n","import { isObject } from 'lodash';\nimport { EStepType, ESortDirection } from '../../constant/annotation.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass CommonToolUtils {\n  static getStepInfo(step, stepList) {\n    return stepList == null ? void 0 : stepList.filter((info) => info.step === step)[0];\n  }\n  static getCurrentStepInfo(currentStep, stepList) {\n    const currentStepInfo = this.getStepInfo(currentStep, stepList);\n    if (currentStepInfo) {\n      if (currentStepInfo.type === EStepType.QUALITY_INSPECTION || currentStepInfo.type === EStepType.MANUAL_CORRECTION) {\n        return this.getCurrentStepInfo(currentStepInfo.dataSourceStep, stepList);\n      }\n    }\n    return currentStepInfo;\n  }\n  static getMaxOrder(result) {\n    let order = 0;\n    result.forEach((v) => {\n      if (v.order && v.order > order) {\n        order = v.order;\n      }\n    });\n    return order;\n  }\n  static hotkeyFilter(event) {\n    const target = event.target || event.srcElement;\n    if (!target) {\n      return true;\n    }\n    const {tagName, type} = target;\n    if (!tagName || !type) {\n      return true;\n    }\n    let flag = true;\n    if (target.isContentEditable || tagName === \"TEXTAREA\" || (tagName === \"INPUT\" && type !== \"radio\" || tagName === \"TEXTAREA\") && !target.readOnly) {\n      flag = false;\n    }\n    return flag;\n  }\n  static getNextSelectedRectID(rectList, sort = ESortDirection.ascend, selectedID) {\n    let sign = 1;\n    if (sort === ESortDirection.descend) {\n      sign = -1;\n    }\n    const sortRectList = rectList.sort((a, b) => {\n      if (a.x - b.x === 0) {\n        return a.y - b.y;\n      }\n      return sign * (a.x - b.x);\n    });\n    const i = sortRectList.findIndex((v) => v.id === selectedID);\n    const len = sortRectList.length;\n    return sortRectList[(i + 1) % len];\n  }\n  static getNextSelectedRectIDByEvent(pointList, event, selectedID) {\n    const sortDirection = event.shiftKey ? ESortDirection.descend : ESortDirection.ascend;\n    return this.getNextSelectedRectID(pointList, sortDirection, selectedID);\n  }\n  static getRenderResultList(resultList, sourceID, attributeLockList = [], selectedIDs) {\n    const selectedRect = [];\n    const showingRect = resultList.filter((result) => {\n      if (selectedIDs && selectedIDs.includes(result.id)) {\n        selectedRect.push(result);\n        return false;\n      }\n      if (attributeLockList.length > 0 && !attributeLockList.includes(result == null ? void 0 : result.attribute)) {\n        return false;\n      }\n      if (this.isDifferSourceID(result == null ? void 0 : result.sourceID, sourceID)) {\n        return false;\n      }\n      return true;\n    });\n    return [showingRect, selectedRect];\n  }\n  static getSourceID(basicResult) {\n    var _a;\n    const defaultSourceID = \"\";\n    if (basicResult) {\n      return (_a = basicResult == null ? void 0 : basicResult.id) != null ? _a : defaultSourceID;\n    }\n    return defaultSourceID;\n  }\n  static findAllLine(pointList, isClose = true) {\n    const arr = [];\n    const newPoint = [...pointList];\n    if (newPoint.length >= 3 && isClose === true) {\n      newPoint.push(__spreadValues({}, newPoint[0]));\n    }\n    for (let i = 0; i < newPoint.length; i++) {\n      if (newPoint[i + 1]) {\n        arr.push({\n          point1: newPoint[i],\n          point2: newPoint[i + 1],\n          pointIndex: i\n        });\n      }\n    }\n    return arr;\n  }\n  static translateSourceID(sourceID) {\n    if (sourceID === void 0 || sourceID === 0 || sourceID === \"0\") {\n      sourceID = \"\";\n    }\n    return sourceID;\n  }\n  static isDifferSourceID(sourceIDA, sourceIDB) {\n    sourceIDA = this.translateSourceID(sourceIDA);\n    sourceIDB = this.translateSourceID(sourceIDB);\n    return `${sourceIDA}` !== `${sourceIDB}`;\n  }\n  static isSameSourceID(sourceIDA, sourceIDB) {\n    sourceIDA = this.translateSourceID(sourceIDA);\n    sourceIDB = this.translateSourceID(sourceIDB);\n    return `${sourceIDA}` === `${sourceIDB}`;\n  }\n  static getNextMarker(resultList, markerList = [], markerIndex) {\n    if ((markerList == null ? void 0 : markerList.length) === 0) {\n      return void 0;\n    }\n    let newSortList = markerList.map((data, index) => __spreadProps(__spreadValues({}, data), {index}));\n    if (typeof markerIndex === \"number\" && markerIndex > 0) {\n      const markerInfo = markerList[markerIndex];\n      if (markerInfo && resultList.every((rect) => rect.label !== markerInfo.value)) {\n        return {label: markerInfo.value, index: markerIndex};\n      }\n      newSortList = [...newSortList.slice(markerIndex, markerList.length), ...newSortList.slice(0, markerIndex)];\n    }\n    for (let i = 0; i < newSortList.length; i++) {\n      if (resultList.some((rect) => rect.label === newSortList[i].value)) {\n        continue;\n      }\n      return {label: newSortList[i].value, index: newSortList[i].index};\n    }\n    return void 0;\n  }\n  static getCurrentMarkerIndex(label, markerList = []) {\n    return markerList.findIndex((marker) => label === marker.value);\n  }\n}\nCommonToolUtils.jsonParser = (content, defaultValue = {}) => {\n  try {\n    if (typeof content === \"string\") {\n      return JSON.parse(content);\n    }\n    return isObject(content) ? content : defaultValue;\n  } catch (e) {\n    return defaultValue;\n  }\n};\n\nexport { CommonToolUtils as default };\n","import { EToolName, ELineTypes } from '../../constant/tool.js';\nimport { createSmoothCurvePointsFromPointList } from './polygonTool.js';\nimport PolygonUtils from './PolygonUtils.js';\nimport MathUtils from '../MathUtils.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar EStatus;\n(function(EStatus2) {\n  EStatus2[EStatus2[\"Create\"] = 0] = \"Create\";\n  EStatus2[EStatus2[\"Active\"] = 1] = \"Active\";\n  EStatus2[EStatus2[\"Edit\"] = 1] = \"Edit\";\n  EStatus2[EStatus2[\"None\"] = 2] = \"None\";\n})(EStatus || (EStatus = {}));\nvar EColor;\n(function(EColor2) {\n  EColor2[\"ActiveArea\"] = \"#B3B8FF\";\n})(EColor || (EColor = {}));\nconst SEGMENT_NUMBER = 16;\nconst POINT_RADIUS = 3;\nconst _LineToolUtils = class {\n  static lineLengthSum(pointList) {\n    let length = 0;\n    pointList.forEach((point, index) => {\n      if (index > 0) {\n        length += this.calcDistance(pointList[index - 1], point);\n      }\n    });\n    return length;\n  }\n  static isInLine(checkPoint, point1, point2, scope = 3) {\n    const {length} = MathUtils.getFootOfPerpendicular(checkPoint, point1, point2);\n    if (length < scope) {\n      return true;\n    }\n    return false;\n  }\n};\nlet LineToolUtils = _LineToolUtils;\nLineToolUtils.setSpecialEdgeStyle = (ctx) => {\n  ctx.lineCap = \"butt\";\n  ctx.setLineDash([10, 10]);\n};\nLineToolUtils.setReferenceCtx = (ctx) => {\n  ctx.lineCap = \"butt\";\n  ctx.setLineDash([6]);\n};\nLineToolUtils.calcOptimalIntersection = (pointList, matchLine, matchPoint, pointRadius, zoom) => {\n  let optimalIntersection;\n  let minDistance = Infinity;\n  let scopeIntersection;\n  const matchLineOnExistLine = pointList.find((p, index) => {\n    if (index === 0) {\n      return;\n    }\n    const pointAOnLine = _LineToolUtils.isInLine(matchLine.pointA, p, pointList[index - 1]);\n    const pointBOnLine = _LineToolUtils.isInLine(matchLine.pointB, p, pointList[index - 1]);\n    return pointAOnLine && pointBOnLine;\n  });\n  if (matchLineOnExistLine) {\n    return {point: matchPoint};\n  }\n  pointList.forEach((point, index) => {\n    if (index === 0) {\n      return;\n    }\n    const line2 = {\n      pointA: pointList[index - 1],\n      pointB: point\n    };\n    const intersection = _LineToolUtils.lineIntersection(matchLine, line2);\n    if (intersection && matchLine) {\n      const {onLine2, onLine1, x, y} = intersection;\n      const distance = _LineToolUtils.calcDistance(matchPoint, intersection);\n      const matchPointInLine = _LineToolUtils.isOnLine(matchLine.pointB.x, matchLine.pointB.y, point.x, point.y, pointList[index - 1].x, pointList[index - 1].y);\n      if (matchPointInLine) {\n        const intersectionDistance = _LineToolUtils.calcDistance(matchPoint, intersection);\n        if (intersectionDistance < pointRadius / zoom) {\n          const cPoint = matchLine.pointB;\n          const {footPoint, length} = MathUtils.getFootOfPerpendicular(cPoint, line2.pointA, line2.pointB, true);\n          if (length !== void 0) {\n            const distPointA = _LineToolUtils.calcDistance(line2.pointA, footPoint);\n            const distPointB = _LineToolUtils.calcDistance(line2.pointB, footPoint);\n            scopeIntersection = {\n              point: footPoint,\n              minDistance: length\n            };\n            if (length === Infinity) {\n              scopeIntersection.point = distPointA > distPointB ? line2.pointB : line2.pointA;\n            }\n          }\n        }\n        return;\n      }\n      if (distance < minDistance && onLine2 && onLine1) {\n        minDistance = distance;\n        optimalIntersection = {\n          x,\n          y\n        };\n      }\n    }\n  });\n  if (optimalIntersection) {\n    return {point: optimalIntersection, minDistance};\n  }\n  if (scopeIntersection) {\n    return scopeIntersection;\n  }\n  return void 0;\n};\nLineToolUtils.lineIntersection = (lineA, lineB) => {\n  let onLine1 = false;\n  let onLine2 = false;\n  const lineADiff = _LineToolUtils.getAxisDiff(lineA);\n  const lineBDiff = _LineToolUtils.getAxisDiff(lineB);\n  const denominator = lineBDiff.y * lineADiff.x - lineBDiff.x * lineADiff.y;\n  if (denominator === 0) {\n    return false;\n  }\n  let a = lineA.pointA.y - lineB.pointA.y;\n  let b = lineA.pointA.x - lineB.pointA.x;\n  const numerator1 = (lineB.pointB.x - lineB.pointA.x) * a - (lineB.pointB.y - lineB.pointA.y) * b;\n  const numerator2 = (lineA.pointB.x - lineA.pointA.x) * a - (lineA.pointB.y - lineA.pointA.y) * b;\n  a = numerator1 / denominator;\n  b = numerator2 / denominator;\n  if (a > 0 && a < 1) {\n    onLine1 = true;\n  }\n  if (b > 0 && b < 1) {\n    onLine2 = true;\n  }\n  const x = lineA.pointA.x + a * (lineA.pointB.x - lineA.pointA.x);\n  const y = lineA.pointA.y + a * (lineA.pointB.y - lineA.pointA.y);\n  return {x, y, onLine1, onLine2};\n};\nLineToolUtils.getAxisDiff = (line) => {\n  return {\n    x: line.pointB.x - line.pointA.x,\n    y: line.pointB.y - line.pointA.y\n  };\n};\nLineToolUtils.calcDistance = (point1, point2) => {\n  return Math.sqrt(Math.pow(Math.abs(point1.x - point2.x), 2) + Math.pow(Math.abs(point1.y - point2.y), 2));\n};\nLineToolUtils.drawCurveLine = (ctx, points, config, applyLineWidth = true, isReference = false, hoverEdgeIndex) => {\n  const pointList = createSmoothCurvePointsFromPointList(points, SEGMENT_NUMBER);\n  ctx.save();\n  ctx.lineCap = \"round\";\n  ctx.lineJoin = \"round\";\n  ctx.strokeStyle = config.color;\n  if (applyLineWidth) {\n    ctx.lineWidth = config.lineWidth;\n  }\n  if (isReference) {\n    _LineToolUtils.setReferenceCtx(ctx);\n  }\n  points.forEach((point, index) => {\n    const specialEdge = point == null ? void 0 : point.specialEdge;\n    const curveLinePoints = pointList.splice(0, SEGMENT_NUMBER + 1);\n    ctx.save();\n    ctx.beginPath();\n    if (hoverEdgeIndex === index) {\n      ctx.lineWidth = 4;\n    }\n    curveLinePoints.forEach(({x, y}, pointIndex) => {\n      const fn = pointIndex > 0 ? \"lineTo\" : \"moveTo\";\n      if (specialEdge) {\n        _LineToolUtils.setSpecialEdgeStyle(ctx);\n      }\n      ctx[fn](x, y);\n    });\n    ctx.stroke();\n    ctx.restore();\n  });\n  ctx.restore();\n};\nLineToolUtils.calcTwoPointDistance = (pointA, pointB) => Math.sqrt(Math.pow(pointA.x - pointB.x, 2) + Math.pow(pointA.y - pointB.y, 2));\nLineToolUtils.pointOverTarget = (axis, preAxis, dependToolName, dependData, dependConfig, imageSize, pointRadius, zoom, getRenderAxis, getAbsAxis) => {\n  const absAxis = axis;\n  if (!preAxis) {\n    return axis;\n  }\n  if (dependToolName === EToolName.Polygon) {\n    const polygonPointList = _LineToolUtils.getPolygonPointList(dependData, dependConfig);\n    if (polygonPointList.length === 0) {\n      return absAxis;\n    }\n    const inPolygon = PolygonUtils.isInPolygon(axis, polygonPointList);\n    if (inPolygon) {\n      return absAxis;\n    }\n    const pointList = polygonPointList.concat(polygonPointList[0]).map((i) => getRenderAxis(i));\n    const pointA = getRenderAxis(preAxis);\n    const pointB = getRenderAxis(axis);\n    const line1 = {\n      pointA,\n      pointB\n    };\n    const intersection = _LineToolUtils.calcOptimalIntersection(pointList, line1, pointA, pointRadius, zoom);\n    if (intersection) {\n      const intersectionAbsAxis = getAbsAxis(intersection == null ? void 0 : intersection.point);\n      absAxis.x = intersectionAbsAxis.x;\n      absAxis.y = intersectionAbsAxis.y;\n    } else {\n      return preAxis;\n    }\n    return absAxis;\n  }\n  if (dependToolName === EToolName.Rect) {\n    const {x, y, width, height} = dependData;\n    absAxis.x = MathUtils.withinRange(absAxis.x, [x, x + width]);\n    absAxis.y = MathUtils.withinRange(absAxis.y, [y, y + height]);\n    return absAxis;\n  }\n  absAxis.x = MathUtils.withinRange(absAxis.x, [0, imageSize.width]);\n  absAxis.y = MathUtils.withinRange(absAxis.y, [0, imageSize.height]);\n  return absAxis;\n};\nLineToolUtils.getPolygonPointList = (dependData, dependConfig) => {\n  const {pointList} = dependData;\n  const {lineType} = dependConfig;\n  return lineType === ELineTypes.Line ? pointList : PolygonUtils.createSmoothCurvePoints(pointList.reduce((acc, cur) => {\n    return [...acc, cur.x, cur.y];\n  }, []), 0.5, true, 20);\n};\nLineToolUtils.isOnLine = (x, y, endX, endY, px, py) => {\n  const f = (someX) => {\n    return (endY - y) / (endX - x) * (someX - x) + y;\n  };\n  return Math.abs(f(px) - py) < 1e-6 && px >= x && px <= endX;\n};\nLineToolUtils.inArea = ({top, left, right, bottom}, {x, y}) => y >= top && y <= bottom && x >= left && x <= right;\nLineToolUtils.getVHPoint = (lastPoint, nextPoint, absNextPoint, renderLastPoint) => {\n  const angle = _LineToolUtils.getAngle(lastPoint, absNextPoint);\n  if (Math.abs(angle) < 45) {\n    return __spreadProps(__spreadValues({}, nextPoint), {y: renderLastPoint.y});\n  }\n  return __spreadProps(__spreadValues({}, nextPoint), {x: renderLastPoint.x});\n};\nLineToolUtils.getAngle = (startPoint, endPoint) => {\n  const diffX = endPoint.x - startPoint.x;\n  const diffY = endPoint.y - startPoint.y;\n  return 360 * Math.atan(diffY / diffX) / (2 * Math.PI);\n};\n\nexport { EColor, EStatus, POINT_RADIUS, SEGMENT_NUMBER, LineToolUtils as default };\n","var __pow = Math.pow;\nclass Vector {\n  static add(vector1, vector2) {\n    return {\n      x: vector1.x + vector2.x,\n      y: vector1.y + vector2.y\n    };\n  }\n  static getVector(point1, point2) {\n    return {\n      x: point2.x - point1.x,\n      y: point2.y - point1.y\n    };\n  }\n  static len(vector) {\n    return Math.sqrt(__pow(vector.x, 2) + __pow(vector.y, 2));\n  }\n  static dotProduct(vector1, vector2) {\n    return vector1.x * vector2.x + vector1.y + vector2.y;\n  }\n}\n\nexport { Vector as default };\n","import { cloneDeep } from 'lodash';\nimport { ECuboidPlain, ECuboidPosition, ECuboidDirection, EDragTarget, DIAGONAL_POINT, ECuboidLineDirection, CUBOID_ROW, CUBOID_COLUMN } from '../../constant/annotation.js';\nimport AxisUtils from './AxisUtils.js';\nimport Vector from '../VectorUtils.js';\nimport LineToolUtils from './LineToolUtils.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction getPlanePointsBasicInfo({tr, tl, br}) {\n  return {\n    width: Math.abs(tr.x - tl.x),\n    height: Math.abs(br.y - tr.y),\n    centerPoints: {\n      x: (tl.x + br.x) / 2,\n      y: (tl.y + br.y) / 2\n    }\n  };\n}\nfunction getCuboidBasicInfo({\n  frontPoints,\n  backPoints\n}) {\n  const {width: frontWidth, height: frontHeight, centerPoints: frontCenter} = getPlanePointsBasicInfo(frontPoints);\n  const {width: backWidth, height: backHeight, centerPoints: backCenter} = getPlanePointsBasicInfo(backPoints);\n  return {\n    frontCenter,\n    backCenter,\n    frontWidth,\n    frontHeight,\n    backWidth,\n    backHeight,\n    isLeftSide: backCenter.x < frontCenter.x\n  };\n}\nfunction getPlainPointsByDiagonalPoints(p1, p2) {\n  return {\n    tl: {\n      x: Math.min(p1.x, p2.x),\n      y: Math.min(p1.y, p2.y)\n    },\n    tr: {\n      x: Math.max(p1.x, p2.x),\n      y: Math.min(p1.y, p2.y)\n    },\n    bl: {\n      x: Math.min(p1.x, p2.x),\n      y: Math.max(p1.y, p2.y)\n    },\n    br: {\n      x: Math.max(p1.x, p2.x),\n      y: Math.max(p1.y, p2.y)\n    }\n  };\n}\nfunction getMaxExternalQuadrilateral(points) {\n  const minX = Object.values(points).reduce((acc, coord) => coord.x < acc ? coord.x : acc, Number.MAX_SAFE_INTEGER);\n  const maxX = Object.values(points).reduce((acc, coord) => coord.x > acc ? coord.x : acc, 0);\n  const minY = Object.values(points).reduce((acc, coord) => coord.y < acc ? coord.y : acc, Number.MAX_SAFE_INTEGER);\n  const maxY = Object.values(points).reduce((acc, coord) => coord.y > acc ? coord.y : acc, 0);\n  return {\n    tl: {\n      x: minX,\n      y: minY\n    },\n    tr: {\n      x: maxX,\n      y: minY\n    },\n    bl: {\n      x: minX,\n      y: maxY\n    },\n    br: {\n      x: maxX,\n      y: maxY\n    }\n  };\n}\nfunction judgeCuboidLineIsRowOrColumn(pointList) {\n  const [firstPosition, secondPosition] = pointList;\n  if (CUBOID_ROW[firstPosition.position] === secondPosition.position) {\n    return ECuboidLineDirection.Row;\n  }\n  if (CUBOID_COLUMN[firstPosition.position] === secondPosition.position) {\n    return ECuboidLineDirection.Column;\n  }\n}\nfunction getPointsByBottomRightPoint({\n  coord,\n  points\n}) {\n  const {width, height} = getPlanePointsBasicInfo(points);\n  return {\n    br: coord,\n    tr: {\n      x: coord.x,\n      y: coord.y - height\n    },\n    tl: {\n      x: coord.x - width,\n      y: coord.y - height\n    },\n    bl: {\n      x: coord.x - width,\n      y: coord.y\n    }\n  };\n}\nfunction getPointsByBottomLeftPoint({\n  coord,\n  points\n}) {\n  const {width, height} = getPlanePointsBasicInfo(points);\n  return {\n    bl: coord,\n    tr: {\n      x: coord.x + width,\n      y: coord.y - height\n    },\n    tl: {\n      x: coord.x,\n      y: coord.y - height\n    },\n    br: {\n      x: coord.x + width,\n      y: coord.y\n    }\n  };\n}\nfunction getCuboidShowingSideLine({\n  frontPoints,\n  backPoints\n}) {\n  const {isLeftSide} = getCuboidBasicInfo({frontPoints, backPoints});\n  if (isLeftSide) {\n    return {\n      top: {\n        p1: frontPoints.tl,\n        p2: backPoints.tl\n      },\n      bottom: {\n        p1: frontPoints.bl,\n        p2: backPoints.bl\n      }\n    };\n  }\n  return {\n    top: {\n      p1: frontPoints.tr,\n      p2: backPoints.tr\n    },\n    bottom: {\n      p1: frontPoints.br,\n      p2: backPoints.br\n    }\n  };\n}\nfunction getPointsByIntersection({\n  frontPoints,\n  backPoints\n}) {\n  const {isLeftSide} = getCuboidBasicInfo({frontPoints, backPoints});\n  let newBackPoints = __spreadValues({}, backPoints);\n  const sideLine = getCuboidShowingSideLine({frontPoints, backPoints});\n  const intersectionPoint = LineToolUtils.lineIntersection({pointA: sideLine.bottom.p1, pointB: sideLine.bottom.p2}, {pointA: sideLine.top.p1, pointB: sideLine.top.p2});\n  if (isLeftSide) {\n    const newBRPoint = LineToolUtils.lineIntersection({pointA: backPoints.bl, pointB: backPoints.br}, {pointA: frontPoints.br, pointB: intersectionPoint});\n    if (newBRPoint) {\n      newBackPoints = __spreadProps(__spreadValues({}, backPoints), {\n        br: newBRPoint,\n        tr: {\n          x: newBRPoint.x,\n          y: backPoints.tl.y\n        }\n      });\n    }\n  } else {\n    const newBLPoint = LineToolUtils.lineIntersection({pointA: backPoints.bl, pointB: backPoints.br}, {pointA: frontPoints.bl, pointB: intersectionPoint});\n    if (newBLPoint) {\n      newBackPoints = __spreadProps(__spreadValues({}, backPoints), {\n        bl: newBLPoint,\n        tl: {\n          x: newBLPoint.x,\n          y: backPoints.tr.y\n        }\n      });\n    }\n  }\n  return {\n    backPoints: newBackPoints\n  };\n}\nfunction getBackPointsByFrontPoints({\n  frontPoints,\n  backPoints\n}) {\n  const {isLeftSide, frontHeight, backHeight} = getCuboidBasicInfo({frontPoints, backPoints});\n  let newBackPoints = __spreadValues({}, backPoints);\n  if (isLeftSide) {\n    newBackPoints = getPointsByBottomLeftPoint({coord: backPoints.bl, points: frontPoints});\n  } else {\n    newBackPoints = getPointsByBottomRightPoint({coord: backPoints.br, points: frontPoints});\n  }\n  if (frontHeight > backHeight) {\n    newBackPoints = getPointsByIntersection({frontPoints, backPoints}).backPoints;\n  }\n  return {frontPoints, backPoints: newBackPoints};\n}\nfunction getFrontPointsByBackPoints({\n  frontPoints,\n  backPoints\n}) {\n  const {isLeftSide, frontHeight, backHeight, frontWidth, backWidth} = getCuboidBasicInfo({\n    frontPoints,\n    backPoints\n  });\n  let newFrontPoints = __spreadValues({}, frontPoints);\n  let newBackPoints = backPoints;\n  if (isLeftSide || backWidth > frontWidth) {\n    newFrontPoints = getPointsByBottomLeftPoint({coord: frontPoints.bl, points: backPoints});\n  } else {\n    newFrontPoints = getPointsByBottomRightPoint({coord: frontPoints.br, points: backPoints});\n  }\n  if (frontHeight > backHeight) {\n    newFrontPoints.tl.y = frontPoints.tl.y;\n    newFrontPoints.tr.y = frontPoints.tr.y;\n    newBackPoints = getPointsByIntersection({backPoints, frontPoints}).backPoints;\n  }\n  if (frontWidth >= backWidth) {\n    Object.keys(newFrontPoints).forEach((key) => {\n      newFrontPoints[key].x = frontPoints[key].x;\n    });\n  }\n  return {\n    frontPoints: newFrontPoints,\n    backPoints: newBackPoints\n  };\n}\nfunction getCuboidAllSideLine({frontPoints, backPoints}) {\n  return [\n    {\n      p1: frontPoints.bl,\n      p2: backPoints.bl\n    },\n    {\n      p1: frontPoints.tl,\n      p2: backPoints.tl\n    },\n    {\n      p1: frontPoints.tr,\n      p2: backPoints.tr\n    },\n    {\n      p1: frontPoints.br,\n      p2: backPoints.br\n    }\n  ];\n}\nfunction getHighlightLines(cuboid) {\n  const {frontPoints, backPoints} = cuboid;\n  const {isLeftSide} = getCuboidBasicInfo(cuboid);\n  const frontLine = [\n    {\n      p1: frontPoints.tl,\n      p2: frontPoints.tr,\n      positions: [\n        {\n          plain: ECuboidPlain.Front,\n          position: ECuboidPosition.TL\n        },\n        {\n          plain: ECuboidPlain.Front,\n          position: ECuboidPosition.TR\n        }\n      ]\n    },\n    {\n      p1: frontPoints.tr,\n      p2: frontPoints.br,\n      plain: ECuboidPlain.Front,\n      positions: [\n        {\n          plain: ECuboidPlain.Front,\n          position: ECuboidPosition.TR\n        },\n        {\n          plain: ECuboidPlain.Front,\n          position: ECuboidPosition.BR\n        }\n      ]\n    },\n    {\n      p1: frontPoints.br,\n      p2: frontPoints.bl,\n      plain: ECuboidPlain.Front,\n      positions: [\n        {\n          plain: ECuboidPlain.Front,\n          position: ECuboidPosition.BR\n        },\n        {\n          plain: ECuboidPlain.Front,\n          position: ECuboidPosition.BL\n        }\n      ]\n    },\n    {\n      p1: frontPoints.bl,\n      p2: frontPoints.tl,\n      plain: ECuboidPlain.Front,\n      positions: [\n        {\n          plain: ECuboidPlain.Front,\n          position: ECuboidPosition.BL\n        },\n        {\n          plain: ECuboidPlain.Front,\n          position: ECuboidPosition.TL\n        }\n      ]\n    }\n  ];\n  if (isLeftSide) {\n    return [\n      ...frontLine,\n      {\n        p1: backPoints.tl,\n        p2: backPoints.bl,\n        positions: [\n          {\n            plain: ECuboidPlain.Back,\n            position: ECuboidPosition.TL\n          },\n          {\n            plain: ECuboidPlain.Back,\n            position: ECuboidPosition.BL\n          }\n        ]\n      }\n    ];\n  }\n  return [\n    ...frontLine,\n    {\n      p1: backPoints.tr,\n      p2: backPoints.br,\n      positions: [\n        {\n          plain: ECuboidPlain.Back,\n          position: ECuboidPosition.TR\n        },\n        {\n          plain: ECuboidPlain.Back,\n          position: ECuboidPosition.BR\n        }\n      ]\n    }\n  ];\n}\nfunction getHighlightPoints(cuboid) {\n  const {backPoints} = cuboid;\n  const {isLeftSide} = getCuboidBasicInfo(cuboid);\n  const frontPointsData = Object.entries(cuboid.frontPoints).map(([position, point]) => ({\n    positions: [\n      {\n        plain: ECuboidPlain.Front,\n        position\n      }\n    ],\n    point\n  }));\n  if (isLeftSide) {\n    return [\n      {point: backPoints.tl, positions: [{position: ECuboidPosition.TL, plain: ECuboidPlain.Back}]},\n      {point: backPoints.bl, positions: [{position: ECuboidPosition.BL, plain: ECuboidPlain.Back}]},\n      ...frontPointsData\n    ];\n  }\n  return [\n    {point: backPoints.tr, positions: [{position: ECuboidPosition.TR, plain: ECuboidPlain.Back}]},\n    {point: backPoints.br, positions: [{position: ECuboidPosition.BR, plain: ECuboidPlain.Back}]},\n    ...frontPointsData\n  ];\n}\nfunction getCuboidHoverRange(cuboid) {\n  const {frontPoints, backPoints} = cuboid;\n  const {backCenter, frontCenter, frontHeight, frontWidth, backHeight, backWidth, isLeftSide} = getCuboidBasicInfo(cuboid);\n  const diffWidth = Math.abs(frontWidth - backWidth);\n  const diffHeight = Math.abs(frontHeight - backHeight);\n  const diffCenterX = Math.abs(frontCenter.x - backCenter.x);\n  const diffCenterY = Math.abs(frontCenter.y - backCenter.y);\n  const isOverX = diffCenterX > diffWidth;\n  const isOverY = diffCenterY > diffHeight;\n  const isNested = !(isOverX || isOverY);\n  if (isNested) {\n    return [frontPoints.tl, frontPoints.tr, frontPoints.br, frontPoints.bl];\n  }\n  if (isOverY && !isOverX) {\n    return [frontPoints.tl, backPoints.tl, backPoints.tr, frontPoints.tr, frontPoints.br, frontPoints.bl];\n  }\n  if (isOverX && !isOverY) {\n    if (isLeftSide) {\n      return [frontPoints.tl, frontPoints.tr, frontPoints.br, frontPoints.bl, backPoints.bl, backPoints.tl];\n    }\n    return [frontPoints.tl, frontPoints.tr, backPoints.tr, backPoints.br, frontPoints.br, frontPoints.bl];\n  }\n  if (isOverX && isOverY) {\n    if (isLeftSide) {\n      return [backPoints.tl, backPoints.tr, frontPoints.tr, frontPoints.br, frontPoints.bl, backPoints.bl];\n    }\n    return [frontPoints.tl, backPoints.tl, backPoints.tr, backPoints.br, frontPoints.br, frontPoints.bl];\n  }\n  return [];\n}\nfunction getNewPointsAfterOffset({\n  offset,\n  frontPoints,\n  backPoints,\n  positions\n}) {\n  let newFrontPoints = cloneDeep(frontPoints);\n  let newBackPoints = cloneDeep(backPoints);\n  if ((positions == null ? void 0 : positions.length) === 2) {\n    const isFrontPlain = positions.every((v) => v.plain === ECuboidPlain.Front);\n    const isBackPlain = !isFrontPlain;\n    const lineDirection = judgeCuboidLineIsRowOrColumn([positions[0], positions[1]]);\n    const forbidX = lineDirection === ECuboidLineDirection.Row;\n    const forbidY = lineDirection === ECuboidLineDirection.Column;\n    let newOffset = offset;\n    if (forbidX) {\n      newOffset = {\n        x: 0,\n        y: offset.y\n      };\n    }\n    if (forbidY) {\n      newOffset = {\n        y: 0,\n        x: offset.x\n      };\n    }\n    if (isFrontPlain) {\n      positions == null ? void 0 : positions.forEach(({position}) => {\n        const points = newFrontPoints;\n        const movePoint = points[position];\n        points[position] = {\n          x: movePoint.x + newOffset.x,\n          y: movePoint.y + newOffset.y\n        };\n      });\n      newFrontPoints = getMaxExternalQuadrilateral(newFrontPoints);\n      newBackPoints = getMaxExternalQuadrilateral(newBackPoints);\n    }\n    if (isBackPlain) {\n      Object.keys(newBackPoints).forEach((key) => {\n        newBackPoints[key] = {\n          x: newBackPoints[key].x + newOffset.x,\n          y: newBackPoints[key].y + newOffset.y\n        };\n      });\n    }\n    const getNewPlainPoints = isFrontPlain ? getBackPointsByFrontPoints : getFrontPointsByBackPoints;\n    const {frontPoints: newFrontPoints2, backPoints: newBackPoints2} = getNewPlainPoints({\n      frontPoints: newFrontPoints,\n      backPoints: newBackPoints\n    });\n    newFrontPoints = newFrontPoints2;\n    newBackPoints = newBackPoints2;\n  }\n  return {\n    frontPoints: newFrontPoints,\n    backPoints: newBackPoints\n  };\n}\nfunction moveCuboidByCuboid({offset, cuboid}) {\n  const {frontPoints, backPoints} = cuboid;\n  const newFrontPoints = Object.entries(frontPoints).reduce((acc, [key, point]) => {\n    return __spreadProps(__spreadValues({}, acc), {\n      [key]: {\n        x: point.x + offset.x,\n        y: point.y + offset.y\n      }\n    });\n  }, {});\n  const newBackPoints = Object.entries(backPoints).reduce((acc, [key, point]) => {\n    return __spreadProps(__spreadValues({}, acc), {\n      [key]: {\n        x: point.x + offset.x,\n        y: point.y + offset.y\n      }\n    });\n  }, {});\n  return {\n    frontPoints: newFrontPoints,\n    backPoints: newBackPoints\n  };\n}\nfunction moveCuboidByLine({\n  offset,\n  cuboid,\n  positions\n}) {\n  const {frontPoints, backPoints} = cuboid;\n  return getNewPointsAfterOffset({\n    offset,\n    frontPoints,\n    backPoints,\n    positions\n  });\n}\nfunction moveCuboidByPoints({\n  offset,\n  cuboid,\n  positions\n}) {\n  if (!(positions == null ? void 0 : positions[0])) {\n    return;\n  }\n  const {frontPoints, backPoints} = cuboid;\n  const pointPosition = positions[0];\n  const isFrontPlain = pointPosition.plain === ECuboidPlain.Front;\n  const movePoints = isFrontPlain ? frontPoints : backPoints;\n  let movePoint = movePoints[pointPosition.position];\n  const diagonalPoint = movePoints[DIAGONAL_POINT[pointPosition.position]];\n  if (!movePoint || !diagonalPoint) {\n    return;\n  }\n  movePoint = Vector.add(movePoint, offset);\n  const newPlainsPoints = getPlainPointsByDiagonalPoints(movePoint, diagonalPoint);\n  const getNewPlainPoints = isFrontPlain ? getBackPointsByFrontPoints : getFrontPointsByBackPoints;\n  let payload = {\n    frontPoints,\n    backPoints: newPlainsPoints\n  };\n  if (isFrontPlain) {\n    payload = {\n      frontPoints: newPlainsPoints,\n      backPoints\n    };\n  }\n  return getNewPlainPoints(payload);\n}\nfunction getCuboidDragMove({\n  offset,\n  cuboid,\n  dragTarget,\n  positions\n}) {\n  switch (dragTarget) {\n    case EDragTarget.Cuboid: {\n      const newCuboidPoints = moveCuboidByCuboid({offset, cuboid});\n      return __spreadValues(__spreadValues({}, cuboid), newCuboidPoints);\n    }\n    case EDragTarget.Line: {\n      const newCuboidPoints = moveCuboidByLine({offset, cuboid, positions});\n      return __spreadValues(__spreadValues({}, cuboid), newCuboidPoints);\n    }\n    case EDragTarget.Point: {\n      const newCuboidPoints = moveCuboidByPoints({cuboid, offset, positions});\n      if (newCuboidPoints) {\n        return __spreadValues(__spreadValues({}, cuboid), newCuboidPoints);\n      }\n      break;\n    }\n    default: {\n      console.error(\"No DragTarget\");\n      break;\n    }\n  }\n}\nfunction getPointListsByDirection({\n  direction,\n  frontPoints,\n  backPoints\n}) {\n  if (direction && frontPoints && backPoints) {\n    let points = frontPoints;\n    switch (direction) {\n      case ECuboidDirection.Back:\n        points = backPoints;\n        break;\n      case ECuboidDirection.Left:\n        points = {\n          bl: backPoints.bl,\n          br: frontPoints.bl,\n          tl: backPoints.tl,\n          tr: frontPoints.tl\n        };\n        break;\n      case ECuboidDirection.Right:\n        points = {\n          bl: backPoints.br,\n          br: frontPoints.br,\n          tl: backPoints.tr,\n          tr: frontPoints.tr\n        };\n        break;\n      case ECuboidDirection.Top:\n        points = {\n          bl: backPoints.tl,\n          br: frontPoints.tl,\n          tl: backPoints.tr,\n          tr: frontPoints.tr\n        };\n        break;\n      default:\n        points = frontPoints;\n        break;\n    }\n    return AxisUtils.transformPlain2PointList(points);\n  }\n}\nfunction getToggleDirectionButtonOffset({\n  cuboid,\n  currentPos,\n  zoom\n}) {\n  const {frontPoints} = cuboid;\n  const toggleSize = {\n    width: 40,\n    height: 74\n  };\n  const frontPointsCenter = {\n    x: (frontPoints.bl.x + frontPoints.tl.x) / 2,\n    y: (frontPoints.bl.y + frontPoints.tl.y) / 2\n  };\n  const leftOffset = toggleSize.width + 10;\n  const topOffset = toggleSize.height / 2;\n  const moveCoordinate = {\n    x: frontPointsCenter.x,\n    y: frontPointsCenter.y\n  };\n  const coordinate = AxisUtils.getOffsetCoordinate(moveCoordinate, currentPos, zoom);\n  return {\n    left: coordinate.x - leftOffset,\n    top: coordinate.y - topOffset\n  };\n}\nfunction getCuboidTextAttributeOffset({\n  cuboid,\n  currentPos,\n  zoom,\n  leftOffset = 16,\n  topOffset = 2\n}) {\n  const {frontPoints} = cuboid;\n  const moveCoordinate = {\n    x: frontPoints.bl.x,\n    y: frontPoints.bl.y\n  };\n  const coordinate = AxisUtils.getOffsetCoordinate(moveCoordinate, currentPos, zoom);\n  return {\n    left: coordinate.x + leftOffset,\n    top: coordinate.y + topOffset\n  };\n}\nfunction isCuboidWithInLimits({cuboid, config}) {\n  const {minHeight, minWidth} = config;\n  const {width, height} = getPlanePointsBasicInfo(cuboid.frontPoints);\n  return width >= minWidth && height >= minHeight;\n}\n\nexport { getBackPointsByFrontPoints, getCuboidAllSideLine, getCuboidBasicInfo, getCuboidDragMove, getCuboidHoverRange, getCuboidShowingSideLine, getCuboidTextAttributeOffset, getFrontPointsByBackPoints, getHighlightLines, getHighlightPoints, getMaxExternalQuadrilateral, getNewPointsAfterOffset, getPlainPointsByDiagonalPoints, getPlanePointsBasicInfo, getPointListsByDirection, getPointsByBottomLeftPoint, getPointsByBottomRightPoint, getPointsByIntersection, getToggleDirectionButtonOffset, isCuboidWithInLimits, judgeCuboidLineIsRowOrColumn };\n","import { EToolName, ELineTypes } from '../../constant/tool.js';\nimport MathUtils from '../MathUtils.js';\nimport PolygonUtils from './PolygonUtils.js';\nimport LineToolUtils, { POINT_RADIUS } from './LineToolUtils.js';\nimport { getHighlightPoints, getHighlightLines, getCuboidHoverRange } from './CuboidUtils.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass AxisUtils {\n  static getOffsetCoordinate(coordinate, currentPos, zoom) {\n    return {\n      x: coordinate.x * zoom + currentPos.x,\n      y: coordinate.y * zoom + currentPos.y\n    };\n  }\n  static changeDrawOutsideTarget(coord, currentPos, imgInfo, drawOutsideTarget, basicResult, zoom) {\n    if (typeof drawOutsideTarget === \"boolean\" && !drawOutsideTarget) {\n      if (basicResult && zoom) {\n        if (coord.x - currentPos.x > (basicResult.x + basicResult.width) * zoom) {\n          coord.x = (basicResult.x + basicResult.width) * zoom + currentPos.x;\n        }\n        if (coord.x - currentPos.x < basicResult.x * zoom) {\n          coord.x = basicResult.x * zoom + currentPos.x;\n        }\n        if (coord.y - currentPos.y > (basicResult.y + basicResult.height) * zoom) {\n          coord.y = (basicResult.y + basicResult.height) * zoom + currentPos.y;\n        }\n        if (coord.y - currentPos.y < basicResult.y * zoom) {\n          coord.y = basicResult.y * zoom + currentPos.y;\n        }\n      } else {\n        if (coord.x - currentPos.x > imgInfo.width) {\n          coord.x = imgInfo.width + currentPos.x;\n        }\n        if (coord.x - currentPos.x < 0) {\n          coord.x = currentPos.x;\n        }\n        if (coord.y - currentPos.y > imgInfo.height) {\n          coord.y = imgInfo.height + currentPos.y;\n        }\n        if (coord.y - currentPos.y < 0) {\n          coord.y = currentPos.y;\n        }\n      }\n    }\n    return coord;\n  }\n  static changeCoordinateByRotate(coordinate, rotate, imgSize) {\n    const {width, height} = imgSize;\n    const {x, y} = coordinate;\n    switch (rotate % 360) {\n      case 90:\n        return {\n          x: height - y,\n          y: x\n        };\n      case 180:\n        return {\n          x: width - x,\n          y: height - y\n        };\n      case 270:\n        return {\n          x: y,\n          y: width - x\n        };\n      default:\n        return coordinate;\n    }\n  }\n  static changeRectByZoom(rect, zoom, currentPos = {x: 0, y: 0}) {\n    return __spreadProps(__spreadValues({}, rect), {\n      x: rect.x * zoom + currentPos.x,\n      y: rect.y * zoom + currentPos.y,\n      width: rect.width * zoom,\n      height: rect.height * zoom\n    });\n  }\n  static changePointByZoom(point, zoom, currentPos = {x: 0, y: 0}) {\n    return __spreadProps(__spreadValues({}, point), {\n      x: point.x * zoom + currentPos.x,\n      y: point.y * zoom + currentPos.y\n    });\n  }\n  static changePointListByZoom(pointList, zoom, currentPos = {x: 0, y: 0}) {\n    return pointList == null ? void 0 : pointList.map((point) => {\n      return this.changePointByZoom(point, zoom, currentPos);\n    });\n  }\n  static changePlanePointByZoom(planePoints, zoom, currentPos = {x: 0, y: 0}) {\n    return Object.entries(planePoints).reduce((acc, [key, coord]) => {\n      const newCoord = AxisUtils.changePointByZoom(coord, zoom, currentPos);\n      return __spreadProps(__spreadValues({}, acc), {\n        [key]: newCoord\n      });\n    }, {});\n  }\n  static changeCuboidByZoom(cuboid, zoom, currentPos = {x: 0, y: 0}) {\n    return __spreadProps(__spreadValues({}, cuboid), {\n      frontPoints: this.changePlanePointByZoom(cuboid.frontPoints, zoom, currentPos),\n      backPoints: cuboid.backPoints ? this.changePlanePointByZoom(cuboid.backPoints, zoom, currentPos) : cuboid.backPoints\n    });\n  }\n  static transformPlain2PointList({tl, tr, br, bl}) {\n    return [tl, tr, br, bl];\n  }\n  static axisArea(axis, radius = 3) {\n    const {x, y} = axis;\n    const axisArray = [];\n    for (let cX = x - radius; cX < x + radius; cX += radius / 3) {\n      for (let cY = y - radius; cY < y + radius; cY += radius / 3) {\n        axisArray.push({x: cX, y: cY});\n      }\n    }\n    return axisArray;\n  }\n  static getOriginCoordinateWithOffsetCoordinate(coord, zoom = 1, currentPos = {\n    x: 0,\n    y: 0\n  }) {\n    return {\n      x: (coord.x - currentPos.x) / zoom,\n      y: (coord.y - currentPos.y) / zoom\n    };\n  }\n  static returnClosePointIndex(checkPoint, polygonPoints, scope = 3) {\n    let pointIndex = -1;\n    for (let i = 0; i < polygonPoints.length; i++) {\n      const data = polygonPoints[i];\n      if (this.getIsInScope(checkPoint, data, scope)) {\n        pointIndex = i;\n      }\n    }\n    return pointIndex;\n  }\n  static isCloseCuboid(checkPoint, cuboid, options = {scope: 5, zoom: 1}) {\n    const points = getHighlightPoints(cuboid);\n    const {scope = 5} = options;\n    for (let i = 0; i < points.length; i++) {\n      const pointData = points[i];\n      if (this.getIsInScope(checkPoint, pointData.point, scope)) {\n        return true;\n      }\n    }\n    const lines = getHighlightLines(cuboid);\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n      const {length} = MathUtils.getFootOfPerpendicular(checkPoint, line.p1, line.p2, true);\n      if (length < scope) {\n        return true;\n      }\n    }\n    if (PolygonUtils.isInPolygon(checkPoint, getCuboidHoverRange(cuboid))) {\n      return true;\n    }\n    return false;\n  }\n  static isCloseCuboidList(checkPoint, cuboidList, options = {scope: 5, zoom: 1}) {\n    return cuboidList.some((cuboid) => this.isCloseCuboid(checkPoint, cuboid, options));\n  }\n  static returnClosePointOrLineInCuboid(checkPoint, cuboid, options = {scope: 5, zoom: 1}) {\n    const points = getHighlightPoints(cuboid);\n    const {scope = 5, zoom = 1} = options;\n    for (let i = 0; i < points.length; i++) {\n      const pointData = points[i];\n      if (this.getIsInScope(checkPoint, pointData.point, scope)) {\n        return [\n          {\n            type: \"point\",\n            points: [this.changePointByZoom(points[i].point, zoom)],\n            originCuboid: cuboid,\n            positions: pointData.positions\n          }\n        ];\n      }\n    }\n    let minLength = scope;\n    const lines = getHighlightLines(cuboid);\n    let linePoints;\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n      const {length} = MathUtils.getFootOfPerpendicular(checkPoint, line.p1, line.p2, true);\n      if (length < minLength) {\n        minLength = length;\n        linePoints = [\n          {\n            type: \"line\",\n            points: this.changePointListByZoom([line.p1, line.p2], zoom),\n            originCuboid: cuboid,\n            positions: line.positions\n          }\n        ];\n      }\n    }\n    if (linePoints) {\n      return linePoints;\n    }\n  }\n  static getIsInScope(currentCoord, targetCoord, scope) {\n    if (Math.abs(currentCoord.x - targetCoord.x) < scope && Math.abs(currentCoord.y - targetCoord.y) < scope) {\n      return true;\n    }\n    return false;\n  }\n}\nclass CoordinateUtils {\n  constructor(props) {\n    this.currentPos = props.currentPos;\n    this.zoom = props.zoom;\n    this.basicImgInfo = props.basicImgInfo;\n    this.dependToolName = \"\";\n  }\n  get isDependPolygon() {\n    return this.dependToolName === EToolName.Polygon;\n  }\n  get isDependRect() {\n    return this.dependToolName === EToolName.Rect;\n  }\n  get isDependOriginalImage() {\n    return this.dependToolName === \"\";\n  }\n  getAbsCoord(renderCoord) {\n    return {\n      x: (renderCoord.x - this.currentPos.x) / this.zoom,\n      y: (renderCoord.y - this.currentPos.y) / this.zoom\n    };\n  }\n  getRenderCoord(absCoord) {\n    return {\n      x: absCoord.x * this.zoom + this.currentPos.x,\n      y: absCoord.y * this.zoom + this.currentPos.y\n    };\n  }\n  coordInsideRect(absCoord, rect) {\n    const {x, y, width, height} = rect;\n    return {\n      x: MathUtils.withinRange(absCoord.x, [x, x + width]),\n      y: MathUtils.withinRange(absCoord.y, [y, y + height])\n    };\n  }\n  getPolygonPointList(lineType, pointList) {\n    return lineType === ELineTypes.Curve ? PolygonUtils.createSmoothCurvePointsFromPointList(pointList) : pointList;\n  }\n  getIntersection(curCoord, preCoord, polygonPointListToLineList) {\n    const pointA = this.getRenderCoord(preCoord);\n    const pointB = this.getRenderCoord(curCoord);\n    const drawingLine = {\n      pointA,\n      pointB\n    };\n    const intersection = LineToolUtils.calcOptimalIntersection(polygonPointListToLineList, drawingLine, pointA, POINT_RADIUS, this.zoom);\n    return intersection;\n  }\n  coordInsidePolygon(curCoord, preCoord, polygon, polygonToolConfig) {\n    const {pointList} = polygon;\n    const lineType = polygonToolConfig == null ? void 0 : polygonToolConfig.lineType;\n    if (pointList.length === 0) {\n      return curCoord;\n    }\n    const polygonPointList = this.getPolygonPointList(lineType, pointList);\n    const isInPolygon = PolygonUtils.isInPolygon(curCoord, polygonPointList);\n    if (isInPolygon) {\n      return curCoord;\n    }\n    const polygonPointListToLineList = polygonPointList.concat(polygonPointList[0]).map((i) => this.getRenderCoord(i));\n    const intersection = this.getIntersection(curCoord, preCoord, polygonPointListToLineList);\n    if (intersection) {\n      return this.getAbsCoord(intersection == null ? void 0 : intersection.point);\n    }\n    return curCoord;\n  }\n  coordInsideImage(coord) {\n    return this.coordInsideRect(coord, __spreadProps(__spreadValues({}, this.basicImgInfo), {x: 0, y: 0}));\n  }\n  getNextCoordByDependTool(curAbsCoord, preAbsCoord) {\n    if (this.isDependRect) {\n      return this.coordInsideRect(curAbsCoord, this.basicResult);\n    }\n    if (this.isDependPolygon) {\n      return this.coordInsidePolygon(curAbsCoord, preAbsCoord, this.basicResult, this.dependToolConfig);\n    }\n    if (this.isDependOriginalImage) {\n      return this.coordInsideImage(curAbsCoord);\n    }\n  }\n  setDependInfo(dependToolName, dependToolConfig) {\n    this.dependToolName = dependToolName != null ? dependToolName : \"\";\n    this.dependToolConfig = dependToolName ? dependToolConfig : void 0;\n  }\n  setBasicImgInfo(basicImgInfo) {\n    this.basicImgInfo = basicImgInfo;\n  }\n  setBasicResult(basicResult) {\n    this.basicResult = basicResult;\n  }\n  setZoomAndCurrentPos(zoom, currentPos) {\n    this.zoom = zoom;\n    this.currentPos = currentPos;\n  }\n  isCoordInsideTarget(coord) {\n    if (this.isDependPolygon) {\n      return this.isInBasicPolygon(coord);\n    }\n    if (this.isDependRect) {\n      const {x, y, width, height} = this.basicResult;\n      const rectHorizontalRange = [x, x + width];\n      const rectVerticalRange = [y, y + height];\n      return MathUtils.isInRange(coord.x, rectHorizontalRange) && MathUtils.isInRange(coord.y, rectVerticalRange);\n    }\n    return MathUtils.isInRange(coord.x, [0, this.basicImgInfo.width]) && MathUtils.isInRange(coord.y, [0, this.basicImgInfo.height]);\n  }\n  isInBasicPolygon(coord) {\n    var _a, _b;\n    return PolygonUtils.isInPolygon(coord, ((_a = this.basicResult) == null ? void 0 : _a.pointList) || [], (_b = this.dependToolConfig) == null ? void 0 : _b.lineType);\n  }\n}\n\nexport { CoordinateUtils, AxisUtils as default };\n","import { polygon, difference, union } from '@turf/turf';\nimport { ERotateDirection } from '../../constant/annotation.js';\nimport CommonToolUtils from './CommonToolUtils.js';\nimport { ELineTypes, SEGMENT_NUMBER } from '../../constant/tool.js';\nimport AxisUtils from './AxisUtils.js';\nimport MathUtils from '../MathUtils.js';\nimport LineToolUtils from './LineToolUtils.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass PolygonUtils {\n  static getHoverPolygonID(checkPoint, polygonPoints, scope = 3, lineType = ELineTypes.Line) {\n    let hoverPolygonID = \"\";\n    let minSize = Infinity;\n    const axisList = AxisUtils.axisArea(checkPoint, scope);\n    polygonPoints.forEach((p) => {\n      if (p.pointList) {\n        axisList.forEach((v) => {\n          const size = this.calcPolygonSize(p.pointList);\n          if (this.isInPolygon(v, p.pointList, lineType) && size < minSize) {\n            hoverPolygonID = p.id;\n            minSize = size;\n          }\n        });\n      }\n    });\n    return hoverPolygonID;\n  }\n  static calcPolygonSize(pointList = []) {\n    if ((pointList == null ? void 0 : pointList.length) <= 2) {\n      return 0;\n    }\n    const len = pointList.length;\n    const size = pointList.reduce((acc, cur, index, src) => {\n      const nextVal = src[(index + 1) % len];\n      return acc + cur.x * nextVal.y - nextVal.x * cur.y;\n    }, 0);\n    return Math.abs(size) / 2;\n  }\n  static isInPolygon(checkPoint, polygonPoints, lineType = ELineTypes.Line) {\n    let counter = 0;\n    let i;\n    let xinters;\n    let p1;\n    let p2;\n    polygonPoints = [...polygonPoints];\n    if (lineType === ELineTypes.Curve) {\n      polygonPoints = this.createSmoothCurvePoints(polygonPoints.reduce((acc, cur) => {\n        return [...acc, cur.x, cur.y];\n      }, []), 0.5, true, 20);\n    }\n    [p1] = polygonPoints;\n    const pointCount = polygonPoints.length;\n    for (i = 1; i <= pointCount; i++) {\n      p2 = polygonPoints[i % pointCount];\n      if (checkPoint.x > Math.min(p1.x, p2.x) && checkPoint.x <= Math.max(p1.x, p2.x)) {\n        if (checkPoint.y <= Math.max(p1.y, p2.y)) {\n          if (p1.x !== p2.x) {\n            xinters = (checkPoint.x - p1.x) * (p2.y - p1.y) / (p2.x - p1.x) + p1.y;\n            if (p1.y === p2.y || checkPoint.y <= xinters) {\n              counter++;\n            }\n          }\n        }\n      }\n      p1 = p2;\n    }\n    if (counter % 2 === 0) {\n      return false;\n    }\n    return true;\n  }\n  static createSmoothCurvePointsFromPointList(pointList, numberOfSegments = SEGMENT_NUMBER) {\n    const newPoints = this.createSmoothCurvePoints(pointList.reduce((acc, cur) => {\n      return [...acc, cur.x, cur.y];\n    }, []), 0.5, false, numberOfSegments);\n    return newPoints.map((p, i) => {\n      var _a;\n      const pos = i / (SEGMENT_NUMBER + 1);\n      const v = Math.floor(pos);\n      const data = (_a = pointList[v]) != null ? _a : {};\n      if (v === pos) {\n        return __spreadValues(__spreadValues({}, data), p);\n      }\n      return __spreadValues({\n        specialEdge: data.specialEdge\n      }, p);\n    });\n  }\n  static createSmoothCurvePoints(points, tension = 0.5, closed = false, numberOfSegments = SEGMENT_NUMBER) {\n    if (points.length < 4) {\n      return points;\n    }\n    const result = [];\n    const ps = points.slice(0);\n    let x;\n    let y;\n    let t1x;\n    let t2x;\n    let t1y;\n    let t2y;\n    let c1;\n    let c2;\n    let c3;\n    let c4;\n    let st;\n    let t;\n    let i;\n    if (closed) {\n      ps.unshift(points[points.length - 1]);\n      ps.unshift(points[points.length - 2]);\n      ps.unshift(points[points.length - 1]);\n      ps.unshift(points[points.length - 2]);\n      ps.push(points[0]);\n      ps.push(points[1]);\n    } else {\n      ps.unshift(points[1]);\n      ps.unshift(points[0]);\n      ps.push(points[points.length - 2]);\n      ps.push(points[points.length - 1]);\n    }\n    for (i = 2; i < ps.length - 4; i += 2) {\n      t1x = (ps[i + 2] - ps[i - 2]) * tension;\n      t2x = (ps[i + 4] - ps[i - 0]) * tension;\n      t1y = (ps[i + 3] - ps[i - 1]) * tension;\n      t2y = (ps[i + 5] - ps[i + 1]) * tension;\n      for (t = 0; t <= numberOfSegments; t++) {\n        st = t / numberOfSegments;\n        c1 = 2 * Math.pow(st, 3) - 3 * Math.pow(st, 2) + 1;\n        c2 = -(2 * Math.pow(st, 3)) + 3 * Math.pow(st, 2);\n        c3 = Math.pow(st, 3) - 2 * Math.pow(st, 2) + st;\n        c4 = Math.pow(st, 3) - Math.pow(st, 2);\n        x = c1 * ps[i] + c2 * ps[i + 2] + c3 * t1x + c4 * t2x;\n        y = c1 * ps[i + 1] + c2 * ps[i + 3] + c3 * t1y + c4 * t2y;\n        result.push(x);\n        result.push(y);\n      }\n    }\n    const formatResult = [];\n    for (let j = 0; j < result.length - 1; j += 2) {\n      formatResult.push({\n        x: result[j],\n        y: result[j + 1]\n      });\n    }\n    if (closed) {\n      for (let m = 0; m < numberOfSegments + 1; m++) {\n        const d = formatResult.shift();\n        formatResult.push(d);\n      }\n    }\n    return formatResult;\n  }\n  static getPolygonByID(polygonList, id) {\n    return polygonList.find((p) => p.id === id);\n  }\n  static getPolygonByIDs(polygonList, ids) {\n    if (ids && (ids == null ? void 0 : ids.length) > 0) {\n      return polygonList.filter((p) => ids.includes(p.id));\n    }\n    return [];\n  }\n  static getHoverEdgeIndex(checkPoint, pointList, lineType = ELineTypes.Line, scope = 3) {\n    let points = [...pointList];\n    if (lineType === ELineTypes.Curve) {\n      points = this.createSmoothCurvePoints(pointList.reduce((acc, cur) => {\n        return [...acc, cur.x, cur.y];\n      }, []), 0.5, true, SEGMENT_NUMBER);\n    } else if (lineType === ELineTypes.Line) {\n      points.push(points[0]);\n    }\n    let edgeIndex = -1;\n    let minLength = scope;\n    for (let i = 0; i < points.length - 1; i++) {\n      const {length} = MathUtils.getFootOfPerpendicular(checkPoint, points[i], points[i + 1]);\n      if (length < minLength) {\n        edgeIndex = i;\n        minLength = length;\n      }\n    }\n    if (edgeIndex === -1) {\n      return -1;\n    }\n    if (lineType === ELineTypes.Curve) {\n      return Math.floor(edgeIndex / SEGMENT_NUMBER);\n    }\n    return edgeIndex;\n  }\n  static getClosestPoint(coordinate, polygonList, lineType = ELineTypes.Line, range = 3, option) {\n    var _a;\n    let hasClosed = false;\n    const isClose = (_a = option == null ? void 0 : option.isClose) != null ? _a : true;\n    let closestPolygonID = \"\";\n    let closestEdgeIndex = -1;\n    let min = Infinity;\n    let dropFoot = coordinate;\n    const numberOfSegments = 20;\n    let isCloseNode = false;\n    polygonList.forEach((v) => {\n      if (isCloseNode) {\n        return;\n      }\n      if (!v.pointList) {\n        return;\n      }\n      switch (lineType) {\n        case ELineTypes.Line:\n          {\n            const allLine = CommonToolUtils.findAllLine(v.pointList, isClose);\n            allLine.forEach((line, lineIndex) => {\n              if (isCloseNode) {\n                return;\n              }\n              let {length, footPoint} = MathUtils.getFootOfPerpendicular(coordinate, line.point1, line.point2);\n              const twoPointDistance1 = MathUtils.getLineLength(line.point1, coordinate);\n              const twoPointDistance2 = MathUtils.getLineLength(line.point2, coordinate);\n              if (twoPointDistance1 < range * 2) {\n                footPoint = line.point1;\n                length = twoPointDistance1;\n                isCloseNode = true;\n              }\n              if (twoPointDistance2 < range * 2) {\n                footPoint = line.point2;\n                length = twoPointDistance2;\n                isCloseNode = true;\n              }\n              if (length < min && length < range) {\n                closestPolygonID = v.id;\n                closestEdgeIndex = lineIndex;\n                min = length;\n                dropFoot = footPoint;\n                hasClosed = true;\n              }\n            });\n          }\n          break;\n        case ELineTypes.Curve:\n          {\n            const points = this.createSmoothCurvePoints(v.pointList.reduce((acc, cur) => {\n              return [...acc, cur.x, cur.y];\n            }, []), 0.5, isClose, numberOfSegments);\n            for (let i = 0; i < points.length - 1; i++) {\n              const {length, footPoint} = MathUtils.getFootOfPerpendicular(coordinate, points[i], points[i + 1]);\n              if (length < min && length < range) {\n                closestPolygonID = v.id;\n                closestEdgeIndex = Math.floor(i / (numberOfSegments + 1));\n                min = length;\n                dropFoot = footPoint;\n                hasClosed = true;\n              }\n            }\n          }\n          break;\n      }\n    });\n    return {dropFoot, closestEdgeIndex, closestPolygonID, hasClosed};\n  }\n  static isPointListInPolygon(pointList, polygonPoints, lineType = ELineTypes.Line) {\n    return pointList.every((v) => this.isInPolygon(v, polygonPoints, lineType));\n  }\n  static isPointListOutSidePolygon(pointList, polygonPoints, lineType = ELineTypes.Line) {\n    return pointList.some((v) => !this.isInPolygon(v, polygonPoints, lineType));\n  }\n  static getPolygonArea(pointList) {\n    let total = 0;\n    for (let i = 0, l = pointList.length; i < l; i++) {\n      const addX = pointList[i].x;\n      const addY = pointList[i === pointList.length - 1 ? 0 : i + 1].y;\n      const subX = pointList[i === pointList.length - 1 ? 0 : i + 1].x;\n      const subY = pointList[i].y;\n      total += addX * addY * 0.5;\n      total -= subX * subY * 0.5;\n    }\n    return Math.abs(total);\n  }\n  static updatePolygonByRotate(direction, angle = 1, pointList) {\n    let rotate = 1;\n    if (direction === ERotateDirection.Anticlockwise) {\n      rotate = -1;\n    }\n    rotate *= angle;\n    return MathUtils.rotateRectPointList(rotate, pointList);\n  }\n  static deletePolygonLastPoint(acc, cur, index, array) {\n    if (index === array.length - 1) {\n      return acc;\n    }\n    return [\n      ...acc,\n      {\n        x: cur[0],\n        y: cur[1]\n      }\n    ];\n  }\n  static concatBeginAndEnd(array) {\n    if (array.length < 1) {\n      return array;\n    }\n    return [...array, array[0]];\n  }\n  static segmentPolygonByPolygon(pointList, polygonList) {\n    var _a, _b;\n    try {\n      let selectedPolygon = polygon([[...PolygonUtils.concatBeginAndEnd(pointList.map((v) => [v.x, v.y]))]]);\n      polygonList.forEach((v) => {\n        const backgroundPolygon = polygon([[...PolygonUtils.concatBeginAndEnd(v.pointList.map((p) => [p.x, p.y]))]]);\n        const diff = difference(selectedPolygon, backgroundPolygon);\n        if (diff) {\n          selectedPolygon = diff;\n        }\n      });\n      const resultList = (_b = (_a = selectedPolygon == null ? void 0 : selectedPolygon.geometry) == null ? void 0 : _a.coordinates.map((p) => {\n        var _a2;\n        if (((_a2 = selectedPolygon == null ? void 0 : selectedPolygon.geometry) == null ? void 0 : _a2.type) === \"MultiPolygon\") {\n          return p[0].reduce(PolygonUtils.deletePolygonLastPoint, []);\n        }\n        return p.reduce(PolygonUtils.deletePolygonLastPoint, []);\n      })) != null ? _b : [];\n      return resultList.reduce((acc, pointLists) => {\n        const len = pointLists.length;\n        const newPointList = pointLists.filter((point, i) => {\n          const nextIndex = (i + 1) % len;\n          if (AxisUtils.getIsInScope(point, pointLists[nextIndex], 1)) {\n            return false;\n          }\n          return true;\n        });\n        if (newPointList.length < 3) {\n          return acc;\n        }\n        return [...acc, newPointList];\n      }, []);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  static getPolygonPointList(selectedPolygonID, polygonList) {\n    const p = polygonList.find((v) => v.id === selectedPolygonID);\n    if (p && p.pointList && p.pointList.length > 0) {\n      return p.pointList;\n    }\n    return [];\n  }\n  static getWrapPolygonIndex(pointList, polygonList) {\n    return polygonList.findIndex((p) => PolygonUtils.isPointListInPolygon(pointList, p.pointList));\n  }\n  static clipPolygonFromWrapPolygon(pointList, wrapPointList) {\n    const wrapDirection = PolygonUtils.isPolygonClosewise(wrapPointList);\n    const selectedDirection = PolygonUtils.isPolygonClosewise(pointList);\n    const linkIndex = PolygonUtils.getClosePointDistanceFromPolygon(pointList[0], wrapPointList);\n    const linkPoint = wrapPointList[linkIndex];\n    let newPointList = [\n      ...wrapPointList.slice(0, linkIndex),\n      linkPoint,\n      ...pointList,\n      pointList[0],\n      ...wrapPointList.slice(linkIndex, wrapPointList.length)\n    ];\n    if (wrapDirection === selectedDirection) {\n      newPointList = [\n        ...wrapPointList.slice(0, linkIndex),\n        linkPoint,\n        pointList[0],\n        ...pointList.reverse(),\n        ...wrapPointList.slice(linkIndex, wrapPointList.length)\n      ];\n    }\n    return newPointList;\n  }\n  static isPolygonClosewise(p) {\n    const n = p.length;\n    let i;\n    let j;\n    let k;\n    let count = 0;\n    let z;\n    if (n < 3) {\n      return 0;\n    }\n    for (i = 0; i < n; i++) {\n      j = (i + 1) % n;\n      k = (i + 2) % n;\n      z = (p[j].x - p[i].x) * (p[k].y - p[j].y);\n      z -= (p[j].y - p[i].y) * (p[k].x - p[j].x);\n      if (z < 0) {\n        count--;\n      } else if (z > 0) {\n        count++;\n      }\n    }\n    if (count > 0) {\n      return 1;\n    }\n    if (count < 0) {\n      return -1;\n    }\n    return 0;\n  }\n  static getClosePointDistanceFromPolygon(point, pointList) {\n    let minLen = Number.MAX_SAFE_INTEGER;\n    let index = -1;\n    pointList.forEach((p, i) => {\n      const distance = LineToolUtils.calcDistance(point, p);\n      if (distance < minLen) {\n        minLen = distance;\n        index = i;\n      }\n    });\n    return index;\n  }\n  static combinePolygonWithPolygon(selectedPolygon, combinedPolygon) {\n    var _a, _b;\n    try {\n      const turfSelectedPolygon = polygon([\n        [...PolygonUtils.concatBeginAndEnd(selectedPolygon.pointList.map((v) => [v.x, v.y]))]\n      ]);\n      const turfCombinedPolygon = polygon([\n        [...PolygonUtils.concatBeginAndEnd(combinedPolygon.pointList.map((v) => [v.x, v.y]))]\n      ]);\n      const unionPolygon = union(turfSelectedPolygon, turfCombinedPolygon);\n      const unionList = [];\n      const newPolygon = selectedPolygon;\n      if (((_b = (_a = unionPolygon == null ? void 0 : unionPolygon.geometry) == null ? void 0 : _a.coordinates) == null ? void 0 : _b.length) === 1) {\n        unionList.push(combinedPolygon.id);\n        const pointList = unionPolygon == null ? void 0 : unionPolygon.geometry.coordinates.map((p) => {\n          var _a2;\n          if (((_a2 = unionPolygon == null ? void 0 : unionPolygon.geometry) == null ? void 0 : _a2.type) === \"MultiPolygon\") {\n            return p[0].reduce(PolygonUtils.deletePolygonLastPoint, []);\n          }\n          return p.reduce(PolygonUtils.deletePolygonLastPoint, []);\n        })[0];\n        newPolygon.pointList = pointList;\n      }\n      return {\n        newPolygon,\n        unionList\n      };\n    } catch (e) {\n      console.error(e);\n    }\n  }\n}\n\nexport { PolygonUtils as default };\n","import WorkerFactory from '../_virtual/MathUtilsWorker.js';\nimport { SEGMENT_NUMBER, DEFAULT_TEXT_MAX_WIDTH, DEFAULT_FONT, ELineTypes } from '../constant/tool.js';\nimport { createSmoothCurvePointsFromPointList } from './tool/polygonTool.js';\nimport PolygonUtils from './tool/PolygonUtils.js';\nimport Vector from './VectorUtils.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __pow = Math.pow;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass Trigonometric {\n  static tanAPlusB(tanA, tanB) {\n    return (tanA + tanB) / (1 - tanA * tanB);\n  }\n  static sinAPlusB(sinA, cosA, sinB, cosB) {\n    return cosB * sinA + cosA * sinB;\n  }\n  static cosAPlusB(sinA, cosA, sinB, cosB) {\n    return cosA * cosB - sinA * sinB;\n  }\n}\nconst _MathUtils = class {\n  static getRotate(rotate) {\n    if (rotate + 90 >= 360) {\n      return rotate + 90 - 360;\n    }\n    return rotate + 90;\n  }\n  static getLineLength(point1, point2) {\n    return Math.sqrt(Math.pow(point2.y - point1.y, 2) + Math.pow(point2.x - point1.x, 2));\n  }\n  static getTextArea(canvas, text, maxWidth = DEFAULT_TEXT_MAX_WIDTH, font = DEFAULT_FONT, lineHeight) {\n    if (typeof text !== \"string\") {\n      return {\n        width: 0,\n        height: 0\n      };\n    }\n    const context = canvas.getContext(\"2d\");\n    context.font = font;\n    let height = 0;\n    if (typeof lineHeight === \"undefined\") {\n      lineHeight = canvas && parseInt(window.getComputedStyle(canvas).lineHeight, 10) || parseInt(window.getComputedStyle(document.body).lineHeight, 10);\n    }\n    const fontHeight = canvas && parseInt(window.getComputedStyle(canvas).fontSize, 10) || parseInt(window.getComputedStyle(document.body).fontSize, 10) || 0;\n    const arrParagraph = text.split(\"\\n\");\n    let lineWidth = 0;\n    for (let i = 0; i < arrParagraph.length; i++) {\n      const arrText = arrParagraph[i].split(\"\");\n      let line = \"\";\n      for (let n = 0; n < arrText.length; n++) {\n        const testLine = line + arrText[n];\n        const metrics = context.measureText(testLine);\n        const textWidth = metrics.width;\n        if (textWidth > maxWidth && n > 0) {\n          line = arrText[n];\n          height += lineHeight;\n          lineWidth = maxWidth;\n        } else {\n          line = testLine;\n          if (textWidth > lineWidth) {\n            lineWidth = textWidth;\n          }\n        }\n      }\n      if (i !== arrParagraph.length - 1) {\n        height += lineHeight;\n      }\n    }\n    return {\n      width: lineWidth,\n      height: height + fontHeight,\n      lineHeight,\n      fontHeight\n    };\n  }\n  static getLineCenterPoint(line) {\n    const [p1, p2] = line;\n    const vector = Vector.getVector(p1, p2);\n    return {\n      x: p1.x + vector.x / 2,\n      y: p1.y + vector.y / 2\n    };\n  }\n  static getPerpendicularLine(line) {\n    if (line.length !== 2) {\n      return void 0;\n    }\n    const [p1, p2] = line;\n    const p3 = {\n      x: p2.x + p2.y - p1.y,\n      y: p2.y - (p2.x - p1.x)\n    };\n    return [p2, p3];\n  }\n  static getPerpendicularFootOfLine(line, coordinate) {\n    if (line.length !== 2) {\n      return line;\n    }\n    const perpendicularLine = this.getPerpendicularLine(line);\n    if (!perpendicularLine) {\n      return line;\n    }\n    const [begin, end] = perpendicularLine;\n    return this.getFootOfPerpendicular(coordinate, begin, end).footPoint;\n  }\n  static getQuadrangleFromTriangle(triangle) {\n    if (triangle.length !== 3) {\n      return triangle;\n    }\n    const [p1, p2, p3] = triangle;\n    const p4 = {\n      x: p3.x + p1.x - p2.x,\n      y: p3.y + p1.y - p2.y\n    };\n    return [p1, p2, p3, p4];\n  }\n  static getRectPerpendicularOffset(dragStartCoord, currentCoord, basicLine) {\n    const [p1, p2] = basicLine;\n    const footer1 = this.getFootOfPerpendicular(dragStartCoord, p1, p2).footPoint;\n    const footer2 = this.getFootOfPerpendicular(currentCoord, p1, p2).footPoint;\n    const offset = {\n      x: footer1.x - footer2.x,\n      y: footer1.y - footer2.y\n    };\n    const newPoint = Vector.add(currentCoord, offset);\n    const vector3 = Vector.getVector(dragStartCoord, newPoint);\n    return vector3;\n  }\n  static getArrayIndex(index, len) {\n    if (index < 0) {\n      return len + index;\n    }\n    if (index >= len) {\n      return index - len;\n    }\n    return index;\n  }\n  static getPointListFromPointOffset(pointList, changePointIndex, offset) {\n    const prePointIndex = this.getArrayIndex(changePointIndex - 1, pointList.length);\n    const nextPointIndex = this.getArrayIndex(changePointIndex + 1, pointList.length);\n    const originIndex = this.getArrayIndex(changePointIndex - 2, pointList.length);\n    const newPointList = [...pointList];\n    newPointList[changePointIndex] = Vector.add(newPointList[changePointIndex], offset);\n    const newFooter1 = this.getFootOfPerpendicular(newPointList[changePointIndex], newPointList[originIndex], newPointList[prePointIndex]).footPoint;\n    const newFooter2 = this.getFootOfPerpendicular(newPointList[changePointIndex], newPointList[nextPointIndex], newPointList[originIndex]).footPoint;\n    newPointList[prePointIndex] = newFooter1;\n    newPointList[nextPointIndex] = newFooter2;\n    return newPointList;\n  }\n  static getRectCenterPoint(rectPointList) {\n    const [p1, , p3] = rectPointList;\n    return {\n      x: (p1.x + p3.x) / 2,\n      y: (p1.y + p3.y) / 2\n    };\n  }\n  static rotateRectPointList(angle = 5, rectPointList) {\n    const centerPoint = this.getRectCenterPoint(rectPointList);\n    const {PI} = Math;\n    const sinB = Math.sin(angle * PI / 180);\n    const cosB = Math.cos(angle * PI / 180);\n    return rectPointList.map((point) => {\n      const vector = Vector.getVector(centerPoint, point);\n      const len = Vector.len(vector);\n      const sinA = vector.y / len;\n      const cosA = vector.x / len;\n      return {\n        x: len * Trigonometric.cosAPlusB(sinA, cosA, sinB, cosB) + centerPoint.x,\n        y: len * Trigonometric.sinAPlusB(sinA, cosA, sinB, cosB) + centerPoint.y\n      };\n    });\n  }\n  static getRectangleByRightAngle(coordinate, pointList) {\n    if (pointList.length !== 2) {\n      return pointList;\n    }\n    const newPoint = _MathUtils.getPerpendicularFootOfLine(pointList, coordinate);\n    return _MathUtils.getQuadrangleFromTriangle([...pointList, newPoint]);\n  }\n  static getRadiusFromQuadrangle(points) {\n    const [, point2, point3] = points;\n    const y = point3.y - point2.y;\n    const x = point2.x - point3.x;\n    const len = this.getLineLength(point2, point3);\n    const cosX = y / len;\n    const radius = Math.acos(cosX);\n    if (x > 0) {\n      return Math.PI * 2 - radius;\n    }\n    return radius;\n  }\n  static getCollectionPointByAnnotationDataPromise(annotations) {\n    const points = annotations.filter((v) => v.type === \"point\").map((v) => v.annotation);\n    const backgroundList = annotations.filter((v) => {\n      if ([\"polygon\", \"line\"].includes(v.type)) {\n        return true;\n      }\n      return false;\n    }).map((v) => {\n      if (v.type === \"polygon\") {\n        return __spreadProps(__spreadValues({}, v.annotation), {\n          pointList: PolygonUtils.concatBeginAndEnd(v.annotation.pointList)\n        });\n      }\n      return v.annotation;\n    });\n    const mathUtilsWorker = new WorkerFactory();\n    return {\n      promise: new Promise(function collectionPromise(resolve) {\n        mathUtilsWorker.postMessage({points, backgroundList});\n        mathUtilsWorker.onmessage = (e) => {\n          resolve(e.data);\n          mathUtilsWorker.terminate();\n        };\n      }),\n      close: () => {\n        mathUtilsWorker.terminate();\n      }\n    };\n  }\n  static getCollectionPointByAnnotationData(annotations) {\n    const connectionPoints = [];\n    const cacheSet = new Set();\n    const points = annotations.filter((v) => v.type === \"point\").map((v) => v.annotation);\n    const backgroundList = annotations.filter((v) => {\n      if ([\"polygon\", \"line\"].includes(v.type)) {\n        return true;\n      }\n      return false;\n    }).map((v) => {\n      if (v.type === \"polygon\") {\n        return __spreadProps(__spreadValues({}, v.annotation), {\n          pointList: PolygonUtils.concatBeginAndEnd(v.annotation.pointList)\n        });\n      }\n      return v.annotation;\n    });\n    const judgeIsConnectPoint = (point, polygonList) => {\n      const {dropFoot} = PolygonUtils.getClosestPoint(point, polygonList, ELineTypes.Line, 1, {isClose: false});\n      if (dropFoot !== point) {\n        const s = `${dropFoot.x} + ${dropFoot.y}`;\n        if (!cacheSet.has(s)) {\n          connectionPoints.push(point);\n        }\n        cacheSet.add(s);\n      }\n    };\n    points.forEach((point) => {\n      judgeIsConnectPoint(point, backgroundList);\n    });\n    backgroundList.forEach((v) => {\n      let traverseID = \"\";\n      traverseID = v.id;\n      backgroundList.forEach((annotation, i) => {\n        if (annotation.id === traverseID) {\n          return;\n        }\n        const newPolygonList = [...backgroundList];\n        newPolygonList.splice(i, 1);\n        annotation.pointList.forEach((point) => {\n          judgeIsConnectPoint(point, newPolygonList);\n        });\n      });\n    });\n    return {connectionPoints};\n  }\n  static getModifiedRectangleCoordinates(coordinates, newWidth, newHeight) {\n    if (coordinates.length !== 4) {\n      throw new Error(\"Invalid number of coordinates. Four coordinates are required.\");\n    }\n    const fixedPoint = coordinates[0];\n    const secondPoint = coordinates[1];\n    const thirdPoint = coordinates[2];\n    const originalWidth = Math.sqrt(__pow(secondPoint.x - fixedPoint.x, 2) + __pow(secondPoint.y - fixedPoint.y, 2));\n    const originalHeight = Math.sqrt(__pow(thirdPoint.x - secondPoint.x, 2) + __pow(thirdPoint.y - secondPoint.y, 2));\n    const lengthScaleFactor = newWidth / originalWidth;\n    const widthScaleFactor = newHeight / originalHeight;\n    const newSecondPoint = {\n      x: fixedPoint.x + (secondPoint.x - fixedPoint.x) * lengthScaleFactor,\n      y: fixedPoint.y + (secondPoint.y - fixedPoint.y) * lengthScaleFactor\n    };\n    const newThirdPoint = {\n      x: newSecondPoint.x + (thirdPoint.x - secondPoint.x) * widthScaleFactor,\n      y: newSecondPoint.y + (thirdPoint.y - secondPoint.y) * widthScaleFactor\n    };\n    const newFourthPoint = {\n      x: fixedPoint.x + (newThirdPoint.x - secondPoint.x),\n      y: fixedPoint.y + (newThirdPoint.y - secondPoint.y)\n    };\n    return [fixedPoint, newSecondPoint, newThirdPoint, newFourthPoint];\n  }\n};\nlet MathUtils = _MathUtils;\nMathUtils.isInRange = (value, range) => {\n  const min = Math.min(...range);\n  const max = Math.max(...range);\n  const inRange = (v) => v <= max && v >= min;\n  const values = Array.isArray(value) ? value : [value];\n  return values.every((v) => inRange(v));\n};\nMathUtils.withinRange = (value, range) => {\n  const min = Math.min(...range);\n  const max = Math.max(...range);\n  if (value > max) {\n    return max;\n  }\n  if (value < min) {\n    return min;\n  }\n  return value;\n};\nMathUtils.calcViewportBoundaries = (array, isCurve = false, numberOfSegments = SEGMENT_NUMBER, zoom = 1) => {\n  if (!array) {\n    return {\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0\n    };\n  }\n  const MIN_LENGTH = 20 / zoom;\n  const xAxis = [];\n  const yAxis = [];\n  let points = array;\n  if (isCurve) {\n    points = createSmoothCurvePointsFromPointList(array, numberOfSegments);\n  }\n  points.forEach(({x, y}) => {\n    xAxis.push(x);\n    yAxis.push(y);\n  });\n  let minX = Math.min(...xAxis);\n  let maxX = Math.max(...xAxis);\n  let minY = Math.min(...yAxis);\n  let maxY = Math.max(...yAxis);\n  const diffX = maxX - minX;\n  const diffY = maxY - minY;\n  if (diffX < MIN_LENGTH) {\n    const addLen = (MIN_LENGTH - diffX) / 2;\n    minX -= addLen;\n    maxX += addLen;\n  }\n  if (diffY < MIN_LENGTH) {\n    const addLen = (MIN_LENGTH - diffY) / 2;\n    minY -= addLen;\n    maxY += addLen;\n  }\n  return {\n    top: minY,\n    bottom: maxY,\n    left: minX,\n    right: maxX\n  };\n};\nMathUtils.getFootOfPerpendicular = (pt, begin, end, useAxisRange = false, allowOverRange = false) => {\n  let retVal = {x: 0, y: 0};\n  const dx = begin.x - end.x;\n  const dy = begin.y - end.y;\n  if (Math.abs(dx) < 1e-8 && Math.abs(dy) < 1e-8) {\n    retVal = begin;\n    return retVal;\n  }\n  let u = (pt.x - begin.x) * (begin.x - end.x) + (pt.y - begin.y) * (begin.y - end.y);\n  u /= dx * dx + dy * dy;\n  retVal.x = begin.x + u * dx;\n  retVal.y = begin.y + u * dy;\n  const length = _MathUtils.getLineLength(pt, retVal);\n  const ratio = 2;\n  const fromX = Math.min(begin.x, end.x);\n  const toX = Math.max(begin.x, end.x);\n  const fromY = Math.min(begin.y, end.y);\n  const toY = Math.max(begin.y, end.y);\n  const allAxisOverRange = !(_MathUtils.isInRange(pt.x, [fromX, toX]) || _MathUtils.isInRange(pt.y, [fromY, toY]));\n  const someAxisOverRange = pt.x > toX + ratio || pt.x < fromX - ratio || pt.y > toY + ratio || pt.y < fromY - ratio;\n  const isOverRange = useAxisRange ? allAxisOverRange : someAxisOverRange;\n  if (!allowOverRange && isOverRange) {\n    return {\n      footPoint: retVal,\n      length: Infinity\n    };\n  }\n  return {\n    footPoint: retVal,\n    length\n  };\n};\nvar MathUtils$1 = MathUtils;\n\nexport { Trigonometric, MathUtils$1 as default };\n","var EKeyCode;\n(function(EKeyCode2) {\n  EKeyCode2[EKeyCode2[\"A\"] = 65] = \"A\";\n  EKeyCode2[EKeyCode2[\"B\"] = 66] = \"B\";\n  EKeyCode2[EKeyCode2[\"C\"] = 67] = \"C\";\n  EKeyCode2[EKeyCode2[\"D\"] = 68] = \"D\";\n  EKeyCode2[EKeyCode2[\"E\"] = 69] = \"E\";\n  EKeyCode2[EKeyCode2[\"F\"] = 70] = \"F\";\n  EKeyCode2[EKeyCode2[\"G\"] = 71] = \"G\";\n  EKeyCode2[EKeyCode2[\"H\"] = 72] = \"H\";\n  EKeyCode2[EKeyCode2[\"L\"] = 76] = \"L\";\n  EKeyCode2[EKeyCode2[\"R\"] = 82] = \"R\";\n  EKeyCode2[EKeyCode2[\"Z\"] = 90] = \"Z\";\n  EKeyCode2[EKeyCode2[\"W\"] = 87] = \"W\";\n  EKeyCode2[EKeyCode2[\"X\"] = 88] = \"X\";\n  EKeyCode2[EKeyCode2[\"Y\"] = 89] = \"Y\";\n  EKeyCode2[EKeyCode2[\"S\"] = 83] = \"S\";\n  EKeyCode2[EKeyCode2[\"Q\"] = 81] = \"Q\";\n  EKeyCode2[EKeyCode2[\"Delete\"] = 46] = \"Delete\";\n  EKeyCode2[EKeyCode2[\"F11\"] = 122] = \"F11\";\n  EKeyCode2[EKeyCode2[\"Space\"] = 32] = \"Space\";\n  EKeyCode2[EKeyCode2[\"Esc\"] = 27] = \"Esc\";\n  EKeyCode2[EKeyCode2[\"Left\"] = 37] = \"Left\";\n  EKeyCode2[EKeyCode2[\"Up\"] = 38] = \"Up\";\n  EKeyCode2[EKeyCode2[\"Right\"] = 39] = \"Right\";\n  EKeyCode2[EKeyCode2[\"Down\"] = 40] = \"Down\";\n  EKeyCode2[EKeyCode2[\"Enter\"] = 13] = \"Enter\";\n  EKeyCode2[EKeyCode2[\"Ctrl\"] = 17] = \"Ctrl\";\n  EKeyCode2[EKeyCode2[\"Alt\"] = 18] = \"Alt\";\n  EKeyCode2[EKeyCode2[\"Shift\"] = 16] = \"Shift\";\n  EKeyCode2[EKeyCode2[\"Tab\"] = 9] = \"Tab\";\n  EKeyCode2[EKeyCode2[\"BackSpace\"] = 8] = \"BackSpace\";\n})(EKeyCode || (EKeyCode = {}));\nvar EKeyCode$1 = EKeyCode;\n\nexport { EKeyCode$1 as default };\n","import AxisUtils from './AxisUtils.js';\nimport CommonToolUtils from './CommonToolUtils.js';\nimport { isInPolygon } from './polygonTool.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass RectUtils {\n  static composeResult(result, currentStep, resultList, stepList, basicImgInfo) {\n    try {\n      const data = JSON.parse(result);\n      const currentStepInfo = CommonToolUtils.getCurrentStepInfo(currentStep, stepList);\n      const {dataSourceStep} = currentStepInfo;\n      const stepName = `step_${currentStepInfo.step}`;\n      Object.assign(data, basicImgInfo);\n      if (data[stepName]) {\n        const info = data[stepName];\n        if (info.result) {\n          info.result = resultList;\n          return JSON.stringify(data);\n        }\n        return JSON.stringify(__spreadProps(__spreadValues({}, data), {\n          [stepName]: __spreadProps(__spreadValues({}, data[stepName]), {\n            result: resultList\n          })\n        }));\n      }\n      return JSON.stringify(__spreadProps(__spreadValues({}, data), {\n        [stepName]: {\n          dataSourceStep,\n          toolName: currentStepInfo.tool,\n          result: resultList\n        }\n      }));\n    } catch (e) {\n      return result;\n    }\n  }\n  static changeCoordinateByRotate(rect, rotate, imgSize) {\n    const {x, y, width, height} = rect;\n    const leftTopCoordinate = AxisUtils.changeCoordinateByRotate({x, y}, rotate, imgSize);\n    switch (rotate % 360) {\n      case 90:\n        return __spreadProps(__spreadValues({}, rect), {\n          x: leftTopCoordinate.x - height,\n          y: leftTopCoordinate.y,\n          width: height,\n          height: width\n        });\n      case 180:\n        return __spreadProps(__spreadValues({}, rect), {\n          x: leftTopCoordinate.x - width,\n          y: leftTopCoordinate.y - height\n        });\n      case 270:\n        return __spreadProps(__spreadValues({}, rect), {\n          x: leftTopCoordinate.x,\n          y: leftTopCoordinate.y - width,\n          width: height,\n          height: width\n        });\n      default:\n        return rect;\n    }\n  }\n  static translateRect2Points(rect) {\n    const {x, y, width, height} = rect;\n    return [\n      {\n        x,\n        y\n      },\n      {\n        x: x + width,\n        y\n      },\n      {\n        x: x + width,\n        y: y + height\n      },\n      {\n        x,\n        y: y + height\n      }\n    ];\n  }\n  static translatePoints2Rect(points, basicRect) {\n    if (points.length !== 4) {\n      return;\n    }\n    const {x, y} = points[0];\n    const width = points[1].x - points[0].x;\n    const height = points[2].y - points[1].y;\n    return __spreadProps(__spreadValues({}, basicRect), {\n      x,\n      y,\n      width,\n      height\n    });\n  }\n  static getRectPointList(rect, zoom = 1) {\n    return [\n      {x: rect.x * zoom, y: rect.y * zoom},\n      {x: (rect.x + rect.width) * zoom, y: rect.y * zoom},\n      {x: (rect.x + rect.width) * zoom, y: (rect.y + rect.height) * zoom},\n      {x: rect.x * zoom, y: (rect.y + rect.height) * zoom}\n    ];\n  }\n  static getRectEdgeList(rect, zoom = 1) {\n    const pointList = this.getRectPointList(rect, zoom);\n    const len = pointList.length;\n    return pointList.map((v, i) => {\n      return {\n        begin: v,\n        end: pointList[(i + 1) % len]\n      };\n    });\n  }\n  static isInRect(coordinate, rect, scope = 0, zoom = 1) {\n    return coordinate.x >= rect.x * zoom - scope && coordinate.x <= (rect.x + rect.width) * zoom + scope && coordinate.y >= rect.y * zoom - scope && coordinate.y <= (rect.y + rect.height) * zoom + scope;\n  }\n  static getRectUnderZoom(rect, zoom = 1) {\n    const {x, y, width, height} = rect;\n    return __spreadProps(__spreadValues({}, rect), {\n      x: x * zoom,\n      y: y * zoom,\n      width: width * zoom,\n      height: height * zoom\n    });\n  }\n  static isRectNotInPolygon(rect, polygonPointList) {\n    const rectPointList = this.getRectPointList(rect);\n    return rectPointList.some((p) => !isInPolygon(p, polygonPointList));\n  }\n}\n\nexport { RectUtils as default };\n","var EMessage;\n(function(EMessage2) {\n  EMessage2[\"NoRotateNotice\"] = \"noRotateNotice\";\n  EMessage2[\"RectErrorSizeNotice\"] = \"rectErrorSizeNotice\";\n  EMessage2[\"TextCheckNumberErrorNotice\"] = \"textCheckNumberErrorNotice\";\n  EMessage2[\"TextCheckEnglishErrorNotice\"] = \"textCheckEnglishErrorNotice\";\n  EMessage2[\"TextCheckCustomErrorNotice\"] = \"textCheckCustomErrorNotice\";\n  EMessage2[\"UpperLimitErrorNotice\"] = \"UpperLimitErrorNotice\";\n  EMessage2[\"LowerLimitErrorNotice\"] = \"LowerLimitErrorNotice\";\n  EMessage2[\"MinAreaLimitErrorNotice\"] = \"MinAreaLimitErrorNotice\";\n  EMessage2[\"MinLengthLimitErrorNotice\"] = \"MinLengthLimitErrorNotice\";\n  EMessage2[\"InvalidImage\"] = \"InvalidImage\";\n  EMessage2[\"DisableDelete\"] = \"DisableDelete\";\n  EMessage2[\"ClearPartialData\"] = \"ClearPartialData\";\n  EMessage2[\"MarkerFinish\"] = \"MarkerFinish\";\n  EMessage2[\"LowerLimitPoint\"] = \"LowerLimitPoint\";\n  EMessage2[\"NoRotateInDependence\"] = \"noRotateInDependence\";\n  EMessage2[\"UnableToReannotation\"] = \"unableToReannotation\";\n  EMessage2[\"ForbiddenCreationOutsideBoundary\"] = \"ForbiddenCreationOutsideBoundary\";\n  EMessage2[\"SuccessfulEdgeAdsorption\"] = \"SuccessfulEdgeAdsorption\";\n  EMessage2[\"ForbidAddNewPoint\"] = \"ForbidAddNewPoint\";\n})(EMessage || (EMessage = {}));\n\nexport { EMessage };\n","import { EMessage } from '../constants.js';\n\nconst message = {\n  [EMessage.NoRotateNotice]: \"This Image contains data and cannot be rotated\",\n  [EMessage.RectErrorSizeNotice]: \"The drawing frame size is smaller than the minimum drawing size\",\n  [EMessage.TextCheckNumberErrorNotice]: \"Please enter in number-only format\",\n  [EMessage.TextCheckEnglishErrorNotice]: \"Please enter in English only format\",\n  [EMessage.TextCheckCustomErrorNotice]: \"Please enter in the required format\",\n  [EMessage.UpperLimitErrorNotice]: \"The number of vertices is not more than\",\n  [EMessage.LowerLimitErrorNotice]: \"The number of vertices is not less than\",\n  [EMessage.MinAreaLimitErrorNotice]: \"Minimum area is not less than\",\n  [EMessage.MinLengthLimitErrorNotice]: \"Length is not less than\",\n  [EMessage.InvalidImage]: \"Invalid image, please skip this image\",\n  [EMessage.DisableDelete]: \"Disable delete\",\n  [EMessage.ClearPartialData]: \"Clear partial data\",\n  [EMessage.MarkerFinish]: \"ListAnnotation is finished\",\n  [EMessage.LowerLimitPoint]: \"The maximum number of points has been reached\",\n  [EMessage.NoRotateInDependence]: \"Disallow rotation in dependent cases\",\n  [EMessage.UnableToReannotation]: \"Unabled to reannotation\",\n  [EMessage.ForbiddenCreationOutsideBoundary]: \"Fobid creation outside boundary\",\n  [EMessage.SuccessfulEdgeAdsorption]: \"Successful edge adsorption\",\n  [EMessage.ForbidAddNewPoint]: \"Forbid to add new point in rect-polygon\"\n};\n\nexport { message as default };\n","import { EMessage } from '../constants.js';\n\nconst message = {\n  [EMessage.NoRotateNotice]: \"\\u672C\\u56FE\\u542B\\u6709\\u6570\\u636E\\uFF0C\\u65E0\\u6CD5\\u8FDB\\u884C\\u65CB\\u8F6C\",\n  [EMessage.RectErrorSizeNotice]: \"\\u7ED8\\u5236\\u6846\\u5C3A\\u5BF8\\u5C0F\\u4E8E\\u6700\\u5C0F\\u7ED8\\u5236\\u5C3A\\u5BF8\",\n  [EMessage.TextCheckNumberErrorNotice]: \"\\u8BF7\\u6309\\u4EC5\\u6570\\u5B57\\u7684\\u683C\\u5F0F\\u8F93\\u5165\",\n  [EMessage.TextCheckEnglishErrorNotice]: \"\\u8BF7\\u6309\\u4EC5\\u82F1\\u6587\\u7684\\u683C\\u5F0F\\u8F93\\u5165\",\n  [EMessage.TextCheckCustomErrorNotice]: \"\\u8BF7\\u6309\\u8981\\u6C42\\u7684\\u683C\\u5F0F\\u8F93\\u5165\",\n  [EMessage.UpperLimitErrorNotice]: \"\\u9876\\u70B9\\u6570\\u4E0D\\u591A\\u4E8E\",\n  [EMessage.LowerLimitErrorNotice]: \"\\u9876\\u70B9\\u6570\\u4E0D\\u5C11\\u4E8E\",\n  [EMessage.MinAreaLimitErrorNotice]: \"\\u6700\\u5C0F\\u9762\\u79EF\\u4E0D\\u5C0F\\u4E8E\",\n  [EMessage.MinLengthLimitErrorNotice]: \"\\u957F\\u5EA6\\u4E0D\\u5C0F\\u4E8E\",\n  [EMessage.InvalidImage]: \"\\u65E0\\u6548\\u56FE\\u7247\\uFF0C\\u8BF7\\u8DF3\\u8FC7\\u6B64\\u56FE\",\n  [EMessage.DisableDelete]: \"\\u8BE5\\u6570\\u636E\\u7981\\u6B62\\u5220\\u9664\",\n  [EMessage.ClearPartialData]: \"\\u5B58\\u5728\\u90E8\\u5206\\u6570\\u636E\\u65E0\\u6CD5\\u6E05\\u9664\",\n  [EMessage.MarkerFinish]: \"\\u5217\\u8868\\u6807\\u6CE8\\u5DF2\\u5B8C\\u6210\",\n  [EMessage.LowerLimitPoint]: \"\\u5DF2\\u5230\\u8FBE\\u6807\\u70B9\\u6570\\u91CF\\u4E0A\\u9650\",\n  [EMessage.NoRotateInDependence]: \"\\u4F9D\\u8D56\\u60C5\\u51B5\\u4E0B\\u65E0\\u6CD5\\u8FDB\\u884C\\u65CB\\u8F6C\",\n  [EMessage.UnableToReannotation]: \"\\u65E0\\u6CD5\\u8FDB\\u884C\\u7EED\\u6807\\u64CD\\u4F5C\",\n  [EMessage.ForbiddenCreationOutsideBoundary]: \"\\u8FB9\\u754C\\u5916\\u7981\\u6B62\\u521B\\u5EFA\",\n  [EMessage.SuccessfulEdgeAdsorption]: \"\\u8FB9\\u7F18\\u5438\\u9644\\u6210\\u529F\",\n  [EMessage.ForbidAddNewPoint]: \"\\u6846\\u4F53\\u65E0\\u6CD5\\u6DFB\\u52A0\\u70B9\"\n};\n\nexport { message as default };\n","import { ELang } from '../constant/annotation.js';\nimport message$1 from './en_US/message.js';\nimport message from './zh_CN/message.js';\n\nclass Locale {\n}\nLocale.getMessagesByLocale = (key, locale) => {\n  switch (locale) {\n    case ELang.US:\n      return message$1[key];\n    case ELang.Zh:\n    default:\n      return message[key];\n  }\n};\n\nexport { Locale as default };\n","var canvasEdit0 = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#ccc\\\"/></g></g></svg>\";\n\nexport { canvasEdit0 as default };\n","var INVALID_ICON = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#f33\\\"/></g></g></svg>\";\n\nexport { INVALID_ICON as default };\n","import canvasEdit0 from '../assets/attributeIcon/icon_canvasEdit0.svg.js';\nimport canvasEdit1 from '../assets/attributeIcon/icon_canvasEdit1.svg.js';\nimport canvasEdit2 from '../assets/attributeIcon/icon_canvasEdit2.svg.js';\nimport canvasEdit3 from '../assets/attributeIcon/icon_canvasEdit3.svg.js';\nimport canvasEdit4 from '../assets/attributeIcon/icon_canvasEdit4.svg.js';\nimport canvasEdit5 from '../assets/attributeIcon/icon_canvasEdit5.svg.js';\nimport canvasEdit6 from '../assets/attributeIcon/icon_canvasEdit6.svg.js';\nimport canvasEdit7 from '../assets/attributeIcon/icon_canvasEdit7.svg.js';\nimport canvasEdit8 from '../assets/attributeIcon/icon_canvasEdit8.svg.js';\nimport baseEditLan from '../assets/attributeIcon/icon_editLAN.svg.js';\nimport baseEditQing from '../assets/attributeIcon/icon_editQING.svg.js';\nimport baseEditLv from '../assets/attributeIcon/icon_editLV.svg.js';\nimport baseEditHuang from '../assets/attributeIcon/icon_editHUANG.svg.js';\nimport baseEditFen from '../assets/attributeIcon/icon_editFEN.svg.js';\nimport { EFilterToolOperation } from './tool.js';\nexport { default as INVALID_ICON } from '../assets/attributeIcon/icon_canvasEdit_miss.svg.js';\n\nconst NULL_ICON = canvasEdit0;\nconst HEADER_HEIGHT = 61;\nconst TAB_HEIGHT = 80;\nconst SEARCH_HEIGHT = 62;\nconst PADDING = 20;\nconst TABLE_ROW_HEIGHT = 55;\nconst PAGINATION_HEIGHT = 55;\nconst TIPS_HEIGHT = 40;\nconst FOOTER_HEIGHT = 80;\nconst SIDERBAR_WIDTH = 240;\nconst EDIT_STEP_WIDTH = 320;\nconst THEME_COLOR = \"rgba(102, 111, 255, 1)\";\nconst COLORS_ARRAY = [\n  \"rgba(128, 12, 249, 1)\",\n  \"rgba(0, 255, 48, 1)\",\n  \"rgba(255, 136, 247, 1)\",\n  \"rgba(255, 226, 50, 1)\",\n  \"rgba(153, 66, 23, 1)\",\n  \"rgba(2, 130, 250, 1)\",\n  \"rgba(255, 35, 35, 1)\",\n  \"rgba(0, 255, 234, 1)\"\n];\nconst ICON_ARRAY = [\n  canvasEdit0,\n  canvasEdit6,\n  canvasEdit3,\n  canvasEdit7,\n  canvasEdit2,\n  canvasEdit8,\n  canvasEdit5,\n  canvasEdit1,\n  canvasEdit4\n];\nconst BASE_ICON = {\n  1: baseEditLan,\n  3: baseEditQing,\n  5: baseEditLv,\n  7: baseEditHuang,\n  9: baseEditFen\n};\nconst INVALID_COLOR = \"rgba(255, 51, 51, 1)\";\nconst INVALID_COLOR_RGBA = {\n  r: 255,\n  g: 51,\n  b: 51,\n  a: 1\n};\nconst NULL_COLOR = \"rgba(204, 204, 204, 1)\";\nconst FILTER_TOOL_COLOR = {\n  [EFilterToolOperation.lc]: \"rgba(153, 51, 255, 1)\",\n  [EFilterToolOperation.rc]: \"rgba(51, 153, 255, 1)\",\n  [EFilterToolOperation.clc]: \"rgba(46, 230, 46, 1)\",\n  [EFilterToolOperation.crc]: \"rgba(255, 51, 51, 1)\"\n};\nconst styleString = `{\"color\":1,\"width\":2,\"borderOpacity\":9,\"fillOpacity\":9,\"toolColor\":{\"1\":{\"valid\":{\"stroke\":\"rgba(0,0,255,0.50)\",\"fill\":\"rgba(0,0,255,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validSelected\":{\"stroke\":\"rgba(0,15,255,1.00)\",\"fill\":\"rgba(0,15,255,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,0.80)\",\"fill\":\"rgba(255,153,102,0.19)\"},\"validHover\":{\"stroke\":\"rgba(0,15,255,0.80)\",\"fill\":\"rgba(0,15,255,0.51)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,0.50)\",\"fill\":\"rgba(255,153,102,0.32)\"}},\"3\":{\"valid\":{\"stroke\":\"rgba(0,255,255,0.50)\",\"fill\":\"rgba(0,255,255,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validSelected\":{\"stroke\":\"rgba(0,212,255,1.00)\",\"fill\":\"rgba(0,212,255,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,0.80)\",\"fill\":\"rgba(255,153,102,0.19)\"},\"validHover\":{\"stroke\":\"rgba(0,212,255,0.80)\",\"fill\":\"rgba(0,212,255,0.51)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,0.50)\",\"fill\":\"rgba(255,153,102,0.32)\"}},\"5\":{\"valid\":{\"stroke\":\"rgba(0,255,0,0.50)\",\"fill\":\"rgba(0,255,0,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validSelected\":{\"stroke\":\"rgba(149,255,1.00)\",\"fill\":\"rgba(149,255,0,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,0.80)\",\"fill\":\"rgba(255,153,102,0.19)\"},\"validHover\":{\"stroke\":\"rgba(149,255,0,0.80)\",\"fill\":\"rgba(149,255,0,0.51)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,0.50)\",\"fill\":\"rgba(255,153,102,0.32)\"}},\"7\":{\"valid\":{\"stroke\":\"rgba(255,255,0,0.50)\",\"fill\":\"rgba(255,255,0,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validSelected\":{\"stroke\":\"rgba(255,230,102,1.00)\",\"fill\":\"rgba(255,213,0,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,0.80)\",\"fill\":\"rgba(255,153,102,0.19)\"},\"validHover\":{\"stroke\":\"rgba(255,230,102,0.80)\",\"fill\":\"rgba(255,230,102,0.51)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,0.50)\",\"fill\":\"rgba(255,153,102,0.32)\"}},\"9\":{\"valid\":{\"stroke\":\"rgba(255,0,255,0.50)\",\"fill\":\"rgba(255,0,255,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validSelected\":{\"stroke\":\"rgba(230,102,255,1.00)\",\"fill\":\"rgba(213,0,255,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,0.80)\",\"fill\":\"rgba(255,153,102,0.19)\"},\"validHover\":{\"stroke\":\"rgba(230,102,255,0.80)\",\"fill\":\"rgba(230,102,255,0.51)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,0.50)\",\"fill\":\"rgba(255,153,102,0.32)\"}}},\"attributeColor\":[{\"valid\":{\"stroke\":\"rgba(204,204,204,1.00)\",\"fill\":\"rgba(204,204,204,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(204,204,204,1.00)\",\"fill\":\"rgba(204,204,204,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(204,204,204,1.00)\",\"fill\":\"rgba(204,204,204,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(128,12,249,1.00)\",\"fill\":\"rgba(128,12,249,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(128,12,249,1.00)\",\"fill\":\"rgba(128,12,249,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(128,12,249,1.00)\",\"fill\":\"rgba(128,12,249,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(0,255,48,1.00)\",\"fill\":\"rgba(0,255,48,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(0,255,48,1.00)\",\"fill\":\"rgba(0,255,48,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(0,255,48,1.00)\",\"fill\":\"rgba(0,255,48,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(255,136,247,1.00)\",\"fill\":\"rgba(255,136,247,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(255,136,247,1.00)\",\"fill\":\"rgba(255,136,247,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(255,136,247,1.00)\",\"fill\":\"rgba(255,136,247,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(255,226,50,1.00)\",\"fill\":\"rgba(255,226,50,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(255,226,50,1.00)\",\"fill\":\"rgba(255,226,50,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(255,226,50,1.00)\",\"fill\":\"rgba(255,226,50,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(153,66,23,1.00)\",\"fill\":\"rgba(153,66,23,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(153,66,23,1.00)\",\"fill\":\"rgba(153,66,23,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(153,66,23,1.00)\",\"fill\":\"rgba(153,66,23,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(2,130,250,1.00)\",\"fill\":\"rgba(2,130,250,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(2,130,250,1.00)\",\"fill\":\"rgba(2,130,250,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(2,130,250,1.00)\",\"fill\":\"rgba(2,130,250,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(255,35,35,1.00)\",\"fill\":\"rgba(255,35,35,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(255,35,35,1.00)\",\"fill\":\"rgba(255,35,35,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(255,35,35,1.00)\",\"fill\":\"rgba(255,35,35,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(0,255,234,1.00)\",\"fill\":\"rgba(0,255,234,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(0,255,234,1.00)\",\"fill\":\"rgba(0,255,234,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(0,255,234,1.00)\",\"fill\":\"rgba(0,255,234,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}}],\"lineColor\":{\"1\":\"rgba(102, 111, 255, 1 )\",\"3\":\"rgba(102, 230, 255, 1)\",\"5\":\"rgba(191, 255, 102, 1)\",\"7\":\"rgba(255, 230, 102, 1)\",\"9\":\"rgba(230, 102, 255, 1)\"},\"attributeLineColor\":[\"rgba(204, 204, 204, 1)\",\"rgba(128, 12, 249, 1)\",\"rgba(0, 255, 48, 1)\",\"rgba(255, 136, 247, 1)\",\"rgba(255, 226, 50, 1)\",\"rgba(153, 66, 23, 1)\",\"rgba(2, 130, 250, 1)\",\"rgba(255, 35, 35, 1)\",\"rgba(0, 255, 234, 1)\"]}`;\n\nexport { BASE_ICON, COLORS_ARRAY, EDIT_STEP_WIDTH, FILTER_TOOL_COLOR, FOOTER_HEIGHT, HEADER_HEIGHT, ICON_ARRAY, INVALID_COLOR, INVALID_COLOR_RGBA, NULL_COLOR, NULL_ICON, PADDING, PAGINATION_HEIGHT, SEARCH_HEIGHT, SIDERBAR_WIDTH, TABLE_ROW_HEIGHT, TAB_HEIGHT, THEME_COLOR, TIPS_HEIGHT, styleString };\n","var canvasEdit6 = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#800cf9\\\"/></g></g></svg>\";\n\nexport { canvasEdit6 as default };\n","var canvasEdit3 = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#01ff30\\\"/></g></g></svg>\";\n\nexport { canvasEdit3 as default };\n","var canvasEdit7 = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#ff88f7\\\"/></g></g></svg>\";\n\nexport { canvasEdit7 as default };\n","var canvasEdit2 = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#ffe232\\\"/></g></g></svg>\";\n\nexport { canvasEdit2 as default };\n","var canvasEdit8 = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#994217\\\"/></g></g></svg>\";\n\nexport { canvasEdit8 as default };\n","var canvasEdit5 = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#0282fa\\\"/></g></g></svg>\";\n\nexport { canvasEdit5 as default };\n","var canvasEdit1 = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#ff2323\\\"/></g></g></svg>\";\n\nexport { canvasEdit1 as default };\n","var canvasEdit4 = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#00ffea\\\"/></g></g></svg>\";\n\nexport { canvasEdit4 as default };\n","var baseEditLan = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#1f0bf9\\\"/></g></g></svg>\";\n\nexport { baseEditLan as default };\n","var baseEditQing = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#3fe\\\"/></g></g></svg>\";\n\nexport { baseEditQing as default };\n","var baseEditLv = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#33fe33\\\"/></g></g></svg>\";\n\nexport { baseEditLv as default };\n","var baseEditHuang = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#fdff37\\\"/></g></g></svg>\";\n\nexport { baseEditHuang as default };\n","var baseEditFen = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\"><defs><clipPath id=\\\"a\\\"><path d=\\\"M0,0H16V-16H0Z\\\" fill=\\\"none\\\"/></clipPath><clipPath id=\\\"b\\\"><path d=\\\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\\\" fill=\\\"none\\\"/></clipPath></defs><g transform=\\\"translate(0 16)\\\"><g clip-path=\\\"url(#a)\\\"><path d=\\\"M-5-21H21V5H-5Z\\\" fill=\\\"rgba(0,0,0,0)\\\"/></g><g clip-path=\\\"url(#b)\\\"><path d=\\\"M-3.25-19.25h22.5V3.25H-3.25Z\\\" fill=\\\"#f70efa\\\"/></g></g></svg>\";\n\nexport { baseEditFen as default };\n","import { isNumber } from 'lodash';\nimport { ToolStyleUtils } from '@labelbee/lb-utils';\nimport { ICON_ARRAY, NULL_ICON, NULL_COLOR, COLORS_ARRAY } from '../../constant/style.js';\nimport { ETextType } from '../../constant/tool.js';\nimport Locale from '../../locales/index.js';\nimport { EMessage } from '../../locales/constants.js';\nimport MathUtils from '../MathUtils.js';\nimport INVALID_ICON from '../../assets/attributeIcon/icon_canvasEdit_miss.svg.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst REGEXP_NUMBER = \"^[0-9]+$\";\nconst REGEXP_ENGLISH = \"^[A-Za-z]+$\";\nclass AttributeUtils {\n  static getAttributeIcon(attribute, attributeList, valid = true) {\n    var _a;\n    const attributeIndex = attributeList.findIndex((i) => i.value === attribute);\n    let src = (_a = ICON_ARRAY[attributeIndex % ICON_ARRAY.length]) != null ? _a : NULL_ICON;\n    if (!valid) {\n      src = INVALID_ICON;\n    }\n    src = \"\";\n    const img = new Image();\n    img.src = src;\n    return img;\n  }\n  static checkString(textCheckType, customFormat) {\n    let regExpString = \"\";\n    switch (textCheckType) {\n      case ETextType.Order:\n      case ETextType.NumberOnly:\n        regExpString = REGEXP_NUMBER;\n        break;\n      case ETextType.EnglishOnly:\n        regExpString = REGEXP_ENGLISH;\n        break;\n      case ETextType.CustomFormat:\n        regExpString = customFormat;\n        break;\n    }\n    return regExpString;\n  }\n  static checkTextAttibute(value, checkStrings) {\n    if (value === void 0 || value === \"\") {\n      return true;\n    }\n    try {\n      return new RegExp(checkStrings).test(value);\n    } catch (error) {\n      return false;\n    }\n  }\n  static getAttributeShowText(attribute, attributeList = []) {\n    var _a, _b;\n    try {\n      const attributeIndex = attributeList.findIndex((i) => i.value === attribute);\n      return (_b = (_a = attributeList[attributeIndex]) == null ? void 0 : _a.key) != null ? _b : attribute;\n    } catch (error) {\n      return attribute;\n    }\n  }\n  static getAttributeIndex(attribute, attributeList) {\n    try {\n      const attributeIndex = attributeList.findIndex((i) => i.value === attribute);\n      if (attributeIndex >= 8) {\n        return attributeIndex % 8;\n      }\n      return attributeIndex;\n    } catch (error) {\n      return -1;\n    }\n  }\n  static getAttributeColor(attribute, attributeList) {\n    try {\n      const attributeIndex = this.getAttributeIndex(attribute, attributeList);\n      if (attributeIndex === -1) {\n        return NULL_COLOR;\n      }\n      return COLORS_ARRAY[attributeIndex % COLORS_ARRAY.length];\n    } catch (error) {\n      return NULL_COLOR;\n    }\n  }\n  static getTextAttribute(toolResultList, textCheckType) {\n    try {\n      if (textCheckType === ETextType.Order) {\n        const textAttributeList = toolResultList.map((i) => parseInt(i.textAttribute, 10)).filter((order) => {\n          return isNumber(order) && order < Number.MAX_SAFE_INTEGER && order >= 0;\n        });\n        textAttributeList.sort((a, b) => a - b);\n        const maxOrder = textAttributeList.pop();\n        return `${(maxOrder || 0) + 1}`;\n      }\n      return \"\";\n    } catch (error) {\n      return \"\";\n    }\n  }\n  static textChange(value, selectedID, toolList) {\n    return toolList.map((item) => {\n      if (item.id === selectedID) {\n        return __spreadProps(__spreadValues({}, item), {\n          textAttribute: value\n        });\n      }\n      return item;\n    });\n  }\n  static getErrorNotice(textCheckType, lang) {\n    switch (textCheckType) {\n      case ETextType.Order:\n      case ETextType.NumberOnly:\n        return Locale.getMessagesByLocale(EMessage.TextCheckNumberErrorNotice, lang);\n      case ETextType.EnglishOnly:\n        return Locale.getMessagesByLocale(EMessage.TextCheckEnglishErrorNotice, lang);\n      case ETextType.CustomFormat:\n        return Locale.getMessagesByLocale(EMessage.TextCheckCustomErrorNotice, lang);\n      default:\n        return \"\";\n    }\n  }\n  static textAttributeValidate(textCheckType, customFormat, text) {\n    try {\n      const reg = new RegExp(this.checkString(textCheckType, customFormat));\n      return reg.test(text);\n    } catch (error) {\n    }\n  }\n  static checkTextAttribute(textCheckType, customFormat, resultList, selectedID) {\n    let error = false;\n    resultList.forEach((item) => {\n      if ((item == null ? void 0 : item.textAttribute) === void 0 || (item == null ? void 0 : item.textAttribute) === \"\") {\n        return;\n      }\n      if ((selectedID ? item.id === selectedID : true) && !this.textAttributeValidate(textCheckType, customFormat, item.textAttribute)) {\n        error = true;\n      }\n    });\n    if (error) {\n      return true;\n    }\n    return false;\n  }\n  static changeTextAttributeInLog(toolLog, toolList) {\n    return toolLog == null ? void 0 : toolLog.map((item) => {\n      return item == null ? void 0 : item.map((info) => {\n        if ((toolList == null ? void 0 : toolList.findIndex((i) => (i == null ? void 0 : i.id) === (info == null ? void 0 : info.id))) > -1) {\n          const changeRect = toolList == null ? void 0 : toolList.find((i) => (i == null ? void 0 : i.id) === (info == null ? void 0 : info.id));\n          return __spreadProps(__spreadValues({}, info), {\n            textAttribute: changeRect == null ? void 0 : changeRect.textAttribute\n          });\n        }\n        return info;\n      });\n    });\n  }\n  static getTextIconSvg(attribute = \"\", attributeList, attributeConfigurable = false, baseIcon) {\n    var _a;\n    if (attributeConfigurable === true) {\n      const attributeIndex = (attributeList == null ? void 0 : attributeList.findIndex((i) => (i == null ? void 0 : i.value) === attribute)) % COLORS_ARRAY.length + 1;\n      const color = (_a = attributeList == null ? void 0 : attributeList.find((i) => i.value === attribute)) == null ? void 0 : _a.color;\n      if (color) {\n        const getHexColor = ToolStyleUtils.rgbaStringToHex(color);\n        return this.generateIconAttribute({fill: getHexColor});\n      }\n      return ICON_ARRAY[attributeIndex];\n    }\n    return baseIcon;\n  }\n  static generateIconAttribute({\n    fill,\n    width = 16,\n    height = 16,\n    xmlns = \"http://www.w3.org/2000/svg\",\n    xlink = \"http://www.w3.org/1999/xlink\"\n  }) {\n    return `<span style={color:${fill}}><svg xmlns=${xmlns} xmlns:xlink=${xlink} width=${width} height=${height} viewBox=\"0 0 16 16\"><defs><clipPath id=\"a\"><path d=\"M0,0H16V-16H0Z\" fill=\"none\"/></clipPath><clipPath id=\"b\"><path d=\"M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z\" fill=\"none\"/></clipPath></defs><g transform=\"translate(0 16)\"><g clip-path=\"url(#a)\"><path d=\"M-5-21H21V5H-5Z\" fill=\"rgba(0,0,0,0)\"/></g><g clip-path=\"url(#b)\"><path d=\"M-3.25-19.25h22.5V3.25H-3.25Z\" fill='currentColor'/></g></g></svg></span>`;\n  }\n  static getAttributeByKeycode(keyCode, attributeList) {\n    var _a;\n    let num;\n    if (MathUtils.isInRange(keyCode, [48, 57])) {\n      num = keyCode - 48;\n    }\n    if (MathUtils.isInRange(keyCode, [96, 105])) {\n      num = keyCode - 96;\n    }\n    if (num === 0) {\n      return \"\";\n    }\n    return num ? (_a = attributeList[num - 1]) == null ? void 0 : _a.value : void 0;\n  }\n}\n\nexport { REGEXP_ENGLISH, REGEXP_NUMBER, AttributeUtils as default };\n","import MathUtils from '../MathUtils.js';\n\nclass CanvasUtils {\n  static getMousePositionOnCanvasFromEvent(event, canvas) {\n    if (canvas && event) {\n      const canvasRect = canvas.getBoundingClientRect();\n      return {\n        x: event.clientX - canvasRect.left,\n        y: event.clientY - canvasRect.top\n      };\n    }\n    return null;\n  }\n  static getClientRect(canvas) {\n    if (canvas) {\n      const canvasRect = canvas.getBoundingClientRect();\n      return {\n        x: canvasRect.left,\n        y: canvasRect.top,\n        width: canvasRect.width,\n        height: canvasRect.height\n      };\n    }\n    return null;\n  }\n  static getSize(canvas) {\n    if (canvas) {\n      const canvasRect = canvas.getBoundingClientRect();\n      return {\n        width: canvasRect.width,\n        height: canvasRect.height\n      };\n    }\n    return null;\n  }\n  static inViewPort(coord, viewPort) {\n    if (!coord) {\n      return false;\n    }\n    return MathUtils.isInRange(coord.x, [viewPort.left, viewPort.right]) && MathUtils.isInRange(coord.y, [viewPort.top, viewPort.bottom]);\n  }\n}\nCanvasUtils.getViewPort = (canvas, originOffset, zoom) => {\n  const {width: canvasWidth, height: canvasHeight} = canvas;\n  const {x, y} = originOffset;\n  const top = (0 - y) / zoom;\n  const left = (0 - x) / zoom;\n  const bottom = top + canvasHeight / zoom;\n  const right = left + canvasWidth / zoom;\n  return {top, bottom, left, right};\n};\nCanvasUtils.getPixelRatio = (context) => {\n  if (!context || !window) {\n    return 1;\n  }\n  const backingStore = context.backingStorePixelRatio || context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio || context.backingStorePixelRatio || 1;\n  return (window.devicePixelRatio || 1) / backingStore;\n};\n\nexport { CanvasUtils as default };\n","class UnitUtils {\n  static deg2rad(angleDeg) {\n    return angleDeg * Math.PI / 180;\n  }\n  static rad2deg(angleRad) {\n    return angleRad * 180 / Math.PI;\n  }\n}\n\nexport { UnitUtils as default };\n","import { ELineTypes, SEGMENT_NUMBER, DEFAULT_FONT } from '../../constant/tool.js';\nimport PolygonUtils from './PolygonUtils.js';\nimport UnitUtils from './UnitUtils.js';\nimport AxisUtils from './AxisUtils.js';\nimport { getCuboidAllSideLine, getPointListsByDirection, getCuboidTextAttributeOffset } from './CuboidUtils.js';\nimport AttributeUtils from './AttributeUtils.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst DEFAULT_ZOOM = 1;\nconst DEFAULT_CURRENT_POS = {\n  x: 0,\n  y: 0\n};\nconst DEFAULT_ROTATE = 0;\nconst DEFAULT_COLOR = \"\";\nconst _DrawUtils = class {\n  static drawLine(canvas, startPoint, endPoint, options = {}) {\n    const ctx = canvas.getContext(\"2d\");\n    const {color = DEFAULT_COLOR, thickness = 1, lineCap = \"round\", lineDash} = options;\n    ctx.save();\n    ctx.strokeStyle = color;\n    ctx.lineWidth = thickness;\n    ctx.lineCap = lineCap;\n    if (lineDash) {\n      ctx.setLineDash(lineDash);\n    }\n    ctx.beginPath();\n    ctx.moveTo(startPoint.x, startPoint.y);\n    ctx.lineTo(endPoint.x + 1, endPoint.y + 1);\n    ctx.stroke();\n    ctx.restore();\n  }\n  static drawRect(canvas, rect, options = {}) {\n    const ctx = canvas.getContext(\"2d\");\n    const {color = DEFAULT_COLOR, thickness = 1, lineCap = \"round\", hiddenText = false, lineDash} = options;\n    ctx.save();\n    ctx.strokeStyle = color;\n    ctx.lineWidth = thickness;\n    ctx.lineCap = lineCap;\n    if (Array.isArray(lineDash)) {\n      ctx.setLineDash(lineDash);\n    }\n    ctx.fillStyle = color;\n    ctx.strokeRect(rect.x, rect.y, rect.width, rect.height);\n    if (hiddenText === false) {\n      let showText = \"\";\n      if (rect.attribute) {\n        showText = `${showText}  ${rect.attribute}`;\n      }\n      this.drawText(canvas, {x: rect.x, y: rect.y - 5}, showText);\n      if (rect.textAttribute) {\n        const text = `${~~rect.width} * ${~~rect.height}`;\n        const textSizeWidth = text.length * 7;\n        const marginTop = 0;\n        const textWidth = Math.max(20, rect.width - textSizeWidth);\n        this.drawText(canvas, {x: rect.x, y: rect.y + rect.height + 20 + marginTop}, rect.textAttribute, {\n          textMaxWidth: textWidth\n        });\n      }\n    }\n    ctx.restore();\n  }\n  static drawRectWithFill(canvas, rect, options = {}) {\n    const ctx = canvas.getContext(\"2d\");\n    const {color = DEFAULT_COLOR} = options;\n    ctx.save();\n    ctx.fillStyle = color;\n    ctx.fillRect(rect.x, rect.y, rect.width, rect.height);\n    ctx.restore();\n  }\n  static drawTagByDom(parent, text, id) {\n    const parentNode = parent;\n    if (!((text == null ? void 0 : text.length) > 0)) {\n      return;\n    }\n    const dom = document.createElement(\"div\");\n    dom.innerHTML = text;\n    dom.setAttribute(\"id\", id);\n    parentNode == null ? void 0 : parentNode.appendChild(dom);\n    return dom;\n  }\n  static drawTag(canvas, tagList) {\n    var _a;\n    const parentNode = canvas == null ? void 0 : canvas.parentNode;\n    const oldDom = window.self.document.getElementById(\"tagToolTag\");\n    if (oldDom && parentNode && parentNode.contains(oldDom)) {\n      parentNode == null ? void 0 : parentNode.removeChild(oldDom);\n    }\n    if (!((tagList == null ? void 0 : tagList.length) > 0)) {\n      return;\n    }\n    const dom = document.createElement(\"div\");\n    dom.innerHTML = (_a = tagList.reduce((acc, cur) => {\n      return `${acc}${cur.keyName}: ${cur.value.join(` \\u3001 `)}\n`;\n    }, \"\")) != null ? _a : \"\";\n    dom.setAttribute(\"id\", \"tagToolTag\");\n    parentNode == null ? void 0 : parentNode.appendChild(dom);\n    return dom;\n  }\n  static drawLineWithPointList(canvas, pointList, options = {}) {\n    if (pointList.length < 2) {\n      return;\n    }\n    const ctx = canvas.getContext(\"2d\");\n    const {\n      color = DEFAULT_COLOR,\n      thickness = 1,\n      lineCap = \"round\",\n      lineType = ELineTypes.Line,\n      lineDash,\n      hoverEdgeIndex\n    } = options;\n    ctx.save();\n    const setStyle = () => {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = thickness;\n      ctx.lineCap = lineCap;\n      if (Array.isArray(lineDash)) {\n        ctx.setLineDash(lineDash);\n      } else {\n        ctx.setLineDash([]);\n      }\n    };\n    setStyle();\n    if (lineType === ELineTypes.Curve) {\n      if (hoverEdgeIndex !== void 0 && hoverEdgeIndex > -1) {\n        pointList.push(pointList[0]);\n      }\n      pointList = PolygonUtils.createSmoothCurvePointsFromPointList([...pointList], SEGMENT_NUMBER);\n      if (hoverEdgeIndex !== void 0 && hoverEdgeIndex > -1) {\n        pointList = pointList.slice((SEGMENT_NUMBER + 1) * hoverEdgeIndex, (SEGMENT_NUMBER + 1) * (hoverEdgeIndex + 1));\n      }\n    } else if (hoverEdgeIndex !== void 0 && hoverEdgeIndex > -1) {\n      pointList = [...pointList, pointList[0]];\n      pointList = pointList.slice(hoverEdgeIndex, hoverEdgeIndex + 2);\n    }\n    const specialEdgeList = [];\n    ctx.beginPath();\n    ctx.moveTo(pointList[0].x, pointList[0].y);\n    for (let i = 0; i < pointList.length - 1; i++) {\n      if (pointList[i].specialEdge) {\n        specialEdgeList.push({\n          i1: i,\n          i2: i + 1\n        });\n      }\n      ctx.lineTo(pointList[i + 1].x, pointList[i + 1].y);\n    }\n    ctx.stroke();\n    ctx.save();\n    ctx.lineWidth = thickness * 0.8;\n    ctx.lineCap = \"butt\";\n    ctx.strokeStyle = \"white\";\n    ctx.setLineDash([3, 3]);\n    specialEdgeList.forEach((v) => {\n      const point1 = pointList[v.i1];\n      const point2 = pointList[v.i2];\n      ctx.beginPath();\n      ctx.moveTo(point1.x, point1.y);\n      ctx.lineTo(point2.x, point2.y);\n      ctx.stroke();\n    });\n    ctx.restore();\n    const DEFAULT_SPECIAL_POINT_RADIUS = 4;\n    const DEFAULT_BORDER = 2;\n    pointList.forEach((p) => {\n      if (p.specialPoint) {\n        this.drawSpecialPoint(canvas, p, DEFAULT_SPECIAL_POINT_RADIUS + DEFAULT_BORDER, color);\n        this.drawSpecialPoint(canvas, p, DEFAULT_SPECIAL_POINT_RADIUS, \"white\");\n      }\n    });\n    ctx.restore();\n    return pointList;\n  }\n  static drawCircle(canvas, anchorPoint, radius, options = {}) {\n    const ctx = canvas.getContext(\"2d\");\n    const {\n      startAngleDeg = 0,\n      endAngleDeg = 360,\n      thickness = 1,\n      color = DEFAULT_COLOR,\n      fill = DEFAULT_COLOR\n    } = options;\n    const startAngleRad = UnitUtils.deg2rad(startAngleDeg);\n    const endAngleRad = UnitUtils.deg2rad(endAngleDeg);\n    ctx.save();\n    ctx.beginPath();\n    ctx.strokeStyle = color;\n    ctx.fillStyle = fill;\n    ctx.lineWidth = thickness;\n    ctx.arc(anchorPoint.x, anchorPoint.y, radius, startAngleRad, endAngleRad, false);\n    ctx.stroke();\n    if (fill) {\n      ctx.fill();\n    }\n    ctx.closePath();\n    ctx.restore();\n  }\n  static drawCircleWithFill(canvas, anchorPoint, radius = 3, options = {}) {\n    const ctx = canvas.getContext(\"2d\");\n    const {color = DEFAULT_COLOR} = options;\n    ctx.save();\n    const startAngleRad = UnitUtils.deg2rad(0);\n    const endAngleRad = UnitUtils.deg2rad(360);\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    ctx.arc(anchorPoint.x, anchorPoint.y, radius, startAngleRad, endAngleRad, false);\n    ctx.fill();\n    ctx.restore();\n  }\n  static drawSpecialPoint(canvas, point, pointRadius = 6, fillStyle) {\n    const ctx = canvas.getContext(\"2d\");\n    const {x, y} = point;\n    ctx.save();\n    ctx.beginPath();\n    ctx.fillStyle = fillStyle;\n    const newPointRadius = pointRadius * 1.5;\n    const xl = newPointRadius * Math.sqrt(3) / 2;\n    const yl = newPointRadius / 2;\n    ctx.moveTo(x, y - newPointRadius);\n    ctx.lineTo(x - xl, y + yl);\n    ctx.lineTo(x + xl, y + yl);\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n  }\n  static drawPolygon(canvas, pointList, options = {}) {\n    const {isClose = false, lineType = ELineTypes.Line} = options;\n    if (isClose === true) {\n      pointList = [...pointList, pointList[0]];\n    }\n    if (lineType === ELineTypes.Curve) {\n      pointList = PolygonUtils.createSmoothCurvePointsFromPointList([...pointList]);\n    }\n    this.drawLineWithPointList(canvas, pointList, __spreadProps(__spreadValues({}, options), {\n      lineType: ELineTypes.Line\n    }));\n    return pointList;\n  }\n  static drawPolygonWithFill(canvas, pointList, options = {}) {\n    if (pointList.length < 2) {\n      return;\n    }\n    const ctx = canvas.getContext(\"2d\");\n    const {color = DEFAULT_COLOR, lineType = ELineTypes.Line} = options;\n    ctx.save();\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    if (lineType === ELineTypes.Curve) {\n      pointList = PolygonUtils.createSmoothCurvePointsFromPointList([...pointList, pointList[0]]);\n    }\n    const [startPoint, ...otherPointList] = pointList;\n    ctx.moveTo(startPoint.x, startPoint.y);\n    otherPointList.forEach((point) => {\n      ctx.lineTo(point.x, point.y);\n    });\n    ctx.fill();\n    ctx.restore();\n    return pointList;\n  }\n  static drawPolygonWithFillAndLine(canvas, pointList, options = {}) {\n    const {strokeColor, fillColor, thickness, lineCap, isClose, lineType} = options;\n    const newPointList = this.drawPolygon(canvas, pointList, {\n      color: strokeColor,\n      thickness,\n      lineCap,\n      isClose,\n      lineType\n    });\n    this.drawPolygonWithFill(canvas, pointList, {color: fillColor, lineType});\n    return newPointList;\n  }\n  static drawPolygonWithKeyPoint(canvas, pointList, options = {}) {\n    const {pointColor = \"white\", strokeColor} = options;\n    const newPointList = this.drawPolygon(canvas, pointList, options);\n    newPointList.forEach((point) => {\n      this.drawCircleWithFill(canvas, point, 4, {color: strokeColor});\n      this.drawCircleWithFill(canvas, point, 3, {color: pointColor});\n    });\n    return newPointList;\n  }\n  static drawSelectedPolygonWithFillAndLine(canvas, pointList, options = {}) {\n    const {pointColor = \"white\", strokeColor} = options;\n    const newPointList = this.drawPolygonWithFillAndLine(canvas, pointList, options);\n    newPointList.forEach((point) => {\n      this.drawCircleWithFill(canvas, point, 4, {color: strokeColor});\n      this.drawCircleWithFill(canvas, point, 3, {color: pointColor});\n    });\n    return newPointList;\n  }\n  static drawText(canvas, startPoint, text, options = {}) {\n    if (!text) {\n      return;\n    }\n    const ctx = canvas.getContext(\"2d\");\n    const {\n      color = DEFAULT_COLOR,\n      font = DEFAULT_FONT,\n      shadowColor = \"\",\n      shadowBlur = 0,\n      shadowOffsetX = 0,\n      shadowOffsetY = 0,\n      textMaxWidth = 164,\n      offsetX = 0,\n      offsetY = 0,\n      textAlign = \"start\",\n      lineHeight\n    } = options;\n    ctx.save();\n    ctx.textAlign = textAlign;\n    ctx.fillStyle = color != null ? color : \"white\";\n    ctx.font = font;\n    ctx.shadowColor = shadowColor;\n    ctx.shadowOffsetX = shadowOffsetX;\n    ctx.shadowOffsetY = shadowOffsetY;\n    ctx.shadowBlur = shadowBlur;\n    this.wrapText(canvas, `${text}`, startPoint.x + offsetX, startPoint.y + offsetY, textMaxWidth, lineHeight);\n    ctx.restore();\n  }\n  static wrapText(canvas, text, x, y, maxWidth, lineHeight) {\n    if (typeof text !== \"string\" || typeof x !== \"number\" || typeof y !== \"number\") {\n      return;\n    }\n    const context = canvas.getContext(\"2d\");\n    if (typeof maxWidth === \"undefined\") {\n      maxWidth = canvas && canvas.width || 300;\n    }\n    if (typeof lineHeight === \"undefined\") {\n      lineHeight = canvas && parseInt(window.getComputedStyle(canvas).lineHeight, 10) || parseInt(window.getComputedStyle(document.body).lineHeight, 10);\n    }\n    const arrParagraph = text.split(\"\\n\");\n    for (let i = 0; i < arrParagraph.length; i++) {\n      const arrText = arrParagraph[i].split(\"\");\n      let line = \"\";\n      for (let n = 0; n < arrText.length; n++) {\n        const testLine = line + arrText[n];\n        const metrics = context.measureText(testLine);\n        const testWidth = metrics.width;\n        if (!maxWidth) {\n          maxWidth = 300;\n        }\n        if (testWidth > maxWidth && n > 0) {\n          context.fillText(line, x, y);\n          line = arrText[n];\n          y += lineHeight;\n        } else {\n          line = testLine;\n        }\n      }\n      context.fillText(line, x, y);\n      y += lineHeight;\n    }\n  }\n  static drawArrow(ctx, startPoint, endPoint, options = {}) {\n    const {color = DEFAULT_COLOR, thickness = 1, lineCap = \"round\", theta = 30, headLen = 10} = options;\n    const angle = Math.atan2(startPoint.y - endPoint.y, startPoint.x - endPoint.x) * 180 / Math.PI;\n    const angle1 = (angle + theta) * Math.PI / 180;\n    const angle2 = (angle - theta) * Math.PI / 180;\n    const topX = headLen * Math.cos(angle1);\n    const topY = headLen * Math.sin(angle1);\n    const botX = headLen * Math.cos(angle2);\n    const botY = headLen * Math.sin(angle2);\n    ctx.save();\n    ctx.strokeStyle = color;\n    ctx.lineWidth = thickness;\n    ctx.lineCap = lineCap;\n    ctx.beginPath();\n    ctx.moveTo(endPoint.x + topX, endPoint.y + topY);\n    ctx.lineTo(endPoint.x, endPoint.y);\n    ctx.lineTo(endPoint.x + botX, endPoint.y + botY);\n    ctx.stroke();\n    ctx.restore();\n  }\n  static drawArrowByCanvas(canvas, startPoint, endPoint, options = {}) {\n    const ctx = canvas.getContext(\"2d\");\n    this.drawArrow(ctx, startPoint, endPoint, options);\n  }\n  static drawCuboid(canvas, cuboid, options = {}) {\n    const {backPoints, direction, frontPoints} = cuboid;\n    const {strokeColor, thickness, fillColor} = options;\n    const defaultStyle = {\n      color: strokeColor,\n      thickness\n    };\n    if (backPoints) {\n      const backPointList = AxisUtils.transformPlain2PointList(backPoints);\n      _DrawUtils.drawPolygon(canvas, backPointList, __spreadProps(__spreadValues({}, defaultStyle), {isClose: true}));\n      const sideLine = getCuboidAllSideLine(cuboid);\n      sideLine == null ? void 0 : sideLine.forEach((line) => {\n        _DrawUtils.drawLine(canvas, line.p1, line.p2, __spreadValues({}, defaultStyle));\n      });\n    }\n    const pointList = AxisUtils.transformPlain2PointList(frontPoints);\n    if (direction && backPoints && frontPoints) {\n      const points = getPointListsByDirection({direction, frontPoints, backPoints});\n      if (points) {\n        _DrawUtils.drawPolygonWithFill(canvas, points, {color: fillColor});\n      }\n    }\n    _DrawUtils.drawPolygon(canvas, pointList, __spreadProps(__spreadValues({}, defaultStyle), {isClose: true}));\n  }\n  static drawCuboidWithText(canvas, cuboid, options, dataConfig) {\n    const {strokeColor} = options;\n    const textColor = strokeColor;\n    const {config, hiddenText, selectedID, headerText, bottomText} = dataConfig;\n    const {backPoints, frontPoints, textAttribute} = cuboid;\n    const frontPointsSizeWidth = frontPoints.br.x - frontPoints.bl.x;\n    _DrawUtils.drawCuboid(canvas, cuboid, options);\n    let showText = \"\";\n    if ((config == null ? void 0 : config.isShowOrder) && cuboid.order && (cuboid == null ? void 0 : cuboid.order) > 0) {\n      showText = `${cuboid.order}`;\n    }\n    if (cuboid.attribute) {\n      showText = `${showText}  ${AttributeUtils.getAttributeShowText(cuboid.attribute, config == null ? void 0 : config.attributeList)}`;\n    }\n    if (!hiddenText && backPoints && showText) {\n      _DrawUtils.drawText(canvas, {x: backPoints.tl.x, y: backPoints.tl.y - 5}, headerText != null ? headerText : showText, {\n        color: strokeColor,\n        textMaxWidth: 300\n      });\n    }\n    const textPosition = getCuboidTextAttributeOffset({\n      cuboid,\n      currentPos: {x: 0, y: 0},\n      zoom: 1,\n      topOffset: 16,\n      leftOffset: 0\n    });\n    if (!hiddenText && textAttribute && cuboid.id !== selectedID) {\n      const textWidth = Math.max(20, frontPointsSizeWidth * 0.8);\n      _DrawUtils.drawText(canvas, {x: textPosition.left, y: textPosition.top}, bottomText != null ? bottomText : textAttribute, {\n        color: textColor,\n        textMaxWidth: textWidth\n      });\n    }\n  }\n};\nlet DrawUtils = _DrawUtils;\nDrawUtils.drawImg = (canvas, imgNode, options = {}) => {\n  const ctx = canvas.getContext(\"2d\");\n  const {zoom = DEFAULT_ZOOM, currentPos = DEFAULT_CURRENT_POS, rotate = DEFAULT_ROTATE, imgAttribute} = options;\n  ctx.save();\n  switch (rotate) {\n    case 0:\n      ctx.translate(currentPos.x, currentPos.y);\n      break;\n    case 90:\n      ctx.translate(currentPos.x + imgNode.height * zoom, currentPos.y);\n      ctx.rotate(90 * Math.PI / 180);\n      break;\n    case 180:\n      ctx.translate(currentPos.x + imgNode.width * zoom, currentPos.y + imgNode.height * zoom);\n      ctx.rotate(Math.PI);\n      break;\n    case 270:\n      ctx.translate(currentPos.x, currentPos.y + imgNode.width * zoom);\n      ctx.rotate(270 * Math.PI / 180);\n      break;\n    default:\n      ctx.translate(currentPos.x, currentPos.y);\n      break;\n  }\n  if (imgAttribute) {\n    const {contrast, saturation, brightness} = imgAttribute;\n    ctx.filter = `saturate(${saturation + 100}%) contrast(${contrast + 100}%) brightness(${brightness + 100}%)`;\n  }\n  ctx.drawImage(imgNode, 0, 0, imgNode.width * zoom, imgNode.height * zoom);\n  ctx.restore();\n};\n\nexport { DrawUtils as default };\n","import { cloneDeep } from 'lodash';\nimport AttributeUtils from './AttributeUtils.js';\n\nclass MarkerUtils {\n  static getMarkerShowText(marker, markerList = []) {\n    return AttributeUtils.getAttributeShowText(marker, markerList);\n  }\n}\nMarkerUtils.getAuxiliaryLineByMarkerList = (markerList, attr) => {\n  var _a;\n  const queue = cloneDeep(markerList);\n  const auxiliaryLines = [];\n  let currentNode = queue.shift();\n  while (currentNode) {\n    (_a = currentNode.target) == null ? void 0 : _a.forEach((element) => {\n      const targetMarkerListItem = queue.find((i) => i.value === element);\n      if (targetMarkerListItem && (currentNode == null ? void 0 : currentNode[attr])) {\n        auxiliaryLines.push({\n          start: currentNode[attr],\n          end: targetMarkerListItem[attr]\n        });\n      }\n    });\n    currentNode = queue.shift();\n  }\n  return auxiliaryLines;\n};\nMarkerUtils.getAuxiliaryLineCoord = (auxiliaryLines, pointList) => {\n  const result = [];\n  auxiliaryLines.forEach((line) => {\n    const {start, end} = line;\n    const startPoint = pointList.find((item) => item.label === start);\n    if (!startPoint) {\n      return;\n    }\n    const targetPoint = pointList.find((item) => item.label === end);\n    if (!targetPoint) {\n      return;\n    }\n    result.push({\n      start: {\n        x: startPoint.x,\n        y: startPoint.y\n      },\n      end: {\n        x: targetPoint.x,\n        y: targetPoint.y\n      }\n    });\n  });\n  return result;\n};\n\nexport { MarkerUtils as default };\n","function uuid(len = 8, radix = 62) {\n  const chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\".split(\"\");\n  const id = [];\n  let i;\n  radix = radix || chars.length;\n  if (len) {\n    for (i = 0; i < len; i++) {\n      id[i] = chars[0 | Math.random() * radix];\n    }\n  } else {\n    let r;\n    id[8] = id[13] = id[18] = id[23] = \"-\";\n    id[14] = \"4\";\n    for (i = 0; i < 36; i++) {\n      if (!id[i]) {\n        r = 0 | Math.random() * 16;\n        id[i] = chars[i === 19 ? r & 3 | 8 : r];\n      }\n    }\n  }\n  return id.join(\"\");\n}\n\nexport { uuid as default };\n","import _ from 'lodash';\n\nclass ActionsHistory {\n  constructor(historyChanged) {\n    this.record = [];\n    this.recordIndex = -1;\n    this.minRecordIndex = -1;\n    this.emitHistoryChanged = () => {\n      if (this.historyChanged) {\n        const isEmit = this.constructor.name === \"ActionsHistory\" ? true : this.record.length > 0;\n        if (isEmit) {\n          this.historyChanged(this.undoEnabled, this.redoEnabled);\n        }\n      }\n    };\n    this.historyChanged = historyChanged;\n  }\n  get undoEnabled() {\n    return this.recordIndex > this.minRecordIndex;\n  }\n  get redoEnabled() {\n    return this.recordIndex < this.record.length - 1;\n  }\n  pushHistory(action) {\n    if (this.recordIndex !== this.record.length - 1) {\n      const newRecord = this.record.slice(0, Math.min(this.recordIndex + 1, this.record.length));\n      this.record = newRecord;\n    }\n    this.record.push(_.cloneDeepWith(action));\n    this.recordIndex += 1;\n    this.emitHistoryChanged();\n  }\n  updateHistory(newRecord) {\n    this.record[this.recordIndex] = _.cloneDeep(newRecord);\n  }\n  applyAttribute(id, key, value) {\n    if (id) {\n      this.record.forEach((lines) => {\n        const line = lines.find((i) => i.id === id);\n        if (line) {\n          line[key] = value;\n        }\n      });\n    }\n  }\n  undo() {\n    if (this.undoEnabled) {\n      this.recordIndex -= 1;\n      this.emitHistoryChanged();\n      return _.cloneDeep(this.record[this.recordIndex]) || [];\n    }\n  }\n  redo() {\n    if (this.redoEnabled) {\n      this.recordIndex += 1;\n      this.emitHistoryChanged();\n      return _.cloneDeep(this.record[this.recordIndex]);\n    }\n  }\n  init() {\n    this.record = [[]];\n    this.recordIndex = 0;\n    this.emitHistoryChanged();\n  }\n  empty() {\n    this.record = [];\n    this.recordIndex = -1;\n    this.emitHistoryChanged();\n  }\n  initRecord(data, isExitData = false) {\n    const existData = data.length > 0 || isExitData;\n    this.record = existData ? [_.cloneDeep(data)] : [];\n    this.minRecordIndex = existData ? 0 : -1;\n    this.recordIndex = 0;\n  }\n}\n\nexport { ActionsHistory as default };\n","import AxisUtils from './AxisUtils.js';\n\nclass DblClickEventListener {\n  constructor(dom, delay) {\n    this.rcTime = 0;\n    this.mouseDownTime = 0;\n    this.onMouseDown = () => {\n      this.mouseDownTime = new Date().getTime();\n    };\n    this.dom = dom;\n    this.isDoubleClick = false;\n    this.delay = delay;\n  }\n  getRcTime() {\n    return this.rcTime;\n  }\n  getCoord(e) {\n    return {\n      x: e.clientX,\n      y: e.clientY\n    };\n  }\n  removeEvent() {\n    if (!this.dom) {\n      return;\n    }\n    this.dom.removeEventListener(\"mouseup\", this.mouseUp);\n    this.dom.removeEventListener(\"mousemove\", this.mouseMove);\n    this.dom.removeEventListener(\"dblclick\", this.dblclick);\n    this.dom.removeEventListener(\"mousedown\", this.onMouseDown);\n  }\n  addEvent(singleClickFun, leftDblClick, rightDblClick, isAllowDouble) {\n    if (!this.dom) {\n      return;\n    }\n    this.removeEvent();\n    this.mouseUp = (e) => {\n      const cTime = new Date().getTime();\n      const isDoubleClick = isAllowDouble ? isAllowDouble(e) : true;\n      if (cTime - this.mouseDownTime > this.delay || isDoubleClick !== true) {\n        singleClickFun(e);\n        return;\n      }\n      if (e.button === 2) {\n        if (this.rcTime === 0) {\n          setTimeout(() => {\n            this.rcTime = 0;\n          }, this.delay);\n          this.rcTime = cTime;\n        } else {\n          if (cTime - this.rcTime < this.delay) {\n            rightDblClick(e);\n            clearTimeout(this.setTimeFun);\n            this.cacheFunction = void 0;\n          }\n          this.rcTime = 0;\n          return;\n        }\n      }\n      if (this.setTimeFun) {\n        clearTimeout(this.setTimeFun);\n      }\n      this.clickCoord = this.getCoord(e);\n      this.cacheFunction = () => singleClickFun(e);\n      this.setTimeFun = setTimeout(() => {\n        if (this.isDoubleClick) {\n          this.isDoubleClick = false;\n          return;\n        }\n        this.cacheFunction();\n        this.clickCoord = void 0;\n      }, this.delay);\n    };\n    this.mouseMove = (e) => {\n      const currentCoord = this.getCoord(e);\n      if (this.clickCoord && !AxisUtils.getIsInScope(currentCoord, this.clickCoord, 10)) {\n        if (this.cacheFunction) {\n          this.cacheFunction();\n        }\n        this.clickCoord = void 0;\n        this.cacheFunction = null;\n        clearTimeout(this.setTimeFun);\n      }\n    };\n    this.dblclick = (e) => {\n      this.isDoubleClick = true;\n      this.clickCoord = void 0;\n      leftDblClick(e);\n    };\n    this.dom.addEventListener(\"mouseup\", this.mouseUp);\n    this.dom.addEventListener(\"mousemove\", this.mouseMove);\n    this.dom.addEventListener(\"dblclick\", this.dblclick);\n    this.dom.addEventListener(\"mousedown\", this.onMouseDown);\n  }\n  clearRightDblClick() {\n    this.rcTime = 0;\n  }\n}\n\nexport { DblClickEventListener as default };\n","class ImgPosUtils {\n  static getInitImgPos(canvasSize, imgSize, rotate = 0, zoomRatio = 1, isOriginalSize = false) {\n    if (rotate === 90 || rotate === 270) {\n      imgSize = {\n        width: imgSize.height,\n        height: imgSize.width\n      };\n    }\n    const wScale = canvasSize.width * zoomRatio / imgSize.width;\n    const hScale = canvasSize.height * zoomRatio / imgSize.height;\n    let scale = isOriginalSize ? 1 : Math.min(wScale, hScale);\n    const currentPos = {\n      x: (canvasSize.width - imgSize.width * scale) / 2,\n      y: (canvasSize.height - imgSize.height * scale) / 2\n    };\n    const width = imgSize.width * scale;\n    const height = imgSize.height * scale;\n    if (isOriginalSize) {\n      scale = 1;\n    }\n    return {\n      zoom: scale,\n      currentPos,\n      imgInfo: {width, height}\n    };\n  }\n  static getBasicRecPos(imgNode, basicRect, size, shrinkRatio = 0.9, zoomRatio = 1, isOriginalSize = false) {\n    if (basicRect && imgNode) {\n      const {x, y, height, width} = basicRect;\n      let initZoom = size.height / height;\n      if (width / height > size.width / size.height) {\n        initZoom = size.width / width;\n      }\n      const zoom = isOriginalSize ? 1 : initZoom * shrinkRatio * zoomRatio;\n      const viewCenter = {\n        x: size.width / 2,\n        y: size.height / 2\n      };\n      const imgCenter = {\n        x: (x + width / 2) * zoom,\n        y: (y + height / 2) * zoom\n      };\n      const currentPos = {\n        x: viewCenter.x - imgCenter.x,\n        y: viewCenter.y - imgCenter.y\n      };\n      return {\n        currentPos,\n        innerZoom: zoom\n      };\n    }\n    return false;\n  }\n}\n\nexport { ImgPosUtils as default };\n","import Locale from '../../locales/index.js';\nimport { EMessage } from '../../locales/constants.js';\n\nconst INVALID_PAGE_CLASS_NAME = \"bee-invalid-page\";\nclass RenderDomUtils {\n  static renderInvalidPage(container, size, lang) {\n    const invalidDOM = document.createElement(\"div\");\n    invalidDOM.setAttribute(\"style\", `\n        position: absolute;\n        left: 0px;\n        top: 0px;\n        width: ${size.width}px;\n        height: ${size.height}px;\n        background: rgba(255, 87, 34, 1);\n        overflow: hidden;\n        color: white;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 30px;\n        opacity: 0.7;\n        z-index: 30;\n      `);\n    invalidDOM.innerHTML = Locale.getMessagesByLocale(EMessage.InvalidImage, lang);\n    invalidDOM.className = INVALID_PAGE_CLASS_NAME;\n    container.appendChild(invalidDOM);\n    return invalidDOM;\n  }\n}\n\nexport { RenderDomUtils as default };\n","import { EGrowthMode } from '../../constant/annotation.js';\nimport MathUtils from '../MathUtils.js';\n\nconst ZOOM_LEVEL = [1, 5, 10, 20, 30, 50, 80, 100].concat(Array.from({length: 9}).map((i, index) => (index + 2) * 100));\nclass ZoomUtils {\n}\nZoomUtils.zoomChanged = (zoom, isZoomIn, growthMode = EGrowthMode.Linear) => {\n  switch (growthMode) {\n    case EGrowthMode.Intelligence: {\n      const maxZoom = Math.max(...ZOOM_LEVEL);\n      const minZoom = Math.min(...ZOOM_LEVEL);\n      const zoomIndex = ZOOM_LEVEL.slice(0, ZOOM_LEVEL.length).findIndex((i, index) => zoom >= i && (zoom < ZOOM_LEVEL[index + 1] || i === maxZoom));\n      let newZoom;\n      if (zoomIndex === -1) {\n        if (zoom >= minZoom && zoom <= maxZoom) {\n          newZoom = isZoomIn ? maxZoom : minZoom;\n        } else {\n          newZoom = isZoomIn ? minZoom : zoom;\n        }\n      } else {\n        const newZoomIndex = isZoomIn ? zoomIndex + 1 : zoomIndex - (ZOOM_LEVEL.includes(zoom) ? 1 : 0);\n        newZoom = ZOOM_LEVEL[MathUtils.withinRange(newZoomIndex, [0, ZOOM_LEVEL.length - 1])];\n      }\n      return newZoom;\n    }\n    default: {\n      const ratio = isZoomIn ? 2 : 1 / 2;\n      return zoom * ratio;\n    }\n  }\n};\nZoomUtils.wheelChangePos = (imgNode, coord, operator, oldCurrentPos, options = {}) => {\n  const {zoom = 1, innerZoom = 1, basicZoom = 1, zoomMax = 1e3, rotate = 0} = options;\n  const {x, y} = oldCurrentPos;\n  const ratio = parseFloat((zoom + 1 / 10).toFixed(1)) / 5;\n  if (imgNode && coord) {\n    let {width, height} = imgNode;\n    if ([90, 270].includes(rotate)) {\n      width = imgNode.height;\n      height = imgNode.width;\n    }\n    const imgWidth = width * innerZoom;\n    const imgHeight = height * innerZoom;\n    const offsetLeft = coord.x - x;\n    const offsetTop = coord.y - y;\n    const ratioX = offsetLeft / imgWidth;\n    const ratioY = offsetTop / imgHeight;\n    let currentZoom = zoom + operator * ratio;\n    currentZoom = MathUtils.withinRange(currentZoom, [basicZoom, zoomMax]);\n    const changeX = width * currentZoom * ratioX;\n    const changeY = height * currentZoom * ratioY;\n    const currentX = x + (offsetLeft - changeX);\n    const currentY = y + (offsetTop - changeY);\n    return {\n      zoom: currentZoom,\n      currentPos: {\n        x: currentX,\n        y: currentY\n      },\n      imgInfo: {\n        width: width * currentZoom,\n        height: height * currentZoom\n      },\n      ratio\n    };\n  }\n  return null;\n};\n\nexport { ZoomUtils as default };\n","import _ from 'lodash';\nimport { ELineTypes, ELineColor, EToolName, ETextType } from '../../constant/tool.js';\nimport ActionsHistory from '../../utils/ActionsHistory.js';\nimport uuid from '../../utils/uuid.js';\nimport EKeyCode from '../../constant/keyCode.js';\nimport MathUtils from '../../utils/MathUtils.js';\nimport { BasicToolOperation } from './basicToolOperation.js';\nimport LineToolUtils from '../../utils/tool/LineToolUtils.js';\nimport { createSmoothCurvePointsFromPointList, isInPolygon, createSmoothCurvePoints } from '../../utils/tool/polygonTool.js';\nimport CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\nimport CanvasUtils from '../../utils/tool/CanvasUtils.js';\nimport DrawUtils from '../../utils/tool/DrawUtils.js';\nimport StyleUtils from '../../utils/tool/StyleUtils.js';\nimport AttributeUtils from '../../utils/tool/AttributeUtils.js';\nimport TextAttributeClass from './textAttributeClass.js';\nimport Selection from './Selection.js';\nimport Locale from '../../locales/index.js';\nimport { EMessage } from '../../locales/constants.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar EStatus;\n(function(EStatus2) {\n  EStatus2[EStatus2[\"Create\"] = 0] = \"Create\";\n  EStatus2[EStatus2[\"Active\"] = 1] = \"Active\";\n  EStatus2[EStatus2[\"None\"] = 2] = \"None\";\n})(EStatus || (EStatus = {}));\nconst SEGMENT_NUMBER = 16;\nconst LINE_ORDER_OFFSET = {\n  x: 0,\n  y: 20\n};\nconst POINT_RADIUS = 3;\nconst POINT_ACTIVE_RADIUS = 5;\nconst INNER_POINT_RADIUS = 2;\nclass LineToolOperation extends BasicToolOperation {\n  constructor(props) {\n    super(props);\n    this.drawActivatedLine = (coord, e, hideTempAxis) => {\n      const lines = this.isCreate ? _.cloneDeep([\n        {\n          pointList: this.activeLine,\n          order: this.nextOrder(),\n          attribute: this.defaultAttribute,\n          valid: this.isLineValid\n        }\n      ]) : _.cloneDeep(this.selectedLines);\n      const isActiveLineValid = this.isActiveLineValid();\n      lines.forEach((line) => {\n        if (line == null ? void 0 : line.pointList) {\n          line.pointList = line.pointList.map((point) => Object.assign(point, {\n            actual: {x: point.x, y: point.y}\n          }, this.coordUtils.getRenderCoord(point)));\n        }\n        if (!line.pointList) {\n          return;\n        }\n        const color = this.getLineColorByAttribute({\n          attribute: line.attribute,\n          valid: line.valid\n        });\n        if (this.selectedLines.length > 0) {\n          this.drawLineLength(line.pointList, color);\n          this.renderActiveArea(MathUtils.calcViewportBoundaries(line.pointList, this.isCurve, SEGMENT_NUMBER));\n        }\n        this.drawLine(line.pointList, coord, color, true, true);\n        this.drawLineNumber(line.pointList[0], line.order, color, \"\", this.defaultAttribute, isActiveLineValid);\n        if (coord && this.isCreate) {\n          this.arc(coord, POINT_RADIUS, color);\n        }\n        if (this.cursor && !this.selectedPoint && !hideTempAxis && !this.isShift) {\n          this.arc(this.cursor, POINT_ACTIVE_RADIUS, color);\n        }\n        return line;\n      });\n    };\n    this.drawHoverPoint = (coord) => {\n      if (this.isMousedown) {\n        return;\n      }\n      if (coord && this.selectedID) {\n        const pointList = this.getPointList(this.activeLine);\n        const hoverPoint = this.activeLine.find((i) => LineToolUtils.calcDistance(this.coordUtils.getRenderCoord(i), coord) <= POINT_ACTIVE_RADIUS);\n        let nearestPoint;\n        if (!hoverPoint && this.activeLine) {\n          nearestPoint = this.findNearestPoint(pointList, coord);\n        }\n        this.hoverPointID = hoverPoint ? hoverPoint.id : void 0;\n        this.cursor = hoverPoint ? void 0 : nearestPoint == null ? void 0 : nearestPoint.point;\n      }\n    };\n    this.updatedLine = {\n      id: \"\",\n      valid: false,\n      order: 0\n    };\n    this.toolName = \"lineTool\";\n    this.lineList = [];\n    this.activeLine = [];\n    this.coordsInsideActiveArea = false;\n    this.hoverLineSegmentIndex = -1;\n    this.isShift = false;\n    this.isReference = false;\n    this.drawCurveLine = (ctx, points, config, applyLineWidth = true, isReference = false, hoverLineSegmentIndex) => {\n      const pointList = createSmoothCurvePointsFromPointList(points, SEGMENT_NUMBER);\n      ctx.save();\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n      ctx.strokeStyle = config.color;\n      if (applyLineWidth) {\n        ctx.lineWidth = config.lineWidth;\n      }\n      if (isReference) {\n        LineToolUtils.setReferenceCtx(ctx);\n      }\n      points.forEach(({specialEdge}, index) => {\n        const curveLinePoints = pointList.splice(0, SEGMENT_NUMBER + 1);\n        ctx.save();\n        ctx.beginPath();\n        if (hoverLineSegmentIndex === index) {\n          ctx.lineWidth = 4;\n        }\n        curveLinePoints.forEach(({x, y}, pointIndex) => {\n          const fn = pointIndex > 0 ? \"lineTo\" : \"moveTo\";\n          if (specialEdge) {\n            LineToolUtils.setSpecialEdgeStyle(ctx);\n          }\n          ctx[fn](x, y);\n        });\n        ctx.stroke();\n        ctx.restore();\n      });\n      ctx.restore();\n    };\n    this.drawLine = (points, cursor, color, showPoint = false, isActive = false) => {\n      const pointsToDraw = cursor ? points.concat(cursor) : points;\n      const lineConfig = {color, lineWidth: isActive ? 1 : this.lineStyle.lineWidth};\n      if (this.isCurve) {\n        LineToolUtils.drawCurveLine(this.ctx, pointsToDraw, lineConfig, !showPoint, this.isReference, isActive ? this.hoverLineSegmentIndex : -1);\n      } else {\n        this.drawStraightLine(pointsToDraw, lineConfig, isActive);\n      }\n      if (showPoint) {\n        points.forEach((point) => {\n          var _a, _b;\n          const pointID = point.id;\n          const pointRadius = pointID && [this.hoverPointID, (_a = this.selectedPoint) == null ? void 0 : _a.id].includes(pointID) ? POINT_ACTIVE_RADIUS : POINT_RADIUS;\n          this.arc(point, pointRadius, color);\n          if (![this.hoverPointID, (_b = this.selectedPoint) == null ? void 0 : _b.id].includes(pointID)) {\n            this.arc(point, INNER_POINT_RADIUS, \"white\");\n          }\n        });\n      }\n    };\n    this.drawStraightLine = (points, config, isActive = false) => {\n      const {ctx} = this;\n      if (ctx) {\n        ctx.save();\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n        ctx.strokeStyle = config.color;\n        ctx.lineWidth = config.lineWidth;\n        if (this.isReference) {\n          LineToolUtils.setReferenceCtx(ctx);\n        }\n        points.forEach((point, index) => {\n          ctx.beginPath();\n          if (index > 0) {\n            const prePoint = points[index - 1];\n            ctx.save();\n            if (prePoint == null ? void 0 : prePoint.specialEdge) {\n              LineToolUtils.setSpecialEdgeStyle(ctx);\n            }\n            if (isActive && this.hoverLineSegmentIndex + 1 === index) {\n              ctx.lineWidth = 4;\n            }\n            ctx.moveTo(prePoint.x, prePoint.y);\n            ctx.lineTo(point.x, point.y);\n            ctx.stroke();\n            ctx.restore();\n          }\n        });\n        ctx.restore();\n      }\n    };\n    this.drawLines = () => {\n      try {\n        const lineList = _.cloneDeep(this.attributeFilteredLines);\n        if (this.isHidden) {\n          return;\n        }\n        lineList.forEach((line) => {\n          if (this.selection.isIdSelected(line.id)) {\n            return;\n          }\n          if (line.pointList) {\n            line.pointList.map((i) => Object.assign(i, {actual: {x: i.x, y: i.y}}, this.coordUtils.getRenderCoord(i)));\n            const {order, label} = line;\n            const displayOrder = order;\n            const color = line && this.getLineColorByAttribute(line);\n            this.drawLine(line.pointList, void 0, color, false);\n            this.drawLineNumber(line.pointList[0], displayOrder, color, label, line.attribute, line.valid);\n            if (line.id !== this.textEditingID) {\n              this.drawLineTextAttribute(line.pointList[1], color, line == null ? void 0 : line.textAttribute);\n              this.drawLineLength(line.pointList, color);\n            }\n          }\n        });\n      } catch (e) {\n        console.error(e, \"\\u7EBF\\u6761\\u5DE5\\u5177\\u6570\\u636E\\u89E3\\u6790\\u9519\\u8BEF\");\n        this.lineList = [];\n        this.clearCanvas();\n      }\n    };\n    this.render = (nextPoint) => {\n      super.render();\n      this.drawLines();\n      this.drawActivatedLine(nextPoint, void 0, false);\n      this.renderTextAttribute();\n      this.renderCursorLine(this.getLineColor(this.defaultAttribute));\n    };\n    this.moveLineInPolygon = (offsetX, offsetY) => {\n      var _a;\n      if (!Array.isArray(this.activeLine)) {\n        return false;\n      }\n      const allPointsInRange = (_a = this.activeLine) == null ? void 0 : _a.every((i) => {\n        return this.isInBasicPolygon({x: i.x + offsetX, y: i.y + offsetY});\n      });\n      if (allPointsInRange) {\n        this.lineDragging = true;\n        this.moveActiveArea(offsetX, offsetY);\n      }\n    };\n    this.getSelectedLinesArea = () => {\n      return MathUtils.calcViewportBoundaries(this.selectedLines.reduce((pre, next) => (next == null ? void 0 : next.pointList) ? pre.concat(...next == null ? void 0 : next.pointList) : pre, []));\n    };\n    this.moveLineInRectRange = (offsetX, offsetY, rectHorizontalRange, rectVerticalRange) => {\n      if (this.selectedLines.length === 0) {\n        return;\n      }\n      const {top, left, right, bottom} = this.getSelectedLinesArea();\n      const hBoundaries = [left, right].map((i) => _.isNumber(i) ? i + offsetX : 0);\n      const vBoundaries = [top, bottom].map((i) => _.isNumber(i) ? i + offsetY : 0);\n      const horizontalInRange = left >= 0 && right && MathUtils.isInRange(hBoundaries, rectHorizontalRange);\n      const verticalInRange = top >= 0 && bottom && MathUtils.isInRange(vBoundaries, rectVerticalRange);\n      const calcOffsetX = horizontalInRange ? offsetX : 0;\n      const calcOffsetY = verticalInRange ? offsetY : 0;\n      this.lineDragging = true;\n      this.moveActiveArea(calcOffsetX, calcOffsetY);\n    };\n    this.onRightClick = (e) => {\n      this.cursor = void 0;\n      if (this.isCreate) {\n        if (this.isLinePointsNotEnough()) {\n          return;\n        }\n        if (LineToolUtils.lineLengthSum(this.activeLine || []) < this.minLength) {\n          this.emit(\"messageInfo\", `${Locale.getMessagesByLocale(EMessage.MinLengthLimitErrorNotice, this.lang)}${this.minLength}`);\n          return true;\n        }\n        this.stopLineCreating(true);\n        return;\n      }\n      const activeLine = this.findHoverLine(this.getCoordinate(e));\n      this.setSelectedLineID(activeLine == null ? void 0 : activeLine.id, e.ctrlKey);\n      this.emit(\"contextmenu\");\n    };\n    this.updateSelectedAttributeAfterHistoryChanged = () => {\n      if (this.selectedIDs.length > 0) {\n        const line = this.lineList.find((i) => i.id === this.selectedIDs[0]);\n        const attribute = line == null ? void 0 : line.attribute;\n        if (typeof attribute === \"string\") {\n          this.defaultAttribute = attribute;\n          this.updateAttribute(attribute);\n          this.render();\n        }\n      }\n    };\n    this.onLeftClick = (e) => {\n      const coord = this.getCoordinate(e);\n      const {lineDragging} = this;\n      this.lineDragging = false;\n      if (this.isSpaceKey) {\n        return;\n      }\n      if (this.isNone && e.ctrlKey) {\n        const hoveredLine = this.findHoverLine(coord);\n        if (hoveredLine) {\n          this.setInvalidLine(hoveredLine.id);\n        }\n        return;\n      }\n      if (this.isLinePointsExceed()) {\n        return;\n      }\n      const nextAxis = this.getNextPoint(e, coord);\n      if (this.isCreate || this.isNone) {\n        this.setCreateStatusAndAddPoint(nextAxis);\n        return;\n      }\n      if (this.isActive) {\n        if (lineDragging) {\n          return;\n        }\n        const isMouseCoordOutsideActiveArea = this.isMouseCoordOutsideActiveArea();\n        if (isMouseCoordOutsideActiveArea) {\n          this.setNoneStatus(false);\n          this.setCreateStatusAndAddPoint(nextAxis);\n          return;\n        }\n        const isSetSpecialLine = e.shiftKey;\n        if (isSetSpecialLine) {\n          this.updateLineSegmentSpecial(coord);\n          return;\n        }\n        if (this.coordsInsideActiveArea && e.ctrlKey) {\n          this.setInvalidLine(this.selectedID);\n        }\n        this.addLinePointToActiveLine();\n      }\n    };\n    this.onDblclick = () => {\n    };\n    this.onKeyUp = (e) => {\n      super.onKeyUp(e);\n      this.isShift = false;\n      this.hoverLineSegmentIndex = -1;\n      if (this.selection.triggerKeyboardEvent(e, this.setLineList)) {\n        return;\n      }\n      if (e.keyCode === EKeyCode.Esc) {\n        this.stopLineCreating(false);\n        return;\n      }\n      if (this.selectedLine) {\n        if (e.key === \"Delete\") {\n          this.deleteLine();\n          return;\n        }\n        if (e.key === \"f\") {\n          this.setInvalidLine(this.selectedID);\n          return;\n        }\n        if (e.key === \" \") {\n          this.continueToEdit();\n          return;\n        }\n      }\n      this.keyboardEventWhileLineCreating(e);\n    };\n    this.onRightDblClick = (e) => {\n      super.onRightDblClick(e);\n      const coord = this.getCoordinate(e);\n      if (this.isActive) {\n        const hoverPoint = this.findHoveredPoint(coord);\n        if (hoverPoint) {\n          this.deleteSelectedLinePoint(hoverPoint.id);\n          return;\n        }\n        this.deleteSelectedLine(coord);\n      }\n    };\n    this.setReference = (isReference) => {\n      this.isReference = isReference;\n    };\n    this.pointsWithinRange = (count) => {\n      if (this.lowerLimitPointNum && count < this.lowerLimitPointNum) {\n        return false;\n      }\n      if (this.upperLimitPointNum && count > this.upperLimitPointNum) {\n        return false;\n      }\n      return true;\n    };\n    this.setLineList = (lineList) => {\n      const lengthChanged = lineList.length !== this.lineListLen;\n      this.lineList = lineList;\n      if (lengthChanged) {\n        this.emit(\"updatePageNumber\");\n      }\n    };\n    this.textChange = (v) => {\n      if (this.config.textConfigurable === false || !this.selectedID) {\n        return;\n      }\n      this.updateSelectedTextAttribute(v);\n      this.emit(\"selectedChange\");\n    };\n    this.status = 2;\n    this.isMousedown = false;\n    this.lineDragging = false;\n    this.isLineValid = true;\n    this.setConfig(props.config);\n    this.prevAxis = {\n      x: 0,\n      y: 0\n    };\n    this.textEditingID = \"\";\n    this.updateSelectedTextAttribute = this.updateSelectedTextAttribute.bind(this);\n    this.getCurrentSelectedData = this.getCurrentSelectedData.bind(this);\n    this.actionsHistory = new ActionsHistory();\n    this.selection = new Selection(this);\n    this.dependToolConfig = {\n      lineType: ELineTypes.Line\n    };\n  }\n  get selectedLines() {\n    return this.lineList.filter((i) => this.selection.isIdSelected(i.id));\n  }\n  get isLineSelected() {\n    return this.selectedID && this.activeLine;\n  }\n  get selectedLine() {\n    return this.lineList.find((i) => i.id === this.selectedID);\n  }\n  get isCreate() {\n    return this.status === 0;\n  }\n  get isActive() {\n    return this.selectedLines.length > 0;\n  }\n  get isNone() {\n    return !this.isCreate && this.selectedIDs.length === 0;\n  }\n  get isCurve() {\n    return this.config.lineType === ELineTypes.Curve;\n  }\n  get isMultipleColor() {\n    return this.config.lineColor === ELineColor.MultiColor;\n  }\n  get imageSize() {\n    if (this.rotate % 180 === 0) {\n      return this.basicImgInfo;\n    }\n    return {\n      width: this.basicImgInfo.height,\n      height: this.basicImgInfo.width\n    };\n  }\n  get lineListLen() {\n    return this.lineList.length;\n  }\n  get edgeAdsorptionEnabled() {\n    return this.edgeAdsorption && !this.isCurve && this.lineListLen > 0;\n  }\n  get attributeConfigurable() {\n    return this.config.attributeConfigurable;\n  }\n  get isTextConfigurable() {\n    return this.config.textConfigurable;\n  }\n  get isDependPolygon() {\n    return this.dependToolName === EToolName.Polygon;\n  }\n  get isDependRect() {\n    return this.dependToolName === EToolName.Rect;\n  }\n  get isCurrentAttributeLocked() {\n    return this.attributeLockList.includes(this.defaultAttribute);\n  }\n  get attributeFilteredLines() {\n    if (this.attributeLockList.length > 0) {\n      return this.lineList.filter((v) => this.attributeLockList.includes((v == null ? void 0 : v.attribute) || \"\"));\n    }\n    return this.lineList;\n  }\n  get selectedIDs() {\n    return this.selection.selectedIDs;\n  }\n  get selectedID() {\n    return this.selection.selectedID;\n  }\n  get enableOutOfTarget() {\n    return this.config.enableOutOfTarget || this.config.outOfTarget || this.config.drawOutsideTarget;\n  }\n  get showOrder() {\n    var _a;\n    return (_a = this.config.showOrder) != null ? _a : this.config.isShowOrder;\n  }\n  get edgeAdsorption() {\n    return this.config.edgeAdsorption;\n  }\n  get attributeList() {\n    return this.config.attributeList;\n  }\n  get lowerLimitPointNum() {\n    return this.config.lowerLimitPointNum;\n  }\n  get minLength() {\n    var _a;\n    return ((_a = this.config) == null ? void 0 : _a.minLength) || 0;\n  }\n  get upperLimitPointNum() {\n    return this.config.upperLimitPointNum;\n  }\n  get textCheckType() {\n    return this.config.textCheckType;\n  }\n  get customFormat() {\n    return this.config.customFormat;\n  }\n  get dataList() {\n    return this.lineList;\n  }\n  get hasActiveLine() {\n    return this.activeLine && this.activeLine.length > 0;\n  }\n  get viewPortLines() {\n    const viewPort = CanvasUtils.getViewPort(this.canvas, this.currentPos, this.zoom);\n    if (this.isHidden) {\n      return [];\n    }\n    return this.attributeFilteredLines.filter((i) => {\n      var _a;\n      return (_a = i == null ? void 0 : i.pointList) == null ? void 0 : _a.some((p) => CanvasUtils.inViewPort(p, viewPort));\n    });\n  }\n  get lineStyle() {\n    return {\n      lineWidth: this.style.width,\n      color: this.getLineColor(this.defaultAttribute),\n      opacity: this.style.opacity\n    };\n  }\n  get selectedText() {\n    var _a, _b;\n    return (_b = (_a = this.lineList.find((i) => i.id === this.selectedID)) == null ? void 0 : _a.textAttribute) != null ? _b : \"\";\n  }\n  get currentPageResult() {\n    return this.lineList;\n  }\n  updateStatus(status, resetText = false) {\n    if (status === this.status) {\n      return;\n    }\n    if (resetText) {\n      let defaultText = \"\";\n      if (this.textCheckType === ETextType.Order && this.isTextConfigurable) {\n        defaultText = AttributeUtils.getTextAttribute(this.lineList, this.textCheckType);\n      }\n      this.emit(\"updateText\", defaultText);\n    }\n    this.status = status;\n    this.lineStatusChanged();\n  }\n  isInBasicPolygon(coord) {\n    var _a, _b;\n    return isInPolygon(coord, ((_a = this.basicResult) == null ? void 0 : _a.pointList) || [], (_b = this.dependToolConfig) == null ? void 0 : _b.lineType);\n  }\n  getPolygonPointList() {\n    if (!this.basicResult) {\n      return [];\n    }\n    const {pointList} = this.basicResult;\n    const {lineType} = this.dependToolConfig;\n    return lineType === ELineTypes.Curve ? createSmoothCurvePoints(pointList.reduce((acc, cur) => {\n      return [...acc, cur.x, cur.y];\n    }, []), 0.5, true, 20) : pointList;\n  }\n  getNextCoordByRenderCoord(renderCoord) {\n    return this.getNextCoordByAbsCoord(this.coordUtils.getAbsCoord(renderCoord));\n  }\n  getNextCoordByAbsCoord(absCoord) {\n    var _a;\n    const preAxis = (_a = this.activeLine) == null ? void 0 : _a.slice(-1)[0];\n    if (preAxis) {\n      return this.coordUtils.getNextCoordByDependTool(absCoord, preAxis);\n    }\n    return absCoord;\n  }\n  pointInLine(pointList, checkPoint, scope) {\n    if (pointList.filter((i) => i).length < 2) {\n      return false;\n    }\n    return pointList.some((point, index) => {\n      if (index === 0) {\n        return false;\n      }\n      const point1 = this.coordUtils.getRenderCoord(pointList[index - 1]);\n      const point2 = this.coordUtils.getRenderCoord(point);\n      return LineToolUtils.isInLine(checkPoint, point1, point2, scope);\n    });\n  }\n  arc(coord, size = POINT_RADIUS, color) {\n    var _a, _b, _c, _d, _e, _f;\n    if (this.ctx) {\n      const {x, y} = coord;\n      (_a = this.ctx) == null ? void 0 : _a.save();\n      (_b = this.ctx) == null ? void 0 : _b.beginPath();\n      this.ctx.fillStyle = color || this.lineStyle.color;\n      (_c = this.ctx) == null ? void 0 : _c.arc(x, y, size, 0, 360);\n      (_d = this.ctx) == null ? void 0 : _d.closePath();\n      (_e = this.ctx) == null ? void 0 : _e.fill();\n      (_f = this.ctx) == null ? void 0 : _f.restore();\n    }\n  }\n  renderActiveArea({top, left, right, bottom}) {\n    if (this.ctx) {\n      this.ctx.save();\n      this.ctx.beginPath();\n      this.ctx.strokeStyle = \"#B3B8FF\";\n      this.ctx.rect(left, top, right - left, bottom - top);\n      this.ctx.stroke();\n      this.ctx.restore();\n    }\n  }\n  addLinePoint(coord) {\n    var _a, _b, _c, _d;\n    this.arc(coord);\n    (_a = this.activeLine) == null ? void 0 : _a.push(__spreadProps(__spreadValues({}, coord), {id: uuid()}));\n    if (((_b = this.activeLine) == null ? void 0 : _b.length) === 1) {\n      (_c = this.actionsHistory) == null ? void 0 : _c.initRecord(this.activeLine);\n    } else {\n      (_d = this.actionsHistory) == null ? void 0 : _d.pushHistory(this.activeLine);\n    }\n    this.render();\n  }\n  setCreateStatusAndAddPoint(coord, isRestText = false) {\n    this.updateStatus(0, isRestText);\n    this.addLinePoint(coord);\n  }\n  isActiveLineValid() {\n    var _a;\n    return this.selectedID ? (_a = this.lineList.find((i) => i.id === this.selectedID)) == null ? void 0 : _a.valid : this.isLineValid;\n  }\n  nextOrder() {\n    return this.lineListLen === 0 ? 1 : this.lineList.slice(-1)[0].order + 1;\n  }\n  getLineColorByAttribute(line, isSelected = false) {\n    return StyleUtils.getStrokeAndFill(this.getColor(line.attribute), line.valid, {isSelected}).stroke;\n  }\n  drawLineNumber(coord, order = 1, color, label = \"\", attribute, valid = true) {\n    var _a, _b, _c;\n    if ((this.showOrder || this.attributeConfigurable) && this.ctx) {\n      let text = this.showOrder ? order.toString() : `${label}`;\n      if (this.attributeConfigurable) {\n        const keyForAttribute = attribute ? (_c = (_b = (_a = this.attributeList) == null ? void 0 : _a.find((i) => i.value === attribute)) == null ? void 0 : _b.key) != null ? _c : attribute : \"\";\n        text = [text, `${!valid && keyForAttribute ? \"\\u65E0\\u6548\" : \"\"}${keyForAttribute}`].filter((i) => i).join(\"_\");\n      }\n      this.drawText(coord, text, color);\n    }\n  }\n  drawLineTextAttribute(coord, color, text) {\n    if (coord && text) {\n      return this.drawText(coord, text, color, 200);\n    }\n  }\n  drawLineLength(pointList, color) {\n    var _a;\n    if (((_a = this.config) == null ? void 0 : _a.showLineLength) && pointList) {\n      const length = pointList.reduce((pre, next, index) => {\n        if (index <= 0 || !pointList[index - 1].actual || !next.actual) {\n          return pre;\n        }\n        return pre + LineToolUtils.calcDistance(pointList[index - 1].actual, next.actual);\n      }, 0);\n      const renderPos = pointList[pointList.length - 1];\n      this.drawText(renderPos, `l = ${length.toFixed(2)}`, color);\n    }\n  }\n  drawText(coord, text, color, lineWidth) {\n    var _a, _b;\n    if (this.ctx) {\n      (_a = this.ctx) == null ? void 0 : _a.save();\n      this.ctx.font = \"italic bold 14px SourceHanSansCN-Regular\";\n      this.ctx.fillStyle = color;\n      this.ctx.strokeStyle = color;\n      this.ctx.shadowColor = \"rgba(0, 0, 0, 0.6)\";\n      this.ctx.shadowOffsetY = 2;\n      this.ctx.shadowBlur = 4;\n      if (lineWidth) {\n        DrawUtils.wrapText(this.canvas, text, coord.x - LINE_ORDER_OFFSET.x, coord.y - LINE_ORDER_OFFSET.y, lineWidth);\n      } else {\n        this.ctx.fillText(text, coord.x - LINE_ORDER_OFFSET.x, coord.y - LINE_ORDER_OFFSET.y);\n      }\n      (_b = this.ctx) == null ? void 0 : _b.restore();\n    }\n  }\n  moveActiveArea(offsetX, offsetY) {\n    if (this.selectedLines.length > 0) {\n      this.selectedLines.forEach((line) => {\n        var _a;\n        (_a = line.pointList) == null ? void 0 : _a.forEach((i) => Object.assign(i, {x: i.x + offsetX, y: i.y + offsetY}));\n      });\n      this.render();\n    }\n    this.emit(\"dataUpdated\", this.lineList, this.selectedIDs);\n  }\n  findHoveredPoint(coord) {\n    if (!this.activeLine) {\n      return;\n    }\n    return this.activeLine.find((i) => {\n      const iAxis = this.coordUtils.getRenderCoord(i);\n      return LineToolUtils.calcDistance(iAxis, coord) <= POINT_ACTIVE_RADIUS;\n    });\n  }\n  findHoverLine(coord) {\n    const line = _.cloneDeep(this.lineList).reverse().find(({pointList}) => {\n      const list = pointList ? this.getPointList(pointList) : [];\n      const scope = this.getLineWidthScope();\n      return list.some((point, index) => {\n        if (index === 0) {\n          return false;\n        }\n        const point1 = this.coordUtils.getRenderCoord(point);\n        const point2 = this.coordUtils.getRenderCoord(list[index - 1]);\n        return LineToolUtils.isInLine(coord, point1, point2, scope);\n      });\n    });\n    return line;\n  }\n  getAdsorptionPoint(coord) {\n    let point;\n    let minDistance;\n    let snappedPoint;\n    _.cloneDeep(this.lineList).reverse().forEach(({pointList, id}) => {\n      if (id === this.selectedID || !pointList || (pointList == null ? void 0 : pointList.length) < 2) {\n        return;\n      }\n      const nearestPoint = this.findNearestPoint(pointList, coord);\n      if (nearestPoint) {\n        if (nearestPoint.minDistance === 0) {\n          point = nearestPoint.point;\n          return;\n        }\n        if (minDistance === void 0 || nearestPoint.minDistance < minDistance) {\n          point = nearestPoint.point;\n          minDistance = nearestPoint.minDistance;\n        }\n      }\n    });\n    return snappedPoint || point;\n  }\n  findNearestPoint(pointList, coord, minLength = 7) {\n    let point;\n    const minDistance = minLength;\n    for (let i = 1; i <= pointList.length - 1; i++) {\n      const point1 = this.coordUtils.getRenderCoord(pointList[i]);\n      const point2 = this.coordUtils.getRenderCoord(pointList[i - 1]);\n      const {length, footPoint} = MathUtils.getFootOfPerpendicular(coord, point1, point2);\n      const twoPointDistance1 = LineToolUtils.calcTwoPointDistance(point1, coord);\n      const twoPointDistance2 = LineToolUtils.calcTwoPointDistance(point2, coord);\n      if (twoPointDistance1 <= minLength * 2) {\n        point = point1;\n        minLength = 0;\n        break;\n      }\n      if (twoPointDistance2 <= minLength * 2) {\n        point = point2;\n        minLength = 0;\n        break;\n      }\n      if (length < minLength) {\n        point = footPoint;\n        minLength = length;\n      }\n    }\n    return point ? {point, minDistance} : void 0;\n  }\n  getPointList(pointList) {\n    return this.isCurve ? createSmoothCurvePointsFromPointList(pointList, SEGMENT_NUMBER) : pointList;\n  }\n  moveSelectedLine(coord) {\n    const offsetX = (coord.x - this.prevAxis.x) / this.zoom;\n    const offsetY = (coord.y - this.prevAxis.y) / this.zoom;\n    if (this.enableOutOfTarget) {\n      this.lineDragging = true;\n      this.moveActiveArea(offsetX, offsetY);\n      return;\n    }\n    if (this.isDependPolygon) {\n      this.moveLineInPolygon(offsetX, offsetY);\n      return;\n    }\n    let rectHorizontalRange = [0, this.imageSize.width];\n    let rectVerticalRange = [0, this.imageSize.height];\n    if (this.isDependRect) {\n      const {x, y, width, height} = this.basicResult;\n      rectHorizontalRange = [x, x + width];\n      rectVerticalRange = [y, y + height];\n    }\n    this.moveLineInRectRange(offsetX, offsetY, rectHorizontalRange, rectVerticalRange);\n  }\n  moveSelectPoint(coord) {\n    if (!this.selectedPoint) {\n      return;\n    }\n    const offsetX = coord.x - this.prevAxis.x;\n    const offsetY = coord.y - this.prevAxis.y;\n    const newX = (this.selectedPoint ? this.selectedPoint.x : 0) + offsetX / this.zoom;\n    const newY = (this.selectedPoint ? this.selectedPoint.y : 0) + offsetY / this.zoom;\n    const pointPosition = {\n      x: newX,\n      y: newY\n    };\n    Object.assign(this.selectedPoint, this.getNextCoordByAbsCoord(pointPosition));\n    this.updateLines();\n    this.render();\n  }\n  getCoordByConfig(e, coord) {\n    var _a;\n    const isVH = !!e.shiftKey;\n    const disabledAdsorb = e.altKey;\n    if (((_a = this.activeLine) == null ? void 0 : _a.length) > 0 && isVH) {\n      const lastPoint = this.activeLine.slice(-1)[0];\n      return LineToolUtils.getVHPoint(lastPoint, coord, this.coordUtils.getAbsCoord(coord), this.coordUtils.getRenderCoord(lastPoint));\n    }\n    if (this.edgeAdsorptionEnabled && !disabledAdsorb) {\n      return this.getAdsorptionPoint(coord);\n    }\n    return coord;\n  }\n  getNextPoint(e, nextPoint) {\n    const newPoint = this.getCoordByConfig(e, nextPoint) || nextPoint;\n    return this.enableOutOfTarget ? this.coordUtils.getAbsCoord(newPoint) : this.getNextCoordByRenderCoord(newPoint);\n  }\n  lineHover() {\n    this.render();\n  }\n  mouseMoveHandler(e) {\n    const coord = this.getCoordinate(e);\n    const isLeftClick = e.which === 1;\n    if (this.isCreate) {\n      if (this.hasActiveLine) {\n        this.renderNextPoint(e, coord);\n      }\n      return;\n    }\n    if (this.isNone) {\n      this.lineHover();\n      if (this.edgeAdsorptionEnabled && !e.altKey) {\n        const edgeAdsorptionPoint = this.getAdsorptionPoint(coord);\n        if (edgeAdsorptionPoint) {\n          this.arc(edgeAdsorptionPoint);\n        }\n      }\n    }\n    if (this.isActive) {\n      if (this.isMousedown && isLeftClick) {\n        if (this.selectedPoint) {\n          this.moveSelectPoint(coord);\n          return;\n        }\n        if (this.coordsInsideActiveArea) {\n          this.moveSelectedLine(coord);\n          this.drawActivatedLine(void 0, void 0, true);\n          return;\n        }\n      }\n      this.drawHoverPoint(coord);\n      this.render();\n    }\n  }\n  onMouseMove(e) {\n    if (super.onMouseMove(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return;\n    }\n    const coord = this.getCoordinate(e);\n    this.mouseMoveHandler(e);\n    this.prevAxis = coord;\n  }\n  setActiveLine(pointList) {\n    this.activeLine = pointList ? _.cloneDeep(pointList) : void 0;\n  }\n  historyChanged(funcName) {\n    const enableKeyName = `${funcName}Enabled`;\n    if (this.isCreate) {\n      if (this.actionsHistory && this.actionsHistory[enableKeyName]) {\n        const record = this.actionsHistory && this.actionsHistory[funcName]();\n        this.setActiveLine(record);\n        this.render();\n      }\n      return;\n    }\n    if (this.history && this.history[enableKeyName]) {\n      const currentHistory = this.history[funcName]();\n      const activeLine = currentHistory == null ? void 0 : currentHistory.find((i) => i.id === this.selectedID);\n      this.lineList = currentHistory;\n      if (this.selectedID && activeLine) {\n        this.setActiveLine(activeLine == null ? void 0 : activeLine.pointList);\n      } else {\n        this.setNoneStatus();\n      }\n      this.render();\n    }\n    this.emit(\"dataUpdated\", this.lineList);\n  }\n  undo() {\n    this.historyChanged(\"undo\");\n    this.updateSelectedAttributeAfterHistoryChanged();\n  }\n  redo() {\n    this.historyChanged(\"redo\");\n    this.updateSelectedAttributeAfterHistoryChanged();\n  }\n  isCoordInsideTarget(coord) {\n    if (this.isDependPolygon) {\n      return this.isInBasicPolygon(coord);\n    }\n    if (this.isDependRect) {\n      const {x, y, width, height} = this.basicResult;\n      const rectHorizontalRange = [x, x + width];\n      const rectVerticalRange = [y, y + height];\n      return MathUtils.isInRange(coord.x, rectHorizontalRange) && MathUtils.isInRange(coord.y, rectVerticalRange);\n    }\n    return MathUtils.isInRange(coord.x, [0, this.imageSize.width]) && MathUtils.isInRange(coord.y, [0, this.imageSize.height]);\n  }\n  getPointInsertIndex(coord, scope) {\n    if (coord && this.activeLine) {\n      const pointList = this.getPointList(this.activeLine);\n      if (this.activeLine.length === 2) {\n        return 1;\n      }\n      return this.activeLine.findIndex((i, index) => {\n        if (index > 0) {\n          const straightLinePoints = this.activeLine ? this.activeLine[index - 1] : void 0;\n          const points = this.isCurve ? pointList.slice((index - 1) * (SEGMENT_NUMBER + 1), index * (SEGMENT_NUMBER + 1)) : [straightLinePoints, i];\n          return this.pointInLine(points, coord, scope || this.getLineWidthScope());\n        }\n        return false;\n      });\n    }\n    return -1;\n  }\n  getLineWidthScope() {\n    return this.lineStyle.lineWidth;\n  }\n  isMouseCoordOutsideActiveArea() {\n    return !this.coordsInsideActiveArea && !this.selectedPoint;\n  }\n  isLinePointsExceed() {\n    return this.isCreate && this.activeLine && this.upperLimitPointNum && ~~this.upperLimitPointNum <= this.activeLine.length;\n  }\n  isLinePointsNotEnough() {\n    var _a;\n    return this.activeLine && ((_a = this.activeLine) == null ? void 0 : _a.length) < this.lowerLimitPointNum;\n  }\n  updateLineSegmentSpecial(coord) {\n    const specialEdgeIndex = this.getPointInsertIndex(coord, 2) - 1;\n    if (specialEdgeIndex > -1) {\n      const pointData = this.activeLine[specialEdgeIndex];\n      pointData.specialEdge = !pointData.specialEdge;\n      this.hoverLineSegmentIndex = -1;\n      this.render();\n    }\n  }\n  addLinePointToActiveLine() {\n    var _a;\n    const insertIndex = this.getPointInsertIndex(this.cursor);\n    const pointsWithInRange = this.pointsWithinRange(this.activeLine.length + 1);\n    if (this.cursor && insertIndex > -1 && pointsWithInRange) {\n      this.activeLine.splice(insertIndex, 0, __spreadProps(__spreadValues({}, this.coordUtils.getAbsCoord(this.cursor)), {id: uuid()}));\n      this.updateLines();\n      (_a = this.history) == null ? void 0 : _a.pushHistory(this.lineList);\n      this.render();\n      this.cursor = void 0;\n    }\n  }\n  isCoordOnSelectedArea(coord) {\n    return this.selectedLines.some((line) => {\n      return LineToolUtils.inArea(MathUtils.calcViewportBoundaries(line.pointList), this.coordUtils.getAbsCoord(coord));\n    });\n  }\n  onMouseDown(e) {\n    if (super.onMouseDown(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return;\n    }\n    const coord = this.getCoordinate(e);\n    this.isMousedown = true;\n    this.prevAxis = coord;\n    if (e.which === 3) {\n      this.cursor = void 0;\n      return;\n    }\n    this.selectedPoint = this.findHoveredPoint(coord);\n    this.coordsInsideActiveArea = this.selectedLines.length > 0 ? this.isCoordOnSelectedArea(coord) : false;\n    this.lineDragging = false;\n  }\n  lineHasChanged() {\n    const line = this.lineList.find((i) => i.id === this.selectedID);\n    return line ? JSON.stringify(line.pointList) !== JSON.stringify(this.activeLine) : false;\n  }\n  updateLines() {\n    const line = this.lineList.find((i) => i.id === this.selectedID);\n    if (line) {\n      line.pointList = _.cloneDeep(this.activeLine);\n      this.updatedLine = line;\n      this.emit(\"dataUpdated\", this.lineList);\n    }\n  }\n  onMouseUp(e) {\n    const reset = () => {\n      this.isMousedown = false;\n      this.hoverPointID = void 0;\n      this.cursor = void 0;\n      this.selectedPoint = void 0;\n    };\n    this.hoverPointID = void 0;\n    if (super.onMouseUp(e) || this.forbidMouseOperation || !this.imgInfo) {\n      reset();\n      return;\n    }\n    if (e.which === 1) {\n      this.onLeftClick(e);\n    }\n    if (e.which === 3) {\n      this.onRightClick(e);\n    }\n    reset();\n  }\n  isTextValid(text) {\n    return AttributeUtils.textAttributeValidate(this.textCheckType, this.customFormat, text);\n  }\n  createLineData() {\n    const id = uuid();\n    const newLine = {\n      pointList: _.cloneDeep(this.activeLine),\n      id,\n      valid: this.isLineValid,\n      order: this.nextOrder()\n    };\n    newLine.attribute = this.defaultAttribute;\n    return newLine;\n  }\n  stopLineCreating(isAppend = true) {\n    var _a, _b, _c, _d;\n    const setActiveAfterCreating = this.selectedID ? true : !!this.isTextConfigurable;\n    let selectedID;\n    if (isAppend) {\n      if (this.selectedID) {\n        const line = this.lineList.find((i) => i.id === this.selectedID);\n        selectedID = this.selectedID;\n        if (line) {\n          line.pointList = _.cloneWith(this.activeLine);\n          if (!_.isEqual(line.pointList, (_a = this.history) == null ? void 0 : _a.pushHistory(this.lineList))) {\n            (_b = this.history) == null ? void 0 : _b.pushHistory(this.lineList);\n          }\n        }\n      } else if (this.isCreate && this.activeLine && this.activeLine.length > 1) {\n        const newLine = this.createLineData();\n        selectedID = newLine.id;\n        this.setLineList([...this.lineList, newLine]);\n        (_c = this.history) == null ? void 0 : _c.pushHistory(this.lineList);\n      }\n    }\n    this.setNoneStatus();\n    if (setActiveAfterCreating) {\n      this.activeLine = [];\n      this.setSelectedLineID(selectedID, false, false);\n    }\n    (_d = this.actionsHistory) == null ? void 0 : _d.empty();\n    this.emit(\"dataUpdated\", this.lineList, this.selectedIDs);\n    this.render();\n  }\n  setNoneStatus(updateStatus = true) {\n    if (updateStatus) {\n      this.updateStatus(2);\n    }\n    this.activeLine = [];\n    this.setSelectedLineID(void 0);\n    this.isLineValid = true;\n    this.cursor = void 0;\n  }\n  setKeyDownStatus(e, value) {\n    this.isShift = value != null ? value : e.keyCode === EKeyCode.Shift;\n  }\n  continueToEdit() {\n    var _a, _b;\n    if ((_a = this.selectedLine) == null ? void 0 : _a.pointList) {\n      this.updateStatus(0);\n      this.cursor = void 0;\n      this.setActiveLine(this.selectedLine.pointList);\n      (_b = this.actionsHistory) == null ? void 0 : _b.pushHistory(this.activeLine);\n      this.render();\n    }\n  }\n  setInvalidLineOnCreating(e) {\n    if (this.selectedID && e.keyCode !== EKeyCode.Ctrl || !this.isCreate) {\n      return;\n    }\n    const valid = !e.ctrlKey;\n    if (this.selectedID) {\n      this.setInvalidLine(this.selectedID, valid, false);\n    } else {\n      this.isLineValid = valid;\n    }\n  }\n  onKeyDown(e) {\n    super.onKeyDown(e);\n    this.setKeyDownStatus(e);\n    if (e.keyCode === EKeyCode.Z && !e.ctrlKey) {\n      this.toggleIsHide();\n    }\n    if (e.keyCode === EKeyCode.Shift) {\n      this.render();\n    }\n    if (e.keyCode === EKeyCode.Tab) {\n      e.preventDefault();\n      this.selectToNextLine(e);\n      return;\n    }\n    if (this.isCreate) {\n      this.keyboardEventWhileLineCreating(e);\n    }\n    if (this.config.attributeConfigurable) {\n      const keyCode2Attribute = AttributeUtils.getAttributeByKeycode(e.keyCode, this.config.attributeList);\n      if (keyCode2Attribute !== void 0) {\n        this.setDefaultAttribute(keyCode2Attribute);\n      }\n    }\n  }\n  selectToNextLine(e) {\n    const nextSelectedLine = CommonToolUtils.getNextSelectedRectIDByEvent(this.viewPortLines.map((i) => {\n      var _a, _b, _c, _d;\n      return __spreadProps(__spreadValues({}, i), {\n        x: (_b = (_a = i.pointList[0]) == null ? void 0 : _a.x) != null ? _b : 0,\n        y: (_d = (_c = i.pointList[0]) == null ? void 0 : _c.y) != null ? _d : 0\n      });\n    }), e, this.selectedID);\n    if (nextSelectedLine) {\n      this.selection.setSelectedIDs(nextSelectedLine.id);\n    }\n  }\n  keyboardEventWhileLineCreating(e) {\n    if (!this.isCreate) {\n      return;\n    }\n    if (e.keyCode === EKeyCode.Ctrl) {\n      this.setInvalidLineOnCreating(e);\n    }\n    if ([EKeyCode.Shift, EKeyCode.Alt].includes(e.keyCode)) {\n      this.renderNextPoint(e, this.prevAxis);\n    }\n  }\n  renderNextPoint(e, coord) {\n    const nextPoint = this.coordUtils.getRenderCoord(this.getNextPoint(e, coord));\n    this.render(nextPoint);\n  }\n  deleteSelectedLine(coord) {\n    var _a;\n    if (this.selectedLine) {\n      const boundary = MathUtils.calcViewportBoundaries((_a = this.selectedLine) == null ? void 0 : _a.pointList, this.isCurve, SEGMENT_NUMBER, this.zoom);\n      const axisOnArea = LineToolUtils.inArea(boundary, this.coordUtils.getAbsCoord(coord));\n      if (axisOnArea) {\n        this.deleteLine();\n      }\n    }\n  }\n  deleteSelectedLinePoint(selectedID) {\n    var _a;\n    const pointsWithinRange = this.pointsWithinRange(this.activeLine.length - 1);\n    if (pointsWithinRange && selectedID) {\n      this.setActiveLine(this.activeLine.filter((i) => i.id !== selectedID));\n      this.updateLines();\n      (_a = this.history) == null ? void 0 : _a.pushHistory(this.lineList);\n    }\n    this.cursor = void 0;\n    this.render();\n  }\n  deleteLine() {\n    var _a;\n    this.lineList = this.lineList.filter((i) => !this.selection.isIdSelected(i.id));\n    (_a = this.history) == null ? void 0 : _a.pushHistory(this.lineList);\n    this.setNoneStatus();\n    this.emit(\"dataUpdated\", this.lineList);\n    this.render();\n  }\n  setInvalidLine(id, valid, isRender = true) {\n    var _a;\n    const line = this.lineList.find((i) => i.id === id);\n    if (line) {\n      line.valid = valid !== void 0 ? valid : !line.valid;\n      (_a = this.history) == null ? void 0 : _a.pushHistory(this.lineList);\n      this.emit(\"dataUpdated\", this.lineList);\n      if (isRender) {\n        this.render();\n      }\n    }\n  }\n  empty() {\n    var _a, _b;\n    this.lineList = [];\n    this.setNoneStatus();\n    this.selectedPoint = void 0;\n    (_a = this.actionsHistory) == null ? void 0 : _a.empty();\n    (_b = this.history) == null ? void 0 : _b.init();\n    this.emit(\"dataUpdated\", this.lineList);\n    this.render();\n  }\n  setAttribute(attribute) {\n    var _a;\n    if (this.attributeConfigurable) {\n      this.defaultAttribute = attribute;\n      this.setLineAttribute(\"attribute\", attribute);\n      if (this.selectedIDs.length > 0) {\n        (_a = this.history) == null ? void 0 : _a.pushHistory(this.lineList);\n      }\n    }\n  }\n  setTextAttribute(text) {\n    var _a;\n    if (this.isTextConfigurable) {\n      this.setLineAttribute(\"textAttribute\", text);\n      (_a = this.history) == null ? void 0 : _a.applyAttribute(this.selectedID, \"textAttribute\", text);\n    }\n  }\n  setLineAttribute(key, value) {\n    if (this.selectedIDs.length > 0) {\n      this.lineList.forEach((line) => {\n        if (this.selection.isIdSelected(line.id)) {\n          line[key] = value;\n        }\n      });\n      this.render();\n    }\n  }\n  updateAttribute(attribute) {\n    this.emit(\"updateAttribute\", attribute);\n  }\n  updateLineAttributes(line) {\n    var _a;\n    if (this.attributeConfigurable && line) {\n      const attribute = (line == null ? void 0 : line.attribute) || \"\";\n      this.defaultAttribute = attribute;\n      this.updateAttribute(attribute);\n    }\n    if (this.isTextConfigurable && line) {\n      const text = (line == null ? void 0 : line.textAttribute) || \"\";\n      this.updateTextAttribute(text);\n    }\n    (_a = this.history) == null ? void 0 : _a.updateHistory(this.lineList);\n  }\n  lineStatusChanged() {\n    this.emit(\"lineStatusChanged\", {\n      status: this.status,\n      selectedLineID: this.selectedID\n    });\n  }\n  updateTextAttribute(text) {\n    if (this.selectedID) {\n      const line = this.lineList.find((i) => i.id === this.selectedID);\n      if (line) {\n        line.textAttribute = text;\n      }\n    }\n    this.emit(\"updateText\", text);\n  }\n  saveData() {\n    this.stopLineCreating();\n    this.setNoneStatus();\n    this.render();\n  }\n  setTextEditingID(id) {\n    this.textEditingID = id;\n    this.render();\n  }\n  updateAttrWhileIDChanged(id) {\n    if (id) {\n      const line = this.lineList.find((i) => i.id === id);\n      if (line) {\n        this.setDefaultAttribute(line.attribute);\n      }\n    }\n  }\n  setSelectedLineID(id, isAppend = false, triggerAttrUpdate = true) {\n    this.selection.setSelectedIDs(id, isAppend);\n    if (triggerAttrUpdate && id) {\n      this.updateAttrWhileIDChanged(this.selectedID);\n    }\n    if (this.selectedLine) {\n      this.setActiveLine(this.selectedLine.pointList);\n    }\n    if (this.selectedIDs.length === 0) {\n      this.setActiveLine([]);\n    }\n    this.emit(\"dataUpdated\", this.lineList, this.selectedIDs);\n  }\n  attributeLockListChange(attributeLockList) {\n    this.attributeLockList = attributeLockList;\n    this.render();\n  }\n  setResult(lineList) {\n    this.setLineList(lineList);\n    this.render();\n  }\n  setConfig(config) {\n    super.setConfig(config);\n  }\n  toggleIsHide() {\n    this.setIsHidden(!this.isHidden);\n    this.render();\n  }\n  clearCanvas() {\n    super.clearCanvas();\n  }\n  clearResult() {\n    this.setResult([]);\n    this.setSelectedLineID(void 0);\n    this.render();\n  }\n  exportData() {\n    return [this.lineList, this.basicImgInfo];\n  }\n  setDefaultAttribute(attribute = \"\") {\n    var _a;\n    if (this.attributeConfigurable) {\n      this.defaultAttribute = attribute;\n      this.changeStyle(this.defaultAttribute);\n      this.setLineAttribute(\"attribute\", attribute);\n      if (this.selectedIDs.length > 0) {\n        (_a = this.history) == null ? void 0 : _a.pushHistory(this.lineList);\n      }\n      this.emit(\"changeAttributeSidebar\");\n    }\n  }\n  getCurrentSelectedData() {\n    var _a, _b;\n    const valid = this.isActiveLineValid();\n    const attribute = this.defaultAttribute;\n    const toolColor = this.getColor(attribute);\n    const color = valid ? toolColor == null ? void 0 : toolColor.valid.stroke : toolColor == null ? void 0 : toolColor.invalid.stroke;\n    const textAttribute = (_b = (_a = this.lineList.find((i) => i.id === this.selectedID)) == null ? void 0 : _a.textAttribute) != null ? _b : \"\";\n    return {\n      color,\n      textAttribute\n    };\n  }\n  renderTextAttribute() {\n    var _a, _b, _c, _d;\n    if (!this.ctx || !this.selectedLine || this.activeLine && ((_a = this.activeLine) == null ? void 0 : _a.length) < 2) {\n      return;\n    }\n    const valid = this.isActiveLineValid();\n    const attribute = this.defaultAttribute;\n    const {x, y} = this.selectedLine.pointList[1];\n    const coordinate = this.coordUtils.getRenderCoord({x, y});\n    const toolColor = this.getColor(attribute);\n    const color = valid ? toolColor == null ? void 0 : toolColor.valid.stroke : toolColor == null ? void 0 : toolColor.invalid.stroke;\n    const textAttribute = (_c = (_b = this.lineList.find((i) => i.id === this.selectedID)) == null ? void 0 : _b.textAttribute) != null ? _c : \"\";\n    if (!this._textAttributeInstance) {\n      this._textAttributeInstance = new TextAttributeClass({\n        container: this.container,\n        icon: this.getTextIconSvg(attribute),\n        color,\n        getCurrentSelectedData: this.getCurrentSelectedData,\n        updateSelectedTextAttribute: this.updateSelectedTextAttribute\n      });\n    }\n    if (this._textAttributeInstance && !((_d = this._textAttributeInstance) == null ? void 0 : _d.isExit)) {\n      this._textAttributeInstance.appendToContainer();\n    }\n    this._textAttributeInstance.update(`${textAttribute}`, {\n      left: coordinate.x,\n      top: coordinate.y,\n      color\n    });\n    this._textAttributeInstance.updateIcon(this.getTextIconSvg(attribute));\n  }\n  getTextIconSvg(attribute = \"\") {\n    return AttributeUtils.getTextIconSvg(attribute, this.config.attributeList, this.config.attributeConfigurable, this.baseIcon);\n  }\n  updateSelectedTextAttribute(newTextAttribute) {\n    if (this._textAttributeInstance && newTextAttribute && this.selectedID) {\n      let textAttribute = newTextAttribute;\n      const textAttributeInvalid = !AttributeUtils.textAttributeValidate(this.config.textCheckType, \"\", textAttribute);\n      if (textAttributeInvalid) {\n        this.emit(\"messageError\", AttributeUtils.getErrorNotice(this.config.textCheckType, this.lang));\n        textAttribute = \"\";\n      }\n      this.setTextAttribute(textAttribute);\n      this.emit(\"updateTextAttribute\");\n      this.render();\n    }\n  }\n}\n\nexport { INNER_POINT_RADIUS, LINE_ORDER_OFFSET, POINT_ACTIVE_RADIUS, POINT_RADIUS, SEGMENT_NUMBER, LineToolOperation as default };\n","class EventListener {\n  constructor() {\n    this._events = new Map();\n  }\n  on(eventName, callback) {\n    const existEvents = this._events.get(eventName) || [];\n    if (!existEvents.some((fn) => fn === callback)) {\n      this._events.set(eventName, existEvents.concat(callback));\n    }\n  }\n  singleOn(eventName, callback) {\n    this._events.set(eventName, [callback]);\n  }\n  emit(eventName, ...args) {\n    const listener = this._events.get(eventName);\n    if (listener) {\n      listener.forEach((fn) => {\n        if (fn) {\n          fn(...args);\n        }\n      });\n    }\n  }\n  unbind(eventName, callback) {\n    const existEvents = this._events.get(eventName);\n    if (existEvents) {\n      this._events.set(eventName, existEvents.filter((fn) => fn !== callback));\n    }\n  }\n  unbindAll(eventName) {\n    this._events.delete(eventName);\n  }\n}\n\nexport { EventListener as default };\n","import { toolStyleConverter } from '@labelbee/lb-utils';\nimport { isNumber } from 'lodash';\nimport { EOperationMode, EToolName } from '../../constant/tool.js';\nimport MathUtils from '../../utils/MathUtils.js';\nimport AxisUtils, { CoordinateUtils } from '../../utils/tool/AxisUtils.js';\nimport CanvasUtils from '../../utils/tool/CanvasUtils.js';\nimport CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\nimport LineToolUtils from '../../utils/tool/LineToolUtils.js';\nimport { EGrowthMode, EDragStatus, ELang } from '../../constant/annotation.js';\nimport EKeyCode from '../../constant/keyCode.js';\nimport { COLORS_ARRAY, styleString, BASE_ICON } from '../../constant/style.js';\nimport Locale from '../../locales/index.js';\nimport { EMessage } from '../../locales/constants.js';\nimport ActionsHistory from '../../utils/ActionsHistory.js';\nimport AttributeUtils from '../../utils/tool/AttributeUtils.js';\nimport DblClickEventListener from '../../utils/tool/DblClickEventListener.js';\nimport DrawUtils from '../../utils/tool/DrawUtils.js';\nimport ImgPosUtils from '../../utils/tool/ImgPosUtils.js';\nimport RenderDomUtils from '../../utils/tool/RenderDomUtils.js';\nimport ZoomUtils from '../../utils/tool/ZoomUtils.js';\nimport EventListener from './eventListener.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nconst DEFAULT_ZOOM_INFO = {\n  min: 0.2,\n  max: 1e3,\n  ratio: 0.4\n};\nclass BasicToolOperation extends EventListener {\n  constructor(props) {\n    super();\n    this.isDrag = false;\n    this.isSpaceKey = false;\n    this.operationMode = EOperationMode.General;\n    this.innerZoom = 1;\n    this.basicZoom = 0.01;\n    this.isSpaceClick = false;\n    this.isDragStart = false;\n    this.startTime = 0;\n    this.zoomInfo = DEFAULT_ZOOM_INFO;\n    this.initImgPos = () => __async(this, null, function* () {\n      var _a, _b;\n      if (!this.imgNode) {\n        return;\n      }\n      const zoomRatio = (_a = this._imgAttribute) == null ? void 0 : _a.zoomRatio;\n      const isOriginalSize = (_b = this._imgAttribute) == null ? void 0 : _b.isOriginalSize;\n      const {currentPos, imgInfo, zoom} = ImgPosUtils.getInitImgPos(this.size, {width: this.imgNode.width, height: this.imgNode.height}, this.rotate, zoomRatio, isOriginalSize);\n      this.setCurrentPos(currentPos);\n      this.currentPosStorage = currentPos;\n      this.setImgInfo(imgInfo);\n      this.setZoom(zoom);\n      this.render();\n      this.renderBasicCanvas();\n      this.emit(\"dependRender\");\n      this.emit(\"renderZoom\", zoom, currentPos, imgInfo);\n    });\n    this.getCurrentPos = (coord) => {\n      const {_firstClickCoordinate, currentPosStorage} = this;\n      try {\n        let currentPos;\n        if (_firstClickCoordinate && currentPosStorage) {\n          currentPos = {\n            y: currentPosStorage.y + coord.y - _firstClickCoordinate.y,\n            x: currentPosStorage.x + coord.x - _firstClickCoordinate.x\n          };\n        } else {\n          currentPos = {\n            x: 0,\n            y: 0\n          };\n        }\n        return currentPos;\n      } catch (e) {\n        console.error(e);\n        return {\n          x: 0,\n          y: 0\n        };\n      }\n    };\n    this.wheelChangePos = (coord, operator, newZoom) => {\n      const {currentPos, imgNode} = this;\n      if (!imgNode) {\n        console.error(\"unable to load image\");\n        return;\n      }\n      if (this.zoom === this.basicZoom && operator === -1) {\n        return;\n      }\n      const pos = ZoomUtils.wheelChangePos(imgNode, coord, operator, currentPos, {\n        zoom: newZoom || this.zoom,\n        innerZoom: this.innerZoom,\n        basicZoom: this.basicZoom,\n        zoomMax: this.zoomInfo.max,\n        rotate: this.rotate\n      });\n      if (!pos) {\n        return;\n      }\n      const {currentPos: newCurrentPos, ratio, zoom, imgInfo} = pos;\n      this.setZoom(zoom);\n      this.setCurrentPos(newCurrentPos);\n      this.currentPosStorage = newCurrentPos;\n      this.setImgInfo(imgInfo);\n      this.zoomInfo.ratio = ratio;\n      this.emit(\"renderZoom\", zoom, newCurrentPos, imgInfo);\n    };\n    this.zoomChanged = (isZoomIn, growthMode = EGrowthMode.Linear) => {\n      const newZoom = ZoomUtils.zoomChanged(this.zoom, isZoomIn, growthMode);\n      this.wheelChangePos(this.getGetCenterCoordinate(), newZoom > this.zoom ? 1 : -1, newZoom);\n      this.render();\n      this.renderBasicCanvas();\n    };\n    this.zoomChangeOnCenter = (newZoom) => {\n      this.wheelChangePos(this.getGetCenterCoordinate(), 0, newZoom);\n      this.render();\n      this.renderBasicCanvas();\n    };\n    this.drawImg = () => {\n      if (!this.imgNode || this.hiddenImg === true)\n        return;\n      DrawUtils.drawImg(this.basicCanvas, this.imgNode, {\n        zoom: this.zoom,\n        currentPos: this.currentPos,\n        rotate: this.rotate,\n        imgAttribute: this._imgAttribute\n      });\n    };\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n    this.container = props.container;\n    this.config = CommonToolUtils.jsonParser(props.config);\n    this.showDefaultCursor = props.showDefaultCursor || false;\n    this.destroyCanvas();\n    this.createCanvas(props.size, props.isAppend);\n    this.imgNode = props.imgNode;\n    this.isImgError = !props.imgNode;\n    this.basicImgInfo = {\n      width: (_b = (_a = props.imgNode) == null ? void 0 : _a.width) != null ? _b : 0,\n      height: (_d = (_c = props.imgNode) == null ? void 0 : _c.height) != null ? _d : 0,\n      valid: true,\n      rotate: 0\n    };\n    this.forbidOperation = (_e = props.forbidOperation) != null ? _e : false;\n    this.forbidBasicResultRender = (_f = props.forbidBasicResultRender) != null ? _f : false;\n    this.size = props.size;\n    this.currentPos = {\n      x: 0,\n      y: 0\n    };\n    this.zoom = 1;\n    this.coord = {\n      x: -1,\n      y: -1\n    };\n    this.currentPosStorage = {\n      x: 0,\n      y: 0\n    };\n    this.isShowCursor = false;\n    this.style = {\n      strokeColor: COLORS_ARRAY[4],\n      fillColor: COLORS_ARRAY[4],\n      strokeWidth: 2,\n      opacity: 1\n    };\n    this.attributeLockList = [];\n    this.history = new ActionsHistory();\n    this.style = (_g = props.style) != null ? _g : CommonToolUtils.jsonParser(styleString);\n    this._imgAttribute = (_h = props.imgAttribute) != null ? _h : {};\n    this.isHidden = false;\n    this.dragStatus = EDragStatus.Wait;\n    this.defaultAttribute = (_i = props == null ? void 0 : props.defaultAttribute) != null ? _i : \"\";\n    this.forbidCursorLine = !!props.forbidCursorLine;\n    this.lang = ELang.Zh;\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseLeave = this.onMouseLeave.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n    this.onLeftDblClick = this.onLeftDblClick.bind(this);\n    this.onRightDblClick = this.onRightDblClick.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.clearImgDrag = this.clearImgDrag.bind(this);\n    this.dblClickListener = new DblClickEventListener(this.container, 200);\n    this.coordUtils = new CoordinateUtils(this);\n    this.coordUtils.setBasicImgInfo(this.basicImgInfo);\n    this.hiddenImg = props.hiddenImg || false;\n    if (props.zoomInfo) {\n      this.zoomInfo = props.zoomInfo;\n    }\n  }\n  onContextmenu(e) {\n    e.preventDefault();\n  }\n  get ctx() {\n    var _a;\n    return this._ctx || ((_a = this.canvas) == null ? void 0 : _a.getContext(\"2d\"));\n  }\n  get basicCtx() {\n    var _a;\n    return (_a = this.basicCanvas) == null ? void 0 : _a.getContext(\"2d\");\n  }\n  get rotate() {\n    var _a, _b;\n    return (_b = (_a = this.basicImgInfo) == null ? void 0 : _a.rotate) != null ? _b : 0;\n  }\n  get valid() {\n    var _a, _b;\n    return (_b = (_a = this.basicImgInfo) == null ? void 0 : _a.valid) != null ? _b : true;\n  }\n  get baseIcon() {\n    return BASE_ICON[this.style.color];\n  }\n  get defaultCursor() {\n    return this.showDefaultCursor ? \"default\" : \"none\";\n  }\n  get dataList() {\n    return [];\n  }\n  get innerPosAndZoom() {\n    return {\n      innerZoom: this.innerZoom,\n      currentPosStorage: this.currentPosStorage\n    };\n  }\n  get isShowDefaultCursor() {\n    return this.showDefaultCursor;\n  }\n  get isMultiMoveMode() {\n    return this.operationMode === EOperationMode.MultiMove;\n  }\n  get hasMarkerConfig() {\n    return this.config.markerConfigurable === true && this.config.markerList && this.config.markerList.length > 0;\n  }\n  setZoom(zoom) {\n    this.zoom = zoom;\n    this.innerZoom = zoom;\n    this.coordUtils.setZoomAndCurrentPos(this.zoom, this.currentPos);\n  }\n  setCurrentPos(currentPos) {\n    this.currentPos = currentPos;\n    this.coordUtils.setZoomAndCurrentPos(this.zoom, this.currentPos);\n  }\n  setReferenceData(referenceData) {\n    this.referenceData = referenceData;\n  }\n  setImgInfo(size) {\n    this.imgInfo = size;\n  }\n  setCurrentPosStorage(currentPosStorage) {\n    this.currentPosStorage = currentPosStorage;\n  }\n  setOperationMode(operationMode) {\n    this.operationMode = operationMode;\n  }\n  recoverOperationMode() {\n    if (this.operationMode === EOperationMode.MultiMove) {\n      this.setOperationMode(EOperationMode.General);\n    }\n  }\n  updatePosition(params) {\n    const {zoom, currentPos} = params;\n    this.setZoom(zoom);\n    this.setCurrentPos(currentPos);\n    this.currentPosStorage = currentPos;\n    this.renderBasicCanvas();\n    this.render();\n  }\n  setLang(lang) {\n    this.lang = lang;\n  }\n  setShowDefaultCursor(showDefaultCursor) {\n    this.showDefaultCursor = showDefaultCursor;\n    this.container.style.cursor = this.defaultCursor;\n  }\n  setCustomCursor(cursor) {\n    this.container.style.cursor = cursor;\n  }\n  get forbidMouseOperation() {\n    return this.forbidOperation || this.valid === false;\n  }\n  get pixelRatio() {\n    var _a;\n    return CanvasUtils.getPixelRatio((_a = this.canvas) == null ? void 0 : _a.getContext(\"2d\"));\n  }\n  init() {\n    this.eventUnbinding();\n    this.initPosition();\n    this.eventBinding();\n    this.render();\n    this.renderBasicCanvas();\n  }\n  destroy() {\n    this.destroyCanvas();\n    this.eventUnbinding();\n  }\n  updateCanvasBasicStyle(canvas, size, zIndex) {\n    const pixel = this.pixelRatio;\n    canvas.style.position = \"absolute\";\n    canvas.width = size.width * pixel;\n    canvas.height = size.height * pixel;\n    canvas.style.width = `${size.width}px`;\n    canvas.style.height = `${size.height}px`;\n    canvas.style.left = \"0\";\n    canvas.style.top = \"0\";\n    canvas.style.zIndex = `${zIndex} `;\n  }\n  createCanvas(size, isAppend = true) {\n    var _a, _b;\n    const pixel = this.pixelRatio;\n    const basicCanvas = document.createElement(\"canvas\");\n    this.updateCanvasBasicStyle(basicCanvas, size, 0);\n    this.basicCanvas = basicCanvas;\n    const canvas = document.createElement(\"canvas\");\n    this.updateCanvasBasicStyle(canvas, size, 10);\n    if (isAppend) {\n      if (this.container.hasChildNodes()) {\n        this.container.insertBefore(canvas, this.container.childNodes[0]);\n        this.container.insertBefore(basicCanvas, this.container.childNodes[0]);\n      } else {\n        this.container.appendChild(basicCanvas);\n        this.container.appendChild(canvas);\n      }\n    }\n    this.canvas = canvas;\n    this.container.style.cursor = this.defaultCursor;\n    (_a = this.ctx) == null ? void 0 : _a.scale(pixel, pixel);\n    (_b = this.basicCtx) == null ? void 0 : _b.scale(pixel, pixel);\n  }\n  destroyCanvas() {\n    if (this.canvas && this.container.contains(this.canvas)) {\n      this.container.removeChild(this.canvas);\n    }\n    if (this.basicCanvas && this.container.contains(this.basicCanvas)) {\n      this.container.removeChild(this.basicCanvas);\n    }\n    this.clearInvalidPage();\n    this.clearImgDrag();\n  }\n  setStyle(toolStyle) {\n    this.style = toolStyle;\n    this.render();\n  }\n  setImgNode(imgNode, basicImgInfo = {}) {\n    this.imgNode = imgNode;\n    this.setBasicImgInfo(__spreadValues({\n      width: imgNode.width,\n      height: imgNode.height,\n      valid: true,\n      rotate: 0\n    }, basicImgInfo));\n    if (this.isImgError === true) {\n      this.isImgError = false;\n      this.emit(\"changeAnnotationShow\");\n    }\n    if (typeof basicImgInfo.valid === \"boolean\") {\n      this.setValid(basicImgInfo.valid);\n    }\n    this.initImgPos();\n    this.render();\n    this.renderBasicCanvas();\n  }\n  setErrorImg() {\n    const originIsImgError = this.isImgError;\n    this.isImgError = true;\n    this.imgNode = void 0;\n    this.setBasicImgInfo({\n      width: 0,\n      height: 0,\n      valid: true,\n      rotate: 0\n    });\n    if (originIsImgError === false) {\n      this.emit(\"changeAnnotationShow\");\n    }\n  }\n  setBasicImgInfo(basicImgInfo) {\n    this.basicImgInfo = basicImgInfo;\n    this.coordUtils.setBasicImgInfo(basicImgInfo);\n  }\n  setForbidOperation(forbidOperation) {\n    this.forbidOperation = forbidOperation;\n    this.setShowDefaultCursor(forbidOperation);\n    this.render();\n  }\n  setForbidCursorLine(forbidCursorLine) {\n    this.forbidCursorLine = forbidCursorLine;\n    this.render();\n  }\n  setIsHidden(isHidden) {\n    this.isHidden = isHidden;\n    this.emit(\"hiddenChange\");\n  }\n  setDefaultAttribute(attribute) {\n    this.defaultAttribute = attribute;\n  }\n  getCoordinateInOrigin(e) {\n    const bounding = this.canvas.getBoundingClientRect();\n    return {\n      x: (e.clientX - bounding.left - this.currentPos.x) / this.zoom,\n      y: (e.clientY - bounding.top - this.currentPos.y) / this.zoom\n    };\n  }\n  getTextIconSvg(attribute = \"\") {\n    var _a;\n    return AttributeUtils.getTextIconSvg(attribute, (_a = this.config) == null ? void 0 : _a.attributeList, this.config.attributeConfigurable, this.baseIcon);\n  }\n  setIsShowOrder(isShowOrder) {\n    this.config.isShowOrder = isShowOrder;\n    this.render();\n  }\n  getCoordinate(e) {\n    const bounding = this.canvas.getBoundingClientRect();\n    return {\n      x: e.clientX - bounding.left,\n      y: e.clientY - bounding.top\n    };\n  }\n  getCoordinateUnderZoom(e) {\n    const bounding = this.canvas.getBoundingClientRect();\n    return {\n      x: e.clientX - bounding.left - this.currentPos.x,\n      y: e.clientY - bounding.top - this.currentPos.y\n    };\n  }\n  getCoordinateUnderZoomByRotate(e) {\n    const {x, y} = this.getCoordinateUnderZoom(e);\n    if (this.basicImgInfo.rotate === 90) {\n      return {\n        x: y,\n        y: this.basicImgInfo.height * this.zoom - x\n      };\n    }\n    if (this.basicImgInfo.rotate === 180) {\n      return {\n        x: this.basicImgInfo.width * this.zoom - x,\n        y: this.basicImgInfo.height * this.zoom - y\n      };\n    }\n    if (this.basicImgInfo.rotate === 270) {\n      return {\n        x: this.basicImgInfo.width * this.zoom - y,\n        y: x\n      };\n    }\n    return {\n      x,\n      y\n    };\n  }\n  getGetCenterCoordinate() {\n    return {\n      x: this.size.width / 2,\n      y: this.size.height / 2\n    };\n  }\n  initPosition() {\n    if (this.basicResult && this.imgInfo) {\n      const {basicResult, size, imgNode, _imgAttribute, imgInfo, dependToolName} = this;\n      if (basicResult && imgNode && dependToolName) {\n        let newBoundry = basicResult;\n        switch (dependToolName) {\n          case EToolName.Polygon:\n          case EToolName.Line: {\n            if (basicResult.pointList) {\n              const basicZone = MathUtils.calcViewportBoundaries(basicResult.pointList);\n              newBoundry = {\n                x: basicZone.left,\n                y: basicZone.top,\n                width: basicZone.right - basicZone.left,\n                height: basicZone.bottom - basicZone.top\n              };\n            }\n            break;\n          }\n        }\n        const pos = ImgPosUtils.getBasicRecPos(imgNode, newBoundry, size, void 0, _imgAttribute == null ? void 0 : _imgAttribute.zoomRatio, _imgAttribute == null ? void 0 : _imgAttribute.isOriginalSize);\n        if (pos) {\n          this.setCurrentPos(pos.currentPos);\n          this.currentPosStorage = this.currentPos;\n          this.setImgInfo(__spreadProps(__spreadValues({}, imgInfo), {\n            width: imgInfo.width / this.innerZoom * pos.innerZoom,\n            height: imgInfo.height / this.innerZoom * pos.innerZoom\n          }));\n          this.setZoom(pos.innerZoom);\n          this.render();\n          this.renderBasicCanvas();\n        }\n      }\n    } else {\n      this.initImgPos();\n    }\n  }\n  undo() {\n    this.history.undo();\n  }\n  redo() {\n    this.history.redo();\n  }\n  clearCanvas() {\n    var _a;\n    (_a = this.ctx) == null ? void 0 : _a.clearRect(0, 0, this.size.width, this.size.height);\n  }\n  clearBasicCanvas() {\n    var _a;\n    (_a = this.basicCtx) == null ? void 0 : _a.clearRect(0, 0, this.size.width, this.size.height);\n  }\n  eventBinding() {\n    this.dblClickListener.addEvent(() => {\n    }, this.onLeftDblClick, this.onRightDblClick);\n    this.container.addEventListener(\"mousedown\", this.onMouseDown);\n    this.container.addEventListener(\"mousemove\", this.onMouseMove);\n    this.container.addEventListener(\"mouseup\", this.onMouseUp);\n    this.container.addEventListener(\"mouseleave\", this.onMouseLeave);\n    this.container.addEventListener(\"click\", this.onClick);\n    this.container.addEventListener(\"wheel\", this.onWheel);\n    document.addEventListener(\"keydown\", this.onKeyDown);\n    document.addEventListener(\"keyup\", this.onKeyUp);\n    window.parent.document.addEventListener(\"contextmenu\", this.onContextmenu, false);\n  }\n  eventUnbinding() {\n    this.container.removeEventListener(\"mousedown\", this.onMouseDown);\n    this.container.removeEventListener(\"mousemove\", this.onMouseMove);\n    this.container.removeEventListener(\"mouseup\", this.onMouseUp);\n    this.container.removeEventListener(\"mouseleave\", this.onMouseLeave);\n    this.container.removeEventListener(\"wheel\", this.onWheel);\n    this.container.removeEventListener(\"click\", this.onClick);\n    document.removeEventListener(\"keydown\", this.onKeyDown);\n    document.removeEventListener(\"keyup\", this.onKeyUp);\n    window.parent.document.removeEventListener(\"contextmenu\", this.onContextmenu, false);\n    this.dblClickListener.removeEvent();\n  }\n  clearImgDrag() {\n    this.isDrag = false;\n    this.isDragStart = false;\n    this.isSpaceClick = false;\n    this.startTime = 0;\n    this.container.style.cursor = this.defaultCursor;\n    this.forbidCursorLine = false;\n  }\n  clearCursorLine() {\n    this.coord = {\n      x: -1,\n      y: -1\n    };\n  }\n  onMouseDown(e) {\n    if (!this.canvas || this.isImgError) {\n      return true;\n    }\n    const coord = this.getCoordinate(e);\n    if (this.isSpaceKey && e.button === 0 || e.button === 2) {\n      e.stopPropagation();\n      this._firstClickCoordinate = coord;\n      this.currentPosStorage = this.currentPos;\n      this.isSpaceClick = true;\n      this.isDragStart = true;\n      this.startTime = new Date().getTime();\n    }\n  }\n  onMouseMove(e) {\n    if (!this.canvas || this.isImgError) {\n      return true;\n    }\n    const coord = this.getCoordinate(e);\n    if (this.isShowCursor) {\n      this.coord = coord;\n    }\n    try {\n      if (!coord || !isNumber(coord == null ? void 0 : coord.x) || !isNumber(coord == null ? void 0 : coord.y)) {\n        throw new Error(\"coord error\");\n      }\n      this.coord = coord;\n      if ((this.isSpaceClick || this.isDragStart) && this._firstClickCoordinate) {\n        const currentPos = this.getCurrentPos(coord);\n        this.setCurrentPos(currentPos);\n        this.isDrag = true;\n        this.container.style.cursor = \"grabbing\";\n        this.forbidCursorLine = true;\n        this.renderBasicCanvas();\n        this.emit(\"dependRender\");\n        this.emit(\"dragMove\", {currentPos, zoom: this.zoom, imgInfo: this.imgInfo});\n      }\n      this.render();\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  onMouseUp(e) {\n    if (!this.canvas || this.isImgError) {\n      return true;\n    }\n    this.container.style.cursor = this.defaultCursor;\n    this.forbidCursorLine = false;\n    this.isDrag = false;\n    this.isDragStart = false;\n    this.isSpaceClick = false;\n    if (this.startTime !== 0 && this._firstClickCoordinate) {\n      const time = new Date().getTime();\n      const currentCoord = this.getCoordinate(e);\n      if (time - this.startTime > 1e3 || this.isSpaceKey === true || LineToolUtils.calcTwoPointDistance(currentCoord, this._firstClickCoordinate) > 10) {\n        e.stopPropagation();\n        this.startTime = 0;\n        this.render();\n        return true;\n      }\n    }\n    this.startTime = 0;\n    this.render();\n  }\n  onMouseLeave() {\n    this.clearImgDrag();\n  }\n  onClick(e) {\n  }\n  onLeftDblClick(e) {\n  }\n  onRightDblClick(e) {\n    this.clearImgDrag();\n  }\n  onKeyDown(e) {\n    if (e.keyCode === EKeyCode.Alt) {\n      e.preventDefault();\n    }\n    switch (e.keyCode) {\n      case EKeyCode.Space:\n        this.isSpaceKey = true;\n        break;\n      case EKeyCode.Z:\n        if (e.ctrlKey) {\n          if (e.shiftKey) {\n            this.redo();\n          } else {\n            this.undo();\n          }\n          return false;\n        }\n        break;\n    }\n    return true;\n  }\n  onKeyUp(e) {\n    switch (e.keyCode) {\n      case EKeyCode.Space:\n        this.isSpaceKey = false;\n        break;\n    }\n  }\n  exportCustomData() {\n    return {};\n  }\n  onWheel(e, isRender = true) {\n    if (!this.imgNode || !this.coord) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    const coord = this.getCoordinate(e);\n    const delta = e.deltaY || e.wheelDelta;\n    let operator = 0;\n    if (delta > 0 && this.zoom > this.zoomInfo.min) {\n      operator = -1;\n    }\n    if (delta < 0 && this.zoom < this.zoomInfo.max) {\n      operator = 1;\n    }\n    this.wheelChangePos(coord, operator);\n    this.emit(\"dependRender\");\n    if (isRender) {\n      this.render();\n    }\n    this.renderBasicCanvas();\n  }\n  renderCursorLine(lineColor = ((_a) => (_a = this.style.lineColor[0]) != null ? _a : \"\")()) {\n    if (!this.ctx || this.forbidCursorLine || this.forbidOperation) {\n      return;\n    }\n    const {x, y} = this.coord;\n    DrawUtils.drawLine(this.canvas, {x: 0, y}, {x: 1e4, y}, {color: lineColor});\n    DrawUtils.drawLine(this.canvas, {x, y: 0}, {x, y: 1e4}, {color: lineColor});\n    DrawUtils.drawCircleWithFill(this.canvas, {x, y}, 1, {color: \"white\"});\n  }\n  setSize(size) {\n    var _a;\n    this.size = size;\n    if (this.container.contains(this.canvas)) {\n      this.destroyCanvas();\n      this.createCanvas(size);\n      this.eventUnbinding();\n      this.init();\n      if (((_a = this.basicImgInfo) == null ? void 0 : _a.valid) === false) {\n        this.renderInvalidPage();\n      }\n    }\n  }\n  setImgAttribute(imgAttribute) {\n    const oldImgAttribute = this._imgAttribute;\n    this._imgAttribute = imgAttribute;\n    if ((oldImgAttribute == null ? void 0 : oldImgAttribute.zoomRatio) !== imgAttribute.zoomRatio || oldImgAttribute.isOriginalSize !== imgAttribute.isOriginalSize) {\n      this.initImgPos();\n      return;\n    }\n    this.renderBasicCanvas();\n    this.render();\n  }\n  clearResult(sendMessage) {\n  }\n  setValid(valid) {\n    this.basicImgInfo.valid = valid;\n    if (valid === false) {\n      this.renderInvalidPage();\n      this.clearResult(false);\n    } else {\n      this.clearInvalidPage();\n    }\n  }\n  setRotate(rotate) {\n    this.basicImgInfo.rotate = rotate;\n  }\n  setBasicResult(basicResult) {\n    this.basicResult = basicResult;\n    this.coordUtils.setBasicResult(basicResult);\n    this.initPosition();\n    this.emit(\"dependRender\");\n  }\n  setDependName(dependToolName, dependToolConfig) {\n    this.dependToolName = dependToolName;\n    this.coordUtils.setDependInfo(dependToolName, dependToolConfig);\n  }\n  setAttributeLockList(attributeLockList) {\n    this.attributeLockList = attributeLockList;\n    this.render();\n  }\n  setConfig(config) {\n    this.config = CommonToolUtils.jsonParser(config);\n  }\n  setDataInjectionAtCreation(dataInjectionAtCreation) {\n    this.dataInjectionAtCreation = dataInjectionAtCreation;\n  }\n  setRenderEnhance(renderEnhance) {\n    this.renderEnhance = renderEnhance;\n  }\n  setCustomRenderStyle(customRenderStyle) {\n    this.customRenderStyle = customRenderStyle;\n  }\n  updateRotate() {\n    if (this.dependToolName) {\n      this.emit(\"messageInfo\", Locale.getMessagesByLocale(EMessage.NoRotateInDependence, this.lang));\n      return false;\n    }\n    if (this.dataList.length > 0) {\n      this.emit(\"messageInfo\", Locale.getMessagesByLocale(EMessage.NoRotateNotice, this.lang));\n      return false;\n    }\n    const rotate = MathUtils.getRotate(this.basicImgInfo.rotate);\n    this.basicImgInfo.rotate = rotate;\n    this.initImgPos();\n    this.emit(\"updateResult\");\n  }\n  getColor(attribute = \"\", config = this.config) {\n    return toolStyleConverter.getColorByConfig({attribute, config, style: this.style});\n  }\n  getLineColor(attribute = \"\") {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    if (((_a = this.config) == null ? void 0 : _a.attributeConfigurable) === true) {\n      const attributeIndex = AttributeUtils.getAttributeIndex(attribute, (_c = (_b = this.config) == null ? void 0 : _b.attributeList) != null ? _c : []) + 1;\n      const color2 = (_f = (_e = (_d = this.config) == null ? void 0 : _d.attributeList) == null ? void 0 : _e.find((i) => i.value === attribute)) == null ? void 0 : _f.color;\n      if (color2) {\n        return (_h = (_g = toolStyleConverter.getColorByConfig({attribute, config: this.config})) == null ? void 0 : _g.valid) == null ? void 0 : _h.stroke;\n      }\n      return this.style.attributeLineColor ? this.style.attributeLineColor[attributeIndex] : \"\";\n    }\n    const {color, lineColor} = this.style;\n    if (color && lineColor) {\n      return lineColor[color];\n    }\n    return \"\";\n  }\n  clearInvalidPage() {\n    if (this._invalidDOM && this.container && this.container.contains(this._invalidDOM)) {\n      this.container.removeChild(this._invalidDOM);\n      this._invalidDOM = void 0;\n    }\n  }\n  renderInvalidPage() {\n    if (!this.container || this._invalidDOM) {\n      return;\n    }\n    this._invalidDOM = RenderDomUtils.renderInvalidPage(this.container, this.size, this.lang);\n  }\n  renderBasicCanvas() {\n    if (!this.basicCanvas) {\n      return;\n    }\n    this.clearBasicCanvas();\n    this.drawImg();\n    const thickness = 3;\n    if (this.forbidBasicResultRender) {\n      return;\n    }\n    if (this.basicResult && this.dependToolName) {\n      switch (this.dependToolName) {\n        case EToolName.Rect: {\n          DrawUtils.drawRect(this.basicCanvas, AxisUtils.changeRectByZoom(this.basicResult, this.zoom, this.currentPos), {\n            color: \"rgba(204,204,204,1.00)\",\n            thickness\n          });\n          break;\n        }\n        case EToolName.Polygon: {\n          DrawUtils.drawPolygonWithFillAndLine(this.basicCanvas, AxisUtils.changePointListByZoom(this.basicResult.pointList, this.zoom, this.currentPos), {\n            fillColor: \"transparent\",\n            strokeColor: \"rgba(204,204,204,1.00)\",\n            isClose: true,\n            thickness\n          });\n          break;\n        }\n        case EToolName.Line: {\n          DrawUtils.drawLineWithPointList(this.basicCanvas, AxisUtils.changePointListByZoom(this.basicResult.pointList, this.zoom, this.currentPos), {\n            color: \"rgba(204,204,204,1.00)\",\n            thickness\n          });\n          break;\n        }\n      }\n    }\n  }\n  render() {\n    if (!this.canvas || !this.ctx || !this.imgNode) {\n      return;\n    }\n    this.clearCanvas();\n  }\n  changeStyle(newAttribute = this.defaultAttribute) {\n    this.emit(\"changeStyle\", {attribute: newAttribute});\n  }\n}\n\nexport { BasicToolOperation };\n","import { isEqual } from 'lodash';\nimport EKeyCode from '../../constant/keyCode.js';\nimport { TEXT_ATTRIBUTE_LINE_HEIGHT, TEXT_ATTRIBUTE_MAX_LENGTH } from '../../constant/tool.js';\n\nconst defaultWidth = 30;\nconst DEFAULT_TEXT_WIDTH = 164;\nclass TextAttributeClass {\n  constructor(props) {\n    this.textKeyDown = (e) => {\n      e.stopPropagation();\n      switch (e.keyCode) {\n        case EKeyCode.Enter:\n          this.submitTextarea();\n          this.appendToContainer();\n          break;\n      }\n    };\n    const {container, icon, color, getCurrentSelectedData, updateSelectedTextAttribute} = props;\n    const width = props.width || DEFAULT_TEXT_WIDTH;\n    this.container = container;\n    this.getCurrentSelectedData = getCurrentSelectedData;\n    this.updateSelectedTextAttribute = updateSelectedTextAttribute;\n    this._textAttributeDOM = this.initTextAttributeDOM();\n    this._iconDOM = this.initIconDOM(icon);\n    this._textDOM = this.initTextDOM(width, TEXT_ATTRIBUTE_LINE_HEIGHT);\n    this._textareaDOM = this.initTextareaDOM(width, color);\n    this.appendToContainer();\n  }\n  get isExit() {\n    if (!this._textAttributeDOM) {\n      return false;\n    }\n    return this.container.contains(this._textAttributeDOM);\n  }\n  get isExitTextareaDOM() {\n    if (!this._textareaDOM) {\n      return false;\n    }\n    return this.container.contains(this._textareaDOM);\n  }\n  updateIcon(icon) {\n    if (this._iconDOM) {\n      this._iconDOM.innerHTML = icon;\n    }\n  }\n  appendToContainer() {\n    if (!this._textAttributeDOM || !this._textDOM || !this._iconDOM) {\n      return;\n    }\n    this.container.appendChild(this._textAttributeDOM);\n    this._textAttributeDOM.appendChild(this._textDOM);\n    this._textAttributeDOM.appendChild(this._iconDOM);\n  }\n  initTextAttributeDOM() {\n    const _textAttributeDOM = document.createElement(\"div\");\n    _textAttributeDOM.setAttribute(\"id\", \"textArea\");\n    return _textAttributeDOM;\n  }\n  initTextDOM(width, lineHeight) {\n    const _textDOM = document.createElement(\"span\");\n    _textDOM.setAttribute(\"style\", `\n        width: ${Math.max(width, defaultWidth)}px;\n        line-height: ${lineHeight}px;\n        word-break: break-all;\n        white-space: pre-line;\n        font-style: italic;\n      `);\n    return _textDOM;\n  }\n  initIconDOM(icon) {\n    const _iconDOM = document.createElement(\"div\");\n    _iconDOM.setAttribute(\"id\", \"annotation_text\");\n    _iconDOM.innerHTML = icon;\n    _iconDOM.addEventListener(\"mouseup\", (e) => {\n      e.stopPropagation();\n      this.renderTextarea();\n    });\n    _iconDOM.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n    });\n    _iconDOM.addEventListener(\"contextmenu\", (e) => {\n      e.stopPropagation();\n    });\n    _iconDOM.setAttribute(\"style\", `\n        position: absolute;\n        left: -20px;\n        top: 4px;\n        cursor: pointer;\n        z-index: 10\n      `);\n    return _iconDOM;\n  }\n  initTextareaDOM(width, color) {\n    const _textareaDOM = document.createElement(\"textarea\");\n    _textareaDOM.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n    });\n    _textareaDOM.addEventListener(\"mouseup\", (e) => {\n      e.stopPropagation();\n    });\n    _textareaDOM.setAttribute(\"style\", `\n      background-color: transparent;\n      border-radius: 5px;\n      border-color: ${color};\n      outline: none;\n      resize: none;\n      width: ${Math.max(width, 30)}px;\n      `);\n    _textareaDOM.setAttribute(\"maxLength\", `${TEXT_ATTRIBUTE_MAX_LENGTH}`);\n    return _textareaDOM;\n  }\n  removeTextDOM() {\n    if (!this._textAttributeDOM) {\n      return;\n    }\n    if (this._textDOM) {\n      this._textAttributeDOM.removeChild(this._textDOM);\n    }\n  }\n  removeIconDOM() {\n    if (!this._textAttributeDOM) {\n      return;\n    }\n    if (this._iconDOM) {\n      this._textAttributeDOM.removeChild(this._iconDOM);\n    }\n  }\n  removeTextareaDOM() {\n    var _a, _b;\n    if (this._textareaDOM && this._textAttributeDOM && ((_a = this._textAttributeDOM) == null ? void 0 : _a.contains(this._textareaDOM))) {\n      (_b = this._textAttributeDOM) == null ? void 0 : _b.removeChild(this._textareaDOM);\n    }\n  }\n  submitTextarea() {\n    var _a;\n    if (this._textareaDOM) {\n      this.updateSelectedTextAttribute((_a = this._textareaDOM) == null ? void 0 : _a.value);\n      this.removeTextareaDOM();\n      this.clearTextAttribute();\n    }\n  }\n  clearTextAttribute() {\n    if (this._textAttributeDOM && this.container.contains(this._textAttributeDOM)) {\n      this.container.removeChild(this._textAttributeDOM);\n    }\n  }\n  renderTextarea() {\n    if (!this._textAttributeDOM || !this._textareaDOM) {\n      return;\n    }\n    const data = this.getCurrentSelectedData();\n    if (!data) {\n      return;\n    }\n    const {width = DEFAULT_TEXT_WIDTH, textAttribute, color} = data;\n    this._textareaDOM.value = `${textAttribute}`;\n    this._textareaDOM.setAttribute(\"style\", `\n      background-color: rgba(0,0,0,0.4);\n      border-radius: 5px;\n      border-color: ${color};\n      outline: none;\n      resize: none;\n      font-style: italic;\n      font-weight: 900;\n      text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.6);\n      width: ${Math.max(width, defaultWidth)}px;\n      `);\n    this._textareaDOM.setAttribute(\"maxLength\", `${TEXT_ATTRIBUTE_MAX_LENGTH}`);\n    this._textAttributeDOM.appendChild(this._textareaDOM);\n    this.removeIconDOM();\n    this.removeTextDOM();\n    this._textareaDOM.focus();\n    this._textareaDOM.addEventListener(\"keydown\", this.textKeyDown);\n  }\n  update(textAttribute, position) {\n    var _a;\n    const {left, top, color, width = DEFAULT_TEXT_WIDTH} = position;\n    const newWidth = Math.max(width, defaultWidth);\n    (_a = this._textAttributeDOM) == null ? void 0 : _a.setAttribute(\"style\", `\n        position: absolute; \n        width: ${newWidth}px;\n        font-size: 14px; \n        left:${left}px; \n        top: ${top}px; \n        color: ${color};\n      `);\n    if (this._textDOM) {\n      this._textDOM.innerHTML = `${textAttribute}`;\n    }\n    if (this._textareaDOM) {\n      this._textareaDOM.style.width = `${newWidth}px`;\n      this._textareaDOM.style.borderColor = `${color}`;\n    }\n  }\n  selectedIDsChanged(oldIDs, newIDs) {\n    const isSingleIDSelected = oldIDs.length === 1 && newIDs.length === 1;\n    if (isSingleIDSelected) {\n      const isIDEqual = isEqual(oldIDs, newIDs);\n      if (isIDEqual) {\n        return;\n      }\n      this == null ? void 0 : this.changeSelected();\n    }\n    if ((newIDs == null ? void 0 : newIDs.length) !== 1) {\n      this.removeTextareaDOM();\n      this == null ? void 0 : this.clearTextAttribute();\n    }\n  }\n  changeSelected() {\n    if (this.isExitTextareaDOM) {\n      this.submitTextarea();\n    }\n  }\n}\n\nexport { TextAttributeClass as default };\n","import _ from 'lodash';\nimport CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\n\nclass Selection {\n  constructor(toolInstance) {\n    if (!toolInstance) {\n      console.error(\"MultipleSelect is require a tool instance\");\n    }\n    this._selectedIDs = [];\n    this.toolInstance = toolInstance;\n  }\n  get selectedIDs() {\n    return this._selectedIDs;\n  }\n  get selectedID() {\n    return this._selectedIDs.length === 1 ? this._selectedIDs[0] : void 0;\n  }\n  get visibleDataList() {\n    const {dataList, attributeLockList, basicResult} = this.toolInstance;\n    const [showingDataList] = CommonToolUtils.getRenderResultList(dataList, CommonToolUtils.getSourceID(basicResult), attributeLockList);\n    return showingDataList;\n  }\n  get dataList() {\n    return this.toolInstance.dataList;\n  }\n  set selectedIDs(selectedIDs) {\n    var _a;\n    (_a = this.toolInstance._textAttributeInstance) == null ? void 0 : _a.selectedIDsChanged(this.selectedIDs, selectedIDs);\n    this._selectedIDs = selectedIDs;\n    this.toolInstance.render();\n  }\n  updateSelectedIDs(selectedID) {\n    if (!selectedID) {\n      this._selectedIDs = [];\n      return;\n    }\n    if (this.selectedIDs.includes(selectedID)) {\n      this.selectedIDs = this.selectedIDs.filter((id) => id !== selectedID);\n    } else {\n      this.selectedIDs = [...this.selectedIDs, selectedID];\n    }\n  }\n  setSelectedIDs(id, isAppend = false) {\n    if (isAppend) {\n      this.updateSelectedIDs(id);\n      return;\n    }\n    this.selectedIDs = id ? [id] : [];\n  }\n  hardSetSelectedIDs(ids) {\n    this.selectedIDs = ids;\n  }\n  selectAll() {\n    this.selectedIDs = this.visibleDataList.map((i) => i.id);\n    this.toolInstance.render();\n  }\n  toStashDataList() {\n    if (this.selectedIDs.length > 0) {\n      this.stashDataList = _.cloneDeep(this.dataList.filter((i) => this.selectedIDs.includes(i.id)));\n    }\n  }\n  toUnStashDataList() {\n    if (this.stashDataList) {\n      const _stashDataList = this.stashDataList;\n      this.stashDataList = void 0;\n      return _stashDataList;\n    }\n    return void 0;\n  }\n  mergeStashData(setDataList) {\n    const stashList = this.toUnStashDataList();\n    if (!stashList) {\n      return;\n    }\n    const mergedDataList = _(this.dataList).keyBy(\"id\").merge(_.keyBy(stashList, \"id\")).values().value();\n    setDataList(mergedDataList);\n    this.toolInstance.render();\n  }\n  isIdSelected(id) {\n    return this.selectedIDs.includes(id);\n  }\n  triggerKeyboardEvent(e, setDataList) {\n    if (e.ctrlKey) {\n      if (e.key === \"v\") {\n        this.mergeStashData(setDataList);\n        return true;\n      }\n      if (e.key === \"a\") {\n        this.selectAll();\n        return true;\n      }\n      if (e.key === \"c\") {\n        this.toStashDataList();\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexport { Selection as default };\n","import _ from 'lodash';\nimport { distance } from '@turf/turf';\nimport MathUtils from '../../utils/MathUtils.js';\nimport AxisUtils from '../../utils/tool/AxisUtils.js';\nimport RectUtils from '../../utils/tool/RectUtils.js';\nimport { EDragStatus, ESortDirection, DEFAULT_TEXT_SHADOW } from '../../constant/annotation.js';\nimport { EDragTarget, EOperationMode } from '../../constant/tool.js';\nimport EKeyCode from '../../constant/keyCode.js';\nimport Locale from '../../locales/index.js';\nimport { EMessage } from '../../locales/constants.js';\nimport AttributeUtils from '../../utils/tool/AttributeUtils.js';\nimport CanvasUtils from '../../utils/tool/CanvasUtils.js';\nimport CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\nimport DrawUtils from '../../utils/tool/DrawUtils.js';\nimport MarkerUtils from '../../utils/tool/MarkerUtils.js';\nimport { getPolygonPointUnderZoom } from '../../utils/tool/polygonTool.js';\nimport uuid from '../../utils/uuid.js';\nimport { BasicToolOperation } from './basicToolOperation.js';\nimport TextAttributeClass from './textAttributeClass.js';\nimport Selection from './Selection.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst scope = 6;\nclass RectOperation extends BasicToolOperation {\n  constructor(props) {\n    super(props);\n    this.setMarkerIndex = (markerIndex) => {\n      this.markerIndex = markerIndex;\n    };\n    this.setMarkerIndexAndSelect = (markerIndex) => {\n      if (!this.config.markerList) {\n        return;\n      }\n      this.markerIndex = markerIndex;\n      const markerValue = this.config.markerList[markerIndex].value;\n      const currentRect = this.currentPageResult.find((rect) => rect.label === markerValue);\n      if (currentRect) {\n        this.setSelectedRectID(currentRect.id);\n        if (this.config.attributeConfigurable === true) {\n          this.setDefaultAttribute(currentRect.attribute);\n        }\n      }\n      this.emit(\"markIndexChange\");\n    };\n    this.getHoverRectID = (e) => {\n      const coordinate = this.getCoordinateUnderZoom(e);\n      const newScope = scope;\n      const {currentShowList} = this;\n      if (currentShowList.length > 0) {\n        if (this.selectedRectID) {\n          const {selectedRect} = this;\n          if (selectedRect) {\n            if (RectUtils.isInRect(coordinate, selectedRect, newScope, this.zoom)) {\n              return selectedRect.id;\n            }\n          }\n        }\n        const hoverList = currentShowList.filter((rect) => RectUtils.isInRect(coordinate, rect, newScope, this.zoom));\n        if (hoverList.length === 0) {\n          return \"\";\n        }\n        if (hoverList.length === 1) {\n          return hoverList[0].id;\n        }\n        if (hoverList.length > 1) {\n          const rectSizeList = hoverList.map((rect) => ({size: rect.width * rect.height, id: rect.id})).sort((a, b) => a.size - b.size);\n          return rectSizeList[0].id;\n        }\n      }\n      return \"\";\n    };\n    this.textChange = (v) => {\n      if (this.config.textConfigurable !== true || !this.selectedRectID) {\n        return;\n      }\n      this.setRectList(AttributeUtils.textChange(v, this.selectedRectID, this.rectList), true);\n      this.emit(\"selectedChange\");\n      this.render();\n    };\n    this.drawOutSideTarget = props.drawOutSideTarget || false;\n    this.rectList = [];\n    this.isFlow = true;\n    this.config = CommonToolUtils.jsonParser(props.config);\n    this.hoverRectEdgeIndex = -1;\n    this.hoverRectPointIndex = -1;\n    this.markerIndex = 0;\n    this.setStyle(props.style);\n    this.createNewDrawingRect = this.createNewDrawingRect.bind(this);\n    this.getDrawingRectWithRectList = this.getDrawingRectWithRectList.bind(this);\n    this.setSelectedIdAfterAddingDrawingRect = this.setSelectedIdAfterAddingDrawingRect.bind(this);\n    this.getCurrentSelectedData = this.getCurrentSelectedData.bind(this);\n    this.updateSelectedRectTextAttribute = this.updateSelectedRectTextAttribute.bind(this);\n    this.setSelectedID = this.setSelectedID.bind(this);\n    this.selection = new Selection(this);\n  }\n  setResult(rectList) {\n    this.clearActiveStatus();\n    this.setRectList(rectList);\n    if (this.hasMarkerConfig) {\n      const nextMarkerInfo = CommonToolUtils.getNextMarker(this.getCurrentPageResult(rectList), this.config.markerList);\n      if (nextMarkerInfo) {\n        this.setMarkerIndex(nextMarkerInfo.index);\n      }\n    }\n    this.render();\n  }\n  destroy() {\n    super.destroy();\n    if (this._textAttributeInstance) {\n      this._textAttributeInstance.clearTextAttribute();\n    }\n  }\n  setConfig(config, isClear = false) {\n    this.config = CommonToolUtils.jsonParser(config);\n    if (isClear === true) {\n      this.clearResult(false);\n    }\n  }\n  setRectList(rectList, isUpload = false) {\n    const oldLen = this.rectList.length;\n    this.rectList = rectList;\n    if (oldLen !== rectList.length) {\n      this.emit(\"updatePageNumber\");\n    }\n    if (isUpload) {\n      this.emit(\"updateResult\");\n    }\n  }\n  get selectedRectID() {\n    return this.selectedIDs.length === 1 ? this.selectedIDs[0] : void 0;\n  }\n  get selectedID() {\n    return this.selectedRectID;\n  }\n  get selectedRect() {\n    return this.selectedRects.length === 1 ? this.selectedRects[0] : void 0;\n  }\n  get selectedIDs() {\n    return this.selection.selectedIDs;\n  }\n  get selectedRects() {\n    return this.rectList.filter((i) => this.selectedIDs.includes(i.id));\n  }\n  get selectedText() {\n    var _a;\n    return (_a = this.selectedRect) == null ? void 0 : _a.textAttribute;\n  }\n  get dataList() {\n    return this.rectList;\n  }\n  get currentShowList() {\n    let rect = [];\n    const [showingRect, selectedRect] = CommonToolUtils.getRenderResultList(this.rectList, CommonToolUtils.getSourceID(this.basicResult), this.attributeLockList, this.selectedIDs);\n    rect = showingRect;\n    if (this.isHidden) {\n      rect = [];\n    }\n    if (selectedRect) {\n      rect.push(...selectedRect);\n    }\n    return rect;\n  }\n  get currentPageResult() {\n    const [showingRect] = CommonToolUtils.getRenderResultList(this.rectList, CommonToolUtils.getSourceID(this.basicResult), []);\n    return showingRect;\n  }\n  getCurrentPageResult(rectList) {\n    const [showingRect] = CommonToolUtils.getRenderResultList(rectList, CommonToolUtils.getSourceID(this.basicResult), []);\n    return showingRect;\n  }\n  setSelectedID(newID) {\n    this.setSelectedRectID(newID);\n  }\n  setSelectedRectID(newID, isAppend = false) {\n    this.selection.setSelectedIDs(newID, isAppend);\n    this.render();\n    this.emit(\"selectedChange\");\n  }\n  setStyle(toolStyle) {\n    var _a;\n    super.setStyle(toolStyle);\n    if (this._textAttributeInstance && this.config.attributeConfigurable === false) {\n      (_a = this._textAttributeInstance) == null ? void 0 : _a.updateIcon(this.getTextIconSvg());\n    }\n  }\n  updateSelectedRectTextAttribute(newTextAttribute) {\n    if (this._textAttributeInstance && newTextAttribute && this.selectedRectID) {\n      let textAttribute = newTextAttribute;\n      if (AttributeUtils.textAttributeValidate(this.config.textCheckType, \"\", textAttribute) === false) {\n        this.emit(\"messageError\", AttributeUtils.getErrorNotice(this.config.textCheckType, this.lang));\n        textAttribute = \"\";\n      }\n      this.setRectList(this.rectList.map((v) => {\n        if (v.id === this.selectedRectID) {\n          return __spreadProps(__spreadValues({}, v), {\n            textAttribute\n          });\n        }\n        return v;\n      }), true);\n      this.emit(\"updateTextAttribute\");\n      this.render();\n    }\n  }\n  getHoverRectPointIndex(e) {\n    if (!this.selectedRect) {\n      return -1;\n    }\n    return AxisUtils.returnClosePointIndex(this.getCoordinateUnderZoom(e), RectUtils.getRectPointList(this.selectedRect, this.zoom), scope + 2);\n  }\n  getHoverRectEdgeIndex(e) {\n    if (!this.selectedRect) {\n      return -1;\n    }\n    let edgeIndex = -1;\n    const {selectedRect} = this;\n    const edgeList = RectUtils.getRectEdgeList(selectedRect, this.zoom);\n    const coordinate = this.getCoordinateUnderZoom(e);\n    for (let i = 0; i < edgeList.length; i++) {\n      const edge = edgeList[i];\n      const {length} = MathUtils.getFootOfPerpendicular(coordinate, edge.begin, edge.end);\n      if (length < scope + 10) {\n        edgeIndex = i;\n      }\n    }\n    return edgeIndex;\n  }\n  getTextIconSvg(attribute = \"\") {\n    return AttributeUtils.getTextIconSvg(attribute, this.config.attributeList, this.config.attributeConfigurable, this.baseIcon);\n  }\n  onMouseDown(e) {\n    if (super.onMouseDown(e) || this.forbidMouseOperation || e.ctrlKey === true) {\n      return;\n    }\n    const dragStartCoord = this.getCoordinateUnderZoom(e);\n    const hoverRectID = this.getHoverRectID(e);\n    if (e.button === 2 || e.button === 0 && this.isSpaceKey === true) {\n      return;\n    }\n    if (this.selectedRectID) {\n      const firstRect = this.currentShowList.find((v) => v.id === this.selectedRectID);\n      if (!firstRect) {\n        return;\n      }\n      if (this.getHoverRectPointIndex(e) > -1) {\n        const dragTarget = EDragTarget.Point;\n        this.dragInfo = {\n          dragStartCoord,\n          dragTarget,\n          startTime: +new Date(),\n          firstRect\n        };\n        this.dragStatus = EDragStatus.Start;\n        return;\n      }\n      if (this.getHoverRectEdgeIndex(e) > -1) {\n        const dragTarget = EDragTarget.Line;\n        this.dragInfo = {\n          dragStartCoord,\n          dragTarget,\n          startTime: +new Date(),\n          firstRect\n        };\n        this.dragStatus = EDragStatus.Start;\n        return;\n      }\n    }\n    if (this.selection.isIdSelected(hoverRectID) && !this.drawingRect) {\n      const dragTarget = EDragTarget.Plane;\n      this.dragInfo = {\n        dragStartCoord,\n        dragTarget,\n        firstRect: this.selectedRect,\n        startTime: +new Date(),\n        originRectList: this.selectedRects\n      };\n      this.dragStatus = EDragStatus.Start;\n    }\n    return void 0;\n  }\n  appendOffsetRect(rect, offset) {\n    return __spreadProps(__spreadValues({}, rect), {\n      x: rect.x + offset.x / this.zoom,\n      y: rect.y + offset.y / this.zoom\n    });\n  }\n  getRectsBoundaries(rects, offset) {\n    const rectsPoint = rects.reduce((pre, next) => {\n      return pre.concat(...RectUtils.getRectPointList(this.appendOffsetRect(next, offset)));\n    }, []);\n    return MathUtils.calcViewportBoundaries(rectsPoint);\n  }\n  isRectsOutOfTarget(rects, offset) {\n    var _a, _b, _c, _d;\n    if (this.config.drawOutsideTarget !== false) {\n      return false;\n    }\n    const rectsBoundaries = this.getRectsBoundaries(rects, offset);\n    const selectedRectRange = {\n      y: rectsBoundaries.top,\n      x: rectsBoundaries.left,\n      height: rectsBoundaries.bottom - rectsBoundaries.top,\n      width: rectsBoundaries.right - rectsBoundaries.left\n    };\n    if (((_b = (_a = this.basicResult) == null ? void 0 : _a.pointList) == null ? void 0 : _b.length) > 0) {\n      return RectUtils.isRectNotInPolygon(selectedRectRange, getPolygonPointUnderZoom(this.basicResult.pointList, this.zoom));\n    }\n    if (this.basicResult || this.imgInfo) {\n      const basicRect = this.basicResult ? this.basicResult : {x: 0, y: 0, height: (_c = this.imgNode) == null ? void 0 : _c.height, width: (_d = this.imgNode) == null ? void 0 : _d.width};\n      if (basicRect) {\n        return [\n          {x: rectsBoundaries.left, y: rectsBoundaries.top},\n          {x: rectsBoundaries.right, y: rectsBoundaries.bottom}\n        ].some((i) => {\n          return !RectUtils.isInRect(i, basicRect);\n        });\n      }\n    }\n    return false;\n  }\n  moveRects(offset) {\n    var _a;\n    if ((_a = this.dragInfo) == null ? void 0 : _a.originRectList) {\n      let selectedRects = _.cloneDeep(this.dragInfo.originRectList);\n      if (this.isRectsOutOfTarget(selectedRects, offset)) {\n        return;\n      }\n      selectedRects = this.dragInfo.originRectList.map((i) => __spreadProps(__spreadValues({}, i), {\n        x: i.x + offset.x / this.zoom,\n        y: i.y + offset.y / this.zoom\n      }));\n      this.setRectList(this.rectList.map((v) => {\n        const updatedRect = selectedRects.find((i) => i.id === v.id);\n        if (updatedRect) {\n          return updatedRect;\n        }\n        return v;\n      }));\n    }\n  }\n  onDragMoveAll(offset) {\n    var _a, _b;\n    if (!((_b = (_a = this.dragInfo) == null ? void 0 : _a.originRectList) == null ? void 0 : _b.length)) {\n      return;\n    }\n    this.setRectList(this.dragInfo.originRectList.map((rect) => {\n      const newRect = __spreadProps(__spreadValues({}, rect), {\n        x: rect.x + offset.x / this.zoom,\n        y: rect.y + offset.y / this.zoom\n      });\n      return newRect;\n    }));\n    this.render();\n  }\n  onDragMove(coordinate) {\n    var _a, _b, _c, _d;\n    if (!this.dragInfo) {\n      return;\n    }\n    const offset = {\n      x: coordinate.x - this.dragInfo.dragStartCoord.x,\n      y: coordinate.y - this.dragInfo.dragStartCoord.y\n    };\n    this.dragStatus = EDragStatus.Move;\n    if (this.dragInfo.dragTarget === EDragTarget.Plane) {\n      this.moveRects(offset);\n      return;\n    }\n    if (!this.dragInfo.firstRect) {\n      return;\n    }\n    const dragRect = RectUtils.getRectUnderZoom(this.dragInfo.firstRect, this.zoom);\n    const {x, y, width, height} = dragRect;\n    let selectedRect = this.rectList.filter((v) => v.id === this.selectedRectID)[0];\n    switch (this.dragInfo.dragTarget) {\n      case EDragTarget.Point:\n        {\n          let newX = x;\n          let newY = y;\n          let newWidth = width;\n          let newHeight = height;\n          switch (this.hoverRectPointIndex) {\n            case 0: {\n              newX = width - offset.x < 0 ? x + width : x + offset.x;\n              newY = height - offset.y < 0 ? y + height : y + offset.y;\n              newWidth = Math.abs(offset.x - width);\n              newHeight = Math.abs(offset.y - height);\n              break;\n            }\n            case 1: {\n              newX = width + offset.x > 0 ? x : x + width + offset.x;\n              newY = height - offset.y < 0 ? y + height : y + offset.y;\n              newWidth = Math.abs(width + offset.x);\n              newHeight = Math.abs(height - offset.y);\n              break;\n            }\n            case 2: {\n              newX = width + offset.x > 0 ? x : x + width + offset.x;\n              newY = height + offset.y > 0 ? y : y + height + offset.y;\n              newWidth = Math.abs(width + offset.x);\n              newHeight = height + offset.y > 0 ? height + offset.y : Math.abs(height + offset.y);\n              break;\n            }\n            case 3: {\n              newX = width - offset.x < 0 ? x + width : x + offset.x;\n              newY = height + offset.y > 0 ? y : y + height + offset.y;\n              newWidth = Math.abs(offset.x - width);\n              newHeight = height + offset.y > 0 ? height + offset.y : Math.abs(height + offset.y);\n              break;\n            }\n            default: {\n              return;\n            }\n          }\n          selectedRect = __spreadProps(__spreadValues({}, selectedRect), {\n            x: newX,\n            y: newY,\n            width: newWidth,\n            height: newHeight\n          });\n        }\n        break;\n      case EDragTarget.Line: {\n        let newX = x;\n        let newY = y;\n        let newWidth = width;\n        let newHeight = height;\n        switch (this.hoverRectEdgeIndex) {\n          case 0: {\n            newY = height - offset.y < 0 ? y + height : y + offset.y;\n            newHeight = Math.abs(offset.y - height);\n            break;\n          }\n          case 1: {\n            newX = width + offset.x > 0 ? x : x + width + offset.x;\n            newWidth = Math.abs(width + offset.x);\n            break;\n          }\n          case 2: {\n            newY = height + offset.y > 0 ? y : y + height + offset.y;\n            newHeight = height + offset.y > 0 ? height + offset.y : Math.abs(height + offset.y);\n            break;\n          }\n          case 3: {\n            newX = width - offset.x < 0 ? x + width : x + offset.x;\n            newWidth = Math.abs(offset.x - width);\n            break;\n          }\n          default: {\n            return;\n          }\n        }\n        selectedRect = __spreadProps(__spreadValues({}, selectedRect), {\n          x: newX,\n          y: newY,\n          width: newWidth,\n          height: newHeight\n        });\n        break;\n      }\n      default: {\n        return;\n      }\n    }\n    if (this.config.drawOutsideTarget === false) {\n      if (this.basicResult) {\n        if (((_b = (_a = this.basicResult) == null ? void 0 : _a.pointList) == null ? void 0 : _b.length) > 0) {\n          if (RectUtils.isRectNotInPolygon(selectedRect, getPolygonPointUnderZoom(this.basicResult.pointList, this.zoom))) {\n            return;\n          }\n        }\n        const basicX = this.basicResult.x * this.zoom;\n        const basicY = this.basicResult.y * this.zoom;\n        const basicWidth = this.basicResult.width * this.zoom;\n        const basicHeight = this.basicResult.height * this.zoom;\n        if (selectedRect.x < basicX - 0.01 || selectedRect.y < basicY - 0.01 || selectedRect.width > basicX + basicWidth - selectedRect.x + 0.01 || selectedRect.height > basicY + basicHeight - selectedRect.y + 0.01) {\n          return;\n        }\n        if (selectedRect.x < basicX) {\n          selectedRect.x = basicX;\n        }\n        if (selectedRect.y < basicY) {\n          selectedRect.y = basicY;\n        }\n        if (selectedRect.width > basicX + basicWidth - selectedRect.x) {\n          switch (this.dragInfo.dragTarget) {\n            case EDragTarget.Point:\n            case EDragTarget.Line:\n              if (offset.x > 0 && offset.y > 0) {\n                selectedRect.width = basicX + basicWidth - selectedRect.x;\n              }\n              break;\n            default: {\n              return;\n            }\n          }\n        }\n        if (selectedRect.height > basicY + basicHeight - selectedRect.y) {\n          switch (this.dragInfo.dragTarget) {\n                      }\n        }\n      } else {\n        if (selectedRect.x < 0) {\n          selectedRect.x = 0;\n        }\n        if (selectedRect.y < 0) {\n          selectedRect.y = 0;\n        }\n        if (this.imgInfo) {\n          switch (this.dragInfo.dragTarget) {\n            default: {\n              if (selectedRect.x + selectedRect.width > ((_c = this.imgInfo) == null ? void 0 : _c.width) + 0.01 || selectedRect.y + selectedRect.height > ((_d = this.imgInfo) == null ? void 0 : _d.height) + 0.01) {\n                return;\n              }\n            }\n          }\n        }\n      }\n    }\n    this.setRectList(this.rectList.map((v) => {\n      if (v.id === selectedRect.id) {\n        return RectUtils.getRectUnderZoom(selectedRect, 1 / this.zoom);\n      }\n      return v;\n    }));\n    this.render();\n  }\n  onMouseMove(e) {\n    var _a, _b;\n    if (super.onMouseMove(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return;\n    }\n    const coordinateZoom = this.getCoordinateUnderZoom(e);\n    const coordinate = AxisUtils.changeDrawOutsideTarget(coordinateZoom, {x: 0, y: 0}, this.imgInfo, this.config.drawOutsideTarget, this.basicResult, this.zoom);\n    if (this.selectedIDs.length > 0 && this.dragInfo) {\n      this.onDragMove(coordinate);\n      return;\n    }\n    if (this.selectedRectID) {\n      const hoverRectPointIndex = this.getHoverRectPointIndex(e);\n      if (hoverRectPointIndex !== this.hoverRectPointIndex) {\n        this.hoverRectPointIndex = hoverRectPointIndex;\n        this.hoverRectEdgeIndex = -1;\n        this.render();\n        return;\n      }\n      if (this.hoverRectPointIndex === -1) {\n        const hoverRectEdgeIndex = this.getHoverRectEdgeIndex(e);\n        if (hoverRectEdgeIndex !== this.hoverRectEdgeIndex) {\n          this.hoverRectEdgeIndex = hoverRectEdgeIndex;\n          this.render();\n          return;\n        }\n      }\n    }\n    const hoverRectID = this.getHoverRectID(e);\n    const oldHoverRectID = this.hoverRectID;\n    this.hoverRectID = hoverRectID;\n    if (hoverRectID !== oldHoverRectID) {\n      this.render();\n    }\n    if (this.drawingRect && this.firstClickCoord) {\n      let {x, y} = this.firstClickCoord;\n      let {width, height} = this.drawingRect;\n      width = Math.abs(x - coordinate.x);\n      height = Math.abs(y - coordinate.y);\n      if (coordinate.x < x) {\n        x = coordinate.x;\n      }\n      if (coordinate.y < y) {\n        y = coordinate.y;\n      }\n      if (this.config.drawOutsideTarget === false) {\n        if (((_b = (_a = this.basicResult) == null ? void 0 : _a.pointList) == null ? void 0 : _b.length) > 0) {\n          if (RectUtils.isRectNotInPolygon(__spreadProps(__spreadValues({}, this.drawingRect), {\n            x,\n            y,\n            width,\n            height\n          }), getPolygonPointUnderZoom(this.basicResult.pointList, this.zoom))) {\n            return;\n          }\n        }\n        if (coordinate.x < 0) {\n          width = Math.abs(this.firstClickCoord.x);\n          x = 0;\n        }\n        if (coordinate.y < 0) {\n          height = Math.abs(this.firstClickCoord.y);\n          y = 0;\n        }\n        if (this.imgInfo) {\n          if (x + width > this.imgInfo.width) {\n            width = Math.abs(this.imgInfo.width - x);\n          }\n          if (y + height > this.imgInfo.height) {\n            height = Math.abs(this.imgInfo.height - y);\n          }\n        }\n      }\n      this.drawingRect = __spreadProps(__spreadValues({}, this.drawingRect), {\n        x,\n        y,\n        width,\n        height\n      });\n      this.render();\n    }\n    return void 0;\n  }\n  setAttributeLockList(attributeLockList) {\n    this.setSelectedRectID(void 0);\n    super.setAttributeLockList(attributeLockList);\n  }\n  setBasicResult(basicResult) {\n    super.setBasicResult(basicResult);\n    this.clearActiveStatus();\n  }\n  setRectValidAndRender(id) {\n    if (!id) {\n      return;\n    }\n    this.setRectList(this.rectList.map((rect) => {\n      if (rect.id === id) {\n        return __spreadProps(__spreadValues({}, rect), {\n          valid: !rect.valid\n        });\n      }\n      return rect;\n    }), true);\n    this.render();\n    this.emit(\"updateResult\");\n  }\n  createNewDrawingRect(e, basicSourceID) {\n    if (!this.imgInfo) {\n      return;\n    }\n    const coordinateZoom = this.getCoordinateUnderZoom(e);\n    const coordinate = AxisUtils.changeDrawOutsideTarget(coordinateZoom, {x: 0, y: 0}, this.imgInfo, this.config.drawOutsideTarget, this.basicResult, this.zoom);\n    this.setSelectedRectID(\"\");\n    this.hoverRectID = \"\";\n    if (this.drawOutSideTarget) {\n      if (coordinate.x < 0) {\n        coordinate.x = 0;\n      }\n      if (coordinate.y < 0) {\n        coordinate.y = 0;\n      }\n    }\n    this.drawingRect = __spreadProps(__spreadValues({}, coordinate), {\n      width: 0,\n      height: 0,\n      attribute: this.defaultAttribute,\n      valid: !e.ctrlKey,\n      id: uuid(8, 62),\n      sourceID: basicSourceID,\n      textAttribute: \"\"\n    });\n    if (this.hasMarkerConfig) {\n      const nextMarkInfo = CommonToolUtils.getNextMarker(this.currentPageResult, this.config.markerList, this.markerIndex);\n      if (nextMarkInfo) {\n        if (this.drawingRect) {\n          this.drawingRect = __spreadProps(__spreadValues({}, this.drawingRect), {\n            label: nextMarkInfo.label\n          });\n        }\n        this.markerIndex = nextMarkInfo.index;\n        this.emit(\"markIndexChange\");\n      } else {\n        this.emit(\"messageInfo\", Locale.getMessagesByLocale(EMessage.MarkerFinish, this.lang));\n        this.drawingRect = void 0;\n        return;\n      }\n    }\n    if (this.config.textConfigurable) {\n      let textAttribute = \"\";\n      textAttribute = AttributeUtils.getTextAttribute(this.rectList.filter((rect) => CommonToolUtils.isSameSourceID(rect.sourceID, basicSourceID)), this.config.textCheckType);\n      if (this.drawingRect) {\n        this.drawingRect = __spreadProps(__spreadValues({}, this.drawingRect), {\n          textAttribute\n        });\n      }\n    }\n    Object.assign(this.drawingRect, {\n      order: CommonToolUtils.getMaxOrder(this.rectList.filter((v) => CommonToolUtils.isSameSourceID(v.sourceID, basicSourceID))) + 1\n    });\n    this.firstClickCoord = __spreadValues({}, coordinate);\n    this.firstCurrentPos = __spreadValues({}, this.currentPos);\n    if (this.dataInjectionAtCreation) {\n      const data = this.dataInjectionAtCreation(this.drawingRect);\n      if (data) {\n        Object.assign(this.drawingRect, data);\n      }\n    }\n  }\n  addDrawingRectToRectList() {\n    if (!this.drawingRect) {\n      return;\n    }\n    let {width, height} = this.drawingRect;\n    width /= this.zoom;\n    height /= this.zoom;\n    if (Math.round(width) < this.config.minWidth || Math.round(height) < this.config.minHeight) {\n      this.emit(\"messageInfo\", Locale.getMessagesByLocale(EMessage.RectErrorSizeNotice, this.lang));\n      this.drawingRect = void 0;\n      this.firstClickCoord = void 0;\n      this.dragInfo = void 0;\n      this.dragStatus = EDragStatus.Wait;\n      this.render();\n      return;\n    }\n    const newRectList = this.getDrawingRectWithRectList();\n    this.setRectList(newRectList, true);\n    this.history.pushHistory(this.rectList);\n    this.setSelectedIdAfterAddingDrawingRect();\n    this.firstClickCoord = void 0;\n    this.drawingRect = void 0;\n    this.dragInfo = void 0;\n    this.dragStatus = EDragStatus.Wait;\n  }\n  setSelectedIdAfterAddingDrawingRect() {\n    if (!this.drawingRect) {\n      return;\n    }\n    if (this.config.textConfigurable) {\n      this.setSelectedRectID(this.drawingRect.id);\n    } else {\n      this.setSelectedRectID();\n    }\n  }\n  getDrawingRectWithRectList() {\n    if (!this.drawingRect) {\n      return this.rectList;\n    }\n    let {x, y, width, height} = this.drawingRect;\n    x /= this.zoom;\n    y /= this.zoom;\n    width /= this.zoom;\n    height /= this.zoom;\n    return [\n      ...this.rectList,\n      __spreadProps(__spreadValues({}, this.drawingRect), {\n        x,\n        y,\n        width,\n        height\n      })\n    ];\n  }\n  rightMouseUp(e) {\n    var _a, _b, _c;\n    const hoverRectID = this.getHoverRectID(e);\n    const hoverRect = this.rectList.find((v) => v.id === hoverRectID);\n    if (this.drawingRect) {\n      this.drawingRect = void 0;\n      this.firstClickCoord = void 0;\n    } else {\n      if (((_a = this.dragInfo) == null ? void 0 : _a.dragStartCoord) && distance((_b = this.dragInfo) == null ? void 0 : _b.dragStartCoord, this.getCoordinateUnderZoom(e)) > 3) {\n        this.dblClickListener.clearRightDblClick();\n      }\n      this.setSelectedRectID(hoverRectID, e.ctrlKey);\n      if (hoverRect && ((_c = this.selectedIDs) == null ? void 0 : _c.length) === 1) {\n        this.setDefaultAttribute(hoverRect.attribute);\n      }\n      this.hoverRectID = \"\";\n      if ((hoverRect == null ? void 0 : hoverRect.label) && this.hasMarkerConfig) {\n        const markerIndex = CommonToolUtils.getCurrentMarkerIndex(hoverRect.label, this.config.markerList);\n        if (markerIndex >= 0) {\n          this.setMarkerIndex(markerIndex);\n          this.emit(\"markIndexChange\");\n        }\n      }\n    }\n    this.render();\n  }\n  shiftRightMouseUp(e) {\n    const hoverRectID = this.getHoverRectID(e);\n    this.emit(\"shiftRightMouseUp\", hoverRectID);\n  }\n  onMouseUp(e) {\n    if (super.onMouseUp(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return true;\n    }\n    if (this.dragInfo && this.dragStatus === EDragStatus.Move) {\n      this.dragInfo = void 0;\n      this.dragStatus = EDragStatus.Wait;\n      this.history.pushHistory(this.rectList);\n      this.emit(\"updateResult\");\n      return;\n    }\n    if (e.button === 2 && e.shiftKey === true) {\n      this.shiftRightMouseUp(e);\n      return;\n    }\n    if (e.button === 2) {\n      this.rightMouseUp(e);\n      return;\n    }\n    const basicSourceID = CommonToolUtils.getSourceID(this.basicResult);\n    if (this.drawingRect) {\n      this.addDrawingRectToRectList();\n      return;\n    }\n    if (e.ctrlKey === true && e.button === 0 && this.hoverRectID) {\n      this.setRectValidAndRender(this.hoverRectID);\n      return;\n    }\n    this.createNewDrawingRect(e, basicSourceID);\n    this.render();\n    return void 0;\n  }\n  onRightDblClick(e) {\n    super.onRightDblClick(e);\n    const hoverRectID = this.getHoverRectID(e);\n    if (this.selection.isIdSelected(hoverRectID)) {\n      this.deleteSelectedRect();\n    }\n  }\n  deleteSelectedRect() {\n    this.selectedRects.forEach((rect) => {\n      this.deleteRect(rect.id);\n    });\n  }\n  onKeyDown(e) {\n    if (!CommonToolUtils.hotkeyFilter(e)) {\n      return;\n    }\n    if (super.onKeyDown(e) === false) {\n      return;\n    }\n    const {keyCode} = e;\n    switch (keyCode) {\n      case EKeyCode.Ctrl:\n        if (this.drawingRect) {\n          this.drawingRect = __spreadProps(__spreadValues({}, this.drawingRect), {\n            valid: !e.ctrlKey\n          });\n          this.render();\n        }\n        break;\n      case EKeyCode.F:\n        if (this.selectedRectID) {\n          this.setRectValidAndRender(this.selectedRectID);\n        }\n        break;\n      case EKeyCode.Z:\n        this.setIsHidden(!this.isHidden);\n        this.render();\n        break;\n      case EKeyCode.Delete:\n        this.deleteSelectedRect();\n        break;\n      case EKeyCode.Tab: {\n        e.preventDefault();\n        if (this.drawingRect) {\n          return;\n        }\n        let sort = ESortDirection.ascend;\n        if (e.shiftKey) {\n          sort = ESortDirection.descend;\n        }\n        const [showingRect, selectedRect] = CommonToolUtils.getRenderResultList(this.rectList, CommonToolUtils.getSourceID(this.basicResult), this.attributeLockList, this.selectedIDs);\n        let rectList = [...showingRect];\n        if (selectedRect) {\n          rectList = [...rectList, ...selectedRect];\n        }\n        const viewPort = CanvasUtils.getViewPort(this.canvas, this.currentPos, this.zoom);\n        rectList = rectList.filter((rect) => CanvasUtils.inViewPort({x: rect.x, y: rect.y}, viewPort));\n        const nextSelectedRect = CommonToolUtils.getNextSelectedRectID(rectList, sort, this.selectedRectID);\n        if (nextSelectedRect) {\n          this.setSelectedRectID(nextSelectedRect.id);\n          if (this.config.attributeConfigurable === true) {\n            this.setDefaultAttribute(nextSelectedRect.attribute);\n          }\n        }\n        break;\n      }\n      default: {\n        if (this.config.attributeConfigurable) {\n          const keyCode2Attribute = AttributeUtils.getAttributeByKeycode(keyCode, this.config.attributeList);\n          if (keyCode2Attribute !== void 0) {\n            this.setDefaultAttribute(keyCode2Attribute);\n          }\n        }\n        break;\n      }\n    }\n    return true;\n  }\n  onKeyUp(e) {\n    super.onKeyUp(e);\n    if (this.selection.triggerKeyboardEvent(e, this.setRectList.bind(this))) {\n      return;\n    }\n    switch (e.keyCode) {\n      case EKeyCode.Ctrl:\n        if (this.drawingRect) {\n          this.drawingRect = __spreadProps(__spreadValues({}, this.drawingRect), {\n            valid: true\n          });\n          this.render();\n        }\n        break;\n    }\n  }\n  onWheel(e) {\n    const oldZoom = this.zoom;\n    let newDrawingRect;\n    let newFirsClickCoord;\n    if (this.drawingRect && this.firstClickCoord) {\n      newDrawingRect = RectUtils.getRectUnderZoom(this.drawingRect, 1 / oldZoom);\n      newFirsClickCoord = AxisUtils.changePointByZoom(this.firstClickCoord, 1 / oldZoom);\n    }\n    super.onWheel(e, false);\n    if (newDrawingRect && newFirsClickCoord) {\n      this.drawingRect = RectUtils.getRectUnderZoom(newDrawingRect, this.zoom);\n      this.firstClickCoord = AxisUtils.changePointByZoom(newFirsClickCoord, this.zoom);\n    }\n    this.render();\n  }\n  getCurrentSelectedData() {\n    const {selectedRect} = this;\n    if (!selectedRect) {\n      return;\n    }\n    const toolColor = this.getColor(selectedRect.attribute);\n    const color = selectedRect.valid ? toolColor == null ? void 0 : toolColor.valid.stroke : toolColor == null ? void 0 : toolColor.invalid.stroke;\n    return {\n      width: selectedRect.width * this.zoom * 0.6,\n      textAttribute: selectedRect.textAttribute,\n      color\n    };\n  }\n  getRenderStyle(rect) {\n    const customStyle = this.customRenderStyle && this.customRenderStyle(rect);\n    if (customStyle) {\n      return customStyle;\n    }\n    const toolColor = this.getColor(rect.attribute);\n    let strokeColor;\n    let fillColor;\n    if (rect.valid === false) {\n      strokeColor = toolColor == null ? void 0 : toolColor.invalid.stroke;\n      fillColor = toolColor == null ? void 0 : toolColor.invalid.fill;\n    } else {\n      strokeColor = toolColor == null ? void 0 : toolColor.valid.stroke;\n      fillColor = toolColor == null ? void 0 : toolColor.valid.fill;\n    }\n    return {\n      strokeColor,\n      fillColor,\n      textColor: strokeColor,\n      toolColor\n    };\n  }\n  renderTextAttribute() {\n    var _a;\n    const {selectedRect} = this;\n    if (!this.ctx || this.config.textConfigurable !== true || !selectedRect) {\n      return;\n    }\n    const {x, y, width, height, attribute, valid} = selectedRect;\n    const newWidth = width * this.zoom * 0.6;\n    const coordinate = AxisUtils.getOffsetCoordinate({x, y: y + height}, this.currentPos, this.zoom);\n    const toolColor = this.getColor(attribute);\n    const color = valid ? toolColor == null ? void 0 : toolColor.valid.stroke : toolColor == null ? void 0 : toolColor.invalid.stroke;\n    const offset = 4;\n    if (!this._textAttributeInstance) {\n      this._textAttributeInstance = new TextAttributeClass({\n        width: newWidth,\n        container: this.container,\n        icon: this.getTextIconSvg(attribute),\n        color,\n        getCurrentSelectedData: this.getCurrentSelectedData,\n        updateSelectedTextAttribute: this.updateSelectedRectTextAttribute\n      });\n    }\n    if (this._textAttributeInstance && !((_a = this._textAttributeInstance) == null ? void 0 : _a.isExit)) {\n      this._textAttributeInstance.appendToContainer();\n    }\n    this._textAttributeInstance.update(`${selectedRect.textAttribute}`, {\n      left: coordinate.x,\n      top: coordinate.y + offset,\n      color,\n      width: newWidth\n    });\n  }\n  renderSelectedRect(rect) {\n    if (!this.ctx || !rect) {\n      return;\n    }\n    const {ctx} = this;\n    let radius = 10;\n    const pointList = RectUtils.getRectPointList(rect);\n    const len = pointList.length;\n    const toolColor = this.getColor(rect.attribute);\n    pointList.forEach((v, i) => {\n      var _a, _b;\n      ctx.save();\n      ctx.moveTo(v.x, v.y);\n      ctx.beginPath();\n      if (this.hoverRectPointIndex === i) {\n        radius = scope + 6;\n      } else {\n        radius = scope;\n      }\n      if (rect.valid === false) {\n        ctx.strokeStyle = toolColor == null ? void 0 : toolColor.invalid.stroke;\n        ctx.fillStyle = toolColor == null ? void 0 : toolColor.invalid.stroke;\n      } else {\n        ctx.strokeStyle = toolColor == null ? void 0 : toolColor.valid.stroke;\n        ctx.fillStyle = toolColor == null ? void 0 : toolColor.valid.stroke;\n      }\n      ctx.arc(v.x * this.zoom + this.currentPos.x, v.y * this.zoom + this.currentPos.y, radius, 0, 2 * Math.PI);\n      ctx.fill();\n      if (this.hoverRectEdgeIndex === i) {\n        ctx.beginPath();\n        ctx.lineWidth = 10;\n        const lineColor = this.getColor(rect.attribute);\n        const strokeStyle = rect.valid === false ? (_a = lineColor == null ? void 0 : lineColor.invalid) == null ? void 0 : _a.stroke : (_b = lineColor == null ? void 0 : lineColor.valid) == null ? void 0 : _b.stroke;\n        ctx.strokeStyle = strokeStyle;\n        ctx.moveTo(pointList[i].x * this.zoom + this.currentPos.x, pointList[i].y * this.zoom + this.currentPos.y);\n        ctx.lineTo(pointList[(i + 1) % len].x * this.zoom + this.currentPos.x, pointList[(i + 1) % len].y * this.zoom + this.currentPos.y);\n        ctx.stroke();\n      }\n      ctx.restore();\n    });\n    this.renderTextAttribute();\n  }\n  renderDrawingRect(rect, zoom = this.zoom, isZoom = false) {\n    var _a, _b, _c, _d;\n    if (this.ctx && rect) {\n      const {ctx, style} = this;\n      const {hiddenText = false} = style;\n      ctx.save();\n      const {strokeColor, fillColor, textColor} = this.getRenderStyle(rect);\n      ctx.font = \"lighter 14px Arial\";\n      let showText = \"\";\n      if (((_a = this.config) == null ? void 0 : _a.isShowOrder) && rect.order && (rect == null ? void 0 : rect.order) > 0) {\n        showText = `${rect.order}`;\n      }\n      if (rect.label && this.hasMarkerConfig) {\n        const order = CommonToolUtils.getCurrentMarkerIndex(rect.label, this.config.markerList) + 1;\n        showText = `${order}_${MarkerUtils.getMarkerShowText(rect.label, this.config.markerList)}`;\n      }\n      if (rect.attribute) {\n        showText = `${showText}  ${AttributeUtils.getAttributeShowText(rect.attribute, (_b = this.config) == null ? void 0 : _b.attributeList)}`;\n      }\n      const transformRect = AxisUtils.changeRectByZoom(rect, isZoom ? zoom : this.zoom, this.currentPos);\n      if (!hiddenText) {\n        DrawUtils.drawText(this.canvas, {x: transformRect.x, y: transformRect.y - 6}, showText, __spreadProps(__spreadValues({\n          color: strokeColor,\n          font: \"normal normal 900 14px SourceHanSansCN-Regular\"\n        }, DEFAULT_TEXT_SHADOW), {\n          textMaxWidth: 300\n        }));\n      }\n      const lineWidth = (_d = (_c = this.style) == null ? void 0 : _c.width) != null ? _d : 2;\n      if (rect.id === this.hoverRectID || rect.id === this.selectedRectID || this.isMultiMoveMode) {\n        DrawUtils.drawRectWithFill(this.canvas, transformRect, {color: fillColor});\n      }\n      DrawUtils.drawRect(this.canvas, transformRect, {color: strokeColor, thickness: lineWidth, hiddenText: true});\n      ctx.restore();\n      let rectSize = `${Math.round(rect.width)} * ${Math.round(rect.height)}`;\n      if (isZoom === true) {\n        rectSize = `${Math.round(rect.width / this.zoom)} * ${Math.round(transformRect.height / this.zoom)}`;\n      }\n      const textSizeWidth = rectSize.length * 7;\n      if (!hiddenText) {\n        DrawUtils.drawText(this.canvas, {x: transformRect.x + transformRect.width - textSizeWidth, y: transformRect.y + transformRect.height + 15}, rectSize, __spreadValues({\n          color: textColor,\n          font: \"normal normal 600 14px Arial\"\n        }, DEFAULT_TEXT_SHADOW));\n      }\n      if (!hiddenText && rect.textAttribute && rect.id !== this.selectedRectID) {\n        const marginTop = 0;\n        const textWidth = Math.max(20, transformRect.width - textSizeWidth);\n        DrawUtils.drawText(this.canvas, {x: transformRect.x, y: transformRect.y + transformRect.height + 20 + marginTop}, rect.textAttribute, __spreadValues({\n          color: textColor,\n          font: \"italic normal 900 14px Arial\",\n          textMaxWidth: textWidth\n        }, DEFAULT_TEXT_SHADOW));\n      }\n    }\n  }\n  renderStaticRect() {\n    var _a;\n    if (!(((_a = this.rectList) == null ? void 0 : _a.length) > 0 && JSON.stringify(this.rectList))) {\n      return;\n    }\n    const {renderEnhance = {}} = this;\n    const [showingRect, selectedRects] = CommonToolUtils.getRenderResultList(this.rectList, CommonToolUtils.getSourceID(this.basicResult), this.attributeLockList, this.selectedIDs);\n    if (!this.isHidden) {\n      showingRect == null ? void 0 : showingRect.forEach((rect) => {\n        this.renderDrawingRect(rect);\n        if (renderEnhance.staticRender) {\n          renderEnhance.staticRender(this.canvas, AxisUtils.changeRectByZoom(rect, this.zoom, this.currentPos), this.getRenderStyle(rect));\n        }\n      });\n    }\n    if (selectedRects) {\n      selectedRects.forEach((rect) => {\n        this.renderDrawingRect(rect);\n        this.renderSelectedRect(rect);\n        if (renderEnhance.selectedRender) {\n          renderEnhance.selectedRender(this.canvas, AxisUtils.changeRectByZoom(rect, this.zoom, this.currentPos), this.getRenderStyle(rect));\n        }\n      });\n    }\n  }\n  renderCreatingRect() {\n    if (!this.drawingRect) {\n      return;\n    }\n    const {renderEnhance = {}} = this;\n    this.renderDrawingRect(this.drawingRect, 1, true);\n    if (renderEnhance.creatingRender) {\n      renderEnhance.creatingRender(this.canvas, AxisUtils.changeRectByZoom(this.drawingRect, 1, this.currentPos), this.getRenderStyle(this.drawingRect));\n    }\n  }\n  renderRect() {\n    this.renderStaticRect();\n    this.renderCreatingRect();\n  }\n  render() {\n    if (!this.ctx) {\n      return;\n    }\n    super.render();\n    this.renderRect();\n    this.renderCursorLine(this.getLineColor(this.defaultAttribute));\n  }\n  setDefaultAttribute(defaultAttribute) {\n    const oldDefault = this.defaultAttribute;\n    this.defaultAttribute = defaultAttribute != null ? defaultAttribute : \"\";\n    if (oldDefault !== defaultAttribute) {\n      this.changeStyle(defaultAttribute);\n      this.emit(\"changeAttributeSidebar\");\n      if (this.selectedRects) {\n        this.setRectList(this.rectList.map((v) => {\n          if (this.selection.isIdSelected(v.id)) {\n            return __spreadProps(__spreadValues({}, v), {\n              attribute: this.defaultAttribute\n            });\n          }\n          return v;\n        }), true);\n        this.history.pushHistory(this.rectList);\n        this.render();\n      }\n      if (this.drawingRect) {\n        this.drawingRect = __spreadProps(__spreadValues({}, this.drawingRect), {\n          attribute: this.defaultAttribute\n        });\n        this.render();\n      }\n      if (this._textAttributeInstance) {\n        if (this.attributeLockList.length > 0 && !this.attributeLockList.includes(this.defaultAttribute)) {\n          this._textAttributeInstance.clearTextAttribute();\n          return;\n        }\n        this._textAttributeInstance.updateIcon(this.getTextIconSvg(defaultAttribute));\n      }\n    }\n  }\n  setValid(valid) {\n    super.setValid(valid);\n    this.emit(\"updateResult\");\n  }\n  clearActiveStatus() {\n    this.drawingRect = void 0;\n    this.firstClickCoord = void 0;\n    this.dragInfo = void 0;\n    this.dragStatus = EDragStatus.Wait;\n    this.setSelectedRectID(void 0);\n    this.setOperationMode(EOperationMode.General);\n  }\n  clearResult(sendMessage = true) {\n    const newRectList = this.rectList.filter((rect) => rect.disableDelete === true);\n    if (newRectList.length > 0 && sendMessage) {\n      this.emit(\"messageInfo\", Locale.getMessagesByLocale(EMessage.ClearPartialData, this.lang));\n    }\n    this.setRectList(newRectList, true);\n    this.setSelectedRectID(void 0);\n  }\n  deleteRect(rectID) {\n    var _a;\n    if (!rectID) {\n      return;\n    }\n    const selectedRect = this.rectList.find((v) => v.id === rectID);\n    if ((selectedRect == null ? void 0 : selectedRect.disableDelete) === true) {\n      this.emit(\"messageInfo\", Locale.getMessagesByLocale(EMessage.DisableDelete, this.lang));\n      return;\n    }\n    this.setRectList(this.rectList.filter((v) => v.id !== rectID), true);\n    this.history.pushHistory(this.rectList);\n    this.setSelectedRectID(void 0);\n    (_a = this._textAttributeInstance) == null ? void 0 : _a.clearTextAttribute();\n    this.render();\n  }\n  exportData() {\n    const {rectList} = this;\n    return [rectList, this.basicImgInfo];\n  }\n  undo() {\n    const rectList = this.history.undo();\n    if (rectList) {\n      if (rectList.length !== this.rectList.length) {\n        this.setSelectedRectID(\"\");\n      }\n      this.setRectList(rectList, true);\n      this.render();\n    }\n  }\n  redo() {\n    const rectList = this.history.redo();\n    if (rectList) {\n      if (rectList.length !== this.rectList.length) {\n        this.setSelectedRectID(\"\");\n      }\n      this.setRectList(rectList, true);\n      this.render();\n    }\n  }\n}\n\nexport { RectOperation, RectOperation as default };\n","import uuid from '../uuid.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass TagUtil {\n  static getTagKeyName(key, labelInfoSet) {\n    var _a, _b;\n    if (!labelInfoSet) {\n      return;\n    }\n    return (_b = (_a = labelInfoSet.find((v) => v.value === key)) == null ? void 0 : _a.key) != null ? _b : \"\";\n  }\n  static getTagName([key = \"\", value = \"\"], labelInfoSet) {\n    if (!labelInfoSet) {\n      return;\n    }\n    for (const i of labelInfoSet) {\n      if (i.value === key) {\n        if (!i.subSelected) {\n          console.error(\"\\u6807\\u7B7E\\u89E3\\u6790\\u9519\\u8BEF\", key, value);\n          return \"\";\n        }\n        for (const j of i.subSelected) {\n          if (j.value === value) {\n            return j.key;\n          }\n        }\n      }\n    }\n  }\n  static getTagNameList(result, labelInfoSet) {\n    if (Object.keys(result).length <= 0) {\n      return [];\n    }\n    return Object.entries(result).reduce((acc, cur) => {\n      const [key, value] = cur;\n      if (value && value.length > 0) {\n        const valueList = value.split(\";\");\n        const nameList = {\n          keyName: this.getTagKeyName(key, labelInfoSet),\n          value: valueList.map((v) => this.getTagName([key, v], labelInfoSet))\n        };\n        return [...acc, nameList];\n      }\n      return acc;\n    }, []).filter((v) => v);\n  }\n  static getTagnameListWithoutConfig(result) {\n    if (Object.keys(result).length <= 0) {\n      return [];\n    }\n    return Object.entries(result).reduce((acc, cur) => {\n      const [key, value] = cur;\n      const valueList = value.split(\";\");\n      const nameList = {\n        keyName: key,\n        value: valueList\n      };\n      return [...acc, nameList];\n    }, []).filter((v) => v);\n  }\n  static judgeResultIsInInputList(key, value, inputList) {\n    if (!key || !value || !inputList) {\n      return false;\n    }\n    const a = inputList.filter((v) => {\n      if (v.value === key && v.subSelected) {\n        const resultValue = value == null ? void 0 : value.split(\";\");\n        return (v == null ? void 0 : v.subSelected.filter((i) => resultValue.indexOf(i.value) > -1).length) > 0;\n      }\n      return false;\n    });\n    return a.length > 0;\n  }\n  static getDefaultResultByConfig(inputList) {\n    return inputList.reduce((acc, cur) => {\n      if (cur.subSelected) {\n        cur.subSelected.forEach((data) => {\n          var _a;\n          if (data.isDefault) {\n            const originResult = (_a = acc[cur.value]) != null ? _a : \"\";\n            let originResultList = [];\n            if (originResult.length > 0) {\n              originResultList = originResult.split(\";\");\n            }\n            originResultList.push(data.value);\n            acc[cur.value] = originResultList.join(\";\");\n          }\n        });\n      }\n      return acc;\n    }, {});\n  }\n  static getDefaultTagResult(inputList, basicResultList) {\n    const defaultResult = this.getDefaultResultByConfig(inputList);\n    if (basicResultList.length > 0) {\n      return basicResultList.map((v) => ({\n        id: uuid(),\n        sourceID: v.id,\n        result: __spreadValues({}, defaultResult)\n      }));\n    }\n    return [\n      {\n        id: uuid(),\n        sourceID: \"\",\n        result: __spreadValues({}, defaultResult)\n      }\n    ];\n  }\n}\n\nexport { TagUtil as default };\n","import CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\nimport TagUtil from '../../utils/tool/TagUtils.js';\nimport uuid from '../../utils/uuid.js';\nimport { BasicToolOperation } from './basicToolOperation.js';\n\nclass TagOperation extends BasicToolOperation {\n  constructor(props) {\n    super(props);\n    this.getInitResultList = (dataSourceStep, basicResultList) => {\n      if (!(dataSourceStep === 0 || dataSourceStep === void 0) && basicResultList.length === 0) {\n        return [];\n      }\n      return TagUtil.getDefaultTagResult(this.config.inputList, basicResultList);\n    };\n    this.setLabel = (i, j) => {\n      var _a, _b;\n      if (this.isImgError) {\n        return;\n      }\n      if (!this.basicResult && this.dependToolName) {\n        return;\n      }\n      const labelInfoSet = this.config.inputList;\n      if (!labelInfoSet[i]) {\n        return;\n      }\n      const {subSelected} = labelInfoSet[i];\n      if (i < labelInfoSet.length && labelInfoSet[i].subSelected && subSelected && j < subSelected.length) {\n        const key = labelInfoSet[i].value;\n        let value = (_a = subSelected[j]) == null ? void 0 : _a.value;\n        const isMulti = (_b = labelInfoSet[i]) == null ? void 0 : _b.isMulti;\n        const basicTagResult = this.tagResult.filter((v) => {\n          const basicSourceID = `${v.sourceID}`;\n          return CommonToolUtils.isSameSourceID(basicSourceID, this.sourceID);\n        })[0];\n        if (basicTagResult) {\n          let times = 0;\n          const {result} = basicTagResult;\n          if (basicTagResult.sourceID === 0) {\n            basicTagResult.sourceID = \"0\";\n          }\n          for (const oldKey in basicTagResult.result) {\n            if (oldKey === labelInfoSet[i].value) {\n              times++;\n              if (isMulti === true) {\n                const keyList = result[oldKey].split(\";\").filter((v) => v !== \"\");\n                const index = keyList.indexOf(value);\n                if (index === -1) {\n                  keyList.push(value);\n                } else {\n                  keyList.splice(index, 1);\n                }\n                value = keyList.join(\";\");\n              }\n              if (value === \"\") {\n                if (Object.keys(result).length === 1) {\n                  this.tagResult = this.tagResult.filter((v) => {\n                    const basicSourceID = `${v.sourceID}`;\n                    return CommonToolUtils.isDifferSourceID(basicSourceID, this.sourceID);\n                  });\n                } else if (Object.keys(result).length > 1) {\n                  delete result[oldKey];\n                }\n              } else {\n                result[oldKey] = value;\n              }\n            }\n          }\n          if (times === 0) {\n            Object.assign(basicTagResult.result, {[key]: value});\n          }\n        } else {\n          this.tagResult = [\n            {\n              sourceID: this.sourceID,\n              id: uuid(8, 62),\n              result: {\n                [key]: value\n              }\n            }\n          ];\n        }\n        this.render();\n      }\n    };\n    this.clearResult = (sendMessage = true, value) => {\n      if (value) {\n        this.tagResult = this.tagResult.map((v) => {\n          if (v == null ? void 0 : v.result[value]) {\n            delete v.result[value];\n          }\n          return v;\n        });\n      } else {\n        this.tagResult = [];\n      }\n      this.render();\n    };\n    this.config = CommonToolUtils.jsonParser(props.config);\n    this.tagResult = [];\n    this.labelSelectedList = [];\n    this.setShowDefaultCursor(true);\n  }\n  destroy() {\n    this.clearTag();\n    super.destroy();\n  }\n  setResult(tagResult) {\n    this.tagResult = tagResult;\n    this.render();\n  }\n  get currentPageResult() {\n    return [this.currentTagResult];\n  }\n  get currentTagResult() {\n    var _a;\n    return (_a = this.tagResult.filter((v) => {\n      const basicSourceID = `${v.sourceID}`;\n      return CommonToolUtils.isSameSourceID(basicSourceID, this.sourceID);\n    })[0]) != null ? _a : {};\n  }\n  get sourceID() {\n    return CommonToolUtils.getSourceID(this.basicResult);\n  }\n  onKeyDown(e) {\n    if (!CommonToolUtils.hotkeyFilter(e) || super.onKeyDown(e) === false) {\n      return;\n    }\n    let {keyCode} = e;\n    if (keyCode) {\n      if (keyCode <= 57 && keyCode >= 49 || keyCode <= 105 && keyCode >= 97) {\n        if (keyCode > 57) {\n          keyCode -= 97;\n        } else {\n          keyCode -= 49;\n        }\n        if (this.config.inputList.length === 1) {\n          this.labelSelectedList = [0, keyCode];\n          this.setLabel(0, keyCode);\n          setTimeout(() => {\n            this.labelSelectedList = [];\n            this.render();\n          }, 500);\n          return;\n        }\n        if (this.labelSelectedList.length === 1) {\n          this.labelSelectedList = [this.labelSelectedList[0], keyCode];\n          this.setLabel(this.labelSelectedList[0], keyCode);\n          setTimeout(() => {\n            this.labelSelectedList = [];\n            this.render();\n          }, 500);\n        } else {\n          this.labelSelectedList = [keyCode];\n          this.emit(\"expend\");\n        }\n      }\n    }\n  }\n  clearTag() {\n    var _a;\n    const parentNode = (_a = this.canvas) == null ? void 0 : _a.parentNode;\n    const oldDom = window.self.document.getElementById(\"tagToolTag\");\n    if (oldDom && parentNode && parentNode.contains(oldDom)) {\n      parentNode == null ? void 0 : parentNode.removeChild(oldDom);\n    }\n  }\n  renderTag() {\n    var _a, _b, _c, _d, _e, _f;\n    this.clearTag();\n    if (!(((_a = this.tagResult) == null ? void 0 : _a.length) > 0)) {\n      return;\n    }\n    const dom = document.createElement(\"div\");\n    const tagInfoList = TagUtil.getTagNameList((_c = (_b = this.currentTagResult) == null ? void 0 : _b.result) != null ? _c : {}, this.config.inputList);\n    dom.innerHTML = (_d = tagInfoList.reduce((acc, cur) => {\n      return `${acc}${cur.keyName}: ${cur.value.join(` \\u3001 `)}\n`;\n    }, \"\")) != null ? _d : \"\";\n    dom.setAttribute(\"id\", \"tagToolTag\");\n    dom.setAttribute(\"style\", `\n        position: absolute;\n        top: 0;\n        right: 0;\n        z-index: 5;\n      \n        padding: 0 20px;\n      \n        font-size: 15px;\n        color: white;\n        text-align: right;\n        line-height: 32px;\n        white-space: pre;\n      \n        background: rgba(102, 111, 255, 1);\n        opacity: 0.6;\n        clear: both;\n      `);\n    (_f = (_e = this.canvas) == null ? void 0 : _e.parentNode) == null ? void 0 : _f.appendChild(dom);\n  }\n  render() {\n    this.renderTag();\n    super.render();\n    this.emit(\"render\");\n  }\n  exportData() {\n    let {tagResult} = this;\n    if (this.isImgError) {\n      tagResult = [];\n    }\n    return [tagResult, this.basicImgInfo];\n  }\n}\n\nexport { TagOperation as default };\n","class StyleUtils {\n  static getStrokeAndFill(toolStyle, valid = true, options = {}) {\n    const {isSelected = false, isHover = false} = options;\n    if (isSelected) {\n      return {\n        stroke: valid ? toolStyle.validSelected.stroke : toolStyle.invalidSelected.stroke,\n        fill: valid ? toolStyle.validSelected.fill : toolStyle.invalidSelected.fill\n      };\n    }\n    if (isHover) {\n      return {\n        stroke: valid ? toolStyle.validHover.stroke : toolStyle.invalidHover.stroke,\n        fill: valid ? toolStyle.validHover.fill : toolStyle.invalidHover.fill\n      };\n    }\n    return {\n      stroke: valid ? toolStyle.valid.stroke : toolStyle.invalid.stroke,\n      fill: valid ? toolStyle.valid.fill : toolStyle.invalid.fill\n    };\n  }\n  static getStyle2String(style) {\n    if (!style) {\n      return;\n    }\n    return Object.entries(style).reduce((acc, cur) => `${acc} ${cur[0]}: ${cur[1]};`, \"\");\n  }\n}\n\nexport { StyleUtils as default };\n","import { EToolName, ELineTypes, edgeAdsorptionScope } from '../../constant/tool.js';\nimport RectUtils from '../../utils/tool/RectUtils.js';\nimport PolygonUtils from '../../utils/tool/PolygonUtils.js';\nimport MarkerUtils from '../../utils/tool/MarkerUtils.js';\nimport MathUtils from '../../utils/MathUtils.js';\nimport _ from 'lodash';\nimport { EDragStatus, ESortDirection, DEFAULT_TEXT_OFFSET } from '../../constant/annotation.js';\nimport EKeyCode from '../../constant/keyCode.js';\nimport Locale from '../../locales/index.js';\nimport { EMessage } from '../../locales/constants.js';\nimport AttributeUtils from '../../utils/tool/AttributeUtils.js';\nimport AxisUtils from '../../utils/tool/AxisUtils.js';\nimport CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\nimport DrawUtils from '../../utils/tool/DrawUtils.js';\nimport StyleUtils from '../../utils/tool/StyleUtils.js';\nimport uuid from '../../utils/uuid.js';\nimport { BasicToolOperation } from './basicToolOperation.js';\nimport TextAttributeClass from './textAttributeClass.js';\nimport Selection from './Selection.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __pow = Math.pow;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst TEXTAREA_WIDTH = 200;\nclass PointOperation extends BasicToolOperation {\n  constructor(props) {\n    super(props);\n    this.setMarkerIndex = (markerIndex) => {\n      this.markerIndex = markerIndex;\n    };\n    this.setMarkerIndexAndSelect = (markerIndex) => {\n      if (!this.config.markerList) {\n        return;\n      }\n      this.markerIndex = markerIndex;\n      const markerValue = this.config.markerList[markerIndex].value;\n      const currentPoint = this.currentPageResult.find((point) => point.label === markerValue);\n      if (currentPoint) {\n        this.setSelectedID(currentPoint.id);\n        if (this.config.attributeConfigurable === true) {\n          this.setDefaultAttribute(currentPoint.attribute);\n        }\n      }\n      this.emit(\"markIndexChange\");\n    };\n    this.textChange = (v) => {\n      if (this.config.textConfigurable !== true || !this.selectedID) {\n        return;\n      }\n      this.setPointList(AttributeUtils.textChange(v, this.selectedID, this.pointList));\n      this.emit(\"selectedChange\");\n      this.render();\n    };\n    this.isMinDistance = (coord) => {\n      const transformCoord = AxisUtils.changePointByZoom(coord, this.zoom);\n      return this.pointList.some((point) => {\n        const transformPoint = AxisUtils.changePointByZoom(point, this.zoom);\n        return MathUtils.getLineLength(transformPoint, transformCoord) < 0.2;\n      });\n    };\n    var _a, _b;\n    this.config = CommonToolUtils.jsonParser(props.config);\n    this.pointList = [];\n    this.markerIndex = 0;\n    this.selection = new Selection(this);\n    this.setStyle(props.style);\n    this.createPoint = this.createPoint.bind(this);\n    this.getCurrentSelectedData = this.getCurrentSelectedData.bind(this);\n    this.updateSelectedTextAttribute = this.updateSelectedTextAttribute.bind(this);\n    this.setSelectedID = this.setSelectedID.bind(this);\n    this.forbidAddNew = (_a = props.forbidAddNew) != null ? _a : false;\n    this.forbidDelete = (_b = props.forbidDelete) != null ? _b : false;\n  }\n  get dataList() {\n    return this.pointList;\n  }\n  get drawOutsideTarget() {\n    var _a;\n    return (_a = this.config.drawOutsideTarget) != null ? _a : this.config.drawPointOut;\n  }\n  get selectedID() {\n    return this.selection.selectedID;\n  }\n  get selectedIDs() {\n    return this.selection.selectedIDs;\n  }\n  get selectedPoints() {\n    return this.pointList.filter((i) => this.selection.isIdSelected(i.id));\n  }\n  setNextMarker(pointList = this.pointList) {\n    if (this.hasMarkerConfig) {\n      const nextMarkerInfo = CommonToolUtils.getNextMarker(this.getCurrentPageResult(pointList), this.config.markerList);\n      if (nextMarkerInfo) {\n        this.setMarkerIndexAndSelect(nextMarkerInfo.index);\n      }\n    }\n  }\n  setResult(pointList) {\n    this.clearActiveStatus();\n    this.setPointList(pointList);\n    this.setNextMarker(pointList);\n    this.recoverOperationMode();\n    this.render();\n  }\n  setPointList(pointList, isUpload = false) {\n    const oldLen = this.pointList.length;\n    this.pointList = pointList;\n    if (oldLen !== pointList.length) {\n      this.emit(\"updatePageNumber\");\n    }\n    if (isUpload) {\n      this.emit(\"updateResult\");\n    }\n  }\n  setConfig(config, isClear = false) {\n    this.config = CommonToolUtils.jsonParser(config);\n    if (isClear === true) {\n      this.clearResult();\n    }\n  }\n  clearResult() {\n    this.setPointList([]);\n    this.setSelectedID(void 0);\n    this.history.pushHistory([]);\n    this.hoverID = \"\";\n    this.render();\n  }\n  setDefaultAttribute(defaultAttribute = \"\") {\n    const oldDefault = this.defaultAttribute;\n    this.defaultAttribute = defaultAttribute;\n    if (oldDefault !== defaultAttribute) {\n      this.changeStyle(defaultAttribute);\n      this.emit(\"changeAttributeSidebar\");\n      if (this.selectedPoints.length > 0) {\n        this.selectedPoints.forEach((point) => {\n          point.attribute = defaultAttribute;\n        });\n        this.history.pushHistory(this.pointList);\n        this.render();\n      }\n      if (this._textAttributeInstance) {\n        if (this.attributeLockList.length > 0 && !this.attributeLockList.includes(defaultAttribute)) {\n          this._textAttributeInstance.clearTextAttribute();\n          return;\n        }\n        this._textAttributeInstance.updateIcon(this.getTextIconSvg(defaultAttribute));\n      }\n    }\n  }\n  get selectedText() {\n    var _a;\n    return (_a = this.pointList.find((item) => item.id === this.selectedID)) == null ? void 0 : _a.textAttribute;\n  }\n  setStyle(toolStyle) {\n    var _a;\n    super.setStyle(toolStyle);\n    if (this._textAttributeInstance && this.config.attributeConfigurable === false) {\n      (_a = this._textAttributeInstance) == null ? void 0 : _a.updateIcon(this.getTextIconSvg());\n    }\n  }\n  setSelectedID(newID, isAppend = false) {\n    this.selection.setSelectedIDs(newID, isAppend);\n    this.render();\n    this.emit(\"selectedChange\");\n  }\n  getTextIconSvg(attribute = \"\") {\n    return AttributeUtils.getTextIconSvg(attribute, this.config.attributeList, this.config.attributeConfigurable, this.baseIcon);\n  }\n  clearActiveStatus() {\n    this.hoverID = void 0;\n    this.dragStatus = EDragStatus.Wait;\n    this.setSelectedID(void 0);\n  }\n  setBasicResult(basicResult) {\n    super.setBasicResult(basicResult);\n    this.setNextMarker();\n    this.clearActiveStatus();\n  }\n  onDragMoveAll(offset) {\n    var _a, _b;\n    if (!((_b = (_a = this.dragInfo) == null ? void 0 : _a.originPointList) == null ? void 0 : _b.length)) {\n      return;\n    }\n    this.setPointList(this.dragInfo.originPointList.map((point) => {\n      const newRect = __spreadProps(__spreadValues({}, point), {\n        x: point.x + offset.x / this.zoom,\n        y: point.y + offset.y / this.zoom\n      });\n      return newRect;\n    }));\n    this.render();\n  }\n  onMouseDown(e) {\n    if (super.onMouseDown(e) || this.forbidMouseOperation) {\n      return;\n    }\n    if (e.button === 0 && !this.hoverID) {\n      this.recoverOperationMode();\n      this.createPoint(e);\n      this.render();\n      return;\n    }\n    if (this.hoverID && this.selection.isIdSelected(this.hoverID) && e.button === 0) {\n      this.dragStatus = EDragStatus.Start;\n      this.dragInfo = {\n        dragStartCoord: this.getCoordinateUnderZoom(e),\n        originPointList: _.cloneDeep(this.selectedPoints)\n      };\n      return;\n    }\n    this.render();\n    return true;\n  }\n  onMouseMove(e) {\n    if (super.onMouseMove(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return;\n    }\n    this.hoverID = this.getHoverId();\n    if (this.dragStatus === EDragStatus.Start || this.dragStatus === EDragStatus.Move) {\n      this.onDragMove(e);\n    }\n    if (this.hoverID) {\n      this.render();\n    }\n    return void 0;\n  }\n  onMouseUp(e) {\n    var _a;\n    if (super.onMouseUp(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return true;\n    }\n    if (e.button === 2) {\n      this.rightMouseUp(e);\n    }\n    if (this.dragStatus === EDragStatus.Move) {\n      this.history.pushHistory(this.pointList);\n      this.emit(\"updatePointByDrag\", this.pointList.find((v) => (v == null ? void 0 : v.id) === this.selectedID), (_a = this.dragInfo) == null ? void 0 : _a.originPointList);\n      this.dragInfo = void 0;\n    }\n    this.dragStatus = EDragStatus.Wait;\n    this.render();\n  }\n  onDragMove(e) {\n    var _a, _b;\n    if (!this.imgInfo)\n      return;\n    this.dragStatus = EDragStatus.Move;\n    const coordinateZoom = this.getCoordinateUnderZoom(e);\n    if (this.selectedIDs.length > 1 && this.dragInfo) {\n      const offset = {\n        x: coordinateZoom.x - this.dragInfo.dragStartCoord.x,\n        y: coordinateZoom.y - this.dragInfo.dragStartCoord.y\n      };\n      this.onDragMoveAll(offset);\n      return;\n    }\n    const zoomCoordinate = AxisUtils.changeDrawOutsideTarget(coordinateZoom, {x: 0, y: 0}, this.imgInfo, this.drawOutsideTarget, this.basicResult, this.zoom);\n    const coordinate = this.drawOutsideTarget ? AxisUtils.getOriginCoordinateWithOffsetCoordinate(this.coord, this.zoom, this.currentPos) : AxisUtils.changePointByZoom(zoomCoordinate, 1 / this.zoom);\n    if (this.drawOutsideTarget === false) {\n      if (this.dependToolName === EToolName.Polygon && ((_b = (_a = this.basicResult) == null ? void 0 : _a.pointList) == null ? void 0 : _b.length) > 0 && !PolygonUtils.isInPolygon(coordinate, this.basicResult.pointList)) {\n        return;\n      }\n    }\n    this.pointList.forEach((point) => {\n      if (point.id === this.selectedID) {\n        point.x = coordinate.x;\n        point.y = coordinate.y;\n      }\n    });\n    this.render();\n  }\n  onKeyUp(e) {\n    super.onKeyUp(e);\n    this.selection.triggerKeyboardEvent(e, this.setPointList.bind(this));\n  }\n  onKeyDown(e) {\n    if (!CommonToolUtils.hotkeyFilter(e)) {\n      return;\n    }\n    if (super.onKeyDown(e) === false) {\n      return;\n    }\n    const {keyCode} = e;\n    switch (keyCode) {\n      case EKeyCode.Delete:\n        this.deletePoint();\n        break;\n      case EKeyCode.Tab: {\n        this.onTabKeyDown(e);\n        break;\n      }\n      case EKeyCode.Z:\n        this.setIsHidden(!this.isHidden);\n        this.render();\n        break;\n      case EKeyCode.A:\n        this.selection.selectAll();\n        break;\n      default: {\n        if (this.config.attributeConfigurable) {\n          const keyCode2Attribute = AttributeUtils.getAttributeByKeycode(keyCode, this.config.attributeList);\n          if (keyCode2Attribute !== void 0) {\n            this.setDefaultAttribute(keyCode2Attribute);\n          }\n        }\n        break;\n      }\n    }\n  }\n  createPoint(e) {\n    var _a, _b, _c, _d;\n    if (!this.imgInfo)\n      return;\n    if (this.forbidAddNew)\n      return;\n    const {upperLimit} = this.config;\n    if (upperLimit && this.currentPageResult.length >= upperLimit) {\n      this.emit(\"messageInfo\", `${Locale.getMessagesByLocale(EMessage.LowerLimitPoint, this.lang)}`);\n      return;\n    }\n    const basicSourceID = CommonToolUtils.getSourceID(this.basicResult);\n    const coordinateZoom = this.getCoordinateUnderZoom(e);\n    let coordinate = AxisUtils.getOriginCoordinateWithOffsetCoordinate(this.coord, this.zoom, this.currentPos);\n    if (this.config.edgeAdsorption && this.referenceData) {\n      const isAllowEdgeAdsoption = [EToolName.Polygon, EToolName.Line].includes((_a = this.referenceData) == null ? void 0 : _a.toolName);\n      if (isAllowEdgeAdsoption) {\n        const isClose = ((_b = this.referenceData) == null ? void 0 : _b.toolName) === EToolName.Polygon;\n        const {dropFoot, hasClosed} = PolygonUtils.getClosestPoint(coordinate, this.referenceData.result, (_d = (_c = this.referenceData.config) == null ? void 0 : _c.lineType) != null ? _d : ELineTypes.Line, edgeAdsorptionScope / this.zoom, {isClose});\n        if (dropFoot) {\n          coordinate = dropFoot;\n        }\n        if (hasClosed) {\n          this.emit(\"messageSuccess\", `${Locale.getMessagesByLocale(EMessage.SuccessfulEdgeAdsorption, this.lang)}`);\n        }\n      }\n    }\n    if (this.drawOutsideTarget === false) {\n      if (this.dependToolName && this.basicCanvas) {\n        let isOutSide = false;\n        switch (this.dependToolName) {\n          case EToolName.Rect: {\n            isOutSide = !RectUtils.isInRect(coordinate, this.basicResult);\n            break;\n          }\n          case EToolName.Polygon: {\n            isOutSide = !PolygonUtils.isInPolygon(coordinate, this.basicResult.pointList);\n            break;\n          }\n        }\n        if (isOutSide) {\n          return;\n        }\n      }\n      if (coordinateZoom.x < 0 || coordinateZoom.y < 0 || coordinateZoom.x > this.imgInfo.width || coordinateZoom.y > this.imgInfo.height) {\n        return;\n      }\n    }\n    if (this.isMinDistance(coordinate)) {\n      return;\n    }\n    let newDrawingPoint = __spreadProps(__spreadValues({}, coordinate), {\n      attribute: this.defaultAttribute,\n      valid: !e.ctrlKey,\n      id: uuid(8, 62),\n      sourceID: basicSourceID,\n      textAttribute: \"\",\n      order: CommonToolUtils.getMaxOrder(this.pointList.filter((v) => CommonToolUtils.isSameSourceID(v.sourceID, basicSourceID))) + 1\n    });\n    if (this.config.textConfigurable) {\n      let textAttribute = \"\";\n      textAttribute = AttributeUtils.getTextAttribute(this.pointList.filter((point) => CommonToolUtils.isSameSourceID(point.sourceID, basicSourceID)), this.config.textCheckType);\n      newDrawingPoint = __spreadProps(__spreadValues({}, newDrawingPoint), {\n        textAttribute\n      });\n    }\n    if (this.hasMarkerConfig) {\n      const nextMarkInfo = CommonToolUtils.getNextMarker(this.currentPageResult, this.config.markerList, this.markerIndex);\n      if (nextMarkInfo) {\n        newDrawingPoint = __spreadProps(__spreadValues({}, newDrawingPoint), {\n          label: nextMarkInfo.label\n        });\n        this.markerIndex = nextMarkInfo.index;\n        this.emit(\"markIndexChange\");\n      } else {\n        this.emit(\"messageInfo\", Locale.getMessagesByLocale(EMessage.MarkerFinish, this.lang));\n        return;\n      }\n    }\n    this.hoverID = newDrawingPoint.id;\n    const newPointList = [...this.pointList, newDrawingPoint];\n    this.setPointList(newPointList);\n    this.emit(\"pointCreated\", newDrawingPoint, this.zoom);\n    this.history.pushHistory(newPointList);\n    this.setSelectedID(newDrawingPoint.id);\n  }\n  isInPoint(pos, point, zoom = this.zoom) {\n    return (this.style.width + 2) / zoom >= Math.sqrt(__pow(pos.x - point.x, 2) + __pow(pos.y - point.y, 2));\n  }\n  getHoverId() {\n    var _a;\n    const pos = AxisUtils.getOriginCoordinateWithOffsetCoordinate(this.coord, this.zoom, this.currentPos);\n    const selectPoint = (_a = this.pointList) == null ? void 0 : _a.find((print) => this.isInPoint(pos, print));\n    return selectPoint == null ? void 0 : selectPoint.id;\n  }\n  get selectedPoint() {\n    return this.pointList.find((v) => v.id === this.selectedID);\n  }\n  rightMouseUp(e) {\n    this.recoverOperationMode();\n    if (this.selectedID === this.hoverID) {\n      if (this.forbidDelete)\n        return;\n      const pointList = this.pointList.filter((point) => point.id !== this.selectedID);\n      this.setPointList(pointList);\n      this.history.pushHistory(pointList);\n      this.emit(\"pointDeleted\", this.selectedID);\n      this.setSelectedID(\"\");\n      this.hoverID = \"\";\n      return;\n    }\n    const hoverPoint = this.pointList.find((point) => point.id === this.hoverID);\n    this.setSelectedID(this.hoverID, e.ctrlKey);\n    this.emit(\"pointSelected\", this.hoverID);\n    if (hoverPoint) {\n      this.setDefaultAttribute(hoverPoint == null ? void 0 : hoverPoint.attribute);\n    }\n    if ((hoverPoint == null ? void 0 : hoverPoint.label) && this.hasMarkerConfig) {\n      const markerIndex = CommonToolUtils.getCurrentMarkerIndex(hoverPoint.label, this.config.markerList);\n      if (markerIndex >= 0) {\n        this.setMarkerIndex(markerIndex);\n        this.emit(\"markIndexChange\");\n      }\n    }\n  }\n  onTabKeyDown(e) {\n    e.preventDefault();\n    if (this.dragStatus === EDragStatus.Move || this.dragStatus === EDragStatus.Start) {\n      return;\n    }\n    let sort = ESortDirection.ascend;\n    if (e.shiftKey) {\n      sort = ESortDirection.descend;\n    }\n    const [showingResult, selectedResult] = CommonToolUtils.getRenderResultList(this.pointList, CommonToolUtils.getSourceID(this.basicResult), this.attributeLockList, this.selectedIDs);\n    let pointList = [...showingResult];\n    if (selectedResult) {\n      pointList = [...pointList, ...selectedResult];\n    }\n    const nextSelectedRect = CommonToolUtils.getNextSelectedRectID(pointList, sort, this.selectedID);\n    if (nextSelectedRect) {\n      this.setSelectedID(nextSelectedRect.id);\n    }\n  }\n  get currentPageResult() {\n    const [showingPolygon] = CommonToolUtils.getRenderResultList(this.pointList, CommonToolUtils.getSourceID(this.basicResult), []);\n    return showingPolygon;\n  }\n  getCurrentPageResult(pointList) {\n    const [showingRect] = CommonToolUtils.getRenderResultList(pointList, CommonToolUtils.getSourceID(this.basicResult), []);\n    return showingRect;\n  }\n  exportData() {\n    const {pointList} = this;\n    return [pointList, this.basicImgInfo];\n  }\n  deletePoint() {\n    var _a;\n    if (this.selectedIDs.length > 0) {\n      this.setPointList(this.pointList.filter((point) => this.selection.isIdSelected(point.id)));\n      this.history.pushHistory(this.pointList);\n      (_a = this._textAttributeInstance) == null ? void 0 : _a.clearTextAttribute();\n      this.emit(\"selectedChange\");\n      this.emit(\"pointDeleted\", this.selectedID);\n      this.render();\n    }\n  }\n  undoAndRedo(name) {\n    var _a, _b;\n    if (this.dragStatus === EDragStatus.Move || this.dragStatus === EDragStatus.Start) {\n      return;\n    }\n    const rectList = (_b = (_a = this.history)[name]) == null ? void 0 : _b.call(_a);\n    if (!(rectList == null ? void 0 : rectList.some((point) => point.id === this.selectedID))) {\n      this.setSelectedID(\"\");\n    }\n    if (rectList) {\n      this.setPointList(rectList, true);\n      this.render();\n    }\n  }\n  undo() {\n    this.undoAndRedo(\"undo\");\n  }\n  redo() {\n    this.undoAndRedo(\"redo\");\n  }\n  getCurrentSelectedData() {\n    var _a;\n    if (!this.selectedID)\n      return;\n    const point = (_a = this.pointList) == null ? void 0 : _a.find((item) => item.id === this.selectedID);\n    const toolColor = this.getColor(point == null ? void 0 : point.attribute);\n    const color = (point == null ? void 0 : point.valid) ? toolColor == null ? void 0 : toolColor.valid.stroke : toolColor == null ? void 0 : toolColor.invalid.stroke;\n    this.dragStatus = EDragStatus.Wait;\n    return {\n      width: TEXTAREA_WIDTH * this.zoom * 0.6,\n      textAttribute: (point == null ? void 0 : point.textAttribute) || \"\",\n      color\n    };\n  }\n  updateSelectedTextAttribute(newTextAttribute) {\n    if (this._textAttributeInstance && newTextAttribute && this.selectedID) {\n      let textAttribute = newTextAttribute;\n      if (AttributeUtils.textAttributeValidate(this.config.textCheckType, \"\", textAttribute) === false) {\n        this.emit(\"messageError\", AttributeUtils.getErrorNotice(this.config.textCheckType, this.lang));\n        textAttribute = \"\";\n      }\n      this.setPointList(AttributeUtils.textChange(textAttribute, this.selectedID, this.pointList));\n      this.emit(\"updateTextAttribute\");\n      this.render();\n    }\n  }\n  renderTextAttribute() {\n    var _a, _b;\n    const point = (_a = this.pointList) == null ? void 0 : _a.find((item) => item.id === this.selectedID);\n    if (!this.ctx || this.config.textConfigurable !== true || !point) {\n      return;\n    }\n    const {x, y, attribute, valid} = point;\n    const newWidth = TEXTAREA_WIDTH * this.zoom * 0.6;\n    const coordinate = AxisUtils.getOffsetCoordinate({x, y}, this.currentPos, this.zoom);\n    const toolColor = this.getColor(attribute);\n    const color = valid ? toolColor == null ? void 0 : toolColor.valid.stroke : toolColor == null ? void 0 : toolColor.invalid.stroke;\n    const distance = 4;\n    if (!this._textAttributeInstance) {\n      this._textAttributeInstance = new TextAttributeClass({\n        width: newWidth,\n        container: this.container,\n        icon: this.getTextIconSvg(attribute),\n        color,\n        getCurrentSelectedData: this.getCurrentSelectedData,\n        updateSelectedTextAttribute: this.updateSelectedTextAttribute\n      });\n    }\n    if (this._textAttributeInstance && !((_b = this._textAttributeInstance) == null ? void 0 : _b.isExit)) {\n      this._textAttributeInstance.appendToContainer();\n    }\n    this._textAttributeInstance.update(`${point.textAttribute}`, {\n      left: coordinate.x,\n      top: coordinate.y + distance,\n      color,\n      width: newWidth\n    });\n  }\n  renderPoint(point, isSelected = false) {\n    var _a, _b, _c;\n    const {textAttribute = \"\", attribute} = point;\n    const selected = isSelected || point.id === this.selectedID;\n    const toolColor = this.getColor(attribute);\n    const transformPoint = AxisUtils.changePointByZoom(point, this.zoom, this.currentPos);\n    const {width = 2, hiddenText = false} = this.style;\n    const toolData = StyleUtils.getStrokeAndFill(toolColor, point.valid, {\n      isSelected: selected || point.id === this.hoverID\n    });\n    DrawUtils.drawCircle(this.canvas, transformPoint, width, {\n      startAngleDeg: 0,\n      endAngleDeg: 360,\n      thickness: 1,\n      color: toolData.stroke,\n      fill: toolData.fill\n    });\n    let showText = \"\";\n    const isShowOrder = ((_a = this.config) == null ? void 0 : _a.isShowOrder) || ((_b = this.config) == null ? void 0 : _b.showOrder);\n    if (isShowOrder && point.order && (point == null ? void 0 : point.order) > 0) {\n      showText = `${point.order}`;\n    }\n    if (point.label && this.hasMarkerConfig) {\n      const order = CommonToolUtils.getCurrentMarkerIndex(point.label, this.config.markerList) + 1;\n      showText = `${order}_${MarkerUtils.getMarkerShowText(point.label, this.config.markerList)}`;\n    }\n    if (point.attribute && !this.config.hideAttribute) {\n      showText = `${showText}  ${AttributeUtils.getAttributeShowText(point.attribute, (_c = this.config) == null ? void 0 : _c.attributeList)}`;\n    }\n    if (!hiddenText) {\n      DrawUtils.drawText(this.canvas, {x: transformPoint.x + width / 2, y: transformPoint.y - width - 4}, showText, {\n        textAlign: \"center\",\n        color: toolData.stroke\n      });\n    }\n    if (selected) {\n      this.renderTextAttribute();\n    } else if (!hiddenText) {\n      DrawUtils.drawText(this.canvas, {x: transformPoint.x + width, y: transformPoint.y + width + 24}, textAttribute, __spreadValues({\n        color: toolData.stroke\n      }, DEFAULT_TEXT_OFFSET));\n    }\n  }\n  renderMultiSelectedPoint() {\n    this.selectedPoints.forEach((point) => {\n      this.renderPoint(point, true);\n    });\n  }\n  renderPointList() {\n    const [showingPointList, selectedPoints] = CommonToolUtils.getRenderResultList(this.pointList, CommonToolUtils.getSourceID(this.basicResult), this.attributeLockList, this.selectedIDs);\n    if (!this.isHidden) {\n      showingPointList.forEach((point) => {\n        this.renderPoint(point);\n      });\n    }\n    if (selectedPoints) {\n      selectedPoints.forEach((point) => {\n        this.renderPoint(point, true);\n      });\n    }\n  }\n  renderAuxiliaryLine() {\n    var _a;\n    if (!this.config.markerConfigurable || !((_a = this.config.markerList) == null ? void 0 : _a.length)) {\n      return;\n    }\n    const [showingPointList, selectedPoint] = CommonToolUtils.getRenderResultList(this.pointList, CommonToolUtils.getSourceID(this.basicResult), this.attributeLockList, this.selectedIDs);\n    const pointList = showingPointList;\n    if (selectedPoint) {\n      pointList.push(...selectedPoint);\n    }\n    if (pointList.length < 2) {\n      return;\n    }\n    const auxiliaryLines = MarkerUtils.getAuxiliaryLineByMarkerList(this.config.markerList, \"value\");\n    const auxiliaryLinesCoord = MarkerUtils.getAuxiliaryLineCoord(auxiliaryLines, pointList);\n    auxiliaryLinesCoord.forEach((item) => {\n      const {start: startCoord, end: endCoord} = item;\n      const pointListCoord = AxisUtils.changePointListByZoom([startCoord, endCoord], this.zoom, this.currentPos);\n      DrawUtils.drawLine(this.canvas, pointListCoord[0], pointListCoord[1], {\n        color: \"#C5C5C5\"\n      });\n    });\n  }\n  renderTop() {\n    var _a, _b, _c;\n    const color = this.getLineColor(this.defaultAttribute);\n    this.renderCursorLine(color);\n    if (this.config.edgeAdsorption && this.referenceData) {\n      let coordinate = AxisUtils.getOriginCoordinateWithOffsetCoordinate(this.coord, this.zoom, this.currentPos);\n      const isClose = ((_a = this.referenceData) == null ? void 0 : _a.toolName) === EToolName.Polygon;\n      const {dropFoot} = PolygonUtils.getClosestPoint(coordinate, this.referenceData.result, (_c = (_b = this.referenceData.config) == null ? void 0 : _b.lineType) != null ? _c : ELineTypes.Line, edgeAdsorptionScope / this.zoom, {\n        isClose\n      });\n      if (dropFoot && coordinate !== dropFoot) {\n        if (coordinate !== dropFoot) {\n          coordinate = dropFoot;\n          DrawUtils.drawCircle(this.canvas, AxisUtils.changePointByZoom(coordinate, this.zoom, this.currentPos), 5, {\n            color: \"white\",\n            fill: \"white\"\n          });\n          DrawUtils.drawCircle(this.canvas, AxisUtils.changePointByZoom(coordinate, this.zoom, this.currentPos), 3, {\n            fill: color,\n            color\n          });\n        }\n      }\n    }\n  }\n  render() {\n    if (!this.ctx)\n      return;\n    super.render();\n    this.renderAuxiliaryLine();\n    this.renderPointList();\n    this.renderTop();\n  }\n}\n\nexport { PointOperation as default };\n","import uuid from '../../utils/uuid.js';\nimport EKeyCode from '../../constant/keyCode.js';\nimport CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\nimport { BasicToolOperation } from './basicToolOperation.js';\n\nclass TextToolOperation extends BasicToolOperation {\n  constructor(props) {\n    super(props);\n    this.getSingleResult = (sourceID) => {\n      const initValue = {};\n      if (this.config.configList.length > 0) {\n        this.config.configList.forEach((i) => {\n          var _a;\n          initValue[i.key] = (_a = i.default) != null ? _a : \"\";\n        });\n      }\n      return {value: initValue, id: uuid(), sourceID: sourceID != null ? sourceID : CommonToolUtils.getSourceID()};\n    };\n    this.getInitResultList = (dataSourceStep, basicResultList) => {\n      if (dataSourceStep > 0) {\n        return basicResultList.map((i) => this.getSingleResult(i.id));\n      }\n      return [this.getSingleResult()];\n    };\n    this.textList = [];\n    this.setShowDefaultCursor(true);\n    this.setConfig(props.config);\n    this.initTextDisplayContainer();\n  }\n  get dataList() {\n    return this.textList;\n  }\n  get textValueContainerID() {\n    return \"textValueContainer\";\n  }\n  get textValueContainer() {\n    return document.getElementById(this.textValueContainerID);\n  }\n  get currentPageResult() {\n    return this.textList;\n  }\n  setResult(textResultList) {\n    var _a;\n    this.textList = textResultList;\n    this.toggleTextContainerVisible(true);\n    const values = (_a = this.textList[0]) == null ? void 0 : _a.value;\n    if (values) {\n      Object.keys(values).forEach((k) => {\n        this.renderText(k, values[k]);\n      });\n    }\n    this.emit(\"valueUpdated\");\n    this.toggleTextContainerVisible(!!values);\n  }\n  updateTextValue(k, v) {\n    this.textList[0].value[k] = v;\n    this.renderText(k, v);\n    this.emit(\"valueUpdated\");\n  }\n  renderText(key, value) {\n    const textDom = document.getElementById(`textKey${key}`);\n    if (textDom) {\n      textDom.innerText = value;\n    }\n  }\n  getTextDomID(key) {\n    return `textKey${key}`;\n  }\n  initTextDisplayContainer() {\n    const dom = document.createElement(\"div\");\n    const domStyle = {\n      position: \"absolute\",\n      right: \"0\",\n      top: \"0\",\n      \"z-index\": \"20\",\n      \"max-width\": \"20%\",\n      \"font-family\": \"SourceHanSansCN-Regular\",\n      background: \"rgb(102, 230, 255)\",\n      color: \"white\",\n      \"word-break\": \"break-all\",\n      \"line-height\": \"24px\",\n      \"white-space\": \"pre-wrap\",\n      \"max-height\": \"80%\",\n      \"overflow-y\": \"auto\",\n      opacity: \"0.6\"\n    };\n    dom.setAttribute(\"style\", Object.keys(domStyle).reduce((pre, key) => {\n      pre += `${key}: ${domStyle[key]};`;\n      return pre;\n    }, \"\"));\n    dom.setAttribute(\"id\", this.textValueContainerID);\n    this.config.configList.forEach((i) => {\n      const div = document.createElement(\"div\");\n      const label = document.createElement(\"div\");\n      const value = document.createElement(\"div\");\n      div.setAttribute(\"style\", \"padding: 8px 16px\");\n      label.innerText = `${i.key}:`;\n      value.innerText = \"\";\n      value.setAttribute(\"id\", this.getTextDomID(i.key));\n      div.appendChild(label);\n      div.appendChild(value);\n      dom.appendChild(div);\n    });\n    this.container.appendChild(dom);\n  }\n  exportData() {\n    return [this.textList, this.basicImgInfo];\n  }\n  destroyCanvas() {\n    super.destroyCanvas();\n    if (this.textValueContainer) {\n      this.container.removeChild(this.textValueContainer);\n    }\n  }\n  onKeyDown(e) {\n    super.onKeyDown(e);\n    if (e.keyCode === EKeyCode.Z) {\n      this.toggleTextContainerVisible();\n    }\n  }\n  toggleTextContainerVisible(isVisible) {\n    if (this.textValueContainer) {\n      const display = (isVisible !== void 0 ? !isVisible : this.textValueContainer.style.display === \"block\") ? \"none\" : \"block\";\n      this.textValueContainer.style.display = display;\n    }\n  }\n}\n\nexport { TextToolOperation as default };\n","import _ from 'lodash';\nimport { i18n } from '@labelbee/lb-utils';\nimport MathUtils from '../../utils/MathUtils.js';\nimport RectUtils from '../../utils/tool/RectUtils.js';\nimport { ERotateDirection, EDragStatus, ESortDirection, EDragTarget, TEXT_ATTRIBUTE_OFFSET, DEFAULT_TEXT_OFFSET } from '../../constant/annotation.js';\nimport EKeyCode from '../../constant/keyCode.js';\nimport { EPolygonPattern, edgeAdsorptionScope, ELineTypes, EToolName } from '../../constant/tool.js';\nimport Locale from '../../locales/index.js';\nimport { EMessage } from '../../locales/constants.js';\nimport ActionsHistory from '../../utils/ActionsHistory.js';\nimport AttributeUtils from '../../utils/tool/AttributeUtils.js';\nimport AxisUtils from '../../utils/tool/AxisUtils.js';\nimport CanvasUtils from '../../utils/tool/CanvasUtils.js';\nimport CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\nimport DrawUtils from '../../utils/tool/DrawUtils.js';\nimport PolygonUtils from '../../utils/tool/PolygonUtils.js';\nimport StyleUtils from '../../utils/tool/StyleUtils.js';\nimport uuid from '../../utils/uuid.js';\nimport { BasicToolOperation } from './basicToolOperation.js';\nimport TextAttributeClass from './textAttributeClass.js';\nimport Selection from './Selection.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst TEXT_MAX_WIDTH = 164;\nclass PolygonOperation extends BasicToolOperation {\n  constructor(props) {\n    super(props);\n    this.isAllowDouble = (e) => {\n      const {selectedID} = this;\n      const currentSelectedID = this.getHoverID(e);\n      if (selectedID && selectedID === currentSelectedID) {\n        return true;\n      }\n      return false;\n    };\n    this.textChange = (v) => {\n      if (this.config.textConfigurable === false || !this.selectedID) {\n        return;\n      }\n      this.setPolygonList(AttributeUtils.textChange(v, this.selectedID, this.polygonList));\n      this.emit(\"selectedChange\");\n      this.render();\n    };\n    this.emitUpdatePolygonByDrag = () => {\n      if (this.dragInfo) {\n        const {originPolygon} = this.dragInfo;\n        this.emit(\"updatePolygonByDrag\", [{newPolygon: this.selectedPolygon, originPolygon}]);\n      }\n    };\n    this.config = CommonToolUtils.jsonParser(props.config);\n    this.drawingPointList = [];\n    this.polygonList = [];\n    this.hoverPointIndex = -1;\n    this.hoverEdgeIndex = -1;\n    this.drawingHistory = new ActionsHistory();\n    this.isCtrl = false;\n    this.isAlt = false;\n    this.isCombined = false;\n    this.pattern = EPolygonPattern.Normal;\n    this.getCurrentSelectedData = this.getCurrentSelectedData.bind(this);\n    this.updateSelectedTextAttribute = this.updateSelectedTextAttribute.bind(this);\n    this.selection = new Selection(this);\n  }\n  get selectedIDs() {\n    return this.selection.selectedIDs;\n  }\n  get selectedID() {\n    return this.selection.selectedID;\n  }\n  get minArea() {\n    return this.config.minArea || 0;\n  }\n  eventBinding() {\n    super.eventBinding();\n    this.container.removeEventListener(\"mouseup\", this.onMouseUp);\n    this.container.addEventListener(\"mouseup\", this.dragMouseUp);\n    this.dblClickListener.addEvent(this.onMouseUp, this.onLeftDblClick, this.onRightDblClick, this.isAllowDouble);\n  }\n  eventUnbinding() {\n    super.eventUnbinding();\n    this.container.removeEventListener(\"mouseup\", this.dragMouseUp);\n  }\n  destroy() {\n    super.destroy();\n    if (this._textAttributeInstance) {\n      this._textAttributeInstance.clearTextAttribute();\n    }\n  }\n  get selectedPolygon() {\n    return PolygonUtils.getPolygonByID(this.visiblePolygonList, this.selectedID);\n  }\n  get selectedPolygons() {\n    return PolygonUtils.getPolygonByIDs(this.polygonList, this.selectedIDs);\n  }\n  get hoverPolygon() {\n    return this.visiblePolygonList.find((v) => v.id === this.hoverID && v.id !== this.selectedID);\n  }\n  get enableDrag() {\n    return Boolean(this.selectedID && this.dragInfo);\n  }\n  get visiblePolygonList() {\n    return this.polygonList;\n  }\n  get polygonListUnderZoom() {\n    return this.visiblePolygonList.map((polygon) => __spreadProps(__spreadValues({}, polygon), {\n      pointList: AxisUtils.changePointListByZoom(polygon.pointList, this.zoom)\n    }));\n  }\n  get selectedText() {\n    var _a;\n    return (_a = this.selectedPolygon) == null ? void 0 : _a.textAttribute;\n  }\n  get dataList() {\n    return this.polygonList;\n  }\n  setPattern(pattern, isForce = false) {\n    var _a;\n    if (((_a = this.drawingPointList) == null ? void 0 : _a.length) > 0 && isForce === true) {\n      return;\n    }\n    this.pattern = pattern;\n  }\n  get currentShowList() {\n    let polygon = [];\n    const [showingPolygon, selectedPolygons] = CommonToolUtils.getRenderResultList(this.polygonList, CommonToolUtils.getSourceID(this.basicResult), this.attributeLockList, this.selectedIDs);\n    polygon = showingPolygon;\n    if (this.isHidden) {\n      polygon = [];\n    }\n    if (selectedPolygons) {\n      polygon.push(...selectedPolygons);\n    }\n    return polygon;\n  }\n  get currentPageResult() {\n    const [showingPolygon] = CommonToolUtils.getRenderResultList(this.polygonList, CommonToolUtils.getSourceID(this.basicResult), []);\n    return showingPolygon;\n  }\n  setResultAndSelectedID(polygonList, selectedID) {\n    this.setPolygonList(polygonList);\n    if (selectedID) {\n      this.setSelectedID(selectedID);\n    }\n    this.render();\n  }\n  setResult(polygonList) {\n    this.clearActiveStatus();\n    this.setPolygonList(polygonList);\n    this.render();\n  }\n  setPolygonDataByID(newPolygonData, id) {\n    return this.polygonList.map((polygon) => {\n      if (polygon.id === id) {\n        return __spreadValues(__spreadValues({}, polygon), newPolygonData);\n      }\n      return polygon;\n    });\n  }\n  rotatePolygon(angle = 1, direction = ERotateDirection.Clockwise, selectedID = this.selectedID) {\n    if (!selectedID) {\n      return;\n    }\n    const selectedPolygon = PolygonUtils.getPolygonByID(this.polygonList, selectedID);\n    if (!selectedPolygon) {\n      return;\n    }\n    const rotatePointList = PolygonUtils.updatePolygonByRotate(direction, angle, selectedPolygon == null ? void 0 : selectedPolygon.pointList);\n    this.setPolygonList(this.setPolygonDataByID({pointList: rotatePointList}, selectedID));\n    this.render();\n  }\n  addPointInDrawing(e) {\n    if (!this.imgInfo) {\n      return;\n    }\n    if (this.forbidAddNewPolygonFuc && this.forbidAddNewPolygonFuc(e)) {\n      return;\n    }\n    const {upperLimitPointNum, edgeAdsorption} = this.config;\n    if (upperLimitPointNum && this.drawingPointList.length >= upperLimitPointNum) {\n      this.emit(\"messageInfo\", `${Locale.getMessagesByLocale(EMessage.UpperLimitErrorNotice, this.lang)}${upperLimitPointNum}`);\n      return;\n    }\n    this.deleteSelectedID();\n    const coordinateZoom = this.getCoordinateUnderZoom(e);\n    const coordinate = AxisUtils.changeDrawOutsideTarget(coordinateZoom, {x: 0, y: 0}, this.imgInfo, this.config.drawOutsideTarget, this.basicResult, this.zoom);\n    const calculateHoverPointIndex = AxisUtils.returnClosePointIndex(coordinate, AxisUtils.changePointListByZoom(this.drawingPointList, this.zoom));\n    if (calculateHoverPointIndex === 0) {\n      this.addDrawingPointToPolygonList();\n      return;\n    }\n    const {dropFoot} = PolygonUtils.getClosestPoint(coordinate, this.polygonListUnderZoom, this.config.lineType, edgeAdsorptionScope);\n    const coordinateWithOrigin = AxisUtils.changePointByZoom(dropFoot && e.altKey === false && edgeAdsorption ? dropFoot : coordinate, 1 / this.zoom);\n    if (this.pattern === EPolygonPattern.Rect && this.drawingPointList.length === 2) {\n      const rect = MathUtils.getRectangleByRightAngle(coordinateWithOrigin, this.drawingPointList);\n      this.drawingPointList = rect;\n      if (this.config.drawOutsideTarget === false && this.imgInfo) {\n        const isOutSide = this.isPolygonOutSide(this.drawingPointList);\n        if (isOutSide) {\n          this.emit(\"messageInfo\", `${Locale.getMessagesByLocale(EMessage.ForbiddenCreationOutsideBoundary, this.lang)}`);\n          this.drawingPointList = [];\n          return;\n        }\n      }\n      this.addDrawingPointToPolygonList(true);\n      return;\n    }\n    this.drawingPointList.push(coordinateWithOrigin);\n    if (this.drawingPointList.length === 1) {\n      this.drawingHistory.initRecord(this.drawingPointList);\n    } else {\n      this.drawingHistory.pushHistory(this.drawingPointList);\n    }\n  }\n  clearResult() {\n    this.setPolygonList([]);\n    this.deleteSelectedID();\n    this.render();\n  }\n  clearPolygonDrag() {\n    this.drawingPointList = [];\n    this.dragInfo = void 0;\n    this.dragStatus = EDragStatus.Wait;\n    this.hoverEdgeIndex = -1;\n    this.hoverPointIndex = -1;\n    this.hoverID = \"\";\n  }\n  clearActiveStatus() {\n    this.clearPolygonDrag();\n    this.deleteSelectedID();\n  }\n  clearDrawingStatus() {\n    this.drawingPointList = [];\n  }\n  setPolygonList(polygonList) {\n    const oldLen = this.polygonList.length;\n    this.polygonList = polygonList;\n    if (oldLen !== polygonList.length) {\n      this.emit(\"updatePageNumber\");\n    }\n  }\n  setSelectedID(newID, isAppend = false) {\n    this.selection.setSelectedIDs(newID, isAppend);\n    this.render();\n    this.emit(\"selectedChange\");\n  }\n  setDefaultAttribute(defaultAttribute = \"\") {\n    const oldDefault = this.defaultAttribute;\n    this.defaultAttribute = defaultAttribute;\n    if (oldDefault !== defaultAttribute) {\n      this.changeStyle(defaultAttribute);\n      this.emit(\"changeAttributeSidebar\");\n      if (this.selectedPolygons.length > 0) {\n        this.selectedPolygons.forEach((polygon) => {\n          polygon.attribute = defaultAttribute;\n        });\n        this.history.pushHistory(this.polygonList);\n        this.render();\n      }\n      if (this._textAttributeInstance) {\n        if (this.attributeLockList.length > 0 && !this.attributeLockList.includes(defaultAttribute)) {\n          this._textAttributeInstance.clearTextAttribute();\n          return;\n        }\n        this._textAttributeInstance.updateIcon(this.getTextIconSvg(defaultAttribute));\n      }\n    }\n  }\n  setStyle(toolStyle) {\n    var _a;\n    super.setStyle(toolStyle);\n    if (this._textAttributeInstance && this.config.attributeConfigurable === false) {\n      (_a = this._textAttributeInstance) == null ? void 0 : _a.updateIcon(this.getTextIconSvg());\n    }\n  }\n  setPolygonValidAndRender(id, valid) {\n    if (!id) {\n      return;\n    }\n    const newPolygonList = this.polygonList.map((polygon) => {\n      var _a;\n      if (polygon.id === id) {\n        const currentValid = (_a = polygon == null ? void 0 : polygon.valid) != null ? _a : true;\n        return __spreadProps(__spreadValues({}, polygon), {\n          valid: valid != null ? valid : !currentValid\n        });\n      }\n      return polygon;\n    });\n    this.setPolygonList(newPolygonList);\n    this.history.pushHistory(this.polygonList);\n    this.render();\n    this.emit(\"updateResult\");\n  }\n  addDrawingPointToPolygonList(isRect) {\n    let {lowerLimitPointNum = 3} = this.config;\n    if (lowerLimitPointNum < 3) {\n      lowerLimitPointNum = 3;\n    }\n    let createPolygon;\n    if (this.drawingPointList.length < lowerLimitPointNum) {\n      this.drawingPointList = [];\n      this.editPolygonID = \"\";\n      return;\n    }\n    if (PolygonUtils.calcPolygonSize(this.drawingPointList || []) < this.minArea) {\n      this.emit(\"messageInfo\", `${Locale.getMessagesByLocale(EMessage.MinAreaLimitErrorNotice, this.lang)}${this.minArea}`);\n      return;\n    }\n    const basicSourceID = CommonToolUtils.getSourceID(this.basicResult);\n    const polygonList = [...this.polygonList];\n    if (this.editPolygonID) {\n      const samePolygon = polygonList.find((polygon) => polygon.id === this.editPolygonID);\n      if (!samePolygon) {\n        return;\n      }\n      samePolygon.pointList = this.drawingPointList;\n      this.editPolygonID = \"\";\n    } else {\n      const id = uuid(8, 62);\n      let newPolygon = {\n        id,\n        sourceID: basicSourceID,\n        valid: !this.isCtrl,\n        textAttribute: \"\",\n        pointList: this.drawingPointList,\n        attribute: this.defaultAttribute,\n        order: CommonToolUtils.getMaxOrder(polygonList.filter((v) => CommonToolUtils.isSameSourceID(v.sourceID, basicSourceID))) + 1\n      };\n      if (this.config.textConfigurable) {\n        let textAttribute = \"\";\n        textAttribute = AttributeUtils.getTextAttribute(this.polygonList.filter((polygon) => CommonToolUtils.isSameSourceID(polygon.sourceID, basicSourceID)), this.config.textCheckType);\n        newPolygon = __spreadProps(__spreadValues({}, newPolygon), {\n          textAttribute\n        });\n      }\n      if (this.pattern === EPolygonPattern.Rect && isRect === true) {\n        newPolygon = __spreadProps(__spreadValues({}, newPolygon), {\n          isRect: true\n        });\n      }\n      polygonList.push(newPolygon);\n      createPolygon = newPolygon;\n      this.setSelectedIdAfterAddingDrawing(id);\n    }\n    this.setPolygonList(polygonList);\n    this.isCtrl = false;\n    this.drawingPointList = [];\n    this.history.pushHistory(polygonList);\n    if (createPolygon) {\n      this.emit(\"polygonCreated\", createPolygon, this.zoom, this.currentPos);\n    }\n  }\n  setSelectedIdAfterAddingDrawing(newID) {\n    if (this.drawingPointList.length === 0) {\n      return;\n    }\n    if (this.config.textConfigurable) {\n      this.setSelectedID(newID);\n    } else {\n      this.deleteSelectedID();\n    }\n  }\n  getHoverID(e) {\n    var _a;\n    const coordinate = this.getCoordinateUnderZoom(e);\n    const polygonListWithZoom = this.currentShowList.map((polygon) => __spreadProps(__spreadValues({}, polygon), {\n      pointList: AxisUtils.changePointListByZoom(polygon.pointList, this.zoom)\n    }));\n    return PolygonUtils.getHoverPolygonID(coordinate, polygonListWithZoom, 10, (_a = this.config) == null ? void 0 : _a.lineType);\n  }\n  getHoverEdgeIndex(e) {\n    var _a;\n    if (!this.selectedID) {\n      return -1;\n    }\n    const selectPolygon = this.selectedPolygon;\n    if (!selectPolygon) {\n      return -1;\n    }\n    const currentCoord = this.getCoordinateUnderZoom(e);\n    const editPointListUnderZoom = AxisUtils.changePointListByZoom(selectPolygon.pointList, this.zoom);\n    return PolygonUtils.getHoverEdgeIndex(currentCoord, editPointListUnderZoom, (_a = this.config) == null ? void 0 : _a.lineType);\n  }\n  getHoverPointIndex(e) {\n    if (!this.selectedID) {\n      return -1;\n    }\n    const selectPolygon = this.selectedPolygon;\n    if (!selectPolygon) {\n      return -1;\n    }\n    const currentCoord = this.getCoordinateUnderZoom(e);\n    const editPointListUnderZoom = AxisUtils.changePointListByZoom(selectPolygon.pointList, this.zoom);\n    return AxisUtils.returnClosePointIndex(currentCoord, editPointListUnderZoom);\n  }\n  deletePolygons(id) {\n    var _a;\n    if (!id || id.length === 0) {\n      return;\n    }\n    const deletedPolygon = this.polygonList.filter((p) => this.selection.isIdSelected(p.id));\n    this.emit(\"deletedObject\", {deletedObject: deletedPolygon[0], id: deletedPolygon[0].id});\n    this.setPolygonList(this.polygonList.filter((polygon) => !this.selection.isIdSelected(polygon.id)));\n    this.history.pushHistory(this.polygonList);\n    (_a = this._textAttributeInstance) == null ? void 0 : _a.clearTextAttribute();\n    this.emit(\"selectedChange\");\n    this.render();\n  }\n  deletePolygonPoint(index) {\n    if (!this.selectedID) {\n      return;\n    }\n    const {selectedPolygon} = this;\n    if (!selectedPolygon) {\n      return;\n    }\n    let {lowerLimitPointNum} = this.config;\n    if (lowerLimitPointNum < 3) {\n      lowerLimitPointNum = 3;\n    }\n    if (selectedPolygon.pointList.length <= lowerLimitPointNum) {\n      this.emit(\"messageInfo\", `${Locale.getMessagesByLocale(EMessage.LowerLimitErrorNotice, this.lang)}${lowerLimitPointNum}`);\n      return;\n    }\n    selectedPolygon == null ? void 0 : selectedPolygon.pointList.splice(index, 1);\n    this.history.pushHistory(this.polygonList);\n    this.render();\n  }\n  spaceKeydown() {\n    var _a, _b, _c;\n    if (this.selectedID) {\n      if (((_a = this.selectedPolygon) == null ? void 0 : _a.isRect) === true) {\n        this.emit(\"messageInfo\", `${Locale.getMessagesByLocale(EMessage.UnableToReannotation, this.lang)}`);\n        return;\n      }\n      this.editPolygonID = this.selectedID;\n      this.drawingPointList = (_c = (_b = this.selectedPolygon) == null ? void 0 : _b.pointList) != null ? _c : [];\n      this.drawingHistory.empty();\n      this.drawingHistory.initRecord(this.drawingPointList);\n      this.hoverID = \"\";\n      this.deleteSelectedID();\n      this.render();\n    }\n  }\n  onTabKeyDown(e) {\n    e.preventDefault();\n    let sort = ESortDirection.ascend;\n    if (e.shiftKey) {\n      sort = ESortDirection.descend;\n    }\n    this.switchToNextPolygon(sort);\n  }\n  switchToNextPolygon(sort) {\n    if (this.drawingPointList.length > 0) {\n      return;\n    }\n    const [showingResult, selectedResult] = CommonToolUtils.getRenderResultList(this.polygonList, CommonToolUtils.getSourceID(this.basicResult), this.attributeLockList, this.selectedIDs);\n    let polygonList = [...showingResult];\n    if (selectedResult) {\n      polygonList = [...polygonList, ...selectedResult];\n    }\n    const viewPort = CanvasUtils.getViewPort(this.canvas, this.currentPos, this.zoom);\n    const sortList = polygonList.map((v) => {\n      var _a, _b, _c, _d;\n      return __spreadProps(__spreadValues({}, v), {\n        x: (_b = (_a = v.pointList[0]) == null ? void 0 : _a.x) != null ? _b : 0,\n        y: (_d = (_c = v.pointList[0]) == null ? void 0 : _c.y) != null ? _d : 0\n      });\n    }).filter((polygon) => CanvasUtils.inViewPort({x: polygon.x, y: polygon.y}, viewPort));\n    const nextSelectedResult = CommonToolUtils.getNextSelectedRectID(sortList, sort, this.selectedID);\n    if (nextSelectedResult) {\n      this.setSelectedID(nextSelectedResult.id);\n      const {selectedPolygon} = this;\n      if (selectedPolygon) {\n        this.setDefaultAttribute(selectedPolygon.attribute);\n      }\n    }\n    this.render();\n  }\n  onKeyDown(e) {\n    if (!CommonToolUtils.hotkeyFilter(e)) {\n      return;\n    }\n    if (super.onKeyDown(e) === false) {\n      return;\n    }\n    const {keyCode} = e;\n    switch (keyCode) {\n      case EKeyCode.Space:\n        this.spaceKeydown();\n        break;\n      case EKeyCode.Esc:\n        this.drawingPointList = [];\n        this.editPolygonID = \"\";\n        break;\n      case EKeyCode.F:\n        if (this.selectedID) {\n          this.setPolygonValidAndRender(this.selectedID);\n        }\n        break;\n      case EKeyCode.Z:\n        if (e.altKey) {\n          this.onCombinedExecute();\n          return;\n        }\n        this.setIsHidden(!this.isHidden);\n        this.render();\n        break;\n      case EKeyCode.Delete:\n        this.deletePolygons(this.selectedIDs);\n        this.render();\n        break;\n      case EKeyCode.Ctrl:\n        this.isCtrl = true;\n        break;\n      case EKeyCode.Alt:\n        if (this.isAlt === false) {\n          e.preventDefault();\n          this.isAlt = true;\n          this.render();\n        }\n        break;\n      case EKeyCode.Tab: {\n        this.onTabKeyDown(e);\n        break;\n      }\n      case EKeyCode.X:\n        if (e.altKey) {\n          this.segment();\n        }\n        break;\n      default: {\n        if (this.config.attributeConfigurable) {\n          const keyCode2Attribute = AttributeUtils.getAttributeByKeycode(keyCode, this.config.attributeList);\n          if (keyCode2Attribute !== void 0) {\n            this.setDefaultAttribute(keyCode2Attribute);\n          }\n        }\n        break;\n      }\n    }\n  }\n  onKeyUp(e) {\n    super.onKeyUp(e);\n    if (this.selection.triggerKeyboardEvent(e, this.setPolygonList.bind(this))) {\n      return;\n    }\n    switch (e.keyCode) {\n      case EKeyCode.Ctrl:\n        this.isCtrl = false;\n        break;\n      case EKeyCode.Alt: {\n        const oldAlt = this.isAlt;\n        this.isAlt = false;\n        if (oldAlt === true) {\n          this.render();\n        }\n        break;\n      }\n    }\n  }\n  rightMouseUp(e) {\n    if (this.drawingPointList.length > 0) {\n      this.addDrawingPointToPolygonList();\n      return;\n    }\n    this.setSelectedID(this.hoverID, e.ctrlKey);\n    const {selectedPolygon} = this;\n    if (selectedPolygon) {\n      this.setDefaultAttribute(selectedPolygon.attribute);\n    }\n  }\n  onLeftDblClick(e) {\n    if (this.hoverEdgeIndex > -1) {\n      const currentCoord = this.getCoordinateUnderZoom(e);\n      const {selectedPolygon} = this;\n      if (!selectedPolygon) {\n        return;\n      }\n      if (selectedPolygon.isRect === true) {\n        this.emit(\"messageInfo\", `${Locale.getMessagesByLocale(EMessage.ForbidAddNewPoint, this.lang)}`);\n        this.clearPolygonDrag();\n        return;\n      }\n      const {dropFoot} = PolygonUtils.getClosestPoint(currentCoord, this.polygonListUnderZoom, this.config.lineType, edgeAdsorptionScope);\n      if (!dropFoot) {\n        return;\n      }\n      const {upperLimitPointNum} = this.config;\n      if (upperLimitPointNum && selectedPolygon.pointList.length >= upperLimitPointNum) {\n        this.emit(\"messageInfo\", `${Locale.getMessagesByLocale(EMessage.UpperLimitErrorNotice, this.lang)}${upperLimitPointNum}`);\n        this.clearPolygonDrag();\n        return;\n      }\n      selectedPolygon == null ? void 0 : selectedPolygon.pointList.splice(this.hoverEdgeIndex + 1, 0, AxisUtils.changePointByZoom(dropFoot, 1 / this.zoom));\n      this.setPolygonDataByID(selectedPolygon, this.selectedID);\n      this.history.pushHistory(this.polygonList);\n      this.hoverPointIndex = -1;\n      this.hoverEdgeIndex = -1;\n      this.render();\n    }\n    this.dragInfo = void 0;\n  }\n  onRightDblClick(e) {\n    this.dragInfo = void 0;\n    this.clearImgDrag();\n    const hoverID = this.getHoverID(e);\n    const hoverPointIndex = this.getHoverPointIndex(e);\n    if (this.hoverPointIndex > -1 && this.hoverPointIndex === hoverPointIndex) {\n      this.deletePolygonPoint(hoverPointIndex);\n      this.dragInfo = void 0;\n      this.hoverPointIndex = -1;\n      this.render();\n      return;\n    }\n    if (this.hoverID === this.selectedID) {\n      this.deletePolygons([hoverID]);\n    }\n    this.render();\n  }\n  onMouseDown(e) {\n    if (super.onMouseDown(e) || this.forbidMouseOperation || e.ctrlKey === true) {\n      return;\n    }\n    this.dragMouseDown(e);\n    return true;\n  }\n  onMouseLeave() {\n    if (this.dragInfo) {\n      this.emitUpdatePolygonByDrag();\n      this.clearPolygonDrag();\n      this.history.pushHistory(this.polygonList);\n    }\n  }\n  dragMouseDown(e) {\n    if (e.button !== 0) {\n      return;\n    }\n    const hoverID = this.getHoverID(e);\n    if (!this.selection.isIdSelected(hoverID)) {\n      return;\n    }\n    let changePointIndex = [0];\n    let dragTarget = EDragTarget.Plane;\n    const initPointList = this.selectedPolygons[0].pointList;\n    const dragStartCoord = this.getCoordinateUnderZoom(e);\n    if (this.selectedPolygons.length === 1) {\n      this.dragStatus = EDragStatus.Start;\n      const closePointIndex = this.getHoverPointIndex(e);\n      const closeEdgeIndex = this.getHoverEdgeIndex(e);\n      if (closePointIndex > -1) {\n        dragTarget = EDragTarget.Point;\n        changePointIndex = [closePointIndex];\n      } else if (closeEdgeIndex > -1 && this.hoverEdgeIndex > -1) {\n        dragTarget = EDragTarget.Line;\n        changePointIndex = [closeEdgeIndex, (closeEdgeIndex + 1) % initPointList.length];\n      }\n    }\n    this.dragInfo = {\n      dragStartCoord,\n      dragTarget,\n      initPointList,\n      changePointIndex,\n      originPolygon: this.selectedPolygon,\n      selectedPolygons: this.selectedPolygons,\n      dragPrevCoord: dragStartCoord,\n      originPolygonList: this.polygonList\n    };\n  }\n  segment() {\n    var _a;\n    if (!this.selectedID) {\n      return;\n    }\n    if (((_a = this.config) == null ? void 0 : _a.lineType) !== ELineTypes.Line) {\n      return;\n    }\n    const selectedPointList = PolygonUtils.getPolygonPointList(this.selectedID, this.currentShowList);\n    const backgroundPolygonList = this.currentShowList.filter((v) => v.id !== this.selectedID);\n    if (backgroundPolygonList.length === 0 || selectedPointList.length === 0) {\n      return;\n    }\n    const wrapIndex = PolygonUtils.getWrapPolygonIndex(selectedPointList, backgroundPolygonList);\n    let newPolygonList = [...this.polygonList];\n    if (wrapIndex === -1) {\n      const newPointListArray = PolygonUtils.segmentPolygonByPolygon(selectedPointList, backgroundPolygonList);\n      if (!newPointListArray) {\n        return;\n      }\n      const newPointList = newPointListArray.shift();\n      if (!newPointList) {\n        return;\n      }\n      let defaultAttribute = \"\";\n      let valid = true;\n      const sourceID = CommonToolUtils.getSourceID(this.basicResult);\n      let textAttribute = \"\";\n      newPolygonList = this.polygonList.map((v) => {\n        var _a2, _b;\n        if (v.id === this.selectedID) {\n          defaultAttribute = v.attribute;\n          valid = (_a2 = v == null ? void 0 : v.valid) != null ? _a2 : true;\n          textAttribute = (_b = v == null ? void 0 : v.textAttribute) != null ? _b : \"\";\n          return __spreadProps(__spreadValues({}, v), {\n            pointList: newPointList\n          });\n        }\n        return v;\n      });\n      if (newPointListArray.length > 0) {\n        newPointListArray.forEach((v, i) => {\n          newPolygonList.push({\n            sourceID,\n            id: uuid(8, 62),\n            pointList: v,\n            valid,\n            order: CommonToolUtils.getMaxOrder(this.currentShowList) + 1 + i,\n            attribute: defaultAttribute,\n            textAttribute\n          });\n        });\n      }\n    } else {\n      newPolygonList[wrapIndex].pointList = PolygonUtils.clipPolygonFromWrapPolygon(selectedPointList, newPolygonList[wrapIndex].pointList);\n      newPolygonList = newPolygonList.filter((v) => v.id !== this.selectedID);\n    }\n    this.setPolygonList(newPolygonList);\n    this.history.pushHistory(newPolygonList);\n    this.render();\n  }\n  onCombinedExecute() {\n    if (!this.selectedID) {\n      this.emit(\"messageInfo\", i18n.t(\"PolygonsToBeCombinedNeedToBeSelected\"));\n      return;\n    }\n    this.isCombined = !this.isCombined;\n  }\n  combine(e) {\n    var _a;\n    const hoverID = this.getHoverID(e);\n    if (!hoverID || !this.selectedID || this.selectedID === hoverID) {\n      return;\n    }\n    if (((_a = this.config) == null ? void 0 : _a.lineType) !== ELineTypes.Line) {\n      this.emit(\"messageInfo\", i18n.t(\"CurveModeDoesNotSupportCutting\"));\n      return;\n    }\n    const selectedPolygon = this.polygonList.find((v) => v.id === this.selectedID);\n    const combinedPolygon = this.currentShowList.find((v) => v.id === hoverID);\n    if (!combinedPolygon || !selectedPolygon) {\n      return;\n    }\n    const composeData = PolygonUtils.combinePolygonWithPolygon(selectedPolygon, combinedPolygon);\n    if (!composeData) {\n      return;\n    }\n    const {newPolygon, unionList} = composeData;\n    if (unionList.length === 1 && newPolygon) {\n      const newPolygonList = this.polygonList.filter((v) => !unionList.includes(v.id)).map((v) => {\n        if (v.id === this.selectedID) {\n          return newPolygon;\n        }\n        return v;\n      });\n      this.setPolygonList(newPolygonList);\n      this.history.pushHistory(newPolygonList);\n      this.render();\n      this.emit(\"messageInfo\", i18n.t(\"CombineSuccess\"));\n    } else {\n      this.emit(\"messageInfo\", i18n.t(\"CombiningFailedNotify\"));\n    }\n    this.isCombined = false;\n  }\n  isPolygonOutSide(selectedPointList) {\n    if (this.dependToolName && this.basicCanvas && this.basicResult) {\n      let isOutSide = false;\n      switch (this.dependToolName) {\n        case EToolName.Rect: {\n          isOutSide = selectedPointList.filter((v) => !RectUtils.isInRect(v, this.basicResult)).length > 0;\n          break;\n        }\n        case EToolName.Polygon: {\n          isOutSide = PolygonUtils.isPointListOutSidePolygon(selectedPointList, this.basicResult.pointList, this.config.lineType);\n          break;\n        }\n      }\n      return isOutSide;\n    }\n    if (!this.imgInfo) {\n      return false;\n    }\n    const {left, top, right, bottom} = MathUtils.calcViewportBoundaries(AxisUtils.changePointListByZoom(selectedPointList, this.zoom));\n    const scope = 1e-5;\n    if (left < 0 || top < 0 || right > this.imgInfo.width + scope || bottom > this.imgInfo.height + scope) {\n      return true;\n    }\n    return false;\n  }\n  onDragMove(e) {\n    const newPolygonList = this.polygonList.map((v) => {\n      if (this.selectedIDs.includes(v.id)) {\n        const selectedPointList = this.dragPolygon(e, v);\n        if (!selectedPointList) {\n          return v;\n        }\n        const newData = __spreadProps(__spreadValues({}, v), {\n          pointList: selectedPointList\n        });\n        if (v.isRect === true && this.pattern === EPolygonPattern.Normal) {\n          Object.assign(newData, {isRect: false});\n        }\n        return newData;\n      }\n      return v;\n    });\n    this.dragInfo.dragPrevCoord = this.getCoordinateUnderZoom(e);\n    this.setPolygonList(newPolygonList);\n    this.render();\n  }\n  getDragOffset(e, selectedPolygon) {\n    var _a;\n    const coordinate = this.getCoordinateUnderZoom(e);\n    const {dragTarget, dragPrevCoord, changePointIndex, initPointList, dragStartCoord} = this.dragInfo;\n    if (this.pattern === EPolygonPattern.Rect && (selectedPolygon == null ? void 0 : selectedPolygon.isRect) === true && changePointIndex && [EDragTarget.Line].includes(dragTarget)) {\n      const firstPointIndex = MathUtils.getArrayIndex(changePointIndex[0] - 2, 4);\n      const secondPointIndex = MathUtils.getArrayIndex(changePointIndex[0] - 1, 4);\n      const basicLine = [initPointList[firstPointIndex], initPointList[secondPointIndex]];\n      const perpendicularOffset = MathUtils.getRectPerpendicularOffset(dragStartCoord, coordinate, basicLine);\n      return {\n        x: perpendicularOffset.x / this.zoom,\n        y: perpendicularOffset.y / this.zoom\n      };\n    }\n    if (((_a = this.dragInfo) == null ? void 0 : _a.dragTarget) === EDragTarget.Plane) {\n      return {\n        x: (coordinate.x - dragPrevCoord.x) / this.zoom,\n        y: (coordinate.y - dragPrevCoord.y) / this.zoom\n      };\n    }\n    return {\n      x: (coordinate.x - dragStartCoord.x) / this.zoom,\n      y: (coordinate.y - dragStartCoord.y) / this.zoom\n    };\n  }\n  dragPolygon(e, selectedPolygon) {\n    let selectedPointList = _.cloneDeep(selectedPolygon == null ? void 0 : selectedPolygon.pointList);\n    if (!selectedPointList || !this.dragInfo) {\n      return;\n    }\n    const {initPointList, dragTarget, changePointIndex} = this.dragInfo;\n    const offset = this.getDragOffset(e, selectedPolygon);\n    this.dragStatus = EDragStatus.Move;\n    switch (dragTarget) {\n      case EDragTarget.Plane:\n        selectedPointList = selectedPointList.map((v) => __spreadProps(__spreadValues({}, v), {\n          x: v.x + offset.x,\n          y: v.y + offset.y\n        }));\n        break;\n      case EDragTarget.Point:\n      case EDragTarget.Line:\n        selectedPointList = selectedPointList.map((n, i) => {\n          if (changePointIndex && changePointIndex.includes(i)) {\n            return __spreadProps(__spreadValues({}, n), {\n              x: initPointList[i].x + offset.x,\n              y: initPointList[i].y + offset.y\n            });\n          }\n          return n;\n        });\n        break;\n    }\n    if (this.pattern === EPolygonPattern.Rect && (selectedPolygon == null ? void 0 : selectedPolygon.isRect) === true && dragTarget === EDragTarget.Point && changePointIndex) {\n      const newPointList = MathUtils.getPointListFromPointOffset(initPointList, changePointIndex[0], offset);\n      selectedPointList = newPointList;\n    }\n    if (this.config.drawOutsideTarget === false && this.imgInfo) {\n      const isOutSide = this.isPolygonOutSide(selectedPointList);\n      if (isOutSide) {\n        return;\n      }\n    }\n    return selectedPointList;\n  }\n  onMouseMove(e) {\n    if (super.onMouseMove(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return;\n    }\n    let hoverPointIndex = -1;\n    let hoverEdgeIndex = -1;\n    const {selectedID} = this;\n    if (selectedID) {\n      this.hoverEdgeIndex = -1;\n      this.hoverPointIndex = -1;\n      hoverPointIndex = this.getHoverPointIndex(e);\n      if (hoverPointIndex > -1) {\n        this.hoverPointIndex = hoverPointIndex;\n      } else {\n        hoverEdgeIndex = this.getHoverEdgeIndex(e);\n        this.hoverEdgeIndex = hoverEdgeIndex;\n      }\n    }\n    if (this.drawingPointList.length > 0) {\n      return;\n    }\n    const newHoverID = this.getHoverID(e);\n    if (this.hoverID !== newHoverID) {\n      this.hoverID = newHoverID;\n      this.render();\n    }\n    if (this.selectedIDs.length > 0 && this.dragInfo) {\n      this.onDragMove(e);\n    }\n  }\n  leftMouseUpdateValid(e) {\n    const hoverID = this.getHoverID(e);\n    if (this.drawingPointList.length === 0 && e.ctrlKey === true && hoverID) {\n      this.setPolygonValidAndRender(hoverID);\n      return true;\n    }\n    return false;\n  }\n  leftMouseUp(e) {\n    const isCtrl = this.leftMouseUpdateValid(e);\n    if (isCtrl) {\n      return;\n    }\n    this.addPointInDrawing(e);\n  }\n  onMouseUp(e) {\n    if (this.isCombined) {\n      switch (e.button) {\n        case 0:\n          this.combine(e);\n          break;\n        case 2:\n          this.isCombined = false;\n          break;\n        default:\n          return;\n      }\n      return;\n    }\n    if (super.onMouseUp(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return void 0;\n    }\n    if (this.dragInfo && this.dragStatus === EDragStatus.Move) {\n      this.emit(\"updateResult\");\n      this.emitUpdatePolygonByDrag();\n      this.dragInfo = void 0;\n      this.dragStatus = EDragStatus.Wait;\n      this.history.pushHistory(this.polygonList);\n      return;\n    }\n    switch (e.button) {\n      case 0: {\n        this.leftMouseUp(e);\n        break;\n      }\n      case 2: {\n        this.rightMouseUp(e);\n        break;\n      }\n    }\n    this.render();\n  }\n  dragMouseUp() {\n    if (this.dragStatus === EDragStatus.Start) {\n      this.dragInfo = void 0;\n      this.dragStatus = EDragStatus.Wait;\n    }\n  }\n  exportData() {\n    const {polygonList} = this;\n    return [polygonList, this.basicImgInfo];\n  }\n  getTextIconSvg(attribute = \"\") {\n    return AttributeUtils.getTextIconSvg(attribute, this.config.attributeList, this.config.attributeConfigurable, this.baseIcon);\n  }\n  getCurrentSelectedData() {\n    const {selectedPolygon} = this;\n    if (!selectedPolygon) {\n      return;\n    }\n    const toolColor = this.getColor(selectedPolygon.attribute);\n    const color = selectedPolygon.valid ? toolColor == null ? void 0 : toolColor.valid.stroke : toolColor == null ? void 0 : toolColor.invalid.stroke;\n    return {\n      width: TEXT_MAX_WIDTH,\n      textAttribute: selectedPolygon.textAttribute,\n      color\n    };\n  }\n  updateSelectedTextAttribute(newTextAttribute) {\n    if (this._textAttributeInstance && newTextAttribute && this.selectedID) {\n      let textAttribute = newTextAttribute;\n      if (AttributeUtils.textAttributeValidate(this.config.textCheckType, \"\", textAttribute) === false) {\n        this.emit(\"messageError\", AttributeUtils.getErrorNotice(this.config.textCheckType, this.lang));\n        textAttribute = \"\";\n      }\n      this.setPolygonList(AttributeUtils.textChange(textAttribute, this.selectedID, this.polygonList));\n      this.emit(\"updateTextAttribute\");\n      this.render();\n    }\n  }\n  renderTextAttribute() {\n    var _a;\n    const {selectedPolygon} = this;\n    if (!this.ctx || this.config.textConfigurable === false || !selectedPolygon) {\n      return;\n    }\n    const {pointList, attribute, valid, textAttribute} = selectedPolygon;\n    const {x, y} = pointList[pointList.length - 1];\n    const newWidth = TEXT_MAX_WIDTH;\n    const coordinate = AxisUtils.getOffsetCoordinate({x, y}, this.currentPos, this.zoom);\n    const toolColor = this.getColor(attribute);\n    const color = valid ? toolColor == null ? void 0 : toolColor.valid.stroke : toolColor == null ? void 0 : toolColor.invalid.stroke;\n    if (!this._textAttributeInstance) {\n      this._textAttributeInstance = new TextAttributeClass({\n        width: newWidth,\n        container: this.container,\n        icon: this.getTextIconSvg(attribute),\n        color,\n        getCurrentSelectedData: this.getCurrentSelectedData,\n        updateSelectedTextAttribute: this.updateSelectedTextAttribute\n      });\n    }\n    if (this._textAttributeInstance && !((_a = this._textAttributeInstance) == null ? void 0 : _a.isExit)) {\n      this._textAttributeInstance.appendToContainer();\n    }\n    this._textAttributeInstance.update(`${textAttribute}`, {\n      left: coordinate.x,\n      top: coordinate.y,\n      color,\n      width: newWidth\n    });\n  }\n  renderStaticPolygon() {\n    var _a;\n    if (this.isHidden === false) {\n      (_a = this.visiblePolygonList) == null ? void 0 : _a.forEach((polygon) => {\n        var _a2, _b, _c, _d, _e;\n        if ([this.selectedID, this.editPolygonID].includes(polygon.id)) {\n          return;\n        }\n        const {textAttribute, attribute} = polygon;\n        const toolColor = this.getColor(attribute);\n        const toolData = StyleUtils.getStrokeAndFill(toolColor, polygon.valid);\n        const transformPointList = AxisUtils.changePointListByZoom(polygon.pointList || [], this.zoom, this.currentPos);\n        DrawUtils.drawPolygonWithFillAndLine(this.canvas, transformPointList, {\n          fillColor: toolData.fill,\n          strokeColor: toolData.stroke,\n          pointColor: \"white\",\n          thickness: (_b = (_a2 = this.style) == null ? void 0 : _a2.width) != null ? _b : 2,\n          lineCap: \"round\",\n          isClose: true,\n          lineType: (_c = this.config) == null ? void 0 : _c.lineType\n        });\n        let showText = `${(_d = AttributeUtils.getAttributeShowText(attribute, this.config.attributeList)) != null ? _d : \"\"}`;\n        if (((_e = this.config) == null ? void 0 : _e.isShowOrder) && (polygon == null ? void 0 : polygon.order) > 0) {\n          showText = `${polygon.order} ${showText}`;\n        }\n        DrawUtils.drawText(this.canvas, transformPointList[0], showText, __spreadValues({\n          color: toolData.stroke\n        }, DEFAULT_TEXT_OFFSET));\n        const endPoint = transformPointList[transformPointList.length - 1];\n        DrawUtils.drawText(this.canvas, {x: endPoint.x + TEXT_ATTRIBUTE_OFFSET.x, y: endPoint.y + TEXT_ATTRIBUTE_OFFSET.y}, textAttribute, __spreadValues({\n          color: toolData.stroke\n        }, DEFAULT_TEXT_OFFSET));\n      });\n    }\n  }\n  renderSelectedPolygons() {\n    this.selectedPolygons.forEach((polygon) => {\n      this.renderSelectedPolygon(polygon);\n    });\n  }\n  renderSelectedPolygon(polygon) {\n    var _a, _b, _c;\n    if (polygon) {\n      const toolColor = this.getColor(polygon.attribute);\n      const toolData = StyleUtils.getStrokeAndFill(toolColor, polygon.valid, {isSelected: true});\n      DrawUtils.drawSelectedPolygonWithFillAndLine(this.canvas, AxisUtils.changePointListByZoom(polygon.pointList, this.zoom, this.currentPos), {\n        fillColor: toolData.fill,\n        strokeColor: toolData.stroke,\n        pointColor: \"white\",\n        thickness: 2,\n        lineCap: \"round\",\n        isClose: true,\n        lineType: (_a = this.config) == null ? void 0 : _a.lineType\n      });\n      let showText = `${(_b = AttributeUtils.getAttributeShowText(polygon.attribute, this.config.attributeList)) != null ? _b : \"\"}`;\n      if (((_c = this.config) == null ? void 0 : _c.isShowOrder) && (polygon == null ? void 0 : polygon.order) > 0) {\n        showText = `${polygon.order} ${showText}`;\n      }\n      DrawUtils.drawText(this.canvas, AxisUtils.changePointByZoom(polygon.pointList[0], this.zoom, this.currentPos), showText, __spreadValues({\n        color: toolData.stroke\n      }, DEFAULT_TEXT_OFFSET));\n      this.renderTextAttribute();\n    }\n  }\n  renderHoverPolygon() {\n    var _a;\n    if (this.hoverID && this.hoverID !== this.editPolygonID) {\n      const {hoverPolygon} = this;\n      if (hoverPolygon) {\n        let color = \"\";\n        const toolColor = this.getColor(hoverPolygon.attribute);\n        if (hoverPolygon.valid) {\n          color = toolColor.validHover.fill;\n        } else {\n          color = StyleUtils.getStrokeAndFill(toolColor, false, {isHover: true}).fill;\n        }\n        DrawUtils.drawPolygonWithFill(this.canvas, AxisUtils.changePointListByZoom(hoverPolygon.pointList, this.zoom, this.currentPos), {\n          color,\n          lineType: (_a = this.config) == null ? void 0 : _a.lineType\n        });\n      }\n    }\n  }\n  renderPolygon() {\n    var _a, _b, _c, _d;\n    this.renderStaticPolygon();\n    this.renderHoverPolygon();\n    this.renderSelectedPolygons();\n    const defaultColor = this.getColor(this.defaultAttribute);\n    const toolData = StyleUtils.getStrokeAndFill(defaultColor, !this.isCtrl);\n    if (((_a = this.drawingPointList) == null ? void 0 : _a.length) > 0) {\n      let drawingPointList = [...this.drawingPointList];\n      let coordinate = AxisUtils.getOriginCoordinateWithOffsetCoordinate(this.coord, this.zoom, this.currentPos);\n      if (this.pattern === EPolygonPattern.Rect && drawingPointList.length === 2) {\n        drawingPointList = MathUtils.getRectangleByRightAngle(coordinate, drawingPointList);\n      } else {\n        if (((_b = this.config) == null ? void 0 : _b.edgeAdsorption) && this.isAlt === false) {\n          const {dropFoot} = PolygonUtils.getClosestPoint(coordinate, this.polygonList, (_c = this.config) == null ? void 0 : _c.lineType, edgeAdsorptionScope / this.zoom);\n          if (dropFoot) {\n            coordinate = dropFoot;\n          }\n        }\n        drawingPointList.push(coordinate);\n      }\n      DrawUtils.drawSelectedPolygonWithFillAndLine(this.canvas, AxisUtils.changePointListByZoom(drawingPointList, this.zoom, this.currentPos), {\n        fillColor: toolData.fill,\n        strokeColor: toolData.stroke,\n        pointColor: \"white\",\n        thickness: 2,\n        lineCap: \"round\",\n        isClose: false,\n        lineType: this.config.lineType\n      });\n    }\n    if (this.hoverPointIndex > -1 && this.selectedID) {\n      const selectdPolygon = this.selectedPolygon;\n      if (!selectdPolygon) {\n        return;\n      }\n      const hoverColor = StyleUtils.getStrokeAndFill(defaultColor, selectdPolygon.valid, {isSelected: true});\n      const point = selectdPolygon == null ? void 0 : selectdPolygon.pointList[this.hoverPointIndex];\n      if (point) {\n        const {x, y} = AxisUtils.changePointByZoom(point, this.zoom, this.currentPos);\n        DrawUtils.drawCircleWithFill(this.canvas, {x, y}, 5, {\n          color: hoverColor.fill\n        });\n      }\n    }\n    if (this.hoverEdgeIndex > -1 && this.selectedID) {\n      const selectdPolygon = this.selectedPolygon;\n      if (!selectdPolygon) {\n        return;\n      }\n      const selectedColor = StyleUtils.getStrokeAndFill(defaultColor, selectdPolygon.valid, {isSelected: true});\n      DrawUtils.drawLineWithPointList(this.canvas, AxisUtils.changePointListByZoom(selectdPolygon.pointList, this.zoom, this.currentPos), {\n        color: selectedColor.stroke,\n        thickness: 10,\n        hoverEdgeIndex: this.hoverEdgeIndex,\n        lineType: (_d = this.config) == null ? void 0 : _d.lineType\n      });\n    }\n  }\n  render() {\n    if (!this.ctx) {\n      return;\n    }\n    super.render();\n    this.renderPolygon();\n    this.renderCursorLine(this.getLineColor(this.defaultAttribute));\n  }\n  renderCursorLine(lineColor) {\n    super.renderCursorLine(lineColor);\n    if (this.isCombined) {\n      const {x, y} = this.coord;\n      const padding = 10;\n      const rectWidth = 186;\n      const rectHeight = 32;\n      DrawUtils.drawRectWithFill(this.canvas, {\n        x: x + padding,\n        y: y - padding * 4 - 1,\n        width: rectWidth,\n        height: rectHeight\n      }, {color: \"black\"});\n      DrawUtils.drawText(this.canvas, {x, y}, i18n.t(\"ClickAnotherPolygon\"), {\n        textAlign: \"center\",\n        color: \"white\",\n        offsetX: rectWidth / 2 + padding,\n        offsetY: -(rectHeight / 2 + padding / 2)\n      });\n      DrawUtils.drawRect(this.canvas, {\n        x: x - padding,\n        y: y - padding,\n        width: padding * 2,\n        height: padding * 2\n      }, {lineDash: [6], color: \"white\"});\n    }\n  }\n  undo() {\n    if (this.drawingPointList.length > 0) {\n      const drawingPointList = this.drawingHistory.undo();\n      if (!drawingPointList) {\n        return;\n      }\n      this.drawingPointList = drawingPointList;\n      this.render();\n      return;\n    }\n    const polygonList = this.history.undo();\n    if (polygonList) {\n      if (polygonList.length !== this.polygonList.length) {\n        this.deleteSelectedID();\n      }\n      this.setPolygonList(polygonList);\n      this.render();\n    }\n  }\n  redo() {\n    if (this.drawingPointList.length > 0) {\n      const drawingPointList = this.drawingHistory.redo();\n      if (!drawingPointList) {\n        return;\n      }\n      this.drawingPointList = drawingPointList;\n      this.render();\n      return;\n    }\n    const polygonList = this.history.redo();\n    if (polygonList) {\n      if (polygonList.length !== this.polygonList.length) {\n        this.deleteSelectedID();\n      }\n      this.setPolygonList(polygonList);\n      this.render();\n    }\n  }\n  deleteSelectedID() {\n    this.setSelectedID(\"\");\n  }\n}\n\nexport { PolygonOperation as default };\n","import { RectOperation } from './rectOperation.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst config = {\n  textConfigurable: false,\n  attributeConfigurable: true,\n  attributeList: []\n};\nclass MeasureOperation extends RectOperation {\n  constructor(props) {\n    super(__spreadProps(__spreadValues({}, props), {config: JSON.stringify(config)}));\n  }\n  setSelectedIdAfterAddingDrawingRect() {\n    if (!this.drawingRect) {\n      return;\n    }\n    this.setSelectedRectID(this.drawingRect.id);\n  }\n}\n\nexport { MeasureOperation as default };\n","import DrawUtils from './DrawUtils.js';\nimport StyleUtils from './StyleUtils.js';\n\nclass RenderDomClass {\n  constructor(props) {\n    this._domMap = new Map();\n    this._container = props.container;\n    this._height = props.height;\n  }\n  wheelChange(e) {\n    e.stopPropagation();\n  }\n  clearTag(id) {\n    const parentNode = this._container;\n    const oldDom = window.self.document.getElementById(id);\n    if (oldDom && parentNode && parentNode.contains(oldDom)) {\n      oldDom.removeEventListener(\"wheel\", this.wheelChange);\n      parentNode == null ? void 0 : parentNode.removeChild(oldDom);\n    }\n  }\n  render(annotations) {\n    const oldKeys = Array.from(this._domMap.keys());\n    const newKeys = annotations.map((v) => v.id);\n    annotations.forEach((v) => {\n      const {text, textMaxWidth, color = \"white\", background = \"rgba(0, 0, 0, 0.6)\", style} = v;\n      if (this._domMap.has(v.id)) {\n        const dom = this._domMap.get(v.id);\n        if (dom) {\n          dom.innerHTML = text;\n        }\n      } else {\n        const dom = DrawUtils.drawTagByDom(this._container, text, v.id);\n        if (dom) {\n          dom.setAttribute(\"style\", `\n              position: absolute;\n              top: 0;\n              right: 0;\n              z-index: 20;\n              padding: 8px 20px;\n              font-size: 15px;\n              max-width: ${textMaxWidth}px;\n              color: ${color};\n              text-align: left;\n              line-height: 32px;\n              word-break: break-all;\n              white-space: pre-wrap;\n              background: ${background};\n              opacity: 0.9;\n              max-height: ${this._height * 0.8}px;\n              overflow-y: scroll;\n              clear: both;\n              ${StyleUtils.getStyle2String(style)}\n            `);\n          dom.addEventListener(\"wheel\", this.wheelChange);\n          this._domMap.set(v.id, dom);\n        }\n      }\n    });\n    oldKeys.forEach((key) => {\n      if (newKeys.indexOf(key) === -1) {\n        this.clearTag(key);\n        this._domMap.delete(key);\n      }\n    });\n  }\n}\n\nexport { RenderDomClass as default };\n","import * as THREE from 'three';\nimport { MatrixUtils, PointCloudUtils } from '@labelbee/lb-utils';\nimport uuid from '../../utils/uuid.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction createThreeMatrix4(matrix4) {\n  return new THREE.Matrix4().set(...matrix4);\n}\nfunction transferKitti2Matrix(P, R, T) {\n  const PMA = MatrixUtils.transferMatrix34FromKitti2Three(P);\n  const RMA = MatrixUtils.transferMatrix33FromKitti2Three(R);\n  const TMA = MatrixUtils.transferMatrix34FromKitti2Three(T);\n  const PM = createThreeMatrix4(PMA);\n  const RM = createThreeMatrix4(RMA);\n  const TM = createThreeMatrix4(TMA);\n  return {\n    composeMatrix4: TM.clone().premultiply(RM).premultiply(PM),\n    PM,\n    RM,\n    TM\n  };\n}\nfunction rotatePoint(points, centerPoint, rotationZ) {\n  var _a;\n  const pointVector = new THREE.Vector3(points.x, points.y, (_a = points == null ? void 0 : points.z) != null ? _a : 1);\n  const Rz = new THREE.Matrix4().makeRotationZ(rotationZ);\n  const TFrom = new THREE.Matrix4().makeTranslation(centerPoint.x, centerPoint.y, centerPoint.z);\n  const TBack = new THREE.Matrix4().makeTranslation(-centerPoint.x, -centerPoint.y, -centerPoint.z);\n  return pointVector.clone().applyMatrix4(TBack).applyMatrix4(Rz).applyMatrix4(TFrom);\n}\nfunction lidar2image(point, composeMatrix4) {\n  const vector = new THREE.Vector4(point.x, point.y, point.z);\n  const newV = vector.applyMatrix4(composeMatrix4);\n  if (newV.z < 0) {\n    return void 0;\n  }\n  const z = 1 / newV.z;\n  const fixMatrix4 = new THREE.Matrix4().set(z, 0, 0, 0, 0, z, 0, 0, 0, 0, z, 0, 0, 0, 0, 1);\n  return newV.applyMatrix4(fixMatrix4);\n}\nfunction getCuboidFromPointCloudBox(boxParams) {\n  const {center, width, height, depth, rotation} = boxParams;\n  const polygonPointList = [\n    {\n      x: center.x + width / 2,\n      y: center.y - height / 2\n    },\n    {\n      x: center.x + width / 2,\n      y: center.y + height / 2\n    },\n    {\n      x: center.x - width / 2,\n      y: center.y + height / 2\n    },\n    {\n      x: center.x - width / 2,\n      y: center.y - height / 2\n    }\n  ].map((v) => {\n    const vector = rotatePoint(v, center, rotation);\n    return {\n      x: vector.x,\n      y: vector.y\n    };\n  });\n  const zMax = center.z + depth / 2;\n  const zMin = center.z - depth / 2;\n  return __spreadProps(__spreadValues({}, boxParams), {\n    polygonPointList,\n    zMax,\n    zMin\n  });\n}\nfunction sortPoints(points) {\n  const sortedPoints = points.slice();\n  sortedPoints.sort((a, b) => {\n    if (a.x === b.x) {\n      return b.y - a.y;\n    }\n    return a.x - b.x;\n  });\n  return sortedPoints;\n}\nfunction crossProduct(p1, p2, p3) {\n  const x1 = p2.x - p1.x;\n  const y1 = p2.y - p1.y;\n  const x2 = p3.x - p1.x;\n  const y2 = p3.y - p1.y;\n  return x1 * y2 - x2 * y1;\n}\nfunction buildConvexHull(points) {\n  const sortedPoints = sortPoints(points);\n  const lowerHull = [];\n  for (let i = 0; i < sortedPoints.length; i++) {\n    while (lowerHull.length >= 2 && crossProduct(lowerHull[lowerHull.length - 2], lowerHull[lowerHull.length - 1], sortedPoints[i]) <= 0) {\n      lowerHull.pop();\n    }\n    lowerHull.push(sortedPoints[i]);\n  }\n  const upperHull = [];\n  for (let i = sortedPoints.length - 1; i >= 0; i--) {\n    while (upperHull.length >= 2 && crossProduct(upperHull[upperHull.length - 2], upperHull[upperHull.length - 1], sortedPoints[i]) <= 0) {\n      upperHull.pop();\n    }\n    upperHull.push(sortedPoints[i]);\n  }\n  lowerHull.pop();\n  upperHull.pop();\n  const convexHull = lowerHull.concat(upperHull);\n  return convexHull;\n}\nconst point3DLidar2Image = (point, cameraMatrix) => {\n  const {P, R, T} = cameraMatrix;\n  const {composeMatrix4} = transferKitti2Matrix(P, R, T);\n  return lidar2image(point, composeMatrix4);\n};\nconst point2dTo3D = (point, cameraMatrix) => {\n  const {P, R, T} = cameraMatrix;\n  const {composeMatrix4} = transferKitti2Matrix(P, R, T);\n  const vector = new THREE.Vector4(point.x, point.y, point.z);\n  const newV = vector.applyMatrix4(composeMatrix4.invert());\n  return newV;\n};\nconst isInImage = ({\n  point,\n  calib,\n  width,\n  height\n}) => {\n  if (!calib) {\n    return false;\n  }\n  const image2D = point3DLidar2Image(point, calib);\n  if (!image2D) {\n    return false;\n  }\n  if (image2D.x >= 0 && image2D.x <= width && image2D.y >= 0 && image2D.y <= height) {\n    return true;\n  }\n  return false;\n};\nconst getHighlightIndexByPoints = ({\n  points,\n  calib,\n  width,\n  height\n}) => {\n  const highlightIndex = [];\n  for (let i = 0; i < points.length; i += 3) {\n    const x = points[i];\n    const y = points[i + 1];\n    const z = points[i + 2];\n    const isIn = isInImage({point: {x, y, z}, calib, width, height});\n    if (isIn) {\n      highlightIndex.push(1);\n    } else {\n      highlightIndex.push(0);\n    }\n  }\n  return highlightIndex;\n};\nconst mergeHighlightList = (indexList) => {\n  if (indexList.length === 0) {\n    return [];\n  }\n  const list = [];\n  for (let i = 0; i < indexList[0].length; i++) {\n    for (let j = 0; j < indexList.length; j++) {\n      if (indexList[j][i] === 1) {\n        list.push(1);\n        break;\n      }\n    }\n    if (list.length === i) {\n      list.push(0);\n    }\n  }\n  return list;\n};\nfunction pointCloudLidar2image(boxParams, cameraMatrix, options = {createRange: false}) {\n  const {createRange} = options;\n  const allViewData = PointCloudUtils.getAllViewData(boxParams);\n  const {P, R, T} = cameraMatrix;\n  const {composeMatrix4} = transferKitti2Matrix(P, R, T);\n  const transferViewData = allViewData.map((viewData) => ({\n    type: viewData.type,\n    pointList: viewData.pointList.map((point) => rotatePoint(point, boxParams.center, boxParams.rotation)).map((point) => lidar2image(point, composeMatrix4)).map((point) => {\n      if (!point) {\n        return void 0;\n      }\n      return {id: uuid(), x: point == null ? void 0 : point.x, y: point == null ? void 0 : point.y};\n    }).filter((v) => v !== void 0)\n  })).filter((v) => v.pointList.length !== 0);\n  let viewRangePointList = [];\n  if (transferViewData.length === 6 && createRange === true) {\n    const frontPointList = transferViewData[0].pointList;\n    const backPointList = transferViewData[1].pointList;\n    viewRangePointList = buildConvexHull([...frontPointList, ...backPointList]);\n  }\n  return {transferViewData, viewRangePointList};\n}\n\nexport { createThreeMatrix4, getCuboidFromPointCloudBox, getHighlightIndexByPoints, isInImage, lidar2image, mergeHighlightList, point2dTo3D, point3DLidar2Image, pointCloudLidar2image, rotatePoint, transferKitti2Matrix };\n","import _ from 'lodash';\nimport rgba from 'color-rgba';\nimport DrawUtils from '../../utils/tool/DrawUtils.js';\nimport AxisUtils from '../../utils/tool/AxisUtils.js';\nimport RectUtils from '../../utils/tool/RectUtils.js';\nimport PolygonUtils from '../../utils/tool/PolygonUtils.js';\nimport MathUtils from '../../utils/MathUtils.js';\nimport RenderDomClass from '../../utils/tool/RenderDomClass.js';\nimport { ELineTypes, DEFAULT_FONT, SEGMENT_NUMBER } from '../../constant/tool.js';\nimport { DEFAULT_TEXT_OFFSET, TEXT_ATTRIBUTE_OFFSET, DEFAULT_TEXT_SHADOW } from '../../constant/annotation.js';\nimport ImgPosUtils from '../../utils/tool/ImgPosUtils.js';\nimport { BasicToolOperation } from './basicToolOperation.js';\nimport { pointCloudLidar2image } from '../pointCloud/matrix.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst newScope = 3;\nconst DEFAULT_RADIUS = 3;\nconst DEFAULT_STROKE_COLOR = \"#6371FF\";\nclass ViewOperation extends BasicToolOperation {\n  constructor(props) {\n    super(__spreadProps(__spreadValues({}, props), {showDefaultCursor: true}));\n    this.style = {};\n    this.annotations = [];\n    this.connectionPoints = [];\n    this.getHoverRectID = (e) => {\n      var _a, _b;\n      const coordinate = this.getCoordinateUnderZoom(e);\n      const originCoordinate = AxisUtils.changePointByZoom(coordinate, 1 / this.zoom);\n      if (((_a = this.annotations) == null ? void 0 : _a.length) <= 0 || !((_b = this.annotations) == null ? void 0 : _b.length)) {\n        return;\n      }\n      let id = \"\";\n      let minArea = Number.MAX_SAFE_INTEGER;\n      for (let i = 0; i < this.annotations.length; i++) {\n        const annotation = this.annotations[i];\n        switch (annotation.type) {\n          case \"rect\": {\n            const rect = annotation.annotation;\n            if (RectUtils.isInRect(coordinate, rect, newScope, this.zoom)) {\n              const area = rect.width * rect.height;\n              if (area < minArea) {\n                id = rect.id;\n                minArea = area;\n              }\n            }\n            break;\n          }\n          case \"polygon\": {\n            const polygon = annotation.annotation;\n            if (PolygonUtils.isInPolygon(originCoordinate, polygon.pointList)) {\n              const area = PolygonUtils.getPolygonArea(polygon.pointList);\n              if (area < minArea) {\n                id = polygon.id;\n                minArea = area;\n              }\n            }\n            break;\n          }\n        }\n      }\n      return id;\n    };\n    var _a;\n    this.style = (_a = props.style) != null ? _a : {stroke: DEFAULT_STROKE_COLOR, thickness: 3};\n    this.annotations = props.annotations;\n    this.loading = false;\n    this.renderDomInstance = new RenderDomClass({\n      container: this.container,\n      height: this.canvas.height\n    });\n  }\n  clearConnectionPoints() {\n    this.connectionPoints = [];\n    this.render();\n  }\n  checkConnectionPoints(newAnnotations = this.annotations) {\n    var _a, _b;\n    if (this.connectPointsStatus) {\n      (_b = (_a = this.connectPointsStatus).close) == null ? void 0 : _b.call(_a);\n    }\n    this.emit(\"connectionPointsStatusUpdate\", () => {\n      return new Promise((resolve) => {\n        const {promise, close} = MathUtils.getCollectionPointByAnnotationDataPromise(newAnnotations);\n        this.connectPointsStatus = {\n          close\n        };\n        promise.then((res) => {\n          this.connectionPoints = res.connectionPoints;\n          this.render();\n          this.connectPointsStatus = void 0;\n          resolve({connectionPoints: res.connectionPoints});\n        });\n      });\n    });\n  }\n  setLoading(loading) {\n    this.loading = loading;\n    this.render();\n  }\n  onMouseLeave() {\n    super.onMouseLeave();\n    this.mouseHoverID = void 0;\n    this.emit(\"onChange\", \"hover\", []);\n  }\n  onMouseDown(e) {\n    if (super.onMouseDown(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return true;\n    }\n    const newMouseSelectedID = this.mouseHoverID;\n    if (e.button === 0) {\n      let selectedID = [];\n      if (newMouseSelectedID) {\n        selectedID = [newMouseSelectedID];\n      }\n      this.emit(\"onChange\", \"selected\", selectedID);\n      this.render();\n    }\n  }\n  onMouseMove(e) {\n    if (super.onMouseMove(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return;\n    }\n    const oldMouseHoverID = this.mouseHoverID;\n    const newMouseHoverID = this.getHoverRectID(e);\n    if (oldMouseHoverID !== newMouseHoverID) {\n      this.mouseHoverID = newMouseHoverID;\n      let hoverID = [];\n      if (newMouseHoverID) {\n        hoverID = [newMouseHoverID];\n      }\n      this.emit(\"onChange\", \"hover\", hoverID);\n      this.render();\n    }\n  }\n  updateData(annotations) {\n    this.annotations = annotations;\n    this.render();\n  }\n  getSpecificStyle(obj) {\n    const specificStyle = _.pick(obj, [\"stroke\", \"thickness\", \"fill\", \"radius\"]);\n    const newStyle = __spreadValues(__spreadValues({}, this.style), specificStyle);\n    if (newStyle.stroke) {\n      Object.assign(newStyle, {\n        color: newStyle.stroke\n      });\n    }\n    return newStyle;\n  }\n  getFontStyle(obj, style) {\n    var _a, _b;\n    const fontSize = (_a = obj == null ? void 0 : obj.fontSize) != null ? _a : 14;\n    const fontFamily = (_b = obj == null ? void 0 : obj.fontFamily) != null ? _b : \"Arial\";\n    return __spreadProps(__spreadValues({}, DEFAULT_TEXT_SHADOW), {\n      color: style.stroke,\n      font: `normal normal 600 ${fontSize}px ${fontFamily}`\n    });\n  }\n  appendOffset({x, y}) {\n    return {x: x + DEFAULT_TEXT_OFFSET.offsetX, y: y + DEFAULT_TEXT_OFFSET.offsetY};\n  }\n  getRenderText(result, hiddenText = false) {\n    let headerText = \"\";\n    let bottomText = \"\";\n    if (!result || hiddenText === true) {\n      return {headerText, bottomText};\n    }\n    if (result == null ? void 0 : result.order) {\n      headerText = `${result.order}`;\n    }\n    if (result == null ? void 0 : result.label) {\n      if (headerText) {\n        headerText = `${headerText}_${result.label}`;\n      } else {\n        headerText = `${result.label}`;\n      }\n    }\n    if (result == null ? void 0 : result.attribute) {\n      if (headerText) {\n        headerText = `${headerText}  ${result.attribute}`;\n      } else {\n        headerText = `${result.attribute}`;\n      }\n    }\n    if (result == null ? void 0 : result.textAttribute) {\n      bottomText = result == null ? void 0 : result.textAttribute;\n    }\n    return {headerText, bottomText};\n  }\n  getReferenceOptions(isReference) {\n    return isReference ? {lineCap: \"butt\", lineDash: [20, 20]} : {};\n  }\n  focusPositionByPointList(pointList) {\n    const basicZone = MathUtils.calcViewportBoundaries(pointList);\n    const newBoundary = {\n      x: basicZone.left,\n      y: basicZone.top,\n      width: basicZone.right - basicZone.left,\n      height: basicZone.bottom - basicZone.top\n    };\n    const pos = ImgPosUtils.getBasicRecPos(this.imgNode, newBoundary, this.size, 0.5);\n    if (pos) {\n      this.setCurrentPos(pos.currentPos);\n      this.setCurrentPosStorage(pos.currentPos);\n      const {imgInfo} = this;\n      const {innerZoom} = this.innerPosAndZoom;\n      if (imgInfo) {\n        this.setImgInfo(__spreadProps(__spreadValues({}, imgInfo), {\n          width: imgInfo.width / innerZoom * pos.innerZoom,\n          height: imgInfo.height / innerZoom * pos.innerZoom\n        }));\n      }\n      this.setZoom(pos.innerZoom);\n      this.render();\n      this.renderBasicCanvas();\n    }\n  }\n  renderConnectionPoints() {\n    this.connectionPoints.forEach((point) => {\n      const renderPoint = AxisUtils.changePointByZoom(point, this.zoom, this.currentPos);\n      DrawUtils.drawCircleWithFill(this.canvas, renderPoint, 4, {color: \"#fff\"});\n      DrawUtils.drawCircleWithFill(this.canvas, renderPoint, 2, {color: \"#000\"});\n    });\n  }\n  getRenderStyle(annotation) {\n    const style = this.getSpecificStyle(annotation.annotation);\n    const fontStyle = this.getFontStyle(annotation.annotation, style);\n    return {\n      style,\n      fontStyle\n    };\n  }\n  renderLine(annotation) {\n    var _a, _b, _c;\n    if (annotation.type !== \"line\") {\n      return;\n    }\n    const {style, fontStyle} = this.getRenderStyle(annotation);\n    const line = annotation.annotation;\n    if (!(((_a = line == null ? void 0 : line.pointList) == null ? void 0 : _a.length) >= 2)) {\n      return;\n    }\n    const {lineType = ELineTypes.Line} = line;\n    const renderLineWithZoom = AxisUtils.changePointListByZoom((_b = line == null ? void 0 : line.pointList) != null ? _b : [], this.zoom, this.currentPos);\n    const lineRenderOptions = __spreadProps(__spreadValues(__spreadValues({}, style), this.getReferenceOptions(line == null ? void 0 : line.isReference)), {\n      lineType,\n      strokeColor: style.stroke\n    });\n    let newPointList = [];\n    if (line.showKeyPoint) {\n      newPointList = DrawUtils.drawPolygonWithKeyPoint(this.canvas, renderLineWithZoom, lineRenderOptions);\n    } else {\n      newPointList = DrawUtils.drawPolygon(this.canvas, renderLineWithZoom, lineRenderOptions);\n    }\n    const isShowDirection = (line == null ? void 0 : line.showDirection) === true && ((_c = line == null ? void 0 : line.pointList) == null ? void 0 : _c.length) >= 2;\n    if (isShowDirection) {\n      let startPoint = renderLineWithZoom[0];\n      let endPoint = MathUtils.getLineCenterPoint([renderLineWithZoom[0], renderLineWithZoom[1]]);\n      if (lineType === ELineTypes.Curve) {\n        const pos = Math.floor(SEGMENT_NUMBER / 2);\n        startPoint = newPointList[pos];\n        endPoint = newPointList[pos + 1];\n      }\n      DrawUtils.drawArrowByCanvas(this.canvas, startPoint, endPoint, {\n        color: style.stroke,\n        thickness: style.thickness\n      });\n      DrawUtils.drawCircle(this.canvas, renderLineWithZoom[0], style.thickness + 6, {\n        color: style.stroke,\n        thickness: style.thickness\n      });\n    }\n    const {headerText, bottomText} = this.getRenderText(line, line == null ? void 0 : line.hiddenText);\n    if (headerText) {\n      DrawUtils.drawText(this.canvas, this.appendOffset(renderLineWithZoom[0]), headerText, fontStyle);\n    }\n    if (bottomText) {\n      const endPoint = renderLineWithZoom[renderLineWithZoom.length - 1];\n      DrawUtils.drawText(this.canvas, this.appendOffset({x: endPoint.x + TEXT_ATTRIBUTE_OFFSET.x, y: endPoint.y + TEXT_ATTRIBUTE_OFFSET.y}), bottomText, fontStyle);\n    }\n  }\n  renderPolygon(annotation) {\n    var _a, _b, _c, _d, _e;\n    if (annotation.type !== \"polygon\") {\n      return;\n    }\n    const {style, fontStyle} = this.getRenderStyle(annotation);\n    const polygon = annotation.annotation;\n    if (!(((_a = polygon == null ? void 0 : polygon.pointList) == null ? void 0 : _a.length) >= 3)) {\n      return;\n    }\n    const {lineType = ELineTypes.Line} = polygon;\n    const renderPolygon = AxisUtils.changePointListByZoom((_b = polygon == null ? void 0 : polygon.pointList) != null ? _b : [], this.zoom, this.currentPos);\n    if (polygon.id === this.mouseHoverID || style.fill) {\n      const fillArr = rgba((_d = (_c = style == null ? void 0 : style.fill) != null ? _c : style == null ? void 0 : style.stroke) != null ? _d : DEFAULT_STROKE_COLOR);\n      const fill = `rgba(${fillArr[0]}, ${fillArr[1]}, ${fillArr[2]},${fillArr[3] * 0.8})`;\n      DrawUtils.drawPolygonWithFill(this.canvas, renderPolygon, {color: fill, lineType});\n    }\n    const polygonRenderOptions = __spreadProps(__spreadValues(__spreadProps(__spreadValues({}, style), {\n      isClose: true\n    }), this.getReferenceOptions(polygon == null ? void 0 : polygon.isReference)), {\n      lineType,\n      strokeColor: style.stroke\n    });\n    let newPointList = [];\n    if (polygon.showKeyPoint) {\n      newPointList = DrawUtils.drawPolygonWithKeyPoint(this.canvas, renderPolygon, polygonRenderOptions);\n    } else {\n      newPointList = DrawUtils.drawPolygon(this.canvas, renderPolygon, polygonRenderOptions);\n    }\n    const isShowDirection = (polygon == null ? void 0 : polygon.showDirection) === true && ((_e = polygon == null ? void 0 : polygon.pointList) == null ? void 0 : _e.length) >= 2;\n    if (isShowDirection) {\n      let startPoint = renderPolygon[0];\n      let endPoint = MathUtils.getLineCenterPoint([renderPolygon[0], renderPolygon[1]]);\n      if (lineType === ELineTypes.Curve) {\n        const pos = Math.floor(SEGMENT_NUMBER / 2);\n        startPoint = newPointList[pos];\n        endPoint = newPointList[pos + 1];\n      }\n      DrawUtils.drawArrowByCanvas(this.canvas, startPoint, endPoint, {\n        color: style.stroke,\n        thickness: style.thickness\n      });\n      DrawUtils.drawCircle(this.canvas, renderPolygon[0], style.thickness + 6, {\n        color: style.stroke,\n        thickness: style.thickness\n      });\n    }\n    const {headerText, bottomText} = this.getRenderText(polygon, polygon == null ? void 0 : polygon.hiddenText);\n    if (headerText) {\n      DrawUtils.drawText(this.canvas, this.appendOffset(renderPolygon[0]), headerText, fontStyle);\n    }\n    if (bottomText) {\n      const endPoint = renderPolygon[renderPolygon.length - 1];\n      DrawUtils.drawText(this.canvas, this.appendOffset({x: endPoint.x + TEXT_ATTRIBUTE_OFFSET.x, y: endPoint.y + TEXT_ATTRIBUTE_OFFSET.y}), bottomText, fontStyle);\n    }\n  }\n  renderSingleCuboid(annotation) {\n    var _a, _b;\n    const {style} = this.getRenderStyle(annotation);\n    const cuboid = annotation.annotation;\n    const fillArr = rgba((_b = (_a = style == null ? void 0 : style.fill) != null ? _a : style == null ? void 0 : style.stroke) != null ? _b : DEFAULT_STROKE_COLOR);\n    const fillColor = `rgba(${fillArr[0]}, ${fillArr[1]}, ${fillArr[2]},${fillArr[3] * 0.8})`;\n    const strokeColor = style.stroke;\n    const transformCuboid = AxisUtils.changeCuboidByZoom(cuboid, this.zoom, this.currentPos);\n    const {headerText, bottomText} = this.getRenderText(cuboid, cuboid == null ? void 0 : cuboid.hiddenText);\n    DrawUtils.drawCuboidWithText(this.canvas, transformCuboid, {strokeColor, fillColor, thickness: style.thickness}, {\n      config: this.config,\n      hiddenText: cuboid == null ? void 0 : cuboid.hiddenText,\n      headerText,\n      bottomText\n    });\n  }\n  renderBox3d(annotation) {\n    if (annotation.type !== \"box3d\") {\n      return;\n    }\n    const data = annotation.annotation;\n    const {transferViewData: viewDataPointList} = pointCloudLidar2image(data, data.calib);\n    const defaultViewStyle = {\n      fill: \"transparent\"\n    };\n    const extraData = _.pick(data, [\"stroke\", \"thickness\"]);\n    viewDataPointList.forEach((v, i) => {\n      const newAnnotation = __spreadValues(__spreadProps(__spreadValues({}, extraData), {\n        id: `${annotation.annotation.id}-${i}`,\n        pointList: v.pointList\n      }), defaultViewStyle);\n      switch (v.type) {\n        case \"line\":\n          this.renderLine({\n            type: \"line\",\n            annotation: newAnnotation\n          });\n          break;\n        case \"polygon\":\n          this.renderPolygon({\n            type: \"polygon\",\n            annotation: newAnnotation\n          });\n          break;\n      }\n    });\n  }\n  render() {\n    try {\n      super.render();\n      if (this.loading === true) {\n        return;\n      }\n      const globalDomTextAnnotation = this.annotations.filter((v) => v.type === \"text\" && v.annotation.position === \"rt\").map((v) => v.annotation);\n      this.renderDomInstance.render(globalDomTextAnnotation);\n      this.annotations.forEach((annotation) => {\n        var _a, _b, _c, _d, _e;\n        const style = this.getSpecificStyle(annotation.annotation);\n        const fontStyle = this.getFontStyle(annotation.annotation, style);\n        switch (annotation.type) {\n          case \"rect\": {\n            const rect = annotation.annotation;\n            const {hiddenText = false, isReference, hiddenRectSize = false} = rect;\n            const {zoom} = this;\n            const renderRect = AxisUtils.changeRectByZoom(rect, this.zoom, this.currentPos);\n            const {x, y, width, height} = renderRect;\n            if (rect.id === this.mouseHoverID || style.fill) {\n              const fillArr = rgba((_b = (_a = style == null ? void 0 : style.fill) != null ? _a : style == null ? void 0 : style.stroke) != null ? _b : DEFAULT_STROKE_COLOR);\n              const fill = `rgba(${fillArr[0]}, ${fillArr[1]}, ${fillArr[2]},${fillArr[3] * 0.8})`;\n              DrawUtils.drawRectWithFill(this.canvas, renderRect, {color: fill});\n            }\n            DrawUtils.drawRect(this.canvas, renderRect, __spreadValues(__spreadProps(__spreadValues({}, style), {\n              hiddenText: true\n            }), this.getReferenceOptions(isReference)));\n            const {headerText, bottomText} = this.getRenderText(rect, rect == null ? void 0 : rect.hiddenText);\n            if (headerText) {\n              DrawUtils.drawText(this.canvas, {x, y: y - 6}, headerText, __spreadValues({\n                textMaxWidth: 300\n              }, fontStyle));\n            }\n            const rectSize = `${Math.round(width / zoom)} * ${Math.round(height / zoom)}`;\n            const textSizeWidth = rectSize.length * 7;\n            if (!hiddenText && !hiddenRectSize) {\n              DrawUtils.drawText(this.canvas, {x: x + width - textSizeWidth, y: y + height + 15}, rectSize, fontStyle);\n            }\n            if (bottomText) {\n              const marginTop = 20;\n              const textWidth = Math.max(20, width - textSizeWidth);\n              DrawUtils.drawText(this.canvas, {x, y: y + height + marginTop}, rect.textAttribute, __spreadValues({\n                textMaxWidth: textWidth\n              }, fontStyle));\n            }\n            break;\n          }\n          case \"polygon\": {\n            this.renderPolygon(annotation);\n            break;\n          }\n          case \"line\": {\n            this.renderLine(annotation);\n            break;\n          }\n          case \"point\": {\n            const point = annotation.annotation;\n            const renderPoint = AxisUtils.changePointByZoom(point, this.zoom, this.currentPos);\n            const radius = (_c = style.radius) != null ? _c : DEFAULT_RADIUS;\n            DrawUtils.drawCircle(this.canvas, renderPoint, radius, style);\n            const {headerText, bottomText} = this.getRenderText(point, point == null ? void 0 : point.hiddenText);\n            if (headerText) {\n              DrawUtils.drawText(this.canvas, {x: renderPoint.x + radius / 2, y: renderPoint.y - radius - 4}, headerText, __spreadValues({\n                textAlign: \"center\"\n              }, fontStyle));\n            }\n            if (bottomText) {\n              DrawUtils.drawText(this.canvas, this.appendOffset({x: renderPoint.x + radius, y: renderPoint.y + radius + 24}), bottomText, fontStyle);\n            }\n            break;\n          }\n          case \"text\": {\n            const textAnnotation = annotation.annotation;\n            const {\n              text,\n              x,\n              y,\n              textMaxWidth,\n              color = \"white\",\n              background = \"rgba(0, 0, 0, 0.6)\",\n              lineHeight = 25,\n              font = DEFAULT_FONT,\n              position\n            } = textAnnotation;\n            const paddingTB = 10;\n            const paddingLR = 10;\n            const renderPoint = AxisUtils.changePointByZoom({x, y}, this.zoom, this.currentPos);\n            const {\n              width,\n              height,\n              fontHeight = 0\n            } = MathUtils.getTextArea(this.canvas, textAnnotation.text, textMaxWidth, font, lineHeight);\n            if (position === \"rt\") {\n              break;\n            }\n            DrawUtils.drawRectWithFill(this.canvas, {\n              x: renderPoint.x,\n              y: renderPoint.y,\n              width: width + paddingLR * 2,\n              height: height + paddingTB * 2,\n              id: \"\",\n              sourceID: \"\",\n              valid: true,\n              textAttribute: \"\",\n              attribute: \"\"\n            }, {\n              color: background\n            });\n            DrawUtils.drawText(this.canvas, {\n              x: renderPoint.x + paddingLR,\n              y: renderPoint.y + fontHeight + paddingTB\n            }, text, {\n              color,\n              lineHeight,\n              font,\n              textMaxWidth\n            });\n            break;\n          }\n          case \"box3d\": {\n            this.renderBox3d(annotation);\n            break;\n          }\n          case \"cuboid\": {\n            this.renderSingleCuboid(annotation);\n            break;\n          }\n          default: {\n            break;\n          }\n        }\n        (_e = (_d = annotation.annotation) == null ? void 0 : _d.renderEnhance) == null ? void 0 : _e.call(_d, {\n          ctx: this.ctx,\n          canvas: this.canvas,\n          currentPos: this.currentPos,\n          zoom: this.zoom,\n          data: annotation,\n          toolInstance: this\n        });\n      });\n      this.renderConnectionPoints();\n    } catch (e) {\n      console.error(\"ViewOperation Render Error\", e);\n    }\n  }\n}\n\nexport { ViewOperation as default };\n","const ANNOTATION_TYPE = {\n  0: \"\\u76EE\\u6807\\u68C0\\u6D4B\",\n  1: \"\\u56FE\\u50CF\\u5206\\u7C7B\"\n};\nconst ANNOTATION_STATUS = {\n  0: \"\\u6807\\u6CE8\\u6587\\u4EF6\\u4F20\\u8F93\\u4E2D\",\n  1: \"\\u6807\\u6CE8\\u6587\\u4EF6\\u4F20\\u8F93\\u91CD\\u8BD5\",\n  2: \"\\u6807\\u6CE8\\u6587\\u4EF6\\u4F20\\u8F93\\u5931\\u8D25\",\n  3: \"\\u6807\\u6CE8\\u4E2D\",\n  4: \"\\u4EFB\\u52A1\\u7EC8\\u6B62\",\n  5: \"\\u4EFB\\u52A1\\u5B8C\\u6210\",\n  6: \"\\u6570\\u636E\\u5DF2\\u53D1\\u5E03\"\n};\nvar EAnnotationStatus;\n(function(EAnnotationStatus2) {\n  EAnnotationStatus2[EAnnotationStatus2[\"Upload\"] = 0] = \"Upload\";\n  EAnnotationStatus2[EAnnotationStatus2[\"UploadRetry\"] = 1] = \"UploadRetry\";\n  EAnnotationStatus2[EAnnotationStatus2[\"UploadFail\"] = 2] = \"UploadFail\";\n  EAnnotationStatus2[EAnnotationStatus2[\"Annotation\"] = 3] = \"Annotation\";\n  EAnnotationStatus2[EAnnotationStatus2[\"Terminated\"] = 4] = \"Terminated\";\n  EAnnotationStatus2[EAnnotationStatus2[\"Finish\"] = 5] = \"Finish\";\n  EAnnotationStatus2[EAnnotationStatus2[\"Publish\"] = 6] = \"Publish\";\n})(EAnnotationStatus || (EAnnotationStatus = {}));\n\nexport { ANNOTATION_STATUS, ANNOTATION_TYPE, EAnnotationStatus };\n","import { ImgConversionUtils } from '@labelbee/lb-utils';\nimport AxisUtils from '../../utils/tool/AxisUtils.js';\nimport DrawUtils from '../../utils/tool/DrawUtils.js';\nimport { EToolName, EScribblePattern } from '../../constant/tool.js';\nimport CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\nimport AttributeUtils from '../../utils/tool/AttributeUtils.js';\nimport { BasicToolOperation } from './basicToolOperation.js';\n\nconst DEFAULT_PEN_SIZE = 20;\nconst DEFAULT_COLOR = \"white\";\nclass ScribbleTool extends BasicToolOperation {\n  constructor(props) {\n    super(props);\n    this.toolName = EToolName.ScribbleTool;\n    this.action = EScribblePattern.Scribble;\n    this.getOriginCoordinate = (e) => {\n      return AxisUtils.changePointByZoom(this.getCoordinateUnderZoomByRotate(e), 1 / this.zoom);\n    };\n    this.onMouseDown = (e) => {\n      if (super.onMouseDown(e) || this.forbidMouseOperation || !this.imgInfo) {\n        return void 0;\n      }\n      this.initCacheCanvas(this.imgNode);\n      this.mouseEvents(\"onMouseDown\").call(this, e);\n    };\n    this.onMouseMove = (e) => {\n      if (super.onMouseMove(e) || this.forbidMouseOperation || !this.imgInfo) {\n        return void 0;\n      }\n      this.mouseEvents(\"onMouseMove\").call(this, e);\n    };\n    this.onMouseUp = (e) => {\n      if (super.onMouseUp(e) || this.forbidMouseOperation || !this.imgInfo) {\n        return void 0;\n      }\n      this.mouseEvents(\"onMouseUp\").call(this, e);\n    };\n    this.mouseEvents = (eventType) => {\n      const events = {\n        [EScribblePattern.Scribble]: {\n          onMouseMove: this.onScribbleMove,\n          onMouseUp: this.onScribbleEnd,\n          onMouseDown: this.onScribbleStart\n        },\n        [EScribblePattern.Erase]: {\n          onMouseMove: this.onEraseMove,\n          onMouseUp: this.onEraseEnd,\n          onMouseDown: this.onEraseStart\n        }\n      };\n      return events[this.action][eventType];\n    };\n    this.setPattern = (pattern) => {\n      this.action = pattern;\n      switch (pattern) {\n        case EScribblePattern.Erase: {\n          this.setCustomCursor(this.cursorErase);\n          break;\n        }\n        default: {\n          this.setCustomCursor(\"none\");\n          break;\n        }\n      }\n    };\n    var _a;\n    this.penSize = DEFAULT_PEN_SIZE;\n    if (((_a = this.config.attributeList) == null ? void 0 : _a.length) > 0) {\n      const firstAttributeInfo = this.config.attributeList[0];\n      this.setDefaultAttribute(firstAttributeInfo.value);\n    }\n  }\n  get cursorErase() {\n    const svgIcon = `<?xml version=\"1.0\" encoding=\"UTF-8\"?><svg width=\"24\" heighst=\"24\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g clip-path=\"url(#icon-65e7e1747c11bad3)\"><path d=\"M44.7818 24.1702L31.918 7.09935L14.1348 20.5L27.5 37L30.8556 34.6643L44.7818 24.1702Z\" fill=\"#141414\" stroke=\"#000000\" stroke-width=\"4\" stroke-linejoin=\"miter\"/><path d=\"M27.4998 37L23.6613 40.0748L13.0978 40.074L10.4973 36.6231L4.06543 28.0876L14.4998 20.2248\" stroke=\"#000000\" stroke-width=\"4\" stroke-linejoin=\"miter\"/><path d=\"M13.2056 40.072L44.5653 40.072\" stroke=\"#000000\" stroke-width=\"4\" stroke-linecap=\"round\"/></g><defs><clipPath id=\"icon-65e7e1747c11bad3\"><rect width=\"48\" height=\"48\" fill=\"#df4c4c\"/></clipPath></defs></svg>`;\n    const iconUrl = `data:image/svg+xml;base64,${window.btoa(unescape(encodeURIComponent(svgIcon)))}`;\n    return `url(${iconUrl}) 0 0, auto`;\n  }\n  get defaultCursor() {\n    if (this.action === EScribblePattern.Erase) {\n      return this.cursorErase;\n    }\n    return this.isShowDefaultCursor ? \"default\" : \"none\";\n  }\n  get color() {\n    var _a, _b;\n    return (_b = (_a = this == null ? void 0 : this.defaultAttributeInfo) == null ? void 0 : _a.color) != null ? _b : DEFAULT_COLOR;\n  }\n  get penSizeWithZoom() {\n    return this.penSize / this.zoom;\n  }\n  get cacheCanvasToDataUrl() {\n    var _a;\n    return (_a = this.cacheCanvas) == null ? void 0 : _a.toDataURL(\"image/png\", 0);\n  }\n  setPenSize(size) {\n    this.penSize = size;\n  }\n  initCacheCanvas(imgNode) {\n    if (this.cacheCanvas || !imgNode) {\n      return;\n    }\n    const {canvas, ctx} = ImgConversionUtils.createCanvas(imgNode);\n    this.cacheCanvas = canvas;\n    this.cacheContext = ctx;\n  }\n  updateCacheCanvasSize(imgNode) {\n    if (this.cacheCanvas) {\n      this.cacheCanvas.width = imgNode.width;\n      this.cacheCanvas.height = imgNode.height;\n    }\n  }\n  updateUrl2CacheContext(url) {\n    ImgConversionUtils.createImgDom(url).then((img) => {\n      if (!this.cacheContext) {\n        this.initCacheCanvas(img);\n      }\n      if (this.cacheContext) {\n        this.cacheContext.save();\n        this.clearCacheCanvas();\n        this.cacheContext.drawImage(img, 0, 0, img.width, img.height);\n        this.cacheContext.restore();\n        this.render();\n      }\n    });\n  }\n  setImgNode(imgNode, basicImgInfo) {\n    super.setImgNode(imgNode, basicImgInfo);\n    if (this.cacheCanvas) {\n      this.updateCacheCanvasSize(imgNode);\n    } else {\n      this.initCacheCanvas(imgNode);\n    }\n  }\n  setResult(data) {\n    var _a, _b;\n    let {url} = (_a = data == null ? void 0 : data[0]) != null ? _a : {};\n    this.clearCacheCanvas();\n    if (!url) {\n      url = (_b = this.cacheCanvasToDataUrl) != null ? _b : \"\";\n    }\n    this.history.initRecord([url], true);\n    if (!url) {\n      this.render();\n      return;\n    }\n    this.updateUrl2CacheContext(url);\n  }\n  onKeyDown(e) {\n    if (!CommonToolUtils.hotkeyFilter(e) || super.onKeyDown(e) === false) {\n      return;\n    }\n    const {keyCode} = e;\n    const keyCode2Attribute = AttributeUtils.getAttributeByKeycode(keyCode, this.config.attributeList);\n    if (keyCode2Attribute !== void 0) {\n      this.setDefaultAttribute(keyCode2Attribute);\n    }\n  }\n  eventBinding() {\n    super.eventBinding();\n  }\n  setDefaultAttribute(attributeValue) {\n    const attributeInfo = this.config.attributeList.find((v) => v.value === attributeValue);\n    if (attributeInfo) {\n      this.defaultAttribute = attributeInfo.value;\n      this.defaultAttributeInfo = attributeInfo;\n      this.emit(\"changeAttributeSidebar\");\n      this.render();\n    }\n  }\n  clearStatusAfterLeave() {\n    this.onScribbleEnd();\n    this.startPoint = void 0;\n  }\n  onMouseLeave() {\n    super.onMouseLeave();\n    this.clearStatusAfterLeave();\n  }\n  onScribbleStart(e) {\n    if (!this.cacheContext) {\n      return;\n    }\n    this.cacheContext.save();\n    this.cacheContext.beginPath();\n    this.cacheContext.strokeStyle = this.color;\n    this.cacheContext.lineWidth = this.penSizeWithZoom;\n    this.cacheContext.lineCap = \"round\";\n    this.cacheContext.lineJoin = \"round\";\n    const originCoordinate = this.getOriginCoordinate(e);\n    this.cacheContext.moveTo(originCoordinate.x, originCoordinate.y);\n    this.startPoint = originCoordinate;\n  }\n  onScribbleMove(e) {\n    if (e.buttons === 1 && this.cacheContext && this.startPoint) {\n      const originCoordinate = this.getOriginCoordinate(e);\n      this.cacheContext.lineTo(originCoordinate.x, originCoordinate.y);\n      this.cacheContext.stroke();\n    }\n  }\n  onScribbleEnd() {\n    var _a, _b;\n    if (this.startPoint) {\n      (_a = this.cacheContext) == null ? void 0 : _a.closePath();\n      (_b = this.cacheContext) == null ? void 0 : _b.restore();\n      this.startPoint = void 0;\n      this.history.pushHistory(this.cacheCanvasToDataUrl);\n    }\n  }\n  eraseArc(e) {\n    var _a;\n    if (this.cacheContext) {\n      const originCoordinate = this.getOriginCoordinate(e);\n      this.cacheContext.save();\n      this.cacheContext.beginPath();\n      this.cacheContext.arc(originCoordinate.x, originCoordinate.y, this.penSizeWithZoom / 2, 0, Math.PI * 2, false);\n      this.cacheContext.clip();\n      this.cacheContext.clearRect(0, 0, this.cacheContext.canvas.width, this.cacheContext.canvas.height);\n      (_a = this.cacheContext) == null ? void 0 : _a.restore();\n    }\n  }\n  onEraseStart(e) {\n    if (!this.cacheContext || e.buttons !== 1) {\n      return;\n    }\n    this.eraseArc(e);\n  }\n  onEraseMove(e) {\n    if (!this.cacheContext || e.buttons !== 1) {\n      return;\n    }\n    this.eraseArc(e);\n  }\n  onEraseEnd() {\n  }\n  exportData() {\n    const imgBase64 = this.cacheCanvasToDataUrl;\n    return [[], this.basicImgInfo, {imgBase64}];\n  }\n  clearCacheCanvas() {\n    var _a;\n    (_a = this.cacheContext) == null ? void 0 : _a.clearRect(0, 0, this.cacheContext.canvas.width, this.cacheContext.canvas.height);\n    this.render();\n  }\n  clearResult() {\n    this.clearCacheCanvas();\n    this.history.pushHistory(this.cacheCanvasToDataUrl);\n  }\n  renderPoint(radius) {\n    DrawUtils.drawCircleWithFill(this.canvas, this.coord, radius, {color: this.color});\n  }\n  renderBorderPoint(radius) {\n    DrawUtils.drawCircle(this.canvas, this.coord, radius, {color: \"black\"});\n  }\n  render() {\n    super.render();\n    if (!this.ctx || !this.cacheCanvas) {\n      return;\n    }\n    this.ctx.save();\n    this.ctx.globalAlpha = 0.5;\n    DrawUtils.drawImg(this.canvas, this.cacheCanvas, {\n      zoom: this.zoom,\n      currentPos: this.currentPos,\n      rotate: this.rotate\n    });\n    this.ctx.restore();\n    if (this.forbidOperation || this.forbidCursorLine) {\n      return;\n    }\n    const radius = this.penSize / 2;\n    if (this.action === EScribblePattern.Erase) {\n      this.renderBorderPoint(radius);\n    } else {\n      this.renderPoint(radius);\n    }\n  }\n  undo() {\n    const url = this.history.undo();\n    if (url && this.cacheCanvas) {\n      this.updateUrl2CacheContext(url);\n    }\n  }\n  redo() {\n    const url = this.history.redo();\n    if (url && this.cacheCanvas) {\n      this.updateUrl2CacheContext(url);\n    }\n  }\n}\n\nexport { ScribbleTool as default };\n","const rectToolConfig = {\n  showConfirm: false,\n  skipWhileNoDependencies: false,\n  drawOutsideTarget: false,\n  copyBackwardResult: false,\n  minWidth: 1,\n  minHeight: 1,\n  isShowOrder: false,\n  filterData: [\"valid\", \"invalid\"],\n  attributeConfigurable: true,\n  attributeList: [],\n  textConfigurable: true,\n  textCheckType: 0,\n  customFormat: \"\"\n};\nconst tagToolConfig = {\n  showConfirm: false,\n  skipWhileNoDependencies: false,\n  inputList: [\n    {\n      key: \"\\u7C7B\\u522B1\",\n      value: \"class1\",\n      isMulti: false,\n      subSelected: [\n        {key: \"\\u9009\\u98791\", value: \"option1\", isDefault: false},\n        {key: \"\\u9009\\u98792\", value: \"option1-2\", isDefault: false}\n      ]\n    },\n    {\n      key: \"\\u7C7B\\u522B2\",\n      value: \"class-AH\",\n      isMulti: true,\n      subSelected: [\n        {key: \"\\u9009\\u98792-1\", value: \"option2-1\", isDefault: false},\n        {key: \"\\u9009\\u98792-2\", value: \"option2-2\", isDefault: false},\n        {key: \"\\u9009\\u98792-3\", value: \"option2-3\", isDefault: false}\n      ]\n    },\n    {\n      key: \"\\u7C7B\\u522B3\",\n      value: \"class-0P\",\n      isMulti: false,\n      subSelected: [\n        {key: \"\\u9009\\u98793-1\", value: \"option3-1\", isMulti: false},\n        {key: \"\\u9009\\u98793-2\", value: \"option3-2\", isDefault: false},\n        {key: \"\\u9009\\u98793-3\", value: \"option3-3\", isDefault: false}\n      ]\n    }\n  ]\n};\nconst lineToolConfig = {\n  lineType: 0,\n  lineColor: 0,\n  edgeAdsorption: false,\n  outOfTarget: true,\n  copyBackwardResult: false,\n  isShowOrder: false,\n  attributeConfigurable: true,\n  attributeList: [\n    {key: \"\\u7C7B\\u522B1\", value: \"\\u7C7B\\u522B1\"},\n    {key: \"\\u7C7B\\u522Bao\", value: \"class-ao\"},\n    {key: \"\\u7C7B\\u522BM1\", value: \"class-M1\"},\n    {key: \"\\u7C7B\\u522BCm\", value: \"class-Cm\"},\n    {key: \"\\u7C7B\\u522Bc3\", value: \"class-c3\"},\n    {key: \"\\u7C7B\\u522Ba0\", value: \"class-a0\"},\n    {key: \"\\u7C7B\\u522Bu7\", value: \"class-u7\"},\n    {key: \"\\u7C7B\\u522BZb\", value: \"class-Zb\"},\n    {key: \"\\u7C7B\\u522Bzi\", value: \"class-zi\"}\n  ],\n  textConfigurable: false,\n  textCheckType: 2,\n  customFormat: \"\",\n  showConfirm: false,\n  lowerLimitPointNum: 2,\n  upperLimitPointNum: \"\",\n  preReferenceStep: 0,\n  skipWhileNoDependencies: false,\n  filterData: [\"valid\", \"invalid\"]\n};\nconst textToolConfig = {\n  showConfirm: false,\n  skipWhileNoDependencies: false,\n  enableTextRecognition: false,\n  recognitionMode: \"general\",\n  configList: [{label: \"\\u6587\\u672C\", key: \"text\", required: false, default: \"\", maxLength: 1e3}],\n  filterData: [\"valid\", \"invalid\"]\n};\nconst polygonConfig = {\n  lineType: 0,\n  lineColor: 0,\n  lowerLimitPointNum: 3,\n  edgeAdsorption: false,\n  drawOutsideTarget: false,\n  copyBackwardResult: false,\n  isShowOrder: false,\n  attributeConfigurable: false,\n  attributeList: [],\n  textConfigurable: true,\n  textCheckType: 0,\n  customFormat: \"\"\n};\nconst getConfig = (tool) => {\n  if (tool === \"lineTool\") {\n    return lineToolConfig;\n  }\n  if (tool === \"rectTool\") {\n    return rectToolConfig;\n  }\n  if (tool === \"tagTool\") {\n    return tagToolConfig;\n  }\n  if (tool === \"textTool\") {\n    return textToolConfig;\n  }\n  if (tool === \"polygonTool\") {\n    return polygonConfig;\n  }\n  return rectToolConfig;\n};\nconst styleDefaultConfig = {\n  toolColor: {\n    1: {\n      valid: {stroke: \"rgba(0,0,255,0.50)\", fill: \"rgba(0,0,255,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.80)\"},\n      validSelected: {stroke: \"rgba(0,15,255,1.00)\", fill: \"rgba(0,15,255,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,0.60)\", fill: \"rgba(255,0,0,0.24)\"},\n      validHover: {stroke: \"rgba(0,15,255,0.80)\", fill: \"rgba(0,15,255,0.64)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,0.50)\", fill: \"rgba(255,0,0,0.40)\"}\n    },\n    3: {\n      valid: {stroke: \"rgba(0,255,255,0.50)\", fill: \"rgba(0,255,255,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.80)\"},\n      validSelected: {stroke: \"rgba(0,212,255,1.00)\", fill: \"rgba(0,212,255,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,0.60)\", fill: \"rgba(255,0,0,0.24)\"},\n      validHover: {stroke: \"rgba(0,212,255,0.80)\", fill: \"rgba(0,212,255,0.64)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,0.50)\", fill: \"rgba(255,0,0,0.40)\"}\n    },\n    5: {\n      valid: {stroke: \"rgba(0,255,0,0.50)\", fill: \"rgba(0,255,0,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.80)\"},\n      validSelected: {stroke: \"rgba(149,255,1.00)\", fill: \"rgba(149,255,0,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,0.60)\", fill: \"rgba(255,0,0,0.24)\"},\n      validHover: {stroke: \"rgba(149,255,0,0.80)\", fill: \"rgba(149,255,0,0.64)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,0.50)\", fill: \"rgba(255,0,0,0.40)\"}\n    },\n    7: {\n      valid: {stroke: \"rgba(255,255,0,0.50)\", fill: \"rgba(255,255,0,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.80)\"},\n      validSelected: {stroke: \"rgba(255,230,102,1.00)\", fill: \"rgba(255,213,0,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,0.60)\", fill: \"rgba(255,0,0,0.24)\"},\n      validHover: {stroke: \"rgba(255,230,102,0.80)\", fill: \"rgba(255,230,102,0.64)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,0.50)\", fill: \"rgba(255,0,0,0.40)\"}\n    },\n    9: {\n      valid: {stroke: \"rgba(255,0,255,0.50)\", fill: \"rgba(255,0,255,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.80)\"},\n      validSelected: {stroke: \"rgba(230,102,255,1.00)\", fill: \"rgba(213,0,255,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,0.60)\", fill: \"rgba(255,0,0,0.24)\"},\n      validHover: {stroke: \"rgba(230,102,255,0.80)\", fill: \"rgba(230,102,255,0.64)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,0.50)\", fill: \"rgba(255,0,0,0.40)\"}\n    }\n  },\n  attributeColor: [\n    {\n      valid: {stroke: \"rgba(204,204,204,1.00)\", fill: \"rgba(204,204,204,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.40)\"},\n      validSelected: {stroke: \"rgba(204,204,204,1.00)\", fill: \"rgba(204,204,204,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"},\n      validHover: {stroke: \"rgba(204,204,204,1.00)\", fill: \"rgba(204,204,204,0.80)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"}\n    },\n    {\n      valid: {stroke: \"rgba(153,51,255,1.00)\", fill: \"rgba(153,51,255,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.40)\"},\n      validSelected: {stroke: \"rgba(153,51,255,1.00)\", fill: \"rgba(153,51,255,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"},\n      validHover: {stroke: \"rgba(153,51,255,1.00)\", fill: \"rgba(153,51,255,0.80)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"}\n    },\n    {\n      valid: {stroke: \"rgba(51,254,51,1.00)\", fill: \"rgba(51,254,51,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.40)\"},\n      validSelected: {stroke: \"rgba(51,254,51,1.00)\", fill: \"rgba(51,254,51,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"},\n      validHover: {stroke: \"rgba(51,254,51,1.00)\", fill: \"rgba(51,254,51,0.80)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"}\n    },\n    {\n      valid: {stroke: \"rgba(255,51,255,1.00)\", fill: \"rgba(255,51,255,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.40)\"},\n      validSelected: {stroke: \"rgba(255,51,255,1.00)\", fill: \"rgba(255,51,255,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"},\n      validHover: {stroke: \"rgba(255,51,255,1.00)\", fill: \"rgba(255,51,255,0.80)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"}\n    },\n    {\n      valid: {stroke: \"rgba(204,255,51,1.00)\", fill: \"rgba(204,255,51,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.40)\"},\n      validSelected: {stroke: \"rgba(204,255,51,1.00)\", fill: \"rgba(204,255,51,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"},\n      validHover: {stroke: \"rgba(204,255,51,1.00)\", fill: \"rgba(204,255,51,0.80)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"}\n    },\n    {\n      valid: {stroke: \"rgba(51,153,255,1.00)\", fill: \"rgba(51,153,255,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.40)\"},\n      validSelected: {stroke: \"rgba(51,153,255,1.00)\", fill: \"rgba(51,153,255,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"},\n      validHover: {stroke: \"rgba(51,153,255,1.00)\", fill: \"rgba(51,153,255,0.80)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"}\n    },\n    {\n      valid: {stroke: \"rgba(255,153,51,1.00)\", fill: \"rgba(255,153,51,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.40)\"},\n      validSelected: {stroke: \"rgba(255,153,51,1.00)\", fill: \"rgba(255,153,51,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"},\n      validHover: {stroke: \"rgba(255,153,51,1.00)\", fill: \"rgba(255,153,51,0.80)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"}\n    },\n    {\n      valid: {stroke: \"rgba(51,255,238,1.00)\", fill: \"rgba(51,255,238,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.40)\"},\n      validSelected: {stroke: \"rgba(51,255,238,1.00)\", fill: \"rgba(51,255,238,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"},\n      validHover: {stroke: \"rgba(51,255,238,1.00)\", fill: \"rgba(51,255,238,0.80)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"}\n    },\n    {\n      valid: {stroke: \"rgba(255,221,51,1.00)\", fill: \"rgba(255,221,51,0.40)\"},\n      invalid: {stroke: \"rgba(255,153,102,1.00)\", fill: \"rgba(255,153,102,0.40)\"},\n      validSelected: {stroke: \"rgba(255,221,51,1.00)\", fill: \"rgba(255,221,51,0.80)\"},\n      invalidSelected: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"},\n      validHover: {stroke: \"rgba(255,221,51,1.00)\", fill: \"rgba(255,221,51,0.80)\"},\n      invalidHover: {stroke: \"rgba(255,0,0,1.00)\", fill: \"rgba(255,0,0,0.80)\"}\n    }\n  ],\n  lineColor: {\n    1: \"rgba(102, 111, 255, 1 )\",\n    3: \"rgba(102, 230, 255, 1)\",\n    5: \"rgba(191, 255, 102, 1)\",\n    7: \"rgba(255, 230, 102, 1)\",\n    9: \"rgba(230, 102, 255, 1)\"\n  },\n  attributeLineColor: [\n    \"rgba(204, 204, 204, 1)\",\n    \"rgba(153, 51, 255, 1)\",\n    \"rgba(51, 254, 51, 1)\",\n    \"rgba(255, 51, 255, 1)\",\n    \"rgba(204, 255, 51, 1)\",\n    \"rgba(51, 153, 255, 1)\",\n    \"rgba(255, 153, 51, 1)\",\n    \"rgba(51, 255, 238, 1)\",\n    \"rgba(255, 221, 51, 1)\"\n  ],\n  color: 1,\n  width: 2,\n  opacity: 9\n};\n\nexport { getConfig, polygonConfig, styleDefaultConfig };\n","import _ from 'lodash';\nimport { INVALID_COLOR, toolStyleConverter } from '@labelbee/lb-utils';\nimport { ESortDirection, EDragTarget, DEFAULT_TEXT_OFFSET } from '../../constant/annotation.js';\nimport { EPolygonPattern } from '../../constant/tool.js';\nimport AxisUtils from '../../utils/tool/AxisUtils.js';\nimport CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\nimport DrawUtils from '../../utils/tool/DrawUtils.js';\nimport PolygonUtils from '../../utils/tool/PolygonUtils.js';\nimport { polygonConfig } from '../../constant/defaultConfig.js';\nimport PolygonOperation from './polygonOperation.js';\nimport { BasicToolOperation } from './basicToolOperation.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass PointCloud2dOperation extends PolygonOperation {\n  constructor(props) {\n    super(props);\n    this.highlightAttributeList = [];\n    this.rightMouseUp = (e) => {\n      var _a;\n      if (this.drawingPointList.length > 0) {\n        this.addDrawingPointToPolygonList();\n        return;\n      }\n      this.selection.setSelectedIDs(this.hoverID, e.ctrlKey);\n      this.emit(\"setSelectedIDs\", this.selection.selectedIDs);\n      const hoverAttribute = (_a = this.polygonList.find((v) => v.id === this.hoverID)) == null ? void 0 : _a.attribute;\n      if (hoverAttribute && hoverAttribute !== this.defaultAttribute) {\n        this.emit(\"syncAttribute\", hoverAttribute);\n      }\n    };\n    this.onKeyDown = () => {\n    };\n    this.onKeyUp = () => {\n    };\n    this.renderSingleSelectedPolygon = (selectedPolygon) => {\n      var _a;\n      if (selectedPolygon) {\n        const color = this.getPointCloudLineColor(selectedPolygon);\n        const polygon = AxisUtils.changePointListByZoom(selectedPolygon.pointList, this.zoom, this.currentPos);\n        DrawUtils.drawSelectedPolygonWithFillAndLine(this.canvas, polygon, {\n          fillColor: \"transparent\",\n          strokeColor: color,\n          pointColor: \"white\",\n          thickness: 2,\n          lineCap: \"round\",\n          isClose: true,\n          lineType: (_a = this.config) == null ? void 0 : _a.lineType\n        });\n        if (selectedPolygon.isRect === true && this.showDirectionLine === true) {\n          this.renderRectPolygonDirection(polygon);\n          if (selectedPolygon == null ? void 0 : selectedPolygon.trackID) {\n            this.renderdrawTrackID(selectedPolygon);\n          }\n        }\n      }\n    };\n    this.emitUpdatePolygonByDrag = () => {\n      if (this.dragInfo) {\n        const {originPolygonList} = this.dragInfo;\n        if (this.selectedIDs.length > 0) {\n          const emitUpdateList = [];\n          this.polygonList.forEach((polygon) => {\n            if (this.selectedIDs.includes(polygon.id)) {\n              const originPolygon = originPolygonList.find((i) => i.id === polygon.id);\n              if (originPolygon) {\n                emitUpdateList.push({newPolygon: polygon, originPolygon});\n              }\n            }\n          });\n          this.emit(\"updatePolygonByDrag\", emitUpdateList);\n        }\n      }\n    };\n    var _a, _b, _c, _d, _e, _f;\n    this.showDirectionLine = (_a = props.showDirectionLine) != null ? _a : true;\n    this.forbidAddNew = (_b = props.forbidAddNew) != null ? _b : false;\n    this.pointCloudConfig = (_c = CommonToolUtils.jsonParser(props.config)) != null ? _c : {};\n    this.hideAttributes = [];\n    this.checkMode = (_d = props.checkMode) != null ? _d : false;\n    if (this.forbidAddNew === false && props.checkMode === true) {\n      this.forbidAddNew = true;\n    }\n    this.config = __spreadProps(__spreadValues({}, polygonConfig), {\n      textConfigurable: false,\n      attributeConfigurable: true,\n      attributeList: (_f = (_e = this.pointCloudConfig) == null ? void 0 : _e.attributeList) != null ? _f : []\n    });\n  }\n  get getSelectedIDs() {\n    return this.selectedIDs;\n  }\n  get enableDrag() {\n    return Boolean(this.selectedIDs.length > 0 && this.dragInfo);\n  }\n  get visiblePolygonList() {\n    return this.polygonList.filter((i) => !this.hideAttributes.includes(i.attribute));\n  }\n  setHiddenAttributes(hideAttributes) {\n    this.hideAttributes = hideAttributes;\n  }\n  setConfig(config) {\n    var _a;\n    const newConfig = CommonToolUtils.jsonParser(config);\n    this.pointCloudConfig = newConfig;\n    this.config = __spreadProps(__spreadValues({}, this.config), {\n      attributeList: (_a = newConfig == null ? void 0 : newConfig.attributeList) != null ? _a : []\n    });\n  }\n  dragMouseDown(e) {\n    if (this.checkMode) {\n      return;\n    }\n    super.dragMouseDown(e);\n  }\n  deletePolygon(id) {\n    if (this.checkMode) {\n      return;\n    }\n    super.deletePolygons(id ? [id] : void 0);\n  }\n  deletePolygonPoint(index) {\n    if (this.checkMode) {\n      return;\n    }\n    super.deletePolygonPoint(index);\n  }\n  setSelectedIDs(selectedIDs) {\n    this.selection.hardSetSelectedIDs(selectedIDs);\n    if (this.selectedIDs.length < 2) {\n      this.setSelectedID(this.selectedIDs.length === 1 ? this.selectedIDs[0] : \"\");\n    }\n    this.render();\n  }\n  deleteSelectedID() {\n    super.deleteSelectedID();\n    this.selection.setSelectedIDs();\n    this.emit(\"deleteSelectedIDs\");\n  }\n  get selectedPolygons() {\n    return PolygonUtils.getPolygonByIDs(this.polygonList, this.selectedIDs);\n  }\n  updateSelectedPolygonsPoints(offset) {\n    var _a, _b;\n    if (this.selectedPolygons && ((_a = this.selectedPolygons) == null ? void 0 : _a.length) > 0) {\n      const originPolygonList = _.cloneDeep(this.selectedPolygons);\n      const updateList = [];\n      (_b = this.selectedPolygons) == null ? void 0 : _b.forEach((polygon, index) => {\n        polygon.pointList = polygon.pointList.map((point) => {\n          var _a2, _b2;\n          const {x, y} = point;\n          return __spreadProps(__spreadValues({}, point), {\n            x: x + ((_a2 = offset.x) != null ? _a2 : 0),\n            y: y + ((_b2 = offset.y) != null ? _b2 : 0)\n          });\n        });\n        updateList.push({originPolygon: originPolygonList[index], newPolygon: polygon});\n      });\n      this.emit(\"updateResult\");\n      this.emit(\"updatePolygonByDrag\", updateList);\n      this.render();\n      this.history.pushHistory(this.polygonList);\n    }\n  }\n  getLineColor() {\n    return \"rgba(0, 255, 255, 0.5)\";\n  }\n  getPointCloudLineColor(polygon) {\n    return polygon.valid === false ? INVALID_COLOR : toolStyleConverter.getColorFromConfig({attribute: polygon.attribute}, __spreadProps(__spreadValues({}, this.pointCloudConfig), {attributeConfigurable: true}), {}).stroke;\n  }\n  renderStaticPolygon() {\n    var _a;\n    if (this.isHidden === false) {\n      (_a = this.visiblePolygonList) == null ? void 0 : _a.forEach((polygon) => {\n        var _a2, _b, _c;\n        if ([...this.selectedIDs, this.editPolygonID].includes(polygon.id)) {\n          return;\n        }\n        const lineColor = this.getPointCloudLineColor(polygon);\n        const transformPointList = AxisUtils.changePointListByZoom(polygon.pointList || [], this.zoom, this.currentPos);\n        const isHighlight = this.highlightAttributeList.includes(polygon.attribute);\n        DrawUtils.drawPolygonWithFillAndLine(this.canvas, transformPointList, {\n          fillColor: isHighlight ? lineColor : \"transparent\",\n          strokeColor: lineColor,\n          pointColor: \"white\",\n          thickness: (_b = (_a2 = this.style) == null ? void 0 : _a2.width) != null ? _b : 2,\n          lineCap: \"round\",\n          isClose: true,\n          lineType: (_c = this.config) == null ? void 0 : _c.lineType\n        });\n        if (polygon == null ? void 0 : polygon.trackID) {\n          this.renderdrawTrackID(polygon);\n        }\n        if (polygon.isRect === true && this.showDirectionLine === true) {\n          this.renderRectPolygonDirection(transformPointList);\n        }\n      });\n    }\n  }\n  renderSelectedPolygon() {\n    var _a;\n    (_a = this.selectedPolygons) == null ? void 0 : _a.forEach((polygon) => {\n      this.renderSingleSelectedPolygon(polygon);\n    });\n  }\n  renderdrawTrackID(polygon) {\n    const pointList = AxisUtils.changePointListByZoom(polygon.pointList, this.zoom, this.currentPos);\n    const endPoint = pointList[pointList.length - 1];\n    const trackID = polygon == null ? void 0 : polygon.trackID;\n    DrawUtils.drawText(this.canvas, endPoint, `${trackID}`, __spreadValues({\n      textAlign: \"center\",\n      color: \"white\"\n    }, DEFAULT_TEXT_OFFSET));\n  }\n  renderRectPolygonDirection(polygon) {\n    if (polygon.length < 2) {\n      return;\n    }\n    DrawUtils.drawLine(this.canvas, polygon[0], polygon[1], {\n      color: \"white\",\n      thickness: 3,\n      lineDash: [6]\n    });\n  }\n  get currentPolygonListByPattern() {\n    return this.polygonList.filter((v) => {\n      if (this.pattern === EPolygonPattern.Rect) {\n        return v.isRect === true;\n      }\n      if (this.pattern === EPolygonPattern.Normal) {\n        return v.isRect !== true;\n      }\n      return true;\n    });\n  }\n  getHoverID(e) {\n    var _a;\n    const coordinate = this.getCoordinateUnderZoom(e);\n    const currentPolygonList = this.currentPolygonListByPattern;\n    const polygonListWithZoom = currentPolygonList.map((polygon) => __spreadProps(__spreadValues({}, polygon), {\n      pointList: AxisUtils.changePointListByZoom(polygon.pointList, this.zoom)\n    }));\n    return PolygonUtils.getHoverPolygonID(coordinate, polygonListWithZoom, 10, (_a = this.config) == null ? void 0 : _a.lineType);\n  }\n  switchToNextPolygon(sort = ESortDirection.ascend) {\n    if (this.drawingPointList.length > 0) {\n      return;\n    }\n    const sortList = this.currentPolygonListByPattern.map((v) => {\n      var _a, _b, _c, _d;\n      return __spreadProps(__spreadValues({}, v), {\n        x: (_b = (_a = v.pointList[0]) == null ? void 0 : _a.x) != null ? _b : 0,\n        y: (_d = (_c = v.pointList[0]) == null ? void 0 : _c.y) != null ? _d : 0\n      });\n    });\n    const nextSelectedResult = CommonToolUtils.getNextSelectedRectID(sortList, sort, this.selectedID);\n    if (nextSelectedResult) {\n      this.setSelectedIDs([nextSelectedResult.id]);\n      this.render();\n      return [nextSelectedResult.id];\n    }\n  }\n  setSelectedIdAfterAddingDrawing(newID) {\n    if (this.drawingPointList.length === 0) {\n      return;\n    }\n    this.setSelectedID(newID);\n  }\n  updateTextAttribute(newID) {\n    var _a, _b;\n    const oldID = this.selectedID;\n    if (newID !== oldID && oldID) {\n      (_a = this._textAttributeInstance) == null ? void 0 : _a.changeSelected();\n    }\n    if (!newID) {\n      (_b = this._textAttributeInstance) == null ? void 0 : _b.clearTextAttribute();\n    }\n  }\n  setSelectedID(newID) {\n    this.updateTextAttribute(newID);\n    this.selection.setSelectedIDs(newID);\n    this.render();\n  }\n  addPointInDrawing(e) {\n    if (this.forbidAddNew) {\n      return;\n    }\n    super.addPointInDrawing(e);\n  }\n  setCanvasSize(size) {\n    var _a, _b;\n    const pixel = this.pixelRatio;\n    this.size = size;\n    this.setImgInfo(size);\n    this.updateCanvasBasicStyle(this.basicCanvas, size, 0);\n    this.updateCanvasBasicStyle(this.canvas, size, 10);\n    (_a = this.ctx) == null ? void 0 : _a.scale(pixel, pixel);\n    (_b = this.basicCtx) == null ? void 0 : _b.scale(pixel, pixel);\n    this.initImgPos();\n    this.renderBasicCanvas();\n    this.render();\n  }\n  setPolygonValidAndRender(id, isUpdate = false, valid) {\n    if (isUpdate) {\n      super.setPolygonValidAndRender(id, valid);\n      return;\n    }\n    this.emit(\"validUpdate\", id);\n  }\n  onMouseDown(e) {\n    if (BasicToolOperation.prototype.onMouseDown.call(this, e) || this.forbidMouseOperation || e.ctrlKey === true || e.button !== 0) {\n      return;\n    }\n    if (this.selectedIDs.length < 2) {\n      return super.onMouseDown(e);\n    }\n    const dragStartCoord = this.getCoordinateUnderZoom(e);\n    this.dragInfo = {\n      dragStartCoord,\n      dragTarget: EDragTarget.Plane,\n      initPointList: [],\n      changePointIndex: [0],\n      originPolygon: this.selectedPolygon,\n      dragPrevCoord: dragStartCoord,\n      originPolygonList: this.polygonList,\n      selectedPolygons: this.selectedPolygons\n    };\n  }\n  setResultAndSelectedID(polygonList, selectedID) {\n    this.setPolygonList(polygonList);\n    this.setSelectedIDs([selectedID]);\n  }\n  setHighlightAttribute(attribute) {\n    this.highlightAttributeList = [attribute];\n    this.render();\n  }\n}\n\nexport { PointCloud2dOperation as default };\n","var cuboidFAB = \"<svg width=\\\"27\\\" height=\\\"27\\\" viewBox=\\\"0 0 27 27\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n    <path\\n        d=\\\"M13.5525 3.01367C7.75439 3.01367 3.03467 7.73076 3.03467 13.5289C3.0373 19.3297 7.75439 24.0468 13.5525 24.0468C19.3507 24.0468 24.0678 19.3297 24.0678 13.5315C24.0678 7.7334 19.3507 3.01367 13.5525 3.01367ZM19.3085 15.9072V15.9521C19.3085 15.9652 19.3059 15.9784 19.3059 15.9942C19.3059 16.0021 19.3059 16.0101 19.3032 16.018C19.3032 16.0312 19.3006 16.0443 19.2979 16.0575C19.2979 16.0654 19.2953 16.076 19.2953 16.0839C19.2927 16.0944 19.2927 16.105 19.29 16.1155C19.2874 16.1261 19.2848 16.1393 19.2848 16.1498C19.2821 16.1577 19.2821 16.1656 19.2795 16.1709C19.2769 16.1867 19.2716 16.2025 19.2689 16.2184C19.2689 16.221 19.2663 16.2236 19.2663 16.2263C19.2083 16.4504 19.0923 16.664 18.9156 16.8406L15.8386 19.9177C15.3112 20.445 14.449 20.445 13.9243 19.9177C13.397 19.3903 13.397 18.5281 13.9243 18.0034L14.6863 17.2414H9.14922C8.40303 17.2414 7.79394 16.6323 7.79394 15.8861C7.79394 15.1399 8.40303 14.5309 9.14922 14.5309H17.9559C18.3039 14.5309 18.652 14.6627 18.9156 14.9264C19.1793 15.19 19.3111 15.5381 19.3111 15.8861C19.3111 15.894 19.3085 15.902 19.3085 15.9072ZM19.3111 11.1743C19.3111 11.9205 18.7021 12.5296 17.9559 12.5296H9.14922C8.80117 12.5296 8.45312 12.3978 8.18945 12.1341C7.92578 11.8704 7.79394 11.5224 7.79394 11.1743V11.1532V11.111C7.79394 11.0979 7.79658 11.082 7.79658 11.0688C7.79658 11.0609 7.79658 11.053 7.79922 11.0451C7.79922 11.0319 7.80186 11.0187 7.80449 11.0056C7.80449 10.9977 7.80713 10.9871 7.80713 10.9792C7.80977 10.9687 7.80976 10.9581 7.8124 10.9476C7.81504 10.937 7.81768 10.9238 7.81768 10.9133C7.82031 10.9054 7.82031 10.8975 7.82295 10.8922C7.82559 10.8764 7.83086 10.8605 7.8335 10.8447C7.8335 10.8421 7.83613 10.8395 7.83613 10.8368C7.89414 10.6127 8.01016 10.3991 8.18682 10.2225L11.2612 7.14805C11.7886 6.6207 12.6508 6.6207 13.1755 7.14805C13.7028 7.67539 13.7028 8.5376 13.1755 9.0623L12.4187 9.82168H17.9559C18.6994 9.82168 19.3111 10.4308 19.3111 11.1743Z\\\"\\n        fill=\\\"#2C7EFF\\\" />\\n</svg>\";\n\nexport { cuboidFAB as default };\n","import CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\nimport AxisUtils from '../../utils/tool/AxisUtils.js';\nimport uuid from '../../utils/uuid.js';\nimport { getCuboidHoverRange, getPlainPointsByDiagonalPoints, getPointsByBottomRightPoint, getCuboidDragMove, isCuboidWithInLimits, getHighlightPoints, getHighlightLines, getToggleDirectionButtonOffset, getCuboidTextAttributeOffset } from '../../utils/tool/CuboidUtils.js';\nimport PolygonUtils from '../../utils/tool/PolygonUtils.js';\nimport { EDragStatus, EDragTarget, ECuboidDirection } from '../../constant/annotation.js';\nimport AttributeUtils from '../../utils/tool/AttributeUtils.js';\nimport { DEFAULT_TEXT_MAX_WIDTH } from '../../constant/tool.js';\nimport EKeyCode from '../../constant/keyCode.js';\nimport { BasicToolOperation } from './basicToolOperation.js';\nimport DrawUtils from '../../utils/tool/DrawUtils.js';\nimport CuboidToggleButtonClass from './cuboidToggleButtonClass.js';\nimport TextAttributeClass from './textAttributeClass.js';\nimport Locale from '../../locales/index.js';\nimport { EMessage } from '../../locales/constants.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar EDrawingStatus;\n(function(EDrawingStatus2) {\n  EDrawingStatus2[EDrawingStatus2[\"Ready\"] = 1] = \"Ready\";\n  EDrawingStatus2[EDrawingStatus2[\"FirstPoint\"] = 2] = \"FirstPoint\";\n  EDrawingStatus2[EDrawingStatus2[\"Cuboid\"] = 3] = \"Cuboid\";\n})(EDrawingStatus || (EDrawingStatus = {}));\nconst TEXT_MAX_WIDTH = 164;\nclass CuboidOperation extends BasicToolOperation {\n  constructor(props) {\n    super(props);\n    this.drawingStatus = 1;\n    this.cuboidList = [];\n    this.hoverID = \"\";\n    this.getHoverData = (e) => {\n      const coordinate = this.getCoordinateUnderZoom(e);\n      const {currentShowList} = this;\n      if ((currentShowList == null ? void 0 : currentShowList.length) > 0) {\n        const polygonList = currentShowList.map((cuboid) => {\n          return {id: cuboid.id, pointList: AxisUtils.changePointListByZoom(getCuboidHoverRange(cuboid), this.zoom)};\n        });\n        const hoverID = PolygonUtils.getHoverPolygonID(coordinate, polygonList);\n        if (hoverID) {\n          return {\n            hoverID,\n            hoverCuboid: currentShowList.find((cuboid) => cuboid.id === hoverID)\n          };\n        }\n      }\n      return {};\n    };\n    this.textChange = (v) => {\n      if (this.config.textConfigurable === false || !this.selectedID) {\n        return;\n      }\n      this.setCuboidList(AttributeUtils.textChange(v, this.selectedID, this.cuboidList));\n      this.emit(\"selectedChange\");\n      this.render();\n    };\n    this.config = CommonToolUtils.jsonParser(props.config);\n    this.getCurrentSelectedData = this.getCurrentSelectedData.bind(this);\n    this.updateSelectedTextAttribute = this.updateSelectedTextAttribute.bind(this);\n  }\n  get selectedText() {\n    var _a, _b;\n    return (_b = (_a = this.selectedCuboid) == null ? void 0 : _a.textAttribute) != null ? _b : \"\";\n  }\n  destroy() {\n    super.destroy();\n    if (this._textAttributeInstance) {\n      this._textAttributeInstance.clearTextAttribute();\n    }\n  }\n  get currentShowList() {\n    let cuboidList = [];\n    const [showingCuboid, selectedCuboids] = CommonToolUtils.getRenderResultList(this.cuboidList, CommonToolUtils.getSourceID(this.basicResult), this.attributeLockList, this.selectedID ? [this.selectedID] : void 0);\n    cuboidList = showingCuboid;\n    if (this.isHidden) {\n      cuboidList = [];\n    }\n    if (selectedCuboids.length === 1) {\n      cuboidList.push(selectedCuboids[0]);\n    }\n    return cuboidList;\n  }\n  get selectedCuboid() {\n    return this.cuboidList.find((v) => v.id === this.selectedID);\n  }\n  get dataList() {\n    return this.cuboidList;\n  }\n  get isNeedCheckCuboidSize() {\n    var _a, _b;\n    return ((_a = this.config) == null ? void 0 : _a.minWidth) >= 0 && ((_b = this.config) == null ? void 0 : _b.minHeight) >= 0;\n  }\n  getIsHoverSelectedCuboid(e) {\n    const currentCoord = this.getCoordinateUnderZoom(e);\n    const {selectedCuboid} = this;\n    return selectedCuboid && AxisUtils.isCloseCuboid(currentCoord, AxisUtils.changeCuboidByZoom(selectedCuboid, this.zoom));\n  }\n  isForbiddenMove(e, cuboid) {\n    const coord = this.getCoordinateInOrigin(e);\n    if (coord.y > cuboid.frontPoints.br.y) {\n      return true;\n    }\n    return false;\n  }\n  updateSelectedCuboid(newCuboid) {\n    this.cuboidList = this.cuboidList.map((cuboid) => {\n      if (cuboid.id === this.selectedID) {\n        return newCuboid;\n      }\n      return cuboid;\n    });\n  }\n  getStylesToRender(attribute, valid) {\n    var _a, _b;\n    const toolColor = this.getColor(attribute);\n    const strokeColor = valid ? toolColor == null ? void 0 : toolColor.valid.stroke : toolColor == null ? void 0 : toolColor.invalid.stroke;\n    const fillColor = valid ? toolColor == null ? void 0 : toolColor.valid.fill : toolColor == null ? void 0 : toolColor.invalid.fill;\n    const lineWidth = (_b = (_a = this.style) == null ? void 0 : _a.width) != null ? _b : 2;\n    return {strokeColor, toolColor, fillColor, lineWidth};\n  }\n  getCurrentSelectedData() {\n    const {selectedCuboid} = this;\n    if (!selectedCuboid) {\n      return;\n    }\n    const {strokeColor: color} = this.getStylesToRender(selectedCuboid.attribute, selectedCuboid.valid);\n    return {\n      width: TEXT_MAX_WIDTH,\n      textAttribute: selectedCuboid.textAttribute,\n      color\n    };\n  }\n  updateSelectedTextAttribute(newTextAttribute) {\n    if (this._textAttributeInstance && newTextAttribute && this.selectedID) {\n      let textAttribute = newTextAttribute;\n      if (AttributeUtils.textAttributeValidate(this.config.textCheckType, \"\", textAttribute) === false) {\n        this.emit(\"messageError\", AttributeUtils.getErrorNotice(this.config.textCheckType, this.lang));\n        textAttribute = \"\";\n      }\n      this.setCuboidList(AttributeUtils.textChange(textAttribute, this.selectedID, this.cuboidList));\n      this.history.pushHistory(this.cuboidList);\n      this.emit(\"updateTextAttribute\");\n      this.render();\n    }\n  }\n  setResult(cuboidList) {\n    this.clearActiveStatus();\n    this.setCuboidList(cuboidList);\n    this.render();\n  }\n  get currentPageResult() {\n    return this.cuboidList;\n  }\n  clearResult() {\n    this.setCuboidList([], true);\n    this.deleteSelectedID();\n    this.render();\n  }\n  exportData() {\n    const {cuboidList} = this;\n    return [cuboidList, this.basicImgInfo];\n  }\n  setSelectedID(newID) {\n    var _a, _b;\n    const oldID = this.selectedID;\n    if (newID !== oldID && oldID) {\n      (_a = this._textAttributeInstance) == null ? void 0 : _a.changeSelected();\n    }\n    if (!newID) {\n      (_b = this._textAttributeInstance) == null ? void 0 : _b.clearTextAttribute();\n    }\n    this.selectedID = newID;\n    this.emit(\"selectedChange\");\n  }\n  setSelectedIDAndRender(newID) {\n    this.setSelectedID(newID);\n    this.render();\n  }\n  setCuboidValidAndRender(id) {\n    if (!id) {\n      return;\n    }\n    const newPolygonList = this.cuboidList.map((cuboid) => {\n      if (cuboid.id === id) {\n        return __spreadProps(__spreadValues({}, cuboid), {\n          valid: !cuboid.valid\n        });\n      }\n      return cuboid;\n    });\n    this.setCuboidList(newPolygonList, true);\n    this.history.pushHistory(this.cuboidList);\n    this.render();\n  }\n  onRightDblClick(e) {\n    super.onRightDblClick(e);\n    const {hoverID} = this.getHoverData(e);\n    if (this.selectedID && this.selectedID === hoverID) {\n      this.deleteCuboid(hoverID);\n    }\n  }\n  setCuboidList(cuboidList, isUpload = false) {\n    const oldLen = this.cuboidList.length;\n    this.cuboidList = cuboidList;\n    if (oldLen !== cuboidList.length) {\n      this.emit(\"updatePageNumber\");\n    }\n    if (isUpload) {\n      this.emit(\"updateResult\");\n    }\n  }\n  deleteCuboid(id) {\n    var _a;\n    if (!id) {\n      return;\n    }\n    this.setCuboidList(this.cuboidList.filter((v) => v.id !== id));\n    this.history.pushHistory(this.cuboidList);\n    this.setSelectedID(\"\");\n    (_a = this._textAttributeInstance) == null ? void 0 : _a.clearTextAttribute();\n    this.render();\n  }\n  onKeyDown(e) {\n    if (!CommonToolUtils.hotkeyFilter(e)) {\n      return;\n    }\n    if (super.onKeyDown(e) === false) {\n      return;\n    }\n    const {keyCode} = e;\n    switch (keyCode) {\n      case EKeyCode.Ctrl:\n        if (this.drawingCuboid) {\n          this.drawingCuboid = __spreadProps(__spreadValues({}, this.drawingCuboid), {\n            valid: false\n          });\n          this.render();\n        }\n        break;\n      case EKeyCode.Delete:\n        if (this.selectedID) {\n          this.deleteCuboid(this.selectedID);\n        }\n        break;\n      case EKeyCode.Z:\n        this.setIsHidden(!this.isHidden);\n        this.render();\n        break;\n      case EKeyCode.F:\n        if (this.selectedID) {\n          this.setCuboidValidAndRender(this.selectedID);\n        }\n        break;\n      default: {\n        if (this.config.attributeConfigurable) {\n          const keyCode2Attribute = AttributeUtils.getAttributeByKeycode(keyCode, this.config.attributeList);\n          if (keyCode2Attribute !== void 0) {\n            this.setDefaultAttribute(keyCode2Attribute);\n          }\n        }\n      }\n    }\n  }\n  onKeyUp(e) {\n    super.onKeyUp(e);\n    switch (e.keyCode) {\n      case EKeyCode.Ctrl:\n        if (this.drawingCuboid) {\n          this.drawingCuboid = __spreadProps(__spreadValues({}, this.drawingCuboid), {\n            valid: true\n          });\n          this.render();\n        }\n        break;\n    }\n  }\n  onMouseDown(e) {\n    if (super.onMouseDown(e) || this.forbidMouseOperation || e.ctrlKey === true) {\n      return;\n    }\n    const {selectedCuboid} = this;\n    if (!selectedCuboid || e.button === 2 || e.button === 0 && this.isSpaceKey === true) {\n      return;\n    }\n    if (!this.getIsHoverSelectedCuboid(e)) {\n      return;\n    }\n    this.dragStatus = EDragStatus.Start;\n    const dragStartCoord = this.getCoordinateUnderZoom(e);\n    const DEFAULT_DRAG_INFO = {\n      initCuboid: selectedCuboid,\n      dragStartCoord\n    };\n    const highlightInfo = AxisUtils.returnClosePointOrLineInCuboid(dragStartCoord, AxisUtils.changeCuboidByZoom(selectedCuboid, this.zoom));\n    const firstHighlightInfo = highlightInfo == null ? void 0 : highlightInfo[0];\n    switch (firstHighlightInfo == null ? void 0 : firstHighlightInfo.type) {\n      case \"point\":\n        this.dragInfo = __spreadProps(__spreadValues({}, DEFAULT_DRAG_INFO), {\n          dragTarget: EDragTarget.Point,\n          positions: firstHighlightInfo.positions\n        });\n        break;\n      case \"line\":\n        this.dragInfo = __spreadProps(__spreadValues({}, DEFAULT_DRAG_INFO), {\n          dragTarget: EDragTarget.Line,\n          positions: firstHighlightInfo.positions\n        });\n        break;\n      default: {\n        this.dragInfo = __spreadProps(__spreadValues({}, DEFAULT_DRAG_INFO), {\n          dragTarget: EDragTarget.Cuboid\n        });\n      }\n    }\n  }\n  onMouseUp(e) {\n    if (super.onMouseUp(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return void 0;\n    }\n    if (this.dragInfo && this.dragStatus === EDragStatus.Move) {\n      this.dragInfo = void 0;\n      this.dragStatus = EDragStatus.Wait;\n      this.history.pushHistory(this.cuboidList);\n      this.emit(\"updateResult\");\n      return;\n    }\n    const basicSourceID = CommonToolUtils.getSourceID(this.basicResult);\n    if (e.button === 0) {\n      if (this.hoverID && e.ctrlKey && !this.drawingCuboid) {\n        this.setCuboidValidAndRender(this.hoverID);\n        return;\n      }\n      if (!this.drawingCuboid) {\n        this.createNewDrawingCuboid(e, basicSourceID);\n        return;\n      }\n      if (this.drawingCuboid) {\n        switch (this.drawingStatus) {\n          case 2:\n            this.closeNewDrawingFrontPlane();\n            break;\n          case 3:\n            this.closeAndCreateNewCuboid();\n            break;\n        }\n      }\n    }\n    if (e.button === 2) {\n      this.rightMouseUp(e);\n    }\n  }\n  onMouseMove(e) {\n    var _a;\n    if (super.onMouseMove(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return;\n    }\n    if (this.selectedID && this.dragInfo) {\n      this.onDragMove(e);\n      return;\n    }\n    if (this.drawingCuboid) {\n      if (this.drawingFrontPlanesMove(e)) {\n        return;\n      }\n      this.drawingBackPlaneMove(e);\n      return;\n    }\n    this.hoverID = (_a = this.getHoverData(e).hoverID) != null ? _a : \"\";\n    this.onHoverMove(e);\n  }\n  drawingFrontPlanesMove(e) {\n    if (this.drawingCuboid && this.firstClickCoord && this.drawingStatus === 2) {\n      const coord = this.getCoordinateInOrigin(e);\n      this.drawingCuboid = __spreadProps(__spreadValues({}, this.drawingCuboid), {\n        frontPoints: getPlainPointsByDiagonalPoints(this.firstClickCoord, coord)\n      });\n      this.render();\n      return true;\n    }\n  }\n  drawingBackPlaneMove(e) {\n    if (this.drawingCuboid && this.firstClickCoord && this.drawingStatus === 3) {\n      const coord = this.getCoordinateInOrigin(e);\n      if (this.isForbiddenMove(e, this.drawingCuboid)) {\n        return;\n      }\n      this.drawingCuboid = __spreadProps(__spreadValues({}, this.drawingCuboid), {\n        backPoints: getPointsByBottomRightPoint({coord, points: this.drawingCuboid.frontPoints})\n      });\n      this.render();\n    }\n  }\n  onDragMove(e) {\n    if (!this.dragInfo || !this.selectedID) {\n      return;\n    }\n    const {dragTarget, initCuboid, dragStartCoord, positions} = this.dragInfo;\n    const coordinate = this.getCoordinateUnderZoom(e);\n    const offset = {\n      x: (coordinate.x - dragStartCoord.x) / this.zoom,\n      y: (coordinate.y - dragStartCoord.y) / this.zoom\n    };\n    this.dragStatus = EDragStatus.Move;\n    const newCuboid = getCuboidDragMove({offset, cuboid: initCuboid, dragTarget, positions});\n    if ((newCuboid == null ? void 0 : newCuboid.backPoints) && (newCuboid == null ? void 0 : newCuboid.backPoints.br.y) > (newCuboid == null ? void 0 : newCuboid.frontPoints.br.y)) {\n      return;\n    }\n    if (newCuboid) {\n      this.updateSelectedCuboid(newCuboid);\n    }\n    this.render();\n  }\n  onHoverMove(e) {\n    const {selectedCuboid} = this;\n    if (selectedCuboid) {\n      const currentCoord = this.getCoordinateUnderZoom(e);\n      const highlightInfo = AxisUtils.returnClosePointOrLineInCuboid(currentCoord, AxisUtils.changeCuboidByZoom(selectedCuboid, this.zoom), {\n        zoom: 1 / this.zoom,\n        scope: 5\n      });\n      this.highlightInfo = highlightInfo;\n      this.render();\n    }\n  }\n  createNewDrawingCuboid(e, basicSourceID) {\n    if (!this.imgInfo) {\n      return;\n    }\n    const coordinate = this.getCoordinateInOrigin(e);\n    this.drawingCuboid = {\n      attribute: this.defaultAttribute,\n      direction: ECuboidDirection.Front,\n      valid: !e.ctrlKey,\n      id: uuid(8, 62),\n      sourceID: basicSourceID,\n      textAttribute: \"\",\n      order: CommonToolUtils.getMaxOrder(this.cuboidList.filter((v) => CommonToolUtils.isSameSourceID(v.sourceID, basicSourceID))) + 1,\n      frontPoints: {\n        tl: coordinate,\n        bl: coordinate,\n        tr: coordinate,\n        br: coordinate\n      }\n    };\n    this.firstClickCoord = __spreadValues({}, coordinate);\n    this.drawingStatus = 2;\n    if (this.config.textConfigurable) {\n      let textAttribute = \"\";\n      textAttribute = AttributeUtils.getTextAttribute(this.cuboidList.filter((cuboid) => CommonToolUtils.isSameSourceID(cuboid.sourceID, basicSourceID)), this.config.textCheckType);\n      this.drawingCuboid = __spreadProps(__spreadValues({}, this.drawingCuboid), {\n        textAttribute\n      });\n    }\n  }\n  closeNewDrawingFrontPlane() {\n    this.drawingStatus = 3;\n  }\n  closeAndCreateNewCuboid() {\n    var _a, _b;\n    if (!((_a = this.drawingCuboid) == null ? void 0 : _a.frontPoints) || !this.drawingCuboid.backPoints) {\n      return;\n    }\n    if (this.isNeedCheckCuboidSize && isCuboidWithInLimits({cuboid: this.drawingCuboid, config: this.config}) === false) {\n      this.emit(\"messageInfo\", Locale.getMessagesByLocale(EMessage.RectErrorSizeNotice, this.lang));\n    } else {\n      this.setCuboidList([...this.cuboidList, this.drawingCuboid]);\n      this.setSelectedID((_b = this.drawingCuboid) == null ? void 0 : _b.id);\n      this.history.pushHistory(this.cuboidList);\n    }\n    this.clearDrawingStatus();\n    this.render();\n  }\n  deleteSelectedID() {\n    this.setSelectedID(\"\");\n  }\n  clearDrawingStatus() {\n    if (this.drawingCuboid) {\n      this.drawingCuboid = void 0;\n      this.drawingStatus = 1;\n    }\n  }\n  clearActiveStatus() {\n    this.clearDrawingStatus();\n    this.deleteSelectedID();\n  }\n  rightMouseUp(e) {\n    const {hoverID, hoverCuboid} = this.getHoverData(e);\n    this.setSelectedID(hoverID);\n    if (hoverCuboid) {\n      this.setDefaultAttribute(hoverCuboid.attribute);\n    }\n    if (this.drawingCuboid) {\n      this.clearDrawingStatus();\n    }\n    this.render();\n  }\n  renderHighlightCuboidCom(cuboid) {\n    const transformCuboid = AxisUtils.changeCuboidByZoom(cuboid, this.zoom, this.currentPos);\n    const isHover = transformCuboid.id === this.hoverID;\n    const isSelected = transformCuboid.id === this.selectedID;\n    const {strokeColor, lineWidth} = this.getStylesToRender(transformCuboid.attribute, transformCuboid.valid);\n    const defaultStyle = {\n      color: strokeColor,\n      thickness: lineWidth\n    };\n    if (isHover || isSelected) {\n      const hoverPointList = getHighlightPoints(transformCuboid);\n      hoverPointList.forEach((data) => {\n        DrawUtils.drawCircleWithFill(this.canvas, data.point, 5, __spreadValues({}, defaultStyle));\n      });\n      if (isSelected) {\n        const highlightLine = getHighlightLines(transformCuboid);\n        highlightLine.forEach((line) => {\n          DrawUtils.drawLine(this.canvas, line.p1, line.p2, {color: strokeColor, thickness: lineWidth + 2});\n        });\n        hoverPointList.forEach((data) => {\n          DrawUtils.drawCircleWithFill(this.canvas, data.point, 3, {color: \"white\"});\n        });\n      }\n    }\n  }\n  renderSingleCuboid(cuboid) {\n    var _a, _b;\n    const transformCuboid = AxisUtils.changeCuboidByZoom(cuboid, this.zoom, this.currentPos);\n    const {strokeColor, fillColor} = this.getStylesToRender(transformCuboid.attribute, transformCuboid.valid);\n    const lineWidth = (_b = (_a = this.style) == null ? void 0 : _a.width) != null ? _b : 2;\n    const {hiddenText = false} = this.style;\n    DrawUtils.drawCuboidWithText(this.canvas, transformCuboid, {strokeColor, fillColor, thickness: lineWidth}, {\n      config: this.config,\n      hiddenText,\n      selectedID: this.selectedID\n    });\n    this.renderTextAttribute();\n  }\n  setDefaultAttribute(defaultAttribute) {\n    const oldDefault = this.defaultAttribute;\n    this.defaultAttribute = defaultAttribute != null ? defaultAttribute : \"\";\n    if (oldDefault !== defaultAttribute) {\n      this.changeStyle(defaultAttribute);\n      this.emit(\"changeAttributeSidebar\");\n      const {selectedCuboid} = this;\n      if (this._textAttributeInstance) {\n        if (this.attributeLockList.length > 0 && !this.attributeLockList.includes(this.defaultAttribute)) {\n          this._textAttributeInstance.clearTextAttribute();\n        } else {\n          this._textAttributeInstance.updateIcon(this.getTextIconSvg(defaultAttribute));\n        }\n      }\n      if (selectedCuboid) {\n        this.setCuboidList(this.cuboidList.map((v) => {\n          if (v.id === this.selectedID) {\n            return __spreadProps(__spreadValues({}, v), {\n              attribute: this.defaultAttribute\n            });\n          }\n          return v;\n        }));\n        this.history.pushHistory(this.cuboidList);\n        this.render();\n        return;\n      }\n      if (this.drawingCuboid) {\n        this.drawingCuboid = __spreadProps(__spreadValues({}, this.drawingCuboid), {\n          attribute: this.defaultAttribute\n        });\n        this.render();\n      }\n    }\n  }\n  renderToggleButton() {\n    const {selectedCuboid} = this;\n    if (!this.ctx || !selectedCuboid) {\n      return;\n    }\n    const {attribute, valid} = selectedCuboid;\n    const {strokeColor: color} = this.getStylesToRender(attribute, valid);\n    if (!this.toggleButtonInstance) {\n      this.toggleButtonInstance = new CuboidToggleButtonClass({\n        container: this.container,\n        cuboidButtonMove: (type) => this.updateMouseOperation(type),\n        toggleDirection: (direction) => this.toggleDirection(direction)\n      });\n    }\n    const toggleOffset = getToggleDirectionButtonOffset({\n      cuboid: selectedCuboid,\n      zoom: this.zoom,\n      currentPos: this.currentPos\n    });\n    this.toggleButtonInstance.update({\n      left: toggleOffset.left,\n      top: toggleOffset.top,\n      color\n    });\n  }\n  renderTextAttribute() {\n    var _a;\n    const {selectedCuboid} = this;\n    if (!this.ctx || this.config.textConfigurable === false || !selectedCuboid) {\n      return;\n    }\n    const {strokeColor: color} = this.getStylesToRender(selectedCuboid.attribute, selectedCuboid.valid);\n    const {attribute, textAttribute, frontPoints} = selectedCuboid;\n    const offset = getCuboidTextAttributeOffset({\n      cuboid: selectedCuboid,\n      currentPos: this.currentPos,\n      zoom: this.zoom\n    });\n    const newWidth = (frontPoints.br.x - frontPoints.bl.x) * this.zoom * 0.8;\n    if (!this._textAttributeInstance) {\n      this._textAttributeInstance = new TextAttributeClass({\n        width: DEFAULT_TEXT_MAX_WIDTH,\n        container: this.container,\n        icon: this.getTextIconSvg(attribute),\n        color,\n        getCurrentSelectedData: this.getCurrentSelectedData,\n        updateSelectedTextAttribute: this.updateSelectedTextAttribute\n      });\n    }\n    if (this._textAttributeInstance && !((_a = this._textAttributeInstance) == null ? void 0 : _a.isExit)) {\n      this._textAttributeInstance.appendToContainer();\n    }\n    this._textAttributeInstance.update(`${textAttribute}`, {\n      left: offset.left,\n      top: offset.top,\n      color,\n      width: newWidth\n    });\n  }\n  renderDrawing() {\n    if (this.drawingCuboid) {\n      this.renderSingleCuboid(this.drawingCuboid);\n    }\n  }\n  renderStatic() {\n    if (!this.isHidden) {\n      this.currentShowList.forEach((cuboid) => this.renderSingleCuboid(cuboid));\n    }\n  }\n  renderSelected() {\n    var _a;\n    const {selectedCuboid} = this;\n    if (selectedCuboid) {\n      this.renderSingleCuboid(selectedCuboid);\n      this.renderHighlightCuboidCom(selectedCuboid);\n      this.renderToggleButton();\n    } else {\n      (_a = this.toggleButtonInstance) == null ? void 0 : _a.clearCuboidButtonDOM();\n      this.toggleButtonInstance = void 0;\n    }\n  }\n  updateMouseOperation(type) {\n    if (type === \"in\") {\n      this.setForbidCursorLine(true);\n      this.setForbidOperation(true);\n      this.setShowDefaultCursor(true);\n    } else {\n      this.setForbidCursorLine(false);\n      this.setShowDefaultCursor(false);\n      this.setForbidOperation(false);\n    }\n  }\n  toggleDirection(direction) {\n    if (this.cuboidList && this.selectedCuboid) {\n      this.setCuboidList(this.cuboidList.map((i) => {\n        var _a;\n        return i.id === ((_a = this.selectedCuboid) == null ? void 0 : _a.id) ? __spreadProps(__spreadValues({}, i), {direction}) : i;\n      }));\n      this.history.pushHistory(this.cuboidList);\n      this.render();\n    }\n  }\n  renderHover() {\n    var _a;\n    if (this.dragInfo) {\n      return;\n    }\n    (_a = this.highlightInfo) == null ? void 0 : _a.forEach((data) => {\n      var _a2, _b;\n      const {strokeColor} = this.getStylesToRender(data.originCuboid.attribute, data.originCuboid.valid);\n      const thickness = 8;\n      switch (data.type) {\n        case \"point\":\n          (_a2 = data.points) == null ? void 0 : _a2.forEach((point) => {\n            DrawUtils.drawCircleWithFill(this.canvas, AxisUtils.changePointByZoom(point, this.zoom, this.currentPos), thickness, {\n              color: strokeColor\n            });\n          });\n          break;\n        case \"line\": {\n          const pointList = (_b = data.points) == null ? void 0 : _b.map((point) => AxisUtils.changePointByZoom(point, this.zoom, this.currentPos));\n          if (pointList) {\n            DrawUtils.drawLineWithPointList(this.canvas, pointList, {color: strokeColor, thickness});\n          }\n          break;\n        }\n      }\n    });\n  }\n  renderCuboid() {\n    this.renderStatic();\n    this.renderDrawing();\n    this.renderSelected();\n    this.renderHover();\n  }\n  render() {\n    if (!this.ctx) {\n      return;\n    }\n    super.render();\n    this.renderCuboid();\n    this.renderCursorLine(this.getLineColor(this.defaultAttribute));\n  }\n  undo() {\n    const cuboidList = this.history.undo();\n    if (cuboidList) {\n      if (cuboidList.length !== this.cuboidList.length) {\n        this.setSelectedID(\"\");\n      }\n      this.setCuboidList(cuboidList, true);\n      this.render();\n    }\n  }\n  redo() {\n    const cuboidList = this.history.redo();\n    if (cuboidList) {\n      if (cuboidList.length !== this.cuboidList.length) {\n        this.setSelectedID(\"\");\n      }\n      this.setCuboidList(cuboidList, true);\n      this.render();\n    }\n  }\n}\n\nexport { CuboidOperation as default };\n","import { ECuboidDirection } from '../../constant/annotation.js';\nimport cuboidFAB from '../../assets/attributeIcon/icon_cuboidFAB.svg.js';\nimport cuboidMore from '../../assets/attributeIcon/icon_cuboidMore.svg.js';\nimport cuboidRight from '../../assets/attributeIcon/icon_cuboidRight.svg.js';\nimport cuboidLeft from '../../assets/attributeIcon/icon_cuboidLeft.svg.js';\nimport cuboidTop from '../../assets/attributeIcon/icon_cuboidTop.svg.js';\n\nconst MORE_ICON_LISTS = [\n  {\n    icon: cuboidRight,\n    id: \"cuboidRight\"\n  },\n  {\n    icon: cuboidLeft,\n    id: \"cuboidLeft\"\n  },\n  {\n    icon: cuboidTop,\n    id: \"cuboidTop\"\n  }\n];\nclass CuboidToggleButtonClass {\n  constructor(props) {\n    const {container, cuboidButtonMove, toggleDirection} = props;\n    this.container = container;\n    this.direction = ECuboidDirection.Front;\n    this.isFrontSide = true;\n    this.cuboidButtonMove = cuboidButtonMove;\n    this.onToggleDirection = toggleDirection;\n    this._cuboidButtonDOM = this.initCuboidButtonDOM();\n    this._cuboidFABDOM = this.initcuboidFABDOM(cuboidFAB);\n    this._cuboidMoreDOM = this.initcuboidMoreDOM(cuboidMore);\n    this._cuboidMoreListDOM = this.initcuboidMoreListDOM();\n    this.appendToContainer();\n  }\n  appendToContainer() {\n    if (!this._cuboidButtonDOM || !this._cuboidFABDOM || !this._cuboidMoreDOM) {\n      return;\n    }\n    this.container.appendChild(this._cuboidButtonDOM);\n    this._cuboidButtonDOM.appendChild(this._cuboidFABDOM);\n    this._cuboidButtonDOM.appendChild(this._cuboidMoreDOM);\n  }\n  initCuboidButtonDOM() {\n    const _cuboidButtonDOM = document.createElement(\"div\");\n    _cuboidButtonDOM.setAttribute(\"id\", \"LABELBEE_CUBOID_BUTTON_BOX\");\n    _cuboidButtonDOM.setAttribute(\"style\", `\n        width: 40px;\n        height: 74px;\n        border-radius: 10px;\n        background-color: #FFFFFF;\n        z-index: 10;\n      `);\n    _cuboidButtonDOM.addEventListener(\"mouseover\", (e) => {\n      e.stopPropagation();\n      setTimeout(() => {\n        this.cuboidButtonMove(\"in\");\n      }, 100);\n    });\n    _cuboidButtonDOM.addEventListener(\"mouseleave\", (e) => {\n      e.stopPropagation();\n      setTimeout(() => {\n        this.cuboidButtonMove(\"out\");\n      }, 100);\n    });\n    return _cuboidButtonDOM;\n  }\n  initcuboidFABDOM(icon) {\n    const _cuboidFAB = document.createElement(\"div\");\n    _cuboidFAB.setAttribute(\"id\", \"CUBOID_FORWARD_AND_BACK_SWITCH\");\n    _cuboidFAB.innerHTML = icon;\n    _cuboidFAB.addEventListener(\"mouseup\", (e) => {\n      e.stopPropagation();\n      this.isFrontSide = !this.isFrontSide;\n      this.direction = this.isFrontSide ? ECuboidDirection.Front : ECuboidDirection.Back;\n      this.onToggleDirection(this.direction);\n    });\n    return _cuboidFAB;\n  }\n  initcuboidMoreDOM(icon) {\n    const _iconDOM = document.createElement(\"div\");\n    _iconDOM.setAttribute(\"id\", \"CUBOID_MORE_ICON\");\n    _iconDOM.innerHTML = icon;\n    _iconDOM.addEventListener(\"mouseup\", (e) => {\n      if (this._cuboidButtonDOM && this._cuboidMoreListDOM) {\n        if (this._cuboidButtonDOM.contains(this._cuboidMoreListDOM)) {\n          this.clearCuboidMoreListDOM();\n        } else {\n          this._cuboidButtonDOM.appendChild(this._cuboidMoreListDOM);\n        }\n      }\n      e.stopPropagation();\n    });\n    _iconDOM.addEventListener(\"mousedown\", (e) => {\n      e.stopPropagation();\n    });\n    _iconDOM.addEventListener(\"contextmenu\", (e) => {\n      e.stopPropagation();\n    });\n    return _iconDOM;\n  }\n  initcuboidMoreListDOM() {\n    const cuboidMoreListDOM = document.createElement(\"div\");\n    cuboidMoreListDOM.setAttribute(\"id\", \"CUBOID_MORE_LIST_ICON\");\n    cuboidMoreListDOM.setAttribute(\"style\", `\n        height: 36px;\n        border-radius: 10px;\n        background-color: #FFFFFF;\n        z-index: 10;\n        padding: 8px 10px;\n        position: absolute;\n        bottom: 0px;\n        left: 44px;\n        display: flex;\n      `);\n    let str = \"\";\n    const iconStyle = `margin-left:4px;margin-right:4px;display:flex;align-items:center;`;\n    MORE_ICON_LISTS.forEach((i, index) => {\n      const lastIconStyle = index === MORE_ICON_LISTS.length - 1 ? \"margin-left:0px;margin-right:0px;\" : \"\";\n      str += `<span id=${i.id} key=${index} style=${iconStyle}${lastIconStyle}>${i.icon}</span>`;\n    });\n    cuboidMoreListDOM.innerHTML = str;\n    cuboidMoreListDOM.childNodes.forEach((item) => {\n      item.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        switch (item == null ? void 0 : item.id) {\n          case \"cuboidLeft\":\n            this.onToggleDirection(ECuboidDirection.Left);\n            break;\n          case \"cuboidRight\":\n            this.onToggleDirection(ECuboidDirection.Right);\n            break;\n          case \"cuboidTop\":\n            this.onToggleDirection(ECuboidDirection.Top);\n            break;\n        }\n        this.clearCuboidMoreListDOM();\n        this.cuboidButtonMove(\"out\");\n      });\n    });\n    return cuboidMoreListDOM;\n  }\n  update(position) {\n    var _a;\n    const {left, top, color} = position;\n    (_a = this._cuboidButtonDOM) == null ? void 0 : _a.setAttribute(\"style\", `\n        position: absolute; \n        font-size: 14px; \n        left:${left}px; \n        top: ${top}px; \n        color: ${color};\n        width: 41px;\n        height: 74px;\n        border-radius: 10px;\n        background-color: #FFFFFF;\n        cursor: pointer;\n        text-align: center;\n        padding-top: 10px;\n        z-index: 10;\n      `);\n  }\n  clearCuboidButtonDOM() {\n    if (this._cuboidButtonDOM && this.container.contains(this._cuboidButtonDOM)) {\n      this.container.removeChild(this._cuboidButtonDOM);\n    }\n  }\n  clearCuboidMoreListDOM() {\n    if (this._cuboidButtonDOM && this._cuboidMoreListDOM && this._cuboidButtonDOM.contains(this._cuboidMoreListDOM)) {\n      this._cuboidButtonDOM.removeChild(this._cuboidMoreListDOM);\n    }\n  }\n}\n\nexport { CuboidToggleButtonClass as default };\n","var cuboidRight = \"<svg width=\\\"18\\\" height=\\\"18\\\" viewBox=\\\"0 0 18 18\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n    <path\\n        d=\\\"M16.425 5.04961C16.35 4.82461 16.2 4.67461 15.975 4.59961L9.525 1.14961C9.225 0.999609 8.85 0.999609 8.55 1.14961L2.025 4.59961C1.725 4.74961 1.5 5.12461 1.5 5.49961V12.2496C1.5 12.6246 1.725 12.9996 2.025 13.1496L8.475 16.5996C8.7 16.6746 8.925 16.7496 9.15 16.6746C9.225 16.6746 9.375 16.5996 9.45 16.5996L15.9 13.1496C16.275 12.9996 16.5 12.6246 16.5 12.2496V5.49961C16.5 5.34961 16.425 5.19961 16.425 5.04961ZM9.15 8.87461V15.2496L9 15.3996L2.85 12.0996V5.64961L9 2.34961L15.15 5.64961L9.15 8.87461Z\\\"\\n        fill=\\\"#2C7EFF\\\" />\\n</svg>\";\n\nexport { cuboidRight as default };\n","var cuboidLeft = \"<svg width=\\\"18\\\" height=\\\"18\\\" viewBox=\\\"0 0 18 18\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n    <path\\n        d=\\\"M16.425 5.04961C16.35 4.82461 16.2 4.67461 15.975 4.59961L9.525 1.14961C9.225 0.999609 8.85 0.999609 8.55 1.14961L2.025 4.59961C1.725 4.74961 1.5 5.12461 1.5 5.49961V12.2496C1.5 12.6246 1.725 12.9996 2.025 13.1496L8.475 16.5996C8.7 16.6746 8.925 16.7496 9.15 16.6746C9.225 16.6746 9.375 16.5996 9.45 16.5996L15.9 13.1496C16.275 12.9996 16.5 12.6246 16.5 12.2496V5.49961C16.5 5.34961 16.425 5.19961 16.425 5.04961ZM9.15 8.87461V15.2496L9 15.3996L2.85 12.0996V5.64961L9 2.34961L15.15 5.64961L9.15 8.87461Z\\\"\\n        fill=\\\"#2C7EFF\\\" />\\n    <path d=\\\"M9 8.5V2.5L8.5 2L2.5 5.5V12.5L9 8.5Z\\\" fill=\\\"#2C7EFF\\\" />\\n    <path d=\\\"M15.5 6L15 5.5L14.5 6L9 8.5V15.5H9.5L15.5 12.5V6Z\\\" fill=\\\"white\\\" />\\n</svg>\";\n\nexport { cuboidLeft as default };\n","var cuboidTop = \"<svg width=\\\"25\\\" height=\\\"25\\\" viewBox=\\\"0 0 25 25\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n    <g clip-path=\\\"url(#clip0_2295_37199)\\\">\\n        <path\\n            d=\\\"M5.16087 7.8398C5.00351 8.01726 4.94861 8.22216 4.99615 8.45452L5.23337 15.7654C5.25346 16.1002 5.44096 16.4249 5.72087 16.6098L11.9712 20.5356C12.2511 20.7204 12.6883 20.7277 13.0131 20.5402L18.8587 17.1652C19.1835 16.9777 19.3958 16.5954 19.3757 16.2606L19.1385 8.94971C19.0909 8.71735 19.0434 8.485 18.8659 8.32764C18.8284 8.26269 18.6885 8.17029 18.651 8.10533L12.4382 4.24447C12.1208 3.99471 11.6835 3.98735 11.3587 4.17485L5.51308 7.54985C5.38317 7.62485 5.29077 7.7648 5.16087 7.8398ZM12.1109 12.2276L17.6318 9.04014L17.8367 9.09505L18.0538 16.0711L12.468 19.2961L6.5351 15.62L6.31798 8.64399L12.1109 12.2276Z\\\"\\n            fill=\\\"#2C7EFF\\\" />\\n    </g>\\n    <defs>\\n        <clipPath id=\\\"clip0_2295_37199\\\">\\n            <rect width=\\\"18\\\" height=\\\"18\\\" fill=\\\"white\\\" transform=\\\"translate(9 24.5898) rotate(-120)\\\" />\\n        </clipPath>\\n    </defs>\\n</svg>\";\n\nexport { cuboidTop as default };\n","var cuboidMore = \"<svg width=\\\"16\\\" height=\\\"4\\\" viewBox=\\\"0 0 16 4\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n    <circle cx=\\\"2\\\" cy=\\\"2\\\" r=\\\"2\\\" fill=\\\"#2C7EFF\\\" />\\n    <circle cx=\\\"8\\\" cy=\\\"2\\\" r=\\\"2\\\" fill=\\\"#2C7EFF\\\" />\\n    <circle cx=\\\"14\\\" cy=\\\"2\\\" r=\\\"2\\\" fill=\\\"#2C7EFF\\\" />\\n</svg>\";\n\nexport { cuboidMore as default };\n","import { cloneDeep } from 'lodash';\nimport CommonToolUtils from '../../utils/tool/CommonToolUtils.js';\nimport RectUtils from '../../utils/tool/RectUtils.js';\nimport TagUtil from '../../utils/tool/TagUtils.js';\nimport { DEFAULT_TEXT_OFFSET } from '../../constant/annotation.js';\nimport { EToolName } from '../../constant/tool.js';\nimport AttributeUtils from '../../utils/tool/AttributeUtils.js';\nimport AxisUtils from '../../utils/tool/AxisUtils.js';\nimport DrawUtils from '../../utils/tool/DrawUtils.js';\nimport StyleUtils from '../../utils/tool/StyleUtils.js';\nimport { BasicToolOperation } from './basicToolOperation.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nconst TEXT_ATTRIBUTE_OFFSET = {\n  x: 8,\n  y: 26\n};\nconst newScope = 2;\nclass CheckOperation extends BasicToolOperation {\n  constructor(props) {\n    super(props);\n    this.getHoverRectID = (e) => {\n      var _a, _b;\n      const coordinate = this.getCoordinateUnderZoom(e);\n      const currentShowList = (_b = (_a = this.resultList.find((v) => v.toolName === EToolName.Rect)) == null ? void 0 : _a.result) != null ? _b : [];\n      if (currentShowList.length > 0) {\n        const hoverList = currentShowList.filter((rect) => RectUtils.isInRect(coordinate, rect, newScope, this.zoom));\n        if (hoverList.length === 0) {\n          return \"\";\n        }\n        if (hoverList.length === 1) {\n          return hoverList[0].id;\n        }\n        if (hoverList.length > 1) {\n          const rectSizeList = hoverList.map((rect) => ({size: rect.width * rect.height, id: rect.id})).sort((a, b) => a.size - b.size);\n          return rectSizeList[0].id;\n        }\n      }\n      return \"\";\n    };\n    this.resultList = [];\n    this.hoverID = [];\n    this.fillID = [];\n    this.render = this.render.bind(this);\n    this.drawPolygon = this.drawPolygon.bind(this);\n    this.drawRect = this.drawRect.bind(this);\n    this.drawTag = this.drawTag.bind(this);\n    this.setShowDefaultCursor(true);\n    this.forbidOperation = true;\n  }\n  onMouseDown(e) {\n    var _a, _b;\n    if (super.onMouseDown(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return true;\n    }\n    const newMouseSelectedID = this.mouseHoverID;\n    const currentShowList = (_b = (_a = this.resultList.find((v) => v.toolName === EToolName.Rect)) == null ? void 0 : _a.result) != null ? _b : [];\n    if (e.button === 0) {\n      let selectedID = [newMouseSelectedID];\n      let isShow = true;\n      if (newMouseSelectedID && currentShowList.find((rect) => rect.id === newMouseSelectedID && (rect == null ? void 0 : rect.isSelected))) {\n        isShow = false;\n      }\n      if (!newMouseSelectedID) {\n        selectedID = currentShowList.map((rect) => rect.id);\n        isShow = false;\n      }\n      this.emit(\"setSelectedID\", selectedID, isShow);\n      this.render();\n    }\n  }\n  updateRotate() {\n  }\n  onMouseMove(e) {\n    if (super.onMouseMove(e) || this.forbidMouseOperation || !this.imgInfo) {\n      return;\n    }\n    const oldMouseHoverID = this.mouseHoverID;\n    const newMouseHoverID = this.getHoverRectID(e);\n    if (oldMouseHoverID !== newMouseHoverID) {\n      this.mouseHoverID = newMouseHoverID;\n      let hoverID = [newMouseHoverID];\n      if (!newMouseHoverID) {\n        hoverID = [];\n      }\n      this.emit(\"setHoverID\", hoverID);\n      this.render();\n    }\n  }\n  setResult(result) {\n    this.resultList = cloneDeep(result);\n    this.render();\n  }\n  drawPolygon(polygonList, config) {\n    polygonList == null ? void 0 : polygonList.forEach((polygon) => {\n      var _a, _b, _c, _d, _e;\n      const toolColor = this.getColor(polygon.attribute, config);\n      const toolData = StyleUtils.getStrokeAndFill(toolColor, polygon.valid);\n      let thickness = (_b = (_a = this.style) == null ? void 0 : _a.width) != null ? _b : 2;\n      if (this.hoverID.includes(polygon.id)) {\n        thickness = 4;\n        DrawUtils.drawPolygonWithFillAndLine(this.canvas, AxisUtils.changePointListByZoom(polygon.pointList, this.zoom, this.currentPos), {\n          fillColor: toolData.fill,\n          strokeColor: toolData.stroke,\n          pointColor: \"white\",\n          thickness,\n          lineCap: \"round\",\n          isClose: true,\n          lineType: config == null ? void 0 : config.lineType\n        });\n      } else {\n        DrawUtils.drawPolygon(this.canvas, AxisUtils.changePointListByZoom(polygon.pointList, this.zoom, this.currentPos), {\n          color: toolData.fill,\n          lineType: (_c = this.config) == null ? void 0 : _c.lineType,\n          thickness,\n          isClose: true\n        });\n      }\n      let showText = `${(_e = AttributeUtils.getAttributeShowText(polygon.attribute, (_d = config == null ? void 0 : config.attributeList) != null ? _d : [])) != null ? _e : \"\"}`;\n      if ((config == null ? void 0 : config.isShowOrder) && (polygon == null ? void 0 : polygon.order) > 0) {\n        showText = `${polygon.order} ${showText}`;\n      }\n      DrawUtils.drawText(this.canvas, AxisUtils.changePointByZoom(polygon.pointList[0], this.zoom, this.currentPos), showText, __spreadValues({\n        color: toolData.stroke\n      }, DEFAULT_TEXT_OFFSET));\n      const transformPointList = AxisUtils.changePointListByZoom(polygon.pointList || [], this.zoom, this.currentPos);\n      const endPoint = transformPointList[transformPointList.length - 1];\n      DrawUtils.drawText(this.canvas, {x: endPoint.x + TEXT_ATTRIBUTE_OFFSET.x, y: endPoint.y + TEXT_ATTRIBUTE_OFFSET.y}, polygon == null ? void 0 : polygon.textAttribute, __spreadValues({\n        color: toolData.stroke\n      }, DEFAULT_TEXT_OFFSET));\n    });\n  }\n  drawRect(rectList, config) {\n    rectList == null ? void 0 : rectList.forEach((rect) => {\n      let thickness = 1;\n      if (this.hoverID.includes(rect.id)) {\n        thickness = 3;\n      }\n      const toolColor = this.getColor(rect.attribute, config);\n      const renderRect = AxisUtils.changeRectByZoom(rect, this.zoom, this.currentPos);\n      DrawUtils.drawRect(this.canvas, renderRect, {\n        color: (rect == null ? void 0 : rect.valid) ? toolColor.valid.stroke : toolColor.invalid.stroke,\n        thickness\n      });\n      if (this.fillID.includes(rect.id)) {\n        DrawUtils.drawRectWithFill(this.canvas, renderRect, {\n          color: (rect == null ? void 0 : rect.valid) ? toolColor.valid.fill : toolColor.invalid.fill\n        });\n      }\n    });\n  }\n  drawTag(tagList, config) {\n    const tagInfoList = tagList.reduce((acc, cur) => {\n      return [\n        ...acc,\n        ...(config == null ? void 0 : config.inputList) ? TagUtil.getTagNameList(cur.result, config.inputList) : TagUtil.getTagnameListWithoutConfig(cur.result)\n      ];\n    }, []);\n    DrawUtils.drawTag(this.canvas, tagInfoList);\n  }\n  setHoverID(hoverID) {\n    this.hoverID = hoverID;\n    this.render();\n  }\n  setFillID(fillID) {\n    this.fillID = fillID;\n    this.render();\n  }\n  render() {\n    var _a;\n    super.render();\n    (_a = this.resultList) == null ? void 0 : _a.forEach((item) => {\n      switch (item == null ? void 0 : item.toolName) {\n        case EToolName.Rect:\n          this.drawRect(item.result, CommonToolUtils.jsonParser(item.config));\n          break;\n        case EToolName.Polygon:\n          this.drawPolygon(item.result, CommonToolUtils.jsonParser(item.config));\n          break;\n        case EToolName.Tag:\n          this.drawTag(item.result, CommonToolUtils.jsonParser(item.config));\n          break;\n      }\n    });\n  }\n  exportData() {\n    return [[], {}];\n  }\n}\n\nexport { CheckOperation as default };\n","import { i18n } from '@labelbee/lb-utils';\nimport AxisUtils from '../../utils/tool/AxisUtils.js';\nimport { RectOperation } from './rectOperation.js';\nimport EKeyCode from '../../constant/keyCode.js';\n\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nclass SegmentByRect extends RectOperation {\n  constructor(props) {\n    super(props);\n    this.onKeydown = (e) => {\n      switch (e.keyCode) {\n        case EKeyCode.Esc:\n          e.preventDefault();\n          e.stopPropagation();\n          this.clearPredictionInfo();\n          break;\n        case EKeyCode.Z:\n          if (e.ctrlKey) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.rectList = [];\n            this.render();\n          }\n          break;\n      }\n    };\n    this.segmentPrediction = (e) => __async(this, null, function* () {\n      const coord = this.getCoordinateUnderZoom(e);\n      this.isRunSegment = true;\n      this.render();\n      if (!this.runPrediction) {\n        this.emit(\"messageError\", \"You needs to set runPrediction function\");\n        this.clearPredictionInfo();\n        return;\n      }\n      yield this.runPrediction({\n        point: coord,\n        rect: {\n          x: this.rectList[0].x,\n          y: this.rectList[0].y,\n          w: this.rectList[0].width,\n          h: this.rectList[0].height\n        }\n      });\n      this.clearPredictionInfo();\n    });\n    this.isRunSegment = false;\n    this.runPrediction = props.runPrediction;\n  }\n  setRunPrediction(runPrediction) {\n    this.runPrediction = runPrediction;\n  }\n  eventBinding() {\n    document.addEventListener(\"keydown\", (e) => this.onKeydown(e));\n    super.eventBinding();\n  }\n  clearPredictionInfo() {\n    this.rectList = [];\n    this.isShowCursor = false;\n    this.coord = {x: -1, y: -1};\n    this.drawingRect = void 0;\n    this.isRunSegment = false;\n    this.clearCanvas();\n    this.render();\n  }\n  onMouseUp(e) {\n    if (this.isRunSegment) {\n      return;\n    }\n    if (e.button === 0 && this.rectList.length === 1 && !this.isRunSegment) {\n      e.stopPropagation();\n      this.segmentPrediction(e);\n      this.clearActiveStatus();\n      return;\n    }\n    super.onMouseUp(e);\n    return void 0;\n  }\n  onMouseDown(e) {\n    if (this.isRunSegment) {\n      return;\n    }\n    super.onMouseDown(e);\n    return void 0;\n  }\n  renderCursorLine() {\n    var _a;\n    if (!this.ctx) {\n      return;\n    }\n    const {ctx} = this;\n    const padding = 10;\n    const lineWidth = 1;\n    const {x, y} = this.coord;\n    ctx.save();\n    ctx.strokeStyle = \"white\";\n    ctx.setLineDash([6]);\n    ctx.lineWidth = lineWidth;\n    ctx.strokeRect(x - padding, y - padding, padding * 2, padding * 2);\n    ctx.restore();\n    let text = `\\u2460 ${i18n.t(\"FramingOfObjectToBeDivided\")}`;\n    const isEn = i18n.language === \"en\";\n    let rectWidth = isEn ? 326 : 186;\n    if (((_a = this.rectList) == null ? void 0 : _a.length) === 1) {\n      text = `\\u2461 ${i18n.t(\"ClickOnTarget\")}`;\n      rectWidth = isEn ? 232 : 142;\n      const radius = 2;\n      ctx.save();\n      ctx.strokeStyle = \"white\";\n      const margin = lineWidth + padding;\n      ctx.beginPath();\n      ctx.moveTo(x + margin + radius * 2, y + margin + radius);\n      ctx.arc(x + margin + radius, y + margin + radius, radius, 0, Math.PI * 2, true);\n      ctx.stroke();\n      ctx.restore();\n    }\n    if (this.isRunSegment) {\n      rectWidth = isEn ? 316 : 136;\n      text = i18n.t(\"SplittingAlgorithmPrediction\");\n    }\n    ctx.save();\n    ctx.fillStyle = this.style.strokeColor;\n    ctx.fillRect(x + padding, y - padding * 4 - 1, rectWidth, 32);\n    ctx.restore();\n    ctx.save();\n    ctx.font = \"14px Source Han Sans CN\";\n    ctx.fillStyle = \"white\";\n    ctx.fillText(text, x + padding + 14, y - padding * 2);\n    ctx.restore();\n    super.renderCursorLine();\n  }\n  renderDrawingRect(rect, zoom, isZoom = false) {\n    if (this.ctx && rect) {\n      const transformRect = AxisUtils.changeRectByZoom(rect, isZoom ? zoom : this.zoom, this.currentPos);\n      const {x, y, width, height} = transformRect;\n      this.ctx.save();\n      this.ctx.lineCap = \"butt\";\n      this.ctx.lineWidth = this.style.strokeWidth;\n      this.ctx.strokeStyle = \"white\";\n      this.ctx.strokeRect(x, y, width, height);\n      this.ctx.strokeStyle = this.style.strokeColor;\n      this.ctx.setLineDash([6]);\n      this.ctx.strokeRect(x, y, width, height);\n      this.ctx.restore();\n    }\n  }\n  renderTextAttribute() {\n  }\n  renderSelectedRect() {\n  }\n}\n\nexport { SegmentByRect as default };\n","import { EToolName, ECheckModel } from '../../constant/tool.js';\nimport ScribbleTool from '../../core/toolOperation/ScribbleTool.js';\nimport CuboidOperation from '../../core/toolOperation/cuboidOperation.js';\nimport PointCloud2dOperation from '../../core/toolOperation/pointCloud2dOperation.js';\nimport CheckOperation from '../../core/toolOperation/checkOperation.js';\nimport PolygonOperation from '../../core/toolOperation/polygonOperation.js';\nimport { RectOperation } from '../../core/toolOperation/rectOperation.js';\nimport TagOperation from '../../core/toolOperation/tagOperation.js';\nimport LineToolOperation from '../../core/toolOperation/LineToolOperation.js';\nimport PointOperation from '../../core/toolOperation/pointOperation.js';\nimport TextToolOperation from '../../core/toolOperation/TextToolOperation.js';\nimport SegmentByRect from '../../core/toolOperation/segmentByRect.js';\nimport CommonToolUtils from './CommonToolUtils.js';\n\nconst getCurrentOperation = (toolName) => {\n  switch (toolName) {\n    case EToolName.Rect:\n    case EToolName.RectTrack:\n      return RectOperation;\n    case EToolName.SegmentByRect:\n      return SegmentByRect;\n    case EToolName.Tag:\n      return TagOperation;\n    case EToolName.Polygon:\n      return PolygonOperation;\n    case ECheckModel.Check:\n      return CheckOperation;\n    case EToolName.Line:\n      return LineToolOperation;\n    case EToolName.Point:\n      return PointOperation;\n    case EToolName.Text:\n      return TextToolOperation;\n    case EToolName.ScribbleTool:\n      return ScribbleTool;\n    case EToolName.Cuboid:\n      return CuboidOperation;\n    case EToolName.PointCloudPolygon:\n      return PointCloud2dOperation;\n    default:\n      throw new Error(\"not match tool\");\n  }\n};\nclass EnhanceCommonToolUtils extends CommonToolUtils {\n}\nEnhanceCommonToolUtils.getCurrentOperation = getCurrentOperation;\n\nexport { EnhanceCommonToolUtils as default, getCurrentOperation };\n","class ImgUtils {\n  static load(src) {\n    return new Promise((resolve, reject) => {\n      const imgNode = new Image();\n      imgNode.crossOrigin = \"anonymous\";\n      if (src.startsWith(\"file\")) {\n        imgNode.src = encodeURI(src);\n      } else {\n        imgNode.src = src;\n      }\n      imgNode.onload = () => {\n        resolve(imgNode);\n      };\n      imgNode.onerror = () => {\n        reject(imgNode);\n      };\n    });\n  }\n}\n\nexport { ImgUtils as default };\n","import { getConfig, styleDefaultConfig } from '../constant/defaultConfig.js';\nimport { getCurrentOperation } from '../utils/tool/EnhanceCommonToolUtils.js';\nimport { BasicToolOperation } from './toolOperation/basicToolOperation.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst createEmptyImage = (size) => {\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = size.width;\n  canvas.height = size.height;\n  const ctx = canvas.getContext(\"2d\");\n  if (ctx) {\n    ctx.fillStyle = \"transparent\";\n    ctx.fillRect(0, 0, size.width, size.height);\n    return canvas.toDataURL();\n  }\n  return \"\";\n};\nconst arraySwap = (array, index1, index2) => {\n  const a = array[index1];\n  array[index1] = array[index2];\n  array[index2] = a;\n  return array;\n};\nconst _HybridToolUtils = class {\n  static isSingleTool(toolName) {\n    return !this.isHybridTool(toolName);\n  }\n  static isHybridTool(toolName) {\n    return Array.isArray(toolName);\n  }\n};\nlet HybridToolUtils = _HybridToolUtils;\nHybridToolUtils.getTopToolName = (toolName) => {\n  return _HybridToolUtils.isHybridTool(toolName) ? toolName[toolName.length - 1] : toolName;\n};\nclass ToolScheduler {\n  constructor(props) {\n    this.toolOperationList = [];\n    this.toolOperationDom = [];\n    this.toolOperationNameList = [];\n    var _a, _b;\n    this.container = props.container;\n    this.size = props.size;\n    this.imgNode = props.imgNode;\n    this.config = (_a = props.config) != null ? _a : JSON.stringify(getConfig(HybridToolUtils.getTopToolName(props.toolName)));\n    this.style = (_b = props.style) != null ? _b : styleDefaultConfig;\n    this.proxyMode = props.proxyMode;\n    this.onWheel = this.onWheel.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.init();\n  }\n  setImgNode(imgNode, basicImgInfo) {\n    this.toolOperationList.forEach((toolInstance) => {\n      toolInstance.setImgNode(imgNode, basicImgInfo);\n    });\n  }\n  setImgAttribute(imgAttribute) {\n    this.toolOperationList.forEach((toolInstance) => {\n      toolInstance.setImgAttribute(imgAttribute);\n    });\n  }\n  syncAllAttributeListInConfig(attributeList) {\n    this.toolOperationList.forEach((toolInstance) => {\n      const newConfig = __spreadProps(__spreadValues({}, toolInstance.config), {\n        attributeList\n      });\n      toolInstance.setConfig(JSON.stringify(newConfig));\n    });\n  }\n  setSize(size) {\n    if (size.width && size.height) {\n      this.toolOperationDom.forEach((dom) => {\n        dom.style.width = `${size.width}px`;\n        dom.style.height = `${size.height}px`;\n      });\n    }\n    this.toolOperationList.forEach((toolInstance) => {\n      toolInstance.setSize(size);\n    });\n  }\n  syncPosition(currentPos, zoom, imgInfo, currentToolInstance) {\n    this.toolOperationList.forEach((toolInstance) => {\n      if (currentToolInstance === toolInstance) {\n        return;\n      }\n      toolInstance.setCurrentPos(currentPos);\n      toolInstance.setZoom(zoom);\n      toolInstance.setImgInfo(imgInfo);\n      toolInstance.renderBasicCanvas();\n      toolInstance.render();\n    });\n  }\n  get defaultSize() {\n    var _a, _b;\n    return {\n      width: ((_a = this.imgNode) == null ? void 0 : _a.width) || this.size.width,\n      height: ((_b = this.imgNode) == null ? void 0 : _b.height) || this.size.height\n    };\n  }\n  createDom() {\n    const {width, height} = this.defaultSize;\n    const dom = window.document.createElement(\"div\");\n    dom.style.position = \"absolute\";\n    dom.style.left = \"0\";\n    dom.style.top = \"0\";\n    dom.style.width = `${width}px`;\n    dom.style.height = `${height}px`;\n    const zIndex = this.toolOperationList.length + 1;\n    dom.style.zIndex = `${zIndex}`;\n    return dom;\n  }\n  getEmptyImage(width, height) {\n    const imgSrc = createEmptyImage({width, height});\n    const emptyImgNode = new Image();\n    emptyImgNode.src = imgSrc;\n    return emptyImgNode;\n  }\n  createOperation(tool, imgNode, config) {\n    var _a;\n    const {width, height} = this.defaultSize;\n    const dom = this.createDom();\n    const emptyImgNode = this.getEmptyImage(width, height);\n    const defaultData = {\n      container: dom,\n      size: this.size,\n      config: (_a = this == null ? void 0 : this.config) != null ? _a : \"{}\",\n      drawOutSideTarget: false,\n      style: this.style,\n      imgNode: imgNode || emptyImgNode,\n      hiddenImg: !!tool\n    };\n    if (config) {\n      Object.assign(defaultData, config);\n    }\n    let toolInstance;\n    if (!tool) {\n      toolInstance = new BasicToolOperation(defaultData);\n      dom.style.zIndex = \"0\";\n      toolInstance.init();\n    } else {\n      const ToolOperation = getCurrentOperation(tool);\n      if (!ToolOperation) {\n        return;\n      }\n      toolInstance = new ToolOperation(defaultData);\n    }\n    toolInstance == null ? void 0 : toolInstance.init();\n    toolInstance.canvas.id = tool != null ? tool : \"basicCanvas\";\n    toolInstance.on(\"dragMove\", ({currentPos, zoom, imgInfo}) => {\n      this.syncPosition(currentPos, zoom, imgInfo, toolInstance);\n    });\n    toolInstance.on(\"renderZoom\", (zoom, currentPos, imgInfo) => {\n      if (zoom && currentPos) {\n        this.syncPosition(currentPos, zoom, imgInfo, toolInstance);\n      }\n    });\n    if (!tool) {\n      this.container.insertBefore(dom, this.container.childNodes[0]);\n      this.toolOperationList.unshift(toolInstance);\n      this.toolOperationDom.unshift(dom);\n      return toolInstance;\n    }\n    this.container.appendChild(dom);\n    this.toolOperationList.push(toolInstance);\n    this.toolOperationNameList.push(tool);\n    this.toolOperationDom.push(dom);\n    return toolInstance;\n  }\n  switchLastTwoCanvas() {\n    if (this.toolOperationDom.length < 3) {\n      console.error(\"switchLastTwoCanvas is just used the layer which has 3 canvas\");\n      return;\n    }\n    const len = this.toolOperationDom.length;\n    const lastOneIndex = len - 1;\n    const last2SecondIndex = len - 2;\n    const lastOneDom = this.toolOperationDom[lastOneIndex];\n    const last2SecondDom = this.toolOperationDom[last2SecondIndex];\n    if (!last2SecondDom || !lastOneDom) {\n      return;\n    }\n    lastOneDom.style.zIndex = `${lastOneIndex - 1}`;\n    last2SecondDom.style.zIndex = `${lastOneIndex}`;\n    this.toolOperationList[lastOneIndex].clearActiveStatus();\n    this.toolOperationList[lastOneIndex].clearCursorLine();\n    this.toolOperationList[lastOneIndex].render();\n    this.toolOperationList = arraySwap(this.toolOperationList, lastOneIndex, last2SecondIndex);\n    this.toolOperationDom = arraySwap(this.toolOperationDom, lastOneIndex, last2SecondIndex);\n    return this.toolOperationList[lastOneIndex];\n  }\n  getFirstToolOperation() {\n    if (this.toolOperationList.length > 1) {\n      return this.toolOperationList[1];\n    }\n    return this.toolOperationList[0];\n  }\n  switchToCanvas(toolName) {\n    var _a, _b, _c, _d;\n    const chosenIndex = this.toolOperationNameList.indexOf(toolName);\n    if (chosenIndex < 0 || this.toolOperationList.length < 1 || chosenIndex > this.toolOperationDom.length - 1) {\n      return;\n    }\n    const lastOneIndex = this.toolOperationDom.length - 1;\n    const chosenDom = this.toolOperationDom[chosenIndex];\n    const lastOneDom = this.toolOperationDom[lastOneIndex];\n    if (!chosenDom || !lastOneDom) {\n      return;\n    }\n    const temp = lastOneDom.style.zIndex;\n    lastOneDom.style.zIndex = `${chosenDom.style.zIndex}`;\n    chosenDom.style.zIndex = `${temp}`;\n    (_b = (_a = this.toolOperationList[lastOneIndex]).clearActiveStatus) == null ? void 0 : _b.call(_a);\n    (_d = (_c = this.toolOperationList[lastOneIndex]).clearCursorLine) == null ? void 0 : _d.call(_c);\n    this.toolOperationList[lastOneIndex].render();\n    this.toolOperationList = arraySwap(this.toolOperationList, lastOneIndex, chosenIndex);\n    this.toolOperationDom = arraySwap(this.toolOperationDom, lastOneIndex, chosenIndex);\n    this.toolOperationNameList = arraySwap(this.toolOperationNameList, lastOneIndex, chosenIndex);\n    return this.toolOperationList[lastOneIndex];\n  }\n  updateDataByToolName(toolName, result) {\n    const operationIndex = this.toolOperationNameList.indexOf(toolName);\n    if (operationIndex >= 0) {\n      const operationInstance = this.toolOperationList[operationIndex];\n      operationInstance.setResult(result);\n    }\n  }\n  clearStatusAndResult() {\n    this.toolOperationList.forEach((toolInstance) => {\n      var _a;\n      (_a = toolInstance.clearActiveStatus) == null ? void 0 : _a.call(toolInstance);\n      toolInstance.clearResult();\n    });\n  }\n  destroyAllLayer() {\n    this.toolOperationList.forEach((toolInstance) => {\n      toolInstance.destroyCanvas();\n      this.init();\n    });\n  }\n  init() {\n    this.toolOperationList = [];\n    this.toolOperationDom = [];\n    this.eventBinding();\n  }\n  destroy() {\n    this.destroyAllLayer();\n    this.eventUnBinding();\n  }\n  eventBinding() {\n    if (this.proxyMode) {\n      this.container.addEventListener(\"wheel\", this.onWheel);\n      this.container.addEventListener(\"mousedown\", this.onMouseDown);\n      this.container.addEventListener(\"mousemove\", this.onMouseMove);\n      this.container.addEventListener(\"mouseup\", this.onMouseUp);\n    }\n  }\n  eventUnBinding() {\n    if (this.proxyMode) {\n      this.container.removeEventListener(\"wheel\", this.onWheel);\n      this.container.removeEventListener(\"mousedown\", this.onMouseDown);\n      this.container.removeEventListener(\"mousemove\", this.onMouseMove);\n      this.container.removeEventListener(\"mouseup\", this.onMouseUp);\n    }\n  }\n  onWheel(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (this.toolOperationList.length !== 0) {\n      const lastOneIndex = this.toolOperationDom.length - 1;\n      this.toolOperationList[lastOneIndex].onWheel(e);\n    }\n  }\n  onMouseDown(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (this.toolOperationList.length !== 0) {\n      const lastOneIndex = this.toolOperationDom.length - 1;\n      this.toolOperationList[lastOneIndex].onMouseDown(e);\n    }\n  }\n  onMouseMove(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (this.toolOperationList.length !== 0) {\n      const lastOneIndex = this.toolOperationDom.length - 1;\n      this.toolOperationList[lastOneIndex].onMouseMove(e);\n    }\n  }\n  onMouseUp(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (this.toolOperationList.length !== 0) {\n      const lastOneIndex = this.toolOperationDom.length - 1;\n      this.toolOperationList[lastOneIndex].onMouseUp(e);\n    }\n  }\n  getCurrentToolName() {\n    return this.toolOperationNameList[this.toolOperationNameList.length - 1];\n  }\n}\n\nexport { HybridToolUtils, ToolScheduler };\n","import { ELang } from '../constant/annotation.js';\nimport { getConfig, styleDefaultConfig } from '../constant/defaultConfig.js';\nimport { HybridToolUtils, ToolScheduler } from './scheduler.js';\n\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nconst loadImage = (imgSrc) => {\n  return new Promise((resolve, reject) => {\n    const img = document.createElement(\"img\");\n    img.crossOrigin = \"Anonymous\";\n    img.onerror = (e) => {\n      console.error(e);\n      reject(img);\n    };\n    img.src = imgSrc;\n    img.onload = () => {\n      resolve(img);\n    };\n  });\n};\nclass AnnotationEngine {\n  constructor(props) {\n    this.setImgSrc = (imgSrc) => __async(this, null, function* () {\n      const imgNode = yield loadImage(imgSrc);\n      if (!imgNode) {\n        return;\n      }\n      this.setImgNode(imgNode);\n    });\n    var _a, _b;\n    this.container = props.container;\n    this.size = props.size;\n    this.toolName = props.toolName;\n    this.imgNode = props.imgNode;\n    this.config = (_a = props.config) != null ? _a : JSON.stringify(getConfig(HybridToolUtils.getTopToolName(props.toolName)));\n    this.style = (_b = props.style) != null ? _b : styleDefaultConfig;\n    this.toolScheduler = new ToolScheduler(props);\n    this.i18nLanguage = \"cn\";\n    this._initToolOperation();\n  }\n  setToolName(toolName, config) {\n    this.toolName = toolName;\n    const defaultConfig = config || JSON.stringify(getConfig(HybridToolUtils.getTopToolName(toolName)));\n    this.config = defaultConfig;\n    this._initToolOperation();\n  }\n  setImgNode(imgNode, basicImgInfo) {\n    this.toolScheduler.setImgNode(imgNode, basicImgInfo);\n    this.imgNode = imgNode;\n  }\n  setImgAttribute(imgAttribute) {\n    this.toolScheduler.setImgAttribute(imgAttribute);\n  }\n  setSize(size) {\n    this.size = size;\n    this.toolScheduler.setSize(size);\n  }\n  setStyle(style) {\n    this.style = style;\n  }\n  _initToolOperation() {\n    this.toolScheduler.destroyAllLayer();\n    let toolList = [];\n    const config = {hiddenImg: true};\n    if (HybridToolUtils.isSingleTool(this.toolName)) {\n      toolList = [this.toolName];\n      Object.assign(config, {hiddenImg: false});\n    } else {\n      toolList = this.toolName;\n    }\n    if (toolList.length > 1) {\n      this.toolScheduler.createOperation(void 0, this.imgNode);\n    }\n    toolList.forEach((toolName, i) => {\n      const toolInstance = this.toolScheduler.createOperation(toolName, void 0, config);\n      if (i === toolList.length - 1) {\n        this.toolInstance = toolInstance;\n      }\n    });\n    this.setLang(this.i18nLanguage);\n  }\n  setBasicInfo(dependToolName, basicResult) {\n    this.dependToolName = dependToolName;\n    this.basicResult = basicResult;\n    this.toolInstance.setDependName(dependToolName);\n    this.toolInstance.setBasicResult(basicResult);\n    this.toolInstance.renderBasicCanvas();\n  }\n  clearBasicResult() {\n    this.setBasicInfo();\n  }\n  forbidOperation() {\n    this.toolInstance.setForbidOperation(true);\n  }\n  launchOperation() {\n    this.toolInstance.setForbidOperation(false);\n  }\n  setLang(i18nLanguage) {\n    this.i18nLanguage = i18nLanguage;\n    switch (i18nLanguage) {\n      case \"cn\":\n        this.toolInstance.setLang(ELang.Zh);\n        break;\n      case \"en\":\n        this.toolInstance.setLang(ELang.US);\n        break;\n    }\n  }\n  setDataInjectionAtCreation(dataInjectionAtCreation) {\n    this.toolInstance.setDataInjectionAtCreation(dataInjectionAtCreation);\n  }\n  setRenderEnhance(renderEnhance) {\n    this.toolInstance.setRenderEnhance(renderEnhance);\n  }\n  switchLastTwoCanvas() {\n    const newInstance = this.toolScheduler.switchLastTwoCanvas();\n    if (newInstance) {\n      this.toolInstance = newInstance;\n      return newInstance;\n    }\n  }\n  get firstToolInstance() {\n    return this.toolScheduler.getFirstToolOperation();\n  }\n  setCustomRenderStyle(customRenderStyle) {\n    this.toolInstance.setCustomRenderStyle(customRenderStyle);\n  }\n}\n\nexport { AnnotationEngine as default };\n","class CanvasScheduler {\n  constructor(props) {\n    this.container = props.container;\n  }\n  createCanvas(id, options) {\n    if (typeof id !== \"string\") {\n      this.container.appendChild(id);\n      id.style.position = \"absolute\";\n      id.style.left = \"0\";\n      id.style.top = \"0\";\n      return id;\n    }\n    const canvas = document.createElement(\"canvas\");\n    canvas.id = id;\n    if (options && options.size) {\n      canvas.width = options.size.width;\n      canvas.height = options.size.height;\n    }\n    this.container.appendChild(canvas);\n    return canvas;\n  }\n  destroyCanvas(id) {\n    const dom = document.getElementById(id);\n    if (dom) {\n      this.container.removeChild(dom);\n    }\n    return dom;\n  }\n}\n\nexport { CanvasScheduler };\n","import { createBase64WorkerFactory } from './_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js';\n\nvar WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAndXNlIHN0cmljdCc7CgogIGZ1bmN0aW9uIGdldEluZGV4KHopIHsKICAgIGNvbnN0IG1pblogPSAtNzsKICAgIGNvbnN0IG1heFogPSAzOwogICAgY29uc3QgbGVuID0gbWF4WiAtIG1pblo7CiAgICBpZiAoeiA8IG1pblopIHsKICAgICAgeiA9IG1pblo7CiAgICB9CiAgICBpZiAoeiA+IG1heFopIHsKICAgICAgeiA9IG1heFo7CiAgICB9CiAgICByZXR1cm4gTWF0aC5mbG9vcigoeiAtIG1pblopIC8gbGVuICogMjU1KTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlQ29sb3JNYXBKZXQoKSB7CiAgICBsZXQgczsKICAgIGNvbnN0IHAgPSBuZXcgQXJyYXkoMjU2KS5maWxsKCIiKS5tYXAoKCkgPT4gbmV3IEFycmF5KDMpLmZpbGwoIiIpKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykgewogICAgICBmb3IgKHMgPSAwOyBzIDwgMzI7IHMrKykgewogICAgICAgIHBbc11bMF0gPSAxMjggKyA0ICogczsKICAgICAgICBwW3NdWzFdID0gMDsKICAgICAgICBwW3NdWzJdID0gMDsKICAgICAgfQogICAgICBwWzMyXVswXSA9IDI1NTsKICAgICAgcFszMl1bMV0gPSAwOwogICAgICBwWzMyXVsyXSA9IDA7CiAgICAgIGZvciAocyA9IDA7IHMgPCA2MzsgcysrKSB7CiAgICAgICAgcFszMyArIHNdWzBdID0gMjU1OwogICAgICAgIHBbMzMgKyBzXVsxXSA9IDQgKyA0ICogczsKICAgICAgICBwWzMzICsgc11bMl0gPSAwOwogICAgICB9CiAgICAgIHBbOTZdWzBdID0gMjU0OwogICAgICBwWzk2XVsxXSA9IDI1NTsKICAgICAgcFs5Nl1bMl0gPSAyOwogICAgICBmb3IgKHMgPSAwOyBzIDwgNjI7IHMrKykgewogICAgICAgIHBbOTcgKyBzXVswXSA9IDI1MCAtIDQgKiBzOwogICAgICAgIHBbOTcgKyBzXVsxXSA9IDI1NTsKICAgICAgICBwWzk3ICsgc11bMl0gPSA2ICsgNCAqIHM7CiAgICAgIH0KICAgICAgcFsxNTldWzBdID0gMTsKICAgICAgcFsxNTldWzFdID0gMjU1OwogICAgICBwWzE1OV1bMl0gPSAyNTQ7CiAgICAgIGZvciAocyA9IDA7IHMgPCA2NDsgcysrKSB7CiAgICAgICAgcFsxNjAgKyBzXVswXSA9IDA7CiAgICAgICAgcFsxNjAgKyBzXVsxXSA9IDI1MiAtIHMgKiA0OwogICAgICAgIHBbMTYwICsgc11bMl0gPSAyNTU7CiAgICAgIH0KICAgICAgZm9yIChzID0gMDsgcyA8IDMyOyBzKyspIHsKICAgICAgICBwWzIyNCArIHNdWzBdID0gMDsKICAgICAgICBwWzIyNCArIHNdWzFdID0gMDsKICAgICAgICBwWzIyNCArIHNdWzJdID0gMjUyIC0gNCAqIHM7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBwOwogIH0KICBjb25zdCBDT0xPUl9NQVBfSkVUID0gY3JlYXRlQ29sb3JNYXBKZXQoKTsKICBmdW5jdGlvbiBpc0luUG9seWdvbihjaGVja1BvaW50LCBwb2x5Z29uUG9pbnRzLCBsaW5lVHlwZSA9IDApIHsKICAgIGxldCBjb3VudGVyID0gMDsKICAgIGxldCBpOwogICAgbGV0IHhpbnRlcnM7CiAgICBsZXQgcDE7CiAgICBsZXQgcDI7CiAgICBwb2x5Z29uUG9pbnRzID0gWy4uLnBvbHlnb25Qb2ludHNdOwogICAgaWYgKGxpbmVUeXBlID09PSAxKSB7CiAgICAgIHBvbHlnb25Qb2ludHMgPSBjcmVhdGVTbW9vdGhDdXJ2ZVBvaW50cyhwb2x5Z29uUG9pbnRzLnJlZHVjZSgoYWNjLCBjdXIpID0+IHsKICAgICAgICByZXR1cm4gWy4uLmFjYywgY3VyLngsIGN1ci55XTsKICAgICAgfSwgW10pLCAwLjUsIHRydWUsIFNFR01FTlRfTlVNQkVSKTsKICAgIH0KICAgIFtwMV0gPSBwb2x5Z29uUG9pbnRzOwogICAgY29uc3QgcG9pbnRDb3VudCA9IHBvbHlnb25Qb2ludHMubGVuZ3RoOwogICAgZm9yIChpID0gMTsgaSA8PSBwb2ludENvdW50OyBpKyspIHsKICAgICAgcDIgPSBwb2x5Z29uUG9pbnRzW2kgJSBwb2ludENvdW50XTsKICAgICAgaWYgKGNoZWNrUG9pbnQueCA+IE1hdGgubWluKHAxLngsIHAyLngpICYmIGNoZWNrUG9pbnQueCA8PSBNYXRoLm1heChwMS54LCBwMi54KSkgewogICAgICAgIGlmIChjaGVja1BvaW50LnkgPD0gTWF0aC5tYXgocDEueSwgcDIueSkpIHsKICAgICAgICAgIGlmIChwMS54ICE9PSBwMi54KSB7CiAgICAgICAgICAgIHhpbnRlcnMgPSAoY2hlY2tQb2ludC54IC0gcDEueCkgKiAocDIueSAtIHAxLnkpIC8gKHAyLnggLSBwMS54KSArIHAxLnk7CiAgICAgICAgICAgIGlmIChwMS55ID09PSBwMi55IHx8IGNoZWNrUG9pbnQueSA8PSB4aW50ZXJzKSB7CiAgICAgICAgICAgICAgY291bnRlcisrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHAxID0gcDI7CiAgICB9CiAgICBpZiAoY291bnRlciAlIDIgPT09IDApIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQogIGZ1bmN0aW9uIGdldE5ld0NvbG9yQnlCb3goe3pNaW4sIHpNYXgsIHBvbHlnb25Qb2ludExpc3QsIGF0dHJpYnV0ZSwgeCwgeSwgeiwgY29sb3JMaXN0LCB2YWxpZH0pIHsKICAgIGNvbnN0IGluUG9seWdvbiA9IGlzSW5Qb2x5Z29uKHt4LCB5fSwgcG9seWdvblBvaW50TGlzdCk7CiAgICBpZiAoaW5Qb2x5Z29uICYmIHogPj0gek1pbiAmJiB6IDw9IHpNYXgpIHsKICAgICAgaWYgKHZhbGlkID09PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbMSwgMTAzIC8gMjU1LCAxMDIgLyAyNTVdOwogICAgICB9CiAgICAgIGlmIChjb2xvckxpc3RbYXR0cmlidXRlXSkgewogICAgICAgIHJldHVybiBjb2xvckxpc3RbYXR0cmlidXRlXS5yZ2JhLnNsaWNlKDAsIDMpLm1hcCgodikgPT4gdiAvIDI1NSk7CiAgICAgIH0KICAgICAgcmV0dXJuIFsxLCAwLCAwXTsKICAgIH0KICB9CiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlMihlKSB7CiAgICBjb25zdCB7cG9zaXRpb246IHBvaW50cywgY29sb3IsIGN1Ym9pZExpc3QsIGNvbG9yTGlzdCwgaGlnaGxpZ2h0SW5kZXh9ID0gZS5kYXRhOwogICAgbGV0IG51bSA9IDA7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gMykgewogICAgICBjb25zdCB4ID0gcG9pbnRzW2ldOwogICAgICBjb25zdCB5ID0gcG9pbnRzW2kgKyAxXTsKICAgICAgY29uc3QgeiA9IHBvaW50c1tpICsgMl07CiAgICAgIGNvbnN0IG5ld0NvbG9ySW5mbyA9IGN1Ym9pZExpc3QubWFwKCh2KSA9PiB7CiAgICAgICAgcmV0dXJuIGdldE5ld0NvbG9yQnlCb3goewogICAgICAgICAgcG9seWdvblBvaW50TGlzdDogdi5wb2x5Z29uUG9pbnRMaXN0LAogICAgICAgICAgek1pbjogdi56TWluLAogICAgICAgICAgek1heDogdi56TWF4LAogICAgICAgICAgeCwKICAgICAgICAgIHksCiAgICAgICAgICB6LAogICAgICAgICAgYXR0cmlidXRlOiB2LmF0dHJpYnV0ZSwKICAgICAgICAgIGNvbG9yTGlzdCwKICAgICAgICAgIHZhbGlkOiB2LnZhbGlkCiAgICAgICAgfSk7CiAgICAgIH0pLmZpbHRlcigodikgPT4gdikucG9wKCk7CiAgICAgIGlmIChuZXdDb2xvckluZm8pIHsKICAgICAgICBudW0rKzsKICAgICAgICBjb25zdCBbciwgZywgYl0gPSBuZXdDb2xvckluZm87CiAgICAgICAgY29sb3JbaV0gPSByOwogICAgICAgIGNvbG9yW2kgKyAxXSA9IGc7CiAgICAgICAgY29sb3JbaSArIDJdID0gYjsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBwb2ludEluZGV4ID0gTWF0aC5mbG9vcihpIC8gMyk7CiAgICAgICAgaWYgKGhpZ2hsaWdodEluZGV4ICYmIGhpZ2hsaWdodEluZGV4W3BvaW50SW5kZXhdID09PSAxKSB7CiAgICAgICAgICBjb2xvcltpXSA9IDA7CiAgICAgICAgICBjb2xvcltpICsgMV0gPSAwOwogICAgICAgICAgY29sb3JbaSArIDJdID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgaW5kZXggPSBnZXRJbmRleCh6KTsKICAgICAgICAgIGNvbnN0IG5ld0NvbG9yID0gQ09MT1JfTUFQX0pFVFtpbmRleF07CiAgICAgICAgICBjb25zdCBbciwgZywgYl0gPSBuZXdDb2xvcjsKICAgICAgICAgIGNvbG9yW2ldID0gciAvIDI1NTsKICAgICAgICAgIGNvbG9yW2kgKyAxXSA9IGcgLyAyNTU7CiAgICAgICAgICBjb2xvcltpICsgMl0gPSBiIC8gMjU1OwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcG9zdE1lc3NhZ2Uoe3BvaW50cywgY29sb3IsIG51bX0pOwogIH07CgogIGV4cG9ydHMuaXNJblBvbHlnb24gPSBpc0luUG9seWdvbjsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTsKCiAgcmV0dXJuIGV4cG9ydHM7Cgp9KSh7fSk7Cgo=', null, false);\n/* eslint-enable */\n\nexport { WorkerFactory as default };\n","import { createBase64WorkerFactory } from './_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js';\n\nvar WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAndXNlIHN0cmljdCc7CgogIGZ1bmN0aW9uIGdldEluZGV4KHopIHsKICAgIGNvbnN0IG1pblogPSAtNzsKICAgIGNvbnN0IG1heFogPSAzOwogICAgY29uc3QgbGVuID0gbWF4WiAtIG1pblo7CiAgICBpZiAoeiA8IG1pblopIHsKICAgICAgeiA9IG1pblo7CiAgICB9CiAgICBpZiAoeiA+IG1heFopIHsKICAgICAgeiA9IG1heFo7CiAgICB9CiAgICByZXR1cm4gTWF0aC5mbG9vcigoeiAtIG1pblopIC8gbGVuICogMjU1KTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlQ29sb3JNYXBKZXQoKSB7CiAgICBsZXQgczsKICAgIGNvbnN0IHAgPSBuZXcgQXJyYXkoMjU2KS5maWxsKCIiKS5tYXAoKCkgPT4gbmV3IEFycmF5KDMpLmZpbGwoIiIpKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykgewogICAgICBmb3IgKHMgPSAwOyBzIDwgMzI7IHMrKykgewogICAgICAgIHBbc11bMF0gPSAxMjggKyA0ICogczsKICAgICAgICBwW3NdWzFdID0gMDsKICAgICAgICBwW3NdWzJdID0gMDsKICAgICAgfQogICAgICBwWzMyXVswXSA9IDI1NTsKICAgICAgcFszMl1bMV0gPSAwOwogICAgICBwWzMyXVsyXSA9IDA7CiAgICAgIGZvciAocyA9IDA7IHMgPCA2MzsgcysrKSB7CiAgICAgICAgcFszMyArIHNdWzBdID0gMjU1OwogICAgICAgIHBbMzMgKyBzXVsxXSA9IDQgKyA0ICogczsKICAgICAgICBwWzMzICsgc11bMl0gPSAwOwogICAgICB9CiAgICAgIHBbOTZdWzBdID0gMjU0OwogICAgICBwWzk2XVsxXSA9IDI1NTsKICAgICAgcFs5Nl1bMl0gPSAyOwogICAgICBmb3IgKHMgPSAwOyBzIDwgNjI7IHMrKykgewogICAgICAgIHBbOTcgKyBzXVswXSA9IDI1MCAtIDQgKiBzOwogICAgICAgIHBbOTcgKyBzXVsxXSA9IDI1NTsKICAgICAgICBwWzk3ICsgc11bMl0gPSA2ICsgNCAqIHM7CiAgICAgIH0KICAgICAgcFsxNTldWzBdID0gMTsKICAgICAgcFsxNTldWzFdID0gMjU1OwogICAgICBwWzE1OV1bMl0gPSAyNTQ7CiAgICAgIGZvciAocyA9IDA7IHMgPCA2NDsgcysrKSB7CiAgICAgICAgcFsxNjAgKyBzXVswXSA9IDA7CiAgICAgICAgcFsxNjAgKyBzXVsxXSA9IDI1MiAtIHMgKiA0OwogICAgICAgIHBbMTYwICsgc11bMl0gPSAyNTU7CiAgICAgIH0KICAgICAgZm9yIChzID0gMDsgcyA8IDMyOyBzKyspIHsKICAgICAgICBwWzIyNCArIHNdWzBdID0gMDsKICAgICAgICBwWzIyNCArIHNdWzFdID0gMDsKICAgICAgICBwWzIyNCArIHNdWzJdID0gMjUyIC0gNCAqIHM7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBwOwogIH0KICBjb25zdCBDT0xPUl9NQVBfSkVUID0gY3JlYXRlQ29sb3JNYXBKZXQoKTsKICBmdW5jdGlvbiBpc0luUG9seWdvbihjaGVja1BvaW50LCBwb2x5Z29uUG9pbnRzLCBsaW5lVHlwZSA9IDApIHsKICAgIGxldCBjb3VudGVyID0gMDsKICAgIGxldCBpOwogICAgbGV0IHhpbnRlcnM7CiAgICBsZXQgcDE7CiAgICBsZXQgcDI7CiAgICBwb2x5Z29uUG9pbnRzID0gWy4uLnBvbHlnb25Qb2ludHNdOwogICAgaWYgKGxpbmVUeXBlID09PSAxKSB7CiAgICAgIHBvbHlnb25Qb2ludHMgPSBjcmVhdGVTbW9vdGhDdXJ2ZVBvaW50cyhwb2x5Z29uUG9pbnRzLnJlZHVjZSgoYWNjLCBjdXIpID0+IHsKICAgICAgICByZXR1cm4gWy4uLmFjYywgY3VyLngsIGN1ci55XTsKICAgICAgfSwgW10pLCAwLjUsIHRydWUsIFNFR01FTlRfTlVNQkVSKTsKICAgIH0KICAgIFtwMV0gPSBwb2x5Z29uUG9pbnRzOwogICAgY29uc3QgcG9pbnRDb3VudCA9IHBvbHlnb25Qb2ludHMubGVuZ3RoOwogICAgZm9yIChpID0gMTsgaSA8PSBwb2ludENvdW50OyBpKyspIHsKICAgICAgcDIgPSBwb2x5Z29uUG9pbnRzW2kgJSBwb2ludENvdW50XTsKICAgICAgaWYgKGNoZWNrUG9pbnQueCA+IE1hdGgubWluKHAxLngsIHAyLngpICYmIGNoZWNrUG9pbnQueCA8PSBNYXRoLm1heChwMS54LCBwMi54KSkgewogICAgICAgIGlmIChjaGVja1BvaW50LnkgPD0gTWF0aC5tYXgocDEueSwgcDIueSkpIHsKICAgICAgICAgIGlmIChwMS54ICE9PSBwMi54KSB7CiAgICAgICAgICAgIHhpbnRlcnMgPSAoY2hlY2tQb2ludC54IC0gcDEueCkgKiAocDIueSAtIHAxLnkpIC8gKHAyLnggLSBwMS54KSArIHAxLnk7CiAgICAgICAgICAgIGlmIChwMS55ID09PSBwMi55IHx8IGNoZWNrUG9pbnQueSA8PSB4aW50ZXJzKSB7CiAgICAgICAgICAgICAgY291bnRlcisrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHAxID0gcDI7CiAgICB9CiAgICBpZiAoY291bnRlciAlIDIgPT09IDApIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQogIG9ubWVzc2FnZSA9IGZ1bmN0aW9uIG9ubWVzc2FnZTIoZSkgewogICAgY29uc3Qge3pNaW4sIHpNYXgsIHBvbHlnb25Qb2ludExpc3QsIHBvc2l0aW9uOiBwb2ludHMsIGNvbG9yfSA9IGUuZGF0YTsKICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gW107CiAgICBjb25zdCBuZXdDb2xvciA9IFtdOwogICAgbGV0IG51bSA9IDA7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gMykgewogICAgICBjb25zdCB4ID0gcG9pbnRzW2ldOwogICAgICBjb25zdCB5ID0gcG9pbnRzW2kgKyAxXTsKICAgICAgY29uc3QgeiA9IHBvaW50c1tpICsgMl07CiAgICAgIGNvbnN0IGluUG9seWdvbiA9IGlzSW5Qb2x5Z29uKHt4LCB5fSwgcG9seWdvblBvaW50TGlzdCk7CiAgICAgIGlmIChpblBvbHlnb24gJiYgeiA+PSB6TWluICYmIHogPD0gek1heCkgewogICAgICAgIG5ld1Bvc2l0aW9uLnB1c2goeCk7CiAgICAgICAgbmV3UG9zaXRpb24ucHVzaCh5KTsKICAgICAgICBuZXdQb3NpdGlvbi5wdXNoKHopOwogICAgICAgIGlmIChjb2xvci5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGNvbnN0IGluZGV4ID0gZ2V0SW5kZXgoeik7CiAgICAgICAgICBjb25zdCBuZXdDb2xvclJHQiA9IENPTE9SX01BUF9KRVRbaW5kZXhdOwogICAgICAgICAgY29uc3QgW3IsIGcsIGJdID0gbmV3Q29sb3JSR0I7CiAgICAgICAgICBuZXdDb2xvci5wdXNoKHIgLyAyNTUpOwogICAgICAgICAgbmV3Q29sb3IucHVzaChnIC8gMjU1KTsKICAgICAgICAgIG5ld0NvbG9yLnB1c2goYiAvIDI1NSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5ld0NvbG9yLnB1c2goY29sb3JbaV0pOwogICAgICAgICAgbmV3Q29sb3IucHVzaChjb2xvcltpICsgMV0pOwogICAgICAgICAgbmV3Q29sb3IucHVzaChjb2xvcltpICsgMl0pOwogICAgICAgIH0KICAgICAgICBudW0rKzsKICAgICAgfQogICAgfQogICAgdGhpcy5wb3N0TWVzc2FnZSh7cG9zaXRpb246IG5ld1Bvc2l0aW9uLCBjb2xvcjogbmV3Q29sb3IsIG51bX0pOwogIH07CgogIGV4cG9ydHMuaXNJblBvbHlnb24gPSBpc0luUG9seWdvbjsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTsKCiAgcmV0dXJuIGV4cG9ydHM7Cgp9KSh7fSk7Cgo=', null, false);\n/* eslint-enable */\n\nexport { WorkerFactory as default };\n","import { Loader, FileLoader, LoaderUtils, BufferGeometry, Float32BufferAttribute, PointsMaterial, Points } from 'three';\nimport { COLOR_MAP_JET } from '@labelbee/lb-utils';\n\nclass PCDLoader extends Loader {\n  constructor(manager) {\n    super(manager);\n    this.littleEndian = true;\n  }\n  load(url, onLoad, onProgress, onError) {\n    const scope = this;\n    const loader = new FileLoader(scope.manager);\n    loader.setPath(scope.path);\n    loader.setResponseType(\"arraybuffer\");\n    loader.setRequestHeader(scope.requestHeader);\n    loader.setWithCredentials(scope.withCredentials);\n    loader.load(url, function(data) {\n      try {\n        onLoad(scope.parse(data));\n      } catch (e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n        scope.manager.itemError(url);\n      }\n    }, onProgress, onError);\n  }\n  parse(data) {\n    function decompressLZF(inData, outLength) {\n      const inLength = inData.length;\n      const outData = new Uint8Array(outLength);\n      let inPtr = 0;\n      let outPtr = 0;\n      let ctrl;\n      let len;\n      let ref;\n      do {\n        ctrl = inData[inPtr++];\n        if (ctrl < 1 << 5) {\n          ctrl++;\n          if (outPtr + ctrl > outLength)\n            throw new Error(\"Output buffer is not large enough\");\n          if (inPtr + ctrl > inLength)\n            throw new Error(\"Invalid compressed data\");\n          do {\n            outData[outPtr++] = inData[inPtr++];\n          } while (--ctrl);\n        } else {\n          len = ctrl >> 5;\n          ref = outPtr - ((ctrl & 31) << 8) - 1;\n          if (inPtr >= inLength)\n            throw new Error(\"Invalid compressed data\");\n          if (len === 7) {\n            len += inData[inPtr++];\n            if (inPtr >= inLength)\n              throw new Error(\"Invalid compressed data\");\n          }\n          ref -= inData[inPtr++];\n          if (outPtr + len + 2 > outLength)\n            throw new Error(\"Output buffer is not large enough\");\n          if (ref < 0)\n            throw new Error(\"Invalid compressed data\");\n          if (ref >= outPtr)\n            throw new Error(\"Invalid compressed data\");\n          do {\n            outData[outPtr++] = outData[ref++];\n          } while (--len + 2);\n        }\n      } while (inPtr < inLength);\n      return outData;\n    }\n    function parseHeader(data2) {\n      const PCDheader2 = {};\n      const result1 = data2.search(/[\\n\\r]data\\s(\\S*)\\s/i);\n      const result2 = /[\\n\\r]data\\s(\\S*)\\s/i.exec(data2.slice(result1 - 1));\n      PCDheader2.data = result2[1];\n      PCDheader2.headerLen = result2[0].length + result1;\n      PCDheader2.str = data2.slice(0, PCDheader2.headerLen);\n      PCDheader2.str = PCDheader2.str.replace(/#.*/gi, \"\");\n      PCDheader2.version = /version (.*)/i.exec(PCDheader2.str);\n      PCDheader2.fields = /fields (.*)/i.exec(PCDheader2.str);\n      PCDheader2.size = /size (.*)/i.exec(PCDheader2.str);\n      PCDheader2.type = /type (.*)/i.exec(PCDheader2.str);\n      PCDheader2.count = /count (.*)/i.exec(PCDheader2.str);\n      PCDheader2.width = /width (.*)/i.exec(PCDheader2.str);\n      PCDheader2.height = /height (.*)/i.exec(PCDheader2.str);\n      PCDheader2.viewpoint = /viewpoint (.*)/i.exec(PCDheader2.str);\n      PCDheader2.points = /points (.*)/i.exec(PCDheader2.str);\n      if (PCDheader2.version !== null)\n        PCDheader2.version = parseFloat(PCDheader2.version[1]);\n      PCDheader2.fields = PCDheader2.fields !== null ? PCDheader2.fields[1].split(\" \") : [];\n      if (PCDheader2.type !== null)\n        PCDheader2.type = PCDheader2.type[1].split(\" \");\n      if (PCDheader2.width !== null)\n        PCDheader2.width = parseInt(PCDheader2.width[1]);\n      if (PCDheader2.height !== null)\n        PCDheader2.height = parseInt(PCDheader2.height[1]);\n      if (PCDheader2.viewpoint !== null)\n        PCDheader2.viewpoint = PCDheader2.viewpoint[1];\n      if (PCDheader2.points !== null)\n        PCDheader2.points = parseInt(PCDheader2.points[1], 10);\n      if (PCDheader2.points === null)\n        PCDheader2.points = PCDheader2.width * PCDheader2.height;\n      if (PCDheader2.size !== null) {\n        PCDheader2.size = PCDheader2.size[1].split(\" \").map(function(x) {\n          return parseInt(x, 10);\n        });\n      }\n      if (PCDheader2.count !== null) {\n        PCDheader2.count = PCDheader2.count[1].split(\" \").map(function(x) {\n          return parseInt(x, 10);\n        });\n      } else {\n        PCDheader2.count = [];\n        for (let i = 0, l = PCDheader2.fields.length; i < l; i++) {\n          PCDheader2.count.push(1);\n        }\n      }\n      PCDheader2.offset = {};\n      let sizeSum = 0;\n      for (let i = 0, l = PCDheader2.fields.length; i < l; i++) {\n        if (PCDheader2.data === \"ascii\") {\n          PCDheader2.offset[PCDheader2.fields[i]] = i;\n        } else {\n          PCDheader2.offset[PCDheader2.fields[i]] = sizeSum;\n          sizeSum += PCDheader2.size[i] * PCDheader2.count[i];\n        }\n      }\n      PCDheader2.rowSize = sizeSum;\n      return PCDheader2;\n    }\n    const textData = LoaderUtils.decodeText(new Uint8Array(data));\n    const PCDheader = parseHeader(textData);\n    const position = [];\n    const normal = [];\n    const color = [];\n    if (PCDheader.data === \"ascii\") {\n      const {offset} = PCDheader;\n      const pcdData = textData.slice(PCDheader.headerLen);\n      const lines = pcdData.split(\"\\n\");\n      for (let i = 0, l = lines.length; i < l; i++) {\n        if (lines[i] === \"\")\n          continue;\n        const line = lines[i].split(\" \");\n        if (offset.x !== void 0) {\n          position.push(parseFloat(line[offset.x]));\n          position.push(parseFloat(line[offset.y]));\n          position.push(parseFloat(line[offset.z]));\n        }\n        if (this.genColorByZ) {\n          const pdColor = this.genColorByZ(parseFloat(line[offset.x]), parseFloat(line[offset.y]), parseFloat(line[offset.z]));\n          const pdColorUnit8 = pdColor.map((hex) => hex / 255);\n          color.push(...pdColorUnit8);\n        }\n        if (offset.normal_x !== void 0) {\n          normal.push(parseFloat(line[offset.normal_x]));\n          normal.push(parseFloat(line[offset.normal_y]));\n          normal.push(parseFloat(line[offset.normal_z]));\n        }\n      }\n    }\n    if (PCDheader.data === \"binary_compressed\") {\n      const sizes = new Uint32Array(data.slice(PCDheader.headerLen, PCDheader.headerLen + 8));\n      const compressedSize = sizes[0];\n      const decompressedSize = sizes[1];\n      const decompressed = decompressLZF(new Uint8Array(data, PCDheader.headerLen + 8, compressedSize), decompressedSize);\n      const dataview = new DataView(decompressed.buffer);\n      const {offset} = PCDheader;\n      for (let i = 0; i < PCDheader.points; i++) {\n        if (offset.x !== void 0) {\n          position.push(dataview.getFloat32(PCDheader.points * offset.x + PCDheader.size[0] * i, this.littleEndian));\n          position.push(dataview.getFloat32(PCDheader.points * offset.y + PCDheader.size[1] * i, this.littleEndian));\n          position.push(dataview.getFloat32(PCDheader.points * offset.z + PCDheader.size[2] * i, this.littleEndian));\n        }\n        if (offset.normal_x !== void 0) {\n          normal.push(dataview.getFloat32(PCDheader.points * offset.normal_x + PCDheader.size[4] * i, this.littleEndian));\n          normal.push(dataview.getFloat32(PCDheader.points * offset.normal_y + PCDheader.size[5] * i, this.littleEndian));\n          normal.push(dataview.getFloat32(PCDheader.points * offset.normal_z + PCDheader.size[6] * i, this.littleEndian));\n        }\n        if (this.genColorByZ) {\n          const pdColor = this.genColorByZ(dataview.getFloat32(PCDheader.points * offset.x + PCDheader.size[0] * i, this.littleEndian), dataview.getFloat32(PCDheader.points * offset.y + PCDheader.size[0] * i, this.littleEndian), dataview.getFloat32(PCDheader.points * offset.z + PCDheader.size[0] * i, this.littleEndian));\n          const pdColorUnit8 = pdColor.map((hex) => hex / 255);\n          color.push(...pdColorUnit8);\n        }\n      }\n    }\n    if (PCDheader.data === \"binary\") {\n      const dataview = new DataView(data, PCDheader.headerLen);\n      const {offset} = PCDheader;\n      for (let i = 0, row = 0; i < PCDheader.points; i++, row += PCDheader.rowSize) {\n        if (offset.x !== void 0) {\n          position.push(dataview.getFloat32(row + offset.x, this.littleEndian));\n          position.push(dataview.getFloat32(row + offset.y, this.littleEndian));\n          position.push(dataview.getFloat32(row + offset.z, this.littleEndian));\n        }\n        if (offset.normal_x !== void 0) {\n          normal.push(dataview.getFloat32(row + offset.normal_x, this.littleEndian));\n          normal.push(dataview.getFloat32(row + offset.normal_y, this.littleEndian));\n          normal.push(dataview.getFloat32(row + offset.normal_z, this.littleEndian));\n        }\n        if (this.genColorByZ) {\n          const pdColor = this.genColorByZ(dataview.getFloat32(row + offset.x, this.littleEndian), dataview.getFloat32(row + offset.y, this.littleEndian), dataview.getFloat32(row + offset.z, this.littleEndian));\n          const pdColorUnit8 = pdColor.map((hex) => hex / 255);\n          color.push(...pdColorUnit8);\n        }\n      }\n    }\n    const geometry = new BufferGeometry();\n    if (position.length > 0)\n      geometry.setAttribute(\"position\", new Float32BufferAttribute(position, 3));\n    if (normal.length > 0)\n      geometry.setAttribute(\"normal\", new Float32BufferAttribute(normal, 3));\n    if (color.length > 0)\n      geometry.setAttribute(\"color\", new Float32BufferAttribute(color, 3));\n    geometry.computeBoundingSphere();\n    const material = new PointsMaterial({size: 0.01});\n    if (color.length > 0) {\n      material.vertexColors = true;\n    } else {\n      material.color.setHex(16777215);\n    }\n    return new Points(geometry, material);\n  }\n  genColorByCoord(x, y, z) {\n    if (z <= 0) {\n      return [128, 128, 128];\n    }\n    if (z < 5) {\n      return [255, 0, 0];\n    }\n    if (z < 10) {\n      return [0, 255, 0];\n    }\n    return [0, 0, 255];\n  }\n  genColorByZ(x, y, z) {\n    const index = getIndex(z);\n    const color = COLOR_MAP_JET[index];\n    return [color[0], color[1], color[2]];\n  }\n}\nfunction getIndex(z) {\n  const minZ = -7;\n  const maxZ = 3;\n  const len = maxZ - minZ;\n  if (z < minZ) {\n    z = minZ;\n  }\n  if (z > maxZ) {\n    z = maxZ;\n  }\n  return Math.floor((z - minZ) / len * 255);\n}\n\nexport { PCDLoader };\n","import { EventDispatcher, Vector3, MOUSE, TOUCH, Quaternion, Spherical, Vector2 } from 'three';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _changeEvent = {type: \"change\"};\nconst _startEvent = {type: \"start\"};\nconst _endEvent = {type: \"end\"};\nclass OrbitControls extends EventDispatcher {\n  constructor(object, domElement) {\n    super();\n    __publicField(this, \"listenToKeyEvents\", (domElement) => {\n      domElement.addEventListener(\"keydown\", onKeyDown);\n      this._domElementKeyEvents = domElement;\n    });\n    if (domElement === void 0)\n      console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.');\n    if (domElement === document)\n      console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n    this.object = object;\n    this.domElement = domElement;\n    this.domElement.style.touchAction = \"none\";\n    this.enabled = true;\n    this.target = new Vector3();\n    this.minDistance = 0;\n    this.maxDistance = Infinity;\n    this.minZoom = 0;\n    this.maxZoom = Infinity;\n    this.minPolarAngle = 0;\n    this.maxPolarAngle = Math.PI;\n    this.minAzimuthAngle = -Infinity;\n    this.maxAzimuthAngle = Infinity;\n    this.enableDamping = false;\n    this.dampingFactor = 0.05;\n    this.enableZoom = true;\n    this.zoomSpeed = 1;\n    this.enableRotate = true;\n    this.rotateSpeed = 1;\n    this.enablePan = true;\n    this.panSpeed = 1;\n    this.screenSpacePanning = true;\n    this.keyPanSpeed = 7;\n    this.autoRotate = false;\n    this.autoRotateSpeed = 2;\n    this.keys = {LEFT: \"ArrowLeft\", UP: \"ArrowUp\", RIGHT: \"ArrowRight\", BOTTOM: \"ArrowDown\"};\n    this.mouseButtons = {LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN};\n    this.touches = {ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN};\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.zoom0 = this.object.zoom;\n    this._domElementKeyEvents = null;\n    this.getPolarAngle = function() {\n      return spherical.phi;\n    };\n    this.getAzimuthalAngle = function() {\n      return spherical.theta;\n    };\n    this.getDistance = function() {\n      return this.object.position.distanceTo(this.target);\n    };\n    this.saveState = function() {\n      scope.target0.copy(scope.target);\n      scope.position0.copy(scope.object.position);\n      scope.zoom0 = scope.object.zoom;\n    };\n    this.reset = function() {\n      scope.target.copy(scope.target0);\n      scope.object.position.copy(scope.position0);\n      scope.object.zoom = scope.zoom0;\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(_changeEvent);\n      scope.update();\n      state = STATE.NONE;\n    };\n    this.update = function() {\n      const offset = new Vector3();\n      const quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\n      const quatInverse = quat.clone().invert();\n      const lastPosition = new Vector3();\n      const lastQuaternion = new Quaternion();\n      const twoPI = 2 * Math.PI;\n      return function update() {\n        const {position} = scope.object;\n        offset.copy(position).sub(scope.target);\n        offset.applyQuaternion(quat);\n        spherical.setFromVector3(offset);\n        if (scope.autoRotate && state === STATE.NONE) {\n          rotateLeft(getAutoRotationAngle());\n        }\n        if (scope.enableDamping) {\n          spherical.theta += sphericalDelta.theta * scope.dampingFactor;\n          spherical.phi += sphericalDelta.phi * scope.dampingFactor;\n        } else {\n          spherical.theta += sphericalDelta.theta;\n          spherical.phi += sphericalDelta.phi;\n        }\n        let min = scope.minAzimuthAngle;\n        let max = scope.maxAzimuthAngle;\n        if (isFinite(min) && isFinite(max)) {\n          if (min < -Math.PI)\n            min += twoPI;\n          else if (min > Math.PI)\n            min -= twoPI;\n          if (max < -Math.PI)\n            max += twoPI;\n          else if (max > Math.PI)\n            max -= twoPI;\n          if (min <= max) {\n            spherical.theta = Math.max(min, Math.min(max, spherical.theta));\n          } else {\n            spherical.theta = spherical.theta > (min + max) / 2 ? Math.max(min, spherical.theta) : Math.min(max, spherical.theta);\n          }\n        }\n        spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n        spherical.makeSafe();\n        spherical.radius *= scale;\n        spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n        if (scope.enableDamping === true) {\n          scope.target.addScaledVector(panOffset, scope.dampingFactor);\n        } else {\n          scope.target.add(panOffset);\n        }\n        offset.setFromSpherical(spherical);\n        offset.applyQuaternion(quatInverse);\n        position.copy(scope.target).add(offset);\n        scope.object.lookAt(scope.target);\n        if (scope.enableDamping === true) {\n          sphericalDelta.theta *= 1 - scope.dampingFactor;\n          sphericalDelta.phi *= 1 - scope.dampingFactor;\n          panOffset.multiplyScalar(1 - scope.dampingFactor);\n        } else {\n          sphericalDelta.set(0, 0, 0);\n          panOffset.set(0, 0, 0);\n        }\n        scale = 1;\n        if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n          scope.dispatchEvent(_changeEvent);\n          lastPosition.copy(scope.object.position);\n          lastQuaternion.copy(scope.object.quaternion);\n          zoomChanged = false;\n          return true;\n        }\n        return false;\n      };\n    }();\n    this.dispose = function() {\n      scope.domElement.removeEventListener(\"contextmenu\", onContextMenu);\n      scope.domElement.removeEventListener(\"pointerdown\", onPointerDown);\n      scope.domElement.removeEventListener(\"pointercancel\", onPointerCancel);\n      scope.domElement.removeEventListener(\"wheel\", onMouseWheel);\n      scope.domElement.removeEventListener(\"pointermove\", onPointerMove);\n      scope.domElement.removeEventListener(\"pointerup\", onPointerUp);\n      if (scope._domElementKeyEvents !== null) {\n        scope._domElementKeyEvents.removeEventListener(\"keydown\", onKeyDown2);\n      }\n    };\n    const scope = this;\n    const STATE = {\n      NONE: -1,\n      ROTATE: 0,\n      DOLLY: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_PAN: 4,\n      TOUCH_DOLLY_PAN: 5,\n      TOUCH_DOLLY_ROTATE: 6\n    };\n    let state = STATE.NONE;\n    const EPS = 1e-6;\n    const spherical = new Spherical();\n    const sphericalDelta = new Spherical();\n    let scale = 1;\n    const panOffset = new Vector3();\n    let zoomChanged = false;\n    const rotateStart = new Vector2();\n    const rotateEnd = new Vector2();\n    const rotateDelta = new Vector2();\n    const panStart = new Vector2();\n    const panEnd = new Vector2();\n    const panDelta = new Vector2();\n    const dollyStart = new Vector2();\n    const dollyEnd = new Vector2();\n    const dollyDelta = new Vector2();\n    const pointers = [];\n    const pointerPositions = {};\n    function getAutoRotationAngle() {\n      return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n    }\n    function getZoomScale() {\n      return Math.pow(0.95, scope.zoomSpeed);\n    }\n    function rotateLeft(angle) {\n      sphericalDelta.theta -= angle;\n    }\n    function rotateUp(angle) {\n      sphericalDelta.phi -= angle;\n    }\n    const panLeft = function() {\n      const v = new Vector3();\n      return function panLeft2(distance, objectMatrix) {\n        v.setFromMatrixColumn(objectMatrix, 0);\n        v.multiplyScalar(-distance);\n        panOffset.add(v);\n      };\n    }();\n    const panUp = function() {\n      const v = new Vector3();\n      return function panUp2(distance, objectMatrix) {\n        if (scope.screenSpacePanning === true) {\n          v.setFromMatrixColumn(objectMatrix, 1);\n        } else {\n          v.setFromMatrixColumn(objectMatrix, 0);\n          v.crossVectors(scope.object.up, v);\n        }\n        v.multiplyScalar(distance);\n        panOffset.add(v);\n      };\n    }();\n    const pan = function() {\n      const offset = new Vector3();\n      return function pan2(deltaX, deltaY) {\n        const element = scope.domElement;\n        if (scope.object.isPerspectiveCamera) {\n          const {position} = scope.object;\n          offset.copy(position).sub(scope.target);\n          let targetDistance = offset.length();\n          targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180);\n          panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n          panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n        } else if (scope.object.isOrthographicCamera) {\n          panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n          panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n        } else {\n          console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\");\n          scope.enablePan = false;\n        }\n      };\n    }();\n    function dollyOut(dollyScale) {\n      if (scope.object.isPerspectiveCamera) {\n        scale /= dollyScale;\n      } else if (scope.object.isOrthographicCamera) {\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n        scope.enableZoom = false;\n      }\n    }\n    function dollyIn(dollyScale) {\n      if (scope.object.isPerspectiveCamera) {\n        scale *= dollyScale;\n      } else if (scope.object.isOrthographicCamera) {\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n        scope.enableZoom = false;\n      }\n    }\n    function handleMouseDownRotate(event) {\n      rotateStart.set(event.clientX, event.clientY);\n    }\n    function handleMouseDownDolly(event) {\n      dollyStart.set(event.clientX, event.clientY);\n    }\n    function handleMouseDownPan(event) {\n      panStart.set(event.clientX, event.clientY);\n    }\n    function handleMouseMoveRotate(event) {\n      rotateEnd.set(event.clientX, event.clientY);\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n      const element = scope.domElement;\n      rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight);\n      rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n      rotateStart.copy(rotateEnd);\n      scope.update();\n    }\n    function handleMouseMoveDolly(event) {\n      dollyEnd.set(event.clientX, event.clientY);\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n      if (dollyDelta.y > 0) {\n        dollyOut(getZoomScale());\n      } else if (dollyDelta.y < 0) {\n        dollyIn(getZoomScale());\n      }\n      dollyStart.copy(dollyEnd);\n      scope.update();\n    }\n    function handleMouseMovePan(event) {\n      panEnd.set(event.clientX, event.clientY);\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n      pan(panDelta.x, panDelta.y);\n      panStart.copy(panEnd);\n      scope.update();\n    }\n    function handleMouseWheel(event) {\n      if (event.deltaY < 0) {\n        dollyIn(getZoomScale());\n      } else if (event.deltaY > 0) {\n        dollyOut(getZoomScale());\n      }\n      scope.update();\n    }\n    function handleKeyDown(event) {\n      let needsUpdate = false;\n      switch (event.code) {\n        case scope.keys.UP:\n          pan(0, scope.keyPanSpeed);\n          needsUpdate = true;\n          break;\n        case scope.keys.BOTTOM:\n          pan(0, -scope.keyPanSpeed);\n          needsUpdate = true;\n          break;\n        case scope.keys.LEFT:\n          pan(scope.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n        case scope.keys.RIGHT:\n          pan(-scope.keyPanSpeed, 0);\n          needsUpdate = true;\n          break;\n      }\n      if (needsUpdate) {\n        event.preventDefault();\n        scope.update();\n      }\n    }\n    function handleTouchStartRotate() {\n      if (pointers.length === 1) {\n        rotateStart.set(pointers[0].pageX, pointers[0].pageY);\n      } else {\n        const x = 0.5 * (pointers[0].pageX + pointers[1].pageX);\n        const y = 0.5 * (pointers[0].pageY + pointers[1].pageY);\n        rotateStart.set(x, y);\n      }\n    }\n    function handleTouchStartPan() {\n      if (pointers.length === 1) {\n        panStart.set(pointers[0].pageX, pointers[0].pageY);\n      } else {\n        const x = 0.5 * (pointers[0].pageX + pointers[1].pageX);\n        const y = 0.5 * (pointers[0].pageY + pointers[1].pageY);\n        panStart.set(x, y);\n      }\n    }\n    function handleTouchStartDolly() {\n      const dx = pointers[0].pageX - pointers[1].pageX;\n      const dy = pointers[0].pageY - pointers[1].pageY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      dollyStart.set(0, distance);\n    }\n    function handleTouchStartDollyPan() {\n      if (scope.enableZoom)\n        handleTouchStartDolly();\n      if (scope.enablePan)\n        handleTouchStartPan();\n    }\n    function handleTouchStartDollyRotate() {\n      if (scope.enableZoom)\n        handleTouchStartDolly();\n      if (scope.enableRotate)\n        handleTouchStartRotate();\n    }\n    function handleTouchMoveRotate(event) {\n      if (pointers.length == 1) {\n        rotateEnd.set(event.pageX, event.pageY);\n      } else {\n        const position = getSecondPointerPosition(event);\n        const x = 0.5 * (event.pageX + position.x);\n        const y = 0.5 * (event.pageY + position.y);\n        rotateEnd.set(x, y);\n      }\n      rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n      const element = scope.domElement;\n      rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight);\n      rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n      rotateStart.copy(rotateEnd);\n    }\n    function handleTouchMovePan(event) {\n      if (pointers.length === 1) {\n        panEnd.set(event.pageX, event.pageY);\n      } else {\n        const position = getSecondPointerPosition(event);\n        const x = 0.5 * (event.pageX + position.x);\n        const y = 0.5 * (event.pageY + position.y);\n        panEnd.set(x, y);\n      }\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n      pan(panDelta.x, panDelta.y);\n      panStart.copy(panEnd);\n    }\n    function handleTouchMoveDolly(event) {\n      const position = getSecondPointerPosition(event);\n      const dx = event.pageX - position.x;\n      const dy = event.pageY - position.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      dollyEnd.set(0, distance);\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n      dollyOut(dollyDelta.y);\n      dollyStart.copy(dollyEnd);\n    }\n    function handleTouchMoveDollyPan(event) {\n      if (scope.enableZoom)\n        handleTouchMoveDolly(event);\n      if (scope.enablePan)\n        handleTouchMovePan(event);\n    }\n    function handleTouchMoveDollyRotate(event) {\n      if (scope.enableZoom)\n        handleTouchMoveDolly(event);\n      if (scope.enableRotate)\n        handleTouchMoveRotate(event);\n    }\n    function onPointerDown(event) {\n      if (scope.enabled === false)\n        return;\n      if (pointers.length === 0) {\n        scope.domElement.setPointerCapture(event.pointerId);\n        scope.domElement.addEventListener(\"pointermove\", onPointerMove);\n        scope.domElement.addEventListener(\"pointerup\", onPointerUp);\n      }\n      addPointer(event);\n      if (event.pointerType === \"touch\") {\n        onTouchStart(event);\n      } else {\n        onMouseDown(event);\n      }\n    }\n    function onPointerMove(event) {\n      if (scope.enabled === false)\n        return;\n      if (event.pointerType === \"touch\") {\n        onTouchMove(event);\n      } else {\n        onMouseMove(event);\n      }\n    }\n    function onPointerUp(event) {\n      removePointer(event);\n      if (pointers.length === 0) {\n        scope.domElement.releasePointerCapture(event.pointerId);\n        scope.domElement.removeEventListener(\"pointermove\", onPointerMove);\n        scope.domElement.removeEventListener(\"pointerup\", onPointerUp);\n      }\n      scope.dispatchEvent(_endEvent);\n      state = STATE.NONE;\n    }\n    function onPointerCancel(event) {\n      removePointer(event);\n    }\n    function onMouseDown(event) {\n      let mouseAction;\n      switch (event.button) {\n        case 0:\n          mouseAction = scope.mouseButtons.LEFT;\n          break;\n        case 1:\n          mouseAction = scope.mouseButtons.MIDDLE;\n          break;\n        case 2:\n          mouseAction = scope.mouseButtons.RIGHT;\n          break;\n        default:\n          mouseAction = -1;\n      }\n      switch (mouseAction) {\n        case MOUSE.DOLLY:\n          if (scope.enableZoom === false)\n            return;\n          handleMouseDownDolly(event);\n          state = STATE.DOLLY;\n          break;\n        case MOUSE.ROTATE:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (scope.enablePan === false)\n              return;\n            handleMouseDownPan(event);\n            state = STATE.PAN;\n          } else {\n            if (scope.enableRotate === false)\n              return;\n            handleMouseDownRotate(event);\n            state = STATE.ROTATE;\n          }\n          break;\n        case MOUSE.PAN:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (scope.enableRotate === false)\n              return;\n            handleMouseDownRotate(event);\n            state = STATE.ROTATE;\n          } else {\n            if (scope.enablePan === false)\n              return;\n            handleMouseDownPan(event);\n            state = STATE.PAN;\n          }\n          break;\n        default:\n          state = STATE.NONE;\n      }\n      if (state !== STATE.NONE) {\n        scope.dispatchEvent(_startEvent);\n      }\n    }\n    function onMouseMove(event) {\n      if (scope.enabled === false)\n        return;\n      switch (state) {\n        case STATE.ROTATE:\n          if (scope.enableRotate === false)\n            return;\n          handleMouseMoveRotate(event);\n          break;\n        case STATE.DOLLY:\n          if (scope.enableZoom === false)\n            return;\n          handleMouseMoveDolly(event);\n          break;\n        case STATE.PAN:\n          if (scope.enablePan === false)\n            return;\n          handleMouseMovePan(event);\n          break;\n      }\n    }\n    function onMouseWheel(event) {\n      if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE)\n        return;\n      event.preventDefault();\n      scope.dispatchEvent(_startEvent);\n      handleMouseWheel(event);\n      scope.dispatchEvent(_endEvent);\n    }\n    function onKeyDown2(event) {\n      if (scope.enabled === false || scope.enablePan === false)\n        return;\n      handleKeyDown(event);\n    }\n    function onTouchStart(event) {\n      trackPointer(event);\n      switch (pointers.length) {\n        case 1:\n          switch (scope.touches.ONE) {\n            case TOUCH.ROTATE:\n              if (scope.enableRotate === false)\n                return;\n              handleTouchStartRotate();\n              state = STATE.TOUCH_ROTATE;\n              break;\n            case TOUCH.PAN:\n              if (scope.enablePan === false)\n                return;\n              handleTouchStartPan();\n              state = STATE.TOUCH_PAN;\n              break;\n            default:\n              state = STATE.NONE;\n          }\n          break;\n        case 2:\n          switch (scope.touches.TWO) {\n            case TOUCH.DOLLY_PAN:\n              if (scope.enableZoom === false && scope.enablePan === false)\n                return;\n              handleTouchStartDollyPan();\n              state = STATE.TOUCH_DOLLY_PAN;\n              break;\n            case TOUCH.DOLLY_ROTATE:\n              if (scope.enableZoom === false && scope.enableRotate === false)\n                return;\n              handleTouchStartDollyRotate();\n              state = STATE.TOUCH_DOLLY_ROTATE;\n              break;\n            default:\n              state = STATE.NONE;\n          }\n          break;\n        default:\n          state = STATE.NONE;\n      }\n      if (state !== STATE.NONE) {\n        scope.dispatchEvent(_startEvent);\n      }\n    }\n    function onTouchMove(event) {\n      trackPointer(event);\n      switch (state) {\n        case STATE.TOUCH_ROTATE:\n          if (scope.enableRotate === false)\n            return;\n          handleTouchMoveRotate(event);\n          scope.update();\n          break;\n        case STATE.TOUCH_PAN:\n          if (scope.enablePan === false)\n            return;\n          handleTouchMovePan(event);\n          scope.update();\n          break;\n        case STATE.TOUCH_DOLLY_PAN:\n          if (scope.enableZoom === false && scope.enablePan === false)\n            return;\n          handleTouchMoveDollyPan(event);\n          scope.update();\n          break;\n        case STATE.TOUCH_DOLLY_ROTATE:\n          if (scope.enableZoom === false && scope.enableRotate === false)\n            return;\n          handleTouchMoveDollyRotate(event);\n          scope.update();\n          break;\n        default:\n          state = STATE.NONE;\n      }\n    }\n    function onContextMenu(event) {\n      if (scope.enabled === false)\n        return;\n      event.preventDefault();\n    }\n    function addPointer(event) {\n      pointers.push(event);\n    }\n    function removePointer(event) {\n      delete pointerPositions[event.pointerId];\n      for (let i = 0; i < pointers.length; i++) {\n        if (pointers[i].pointerId == event.pointerId) {\n          pointers.splice(i, 1);\n          return;\n        }\n      }\n    }\n    function trackPointer(event) {\n      let position = pointerPositions[event.pointerId];\n      if (position === void 0) {\n        position = new Vector2();\n        pointerPositions[event.pointerId] = position;\n      }\n      position.set(event.pageX, event.pageY);\n    }\n    function getSecondPointerPosition(event) {\n      const pointer = event.pointerId === pointers[0].pointerId ? pointers[1] : pointers[0];\n      return pointerPositions[pointer.pointerId];\n    }\n    scope.domElement.addEventListener(\"contextmenu\", onContextMenu);\n    scope.domElement.addEventListener(\"pointerdown\", onPointerDown);\n    scope.domElement.addEventListener(\"pointercancel\", onPointerCancel);\n    scope.domElement.addEventListener(\"wheel\", onMouseWheel, {passive: false});\n    this.update();\n  }\n}\n\nexport { OrbitControls };\n","import { PCDLoader } from './PCDLoader.js';\n\nclass PointCloudCache {\n  constructor() {\n    this.MAX_SIZE = 50;\n    this.cacheList = [];\n    this.loadPCDFile = (src) => {\n      return new Promise((resolve, reject) => {\n        const clonePoints = this.pointsMap.get(src);\n        const cloneColor = this.colorMap.get(src);\n        if (clonePoints && cloneColor) {\n          resolve({points: clonePoints, color: cloneColor});\n          return;\n        }\n        if (this.cacheList.length > this.MAX_SIZE) {\n          const firstCacheInfo = this.cacheList.shift();\n          if (firstCacheInfo) {\n            this.pointsMap.delete(firstCacheInfo.src);\n          }\n        }\n        this.cacheList.push({src});\n        this.pcdLoader.load(src, (points) => {\n          const pointsArray = points.geometry.attributes.position.array;\n          const colorArray = points.geometry.attributes.color.array;\n          this.pointsMap.set(src, pointsArray);\n          this.colorMap.set(src, colorArray);\n          resolve({points: pointsArray, color: colorArray});\n        }, () => {\n        }, (err) => {\n          reject(err);\n        });\n      });\n    };\n    this.pcdLoader = new PCDLoader();\n    this.pointsMap = new Map();\n    this.colorMap = new Map();\n    this.cache2DHighlightIndex = new Map();\n  }\n  static getInstance() {\n    if (this.instance == null) {\n      this.instance = new PointCloudCache();\n    }\n    return this.instance;\n  }\n  updateColor(src, color) {\n    this.colorMap.set(src, color);\n  }\n  clearCache2DHighlightIndex() {\n    this.cache2DHighlightIndex.clear();\n  }\n}\n\nexport { PointCloudCache };\n","class DefaultSelector {\n  constructor(store) {\n    this.store = store;\n    this.polygon2d = [];\n  }\n  pushPoint(x, y) {\n    this.polygon2d.push({x, y});\n    this.store.syncPolygon2d(this.polygon2d);\n  }\n  updatePolygon2d(polygon2d) {\n    this.polygon2d = polygon2d;\n    this.store.syncPolygon2d(this.polygon2d);\n  }\n}\n\nexport { DefaultSelector as default };\n","import DefaultSelector from './selector.js';\n\nclass LassoSelector extends DefaultSelector {\n  mouseDown(ev) {\n    if (ev.button === 2) {\n      this.pushPoint(ev.offsetX, ev.offsetY);\n    }\n  }\n  mouseUp(ev) {\n    if (ev.button === 2) {\n      this.store.getPointsInPolygon(this.polygon2d);\n      this.updatePolygon2d([]);\n    }\n  }\n  mouseMove(ev) {\n    if (ev.button === 2) {\n      this.pushPoint(ev.offsetX, ev.offsetY);\n    }\n  }\n}\n\nexport { LassoSelector as default };\n","import DefaultSelector from './selector.js';\n\nclass CircleSelector extends DefaultSelector {\n  constructor() {\n    super(...arguments);\n    this.radius = 20;\n  }\n  mouseDown(ev) {\n    if (ev.button === 2) {\n      this.pushPoint(ev.offsetX, ev.offsetY);\n      this.startX = ev.offsetX;\n      this.startY = ev.offsetY;\n    }\n  }\n  mouseUp(ev) {\n    if (ev.button === 2) {\n      this.store.getPointsInPolygon(this.polygon2d);\n      this.polygon2d.length = 0;\n      this.startX = this.startY = NaN;\n    }\n  }\n  mouseMove(ev) {\n    if (ev.button === 2 && this.startX && this.startY) {\n      this.polygon2d.length = 0;\n      const precision = 64;\n      const PI2 = Math.PI * 2;\n      const ox = this.startX;\n      const oy = this.startY;\n      const nx = ev.offsetX;\n      const ny = ev.offsetY;\n      const r = Math.sqrt((nx - ox) * (nx - ox) + (ny - oy) * (ny - oy));\n      for (let a = 0; a < PI2; a += PI2 / precision) {\n        this.pushPoint(ox + r * Math.cos(a), oy - r * Math.sin(a));\n      }\n    }\n  }\n}\n\nexport { CircleSelector as default };\n","import { EPointCloudSegmentStatus } from '@labelbee/lb-utils';\nimport LassoSelector from './selector/lassoSelector.js';\nimport CircleSelector from './selector/circleSelector.js';\n\nclass PointCloudSegmentOperation {\n  constructor(props) {\n    this.onMouseMove = (iev) => {\n      if (this.store.isCheckStatus || this.store.isReadyStatus) {\n        this.store.updateMouse({x: iev.offsetX, y: iev.offsetY});\n      }\n      if (this.isForbid || this.store.checkMode) {\n        return;\n      }\n      const ev = {\n        offsetX: iev.offsetX,\n        offsetY: iev.offsetY,\n        button: iev.buttons\n      };\n      this.currentTool.mouseMove(ev);\n    };\n    this.onMouseDown = (iev) => {\n      if (this.isForbid || this.store.checkMode) {\n        return;\n      }\n      this.currentTool.mouseDown(iev);\n    };\n    this.onMouseUp = (iev) => {\n      if (this.isForbid || this.store.orbiting === true || this.store.checkMode) {\n        return;\n      }\n      if (this.baseMouseDown(iev)) {\n        return;\n      }\n      this.currentTool.mouseUp(iev);\n    };\n    this.baseMouseDown = (e) => {\n      if (this.store.checkMode) {\n        return;\n      }\n      switch (e.button) {\n        case 0:\n          if (this.store.isReadyStatus || this.store.isCheckStatus) {\n            this.store.checkPoints();\n            return true;\n          }\n          break;\n      }\n    };\n    this._raycasting = () => {\n      if ([EPointCloudSegmentStatus.Ready, EPointCloudSegmentStatus.Check].includes(this.store.segmentStatus)) {\n        const {mouse, camera, raycaster} = this.store;\n        raycaster.setFromCamera(mouse, camera);\n        const intersects = raycaster.intersectObjects(this.store.allSegmentPoints, false);\n        const intersect = intersects[0];\n        if (intersect) {\n          this.store.highlightPoints(intersect.object);\n        } else {\n          this.store.resetAllSegDataSizeAndRender();\n          this.store.resetHoverPointsID();\n        }\n      }\n    };\n    this.dom = props.dom;\n    this.store = props.store;\n    this.lassoSelector = new LassoSelector(this.store);\n    this.circleSelector = new CircleSelector(this.store);\n    this.currentTool = this.lassoSelector;\n    this.currentToolName = \"LassoSelector\";\n    this.dom.addEventListener(\"pointermove\", this.onMouseMove.bind(this));\n    this.dom.addEventListener(\"pointerdown\", this.onMouseDown.bind(this));\n    this.dom.addEventListener(\"pointerup\", this.onMouseUp.bind(this));\n    this.updateSelector2Lasso = this.updateSelector2Lasso.bind(this);\n    this.updateSelector2Circle = this.updateSelector2Circle.bind(this);\n  }\n  getCoordinate(e) {\n    const bounding = this.dom.getBoundingClientRect();\n    return {\n      x: e.clientX - bounding.left,\n      y: e.clientY - bounding.top\n    };\n  }\n  get forbidOperation() {\n    return this.store.forbidOperation;\n  }\n  get isForbid() {\n    return this.forbidOperation;\n  }\n  updateSelector2Lasso() {\n    this.currentTool = this.lassoSelector;\n    this.currentToolName = \"LassoSelector\";\n  }\n  updateSelector2Circle() {\n    this.currentTool = this.circleSelector;\n    this.currentToolName = \"CircleSelector\";\n  }\n}\n\nexport { PointCloudSegmentOperation };\n","import { EPointCloudSegmentStatus } from '@labelbee/lb-utils';\n\nclass PointCloudFSM {\n  constructor() {\n    this.segmentStatus = EPointCloudSegmentStatus.Ready;\n  }\n  statusToggle() {\n    switch (this.segmentStatus) {\n      case EPointCloudSegmentStatus.Ready:\n        this.segmentStatus = EPointCloudSegmentStatus.Check;\n        break;\n      case EPointCloudSegmentStatus.Check:\n        this.segmentStatus = EPointCloudSegmentStatus.Edit;\n        break;\n      case EPointCloudSegmentStatus.Edit:\n        this.segmentStatus = EPointCloudSegmentStatus.Ready;\n        break;\n      default: {\n        console.error(\"Error Status in PointCloudSegmentFSM\");\n      }\n    }\n  }\n  updateStatus2Edit() {\n    this.segmentStatus = EPointCloudSegmentStatus.Edit;\n  }\n  updateStatus2Check() {\n    this.segmentStatus = EPointCloudSegmentStatus.Check;\n  }\n  updateStatus2Ready() {\n    this.segmentStatus = EPointCloudSegmentStatus.Ready;\n  }\n  get isReadyStatus() {\n    return this.segmentStatus === EPointCloudSegmentStatus.Ready;\n  }\n  get isCheckStatus() {\n    return this.segmentStatus === EPointCloudSegmentStatus.Check;\n  }\n  get isEditStatus() {\n    return this.segmentStatus === EPointCloudSegmentStatus.Edit;\n  }\n}\nconst instance = new PointCloudFSM();\n\nexport { instance as default };\n","import * as THREE from 'three';\nimport { EPointCloudSegmentMode, EPointCloudSegmentCoverMode, EPointCloudSegmentFocusMode, PointCloudUtils } from '@labelbee/lb-utils';\nimport { isInPolygon } from '../../../utils/tool/polygonTool.js';\nimport uuid from '../../../utils/uuid.js';\nimport instance from './fsm.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst DEFAULT_PREFIX = \"LABELBEE_CANVAS_\";\nclass PointCloudStore {\n  constructor({container, scene, camera, renderer, emit, on, unbind, checkMode}) {\n    this.canvas2d = null;\n    this.polygon2d = [];\n    this.forbidOperation = false;\n    this.raycaster = new THREE.Raycaster();\n    this.mouse = new THREE.Vector2();\n    this.cloudData = new Map();\n    this.originPoints = new Float32Array([]);\n    this.segmentData = new Map();\n    this.hoverPointsID = \"\";\n    this.segmentMode = EPointCloudSegmentMode.Add;\n    this.segmentCoverMode = EPointCloudSegmentCoverMode.Cover;\n    this.segmentFocusMode = EPointCloudSegmentFocusMode.Unfocus;\n    this.hideSegment = false;\n    this.checkMode = false;\n    this.updatePointCloud = false;\n    this.addPointCloud = false;\n    this.orbiting = false;\n    this.currentAttribute = \"\";\n    this.highlightAttribute = \"\";\n    this.hiddenAttributes = [];\n    this.pointCloudObjectName = \"pointCloud\";\n    this.updatePointCloudBySegment = (segArr) => {\n      this.segmentData.forEach((seg, id) => {\n        var _a;\n        if (id !== ((_a = this.cacheSegData) == null ? void 0 : _a.id)) {\n          const segPoints = this.scene.getObjectByName(id);\n          if (segPoints) {\n            segPoints.removeFromParent();\n          }\n        }\n      });\n      const displaySeg = segArr == null ? void 0 : segArr.filter((f) => {\n        var _a;\n        return !this.hiddenAttributes.some((a) => a === f.attribute) && f.id !== ((_a = this.cacheSegData) == null ? void 0 : _a.id);\n      });\n      if ((displaySeg == null ? void 0 : displaySeg.length) !== 0) {\n        displaySeg.map((seg) => {\n          this.emit(\"addNewPointsCloud\", seg);\n          return seg;\n        });\n      }\n      this.emit(\"reRender3d\");\n    };\n    this.updateCoverPoints = (coverPoints = []) => {\n      this.segmentData.forEach((seg, id) => {\n        var _a;\n        if (id !== ((_a = this.cacheSegData) == null ? void 0 : _a.id)) {\n          const newIndexes = PointCloudUtils.splitPointsFromIndexes(seg.indexes, coverPoints);\n          const newPoints = [];\n          newIndexes.forEach((index) => {\n            newPoints.push(this.originPoints[index * 3], this.originPoints[index * 3 + 1], this.originPoints[index * 3 + 2]);\n          });\n          seg.indexes = newIndexes;\n          seg.points = new Float32Array(newPoints);\n          const originPoints = this.scene.getObjectByName(id);\n          if (originPoints) {\n            originPoints.geometry.setAttribute(\"position\", new THREE.Float32BufferAttribute(new Float32Array(newPoints), 3));\n            originPoints.geometry.attributes.position.needsUpdate = true;\n          }\n        }\n      });\n      this.syncSegmentData();\n      this.emit(\"reRender3d\");\n    };\n    this.container = container;\n    this.scene = scene;\n    this.camera = camera;\n    this.renderer = renderer;\n    this.emit = emit;\n    this.on = on;\n    this.unbind = unbind;\n    this.checkMode = checkMode;\n    this.createCanvas2d();\n    this.clearStash = this.clearStash.bind(this);\n    this.addStash2Store = this.addStash2Store.bind(this);\n    this.updateCheck2Edit = this.updateCheck2Edit.bind(this);\n    this.setAttribute = this.setAttribute.bind(this);\n    this.setSegmentMode = this.setSegmentMode.bind(this);\n    this.setSegmentCoverMode = this.setSegmentCoverMode.bind(this);\n    this.setSegmentFocusMode = this.setSegmentFocusMode.bind(this);\n    this.switchSegmentHideMode = this.switchSegmentHideMode.bind(this);\n    this.highlightPointsByAttribute = this.highlightPointsByAttribute.bind(this);\n    this.setHiddenAttributes = this.setHiddenAttributes.bind(this);\n    this.clearAllSegmentData = this.clearAllSegmentData.bind(this);\n    this.deleteSelectedSegmentData = this.deleteSelectedSegmentData.bind(this);\n    this.initMsg();\n    this.setupRaycaster();\n  }\n  initMsg() {\n    this.on(\"clearStash\", this.clearStash);\n    this.on(\"addStash2Store\", this.addStash2Store);\n    this.on(\"updateCheck2Edit\", this.updateCheck2Edit);\n    this.on(\"setSegmentMode\", this.setSegmentMode);\n    this.on(\"setSegmentCoverMode\", this.setSegmentCoverMode);\n    this.on(\"setSegmentFocusMode\", this.setSegmentFocusMode);\n    this.on(\"switchHideSegment\", this.switchSegmentHideMode);\n    this.on(\"clearAllSegmentData\", this.clearAllSegmentData);\n    this.on(\"deleteSelectedSegmentData\", this.deleteSelectedSegmentData);\n  }\n  unbindMsg() {\n    this.unbind(\"clearStash\", this.clearStash);\n    this.unbind(\"addStash2Store\", this.addStash2Store);\n    this.unbind(\"updateCheck2Edit\", this.updateCheck2Edit);\n    this.unbind(\"setSegmentMode\", this.setSegmentMode);\n    this.unbind(\"setSegmentCoverMode\", this.setSegmentCoverMode);\n    this.unbind(\"setSegmentFocusMode\", this.setSegmentFocusMode);\n    this.unbind(\"switchHideSegment\", this.switchSegmentHideMode);\n    this.unbind(\"clearAllSegmentData\", this.clearAllSegmentData);\n    this.unbind(\"deleteSelectedSegmentData\", this.deleteSelectedSegmentData);\n  }\n  get containerWidth() {\n    return this.container.clientWidth;\n  }\n  get containerHeight() {\n    return this.container.clientHeight;\n  }\n  get allSegmentPoints() {\n    return this.scene.children.filter((v) => v.type === \"Points\" && v.name !== this.pointCloudObjectName);\n  }\n  get selectedSegmentPoints() {\n    var _a, _b;\n    return this.scene.getObjectByName((_b = (_a = this.cacheSegData) == null ? void 0 : _a.id) != null ? _b : \"\");\n  }\n  get segmentStatus() {\n    return instance.segmentStatus;\n  }\n  get isReadyStatus() {\n    return instance.isReadyStatus;\n  }\n  get isCheckStatus() {\n    return instance.isCheckStatus;\n  }\n  get isEditStatus() {\n    return instance.isEditStatus;\n  }\n  get formatData() {\n    const newArray = this.segmentData.values();\n    const arr = [];\n    for (const v of newArray) {\n      arr.push({\n        attribute: v.attribute,\n        id: v.id,\n        indexes: v.indexes\n      });\n    }\n    return arr;\n  }\n  get pointCloudArray() {\n    return this.scene.getObjectByName(this.pointCloudObjectName);\n  }\n  clearAllSegmentData() {\n    this.segmentData = new Map();\n    this.syncSegmentData();\n  }\n  updateCurrentSegment(segmentData) {\n    this.updatePointCloudBySegment([]);\n    this.segmentData = new Map();\n    const {pointCloudArray} = this;\n    if (!pointCloudArray) {\n      return;\n    }\n    const position = pointCloudArray.geometry.attributes.position.array;\n    segmentData.forEach((data) => {\n      const points = [];\n      data.indexes.forEach((index) => {\n        points.push(position[index * 3], position[index * 3 + 1], position[index * 3 + 2]);\n        this.cloudData.set(`${position[index * 3]}@${position[index * 3 + 1]}@${position[index * 3 + 2]}`, {\n          visible: true\n        });\n      });\n      const newPoints = __spreadProps(__spreadValues({}, data), {\n        points: new Float32Array(points)\n      });\n      this.segmentData.set(data.id, newPoints);\n      this.emit(\"addNewPointsCloud\", __spreadProps(__spreadValues({}, data), {\n        points: new Float32Array(points)\n      }));\n    });\n    this.syncSegmentData();\n  }\n  statusToggle() {\n    instance.statusToggle();\n  }\n  updateStatus2Edit() {\n    instance.updateStatus2Edit();\n  }\n  createCanvas(id) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.id = id;\n    this.updateCanvasBasicStyle(canvas, {width: this.containerWidth, height: this.containerHeight}, 10);\n    return canvas;\n  }\n  createCanvas2d() {\n    this.canvas2d = this.createCanvas(`${DEFAULT_PREFIX}2d`);\n    this.container.appendChild(this.canvas2d);\n  }\n  setupRaycaster() {\n    this.raycaster.params = {\n      Mesh: {},\n      Line: {threshold: 1},\n      LOD: {},\n      Points: {threshold: 0.2},\n      Sprite: {}\n    };\n  }\n  setHoverPointsID(id) {\n    this.hoverPointsID = id;\n  }\n  setSegmentMode(mode) {\n    this.segmentMode = mode;\n  }\n  setSegmentCoverMode(coverMode) {\n    this.segmentCoverMode = coverMode;\n  }\n  setSegmentFocusMode(focusMode) {\n    this.segmentFocusMode = focusMode;\n    if (focusMode === EPointCloudSegmentFocusMode.Focus) {\n      this.emit(\"clearPointCloud\");\n    }\n    if (focusMode === EPointCloudSegmentFocusMode.Unfocus) {\n      this.emit(\"loadPCDFile\");\n    }\n    this.emit(\"reRender3d\");\n    this.updatePointCloudBySegment(focusMode === EPointCloudSegmentFocusMode.Focus ? [] : [...this.segmentData.values()]);\n  }\n  switchSegmentHideMode(hideSegment) {\n    this.hideSegment = hideSegment;\n    this.updatePointCloudBySegment(hideSegment === true ? [] : [...this.segmentData.values()]);\n  }\n  setHiddenAttributes(attributes) {\n    this.hiddenAttributes = attributes;\n    this.updatePointCloudBySegment([...this.segmentData.values()]);\n  }\n  setOriginPoints(originPoints) {\n    this.originPoints = originPoints;\n  }\n  updateCanvasBasicStyle(canvas, size, zIndex) {\n    const pixel = 1;\n    canvas.style.position = \"absolute\";\n    canvas.width = size.width * pixel;\n    canvas.height = size.height * pixel;\n    canvas.style.width = `${size.width}px`;\n    canvas.style.height = `${size.height}px`;\n    canvas.style.left = \"0\";\n    canvas.style.top = \"0\";\n    canvas.style.zIndex = `${zIndex} `;\n  }\n  syncPolygon2d(polygon2d) {\n    this.polygon2d = polygon2d;\n  }\n  getPointsInPolygon(originPolygon) {\n    if (!this.isReadyStatus && !this.isEditStatus) {\n      return;\n    }\n    const polygon = originPolygon;\n    const cloudDataArrayLike = this.originPoints;\n    if (cloudDataArrayLike) {\n      const len = cloudDataArrayLike.length;\n      const vertices = [];\n      const covers = [];\n      const indexes = [];\n      for (let i = 0; i < len; i += 3) {\n        const vector3d = new THREE.Vector3(cloudDataArrayLike[i], cloudDataArrayLike[i + 1], cloudDataArrayLike[i + 2]);\n        vector3d.project(this.camera);\n        const projection = {x: 0, y: 0};\n        projection.x = Math.round(vector3d.x * this.container.clientWidth / 2 + this.container.clientWidth / 2);\n        projection.y = Math.round(-vector3d.y * this.container.clientHeight / 2 + this.container.clientHeight / 2);\n        const isIn = isInPolygon(projection, polygon);\n        if (isIn) {\n          const x = cloudDataArrayLike[i];\n          const y = cloudDataArrayLike[i + 1];\n          const z = cloudDataArrayLike[i + 2];\n          const key = PointCloudUtils.getCloudKeys(x, y, z);\n          if (this.segmentMode === EPointCloudSegmentMode.Remove) {\n            this.cloudData.get(key).visible = false;\n            vertices.push(cloudDataArrayLike[i], cloudDataArrayLike[i + 1], cloudDataArrayLike[i + 2]);\n            indexes.push(i / 3);\n          }\n          if (this.segmentMode === EPointCloudSegmentMode.Add) {\n            if (this.segmentCoverMode === EPointCloudSegmentCoverMode.Cover) {\n              vertices.push(cloudDataArrayLike[i], cloudDataArrayLike[i + 1], cloudDataArrayLike[i + 2]);\n              indexes.push(i / 3);\n              if (this.cloudData.get(key).visible === true) {\n                covers.push(i / 3);\n              }\n            }\n            if (this.segmentCoverMode === EPointCloudSegmentCoverMode.Uncover) {\n              if (this.cloudData.get(key).visible === false) {\n                vertices.push(cloudDataArrayLike[i], cloudDataArrayLike[i + 1], cloudDataArrayLike[i + 2]);\n                indexes.push(i / 3);\n              }\n            }\n            if (this.cloudData.get(key).visible === false) {\n              this.cloudData.get(key).visible = true;\n            }\n          }\n        }\n      }\n      if (indexes.length === 0 || !this.cacheSegData && this.segmentMode === EPointCloudSegmentMode.Remove) {\n        return;\n      }\n      const verticesArray = new Float32Array(vertices);\n      this.updateStatusBySelector(verticesArray, covers, indexes);\n    }\n  }\n  updateStatusBySelector(verticesArray, covers, indexes) {\n    switch (this.segmentMode) {\n      case EPointCloudSegmentMode.Add:\n        if (this.cacheSegData) {\n          const {points, coverPoints = new Float32Array([])} = this.cacheSegData;\n          const combinedLength = points.length + verticesArray.length;\n          const combined = new Float32Array(combinedLength);\n          combined.set(points, 0);\n          combined.set(verticesArray, points.length);\n          const coverCombined = [...new Set([...coverPoints, ...covers])];\n          this.cacheSegData = __spreadProps(__spreadValues({}, this.cacheSegData), {\n            points: combined,\n            coverPoints: coverCombined,\n            indexes: this.cacheSegData.indexes.concat(indexes)\n          });\n          this.emit(\"updateNewPoints\", this.cacheSegData);\n        } else {\n          this.cacheSegData = {\n            id: uuid(),\n            attribute: this.currentAttribute,\n            points: verticesArray,\n            coverPoints: covers,\n            indexes\n          };\n          this.emit(\"addNewPointsCloud\", this.cacheSegData);\n        }\n        break;\n      case EPointCloudSegmentMode.Remove:\n        if (this.cacheSegData) {\n          const {points, indexes: originIndexes} = this.cacheSegData;\n          this.cacheSegData = __spreadProps(__spreadValues({}, this.cacheSegData), {\n            points: PointCloudUtils.splitPointsFromPoints(points, verticesArray),\n            indexes: PointCloudUtils.splitPointsFromIndexes(originIndexes, indexes)\n          });\n          this.emit(\"updateNewPoints\", this.cacheSegData);\n        }\n        break;\n    }\n    this.updateStatus2Edit();\n    this.emit(\"syncPointCloudStatus\", {\n      segmentStatus: this.segmentStatus,\n      cacheSegData: this.cacheSegData\n    });\n  }\n  syncPointCloudStatus() {\n    this.statusToggle();\n    const {segmentStatus, cacheSegData} = this;\n    this.emit(\"syncPointCloudStatus\", {segmentStatus, cacheSegData});\n  }\n  syncSegmentData() {\n    this.emit(\"syncSegmentData\", this.formatData);\n  }\n  addStash2Store() {\n    if (this.isEditStatus && this.cacheSegData) {\n      if (this.cacheSegData.coverPoints && this.cacheSegData.coverPoints.length !== 0) {\n        this.updateCoverPoints(this.cacheSegData.coverPoints);\n      }\n      delete this.cacheSegData.coverPoints;\n      this.segmentData.set(this.cacheSegData.id, this.cacheSegData);\n      this.cacheSegData = void 0;\n      this.syncPointCloudStatus();\n      this.syncSegmentData();\n    }\n  }\n  updateCloudDataStatus(points, status) {\n    for (let i = 0; i < points.length; i += 3) {\n      const x = points[i];\n      const y = points[i + 1];\n      const z = points[i + 2];\n      const key = PointCloudUtils.getCloudKeys(x, y, z);\n      const data = this.cloudData.get(key);\n      Object.keys(status).forEach((k) => {\n        data[k] = status[k];\n      });\n    }\n  }\n  clearStash() {\n    if (this.isEditStatus && this.cacheSegData) {\n      this.updateCloudDataStatus(this.cacheSegData.points, {visible: false});\n      if (this.segmentData.has(this.cacheSegData.id)) {\n        const originSegmentData = this.segmentData.get(this.cacheSegData.id);\n        if (originSegmentData) {\n          this.emit(\"updateNewPoints\", originSegmentData);\n          this.updateCloudDataStatus(originSegmentData == null ? void 0 : originSegmentData.points, {visible: true});\n        }\n      } else {\n        this.emit(\"clearStashRender\");\n      }\n      this.syncSegmentData();\n      this.cacheSegData = void 0;\n      this.syncPointCloudStatus();\n    }\n  }\n  deleteSelectedSegmentData(id = \"\") {\n    if ((this.isCheckStatus || this.isEditStatus) && this.cacheSegData) {\n      const segmentPoints = this.scene.getObjectByName(id);\n      const {indexes} = this.cacheSegData;\n      if (segmentPoints && indexes) {\n        const pointsArray = segmentPoints.geometry.attributes.position.array;\n        for (let i = 0; i < indexes.length; i++) {\n          const cloudData = this.cloudData.get(PointCloudUtils.getCloudKeys(pointsArray[i], pointsArray[i + 1], pointsArray[i + 2]));\n          if (cloudData) {\n            cloudData.visible = false;\n          }\n        }\n        this.resetSelectedSegmentStatus();\n      }\n    }\n  }\n  resetSelectedSegmentStatus() {\n    this.cacheSegData = void 0;\n    instance.updateStatus2Ready();\n    this.emit(\"syncPointCloudStatus\", {\n      segmentStatus: this.segmentStatus,\n      cacheSegData: this.cacheSegData\n    });\n  }\n  updateCheck2Edit() {\n    if (this.isCheckStatus) {\n      this.syncPointCloudStatus();\n    }\n  }\n  checkPoints() {\n    if (this.isReadyStatus || this.isCheckStatus) {\n      const hoverPoints = this.segmentData.get(this.hoverPointsID);\n      if (hoverPoints) {\n        this.cacheSegData = __spreadProps(__spreadValues({}, hoverPoints), {\n          points: new Float32Array(hoverPoints.points)\n        });\n        instance.updateStatus2Check();\n        this.emit(\"syncPointCloudStatus\", {\n          segmentStatus: this.segmentStatus,\n          cacheSegData: this.cacheSegData\n        });\n      } else {\n        this.resetSelectedSegmentStatus();\n      }\n    }\n  }\n  editPoints() {\n    const hoverPoints = this.segmentData.get(this.hoverPointsID);\n    if (hoverPoints) {\n      this.cacheSegData = __spreadProps(__spreadValues({}, hoverPoints), {\n        points: new Float32Array(hoverPoints.points)\n      });\n      this.emit(\"updateNewPoints\");\n      this.syncPointCloudStatus();\n    }\n  }\n  setForbidOperation(forbidOperation) {\n    this.forbidOperation = forbidOperation;\n  }\n  updateMouse(offset) {\n    const x = offset.x / this.containerWidth * 2 - 1;\n    const y = -(offset.y / this.containerHeight) * 2 + 1;\n    this.mouse.setX(x);\n    this.mouse.setY(y);\n  }\n  resetAllSegDataSize() {\n    if (this.highlightAttribute !== \"\")\n      return;\n    this.allSegmentPoints.forEach((points) => {\n      var _a;\n      if (((_a = this.cacheSegData) == null ? void 0 : _a.id) === points.name) {\n        return;\n      }\n      points.material.size = 5;\n    });\n  }\n  resetHoverPointsID() {\n    this.hoverPointsID = \"\";\n  }\n  resetAllSegDataSizeAndRender() {\n    this.resetAllSegDataSize();\n    this.emit(\"reRender3d\");\n  }\n  highlightPoints(newPoints) {\n    if (!(this.isCheckStatus || this.isReadyStatus)) {\n      return;\n    }\n    this.resetAllSegDataSize();\n    newPoints.material.size = 10;\n    this.hoverPointsID = newPoints.name;\n    this.emit(\"reRender3d\");\n  }\n  highlightPointsByAttribute(attribute) {\n    this.highlightAttribute = attribute;\n    if (this.segmentData.size === 0)\n      return;\n    this.resetAllSegDataSize();\n    this.segmentData.forEach((seg, id) => {\n      if (seg.attribute === attribute) {\n        const points = this.scene.getObjectByName(id);\n        if (points && (points == null ? void 0 : points.material)) {\n          points.material.size = 10;\n        }\n      }\n    });\n    this.emit(\"reRender3d\");\n  }\n  setAttribute(attribute) {\n    this.currentAttribute = attribute;\n  }\n}\n\nexport { PointCloudStore as default };\n","import * as THREE from 'three';\nimport { colorArr, toolStyleConverter } from '@labelbee/lb-utils';\nimport DrawUtils from '../../../utils/tool/DrawUtils.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass PointCloudRender {\n  constructor({store, on, unbind, nextTick, config}) {\n    this.clearStash = () => {\n      var _a, _b;\n      const pointsGeo = this.scene.getObjectByName((_b = (_a = this.store.cacheSegData) == null ? void 0 : _a.id) != null ? _b : \"\");\n      if (pointsGeo) {\n        pointsGeo.removeFromParent();\n        this.render3d();\n      }\n    };\n    this.generateNewPoints = (segmentData) => {\n      const geometry = new THREE.BufferGeometry();\n      geometry.setAttribute(\"position\", new THREE.BufferAttribute(segmentData.points, 3));\n      const pointsMaterial = new THREE.PointsMaterial({color: this.getCurrentColor(segmentData.attribute), size: 10});\n      const newPoints = new THREE.Points(geometry, pointsMaterial);\n      newPoints.name = segmentData.id;\n      this.store.scene.add(newPoints);\n      this.render3d();\n    };\n    this.updateNewPoints = (segmentData) => {\n      var _a;\n      const originPoints = this.store.scene.getObjectByName((_a = segmentData == null ? void 0 : segmentData.id) != null ? _a : \"\");\n      if (originPoints && segmentData) {\n        originPoints.geometry.setAttribute(\"position\", new THREE.Float32BufferAttribute(segmentData.points, 3));\n        originPoints.material = new THREE.PointsMaterial({\n          color: this.getCurrentColor(segmentData.attribute),\n          size: 10\n        });\n        originPoints.geometry.attributes.position.needsUpdate = true;\n        originPoints.geometry.computeBoundingSphere();\n        this.render3d();\n      }\n    };\n    this.updatePointsColor = (segmentData = this.store.cacheSegData) => {\n      var _a;\n      const originPoints = this.store.scene.getObjectByName((_a = segmentData == null ? void 0 : segmentData.id) != null ? _a : \"\");\n      if (originPoints && segmentData) {\n        segmentData.attribute = this.store.currentAttribute;\n        originPoints.material = new THREE.PointsMaterial({\n          color: this.getCurrentColor(segmentData.attribute),\n          size: 10\n        });\n        this.render3d();\n      }\n    };\n    this.render3d = () => {\n      this.store.renderer.render(this.store.scene, this.store.camera);\n    };\n    this.store = store;\n    this.on = on;\n    this.unbind = unbind;\n    this.nextTick = nextTick;\n    this.config = config;\n    this.generateNewPoints = this.generateNewPoints.bind(this);\n    this.clearStash = this.clearStash.bind(this);\n    this.render3d = this.render3d.bind(this);\n    this.updateNewPoints = this.updateNewPoints.bind(this);\n    this.updatePointsColor = this.updatePointsColor.bind(this);\n    this.clearAllSegmentData = this.clearAllSegmentData.bind(this);\n    this.clearSelectedSegmentRender = this.clearSelectedSegmentRender.bind(this);\n    this.initMsg();\n    this.animate();\n  }\n  get scene() {\n    return this.store.scene;\n  }\n  getCurrentColor(attribute = this.store.currentAttribute) {\n    if (!attribute || !this.config) {\n      return colorArr[0].hexString;\n    }\n    const {fill} = toolStyleConverter.getColorFromConfig({attribute}, __spreadProps(__spreadValues({}, this.config), {attributeConfigurable: true}), {});\n    return fill;\n  }\n  initMsg() {\n    this.on(\"addNewPointsCloud\", this.generateNewPoints);\n    this.on(\"updateNewPoints\", this.updateNewPoints);\n    this.on(\"clearStashRender\", this.clearStash);\n    this.on(\"clearAllSegmentData\", this.clearAllSegmentData);\n    this.on(\"reRender3d\", this.render3d);\n    this.on(\"deleteSelectedSegmentData\", this.clearSelectedSegmentRender);\n  }\n  unbindMsg() {\n    this.unbind(\"addNewPointsCloud\", this.generateNewPoints);\n    this.unbind(\"updateNewPoints\", this.updateNewPoints);\n    this.unbind(\"clearStashRender\", this.clearStash);\n    this.unbind(\"clearAllSegmentData\", this.clearAllSegmentData);\n    this.unbind(\"reRender3d\", this.render3d);\n    this.unbind(\"deleteSelectedSegmentData\", this.clearSelectedSegmentRender);\n  }\n  get canvas2d() {\n    return this.store.canvas2d;\n  }\n  clearCanvasMouse() {\n    var _a, _b;\n    (_b = (_a = this.canvas2d) == null ? void 0 : _a.getContext(\"2d\")) == null ? void 0 : _b.clearRect(0, 0, this.store.containerWidth, this.store.containerHeight);\n  }\n  renderCanvas2dPolygon() {\n    var _a;\n    if (((_a = this.store.polygon2d) == null ? void 0 : _a.length) > 0 && this.canvas2d) {\n      DrawUtils.drawPolygon(this.canvas2d, this.store.polygon2d, {\n        isClose: false,\n        color: this.getCurrentColor(),\n        thickness: 4\n      });\n    }\n  }\n  clearAllSegmentData() {\n    const len = this.scene.children.length;\n    for (let i = len - 1; i >= 0; i--) {\n      const point = this.scene.children[i];\n      if (point.type === \"Points\" && point.name !== this.store.pointCloudObjectName) {\n        point.removeFromParent();\n      }\n    }\n    this.render3d();\n  }\n  clearSelectedSegmentRender(id = \"\") {\n    const selectedPoints = this.scene.getObjectByName(id);\n    if (selectedPoints) {\n      selectedPoints.removeFromParent();\n      this.render3d();\n    }\n  }\n  animate() {\n    requestAnimationFrame(this.animate.bind(this));\n    this.clearCanvasMouse();\n    this.renderCanvas2dPolygon();\n    this.nextTick();\n  }\n}\n\nexport { PointCloudRender as default };\n","import * as THREE from 'three';\nimport { toolStyleConverter, PerspectiveShiftUtils, EPerspectiveView, PointCloudUtils, DEFAULT_SPHERE_PARAMS } from '@labelbee/lb-utils';\nimport WorkerFactory from '../../_virtual/highlightWorker.js';\nimport WorkerFactory$1 from '../../_virtual/filterBoxWorker.js';\nimport { isInPolygon } from '../../utils/tool/polygonTool.js';\nimport uuid from '../../utils/uuid.js';\nimport MathUtils from '../../utils/MathUtils.js';\nimport ImgUtils from '../../utils/ImgUtils.js';\nimport { PCDLoader } from './PCDLoader.js';\nimport { OrbitControls } from './OrbitControls.js';\nimport { PointCloudCache } from './cache.js';\nimport { getCuboidFromPointCloudBox, getHighlightIndexByPoints, mergeHighlightList } from './matrix.js';\nexport { createThreeMatrix4, getCuboidFromPointCloudBox, getHighlightIndexByPoints, isInImage, lidar2image, mergeHighlightList, point2dTo3D, point3DLidar2Image, pointCloudLidar2image, rotatePoint, transferKitti2Matrix } from './matrix.js';\nimport { PointCloudSegmentOperation } from './segmentation.js';\nimport PointCloudStore from './store/index.js';\nimport PointCloudRender from './render/index.js';\nimport EventListener from '../toolOperation/eventListener.js';\nimport '../../constant/tool.js';\nimport '../scheduler.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nconst DEFAULT_DISTANCE = 30;\nconst highlightWorker = new WorkerFactory({type: \"module\"});\nclass PointCloud extends EventListener {\n  constructor({\n    container,\n    noAppend,\n    isOrthographicCamera,\n    orthographicParams,\n    backgroundColor = \"#4C4C4C\",\n    config,\n    isSegment,\n    checkMode\n  }) {\n    super();\n    this.zAxisLimit = 10;\n    this.initCameraPosition = this.DEFAULT_INIT_CAMERA_POSITION;\n    this.isOrthographicCamera = false;\n    this.pointsUuid = \"\";\n    this.pointCloudObjectName = \"pointCloud\";\n    this.rangeObjectName = \"range\";\n    this.highlightGroupName = \"highlightBoxes\";\n    this.showDirection = true;\n    this.pointsMaterialSize = 1;\n    this.isSegment = false;\n    this.checkMode = false;\n    this.nextTick = () => {\n      if (!this.segmentOperation) {\n        return;\n      }\n      this.segmentOperation._raycasting();\n    };\n    this.keydown = (e) => {\n      if (!this.store) {\n        return;\n      }\n      switch (e.key) {\n        case \" \":\n          this.controls.enablePan = true;\n          this.store.setForbidOperation(true);\n          break;\n      }\n    };\n    this.keyup = (e) => {\n      if (!this.store) {\n        return;\n      }\n      switch (e.key) {\n        case \" \":\n          this.controls.enablePan = false;\n          this.store.setForbidOperation(false);\n          break;\n      }\n    };\n    this.addSphereToSense = (sphereParams, color = \"blue\") => {\n      var _a;\n      const id = (_a = sphereParams.id) != null ? _a : uuid();\n      this.removeObjectByName(id, \"sphere\");\n      const {radius, widthSegments, heightSegments} = DEFAULT_SPHERE_PARAMS;\n      const {center} = sphereParams;\n      const group = new THREE.Group();\n      const spGeo = new THREE.SphereGeometry(radius, widthSegments, heightSegments);\n      const spMaterial = new THREE.MeshBasicMaterial({color});\n      const sphere = new THREE.Mesh(spGeo, spMaterial);\n      sphere.position.set(center.x, center.y, center.z);\n      group.add(sphere);\n      group.name = `sphere${id}`;\n      this.scene.add(group);\n    };\n    this.generateSphere = (sphereParams) => {\n      const {fill} = toolStyleConverter.getColorFromConfig({attribute: sphereParams.attribute}, __spreadProps(__spreadValues({}, this.config), {attributeConfigurable: true}), {});\n      this.addSphereToSense(sphereParams, fill);\n      this.render();\n    };\n    this.generateSpheres = (spheres) => {\n      spheres.forEach((sphere) => {\n        const {fill} = toolStyleConverter.getColorFromConfig({attribute: sphere.attribute}, __spreadProps(__spreadValues({}, this.config), {attributeConfigurable: true}), {});\n        this.addSphereToSense(sphere, fill);\n      });\n      this.render();\n    };\n    this.addBoxToSense = (boxParams, color = 16777215) => {\n      var _a;\n      const id = (_a = boxParams.id) != null ? _a : uuid();\n      this.removeObjectByName(id, \"box\");\n      const {center, width, height, depth, rotation} = boxParams;\n      const group = new THREE.Group();\n      const geometry = new THREE.BoxGeometry(width, height, depth);\n      const material = new THREE.MeshBasicMaterial({color: \"blue\"});\n      const cube = new THREE.Mesh(geometry, material);\n      const box = new THREE.BoxHelper(cube, color);\n      const arrow = this.generateBoxArrow(boxParams);\n      const boxID = this.generateBoxTrackID(boxParams);\n      if (boxID) {\n        group.add(boxID);\n      }\n      group.add(box);\n      group.add(arrow);\n      if (center) {\n        group.position.set(center.x, center.y, center.z);\n      }\n      if (rotation) {\n        group.rotation.set(0, 0, rotation);\n      }\n      group.name = `box${id}`;\n      this.scene.add(group);\n    };\n    this.applyCameraTarget = (camera) => {\n      if (this.camera.type !== \"OrthographicCamera\") {\n        return;\n      }\n      if (camera) {\n        const cameraTarget = this.getOrthographicCameraTarget(camera);\n        this.updateCameraZoom(camera.zoom);\n        this.updateCamera(camera.position, cameraTarget);\n      }\n    };\n    this.initShaderMaterial = () => {\n      return {\n        vertexShader: `\n      attribute vec3 dimensions;\n      varying vec3 vDimensions;\n      uniform float pointSize;\n      attribute float visibility;\n\n      void main() {\n        // Pass the vertex coordinates to the fragment shader\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n          // Pass the dimensions to the fragment shader\n          vDimensions = dimensions;\n          gl_PointSize = pointSize;\n\n          if (visibility < 0.5) {\n            gl_Position = vec4(0.0, 0.0, 0.0, 1.0);  // Invalid Position.\n          }\n      }`,\n        fragmentShader: `\n      varying vec3 vDimensions;\n      void main() {\n        // Calculate color based on dimensions\n        vec3 color = vec3(vDimensions.x, vDimensions.y, vDimensions.z);\n\n        // If vDimensions is default value, the color change to white-rgb(255,255,255)\n        if (vDimensions.x == 0.0 && vDimensions.y == 0.0 && vDimensions.z == 0.0) {\n          color = vec3(255, 255, 255);\n        }\n\n        // Output the final color        \n        gl_FragColor = vec4(color, 1.0);\n      }`,\n        uniforms: {\n          pointSize: {value: this.pointsMaterialSize}\n        }\n      };\n    };\n    this.loadPCDFile = (..._0) => __async(this, [..._0], function* (src = this.currentPCDSrc, radius) {\n      if (!src)\n        return;\n      this.clearPointCloud();\n      this.cacheInstance.clearCache2DHighlightIndex();\n      this.currentPCDSrc = src;\n      const {points, color} = yield this.cacheInstance.loadPCDFile(src);\n      const geometry = new THREE.BufferGeometry();\n      geometry.setAttribute(\"position\", new THREE.BufferAttribute(points, 3));\n      if (!this.isSegment) {\n        geometry.setAttribute(\"dimensions\", new THREE.BufferAttribute(color, 3));\n      }\n      this.initCloudData(points);\n      const newPoints = new THREE.Points(geometry);\n      this.renderPointCloud(newPoints, radius);\n    });\n    this.getHighlightIndexByMappingImgList = (_0) => __async(this, [_0], function* ({\n      mappingImgList,\n      points\n    }) {\n      const imgNodeList = mappingImgList.length === 0 ? [] : yield Promise.all(mappingImgList.map((v) => ImgUtils.load(v.url)));\n      const highlightIndexList = mappingImgList.map((v, i) => {\n        var _a;\n        if (this.cacheInstance.cache2DHighlightIndex.has(v.url)) {\n          return (_a = this.cacheInstance.cache2DHighlightIndex.get(v.url)) != null ? _a : [];\n        }\n        const h = getHighlightIndexByPoints({\n          points,\n          calib: v.calib,\n          width: imgNodeList[i].width,\n          height: imgNodeList[i].height\n        });\n        this.cacheInstance.cache2DHighlightIndex.set(v.url, h);\n        return h;\n      });\n      const mergeList = mergeHighlightList(highlightIndexList);\n      return mergeList;\n    });\n    this.loadPCDFileByBox = (src, boxParams, scope) => __async(this, null, function* () {\n      const cb = (points2, color2) => __async(this, null, function* () {\n        const {width = 0, height = 0, depth = 0} = scope != null ? scope : {};\n        const filterData = yield this.filterPointsByBox(__spreadProps(__spreadValues({}, boxParams), {\n          width: boxParams.width + width,\n          height: boxParams.height + height,\n          depth: boxParams.depth + depth\n        }), points2, color2);\n        if (!filterData) {\n          console.error(\"filter Error\");\n          return;\n        }\n        this.clearPointCloud();\n        this.currentPCDSrc = src;\n        const newPoints = new THREE.Points(filterData.geometry);\n        newPoints.name = this.pointCloudObjectName;\n        this.scene.add(newPoints);\n        this.render();\n      });\n      const {points, color} = yield this.cacheInstance.loadPCDFile(src);\n      cb(points, color);\n    });\n    this.generateRange = (radius) => {\n      const circle = this.createRange(radius);\n      this.scene.add(circle);\n    };\n    this.generateBoxArrow = ({width}) => {\n      const dir = new THREE.Vector3(1, 0, 0);\n      const origin = new THREE.Vector3(width / 2, 0, 0);\n      const arrowLen = 2;\n      const hex = 16776960;\n      const arrowHelper = new THREE.ArrowHelper(dir, origin, arrowLen, hex);\n      arrowHelper.visible = this.showDirection;\n      return arrowHelper;\n    };\n    this.generateBoxTrackID = (boxParams) => {\n      if (!boxParams.trackID) {\n        return;\n      }\n      const texture = new THREE.Texture(this.getTextCanvas(boxParams.trackID.toString()));\n      texture.needsUpdate = true;\n      const sprite = new THREE.SpriteMaterial({map: texture, depthWrite: false});\n      const boxID = new THREE.Sprite(sprite);\n      boxID.scale.set(5, 5, 5);\n      boxID.position.set(-boxParams.width / 2, 0, boxParams.depth / 2 + 0.5);\n      return boxID;\n    };\n    this.applyZAxisPoints = (zAxisLimit) => {\n      this.zAxisLimit = zAxisLimit;\n      this.filterZAxisPoints();\n      this.render();\n    };\n    this.updatePointSize = ({zoomIn, customSize}) => {\n      const points = this.scene.getObjectByName(this.pointCloudObjectName);\n      if (!points) {\n        return;\n      }\n      const preSize = points.material.uniforms.pointSize.value;\n      if (zoomIn) {\n        points.material.uniforms.pointSize.value = Math.min(preSize * 1.2, 10);\n      } else {\n        points.material.uniforms.pointSize.value = Math.max(preSize / 1.2, 1);\n      }\n      if (customSize) {\n        points.material.uniforms.pointSize.value = customSize;\n        this.pointsMaterialSize = customSize;\n      }\n      points.material.uniformsNeedUpdate = true;\n      this.render();\n    };\n    this.container = container;\n    this.renderer = new THREE.WebGLRenderer({antialias: true});\n    this.backgroundColor = backgroundColor;\n    this.config = config;\n    this.checkMode = checkMode != null ? checkMode : false;\n    if (isOrthographicCamera && orthographicParams) {\n      this.isOrthographicCamera = true;\n      this.camera = new THREE.OrthographicCamera(orthographicParams.left, orthographicParams.right, orthographicParams.top, orthographicParams.bottom, orthographicParams.near, orthographicParams.far);\n    } else {\n      this.camera = new THREE.PerspectiveCamera(30, this.containerWidth / this.containerHeight, 1, 1e3);\n    }\n    this.initCamera();\n    this.scene = new THREE.Scene();\n    this.controls = new OrbitControls(this.camera, isSegment ? this.container : this.renderer.domElement);\n    this.pcdLoader = new PCDLoader();\n    this.axesHelper = new THREE.AxesHelper(1e3);\n    this.scene.add(this.camera);\n    if (!noAppend) {\n      container.appendChild(this.renderer.domElement);\n    }\n    this.init();\n    this.cacheInstance = PointCloudCache.getInstance();\n    if (isSegment === true) {\n      this.initSegment();\n      this.isSegment = true;\n    }\n  }\n  initSegment() {\n    this.store = new PointCloudStore(this.pointCloudDelegate);\n    this.controls.enablePan = false;\n    this.controls.addEventListener(\"start\", this.orbiterStart.bind(this));\n    this.controls.addEventListener(\"change\", this.orbiterChange.bind(this));\n    this.controls.addEventListener(\"end\", this.orbiterEnd.bind(this));\n    this.segmentOperation = new PointCloudSegmentOperation({\n      dom: this.container,\n      store: this.store\n    });\n    this.pointCloudRender = new PointCloudRender(__spreadProps(__spreadValues({\n      store: this.store\n    }, this.eventBus), {\n      nextTick: this.nextTick,\n      config: this.config\n    }));\n    this.initMsg();\n    document.addEventListener(\"keydown\", this.keydown);\n    document.addEventListener(\"keyup\", this.keyup);\n  }\n  orbiterStart() {\n  }\n  orbiterChange() {\n    if (!this.store) {\n      return;\n    }\n    this.store.orbiting = true;\n  }\n  orbiterEnd() {\n    if (!this.store) {\n      return;\n    }\n    this.store.orbiting = false;\n  }\n  get currentSegmentTool() {\n    var _a;\n    return (_a = this.segmentOperation) == null ? void 0 : _a.currentToolName;\n  }\n  get pointCloudObject() {\n    return this.scene.getObjectByName(this.pointCloudObjectName);\n  }\n  initMsg() {\n    if (!this.segmentOperation) {\n      return;\n    }\n    this.on(\"CircleSelector\", this.segmentOperation.updateSelector2Circle.bind(this.segmentOperation));\n    this.on(\"LassoSelector\", this.segmentOperation.updateSelector2Lasso.bind(this.segmentOperation));\n    this.on(\"clearPointCloud\", this.clearPointCloud.bind(this));\n    this.on(\"loadPCDFile\", this.loadPCDFile.bind(this));\n  }\n  unbindMsg() {\n    if (!this.segmentOperation) {\n      return;\n    }\n    this.unbind(\"CircleSelector\", this.segmentOperation.updateSelector2Circle.bind(this.segmentOperation));\n    this.unbind(\"LassoSelector\", this.segmentOperation.updateSelector2Lasso.bind(this.segmentOperation));\n    this.unbind(\"clearPointCloud\", this.clearPointCloud.bind(this));\n    this.unbind(\"loadPCDFile\", this.loadPCDFile.bind(this));\n  }\n  get eventBus() {\n    return {\n      on: this.on.bind(this),\n      emit: this.emit.bind(this),\n      unbind: this.unbind.bind(this)\n    };\n  }\n  get pointCloudDelegate() {\n    return __spreadValues({\n      container: this.container,\n      scene: this.scene,\n      camera: this.camera,\n      renderer: this.renderer,\n      checkMode: this.checkMode\n    }, this.eventBus);\n  }\n  get DEFAULT_INIT_CAMERA_POSITION() {\n    return new THREE.Vector3(-0.01, 0, 1e3);\n  }\n  get containerWidth() {\n    return this.container.clientWidth;\n  }\n  get containerHeight() {\n    return this.container.clientHeight;\n  }\n  setInitCameraPosition(vector) {\n    this.initCameraPosition = vector;\n  }\n  setConfig(config) {\n    this.config = config;\n  }\n  initOrthographicCamera(orthographicParams) {\n    if (this.camera.type !== \"OrthographicCamera\") {\n      return;\n    }\n    const {left, right, top, bottom, near, far} = orthographicParams;\n    this.camera.left = left;\n    this.camera.right = right;\n    this.camera.top = top;\n    this.camera.bottom = bottom;\n    this.camera.near = near;\n    this.camera.far = far;\n    this.camera.updateProjectionMatrix();\n  }\n  initPerspectiveCamera() {\n    if (this.camera.type !== \"PerspectiveCamera\") {\n      return;\n    }\n    this.camera.fov = 30;\n    this.camera.aspect = this.containerWidth / this.containerHeight;\n    this.camera.near = 1;\n    this.camera.far = 1e3;\n    this.camera.updateProjectionMatrix();\n  }\n  initCamera() {\n    const {camera} = this;\n    if (this.isOrthographicCamera) {\n      const {x, y, z} = this.initCameraPosition;\n      camera.position.set(x, y, z);\n    } else {\n      camera.position.set(-1, 0, 500);\n    }\n    camera.up.set(0, 0, 1);\n  }\n  initControls() {\n    const {controls} = this;\n    controls.addEventListener(\"change\", () => {\n      this.render();\n    });\n    this.setDefaultControls();\n  }\n  setDefaultControls() {\n    const {controls} = this;\n    const centerPoint = [0, 0, 0];\n    controls.target = new THREE.Vector3(...centerPoint);\n    controls.addEventListener(\"change\", () => {\n      this.render();\n    });\n    controls.maxPolarAngle = Math.PI / 2;\n    controls.update();\n  }\n  initRenderer() {\n    const {renderer} = this;\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(this.containerWidth, this.containerHeight);\n  }\n  init() {\n    const {scene} = this;\n    scene.background = new THREE.Color(this.backgroundColor);\n    this.initControls();\n    this.initRenderer();\n  }\n  removeObjectByName(name, prefix = \"\") {\n    const oldBox = this.scene.getObjectByName(prefix + name);\n    if (oldBox) {\n      oldBox.removeFromParent();\n    }\n  }\n  generateBox(boxParams, color = 16777215) {\n    const newColor = color;\n    this.addBoxToSense(boxParams, newColor);\n    this.render();\n  }\n  getAllAttributeColor(boxes) {\n    return boxes.reduce((acc, box) => {\n      acc[box.attribute] = toolStyleConverter.getColorFromConfig({attribute: box.attribute}, __spreadProps(__spreadValues({}, this.config), {attributeConfigurable: true}), {});\n      return acc;\n    }, {});\n  }\n  generateBoxes(boxes) {\n    boxes.forEach((box) => {\n      this.addBoxToSense(box);\n    });\n    this.render();\n  }\n  getOrthographicCamera(boxParams) {\n    const {center, width, height} = boxParams;\n    const offset = 10;\n    const left = center.x - width / 2 - offset;\n    const right = center.x - width / 2 + offset;\n    const top = center.y + height / 2 + offset;\n    const bottom = center.y - height / 2 - offset;\n    const near = 100;\n    const far = -100;\n    const zoom = 500 / near;\n    return {\n      left,\n      right,\n      top,\n      bottom,\n      near,\n      far,\n      zoom\n    };\n  }\n  updateCameraZoom(zoom) {\n    this.camera.zoom = zoom;\n    this.camera.updateProjectionMatrix();\n  }\n  updateCameraByBox(boxParams, perspectiveView, customCameraVector) {\n    const {center, width, height, depth, rotation} = boxParams;\n    const cameraPositionVector = this.getCameraVector(center, rotation, {width, height, depth}, perspectiveView);\n    if (customCameraVector) {\n      this.updateCamera(customCameraVector, center);\n      return new THREE.Vector3(customCameraVector.x, customCameraVector.y, customCameraVector.z);\n    }\n    this.updateCamera(cameraPositionVector, center);\n    return cameraPositionVector;\n  }\n  updateCameraBySphere(sphereParams, perspectiveView) {\n    const {center} = sphereParams;\n    const {radius} = DEFAULT_SPHERE_PARAMS;\n    const cameraPositionVector = this.getCameraVector(center, 0, {width: radius * 2, height: radius * 2, depth: radius * 2}, perspectiveView);\n    this.updateCamera(cameraPositionVector, center);\n    return cameraPositionVector;\n  }\n  updateOrthoCamera(boxParams, perspectiveView) {\n    const cameraPositionVector = this.updateCameraByBox(boxParams, perspectiveView);\n    this.camera.zoom = 1;\n    this.camera.updateProjectionMatrix();\n    return {\n      cameraPositionVector\n    };\n  }\n  updateOrthoCameraBySphere(sphereParams, perspectiveView) {\n    const cameraPositionVector = this.updateCameraBySphere(sphereParams, perspectiveView);\n    this.camera.zoom = 1;\n    this.camera.updateProjectionMatrix();\n    return {\n      cameraPositionVector\n    };\n  }\n  updateTopCamera() {\n    this.setInitCameraPosition(this.DEFAULT_INIT_CAMERA_POSITION);\n    this.camera.zoom = 1;\n    this.initCamera();\n    this.setDefaultControls();\n    this.camera.updateProjectionMatrix();\n    this.render();\n  }\n  updateCamera(position, target) {\n    this.camera.position.set(position.x, position.y, position.z);\n    this.controls.target = new THREE.Vector3(target.x, target.y, target.z);\n    this.controls.update();\n  }\n  resetCamera() {\n    this.updateCamera(this.DEFAULT_INIT_CAMERA_POSITION, {x: 0, y: 0, z: 0});\n  }\n  getOrthographicCameraTarget(camera) {\n    const direction = new THREE.Vector3(0, 0, -1).applyQuaternion(camera.quaternion);\n    const target = camera.position.clone().add(direction);\n    return target;\n  }\n  createThreeMatrix4(matrix4) {\n    return new THREE.Matrix4().set(...matrix4);\n  }\n  filterPointsByBox(boxParams, points, color) {\n    var _a, _b, _c;\n    if (!points) {\n      const originPoints = this.scene.getObjectByName(this.pointCloudObjectName);\n      if (!originPoints) {\n        console.error(\"There is no corresponding point cloud object\");\n        return Promise.resolve(void 0);\n      }\n      points = (_c = (_b = (_a = originPoints == null ? void 0 : originPoints.geometry) == null ? void 0 : _a.attributes) == null ? void 0 : _b.position) == null ? void 0 : _c.array;\n    }\n    if (window.Worker) {\n      const {zMin, zMax, polygonPointList} = getCuboidFromPointCloudBox(boxParams);\n      const position = points;\n      color = color != null ? color : new Float32Array([]);\n      const params = {\n        boxParams,\n        zMin,\n        zMax,\n        polygonPointList,\n        color,\n        position\n      };\n      return new Promise((resolve) => {\n        const filterBoxWorker = new WorkerFactory$1();\n        filterBoxWorker.postMessage(params);\n        filterBoxWorker.onmessage = (e) => {\n          const {color: newColor, position: newPosition, num} = e.data;\n          const geometry = new THREE.BufferGeometry();\n          geometry.setAttribute(\"position\", new THREE.Float32BufferAttribute(newPosition, 3));\n          geometry.setAttribute(\"color\", new THREE.Float32BufferAttribute(newColor, 3));\n          geometry.computeBoundingSphere();\n          filterBoxWorker.terminate();\n          resolve({geometry, num});\n        };\n      });\n    }\n    return Promise.resolve(void 0);\n  }\n  getCameraVector(centerPoint, rotationZ, volume, perspectiveView = EPerspectiveView.Front, defaultDistance = DEFAULT_DISTANCE) {\n    let TcMatrix4 = PerspectiveShiftUtils.frontViewMatrix4(defaultDistance);\n    switch (perspectiveView) {\n      case EPerspectiveView.Front:\n        break;\n      case EPerspectiveView.Back:\n        TcMatrix4 = PerspectiveShiftUtils.backViewMatrix4(defaultDistance);\n        break;\n      case EPerspectiveView.Left:\n        TcMatrix4 = PerspectiveShiftUtils.leftViewMatrix4(defaultDistance);\n        break;\n      case EPerspectiveView.Right:\n        TcMatrix4 = PerspectiveShiftUtils.rightViewMatrix4(defaultDistance);\n        break;\n      case EPerspectiveView.Top:\n        TcMatrix4 = PerspectiveShiftUtils.topViewMatrix4(defaultDistance);\n        break;\n      case EPerspectiveView.LFT:\n        TcMatrix4 = PerspectiveShiftUtils.leftFrontTopViewMatrix4(defaultDistance, volume);\n        break;\n      case EPerspectiveView.RBT:\n        TcMatrix4 = PerspectiveShiftUtils.rightBackTopViewMatrix4(defaultDistance, volume);\n        break;\n    }\n    const Tc = this.createThreeMatrix4(TcMatrix4);\n    const TFrom = new THREE.Matrix4().makeTranslation(-centerPoint.x, -centerPoint.y, -centerPoint.z);\n    const TBack = new THREE.Matrix4().makeTranslation(centerPoint.x, centerPoint.y, centerPoint.z);\n    const Rz = new THREE.Matrix4().makeRotationZ(rotationZ);\n    const centerVector = new THREE.Vector3(centerPoint.x, centerPoint.y, centerPoint.z);\n    const cameraVector = centerVector.clone().applyMatrix4(Tc).applyMatrix4(TFrom).applyMatrix4(Rz).applyMatrix4(TBack);\n    return cameraVector;\n  }\n  createRange(radius) {\n    this.removeObjectByName(this.rangeObjectName);\n    const curve = new THREE.EllipseCurve(0, 0, radius, radius, 0, 2 * Math.PI, false, 0);\n    const points = curve.getPoints(50);\n    const geometry = new THREE.BufferGeometry().setFromPoints(points);\n    const material = new THREE.LineBasicMaterial({color: 16711680});\n    const ellipse = new THREE.Line(geometry, material);\n    ellipse.name = this.rangeObjectName;\n    return ellipse;\n  }\n  renderPointCloud(points, radius) {\n    points.name = this.pointCloudObjectName;\n    const material = new THREE.ShaderMaterial(this.initShaderMaterial());\n    if (radius) {\n      this.generateRange(radius);\n    }\n    this.pointsUuid = points.uuid;\n    points.material = material;\n    this.filterZAxisPoints(points);\n    this.scene.add(points);\n    this.render();\n  }\n  clearAllBox() {\n    this.clearAllGroupByPrefix(\"box\");\n  }\n  clearAllSphere() {\n    this.clearAllGroupByPrefix(\"sphere\");\n  }\n  clearAllGroupByPrefix(prefix = \"\") {\n    const child = this.scene.children;\n    for (let i = child.length - 1; i >= 0; i--) {\n      const v = child[i];\n      if (v.type === \"Group\" && v.name.startsWith(prefix)) {\n        this.removeObjectByName(v.name);\n      }\n    }\n  }\n  clearPointCloud() {\n    this.removeObjectByName(this.pointCloudObjectName);\n  }\n  clearPointCloudAndRender() {\n    this.clearPointCloud();\n    this.render();\n  }\n  initCloudData(points) {\n    if (!this.store) {\n      return;\n    }\n    for (let i = 0; i < points.length; i += 3) {\n      const x = points[i];\n      const y = points[i + 1];\n      const z = points[i + 2];\n      this.store.cloudData.set(`${x}@${y}@${z}`, {visible: false});\n    }\n    this.store.setOriginPoints(points);\n  }\n  highlightOriginPointCloud(pointCloudBoxList, highlightIndex = []) {\n    const oldPointCloud = this.scene.getObjectByName(this.pointCloudObjectName);\n    if (!oldPointCloud) {\n      return;\n    }\n    this.highlightPCDSrc = this.currentPCDSrc;\n    return new Promise((resolve, reject) => {\n      if (window.Worker) {\n        const newPointCloudBoxList = pointCloudBoxList ? [...pointCloudBoxList] : [];\n        const cuboidList = newPointCloudBoxList.map((v) => getCuboidFromPointCloudBox(v));\n        const colorList = this.getAllAttributeColor(cuboidList);\n        const params = {\n          cuboidList,\n          position: oldPointCloud.geometry.attributes.position.array,\n          color: oldPointCloud.geometry.attributes.dimensions.array,\n          colorList,\n          highlightIndex\n        };\n        highlightWorker.postMessage(params);\n        highlightWorker.onmessage = (e) => {\n          const {color} = e.data;\n          const colorAttribute = new THREE.BufferAttribute(color, 3);\n          if (!this.highlightPCDSrc || this.highlightPCDSrc !== this.currentPCDSrc || oldPointCloud.geometry.attributes.position.array.length !== color.length) {\n            reject(new Error(\"Error Path\"));\n            return;\n          }\n          this.cacheInstance.updateColor(this.highlightPCDSrc, color);\n          this.highlightPCDSrc = void 0;\n          colorAttribute.needsUpdate = true;\n          oldPointCloud.geometry.setAttribute(\"dimensions\", colorAttribute);\n          oldPointCloud.geometry.attributes.dimensions.needsUpdate = true;\n          resolve(color);\n          this.render();\n        };\n      }\n    });\n  }\n  clearHighlightBoxes() {\n    this.removeObjectByName(this.highlightGroupName);\n  }\n  clearHighlightBoxesAndRender() {\n    this.clearHighlightBoxes();\n    this.render();\n  }\n  highlightBoxes(boxes) {\n    const group = new THREE.Group();\n    boxes.forEach((box) => {\n      const {\n        center: {x, y, z},\n        width,\n        height,\n        depth,\n        rotation\n      } = box;\n      const {fill} = toolStyleConverter.getColorFromConfig({attribute: box.attribute}, __spreadProps(__spreadValues({}, this.config), {attributeConfigurable: true}), {});\n      const geometry = new THREE.BoxGeometry(width, height, depth);\n      const material = new THREE.MeshBasicMaterial({\n        color: fill,\n        transparent: true,\n        opacity: 0.2,\n        depthTest: false\n      });\n      geometry.rotateZ(rotation);\n      geometry.translate(x, y, z);\n      const mesh = new THREE.Mesh(geometry, material);\n      group.add(mesh);\n      const planeGeo = new THREE.PlaneGeometry(depth, height);\n      planeGeo.rotateY(Math.PI / 2);\n      planeGeo.rotateZ(rotation);\n      const vector = new THREE.Vector3(width / 2, 0, 0);\n      const rM = new THREE.Matrix4().makeRotationY(Math.PI / 2).makeRotationZ(rotation);\n      vector.applyMatrix4(rM);\n      planeGeo.translate(x + vector.x, y + vector.y, z + vector.z);\n      const plainMaterial = new THREE.MeshBasicMaterial({\n        color: fill,\n        side: THREE.DoubleSide,\n        transparent: true,\n        opacity: 0.8,\n        depthTest: false\n      });\n      const plainMesh = new THREE.Mesh(planeGeo, plainMaterial);\n      group.add(plainMesh);\n    });\n    group.name = this.highlightGroupName;\n    this.scene.add(group);\n    this.render();\n  }\n  updateColor(color) {\n    const oldPointCloud = this.scene.getObjectByName(this.pointCloudObjectName);\n    if (oldPointCloud) {\n      const colorAttribute = new THREE.BufferAttribute(color, 3);\n      oldPointCloud.geometry.setAttribute(\"dimensions\", colorAttribute);\n      oldPointCloud.geometry.attributes.dimensions.needsUpdate = true;\n      this.render();\n    }\n  }\n  setShowDirection(showDirection) {\n    this.showDirection = showDirection;\n    this.scene.children.forEach((v) => {\n      if (v.type === \"Group\") {\n        v.children.forEach((object) => {\n          if (object.type === \"ArrowHelper\") {\n            object.visible = showDirection;\n          }\n        });\n      }\n    });\n    this.render();\n  }\n  getTextCanvas(text) {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n    if (ctx) {\n      ctx.font = `${50}px \" bold`;\n      ctx.fillStyle = \"white\";\n      ctx.textAlign = \"center\";\n      ctx.textBaseline = \"middle\";\n      ctx.fillText(text, canvas.width / 2, canvas.height / 2);\n    }\n    return canvas;\n  }\n  filterNoise(innerPointList) {\n    let newPointList = [...innerPointList];\n    newPointList.sort((a, b) => a.z - b.z);\n    const startIndexZ = Math.floor(newPointList.length * 0.05);\n    const roadPoint = newPointList[startIndexZ];\n    newPointList = newPointList.filter(({z}) => z > roadPoint.z + 0.1);\n    const noisePercent = 5e-3;\n    const endIndexZ = Math.floor(newPointList.length * (1 - noisePercent));\n    newPointList = newPointList.slice(0, endIndexZ);\n    newPointList.sort((a, b) => a.x - b.x);\n    const startIndexX = Math.floor(newPointList.length * noisePercent);\n    const endIndexX = Math.floor(newPointList.length * (1 - noisePercent));\n    newPointList = newPointList.slice(startIndexX, endIndexX);\n    newPointList.sort((a, b) => a.y - b.y);\n    const startIndexY = Math.floor(newPointList.length * noisePercent);\n    const endIndexY = Math.floor(newPointList.length * (1 - noisePercent));\n    newPointList = newPointList.slice(startIndexY, endIndexY);\n    return newPointList.length > 100 ? newPointList : innerPointList;\n  }\n  getFittedCoordinates(polygon, innerPointList) {\n    const minDistanceList = [];\n    let _polygon = [...polygon, polygon[0]];\n    innerPointList.forEach(({x, y}) => {\n      polygon.forEach((p1, index) => {\n        const p2 = _polygon[index + 1];\n        const distance = MathUtils.getFootOfPerpendicular({x, y}, p1, p2, false, true).length;\n        if (!minDistanceList[index] || distance < minDistanceList[index].distance) {\n          minDistanceList[index] = {distance, point: {x, y}};\n        }\n      });\n    });\n    _polygon = [polygon[polygon.length - 1], ...polygon, polygon[0]];\n    const _minDistanceList = [minDistanceList[minDistanceList.length - 1], ...minDistanceList];\n    const fittedCoordinates = polygon.map((_, index) => {\n      const p1 = _polygon[index];\n      const p2 = _polygon[index + 1];\n      const p3 = _polygon[index + 2];\n      return PointCloudUtils.getIntersectionBySlope({\n        p1: _minDistanceList[index].point,\n        line1: [p1, p2],\n        p2: _minDistanceList[index + 1].point,\n        line2: [p2, p3]\n      });\n    });\n    return fittedCoordinates;\n  }\n  getSensesPointZAxisInPolygon(polygon, zScope, intelligentFit) {\n    var _a, _b, _c;\n    const points = this.scene.children.find((i) => i.uuid === this.pointsUuid);\n    let minZ = 0;\n    let maxZ = 0;\n    let count = 0;\n    let zCount = 0;\n    let fittedCoordinates = [];\n    let innerPointList = [];\n    const pointPosArray = ((_c = (_b = (_a = points == null ? void 0 : points.geometry) == null ? void 0 : _a.attributes) == null ? void 0 : _b.position) == null ? void 0 : _c.array) || [];\n    for (let idx = 0; idx < pointPosArray.length; idx += 3) {\n      const x = pointPosArray[idx];\n      const y = pointPosArray[idx + 1];\n      const z = pointPosArray[idx + 2];\n      const inPolygon = isInPolygon({x, y}, polygon);\n      if (inPolygon && (z || z === 0)) {\n        innerPointList.push({x, y, z});\n      }\n    }\n    if (!innerPointList.length) {\n      return {maxZ, minZ, count, zCount, fittedCoordinates};\n    }\n    if (intelligentFit) {\n      innerPointList = this.filterNoise(innerPointList);\n      fittedCoordinates = this.getFittedCoordinates(polygon, innerPointList);\n    }\n    innerPointList.sort((a, b) => a.z - b.z);\n    minZ = innerPointList[0].z - 0.01;\n    maxZ = innerPointList[innerPointList.length - 1].z + 0.01;\n    zCount = innerPointList.length;\n    if (zScope) {\n      count = innerPointList.filter(({z}) => z >= zScope[0] && z <= zScope[1]).length;\n    }\n    return {maxZ, minZ, count, zCount, fittedCoordinates};\n  }\n  getBasicCoordinate2Canvas(vector) {\n    const w = this.containerWidth / 2;\n    const h = this.containerHeight / 2;\n    return {\n      x: vector.x * w + w,\n      y: vector.y * h + h,\n      z: vector.z\n    };\n  }\n  get basicCoordinate2CanvasMatrix4() {\n    const w = this.containerWidth / 2;\n    const h = this.containerHeight / 2;\n    return new THREE.Matrix4().set(w, 0, 0, w, 0, h, 0, h, 0, 0, 1, 0, 0, 0, 0, 1);\n  }\n  getCanvas2BasicCoordinate(vector) {\n    const w = this.containerWidth / 2;\n    const h = this.containerHeight / 2;\n    return new THREE.Vector3(vector.x / w - w / 2, -(vector.y / h - h / 2), 1);\n  }\n  getPolygonSidePoints(boxParams) {\n    const {\n      center: {x, y, z},\n      height,\n      width,\n      depth\n    } = boxParams;\n    const lfb = {\n      x: x + width / 2,\n      y: y + height / 2,\n      z: z - depth / 2\n    };\n    const lft = {\n      x: x + width / 2,\n      y: y + height / 2,\n      z: z + depth / 2\n    };\n    const lbt = {\n      x: x - width / 2,\n      y: y + height / 2,\n      z: z + depth / 2\n    };\n    const lbb = {\n      x: x - width / 2,\n      y: y + height / 2,\n      z: z - depth / 2\n    };\n    const vectorList = [lfb, lft, lbt, lbb];\n    return vectorList;\n  }\n  getPolygonBackPoints(boxParams) {\n    const {\n      center: {x, y, z},\n      height,\n      width,\n      depth\n    } = boxParams;\n    const lbt = {\n      x: x - width / 2,\n      y: y + height / 2,\n      z: z + depth / 2\n    };\n    const lbb = {\n      x: x - width / 2,\n      y: y + height / 2,\n      z: z - depth / 2\n    };\n    const rbb = {\n      x: x - width / 2,\n      y: y - height / 2,\n      z: z - depth / 2\n    };\n    const rbt = {\n      x: x - width / 2,\n      y: y - height / 2,\n      z: z + depth / 2\n    };\n    const vectorList = [lbt, lbb, rbb, rbt];\n    return vectorList;\n  }\n  getPolygonTopPoints(boxParams) {\n    const {\n      center: {x, y, z},\n      height,\n      width,\n      depth\n    } = boxParams;\n    const lft = {\n      x: x + width / 2,\n      y: y + height / 2,\n      z: z + depth / 2\n    };\n    const rft = {\n      x: x + width / 2,\n      y: y - height / 2,\n      z: z + depth / 2\n    };\n    const rbt = {\n      x: x - width / 2,\n      y: y - height / 2,\n      z: z + depth / 2\n    };\n    const lbt = {\n      x: x - width / 2,\n      y: y + height / 2,\n      z: z + depth / 2\n    };\n    const vectorList = [lft, rft, rbt, lbt];\n    return vectorList;\n  }\n  getModelTransformationMatrix(boxParams) {\n    const {\n      center: {x, y, z},\n      rotation\n    } = boxParams;\n    const TFrom = new THREE.Matrix4().makeTranslation(-x, -y, -z);\n    const TBack = new THREE.Matrix4().makeTranslation(x, y, z);\n    const Rz = new THREE.Matrix4().makeRotationZ(rotation);\n    return new THREE.Matrix4().multiply(TBack).multiply(Rz).multiply(TFrom);\n  }\n  getBoxSidePolygon2DCoordinate(boxParams) {\n    return this.getBoxPolygon2DCoordinate(boxParams, EPerspectiveView.Left);\n  }\n  getBoxBackPolygon2DCoordinate(boxParams) {\n    return this.getBoxPolygon2DCoordinate(boxParams, EPerspectiveView.Back);\n  }\n  getSphereSidePoint2DCoordinate(sphereParams) {\n    return this.getSpherePoint2DCoordinate(sphereParams);\n  }\n  getSphereBackPoint2DCoordinate(sphereParams) {\n    return this.getSpherePoint2DCoordinate(sphereParams);\n  }\n  boxParams2ViewPolygon(boxParams, perspectiveView) {\n    switch (perspectiveView) {\n      case EPerspectiveView.Left:\n        return this.getPolygonSidePoints(boxParams);\n      case EPerspectiveView.Back:\n        return this.getPolygonBackPoints(boxParams);\n      default: {\n        return this.getPolygonTopPoints(boxParams);\n      }\n    }\n  }\n  getBoxPolygon2DCoordinate(boxParams, perspectiveView) {\n    const vectorList = this.boxParams2ViewPolygon(boxParams, perspectiveView);\n    const {width, height} = boxParams;\n    const projectMatrix = new THREE.Matrix4().premultiply(this.camera.matrixWorldInverse).premultiply(this.camera.projectionMatrix);\n    const boxSideMatrix = new THREE.Matrix4().premultiply(this.getModelTransformationMatrix(boxParams)).premultiply(projectMatrix).premultiply(this.basicCoordinate2CanvasMatrix4);\n    this.sideMatrix = boxSideMatrix;\n    const polygon2d = vectorList.map((vector) => new THREE.Vector3(vector.x, vector.y, vector.z)).map((vector) => vector.applyMatrix4(this.sideMatrix));\n    const wZoom = this.containerWidth / width;\n    const hZoom = this.containerHeight / height;\n    return {\n      polygon2d,\n      zoom: Math.min(wZoom, hZoom) / 2\n    };\n  }\n  getSpherePoint2DCoordinate(sphereParams) {\n    const {center, attribute, id, valid} = sphereParams;\n    const {radius} = DEFAULT_SPHERE_PARAMS;\n    const transParams = {\n      center,\n      attribute,\n      id,\n      valid,\n      width: radius * 2,\n      height: radius * 2,\n      depth: radius * 2,\n      rotation: 0\n    };\n    const projectMatrix = new THREE.Matrix4().premultiply(this.camera.matrixWorldInverse).premultiply(this.camera.projectionMatrix);\n    const boxSideMatrix = new THREE.Matrix4().premultiply(this.getModelTransformationMatrix(transParams)).premultiply(projectMatrix).premultiply(this.basicCoordinate2CanvasMatrix4);\n    this.sideMatrix = boxSideMatrix;\n    const point2d = new THREE.Vector3(center.x, center.y, center.z).applyMatrix4(this.sideMatrix);\n    const wZoom = this.containerWidth / (radius * 2);\n    const hZoom = this.containerHeight / (radius * 2);\n    return {\n      point2d,\n      zoom: Math.min(wZoom, hZoom) / 2\n    };\n  }\n  getSphereTopPoint2DCoordinate(sphereParams) {\n    const {center} = sphereParams;\n    const {radius} = DEFAULT_SPHERE_PARAMS;\n    const point2d = {\n      x: -(center.y - this.containerWidth / 2),\n      y: -(center.x - this.containerHeight / 2)\n    };\n    const wZoom = this.containerWidth / (radius * 2);\n    const hZoom = this.containerHeight / (radius * 2);\n    return {\n      point2d,\n      zoom: Math.min(wZoom, hZoom) / 2\n    };\n  }\n  getBoxTopPolygon2DCoordinate(boxParams) {\n    const {width, height} = boxParams;\n    const vectorList = this.getPolygonTopPoints(boxParams);\n    const polygon2d = vectorList.map((vector) => new THREE.Vector3(vector.x, vector.y, vector.z)).map((vector) => vector.applyMatrix4(this.getModelTransformationMatrix(boxParams))).map((vector) => {\n      return {\n        x: vector.y,\n        y: vector.x\n      };\n    }).map((vector) => {\n      return {\n        x: -(vector.x - this.containerWidth / 2),\n        y: -(vector.y - this.containerHeight / 2)\n      };\n    });\n    const wZoom = this.containerWidth / width;\n    const hZoom = this.containerHeight / height;\n    return {\n      polygon2d,\n      zoom: Math.min(wZoom, hZoom) / 2\n    };\n  }\n  getNewBoxBySideUpdate(offsetCenterPoint, offsetWidth, offsetDepth, selectedPointCloudBox) {\n    const Rz = new THREE.Matrix4().makeRotationZ(selectedPointCloudBox.rotation);\n    const offsetVector = new THREE.Vector3(-offsetCenterPoint.x, 0, 0).applyMatrix4(Rz);\n    let newBoxParams = selectedPointCloudBox;\n    newBoxParams.center = {\n      x: newBoxParams.center.x + offsetVector.x,\n      y: newBoxParams.center.y + offsetVector.y,\n      z: newBoxParams.center.z - offsetCenterPoint.z\n    };\n    newBoxParams = __spreadProps(__spreadValues({}, newBoxParams), {\n      width: Math.abs(newBoxParams.width + offsetWidth),\n      height: newBoxParams.height,\n      depth: Math.abs(newBoxParams.depth + offsetDepth)\n    });\n    return {newBoxParams};\n  }\n  getNewBoxByBackUpdate(offsetCenterPoint, offsetWidth, offsetDepth, selectedPointCloudBox) {\n    const Rz = new THREE.Matrix4().makeRotationZ(selectedPointCloudBox.rotation);\n    const offsetVector = new THREE.Vector3(0, -offsetCenterPoint.x, 0).applyMatrix4(Rz);\n    let newBoxParams = selectedPointCloudBox;\n    newBoxParams.center = {\n      x: newBoxParams.center.x + offsetVector.x,\n      y: newBoxParams.center.y + offsetVector.y,\n      z: newBoxParams.center.z - offsetCenterPoint.z\n    };\n    newBoxParams = __spreadProps(__spreadValues({}, newBoxParams), {\n      width: newBoxParams.width,\n      height: Math.abs(newBoxParams.height + offsetWidth),\n      depth: Math.abs(newBoxParams.depth + offsetDepth)\n    });\n    return {newBoxParams};\n  }\n  getNewBoxBySideUpdateByPoints(pointList, offsetHeight, offsetZ, selectedPointCloudBox) {\n    var _a;\n    const invertMatrix = (_a = this.sideMatrix) == null ? void 0 : _a.invert();\n    if (!this.sideMatrix || !invertMatrix) {\n      console.error(\"No sideMatrix\");\n      return;\n    }\n    this.camera.zoom = 1;\n    this.camera.updateProjectionMatrix();\n    const polygonWorld = pointList.map((vector) => new THREE.Vector3(vector.x, vector.y, vector.z)).map((vector) => vector.applyMatrix4(invertMatrix));\n    const [p1v, p2v, p3v, p4v] = polygonWorld;\n    const width = Math.max(Math.abs(p1v.x - p3v.x), Math.abs(p1v.x - p2v.x));\n    const centerVector = p2v.add(p4v).applyMatrix3(new THREE.Matrix3().set(1 / 2, 0, 0, 0, 1 / 2, 0, 0, 0, 1 / 2));\n    const offsetVector = centerVector.clone().applyMatrix3(new THREE.Matrix3().set(-1, 0, 0, 0, -1, 0, 0, 0, -1)).add(new THREE.Vector3(selectedPointCloudBox.center.x, selectedPointCloudBox.center.y, selectedPointCloudBox.center.z));\n    const newBoxParams = __spreadProps(__spreadValues({}, selectedPointCloudBox), {\n      center: {\n        x: selectedPointCloudBox.center.x - offsetVector.x,\n        y: selectedPointCloudBox.center.y - offsetVector.y,\n        z: selectedPointCloudBox.center.z - offsetZ\n      },\n      width,\n      height: selectedPointCloudBox.height,\n      depth: selectedPointCloudBox.depth + offsetHeight,\n      rotation: selectedPointCloudBox.rotation\n    });\n    return {newBoxParams};\n  }\n  filterZAxisPoints(pcdPoints) {\n    const points = pcdPoints || this.scene.children.find((i) => i.uuid === this.pointsUuid);\n    if (points) {\n      const {attributes} = points.geometry;\n      const {position} = attributes;\n      const visibility = [];\n      const {count} = position;\n      for (let i = 0; i < count; i++) {\n        const z = position.getZ(i);\n        visibility.push(z > this.zAxisLimit ? 0 : 1);\n      }\n      points.geometry.setAttribute(\"visibility\", new THREE.Float32BufferAttribute(visibility, 1));\n      points.geometry.attributes.visibility.needsUpdate = true;\n    }\n  }\n  render() {\n    this.renderer.render(this.scene, this.camera);\n  }\n}\n\nexport { PointCloud };\n","import { PointCloudUtils } from '@labelbee/lb-utils';\nimport { EToolName, EPolygonPattern } from '../../constant/tool.js';\nimport { CanvasScheduler } from '../../newCore/CanvasScheduler.js';\nimport { PointCloud } from './index.js';\nimport { ToolScheduler, HybridToolUtils } from '../scheduler.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {enumerable: true, configurable: true, writable: true, value}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst createEmptyImage = (size) => {\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = size.width;\n  canvas.height = size.height;\n  const ctx = canvas.getContext(\"2d\");\n  if (ctx) {\n    ctx.fillStyle = \"black\";\n    ctx.fillRect(0, 0, size.width, size.height);\n    return canvas.toDataURL();\n  }\n  return \"\";\n};\nclass PointCloudAnnotation {\n  constructor({\n    size,\n    container,\n    pcdPath,\n    extraProps,\n    config,\n    checkMode,\n    toolName,\n    proxyMode\n  }) {\n    this.updateLineList = (lineList) => {\n      const canvasLineList = (lineList != null ? lineList : []).map((line) => {\n        var _a;\n        const pointList = (_a = line.pointList) == null ? void 0 : _a.map((i) => {\n          return __spreadValues({\n            i\n          }, PointCloudUtils.transferWorld2Canvas(i, this.toolInstance.size));\n        });\n        return __spreadProps(__spreadValues({}, line), {\n          pointList\n        });\n      });\n      this.toolScheduler.updateDataByToolName(EToolName.Line, canvasLineList);\n    };\n    this.updatePolygonList = (pointCloudDataList, extraList) => {\n      let polygonList = pointCloudDataList.map((v) => {\n        var _a;\n        const {polygon2d: pointList} = this.pointCloudInstance.getBoxTopPolygon2DCoordinate(v);\n        return {\n          id: v.id,\n          sourceID: \"\",\n          pointList,\n          isRect: true,\n          valid: (_a = v.valid) != null ? _a : true,\n          attribute: v.attribute,\n          trackID: v == null ? void 0 : v.trackID\n        };\n      });\n      if (extraList) {\n        polygonList = polygonList.concat(extraList.map((v) => {\n          var _a;\n          return __spreadProps(__spreadValues({}, v), {\n            pointList: (_a = v == null ? void 0 : v.pointList) == null ? void 0 : _a.map((point) => PointCloudUtils.transferWorld2Canvas(point, this.toolInstance.size))\n          });\n        }));\n      }\n      this.toolScheduler.updateDataByToolName(EToolName.PointCloudPolygon, polygonList);\n    };\n    this.updatePointList = (sphereList) => {\n      const pointList = sphereList == null ? void 0 : sphereList.map((v) => {\n        var _a;\n        const {point2d} = this.pointCloudInstance.getSphereTopPoint2DCoordinate(v);\n        return __spreadProps(__spreadValues({}, point2d), {\n          id: v.id,\n          sourceID: \"\",\n          valid: (_a = v.valid) != null ? _a : true,\n          attribute: v.attribute,\n          textAttribute: \"\"\n        });\n      });\n      this.toolScheduler.updateDataByToolName(EToolName.Point, pointList);\n    };\n    const defaultOrthographic = PointCloudUtils.getDefaultOrthographicParams(size);\n    const imgSrc = createEmptyImage(size);\n    const image = new Image();\n    image.src = imgSrc;\n    const toolScheduler = new ToolScheduler({container, size, toolName, proxyMode});\n    const canvasScheduler = new CanvasScheduler({container});\n    const pointCloud = new PointCloud({\n      container,\n      noAppend: true,\n      isOrthographicCamera: true,\n      orthographicParams: defaultOrthographic\n    });\n    if (pcdPath) {\n      pointCloud.loadPCDFile(pcdPath);\n    }\n    canvasScheduler.createCanvas(pointCloud.renderer.domElement);\n    const defaultProps = {\n      size,\n      config: JSON.stringify(__spreadProps(__spreadValues({}, config), {attributeConfigurable: true, hideAttribute: true})),\n      imgNode: image,\n      checkMode\n    };\n    if (extraProps) {\n      Object.assign(defaultProps, extraProps);\n    }\n    let toolList = [];\n    if (HybridToolUtils.isSingleTool(toolName)) {\n      toolList = [toolName];\n    } else {\n      toolList = toolName;\n    }\n    toolList.forEach((tool, i) => {\n      let toolInstance;\n      if (tool === EToolName.PointCloudPolygon) {\n        const pointCloudPolygonOperation = toolScheduler.createOperation(tool, image, defaultProps);\n        pointCloudPolygonOperation.eventBinding();\n        pointCloudPolygonOperation.setPattern(EPolygonPattern.Rect);\n        this.toolInstance = pointCloudPolygonOperation;\n        this.toolInstance.eventBinding();\n        this.pointCloud2dOperation = pointCloudPolygonOperation;\n      } else {\n        toolInstance = toolScheduler.createOperation(tool, image, __spreadProps(__spreadValues({}, defaultProps), {textConfigurable: false}));\n      }\n      if (i === toolList.length - 1) {\n        if (!this.toolInstance) {\n          this.toolInstance = toolInstance;\n          this.toolInstance.eventBinding();\n        }\n      }\n    });\n    this.pointCloudInstance = pointCloud;\n    this.canvasScheduler = canvasScheduler;\n    this.toolScheduler = toolScheduler;\n    this.config = config;\n  }\n  updateConfig(config) {\n    this.config = config;\n    this.pointCloud2dOperation.setConfig(JSON.stringify(config));\n  }\n  updateAttributeList(attributeList) {\n    this.config = __spreadProps(__spreadValues({}, this.config), {\n      attributeList\n    });\n    this.toolScheduler.syncAllAttributeListInConfig(attributeList);\n  }\n  initSize(size) {\n    this.pointCloudInstance.updateTopCamera();\n    this.pointCloudInstance.setDefaultControls();\n    this.toolScheduler.setSize(size);\n    this.pointCloudInstance.initRenderer();\n    this.pointCloudInstance.initOrthographicCamera(PointCloudUtils.getDefaultOrthographicParams(size));\n    this.pointCloudInstance.render();\n    const imgSrc = createEmptyImage(size);\n    const image = new Image();\n    image.src = imgSrc;\n    image.onload = () => {\n      this.toolInstance.setImgNode(image);\n      this.toolInstance.initImgPos();\n    };\n  }\n  addPolygonListOnTopView(result) {\n    const pointCloudDataList = PointCloudUtils.getBoxParamsFromResultList(result);\n    const polygonList = PointCloudUtils.getPolygonListFromResultList(result);\n    this.updatePolygonList(pointCloudDataList, polygonList);\n  }\n  addLineListOnTopView(result) {\n    const lineList = PointCloudUtils.getLineListFromResultList(result);\n    this.updateLineList(lineList);\n  }\n  addPointListOnTopView(result) {\n    const sphereList = PointCloudUtils.getSphereParamsFromResultList(result);\n    this.updatePointList(sphereList);\n  }\n  updateData(pcdPath, result, config) {\n    if (!this.toolInstance || !this.pointCloudInstance) {\n      return;\n    }\n    this.pointCloudInstance.loadPCDFile(pcdPath, config == null ? void 0 : config.radius);\n    this.addPolygonListOnTopView(result);\n    this.addLineListOnTopView(result);\n    this.addPointListOnTopView(result);\n  }\n  switchToCanvas(toolName) {\n    const newInstance = this.toolScheduler.switchToCanvas(toolName);\n    if (newInstance) {\n      this.toolInstance.eventUnbinding();\n      newInstance.eventBinding();\n      this.toolInstance = newInstance;\n      return newInstance;\n    }\n    return this.toolInstance;\n  }\n  initAllPosition() {\n    this.pointCloudInstance.updateTopCamera();\n    this.pointCloud2dOperation.initPosition();\n  }\n  clearAllData() {\n    this.pointCloudInstance.clearPointCloudAndRender();\n    this.pointCloud2dOperation.clearResult();\n  }\n}\n\nexport { PointCloudAnnotation };\n","export { RectOperation } from './core/toolOperation/rectOperation.js';\nexport { default as TagOperation } from './core/toolOperation/tagOperation.js';\nexport { default as PointOperation } from './core/toolOperation/pointOperation.js';\nexport { default as LineToolOperation } from './core/toolOperation/LineToolOperation.js';\nexport { default as TextToolOperation } from './core/toolOperation/TextToolOperation.js';\nexport { default as PolygonOperation } from './core/toolOperation/polygonOperation.js';\nexport { default as MeasureOperation } from './core/toolOperation/measureOperation.js';\nexport { BasicToolOperation } from './core/toolOperation/basicToolOperation.js';\nexport { default as ViewOperation } from './core/toolOperation/ViewOperation.js';\nexport { default as ScribbleTool } from './core/toolOperation/ScribbleTool.js';\nexport { default as PointCloud2dOperation } from './core/toolOperation/pointCloud2dOperation.js';\nimport * as annotation from './constant/annotation.js';\nexport { annotation as cAnnotation };\nimport * as annotationTask from './constant/annotationTask.js';\nexport { annotationTask as cAnnotationTask };\nimport * as keyCode from './constant/keyCode.js';\nexport { keyCode as cKeyCode };\nimport * as style from './constant/style.js';\nexport { style as cStyle };\nimport * as tool from './constant/tool.js';\nexport { tool as cTool };\nexport { CLIENT_TOOL_HEAD_TYPE, CLIENT_TOOL_NAME, DEFAULT_FONT, DEFAULT_TEXT_MAX_WIDTH, EAnnotationMode, EAuditStatus, ECheckModel, EDependPattern, EDragTarget, EDrawPointPattern, EFilterToolOperation, ELineColor, ELineTypes, EOperationMode, EPageOperator, EPointCloudName, EPolygonPattern, ERectPattern, EScribblePattern, ESelectedType, ETextType, EThumbnailOption, EToolName, EToolType, EVideoToolName, OPERATION_LIST, SEGMENT_NUMBER, TEXT_ATTRIBUTE_LINE_HEIGHT, TEXT_ATTRIBUTE_MAX_LENGTH, TEXT_TYPE, TOOL_NAME, TOOL_NAME_EN, edgeAdsorptionScope, editStepWidth } from './constant/tool.js';\nexport { default as TagUtils } from './utils/tool/TagUtils.js';\nexport { default as uuid } from './utils/uuid.js';\nimport EnhanceCommonToolUtils from './utils/tool/EnhanceCommonToolUtils.js';\nexport { default as MarkerUtils } from './utils/tool/MarkerUtils.js';\nexport { default as RectUtils } from './utils/tool/RectUtils.js';\nexport { default as AxisUtils } from './utils/tool/AxisUtils.js';\nexport { default as DrawUtils } from './utils/tool/DrawUtils.js';\nexport { default as ImgUtils } from './utils/ImgUtils.js';\nexport { default as MathUtils } from './utils/MathUtils.js';\nexport { default as AttributeUtils } from './utils/tool/AttributeUtils.js';\nexport { default as ActionsHistory } from './utils/ActionsHistory.js';\nexport { default as DblClickEventListener } from './utils/tool/DblClickEventListener.js';\nexport { default as AnnotationEngine } from './core/index.js';\nexport { default as UnitUtils } from './utils/tool/UnitUtils.js';\nexport { default as StyleUtils } from './utils/tool/StyleUtils.js';\nexport { CanvasScheduler } from './newCore/CanvasScheduler.js';\nexport { PointCloud } from './core/pointCloud/index.js';\nexport { createThreeMatrix4, getCuboidFromPointCloudBox, getHighlightIndexByPoints, isInImage, lidar2image, mergeHighlightList, point2dTo3D, point3DLidar2Image, pointCloudLidar2image, rotatePoint, transferKitti2Matrix } from './core/pointCloud/matrix.js';\nexport { PointCloudAnnotation } from './core/pointCloud/annotation.js';\n\nconst CommonToolUtils = EnhanceCommonToolUtils;\nconst toolUtils = EnhanceCommonToolUtils;\n\nexport { CommonToolUtils, toolUtils };\n","import {\n  IPointCloudBox,\n  IPointCloudBoxList,\n  IPolygonData,\n  IPointCloudSphereList,\n  IPointCloudSphere,\n  ILine,\n  EPointCloudPattern,\n  IPointCloudSegmentation,\n  ICalib,\n} from '@labelbee/lb-utils';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport {\n  PointCloud,\n  PointCloudAnnotation,\n  ActionsHistory,\n  EToolName,\n} from '@labelbee/lb-annotation';\nimport { useDispatch } from '@/store/ctx';\nimport { ChangeSave } from '@/store/annotation/actionCreators';\n\ninterface IPointCloudContextInstances {\n  topViewInstance?: PointCloudAnnotation;\n  sideViewInstance?: PointCloudAnnotation;\n  backViewInstance?: PointCloudAnnotation;\n  mainViewInstance?: PointCloud;\n  setTopViewInstance: (instance?: PointCloudAnnotation) => void;\n  setSideViewInstance: (instance?: PointCloudAnnotation) => void;\n  setBackViewInstance: (instance?: PointCloudAnnotation) => void;\n  setMainViewInstance: (instance?: PointCloud) => void;\n}\n\ninterface IPointCloudStatus {\n  globalPattern: EPointCloudPattern; // Switch PointCloud Pattern (Segmentation / Detection)\n  setGlobalPattern: (pattern: EPointCloudPattern) => void;\n}\n\ninterface IPointCloudSegment {\n  ptSegmentInstance?: PointCloud;\n  setPtSegmentInstance: (instance?: PointCloud) => void;\n}\n\ntype AttrPanelLayout = '' | 'left' | 'right';\n\ninterface IHighlight2DData {\n  url: string;\n  calib: ICalib;\n}\n\nexport interface IPointCloudContext\n  extends IPointCloudContextInstances,\n    IPointCloudStatus,\n    IPointCloudSegment {\n  pointCloudBoxList: IPointCloudBoxList;\n  pointCloudSphereList: IPointCloudSphereList;\n  displayPointCloudList: IPointCloudBoxList;\n  displaySphereList: IPointCloudSphereList;\n  displayLineList: ILine[];\n  selectedIDs: string[];\n  setSelectedIDs: (ids?: string[] | string) => void;\n  valid: boolean;\n  setPointCloudResult: (resultList: IPointCloudBoxList) => void;\n  setPointCloudSphereList: (sphereList: IPointCloudSphereList) => void;\n  selectedPointCloudBox?: IPointCloudBox;\n  setPointCloudValid: (valid?: boolean) => void;\n  addSelectedID: (selectedID: string) => void;\n  selectedAllBoxes: () => void;\n  selectedID: string;\n  addPointCloudBox: (boxParams: IPointCloudBox) => IPointCloudBox[];\n  addPointCloudSphere: (sphereParams: IPointCloudSphere) => IPointCloudSphere[];\n\n  polygonList: IPolygonData[];\n  setPolygonList: (polygonList: IPolygonData[]) => void;\n\n  lineList: ILine[];\n  setLineList: (lineList: ILine[]) => void;\n\n  zoom: number;\n  setZoom: (zoom: number) => void;\n\n  history: ActionsHistory; // Operation History\n  hideAttributes: string[];\n  setHideAttributes: (hideAttrs: string[]) => void;\n  toggleAttributesVisible: (attribute: string) => void;\n  reRender: (\n    _displayPointCloudList: IPointCloudBoxList,\n    _polygonList: IPolygonData[],\n    _displaySphereList: IPointCloudSphereList,\n    _lineList: ILine[],\n    _segmentation: IPointCloudSegmentation[],\n  ) => void;\n  attrPanelLayout: AttrPanelLayout;\n  setAttrPanelLayout: (layout: AttrPanelLayout) => void;\n\n  syncAllViewPointCloudColor: (\n    newPointCloudList?: IPointCloudBox[],\n    newHighlight2DDataList?: IHighlight2DData[],\n  ) => Promise<any>;\n\n  defaultAttribute: string;\n  setDefaultAttribute: (defaultAttribute: string) => void;\n\n  pointCloudPattern: EToolName.Rect | EToolName.Polygon | EToolName.Point | EToolName.Line;\n  setPointCloudPattern: (\n    toolName: EToolName.Rect | EToolName.Polygon | EToolName.Point | EToolName.Line,\n  ) => void;\n  selectSpecAttr: (attr: string) => void;\n  segmentation: IPointCloudSegmentation[];\n  setSegmentation: (segmentation: IPointCloudSegmentation[]) => void;\n  clearAllDetectionInstance: () => void;\n\n  highlight2DDataList: IHighlight2DData[];\n  setHighlight2DDataList: (urlList: IHighlight2DData[]) => void;\n}\n\nexport const PointCloudContext = React.createContext<IPointCloudContext>({\n  pointCloudBoxList: [],\n  pointCloudSphereList: [],\n  displayPointCloudList: [],\n  displaySphereList: [],\n  displayLineList: [],\n  polygonList: [],\n  lineList: [],\n  selectedID: '',\n  selectedIDs: [],\n  valid: true,\n  setSelectedIDs: () => {},\n  setPointCloudResult: () => {},\n  setPointCloudSphereList: () => {},\n  setPointCloudValid: () => {},\n  setTopViewInstance: () => {},\n  setSideViewInstance: () => {},\n  setBackViewInstance: () => {},\n  setMainViewInstance: () => {},\n  addSelectedID: () => {},\n  selectedAllBoxes: () => {},\n  addPointCloudBox: () => {\n    return [];\n  },\n  addPointCloudSphere: () => {\n    return [];\n  },\n  setPolygonList: () => {},\n  setLineList: () => {},\n\n  zoom: 1,\n  setZoom: () => {},\n  history: new ActionsHistory(),\n  hideAttributes: [],\n  setHideAttributes: () => {},\n  toggleAttributesVisible: () => {},\n  reRender: () => {},\n  setAttrPanelLayout: () => {},\n  attrPanelLayout: '',\n  syncAllViewPointCloudColor: () => {\n    return Promise.resolve();\n  },\n\n  defaultAttribute: '',\n  setDefaultAttribute: () => {},\n\n  pointCloudPattern: EToolName.Rect,\n  setPointCloudPattern: () => {},\n  selectSpecAttr: () => {},\n\n  globalPattern: EPointCloudPattern.Detection,\n  setGlobalPattern: () => {},\n\n  setPtSegmentInstance: () => {},\n  segmentation: [],\n  setSegmentation: () => {},\n  clearAllDetectionInstance: () => {},\n\n  highlight2DDataList: [],\n  setHighlight2DDataList: () => {},\n});\n\nexport const PointCloudProvider: React.FC<{}> = ({ children }) => {\n  const [pointCloudBoxList, setPointCloudResult] = useState<IPointCloudBoxList>([]);\n  const [pointCloudSphereList, setPointCloudSphereList] = useState<IPointCloudSphereList>([]);\n  const [polygonList, setPolygonList] = useState<IPolygonData[]>([]);\n  const [lineList, setLineList] = useState<ILine[]>([]);\n  const [selectedIDs, setSelectedIDsState] = useState<string[]>([]);\n  const [valid, setValid] = useState<boolean>(true);\n  const [zoom, setZoom] = useState<number>(1);\n  const [topViewInstance, setTopViewInstance] = useState<PointCloudAnnotation>();\n  const [sideViewInstance, setSideViewInstance] = useState<PointCloudAnnotation>();\n  const [backViewInstance, setBackViewInstance] = useState<PointCloudAnnotation>();\n  const [mainViewInstance, setMainViewInstance] = useState<PointCloud>();\n  const [defaultAttribute, setDefaultAttribute] = useState('');\n  const [pointCloudPattern, setPointCloudPattern] = useState<\n    EToolName.Rect | EToolName.Polygon | EToolName.Point | EToolName.Line\n  >(EToolName.Rect);\n  const history = useRef(new ActionsHistory()).current;\n  const [hideAttributes, setHideAttributes] = useState<string[]>([]);\n  const [attrPanelLayout, setAttrPanelLayout] = useState<AttrPanelLayout>('');\n  const [globalPattern, setGlobalPattern] = useState(EPointCloudPattern.Detection);\n  const [ptSegmentInstance, setPtSegmentInstance] = useState<PointCloud | undefined>(undefined);\n  const [segmentation, setSegmentation] = useState<IPointCloudSegmentation[]>([]);\n  const [highlight2DDataList, setHighlight2DDataList] = useState<IHighlight2DData[]>([]);\n\n  const dispatch = useDispatch();\n\n  const selectedID = useMemo(() => {\n    return selectedIDs.length === 1 ? selectedIDs[0] : '';\n  }, [selectedIDs]);\n\n  const ptCtx = useMemo(() => {\n    const selectedPointCloudBox = pointCloudBoxList.find((v) => v.id === selectedID);\n\n    const addPointCloudBox = (box: IPointCloudBox) => {\n      const newPointCloudList = pointCloudBoxList.concat(box);\n      setPointCloudResult(newPointCloudList);\n      return newPointCloudList;\n    };\n\n    const addPointCloudSphere = (sphere: IPointCloudSphere) => {\n      const newSphereList = pointCloudSphereList.concat(sphere);\n      setPointCloudSphereList(newSphereList);\n      return newSphereList;\n    };\n\n    const setPointCloudValid = (valid?: boolean) => {\n      setValid(valid === false ? false : true);\n    };\n\n    const setSelectedIDs = (selectedIDs?: string[] | string) => {\n      if (selectedIDs === undefined) {\n        setSelectedIDsState([]);\n      }\n\n      if (typeof selectedIDs === 'string') {\n        setSelectedIDsState([selectedIDs]);\n      }\n\n      if (Array.isArray(selectedIDs)) {\n        setSelectedIDsState(Array.from(new Set(selectedIDs)));\n      }\n    };\n\n    /**\n     * If selectedID existed, remove selectedID from selectedIDs\n     * If selectedID not existed, add selectedID to selectedIDs\n     * @param selectedID\n     */\n    const addSelectedID = (selectedID: string) => {\n      if (selectedIDs.includes(selectedID)) {\n        setSelectedIDs(selectedIDs.filter((i) => i !== selectedID));\n      } else {\n        setSelectedIDs([...selectedIDs, selectedID]);\n      }\n    };\n\n    const selectedAllBoxes = () => {\n      if (pointCloudPattern === EToolName.Rect) {\n        const ids = pointCloudBoxList.map((i) => i.id);\n        setSelectedIDs(ids);\n        topViewInstance?.pointCloud2dOperation.setSelectedIDs(ids);\n      }\n    };\n\n    const selectSpecAttr = (attr: string) => {\n      setSelectedIDs(pointCloudBoxList.filter((i) => i.attribute === attr).map((i) => i.id));\n    };\n\n    const displayPointCloudList = pointCloudBoxList.filter(\n      (i) => !hideAttributes.includes(i.attribute),\n    );\n\n    const displaySphereList = pointCloudSphereList.filter(\n      (i) => !hideAttributes.includes(i.attribute),\n    );\n\n    const displayLineList = lineList.filter(\n      (i) => i.attribute && !hideAttributes.includes(i.attribute),\n    );\n\n    const toggleAttributesVisible = (tAttribute: string) => {\n      if (hideAttributes.includes(tAttribute)) {\n        setHideAttributes(hideAttributes.filter((attribute) => attribute !== tAttribute));\n      } else {\n        const updatedHideAttributes = hideAttributes.concat(tAttribute);\n        setHideAttributes(updatedHideAttributes);\n      }\n    };\n\n    const reRender = (\n      _displayPointCloudList: IPointCloudBoxList = displayPointCloudList,\n      _polygonList: IPolygonData[] = polygonList,\n      _displaySphereList: IPointCloudSphereList = displaySphereList,\n      _lineList: ILine[] = displayLineList,\n      _segmentation: IPointCloudSegmentation[] = segmentation,\n    ) => {\n      mainViewInstance?.clearAllBox();\n      mainViewInstance?.clearAllSphere();\n\n      topViewInstance?.updatePolygonList(_displayPointCloudList, _polygonList);\n      topViewInstance?.updatePointList(_displaySphereList);\n      topViewInstance?.updateLineList(_lineList);\n      mainViewInstance?.generateBoxes(_displayPointCloudList);\n      mainViewInstance?.generateSpheres(_displaySphereList);\n      ptSegmentInstance?.store?.updateCurrentSegment(_segmentation);\n      syncAllViewPointCloudColor(_displayPointCloudList);\n    };\n\n    const clearAllDetectionInstance = () => {\n      setTopViewInstance(undefined);\n      setSideViewInstance(undefined);\n      setBackViewInstance(undefined);\n      setMainViewInstance(undefined);\n    };\n\n    /**\n     * Synchronize the highlighted pointCloud for all views.\n     * @param pointCloudList\n     */\n\n    const syncAllViewPointCloudColor = async (\n      pointCloudList?: IPointCloudBox[],\n      newHighlight2DDataList?: IHighlight2DData[],\n    ) => {\n      if (!mainViewInstance) {\n        return;\n      }\n\n      const points = mainViewInstance.pointCloudObject;\n\n      if (!points) {\n        return;\n      }\n\n      try {\n        const highlightIndex = await mainViewInstance.getHighlightIndexByMappingImgList({\n          mappingImgList: newHighlight2DDataList ?? highlight2DDataList, // MappingImgList can be defined by through external param.\n          points: points.geometry.attributes.position.array,\n        });\n\n        const color = await mainViewInstance?.highlightOriginPointCloud(\n          pointCloudList,\n          highlightIndex,\n        );\n\n        color && topViewInstance?.pointCloudInstance?.updateColor(color);\n        return color;\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const setGlobalPatternFuc = (pattern: EPointCloudPattern) => {\n      if (globalPattern !== pattern) {\n        dispatch(ChangeSave);\n        setGlobalPattern(pattern);\n\n        // Segment => Detection - Temporarily.\n        if (pattern === EPointCloudPattern.Detection) {\n          setPtSegmentInstance(undefined);\n        }\n      }\n    };\n\n    return {\n      selectedID,\n      pointCloudBoxList,\n      pointCloudSphereList,\n      displayPointCloudList,\n      displaySphereList,\n      displayLineList,\n      selectedIDs,\n      setPointCloudResult,\n      setSelectedIDs,\n      addPointCloudBox,\n      addPointCloudSphere,\n      setPointCloudSphereList,\n      valid,\n      selectedPointCloudBox,\n      setPointCloudValid,\n      addSelectedID,\n      selectedAllBoxes,\n      topViewInstance,\n      setTopViewInstance,\n      sideViewInstance,\n      setSideViewInstance,\n      backViewInstance,\n      setBackViewInstance,\n      mainViewInstance,\n      setMainViewInstance,\n      polygonList,\n      setPolygonList,\n      lineList,\n      setLineList,\n      zoom,\n      setZoom,\n      history,\n      toggleAttributesVisible,\n      hideAttributes,\n      setHideAttributes,\n      reRender,\n      attrPanelLayout,\n      setAttrPanelLayout,\n      syncAllViewPointCloudColor,\n      defaultAttribute,\n      setDefaultAttribute,\n      pointCloudPattern,\n      setPointCloudPattern,\n      selectSpecAttr,\n      globalPattern,\n      setGlobalPattern: setGlobalPatternFuc,\n      ptSegmentInstance,\n      setPtSegmentInstance,\n      segmentation,\n      setSegmentation,\n      clearAllDetectionInstance,\n\n      highlight2DDataList,\n      setHighlight2DDataList,\n    };\n  }, [\n    valid,\n    selectedIDs,\n    pointCloudBoxList,\n    pointCloudSphereList,\n    polygonList,\n    lineList,\n    topViewInstance,\n    sideViewInstance,\n    backViewInstance,\n    mainViewInstance,\n    zoom,\n    hideAttributes,\n    attrPanelLayout,\n    defaultAttribute,\n    pointCloudPattern,\n    globalPattern,\n    ptSegmentInstance,\n    segmentation,\n    highlight2DDataList,\n  ]);\n\n  const updateSelectedIDsAndRenderAfterHide = () => {\n    const pointCloudForFilteredList = pointCloudBoxList.filter((i) =>\n      hideAttributes.includes(i.attribute),\n    );\n\n    const { setSelectedIDs, reRender } = ptCtx;\n\n    const filteredIDs = pointCloudForFilteredList.map((i) => i.id);\n\n    if (filteredIDs.length > 0) {\n      setSelectedIDs(selectedIDs.filter((id) => !filteredIDs.includes(id)));\n    }\n\n    reRender();\n  };\n\n  useEffect(() => {\n    updateSelectedIDsAndRenderAfterHide();\n    topViewInstance?.toolInstance?.setHiddenAttributes?.(hideAttributes);\n    ptSegmentInstance?.store?.setHiddenAttributes?.(hideAttributes);\n  }, [hideAttributes]);\n\n  return <PointCloudContext.Provider value={ptCtx}>{children}</PointCloudContext.Provider>;\n};\n","export enum EStepType {\n  Check = 0, // 查看模式\n  ANNOTATION = 1, // 正常标注\n  QUALITY_INSPECTION, // 标注质检\n  PRE_ANNOTATION, // 预标注\n  MANUAL_CORRECTION, // 人工修正\n}\n\nexport enum ESubmitType {\n  Backward = 1, // 向前翻页\n  Forward = 2, // 向后翻页\n  Jump = 3, // 分页器的跳页翻页\n  Quit = 4, // 左上角后退触发\n  Export = 5, // 数据导出时\n  StepChanged = 6, // 切换步骤\n  Save = 7, // 点击保存\n  BatchUpdateTrackID = 8, // 批量更改 TrackID (PointCloud)\n  BatchUpdateImgList = 9, // 批量更改 ImgList (PointCloud)\n  SyncImgList = 10001, // 仅更改数据\n  SyncCurrentPageData = 10002, // 同步当页数据\n}\n// css 命名前缀\nexport const prefix = 'bee';\nexport const componentCls = `${prefix}-component`;\n","import _ from 'lodash';\n\nexport const jsonParser = (content: any, defaultValue: any = {}) => {\n  try {\n    if (typeof content === 'string') {\n      return JSON.parse(content);\n    }\n    return _.isObject(content) ? content : defaultValue;\n  } catch (e) {\n    return defaultValue;\n  }\n};\n\nexport const getNewNode = <T>(newNode: T, oldNode: T): T => {\n  return newNode || _.isNull(newNode) ? newNode : oldNode;\n};\n\nexport const classnames = (className: { [key: string]: boolean } | (string | undefined)[]) => {\n  if (Array.isArray(className)) {\n    return className.filter((i) => i).join(' ');\n  }\n\n  if (_.isObject(className)) {\n    const classArray: string[] = [];\n    Object.keys(className).forEach((key) => {\n      if (className[key]) {\n        classArray.push(key);\n      }\n    });\n\n    return classArray.join(' ');\n  }\n\n  return '';\n};\n","import { MutableRefObject } from 'react';\nimport { prefix } from '@/constant';\n\nexport type BasicTarget<T = HTMLElement> =\n  | (() => T | null)\n  | T\n  | null\n  | MutableRefObject<T | null | undefined>;\n\ntype TargetElement = HTMLElement | Element | Document | Window;\n\nexport function getTargetElement(\n  target?: BasicTarget<TargetElement>,\n  defaultElement?: TargetElement,\n): TargetElement | undefined | null {\n  if (!target) {\n    return defaultElement;\n  }\n\n  let targetElement: TargetElement | undefined | null;\n\n  if (typeof target === 'function') {\n    // TODO. Maybe the new version of typescript is not allowed.\n    // @ts-ignore\n    targetElement = target();\n  } else if ('current' in target) {\n    targetElement = target.current;\n  } else {\n    targetElement = target;\n  }\n\n  return targetElement;\n}\n\n/**\n * Get class like BEM\n * @param elm\n * @param modify\n */\nexport const getClassName = (block: string, elm?: string, modify?: string) =>\n  `${prefix}-${block}${elm ? '__' + elm : ''}${modify ? '__' + modify : ''}`;\n","import { ANNOTATION_ACTIONS } from '@/store/Actions';\nimport { IStepInfo } from '@/types/step';\nimport {\n  GetFileData,\n  LoadFileList,\n  IFileItem,\n  OnPageChange,\n  OnSave,\n  OnStepChange,\n  OnSubmit,\n} from '@/types/data';\nimport { AnnotationActionTypes, ToolInstance } from './types';\nimport { LoadFileAndFileData, getStepConfig } from './reducer';\nimport { ESubmitType } from '@/constant';\nimport { EPageTurningOperation } from '@/data/enums/AnnotationSize';\nimport PageOperator from '@/utils/PageOperator';\nimport { jsonParser } from '@/utils';\nimport { IPointCloudBox } from '@labelbee/lb-utils';\nimport { getBoxesByTrackID } from '@/components/predictTracking/previewResult/util';\nimport { IPreDataProcessParams } from '@/App';\n\nconst dispatchTasks = (dispatch: any, tasks: any[]) => tasks.map((task) => dispatch(task));\n\n/**\n * @param {pageTurningOperation} pageTurningOperation 翻页操作\n * @returns {ESubmitType} 提数据交类型\n */\nconst getSubmitByPageOperation = (pageTurningOperation: EPageTurningOperation) => {\n  if (pageTurningOperation === EPageTurningOperation.Forward) {\n    return ESubmitType.Forward;\n  }\n\n  if (pageTurningOperation === EPageTurningOperation.Backward) {\n    return ESubmitType.Backward;\n  }\n\n  if (pageTurningOperation === EPageTurningOperation.Jump) {\n    return ESubmitType.Jump;\n  }\n\n  return ESubmitType.Forward;\n};\n\nconst getBasicIndex = (annotationStore: any, basicIndex: number) => {\n  const { imgList, imgIndex } = annotationStore;\n  const { dataSourceStep } = getStepConfig(annotationStore.stepList, annotationStore.step);\n  let backwardResult = jsonParser(imgList[imgIndex - 1].result);\n  const index = backwardResult[`step_${dataSourceStep}`]?.result?.length - 1;\n  return index || basicIndex;\n};\n\nexport function UpdateToolInstance(toolInstance: ToolInstance): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_TOOL_INSTANCE,\n    payload: {\n      toolInstance,\n    },\n  };\n}\n\nexport function UpdateImgList(imgList: IFileItem[]): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_IMG_LIST,\n    payload: {\n      imgList,\n    },\n  };\n}\n\nexport function UpdateAnnotationConfig(config: string): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_ANNOTATION_CONFIG,\n    payload: {\n      config,\n    },\n  };\n}\n\nexport function SetTaskStepList({ stepList }: { stepList: IStepInfo[] }): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.SET_TASK_STEP_LIST,\n    payload: {\n      stepList,\n    },\n  };\n}\n\nexport function SetTaskConfig({\n  stepList,\n  step,\n}: {\n  stepList: IStepInfo[];\n  step: number;\n}): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.SET_TASK_CONFIG,\n    payload: {\n      stepList,\n      step,\n    },\n  };\n}\n\nexport function UpdateOnSubmit(onSubmit: OnSubmit): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_ON_SUBMIT,\n    payload: {\n      onSubmit,\n    },\n  };\n}\n\nexport function UpdateOnSave(onSave: OnSave): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_ON_SAVE,\n    payload: {\n      onSave,\n    },\n  };\n}\n\nexport function UpdateOnPageChange(onPageChange: OnPageChange): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_ON_PAGE_CHANGE,\n    payload: {\n      onPageChange,\n    },\n  };\n}\n\nexport function UpdateOnStepChange(onStepChange: OnStepChange): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_ON_STEP_CHANGE,\n    payload: {\n      onStepChange,\n    },\n  };\n}\n\nexport function UpdateGetFileData(getFileData: GetFileData): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_GET_FILE_DATA,\n    payload: {\n      getFileData,\n    },\n  };\n}\n\nexport function UpdatePageSize(pageSize: number): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_PAGE_SIZE,\n    payload: {\n      pageSize,\n    },\n  };\n}\n\nexport function UpdateGetFileList(loadFileList: LoadFileList): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_LOAD_FILE_LIST,\n    payload: {\n      loadFileList,\n    },\n  };\n}\n\nexport function UpdateRotate(): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_ROTATE,\n  };\n}\n\nexport function UpdateValid(): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_ANNOTATION_VALID,\n  };\n}\n\nexport function UpdateSkipBeforePageTurning(\n  skipBeforePageTurning: (pageTurning: Function) => {},\n): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.SKIP_BEFORE_PAGE_TURNING,\n    payload: {\n      skipBeforePageTurning,\n    },\n  };\n}\n\nexport function UpdateBeforeRotate(beforeRotate: () => {}): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_BEFORE_ROTATE,\n    payload: {\n      beforeRotate,\n    },\n  };\n}\n\nexport function UpdatePreDataProcess(preDataProcess: () => {}): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.UPDATE_PRE_DATA_PROCESS,\n    payload: {\n      preDataProcess,\n    },\n  };\n}\n\nexport function CopyBackWordResult(): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.COPY_BACKWARD_RESULT,\n  };\n}\n\nexport function BatchUpdateTrackID({\n  id,\n  newID,\n  rangeIndex,\n  imgList,\n}: {\n  id: number;\n  newID: number;\n  rangeIndex: [number, number];\n  imgList: IFileItem[];\n}): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.BATCH_UPDATE_TRACK_ID,\n    payload: {\n      id,\n      newID,\n      rangeIndex,\n      imgList,\n    },\n  };\n}\n\nexport function BatchUpdateResultByTrackID(\n  id: number, // originData\n  newData: Partial<IPointCloudBox>,\n  rangeIndex: [number, number],\n): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.BATCH_UPDATE_RESULT_BY_TRACK_ID,\n    payload: {\n      id,\n      newData,\n      rangeIndex,\n    },\n  };\n}\n\nexport function BatchUpdateImgListResultByPredictResult(): AnnotationActionTypes {\n  return {\n    type: ANNOTATION_ACTIONS.BATCH_UPDATE_IMG_LIST_RESULT_BY_PREDICT_RESULT,\n    payload: {},\n  };\n}\n\nexport const UpdateCheckMode = (checkMode: boolean): AnnotationActionTypes => {\n  return {\n    type: ANNOTATION_ACTIONS.SET_CHECK_MODE,\n    payload: {\n      checkMode,\n    },\n  };\n};\n\nexport const UpdateHighlightAttribute = (attribute: string): AnnotationActionTypes => {\n  return {\n    type: ANNOTATION_ACTIONS.SET_HIGHLIGHT_ATTRIBUTE,\n    payload: {\n      attribute,\n    },\n  };\n};\n\n/**\n * 初始化任务数据\n * @param param0\n */\nexport function InitTaskData({\n  onSubmit,\n  onSave,\n  onPageChange,\n  onStepChange,\n  getFileData,\n  pageSize,\n  loadFileList,\n  step,\n  stepList,\n  skipBeforePageTurning,\n  beforeRotate,\n  checkMode,\n  highlightAttribute,\n  preDataProcess,\n}: any): any {\n  const tasks: any[] = [];\n\n  if (onSubmit) {\n    tasks.push(UpdateOnSubmit(onSubmit));\n  }\n  if (onSave) {\n    tasks.push(UpdateOnSave(onSave));\n  }\n  if (onPageChange) {\n    tasks.push(UpdateOnPageChange(onPageChange));\n  }\n\n  if (onStepChange) {\n    tasks.push(UpdateOnStepChange(onStepChange));\n  }\n\n  if (getFileData) {\n    tasks.push(UpdateGetFileData(getFileData));\n  }\n\n  if (loadFileList) {\n    tasks.push(UpdateGetFileList(loadFileList));\n  }\n\n  if (pageSize) {\n    tasks.push(UpdatePageSize(pageSize));\n  }\n\n  if (skipBeforePageTurning) {\n    tasks.push(UpdateSkipBeforePageTurning(skipBeforePageTurning));\n  }\n\n  if (beforeRotate) {\n    tasks.push(UpdateBeforeRotate(beforeRotate));\n  }\n\n  if (preDataProcess) {\n    tasks.push(UpdatePreDataProcess(preDataProcess));\n  }\n\n  if (typeof checkMode === 'boolean') {\n    tasks.push(UpdateCheckMode(checkMode));\n  }\n\n  tasks.push(UpdateHighlightAttribute(highlightAttribute));\n\n  tasks.push(SetTaskConfig({ stepList, step }));\n\n  tasks.push({\n    type: ANNOTATION_ACTIONS.CALC_STEP_PROGRESS,\n  });\n\n  tasks.push({\n    type: ANNOTATION_ACTIONS.INIT_TOOL,\n  });\n\n  return (dispatch: any) => dispatchTasks(dispatch, tasks);\n}\n\n/**\n * 初始化任务数据\n * @param param0\n */\nexport function UpdateInjectFunc({\n  onSubmit,\n  onSave,\n  onPageChange,\n  onStepChange,\n  getFileData,\n  pageSize,\n  loadFileList,\n  stepList,\n  beforeRotate,\n  highlightAttribute,\n  preDataProcess,\n}: any): any {\n  const tasks: any[] = [];\n\n  if (onSubmit) {\n    tasks.push(UpdateOnSubmit(onSubmit));\n  }\n  if (onSave) {\n    tasks.push(UpdateOnSave(onSave));\n  }\n  if (onPageChange) {\n    tasks.push(UpdateOnPageChange(onPageChange));\n  }\n\n  if (onStepChange) {\n    tasks.push(UpdateOnStepChange(onStepChange));\n  }\n\n  if (getFileData) {\n    tasks.push(UpdateGetFileData(getFileData));\n  }\n\n  if (loadFileList) {\n    tasks.push(UpdateGetFileList(loadFileList));\n  }\n\n  if (pageSize) {\n    tasks.push(UpdatePageSize(pageSize));\n  }\n\n  if (beforeRotate) {\n    tasks.push(UpdateBeforeRotate(beforeRotate));\n  }\n\n  if (preDataProcess) {\n    tasks.push(UpdatePreDataProcess(preDataProcess));\n  }\n\n  tasks.push(UpdateHighlightAttribute(highlightAttribute));\n\n  tasks.push(SetTaskStepList({ stepList }));\n\n  return (dispatch: any) => dispatchTasks(dispatch, tasks);\n}\n\n/** 获取下一步的step */\nconst getNextStep = (step: number, stepList: any) => {\n  const currentStepIndex = stepList?.findIndex((element: any) => element?.step === step);\n  return stepList[currentStepIndex + 1]?.step;\n};\n\n/** 切换到下一步 */\nexport const ToNextStep = (pageNumber?: number) => (dispatch: any, getState: any) => {\n  const { annotation } = getState();\n  const { step, stepList } = annotation;\n  const nextStep = getNextStep(step, stepList);\n  return [dispatch(UpdateProcessingStep(nextStep, pageNumber))];\n};\n\n/**\n * 更新当前操作的步骤\n * @param {number} toStep\n */\nexport const UpdateProcessingStep =\n  (toStep: number, index?: number) => (dispatch: any, getState: any) => {\n    const { annotation } = getState();\n    annotation?.onStepChange?.(toStep);\n    const imgIndex = annotation?.imgIndex ?? 0;\n    return [\n      dispatch({ type: ANNOTATION_ACTIONS.SUBMIT_RESULT }),\n      dispatch({\n        type: ANNOTATION_ACTIONS.SUBMIT_FILE_DATA,\n        payload: { submitType: ESubmitType.StepChanged },\n      }),\n      // ToSubmitFileData(ESubmitType.StepChanged),\n      dispatch({ type: ANNOTATION_ACTIONS.SET_STEP, payload: { toStep } }),\n      dispatch({ type: ANNOTATION_ACTIONS.CALC_STEP_PROGRESS }),\n      // 切换步骤保持图片位置\n      dispatch(LoadFileAndFileData(index ?? imgIndex, 0)),\n    ];\n  };\n\n/**\n * 提交当前的文件数据\n * @param submitType\n */\nexport const ToSubmitFileData = (submitType: ESubmitType) => (dispatch: any) =>\n  [\n    dispatch({ type: ANNOTATION_ACTIONS.SUBMIT_RESULT }),\n    dispatch({ type: ANNOTATION_ACTIONS.SUBMIT_FILE_DATA, payload: { submitType } }),\n  ];\n\n/**\n * 提交数据并且切换标注文件\n * @param dispatch\n * @param nextIndex\n * @param submitType\n * @param nextBasicIndex\n */\nconst SubmitAndChangeFileIndex = (\n  dispatch: any,\n  nextIndex: number,\n  submitType: ESubmitType,\n  nextBasicIndex?: number,\n) => [\n  dispatch(ToSubmitFileData(submitType)),\n  dispatch(LoadFileAndFileData(nextIndex, nextBasicIndex)),\n];\n\nconst ChangeBasicIndex = (dispatch: any, nextBasicIndex: number) => [\n  dispatch({ type: ANNOTATION_ACTIONS.SUBMIT_RESULT }),\n  dispatch({ type: ANNOTATION_ACTIONS.SET_BASIC_INDEX, payload: { basicIndex: nextBasicIndex } }),\n];\n\nconst ChangeTriggerEventAfterIndexChanged = (\n  dispatch: any,\n  triggerEventAfterIndexChanged: boolean,\n) => {\n  dispatch({\n    type: ANNOTATION_ACTIONS.SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED,\n    payload: {\n      triggerEventAfterIndexChanged,\n    },\n  });\n};\n\n/** 向前翻页 */\nexport const PageBackward =\n  (triggerEventAfterIndexChanged = false) =>\n  (dispatch: any, getState: any) => {\n    return DispatcherTurning(\n      dispatch,\n      getState,\n      EPageTurningOperation.Backward,\n      triggerEventAfterIndexChanged,\n    );\n  };\n\n/** 向后翻页 */\nexport const PageForward =\n  (triggerEventAfterIndexChanged = false) =>\n  (dispatch: any, getState: any) => {\n    return DispatcherTurning(\n      dispatch,\n      getState,\n      EPageTurningOperation.Forward,\n      triggerEventAfterIndexChanged,\n    );\n  };\n\n/**\n * 跳到指定文件索引\n * @param toIndex\n */\nexport const PageJump =\n  (toIndex: number, triggerEventAfterIndexChanged = false) =>\n  (dispatch: any, getState: any) => {\n    if (toIndex === getState().imgIndex) {\n      return;\n    }\n\n    return DispatcherTurning(\n      dispatch,\n      getState,\n      EPageTurningOperation.Jump,\n      triggerEventAfterIndexChanged,\n      toIndex,\n    );\n  };\n\n/**\n * 加载文件列表\n * @param dispatch\n * @param getState\n * @param nextIndex 需要加载的图片index\n * @param isInitial // 是否为初始化加载\n */\nexport const loadImgList = async (\n  dispatch: any,\n  getState: any,\n  nextIndex: number,\n  isInitial?: boolean,\n) => {\n  const { loadFileList, imgList, pageSize } = getState().annotation;\n  const page = Math.floor(nextIndex / pageSize);\n  SetAnnotationLoading(dispatch, true);\n  try {\n    const res: any = await loadFileList(page, pageSize);\n    SetAnnotationLoading(dispatch, false);\n    if (!res?.fileList?.length || !res?.total) {\n      throw new Error('fileList and total are required');\n    }\n    const newImgList = isInitial ? new Array(res.total) : [...imgList];\n    newImgList.splice(page * pageSize, pageSize, ...res.fileList);\n    dispatch({\n      type: ANNOTATION_ACTIONS.UPDATE_IMG_LIST,\n      payload: {\n        imgList: newImgList,\n      },\n    });\n    return true;\n  } catch (err) {\n    SetAnnotationLoading(dispatch, false);\n    console.error(err);\n  }\n};\n\n/**\n * 判断翻页还是切换依赖数据\n * @param dispatch\n * @param getState\n * @param pageTurningOperation\n * @param toIndex\n */\nexport const DispatcherTurning = async (\n  dispatch: any,\n  getState: any,\n  pageTurningOperation: EPageTurningOperation,\n  triggerEventAfterIndexChanged = false,\n  toIndex?: number,\n) => {\n  const annotationStore = getState().annotation;\n  const { fileIndexChanged, fileIndex, basicIndexChanged, basicIndex } =\n    PageOperator.getNextPageInfo(pageTurningOperation, annotationStore, toIndex);\n\n  const submitType: ESubmitType = getSubmitByPageOperation(pageTurningOperation);\n\n  ChangeTriggerEventAfterIndexChanged(dispatch, triggerEventAfterIndexChanged);\n\n  // 翻页\n  if (fileIndexChanged) {\n    if (annotationStore.loading) {\n      return;\n    }\n    // 加载图片列表\n    if (!annotationStore.imgList[fileIndex]) {\n      const isSuccess = await loadImgList(dispatch, getState, fileIndex);\n      if (!isSuccess) {\n        // 加载失败不往下执行\n        return;\n      }\n    }\n\n    annotationStore.onPageChange?.(fileIndex);\n    const index =\n      submitType === ESubmitType.Backward\n        ? getBasicIndex(getState().annotation, basicIndex)\n        : basicIndex;\n    return SubmitAndChangeFileIndex(dispatch, fileIndex, submitType, index);\n  }\n\n  if (basicIndexChanged) {\n    return ChangeBasicIndex(dispatch, basicIndex);\n  }\n\n  return dispatch(ToSubmitFileData(submitType));\n};\n\n/**\n * 保存当前页数据\n * */\nexport const ChangeSave = (dispatch: Function) => {\n  dispatch(ToSubmitFileData(ESubmitType.Save));\n  dispatch({ type: ANNOTATION_ACTIONS.SAVE_RESULT });\n};\n\nexport const SetAnnotationLoading = (dispatch: Function, loading: boolean) => {\n  dispatch({\n    type: ANNOTATION_ACTIONS.SET_LOADING,\n    payload: {\n      loading,\n    },\n  });\n};\n\nexport const SetPointCloudLoading = (dispatch: Function, loading: boolean) => {\n  dispatch({\n    type: ANNOTATION_ACTIONS.SET_LOADING,\n    payload: {\n      loading,\n    },\n  });\n};\n\nexport const SetLoadPCDFileLoading = (dispatch: Function, loadPCDFileLoading: boolean) => {\n  dispatch({\n    type: ANNOTATION_ACTIONS.SET_LOADPCDFILE_LOADING,\n    payload: {\n      loadPCDFileLoading,\n    },\n  });\n};\n\nexport const InitAnnotationState = (dispatch: Function) => {\n  dispatch({\n    type: ANNOTATION_ACTIONS.INIT_ALL_STATE,\n    payload: {},\n  });\n};\n\nexport const SetPredictResult = (dispatch: Function, result: any) => {\n  dispatch({\n    type: ANNOTATION_ACTIONS.SET_PREDICT_RESULT,\n    payload: {\n      result,\n    },\n  });\n};\n\nexport const SetPredictResultVisible = (dispatch: Function, visible: boolean) => {\n  dispatch({\n    type: ANNOTATION_ACTIONS.SET_PREDICT_RESULT_VISIBLE,\n    payload: {\n      visible,\n    },\n  });\n};\n\nexport const GetBoxesByID =\n  (selectedBoxTrackID: number, selectedBoxID: string) =>\n  (dispatch: any, getState: any): IPointCloudBox[] => {\n    const { imgList, step } = getState().annotation;\n    return getBoxesByTrackID(imgList, step, selectedBoxTrackID, selectedBoxID);\n  };\n\nexport const PreDataProcess =\n  (params: IPreDataProcessParams) =>\n  (dispatch: any, getState: any): IPointCloudBox[] => {\n    const { annotation } = getState();\n    return annotation?.preDataProcess?.(params) ?? params.dataList;\n  };\n","import { EStepType } from '@/constant';\nimport { IStepInfo } from '@/types/step';\nimport ToolUtils from './ToolUtils';\n\nexport default class StepUtils {\n  /**\n   * 获取当前步骤的步骤配置信息，用于当前标注配置的获取\n   * @export\n   * @param {number} currentStep\n   * @param {IStepInfo[]} stepList\n   * @returns {*}\n   */\n  public static getCurrentStepInfo(currentStep: number, stepList: IStepInfo[]) {\n    const currentStepInfo = this.getStepInfo(currentStep, stepList);\n\n    const useDataSourceStep = [EStepType.QUALITY_INSPECTION, EStepType.MANUAL_CORRECTION].includes(\n      currentStepInfo?.type,\n    );\n\n    /** 人工修正、质检获取 dataSourceStep 作为步骤配置 */\n    if (useDataSourceStep) {\n      return this.getStepInfo(currentStepInfo.dataSourceStep, stepList);\n    }\n\n    return currentStepInfo;\n  }\n\n  /**\n   * 找到指定步骤的数据\n   * @param step 获取的步骤\n   * @param stepList 步骤列表\n   * @returns 步骤配置\n   */\n  public static getStepInfo(step: number, stepList: IStepInfo[]) {\n    return stepList?.filter((info) => info.step === step)[0];\n  }\n\n  /**\n   * 根据toolName判断当前步骤是否为视频工具\n   * @param step 步骤\n   * @param stepList 步骤列表\n   * @returns {Number} 是否为视频工具\n   */\n  public static currentToolIsVideo(step: number, stepList: IStepInfo[]) {\n    const currentStepInfo = StepUtils.getCurrentStepInfo(step, stepList);\n    return ToolUtils.isVideoTool(currentStepInfo?.tool);\n  }\n\n\n  /**\n   * Check for PointCloud\n   * @param step \n   * @param stepList \n   * @returns \n   */\n  public static currentToolIsPointCloud(step: number, stepList: IStepInfo[]) {\n    const currentStepInfo = StepUtils.getCurrentStepInfo(step, stepList);\n    return ToolUtils.isPointCloudTool(currentStepInfo?.tool);\n  }\n}\n","import { IPointCloudBox, PartialIPointCloudBoxList } from '@labelbee/lb-utils';\nimport { useCallback, useContext, useMemo } from 'react';\nimport _ from 'lodash';\nimport { PointCloudContext } from '../PointCloudContext';\nimport { EToolName, cAnnotation } from '@labelbee/lb-annotation';\nimport { useHistory } from './useHistory';\nimport { usePolygon } from './usePolygon';\n\nconst { ESortDirection } = cAnnotation;\n\n/** Actions for single selected box */\nexport const useSingleBox = () => {\n  const {\n    pointCloudBoxList,\n    setPointCloudResult,\n    topViewInstance,\n    backViewInstance,\n    sideViewInstance,\n    selectedIDs,\n    selectedID,\n    mainViewInstance,\n    setSelectedIDs,\n    syncAllViewPointCloudColor,\n    polygonList,\n    pointCloudPattern,\n  } = useContext(PointCloudContext);\n  const { selectedPolygon, updateSelectedPolygon, updatePolygonValidByID, deletePolygon } =\n    usePolygon();\n\n  const { pushHistoryWithList } = useHistory();\n\n  /** Returns { info: selected box, index: selected box index } */\n  const selectedBox = useMemo(() => {\n    const boxIndex = pointCloudBoxList.findIndex((i: { id: string }) => i.id === selectedID);\n    if (boxIndex > -1) {\n      return { info: pointCloudBoxList[boxIndex], index: boxIndex };\n    }\n  }, [selectedID, pointCloudBoxList]);\n\n  /** Use Partial<IPointCloudBox> to update selected box */\n  const updateSelectedBox = useCallback(\n    (params: Partial<IPointCloudBox>) => {\n      if (selectedBox?.info) {\n        pointCloudBoxList.splice(selectedBox.index, 1, _.merge(selectedBox.info, params));\n        const newPointCloudBoxList = _.cloneDeep(pointCloudBoxList);\n        setPointCloudResult(newPointCloudBoxList);\n        pushHistoryWithList({ pointCloudBoxList: newPointCloudBoxList });\n        return newPointCloudBoxList;\n      }\n\n      return pointCloudBoxList;\n    },\n    [selectedID, pointCloudBoxList],\n  );\n\n  /** Use Partial<IPointCloudBox> to update box by ID  */\n  const updateBoxByID = useCallback(\n    (params: Partial<IPointCloudBox>, id: string) => {\n      const boxIndex = pointCloudBoxList.findIndex((v) => v.id === id);\n\n      if (boxIndex > -1) {\n        pointCloudBoxList.splice(boxIndex, 1, _.merge(pointCloudBoxList[boxIndex], params));\n        const newPointCloudBoxList = _.cloneDeep(pointCloudBoxList);\n        setPointCloudResult(newPointCloudBoxList);\n        return newPointCloudBoxList;\n      }\n      return pointCloudBoxList;\n    },\n    [pointCloudBoxList],\n  );\n\n  /**\n   * Change all polygonView Valid.\n   */\n  const changePolygonViewValid = useCallback(\n    (id: string) => {\n      topViewInstance?.pointCloud2dOperation.setPolygonValidAndRender(id, true);\n      sideViewInstance?.pointCloud2dOperation.setPolygonValidAndRender(id, true);\n      backViewInstance?.pointCloud2dOperation.setPolygonValidAndRender(id, true);\n    },\n    [topViewInstance, sideViewInstance, backViewInstance],\n  );\n\n  /** Toggle selected box‘s validity  */\n  const changeSelectedBoxValid = useCallback(() => {\n    if (selectedBox?.info) {\n      const { id, valid = true } = selectedBox.info;\n\n      // PointCloud\n      const newPointCloudList = updateSelectedBox({ valid: !valid });\n\n      // Async\n      syncAllViewPointCloudColor(newPointCloudList);\n      changePolygonViewValid(id);\n    }\n\n    if (selectedPolygon) {\n      updateSelectedPolygon({ ...selectedPolygon, valid: !selectedPolygon.valid });\n      topViewInstance?.pointCloud2dOperation.setPolygonValidAndRender(selectedPolygon.id, true);\n    }\n  }, [changePolygonViewValid, selectedBox, selectedPolygon]);\n\n  const changeValidByID = useCallback(\n    (id: string) => {\n      const boxInfo = pointCloudBoxList.find((v) => v.id === id);\n\n      if (boxInfo) {\n        const { id, valid = true } = boxInfo;\n\n        // PointCloud\n        const newPointCloudBoxList = updateBoxByID({ valid: !valid }, id);\n\n        changePolygonViewValid(id);\n\n        return newPointCloudBoxList;\n      }\n      updatePolygonValidByID(id);\n    },\n    [changePolygonViewValid, pointCloudBoxList, polygonList],\n  );\n\n  /** PointCloud select next/prev one */\n  const switchToNext = useCallback(\n    (sort = ESortDirection.ascend, manual = false) => {\n      if (!topViewInstance || selectedIDs.length > 1) {\n        return;\n      }\n\n      if (pointCloudPattern !== EToolName.Rect && pointCloudPattern !== EToolName.Polygon) {\n        if (manual) {\n          document.dispatchEvent(\n            new KeyboardEvent('keydown', {\n              keyCode: 9,\n              shiftKey: sort !== ESortDirection.ascend,\n            }),\n          );\n        }\n\n        return;\n      }\n\n      const { pointCloud2dOperation } = topViewInstance;\n\n      const newSelectedIDs = pointCloud2dOperation.switchToNextPolygon(sort);\n      if (newSelectedIDs) {\n        setSelectedIDs(newSelectedIDs);\n      }\n    },\n    [topViewInstance, pointCloudPattern, topViewInstance?.toolInstance],\n  );\n\n  const selectPrevBox = (manual = false) => {\n    switchToNext(ESortDirection.descend, manual);\n  };\n\n  const selectNextBox = (manual = false) => {\n    switchToNext(ESortDirection.ascend, manual);\n  };\n\n  const deletePointCloudBox = (id: string) => {\n    const newPointCloudList = pointCloudBoxList.filter((v) => v.id !== id);\n    setPointCloudResult(newPointCloudList);\n    mainViewInstance?.removeObjectByName(id, 'box');\n    mainViewInstance?.render();\n    syncAllViewPointCloudColor(newPointCloudList);\n  };\n\n  /**\n   * Delete all polygon by hotkey.\n   */\n  const deleteSelectedPointCloudBoxAndPolygon = () => {\n    if (selectedBox) {\n      deletePointCloudBox(selectedBox.info.id);\n      topViewInstance?.pointCloud2dOperation.deletePolygon(selectedBox.info.id);\n    }\n\n    if (selectedPolygon) {\n      deletePolygon(selectedPolygon.id);\n      topViewInstance?.pointCloud2dOperation.deletePolygon(selectedPolygon.id);\n    }\n  };\n\n  /**\n   * According to selectedIDs, return selected pointCloudList\n   * @returns pointCloudList {IPointCloudBoxList}\n   */\n  const selectedBoxes = useMemo(() => {\n    return pointCloudBoxList.filter((i) => selectedIDs.includes(i.id));\n  }, [selectedIDs, pointCloudBoxList]);\n\n  /**\n   * Update point cloud boxes list by updateList\n   * @param updateList {PartialIPointCloudBoxList}\n   */\n  const updateSelectedBoxes = useCallback(\n    (updateList: PartialIPointCloudBoxList) => {\n      const newPointCloudBoxList = _.cloneDeep(pointCloudBoxList);\n      let hasModify = false;\n\n      updateList.forEach((i) => {\n        const index = newPointCloudBoxList.findIndex((p) => p.id === i.id);\n\n        if (index > -1) {\n          const updatedBoxParam = _.merge(newPointCloudBoxList[index], i);\n          newPointCloudBoxList.splice(index, 1, updatedBoxParam);\n          mainViewInstance?.generateBox(updatedBoxParam);\n          hasModify = true;\n        }\n      });\n\n      if (hasModify) {\n        setPointCloudResult(newPointCloudBoxList);\n        pushHistoryWithList({ pointCloudBoxList: newPointCloudBoxList });\n        mainViewInstance?.render();\n        return newPointCloudBoxList;\n      }\n    },\n\n    [selectedIDs, pointCloudBoxList],\n  );\n\n  /**\n   * @param id {string}\n   * @returns pointCloud {IPointCloudBox | undefined }\n   */\n  const getPointCloudByID = useCallback(\n    (id: string) => {\n      return pointCloudBoxList.find((i) => i.id === id);\n    },\n    [pointCloudBoxList],\n  );\n\n  return {\n    selectedBox,\n    updateSelectedBox,\n    changeSelectedBoxValid,\n    changeValidByID,\n    selectNextBox,\n    selectPrevBox,\n    deletePointCloudBox,\n    selectedBoxes,\n    updateSelectedBoxes,\n    getPointCloudByID,\n    deleteSelectedPointCloudBoxAndPolygon,\n  };\n};\n","import { AppProps } from '@/App';\nimport AnnotationView from '@/components/AnnotationView';\nimport PointCloudAnnotationView from '@/components/AnnotationView/pointCloudAnnotationView';\nimport QuestionView from '@/components/LLMToolView/questionView';\nimport { i18n } from '@labelbee/lb-utils';\nimport React, { useImperativeHandle, useState } from 'react';\nimport { I18nextProvider } from 'react-i18next';\nimport { Provider } from 'react-redux';\nimport { AnyAction } from 'redux';\nimport App from './App';\nimport configureStore from './configureStore';\nimport { PageBackward, PageForward, PageJump } from './store/annotation/actionCreators';\nimport { ToolInstance } from './store/annotation/types';\nimport { VideoTagTool } from '@/components/videoPlayer/TagToolInstanceAdaptorI18nProvider';\nimport './index.scss';\nimport { PointCloudProvider } from './components/pointCloudView/PointCloudContext';\nimport { AppState } from './store';\nimport { LabelBeeContext } from '@/store/ctx';\nimport PredictTracking from '@/components/predictTracking';\nimport LLMToolView from '@/components/LLMToolView';\n\nexport const store = configureStore();\n\nconst OutputApp = (props: AppProps, ref: any) => {\n  const [toolInstance, setToolInstance] = useState<ToolInstance>();\n  // 暴露给 ref 的一些方法\n  useImperativeHandle(\n    ref,\n    () => {\n      return {\n        toolInstance,\n        annotationEngine: (store.getState() as AppState).annotation.annotationEngine,\n        pageBackwardActions: () => store.dispatch(PageBackward() as unknown as AnyAction),\n        pageForwardActions: () => store.dispatch(PageForward() as unknown as AnyAction),\n        pageJump: (page: string) => {\n          const imgIndex = ~~page - 1;\n          store.dispatch(PageJump(imgIndex) as unknown as AnyAction);\n        },\n        hello: () => alert(`hello labelBee!!!`),\n      };\n    },\n    [toolInstance],\n  );\n\n  return (\n    <Provider store={store} context={LabelBeeContext}>\n      <I18nextProvider i18n={i18n}>\n        <PointCloudProvider>\n          <App\n            {...props}\n            setToolInstance={(toolInstance) => {\n              setToolInstance(toolInstance);\n              props.onLoad?.({ toolInstance });\n            }}\n          />\n        </PointCloudProvider>\n      </I18nextProvider>\n    </Provider>\n  );\n};\n\nexport default React.forwardRef(OutputApp);\n\nexport {\n  AnnotationView,\n  PointCloudAnnotationView,\n  QuestionView,\n  LLMToolView,\n  i18n,\n  VideoTagTool,\n  PredictTracking,\n};\n\nexport * from './constant';\n\nexport * from './typeTem';\n","// TODO, Temporarily Copy\nexport enum EScribblePattern {\n  Scribble = 1, // 涂抹操作\n  Erase = 2, // 橡皮刷\n}\n\nexport enum EToolName {\n  /** 拉框工具 */\n  Rect = 'rectTool',\n  /** 标签工具 */\n  Tag = 'tagTool',\n  /** 标点工具 */\n  Point = 'pointTool',\n  /** 列表标点工具 */\n  PointMarker = 'pointMarkerTool',\n  /** 前景分割工具 */\n  Segmentation = 'segmentationTool',\n  /** 筛选工具 */\n  Filter = 'filterTool',\n  /** 文本工具 */\n  Text = 'textTool',\n  /** 多边形工具 */\n  Polygon = 'polygonTool',\n  /** 线条 */\n  Line = 'lineTool',\n  /** 列表线条工具 */\n  LineMarker = 'lineMarkerTool',\n  /** 空工具，表示当前没有选择的工具，没有实际的业务逻辑 */\n  Empty = 'emptyTool',\n  /** 文件夹标签工具 */\n  FolderTag = 'folderTagTool',\n  /** 拉框跟踪工具 */\n  RectTrack = 'rectTrackTool',\n  /** 涂抹工具 */\n  ScribbleTool = 'scribbleTool',\n  /** 人脸106工具 */\n  Face = 'faceTool',\n  /** 客户端属性工具 */\n  ClientAttribute = 'clientAttributeTool',\n  /** OCR关联关系工具 */\n  OCRRelation = 'OCRRelationTool',\n  /** 算法分割辅助工具 */\n  SegmentByRect = 'segmentByRectTool',\n  Cuboid = 'cuboidTool',\n  /** 点云多边形工具 */\n  PointCloudPolygon = 'pointCloudPolygon',\n  LLM = 'LLMTool',\n}\n\n// 文本标注类型\nexport enum ETextType {\n  AnyString, // 任意字符\n  Order, // 序号\n  EnglishOnly, // 仅英文\n  NumberOnly, // 仅数字\n  CustomFormat, // 自定义文本格式\n}\n\n/** 文本标注字数上限 */\nexport const TEXT_ATTRIBUTE_MAX_LENGTH = 1000;\n","import RevokeSvg from '@/assets/annotation/toolHotKeyIcon/icon_cencel_kj.svg';\nimport RestoreSvg from '@/assets/annotation/toolHotKeyIcon/icon_reform_kj.svg';\nimport ScaleSvg from '@/assets/annotation/toolHotKeyIcon/icon_loupe_kj.svg';\nimport ScaleShortCutSvg from '@/assets/annotation/toolHotKeyIcon/icon_mouse_middle_kj.svg';\nimport FullScreenSvg from '@/assets/annotation/toolHotKeyIcon/icon_fullView_kj.svg';\nimport RotateSvg from '@/assets/annotation/toolHotKeyIcon/icon_reload_kj.svg';\nimport SetValidSvg from '@/assets/annotation/toolHotKeyIcon/setValid.svg';\nimport BackwardSvg from '@/assets/annotation/toolHotKeyIcon/icon_last_kj.svg';\nimport ForwardSvg from '@/assets/annotation/toolHotKeyIcon/icon_next_kj.svg';\nimport DragWithRightClickSvg from '@/assets/annotation/toolHotKeyIcon/icon_move_kj.svg';\nimport DragWithRightClickShortCutSvg from '@/assets/annotation/toolHotKeyIcon/icon_mouse_right_kj.svg';\nimport DragWithLeftClickSvg from '@/assets/annotation/toolHotKeyIcon/icon_mouse_left_kj.svg';\nimport CopyBackwardResultSvg from '@/assets/annotation/toolHotKeyIcon/icon_copyBackwardResult.svg';\nimport TabChangeSelectedSvg from '@/assets/annotation/toolHotKeyIcon/icon_tab_kj.svg';\nimport TabReverseChangeSelectedSVG from '@/assets/annotation/toolHotKeyIcon/icon_alttab_kj.svg';\nimport IconSaveKj from '@/assets/annotation/toolHotKeyIcon/icon_save_kj.svg';\nimport IconLineSpecialKj from '@/assets/annotation/toolHotKeyIcon/icon_lineSpecial_kj.svg';\nimport IconNoDisplay from '@/assets/annotation/toolHotKeyIcon/icon_noDisplay.svg';\nimport IconEyeLockKj from '@/assets/annotation/toolHotKeyIcon/icon_eyeLock_kj.svg';\nimport IconPlayPause from '@/assets/annotation/toolHotKeyIcon/icon_playPause.svg';\nimport IconFastForward from '@/assets/annotation/toolHotKeyIcon/icon_forward_kj.svg';\nimport IconRewind from '@/assets/annotation/toolHotKeyIcon/icon_back_kj.svg';\nimport IconSpeed from '@/assets/annotation/toolHotKeyIcon/icon_speed_kj.svg';\n\nexport const revoke = {\n  name: 'Undo',\n  icon: RevokeSvg,\n  shortCut: ['Ctrl', 'Z'],\n};\n\nexport const restore = {\n  name: 'Redo',\n  icon: RestoreSvg,\n  shortCut: ['Ctrl', 'Shift', 'Z'],\n};\n\nexport const scale = {\n  name: 'Scale',\n  icon: ScaleSvg,\n  shortCut: [ScaleShortCutSvg],\n};\n\nexport const fullScreen = {\n  name: 'Fullscreen',\n  icon: FullScreenSvg,\n  shortCut: ['F11'],\n};\n\nexport const rotate = {\n  name: 'Rotate',\n  icon: RotateSvg,\n  shortCut: ['R'],\n  noticeInfo: 'ToOriginalStep',\n};\n\nexport const setValid = {\n  name: 'ToggleEffectiveness',\n  icon: SetValidSvg,\n  shortCut: ['Y'],\n};\n\nexport const backward = {\n  name: 'PreviousImage',\n  icon: BackwardSvg,\n  shortCut: ['A'],\n};\n\nexport const forward = {\n  name: 'NextImage',\n  icon: ForwardSvg,\n  shortCut: ['D'],\n};\n\nexport const backwardPage = {\n  name: 'PreviousFolder',\n  icon: BackwardSvg,\n  shortCut: ['Shift', 'A'],\n};\n\nexport const forwardPage = {\n  name: 'NextFolder',\n  icon: ForwardSvg,\n  shortCut: ['Shift', 'D'],\n};\n\nexport const dargWithRightClick = {\n  name: 'Drag',\n  icon: DragWithRightClickSvg,\n  shortCut: [DragWithRightClickShortCutSvg],\n  noticeInfo: 'Press',\n};\n\nexport const dargWithLeftClick = {\n  name: 'Drag',\n  icon: DragWithRightClickSvg,\n  shortCut: ['Space', DragWithLeftClickSvg],\n};\n\nexport const forwardWithEnter = {\n  name: 'Next',\n  icon: ForwardSvg,\n  shortCut: ['Ctrl', 'Enter'],\n};\n\nexport const copyBackwardResult = {\n  name: 'CopyThePrevious',\n  icon: CopyBackwardResultSvg,\n  shortCut: ['ALT', 'C'],\n};\n\nexport const attributeLock = {\n  name: 'SpecifiedAttributesOnly',\n  icon: IconEyeLockKj,\n  shortCut: ['Shift', 'Number'],\n};\n\nexport const attributeClickLock = {\n  name: 'SpecifiedAttributesOnly',\n  icon: IconEyeLockKj,\n  shortCut: ['Shift', DragWithLeftClickSvg],\n};\n\nexport const tabChangeSelected = {\n  name: 'ToggleSelected',\n  icon: TabChangeSelectedSvg,\n  shortCut: ['Tab'],\n};\n\nexport const tabReverseChangeSelected = {\n  name: 'ToggleSelectedReverse',\n  icon: TabReverseChangeSelectedSVG,\n  shortCut: ['Shift', 'Tab'],\n};\n\nexport const hidden = {\n  name: 'HideGraphics',\n  icon: IconNoDisplay,\n  noticeInfo: '',\n  shortCut: ['Z'],\n};\n\nexport const changeSpecialLine = {\n  name: 'ToggleLineParticularity',\n  icon: IconLineSpecialKj,\n  noticeInfo: 'ToSide',\n  shortCut: ['Shift', DragWithLeftClickSvg],\n};\n\nexport const saveResult = {\n  name: 'Save',\n  icon: IconSaveKj,\n  shortCut: ['Ctrl', 'S'],\n};\n\nexport const speed = {\n  name: 'Speed',\n  icon: IconSpeed,\n  shortCut: ['&#8593;', '&#8595;'],\n  shortCutUseHtml: true,\n};\n\nexport const playPause = {\n  name: 'PlayPause',\n  icon: IconPlayPause,\n  shortCut: ['Space'],\n};\n\nexport const forwardForward = {\n  name: 'FastForward',\n  icon: IconFastForward,\n  shortCut: ['&#8594;'],\n  shortCutUseHtml: true,\n};\n\nexport const rewind = {\n  name: 'Rewind',\n  icon: IconRewind,\n  shortCut: ['&#8592;'],\n  shortCutUseHtml: true,\n};\n","export const ANNOTATION_ACTIONS = {\n  INIT_ALL_STATE: '@@INIT_ALL_STATE',\n  UPDATE_TOOL_INSTANCE: '@@UPDATE_TOOL_INSTANCE',\n  UPDATE_IMG_LIST: '@@UPDATE_IMG_LIST',\n  UPDATE_ANNOTATION_CONFIG: '@@UPDATE_ANNOTATION_CONFIG',\n  LOAD_FILE_DATA: '@@LOAD_FILE_DATA',\n  SUBMIT_FILE_DATA: '@@SUBMIT_FILE_DATA',\n  SET_TASK_CONFIG: '@@SET_TASK_CONFIG',\n  INIT_TOOL: '@@INIT_TOOL',\n  SET_TOOL: '@@SET_TOOL',\n  UPDATE_ON_SUBMIT: '@@UPDATE_ON_SUBMIT',\n  UPDATE_ON_SAVE: '@@UPDATE_ON_SAVE',\n  UPDATE_ON_PAGE_CHANGE: '@@UPDATE_ON_PAGE_CHANGE',\n  UPDATE_ON_STEP_CHANGE: '@@UPDATE_ON_STEP_CHANGE',\n  UPDATE_ROTATE: '@@UPDATE_ROTATE',\n  UPDATE_GET_FILE_DATA: '@@UPDATE_GET_FILE_DATA',\n  UPDATE_PAGE_SIZE: '@@UPDATE_PAGE_SIZE',\n  UPDATE_LOAD_FILE_LIST: '@@UPDATE_LOAD_FILE_LIST',\n  GET_FILE_DATA: '@@GET_FILE_DATA',\n  SET_FILE_DATA: '@@SET_FILE_DATA',\n  COPY_BACKWARD_RESULT: '@@COPY_BACKWARD_RESULT',\n  SET_STEP: '@@SET_STEP',\n  SUBMIT_RESULT: '@@SUBMIT_RESULT',\n  SAVE_RESULT: '@@SAVE_RESULT',\n  SET_BASIC_INDEX: '@@SET_BASIC_INDEX',\n  CALC_STEP_PROGRESS: '@@CALC_STEP_PROGRESS',\n  SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED: '@@SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED',\n  SKIP_BEFORE_PAGE_TURNING: '@@SKIP_BEFORE_PAGE_TURNING',\n  UPDATE_BEFORE_ROTATE: '@@UPDATE_BEFORE_ROTATE',\n  SET_LOADING: '@@SET_LOADING',\n  SET_LOADPCDFILE_LOADING: '@@SET_LOADPCDFILE_LOADING',\n  SET_POINT_CLOUD_LOADING: '@@SET_POINT_CLOUD_LOADING',\n  SET_CHECK_MODE: '@@SET_CHECK_MODE',\n\n  SET_TASK_STEP_LIST: '@@SET_TASK_STEP_LIST',\n\n  UPDATE_ANNOTATION_VALID: '@@UPDATE_ANNOTATION_VALID',\n\n  BATCH_UPDATE_TRACK_ID: '@@BATCH_UPDATE_TRACK_ID',\n\n  BATCH_UPDATE_RESULT_BY_TRACK_ID: '@@BATCH_UPDATE_RESULT_BY_TRACK_ID',\n\n  BATCH_UPDATE_IMG_LIST_RESULT_BY_PREDICT_RESULT:\n    '@@BATCH_UPDATE_IMG_LIST_RESULT_BY_PREDICT_RESULT',\n\n  SET_PREDICT_RESULT_VISIBLE: '@@SET_PREDICT_RESULT_VISIBLE',\n  SET_PREDICT_RESULT: '@@SET_PREDICT_RESULT',\n  SET_HIGHLIGHT_ATTRIBUTE: '@@SET_HIGHLIGHT_ATTRIBUTE',\n  UPDATE_PRE_DATA_PROCESS: '@@UPDATE_PRE_DATA_PROCESS',\n};\n\nexport const IMAGE_ATTRIBUTE_ACTIONS = {\n  UPDATE_IMG_ATTRIBUTE: '@@UPDATE_IMG_ATTRIBUTE',\n  INIT_IMG_ATTRIBUTE: '@@INIT_IMG_ATTRIBUTE',\n};\n\nexport const TOOL_STYLE_ACTIONS = {\n  INIT_TOOL_STYLE_CONFIG: '@@INIT_TOOL_STYLE_CONFIG',\n  UPDATE_TOOL_STYLE_CONFIG: '@@UPDATE_TOOL_STYLE_CONFIG',\n};\n","import { getFormatSize } from '@/components/customResizeHook';\nimport { ESubmitType } from '@/constant';\nimport styleString from '@/constant/styleString';\nimport { ANNOTATION_ACTIONS } from '@/store/Actions';\nimport { IFileItem } from '@/types/data';\nimport { IStepInfo } from '@/types/step';\nimport { jsonParser } from '@/utils';\nimport AnnotationDataUtils from '@/utils/AnnotationDataUtils';\nimport { ConfigUtils } from '@/utils/ConfigUtils';\nimport { composeResult, composeResultWithBasicImgInfo } from '@/utils/data';\nimport StepUtils from '@/utils/StepUtils';\nimport ToolUtils from '@/utils/ToolUtils';\nimport { AnnotationEngine, CommonToolUtils, ImgUtils, MathUtils } from '@labelbee/lb-annotation';\nimport { i18n, IPointCloudBox, PointCloudUtils } from '@labelbee/lb-utils';\nimport { Modal } from 'antd';\nimport { message } from 'antd/es';\nimport _ from 'lodash';\nimport { SetAnnotationLoading } from './actionCreators';\nimport { AnnotationActionTypes, AnnotationState } from './types';\nimport { EToolName } from '@/data/enums/ToolType';\n\nexport const getStepConfig = (stepList: any[], step: number) =>\n  stepList.find((i) => i.step === step);\n\nconst initialState: AnnotationState = {\n  annotationEngine: null,\n  toolInstance: null,\n  imgList: [],\n  config: '{}',\n  imgIndex: -1,\n  basicIndex: 0,\n  imgPageSize: 1,\n  step: 1,\n  stepList: [],\n  imgNode: new Image(),\n  basicResultList: [],\n  resultList: [],\n  stepProgress: 0,\n  loading: false,\n  loadPCDFileLoading: true,\n  triggerEventAfterIndexChanged: false,\n\n  pointCloudLoading: false,\n  checkMode: false,\n  predictionResult: [],\n  predictionResultVisible: false,\n  highlightAttribute: '',\n};\n\n/**\n * 获取当前文件列表的总页数\n * @param state\n */\nexport const getTotalPage = (state: AnnotationState) => {\n  const { imgList, imgPageSize } = state;\n  return Math.ceil(imgList.length / imgPageSize);\n};\n\nconst calcStepProgress = (fileList: any[], step: number) =>\n  fileList.reduce((pre, i) => {\n    if (i) {\n      const resultStr = i.result;\n      const resultObject = jsonParser(resultStr);\n      if (resultObject[`step_${step}`]) {\n        return pre + 1;\n      }\n    }\n    return pre;\n  }, 0) / fileList.length;\n\nconst updateToolInstance = (annotation: AnnotationState, imgNode: HTMLImageElement) => {\n  const { step, stepList } = annotation;\n  const stepConfig = StepUtils.getCurrentStepInfo(step, stepList);\n  const config = ConfigUtils.jsonParser(stepConfig.config);\n\n  // 视频工具不支持实例化\n  if (ToolUtils.isVideoTool(stepConfig?.tool)) {\n    return;\n  }\n\n  // TODO: 点云实例化对接\n  if (ToolUtils.isPointCloudTool(stepConfig?.tool)) {\n    return;\n  }\n\n  if (EToolName.LLM === stepConfig?.tool) {\n    return;\n  }\n\n  const container = document.getElementById('toolContainer');\n\n  if (!container) {\n    throw `Not exist dom named id-toolContainer`;\n  }\n\n  const canvasSize = getFormatSize({ width: window.innerWidth, height: window.innerHeight });\n  const annotationEngine = new AnnotationEngine({\n    container,\n    toolName: stepConfig.tool,\n    size: canvasSize,\n    imgNode,\n    config,\n    style: JSON.parse(styleString),\n  });\n\n  return { toolInstance: annotationEngine?.toolInstance, annotationEngine };\n};\n\n/**\n * 初始化imgNode并加载数据\n * @param nextIndex\n * @param nextBasicIndex\n */\nexport const LoadFileAndFileData =\n  (nextIndex: number, nextBasicIndex?: number): any =>\n  async (dispatch: any, getState: any) => {\n    const { stepList, step } = getState().annotation;\n    const currentIsVideo = StepUtils.currentToolIsVideo(step, stepList);\n    const currentIsPointCloud = StepUtils.currentToolIsPointCloud(step, stepList);\n    const currentIsLLM = StepUtils.getCurrentStepInfo(step, stepList)?.tool === EToolName.LLM;\n\n    SetAnnotationLoading(dispatch, true);\n\n    await dispatch(TryGetFileDataByAPI(nextIndex));\n\n    if (currentIsVideo || currentIsPointCloud || currentIsLLM) {\n      dispatch(AfterVideoLoaded(nextIndex));\n      return;\n    }\n\n    dispatch(AfterImageLoaded(nextIndex, nextBasicIndex));\n  };\n\n/**\n * 支持并优先外部传入的获取文件接口\n * @param nextIndex\n */\nconst TryGetFileDataByAPI = (nextIndex: number) => async (dispatch: any, getState: any) => {\n  const { getFileData, imgList } = getState().annotation;\n\n  if (getFileData) {\n    const fileData = await getFileData(imgList[nextIndex], nextIndex);\n\n    dispatch({\n      type: ANNOTATION_ACTIONS.SET_FILE_DATA,\n      payload: {\n        fileData,\n        index: nextIndex,\n      },\n    });\n  }\n};\n\nconst AfterVideoLoaded = (nextIndex: number) => (dispatch: any) => {\n  SetAnnotationLoading(dispatch, false);\n\n  dispatch({\n    type: ANNOTATION_ACTIONS.LOAD_FILE_DATA,\n    payload: {\n      nextIndex,\n    },\n  });\n};\n\nconst AfterImageLoaded =\n  (nextIndex: number, nextBasicIndex?: number) => (dispatch: any, getState: any) => {\n    const { toolInstance, imgList } = getState().annotation;\n\n    const url = imgList?.[nextIndex]?.url;\n    ImgUtils.load(url)\n      .then((imgNode: HTMLImageElement) => {\n        SetAnnotationLoading(dispatch, false);\n\n        dispatch({\n          type: ANNOTATION_ACTIONS.LOAD_FILE_DATA,\n          payload: {\n            imgNode,\n            nextIndex,\n            nextBasicIndex,\n          },\n        });\n      })\n      .catch(() => {\n        SetAnnotationLoading(dispatch, false);\n        toolInstance?.setErrorImg();\n        dispatch({\n          type: ANNOTATION_ACTIONS.LOAD_FILE_DATA,\n          payload: {\n            nextIndex,\n            nextBasicIndex,\n          },\n        });\n      });\n  };\n\nexport const composeResultByToolInstance = ({\n  toolInstance,\n  imgList,\n  imgIndex,\n  stepList,\n  step = 1,\n}: {\n  toolInstance: any;\n  imgList: IFileItem[];\n  imgIndex: number;\n  stepList: IStepInfo[];\n  step?: number;\n}) => {\n  const oldResultString = imgList[imgIndex]?.result || '';\n  const [resultList, basicImgInfo, extraData] = toolInstance?.exportData() ?? [];\n  const customObject = toolInstance?.exportCustomData?.() ?? {};\n\n  const resultWithBasicInfo = composeResultWithBasicImgInfo(oldResultString, basicImgInfo);\n  const newResultString = composeResult(\n    resultWithBasicInfo,\n    { step, stepList },\n    { rect: resultList },\n    customObject,\n  );\n\n  return imgList.map((v, i) => {\n    if (i === imgIndex) {\n      return {\n        ...v,\n        result: newResultString,\n        ...extraData,\n      };\n    }\n    return {\n      ...v,\n    };\n  });\n};\n\nexport const annotationReducer = (\n  state = { ...initialState },\n  action: AnnotationActionTypes,\n): AnnotationState => {\n  switch (action.type) {\n    case ANNOTATION_ACTIONS.INIT_ALL_STATE: {\n      return {\n        ...state,\n        ...initialState,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_TOOL_INSTANCE: {\n      return {\n        ...state,\n        toolInstance: action.payload.toolInstance,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_IMG_LIST: {\n      return {\n        ...state,\n        imgList: action.payload.imgList,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.CALC_STEP_PROGRESS: {\n      const { imgList, step } = state;\n\n      const stepProgress = calcStepProgress(imgList, step);\n\n      return {\n        ...state,\n        stepProgress,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SUBMIT_FILE_DATA: {\n      const { imgList, imgIndex, step, stepList, toolInstance, onSubmit, resultList } = state;\n      if (!toolInstance || !imgList[imgIndex]) {\n        return state;\n      }\n\n      const oldResultString = imgList[imgIndex]?.result || '';\n      const [, basicImgInfo, extraData] = toolInstance?.exportData() ?? [];\n      const customObject = toolInstance?.exportCustomData?.() ?? {};\n\n      const resultWithBasicInfo = composeResultWithBasicImgInfo(oldResultString, basicImgInfo);\n      const newResultString = composeResult(\n        resultWithBasicInfo,\n        { step, stepList },\n        { rect: resultList },\n        customObject,\n      );\n\n      const newImgList = state.imgList.map((v, i) => {\n        if (i === imgIndex) {\n          // Update Result\n          const newResult = AnnotationDataUtils.dataCorrection(\n            newResultString,\n            oldResultString,\n            step,\n            stepList,\n          );\n\n          return {\n            ...v,\n            result: newResult,\n            ...extraData,\n          };\n        }\n        return v;\n      });\n\n      // Just for sync imgList\n      if (action.payload?.submitType === ESubmitType.SyncImgList) {\n        return {\n          ...state,\n          imgList: newImgList,\n        };\n      }\n\n      if (onSubmit) {\n        onSubmit([newImgList[imgIndex]], action.payload?.submitType, imgIndex, newImgList);\n      }\n\n      const stepProgress = calcStepProgress(newImgList, step);\n      return {\n        ...state,\n        stepProgress,\n        imgList: newImgList,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SAVE_RESULT: {\n      const { imgList, imgIndex, onSave } = state;\n      onSave?.(imgList[imgIndex], imgIndex, imgList);\n      return {\n        ...state,\n      };\n    }\n\n    /**\n     * For data storage in dependent states\n     *\n     * Features:\n     * 1. Get Data from ToolInstance (If it use toolInstance)\n     * 2. Filter Data By BasicResultList\n     */\n    case ANNOTATION_ACTIONS.SUBMIT_RESULT: {\n      const { imgList, basicIndex, resultList, toolInstance, basicResultList } = state;\n      if (!toolInstance) {\n        return state;\n      }\n\n      const [exportResult] = toolInstance?.exportData() ?? [];\n      let previousResultList = exportResult;\n\n      if (basicResultList?.length > 0) {\n        const sourceID = basicResultList[basicIndex]?.id;\n        const newResultData = exportResult.map((i: any) => ({ ...i, sourceID }));\n        previousResultList = _.cloneDeep(resultList).filter((i: any) => i.sourceID !== sourceID);\n        previousResultList.push(...newResultData);\n      }\n\n      return {\n        ...state,\n        resultList: previousResultList,\n        imgList,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_BASIC_INDEX: {\n      const {\n        toolInstance,\n        step,\n        imgList,\n        imgIndex,\n        stepList,\n        annotationEngine,\n        resultList,\n        basicResultList,\n      } = state;\n\n      if (!toolInstance || !annotationEngine) {\n        return state;\n      }\n\n      const nextBasicIndex = action.payload.basicIndex;\n      const sourceID = basicResultList[nextBasicIndex]?.id;\n\n      const fileResult = jsonParser(imgList[imgIndex]?.result);\n      const result = (resultList || []).filter((i) => i.sourceID === sourceID);\n\n      const stepConfig = getStepConfig(stepList, step);\n\n      const { dataSourceStep, tool } = stepConfig;\n      const dependStepConfig = getStepConfig(stepList, dataSourceStep);\n      let stepBasicResultList = [];\n\n      if (dataSourceStep && tool) {\n        stepBasicResultList = fileResult[`step_${dataSourceStep}`]?.result;\n\n        if (stepBasicResultList?.length > 0) {\n          annotationEngine?.setBasicInfo(\n            dependStepConfig.tool,\n            stepBasicResultList[nextBasicIndex],\n          );\n          annotationEngine?.launchOperation();\n        } else {\n          annotationEngine?.setBasicInfo(dependStepConfig.tool);\n          annotationEngine?.forbidOperation();\n          message.info(i18n.t('NoDependency'));\n        }\n      }\n\n      toolInstance?.setResult(result);\n      toolInstance?.history.initRecord(result, true);\n\n      return {\n        ...state,\n        basicIndex: nextBasicIndex,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED: {\n      const { triggerEventAfterIndexChanged } = action.payload;\n      return {\n        ...state,\n        triggerEventAfterIndexChanged: !!triggerEventAfterIndexChanged,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.LOAD_FILE_DATA: {\n      const { imgList, step, toolInstance, annotationEngine, stepList } = state;\n      /**\n       * TODO\n       * Before: !toolInstance || !annotationEngine\n       *\n       * The roles of toolInstance and annotationEngine need to be clearly distinguished\n       */\n      if (!toolInstance) {\n        return { ...state, imgIndex: action.payload.nextIndex };\n      }\n\n      const currentStepInfo = StepUtils.getCurrentStepInfo(step, stepList);\n\n      const { nextIndex, imgNode, nextBasicIndex, imgError } = action.payload;\n      const basicIndex = nextBasicIndex ?? 0;\n\n      const fileResult = jsonParser(imgList[nextIndex]?.result);\n\n      const stepResult = fileResult[`step_${currentStepInfo.step}`];\n\n      const isInitData = !stepResult; // 是否为初始化数据\n\n      const basicImgInfo = {\n        rotate: fileResult.rotate ?? 0,\n        valid: fileResult.valid ?? true,\n      };\n\n      if (imgNode && imgError !== true) {\n        annotationEngine?.setImgNode(imgNode, basicImgInfo);\n      } else {\n        // Non-graphical tools to initialize base data\n\n        toolInstance?.setValid(basicImgInfo.valid);\n      }\n\n      const stepConfig = getStepConfig(stepList, currentStepInfo.step);\n\n      const { dataSourceStep, tool } = stepConfig;\n      const dependStepConfig = getStepConfig(stepList, dataSourceStep);\n      const hasDataSourceStep = dataSourceStep && tool;\n      const stepBasicResultList = fileResult[`step_${dataSourceStep}`]?.result ?? [];\n\n      const result = AnnotationDataUtils.getInitialResultList(\n        stepResult?.result,\n        toolInstance,\n        stepConfig,\n        stepBasicResultList,\n        isInitData,\n      );\n\n      annotationEngine?.launchOperation();\n\n      if (hasDataSourceStep) {\n        if (stepBasicResultList?.length > 0) {\n          annotationEngine?.setBasicInfo(dependStepConfig.tool, stepBasicResultList[basicIndex]);\n        } else {\n          // TODO: 禁用绘制交互，有无依赖之间的操作切换\n          annotationEngine?.setBasicInfo(dependStepConfig.tool);\n          annotationEngine?.forbidOperation();\n          message.info(i18n.t('NoDependency'));\n        }\n      }\n\n      // TODO，非查看模式才允许添加数据\n      if (currentStepInfo.tool !== 'check') {\n        const sourceID = stepBasicResultList[basicIndex]?.id ?? '';\n        const resultForBasicIndex = hasDataSourceStep\n          ? result.filter((i: { sourceID: string | number }) =>\n              CommonToolUtils.isSameSourceID(i.sourceID, sourceID),\n            )\n          : result;\n        toolInstance?.history.initRecord(result, true);\n        toolInstance?.setResult(resultForBasicIndex);\n      }\n\n      return {\n        ...state,\n        imgIndex: nextIndex,\n        basicIndex,\n        basicResultList: stepBasicResultList,\n        resultList: result,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_ANNOTATION_CONFIG: {\n      return {\n        ...state,\n        config: action.payload.config ?? '{}',\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_TASK_STEP_LIST: {\n      const { stepList } = action.payload;\n      return {\n        ...state,\n        stepList,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_TASK_CONFIG: {\n      const { stepList, step } = action.payload;\n      return {\n        ...state,\n        stepList,\n        step,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.INIT_TOOL: {\n      const { imgNode } = state;\n      const instance = updateToolInstance(state, imgNode);\n\n      if (instance) {\n        const { toolInstance, annotationEngine } = instance;\n        return {\n          ...state,\n          toolInstance,\n          annotationEngine,\n        };\n      }\n\n      return {\n        ...state,\n      };\n    }\n\n    // react hook tool Proprietary operations\n    case ANNOTATION_ACTIONS.SET_TOOL: {\n      const instance = action.payload?.instance;\n      if (instance) {\n        return {\n          ...state,\n          toolInstance: instance,\n          // TODO It needs to optimize\n          // annotationEngine: {\n          //   toolInstance: instance,\n          // } as any,\n        };\n      }\n\n      return {\n        ...state,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_ON_SUBMIT: {\n      return {\n        ...state,\n        onSubmit: action.payload.onSubmit,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_ON_SAVE: {\n      return {\n        ...state,\n        onSave: action.payload.onSave,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_ON_PAGE_CHANGE: {\n      return {\n        ...state,\n        onPageChange: action.payload.onPageChange,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_PREDICT_RESULT: {\n      return {\n        ...state,\n        predictionResult: action.payload.result,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_PREDICT_RESULT_VISIBLE: {\n      return {\n        ...state,\n        predictionResultVisible: action.payload.visible,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_ON_STEP_CHANGE: {\n      return {\n        ...state,\n        onStepChange: action.payload.onStepChange,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_GET_FILE_DATA: {\n      return {\n        ...state,\n        getFileData: action.payload.getFileData,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_PAGE_SIZE: {\n      return {\n        ...state,\n        pageSize: action.payload.pageSize,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_LOAD_FILE_LIST: {\n      return {\n        ...state,\n        loadFileList: action.payload.loadFileList,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_BEFORE_ROTATE: {\n      return {\n        ...state,\n        beforeRotate: action.payload.beforeRotate,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_PRE_DATA_PROCESS: {\n      return {\n        ...state,\n        preDataProcess: action.payload.preDataProcess,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SKIP_BEFORE_PAGE_TURNING: {\n      return {\n        ...state,\n        skipBeforePageTurning: action.payload.skipBeforePageTurning,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_FILE_DATA: {\n      const { fileData, index } = action.payload;\n      const { imgList } = state;\n      const newImgList = [...imgList];\n      newImgList[index] = { ...newImgList[index], ...fileData };\n\n      return {\n        ...state,\n        imgList: newImgList,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_ROTATE: {\n      const { toolInstance, beforeRotate } = state;\n\n      // DataCheck before rotate.\n      if (beforeRotate) {\n        if (beforeRotate() === false) {\n          return state;\n        }\n      }\n\n      toolInstance?.updateRotate();\n      return state;\n    }\n\n    case ANNOTATION_ACTIONS.UPDATE_ANNOTATION_VALID: {\n      const { toolInstance } = state;\n      const valid = toolInstance?.valid ?? true;\n\n      Modal.destroyAll();\n      Modal.confirm({\n        content: i18n.t(valid ? 'updateValidFromValidToInValid' : 'updateValidFromInValidToValid'),\n        onOk: () => {\n          toolInstance?.setValid(!valid);\n        },\n        okText: i18n.t('Confirm'),\n        cancelText: i18n.t('Cancel'),\n      });\n\n      return state;\n    }\n\n    case ANNOTATION_ACTIONS.COPY_BACKWARD_RESULT: {\n      const { toolInstance, imgIndex, imgList, step } = state;\n      if (!toolInstance) {\n        return state;\n      }\n\n      if (imgIndex === 0 || imgIndex >= imgList.length) {\n        console.error('无法复制边界外的内容');\n        return state;\n      }\n      const backwardResult = imgList[imgIndex - 1].result;\n      if (!backwardResult) {\n        return state;\n      }\n\n      const newResult = AnnotationDataUtils.copyResultChange(\n        backwardResult,\n        step,\n        imgList[imgIndex].result ?? '',\n      );\n      imgList[imgIndex] = {\n        ...imgList[imgIndex],\n        result: newResult,\n      };\n\n      // 更新当前的结果\n      const fileResult = jsonParser(newResult);\n      const stepResult = fileResult[`step_${step}`];\n      const result = stepResult?.result || [];\n\n      toolInstance?.setResult(result);\n      toolInstance?.history.pushHistory(result);\n\n      /**\n       * Async PointCloud Data.\n       */\n      // @ts-ignore\n      toolInstance?.asyncData?.(imgList[imgIndex]);\n      return {\n        ...state,\n        imgList: [...imgList],\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_STEP: {\n      const { stepList, annotationEngine } = state;\n      const { toStep } = action.payload;\n\n      if (!annotationEngine) {\n        return state;\n      }\n\n      const stepConfig = getStepConfig(stepList, toStep);\n      annotationEngine?.setToolName(stepConfig.tool, stepConfig.config);\n\n      return {\n        ...state,\n        step: toStep,\n        toolInstance: annotationEngine?.toolInstance,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_LOADPCDFILE_LOADING: {\n      const { loadPCDFileLoading } = action.payload;\n\n      return {\n        ...state,\n        loadPCDFileLoading: !!loadPCDFileLoading,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_LOADING: {\n      const { loading } = action.payload;\n\n      return {\n        ...state,\n        loading: !!loading,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_POINT_CLOUD_LOADING: {\n      const { pointCloudLoading } = action.payload;\n\n      return {\n        ...state,\n        pointCloudLoading: !!pointCloudLoading,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_CHECK_MODE: {\n      const { checkMode } = action.payload;\n      return {\n        ...state,\n        checkMode: !!checkMode,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.SET_HIGHLIGHT_ATTRIBUTE: {\n      const { attribute } = action.payload;\n      return {\n        ...state,\n        highlightAttribute: attribute,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.BATCH_UPDATE_TRACK_ID: {\n      const { id, newID, rangeIndex, imgList } = action.payload;\n      const { imgIndex, onSubmit } = state;\n\n      // Record the updated list.\n      const updateImgList: Array<{ newInfo: IFileItem; imgIndex: number }> = [];\n      const newImgList = imgList.map((v: IFileItem, i: number) => {\n        if (MathUtils.isInRange(i, rangeIndex)) {\n          const newInfo = {\n            ...v,\n            result: PointCloudUtils.batchUpdateTrackID({ id, newID, result: v.result }),\n          };\n\n          updateImgList.push({\n            imgIndex: i,\n            newInfo,\n          });\n\n          return newInfo;\n        }\n        return v;\n      });\n\n      // Notify external data changes.\n      if (onSubmit) {\n        onSubmit([newImgList[imgIndex]], ESubmitType.BatchUpdateTrackID, imgIndex, newImgList, {\n          updateImgList,\n        });\n      }\n\n      return {\n        ...state,\n        imgList: newImgList,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.BATCH_UPDATE_RESULT_BY_TRACK_ID: {\n      const { id, newData, rangeIndex } = action.payload;\n      const { imgList, imgIndex, onSubmit } = state;\n      // Record the updated list.\n      const updateImgList: Array<{ newInfo: IFileItem; imgIndex: number }> = [];\n      const newImgList = imgList.map((v, i) => {\n        if (MathUtils.isInRange(i, rangeIndex)) {\n          const newInfo = {\n            ...v,\n            result: PointCloudUtils.batchUpdateResultByTrackID({ id, newData, result: v.result }),\n          };\n\n          updateImgList.push({\n            imgIndex: i,\n            newInfo,\n          });\n\n          return newInfo;\n        }\n        return v;\n      });\n\n      // Notify external data changes.\n      if (onSubmit) {\n        onSubmit([newImgList[imgIndex]], ESubmitType.BatchUpdateTrackID, imgIndex, newImgList, {\n          updateImgList,\n        });\n      }\n\n      return {\n        ...state,\n        imgList: newImgList,\n      };\n    }\n\n    case ANNOTATION_ACTIONS.BATCH_UPDATE_IMG_LIST_RESULT_BY_PREDICT_RESULT: {\n      const { onSubmit, imgList, stepList, step, predictionResult } = state;\n\n      const tmpMap: {\n        [key: number]: IPointCloudBox;\n      } = {};\n\n      predictionResult.forEach((element) => {\n        const { index } = element;\n        tmpMap[index] = _.pick(element, [\n          'center',\n          'width',\n          'height',\n          'depth',\n          'rotation',\n          'id',\n          'attribute',\n          'valid',\n          'trackID',\n        ]);\n      });\n\n      const stepName = `step_${step}`;\n      const updateImgList: Array<{ newInfo: IFileItem; imgIndex: number }> = [];\n\n      const nextImgList = imgList.map((element, index) => {\n        if (tmpMap[index]) {\n          const elementResult =\n            element.result === '{}'\n              ? jsonParser(composeResult('', { step, stepList }, { rect: [] }, {}))\n              : jsonParser(element.result);\n\n          elementResult[stepName].result.push(tmpMap[index]);\n\n          const newInfo = {\n            ...element,\n            result: JSON.stringify(elementResult),\n          };\n\n          updateImgList.push({\n            imgIndex: index,\n            newInfo,\n          });\n\n          return newInfo;\n        }\n        return element;\n      });\n\n      onSubmit?.(nextImgList, ESubmitType.BatchUpdateImgList, -1, nextImgList, {\n        updateImgList,\n      });\n      return {\n        ...state,\n        imgList: nextImgList,\n      };\n    }\n\n    // eslint-disable-next-line no-fallthrough\n    default:\n      return state;\n  }\n};\n","import {\n  IPointCloudBox,\n  IPointCloudBoxList,\n  IPointCloudSphere,\n  IPointCloudSphereList,\n  IPolygonData,\n  ILine,\n  IPointCloudSegmentation,\n} from '@labelbee/lb-utils';\nimport { useContext } from 'react';\nimport { PointCloudContext } from '../PointCloudContext';\n\nexport const useHistory = () => {\n  const {\n    history,\n    setPointCloudResult,\n    setSelectedIDs,\n    pointCloudBoxList,\n    pointCloudSphereList,\n    setPointCloudSphereList,\n    mainViewInstance,\n    topViewInstance,\n    polygonList,\n    setPolygonList,\n    lineList,\n    setLineList,\n    syncAllViewPointCloudColor,\n    segmentation,\n  } = useContext(PointCloudContext);\n\n  const addHistory = ({\n    newBoxParams,\n    newPolygon,\n    newLine,\n    newSphereParams,\n  }: {\n    newBoxParams?: IPointCloudBox;\n    newPolygon?: IPolygonData;\n    newLine?: ILine;\n    newSphereParams?: IPointCloudSphere;\n  }) => {\n    const historyRecord = {\n      pointCloudBoxList,\n      polygonList,\n      lineList,\n      pointCloudSphereList,\n    };\n\n    if (newBoxParams) {\n      historyRecord.pointCloudBoxList = pointCloudBoxList.concat(newBoxParams);\n    }\n\n    if (newPolygon) {\n      historyRecord.polygonList = polygonList.concat(newPolygon);\n    }\n    if (newLine) {\n      historyRecord.lineList = lineList.concat(newLine);\n    }\n\n    if (newSphereParams) {\n      historyRecord.pointCloudSphereList = pointCloudSphereList.concat(newSphereParams);\n    }\n\n    history.pushHistory(historyRecord);\n  };\n\n  const pushHistoryWithList = (\n    params: Partial<{\n      pointCloudBoxList: IPointCloudBoxList;\n      polygonList: IPolygonData[];\n      lineList: ILine[];\n      pointCloudSphereList: IPointCloudSphereList;\n      segmentation: IPointCloudSegmentation[];\n    }>,\n  ) => {\n    const historyRecord = {\n      pointCloudBoxList,\n      polygonList,\n      lineList,\n      pointCloudSphereList,\n      segmentation,\n    };\n\n    if (params.pointCloudBoxList) {\n      historyRecord.pointCloudBoxList = params.pointCloudBoxList;\n    }\n\n    if (params.polygonList) {\n      historyRecord.polygonList = params.polygonList;\n    }\n\n    if (params.lineList) {\n      historyRecord.lineList = params.lineList;\n    }\n\n    if (params.pointCloudSphereList) {\n      historyRecord.pointCloudSphereList = params.pointCloudSphereList;\n    }\n\n    if (params.segmentation) {\n      historyRecord.segmentation = params.segmentation;\n    }\n\n    history.pushHistory(historyRecord);\n  };\n  const pushHistoryUnderUpdateLine = (line: ILine) => {\n    const selectedLine = lineList.find((v) => v.id === line.id);\n    if (selectedLine) {\n      const newLineList = lineList.map((v) => {\n        if (v.id === line.id) {\n          return line;\n        }\n        return {\n          ...v,\n        };\n      });\n      history.pushHistory({\n        lineList: newLineList,\n      });\n      setLineList(newLineList);\n    }\n  };\n\n  const pushHistoryUnderUpdatePolygon = (polygon: IPolygonData) => {\n    const selectedPolygon = polygonList.find((v) => v.id === polygon.id);\n\n    if (selectedPolygon) {\n      const newPolygonList = polygonList.map((v) => {\n        if (v.id === polygon.id) {\n          return polygon;\n        }\n        return {\n          ...v,\n        };\n      });\n      history.pushHistory({\n        pointCloudBoxList,\n        polygonList: newPolygonList,\n      });\n      setPolygonList(newPolygonList);\n    }\n  };\n\n  const initHistory = ({\n    pointCloudBoxList,\n    polygonList,\n    pointCloudSphereList,\n  }: {\n    pointCloudBoxList: IPointCloudBoxList;\n    polygonList: IPolygonData[];\n    lineList: ILine[];\n    pointCloudSphereList: IPointCloudSphereList;\n  }) => {\n    history.initRecord({ pointCloudBoxList, polygonList, pointCloudSphereList, lineList }, true);\n  };\n\n  const updatePointCloud = (params?: {\n    pointCloudBoxList: IPointCloudBoxList;\n    polygonList: IPolygonData[];\n    lineList: ILine[];\n    pointCloudSphereList: IPointCloudSphereList;\n  }) => {\n    if (!params) {\n      return;\n    }\n\n    const {\n      pointCloudBoxList: newPointCloudBoxList = [],\n      polygonList: newPolygonList = [],\n      lineList: newLineList = [],\n      pointCloudSphereList: newPointCloudSphereList = [],\n    } = params;\n\n    if (newPointCloudBoxList) {\n      if (pointCloudBoxList.length !== newPointCloudBoxList.length) {\n        setSelectedIDs();\n      }\n\n      mainViewInstance?.clearAllBox();\n\n      // Add Init Box\n      mainViewInstance?.generateBoxes(newPointCloudBoxList);\n\n      setPointCloudResult(newPointCloudBoxList);\n      syncAllViewPointCloudColor(newPointCloudBoxList);\n    }\n\n    if (newPointCloudSphereList) {\n      if (pointCloudSphereList.length !== newPointCloudSphereList.length) {\n        setSelectedIDs();\n      }\n\n      mainViewInstance?.clearAllSphere();\n\n      mainViewInstance?.generateSpheres(newPointCloudSphereList);\n\n      setPointCloudSphereList(newPointCloudSphereList);\n    }\n\n    if (newPolygonList) {\n      setPolygonList(newPolygonList);\n    }\n\n    if (newLineList) {\n      setLineList(newLineList);\n    }\n\n    topViewInstance?.updatePolygonList(newPointCloudBoxList ?? [], newPolygonList ?? []);\n    topViewInstance?.updateLineList(newLineList ?? []);\n    topViewInstance?.updatePointList(newPointCloudSphereList);\n  };\n\n  const redo = () => {\n    updatePointCloud(history.redo());\n  };\n\n  const undo = () => {\n    updatePointCloud(history.undo());\n  };\n\n  return {\n    addHistory,\n    pushHistoryWithList,\n    initHistory,\n    pushHistoryUnderUpdatePolygon,\n    pushHistoryUnderUpdateLine,\n    redo,\n    undo,\n  };\n};\n","/**\n * @file MapStateToProps set\n * @createdate 2022-07-19\n * @author Ron <ron.f.luo@gmail.com>\n */\nimport { AppState } from '../index';\nimport { IFileItem } from '@/types/data';\nimport StepUtils from '@/utils/StepUtils';\nimport { IStepInfo } from '@/types/step';\nimport { jsonParser } from '@/utils';\n\nexport const aMapStateToProps = (state: AppState) => {\n  const {\n    annotation: { imgList, imgIndex },\n  } = state;\n  const currentData = imgList[imgIndex] ?? {};\n\n  return {\n    currentData,\n  };\n};\n\nexport interface IAnnotationStateProps {\n  currentData: IFileItem;\n}\n\nexport interface IA2MapStateProps extends IAnnotationStateProps {\n  imgList: IFileItem[];\n  stepInfo: IStepInfo;\n  config: any;\n  imgIndex: number;\n  configString: string; // Easy for users to listener.\n  highlightAttribute: string;\n  loadPCDFileLoading: boolean;\n}\n\nexport const a2MapStateToProps = (state: AppState) => {\n  const {\n    annotation: { imgList, imgIndex, highlightAttribute, loadPCDFileLoading },\n  } = state;\n  const currentData = imgList[imgIndex] ?? {};\n  const stepInfo = StepUtils.getCurrentStepInfo(state.annotation?.step, state.annotation?.stepList);\n\n  return {\n    currentData,\n    imgIndex,\n    imgList,\n    stepInfo,\n    config: jsonParser(stepInfo?.config),\n    configString: stepInfo?.config,\n    highlightAttribute,\n    loadPCDFileLoading,\n  };\n};\n","import { useLayoutEffect, useMemo } from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport type { BasicTarget } from '../utils/dom';\nimport { getTargetElement } from '../utils/dom';\nimport useRafState from './useRafState';\nimport { debounce } from 'lodash';\ninterface Size {\n  width: number;\n  height: number;\n}\n\nfunction useSize(target: BasicTarget): Size {\n  const [state, setState] = useRafState<Size>(() => {\n    const el = getTargetElement(target);\n    return {\n      width: ((el || {}) as HTMLElement).clientWidth ?? 0,\n      height: ((el || {}) as HTMLElement).clientHeight ?? 0,\n    };\n  });\n\n  const onChangeSize = useMemo(() => {\n    return debounce((entry) => {\n      setState({\n        width: entry.target.clientWidth ?? 0,\n        height: entry.target.clientHeight ?? 0,\n      });\n    }, 100);\n  }, []);\n\n  useLayoutEffect(() => {\n    const el = getTargetElement(target);\n    if (!el) {\n      return () => {};\n    }\n\n    const resizeObserver = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n      entries.forEach((entry: ResizeObserverEntry) => {\n        onChangeSize(entry);\n      });\n    });\n\n    resizeObserver.observe(el as HTMLElement);\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [target]);\n\n  return state;\n}\n\nexport default useSize;\n","/**\n * @file Point cloud interface for crud\n * @author Glenfiddish <edwinlee0927@hotmail.com>\n * @createdate 2022-08-17\n */\nimport {\n  PointCloudAnnotation,\n  PointCloud,\n  MathUtils,\n  getCuboidFromPointCloudBox,\n  EPointCloudName,\n} from '@labelbee/lb-annotation';\nimport {\n  IPointCloudBox,\n  IPointCloudSphere,\n  EPerspectiveView,\n  PointCloudUtils,\n  IPolygonPoint,\n  IPointUnit,\n  UpdatePolygonByDragList,\n  ILine,\n  DEFAULT_SPHERE_PARAMS,\n  IDefaultSize,\n  IPolygonData,\n} from '@labelbee/lb-utils';\nimport { useContext } from 'react';\nimport { PointCloudContext } from '../PointCloudContext';\nimport { useSingleBox } from './useSingleBox';\nimport { useSphere } from './useSphere';\nimport { ISize } from '@/types/main';\nimport _ from 'lodash';\nimport { useDispatch, useSelector } from '@/store/ctx';\nimport { AppState } from '@/store';\nimport StepUtils from '@/utils/StepUtils';\nimport { jsonParser } from '@/utils';\nimport {\n  PreDataProcess,\n  SetPointCloudLoading,\n  SetLoadPCDFileLoading,\n} from '@/store/annotation/actionCreators';\nimport { message } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from './useHistory';\nimport { usePolygon } from './usePolygon';\nimport { IFileItem } from '@/types/data';\nimport { ICoordinate } from '@labelbee/lb-utils/src/types/common';\n\nconst DEFAULT_SCOPE = 5;\nconst DEFAULT_RADIUS = 90;\n\n// leave a little margin when intelligentFit\nconst INTELLIGENT_FIT_MARGIN = 0.01;\n\nconst PointCloudView = {\n  '3D': '3D',\n  Top: 'Top',\n  Side: 'Side',\n  Back: 'Back',\n};\n\nexport const topViewPoint2PointCloud = (\n  newPoint: any,\n  size: ISize,\n  pointCloud: PointCloud,\n  selectedPointCloudSphere?: IPointCloudSphere,\n  defaultValue?: { [v: string]: any },\n) => {\n  const { x: realX, y: realY } = PointCloudUtils.transferCanvas2World(newPoint, size);\n  const { defaultZ } = DEFAULT_SPHERE_PARAMS;\n\n  const newPosition = {\n    center: {\n      x: realX,\n      y: realY,\n      z: defaultZ,\n    },\n    id: newPoint.id,\n  };\n\n  const sphereParams: IPointCloudSphere = selectedPointCloudSphere\n    ? {\n        ...selectedPointCloudSphere,\n        ...newPosition,\n      }\n    : {\n        ...newPosition,\n        attribute: '',\n        valid: true,\n      };\n\n  if (defaultValue) {\n    Object.assign(sphereParams, defaultValue);\n  }\n  return sphereParams;\n};\n\nexport const topViewPolygon2PointCloud = (\n  newPolygon: any,\n  size: ISize,\n  pointCloud?: PointCloud,\n  selectedPointCloudBox?: IPointCloudBox,\n  defaultValue?: { [v: string]: any },\n  intelligentFit?: boolean,\n) => {\n  let worldPointList = newPolygon.pointList.map((v: any) =>\n    PointCloudUtils.transferCanvas2World(v, size),\n  );\n  let z = 0;\n  let depth = 1;\n  let extraData = {};\n\n  // Init PointCloud Data\n  if (pointCloud) {\n    const zInfo = pointCloud.getSensesPointZAxisInPolygon(\n      worldPointList,\n      undefined,\n      intelligentFit,\n    );\n    if (intelligentFit && zInfo.fittedCoordinates.length > 0) {\n      worldPointList = zInfo.fittedCoordinates;\n    }\n    z = (zInfo.maxZ + zInfo.minZ) / 2;\n    depth = zInfo.maxZ - zInfo.minZ;\n    extraData = {\n      count: zInfo.zCount,\n    };\n  }\n\n  const [point1, point2, point3] = worldPointList;\n  const centerPoint = MathUtils.getLineCenterPoint([point1, point3]);\n  const height = MathUtils.getLineLength(point1, point2);\n  const width = MathUtils.getLineLength(point2, point3);\n  const rotation = MathUtils.getRadiusFromQuadrangle(newPolygon.pointList);\n\n  if (selectedPointCloudBox) {\n    z = selectedPointCloudBox.center.z;\n    depth = selectedPointCloudBox.depth;\n  }\n\n  const newPosition = {\n    center: {\n      x: centerPoint.x,\n      y: centerPoint.y,\n      z,\n    },\n    width: intelligentFit ? width + INTELLIGENT_FIT_MARGIN : width,\n    height: intelligentFit ? height + INTELLIGENT_FIT_MARGIN : height,\n    depth,\n    rotation,\n    id: newPolygon.id,\n  };\n\n  /** TrackID will append before it pushed */\n  const boxParams: Omit<IPointCloudBox, 'trackID'> = selectedPointCloudBox\n    ? {\n        ...selectedPointCloudBox,\n        ...newPosition,\n        ...extraData,\n      }\n    : {\n        // Init Data\n        ...newPosition,\n        attribute: '',\n        valid: true,\n        ...extraData,\n      };\n\n  if (defaultValue) {\n    Object.assign(boxParams, defaultValue);\n  }\n\n  // Polygon coordinates after fitting\n  const newPointList = worldPointList.map((v: ICoordinate) =>\n    PointCloudUtils.transferWorld2Canvas(v, size),\n  );\n\n  return { boxParams, newPointList };\n};\n\nconst sideViewPoint2PointCloud = (\n  newPoint: any,\n  originPoint: any,\n  selectedSphere: IPointCloudSphere,\n) => {\n  // 2D centerPoint => 3D x & z\n\n  const offset = {\n    x: newPoint.x - originPoint.x,\n    y: newPoint.y - originPoint.y,\n  };\n\n  /**\n   * The key of sideView change is x & z, y isn't used.\n   */\n  return {\n    ...selectedSphere,\n    center: {\n      x: selectedSphere.center.x - offset.x,\n      y: selectedSphere.center.y,\n      z: selectedSphere.center.z - offset.y,\n    },\n  };\n};\nconst sideViewPolygon2PointCloud = (\n  newPolygon: any,\n  originPolygon: any,\n  selectedPointCloudBox: IPointCloudBox,\n  pointCloudInstance: PointCloud,\n) => {\n  const [point1, point2, point3] = newPolygon.pointList;\n  const [op1, op2, op3] = originPolygon.pointList;\n\n  // 2D centerPoint => 3D x & z\n  const newCenterPoint = MathUtils.getLineCenterPoint([point1, point3]);\n  const oldCenterPoint = MathUtils.getLineCenterPoint([op1, op3]);\n\n  const offset = {\n    x: newCenterPoint.x - oldCenterPoint.x,\n    y: newCenterPoint.y - oldCenterPoint.y,\n  };\n\n  /**\n   * The key of sideView change is x & z, y isn't used.\n   */\n  const offsetCenterPoint = {\n    x: offset.x,\n    y: 0,\n    z: newCenterPoint.y - oldCenterPoint.y,\n  };\n\n  // 2D height => 3D depth\n  const height = MathUtils.getLineLength(point1, point2);\n  const oldHeight = MathUtils.getLineLength(op1, op2);\n  const offsetHeight = height - oldHeight; // 3D depth\n\n  // 2D width => 3D width\n  const width = MathUtils.getLineLength(point2, point3);\n  const oldWidth = MathUtils.getLineLength(op2, op3);\n  const offsetWidth = width - oldWidth; // 3D width\n\n  const { newBoxParams } = pointCloudInstance.getNewBoxBySideUpdate(\n    offsetCenterPoint,\n    offsetWidth,\n    offsetHeight,\n    selectedPointCloudBox,\n  );\n\n  return newBoxParams;\n};\n\nconst backViewPoint2PointCloud = (\n  newPoint: any,\n  originPoint: any,\n  selectedSphere: IPointCloudSphere,\n) => {\n  // 2D centerPoint => 3D y & z\n\n  const offset = {\n    x: newPoint.x - originPoint.x,\n    y: newPoint.y - originPoint.y,\n  };\n\n  /**\n   * The key of sideView change is x & z, y isn't used.\n   */\n\n  return {\n    ...selectedSphere,\n    center: {\n      x: selectedSphere.center.x,\n      y: selectedSphere.center.y - offset.x,\n      z: selectedSphere.center.z - offset.y,\n    },\n  };\n};\nconst backViewPolygon2PointCloud = (\n  newPolygon: any,\n  originPolygon: any,\n  selectedPointCloudBox: IPointCloudBox,\n  pointCloudInstance: PointCloud,\n) => {\n  // Notice. The sort of polygon is important.\n  const [point1, point2, point3] = newPolygon.pointList;\n  const [op1, op2, op3] = originPolygon.pointList;\n\n  // 2D centerPoint => 3D x & z\n  const newCenterPoint = MathUtils.getLineCenterPoint([point1, point3]);\n  const oldCenterPoint = MathUtils.getLineCenterPoint([op1, op3]);\n\n  const offset = {\n    x: newCenterPoint.x - oldCenterPoint.x,\n    y: newCenterPoint.y - oldCenterPoint.y,\n  };\n\n  const offsetCenterPoint = {\n    x: offset.x,\n    y: 0, // Not be used.\n    z: newCenterPoint.y - oldCenterPoint.y,\n  };\n\n  // 2D height => 3D depth\n  const height = MathUtils.getLineLength(point1, point2);\n  const oldHeight = MathUtils.getLineLength(op1, op2);\n  const offsetHeight = height - oldHeight; // 3D depth\n\n  // 2D width => 3D width\n  const width = MathUtils.getLineLength(point2, point3);\n  const oldWidth = MathUtils.getLineLength(op2, op3);\n  const offsetWidth = width - oldWidth; // 3D width\n\n  let { newBoxParams } = pointCloudInstance.getNewBoxByBackUpdate(\n    offsetCenterPoint,\n    offsetWidth,\n    offsetHeight,\n    selectedPointCloudBox,\n  );\n\n  return newBoxParams;\n};\n/**\n *\n * @param sphereParams\n * @param newPoint\n * @param sideViewInstance\n * @param url\n * todo: need to be merged with func synchronizeSideView\n */\n\nexport const syncSideViewByPoint = (\n  sphereParams: IPointCloudSphere,\n  newPoint: IPointUnit,\n  sideViewInstance: PointCloudAnnotation | undefined,\n  url: string,\n  config?: any,\n) => {\n  if (!sideViewInstance) {\n    return;\n  }\n\n  const { toolInstance, pointCloudInstance } = sideViewInstance;\n\n  // Create PointCloud\n  pointCloudInstance.loadPCDFile(url, config?.radius ?? DEFAULT_RADIUS);\n  const { cameraPositionVector } = pointCloudInstance.updateOrthoCameraBySphere(\n    sphereParams,\n    EPerspectiveView.Left,\n  );\n\n  pointCloudInstance.setInitCameraPosition(cameraPositionVector);\n\n  const { point2d, zoom } = pointCloudInstance.getSphereSidePoint2DCoordinate(sphereParams);\n\n  pointCloudInstance.camera.zoom = zoom;\n  pointCloudInstance.camera.updateProjectionMatrix();\n  pointCloudInstance.render();\n\n  // Update PolygonView to default zoom and currentPos.\n  toolInstance.initPosition();\n  toolInstance.zoomChangeOnCenter(zoom);\n  toolInstance.setResult([\n    {\n      ...newPoint,\n      ...point2d,\n      valid: sphereParams.valid,\n      textAttribute: '',\n      attribute: sphereParams.attribute,\n    },\n  ]);\n  toolInstance.setSelectedID(newPoint.id);\n};\n/**\n * NewBox synchronize sideView\n * @param boxParams\n * @param newPolygon TODO！ Need to add type\n */\nexport const synchronizeSideView = (\n  boxParams: IPointCloudBox,\n  newPolygon: any,\n  sideViewInstance: PointCloudAnnotation | undefined,\n  url: string,\n) => {\n  if (!sideViewInstance) {\n    return;\n  }\n\n  const { pointCloud2dOperation, pointCloudInstance } = sideViewInstance;\n\n  // Create PointCloud\n  pointCloudInstance.loadPCDFileByBox(url, boxParams, {\n    width: DEFAULT_SCOPE,\n    depth: DEFAULT_SCOPE,\n  });\n  const { cameraPositionVector } = pointCloudInstance.updateOrthoCamera(\n    boxParams,\n    EPerspectiveView.Left,\n  );\n\n  pointCloudInstance.setInitCameraPosition(cameraPositionVector);\n\n  // Create Draw Polygon\n  const { polygon2d, zoom } = pointCloudInstance.getBoxSidePolygon2DCoordinate(boxParams);\n\n  // Synchronize SidePointCloud zoom with PointCloud2dOperation\n  pointCloudInstance.camera.zoom = zoom;\n  pointCloudInstance.camera.updateProjectionMatrix();\n  pointCloudInstance.render();\n\n  // Update PolygonView to default zoom and currentPos.\n  pointCloud2dOperation.initPosition();\n  pointCloud2dOperation.zoomChangeOnCenter(zoom);\n  pointCloud2dOperation.setResultAndSelectedID(\n    [\n      {\n        id: newPolygon.id,\n        valid: boxParams.valid,\n        pointList: polygon2d,\n        textAttribute: '',\n        isRect: true,\n        attribute: boxParams.attribute,\n      },\n    ],\n    newPolygon.id,\n  );\n};\n\n/**\n *\n * @param sphereParams\n * @param newPoint\n * @param backViewInstance\n * @param url\n * todo: need to be merged with func synchronizeBackView\n */\n\nexport const syncBackViewByPoint = (\n  sphereParams: IPointCloudSphere,\n  newPoint: IPointUnit,\n  backViewInstance: PointCloudAnnotation | undefined,\n  url: string,\n  config?: any,\n) => {\n  if (!backViewInstance) {\n    return;\n  }\n\n  const { toolInstance, pointCloudInstance } = backViewInstance;\n\n  // Create PointCloud\n  pointCloudInstance.loadPCDFile(url, config?.radius ?? DEFAULT_RADIUS);\n  const { cameraPositionVector } = pointCloudInstance.updateOrthoCameraBySphere(\n    sphereParams,\n    EPerspectiveView.Back,\n  );\n\n  pointCloudInstance.setInitCameraPosition(cameraPositionVector);\n\n  const { point2d, zoom } = pointCloudInstance.getSphereBackPoint2DCoordinate(sphereParams);\n\n  pointCloudInstance.camera.zoom = zoom;\n  pointCloudInstance.camera.updateProjectionMatrix();\n  pointCloudInstance.render();\n\n  // Update PolygonView to default zoom and currentPos.\n  toolInstance.initPosition();\n  toolInstance.zoomChangeOnCenter(zoom);\n  toolInstance.setResult([\n    {\n      ...newPoint,\n      ...point2d,\n      valid: sphereParams.valid,\n      textAttribute: '',\n      attribute: sphereParams.attribute,\n    },\n  ]);\n  toolInstance.setSelectedID(newPoint.id);\n};\n/**\n * NewBox synchronize backView\n * @param boxParams\n * @param newPolygon TODO！ Need to add type\n */\nexport const synchronizeBackView = (\n  boxParams: IPointCloudBox,\n  newPolygon: any,\n  BackViewInstance: PointCloudAnnotation,\n  url: string,\n) => {\n  if (!BackViewInstance) {\n    return;\n  }\n\n  const {\n    pointCloud2dOperation: backPointCloudPolygonOperation,\n    pointCloudInstance: backPointCloud,\n  } = BackViewInstance;\n\n  // Create PointCloud\n  backPointCloud.loadPCDFileByBox(url, boxParams, { height: DEFAULT_SCOPE, depth: DEFAULT_SCOPE });\n  const { cameraPositionVector } = backPointCloud.updateOrthoCamera(\n    boxParams,\n    EPerspectiveView.Back,\n  );\n\n  backPointCloud.setInitCameraPosition(cameraPositionVector);\n\n  // Create Draw Polygon\n  const { polygon2d, zoom } = backPointCloud.getBoxBackPolygon2DCoordinate(boxParams);\n\n  // Synchronize SidePointCloud zoom with PointCloud2dOperation\n  backPointCloud.camera.zoom = zoom;\n  backPointCloud.camera.updateProjectionMatrix();\n  backPointCloud.render();\n\n  // Update PolygonView to default zoom and currentPos.\n  backPointCloudPolygonOperation.initPosition();\n  backPointCloudPolygonOperation.zoomChangeOnCenter(zoom);\n  backPointCloudPolygonOperation.setResultAndSelectedID(\n    [\n      {\n        id: newPolygon.id,\n        valid: boxParams.valid,\n        pointList: polygon2d,\n        textAttribute: '',\n        isRect: true,\n        attribute: boxParams.attribute,\n      },\n    ],\n    newPolygon.id,\n  );\n};\n\nexport const syncTopViewByPoint = (\n  newSphereParams: IPointCloudSphere,\n  newPoint: any,\n  topViewInstance?: PointCloudAnnotation,\n  mainViewInstance?: PointCloud,\n) => {\n  if (!topViewInstance || !mainViewInstance) {\n    return;\n  }\n  mainViewInstance.generateSphere(newSphereParams);\n  mainViewInstance.updateCameraBySphere(newSphereParams, EPerspectiveView.Top);\n  mainViewInstance.render();\n\n  const { toolInstance, pointCloudInstance } = topViewInstance;\n\n  const { point2d } = pointCloudInstance.getSphereTopPoint2DCoordinate(newSphereParams);\n\n  const newPointList = [...toolInstance.pointList].map((v) =>\n    v.id === newPoint.id\n      ? {\n          ...newPoint,\n          ...point2d,\n          valid: newSphereParams.valid,\n          textAttribute: '',\n          attribute: newSphereParams.attribute,\n        }\n      : v,\n  );\n  toolInstance.setResult(newPointList);\n  toolInstance.setSelectedID(newPoint.id);\n};\n/**\n * NewBox synchronize TopView\n * @param boxParams\n * @param newPolygon TODO！ Need to add type\n */\nexport const synchronizeTopView = (\n  newBoxParams: IPointCloudBox,\n  newPolygon: any,\n  topViewInstance?: PointCloudAnnotation,\n  mainViewInstance?: PointCloud,\n) => {\n  if (!topViewInstance || !mainViewInstance) {\n    return;\n  }\n\n  // Control the 3D view data to create box\n  mainViewInstance.generateBox(newBoxParams, newPolygon.id);\n  mainViewInstance.render();\n\n  const { pointCloud2dOperation, pointCloudInstance } = topViewInstance;\n\n  const { polygon2d } = pointCloudInstance.getBoxTopPolygon2DCoordinate(newBoxParams);\n\n  const newPolygonList = [...pointCloud2dOperation.polygonList];\n  const oldPolygon = newPolygonList.find((v) => v.id === newPolygon.id);\n  if (oldPolygon) {\n    oldPolygon.pointList = polygon2d;\n    oldPolygon.valid = newBoxParams.valid ?? true;\n  } else {\n    newPolygonList.push({\n      id: newPolygon.id,\n      pointList: polygon2d,\n      textAttribute: '',\n      isRect: true,\n      valid: newBoxParams.valid ?? true,\n    });\n  }\n\n  pointCloud2dOperation.setResultAndSelectedID(newPolygonList, newPolygon.id);\n};\n\nexport const usePointCloudViews = () => {\n  const ptCtx = useContext(PointCloudContext);\n  const {\n    topViewInstance,\n    sideViewInstance,\n    backViewInstance,\n    mainViewInstance,\n    addPointCloudBox,\n    addPointCloudSphere,\n    setSelectedIDs,\n    selectedIDs,\n    pointCloudBoxList,\n    pointCloudSphereList,\n    hideAttributes,\n    setHighlight2DDataList,\n  } = ptCtx;\n  const { addHistory, initHistory, pushHistoryUnderUpdatePolygon, pushHistoryUnderUpdateLine } =\n    useHistory();\n  const { selectedPolygon } = usePolygon();\n\n  const { updateSelectedBox, updateSelectedBoxes, getPointCloudByID } = useSingleBox();\n  const { getPointCloudSphereByID, updatePointCloudSphere, selectedSphere } = useSphere();\n  const { currentData, config } = useSelector((state: AppState) => {\n    const { stepList, step, imgList, imgIndex } = state.annotation;\n\n    return {\n      currentData: imgList[imgIndex],\n      config: jsonParser(StepUtils.getCurrentStepInfo(step, stepList).config),\n    };\n  });\n  const dispatch = useDispatch();\n  const { selectedBox } = useSingleBox();\n  const { t } = useTranslation();\n\n  const selectedPointCloudBox = selectedBox?.info;\n\n  if (!topViewInstance || !sideViewInstance || !backViewInstance) {\n    return {\n      topViewAddSphere: () => {},\n      topViewAddBox: () => {},\n      topViewSelectedChanged: () => {},\n      sideViewUpdateBox: () => {},\n      backViewUpdateBox: () => {},\n    };\n  }\n\n  const { pointCloudInstance: topViewPointCloud } = topViewInstance;\n\n  const mainViewGenBox = (boxParams: IPointCloudBox) => {\n    mainViewInstance?.generateBox(boxParams);\n    mainViewInstance?.controls.update();\n    mainViewInstance?.render();\n  };\n\n  const mainViewGenSphere = (sphereParams: IPointCloudSphere) => {\n    mainViewInstance?.generateSphere(sphereParams);\n    mainViewInstance?.controls.update();\n    mainViewInstance?.render();\n  };\n\n  /**\n   *  Top-view create sphere from 2D pointTool\n   */\n  const topViewAddSphere = ({\n    newPoint,\n    size,\n    zoom,\n    trackConfigurable,\n  }: {\n    newPoint: IPointUnit;\n    size: ISize;\n    zoom: number;\n    trackConfigurable?: boolean;\n  }) => {\n    const extraData = {\n      attribute: topViewInstance.toolInstance.defaultAttribute ?? '',\n    };\n\n    if (trackConfigurable === true) {\n      Object.assign(extraData, {\n        trackID: PointCloudUtils.getNextTrackID({\n          imgList: [], // Just calculate by the pointCloudBoxList in current page.\n          extraBoxList: [],\n          extraSphereList: pointCloudSphereList,\n        }),\n      });\n    }\n\n    const sphereParams = topViewPoint2PointCloud(\n      newPoint,\n      size,\n      topViewPointCloud,\n      undefined,\n      extraData,\n    );\n\n    setSelectedIDs(newPoint.id);\n    const newSphereList = addPointCloudSphere(sphereParams);\n    syncPointCloudPoint(PointCloudView.Top, newPoint, sphereParams, zoom, newSphereList, config);\n    addHistory({ newSphereParams: sphereParams });\n  };\n\n  /** Top-view create box from 2D */\n  const topViewAddBox = ({\n    polygon,\n    size,\n    imgList,\n    trackConfigurable,\n    zoom,\n    intelligentFit,\n  }: {\n    polygon: any;\n    size: ISize;\n    imgList: IFileItem[];\n    trackConfigurable?: boolean;\n    zoom: number;\n    intelligentFit?: boolean;\n  }) => {\n    const extraData = {\n      attribute: topViewInstance.toolInstance.defaultAttribute ?? '',\n    };\n\n    if (trackConfigurable === true) {\n      Object.assign(extraData, {\n        trackID: PointCloudUtils.getNextTrackID({\n          imgList: [], // Just calculate by the pointCloudBoxList in current page.\n          extraBoxList: pointCloudBoxList,\n          extraSphereList: pointCloudSphereList,\n        }),\n      });\n    }\n    const polygonOperation = topViewInstance?.toolInstance;\n\n    const newPolygon = { ...polygon };\n    let { boxParams, newPointList } = topViewPolygon2PointCloud(\n      newPolygon,\n      size,\n      topViewPointCloud,\n      undefined,\n      extraData,\n      intelligentFit,\n    );\n\n    const nextResult = dispatch(\n      PreDataProcess({\n        tool: EPointCloudName.PointCloud,\n        dataList: [boxParams],\n        stepConfig: config,\n        action: 'viewUpdateBox',\n      }),\n    ) as unknown as IPointCloudBox[];\n\n    boxParams = nextResult[0];\n\n    // If the count is less than lowerLimitPointsNumInBox, needs to delete it\n    if (\n      config?.lowerLimitPointsNumInBox &&\n      typeof boxParams.count === 'number' &&\n      boxParams.count < config.lowerLimitPointsNumInBox\n    ) {\n      message.info(t('LowerLimitPointsNumInBox', { num: config.lowerLimitPointsNumInBox }));\n      polygonOperation.deletePolygon(boxParams.id);\n      return;\n    }\n\n    if (intelligentFit && newPointList?.length) {\n      newPolygon.pointList = newPointList;\n    }\n\n    const isBoxHidden = hideAttributes.includes(newPolygon.attribute);\n    const newPointCloudList = addPointCloudBox(boxParams);\n    const polygonList = ptCtx?.polygonList ?? [];\n    topViewInstance?.updatePolygonList(newPointCloudList ?? [], polygonList);\n    /** If new box is hidden will not active target point box */\n    if (isBoxHidden) {\n      setSelectedIDs([]);\n    } else {\n      setSelectedIDs(boxParams.id);\n      polygonOperation.selection.setSelectedIDs(newPolygon.id);\n      syncPointCloudViews({\n        omitView: PointCloudView.Top,\n        polygon: newPolygon,\n        boxParams,\n        zoom,\n        newPointCloudBoxList: newPointCloudList,\n      });\n      if (intelligentFit) {\n        synchronizeTopView(boxParams, newPolygon, topViewInstance, mainViewInstance);\n      }\n    }\n\n    addHistory({ newBoxParams: boxParams });\n  };\n\n  /** Top-view selected changed and render to other view */\n  const topViewSelectedChanged = ({\n    newSelectedBox,\n    newPointCloudList,\n    newSelectedSphere,\n    newSphereList,\n  }: {\n    newSelectedBox?: IPointCloudBox;\n    newPointCloudList?: IPointCloudBox[];\n    newSelectedSphere?: IPointCloudSphere;\n    newSphereList?: IPointCloudSphere[];\n  }) => {\n    const operation = topViewInstance?.toolInstance;\n    if (selectedIDs.length === 0 || !operation) {\n      return;\n    }\n    if (newSelectedBox || selectedBox?.info) {\n      const boxParams = newSelectedBox ?? selectedBox?.info;\n      operation?.selection?.setSelectedIDs(selectedIDs[0]);\n      const polygon = operation.selectedPolygon;\n      if (selectedIDs.length === 1 && boxParams) {\n        syncPointCloudViews({\n          omitView: PointCloudView.Top,\n          polygon,\n          boxParams,\n          newPointCloudBoxList: newPointCloudList,\n        });\n        return;\n      }\n    }\n\n    if (newSelectedSphere || selectedSphere) {\n      if (selectedIDs.length === 1) {\n        const sphereParams = newSelectedSphere ?? selectedSphere;\n        operation.setSelectedID(selectedIDs[0]);\n        const point = operation.selectedPoint;\n        if (sphereParams) {\n          syncPointCloudPoint(\n            PointCloudView.Top,\n            point,\n            sphereParams,\n            undefined,\n            newSphereList,\n            config,\n          );\n        }\n      }\n    }\n  };\n\n  /**\n   * Update box from view\n   * @param newPolygon\n   * @param originPolygon\n   * @param fromView Back or Side\n   */\n  const viewUpdateBox = (newPolygon: any, originPolygon: any, fromView: string) => {\n    if (selectedPointCloudBox) {\n      let transfer2PointCloud;\n      let newBoxParams: IPointCloudBox;\n\n      // Switch the right function.\n      switch (fromView) {\n        case PointCloudView.Back:\n          transfer2PointCloud = backViewPolygon2PointCloud;\n          break;\n        case PointCloudView.Side:\n          transfer2PointCloud = sideViewPolygon2PointCloud;\n          break;\n\n        default:\n          transfer2PointCloud = sideViewPolygon2PointCloud;\n          break;\n      }\n\n      newBoxParams = transfer2PointCloud(\n        newPolygon,\n        originPolygon,\n        selectedPointCloudBox,\n        sideViewInstance.pointCloudInstance,\n      );\n\n      const nextResult = dispatch(\n        PreDataProcess({\n          tool: EPointCloudName.PointCloud,\n          dataList: [newBoxParams],\n          stepConfig: config,\n          action: 'viewUpdateBox',\n        }),\n      ) as unknown as IPointCloudBox[];\n      const newBox = nextResult[0];\n      // 如果更新后的box valid没有变化，则不更新当前视图\n      const updateCurrentView = newBoxParams.valid !== newBox.valid;\n\n      newBoxParams = newBox;\n\n      // Update count\n      if (mainViewInstance) {\n        const { count } = mainViewInstance.getSensesPointZAxisInPolygon(\n          getCuboidFromPointCloudBox(newBoxParams).polygonPointList as IPolygonPoint[],\n          [\n            newBoxParams.center.z - newBoxParams.depth / 2,\n            newBoxParams.center.z + newBoxParams.depth / 2,\n          ],\n        );\n\n        newBoxParams = {\n          ...newBoxParams,\n          count,\n        };\n      }\n\n      const newPointCloudBoxList = updateSelectedBox(newBoxParams);\n\n      newBoxParams = newPointCloudBoxList.find(\n        (item) => item.id === newBoxParams.id,\n      ) as IPointCloudBox;\n\n      syncPointCloudViews({\n        omitView: updateCurrentView ? undefined : fromView,\n        polygon: newPolygon,\n        boxParams: newBoxParams,\n        newPointCloudBoxList,\n      });\n\n      return newPointCloudBoxList;\n    }\n  };\n\n  const viewUpdatePoint = (newPoint: IPointUnit, originPoint: IPointUnit, fromView: string) => {\n    if (selectedSphere) {\n      let transfer2PointCloud;\n      let newSphereParams;\n\n      // Switch the right function.\n      switch (fromView) {\n        case PointCloudView.Back:\n          transfer2PointCloud = backViewPoint2PointCloud;\n          break;\n        case PointCloudView.Side:\n          transfer2PointCloud = sideViewPoint2PointCloud;\n          break;\n\n        default:\n          transfer2PointCloud = sideViewPoint2PointCloud;\n          break;\n      }\n\n      newSphereParams = transfer2PointCloud(newPoint, originPoint, selectedSphere);\n\n      const newSphereList = updatePointCloudSphere(newSphereParams);\n      syncPointCloudPoint(fromView, newPoint, newSphereParams, undefined, newSphereList, config);\n      return newSphereList;\n    }\n  };\n  const sideViewUpdatePoint = (newPoint: IPointUnit, originPoint: IPointUnit) => {\n    viewUpdatePoint(newPoint, originPoint, PointCloudView.Side);\n  };\n\n  const backViewUpdatePoint = (newPoint: IPointUnit, originPoint: IPointUnit) => {\n    viewUpdatePoint(newPoint, originPoint, PointCloudView.Back);\n  };\n\n  const sideViewUpdateBox = (newPolygon: any, originPolygon: any) => {\n    viewUpdateBox(newPolygon, originPolygon, PointCloudView.Side);\n  };\n\n  const backViewUpdateBox = (newPolygon: any, originPolygon: any) => {\n    viewUpdateBox(newPolygon, originPolygon, PointCloudView.Back);\n  };\n\n  const topViewUpdateLine = (updateList: ILine, size: ISize) => {\n    // updateList.pointList = updateList.pointList.map((v) =>\n    //   PointCloudUtils.transferCanvas2World(v, size),\n    // );\n\n    pushHistoryUnderUpdateLine(updateList);\n    return;\n  };\n  const topViewUpdatePoint = (updatePoint: IPointUnit, size: ISize) => {\n    const pointCloudSphere = getPointCloudSphereByID(updatePoint.id);\n    const newSphereParams = topViewPoint2PointCloud(\n      updatePoint,\n      size,\n      topViewPointCloud,\n      pointCloudSphere,\n    );\n\n    const newPointCloudSphereList = updatePointCloudSphere(newSphereParams);\n    syncPointCloudPoint(\n      PointCloudView.Top,\n      updatePoint,\n      newSphereParams,\n      undefined,\n      newPointCloudSphereList,\n      config,\n    );\n  };\n  /**\n   * Top view box updated and sync views\n   * @param polygon\n   * @param size\n   */\n  const topViewUpdateBox = (updateList: UpdatePolygonByDragList, size: ISize) => {\n    // If the selected Object is Polygon.\n    if (selectedPolygon) {\n      /**\n       * Notice. The Polygon need to be converted to pointCloud coordinate system for storage.\n       */\n      const polygon = updateList[0].newPolygon;\n      polygon.pointList = polygon.pointList.map((v) =>\n        PointCloudUtils.transferCanvas2World(v, size),\n      );\n\n      pushHistoryUnderUpdatePolygon(updateList[0].newPolygon);\n      return;\n    }\n\n    let updatePointCloudList: IPointCloudBox[] = updateList.map(({ newPolygon: polygon }) => {\n      const pointCloudBox = getPointCloudByID(polygon.id);\n\n      const { boxParams } = topViewPolygon2PointCloud(\n        polygon,\n        size,\n        topViewInstance.pointCloudInstance,\n        pointCloudBox,\n      );\n\n      return boxParams;\n    });\n\n    updatePointCloudList = dispatch(\n      PreDataProcess({\n        tool: EPointCloudName.PointCloud,\n        dataList: updatePointCloudList,\n        stepConfig: config,\n        action: 'viewUpdateBox',\n      }),\n    ) as unknown as IPointCloudBox[];\n\n    /**\n     * If single target updated, use syncPointCloudViews to sync all views and render\n     * If multi targets updated, use updateSelectedBoxes and update highlight by syncAllViewPointCloudColor\n     */\n    if (updatePointCloudList.length === 1) {\n      const { newPolygon: polygon } = updateList[0];\n      const newPointCloudBoxList = updateSelectedBoxes(updatePointCloudList);\n\n      syncPointCloudViews({\n        polygon,\n        boxParams: updatePointCloudList[0],\n        newPointCloudBoxList,\n      });\n    } else {\n      const newPointCloudBoxList = updateSelectedBoxes(updatePointCloudList);\n      if (newPointCloudBoxList) {\n        ptCtx.syncAllViewPointCloudColor(newPointCloudBoxList);\n      }\n    }\n  };\n\n  const updateViewsByDefaultSize = (defaultSize: IDefaultSize) => {\n    if (selectedBox) {\n      const widthDefault = Number(defaultSize.widthDefault)\n      const depthDefault = Number(defaultSize.depthDefault)\n      const heightDefault = Number(defaultSize.heightDefault)\n      const selectedBoxTrackID = selectedBox?.info.trackID;\n      const polygonList = topViewInstance?.toolInstance?.polygonList;\n      const originPolygon = polygonList.find(\n        (v: IPolygonData) => v?.trackID === selectedBoxTrackID,\n      );\n      const size = {\n        width: topViewInstance?.toolInstance?.basicImgInfo?.width,\n        height: topViewInstance?.toolInstance?.basicImgInfo?.height,\n      }\n      const pointsInWorld = originPolygon.pointList.map((p: ICoordinate) => PointCloudUtils.transferCanvas2World(p, size))\n      const newPolygonPoints = MathUtils.getModifiedRectangleCoordinates(pointsInWorld, heightDefault, widthDefault)\n      const point1 = newPolygonPoints[0]\n      const point3 = newPolygonPoints[2]\n      const centerPoint = MathUtils.getLineCenterPoint([point1, point3]);\n      const bottomZ = selectedBox.info.center.z - selectedBox.info.depth / 2\n      // attention: widthDefault means the length of line between point1 and point2,\n      // so the height of box should be widthDefault, as same as in topViewPolygon2PointCloud(\"height = MathUtils.getLineLength(point1, point2)\")\n      const newBoxParams: IPointCloudBox = {\n        ...selectedBox.info,\n        center: {\n          x: centerPoint.x,\n          y: centerPoint.y,\n          z: bottomZ + (depthDefault / 2)\n        },\n        width: widthDefault,\n        height: heightDefault,\n        depth: depthDefault,\n        valid: true,\n      };\n      const newPointCloudBoxList = updateSelectedBoxes([newBoxParams]);\n      syncPointCloudViews({\n        omitView: PointCloudView['3D'],\n        polygon: originPolygon,\n        boxParams: newBoxParams,\n        newPointCloudBoxList,\n      });\n    }\n  };\n  /**\n   * Sync views after adding a point\n   */\n  const syncPointCloudPoint = async (\n    omitView: string,\n    point: any,\n    sphereParams: IPointCloudSphere,\n    zoom?: number,\n    newPointCloudSphereList?: IPointCloudSphere[],\n    config?: any,\n  ) => {\n    const dataUrl = currentData?.url;\n\n    const viewToBeUpdated = {\n      [PointCloudView.Side]: () => {\n        syncSideViewByPoint(sphereParams, point, sideViewInstance, dataUrl, config);\n      },\n      [PointCloudView.Back]: () => {\n        if (backViewInstance) {\n          syncBackViewByPoint(sphereParams, point, backViewInstance, dataUrl, config);\n        }\n      },\n      [PointCloudView.Top]: () => {\n        syncTopViewByPoint(sphereParams, point, topViewInstance, mainViewInstance);\n      },\n    };\n\n    Object.keys(viewToBeUpdated).forEach((key) => {\n      if (key !== omitView) {\n        viewToBeUpdated[key]();\n      }\n    });\n    if (zoom) {\n      mainViewInstance?.updateCameraZoom(zoom);\n    }\n    mainViewGenSphere(sphereParams);\n  };\n  /**\n   * Sync views' data from omit view, regenerate and highlight box on 3D-view\n   * @param omitView\n   * @param polygon\n   * @param boxParams\n   */\n  interface ISyncPointCloudViews {\n    // 如果不传omitView，则同步所有视图\n    omitView?: string;\n    polygon: any;\n    boxParams: IPointCloudBox;\n    zoom?: number;\n    newPointCloudBoxList?: IPointCloudBox[];\n  }\n\n  const syncPointCloudViews = async (params: ISyncPointCloudViews) => {\n    const { omitView, polygon, boxParams, zoom, newPointCloudBoxList } = params;\n\n    const dataUrl = currentData?.url;\n\n    /**\n     * Highlight New Data.\n     */\n    if (newPointCloudBoxList) {\n      // Wait for the mainPointCloudData.\n      await ptCtx.syncAllViewPointCloudColor(newPointCloudBoxList);\n    }\n    const viewToBeUpdated = {\n      [PointCloudView.Side]: () => {\n        synchronizeSideView(boxParams, polygon, sideViewInstance, dataUrl);\n      },\n      [PointCloudView.Back]: () => {\n        if (backViewInstance) {\n          synchronizeBackView(boxParams, polygon, backViewInstance, dataUrl);\n        }\n      },\n      [PointCloudView.Top]: () => {\n        synchronizeTopView(boxParams, polygon, topViewInstance, mainViewInstance);\n      },\n    };\n\n    Object.keys(viewToBeUpdated).forEach((key) => {\n      if (key !== omitView) {\n        viewToBeUpdated[key]();\n      }\n    });\n\n    if (zoom) {\n      mainViewInstance?.updateCameraZoom(zoom);\n    }\n\n    mainViewGenBox(boxParams);\n  };\n\n  const pointCloudBoxListUpdated = (newBoxes: IPointCloudBox[]) => {\n    topViewInstance.updatePolygonList(newBoxes);\n    mainViewInstance?.generateBoxes(newBoxes);\n  };\n\n  const initPointCloud3d = (size: ISize) => {\n    if (!mainViewInstance) {\n      return;\n    }\n\n    const orthographicParams = PointCloudUtils.getDefaultOrthographicParams(size);\n\n    mainViewInstance.initOrthographicCamera(orthographicParams);\n    mainViewInstance.initRenderer();\n    mainViewInstance.render();\n  };\n\n  /**\n   * Update the data of pointCloudView when the page change.\n   * @returns\n   */\n  const updatePointCloudData = async (newData = currentData) => {\n    if (!newData?.url || !mainViewInstance) {\n      return;\n    }\n\n    /**\n     * Init Cache Data.\n     */\n    setHighlight2DDataList([]);\n\n    SetPointCloudLoading(dispatch, true);\n    SetLoadPCDFileLoading(dispatch, true);\n    await mainViewInstance.loadPCDFile(newData.url, config?.radius ?? DEFAULT_RADIUS);\n\n    mainViewInstance?.clearAllBox();\n    mainViewInstance?.clearAllSphere();\n\n    let boxParamsList: any[] = [];\n    let lineList: any[] = [];\n    let polygonList: any[] = [];\n    let sphereParamsList: IPointCloudSphere[] = [];\n\n    mainViewInstance.updateTopCamera();\n\n    const valid = jsonParser(newData.result)?.valid ?? true;\n    ptCtx.setPointCloudValid(valid);\n\n    // Clear other view data during initialization\n    ptCtx.sideViewInstance?.clearAllData();\n    ptCtx.backViewInstance?.clearAllData();\n\n    // TopView Data Update\n    /**\n     * Listen to flip\n     * 1. Init\n     * 2. Reload PointCloud\n     * 3. Clear Polygon\n     */\n    topViewInstance.updateData(newData.url, newData.result, {\n      radius: config?.radius ?? DEFAULT_RADIUS,\n    });\n\n    if (newData.result) {\n      boxParamsList = PointCloudUtils.getBoxParamsFromResultList(newData.result);\n      polygonList = PointCloudUtils.getPolygonListFromResultList(newData.result);\n      lineList = PointCloudUtils.getLineListFromResultList(newData.result);\n      sphereParamsList = PointCloudUtils.getSphereParamsFromResultList(newData.result);\n\n      // Add Init Box\n      mainViewInstance?.generateBoxes(boxParamsList);\n      mainViewInstance?.generateSpheres(sphereParamsList);\n\n      /**\n       * Use [] to replace the default highlight2DDataList.\n       * Need to await syncAllViewPointCloudColor before setLoading(false).\n       */\n      await ptCtx.syncAllViewPointCloudColor(boxParamsList, []);\n    }\n\n    initHistory({\n      pointCloudBoxList: boxParamsList,\n      polygonList,\n      lineList,\n      pointCloudSphereList: sphereParamsList,\n    });\n\n    SetPointCloudLoading(dispatch, false);\n    SetLoadPCDFileLoading(dispatch, false);\n  };\n\n  return {\n    topViewAddSphere,\n    topViewAddBox,\n    topViewSelectedChanged,\n    topViewUpdatePoint,\n    sideViewUpdatePoint,\n    backViewUpdatePoint,\n    topViewUpdateBox,\n    topViewUpdateLine,\n    sideViewUpdateBox,\n    backViewUpdateBox,\n    pointCloudBoxListUpdated,\n    initPointCloud3d,\n    updatePointCloudData,\n    updateViewsByDefaultSize,\n  };\n};\n","/**\n * @author Glenfiddish <edwinlee0927@hotmail.com>\n * @file Tool utils\n * @date 2022-06-20\n */\n\nimport { cTool } from '@labelbee/lb-annotation';\nconst { EVideoToolName, EPointCloudName, EToolName } = cTool;\n\ninterface IPoint {\n  x: number;\n  y: number;\n}\nclass ToolUtils {\n  public static isVideoTool(tool?: string) {\n    return tool ? (Object.values(EVideoToolName) as string[]).includes(tool) : false;\n  }\n\n  public static isPointCloudTool(tool?: string) {\n    return tool ? (Object.values(EPointCloudName) as string[]).includes(tool) : false;\n  }\n\n  public static getPointCloudToolList() {\n    return [EToolName.Point, EToolName.Line, EToolName.PointCloudPolygon];\n  }\n\n  // Calculate the distance from a point to a line\n  public static getPointToLineDistance(\n    pt: IPoint, // A point outside the straight line\n    begin: IPoint, // Straight line start point\n    end: IPoint, // Straight line end point\n  ) {\n    const A = Math.abs(Math.sqrt(Math.pow(pt.x - begin.x, 2) + Math.pow(pt.y - begin.y, 2)));\n    const B = Math.abs(Math.sqrt(Math.pow(pt.x - end.x, 2) + Math.pow(pt.y - end.y, 2)));\n    const C = Math.abs(Math.sqrt(Math.pow(begin.x - end.x, 2) + Math.pow(begin.y - end.y, 2)));\n    const P = (A + B + C) / 2;\n    const area = Math.abs(Math.sqrt(P * (P - A) * (P - B) * (P - C)));\n    return (2 * area) / C;\n  }\n}\n\nexport default ToolUtils;\n","import { useCallback, useContext, useMemo } from 'react';\nimport { PointCloudContext } from '@/components/pointCloudView/PointCloudContext';\nimport _ from 'lodash';\nimport { useHistory } from '@/components/pointCloudView/hooks/useHistory';\nimport { cAnnotation } from '@labelbee/lb-annotation';\nimport { IPointUnit } from '@labelbee/lb-utils';\n\nconst { ESortDirection } = cAnnotation;\n\nexport const useSphere = () => {\n  const {\n    pointCloudSphereList,\n    setPointCloudSphereList,\n    selectedID,\n    setSelectedIDs,\n    mainViewInstance,\n    topViewInstance,\n  } = useContext(PointCloudContext);\n\n  const { pushHistoryWithList } = useHistory();\n\n  const selectedSphere = useMemo(() => {\n    return pointCloudSphereList.find((v) => v.id === selectedID)\n  }, [selectedID, pointCloudSphereList])\n\n  const getPointCloudSphereByID = useCallback(\n    (id: string) => {\n      return pointCloudSphereList.find((i) => i.id === id);\n    },\n    [pointCloudSphereList],\n  );\n\n  const updatePointCloudSphere = useCallback(\n    (sphereParams) => {\n      const sphereIndex = pointCloudSphereList.findIndex((v) => v.id === sphereParams.id)\n      if (sphereIndex > -1) {\n        pointCloudSphereList.splice(sphereIndex, 1, _.merge(pointCloudSphereList[sphereIndex], sphereParams));\n        const newPointCloudSphereList = _.cloneDeep(pointCloudSphereList);\n        setPointCloudSphereList(newPointCloudSphereList);\n        pushHistoryWithList({ pointCloudSphereList: newPointCloudSphereList });\n        return newPointCloudSphereList;\n      }\n      return pointCloudSphereList\n    }, [pointCloudSphereList]\n  )\n\n  const deletePointCloudSphere = useCallback(\n    (id: string) => {\n      const newPointCloudSphereList = pointCloudSphereList.filter((v) => v.id !== id);\n      setPointCloudSphereList(newPointCloudSphereList);\n      mainViewInstance?.removeObjectByName(id, 'sphere');\n      mainViewInstance?.render();\n    }, [pointCloudSphereList]\n  )\n\n  const switchToNextSphere = useCallback((sort = ESortDirection.ascend) => {\n    if (!topViewInstance) return\n    const pointList = topViewInstance.toolInstance.pointList\n    const currentSelectedId = topViewInstance.toolInstance.selectedID\n    const selectedIndex = pointList.findIndex((v: IPointUnit) => v?.id === currentSelectedId)\n    if (selectedIndex > -1) {\n      let sign = 1;\n      if (sort === ESortDirection.descend) {\n        sign = -1;\n      }\n      const len = pointList.length;\n      const newSelectedPoint = pointList[(selectedIndex + sign + len) % len]\n      setSelectedIDs(newSelectedPoint.id)\n    }\n  }, [topViewInstance])\n\n  return {\n    selectedSphere,\n    getPointCloudSphereByID,\n    updatePointCloudSphere,\n    deletePointCloudSphere,\n    switchToNextSphere,\n  }\n}\n","var img = \"data:image/svg+xml,%3csvg id='icon_mouse_left_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23ff5770%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e9%bc%a0%e6%a0%87%e6%bb%9a%e8%bd%ae'%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.982v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.97-9.7H5.865V0a5.7%2c5.7%2c0%2c0%2c1%2c3.53%2c1.267A3.812%2c3.812%2c0%2c0%2c1%2c10.85%2c4.19V5.98Zm-5.866%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.456%2c1.267%2c5.693%2c5.693%2c0%2c0%2c1%2c4.984%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(-0.698 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_mouse_right_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23ff5770%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e9%bc%a0%e6%a0%87%e6%bb%9a%e8%bd%ae'%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.982v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.97-9.7H5.865V0a5.7%2c5.7%2c0%2c0%2c1%2c3.53%2c1.267A3.812%2c3.812%2c0%2c0%2c1%2c10.85%2c4.19V5.98Zm-5.866%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.456%2c1.267%2c5.693%2c5.693%2c0%2c0%2c1%2c4.984%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(5.302 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","import { prefix } from '@/constant';\nimport { AppState } from '@/store';\nimport { PageBackward, PageForward, PageJump } from '@/store/annotation/actionCreators';\nimport { getTotalPage } from '@/store/annotation/reducer';\nimport { RenderFooter } from '@/types/main';\nimport { IStepInfo } from '@/types/step';\nimport { Divider } from 'antd/es';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport { useDispatch, LabelBeeContext } from '@/store/ctx';\nimport FooterTips from './FooterTips';\nimport HiddenTips from './HiddenTips';\nimport PageNumber from './PageNumber';\nimport ZoomController from './ZoomController';\nimport { Pagination } from './Pagination';\nimport { AnnotatedAttributesIcon } from './AnnotatedAttributes';\nimport { cTool } from '@labelbee/lb-annotation';\nimport { shortCutTable, ToolHotKeyCom } from './FooterTips/ToolHotKey';\n\nconst { EPointCloudName } = cTool;\n\nexport type FooterTheme = 'light' | 'dark';\ninterface IProps {\n  totalPage: number;\n  imgIndex: number;\n  style?: { [key: string]: any };\n  stepList: IStepInfo[];\n  step: number;\n  basicResultList: any[];\n  basicIndex: number;\n  mode?: FooterTheme; // 后面通过 context 的形式进行编写\n  footer?: RenderFooter;\n\n  skipBeforePageTurning?: (pageTurning: Function) => void;\n}\n\nexport const footerCls = `${prefix}-footer`;\n\nexport const FooterDivider = () => (\n  <Divider type='vertical' style={{ background: 'rgba(153, 153, 153, 1)', height: '16px' }} />\n);\n\n/**\n * default footer renderer\n * @param param0\n * @returns\n */\nconst renderFooter: RenderFooter = ({\n  footerTips,\n  hiddenTips,\n  pageNumber,\n  pagination,\n  zoomController,\n  curItems,\n  footerDivider,\n  annotateAttrList,\n}) => {\n  return (\n    <>\n      {footerTips}\n      {annotateAttrList}\n      <div style={{ flex: 1 }} />\n      {hiddenTips}\n      {pageNumber}\n      {pagination}\n      {curItems}\n      {footerDivider}\n      {zoomController}\n    </>\n  );\n};\n\nconst ToolFooter: React.FC<IProps> = (props: IProps) => {\n  const {\n    stepList,\n    step,\n    basicResultList,\n    basicIndex,\n    mode = 'light',\n    footer = renderFooter,\n    skipBeforePageTurning,\n  } = props;\n\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n  const stepInfo = stepList[step - 1] ?? {};\n  const hasSourceStep = !!stepInfo.dataSourceStep;\n\n  const pageBackward = () => {\n    if (skipBeforePageTurning) {\n      skipBeforePageTurning(() => dispatch(PageBackward()));\n      return;\n    }\n\n    dispatch(PageBackward());\n  };\n\n  const pageForward = () => {\n    if (skipBeforePageTurning) {\n      skipBeforePageTurning(() => dispatch(PageForward()));\n      return;\n    }\n    dispatch(PageForward());\n  };\n\n  const toPageNumber = (page: string) => {\n    const imgIndex = ~~page - 1;\n    if (skipBeforePageTurning) {\n      skipBeforePageTurning(() => dispatch(PageJump(imgIndex)));\n      return;\n    }\n    dispatch(PageJump(imgIndex));\n  };\n\n  const pagination = (\n    <Pagination\n      imgIndex={props.imgIndex}\n      totalPage={props.totalPage}\n      pageJump={toPageNumber}\n      pageBackward={pageBackward}\n      pageForward={pageForward}\n      footerCls={footerCls}\n    />\n  );\n\n  const curItems =\n    hasSourceStep && basicResultList.length > 0 ? (\n      <span>{t('curItems', { current: basicIndex + 1, total: basicResultList.length })}</span>\n    ) : null;\n\n  if (typeof footer === 'function') {\n    if (footer === renderFooter && stepInfo.tool === EPointCloudName.PointCloud) {\n      return (\n        <div className={`${footerCls}`} style={props.style}>\n          <FooterTips />\n          <AnnotatedAttributesIcon />\n          <div style={{ flex: 1 }} />\n          {pagination}\n        </div>\n      );\n    }\n\n    return (\n      <div className={`${footerCls}`} style={props.style}>\n        {footer({\n          footerTips: <FooterTips />,\n          hiddenTips: <HiddenTips />,\n          pageNumber: <PageNumber />,\n          annotateAttrList: <AnnotatedAttributesIcon />,\n          pagination,\n          zoomController: <ZoomController mode={mode} />,\n          curItems,\n          footerDivider: <FooterDivider />,\n          shortCutTable,\n          ToolHotKeyCom,\n        })}\n      </div>\n    );\n  }\n\n  return footer;\n};\n\nconst mapStateToProps = (state: AppState) => ({\n  totalPage: getTotalPage(state.annotation),\n  imgIndex: state.annotation.imgIndex,\n  stepList: state.annotation.stepList,\n  step: state.annotation.step,\n  basicIndex: state.annotation.basicIndex,\n  basicResultList: state.annotation.basicResultList,\n  skipBeforePageTurning: state.annotation.skipBeforePageTurning,\n});\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(ToolFooter);\n","import { getClassName } from '@/utils/dom';\nimport classNames from 'classnames';\nimport React from 'react';\n\nexport const PointCloudContainer: React.FC<{\n  title: string | React.ReactElement | null;\n  toolbar?: React.ReactElement | null;\n  className?: string;\n  style?: React.CSSProperties;\n  titleOnSurface?: boolean; // adherent surface\n}> = ({ title, toolbar, children, className, style, titleOnSurface }) => {\n  return (\n    <div className={classNames([className, getClassName('point-cloud-container')])} style={style}>\n      {titleOnSurface ? (\n        <span className={getClassName('point-cloud-container', 'header-title-box')}>{title}</span>\n      ) : (\n        <div className={getClassName('point-cloud-container', 'header')}>\n          {title && (\n            <span className={getClassName('point-cloud-container', 'header-title')}>{title}</span>\n          )}\n\n          {toolbar && (\n            <div className={getClassName('point-cloud-container', 'header-toolbar')}>{toolbar}</div>\n          )}\n        </div>\n      )}\n      {children}\n    </div>\n  );\n};\n","import React from 'react';\nimport { ExpandAltOutlined } from '@ant-design/icons';\nimport { getClassName } from '@/utils/dom';\n\ninterface IProps {\n  title: string | React.ReactElement | null | undefined;\n  onClick?: () => void;\n  style?: React.CSSProperties;\n}\n\nconst TitleButton = ({ title, onClick, style }: IProps) => {\n  return (\n    <span className={getClassName('point-cloud-container', 'title-button')} style={style}>\n      {title}\n      {onClick && <ExpandAltOutlined onClick={onClick} style={{ marginLeft: 4 }} />}\n    </span>\n  );\n};\nexport default TitleButton;\n","/**\n * @file Text exceeds display view more\n * @author lixinghua <lixinghua@sensetime.com>;\n * @date 2023-04-10\n */\n\nimport React, { useRef, ReactElement, CSSProperties } from 'react';\nimport { Popover, Tooltip } from 'antd';\nimport { useSize } from 'ahooks';\nimport { TooltipPlacement } from 'antd/es/tooltip';\nimport { prefix } from '@/constant';\nimport { SearchOutlined } from '@ant-design/icons';\n\ninterface IProps {\n  text: string;\n  placement?: TooltipPlacement; // Popover位置\n  icon?: ReactElement | null; // 自定义icon\n  openByText?: boolean; // hover文字展开\n  style?: CSSProperties;\n  isToolTips?: boolean;\n  wordCount?: number;\n}\n\nconst longTextCls = `${prefix}-longText`;\nconst LongText = (props: IProps) => {\n  const {\n    text,\n    placement = 'bottom',\n    icon = <SearchOutlined />,\n    openByText,\n    style,\n    isToolTips,\n    wordCount,\n  } = props;\n\n  const el = useRef<null | HTMLDivElement>(null);\n  useSize(el);\n  const isOverflow = el.current && el.current?.clientWidth < el.current?.scrollWidth;\n\n  if (wordCount) {\n    if (text?.length > wordCount) {\n      const showText = text.slice(0, wordCount);\n      return (\n        <Popover placement={placement} overlayClassName={`${longTextCls}-popover`} content={text}>\n          <span style={{ cursor: 'pointer' }}>{showText}...</span>\n        </Popover>\n      );\n    } else {\n      return <div> {text}</div>;\n    }\n  }\n\n  if (openByText) {\n    let tipsProps = {\n      placement,\n      overlayClassName: `${longTextCls}-popover`,\n      content: text,\n      // 防止屏幕缩小时Popover会自动展开\n      key: `${isOverflow}`,\n    };\n    if (!isOverflow) {\n      Object.assign(tipsProps, { open: false });\n    }\n    const TextDom = (\n      <div className={`${longTextCls}-text`} style={style} ref={el}>\n        {text}\n      </div>\n    );\n\n    // 是否转换为 ToolTips 模式\n    if (isToolTips) {\n      return (\n        <Tooltip {...tipsProps} title={text}>\n          {TextDom}\n        </Tooltip>\n      );\n    }\n\n    return <Popover {...tipsProps}>{TextDom}</Popover>;\n  }\n\n  return (\n    <div className={longTextCls} style={style}>\n      <div className={`${longTextCls}-text`} ref={el}>\n        {text}\n      </div>\n\n      {isOverflow && (\n        <Popover placement={placement} overlayClassName={`${longTextCls}-popover`} content={text}>\n          {icon}\n        </Popover>\n      )}\n    </div>\n  );\n};\n\nexport default LongText;\n","import { prefix } from '@/constant';\nimport { EToolName } from '@/data/enums/ToolType';\nimport { AppState } from '@/store';\nimport { Sider } from '@/types/main';\nimport StepUtils from '@/utils/StepUtils';\nimport { Collapse } from 'antd/es';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport AnnotationText from './AnnotationText';\nimport ClearIcon from './ClearIcon';\nimport GeneralOperation, { PointCloudOperation } from './GeneralOperation';\nimport ImgAttributeInfo from './ImgAttributeInfo';\nimport SwitchAttributeList from './SwitchAttributeList';\nimport TagSidebar, { expandIconFuc } from './TagSidebar';\nimport TextToolSidebar from './TextToolSidebar';\nimport PointCloudToolSidebar from './PointCloudToolSidebar';\nimport ToolStyle from './ToolStyle';\nimport { cTool } from '@labelbee/lb-annotation';\nimport ScribbleSidebar from './ScribbleSidebar';\nimport { ToolIcons } from './ToolIcons';\nimport { useSelector } from '@/store/ctx';\nimport { Tabs } from 'antd';\nimport { classnames } from '@/utils';\nimport menuFoldSvg from '@/assets/annotation/common/icon_menu_fold.svg';\nimport LLMToolSidebar from '@/components/LLMToolView/sidebar';\n\nconst { EVideoToolName, EPointCloudName } = cTool;\n\nconst { Panel } = Collapse;\n\ninterface IProps {\n  toolName?: EToolName;\n  sider?: Sider;\n  enableColorPicker?: boolean;\n  setSiderWidth?: (width: number | undefined) => void;\n  propsSiderWidth?: number | undefined;\n  checkMode?: boolean;\n}\n\nexport const sidebarCls = `${prefix}-sidebar`;\nconst Sidebar: React.FC<IProps> = ({\n  sider,\n  enableColorPicker,\n  setSiderWidth,\n  propsSiderWidth,\n  checkMode,\n}) => {\n  const stepInfo = useSelector((state: AppState) =>\n    StepUtils.getCurrentStepInfo(state.annotation.step, state.annotation.stepList),\n  );\n  const [showSide, setShowSide] = useState<boolean>(true);\n  const toolName = stepInfo?.tool;\n  const { t } = useTranslation();\n\n  if (!toolName) {\n    return null;\n  }\n\n  /**\n   * 样式面板, 包含透明度、线框、颜色\n   * @param key 虚拟dom的key\n   */\n  const renderStylePanel = (key: string) => {\n    const ToolStyleComponent = <ToolStyle />;\n    return (\n      <Panel header={t('Style')} className='panel' key={key}>\n        {ToolStyleComponent}\n      </Panel>\n    );\n  };\n\n  // onChange is empty by default.\n  const toolIcon = <ToolIcons toolName={toolName} onChange={() => {}} />;\n  const attributeList = <SwitchAttributeList />;\n\n  const annotationText = <AnnotationText />;\n\n  const toolStyle = (\n    <Collapse\n      defaultActiveKey={['1', 'imgAttribute']}\n      bordered={false}\n      expandIconPosition='right'\n      className={`${sidebarCls}__content`}\n      expandIcon={expandIconFuc}\n    >\n      {renderStylePanel('1')}\n    </Collapse>\n  );\n\n  const imageAttributeInfo = (\n    <Collapse\n      defaultActiveKey={['1', 'imgAttribute']}\n      bordered={false}\n      expandIconPosition='right'\n      className={`${sidebarCls}__content`}\n      expandIcon={expandIconFuc}\n    >\n      <Panel\n        header={\n          <div>\n            {t('Adjust')}\n\n            <ClearIcon />\n          </div>\n        }\n        className='panel'\n        key='imgAttribute'\n      >\n        <ImgAttributeInfo />\n      </Panel>\n    </Collapse>\n  );\n\n  const operation = <GeneralOperation />;\n\n  const tagToolSideBar = <TagSidebar />;\n\n  const textToolSideBar = <TextToolSidebar />;\n\n  const scribbleSidebar = (\n    <ScribbleSidebar\n      onChange={(t, i) => {\n        // 接收\n      }}\n    />\n  );\n\n  const LLMSidebar = <LLMToolSidebar checkMode={checkMode} />;\n\n  const horizontal = <div className={`${sidebarCls}__horizontal`} />;\n\n  const pointCloudToolSidebar = <PointCloudToolSidebar enableColorPicker={enableColorPicker} />;\n\n  const pointCloudOperation = <PointCloudOperation />;\n\n  if (sider) {\n    if (typeof sider === 'function') {\n      return (\n        <div className={`${sidebarCls}`}>\n          {sider({\n            toolIcon,\n            attributeList,\n            annotationText,\n            toolStyle,\n            imageAttributeInfo,\n            operation,\n            tagToolSideBar,\n            textToolSideBar,\n            horizontal,\n\n            pointCloudToolSidebar,\n            pointCloudOperation,\n            scribbleSidebar,\n            LLMSidebar,\n          })}\n        </div>\n      );\n    } else {\n      return sider;\n    }\n  }\n\n  if (\n    (\n      [\n        EToolName.Rect,\n        EToolName.Point,\n        EToolName.Line,\n        EToolName.Rect,\n        EToolName.Polygon,\n        EToolName.Cuboid,\n      ] as string[]\n    ).includes(toolName)\n  ) {\n    return (\n      <div className={`${sidebarCls}`}>\n        {toolIcon}\n        {horizontal}\n        {attributeList}\n        {annotationText}\n        {horizontal}\n        <div className={`${sidebarCls}__content`}>\n          {toolStyle}\n          {imageAttributeInfo}\n        </div>\n        {operation}\n      </div>\n    );\n  }\n\n  if (toolName === EToolName.Tag) {\n    return (\n      <div className={`${sidebarCls}`}>\n        <TagSidebar />\n      </div>\n    );\n  }\n\n  if (toolName === EVideoToolName.VideoTagTool) {\n    return (\n      <div className={`${sidebarCls}`}>\n        <div className={`${sidebarCls}__content`}>\n          <TagSidebar />\n        </div>\n        {operation}\n      </div>\n    );\n  }\n\n  if (toolName === EToolName.Text) {\n    return (\n      <div className={`${sidebarCls}`}>\n        <TextToolSidebar />\n      </div>\n    );\n  }\n\n  if (toolName === EPointCloudName.PointCloud) {\n    const showFoldSide = () => {\n      setShowSide(!showSide);\n      if (setSiderWidth) {\n        const w = showSide ? 48 : undefined;\n        setSiderWidth(w);\n      }\n    };\n    // sidebar collapse\n    const hideSideBox = (\n      <div\n        style={{\n          width: '48px',\n          height: '100%',\n          display: 'flex',\n          justifyContent: 'center',\n          background: '#ffffff',\n        }}\n      >\n        <span onClick={() => showFoldSide()}>\n          <img\n            style={{\n              width: '16px',\n              height: '16px',\n              marginTop: '18px',\n              cursor: 'pointer',\n              transform: 'rotate(180deg)',\n            }}\n            src={menuFoldSvg}\n          />\n        </span>\n      </div>\n    );\n\n    if (showSide) {\n      return (\n        <Tabs\n          type='card'\n          activeKey='1'\n          className={classnames({\n            [`${sidebarCls}`]: true,\n            [`${sidebarCls}__pointCloud`]: true,\n          })}\n          tabBarExtraContent={{\n            left: (\n              <span onClick={() => showFoldSide()} style={{ padding: '0px 4px' }}>\n                <img\n                  style={{\n                    width: '16px',\n                    height: '16px',\n                    marginLeft: '4px',\n                    cursor: 'pointer',\n                  }}\n                  src={menuFoldSvg}\n                />\n              </span>\n            ),\n          }}\n        >\n          <Tabs.TabPane\n            tab='工具面板'\n            key='1'\n            style={{ height: '100%', display: 'flex', flexDirection: 'column' }}\n          >\n            <div className={`${sidebarCls}__content`}>\n              <PointCloudToolSidebar />\n            </div>\n            <PointCloudOperation />\n          </Tabs.TabPane>\n        </Tabs>\n      );\n    }\n\n    return hideSideBox;\n  }\n\n  if (toolName === EToolName.ScribbleTool) {\n    return (\n      <div className={`${sidebarCls}`}>\n        <div className={`${sidebarCls}__content`}>\n          {scribbleSidebar}\n          {attributeList}\n        </div>\n        {operation}\n      </div>\n    );\n  }\n\n  if (toolName === EToolName.LLM) {\n    return LLMSidebar;\n  }\n\n  return null;\n};\n\nexport default Sidebar;\n","import { IPolygonData } from '@labelbee/lb-utils';\nimport { useContext } from 'react';\nimport { PointCloudContext } from '../PointCloudContext';\nimport { useHistory } from './useHistory';\n\n/**\n * PointCloud Polygon Hook\n * @returns\n */\nexport const usePolygon = () => {\n  const { polygonList, setPolygonList, selectedID } = useContext(PointCloudContext);\n  const { addHistory, pushHistoryWithList } = useHistory();\n\n  const selectedPolygon = polygonList.find((v) => v.id === selectedID);\n\n  const addPolygon = (polygon: IPolygonData) => {\n    setPolygonList(polygonList.concat(polygon));\n    addHistory({ newPolygon: polygon });\n  };\n\n  const deletePolygon = (id: string) => {\n    const newPolygonList = polygonList.filter((v) => v.id !== id).map((v) => ({ ...v }));\n    setPolygonList(newPolygonList);\n    pushHistoryWithList({ polygonList: newPolygonList });\n  };\n\n  const updateSelectedPolygon = (polygon: IPolygonData) => {\n    if (selectedPolygon) {\n      setPolygonList(\n        polygonList.map((v) => {\n          if (v.id === selectedID) {\n            return polygon;\n          }\n          return v;\n        }),\n      );\n    }\n  };\n\n  const updatePolygonValidByID = (id: string) => {\n    const polygon = polygonList.find((v) => v.id === id);\n    if (polygon) {\n      setPolygonList(\n        polygonList.map((v) => {\n          if (v.id === id) {\n            return {\n              ...v,\n              valid: !v.valid,\n            };\n          }\n          return v;\n        }),\n      );\n    }\n  };\n\n  return {\n    addPolygon,\n    deletePolygon,\n    selectedPolygon,\n    updateSelectedPolygon,\n    updatePolygonValidByID,\n  };\n};\n","/**\n * @file Update PointCloud Status\n * @createDate 2022-08-26\n * @author Ron <ron.f.luo@gmail.com>\n */\n\nimport { useContext, useMemo } from 'react';\nimport { PointCloudContext } from '../PointCloudContext';\nimport { cTool } from '@labelbee/lb-annotation';\nimport { useHistory } from './useHistory';\nimport { EPointCloudPattern } from '@labelbee/lb-utils';\n\nconst { EToolName, EPolygonPattern } = cTool;\n\nexport const useStatus = () => {\n  const {\n    topViewInstance,\n    sideViewInstance,\n    backViewInstance,\n    mainViewInstance,\n    setPointCloudResult,\n    setPointCloudSphereList,\n    setPolygonList,\n    pointCloudPattern,\n    setPointCloudPattern,\n    syncAllViewPointCloudColor,\n    globalPattern,\n    setLineList,\n  } = useContext(PointCloudContext);\n  const { pushHistoryWithList } = useHistory();\n\n  // Clear All PointView Data\n  const clearAllResult = () => {\n    mainViewInstance?.clearAllBox();\n    mainViewInstance?.clearAllSphere();\n    mainViewInstance?.render();\n\n    setPointCloudResult([]);\n    setPolygonList([]);\n    setPointCloudSphereList([]);\n    setLineList([]);\n\n    topViewInstance?.toolScheduler.clearStatusAndResult();\n\n    syncAllViewPointCloudColor([]);\n\n    // Add History\n    pushHistoryWithList({ pointCloudBoxList: [], polygonList: [], pointCloudSphereList: [] });\n  };\n\n  // Clear results of sideview and backview\n  const clearSBViewResult = () => {\n    sideViewInstance?.toolInstance.clearResult();\n    backViewInstance?.toolInstance.clearResult();\n  };\n\n  const updatePointCloudPattern = (toolName: any) => {\n    if (toolName === pointCloudPattern) {\n      return;\n    }\n\n    const instanceArr = [topViewInstance, sideViewInstance, backViewInstance];\n\n    switch (toolName) {\n      case EToolName.Rect:\n        clearSBViewResult();\n        instanceArr.forEach((instance) => {\n          instance?.switchToCanvas(EToolName.PointCloudPolygon);\n          instance?.toolInstance.setPattern(EPolygonPattern.Rect);\n        });\n        setPointCloudPattern(EToolName.Rect);\n        break;\n      case EToolName.Polygon:\n        clearSBViewResult();\n        instanceArr.forEach((instance) => {\n          instance?.switchToCanvas(EToolName.PointCloudPolygon);\n          instance?.toolInstance.setPattern(EPolygonPattern.Normal);\n        });\n        setPointCloudPattern(EToolName.Polygon);\n        break;\n      case EToolName.Point:\n        clearSBViewResult();\n        instanceArr.forEach((instance) => {\n          instance?.switchToCanvas(EToolName.Point);\n        });\n        setPointCloudPattern(EToolName.Point);\n        break;\n      case EToolName.Line:\n        clearSBViewResult();\n        instanceArr.forEach((instance) => {\n          instance?.switchToCanvas(EToolName.Line);\n        });\n        setPointCloudPattern(EToolName.Line);\n        break;\n    }\n  };\n\n  const isPointCloudDetectionPattern = useMemo(() => {\n    return globalPattern === EPointCloudPattern.Detection;\n  }, [globalPattern]);\n\n  const isPointCloudSegmentationPattern = useMemo(() => {\n    return globalPattern === EPointCloudPattern.Segmentation;\n  }, [globalPattern]);\n\n  return {\n    clearAllResult,\n    updatePointCloudPattern,\n    pointCloudPattern,\n    isPointCloudDetectionPattern,\n    isPointCloudSegmentationPattern,\n  };\n};\n","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_279' data-name='%e8%b7%af%e5%be%84 279' class='cls-1' d='M11.345-10.437H8.754c0-.488-.379-1.077-.848-1.077H4.94c-.468%2c0-.848.589-.848%2c1.077H1.5c-.572%2c0-1.2.085-1.2.658v.886H12.248v-.886C12.248-10.352%2c11.917-10.437%2c11.345-10.437ZM1.357-7.857V.582a2.019%2c2.019%2c0%2c0%2c0%2c1.7%2c1.9H9.79c.859%2c0%2c1.421-1.046%2c1.421-1.9V-7.857ZM4.186.758H3.15V-6.709H4.186Zm2.6%2c0H5.747V-6.709H6.783Zm2.6%2c0H8.344V-6.709H9.38Z' transform='translate(-0.3 11.514)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_del_kj' transform='translate(0.7 10.514)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_95' data-name='%e7%9f%a9%e5%bd%a2 95' class='cls-1' width='16' height='16' transform='translate(-0.7 -10.514)'/%3e %3cg id='%e7%bb%84_481' data-name='%e7%bb%84 481' class='cls-2' transform='translate(1.3 -9.514)'%3e %3cpath id='%e8%b7%af%e5%be%84_278' data-name='%e8%b7%af%e5%be%84 278' class='cls-3' d='M-4.7-16.514H19.956V10.194H-4.7Z' transform='translate(-1.654 10.16)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","import type { ITagLabelsArray } from './types';\n\n/**\n * Find key and value to display label through inputList\n * @param key\n * @param value\n * @param inputList\n */\nexport const findTagLabel = (key: string, value: string, inputList: any[]) => {\n  const primaryTagConfig = inputList.find((i) => i.value === key);\n  const secondaryTagConfig = primaryTagConfig.subSelected.find(\n    (i: { value: string }) => i.value === value,\n  );\n  return { keyLabel: primaryTagConfig.key, valueLabel: secondaryTagConfig.key };\n};\n\n/**\n * Sort tags through inputList\n * @param tagsKeys\n * @param inputList\n */\nexport const tagsSortThruInputList = (tagsKeys: string[], inputList: any[]) => {\n  return tagsKeys.sort((key1, key2) => {\n    const key1Idx = inputList.findIndex((input) => key1 === input.value);\n    const key2Idx = inputList.findIndex((input) => key2 === input.value);\n    return key1Idx - key2Idx;\n  });\n};\n\n/**\n * Convent result's array to array of showing the labels\n * @param result\n * @param inputList\n * @returns {ITagLabelsArray}\n */\nexport const result2LabelKey = (result: any[], inputList: any[]) => {\n  try {\n    return (\n      result?.reduce((exitsTags: ITagLabelsArray, res: { result: { [key: string]: string } }) => {\n        tagsSortThruInputList(Object.keys(res.result), inputList).forEach((key) => {\n          const valuesArray = res.result[key]?.split(';');\n          findLabelFromValuesArray(valuesArray, key, inputList, exitsTags);\n        });\n        return exitsTags;\n      }, []) ?? []\n    );\n  } catch (error) {\n    return [];\n  }\n};\n\n/**\n * find label from valuesArray and push to exitsTags\n * @param valuesArray\n * @param key\n * @param inputList\n * @param exitsTags\n */\nconst findLabelFromValuesArray = (\n  valuesArray: string[],\n  key: string,\n  inputList: any[],\n  exitsTags: ITagLabelsArray,\n) => {\n  valuesArray.forEach((value) => {\n    const { keyLabel, valueLabel } = findTagLabel(key, value, inputList);\n    const tagHasAssign = exitsTags.find((i) => i.keyLabel === keyLabel);\n    if (tagHasAssign) {\n      tagHasAssign.valuesLabelArray.push(valueLabel);\n    } else {\n      exitsTags.push({ keyLabel, valuesLabelArray: [valueLabel] });\n    }\n  });\n};\n\n/**\n * Get key number through keyCode, Such as 49(keycode) => 1(number)\n * @param {Number} keyCode\n * @returns {Number} keyCode in scope if it greater than 0\n */\nexport const getKeyCodeNumber = (keyCode: number) => {\n  if (keyCode <= 57 && keyCode >= 49) {\n    return keyCode - 48;\n  }\n\n  if (keyCode <= 105 && keyCode >= 97) {\n    return keyCode - 96;\n  }\n\n  return 0;\n};\n\n/**\n * Preserve decimals for number\n * @param num\n * @param places\n * @returns {Number}\n */\nexport const decimalReserved = (num: number, places = 2) =>\n  typeof num === 'number' ? parseFloat(num.toFixed(places)) : num;\n","export const headerHeight = 61;\nexport const tipsHeight = 40;\nexport const footerHeight = 40;\nexport const sidebarWidth = 240;\n// 编辑步骤的侧边栏宽度\nexport const editStepWidth = 320;\n\n/** 标注步骤的类型 */\nexport enum EStepType {\n  ANNOTATION = 1, // 正常标注\n  QUALITY_INSPECTION, // 标注质检\n  PRE_ANNOTATION, // 预标注\n  MANUAL_CORRECTION, // 人工修正\n}\n\n/** 标注工具中最大获取的图片数 */\nexport const ANNOTATION_MAX_SIZE = 100;\n\n/** 翻页操作 */\nexport enum EPageTurningOperation {\n  Backward,\n  Forward,\n  Jump,\n}\n\n/** 拖拽状态 */\nexport enum EDragStatus {\n  Start,\n  Stop,\n  Wait,\n}\n\n/** 拖拽的内容 */\nexport enum EDragTarget {\n  Point,\n  Line,\n  Plane,\n}\n","import { IPointCloudBoxWithIndex } from '@/store/annotation/types';\nimport { IFileItem } from '@/types/data';\nimport { jsonParser } from '@/utils';\nimport { PointCloud, uuid } from '@labelbee/lb-annotation';\nimport { EPerspectiveView, IPointCloudBox } from '@labelbee/lb-utils';\n\nconst EXAMPLE_IMAGE_SIZE = {\n  width: 160,\n  height: 110,\n} as const;\n\n/**\n * Returns a data URL for an image of the rendered point cloud.\n * @param renderer - The PointCloud renderer to use.\n * @param zoom - The zoom level of the image. Defaults to 2.\n * @returns A Promise resolving to a string data URL of the rendered image.\n */\nconst getDataUrl = async (renderer: PointCloud['renderer'], zoom = 2) => {\n  return cropAndEnlarge(\n    renderer.domElement,\n    EXAMPLE_IMAGE_SIZE.width,\n    EXAMPLE_IMAGE_SIZE.height,\n    zoom,\n  );\n};\n\n/**\n * Returns a Promise that resolves after the specified duration.\n * @param ms - The duration to sleep, in milliseconds.\n * @returns A Promise that resolves after `ms` milliseconds.\n */\nexport const sleep = (time = 300) => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve('');\n    }, time);\n  });\n};\n\nexport const views = [EPerspectiveView.Top, EPerspectiveView.Left, EPerspectiveView.Back] as const;\n\ninterface viewDataUrl {\n  [EPerspectiveView.Top]?: string;\n  [EPerspectiveView.Left]?: string;\n  [EPerspectiveView.Back]?: string;\n}\n\nexport type IBox = IPointCloudBoxWithIndex & viewDataUrl;\n\n/**\n * Generates data URLs for each view of a given point cloud object using the provided box and zoom level.\n *\n * @param {PointCloud} pointCloud - The point cloud object to generate data URLs for.\n * @param {IBox} box - An object representing the bounding box to use for calculating camera position.\n * @param {number} zoom - The zoom level to use when generating data URLs.\n * @returns {Promise<void>} - A promise that resolves once all data URLs have been generated.\n */\nexport const getViewsDataUrl = async (pointCloud: PointCloud, box: IBox, zoom: number) => {\n  for (const view of views) {\n    await pointCloud.updateCameraByBox(box, view);\n    box[view] = await getDataUrl(pointCloud.renderer, zoom);\n  }\n};\n\n/**\n * Creates a new canvas, crops and enlarges an existing canvas, draws the cropped and enlarged image onto the new canvas,\n * and returns the data URL of the new canvas.\n *\n * @param {HTMLCanvasElement} canvas - The original canvas to be cropped and enlarged\n * @param {number} width - The width of the area to be cropped from the center of the original canvas\n * @param {number} height - The height of the area to be cropped from the center of the original canvas\n * @param {number} scale - The amount by which to enlarge the cropped area\n * @returns {string} - A data URL of the cropped and enlarged image\n */\nconst cropAndEnlarge = (\n  canvas: HTMLCanvasElement,\n  width: number,\n  height: number,\n  scale: number,\n): string => {\n  if (!canvas) {\n    return '';\n  }\n  const centerX = canvas.width / 2;\n  const centerY = canvas.height / 2;\n  // Calculate starting coordinates for cropping\n  const sx = centerX - width / 2;\n  const sy = centerY - height / 2;\n\n  // Create a new canvas for the cropped and enlarged image\n  const newCanvas = document.createElement('canvas');\n  newCanvas.width = width * scale;\n  newCanvas.height = height * scale;\n\n  // Draw the cropped and enlarged image onto the new canvas\n  const newCtx = newCanvas.getContext('2d');\n  newCtx?.drawImage(canvas, sx, sy, width, height, 0, 0, width * scale, height * scale);\n\n  // Convert the new canvas to a data URL and return it\n  return newCanvas.toDataURL();\n};\n\n/**\n * Retrieve boxes with a specific trackID from an array of file items.\n *\n * @param {Array} imageList - An array of file items to search through.\n * @param {Number} targetStep - The step number within the result object to retrieve boxes from.\n * @param {Number} selectedBoxTrackID - The trackID to match when searching for boxes.\n * @param {string} selectedBoxID - The selected BoxID.\n * @return {Array} An array of point cloud boxes that match the provided trackID, along with their index in the original array.\n */\nexport const getBoxesByTrackID = (\n  imageList: IFileItem[],\n  targetStep: number,\n  selectedBoxTrackID: number,\n  selectedBoxID: string,\n) => {\n  const matchingBoxes: IPointCloudBoxWithIndex[] = [];\n  imageList.some((element, index) => {\n    const fileResult = jsonParser(element?.result);\n    const stepResult = fileResult?.[`step_${targetStep}`]?.result;\n    const box = stepResult?.find((item: IPointCloudBox) => item.trackID === selectedBoxTrackID);\n    if (box) {\n      matchingBoxes.push({ ...box, index });\n    }\n    return box?.id === selectedBoxID;\n  });\n\n  return matchingBoxes;\n};\n\n/**\n * Calculate predicted values for each field in between the start and end points.\n * @param {IPointCloudBoxWithIndex} start - The starting point, should have the same properties as IPointCloudBoxWithIndex.\n * @param {IPointCloudBoxWithIndex} end - The ending point, should have the same properties as IPointCloudBoxWithIndex.\n * @returns {IPointCloudBox[]} An array of objects with the same properties as IPointCloudBox, containing interpolated values between the start and end points for each field.\n */\nexport const predict = (start: IPointCloudBoxWithIndex, end: IPointCloudBoxWithIndex) => {\n  const diff = end.index - start.index;\n  const len = diff - 1;\n  const result: IPointCloudBox[] = [];\n  const map: { [key: string]: number[] } = {};\n  const centerKeys = ['x', 'y', 'z'] as const;\n  const predictKeys = ['center', 'depth', 'height', 'index', 'rotation', 'width'] as const;\n\n  centerKeys.forEach((key) => {\n    map[key] = getInteriorNumbersByStartAndEnd(start.center[key], end.center[key], len);\n  });\n\n  predictKeys.forEach((key) => {\n    if (key === 'center') {\n      return;\n    }\n    map[key] = getInteriorNumbersByStartAndEnd(start[key], end[key], len);\n  });\n\n  for (let i = 0; i < len; i++) {\n    const nextCenter = centerKeys.reduce(\n      (acc, key) => {\n        acc[key] = map[key][i];\n        return acc;\n      },\n      { x: 0, y: 0, z: 0 },\n    );\n\n    const nextValue = predictKeys.reduce(\n      (acc, key) => {\n        if (key === 'center') {\n          return acc;\n        }\n        acc[key] = map[key][i];\n        return acc;\n      },\n      { ...end, id: uuid(), center: nextCenter },\n    );\n\n    result.push(nextValue);\n  }\n\n  return result;\n};\n\n/**\n * Calculate an array of numbers between the start and end values.\n * @param {number} [start=0] - The starting value. Defaults to 0 if not specified.\n * @param {number} [end=0] - The ending value. Defaults to 0 if not specified.\n * @param {number} [length=0] - The number of values to calculate between the start and end points. Defaults to 0 if not specified.\n * @returns {number[]} An array of numbers, containing interpolated values between the start and end points.\n */\nconst getInteriorNumbersByStartAndEnd = (start = 0, end = 0, length = 0): number[] => {\n  const step = (end - start) / (length + 1);\n  const resultArr = new Array(length);\n  for (let i = 0; i < length; i++) {\n    resultArr[i] = start + step * (i + 1);\n  }\n  return resultArr;\n};\n","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12.004' height='11.999' viewBox='0 0 12.004 11.999'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='icon_clearSmall_a' class='cls-1' d='M17526.469-1204.464l-.678-.678%2c1.752-1.751a.489.489%2c0%2c0%2c0-.006-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-1.039-1.043%2c1.752-1.751a.484.484%2c0%2c0%2c0%2c0-.691.489.489%2c0%2c0%2c0-.7%2c0l-1.752%2c1.751-1.037-1.038%2c1.75-1.756a.484.484%2c0%2c0%2c0%2c0-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-.682-.678a1%2c1%2c0%2c0%2c1%2c0-1.417l3.1-3.1a.972.972%2c0%2c0%2c1%2c0-1.384.981.981%2c0%2c0%2c1%2c1.387%2c0l2.422%2c2.422%2c1.736-1.732a1.47%2c1.47%2c0%2c0%2c1%2c2.076%2c0%2c1.476%2c1.476%2c0%2c0%2c1%2c0%2c2.081l-1.73%2c1.731%2c2.426%2c2.427a.98.98%2c0%2c0%2c1%2c0%2c1.386.985.985%2c0%2c0%2c1-1.391%2c0l-3.1%2c3.1a.989.989%2c0%2c0%2c1-.707.294A.987.987%2c0%2c0%2c1%2c17526.469-1204.464Z' transform='translate(-17520.656 1216.17)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12.004' height='11.999' viewBox='0 0 12.004 11.999'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23999%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='icon_clearSmall' class='cls-1' d='M17526.469-1204.464l-.678-.678%2c1.752-1.751a.489.489%2c0%2c0%2c0-.006-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-1.039-1.043%2c1.752-1.751a.484.484%2c0%2c0%2c0%2c0-.691.489.489%2c0%2c0%2c0-.7%2c0l-1.752%2c1.751-1.037-1.038%2c1.75-1.756a.484.484%2c0%2c0%2c0%2c0-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-.682-.678a1%2c1%2c0%2c0%2c1%2c0-1.417l3.1-3.1a.972.972%2c0%2c0%2c1%2c0-1.384.981.981%2c0%2c0%2c1%2c1.387%2c0l2.422%2c2.422%2c1.736-1.732a1.47%2c1.47%2c0%2c0%2c1%2c2.076%2c0%2c1.476%2c1.476%2c0%2c0%2c1%2c0%2c2.081l-1.73%2c1.731%2c2.426%2c2.427a.98.98%2c0%2c0%2c1%2c0%2c1.386.985.985%2c0%2c0%2c1-1.391%2c0l-3.1%2c3.1a.989.989%2c0%2c0%2c1-.707.294A.987.987%2c0%2c0%2c1%2c17526.469-1204.464Z' transform='translate(-17520.656 1216.17)'/%3e%3c/svg%3e\";\n  export default img;","import { COLORS_ARRAY, NULL_COLOR } from '@/data/Style';\nimport { ColorTag } from '@/components/colorTag';\nimport { Radio } from 'antd/es';\nimport React, { useState } from 'react';\nimport { Popover } from 'antd';\nimport ColorPalette from '../colorPalette';\nimport { CloseOutlined } from '@ant-design/icons';\nimport { useTranslation } from 'react-i18next';\nimport { ILimit, IDefaultSize } from '@labelbee/lb-utils';\nimport LimitPopover from './components/limitPopover';\n\nexport const ATTRIBUTE_COLORS = [NULL_COLOR].concat(COLORS_ARRAY);\n\ninterface IProps {\n  list: Array<{\n    label: string;\n    value: string;\n    color?: string;\n    limit?: ILimit;\n  }>;\n  selectedAttribute?: string;\n  attributeChanged: (v: string) => void;\n  forbidDefault?: boolean;\n  forbidColor?: boolean;\n  noHeightLimit?: boolean;\n  num?: number | string;\n  style?: React.CSSProperties;\n  enableColorPicker?: boolean;\n  updateColorConfig?: (value: string, color: string) => void;\n  updateSize?: (size: IDefaultSize) => void;\n}\n\nconst AttributeList = React.forwardRef((props: IProps, ref) => {\n  const radioRef = React.useRef<any>();\n  const { t } = useTranslation();\n  const list = props.list || [];\n\n  const [paletteVisible, setPaletteVisible] = useState<boolean>(false);\n  const [editConfigIndex, setEditConfigIndex] = useState<number | undefined>(undefined);\n\n  let NEW_ATTRIBUTE_COLORS = [...ATTRIBUTE_COLORS];\n\n  // 去除默认的颜色\n  if (props.forbidDefault === true) {\n    NEW_ATTRIBUTE_COLORS = NEW_ATTRIBUTE_COLORS.slice(1);\n  }\n\n  let className = 'sensebee-radio-group';\n  if (props.noHeightLimit) {\n    className = 'sensebee-radio-group-no-limit-height';\n  }\n\n  const changeColor = (value: string, color: string) => {\n    if (props.updateColorConfig) {\n      props.updateColorConfig(value, color);\n    }\n  };\n\n  return (\n    <div className={className} style={props.style}>\n      <Radio.Group\n        name='radiogroup'\n        defaultValue={props?.selectedAttribute}\n        value={props?.selectedAttribute}\n        onChange={(e) => props.attributeChanged(e.target.value)}\n        ref={ref as any}\n      >\n        {list.map((i: any, index: number) => {\n          let hotKey: number | string = props?.num ?? index;\n          const isChosen = i?.value === props?.selectedAttribute;\n\n          if (props.forbidDefault === true && typeof hotKey === 'number') {\n            // 禁止 default 将从 1 开始\n            hotKey++;\n          }\n\n          // 超出范围无法展示\n          if (!(typeof hotKey === 'number' && hotKey <= 9 && hotKey >= 0)) {\n            hotKey = '-';\n          }\n\n          let color =\n            index > 8 && !props.forbidDefault\n              ? COLORS_ARRAY[(index - 1) % COLORS_ARRAY.length]\n              : NEW_ATTRIBUTE_COLORS[index % NEW_ATTRIBUTE_COLORS.length];\n\n          if (i?.color) {\n            color = i.color;\n          }\n\n          const { defaultSize, logicalCondition, sizeRange } = i?.limit?.sizeLimit || {};\n          // Determine if a scope configuration exists\n          const hasLimit =\n            i?.limit?.positionLimit || defaultSize || sizeRange || logicalCondition?.length > 0;\n          const showLimitPopover = isChosen && hasLimit;\n\n          return (\n            <Radio value={i.value} ref={radioRef} key={i.label + index}>\n              <span className='sensebee-radio-label' title={i.label}>\n                {!props?.forbidColor && (\n                  <Popover\n                    content={\n                      <ColorPalette\n                        defaultColor={color}\n                        setColor={(color) => changeColor(i.value, color)}\n                      />\n                    }\n                    title={\n                      <div\n                        style={{\n                          display: 'flex',\n                          justifyContent: 'space-between',\n                          alignItems: 'center',\n                        }}\n                      >\n                        <span>{t('Palette')}</span>\n                        <CloseOutlined onClick={() => setPaletteVisible(false)} />\n                      </div>\n                    }\n                    visible={paletteVisible && editConfigIndex === index}\n                    onVisibleChange={(visible: any) => {\n                      if (!visible) {\n                        return;\n                      }\n                      setPaletteVisible(visible);\n                    }}\n                  >\n                    <ColorTag\n                      color={color}\n                      style={{ cursor: 'pointer', marginRight: '8px' }}\n                      onClick={() => {\n                        if (props?.enableColorPicker) {\n                          setEditConfigIndex(index);\n                          setPaletteVisible(true);\n                        }\n                      }}\n                    />\n                  </Popover>\n                )}\n                {i.label}\n              </span>\n\n              {showLimitPopover && <LimitPopover limit={i.limit} updateSize={props?.updateSize} />}\n              <span className='sensebee-radio-num'>{hotKey}</span>\n            </Radio>\n          );\n        })}\n      </Radio.Group>\n    </div>\n  );\n});\n\nexport default AttributeList;\n","export const COLORS_ARRAY = [\n  'rgba(128, 12, 249, 1)', // 6\n  'rgba(0, 255, 48, 1)', // 3\n  'rgba(255, 136, 247, 1)', // 7\n  'rgba(255, 226, 50, 1)', // 2\n  'rgba(153, 66, 23, 1)', // 8\n  'rgba(2, 130, 250, 1)', // 5\n  'rgba(255, 35, 35, 1)', // 1\n  'rgba(0, 255, 234, 1)', // 4\n];\n\nexport const NULL_COLOR = 'rgba(204, 204, 204, 1)';\n\nexport const DEFAULT_COLOR = {\n  valid: {\n    stroke: 'rgba(102, 111, 255, 0.6)',\n    fill: 'rgba(102, 111, 255, 0.3)',\n  },\n  invalid: {\n    stroke: 'rgba(255, 153, 102,1)',\n    fill: 'rgba(255, 153, 102, 0.5)',\n  },\n  validSelected: {\n    stroke: 'rgba(0, 15, 255, 0.8)',\n    fill: 'rgba(0, 15, 255, 0.4)',\n  },\n  invalidSelected: {\n    stroke: 'rgba(255,153,102,0.8)',\n    fill: 'rgba(255,153,102,0.3)',\n  },\n  validHover: {\n    stroke: 'rgba(0, 15, 255, 1)',\n    fill: 'rgba(0, 15, 255, 0.5)',\n  },\n\n  invalidHover: {\n    stroke: 'rgba(255,153,102,1)',\n    fill: 'rgba(255,153,102,0.5)',\n  },\n};\n\nexport const CHANGE_COLOR: { [a: number]: any } = {\n  1: {\n    valid: 'rgba(0, 0, 255, 0.5)',\n    select: {\n      stroke: 'rgba(0, 15, 255, 1)',\n      fill: 'rgba(0,15,255, 1)',\n    },\n    hover: 'rgba(0, 15, 255, 0.8)',\n    line: 'rgba(102, 111, 255, 1 )',\n  },\n  3: {\n    valid: 'rgba(0, 255, 255, 0.5)',\n    select: {\n      stroke: 'rgba(0, 212, 255,  1)',\n      fill: 'rgba(0,212,255, 1)',\n    },\n    hover: 'rgba(0, 212, 255, 0.8)',\n    line: 'rgba(102, 230, 255, 1)',\n  },\n  5: {\n    valid: 'rgba(0, 255, 0, 0.5)',\n    select: {\n      stroke: 'rgba(149, 255, 1)',\n      fill: 'rgba(149,255,0, 1)',\n    },\n    hover: 'rgba(149, 255, 0, 0.8)',\n    line: 'rgba(191, 255, 102, 1)',\n  },\n  7: {\n    valid: 'rgba(255, 255, 0, 0.5)',\n    select: {\n      stroke: 'rgba(255, 230, 102, 1)',\n      fill: 'rgba(255,213,0, 1)',\n    },\n    hover: 'rgba(255, 230, 102, 0.8)',\n    line: 'rgba(255, 230, 102, 1)',\n  },\n  9: {\n    valid: 'rgba(255, 0, 255, 0.5)',\n    select: {\n      stroke: 'rgba(230, 102, 255, 1)',\n      fill: 'rgba(213,0,255, 1)',\n    },\n    hover: 'rgba(230, 102, 255, 0.8)',\n    line: 'rgba(230, 102, 255, 1)',\n  },\n};\n\nexport const BORDER_OPACITY_LEVEL: { [a: number]: number } = {\n  0: 0,\n  1: 0.2,\n  3: 0.4,\n  5: 0.6,\n  7: 0.8,\n  9: 1.0,\n  10: 1.0,\n};\n\nexport const FILL_OPACITY_LEVEL: { [a: number]: number } = {\n  1: 0,\n  3: 0.2,\n  5: 0.4,\n  7: 0.6,\n  9: 0.8,\n  10: 1.0,\n};\n","import { IPointCloudBox } from '@labelbee/lb-utils';\nimport { useContext, useEffect, useCallback } from 'react';\nimport { PointCloudContext } from '../PointCloudContext';\n\nexport const useAttribute = () => {\n  const {\n    topViewInstance,\n    sideViewInstance,\n    backViewInstance,\n    mainViewInstance,\n    ptSegmentInstance,\n    defaultAttribute,\n    setDefaultAttribute,\n  } = useContext(PointCloudContext);\n\n  useEffect(() => {\n    if (!topViewInstance?.toolInstance) {\n      return;\n    }\n\n    const updateDefaultAttribute = () => {\n      setDefaultAttribute(topViewInstance?.toolInstance.defaultAttribute);\n    };\n\n    topViewInstance?.toolInstance.on('changeAttributeSidebar', updateDefaultAttribute);\n\n    return () => {\n      topViewInstance?.toolInstance.unbind('changeAttributeSidebar', updateDefaultAttribute);\n    };\n  }, [topViewInstance?.toolInstance]);\n\n  const syncThreeViewsAttribute = (attribute?: string) => {\n    [\n      topViewInstance?.toolInstance,\n      sideViewInstance?.toolInstance,\n      backViewInstance?.toolInstance,\n    ].forEach((instance) => {\n      instance?.setDefaultAttribute(attribute);\n    });\n  };\n\n  const updateDefaultAttribute = (attribute?: string) => {\n    topViewInstance?.toolInstance.setDefaultAttribute(attribute);\n  };\n\n  const reRenderPointCloud3DBox = (newBox: IPointCloudBox) => {\n    mainViewInstance?.generateBox(newBox);\n  };\n\n  const updateSegmentAttribute = useCallback((attribute: string) => {\n    if (!ptSegmentInstance) {\n      return\n    }\n    ptSegmentInstance.store?.setAttribute(attribute)\n    ptSegmentInstance.pointCloudRender?.updatePointsColor()\n    setDefaultAttribute(attribute)\n  }, [ptSegmentInstance])\n\n  return {\n    syncThreeViewsAttribute,\n    updateDefaultAttribute,\n    reRenderPointCloud3DBox,\n    defaultAttribute,\n    updateSegmentAttribute,\n  };\n};\n","import _ from 'lodash';\nimport React, { useContext } from 'react';\n\nimport hotKeySvg from '@/assets/annotation/toolHotKeyIcon/icon_kj1.svg';\nimport hotKeyHoverSvg from '@/assets/annotation/toolHotKeyIcon/icon_kj_h.svg';\nimport { EToolName } from '@/data/enums/ToolType';\nimport rectToolShortcutTable from './rectToolShortCutTable';\nimport pointToolShortcutTable from './point';\nimport polygonToolShortcutTable from './polygon';\nimport lineToolShortCutTable from './line';\nimport tagToolSingleShortCutTable from './tag';\nimport textToolShortCutTable from './text';\nimport videoToolShortCutTable from './videoTag';\nimport pointCloudShortCutTable, {\n  pointCloudShortCutTable_POLYGON,\n  pointCloudShortCutTable_SEGMENT,\n} from './pointCloud';\nimport scribbleShortCutTable from './scribble';\nimport cuboidShortCutTable from './cuboid';\nimport LLMShortCutTable from './LLM';\n\nimport { footerCls } from '../../index';\nimport { useTranslation } from 'react-i18next';\nimport { cTool } from '@labelbee/lb-annotation';\nimport { PointCloudContext } from '@/components/pointCloudView/PointCloudContext';\nimport FooterPopover from '@/views/MainView/toolFooter/FooterPopover';\nimport { EPointCloudPattern } from '@labelbee/lb-utils';\n\nconst { EVideoToolName, EPointCloudName } = cTool;\n\ninterface IProps {\n  toolName?: string;\n  style?: any;\n  title?: React.ReactElement<any>;\n}\n\ninterface IShortCutInfo {\n  name: string;\n  icon?: string;\n  shortCut?: string[];\n  noticeInfo?: string;\n}\n\ninterface IComponentsProps {\n  style?: any;\n  title?: React.ReactElement<any>;\n  shortCutList: IShortCutInfo[];\n}\n\nexport const shortCutTable: { [a: string]: IShortCutInfo[] } = {\n  [EToolName.Rect]: rectToolShortcutTable,\n  [EToolName.Tag]: tagToolSingleShortCutTable,\n  [EToolName.Point]: pointToolShortcutTable,\n  [EToolName.Polygon]: polygonToolShortcutTable,\n  [EToolName.Line]: lineToolShortCutTable,\n  [EToolName.Text]: textToolShortCutTable,\n  [EVideoToolName.VideoTagTool]: videoToolShortCutTable,\n  [EPointCloudName.PointCloud]: pointCloudShortCutTable,\n  [EPointCloudName.PointCloud + '_POLYGON']: pointCloudShortCutTable_POLYGON,\n  [EPointCloudName.PointCloud + '_SEGMENT']: pointCloudShortCutTable_SEGMENT,\n  [EToolName.ScribbleTool]: scribbleShortCutTable,\n  [EToolName.Cuboid]: cuboidShortCutTable,\n  [EToolName.LLM]: LLMShortCutTable,\n};\n\nconst ToolHotKeyIcon = ({ icon }: { icon: React.ReactElement | string }) => {\n  if (typeof icon === 'string') {\n    return <img width={16} height={16} src={icon} />;\n  }\n\n  if (icon) {\n    return icon;\n  }\n\n  return null;\n};\n\nexport const ToolHotKeyCom: React.FC<IComponentsProps> = ({ title, style, shortCutList }) => {\n  const { t } = useTranslation();\n\n  const shortCutStyle = {\n    width: 320,\n    display: 'flex',\n    justifyContent: 'space-between',\n    margin: 16,\n  };\n\n  const shortCutNameStyles: React.CSSProperties = {\n    display: 'block',\n    padding: '0 3px',\n    minWidth: '20px',\n    marginRight: '3px',\n    border: '1px solid rgba(204,204,204,1)',\n    verticalAlign: 'middle',\n    fontSize: '12px',\n    textAlign: 'center',\n  };\n\n  const setHotKey = (info: any, index: number) => (\n    <div style={shortCutStyle} key={index}>\n      <span style={{ display: 'flex', alignItems: 'center' }}>\n        <ToolHotKeyIcon icon={info.icon} />\n        <span style={{ marginLeft: info.icon ? 16 : 0 }}>{t(info.name)}</span>\n      </span>\n      <span style={{ display: 'flex', alignItems: 'center' }}>\n        {info.noticeInfo && (\n          <span style={{ marginRight: '5px', color: '#CCCCCC' }}>{t(info.noticeInfo)}</span>\n        )}\n        {setSVG(info.shortCut, info.shortCutUseHtml, info.linkSymbol)}\n      </span>\n    </div>\n  );\n\n  const setSVG = (list: any[], useDangerInnerHtml = false, linkSymbol = '+') => {\n    if (!list) {\n      return null;\n    }\n    const listDom = list.map((item, index) => {\n      const wrapperStyle = { display: 'flex', alignItems: 'center' };\n\n      if (useDangerInnerHtml) {\n        return (\n          <span key={index} style={wrapperStyle}>\n            <span style={shortCutNameStyles} dangerouslySetInnerHTML={{ __html: item }} />\n          </span>\n        );\n      }\n\n      if (index < list.length - 1) {\n        if (typeof item === 'number') {\n          return (\n            <span key={index} style={wrapperStyle}>\n              <span style={shortCutNameStyles}>{item}</span>\n              <span style={{ marginRight: '3px' }}>~</span>\n            </span>\n          );\n        }\n\n        if (item?.startsWith?.('data')) {\n          return (\n            <span key={index} style={wrapperStyle}>\n              <span className='shortCutButton' style={{ marginRight: '3px' }}>\n                <img width={16} height={23} src={item} />\n              </span>\n              <span style={{ marginRight: '3px' }}>+</span>\n            </span>\n          );\n        }\n        return (\n          <span key={index} style={wrapperStyle}>\n            <span style={shortCutNameStyles}>{item}</span>\n            <span style={{ marginRight: '3px' }}>{linkSymbol}</span>\n          </span>\n        );\n      }\n\n      if (typeof item === 'number') {\n        return (\n          <span key={index} style={wrapperStyle}>\n            <span style={shortCutNameStyles}>{item}</span>\n          </span>\n        );\n      }\n      if (item?.startsWith?.('data')) {\n        return (\n          <span className='shortCutButton' key={index} style={{ marginRight: '3px' }}>\n            <img width={16} height={23} src={item} />\n          </span>\n        );\n      }\n      return (\n        <span style={shortCutNameStyles} key={index}>\n          {item}\n        </span>\n      );\n    });\n    return (\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'space-around',\n          alignItems: 'center',\n        }}\n      >\n        {listDom}\n      </div>\n    );\n  };\n\n  const content = (\n    <div className={`${footerCls}__hotkey-content`}>\n      {shortCutList?.map((info: any, index: number) => setHotKey(info, index))}\n    </div>\n  );\n  const containerStyle = style || {};\n\n  return (\n    <FooterPopover\n      hoverIcon={hotKeyHoverSvg}\n      icon={hotKeySvg}\n      title={t('Hotkeys')}\n      content={content}\n      containerStyle={containerStyle}\n    />\n  );\n};\n\nconst ToolHotKey: React.FC<IProps> = ({ style, title, toolName }) => {\n  const { pointCloudPattern, globalPattern } = useContext(PointCloudContext);\n  if (!toolName) {\n    return null;\n  }\n\n  // 不存在对应的工具则不展示的快捷键\n  if (!shortCutTable[toolName]) {\n    return null;\n  }\n\n  let newToolName = toolName;\n\n  /**\n   * PointCloud Segment.\n   */\n  switch (globalPattern) {\n    case EPointCloudPattern.Detection:\n      /**\n       * PointCloud Detection.\n       */\n      switch (pointCloudPattern) {\n        case EToolName.Polygon:\n          newToolName += '_POLYGON';\n\n          break;\n        case EToolName.Line:\n          newToolName = EToolName.Line;\n\n          break;\n        case EToolName.Point:\n          newToolName = EToolName.Point;\n\n          break;\n        default:\n          break;\n      }\n      break;\n    case EPointCloudPattern.Segmentation:\n      newToolName = EPointCloudName.PointCloud + '_SEGMENT';\n      break;\n  }\n\n  const props = {\n    style,\n    title,\n    shortCutList: shortCutTable[newToolName],\n  };\n\n  return <ToolHotKeyCom {...props} />;\n};\n\nexport default ToolHotKey;\n","/**\n * @file Zoom Updated by PointCloud\n * @createDate 2022-09-04\n * @author Ron <ron.f.luo@gmail.com>\n */\nimport { useContext } from 'react';\nimport { PointCloudContext } from '../PointCloudContext';\nimport { ICoordinate, ISize } from '@labelbee/lb-utils';\n\nexport const useZoom = () => {\n  const { topViewInstance, sideViewInstance, backViewInstance } = useContext(PointCloudContext);\n  const { zoom, setZoom } = useContext(PointCloudContext);\n\n  const initialPosition = () => {\n    topViewInstance?.toolInstance.initImgPos();\n  };\n\n  const zoomOut = () => {\n    topViewInstance?.toolInstance.zoomChanged(false);\n  };\n\n  const zoomIn = () => {\n    topViewInstance?.toolInstance.zoomChanged(true);\n  };\n\n  const syncTopviewToolZoom = (currentPos: ICoordinate, zoom: number, size: ISize) => {\n    topViewInstance?.toolScheduler.syncPosition(\n      currentPos,\n      zoom,\n      size,\n      topViewInstance?.toolInstance,\n    );\n  };\n\n  const syncSideviewToolZoom = (currentPos: ICoordinate, zoom: number, size: ISize) => {\n    sideViewInstance?.toolScheduler.syncPosition(\n      currentPos,\n      zoom,\n      size,\n      sideViewInstance?.toolInstance,\n    );\n  };\n\n  const syncBackviewToolZoom = (currentPos: ICoordinate, zoom: number, size: ISize) => {\n    backViewInstance?.toolScheduler.syncPosition(\n      currentPos,\n      zoom,\n      size,\n      backViewInstance?.toolInstance,\n    );\n  };\n\n  return {\n    zoom,\n    setZoom,\n    initialPosition,\n    zoomOut,\n    zoomIn,\n    syncTopviewToolZoom,\n    syncSideviewToolZoom,\n    syncBackviewToolZoom,\n  };\n};\n","/**\n * @author Glenfiddish <edwinlee0927@hotmail.com>\n * @file Display selected box's infos\n * @createdate 2022-07-13\n */\n\nimport { EPerspectiveView, IPointCloudConfig, PointCloudUtils } from '@labelbee/lb-utils';\nimport React, { useEffect, useState } from 'react';\nimport { PointCloudContext } from './PointCloudContext';\nimport { UnitUtils } from '@labelbee/lb-annotation';\nimport { useSingleBox } from './hooks/useSingleBox';\nimport { useTranslation } from 'react-i18next';\n\nconst DECIMAL_PLACES = 2;\n\nconst DEFAULT_BOX_INFO_STYLE = {\n  color: 'white',\n  backgroundColor: 'rgba(153, 153, 153, 0.3)',\n  padding: '8px 10px',\n  zIndex: 20,\n  fontSize: 12,\n};\n\n/**\n * Display size info for views\n * @param param0\n * @returns\n */\nexport const SizeInfoForView = ({ perspectiveView }: { perspectiveView: EPerspectiveView }) => {\n  const { pointCloudBoxList, selectedID } = React.useContext(PointCloudContext);\n  const box = pointCloudBoxList.find((i) => i.id === selectedID);\n  const trans = useTranslation();\n  const { t } = trans;\n\n  if (selectedID && box) {\n    const { length, width, height } = PointCloudUtils.transferBox2Kitti(box);\n    const infos =\n      perspectiveView === EPerspectiveView.Back\n        ? [\n            {\n              label: t('Width'),\n              value: width,\n            },\n            {\n              label: t('Height'),\n              value: height,\n            },\n          ]\n        : [\n            {\n              label: t('Length'),\n              value: length,\n            },\n            {\n              label: t('Height'),\n              value: height,\n            },\n          ];\n\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          ...DEFAULT_BOX_INFO_STYLE,\n          bottom: '4%',\n          left: '50%',\n          transform: 'translate(-50%, 0)',\n        }}\n      >\n        {infos.map((info, index) => (\n          <span key={index} style={{ marginRight: index === 0 ? 16 : 0 }}>{`${\n            info.label\n          }: ${info.value.toFixed(DECIMAL_PLACES)}`}</span>\n        ))}\n      </div>\n    );\n  }\n  return null;\n};\n\n/**\n * Display selected box's infos\n */\nexport const BoxInfos = ({\n  checkMode,\n  config,\n  style,\n}: {\n  checkMode?: boolean;\n  config: IPointCloudConfig;\n  style?: React.CSSProperties;\n}) => {\n  const ptCtx = React.useContext(PointCloudContext);\n  const { selectedBox } = useSingleBox();\n  const [infos, setInfos] = useState<Array<{ label: string; value: string }>>([]);\n  const trans = useTranslation();\n  const { t, i18n } = trans;\n  const isShowOnHeader = style;\n\n  useEffect(() => {\n    if (!selectedBox) {\n      return;\n    }\n    const { length, width, height, rotation_y } = PointCloudUtils.transferBox2Kitti(\n      selectedBox.info,\n    );\n    const { x, y, z } = selectedBox.info.center;\n\n    let infos = [\n      {\n        label: 'x',\n        value: x.toFixed(DECIMAL_PLACES),\n      },\n      {\n        label: 'y',\n        value: y.toFixed(DECIMAL_PLACES),\n      },\n      {\n        label: 'z',\n        value: z.toFixed(DECIMAL_PLACES),\n      },\n      {\n        label: t('Length'),\n        value: length.toFixed(DECIMAL_PLACES),\n      },\n      {\n        label: t('Width'),\n        value: width.toFixed(DECIMAL_PLACES),\n      },\n      {\n        label: t('Height'),\n        value: height.toFixed(DECIMAL_PLACES),\n      },\n      {\n        label: t('Rotation_y'),\n        value: UnitUtils.rad2deg(rotation_y).toFixed(DECIMAL_PLACES),\n      },\n    ];\n    // Get Point Count.\n    ptCtx.mainViewInstance?.filterPointsByBox(selectedBox.info).then((data) => {\n      if (!data) {\n        setInfos(infos);\n        return;\n      }\n\n      infos.push({\n        label: t('PointCount'),\n        value: `${data.num}`,\n      });\n\n      //  SubAttribute is shown in checkMode\n      if (checkMode === true && selectedBox.info.subAttribute && config) {\n        const subAttributeNameList = PointCloudUtils.getSubAttributeName(\n          selectedBox.info.subAttribute,\n          config,\n        );\n        subAttributeNameList.forEach((data) => infos.push(data));\n      }\n\n      setInfos(infos);\n    });\n  }, [selectedBox, i18n.language]);\n\n  if (selectedBox) {\n    return (\n      <div\n        style={\n          style\n            ? style\n            : {\n                position: 'absolute',\n                ...DEFAULT_BOX_INFO_STYLE,\n                right: 8,\n                bottom: 8,\n              }\n        }\n      >\n        {infos.map((i) => {\n          if (isShowOnHeader) {\n            return (\n              <div key={i.label} style={{ margin: '0px 4px' }}>\n                {`${i.label}: ${i.value}`}\n              </div>\n            );\n          }\n          return (\n            <div key={i.label}>\n              <span style={{ width: '38px', display: 'inline-block', textAlign: 'end' }}>\n                {i.label}\n              </span>\n              : <span>{i.value}</span>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport const PointCloudValidity = () => {\n  const ptCtx = React.useContext(PointCloudContext);\n  const { t } = useTranslation();\n\n  if (ptCtx.valid === false) {\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          backgroundColor: 'rgb(242, 101, 73)',\n          color: 'white',\n          opacity: 0.7,\n          left: 0,\n          top: 0,\n          fontSize: 30,\n          padding: '8px 16px',\n          zIndex: 20,\n          width: '100%',\n          height: '100%',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        {t('Invalid')}\n      </div>\n    );\n  }\n  return null;\n};\n","/**\n * 用于标注查看模式\n * @author laoluo\n */\n\nimport React, { useEffect, useRef, useImperativeHandle, useState } from 'react';\nimport { ViewOperation, ImgUtils } from '@labelbee/lb-annotation';\nimport { Spin } from 'antd/es';\nimport useRefCache from '@/hooks/useRefCache';\n\ntype TAfterImgOnLoad = (img: HTMLImageElement) => void;\n\ninterface IProps {\n  src: string; // 图片路径\n  size?: {\n    width?: number;\n    height?: number;\n  };\n  style?: {\n    color?: string;\n    fill?: string;\n    thickness?: number;\n  };\n  annotations: any[]; // TODO\n  zoomChange?: (zoom: number) => void;\n  backgroundStyle?: React.CSSProperties;\n  onChange?: (type: 'hover' | 'selected', ids: string[]) => void;\n\n  showLoading?: boolean;\n  globalStyle?: React.CSSProperties; // Custom global style.\n\n  afterImgOnLoad?: TAfterImgOnLoad;\n  zoomInfo?: {\n    min: number;\n    max: number;\n    ratio: number;\n  };\n}\n\nconst DEFAULT_SIZE = {\n  width: 455,\n  height: 100, // Most Important, If the outer size is smaller than this will not take effect by default\n};\n\nconst sizeInitialized = (size?: { width?: number; height?: number }) => {\n  if (!size) {\n    return DEFAULT_SIZE;\n  }\n  if (size.width && size.height) {\n    return size;\n  }\n\n  const newSize = {\n    ...size,\n  };\n\n  if (!newSize.width) {\n    newSize.width = DEFAULT_SIZE.width;\n  }\n\n  if (!newSize.height) {\n    newSize.height = DEFAULT_SIZE.height;\n  }\n\n  return newSize;\n};\n\nconst AnnotationView = (props: IProps, ref: any) => {\n  const {\n    src,\n    annotations = [],\n    style = {\n      stroke: 'blue',\n      thickness: 3,\n    },\n    zoomChange,\n    backgroundStyle = {},\n    onChange,\n    showLoading = false,\n    globalStyle,\n    afterImgOnLoad,\n  } = props;\n  const size = sizeInitialized(props.size);\n  const [loading, setLoading] = useState(false);\n  const annotationRef = useRef<HTMLDivElement>(null);\n  const viewOperation = useRef<ViewOperation>();\n  const afterImgOnLoadRef = useRefCache<TAfterImgOnLoad | undefined>(afterImgOnLoad);\n\n  useImperativeHandle(\n    ref,\n    () => {\n      const toolInstance = viewOperation.current;\n      if (!toolInstance) {\n        return {};\n      }\n\n      return {\n        zoomIn: () => toolInstance.zoomChanged(true), // 放大\n        zoomOut: () => toolInstance.zoomChanged(false), // 缩小\n        initImgPos: () => toolInstance.initImgPos(),\n        toolInstance,\n      };\n    },\n    [viewOperation.current],\n  );\n\n  useEffect(() => {\n    if (annotationRef.current) {\n      viewOperation.current = new ViewOperation({\n        container: annotationRef.current,\n        size,\n        style,\n        annotations,\n        config: '{}', // TODO，暂时不需要\n        zoomInfo: props.zoomInfo,\n      });\n\n      viewOperation.current.init();\n    }\n\n    return () => {\n      viewOperation.current?.destroy();\n    };\n  }, []);\n\n  useEffect(() => {\n    if (viewOperation.current) {\n      setLoading(true);\n      viewOperation.current?.setLoading(true);\n      ImgUtils.load(src)\n        .then((imgNode: HTMLImageElement) => {\n          viewOperation.current?.setLoading(false);\n          setLoading(false);\n\n          viewOperation.current?.setImgNode(imgNode);\n\n          if (afterImgOnLoadRef.current) {\n            afterImgOnLoadRef.current(imgNode);\n          }\n        })\n        .catch(() => {\n          viewOperation.current?.setLoading(false);\n          setLoading(false);\n        });\n    }\n  }, [src]);\n\n  /**\n   * 基础数据绘制监听\n   */\n  useEffect(() => {\n    if (viewOperation.current) {\n      viewOperation.current.updateData(annotations);\n    }\n  }, [annotations]);\n\n  /** 窗口大小监听 */\n  useEffect(() => {\n    const toolInstance = viewOperation.current;\n\n    if (toolInstance?.setSize) {\n      toolInstance.setSize(size);\n      toolInstance.initPosition();\n    }\n  }, [props.size?.width, props.size?.height]);\n\n  useEffect(() => {\n    if (viewOperation.current) {\n      viewOperation.current?.on('onChange', (...args: any) => {\n        onChange?.apply(null, args);\n      });\n\n      viewOperation.current?.on('renderZoom', (zoom: number) => {\n        if (zoomChange) {\n          zoomChange(zoom);\n        }\n      });\n    }\n    return () => {\n      viewOperation.current?.unbindAll('onChange');\n      viewOperation.current?.unbindAll('renderZoom');\n    };\n  }, [zoomChange, onChange]);\n\n  const mainRender = (\n    <div ref={annotationRef} style={{ position: 'relative', ...size, ...backgroundStyle }} />\n  );\n\n  return (\n    <Spin spinning={showLoading || loading} delay={300} style={globalStyle}>\n      {mainRender}\n    </Spin>\n  );\n\n  // return mainRender;\n};\n\nexport default React.forwardRef(AnnotationView);\n","/*\n * @file Question view\n * @Author: lixinghua lixinghua@sensetime.com\n * @Date: 2023-04-10\n */\n\nimport React, { useEffect } from 'react';\nimport { Tag } from 'antd';\nimport LongText from '@/components/longText';\nimport { prefix } from '@/constant';\nimport classNames from 'classnames';\nimport { useTranslation, I18nextProvider } from 'react-i18next';\nimport { IAnswerList } from '@/components/LLMToolView/types';\nimport { i18n } from '@labelbee/lb-utils';\n\ninterface IProps {\n  hoverKey?: number;\n  question: string;\n  answerList: IAnswerList[];\n  lang?: string;\n}\nconst LLMViewCls = `${prefix}-LLMView`;\nconst QuestionView: React.FC<IProps> = (props) => {\n  const { hoverKey, question, answerList, lang } = props;\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (lang) {\n      i18n?.changeLanguage(lang);\n    }\n  }, []);\n\n  return (\n    <div className={LLMViewCls}>\n      <div className={`${LLMViewCls}__textBox`} style={{ borderBottom: '1px solid #EBEBEB' }}>\n        <div className={`${LLMViewCls}__title`}>{t('Title')}</div>\n        <div className={`${LLMViewCls}__content`}>\n          <LongText wordCount={200} text={question} />\n        </div>\n      </div>\n      <div className={`${LLMViewCls}__textBox`}>\n        <div className={`${LLMViewCls}__title`}>{t('Answer')}</div>\n        {answerList.map((i: IAnswerList, index: number) => (\n          <div\n            className={classNames({\n              [`${LLMViewCls}__content`]: true,\n              [`${LLMViewCls}__contentActive`]: hoverKey === i?.order,\n            })}\n            key={index}\n          >\n            <Tag\n              style={{\n                color: '#666FFF',\n                background: '#eeefff',\n                height: '20px',\n                padding: '0px 8px',\n                border: 'none',\n              }}\n            >\n              {i?.order}\n            </Tag>\n            <LongText wordCount={1000} text={i?.answer} />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst WrapQuestionView = (props: IProps) => {\n  return (\n    <I18nextProvider i18n={i18n}>\n      <QuestionView {...props} />\n    </I18nextProvider>\n  );\n};\n\nexport default WrapQuestionView;\n","import {\n  editStepWidth,\n  footerHeight,\n  headerHeight,\n  sidebarWidth,\n} from '@/data/enums/AnnotationSize';\nimport { cKeyCode, toolUtils } from '@labelbee/lb-annotation';\n\nimport React, { useContext, useEffect, useMemo, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { AppState } from '@/store';\nimport {\n  UpdateRotate,\n  PageBackward,\n  PageForward,\n  UpdateToolInstance,\n  CopyBackWordResult,\n  // UpdateValid,\n} from '@/store/annotation/actionCreators';\nimport { ISize } from '@/types/main';\nimport { message } from 'antd';\nimport { LabelBeeContext } from '@/store/ctx';\n\nconst EKeyCode = cKeyCode.default;\n\nexport const viewportContext = React.createContext<{\n  width: number;\n  height: number;\n}>({\n  width: window.innerWidth,\n  height: window.innerHeight,\n});\n\nexport const ViewportProviderComponent = (props: any) => {\n  const {\n    children,\n    dispatch,\n    annotation: { skipBeforePageTurning, checkMode },\n  } = props;\n  const [width] = useState(window.innerWidth);\n  const [height] = useState(window.innerHeight);\n\n  const keydown = (e: KeyboardEvent) => {\n    if (!toolUtils.hotkeyFilter(e) || checkMode) {\n      return;\n    }\n\n    if (!e.shiftKey && !e.ctrlKey) {\n      if (e.keyCode === EKeyCode.A) {\n        if (skipBeforePageTurning) {\n          skipBeforePageTurning(() => dispatch(PageBackward()));\n          return;\n        }\n\n        dispatch(PageBackward());\n      }\n\n      if (e.keyCode === EKeyCode.D) {\n        if (skipBeforePageTurning) {\n          skipBeforePageTurning(() => dispatch(PageForward()));\n          return;\n        }\n        dispatch(PageForward());\n      }\n      if (e.keyCode === EKeyCode.R) {\n        dispatch(UpdateRotate());\n      }\n\n      if (e.keyCode === EKeyCode.C && e.altKey === true) {\n        dispatch(CopyBackWordResult());\n      }\n\n      // Temporarily hide. Because there is something wrong with i18n.\n      // if (e.keyCode === EKeyCode.Y) {\n      //   dispatch(UpdateValid());\n      // }\n    }\n\n    /**\n     * Hidden Feature\n     *\n     * User: Software Engineer\n     */\n    if (\n      e.shiftKey === true &&\n      e.ctrlKey === true &&\n      e.altKey === true &&\n      e.keyCode === EKeyCode.C\n    ) {\n      message.success('DEVELOPMENT TESTING - Switch Last Two Canvas');\n      const newInstance = props.annotation?.annotationEngine.switchLastTwoCanvas();\n      if (!newInstance) {\n        return;\n      }\n      dispatch(UpdateToolInstance(newInstance));\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', keydown);\n\n    return () => {\n      window.removeEventListener('keydown', keydown);\n    };\n  }, [props.annotation.annotationEngine, props.annotation.skipBeforePageTurning, checkMode]);\n\n  const size = useMemo(() => ({ width, height }), [width, height]);\n\n  return <viewportContext.Provider value={size}>{children}</viewportContext.Provider>;\n};\nexport const ViewportProvider = connect(\n  (state: AppState) => ({\n    annotation: state.annotation,\n  }),\n  null,\n  null,\n  { context: LabelBeeContext },\n)(ViewportProviderComponent);\n\nexport const useViewport = () => {\n  const { width, height } = useContext(viewportContext);\n  return { width, height };\n};\n\n/**\n * 获取当前 canvas 的大小\n * @param isEdit 是否为编辑模式\n * @param isTips 是否有 tips\n */\nexport const useCanvasViewPort = (isEdit = false, isTips = false) => {\n  const { width, height } = useContext(viewportContext);\n  const otherHeight = headerHeight + footerHeight;\n  const placeholderHeight = isTips ? 40 + otherHeight + 40 : otherHeight;\n  const placeholderWidth = isEdit ? editStepWidth + sidebarWidth : sidebarWidth;\n\n  return {\n    width: width - placeholderWidth,\n    height: height - placeholderHeight,\n  };\n};\n\n/**\n * 解析当前 windowSize 下的 canvasSize\n * @param size\n * @param isEdit\n * @param isTips\n */\nexport const getFormatSize = (windowSize: ISize, isEdit = false, isTips = false) => {\n  const { width, height } = windowSize;\n  const otherHeight = headerHeight + footerHeight;\n  const placeholderHeight = isTips ? 40 + otherHeight + 40 : otherHeight;\n  const placeholderWidth = isEdit ? editStepWidth + sidebarWidth : sidebarWidth;\n\n  return {\n    width: width - placeholderWidth,\n    height: height - placeholderHeight,\n  };\n};\n","import { isObject } from 'lodash';\n\nexport class ConfigUtils {\n  public static jsonParser(content: any, defaultValue: any = {}) {\n    try {\n      if (typeof content === 'string') {\n        return JSON.parse(content);\n      }\n      return isObject(content) ? content : defaultValue;\n    } catch (e) {\n      return defaultValue;\n    }\n  }\n\n  /**\n   * 获取对应的步骤配置\n   * @param stepList \n   * @param step \n   */\n  public static getStepConfig = (stepList: any[], step: number) =>\n    stepList.find((i) => i.step === step);\n}\n","import { ReloadOutlined } from '@ant-design/icons';\nimport { Button } from 'antd/es';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport interface IFileErrorProps {\n  width?: number;\n  height?: number;\n  reloadImage: () => void;\n  hideSetInvalidTips?: boolean;\n  /** 忽略顶部的偏移，如: 多边形的容器已经计算好高度（容器不包含顶部标注提示语部分） */\n  ignoreOffsetY?: boolean;\n  layerStyle?: React.CSSProperties;\n  backgroundColor: string;\n  fileType?: string;\n  isError?: boolean;\n}\n\nconst FileError = (props: IFileErrorProps) => {\n  const {\n    width,\n    height,\n    reloadImage,\n    hideSetInvalidTips,\n    ignoreOffsetY,\n    backgroundColor,\n    fileType = 'image',\n  } = props;\n\n  const { t } = useTranslation();\n\n  const top = !ignoreOffsetY ? 40 : 0;\n\n  const layerStyle: React.CSSProperties = props.layerStyle || {\n    position: 'absolute',\n    left: 0,\n    top,\n    cursor: 'initial',\n    zIndex: 20,\n    fontSize: 12,\n  };\n  if (width && height) {\n    Object.assign(layerStyle, { width, height });\n  } else {\n    Object.assign(layerStyle, { bottom: 0, right: 0 });\n  }\n\n  if (backgroundColor) {\n    Object.assign(layerStyle, { backgroundColor });\n  }\n\n  const buttonStyle: React.CSSProperties = {\n    position: 'absolute',\n    top: '30%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n  };\n\n  return (\n    <div style={layerStyle}>\n      <div style={buttonStyle}>\n        <div style={{ textAlign: 'center', marginBottom: 10 }}>\n          <Button type='primary' shape='circle' icon={<ReloadOutlined />} onClick={reloadImage} />\n        </div>\n        <div>\n          {`${t(`${fileType}ErrorAndReload`)}${hideSetInvalidTips ? '' : t('orMaskAsInvalid')}`}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FileError;\n","import { TOOL_STYLE_ACTIONS } from '@/store/Actions';\nimport { ToolStyleActionTypes, ToolStyleState } from './types';\n\nexport function InitToolStyleConfig(): ToolStyleActionTypes {\n  return {\n    type: TOOL_STYLE_ACTIONS.INIT_TOOL_STYLE_CONFIG,\n    payload: undefined\n  };\n}\n\nexport function UpdateToolStyleConfig(toolStyle: Partial<ToolStyleState>): ToolStyleActionTypes {\n  return {\n    type: TOOL_STYLE_ACTIONS.UPDATE_TOOL_STYLE_CONFIG,\n    payload: toolStyle,\n  };\n}\n\nexport default {\n  InitToolStyleConfig,\n  UpdateToolStyleConfig,\n};\n","/*\n * Annotation Tips Showing\n * @Author: Laoluo luozefeng@sensetime.com\n * @Date: 2022-05-11 17:15:30\n * @LastEditors: Laoluo luozefeng@sensetime.com\n * @LastEditTime: 2022-05-12 19:34:32\n */\nimport React from 'react';\nimport { Tooltip } from 'antd';\nimport { prefix } from '@/constant';\n\ninterface IProps {\n  tips?: string;\n  path?: string;\n}\n\nconst AnnotationTips = ({ path, tips }: IProps) => {\n  if (!path && !tips) {\n    return null;\n  }\n\n  return (\n    <div className={`${prefix}-tips`}>\n      <Tooltip placement='bottomRight' title={tips}>\n        <span className={`${prefix}-tips__leftContent`} title={tips}>\n          {tips}\n        </span>\n      </Tooltip>\n      <Tooltip placement='bottomRight' title={path}>\n        <span className={`${prefix}-tips__path`}>{path}</span>\n      </Tooltip>\n    </div>\n  );\n};\n\nexport default AnnotationTips;\n","/*\n * @Author: Laoluo luozefeng@sensetime.com\n * @Date: 2022-01-12 13:15:33\n * @LastEditors: Laoluo luozefeng@sensetime.com\n * @LastEditTime: 2022-05-30 15:51:43\n */\nimport { ETextType } from '@/data/enums/ToolType';\nimport { i18n } from '@labelbee/lb-utils';\n\nexport const REGEXP_NUMBER = '^[0-9]+$';\nexport const REGEXP_ENGLISH = '^[A-Za-z]+$';\n\nexport class TextUtils {\n  public static checkString(textCheckType: ETextType, customFormat: string) {\n    let regExpString = '';\n    switch (textCheckType) {\n      case ETextType.Order:\n      case ETextType.NumberOnly:\n        regExpString = REGEXP_NUMBER;\n        break;\n      case ETextType.EnglishOnly:\n        regExpString = REGEXP_ENGLISH;\n        break;\n      case ETextType.CustomFormat:\n        regExpString = customFormat;\n        break;\n    }\n    return regExpString;\n  }\n\n  public static getErrorNotice(textCheckType: ETextType) {\n    switch (textCheckType) {\n      case ETextType.Order:\n      case ETextType.NumberOnly:\n        return i18n.t(\"TextCheckNumberOnly\");\n      case ETextType.EnglishOnly:\n        return i18n.t(\"TextCheckEnglishOnly\");\n      case ETextType.CustomFormat:\n        return i18n.t(\"TextCheckCustomFormat\");\n      default:\n        return '';\n    }\n  }\n}\n","import { IMAGE_ATTRIBUTE_ACTIONS } from '@/store/Actions';\nimport { ImgAttributeActionTypes, ImgAttributeState } from './types';\n\nexport function UpdateImgAttribute(imgAttribute: ImgAttributeState): ImgAttributeActionTypes {\n  return {\n    type: IMAGE_ATTRIBUTE_ACTIONS.UPDATE_IMG_ATTRIBUTE,\n    payload: imgAttribute,\n  };\n}\n\nexport function InitImgAttribute(): ImgAttributeActionTypes {\n  return {\n    type: IMAGE_ATTRIBUTE_ACTIONS.INIT_IMG_ATTRIBUTE,\n    payload: {}\n  };\n}\n\nexport default {\n  UpdateImgAttribute,\n  InitImgAttribute,\n};\n","import RadioList from '@/components/attributeList';\nimport CheckBoxList from '@/components/checkboxList';\nimport { CaretRightOutlined } from '@ant-design/icons';\nimport { Badge, Collapse, Tooltip } from 'antd/es';\nimport { cloneDeep } from 'lodash';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport clearSmall from '@/assets/annotation/common/icon_clearSmall.svg';\nimport clearSmallA from '@/assets/annotation/common/icon_clearSmall_a.svg';\nimport { TagOperation, TagUtils } from '@labelbee/lb-annotation';\nimport { connect } from 'react-redux';\nimport { AppState } from '@/store';\nimport { IInputList } from '@/types/main';\nimport { useTranslation } from 'react-i18next';\nimport { LabelBeeContext } from '@/store/ctx';\n\ninterface IProps {\n  imgIndex: number;\n  toolInstance: TagOperation;\n}\n\nconst { Panel } = Collapse;\n\nexport const expandIconFuc = ({ isActive }: any) => (\n  <CaretRightOutlined rotate={isActive ? 90 : 0} />\n);\n\nconst TagSidebar: React.FC<IProps> = ({ toolInstance, imgIndex }) => {\n  const [expandKeyList, setExpandKeyList] = useState<string[]>([]);\n\n  const sidebarRef = useRef<HTMLDivElement>(null);\n  const [, forceRender] = useState<number>(0);\n  const [hoverDeleteIndex, setHoverDeleteIndex] = useState(-1);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (toolInstance) {\n      // 用于配置的初始化\n      setExpandKeyList(toolInstance.config.inputList.map((v: IInputList) => v.value));\n\n      // 进行实时渲染\n      toolInstance.singleOn('render', () => {\n        forceRender((s) => s + 1);\n      });\n    }\n  }, [toolInstance]);\n\n  useEffect(() => {\n    if (toolInstance) {\n      // 该写法会不断的重复绑定，后续写法上可以更改（如果将 singleOn 改为 on 会有很大问题）\n      toolInstance.singleOn('expend', expendRender);\n\n      if (toolInstance.labelSelectedList.length === 1) {\n        let height = 0;\n        for (let i = 0; i < toolInstance.labelSelectedList[0]; i++) {\n          height += 46;\n          inputList[i] &&\n            expandKeyList[i] !== '' &&\n            inputList[i].subSelected.forEach((i: any) => {\n              height += 40;\n            });\n        }\n        if (sidebarRef.current) {\n          sidebarRef.current.children[0].scrollTop = height;\n        }\n      }\n    }\n  });\n\n  useEffect(() => {\n    // 翻页侧边栏跳到最上\n    if (sidebarRef.current) {\n      sidebarRef.current.children[0].scrollTop = 0;\n    }\n  }, [imgIndex]);\n\n  const expendRender = () => {\n    const index = toolInstance.labelSelectedList[0];\n    const value = inputList.filter((v: IInputList, i: number) => i === index)[0]?.value;\n    setExpendKeyList(index, value, true);\n  };\n\n  const setExpendKeyList = useCallback(\n    (index: number, value: string, expend?: boolean) => {\n      const newKeyList = cloneDeep(expandKeyList);\n      if (newKeyList[index] === '' || expend === true) {\n        newKeyList[index] = value;\n      } else {\n        newKeyList[index] = '';\n      }\n      setExpandKeyList(newKeyList);\n    },\n    [expandKeyList],\n  );\n\n  if (!toolInstance) return null;\n\n  const {\n    labelSelectedList,\n    config: { inputList },\n    currentTagResult,\n    setLabel,\n  } = toolInstance;\n\n  const selectedButton = (index: number) => {\n    if (labelSelectedList.length > 0 && labelSelectedList[0] === index) {\n      return <span className='keyDownIconActive'>{index + 1}</span>;\n    }\n    return <span className='keyDownIcon'>{index + 1}</span>;\n  };\n\n  // basicIndex 到底是那一层\n  const labelPanel = (labelInfoSet: IInputList[], basicIndex = -1) => {\n    if (!labelInfoSet) {\n      return null;\n    }\n\n    return labelInfoSet.map((info: IInputList, index: number) => {\n      if (info.subSelected) {\n        // 判断是否有数据\n        const isResult = TagUtils.judgeResultIsInInputList(\n          info.value,\n          currentTagResult?.result?.[info.value],\n          inputList,\n        );\n\n        return (\n          <Collapse\n            bordered={false}\n            expandIcon={expandIconFuc}\n            key={`collapse_${index}_${basicIndex + 1}`}\n            onChange={() => setExpendKeyList(index, info.value)}\n            activeKey={[expandKeyList[index]]}\n          >\n            <Panel\n              header={\n                <div\n                  style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    flex: 1,\n                  }}\n                >\n                  <span>\n                    {info.key}\n                    <Tooltip placement='bottom' title={t('ClearThisOption')}>\n                      <img\n                        style={{ marginLeft: 5, cursor: 'pointer' }}\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          toolInstance.clearResult(true, info.value);\n                        }}\n                        src={hoverDeleteIndex === index || isResult ? clearSmallA : clearSmall}\n                        onMouseEnter={() => {\n                          setHoverDeleteIndex(index);\n                        }}\n                        onMouseLeave={() => {\n                          setHoverDeleteIndex(-1);\n                        }}\n                      />\n                    </Tooltip>\n                    {isResult && expandKeyList[index] === '' && <Badge color='#87d068' />}\n                  </span>\n\n                  {inputList?.length > 1 && selectedButton(index)}\n                </div>\n              }\n              key={info.value}\n            >\n              <div\n                className='level'\n                style={{\n                  backgroundColor:\n                    labelSelectedList.length > 0 && labelSelectedList[0] === index\n                      ? 'rgba(158, 158, 158, 0.18)'\n                      : '',\n                }}\n              >\n                {labelPanel(info.subSelected, index)}\n              </div>\n            </Panel>\n          </Collapse>\n        );\n      }\n      const key = inputList?.[basicIndex] ? inputList?.[basicIndex].value : 0;\n      const selectedAttribute =\n        currentTagResult?.result?.[key]?.split(';')?.indexOf(info.value) > -1 ? info.value : '';\n\n      if (inputList?.[basicIndex]?.isMulti === true) {\n        return (\n          <div className='singleBar' key={`${key}_${basicIndex}_${index}`}>\n            <CheckBoxList\n              attributeChanged={() => setLabel(basicIndex, index)}\n              selectedAttribute={[selectedAttribute]}\n              list={[{ value: info.value, label: info.key }]}\n              num={index + 1}\n            />\n          </div>\n        );\n      }\n      return (\n        <div className='singleBar' key={`${key}_${basicIndex}_${index}`}>\n          <RadioList\n            forbidColor\n            attributeChanged={() => setLabel(basicIndex, index)}\n            selectedAttribute={selectedAttribute}\n            list={[{ value: info.value, label: info.key }]}\n            num={index + 1}\n          />\n        </div>\n      );\n    });\n  };\n  const height = window.innerHeight - 61 - 80;\n\n  return (\n    <div className='tagOperationMenu' ref={sidebarRef}>\n      {inputList?.length === 0 ? (\n        <div style={{ padding: 20, textAlign: 'center' }}>{t('NoConfiguration')}</div>\n      ) : (\n        <div className='main' style={{ height }}>\n          {labelPanel(inputList)}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction mapStateToProps(state: AppState) {\n  return { toolInstance: state.annotation.toolInstance, imgIndex: state.annotation.imgIndex };\n}\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(TagSidebar);\n","/**\n * @file Tool options on tool's sidebar\n * @author Glenfiddish <edwinlee0927@hotmail.com>\n * @createdate 2022-07-14\n */\n\nimport { EToolName } from '@/data/enums/ToolType';\nimport React from 'react';\nimport { sidebarCls } from './index';\nimport lineSvg from '@/assets/annotation/lineTool/icon_line.svg';\nimport lineASvg from '@/assets/annotation/lineTool/icon_line_a.svg';\nimport pointSvg from '@/assets/annotation/pointTool/icon_point.svg';\nimport pointASvg from '@/assets/annotation/pointTool/icon_point_a.svg';\nimport PolygonASvg from '@/assets/annotation/polygonTool/icon_polygon_a.svg';\nimport PolygonSvg from '@/assets/annotation/polygonTool/icon_polygon.svg';\nimport rectSvg from '@/assets/annotation/rectTool/icon_rect.svg';\nimport rectASvg from '@/assets/annotation/rectTool/icon_rect_a.svg';\nimport { cTool } from '@labelbee/lb-annotation';\nimport classnames from 'classnames';\nimport { useTranslation } from 'react-i18next';\n\nconst { EPointCloudName, TOOL_NAME, TOOL_NAME_EN } = cTool;\n\nconst toolList = [\n  {\n    toolName: EToolName.Rect,\n    commonSvg: rectSvg,\n    selectedSvg: rectASvg,\n  },\n  {\n    toolName: EToolName.Polygon,\n    commonSvg: PolygonSvg,\n    selectedSvg: PolygonASvg,\n  },\n  {\n    toolName: EToolName.Line,\n    commonSvg: lineSvg,\n    selectedSvg: lineASvg,\n  },\n  {\n    toolName: EToolName.Point,\n    commonSvg: pointSvg,\n    selectedSvg: pointASvg,\n  },\n];\n\nconst getToolNameVersion = (lang: string) => {\n  if (lang === 'en') {\n    return TOOL_NAME_EN;\n  }\n  return TOOL_NAME;\n};\n\nexport const ToolIcons = ({\n  toolName,\n  selectedToolName,\n  onChange,\n}: {\n  toolName: string;\n  selectedToolName?: string;\n  onChange: (toolName: EToolName) => void;\n}) => {\n  const { i18n } = useTranslation();\n  const renderTools = toolList?.filter((item) => {\n    if (toolName === (EPointCloudName.PointCloud as unknown as EToolName)) {\n      return [EToolName.Polygon, EToolName.Rect, EToolName.Point, EToolName.Line].includes(\n        item?.toolName,\n      );\n    }\n\n    return item?.toolName === toolName;\n  });\n\n  const hasMultiTools = renderTools.length > 1;\n\n  return (\n    <div className={`${sidebarCls}__level`}>\n      {renderTools.map((tool) => {\n        const isSelected = hasMultiTools && selectedToolName === tool.toolName;\n        return (\n          <span\n            className={`${sidebarCls}__toolOption`}\n            key={tool.toolName}\n            onClick={() => onChange?.(tool.toolName)}\n          >\n            <img\n              className={`${sidebarCls}__singleTool`}\n              src={isSelected ? tool?.selectedSvg : tool?.commonSvg}\n            />\n            <span\n              className={classnames({\n                [`${sidebarCls}__toolOption__selected`]: isSelected,\n              })}\n            >\n              {getToolNameVersion(i18n.language)[tool.toolName]}\n            </span>\n          </span>\n        );\n      })}\n    </div>\n  );\n};\n","var img = \"data:image/svg+xml,%3csvg width='24.000000' height='24.000000' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cmask id='mask1_15945' mask-type='alpha' maskUnits='userSpaceOnUse' x='0.000000' y='0.000000' width='24.000000' height='24.000000'%3e %3crect id='Frame 1312316543 (Background/Mask)' width='24.000000' height='24.000000' fill='%23999999'/%3e %3c/mask%3e %3cg mask='url(%23mask1_15945)'%3e %3cpath id='Vector 197' d='M6.82031 21.1879C7.30859 20.8242 7.65674 20.4422 7.89697 20.0767C8.56055 19.0654 7.91553 17.8707 7.32861 16.813C6.78955 15.8416 6.34033 14.9126 5.68604 14.0402C3.5 11.1254 3.98877 7.18506 6.86133 4.94373C9.97998 2.51038 13.4199 2.427 15.9365 3.36963C16.5493 3.59912 17.186 3.94055 17.7881 4.3363C20.1196 5.86804 21.0063 8.93555 19.5503 11.3146C17.5649 14.5581 13.4385 15.5564 10.3657 15.641' stroke='%23999999' stroke-width='1.995000' stroke-linejoin='round' stroke-linecap='round' stroke-dasharray='0 0'/%3e %3c/g%3e %3cg mask='url(%23mask1_15945)'%3e %3cpath id='Vector 198' d='M4.979 17.3167C3.92969 16.8472 3.81592 15.4429 4.79492 14.8404C5.9707 14.1169 7.58301 13.7576 9.354 14.7828C10.374 15.3734 10.4321 16.5123 9.39893 17.0798C8.32764 17.6683 6.73828 18.1039 4.979 17.3167Z' stroke='%23999999' stroke-width='1.895129' stroke-linejoin='round' stroke-dasharray='0 0'/%3e %3c/g%3e %3cdefs/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='24.000000' height='24.000000' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cmask id='mask1_15950' mask-type='alpha' maskUnits='userSpaceOnUse' x='0.000000' y='0.000000' width='24.000000' height='24.000000'%3e %3crect id='Frame 1312316549 (Background/Mask)' width='24.000000' height='24.000000' fill='%23C4C4C4'/%3e %3c/mask%3e %3cg mask='url(%23mask1_15950)'%3e %3ccircle id='Ellipse 1677' cx='12.000000' cy='12.000000' r='9.000000' stroke='%23999999' stroke-width='2.000000' stroke-dasharray='0 0'/%3e %3c/g%3e %3cg mask='url(%23mask1_15950)'%3e %3ccircle id='Ellipse 1678' cx='12.000000' cy='12.000000' r='4.000000' fill='%23999999'/%3e %3c/g%3e %3cdefs/%3e%3c/svg%3e\";\n  export default img;","/**\n * @file Annotation related hook\n * @createDate 2022-08-04\n * @author Ron <ron.f.luo@gmail.com>\n */\nimport { useEffect, useRef } from 'react';\nimport { useDispatch } from '@/store/ctx';\nimport { ANNOTATION_ACTIONS } from '@/store/Actions';\nimport { EPointCloudPattern } from '@labelbee/lb-utils';\n\nexport interface ICustomToolInstance {\n  valid: boolean;\n  exportData: () => [any, {}];\n  exportCustomData: () => {};\n  singleOn: () => void;\n  clearResult: () => void;\n  on: () => void;\n  unbind: () => void;\n  setResult: () => void;\n  setValid: (valid: boolean) => void;\n  history: {\n    initRecord: (action: any) => void;\n    pushHistory: (action: any) => void;\n  };\n  setDefaultAttribute: (attribute: string) => void;\n  setForbidOperation: (forbidOperation: boolean) => void;\n  setShowDefaultCursor: (forbidOperation: boolean) => void;\n\n  // PointCloud Exclusive function\n  setSubAttribute: (key: string, value: string) => void;\n\n  updateRotate: () => void;\n\n  undo: () => void;\n  redo: () => void;\n  setPointCloudGlobalPattern: (globalPattern: EPointCloudPattern) => void;\n\n  [str: string]: any;\n}\n\nexport interface ICustomToolInstanceProps {\n  basicInfo?: { [v: string]: any };\n}\n\n/**\n * @returns\n * Custom an empty toolInstance to adapt old use.\n */\n\nconst useCustomToolInstance = ({ basicInfo }: ICustomToolInstanceProps = {}) => {\n  const dispatch = useDispatch();\n  const initialCustomToolInstance: ICustomToolInstance = {\n    valid: basicInfo?.valid ?? true,\n    exportData: () => {\n      return [[], {}];\n    },\n    exportCustomData: () => {\n      return {};\n    },\n    clearResult: () => {},\n    singleOn: () => {},\n    on: () => {},\n    unbind: () => {},\n    setResult: () => {\n      // Rerender Data\n    },\n    history: {\n      initRecord: () => {},\n      pushHistory: () => {},\n    },\n    setDefaultAttribute: (attribute: string) => {},\n    setForbidOperation: () => {},\n    setShowDefaultCursor: () => {},\n\n    // PointCloud Exclusive function\n    setSubAttribute: (key: string, value: string) => {},\n    setValid: () => {},\n    updateRotate: () => {},\n    redo: () => {},\n    undo: () => {},\n    setPointCloudGlobalPattern: (globalPattern: EPointCloudPattern) => {},\n  };\n\n  const toolInstanceRef = useRef<ICustomToolInstance>(initialCustomToolInstance);\n\n  const onMounted = (instance: any) => {\n    dispatch({\n      type: ANNOTATION_ACTIONS.SET_TOOL,\n      payload: {\n        instance,\n      },\n    });\n  };\n\n  const onUnmounted = () => {\n    dispatch({\n      type: ANNOTATION_ACTIONS.SET_TOOL,\n      payload: {\n        instance: undefined,\n      },\n    });\n  };\n\n  const clearToolInstance = () => {\n    Object.assign(toolInstanceRef.current, initialCustomToolInstance);\n  };\n\n  useEffect(() => {\n    // Initial toolInstance\n    onMounted(toolInstanceRef.current);\n    return () => {\n      onUnmounted();\n    };\n  }, []);\n\n  return {\n    toolInstanceRef,\n    clearToolInstance,\n  };\n};\n\nexport { useCustomToolInstance };\n","import DrawRectSvg from '@/assets/annotation/toolHotKeyIcon/icon_frame_kj.svg';\nimport DrawInvalidRectSvg from '@/assets/annotation/toolHotKeyIcon/icon_frameNull_kj.svg';\nimport MouseLeftSvg from '@/assets/annotation/toolHotKeyIcon/icon_mouse_left_kj.svg';\nimport SelectedRectSvg from '@/assets/annotation/toolHotKeyIcon/icon_frameActive_kj.svg';\nimport MouseRightSvg from '@/assets/annotation/toolHotKeyIcon/icon_mouse_right_kj.svg';\nimport ChangeValidSvg from '@/assets/annotation/toolHotKeyIcon/icon_frameChange_kj.svg';\nimport DeleteRectSvg from '@/assets/annotation/toolHotKeyIcon/icon_del_kj.svg';\nimport {\n  backward,\n  dargWithRightClick,\n  forward,\n  // fullScreen,\n  restore,\n  revoke,\n  rotate,\n  scale,\n  tabChangeSelected,\n  tabReverseChangeSelected,\n} from '../common';\n\nexport const drawRect = {\n  name: 'AnnotateRect',\n  icon: DrawRectSvg,\n  shortCut: [MouseLeftSvg, MouseLeftSvg],\n};\n\nexport const drawInvalidRect = {\n  name: 'AnnotateInvalidRect',\n  icon: DrawInvalidRectSvg,\n  shortCut: [MouseLeftSvg, 'Ctrl', MouseLeftSvg],\n};\n\nexport const selectRect = {\n  name: 'SelectRect',\n  icon: SelectedRectSvg,\n  shortCut: [MouseRightSvg],\n  noticeInfo: 'RightClick',\n};\n\nexport const changeValid = {\n  name: 'ToggleRectEffectiveness',\n  icon: ChangeValidSvg,\n  shortCut: ['F'],\n};\n\nexport const changeValidByClick = {\n  name: 'ToggleRectEffectiveness',\n  icon: ChangeValidSvg,\n  shortCut: ['Ctrl', MouseLeftSvg],\n};\n\nexport const deleteRect = {\n  name: 'DeleteRect',\n  icon: DeleteRectSvg,\n  shortCut: [MouseRightSvg],\n  noticeInfo: 'SelectAndDoubleClick',\n};\n\nconst rectToolShortcutTable = [\n  drawRect,\n  drawInvalidRect,\n  selectRect,\n  changeValid,\n  changeValidByClick,\n  deleteRect,\n  revoke,\n  restore,\n  rotate,\n  scale,\n  // fullScreen,\n  backward,\n  forward,\n  // setValid,\n  // copyBackwardResult,\n  dargWithRightClick,\n  // dargWithLeftClick,\n  tabChangeSelected,\n  tabReverseChangeSelected,\n];\nexport default rectToolShortcutTable;\n","var img = \"data:image/svg+xml,%3csvg id='icon_next_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M8.268%2c6.632.7.1A.428.428%2c0%2c0%2c0%2c0%2c.47V13.53a.428.428%2c0%2c0%2c0%2c.7.368l7.572-6.53A.5.5%2c0%2c0%2c0%2c8.268%2c6.632Z' transform='translate(4 1)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_277' data-name='%e8%b7%af%e5%be%84 277' class='cls-1' d='M6.857-116.857h-3.3v1.4L0-118l3.556-2.54v1.4h3.3v-3.3H9.143v3.3h3.3v-1.4L16-118l-3.556%2c2.54v-1.4h-3.3v3.3h1.4L8-110l-2.54-3.556h1.4ZM8-126l2.54%2c3.556H5.46Z' transform='translate(0 126)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_276' data-name='%e8%b7%af%e5%be%84 276' class='cls-2' d='M-37-137.6h25.4V-163H-37Z' transform='translate(37 163)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_move_kj' transform='translate(1 128)'%3e %3cg id='%e7%bb%84_475' data-name='%e7%bb%84 475' class='cls-3' transform='translate(-1 -128)'%3e %3cg id='%e7%bb%84_474' data-name='%e7%bb%84 474' class='cls-4' transform='translate(-4.698 -4.698)'%3e %3cpath id='%e8%b7%af%e5%be%84_275' data-name='%e8%b7%af%e5%be%84 275' class='cls-5' d='M-5-131H12.27v17.27H-5Z' transform='translate(9.063 135.064)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M2.1-1.769a.381.381%2c0%2c0%2c1-.382-.382h0V-7.087A.381.381%2c0%2c0%2c1%2c2.1-7.469H8.4a.381.381%2c0%2c0%2c1%2c.382.382h0V-2.15a.381.381%2c0%2c0%2c1-.382.382H2.1Zm.525-.906H7.874V-6.562H2.627Z' transform='translate(-1.721 7.469)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M17.723-5.652A4.782%2c4.782%2c0%2c0%2c0%2c19.561-9.4l.763%2c0a.093.093%2c0%2c0%2c0%2c.073-.15l-1.2-1.526a.094.094%2c0%2c0%2c0-.147%2c0L17.841-9.555a.093.093%2c0%2c0%2c0%2c.073.15h.762a4.019%2c4.019%2c0%2c0%2c1-.03.463%2c3.888%2c3.888%2c0%2c0%2c1-.461%2c1.419A3.9%2c3.9%2c0%2c0%2c1%2c17.179-6.35a3.884%2c3.884%2c0%2c0%2c1-1.381.693%2c3.887%2c3.887%2c0%2c0%2c1-1.488.106c-.064-.008-.129-.017-.192-.029v.893A4.752%2c4.752%2c0%2c0%2c0%2c17.723-5.652Z' transform='translate(-14.118 11.118)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='c'%3e%3cpath d='M19.678-21a.381.381%2c0%2c0%2c1%2c.382.382h0v4.937a.381.381%2c0%2c0%2c1-.382.382h-6.3A.381.381%2c0%2c0%2c1%2c13-15.682h0v-4.937A.381.381%2c0%2c0%2c1%2c13.382-21h6.3Zm-.525.906H13.906v3.887h5.247Z' transform='translate(-13 21)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='d'%3e%3cpath d='M3.673-17.359a4.782%2c4.782%2c0%2c0%2c0-1.839%2c3.751l-.763%2c0a.093.093%2c0%2c0%2c0-.073.15l1.2%2c1.526a.094.094%2c0%2c0%2c0%2c.147%2c0l1.206-1.528a.093.093%2c0%2c0%2c0-.073-.15H2.72a4.017%2c4.017%2c0%2c0%2c1%2c.03-.463%2c3.888%2c3.888%2c0%2c0%2c1%2c.461-1.419%2c3.9%2c3.9%2c0%2c0%2c1%2c1.005-1.173A3.884%2c3.884%2c0%2c0%2c1%2c5.6-17.354a3.887%2c3.887%2c0%2c0%2c1%2c1.488-.106c.064.008.129.017.192.029v-.893A4.752%2c4.752%2c0%2c0%2c0%2c3.673-17.359Z' transform='translate(-0.978 18.372)' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(-957 -603)'%3e%3crect width='16' height='16' transform='translate(957 603)' fill='none'/%3e%3cg transform='translate(956.022 624)'%3e%3cg transform='translate(1.545 -10.994)' clip-path='url(%23a)'%3e%3cpath d='M11.412.863H-3.279V-12.469H11.412Z' transform='translate(-0.537 8.653)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(10.679 -13.779)' clip-path='url(%23b)'%3e%3cpath d='M23.049-16.118V-2.007H9.118V-16.118Z' transform='translate(-12.934 12.302)' fill='%23666'/%3e%3c/g%3e%3crect width='6' height='5' transform='translate(10.652 -20.897)' fill='%23ccc'/%3e%3cg transform='translate(9.826 -21)' clip-path='url(%23c)'%3e%3cpath d='M8-26H22.691v13.331H8Z' transform='translate(-11.816 22.184)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(0.978 -18.995)' clip-path='url(%23d)'%3e%3cpath d='M-4.022-9.261V-23.372H9.909V-9.261Z' transform='translate(0.206 19.556)' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","import DrawPolygonSvg from '@/assets/annotation/toolHotKeyIcon/icon_line_kj.svg';\nimport DrawInvalidPolygonSvg from '@/assets/annotation/toolHotKeyIcon/icon_polygonNull_kj.svg';\nimport SelectedPolygonSvg from '@/assets/annotation/toolHotKeyIcon/icon_polygonActive_kj.svg';\nimport ChangePolygonAttribute from '@/assets/annotation/toolHotKeyIcon/icon_polygonChange_kj.svg';\nimport DeletePolygonSvg from '@/assets/annotation/toolHotKeyIcon/icon_polygonDel_kj.svg';\nimport MouseLeftSvg from '@/assets/annotation/toolHotKeyIcon/icon_mouse_left_kj.svg';\nimport MouseRightSvg from '@/assets/annotation/toolHotKeyIcon/icon_mouse_right_kj.svg';\n\nimport IconLineContKj from '@/assets/annotation/toolHotKeyIcon/icon_lineCont_kj.svg';\nimport IconPolygonInsertKj from '@/assets/annotation/toolHotKeyIcon/icon_polygonInsert_kj.svg';\nimport IconUnGripKj from '@/assets/annotation/toolHotKeyIcon/icon_unGrip_kj.svg';\nimport IconPointSpecialKj from '@/assets/annotation/toolHotKeyIcon/icon_pointSpecial_kj.svg';\nimport IconSegment from '@/assets/annotation/toolHotKeyIcon/icon_segment.svg';\nimport IconPolygonMerge from '@/assets/annotation/toolHotKeyIcon/icon_polygonMerge_kj.svg';\nimport IconAI from '@/assets/annotation/toolHotKeyIcon/icon_AI.svg';\nimport IconSwapOutlined from '@/assets/annotation/toolHotKeyIcon/icon_swap_outlined.svg';\n\nimport {\n  backward,\n  dargWithRightClick,\n  forward,\n  // fullScreen,\n  restore,\n  revoke,\n  rotate,\n  setValid,\n  scale,\n  tabChangeSelected,\n  tabReverseChangeSelected,\n  // attributeClickLock,\n  // attributeLock,\n  // copyBackwardResult,\n  // hidden,\n  // changeSpecialLine,\n  // saveResult,\n  dargWithLeftClick,\n} from '../common';\n\nexport const polygon = {\n  name: 'AnnotatePolygon',\n  icon: DrawPolygonSvg,\n  shortCut: [MouseLeftSvg],\n};\n\nexport const invalidPolygon = {\n  name: 'AnnotateInvalidPolygon',\n  icon: DrawInvalidPolygonSvg,\n  shortCut: ['Ctrl', MouseLeftSvg],\n};\n\nexport const selectedPolygon = {\n  name: 'SelectPolygon',\n  icon: SelectedPolygonSvg,\n  shortCut: [MouseRightSvg],\n  noticeInfo: 'RightClick',\n};\n\nexport const changePolygonAttribute = {\n  name: 'TogglePolygonEffectiveness',\n  icon: ChangePolygonAttribute,\n  shortCut: ['F'],\n};\n\nexport const deletePolygon = {\n  name: 'DeletePolygon',\n  icon: DeletePolygonSvg,\n  shortCut: ['Del'],\n};\n\nexport const keepLine = {\n  name: 'ContinueToLabel',\n  icon: IconLineContKj,\n  shortCut: ['Space'],\n};\n\nexport const insertPolygonPoint = {\n  name: 'InsertPoint',\n  icon: IconPolygonInsertKj,\n  noticeInfo: 'SelectAndDoubleClick',\n  shortCut: [MouseLeftSvg],\n};\n\nexport const deletePolygonPoint = {\n  name: 'DeletePoint',\n  icon: DeletePolygonSvg,\n  noticeInfo: 'SelectAndDoubleClick',\n  shortCut: [MouseRightSvg],\n};\n\nexport const changeSpecialPoint = {\n  name: 'TogglePointParticularity',\n  icon: IconPointSpecialKj,\n  noticeInfo: '',\n  shortCut: ['Shift', MouseLeftSvg],\n};\n\nexport const suspendAbsorption = {\n  name: 'StopAdsorption',\n  icon: IconUnGripKj,\n  noticeInfo: 'Press',\n  shortCut: ['Alt'],\n};\n\nexport const splitPolygon = {\n  name: 'CropOverlapArea',\n  icon: IconSegment,\n  noticeInfo: '',\n  shortCut: ['ALT', 'X'],\n};\n\nexport const combinePolygon = {\n  name: 'CombineOverlapArea',\n  icon: IconPolygonMerge,\n  noticeInfo: '',\n  shortCut: ['Alt', 'Z'],\n};\n\nexport const segmentByAlgorithm = {\n  name: 'SegmentationRecognition',\n  icon: IconAI,\n  noticeInfo: '',\n  shortCut: ['Q'],\n};\n\nexport const changeRenderPattern = {\n  name: 'SwitchPattern',\n  icon: IconSwapOutlined,\n  noticeInfo: '',\n  shortCut: ['U'],\n};\n\nconst pointToolShortCutTable = [\n  // saveResult,\n  polygon,\n  invalidPolygon,\n  selectedPolygon,\n  changePolygonAttribute,\n  deletePolygon,\n  keepLine,\n  insertPolygonPoint,\n  deletePolygonPoint,\n  // changeSpecialPoint,\n  // changeSpecialLine,\n  suspendAbsorption,\n  // hidden,\n  // segmentByAlgorithm,\n  // attributeLock,\n  // attributeClickLock,\n  revoke,\n  restore,\n  rotate,\n  scale,\n  // fullScreen,\n  backward,\n  forward,\n  setValid,\n  // copyBackwardResult,\n  dargWithRightClick,\n  dargWithLeftClick,\n  tabChangeSelected,\n  tabReverseChangeSelected,\n  // changeRenderPattern,\n  combinePolygon,\n  splitPolygon,\n];\nexport default pointToolShortCutTable;\n","var img = \"data:image/svg+xml,%3csvg id='icon_polygon_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2%2c .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-2 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-4' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-4' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_lineCont_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-3 %7b fill: none%3b %7d .cls-2%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_unGrip_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_14' data-name='%e5%87%8f%e5%8e%bb 14' class='cls-2' d='M12806.69-12915.114c-.083%2c0-.175%2c0-.282-.008a5.869%2c5.869%2c0%2c0%2c1-3.878-1.69%2c5.509%2c5.509%2c0%2c0%2c1-1.6-4.091%2c6.209%2c6.209%2c0%2c0%2c1%2c2.044-4.437l1.039-.934%2c2.459%2c2.731-1.168%2c1.052a2.434%2c2.434%2c0%2c0%2c0-.522%2c2.823%2c2.39%2c2.39%2c0%2c0%2c0%2c1.854.923%2c2%2c2%2c0%2c0%2c0%2c1.346-.508l1.3-1.171%2c2.46%2c2.732-1.169%2c1.054A5.813%2c5.813%2c0%2c0%2c1%2c12806.69-12915.114Zm6.1-3.518h0l-2.477-2.717%2c1.962-1.769a.619.619%2c0%2c0%2c1%2c.412-.164.6.6%2c0%2c0%2c1%2c.454.209l1.639%2c1.824a.6.6%2c0%2c0%2c1-.046.863l-1.942%2c1.753Zm-5.33-5.8h0l-2.523-2.675%2c1.938-1.745a.614.614%2c0%2c0%2c1%2c.412-.163.609.609%2c0%2c0%2c1%2c.455.209l1.769%2c1.7a.6.6%2c0%2c0%2c1-.046.866l-2%2c1.8Z' transform='translate(-12800 12929.97)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_271' data-name='%e7%9f%a9%e5%bd%a2 271' class='cls-2' width='1.166' height='18.662' transform='matrix(0.719%2c -0.695%2c 0.695%2c 0.719%2c 0.745%2c 2.047)'/%3e%3c/svg%3e\";\n  export default img;","import iconTagKj from '@/assets/annotation/toolHotKeyIcon/icon_tag_kj.svg'\n\nimport {\n  backward,\n  dargWithLeftClick,\n  dargWithRightClick,\n  forward,\n  // fullScreen,\n  rotate,\n  // saveResult,\n  scale,\n  // setValid,\n} from '../common';\n\nexport const tagInSingleImg: any = {\n  name: 'Tagging',\n  icon: iconTagKj,\n  shortCut: [1, 9],\n};\n\n// 单图\nconst tagToolSingleShortCutTable = [\n  // saveResult,\n  tagInSingleImg,\n  rotate,\n  // fullScreen,\n  scale,\n  // setValid,\n  backward,\n  forward,\n  dargWithRightClick,\n  dargWithLeftClick,\n];\nexport default tagToolSingleShortCutTable;\n\n","import React, { useState } from 'react';\nimport { Popover } from 'antd';\n\ntype Source = string | React.ReactElement;\n\nconst Icon = ({ source }: { source: Source }) => {\n  if (typeof source === 'string') {\n    return <img src={source} width={14} height={14} style={{ marginRight: 4 }} />;\n  }\n\n  return source;\n};\n\nconst FooterPopover = ({\n  hoverIcon,\n  icon,\n  containerStyle,\n  content,\n  title,\n}: {\n  hoverIcon: Source;\n  icon: Source;\n  containerStyle?: React.CSSProperties;\n  content: React.ReactNode;\n  title: string;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const displayIcon = <Icon source={isOpen ? hoverIcon ?? icon : icon} />;\n\n  return (\n    <Popover\n      placement='topLeft'\n      content={content}\n      // @ts-ignore\n      onMouseMove={() => {\n        setIsOpen(true);\n      }}\n      onMouseLeave={() => {\n        setIsOpen(false);\n      }}\n      overlayClassName='tool-hotkeys-popover'\n      className='tipsBar'\n    >\n      <div\n        className='shortCutTitle'\n        onMouseMove={() => setIsOpen(true)}\n        onMouseLeave={() => setIsOpen(false)}\n        style={containerStyle}\n      >\n        <a className='svg'>\n          {displayIcon}\n          {title}\n        </a>\n      </div>\n    </Popover>\n  );\n};\n\nexport default FooterPopover;\n","import React from 'react';\nimport adaptIcon from '@/assets/annotation/common/icon_adapt.svg';\nimport adaptIconBlack from '@/assets/annotation/common/icon_adapt_black.svg';\nimport { MinusOutlined, PlusOutlined } from '@ant-design/icons';\nimport { AppState } from '@/store';\nimport { ToolInstance } from '@/store/annotation/types';\nimport { connect } from 'react-redux';\nimport ZoomLevel from './ZoomLevel';\nimport { footerCls, FooterTheme } from '../index';\nimport { LabelBeeContext } from '@/store/ctx';\n\ninterface IZoomControllerProps {\n  mode?: FooterTheme;\n  initialPosition?: () => void;\n  zoomIn?: () => void;\n  zoomOut?: () => void;\n  zoom?: number; // Allow to show zoom directly\n}\n\nexport const ZoomController: React.FC<IZoomControllerProps> = ({\n  mode,\n  initialPosition,\n  zoomOut,\n  zoomIn,\n  zoom,\n}) => {\n  const defaultIcon = mode === 'light' ? adaptIcon : adaptIconBlack;\n  return (\n    <div>\n      <span className={`${footerCls}__zoomController`}>\n        <MinusOutlined\n          className={`${footerCls}__highlight`}\n          onClick={() => {\n            zoomOut?.();\n          }}\n        />\n        <span\n          className={`${footerCls}__zoomText`}\n          onClick={() => {\n            initialPosition?.();\n          }}\n        >\n          <img src={defaultIcon} className='adaptIcon' />\n          <ZoomLevel zoom={zoom} />\n        </span>\n        <PlusOutlined\n          className={`${footerCls}__highlight`}\n          onClick={() => {\n            zoomIn?.();\n          }}\n        />\n      </span>\n    </div>\n  );\n};\n\nconst ZoomControllerWithToolInstance: React.FC<{\n  toolInstance: ToolInstance;\n  mode: FooterTheme;\n}> = ({ toolInstance }) => {\n  const initialPosition = () => {\n    toolInstance.initImgPos();\n  };\n\n  const zoomOut = () => {\n    toolInstance.zoomChanged(false);\n  };\n\n  const zoomIn = () => {\n    toolInstance.zoomChanged(true);\n  };\n\n  return <ZoomController initialPosition={initialPosition} zoomIn={zoomIn} zoomOut={zoomOut} />;\n};\n\nexport default connect(\n  (state: AppState) => ({\n    toolInstance: state.annotation.toolInstance,\n  }),\n  null,\n  null,\n  { context: LabelBeeContext },\n)(ZoomControllerWithToolInstance);\n","import { getClassName } from '@/utils/dom';\nimport {\n  LeftOutlined,\n  RightOutlined,\n  StepForwardFilled,\n  StepBackwardFilled,\n} from '@ant-design/icons';\nimport { Input } from 'antd';\nimport React, { useEffect, useRef, useState } from 'react';\n\ninterface IPageIconProps {\n  isVideo?: boolean;\n  iconProps: {\n    onClick: () => void;\n    className: string;\n  };\n}\n\ninterface IPaginationProps {\n  // current file page\n  imgIndex: number;\n  // number of total files\n  totalPage: number;\n  // redirect to target page\n  pageJump: (page: string) => void;\n  // to next page\n  pageForward: () => void;\n  // to prev page\n  pageBackward: () => void;\n  // footer classname\n  footerCls: string;\n  // whether file is video\n  isVideo?: boolean;\n}\n\ninterface IPageProps {\n  jumpSkip: Function;\n  imgIndex: number;\n}\n\n/**\n * page input for changing current page or file index\n * @param props\n * @returns\n */\nexport const PageInput = (props: IPageProps) => {\n  const { jumpSkip, imgIndex } = props;\n  const [newIndex, setIndex] = useState(imgIndex);\n  const inputEl = useRef(null);\n\n  useEffect(() => {\n    setIndex(imgIndex + 1);\n  }, [imgIndex]);\n\n  const newHandleJump = (e: any) => {\n    const reg = /^\\d*$/;\n    if (reg.test(e.target.value)) {\n      setIndex(e.target.value);\n    }\n  };\n\n  const newJumpSkip = (e: any) => {\n    if (e.keyCode === 13) {\n      jumpSkip(e.target.value);\n    }\n  };\n\n  return (\n    <Input\n      className={getClassName('page-input')}\n      ref={inputEl}\n      onChange={newHandleJump}\n      value={newIndex}\n      onKeyDown={newJumpSkip}\n    />\n  );\n};\n\n/**\n * Next page icon\n * @param props\n * @returns\n */\nconst NextPage: React.FC<IPageIconProps> = (props) =>\n  props.isVideo ? (\n    <StepForwardFilled {...props.iconProps} />\n  ) : (\n    <RightOutlined {...props.iconProps} />\n  );\n\n/**\n * Prev page icon\n * @param props\n * @returns\n */\nconst PrevPage: React.FC<IPageIconProps> = (props) =>\n  props.isVideo ? (\n    <StepBackwardFilled {...props.iconProps} />\n  ) : (\n    <LeftOutlined {...props.iconProps} />\n  );\n\nexport const Pagination: React.FC<IPaginationProps> = ({\n  pageBackward,\n  imgIndex,\n  pageJump,\n  totalPage,\n  pageForward,\n  isVideo,\n  footerCls,\n}) => {\n  return (\n    <div className={`${footerCls}__pagination`}>\n      <PrevPage\n        isVideo={isVideo}\n        iconProps={{\n          className: `${footerCls}__highlight`,\n          onClick: pageBackward,\n        }}\n      />\n      <PageInput imgIndex={imgIndex} jumpSkip={pageJump} />/\n      <span className={`${footerCls}__pageAll`}>{totalPage}</span>\n      <NextPage\n        isVideo={isVideo}\n        iconProps={{\n          className: `${footerCls}__highlight`,\n          onClick: pageForward,\n        }}\n      />\n    </div>\n  );\n};\n","import { PointCloudContext } from '@/components/pointCloudView/PointCloudContext';\nimport { Modal } from 'antd';\nimport React, { useContext, useMemo, useState } from 'react';\nimport { stepConfigSelector } from '@/store/annotation/selectors';\nimport { useSelector } from '@/store/ctx';\nimport { i18n, IPointCloudConfig } from '@labelbee/lb-utils';\nimport {\n  CaretDownFilled,\n  DeleteOutlined,\n  EyeFilled,\n  EyeInvisibleFilled,\n  PushpinFilled,\n  UnorderedListOutlined,\n} from '@ant-design/icons';\nimport { IInputList } from '@/types/main';\nimport { useHistory } from '@/components/pointCloudView/hooks/useHistory';\nimport { getClassName } from '@/utils/dom';\nimport StepUtils from '@/utils/StepUtils';\nimport { EPointCloudName } from '@labelbee/lb-annotation';\nimport { useTranslation } from 'react-i18next';\nimport FooterPopover from '../FooterPopover';\nimport LongText from '@/components/longText';\n\nconst AnnotatedAttributesItem = ({ attribute }: { attribute: IInputList }) => {\n  const pointCloudCtx = useContext(PointCloudContext);\n  const {\n    pointCloudBoxList,\n    pointCloudSphereList,\n    hideAttributes,\n    toggleAttributesVisible,\n    polygonList,\n    setPolygonList,\n    lineList,\n    setLineList,\n    setPointCloudResult,\n    setPointCloudSphereList,\n    reRender,\n    selectSpecAttr,\n    segmentation,\n    setSegmentation,\n  } = pointCloudCtx;\n\n  const [expanded, setExpanded] = useState(true);\n\n  const { pushHistoryWithList } = useHistory();\n\n  const pointCloudListForSpecAttribute = [\n    ...pointCloudBoxList,\n    ...polygonList,\n    ...pointCloudSphereList,\n    ...lineList,\n    ...segmentation,\n  ].filter((i) => i.attribute === attribute.value);\n\n  const onVisibleChange = () => {\n    toggleAttributesVisible(attribute.value);\n  };\n\n  const isHidden = hideAttributes.includes(attribute.value);\n\n  const getItemID = ({ trackID, order }: { trackID?: number; order?: number }) => {\n    return trackID ? trackID : order;\n  };\n\n  const getItemKey = ({ trackID, order }: { trackID?: number; order?: number }) => {\n    return trackID ? `trackID_${trackID}` : `order_${order}`;\n  };\n\n  const deleteGraphByAttr = (attribute: string) => {\n    if (pointCloudListForSpecAttribute.length === 0) {\n      return;\n    }\n\n    const newPolygonList = polygonList.filter((i) => attribute !== i.attribute);\n    const newPointCloudList = pointCloudBoxList.filter((i) => attribute !== i.attribute);\n    const newLineList = lineList.filter((i) => attribute !== i.attribute);\n    const newSphereList = pointCloudSphereList.filter((i) => attribute !== i.attribute);\n    const newSegmentation = segmentation.filter((i) => attribute !== i.attribute);\n    reRender(newPointCloudList, newPolygonList, newSphereList, newLineList, newSegmentation);\n    setPolygonList(newPolygonList);\n    setPointCloudResult(newPointCloudList);\n    setPointCloudSphereList(newSphereList);\n    setLineList(newLineList);\n    setSegmentation(newSegmentation);\n\n    pushHistoryWithList({\n      pointCloudBoxList: newPointCloudList,\n      polygonList: newPolygonList,\n      lineList: newLineList,\n      pointCloudSphereList: newSphereList,\n      segmentation: newSegmentation,\n    });\n  };\n\n  const onDeleteGraphByAttr = (attribute: IInputList) => {\n    Modal.confirm({\n      content: i18n.t('onDeleteGraphByAttr', { attribute: attribute.key }),\n      onOk: () => {\n        deleteGraphByAttr(attribute.value);\n      },\n      okText: i18n.t('Confirm'),\n      cancelText: i18n.t('Cancel'),\n    });\n  };\n\n  return (\n    <>\n      <div className={getClassName('annotated-attribute', 'item')}>\n        {isHidden ? (\n          <EyeInvisibleFilled onClick={onVisibleChange} />\n        ) : (\n          <EyeFilled onClick={onVisibleChange} />\n        )}\n        <CaretDownFilled\n          rotate={expanded ? 0 : 270}\n          onClick={() => {\n            setExpanded(!expanded);\n          }}\n        />\n        <span\n          className={getClassName('annotated-attribute', 'item', 'text')}\n          style={{ width: '100%', overflow: 'hidden' }}\n          onClick={() => {\n            selectSpecAttr(attribute.value);\n          }}\n        >\n          <LongText text={attribute.key} openByText={true} />\n        </span>\n\n        <DeleteOutlined onClick={() => onDeleteGraphByAttr(attribute)} />\n      </div>\n\n      {expanded &&\n        pointCloudListForSpecAttribute.map((item, order) => {\n          return (\n            <div key={getItemKey({ ...item, order })} style={{ paddingLeft: 54 }}>\n              {`${getItemID({ ...item, order })}.${attribute.key}`}\n            </div>\n          );\n        })}\n    </>\n  );\n};\n\nexport const AnnotatedAttributesPanel = () => {\n  const stepConfig: IPointCloudConfig = useSelector(stepConfigSelector);\n  const {\n    attrPanelLayout,\n    setAttrPanelLayout,\n    pointCloudBoxList,\n    pointCloudSphereList,\n    polygonList,\n    lineList,\n    segmentation,\n  } = useContext(PointCloudContext);\n  const { t } = useTranslation();\n\n  const existAttributes = useMemo(() => {\n    return [\n      ...pointCloudBoxList,\n      ...pointCloudSphereList,\n      ...polygonList,\n      ...lineList,\n      ...segmentation,\n    ].map((i) => i.attribute);\n  }, [pointCloudBoxList, pointCloudSphereList, polygonList, lineList, segmentation]);\n\n  const displayAttrList = useMemo(() => {\n    return (stepConfig.attributeList as IInputList[]).filter((i) =>\n      existAttributes.includes(i.value),\n    );\n  }, [existAttributes]);\n\n  return (\n    <div className={getClassName('annotated-attribute')}>\n      {attrPanelLayout ? (\n        <div className={getClassName('annotated-attribute', 'text')}>\n          <span>{t('AnnotatedResult')}</span>\n          <span\n            className={getClassName('annotated-attribute', 'pin')}\n            onClick={() => {\n              setAttrPanelLayout('');\n            }}\n          >\n            <PushpinFilled />\n            {t('CancelFixed')}\n          </span>\n        </div>\n      ) : (\n        <div className={getClassName('annotated-attribute', 'text')}>\n          <span\n            onClick={() => {\n              setAttrPanelLayout('left');\n            }}\n            className={getClassName('annotated-attribute', 'pin')}\n          >\n            <PushpinFilled />\n            {t('FixedOnLeft')}\n          </span>\n          <span\n            onClick={() => {\n              setAttrPanelLayout('right');\n            }}\n            className={getClassName('annotated-attribute', 'pin')}\n          >\n            <PushpinFilled />\n            {t('FixedOnRight')}\n          </span>\n        </div>\n      )}\n\n      <div>\n        {displayAttrList.length > 0 ? (\n          displayAttrList.map((i) => <AnnotatedAttributesItem attribute={i} key={i.value} />)\n        ) : (\n          <div style={{ textAlign: 'center', height: 200, lineHeight: '200px' }}>{t('NoData')}</div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport const AnnotatedAttributesPanelFixedLeft = () => {\n  const { attrPanelLayout } = useContext(PointCloudContext);\n  if (attrPanelLayout === 'left') {\n    return <AnnotatedAttributesPanel />;\n  }\n\n  return null;\n};\n\nexport const AnnotatedAttributesPanelFixedRight = () => {\n  const { attrPanelLayout } = useContext(PointCloudContext);\n\n  if (attrPanelLayout === 'right') {\n    return <AnnotatedAttributesPanel />;\n  }\n\n  return null;\n};\n\nexport const AnnotatedAttributesIcon = () => {\n  const { attrPanelLayout } = useContext(PointCloudContext);\n  const { t } = useTranslation();\n  const stepInfo = useSelector((state) =>\n    // @ts-ignore\n    StepUtils.getCurrentStepInfo(state?.annotation?.step, state.annotation?.stepList),\n  );\n\n  if (stepInfo?.tool !== EPointCloudName.PointCloud) {\n    return null;\n  }\n\n  if (attrPanelLayout) {\n    return null;\n  }\n\n  return (\n    <FooterPopover\n      hoverIcon={<UnorderedListOutlined style={{ marginRight: 4 }} />}\n      icon={<UnorderedListOutlined style={{ marginRight: 4 }} />}\n      title={t('AnnotatedList')}\n      content={<AnnotatedAttributesPanel />}\n    />\n  );\n};\n","import { Button, message } from 'antd';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\n\nimport icon from '@/assets/predictTracking/icon.svg';\nimport { useSingleBox } from '@/components/pointCloudView/hooks/useSingleBox';\nimport { AppState } from '@/store';\nimport {\n  ChangeSave,\n  GetBoxesByID,\n  SetPointCloudLoading,\n  SetPredictResult,\n  SetPredictResultVisible,\n} from '@/store/annotation/actionCreators';\nimport { IPointCloudBoxWithIndex } from '@/store/annotation/types';\nimport { LabelBeeContext, useDispatch } from '@/store/ctx';\n\nimport { predict } from '../previewResult/util';\nimport { useStatus } from '@/components/pointCloudView/hooks/useStatus';\n\nconst PredictTrackingIcon = (props: { loading: boolean; predictionResultVisible: boolean }) => {\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n  const { isPointCloudSegmentationPattern } = useStatus();\n\n  const { loading, predictionResultVisible } = props;\n  const { selectedBox } = useSingleBox();\n\n  const handler = async () => {\n    if (loading || predictionResultVisible) {\n      return;\n    }\n\n    const selectedBoxTrackID = selectedBox?.info.trackID;\n\n    if (!selectedBoxTrackID) {\n      message.error(t('BeforePredictStarting'));\n      return;\n    }\n\n    await dispatch(ChangeSave);\n\n    const selectedBoxID = selectedBox?.info.id;\n\n    const boxes: any = await dispatch(GetBoxesByID(selectedBoxTrackID, selectedBoxID));\n\n    if (boxes.length < 2) {\n      message.error(t('MarkOnlyOne'));\n      return;\n    }\n\n    const selectedBoxIDIndex = boxes.findIndex(\n      (item: IPointCloudBoxWithIndex) => item.id === selectedBoxID,\n    );\n\n    const start = boxes[selectedBoxIDIndex - 1];\n    const end = boxes[selectedBoxIDIndex];\n\n    const difference = end.index - start.index;\n\n    if (difference < 2) {\n      message.error(t('HaveNoNeed'));\n      return;\n    }\n\n    if (difference > 8) {\n      message.error(t('ThePredictedPointCloud'));\n      return;\n    }\n\n    message.success(\n      t('PredictingDataFrom', {\n        startPage: start.index + 1,\n        endPage: end.index + 1,\n        selectedBoxTrackID,\n      }),\n    );\n\n    SetPointCloudLoading(dispatch, true);\n    const result = predict(start, end);\n    SetPredictResult(dispatch, result);\n    SetPredictResultVisible(dispatch, true);\n  };\n\n  if (isPointCloudSegmentationPattern) {\n    return null;\n  }\n\n  return (\n    <Button\n      type='link'\n      onClick={handler}\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        height: 'auto',\n        alignItems: 'center',\n      }}\n    >\n      <img src={icon} style={{ alignSelf: 'center' }} />\n      <span style={{ color: '#797979' }}>{t('ComplementaryTracking')}</span>\n    </Button>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => {\n  return {\n    loading: state.annotation.loading,\n    predictionResultVisible: state.annotation.predictionResultVisible,\n  };\n};\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(\n  PredictTrackingIcon,\n);\n","/**\n * @file Implement TagTool interaction through class components.\n *       Refer to: packages/lb-annotation/src/core/toolOperation/tagOperation.ts\n * @author Glenfiddish <edwinlee0927@hotmail.com>\n * @date 2022-05-31\n */\n\nimport React from 'react';\nimport { CommonToolUtils, uuid } from '@labelbee/lb-annotation';\nimport StepUtils from '@/utils/StepUtils';\nimport { jsonParser } from '@/utils';\nimport { VideoPlayer } from './index';\nimport { VideoTagLayer } from './VideoTagLayer';\nimport { IStepInfo } from '@/types/step';\nimport _ from 'lodash';\nimport type { ObjectString } from './types';\nimport { getKeyCodeNumber } from './utils';\nimport { IFileItem } from '@/types/data';\n\nexport interface IVideoTagInstanceAdaptorProps {\n  imgIndex: number;\n  imgList: IFileItem[];\n  pageForward: () => void;\n  pageJump: (page: string) => void;\n  pageBackward: () => void;\n  onMounted: (instance: TagToolInstanceAdaptor) => void;\n  onUnmounted: () => void;\n  step: number;\n  stepList: IStepInfo[];\n}\n\ninterface IVideoTagInstanceAdaptorState {\n  // TODO: Use ITagResult from 'lb-annotation'\n  tagResult: any[];\n  labelSelectedList: number[];\n  valid: boolean;\n}\n\nexport class TagToolInstanceAdaptor extends React.Component<\n  IVideoTagInstanceAdaptorProps,\n  IVideoTagInstanceAdaptorState\n> {\n  public fns: { [key: string]: () => void } = {};\n  public videoRef?: HTMLVideoElement;\n  public labelSelectedList: number[] = [];\n\n  public constructor(props: IVideoTagInstanceAdaptorProps) {\n    super(props);\n    this.state = {\n      tagResult: [],\n      labelSelectedList: [],\n      valid: true,\n    };\n  }\n\n  public get config() {\n    const stepInfo = StepUtils.getCurrentStepInfo(this.props.step, this.props.stepList);\n    return jsonParser(stepInfo?.config);\n  }\n\n  /** Just implementation, no actual logic */\n  public get history() {\n    return { initRecord: () => {}, pushHistory: () => {} };\n  }\n\n  public get currentTagResult() {\n    return this.state.tagResult[0] ?? {};\n  }\n\n  public get valid() {\n    return this.state.valid;\n  }\n\n  public clearResult = (sendMsg = true, value?: string) => {\n    const newTag = value\n      ? this.state.tagResult.map((v) => {\n          if (v?.result[value]) {\n            delete v.result[value];\n          }\n          return v;\n        })\n      : [];\n\n    this.setState(\n      {\n        tagResult: newTag,\n      },\n      () => this.emitEvent('render'),\n    );\n  };\n\n  public exportData = () => {\n    const duration = this.videoRef?.duration ?? 0;\n    const videoQulity = this.videoRef?.getVideoPlaybackQuality();\n    const frames = videoQulity?.totalVideoFrames;\n    const videoWidth = this.videoRef?.videoWidth ?? 0;\n    const videoHeight = this.videoRef?.videoHeight ?? 0;\n\n    return [\n      this.state.tagResult,\n      { valid: this.state.valid, duration, frames, videoWidth, videoHeight },\n    ];\n  };\n\n  public singleOn(event: string, func: () => void) {\n    this.fns[event] = func;\n  }\n\n  public on(event: string, func: () => void) {\n    this.singleOn(event, func);\n  }\n\n  public getTagResultByCode(num1: number, num2?: number) {\n    try {\n      const inputList = this.config?.inputList ?? [];\n      const mulitTags = inputList.length > 1;\n      const keycode1 = num2 !== undefined ? num1 : 0;\n      const keycode2 = num2 !== undefined ? num2 : num1;\n      const primaryTagConfig = mulitTags ? inputList[keycode1] : inputList[0];\n      const secondaryTagConfig = (primaryTagConfig.subSelected ?? [])[keycode2];\n\n      if (primaryTagConfig && secondaryTagConfig) {\n        return {\n          value: {\n            key: primaryTagConfig.value,\n            value: secondaryTagConfig.value,\n          },\n          isMulti: primaryTagConfig.isMulti,\n        };\n      }\n    } catch {\n      return;\n    }\n  }\n\n  public setLabelBySelectedList(num1: number, num2?: number) {\n    const newTagConfig = this.getTagResultByCode(num1, num2);\n\n    if (newTagConfig) {\n      const tagRes = this.combineResult(newTagConfig, this.state.tagResult[0]?.result ?? {});\n\n      const tagResult = [\n        {\n          sourceID: CommonToolUtils.getSourceID(),\n          id: this.currentTagResult?.id ?? uuid(8, 62),\n          result: tagRes,\n        },\n      ];\n\n      this.setState(\n        {\n          tagResult,\n        },\n        () => this.emitEvent('render'),\n      );\n    }\n  }\n\n  public emitEvent = (event: string) => {\n    if (this.fns[event]) {\n      this.fns[event]();\n    }\n  };\n\n  /**\n   * Combine result with inputValue and existValue\n   * @param inputValue\n   * @param existValue\n   * @returns newValue\n   */\n  public combineResult = (\n    inputValue: { value: { key: string; value: string }; isMulti: boolean },\n    existValue: ObjectString = {},\n  ) => {\n    const { isMulti } = inputValue;\n    const { key, value } = inputValue.value;\n\n    if (isMulti) {\n      let valuesArray = existValue[key]?.split(';') ?? [];\n      if (valuesArray.includes(value)) {\n        valuesArray = valuesArray.filter((i) => i !== value);\n      } else {\n        valuesArray.push(value);\n      }\n\n      const valuesSet = new Set(valuesArray);\n      existValue[key] = Array.from(valuesSet).join(';');\n      return _.pickBy(existValue, (v) => v);\n    }\n\n    existValue[key] = existValue[key] === value ? undefined : value;\n\n    return _.pickBy(existValue, (v) => v);\n  };\n\n  public setResult = (tagResult: any[]) => {\n    this.setState({\n      tagResult,\n    });\n\n    if (this.fns['render']) {\n      this.fns['render']();\n    }\n  };\n\n  public setLabel = (num1: number, num2: number) => {\n    this.setLabelBySelectedList(num1, num2);\n  };\n\n  /**\n   * Keydown event for recording keycode input(numeric only)\n   * @param event\n   */\n  public keydown = (event: KeyboardEvent) => {\n    const keyCode = getKeyCodeNumber(event.keyCode);\n\n    if (keyCode) {\n      const keyIndex = keyCode - 1;\n\n      if (this.config.inputList.length === 1) {\n        // 说明标签只有一层\n        this.labelSelectedList = [0, keyIndex];\n        this.setLabel(0, keyIndex);\n        setTimeout(() => {\n          this.labelSelectedList = [];\n          this.emitEvent('render');\n        }, 500);\n\n        return;\n      }\n\n      if (this.labelSelectedList.length === 1) {\n        this.labelSelectedList = [this.labelSelectedList[0], keyIndex];\n        this.setLabel(this.labelSelectedList[0], keyIndex);\n        setTimeout(() => {\n          this.labelSelectedList = [];\n          this.emitEvent('render');\n        }, 500);\n      } else {\n        this.labelSelectedList = [keyIndex];\n        this.emitEvent('expend');\n      }\n    }\n  };\n\n  public setValid = (valid: boolean) => {\n    this.setState({ valid });\n    if (valid === false) {\n      this.setState({ tagResult: [] });\n    }\n\n    this.emitEvent('render');\n  };\n\n  public componentDidMount() {\n    document.addEventListener('keydown', this.keydown);\n    this.props.onMounted(this);\n    this.setResultFromImgList(this.props);\n  }\n\n  public componentWillUnmount() {\n    document.addEventListener('keydown', this.keydown);\n    this.props.onUnmounted();\n  }\n\n  public setResultFromImgList = (props: IVideoTagInstanceAdaptorProps) => {\n    const { imgList, imgIndex, step } = props;\n\n    if (!imgList[imgIndex]) {\n      return;\n    }\n    const res = jsonParser(imgList[imgIndex].result);\n    const stepRes = res[`step_${step}`];\n\n    this.setState({\n      tagResult: stepRes?.result ?? [],\n      valid: res?.valid === undefined ? true : res.valid,\n    });\n  };\n\n  /** Observer imgIndex and set tagResult */\n  public shouldComponentUpdate(props: IVideoTagInstanceAdaptorProps) {\n    if (props.imgIndex !== this.props.imgIndex) {\n      this.setResultFromImgList(props);\n    }\n    return true;\n  }\n\n  public render() {\n    const { imgIndex, imgList, pageForward, pageJump, pageBackward } = this.props;\n    const { tagResult, valid } = this.state;\n\n    return (\n      <div style={{ height: '100%', width: '100%', position: 'relative' }}>\n        <VideoPlayer\n          imgIndex={imgIndex}\n          imgList={imgList}\n          pageBackward={pageBackward}\n          pageForward={pageForward}\n          pageJump={pageJump}\n          valid={valid}\n          setVideoRef={(video) => {\n            this.videoRef = video;\n          }}\n        />\n        <VideoTagLayer result={tagResult} inputList={this.config?.inputList} />\n      </div>\n    );\n  }\n}\n","/**\n * @author Glenfiddish <edwinlee0927@hotmail.com>\n * @file Implement video player, including mouse and keyboard event\n * @date 2022-06-02\n */\n\nimport React from 'react';\nimport VideoController from './components/controller';\nimport { getClassName } from '@/utils/dom';\nimport { cKeyCode } from '@labelbee/lb-annotation';\nimport { IFileItem } from '@/types/data';\nimport { decimalReserved } from './utils';\nimport FileException from '../fileException';\n\nconst EKeyCode = cKeyCode.default;\n\nexport const VideoPlayerCtx = React.createContext<{\n  videoRef?: React.RefObject<HTMLVideoElement> | null;\n  isPlay: boolean;\n  playPause: () => void;\n  updateNextPlaybackRate: (isForward?: boolean) => void;\n  setCurrentTime: (time: number) => void;\n  playbackRate: number;\n  currentTime: number;\n  duration: number;\n  buffered: number;\n  imgList: IFileItem[];\n  imgIndex: number;\n  pageBackward: () => void;\n  pageJump: (page: string) => void;\n  pageForward: () => void;\n}>({\n  isPlay: false,\n  playPause: () => {},\n  updateNextPlaybackRate: () => {},\n  playbackRate: 1,\n  currentTime: 0,\n  duration: 0,\n  buffered: 0,\n  setCurrentTime: () => {},\n  imgList: [],\n  imgIndex: -1,\n  pageBackward: () => {},\n  pageJump: (page: string) => {},\n  pageForward: () => {},\n});\n\nconst PER_INTERVAL = 50;\nconst PER_FORWARD = 0.1;\nconst PLAYBACK_RATES = [0.5, 1, 1.5, 2, 4, 6, 8, 16];\n\ninterface IVideoPlayerProps {\n  imgList: IFileItem[];\n  imgIndex: number;\n  pageBackward: () => void;\n  pageJump: (page: string) => void;\n  pageForward: () => void;\n  valid: boolean;\n  setVideoRef?: (video: HTMLVideoElement) => void;\n}\n\ninterface IVideoPlayerState {\n  playbackRate: number;\n  currentTime: number;\n  isPlay: boolean;\n  duration: number;\n  buffered: number;\n  error: boolean;\n}\n\nexport class VideoPlayer extends React.Component<IVideoPlayerProps, IVideoPlayerState> {\n  public videoRef?: React.RefObject<HTMLVideoElement>;\n  public timeInterval?: number;\n\n  public constructor(props: IVideoPlayerProps) {\n    super(props);\n    this.state = {\n      playbackRate: 1,\n      currentTime: 0,\n      isPlay: false,\n      duration: 0,\n      buffered: 0,\n      error: false,\n    };\n    this.videoRef = React.createRef();\n  }\n\n  public get videoElm() {\n    return this.videoRef?.current;\n  }\n\n  public get videoSrc() {\n    const { imgIndex, imgList } = this.props;\n    return imgIndex > -1 ? imgList[imgIndex]?.url ?? '' : '';\n  }\n\n  public changePlaybackPate = (playbackRate: number) => {\n    if (this.videoElm) {\n      this.videoElm.playbackRate = playbackRate;\n      this.setState({\n        playbackRate,\n      });\n    }\n  };\n\n  public playPause = () => {\n    if (this.videoElm?.paused) {\n      this.videoElm?.play();\n    } else {\n      this.videoElm?.pause();\n    }\n  };\n\n  public updateNextPlaybackRate = (isForward = true) => {\n    const idx = PLAYBACK_RATES.findIndex((r) => r === this.state.playbackRate);\n    let nextIdx = isForward ? Math.min(idx + 1, PLAYBACK_RATES.length - 1) : Math.max(idx - 1, 0);\n    this.changePlaybackPate(PLAYBACK_RATES[nextIdx]);\n  };\n\n  public fastForward = () => {\n    if (this.videoElm) {\n      this.setCurrentTime(this.videoElm.currentTime + PER_FORWARD);\n    }\n  };\n\n  public rewind = () => {\n    if (this.videoElm) {\n      this.setCurrentTime(this.videoElm.currentTime - PER_FORWARD);\n    }\n  };\n\n  /**\n   * Implement Video's keydown\n   * Play / Pause           -   Space\n   * Rewind / FastForward   -   ⬅️  /  ➡️\n   * Speed                  -   ⬆️  /  ⬇\n   * @param event\n   */\n  public keydown = (event: KeyboardEvent) => {\n    if (event.keyCode === EKeyCode.Space) {\n      event.preventDefault();\n      this.playPause();\n    }\n\n    if (event.keyCode === EKeyCode.Up) {\n      event.preventDefault();\n      this.updateNextPlaybackRate();\n    }\n\n    if (event.keyCode === EKeyCode.Down) {\n      event.preventDefault();\n      this.updateNextPlaybackRate(false);\n    }\n\n    if (event.keyCode === EKeyCode.Left) {\n      event.preventDefault();\n      this.rewind();\n    }\n\n    if (event.keyCode === EKeyCode.Right) {\n      event.preventDefault();\n      this.fastForward();\n    }\n  };\n\n  public onPlay = () => {\n    this.setState(\n      {\n        isPlay: true,\n      },\n      this.onVideoStart,\n    );\n  };\n\n  public onPause = () => {\n    this.onVideoStopped();\n  };\n\n  public onVideoStopped = () => {\n    this.setState({\n      isPlay: false,\n    });\n\n    if (this.timeInterval) {\n      clearInterval(this.timeInterval);\n      this.timeInterval = undefined;\n    }\n\n    /** Due to speedrate can less than PER_INTERVAL, it need to set current time after stopped */\n    if (this.videoElm) {\n      this.setCurrentTime(this.videoElm.currentTime);\n    }\n  };\n\n  public onVideoStart = () => {\n    this.timeInterval = window.setInterval(() => {\n      if (this.videoElm) {\n        try {\n          if (this.videoElm?.buffered.length > 0) {\n            const buffered = this.videoElm?.buffered.end(0);\n\n            this.setState({\n              currentTime: decimalReserved(this.videoElm?.currentTime, 1),\n              buffered,\n            });\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    }, PER_INTERVAL);\n  };\n\n  public resetVideoData = () => {\n    this.setState({\n      currentTime: 0,\n      buffered: 0,\n      error: false,\n      isPlay: false,\n    });\n\n    if (this.videoElm) {\n      this.videoElm.playbackRate = this.state.playbackRate;\n    }\n    this.onVideoStopped();\n  };\n\n  public setDuration = () => {\n    if (this.videoElm) {\n      const duration = decimalReserved(this.videoElm?.duration, 1);\n\n      this.setState({\n        duration,\n      });\n    }\n  };\n\n  public setCurrentTime = (currentTime: number) => {\n    if (this.videoElm) {\n      this.videoElm.currentTime = currentTime;\n      this.setState({\n        currentTime,\n      });\n    }\n  };\n\n  public reload = () => {\n    this.videoElm?.load();\n  };\n\n  public onError = () => {\n    this.resetVideoData();\n    this.setState({ error: true });\n  };\n\n  public componentDidMount() {\n    window.addEventListener('keydown', this.keydown);\n    if (this.videoRef?.current && this.props.setVideoRef) {\n      this.props.setVideoRef(this.videoRef?.current as HTMLVideoElement);\n    }\n  }\n\n  public componentWillUnmount() {\n    window.removeEventListener('keydown', this.keydown);\n  }\n\n  public render() {\n    const { isPlay, playbackRate, currentTime, duration, buffered, error } = this.state;\n    const { imgList, imgIndex, pageBackward, pageJump, pageForward, valid } = this.props;\n\n    const {\n      playPause,\n      updateNextPlaybackRate,\n      onPause,\n      onPlay,\n      resetVideoData,\n      setDuration,\n      setCurrentTime,\n      onError,\n      videoRef,\n      videoSrc,\n    } = this;\n\n    return (\n      <VideoPlayerCtx.Provider\n        // eslint-disable-next-line react/jsx-no-constructed-context-values\n        value={{\n          videoRef: this.videoRef,\n          isPlay,\n          playPause,\n          updateNextPlaybackRate,\n          playbackRate,\n          currentTime,\n          duration,\n          buffered,\n          setCurrentTime,\n          imgIndex,\n          imgList,\n          pageBackward,\n          pageJump,\n          pageForward,\n        }}\n      >\n        <div className={getClassName('video-wrapper')}>\n          <div className={getClassName('video-container')}>\n            <video\n              ref={videoRef}\n              className={getClassName('video')}\n              src={videoSrc}\n              onPause={onPause}\n              onPlay={onPlay}\n              onLoadedMetadata={resetVideoData}\n              onError={onError}\n              onDurationChange={setDuration}\n              width='100%'\n              height='100%'\n              onClick={playPause}\n            />\n\n            <FileException\n              fileType='video'\n              errorProps={{\n                reloadImage: this.reload,\n                backgroundColor: '#e2e2e2',\n                ignoreOffsetY: true,\n                isError: error,\n              }}\n              invalidProps={{\n                isValid: valid,\n              }}\n            />\n          </div>\n          <VideoController />\n        </div>\n      </VideoPlayerCtx.Provider>\n    );\n  }\n}\n\nexport default VideoPlayer;\n","import React from 'react';\nimport { getClassName } from '@/utils/dom';\nimport { Slider } from 'antd';\n\ninterface IProps {\n  onChange: (size: number) => void;\n}\n\nconst PointCloudSizeSlider = ({ onChange }: IProps) => {\n  return (\n    <span className={getClassName('point-cloud-container', 'slider-container')}>\n      <span className={getClassName('point-cloud-container', 'slider-container', 'circle')} />\n      <span className={getClassName('point-cloud-container', 'slider-container', 'slider')}>\n        <Slider onChange={onChange} min={1} max={8} />\n      </span>\n      <span\n        className={getClassName('point-cloud-container', 'slider-container', 'circle')}\n        style={{ width: '10px', height: '10px' }}\n      />\n    </span>\n  );\n};\n\nexport default PointCloudSizeSlider;\n","/*\n * @Author: Laoluo luozefeng@sensetime.com\n * @Date: 2022-06-22 11:08:31\n * @LastEditors: Laoluo luozefeng@sensetime.com\n * @LastEditTime: 2022-07-08 11:08:02\n */\nimport { PointCloud, PointCloudAnnotation, THybridToolName } from '@labelbee/lb-annotation';\nimport { getClassName } from '@/utils/dom';\nimport { PointCloudContainer } from './PointCloudLayout';\nimport React, { useEffect, useRef } from 'react';\nimport { PointCloudContext } from './PointCloudContext';\nimport { EPerspectiveView, IPointUnit, UpdatePolygonByDragList } from '@labelbee/lb-utils';\nimport { useSingleBox } from './hooks/useSingleBox';\nimport { useSphere } from './hooks/useSphere';\nimport { useZoom } from './hooks/useZoom';\nimport { SizeInfoForView } from './PointCloudInfos';\nimport { connect } from 'react-redux';\nimport { a2MapStateToProps, IA2MapStateProps } from '@/store/annotation/map';\nimport { usePointCloudViews } from './hooks/usePointCloudViews';\nimport useSize from '@/hooks/useSize';\nimport EmptyPage from './components/EmptyPage';\nimport { useTranslation } from 'react-i18next';\nimport { LabelBeeContext } from '@/store/ctx';\nimport ToolUtils from '@/utils/ToolUtils';\nimport TitleButton from './components/TitleButton';\n\n/**\n * 统一一下，将其拓展为 二维转换为 三维坐标的转换\n * Get the offset from canvas2d-coordinate to world coordinate\n * @param currentPos\n * @param size\n * @param zoom\n * @returns\n */\nconst TransferCanvas2WorldOffset = (\n  currentPos: { x: number; y: number },\n  size: { width: number; height: number },\n  zoom = 1,\n) => {\n  const { width: w, height: h } = size;\n\n  const canvasCenterPoint = {\n    x: currentPos.x + (w * zoom) / 2,\n    y: currentPos.y + (h * zoom) / 2,\n  };\n\n  const worldCenterPoint = {\n    x: size.width / 2,\n    y: size.height / 2,\n  };\n\n  return {\n    offsetX: (worldCenterPoint.x - canvasCenterPoint.x) / zoom,\n    offsetY: -(worldCenterPoint.y - canvasCenterPoint.y) / zoom,\n  };\n};\nconst updateBackViewByCanvas2D = (\n  currentPos: { x: number; y: number },\n  zoom: number,\n  size: { width: number; height: number },\n  rotation: number,\n  backPointCloud: PointCloud,\n) => {\n  const { offsetX, offsetY } = TransferCanvas2WorldOffset(currentPos, size, zoom);\n  backPointCloud.camera.zoom = zoom;\n  if (currentPos) {\n    const cos = Math.cos(rotation);\n    const sin = Math.sin(rotation);\n    const offsetXX = offsetX * cos;\n    const offsetXY = offsetX * sin;\n    const { x, y, z } = backPointCloud.initCameraPosition;\n    backPointCloud.camera.position.set(x + offsetXY, y - offsetXX, z + offsetY);\n  }\n  backPointCloud.camera.updateProjectionMatrix();\n  backPointCloud.render();\n};\n\ninterface IProps {\n  checkMode?: boolean;\n}\n\nconst PointCloudBackView = ({ currentData, config, checkMode }: IA2MapStateProps & IProps) => {\n  const ptCtx = React.useContext(PointCloudContext);\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n  const { selectedBox } = useSingleBox();\n  const { selectedSphere } = useSphere();\n  const { syncBackviewToolZoom } = useZoom();\n\n  const { t } = useTranslation();\n  const { backViewUpdateBox, backViewUpdatePoint } = usePointCloudViews();\n\n  useEffect(() => {\n    if (ref.current) {\n      const size = {\n        width: ref.current.clientWidth,\n        height: ref.current.clientHeight,\n      };\n\n      const pointCloudAnnotation = new PointCloudAnnotation({\n        container: ref.current,\n        size,\n        extraProps: { showDirectionLine: false, forbidAddNew: true, forbidDelete: true },\n        config,\n        checkMode,\n        toolName: ToolUtils.getPointCloudToolList() as THybridToolName,\n      });\n      ptCtx.setBackViewInstance(pointCloudAnnotation);\n    }\n  }, []);\n\n  useEffect(() => {\n    // By the way as an initialization judgment\n    if (!size || !ptCtx.backViewInstance) {\n      return;\n    }\n\n    const { toolInstance: backPointCloudPolygonOperation, pointCloudInstance: backPointCloud } =\n      ptCtx.backViewInstance;\n\n    /**\n     * Synchronized 3d point cloud view displacement operations\n     *\n     * Change Orthographic Camera size\n     */\n    backPointCloudPolygonOperation.singleOn('renderZoom', (zoom: number, currentPos: any) => {\n      if (ptCtx.selectedPointCloudBox) {\n        updateBackViewByCanvas2D(\n          currentPos,\n          zoom,\n          size,\n          ptCtx.selectedPointCloudBox.rotation,\n          backPointCloud,\n        );\n        syncBackviewToolZoom(currentPos, zoom, size);\n        return;\n      }\n      if (selectedSphere) {\n        updateBackViewByCanvas2D(currentPos, zoom, size, 0, backPointCloud);\n        syncBackviewToolZoom(currentPos, zoom, size);\n        return;\n      }\n    });\n\n    // Synchronized 3d point cloud view displacement operations\n    backPointCloudPolygonOperation.singleOn('dragMove', ({ currentPos, zoom }: any) => {\n      if (!ptCtx.selectedPointCloudBox && !selectedSphere) {\n        return;\n      }\n      updateBackViewByCanvas2D(\n        currentPos,\n        zoom,\n        size,\n        ptCtx.selectedPointCloudBox ? ptCtx.selectedPointCloudBox.rotation : 0,\n        backPointCloud,\n      );\n    });\n\n    backPointCloudPolygonOperation.singleOn(\n      'updatePointByDrag',\n      (updatePoint: IPointUnit, oldPointList: IPointUnit[]) => {\n        if (selectedSphere) {\n          backViewUpdatePoint?.(updatePoint, oldPointList[0]);\n        }\n      },\n    );\n    backPointCloudPolygonOperation.singleOn(\n      'updatePolygonByDrag',\n      (updateList: UpdatePolygonByDragList) => {\n        if (ptCtx.selectedIDs.length === 1 && updateList.length === 1) {\n          const { newPolygon, originPolygon } = updateList[0];\n\n          if (newPolygon && originPolygon) {\n            backViewUpdateBox(newPolygon, originPolygon);\n          }\n        }\n      },\n    );\n  }, [ptCtx, size]);\n\n  useEffect(() => {\n    // Update Size\n    ptCtx?.backViewInstance?.initSize(size);\n  }, [size]);\n\n  return (\n    <PointCloudContainer\n      className={getClassName('point-cloud-container', 'back-view')}\n      title={<TitleButton title={t('BackView')} />}\n      titleOnSurface={true}\n    >\n      <div className={getClassName('point-cloud-container', 'bottom-view-content')}>\n        <div className={getClassName('point-cloud-container', 'core-instance')} ref={ref} />\n        {!selectedBox && !selectedSphere && <EmptyPage />}\n        <SizeInfoForView perspectiveView={EPerspectiveView.Back} />\n      </div>\n    </PointCloudContainer>\n  );\n};\n\nexport default connect(a2MapStateToProps, null, null, { context: LabelBeeContext })(\n  PointCloudBackView,\n);\n","/**\n * @file EmptyPage\n * @createDate 2022-08-31\n * @author Ron <ron.f.luo@gmail.com>\n */\nimport React from 'react';\nimport NoDataSvg from '@/assets/annotation/pointCloudTool/nodata.svg';\nimport { getClassName } from '@/utils/dom';\nimport { useTranslation } from 'react-i18next';\n\nconst EmptyPage = () => {\n  const { t } = useTranslation();\n\n  return (\n    <div className={getClassName('point-cloud-container', 'empty-page')}>\n      <img src={NoDataSvg} />\n      <span className={getClassName('point-cloud-container', 'empty-page', 'text')}>\n        {t('NoData')}\n      </span>\n    </div>\n  );\n};\n\nexport default EmptyPage;\n","import { useContext } from 'react';\nimport { IAnnotationStateProps } from '@/store/annotation/map';\nimport { synchronizeBackView, synchronizeSideView } from './usePointCloudViews';\nimport { useSingleBox } from './useSingleBox';\nimport { PointCloudContext } from '../PointCloudContext';\nimport { cAnnotation } from '@labelbee/lb-annotation';\nimport { PointCloudUtils } from '@labelbee/lb-utils';\nimport { useThrottleFn } from 'ahooks';\n\nconst { ERotateDirection } = cAnnotation;\n\n/**\n * PointCloud Rotate Hook\n * @returns\n */\nexport const useRotate = ({ currentData }: IAnnotationStateProps) => {\n  const ptCtx = useContext(PointCloudContext);\n  const { selectedBox, updateSelectedBox } = useSingleBox();\n  const { run: updateRotate } = useThrottleFn(\n    (angle: number) => {\n      const { topViewInstance, mainViewInstance, syncAllViewPointCloudColor } = ptCtx;\n      if (!topViewInstance || !mainViewInstance) {\n        return;\n      }\n\n      const { pointCloud2dOperation: TopPointCloudPolygonOperation } = topViewInstance;\n\n      const selectedPointCloudBox = selectedBox?.info;\n\n      if (!selectedPointCloudBox || !currentData?.url || !ptCtx.backViewInstance) {\n        return;\n      }\n\n      const newPointCloudList = updateSelectedBox({\n        rotation: PointCloudUtils.restrictAngleRange(\n          selectedPointCloudBox.rotation + Number(Math.PI * angle) / 180,\n        ),\n      });\n\n      TopPointCloudPolygonOperation.rotatePolygon(angle, ERotateDirection.Anticlockwise);\n      const selectedPolygon = TopPointCloudPolygonOperation.selectedPolygon;\n\n      mainViewInstance.generateBox(selectedPointCloudBox);\n      syncAllViewPointCloudColor(newPointCloudList);\n      synchronizeSideView(\n        selectedPointCloudBox,\n        selectedPolygon,\n        ptCtx.sideViewInstance,\n        currentData.url,\n      );\n      synchronizeBackView(\n        selectedPointCloudBox,\n        selectedPolygon,\n        ptCtx.backViewInstance,\n        currentData.url,\n      );\n      mainViewInstance.render();\n    },\n    {\n      wait: 800,\n    }\n  );\n\n  return { \n    updateRotate,\n  };\n};\n","/**\n * @file PointCloud sideView - React Component\n * @createdate 2022-07-11\n * @author Ron <ron.f.luo@gmail.com>\n */\nimport { PointCloud, PointCloudAnnotation, THybridToolName } from '@labelbee/lb-annotation';\nimport { getClassName } from '@/utils/dom';\nimport { PointCloudContainer } from './PointCloudLayout';\nimport React, { useEffect, useRef } from 'react';\nimport { EPerspectiveView, IPointUnit, UpdatePolygonByDragList } from '@labelbee/lb-utils';\nimport { PointCloudContext } from './PointCloudContext';\nimport { SizeInfoForView } from './PointCloudInfos';\nimport { connect } from 'react-redux';\nimport { a2MapStateToProps, IA2MapStateProps } from '@/store/annotation/map';\nimport { usePointCloudViews } from './hooks/usePointCloudViews';\nimport { useSingleBox } from './hooks/useSingleBox';\nimport { useSphere } from './hooks/useSphere';\nimport EmptyPage from './components/EmptyPage';\nimport useSize from '@/hooks/useSize';\nimport { useTranslation } from 'react-i18next';\nimport { LabelBeeContext } from '@/store/ctx';\nimport ToolUtils from '@/utils/ToolUtils';\nimport { useZoom } from '@/components/pointCloudView/hooks/useZoom';\nimport TitleButton from './components/TitleButton';\n\n/**\n * Get the offset from canvas2d-coordinate to world coordinate\n * @param currentPos\n * @param size\n * @param zoom\n * @returns\n */\nconst TransferCanvas2WorldOffset = (\n  currentPos: { x: number; y: number },\n  size: { width: number; height: number },\n  zoom = 1,\n) => {\n  const { width: w, height: h } = size;\n\n  const canvasCenterPoint = {\n    x: currentPos.x + (w * zoom) / 2, // 放大倍数之后的中心点的偏移量\n    y: currentPos.y + (h * zoom) / 2,\n  };\n\n  const worldCenterPoint = {\n    x: size.width / 2,\n    y: size.height / 2,\n  };\n\n  return {\n    offsetX: (worldCenterPoint.x - canvasCenterPoint.x) / zoom,\n    offsetY: -(worldCenterPoint.y - canvasCenterPoint.y) / zoom,\n  };\n};\n\nconst updateSideViewByCanvas2D = (\n  currentPos: { x: number; y: number },\n  zoom: number,\n  size: { width: number; height: number },\n  rotation: number,\n  SidePointCloud: PointCloud,\n) => {\n  const { offsetX, offsetY } = TransferCanvas2WorldOffset(currentPos, size, zoom);\n  SidePointCloud.camera.zoom = zoom;\n  if (currentPos) {\n    const cos = Math.cos(rotation);\n    const sin = Math.sin(rotation);\n    const offsetXX = offsetX * cos;\n    const offsetXY = offsetX * sin;\n    const { x, y, z } = SidePointCloud.initCameraPosition;\n    SidePointCloud.camera.position.set(x - offsetXX, y - offsetXY, z + offsetY);\n  }\n  SidePointCloud.camera.updateProjectionMatrix();\n  SidePointCloud.render();\n};\n\ninterface IProps {\n  checkMode?: boolean;\n}\n\nconst PointCloudSideView: React.FC<IA2MapStateProps & IProps> = ({ config, checkMode }) => {\n  const ptCtx = React.useContext(PointCloudContext);\n  const { sideViewUpdateBox, sideViewUpdatePoint } = usePointCloudViews();\n  const { selectedBox } = useSingleBox();\n  const { selectedSphere } = useSphere();\n  const ref = useRef<HTMLDivElement>(null);\n  const size = useSize(ref);\n  const { t } = useTranslation();\n  const { syncSideviewToolZoom } = useZoom();\n\n  useEffect(() => {\n    if (ref.current) {\n      const size = {\n        width: ref.current.clientWidth,\n        height: ref.current.clientHeight,\n      };\n\n      const pointCloudAnnotation = new PointCloudAnnotation({\n        container: ref.current,\n        size,\n        extraProps: { showDirectionLine: false, forbidAddNew: true, forbidDelete: true },\n        config,\n        checkMode,\n        toolName: ToolUtils.getPointCloudToolList() as THybridToolName,\n      });\n      ptCtx.setSideViewInstance(pointCloudAnnotation);\n      // };\n    }\n  }, []);\n\n  useEffect(() => {\n    // By the way as an initialization judgment\n    if (!size || !ptCtx.sideViewInstance) {\n      return;\n    }\n\n    const { toolInstance, pointCloudInstance } = ptCtx.sideViewInstance;\n\n    /**\n     * Synchronized 3d point cloud view displacement operations\n     *\n     * Change Orthographic Camera size\n     */\n    toolInstance.singleOn('renderZoom', (zoom: number, currentPos: any) => {\n      if (ptCtx.selectedPointCloudBox) {\n        updateSideViewByCanvas2D(\n          currentPos,\n          zoom,\n          size,\n          ptCtx.selectedPointCloudBox.rotation,\n          pointCloudInstance,\n        );\n        syncSideviewToolZoom(currentPos, zoom, size);\n        return;\n      }\n      if (selectedSphere) {\n        updateSideViewByCanvas2D(currentPos, zoom, size, 0, pointCloudInstance);\n        syncSideviewToolZoom(currentPos, zoom, size);\n      }\n    });\n\n    // Synchronized 3d point cloud view displacement operations\n    toolInstance.singleOn('dragMove', ({ currentPos, zoom }: any) => {\n      if (!ptCtx.selectedPointCloudBox && !selectedSphere) {\n        return;\n      }\n      updateSideViewByCanvas2D(\n        currentPos,\n        zoom,\n        size,\n        ptCtx.selectedPointCloudBox ? ptCtx.selectedPointCloudBox.rotation : 0,\n        pointCloudInstance,\n      );\n    });\n\n    toolInstance.singleOn(\n      'updatePointByDrag',\n      (updatePoint: IPointUnit, oldPointList: IPointUnit[]) => {\n        if (selectedSphere) {\n          sideViewUpdatePoint?.(updatePoint, oldPointList[0]);\n        }\n      },\n    );\n\n    toolInstance.singleOn('updatePolygonByDrag', (updateList: UpdatePolygonByDragList) => {\n      if (ptCtx.selectedIDs.length === 1 && updateList.length === 1) {\n        const { newPolygon, originPolygon } = updateList[0];\n        sideViewUpdateBox(newPolygon, originPolygon);\n      }\n    });\n  }, [ptCtx, size]);\n\n  useEffect(() => {\n    // Update Size\n    ptCtx?.sideViewInstance?.initSize(size);\n  }, [size]);\n\n  return (\n    <PointCloudContainer\n      className={getClassName('point-cloud-container', 'side-view')}\n      title={<TitleButton title={t('SideView')} />}\n      titleOnSurface={true}\n    >\n      <div className={getClassName('point-cloud-container', 'bottom-view-content')}>\n        <div className={getClassName('point-cloud-container', 'core-instance')} ref={ref} />\n        {!selectedBox && !selectedSphere && <EmptyPage />}\n        <SizeInfoForView perspectiveView={EPerspectiveView.Left} />\n      </div>\n    </PointCloudContainer>\n  );\n};\n\nexport default connect(a2MapStateToProps, null, null, { context: LabelBeeContext })(\n  PointCloudSideView,\n);\n","/*\n * @file LLM tool view\n * @Author: lixinghua lixinghua@sensetime.com\n * @Date: 2023-04-10\n */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { AppState } from '@/store';\nimport { connect } from 'react-redux';\nimport { LabelBeeContext, LLMContext } from '@/store/ctx';\nimport { message } from 'antd';\nimport { prefix } from '@/constant';\nimport { Layout } from 'antd/es';\nimport QuestionView from './questionView';\nimport { useTranslation } from 'react-i18next';\nimport { IAnswerList } from './types';\nimport AnnotationTips from '@/views/MainView/annotationTips';\n\ninterface IProps {\n  checkMode?: boolean;\n  annotation?: any;\n  showTips?: boolean;\n  tips?: string;\n}\nconst LLMViewCls = `${prefix}-LLMView`;\nconst LLMToolView: React.FC<IProps> = (props) => {\n  const { annotation, checkMode, tips, showTips } = props;\n  const { imgIndex, imgList } = annotation;\n  const { hoverKey } = useContext(LLMContext);\n  const [answerList, setAnswerList] = useState<IAnswerList[]>([]);\n  const [question, setQuestion] = useState<string>('');\n  const { t } = useTranslation();\n  useEffect(() => {\n    let interval: undefined | ReturnType<typeof setInterval>;\n\n    if (!checkMode) {\n      interval = setInterval(() => {\n        message.info(t('EfficientListening'));\n      }, 1000 * 60);\n\n      return () => {\n        if (interval) {\n          clearInterval(interval);\n        }\n      };\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!imgList[imgIndex]) {\n      return;\n    }\n\n    const qaData = imgList[imgIndex]?.questionList;\n\n    setQuestion(qaData?.question);\n    setAnswerList(qaData?.answerList || []);\n  }, [imgIndex]);\n\n  return (\n    <Layout className={LLMViewCls}>\n      <div className={`${LLMViewCls}-question`}>\n        {showTips === true && <AnnotationTips tips={tips} />}\n        <QuestionView hoverKey={hoverKey} question={question} answerList={answerList} />\n      </div>\n    </Layout>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => {\n  return {\n    annotation: state.annotation,\n  };\n};\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(LLMToolView);\n","/**\n * @file Cache the operation\n * @createDate 2022-09-27\n * @author Ron <ron.f.luo@gmail.com>\n */\n\nimport { useRef, useEffect } from 'react';\n\nconst useRefCache = <T>(data: T) => {\n  const ref = useRef<T>(data);\n  useEffect(() => {\n    ref.current = data\n  }, [data]);\n  return ref;\n};\n\nexport default useRefCache;\n","/*\n * @Author: Laoluo luozefeng@sensetime.com\n * @Date: 2022-06-13 19:31:36\n * @LastEditors: Laoluo luozefeng@sensetime.com\n * @LastEditTime: 2022-06-27 19:43:25\n */\n\nimport { PointCloud } from '@labelbee/lb-annotation';\nimport { IPointCloudBox, PointCloudUtils } from '@labelbee/lb-utils';\nimport React, { useCallback, useEffect, useRef } from 'react';\n\ninterface IProps {\n  src: string; // 图片路径\n  result: string;\n  size: {\n    width: number;\n    height: number;\n  };\n  backgroundColor?: string;\n\n  // Camera Update\n  isOrthographicCamera?: boolean;\n}\n\nconst PointCloudAnnotationView = (props: IProps) => {\n  const { src, result, size, isOrthographicCamera = false, backgroundColor = '#ccc' } = props;\n  let viewOperation = useRef<any>();\n  const instance = useRef<any>();\n\n  const refCallback = useCallback((node) => {\n    viewOperation.current = node;\n  }, []);\n\n  useEffect(() => {\n    let pointCloudProps = {\n      container: viewOperation.current,\n      backgroundColor,\n      isOrthographicCamera,\n    };\n\n    /**\n     * Orthographic Camera Params.\n     *  */\n    if (isOrthographicCamera) {\n      Object.assign(pointCloudProps, {\n        orthographicParams: PointCloudUtils.getDefaultOrthographicParams(size),\n      });\n    }\n\n    const pointCloud = new PointCloud(pointCloudProps);\n    instance.current = pointCloud;\n    return () => {\n      instance.current.renderer?.forceContextLoss();\n    };\n  }, []);\n\n  useEffect(() => {\n    // PointCloud camera init.\n\n    if (instance.current) {\n      // Init the camera\n      instance.current?.init();\n\n      // Update range of orthographicCamera.\n      instance.current?.initOrthographicCamera(PointCloudUtils.getDefaultOrthographicParams(size));\n      instance.current?.render();\n    }\n  }, [size]);\n\n  useEffect(() => {\n    if (instance.current && src) {\n      instance.current?.loadPCDFile(src);\n    }\n  }, [src]);\n\n  useEffect(() => {\n    if (result) {\n      const boxParamsList = PointCloudUtils.getBoxParamsFromResultList(result);\n\n      // Add Init Box\n      boxParamsList.forEach((v: IPointCloudBox) => {\n        instance.current?.generateBox(v, v.id);\n      });\n    }\n    return () => {\n      const boxParamsList = PointCloudUtils.getBoxParamsFromResultList(result);\n      boxParamsList.forEach((v: IPointCloudBox) => {\n        instance.current?.removeObjectByName(v.id, 'box');\n      });\n      instance.current?.render();\n    };\n  }, [result]);\n\n  return <div style={size} ref={refCallback} />;\n};\n\nexport default PointCloudAnnotationView;\n","import MainView from '@/views/MainView';\nimport { IPointCloudBox, i18n } from '@labelbee/lb-utils';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { store } from '.';\nimport { LabelBeeContext } from '@/store/ctx';\nimport { AppState } from './store';\nimport { ANNOTATION_ACTIONS } from './store/Actions';\nimport {\n  InitAnnotationState,\n  InitTaskData,\n  loadImgList,\n  UpdateInjectFunc,\n} from './store/annotation/actionCreators';\nimport { LoadFileAndFileData } from './store/annotation/reducer';\nimport { ToolInstance } from './store/annotation/types';\nimport {\n  GetFileData,\n  IFileItem,\n  LoadFileList,\n  OnPageChange,\n  OnSave,\n  OnStepChange,\n  OnSubmit,\n} from './types/data';\nimport { Header, RenderFooter, Sider, TDrawLayerSlot } from './types/main';\nimport { IStepInfo } from './types/step';\nimport { ConfigProvider } from 'antd/es';\nimport zhCN from 'antd/es/locale/zh_CN';\nimport enUS from 'antd/es/locale/en_US';\nimport { EPointCloudName } from '@labelbee/lb-annotation';\n\ninterface IAnnotationStyle {\n  strokeColor: string;\n  fillColor: string;\n  textColor: string;\n  toolColor: any;\n}\n\nexport interface IPreDataProcessParams {\n  // 标注类型:暂时只支持点云\n  tool: EPointCloudName.PointCloud | string;\n  // 更新数据\n  dataList: IPointCloudBox[];\n  // 更新数据的具体动作\n  action: 'preDataProcess' | 'viewUpdateBox';\n  // 当前步骤的config\n  stepConfig: IStepInfo['config'];\n}\n\nexport interface AppProps {\n  exportData?: (data: any[]) => void;\n  goBack?: () => void;\n  imgList?: IFileItem[];\n  config: string;\n  stepList: IStepInfo[];\n  step: number;\n  onSubmit?: OnSubmit;\n  onSave?: OnSave;\n  onPageChange?: OnPageChange;\n  onStepChange?: OnStepChange;\n  getFileData?: GetFileData;\n  pageSize: number;\n  loadFileList?: LoadFileList;\n  headerName?: string;\n  initialIndex?: number;\n  className?: string;\n  toolInstance: ToolInstance;\n  header?: Header;\n  footer?: RenderFooter;\n  sider?: Sider;\n  style?: {\n    layout?: { [key: string]: any };\n    header?: { [key: string]: any };\n    sider?: { [key: string]: any };\n    footer?: { [key: string]: any };\n  };\n  setToolInstance?: (tool: ToolInstance) => void;\n  mode?: 'light' | 'dark'; // 临时需求应用于 toolFooter 的操作\n  showTips?: boolean; // 是否展示 tips\n  tips?: string; // Tips 具体内容\n  defaultLang: 'en' | 'cn'; // 国际化设置\n  leftSider?: () => React.ReactNode | React.ReactNode;\n\n  // data Correction\n  skipBeforePageTurning?: (pageTurning: Function) => void;\n  beforeRotate?: () => boolean;\n\n  drawLayerSlot?: TDrawLayerSlot;\n\n  // 标注信息扩展的功能\n  dataInjectionAtCreation: (annotationData: any) => {};\n  // 渲染增强\n  renderEnhance: {\n    staticRender?: (canvas: HTMLCanvasElement, data: any, style: IAnnotationStyle) => void;\n    selectedRender?: (canvas: HTMLCanvasElement, data: any, style: IAnnotationStyle) => void;\n    creatingRender?: (canvas: HTMLCanvasElement, data: any, style: IAnnotationStyle) => void;\n  };\n  customRenderStyle?: (data: any) => IAnnotationStyle;\n\n  checkMode?: boolean;\n  intelligentFit?: boolean;\n  enableColorPicker?: boolean;\n  highlightAttribute?: string;\n  onLoad?: ({ toolInstance }: { toolInstance: ToolInstance }) => void;\n  preDataProcess?: (params: IPreDataProcessParams) => IPointCloudBox[];\n}\n\nconst App: React.FC<AppProps> = (props) => {\n  const [_, forceRender] = useState(0);\n  const {\n    imgList,\n    step = 1,\n    stepList,\n    onSubmit,\n    onSave,\n    onPageChange,\n    onStepChange,\n    initialIndex = 0,\n    toolInstance,\n    setToolInstance,\n    getFileData,\n    pageSize = 10,\n    loadFileList,\n    defaultLang = 'cn',\n    skipBeforePageTurning,\n    beforeRotate,\n    checkMode = false,\n    intelligentFit = true,\n    highlightAttribute = '',\n    preDataProcess,\n  } = props;\n\n  useEffect(() => {\n    store.dispatch(\n      InitTaskData({\n        onSubmit,\n        stepList,\n        step,\n        getFileData,\n        pageSize,\n        loadFileList,\n        onSave,\n        onPageChange,\n        onStepChange,\n        skipBeforePageTurning,\n        beforeRotate,\n        checkMode,\n        highlightAttribute,\n        preDataProcess,\n      }),\n    );\n\n    initImgList();\n    // 初始化国际化语言\n    i18n.changeLanguage(defaultLang);\n\n    const i18nLanguageChangedFunc = () => {\n      forceRender((v) => v + 1);\n    };\n\n    i18n.on('languageChanged', i18nLanguageChangedFunc);\n    return () => {\n      i18n.off('languageChanged', i18nLanguageChangedFunc);\n\n      // Init all annotation state after unmounting\n      InitAnnotationState(store.dispatch);\n    };\n  }, []);\n\n  useEffect(() => {\n    store.dispatch(\n      UpdateInjectFunc({\n        onSubmit,\n        stepList,\n        getFileData,\n        pageSize,\n        loadFileList,\n        onSave,\n        onPageChange,\n        onStepChange,\n        beforeRotate,\n        highlightAttribute,\n        preDataProcess,\n      }),\n    );\n\n    i18n.changeLanguage(defaultLang);\n  }, [\n    onSubmit,\n    stepList,\n    getFileData,\n    pageSize,\n    loadFileList,\n    onSave,\n    onPageChange,\n    onStepChange,\n    defaultLang,\n    beforeRotate,\n    highlightAttribute,\n    preDataProcess,\n  ]);\n\n  useEffect(() => {\n    setToolInstance?.(toolInstance);\n  }, [toolInstance]);\n\n  // 初始化imgList 优先以loadFileList方式加载数据\n  const initImgList = () => {\n    if (loadFileList) {\n      loadImgList(store.dispatch, store.getState, initialIndex, true).then((isSuccess) => {\n        if (isSuccess) {\n          store.dispatch(LoadFileAndFileData(initialIndex));\n        }\n      });\n    } else if (imgList && imgList.length > 0) {\n      store.dispatch({\n        type: ANNOTATION_ACTIONS.UPDATE_IMG_LIST,\n        payload: {\n          imgList,\n        },\n      });\n      store.dispatch(LoadFileAndFileData(initialIndex));\n    }\n  };\n\n  return (\n    <div>\n      <ConfigProvider locale={i18n.language === 'en' ? enUS : zhCN}>\n        <MainView {...props} intelligentFit={intelligentFit} />\n      </ConfigProvider>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => ({\n  toolInstance: state.annotation.toolInstance,\n});\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(App);\n","import { AppProps } from '@/App';\nimport { ViewportProvider } from '@/components/customResizeHook';\nimport { prefix } from '@/constant';\nimport { Spin } from 'antd';\nimport { Layout } from 'antd/es';\nimport _ from 'lodash';\nimport React, { useState } from 'react';\nimport AnnotationOperation from './annotationOperation';\nimport AnnotationTips from './annotationTips';\nimport Sidebar from './sidebar';\nimport ToolFooter from './toolFooter';\nimport ToolHeader from './toolHeader';\nimport { getStepConfig } from '@/store/annotation/reducer';\n\nimport VideoAnnotate from '@/components/videoAnnotate';\nimport { AppState } from '@/store';\nimport { connect } from 'react-redux';\nimport ToolUtils from '@/utils/ToolUtils';\nimport PointCloudView from '@/components/pointCloudView';\nimport { getClassName } from '@/utils/dom';\nimport { classnames } from '@/utils';\nimport PreviewResult from '@/components/predictTracking/previewResult';\nimport { LabelBeeContext } from '@/store/ctx';\nimport { EToolName } from '@/data/enums/ToolType';\nimport LLMLayout from './LLMLayout';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport { useTranslation } from 'react-i18next';\n\ninterface IProps {\n  path: string;\n  loading: boolean;\n}\n\nconst { Sider, Content } = Layout;\n\nconst layoutCls = `${prefix}-layout`;\n\nconst ImageAnnotate: React.FC<AppProps & IProps> = (props) => {\n  return (\n    <>\n      {props.showTips === true && <AnnotationTips path={props.path} tips={props.tips} />}\n      <AnnotationOperation {...props} />\n      <ToolFooter style={props.style?.footer} mode={props.mode} footer={props?.footer} />\n    </>\n  );\n};\n\nconst PointCloudAnnotate: React.FC<AppProps & IProps> = (props) => {\n  return (\n    <>\n      <PointCloudView\n        drawLayerSlot={props.drawLayerSlot}\n        checkMode={props.checkMode}\n        intelligentFit={props.intelligentFit}\n      />\n      <ToolFooter style={props.style?.footer} mode={props.mode} footer={props?.footer} />\n    </>\n  );\n};\n\nconst AnnotatedArea: React.FC<AppProps & IProps> = (props) => {\n  const { stepList, step } = props;\n  const currentToolName = getStepConfig(stepList, step)?.tool;\n  const isVideoTool = ToolUtils.isVideoTool(currentToolName);\n  const isPointCloudTool = ToolUtils.isPointCloudTool(currentToolName);\n\n  if (isVideoTool) {\n    return <VideoAnnotate {...props} />;\n  }\n\n  if (isPointCloudTool) {\n    return <PointCloudAnnotate {...props} />;\n  }\n\n  return <ImageAnnotate {...props} />;\n};\n\nconst ViewportProviderLayout = (props: AppProps & IProps & { children: any }) => {\n  const { t } = useTranslation();\n  const { stepList, step } = props;\n  const currentToolName = getStepConfig(stepList, step)?.tool;\n  return (\n    <ViewportProvider>\n      <Spin\n        spinning={props.loading}\n        indicator={<LoadingOutlined />}\n        tip={<span style={{ marginTop: 200 }}>{t('LoadingTips')}</span>}\n        delay={500}\n      >\n        <Layout className={classnames([layoutCls, props.className])} style={props.style?.layout}>\n          <header className={`${layoutCls}__header`} style={props.style?.header}>\n            <ToolHeader\n              header={props?.header}\n              headerName={props.headerName}\n              goBack={props.goBack}\n              exportData={props.exportData}\n              hasLangNode={EToolName.LLM !== currentToolName}\n              hasHeaderOption={EToolName.LLM !== currentToolName}\n              hasPredictTrackingIcon={EToolName.LLM !== currentToolName}\n            />\n          </header>\n          {props.children}\n        </Layout>\n      </Spin>\n    </ViewportProvider>\n  );\n};\n\nconst MainView: React.FC<AppProps & IProps> = (props) => {\n  const [siderWidth, setSiderWidth] = useState<number | undefined>(undefined);\n  const propsSiderWidth = props.style?.sider?.width;\n  const { stepList, step } = props;\n  const currentToolName = getStepConfig(stepList, step)?.tool;\n  const isLLMTool = EToolName.LLM === currentToolName;\n  if (isLLMTool) {\n    return (\n      <ViewportProviderLayout {...props}>\n        <LLMLayout {...props} />\n      </ViewportProviderLayout>\n    );\n  }\n\n  return (\n    <ViewportProviderLayout {...props}>\n      <Layout className={getClassName('layout', 'container')}>\n        {props?.leftSider}\n        <Content className={`${layoutCls}__content`}>\n          <AnnotatedArea {...props} />\n          <PreviewResult />\n        </Content>\n        <Sider\n          className={`${layoutCls}__side`}\n          width={siderWidth ?? propsSiderWidth ?? 240}\n          style={props.style?.sider}\n        >\n          <Sidebar\n            sider={props?.sider}\n            enableColorPicker={props?.enableColorPicker}\n            setSiderWidth={setSiderWidth}\n            propsSiderWidth={props.style?.sider?.width}\n          />\n        </Sider>\n      </Layout>\n    </ViewportProviderLayout>\n  );\n};\n\nconst mapStateToProps = ({ annotation }: AppState) => {\n  const { imgList, loading } = annotation;\n  const imgInfo = imgList[annotation.imgIndex] ?? {};\n  return {\n    path: imgInfo?.path ?? imgInfo?.url ?? '', // 将当前路径的数据注入\n    loading,\n  };\n};\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(MainView);\n","const styleString = `{\"color\":1,\"width\":2,\"borderOpacity\":9,\"fillOpacity\":9,\"toolColor\":{\"1\":{\"valid\":{\"stroke\":\"rgba(0,0,255,0.50)\",\"fill\":\"rgba(0,0,255,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validSelected\":{\"stroke\":\"rgba(0,15,255,1.00)\",\"fill\":\"rgba(0,15,255,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,0.80)\",\"fill\":\"rgba(255,153,102,0.19)\"},\"validHover\":{\"stroke\":\"rgba(0,15,255,0.80)\",\"fill\":\"rgba(0,15,255,0.51)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,0.50)\",\"fill\":\"rgba(255,153,102,0.32)\"}},\"3\":{\"valid\":{\"stroke\":\"rgba(0,255,255,0.50)\",\"fill\":\"rgba(0,255,255,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validSelected\":{\"stroke\":\"rgba(0,212,255,1.00)\",\"fill\":\"rgba(0,212,255,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,0.80)\",\"fill\":\"rgba(255,153,102,0.19)\"},\"validHover\":{\"stroke\":\"rgba(0,212,255,0.80)\",\"fill\":\"rgba(0,212,255,0.51)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,0.50)\",\"fill\":\"rgba(255,153,102,0.32)\"}},\"5\":{\"valid\":{\"stroke\":\"rgba(0,255,0,0.50)\",\"fill\":\"rgba(0,255,0,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validSelected\":{\"stroke\":\"rgba(149,255,1.00)\",\"fill\":\"rgba(149,255,0,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,0.80)\",\"fill\":\"rgba(255,153,102,0.19)\"},\"validHover\":{\"stroke\":\"rgba(149,255,0,0.80)\",\"fill\":\"rgba(149,255,0,0.51)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,0.50)\",\"fill\":\"rgba(255,153,102,0.32)\"}},\"7\":{\"valid\":{\"stroke\":\"rgba(255,255,0,0.50)\",\"fill\":\"rgba(255,255,0,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validSelected\":{\"stroke\":\"rgba(255,230,102,1.00)\",\"fill\":\"rgba(255,213,0,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,0.80)\",\"fill\":\"rgba(255,153,102,0.19)\"},\"validHover\":{\"stroke\":\"rgba(255,230,102,0.80)\",\"fill\":\"rgba(255,230,102,0.51)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,0.50)\",\"fill\":\"rgba(255,153,102,0.32)\"}},\"9\":{\"valid\":{\"stroke\":\"rgba(255,0,255,0.50)\",\"fill\":\"rgba(255,0,255,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validSelected\":{\"stroke\":\"rgba(230,102,255,1.00)\",\"fill\":\"rgba(213,0,255,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,0.80)\",\"fill\":\"rgba(255,153,102,0.19)\"},\"validHover\":{\"stroke\":\"rgba(230,102,255,0.80)\",\"fill\":\"rgba(230,102,255,0.51)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,0.50)\",\"fill\":\"rgba(255,153,102,0.32)\"}}},\"attributeColor\":[{\"valid\":{\"stroke\":\"rgba(204,204,204,1.00)\",\"fill\":\"rgba(204,204,204,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(204,204,204,1.00)\",\"fill\":\"rgba(204,204,204,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(204,204,204,1.00)\",\"fill\":\"rgba(204,204,204,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(128,12,249,1.00)\",\"fill\":\"rgba(128,12,249,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(128,12,249,1.00)\",\"fill\":\"rgba(128,12,249,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(128,12,249,1.00)\",\"fill\":\"rgba(128,12,249,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(0,255,48,1.00)\",\"fill\":\"rgba(0,255,48,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(0,255,48,1.00)\",\"fill\":\"rgba(0,255,48,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(0,255,48,1.00)\",\"fill\":\"rgba(0,255,48,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(255,136,247,1.00)\",\"fill\":\"rgba(255,136,247,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(255,136,247,1.00)\",\"fill\":\"rgba(255,136,247,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(255,136,247,1.00)\",\"fill\":\"rgba(255,136,247,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(255,226,50,1.00)\",\"fill\":\"rgba(255,226,50,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(255,226,50,1.00)\",\"fill\":\"rgba(255,226,50,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(255,226,50,1.00)\",\"fill\":\"rgba(255,226,50,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(153,66,23,1.00)\",\"fill\":\"rgba(153,66,23,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(153,66,23,1.00)\",\"fill\":\"rgba(153,66,23,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(153,66,23,1.00)\",\"fill\":\"rgba(153,66,23,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(2,130,250,1.00)\",\"fill\":\"rgba(2,130,250,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(2,130,250,1.00)\",\"fill\":\"rgba(2,130,250,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(2,130,250,1.00)\",\"fill\":\"rgba(2,130,250,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(255,35,35,1.00)\",\"fill\":\"rgba(255,35,35,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(255,35,35,1.00)\",\"fill\":\"rgba(255,35,35,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(255,35,35,1.00)\",\"fill\":\"rgba(255,35,35,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}},{\"valid\":{\"stroke\":\"rgba(0,255,234,1.00)\",\"fill\":\"rgba(0,255,234,0.32)\"},\"invalid\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.32)\"},\"validSelected\":{\"stroke\":\"rgba(0,255,234,1.00)\",\"fill\":\"rgba(0,255,234,0.64)\"},\"invalidSelected\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"},\"validHover\":{\"stroke\":\"rgba(0,255,234,1.00)\",\"fill\":\"rgba(0,255,234,0.64)\"},\"invalidHover\":{\"stroke\":\"rgba(255,153,102,1.00)\",\"fill\":\"rgba(255,153,102,0.64)\"}}],\"lineColor\":{\"1\":\"rgba(102, 111, 255, 1 )\",\"3\":\"rgba(102, 230, 255, 1)\",\"5\":\"rgba(191, 255, 102, 1)\",\"7\":\"rgba(255, 230, 102, 1)\",\"9\":\"rgba(230, 102, 255, 1)\"},\"attributeLineColor\":[\"rgba(204, 204, 204, 1)\",\"rgba(128, 12, 249, 1)\",\"rgba(0, 255, 48, 1)\",\"rgba(255, 136, 247, 1)\",\"rgba(255, 226, 50, 1)\",\"rgba(153, 66, 23, 1)\",\"rgba(2, 130, 250, 1)\",\"rgba(255, 35, 35, 1)\",\"rgba(0, 255, 234, 1)\"]}`;\n\nexport default styleString;\n","import { uuid } from '@labelbee/lb-annotation';\nimport { jsonParser } from '.';\nimport { EToolName } from '@/data/enums/ToolType';\nimport _ from 'lodash';\nimport StepUtils from './StepUtils';\nimport { IStepInfo } from '@/types/step';\n\nexport default class AnnotationDataUtils {\n  /**\n   * 复制上一张图片结果\n   * @param copyResult 复制的结果\n   * @param step 复制的步骤\n   * @param currentResult 当前的步骤\n   * @returns\n   */\n  public static copyResultChange(copyResult: string, step: number, currentResult: string) {\n    // 其实其限定的范围一般都在单图的情况\n    try {\n      const copyData = jsonParser(copyResult);\n      const currentData = jsonParser(currentResult);\n      const stepName = `step_${step}`;\n      if (copyData[stepName]) {\n        // 这层可能还要处理 dataSource 依赖问题\n        const info = copyData[stepName];\n        if (info.result) {\n          info.result = info.result.map((info: any) => ({\n            ...info,\n            // @ts-ignore\n            id: uuid(8, 62),\n          }));\n          currentData[stepName] = info;\n          return JSON.stringify(currentData);\n        }\n      }\n      return copyResult;\n    } catch {\n      return copyResult;\n    }\n  }\n\n  /**\n   * 判断结果sourceID与依赖数据的id是否能对应\n   * @param result\n   * @param basicResultList\n   */\n  public static isResultSourceMatchedDependence(result: any, basicResultList: any[]) {\n    const sourceIDForCurStep = result?.map((i: { sourceID: string }) => i.sourceID).sort();\n    const sourceIDForDependStep = basicResultList?.map((i) => i.id).sort();\n\n    return _.isEqual(sourceIDForCurStep, sourceIDForDependStep);\n  }\n\n  /**\n   * 获取依赖增量更新的内容\n   * @param result\n   * @param basicResultList\n   * @returns\n   */\n  public static deltaUpdateBasicResultList(result: any, basicResultList: any[]) {\n    const sourceIDForCurStep = result?.map((i: { sourceID: string }) => i.sourceID).sort();\n\n    return basicResultList.filter((v) => !sourceIDForCurStep.includes(v.id));\n  }\n\n  /**\n   *\n   * @param stepResult\n   * @param toolInstance\n   * @param stepConfig\n   * @param basicResultList 获取初始化数据 该部分默认输入需要为空数组\n   * @param isInitData\n   * @returns\n   */\n  public static getInitialResultList(\n    stepResult: any[] | undefined,\n    toolInstance: any,\n    stepConfig: any,\n    basicResultList: any[],\n    isInitData: boolean,\n  ) {\n    const resultList = stepResult ?? [];\n\n    switch (stepConfig.tool) {\n      case EToolName.Tag:\n      case EToolName.Text: {\n        /**\n         * 在依赖的情况下，检查的是否需要增量更新前面新增的结果\n         */\n        if (stepConfig.dataSourceStep > 0) {\n          const deltaResultList = this.deltaUpdateBasicResultList(resultList, basicResultList);\n          if (deltaResultList.length > 0) {\n            return resultList.concat(\n              toolInstance.getInitResultList(stepConfig.dataSourceStep, deltaResultList),\n            );\n          }\n        }\n\n        if (isInitData !== true) {\n          return resultList;\n        }\n\n        return toolInstance.getInitResultList(stepConfig.dataSourceStep, basicResultList);\n      }\n\n      default: {\n        return resultList;\n      }\n    }\n  }\n\n  /**\n   * 修正数据，找到被删除的数据，并将依赖该数据的结果全部删除\n   * @param newResStr 新提交的数据\n   * @param oldResStr 当前的数据\n   * @param step 当前操作的步骤\n   * @param stepList 步骤列表\n   */\n  public static dataCorrection(\n    newResStr: string,\n    oldResStr: string,\n    step: number,\n    stepList: IStepInfo[],\n  ) {\n    try {\n      const curStep = StepUtils.getStepInfo(step, stepList);\n      const stepKey = `step_${curStep.step}`;\n      const newRes = jsonParser(newResStr);\n      const oldRes = jsonParser(oldResStr);\n      const newResForCurStep = newRes[stepKey]?.result;\n      const oldResForCurStep = oldRes[stepKey]?.result;\n\n      /** 没有旧数据时不处理 */\n      if (!oldResForCurStep) {\n        return newResStr;\n      }\n\n      if (_.isEqual(newResForCurStep.sort(this.idCmp), oldResForCurStep.sort(this.idCmp))) {\n        return newResStr;\n      }\n\n      const deletedIds = this.findDeletedIds(newResForCurStep, oldResForCurStep);\n\n      if (deletedIds.length === 0) {\n        return newResStr;\n      }\n\n      const dataSourceStep = step;\n      const stepKeys = this.getStepKeys(newRes).sort();\n      this.deleteRes(newRes, dataSourceStep, deletedIds, stepKeys);\n\n      return JSON.stringify(newRes);\n    } catch (error) {\n      console.error(error);\n      return newResStr;\n    }\n  }\n\n  /**\n   * id sort 规则\n   * @param a\n   * @param b\n   * @returns\n   */\n  public static idCmp(a: any, b: any) {\n    const idA = a.id;\n    const idB = b.id;\n    if (idA < idB) {\n      return -1;\n    }\n    if (idA > idB) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  /**\n   * 找到结果被删除的id\n   * @param newResForCurStep\n   * @param oldResForCurStep\n   * @returns {Array<string>}\n   */\n  public static findDeletedIds(newResForCurStep: any[], oldResForCurStep: any[]) {\n    return this.findDeletedItems(oldResForCurStep, newResForCurStep).map((i) => i.id);\n  }\n\n  /**\n   * 找到被删除的结果\n   * @param oldResForCurStep\n   * @param newResForCurStep\n   * @returns {Array<any>}\n   */\n  public static findDeletedItems(oldResForCurStep: any[], newResForCurStep: any[]) {\n    const deletedItems: any[] = [];\n    oldResForCurStep.forEach((i: any) => {\n      const isNewResExisted = newResForCurStep.some((r: any) => r.id === i.id);\n      if (!isNewResExisted) {\n        deletedItems.push(i);\n      }\n    });\n    return deletedItems;\n  }\n\n  /**\n   * 根据结果找到所有的步骤\n   * @param res\n   * @returns {Array<number>} 结果步骤列表\n   */\n  public static getStepKeys(res: any) {\n    return Object.keys(res)\n      .map((i) => parseInt(i.replace('step_', ''), 10))\n      .filter((i) => !isNaN(i));\n  }\n\n  /**\n   * 删除依赖数据的结果\n   * @param resData 当前文件的结果\n   * @param dataSourceStep 依赖步骤\n   * @param deletedIds 需要删除的sourceID\n   * @param stepKeys 结果的步骤\n   */\n  public static deleteRes(\n    resData: any,\n    dataSourceStep: number,\n    deletedIds: string[],\n    stepKeys: number[],\n  ) {\n    stepKeys.forEach((s) => {\n      if (s > dataSourceStep) {\n        const stepRes = resData[`step_${s}`];\n        // 文件夹标签, 分割工具 没有依赖, 不进行判断\n        if ([EToolName.FolderTag, EToolName.Segmentation].includes(stepRes.tool)) {\n          return;\n        }\n        if (stepRes.dataSourceStep === dataSourceStep) {\n          const newDeletedIds: string[] = [];\n          stepRes.result = stepRes.result.filter((i: any) => {\n            const exist = deletedIds.includes(i.sourceID);\n            if (exist) {\n              newDeletedIds.push(i.id);\n              return false;\n            }\n\n            return true;\n          });\n          this.deleteRes(resData, s, newDeletedIds, stepKeys);\n        } else {\n          // 非直接依赖关系下，也同样过滤删除了对应框的数据（注意: 该场景不包含 filterData 过滤属性下，更改框的属性来删除对应的框体）\n          stepRes.result = stepRes.result.filter((i: any) => {\n            const exist = deletedIds.includes(i.sourceID);\n            if (exist) {\n              return false;\n            }\n\n            return true;\n          });\n        }\n      }\n    });\n  }\n}\n","import { jsonParser } from '.';\nimport StepUtils from './StepUtils';\n\n/**\n * 解析结果，将图片信息注入到结果\n * @param result\n * @param basicImgInfo\n */\nexport const composeResultWithBasicImgInfo = (\n  result: string,\n  basicImgInfo: { [a: string]: any },\n) => {\n  const newResult = JSON.stringify({ ...jsonParser(result), ...basicImgInfo });\n  return newResult;\n};\n\n// 处理result\nexport const composeResult = (\n  result: string,\n  pos: {\n    step: number;\n    stepList: any[];\n  },\n  newData: {\n    rect: any[];\n    basicRectID?: string;\n  },\n  customObject: Object,\n) => {\n  const { step, stepList } = pos;\n  const { rect, basicRectID } = newData;\n\n  try {\n    const data = jsonParser(result);\n    const currentStepInfo = StepUtils.getCurrentStepInfo(step, stepList);\n    const { dataSourceStep } = currentStepInfo;\n\n    const stepName = `step_${currentStepInfo.step}`;\n    if (data[stepName]) {\n      const info = data[stepName];\n      Object.assign(info, customObject);\n\n      if (info.result) {\n        if (JSON.stringify(info.result) === JSON.stringify(rect)) {\n          return JSON.stringify(data);\n        }\n        if (basicRectID) {\n          info.result = [\n            ...info.result.filter(\n              (v: { sourceID: string }) => !(v.sourceID && v.sourceID === basicRectID),\n            ),\n            ...rect.filter((v) => v.sourceID && v.sourceID === basicRectID),\n          ];\n        } else {\n          info.result = rect;\n        }\n        return JSON.stringify(data);\n      }\n      return JSON.stringify({\n        ...data,\n        [stepName]: {\n          ...data[stepName],\n          ...customObject,\n          result: rect,\n        },\n      });\n    }\n    // 初始化结果\n    return JSON.stringify({\n      ...data,\n      [stepName]: {\n        dataSourceStep,\n        ...customObject,\n        toolName: stepList[step - 1].tool,\n        result: rect,\n      },\n    });\n  } catch (e) {\n    return result;\n  }\n};\n","import { EPageTurningOperation } from '../data/enums/AnnotationSize';\nimport _ from 'lodash';\nimport { jsonParser } from '.';\n\ninterface IPageInfo {\n  fileIndex: number;\n  basicIndex: number;\n  basicList: any[];\n  fileList: any[];\n  step: number;\n  stepList: any[];\n}\n\nclass PageOperator {\n  public static getPageInfo(annotationStore: any) {\n    const {\n      imgIndex: fileIndex,\n      imgList: fileList,\n      basicResultList: basicList,\n      basicIndex,\n      step,\n      stepList,\n    } = annotationStore;\n\n    return {\n      fileIndex,\n      basicIndex,\n      basicList,\n      fileList,\n      step,\n      stepList,\n    };\n  }\n\n  /**\n   *\n   * @param pageTurningOperation\n   * @param nextIndex\n   */\n  public static getNextPageInfo(\n    pageTurningOperation: EPageTurningOperation,\n    annotationStore: any,\n    nextIndex?: number,\n  ) {\n    const pageInfo: IPageInfo = PageOperator.getPageInfo(annotationStore);\n    const { fileIndex: currentFileIndex } = PageOperator.getPageInfo(annotationStore);\n\n    const nextFileIndex = PageOperator.getNextFileIndex(pageTurningOperation, pageInfo, nextIndex);\n    const nextBasicIndex = PageOperator.getNextBasicIndex(\n      pageTurningOperation,\n      pageInfo.basicIndex,\n    );\n    const fileIndexChanged = nextFileIndex !== currentFileIndex;\n\n    const hasNextBasicIndex = PageOperator.hasNextBasicIndex(pageTurningOperation, pageInfo);\n\n    const pageChangedInfo = {\n      fileIndex: nextFileIndex,\n      basicIndex: nextBasicIndex,\n      fileIndexChanged,\n      basicIndexChanged: hasNextBasicIndex,\n    };\n\n    if (hasNextBasicIndex) {\n      pageChangedInfo.fileIndexChanged = false;\n      pageChangedInfo.fileIndex = currentFileIndex;\n      return pageChangedInfo;\n    }\n\n    pageChangedInfo.basicIndex =\n      pageTurningOperation === EPageTurningOperation.Backward\n        ? PageOperator.getBasicResultIndexForNextFile(pageInfo, pageChangedInfo.fileIndex)\n        : 0;\n\n    return pageChangedInfo;\n  }\n\n  /**\n   * 获取下一个依赖索引\n   * @param pageTurningOperation\n   */\n  public static getNextBasicIndex = (\n    pageTurningOperation: EPageTurningOperation,\n    basicIndex: number,\n  ) => {\n    return basicIndex + (pageTurningOperation === EPageTurningOperation.Forward ? 1 : -1);\n  };\n\n  /**\n   * 存在下一个依赖数据\n   * @param pageTurningOperation\n   */\n  public static hasNextBasicIndex = (\n    pageTurningOperation: EPageTurningOperation,\n    pageInfo: IPageInfo,\n  ) => {\n    const { basicList } = pageInfo;\n    if (basicList?.length > 0) {\n      const nextBasicIndex = PageOperator.getNextBasicIndex(\n        pageTurningOperation,\n        pageInfo.basicIndex,\n      );\n\n      return nextBasicIndex >= 0 && basicList.length > nextBasicIndex;\n    }\n\n    return false;\n  };\n\n  public static getBasicResultIndexForNextFile = (pageInfo: IPageInfo, fileIndex: number) => {\n    const { stepList, step, fileList } = pageInfo;\n    const stepConfig = stepList.find((i) => i.step === step);\n    const dataSourceStep = stepConfig?.dataSourceStep;\n\n    if (dataSourceStep) {\n      const fileResult = jsonParser(fileList[fileIndex].result);\n      const stepResult = fileResult[`step_${dataSourceStep}`]?.result;\n\n      if (!stepResult || !stepResult?.length) {\n        return 0;\n      }\n\n      return stepResult?.length - 1;\n    }\n\n    return 0;\n  };\n\n  /**\n   * 计算下一个文件的索引\n   * @param pageTurningOperation\n   * @param fileIndex\n   */\n  public static getNextFileIndex = (\n    pageTurningOperation: EPageTurningOperation,\n    pageInfo: IPageInfo,\n    fileIndex?: number,\n  ) => {\n    const { fileIndex: currentFileIndex, fileList } = pageInfo;\n\n    let newIndex = fileIndex !== undefined ? fileIndex : currentFileIndex;\n    switch (pageTurningOperation) {\n      case EPageTurningOperation.Forward:\n        newIndex += 1;\n        break;\n      case EPageTurningOperation.Backward:\n        newIndex -= 1;\n        break;\n      case EPageTurningOperation.Jump:\n        break;\n    }\n\n    if (_.inRange(newIndex, 0, fileList.length)) {\n      return newIndex;\n    }\n\n    return currentFileIndex;\n  };\n}\n\nexport default PageOperator;\n","import { store } from '@/index';\nimport { LabelBeeContext } from '@/store/ctx';\nimport { message } from 'antd/es';\nimport _ from 'lodash';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { AppState } from 'src/store';\nimport { ImgAttributeState } from 'src/store/imgAttribute/types';\n\nimport { AppProps } from '@/App';\nimport FileError from '@/components/fileException/FileError';\nimport useSize from '@/hooks/useSize';\nimport { InitToolStyleConfig } from '@/store/toolStyle/actionCreators';\nimport { AnnotationEngine, ImgUtils } from '@labelbee/lb-annotation';\nimport { i18n } from '@labelbee/lb-utils';\nimport { IStepInfo } from '@/types/step';\nimport StepUtils from '@/utils/StepUtils';\n\ninterface IProps extends AppState, AppProps {\n  imgAttribute: ImgAttributeState;\n  imgIndex: number;\n  annotationEngine: AnnotationEngine;\n  loading: boolean;\n  stepList: IStepInfo[];\n  step: number;\n}\n\nconst AnnotationOperation: React.FC<IProps> = (props: IProps) => {\n  const [, forceRender] = useState<number>(0);\n\n  const {\n    imgAttribute,\n    toolStyle,\n    toolInstance,\n    annotationEngine,\n    imgList,\n    imgIndex,\n    dataInjectionAtCreation,\n    renderEnhance,\n    customRenderStyle,\n    stepList,\n    step,\n    drawLayerSlot,\n  } = props;\n  const [annotationPos, setAnnotationPos] = useState({ zoom: 1, currentPos: { x: 0, y: 0 } });\n  const annotationRef = useRef<HTMLDivElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const size = useSize(annotationRef);\n\n  useEffect(() => {\n    store.dispatch(InitToolStyleConfig());\n  }, []);\n\n  useEffect(() => {\n    if (!annotationEngine) {\n      return;\n    }\n\n    // 更改 toolInstance 内部国际化语言\n    switch (i18n.language) {\n      case 'cn':\n      case 'en':\n        annotationEngine.setLang(i18n.language);\n        break;\n      default: {\n        //\n        break;\n      }\n    }\n    annotationEngine?.setDataInjectionAtCreation(dataInjectionAtCreation);\n    annotationEngine?.setRenderEnhance(renderEnhance);\n    if (customRenderStyle) {\n      annotationEngine?.setCustomRenderStyle(customRenderStyle);\n    }\n  }, [annotationEngine, dataInjectionAtCreation, renderEnhance, customRenderStyle]);\n\n  useEffect(() => {\n    const renderZoom = (zoom: number, currentPos: { x: number; y: number }) => {\n      setAnnotationPos({ zoom, currentPos });\n    };\n\n    const dragMove = (props: { currentPos: { x: number; y: number }; zoom: number }) => {\n      setAnnotationPos(props);\n    };\n\n    if (toolInstance) {\n      toolInstance.singleOn('messageError', (error: string) => {\n        message.error(error);\n      });\n\n      toolInstance.singleOn('messageInfo', (info: string) => {\n        message.info(info);\n      });\n\n      toolInstance.singleOn('changeAnnotationShow', () => {\n        forceRender((s) => s + 1);\n      });\n\n      toolInstance.on('renderZoom', renderZoom);\n      toolInstance.on('dragMove', dragMove);\n    }\n\n    return () => {\n      if (toolInstance) {\n        toolInstance.unbind('renderZoom', renderZoom);\n        toolInstance.unbind('dragMove', dragMove);\n      }\n    };\n  }, [toolInstance]);\n\n  useEffect(() => {\n    if (annotationEngine?.setImgAttribute) {\n      annotationEngine.setImgAttribute(imgAttribute);\n    } else {\n      // Old version.\n      toolInstance?.setImgAttribute?.(imgAttribute);\n    }\n  }, [imgAttribute, annotationEngine]);\n\n  /** 样式同步 */\n  useEffect(() => {\n    if (toolInstance) {\n      toolInstance.setStyle(toolStyle);\n    }\n    if (annotationEngine) {\n      annotationEngine.setStyle(toolStyle);\n    }\n  }, [toolStyle]);\n\n  /** 窗口大小监听 */\n  useEffect(() => {\n    if (toolInstance?.setSize) {\n      toolInstance.setSize(size);\n    }\n\n    if (annotationEngine) {\n      annotationEngine.setSize(size);\n    }\n  }, [size]);\n\n  useEffect(() => {\n    // Update StepList When it update by outside\n    const currentStepInfo = StepUtils.getCurrentStepInfo(step, stepList);\n    toolInstance?.setConfig(currentStepInfo.config);\n  }, [stepList]);\n\n  /**\n   * 重新加载图片，避免网络问题导致的图片无法加载\n   * @returns\n   */\n  const reloadImg = () => {\n    const imgInfo = imgList?.[imgIndex];\n    if (!imgInfo?.url) {\n      return;\n    }\n\n    ImgUtils.load(imgInfo.url).then((imgNode) => {\n      annotationEngine.setImgNode(imgNode as HTMLImageElement);\n    });\n  };\n\n  return (\n    <div ref={annotationRef} className='annotationOperation'>\n      <div className='canvas' ref={containerRef} style={size} id='toolContainer'>\n        {drawLayerSlot?.(annotationPos)}\n      </div>\n      {toolInstance?.isImgError === true && (\n        <FileError\n          {...size}\n          reloadImage={reloadImg}\n          backgroundColor='#e2e2e2'\n          ignoreOffsetY={true}\n        />\n      )}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => {\n  const annotationState = _.pickBy(state.annotation, (v, k) =>\n    [\n      'imgList',\n      'imgIndex',\n      'stepList',\n      'step',\n      'toolInstance',\n      'annotationEngine',\n      'loading',\n    ].includes(k),\n  );\n  return {\n    imgAttribute: state.imgAttribute,\n    toolStyle: state.toolStyle,\n    ...annotationState,\n  };\n};\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(\n  AnnotationOperation,\n);\n","import type { Dispatch, SetStateAction } from 'react';\nimport { useCallback, useRef, useState, useEffect } from 'react';\n\nconst useRafState = <S>(initialState: S | (() => S)): [S, Dispatch<SetStateAction<S>>] => {\n  const frame = useRef(0);\n  const [state, setState] = useState(initialState);\n\n  const setRafState = useCallback((value: S | ((prevState: S) => S)) => {\n    cancelAnimationFrame(frame.current);\n\n    frame.current = requestAnimationFrame(() => {\n      setState(value);\n    });\n  }, []);\n\n  useEffect(() => {\n    return () => cancelAnimationFrame(frame.current);\n  }, [])\n\n  return [state, setRafState];\n};\n\nexport default useRafState;","import React, { useEffect, useState } from 'react';\nimport { message } from 'antd/es';\nimport TextAreaFormat from '@/views/MainView/sidebar/TextAreaFormat';\nimport { TextUtils } from '@/utils/TextUtils';\nimport { AppState } from '@/store';\nimport { GraphToolInstance } from '@/store/annotation/types';\nimport { connect } from 'react-redux';\nimport { LabelBeeContext } from '@/store/ctx';\n\ninterface IProps {\n  toolInstance: GraphToolInstance;\n}\n\nconst AnnotationText: React.FC<IProps> = ({ toolInstance }) => {\n  const [, forceRender] = useState<number>(0);\n  useEffect(() => {\n    if (toolInstance) {\n      toolInstance.singleOn('selectedChange', () => {\n        forceRender((s) => s + 1);\n      });\n      toolInstance.singleOn('updateTextAttribute', () => {\n        // 文本属性的更新\n\n        forceRender((s) => s + 1);\n      });\n\n      toolInstance.singleOn('messageError', (error: string) => {\n        message.error(error);\n      });\n    }\n  }, [toolInstance]);\n\n  if (!toolInstance) {\n    return null;\n  }\n\n  const { config } = toolInstance;\n\n  return (\n    <div>\n      {toolInstance?.config?.textConfigurable && toolInstance.selectedID && (\n        <TextAreaFormat\n          onChange={toolInstance.textChange}\n          textValue={toolInstance.selectedText}\n          checkString={TextUtils.checkString(config?.textCheckType, config?.customFormat)}\n          textCheckType={config.textCheckType}\n        />\n      )}\n    </div>\n  );\n};\n\nfunction mapStateToProps(state: AppState) {\n  return { toolInstance: state.annotation.toolInstance };\n}\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(AnnotationText);\n","import { TEXT_ATTRIBUTE_MAX_LENGTH } from '@/data/enums/ToolType';\nimport { TextUtils } from '@/utils/TextUtils';\nimport { Input, message, Tooltip } from 'antd/es';\nimport React, { FocusEvent, useEffect, useState } from 'react';\nimport IconClearSmallA from '@/assets/annotation/common/icon_clearSmall_a.svg';\nimport IconClearSmall from '@/assets/annotation/common/icon_clearSmall.svg';\nimport { classnames } from '@/utils';\nimport { useTranslation } from 'react-i18next';\n\ninterface IProps {\n  onChange: (value: string, isSubmit?: boolean) => void;\n  textValue: string | undefined;\n  checkString: string;\n  textCheckType: number;\n}\n\nconst TextAreaFormat = (props: IProps) => {\n  const { t } = useTranslation();\n\n  const { onChange, textValue, checkString, textCheckType } = props;\n  const [textLength, setTextLength] = useState<number>(0);\n  const [error, setError] = useState<boolean>(false);\n  const [onFocus, setOnFocus] = useState<boolean>(false);\n  const [hoverDelete, setHoverDelete] = useState<boolean>(false);\n\n  const clearIcon = (\n    <a>\n      <Tooltip placement='bottom' title={t('EmptyTextInput')}>\n        <img\n          onMouseEnter={() => setHoverDelete(true)}\n          onMouseLeave={() => setHoverDelete(false)}\n          style={{ marginLeft: 6 }}\n          src={hoverDelete ? IconClearSmallA : IconClearSmall}\n          onClick={(e) => {\n            e.stopPropagation();\n            onChange('');\n          }}\n        />\n      </Tooltip>\n    </a>\n  );\n\n  const keyDown = (e: React.KeyboardEvent) => {\n    e.stopPropagation();\n  };\n\n  useEffect(() => {\n    if (textValue) {\n      setTextLength(textValue.length);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (textValue === undefined || textValue === '') {\n      setError(false);\n    } else {\n      try {\n        textValue && setError(!new RegExp(checkString).test(textValue));\n      } catch (error) {\n        setError(true);\n        message.destroy();\n        message.error(t('RegularExpIncorrectly'));\n      }\n    }\n    setTextLength(textValue?.length ?? 0);\n  }, [textValue]);\n\n  const checkText = (e: FocusEvent<HTMLTextAreaElement>) => {\n    if (error || !new RegExp(checkString).test(e.target.value)) {\n      onChange('');\n      message.error(TextUtils.getErrorNotice(textCheckType));\n      return true;\n    }\n    onChange(e.target.value, true); // 失焦的时候直接进行数据的提交\n  };\n\n  return (\n    <div className='textInputContainer'>\n      <div className='label'>\n        {t('TextInput')}\n        {clearIcon}\n      </div>\n      <div\n        className={classnames({\n          textareaContainer: true,\n          focus: onFocus,\n        })}\n      >\n        <div\n          className={classnames({\n            toolTextAreaBox: true,\n            toolTextAreaBoxFocus: onFocus,\n          })}\n        >\n          <Input.TextArea\n            style={{ resize: 'none', height: 120, wordBreak: 'break-all' }}\n            maxLength={TEXT_ATTRIBUTE_MAX_LENGTH}\n            onKeyDownCapture={(e) => {\n              e.stopPropagation();\n            }}\n            onKeyUpCapture={(e) => {\n              e.stopPropagation();\n            }}\n            onChange={(e) => {\n              onChange(e.target.value);\n              setTextLength(e.target.value.length);\n            }}\n            onFocus={(e) => setOnFocus(true)}\n            onBlur={(e) => {\n              checkText(e);\n              setOnFocus(false);\n            }}\n            value={textValue}\n            onKeyDown={keyDown}\n            className={error ? 'warning' : ''}\n          />\n          <div className='textAreaFooter'>\n            <span className='wordCount'>\n              <span className={textLength > TEXT_ATTRIBUTE_MAX_LENGTH || error ? 'warning' : ''}>\n                {textLength}\n              </span>\n              /<span>{TEXT_ATTRIBUTE_MAX_LENGTH}</span>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TextAreaFormat;\n","import { Tooltip } from 'antd/es';\nimport React, { useState } from 'react';\n\n// 图片调整的刷子\nimport clearSmall from '@/assets/annotation/common/icon_clearSmall.svg';\n// import clearSmallA from '@//assets/annotation/common/icon_clearSmall_a.svg';\nimport { InitImgAttribute } from '@/store/imgAttribute/actionCreators';\nimport { store } from '@/index';\nimport clearSmallA from '@//assets/annotation/common/icon_clearSmall_a.svg';\nimport { useTranslation } from 'react-i18next';\n\nconst clearIcon = () => {\n  const [hoverDelete, setHoverDelete] = useState(false);\n\n  const clearAttribute = () => {\n    store.dispatch(InitImgAttribute());\n  };\n  const { t } = useTranslation();\n\n  return (\n    <Tooltip placement='bottom' title={t('RestoreImageAttributes')}>\n      <img\n        onMouseEnter={() => setHoverDelete(true)}\n        onMouseLeave={() => setHoverDelete(false)}\n        style={{ marginLeft: 6 }}\n        src={hoverDelete ? clearSmallA : clearSmall}\n        onClick={(e) => {\n          e.stopPropagation();\n          clearAttribute();\n        }}\n      />\n    </Tooltip>\n  );\n};\n\nexport default clearIcon;\n","import React, { useCallback, useState } from 'react';\nimport { AppState } from '@/store';\nimport { connect, ConnectedComponent } from 'react-redux';\nimport { ToolInstance } from '@/store/annotation/types';\nimport StepUtils from '@/utils/StepUtils';\nimport { IStepInfo } from '@/types/step';\nimport { jsonParser } from '@/utils';\nimport { AnnotationFileList, IFileItem } from '@/types/data';\nimport ActionsConfirm, { IOperationConfig } from './ActionsConfirm';\nimport useOperationList from './useOperationList';\nimport { LabelBeeContext } from '@/store/ctx';\nimport UnifyParamsSvg from '@/assets/annotation/pointCloudTool/unitAttribute.svg';\nimport UnifyParamsForbidSvg from '@/assets/annotation/pointCloudTool/unitAttributeForbid.svg';\nimport UnifyParamsHoverSvg from '@/assets/annotation/pointCloudTool/unitAttributeHover.svg';\nimport { useTranslation } from 'react-i18next';\nimport UnifyParamsModal from '../../../../components/pointCloudView/components/UnifyParamsModal';\nimport { useSingleBox } from '@/components/pointCloudView/hooks/useSingleBox';\nimport { composeResultByToolInstance } from '@/store/annotation/reducer';\nimport { useStatus } from '@/components/pointCloudView/hooks/useStatus';\n\nconst mapStateToProps = (state: AppState) => {\n  const stepInfo = StepUtils.getCurrentStepInfo(state.annotation?.step, state.annotation?.stepList);\n\n  return {\n    toolInstance: state.annotation.toolInstance,\n    stepInfo,\n    imgList: state.annotation.imgList,\n    imgIndex: state.annotation.imgIndex,\n    stepList: state.annotation.stepList,\n  };\n};\ninterface IProps {\n  toolInstance: ToolInstance;\n  stepInfo: IStepInfo;\n  imgList: AnnotationFileList;\n  imgIndex: number;\n  stepList: IStepInfo[];\n}\n\nconst GeneralOperation: React.FC<IProps> = ({ toolInstance, stepInfo }) => {\n  const operationList = useOperationList(toolInstance);\n  const config = jsonParser(stepInfo?.config);\n  const allOperation: IOperationConfig[] = [operationList.empty];\n\n  if (stepInfo?.dataSourceStep === 0) {\n    allOperation.push(operationList.setValidity);\n  }\n\n  if (config?.copyBackwardResult) {\n    allOperation.push(operationList.copyPrevious);\n  }\n\n  return <ActionsConfirm allOperation={allOperation} />;\n};\n\nexport const PointCloudOperation: ConnectedComponent<\n  React.FC<IProps>,\n  Omit<\n    IProps & {\n      children?: React.ReactNode;\n    },\n    'toolInstance' | 'stepInfo' | 'imgList' | 'imgIndex' | 'stepList'\n  >\n> = connect(mapStateToProps, null, null, { context: LabelBeeContext })(\n  ({ toolInstance, stepInfo, imgList, stepList, imgIndex }) => {\n    const { t } = useTranslation();\n    const { selectedBox } = useSingleBox();\n    const operationList = useOperationList(toolInstance);\n    const [isShowModal, setShowModal] = useState(false);\n    const [composeImgList, setComposeImgList] = useState<IFileItem[]>([]);\n    const { isPointCloudDetectionPattern, isPointCloudSegmentationPattern } = useStatus();\n\n    const config = jsonParser(stepInfo.config);\n\n    let allOperation: IOperationConfig[] = [\n      operationList.copyPrevious,\n      operationList.empty,\n      operationList.setValidity,\n    ];\n\n    if (isPointCloudDetectionPattern && config.trackConfigurable === true) {\n      const forbidOperation = !selectedBox;\n      const UnifyParams: IOperationConfig = {\n        name: t('UnifyParams'),\n        key: 'UnifyParams',\n        imgSvg: forbidOperation ? UnifyParamsForbidSvg : UnifyParamsSvg,\n        hoverSvg: UnifyParamsHoverSvg,\n        onClick: () => {\n          // TODO, The inner modal needs to use the newest ImgList\n          setComposeImgList(\n            composeResultByToolInstance({ toolInstance, imgList, imgIndex, stepList }),\n          );\n\n          setShowModal(true);\n        },\n        forbidConfirm: true,\n        forbidOperation: forbidOperation,\n      };\n      allOperation.unshift(UnifyParams);\n    }\n\n    const onCancel = useCallback(() => {\n      setShowModal(false);\n    }, []);\n\n    const selectedBoxInfo = selectedBox?.info;\n\n    if (isPointCloudSegmentationPattern) {\n      /**\n       * Segmentation Pattern need to remove copyPrevious (setValidity temporarily)\n       */\n      allOperation = allOperation.filter((v) => !['setValidity', 'copyPrevious'].includes(v.key));\n    }\n\n    return (\n      <>\n        <ActionsConfirm allOperation={allOperation} />\n        <UnifyParamsModal\n          id={selectedBoxInfo?.trackID}\n          visible={isShowModal}\n          onCancel={onCancel}\n          config={config}\n          imgList={composeImgList}\n        />\n      </>\n    );\n  },\n);\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(GeneralOperation);\n","import React, { useRef, useState } from 'react';\nimport { Col, Popconfirm } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { prefix } from '@/constant';\n\nexport interface IOperationConfig {\n  name: string;\n  key: string;\n  imgSvg: string | React.ReactElement;\n  hoverSvg: string | React.ReactElement;\n  onClick?: () => void;\n  forbidConfirm?: boolean; // 是否禁止二次确认\n  forbidOperation?: boolean; // 禁止操作,会有置灰操作（该部分由用户自己更改 ImgSvg 进行展示）\n}\n\n// 禁止的样式\nconst forbidStyle = {\n  color: '#CCCCCC',\n};\n\nconst PopconfirmTitle = ({ info }: { info: IOperationConfig }) => {\n  const { t } = useTranslation();\n  if (info.key.startsWith('sure')) {\n    return <div key={info.key}>{`${t('ConfirmTo')}${info.name.slice(0)}？`}</div>;\n  }\n\n  return <span>{info.name}</span>;\n};\n\nconst ActionIcon = ({ icon }: { icon: React.ReactElement | string }) => {\n  if (typeof icon === 'string') {\n    return <img width={23} height={25} src={icon} />;\n  }\n  return icon;\n};\n\nconst ShowIcon = ({ isHover, info }: { isHover: string | null; info: IOperationConfig }) => {\n  const disabled = !!info.forbidOperation;\n\n  const _isHover = info.key === isHover && !disabled;\n\n  let textStyle = {\n    color: _isHover ? '#666fff' : '',\n  };\n\n  if (disabled) {\n    textStyle = forbidStyle;\n  }\n\n  return (\n    <div\n      style={{ cursor: disabled ? 'not-allowed' : 'default' }}\n      onClick={() => info?.forbidConfirm && !disabled && info?.onClick?.()}\n    >\n      <div className='icon'>\n        <ActionIcon icon={_isHover ? info.hoverSvg : info.imgSvg} />\n      </div>\n      <div className='toolName' style={textStyle}>\n        {info.name}\n      </div>\n    </div>\n  );\n};\n\nconst ActionsConfirm: React.FC<{ allOperation: IOperationConfig[] }> = ({ allOperation }) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const [isHover, setHover] = useState<string | null>(null);\n  const { t } = useTranslation();\n  const annotationLength = Math.floor(24 / allOperation.length);\n\n  return (\n    <div className='generalOperation' ref={ref}>\n      {allOperation.map((info, index) => (\n        <Col span={annotationLength} key={index}>\n          <div\n            key={info.key}\n            className='item'\n            onMouseEnter={() => {\n              setHover(info.key);\n            }}\n            onMouseLeave={() => {\n              setHover(null);\n            }}\n          >\n            {info.forbidConfirm ? (\n              <ShowIcon info={info} isHover={isHover} />\n            ) : (\n              <Popconfirm\n                title={<PopconfirmTitle info={info} />}\n                placement='topRight'\n                okText={t('Confirm')}\n                cancelText={t('Cancel')}\n                getPopupContainer={() => ref.current ?? document.body}\n                onConfirm={info.onClick}\n                overlayClassName={`${prefix}-pop-confirm`}\n              >\n                <div>\n                  <ShowIcon info={info} isHover={isHover} />\n                </div>\n              </Popconfirm>\n            )}\n          </div>\n        </Col>\n      ))}\n    </div>\n  );\n};\n\nexport default ActionsConfirm;\n","import { IOperationConfig } from './ActionsConfirm';\nimport clearResultSvg from '@/assets/annotation/common/icon_clear.svg';\nimport clearResultASvg from '@/assets/annotation/common/icon_clear_a.svg';\nimport copyBackStepSvg from '@/assets/annotation/common/icon_invalid.svg';\nimport copyBackStepASvg from '@/assets/annotation/common/icon_invalid_a.svg';\nimport { StopOutlined } from '@ant-design/icons';\nimport { useTranslation } from 'react-i18next';\nimport React, { useMemo, useState } from 'react';\nimport { CopyBackWordResult } from '@/store/annotation/actionCreators';\nimport { store } from '@/index';\nimport { AppState } from '@/store';\nimport { useSelector } from '@/store/ctx';\n\n/**\n * Hooks for sidebar common operations' config\n * @param toolInstance\n * @returns\n */\nconst useOperationList = (toolInstance: any) => {\n  const [updateNum, forceRender] = useState(0);\n  const { t, i18n } = useTranslation();\n  const { currentData } = useSelector((state: AppState) => {\n    const { imgList, imgIndex } = state.annotation;\n\n    return {\n      currentData: imgList[imgIndex],\n    };\n  });\n\n  const iconStyle = {\n    height: '25px',\n    lineHeight: '25px',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  };\n\n  /**\n   * Empty current file result\n   */\n  const empty: IOperationConfig = {\n    name: t('ClearLabel'),\n    key: 'empty',\n    imgSvg: clearResultSvg,\n    hoverSvg: clearResultASvg,\n    onClick: () => {\n      toolInstance?.clearResult();\n    },\n  };\n\n  /**\n   * Set set validity for current file\n   */\n  const setValidity: IOperationConfig = {\n    name: t(toolInstance?.valid === false ? 'SetAsValid' : 'SetAsInvalid'),\n    key: 'setValidity',\n    imgSvg: <StopOutlined style={iconStyle} />,\n    hoverSvg: <StopOutlined style={{ color: '#666fff', ...iconStyle }} />,\n    onClick: () => {\n      toolInstance.setValid(!toolInstance.valid);\n      setTimeout(() => {\n        forceRender((v) => v + 1);\n      });\n    },\n  };\n\n  /**\n   * Copy previous file result\n   */\n  const copyPrevious: IOperationConfig = {\n    name: t('CopyThePrevious'),\n    key: 'copyPrevious',\n    imgSvg: copyBackStepSvg,\n    hoverSvg: copyBackStepASvg,\n    onClick: () => {\n      store.dispatch(CopyBackWordResult());\n    },\n  };\n\n  return useMemo(() => {\n    return {\n      empty,\n      setValidity,\n      copyPrevious,\n    };\n  }, [toolInstance, updateNum, currentData, i18n.language]);\n};\n\nexport default useOperationList;\n","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='25px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3e%e5%bd%a2%e7%8a%b6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-46.000000%2c -141.000000)' fill-rule='nonzero'%3e %3cg id='%e6%b8%85%e7%a9%ba%e6%a0%87%e6%b3%a8' transform='translate(18.000000%2c 123.000000)'%3e %3cg id='icon_clear_normal' transform='translate(28.000000%2c 18.000000)'%3e %3crect id='icon_clear' fill='black' opacity='0' x='0' y='0.00780487805' width='24' height='24'%3e%3c/rect%3e %3cpath d='M24%2c10.6934683 C24%2c9.29483367 22.8777821%2c8.15502957 21.4955096%2c8.15502957 L15.5587661%2c8.15502957 L15.5587661%2c3.13276778 C15.5587661%2c1.40881408 14.1764936%2c0.00780487805 12.4755955%2c0.00780487805 L11.6485748%2c0.00780487805 C9.94767669%2c0.00780487805 8.56540414%2c1.40881408 8.56540414%2c3.13276778 L8.56540414%2c8.15502957 L2.5021476%2c8.15502957 C1.12221788%2c8.15502957 0%2c9.29245908 0%2c10.6934683 C0%2c11.835647 0.754392815%2c12.7926075 1.78055447%2c13.1108028 L1.78055447%2c21.9680305 C1.78055447%2c23.093587 2.68254588%2c24.0078049 3.79304959%2c24.0078049 L20.3615775%2c24.0078049 C21.4720812%2c24.0078049 22.3740726%2c23.093587 22.3740726%2c21.9680305 L22.3740726%2c13.0609364 C23.3205779%2c12.6999984 24%2c11.7786568 24%2c10.6934683 Z M10.114018%2c3.13276778 C10.114018%2c2.27554011 10.8028114%2c1.5774101 11.6485748%2c1.5774101 L12.4755955%2c1.5774101 C13.3213588%2c1.5774101 14.0101523%2c2.27554011 14.0101523%2c3.13276778 L14.0101523%2c8.15502957 L10.114018%2c8.15502957 L10.114018%2c3.13276778 Z M20.3615775%2c22.4381997 L17.8055447%2c22.4381997 L17.8055447%2c19.2206277 C17.8055447%2c18.7860774 17.4588052%2c18.4370124 17.0324092%2c18.4370124 C16.6060133%2c18.4370124 16.2592737%2c18.788452 16.2592737%2c19.2206277 L16.2592737%2c22.4381997 L12.8527919%2c22.4381997 L12.8527919%2c19.2206277 C12.8527919%2c18.7860774 12.5060523%2c18.4370124 12.0796564%2c18.4370124 C11.6509176%2c18.4370124 11.3065209%2c18.788452 11.3065209%2c19.2206277 L11.3065209%2c22.4381997 L7.89769621%2c22.4381997 L7.89769621%2c19.2206277 C7.89769621%2c18.7860774 7.55095666%2c18.4370124 7.12456072%2c18.4370124 C6.69582194%2c18.4370124 6.35142522%2c18.788452 6.35142522%2c19.2206277 L6.35142522%2c22.4381997 L3.79304959%2c22.4381997 C3.53768059%2c22.4381997 3.32916829%2c22.226861 3.32916829%2c21.9680305 L3.32916829%2c13.2295324 L20.8254588%2c13.2295324 L20.8254588%2c21.9656559 C20.8254588%2c22.226861 20.6169465%2c22.4381997 20.3615775%2c22.4381997 Z M21.4978524%2c11.6599272 L2.5021476%2c11.6599272 C1.97500976%2c11.6599272 1.54861382%2c11.2253769 1.54861382%2c10.6934683 C1.54861382%2c10.1591851 1.9773526%2c9.7246348 2.5021476%2c9.7246348 L21.4955096%2c9.7246348 C22.0226474%2c9.7246348 22.4513862%2c10.1591851 22.4513862%2c10.6934683 C22.4513862%2c11.2277514 22.0226474%2c11.6599272 21.4978524%2c11.6599272 Z' id='%e5%bd%a2%e7%8a%b6' fill='%23666666'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_clear_a%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-166.000000%2c -141.000000)' fill-rule='nonzero'%3e %3cg id='%e6%b8%85%e7%a9%ba%e6%a0%87%e6%b3%a8%e5%a4%87%e4%bb%bd' transform='translate(138.000000%2c 123.000000)'%3e %3cg id='icon_clear' transform='translate(28.000000%2c 18.000000)'%3e %3crect id='icon_clear_active' fill='black' opacity='0' x='0' y='0.00780487805' width='24' height='24'%3e%3c/rect%3e %3cpath d='M24%2c10.6934683 C24%2c9.29483367 22.8777821%2c8.15502957 21.4955096%2c8.15502957 L15.5587661%2c8.15502957 L15.5587661%2c3.13276778 C15.5587661%2c1.40881408 14.1764936%2c0.00780487805 12.4755955%2c0.00780487805 L11.6485748%2c0.00780487805 C9.94767669%2c0.00780487805 8.56540414%2c1.40881408 8.56540414%2c3.13276778 L8.56540414%2c8.15502957 L2.5021476%2c8.15502957 C1.12221788%2c8.15502957 0%2c9.29245908 0%2c10.6934683 C0%2c11.835647 0.754392815%2c12.7926075 1.78055447%2c13.1108028 L1.78055447%2c21.9680305 C1.78055447%2c23.093587 2.68254588%2c24.0078049 3.79304959%2c24.0078049 L20.3615775%2c24.0078049 C21.4720812%2c24.0078049 22.3740726%2c23.093587 22.3740726%2c21.9680305 L22.3740726%2c13.0609364 C23.3205779%2c12.6999984 24%2c11.7786568 24%2c10.6934683 Z M10.114018%2c3.13276778 C10.114018%2c2.27554011 10.8028114%2c1.5774101 11.6485748%2c1.5774101 L12.4755955%2c1.5774101 C13.3213588%2c1.5774101 14.0101523%2c2.27554011 14.0101523%2c3.13276778 L14.0101523%2c8.15502957 L10.114018%2c8.15502957 L10.114018%2c3.13276778 Z M20.3615775%2c22.4381997 L17.8055447%2c22.4381997 L17.8055447%2c19.2206277 C17.8055447%2c18.7860774 17.4588052%2c18.4370124 17.0324092%2c18.4370124 C16.6060133%2c18.4370124 16.2592737%2c18.788452 16.2592737%2c19.2206277 L16.2592737%2c22.4381997 L12.8527919%2c22.4381997 L12.8527919%2c19.2206277 C12.8527919%2c18.7860774 12.5060523%2c18.4370124 12.0796564%2c18.4370124 C11.6509176%2c18.4370124 11.3065209%2c18.788452 11.3065209%2c19.2206277 L11.3065209%2c22.4381997 L7.89769621%2c22.4381997 L7.89769621%2c19.2206277 C7.89769621%2c18.7860774 7.55095666%2c18.4370124 7.12456072%2c18.4370124 C6.69582194%2c18.4370124 6.35142522%2c18.788452 6.35142522%2c19.2206277 L6.35142522%2c22.4381997 L3.79304959%2c22.4381997 C3.53768059%2c22.4381997 3.32916829%2c22.226861 3.32916829%2c21.9680305 L3.32916829%2c13.2295324 L20.8254588%2c13.2295324 L20.8254588%2c21.9656559 C20.8254588%2c22.226861 20.6169465%2c22.4381997 20.3615775%2c22.4381997 Z M21.4978524%2c11.6599272 L2.5021476%2c11.6599272 C1.97500976%2c11.6599272 1.54861382%2c11.2253769 1.54861382%2c10.6934683 C1.54861382%2c10.1591851 1.9773526%2c9.7246348 2.5021476%2c9.7246348 L21.4955096%2c9.7246348 C22.0226474%2c9.7246348 22.4513862%2c10.1591851 22.4513862%2c10.6934683 C22.4513862%2c11.2277514 22.0226474%2c11.6599272 21.4978524%2c11.6599272 Z' id='%e5%bd%a2%e7%8a%b6' fill='%23666FFF'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_invalid%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='24' height='24'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-49.000000%2c -234.000000)'%3e %3cg id='%e6%a0%87%e6%b3%a8%e6%97%a0%e6%95%88' transform='translate(21.000000%2c 215.000000)'%3e %3cg id='icon_invalid' transform='translate(28.000000%2c 19.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg%3e%3c/g%3e %3cpath d='M14.8132711%2c20.5 L3.35714286%2c20.5 C2.91670867%2c20.5 2.57142857%2c20.1826213 2.57142857%2c19.8055556 L2.57142857%2c3.19444444 C2.57142857%2c2.81737868 2.91670867%2c2.5 3.35714286%2c2.5 L20.6428571%2c2.5 C21.0832913%2c2.5 21.4285714%2c2.81737868 21.4285714%2c3.19444444 L21.4285714%2c15.2898676 L23%2c16.4514553 L23%2c3.19444444 C23%2c1.97602093 21.938175%2c1 20.6428571%2c1 L3.35714286%2c1 C2.06182497%2c1 1%2c1.97602093 1%2c3.19444444 L1%2c19.8055556 C1%2c21.0239791 2.06182497%2c22 3.35714286%2c22 L15.9411765%2c22 L14.8132711%2c20.5 Z' id='%e8%b7%af%e5%be%84' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M8.5%2c10 C9.88071187%2c10 11%2c8.88071187 11%2c7.5 C11%2c6.11928813 9.88071187%2c5 8.5%2c5 C7.11928813%2c5 6%2c6.11928813 6%2c7.5 C6%2c8.88071187 7.11928813%2c10 8.5%2c10 Z M8.5%2c8.57142857 C7.90826634%2c8.57142857 7.42857143%2c8.09173366 7.42857143%2c7.5 C7.42857143%2c6.90826634 7.90826634%2c6.42857143 8.5%2c6.42857143 C9.09173366%2c6.42857143 9.57142857%2c6.90826634 9.57142857%2c7.5 C9.57142857%2c8.09173366 9.09173366%2c8.57142857 8.5%2c8.57142857 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M1.93578343%2c18 C4.08872055%2c14.8551688 6.74336715%2c13.7936147 9.20632589%2c14.9383326 C9.39666832%2c15.0267988 9.58966667%2c15.1227541 9.8383972%2c15.2511189 C11.2590222%2c15.9842746 11.4672631%2c16.0801404 12.0929951%2c16.2047792 C13.2715953%2c16.4395429 14.3253377%2c16.0173433 15.3845587%2c14.7865988 C17.834834%2c11.9395412 19.5284667%2c10.6940174 22%2c10.3111164 L21.8385808%2c9 C19.0487146%2c9.43221863 17.1525949%2c10.8266545 14.5357091%2c13.8673024 C13.7408033%2c14.7909303 13.0776295%2c15.056642 12.2992772%2c14.9016031 C11.8197086%2c14.8060784 11.6287028%2c14.7181469 10.3315315%2c14.0487032 C10.0702502%2c13.9138612 9.86453995%2c13.8115857 9.65795075%2c13.7155685 C6.66190483%2c12.3230858 3.4571787%2c13.6046086 1%2c17.1938506 L1.93578343%2c18 Z' id='%e8%b7%af%e5%be%84' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M19.5%2c23 C21.4329966%2c23 23%2c21.4329966 23%2c19.5 C23%2c17.5670034 21.4329966%2c16 19.5%2c16 C17.5670034%2c16 16%2c17.5670034 16%2c19.5 C16%2c21.4329966 17.5670034%2c23 19.5%2c23 Z M19.5%2c22 C18.1192881%2c22 17%2c20.8807119 17%2c19.5 C17%2c18.1192881 18.1192881%2c17 19.5%2c17 C20.8807119%2c17 22%2c18.1192881 22%2c19.5 C22%2c20.8807119 20.8807119%2c22 19.5%2c22 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M21.2928932%2c17.7692308 L21.6464466%2c18.1227842 L21.6464466%2c17.4156774 L21.2928932%2c17.7692308 Z M17.7692308%2c21.2928932 L17.4156774%2c21.6464466 L18.1227842%2c21.6464466 L17.7692308%2c21.2928932 Z M17.7071068%2c21.2307692 L17.3535534%2c20.8772158 L17.3535534%2c21.5843226 L17.7071068%2c21.2307692 Z M21.2307692%2c17.7071068 L21.5843226%2c17.3535534 L20.8772158%2c17.3535534 L21.2307692%2c17.7071068 Z' id='%e7%9f%a9%e5%bd%a2' stroke='%23666666' mask='url(%23mask-2)'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_invalid_a%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='24' height='24'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-166.000000%2c -234.000000)'%3e %3cg id='%e6%a0%87%e6%b3%a8%e6%97%a0%e6%95%88%e5%a4%87%e4%bb%bd' transform='translate(138.000000%2c 215.000000)'%3e %3cg id='icon_invalid' transform='translate(28.000000%2c 19.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='icon_invalid_active'%3e%3c/g%3e %3cpath d='M14.8132711%2c20.5 L3.35714286%2c20.5 C2.91670867%2c20.5 2.57142857%2c20.1826213 2.57142857%2c19.8055556 L2.57142857%2c3.19444444 C2.57142857%2c2.81737868 2.91670867%2c2.5 3.35714286%2c2.5 L20.6428571%2c2.5 C21.0832913%2c2.5 21.4285714%2c2.81737868 21.4285714%2c3.19444444 L21.4285714%2c15.2898676 L23%2c16.4514553 L23%2c3.19444444 C23%2c1.97602093 21.938175%2c1 20.6428571%2c1 L3.35714286%2c1 C2.06182497%2c1 1%2c1.97602093 1%2c3.19444444 L1%2c19.8055556 C1%2c21.0239791 2.06182497%2c22 3.35714286%2c22 L15.9411765%2c22 L14.8132711%2c20.5 Z' id='%e8%b7%af%e5%be%84' fill='%23666FFF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M8.5%2c10 C9.88071187%2c10 11%2c8.88071187 11%2c7.5 C11%2c6.11928813 9.88071187%2c5 8.5%2c5 C7.11928813%2c5 6%2c6.11928813 6%2c7.5 C6%2c8.88071187 7.11928813%2c10 8.5%2c10 Z M8.5%2c8.57142857 C7.90826634%2c8.57142857 7.42857143%2c8.09173366 7.42857143%2c7.5 C7.42857143%2c6.90826634 7.90826634%2c6.42857143 8.5%2c6.42857143 C9.09173366%2c6.42857143 9.57142857%2c6.90826634 9.57142857%2c7.5 C9.57142857%2c8.09173366 9.09173366%2c8.57142857 8.5%2c8.57142857 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%236674FF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M1.93578343%2c18 C4.08872055%2c14.8551688 6.74336715%2c13.7936147 9.20632589%2c14.9383326 C9.39666832%2c15.0267988 9.58966667%2c15.1227541 9.8383972%2c15.2511189 C11.2590222%2c15.9842746 11.4672631%2c16.0801404 12.0929951%2c16.2047792 C13.2715953%2c16.4395429 14.3253377%2c16.0173433 15.3845587%2c14.7865988 C17.834834%2c11.9395412 19.5284667%2c10.6940174 22%2c10.3111164 L21.8385808%2c9 C19.0487146%2c9.43221863 17.1525949%2c10.8266545 14.5357091%2c13.8673024 C13.7408033%2c14.7909303 13.0776295%2c15.056642 12.2992772%2c14.9016031 C11.8197086%2c14.8060784 11.6287028%2c14.7181469 10.3315315%2c14.0487032 C10.0702502%2c13.9138612 9.86453995%2c13.8115857 9.65795075%2c13.7155685 C6.66190483%2c12.3230858 3.4571787%2c13.6046086 1%2c17.1938506 L1.93578343%2c18 Z' id='%e8%b7%af%e5%be%84' fill='%23666FFF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M19.5%2c23 C21.4329966%2c23 23%2c21.4329966 23%2c19.5 C23%2c17.5670034 21.4329966%2c16 19.5%2c16 C17.5670034%2c16 16%2c17.5670034 16%2c19.5 C16%2c21.4329966 17.5670034%2c23 19.5%2c23 Z M19.5%2c22 C18.1192881%2c22 17%2c20.8807119 17%2c19.5 C17%2c18.1192881 18.1192881%2c17 19.5%2c17 C20.8807119%2c17 22%2c18.1192881 22%2c19.5 C22%2c20.8807119 20.8807119%2c22 19.5%2c22 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%236674FF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M21.2928932%2c17.7692308 L21.6464466%2c18.1227842 L21.6464466%2c17.4156774 L21.2928932%2c17.7692308 Z M17.7692308%2c21.2928932 L17.4156774%2c21.6464466 L18.1227842%2c21.6464466 L17.7692308%2c21.2928932 Z M17.7071068%2c21.2307692 L17.3535534%2c20.8772158 L17.3535534%2c21.5843226 L17.7071068%2c21.2307692 Z M21.2307692%2c17.7071068 L21.5843226%2c17.3535534 L20.8772158%2c17.3535534 L21.2307692%2c17.7071068 Z' id='%e7%9f%a9%e5%bd%a2' stroke='%23666FFF' mask='url(%23mask-2)'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M12.0355 1.96447L8.5 5.5L12.0354 9.03545L15.571 5.49991L12.0355 1.96447Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M18.5355 8.46447L15 12L18.5354 15.5354L22.071 11.9999L18.5355 8.46447Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M5.53553 8.46447L2 12L5.53544 15.5354L9.07098 11.9999L5.53553 8.46447Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M12.0355 14.9645L8.5 18.5L12.0354 22.0354L15.571 18.4999L12.0355 14.9645Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M12.0355 1.96447L8.5 5.5L12.0354 9.03545L15.571 5.49991L12.0355 1.96447Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M18.5355 8.46447L15 12L18.5354 15.5354L22.071 11.9999L18.5355 8.46447Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M5.53553 8.46447L2 12L5.53544 15.5354L9.07098 11.9999L5.53553 8.46447Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M12.0355 14.9645L8.5 18.5L12.0354 22.0354L15.571 18.4999L12.0355 14.9645Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M12.0355 1.96447L8.5 5.5L12.0354 9.03545L15.571 5.49991L12.0355 1.96447Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M18.5355 8.46447L15 12L18.5354 15.5354L22.071 11.9999L18.5355 8.46447Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M5.53553 8.46447L2 12L5.53544 15.5354L9.07098 11.9999L5.53553 8.46447Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M12.0355 14.9645L8.5 18.5L12.0354 22.0354L15.571 18.4999L12.0355 14.9645Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e\";\n  export default img;","import { ESubmitType } from '@/constant';\nimport { BatchUpdateResultByTrackID, ToSubmitFileData } from '@/store/annotation/actionCreators';\nimport { LabelBeeContext, useDispatch } from '@/store/ctx';\nimport { Form, InputNumber, message, Modal, Popover, Select } from 'antd';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { QuestionCircleOutlined } from '@ant-design/icons';\nimport { IPointCloudConfig, PointCloudUtils } from '@labelbee/lb-utils';\nimport { connect } from 'react-redux';\nimport { AppState } from '@/store';\nimport { AnnotationFileList } from '@/types/data';\nimport { useSingleBox } from '../../hooks/useSingleBox';\nimport { MathUtils } from '@labelbee/lb-annotation';\n\ninterface IProps {\n  id?: number;\n  visible: boolean;\n  onCancel: () => void;\n  config: IPointCloudConfig;\n  imgList: AnnotationFileList;\n  imgIndex: number;\n}\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\n\nconst defaultNumberRules = [{ required: true, message: '请填写一个数字' }];\nconst defaultSelectedAttribute = [{ required: true, message: '请选择主属性' }];\nconst DECIMAL_PLACES = 2;\n\nconst PrefixTag: React.FC<{ text: string }> = ({ text }) => {\n  return (\n    <span\n      style={{\n        borderRadius: '4px 0px 0px 4px',\n        padding: '0px 12px',\n        background: '#FAFAFA',\n        border: '1px solid rgb(217 217 217)',\n        borderRight: '0',\n        display: 'flex',\n        alignItems: 'center',\n        height: 32,\n      }}\n    >\n      {text}\n    </span>\n  );\n};\n\nconst UnifyParamsModal = ({ id, visible, onCancel, config, imgList, imgIndex }: IProps) => {\n  const dispatch = useDispatch();\n  const { selectedBox } = useSingleBox();\n  const [size, setSize] = useState<{ width: number; height: number; depth: number }>();\n\n  const [form] = Form.useForm();\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (visible === false) {\n      // Clear All Data\n      form.resetFields();\n      setSize(undefined);\n    } else {\n      // Init\n      recalculateSize();\n    }\n  }, [visible]);\n\n  const onFinish = (values: any) => {\n    if (!id) {\n      return;\n    }\n\n    if (!size) {\n      message.info('该范围不存在更改数据, 请更改统一范围');\n      return;\n    }\n\n    dispatch(ToSubmitFileData(ESubmitType.SyncImgList));\n    const newData = {\n      attribute: values.attribute,\n    };\n\n    if (config.secondaryAttributeConfigurable) {\n      const newSubAttribute = {};\n      config.inputList?.forEach((data) => {\n        const subData = values[data.value];\n        if (subData !== undefined) {\n          Object.assign(newSubAttribute, { [data.value]: subData });\n        }\n      });\n\n      if (Object.keys(newSubAttribute).length > 0) {\n        Object.assign(newData, { subAttribute: newSubAttribute });\n      }\n    }\n\n    if (size) {\n      Object.assign(newData, size);\n    }\n\n    dispatch(BatchUpdateResultByTrackID(id, newData, [values.prevPage - 1, values.nextPage - 1]));\n    onCancel();\n  };\n\n  const recalculateSize = useCallback(() => {\n    const { prevPage, nextPage } = form.getFieldsValue(['prevPage', 'nextPage']);\n\n    // 1. Filter the imgInfo in range.\n    const newImgList = imgList.filter((_, i) =>\n      MathUtils.isInRange(i, [prevPage - 1, nextPage - 1]),\n    );\n\n    if (\n      !(newImgList?.length > 0) ||\n      !selectedBox?.info ||\n      selectedBox?.info?.trackID === undefined\n    ) {\n      setSize(undefined);\n      return;\n    }\n\n    // 2. Get the Max Size of imgList\n    const newMaxSize = PointCloudUtils.getMaxSizeFromBox({\n      trackID: selectedBox.info.trackID,\n      imgList: newImgList as Array<{ result: string }>,\n    });\n\n    setSize(newMaxSize);\n  }, [imgList, selectedBox, imgIndex]);\n\n  const onOk = () => form.submit();\n\n  const sizeShow = () => {\n    if (!size || !selectedBox?.info) {\n      return;\n    }\n    const style = { marginRight: 16 };\n\n    const { length, width, height } = PointCloudUtils.transferBox2Kitti({\n      ...selectedBox?.info, // Just for the type check\n      ...size,\n    });\n\n    return (\n      <div>\n        <span style={style}>\n          {t('Length')}: {length.toFixed(DECIMAL_PLACES)}\n        </span>\n        <span style={style}>\n          {t('Width')}: {width.toFixed(DECIMAL_PLACES)}\n        </span>\n        <span style={style}>\n          {t('Height')}: {height.toFixed(DECIMAL_PLACES)}\n        </span>\n        <Popover placement='rightBottom' content='统一尺寸为该ID的所有标注框中最大的尺寸'>\n          <QuestionCircleOutlined />\n        </Popover>\n      </div>\n    );\n  };\n  const selectStyle = {\n    width: '200px',\n  };\n\n  const attributeStyle = {\n    marginBottom: '24px',\n    display: 'flex',\n    alignItems: 'center',\n  };\n\n  return (\n    <Modal\n      title={t('UnifyParams')}\n      visible={visible}\n      onCancel={onCancel}\n      onOk={onOk}\n      wrapClassName='labelbee-custom-modal'\n    >\n      <Form {...layout} form={form} onFinish={onFinish}>\n        <Form.Item name='id' label={t('UnifyTrackID')}>\n          {id}\n        </Form.Item>\n\n        <Form.Item label={t('UnifyAttributeRange')} required={true}>\n          <Form.Item\n            style={{ display: 'inline-block' }}\n            rules={defaultNumberRules}\n            name='prevPage'\n            noStyle={true}\n            initialValue={1} // First Page \n          >\n            <InputNumber\n              precision={0}\n              min={1}\n              style={{ width: '80px' }}\n              onChange={() => recalculateSize()}\n            />\n          </Form.Item>\n          <span\n            style={{\n              display: 'inline-block',\n              width: '24px',\n              textAlign: 'center',\n            }}\n          >\n            -\n          </span>\n          <Form.Item\n            style={{ display: 'inline-block' }}\n            rules={defaultNumberRules}\n            name='nextPage'\n            noStyle={true}\n            initialValue={imgList.length}  // Last Page \n          >\n            <InputNumber\n              precision={0}\n              min={1}\n              style={{ width: '80px' }}\n              onChange={() => recalculateSize()}\n            />\n          </Form.Item>\n          <span\n            style={{\n              display: 'inline-block',\n              width: '40x',\n              marginLeft: '10px',\n              textAlign: 'center',\n            }}\n          >\n            {t('Page')}\n          </span>\n        </Form.Item>\n\n        <Form.Item name='UnifySize' label={t('UnifySize')}>\n          {sizeShow()}\n        </Form.Item>\n\n        <Form.Item label={t('UnifyTag')} required={true}>\n          <div style={attributeStyle}>\n            <PrefixTag text={t('Attribute')} />\n            <Form.Item name='attribute' noStyle={true} rules={defaultSelectedAttribute}>\n              <Select style={selectStyle}>\n                {config.attributeList.map((v) => (\n                  <Select.Option key={v.value} value={v.value}>\n                    {v.key}\n                  </Select.Option>\n                ))}\n              </Select>\n            </Form.Item>\n          </div>\n          {config.secondaryAttributeConfigurable &&\n            config.inputList.map((v) => (\n              <div key={v.value} style={attributeStyle}>\n                <PrefixTag text={v.key} />\n                <Form.Item name={v.value} noStyle={true} required={false}>\n                  <Select style={selectStyle}>\n                    {v.subSelected?.map((subData) => (\n                      <Select.Option key={subData.value} value={subData.value}>\n                        {subData.key}\n                      </Select.Option>\n                    ))}\n                  </Select>\n                </Form.Item>\n              </div>\n            ))}\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => {\n  return {\n    imgIndex: state.annotation.imgIndex,\n  };\n};\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(UnifyParamsModal);\n","import { Col, Row, Slider, Switch, Input } from 'antd/es';\nimport { connect } from 'react-redux';\nimport { throttle } from 'lodash';\nimport React, { useEffect } from 'react';\nimport { ImgAttributeState } from '@/store/imgAttribute/types';\nimport ImgAttribute from '@/store/imgAttribute/actionCreators';\nimport { store } from '@/index';\nimport { LabelBeeContext } from '@/store/ctx';\n\nimport saturationSvg from '@/assets/annotation/image/saturation.svg';\nimport contrastSvg from '@/assets/annotation/image/contrast.svg';\nimport brightnessSvg from '@/assets/annotation/image/brightness.svg';\nimport ZoomUpSvg from '@/assets/attributeIcon/zoomUp.svg';\nimport originalPic from '@/assets/annotation/image/icon_yuantu.svg';\nimport { useTranslation } from 'react-i18next';\n\ninterface IProps {\n  imgAttribute: ImgAttributeState;\n}\n\nconst ImgAttributeInfo = (props: IProps) => {\n  const {\n    imgAttribute: { contrast, saturation, brightness, zoomRatio, isOriginalSize },\n  } = props;\n\n  const { t } = useTranslation();\n\n  const imgAttributeChange = throttle(\n    (payload: Partial<ImgAttributeState>) => {\n      store.dispatch(ImgAttribute.UpdateImgAttribute(payload as ImgAttributeState));\n    },\n    60,\n    { trailing: true },\n  );\n\n  const imgAttributeInfo = [\n    {\n      name: 'Saturation',\n      min: -100,\n      max: 500,\n      step: 2,\n      onChange: (v: number) => imgAttributeChange({ saturation: v }),\n      value: saturation,\n      svg: saturationSvg,\n    },\n    {\n      name: 'Contrast',\n      min: -100,\n      max: 300,\n      step: 2,\n      onChange: (v: number) => imgAttributeChange({ contrast: v }),\n      value: contrast,\n      svg: contrastSvg,\n    },\n    {\n      name: 'Exposure',\n      min: -100,\n      max: 400,\n      step: 2,\n      onChange: (v: number) => imgAttributeChange({ brightness: v }),\n      value: brightness,\n      svg: brightnessSvg,\n    },\n    {\n      name: 'ScreenRatio',\n      min: 0.1,\n      max: 10,\n      step: 0.1,\n      onChange: (v: number) => imgAttributeChange({ zoomRatio: v }),\n      value: zoomRatio,\n      svg: ZoomUpSvg,\n    },\n  ];\n\n  useEffect(() => {\n    return () => {\n      store.dispatch(ImgAttribute.InitImgAttribute());\n    };\n  }, []);\n\n  return (\n    <div>\n      {imgAttributeInfo.map((info: any, index: number) => (\n        <div className='imgAttributeController' key={`option_${index}`}>\n          <Row className='tools' style={{ padding: '0px 0' }}>\n            <Col span={24}>\n              <span className='singleTool'>\n                <img width={12} height={12} src={info.svg} />\n                <span className='toolName'>{t(info.name)}</span>\n              </span>\n            </Col>\n          </Row>\n          <Row>\n            <Col span={20}>\n              <Slider\n                min={info.min}\n                max={info.max}\n                step={info.step}\n                value={info.value}\n                onChange={info.onChange}\n                trackStyle={{ background: '#666fff' }}\n              />\n            </Col>\n            <Col span={4}>\n              <Input\n                value={info.value}\n                disabled\n                style={{\n                  fontSize: 12,\n                  marginBottom: 23,\n                  padding: '0px 2px',\n                  textAlign: 'center',\n                }}\n              />\n            </Col>\n          </Row>\n        </div>\n      ))}\n      <div className='imgAttributeController'>\n        <Row className='tools' style={{ padding: '10px 0' }}>\n          <Col span={18}>\n            <span className='singleTool'>\n              <img src={originalPic} width={16} style={{ marginTop: '-2px' }} />\n              <span className='toolName'>{t('OriginalScale')}</span>\n            </span>\n          </Col>\n          <Col>\n            <Switch\n              checked={isOriginalSize}\n              onChange={(v: boolean) => imgAttributeChange({ isOriginalSize: v })}\n            />\n          </Col>\n        </Row>\n      </div>\n    </div>\n  );\n};\n\nfunction mapStateToProps({ imgAttribute }: any) {\n  return { imgAttribute };\n}\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(ImgAttributeInfo);\n","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e9%a5%b1%e5%92%8c%e5%ba%a6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-481.000000%2c -124.000000)'%3e %3cg id='%e9%a5%b1%e5%92%8c%e5%ba%a6' transform='translate(481.000000%2c 124.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg id='%e9%a5%b1%e5%92%8c%e5%ba%a6-(1)' mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cg transform='translate(2.000000%2c 0.000000)'%3e %3cpath d='M6.28551136%2c15.9450284 C2.821875%2c15.9450284 0.0127840909%2c13.1268466 0.0127840909%2c9.67230114 C0.0127840909%2c5.09048295 5.24914773%2c0.00866477273 6.28551136%2c0.00866477273 C7.15823864%2c0.00866477273 12.5582386%2c5.39957386 12.5582386%2c9.67230114 C12.5582386%2c13.1268466 9.74914773%2c15.9450284 6.28551136%2c15.9450284 Z M6.26732955%2c1.21775568 C5.21278409%2c1.96321023 1.14914773%2c5.79957386 1.14914773%2c9.66321023 C1.14914773%2c12.4995739 3.45823864%2c14.8086648 6.29460227%2c14.8086648 C9.13096591%2c14.8086648 11.4400568%2c12.4995739 11.4400568%2c9.66321023 C11.4309659%2c6.2359375 7.30369318%2c2.04502841 6.26732955%2c1.21775568 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3cpath d='M9.20369318%2c6.91775568 C10.7764205%2c8.49048295 10.7764205%2c11.0450284 9.20369318%2c12.6177557 C7.63096591%2c14.190483 5.07642045%2c14.190483 3.50369318%2c12.6177557 L9.20369318%2c6.91775568 Z' id='%e8%b7%af%e5%be%84'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e6%94%be%e5%a4%a7%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-437.000000%2c -125.000000)'%3e %3cg id='%e6%94%be%e5%a4%a7' transform='translate(437.000000%2c 125.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg id='%e5%af%b9%e6%af%94%e5%ba%a6' mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cpath d='M2.25471549%2c13.5345736 L2.28377061%2c13.5698491 C3.71170509%2c15.0309327 5.68912337%2c15.9414593 7.8824479%2c15.9747872 L7.90975417%2c15.9750853 C10.0876767%2c15.988818 12.0717327%2c15.1310159 13.5224026%2c13.7355349 L13.5574794%2c13.6912368 C15.0213452%2c12.2613547 15.9294671%2c10.2834793 15.953216%2c8.07801203 C15.9769053%2c5.87765227 15.1116308%2c3.87626648 13.6789465%2c2.40995617 C12.2489055%2c0.958829251 10.2741105%2c0.0535890334 8.08152127%2c0.0199232337 L8.054215%2c0.0194677151 C5.86069173%2c0.00607137034 3.86417498%2c0.868563587 2.40521788%2c2.28856852 C0.946896739%2c3.72375685 0.0338461956%2c5.70596465 0.0101569293%2c7.90634429 C-0.0134329775%2c10.0976219 0.837115237%2c12.0836653 2.25471549%2c13.5345736 Z M8.67367358%2c1.27768049 C10.286452%2c1.44950722 11.7315969%2c2.17528929 12.8057027%2c3.27521081 L12.8101743%2c3.27525056 L12.8057027%2c3.27521081 C14.0068005%2c4.50975576 14.7514227%2c6.20240594 14.7313703%2c8.06481599 C14.7112582%2c9.93241304 13.9304662%2c11.5989096 12.7029763%2c12.8173769 L12.6725102%2c12.8468295 C11.5832608%2c13.8981403 10.127702%2c14.5878121 8.52895439%2c14.7198719 L8.67367358%2c1.27768049 Z M7.29456842%2c14.7066162 C6.99960518%2c14.6688366 6.70388674%2c14.6358664 6.42424602%2c14.5580416 L7.305479%2c13.6932043 L7.29456842%2c14.7066162 Z M7.31664792%2c12.655169 L5.61932747%2c14.3211687 C5.35725495%2c14.2186411 5.10778228%2c14.1065343 4.87090943%2c13.9751901 L7.32835345%2c11.5672908 L7.31664792%2c12.655169 L7.31664792%2c12.655169 Z M7.33948263%2c10.5341444 L4.20886184%2c13.5905772 C3.99188241%2c13.4490378 3.79237184%2c13.2931298 3.59790914%2c13.1165136 L7.35124779%2c9.44143698 L7.33948263%2c10.5341444 L7.33948263%2c10.5341444 Z M7.36247634%2c8.39823455 L3.0596539%2c12.6145077 C2.88230233%2c12.4284316 2.71542413%2c12.2330349 2.5667501%2c12.0178242 L7.37412224%2c7.31524528 L7.36247634%2c8.39823455 Z M7.38531104%2c6.27721 L2.16071359%2c11.3977495 C2.01426539%2c11.1672561 1.89530231%2c10.9274022 1.79380809%2c10.6783866 L7.3969967%2c5.19414125 L7.38531104%2c6.27721 L7.38531104%2c6.27721 Z M7.40816562%2c4.15584759 L1.5134718%2c9.91983307 C1.42966504%2c9.63568106 1.36076343%2c9.34198971 1.31408045%2c9.04817915 L7.41983141%2c3.0727987 L7.40816562%2c4.15584759 Z M3.26558364%2c3.17250431 C3.94068814%2c2.50868797 4.75868348%2c1.98561613 5.66915047%2c1.65295276 L1.69467882%2c5.54002052 C2.04222748%2c4.64447857 2.58529212%2c3.83556545 3.26558364%2c3.17250431 Z M7.06902349%2c1.30580157 C7.19108684%2c1.29187021 7.32002644%2c1.28326497 7.43928762%2c1.26440497 L7.43109971%2c2.02476702 L1.23742818%2c8.09337428 L1.23929629%2c7.91958009 C1.24287352%2c7.58679748 1.26860978%2c7.25951986 1.31737946%2c6.93695225 L7.06902349%2c1.30580157 L7.06902349%2c1.30580157 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e5%bd%a2%e7%8a%b6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-525.000000%2c -124.000000)'%3e %3cg id='%e6%9b%9d%e5%85%89' transform='translate(525.000000%2c 124.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg mask='url(%23mask-2)' fill-rule='nonzero' id='%e5%bd%a2%e7%8a%b6'%3e %3cpath d='M2.6123501%2c13.1851491 L2.64065558%2c13.2166896 L2.6413572%2c13.2203755 C4.01642052%2c14.6273605 5.88331047%2c15.4443523 7.88790599%2c15.474817 L7.9129068%2c15.4750953 C9.90015586%2c15.4876256 11.7740345%2c14.7236019 13.1304117%2c13.4251429 L13.2081022%2c13.333556 C14.6189485%2c11.9554626 15.4315386%2c10.0884174 15.453245%2c8.0726293 C15.4749051%2c6.06074757 14.701873%2c4.17234442 13.3228152%2c2.76091268 C11.944524%2c1.36229865 10.0794546%2c0.550659153 8.07318152%2c0.519853677 L8.05116145%2c0.519458391 C6.04381797%2c0.507199088 4.15921827%2c1.27912879 2.7559335%2c2.64493708 C1.34678056%2c4.03173715 0.531741066%2c5.90419121 0.510127959%2c7.91172667 C0.488530813%2c9.91789572 1.24972356%2c11.7905061 2.6123501%2c13.1851491 Z' stroke='%23666666'%3e%3c/path%3e %3cpath d='M11.8970207%2c7.47681347 L9.88251295%2c7.47681347 C9.70012953%2c6.78873057 9.16126943%2c6.24158031 8.46489637%2c6.05919689 L8.46489637%2c4.04468912 C8.46489637%2c3.77111399 8.24106218%2c3.54727979 7.96748705%2c3.54727979 C7.69391192%2c3.54727979 7.47007772%2c3.77111399 7.47007772%2c4.04468912 L7.47007772%2c6.05919689 C6.78199482%2c6.24158031 6.23484456%2c6.78044041 6.05246114%2c7.47681347 L4.03795337%2c7.47681347 C3.76437824%2c7.47681347 3.54054404%2c7.70064767 3.54054404%2c7.9742228 C3.54054404%2c8.24779793 3.76437824%2c8.47163212 4.03795337%2c8.47163212 L6.05246114%2c8.47163212 C6.23484456%2c9.15971503 6.77370466%2c9.70686528 7.47007772%2c9.8892487 L7.47007772%2c11.9037565 C7.47007772%2c12.1773316 7.69391192%2c12.4011658 7.96748705%2c12.4011658 C8.24106218%2c12.4011658 8.46489637%2c12.1773316 8.46489637%2c11.9037565 L8.46489637%2c9.8892487 C9.15297927%2c9.70686528 9.70012953%2c9.16800518 9.88251295%2c8.47163212 L11.8970207%2c8.47163212 C12.1705959%2c8.47163212 12.3944301%2c8.24779793 12.3944301%2c7.9742228 C12.3944301%2c7.70064767 12.178886%2c7.47681347 11.8970207%2c7.47681347 Z M7.96748705%2c8.9607513 C7.42862694%2c8.9607513 6.9892487%2c8.52137306 6.9892487%2c7.98251295 C6.9892487%2c7.44365285 7.42862694%2c7.00427461 7.96748705%2c7.00427461 C8.50634715%2c7.00427461 8.94572539%2c7.44365285 8.94572539%2c7.98251295 C8.94572539%2c8.52137306 8.51463731%2c8.9607513 7.96748705%2c8.9607513 L7.96748705%2c8.9607513 Z' fill='%23666666'%3e%3c/path%3e %3cpath d='M10.1643782%2c6.27474093 C10.2887306%2c6.27474093 10.4213731%2c6.225 10.5125648%2c6.12551813 L11.0928756%2c5.54520725 C11.2835492%2c5.35453368 11.2835492%2c5.03950777 11.0928756%2c4.84054404 C10.9022021%2c4.64987047 10.5871762%2c4.64987047 10.3882124%2c4.84054404 L9.80790155%2c5.42085492 C9.61722798%2c5.6115285 9.61722798%2c5.9265544 9.80790155%2c6.12551813 C9.91567358%2c6.225 10.0400259%2c6.27474093 10.1643782%2c6.27474093 Z M5.42240933%2c6.13380829 C5.52189119%2c6.23329016 5.64624352%2c6.28303109 5.77059585%2c6.28303109 C5.89494819%2c6.28303109 6.02759067%2c6.23329016 6.11878238%2c6.13380829 C6.30945596%2c5.94313472 6.30945596%2c5.62810881 6.11878238%2c5.42914508 L5.5384715%2c4.8488342 C5.34779793%2c4.65816062 5.03277202%2c4.65816062 4.83380829%2c4.8488342 C4.64313472%2c5.03950777 4.64313472%2c5.35453368 4.83380829%2c5.55349741 L5.42240933%2c6.13380829 L5.42240933%2c6.13380829 Z M5.42240933%2c9.82292746 L4.84209845%2c10.4032383 C4.65142487%2c10.5939119 4.65142487%2c10.9089378 4.84209845%2c11.1079016 C4.94158031%2c11.2073834 5.06593264%2c11.2571244 5.19028497%2c11.2571244 C5.31463731%2c11.2571244 5.44727979%2c11.2073834 5.5384715%2c11.1079016 L6.11878238%2c10.5275907 C6.30945596%2c10.3369171 6.30945596%2c10.0218912 6.11878238%2c9.82292746 C5.92810881%2c9.63225389 5.6130829%2c9.63225389 5.42240933%2c9.82292746 L5.42240933%2c9.82292746 Z M10.5208549%2c9.82292746 C10.3301813%2c9.63225389 10.0151554%2c9.63225389 9.81619171%2c9.82292746 C9.62551813%2c10.013601 9.62551813%2c10.3286269 9.81619171%2c10.5275907 L10.3965026%2c11.1079016 C10.4959845%2c11.2073834 10.6203368%2c11.2571244 10.7446891%2c11.2571244 C10.8690415%2c11.2571244 11.0016839%2c11.2073834 11.0928756%2c11.1079016 C11.2835492%2c10.917228 11.2835492%2c10.6022021 11.0928756%2c10.4032383 L10.5208549%2c9.82292746 L10.5208549%2c9.82292746 Z' fill='%23666666'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e6%94%be%e5%a4%a7%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-350.000000%2c -125.000000)'%3e %3cg id='%e6%94%be%e5%a4%a7' transform='translate(350.000000%2c 125.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cpath d='M15.6609771%2c14.3520065 L13.3912778%2c12.0823072 C14.3805588%2c10.8144379 14.9758006%2c9.22447711 14.9758007%2c7.49438563 C14.9758007%2c3.36659478 11.617683%2c0.00889542279 7.48989215%2c0.00889542279 C3.3625196%2c0.00889542279 0.00482025735%2c3.36659476 0.00482025735%2c7.49438563 C0.00482025735%2c11.6221765 3.36251961%2c14.9802941 7.48989215%2c14.9802941 C9.15116518%2c14.9805622 10.764591%2c14.4240002 12.0723758%2c13.399536 L14.3420752%2c15.6700719 C14.706368%2c16.0359836 15.2981418%2c16.0378552 15.6647418%2c15.6742549 C16.0284092%2c15.3079133 16.0267247%2c14.7162714 15.6609771%2c14.3520065 L15.6609771%2c14.3520065 Z M1.42997059%2c7.49480392 C1.42997059%2c4.15341829 4.14850654%2c1.43530066 7.48989215%2c1.43530066 C10.8312778%2c1.43530066 13.5498137%2c4.15383662 13.5498137%2c7.49480392 C13.5498137%2c10.8357712 10.8312778%2c13.5547255 7.48989215%2c13.5547255 C4.14850653%2c13.5547255 1.42997059%2c10.8357713 1.42997059%2c7.49480392 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3cpath d='M10.0122451%2c6.78201961 L8.20309478%2c6.78201961 L8.20309478%2c4.97203268 C8.20309478%2c4.59347059 7.88351309%2c4.28685621 7.48989215%2c4.28685621 C7.09627123%2c4.28685621 6.77710783%2c4.5930523 6.77710785%2c4.97203268 L6.77710785%2c6.78201961 L4.96753921%2c6.78201961 C4.58897711%2c6.78201961 4.28194445%2c7.10118301 4.28194445%2c7.49522222 C4.28194445%2c7.88884314 4.58814053%2c8.20842483 4.96753921%2c8.20842483 L6.77710785%2c8.20842483 L6.77710785%2c10.0179935 C6.77710785%2c10.3961372 7.09627125%2c10.7035882 7.48989215%2c10.7035882 C7.88351305%2c10.7035882 8.20309476%2c10.3965556 8.20309478%2c10.0179935 L8.20309478%2c8.20842483 L10.0122451%2c8.20842483 C10.3908072%2c8.20842483 10.6982582%2c7.88926143 10.6982582%2c7.49522222 C10.6982582%2c7.10118301 10.3908072%2c6.78201961 10.0122451%2c6.78201961 Z' id='%e8%b7%af%e5%be%84'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3cg transform='translate(-1838 -1616)'%3e%3crect width='16' height='16' transform='translate(1838 1616)' fill='none'/%3e%3cpath d='M1%2c1V11H11V1H1M1%2c0H11a1%2c1%2c0%2c0%2c1%2c1%2c1V11a1%2c1%2c0%2c0%2c1-1%2c1H1a1%2c1%2c0%2c0%2c1-1-1V1A1%2c1%2c0%2c0%2c1%2c1%2c0Z' transform='translate(1840 1618)' fill='%23707070'/%3e%3cpath d='M9030-7951h-1v-3h3v1h-2Z' transform='translate(-7187 9574)' fill='%23999'/%3e%3cpath d='M9030-7951h-1v-3h3v1h-2Z' transform='translate(10878.999 -6326) rotate(180)' fill='%23999'/%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","import React, { useState, useEffect, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { AppState } from 'src/store';\nimport { GraphToolInstance } from 'src/store/annotation/types';\nimport AttributeList from '@/components/attributeList';\nimport StepUtils from '@/utils/StepUtils';\nimport { IStepInfo } from '@/types/step';\nimport { jsonParser } from '@/utils';\nimport { useTranslation } from 'react-i18next';\nimport { EToolName } from '@/data/enums/ToolType';\nimport { LabelBeeContext } from '@/store/ctx';\n\ninterface IProps {\n  toolInstance: GraphToolInstance;\n  stepInfo: IStepInfo;\n}\n\nconst SwitchAttributeList: React.FC<IProps> = (props) => {\n  const [_, forceRender] = useState(0);\n  const listRef = useRef<HTMLElement>(null);\n  const { toolInstance } = props;\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (toolInstance) {\n      toolInstance.singleOn('changeAttributeSidebar', (index: number) => {\n        forceRender((s) => s + 1);\n\n        if (!listRef.current) {\n          return;\n        }\n\n        listRef.current.children[index]?.scrollIntoView({ block: 'center' });\n      });\n    }\n    return () => {\n      toolInstance?.unbindAll('changeAttributeSidebar');\n    };\n  }, [toolInstance, listRef]);\n\n  if (!props.stepInfo) {\n    return null;\n  }\n\n  const config = jsonParser(props.stepInfo.config);\n  const isScribbleTool = props.stepInfo.tool === EToolName.ScribbleTool;\n\n  if (config.attributeConfigurable !== true && !isScribbleTool) {\n    return null;\n  }\n\n  if ((config.attributeConfigurable === true || isScribbleTool) && config?.attributeList) {\n    const list = config.attributeList.map((i: any) => ({\n      label: i.key,\n      value: i.value,\n      color: i?.color,\n    }));\n\n    if (!isScribbleTool) {\n      list.unshift({ label: t('NoAttribute'), value: '' });\n    }\n\n    const attributeChanged = (v: string) => {\n      toolInstance.setDefaultAttribute(v);\n      forceRender((s) => s + 1);\n    };\n\n    return (\n      <div>\n        <AttributeList\n          list={list}\n          attributeChanged={attributeChanged}\n          selectedAttribute={toolInstance?.defaultAttribute ?? ''}\n          ref={listRef}\n          forbidDefault={isScribbleTool}\n        />\n      </div>\n    );\n  }\n\n  return null;\n};\n\nconst mapStateToProps = (state: AppState) => {\n  const stepInfo = StepUtils.getCurrentStepInfo(state.annotation?.step, state.annotation?.stepList);\n\n  return {\n    toolInstance: state.annotation.toolInstance,\n    stepInfo,\n  };\n};\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(\n  SwitchAttributeList,\n);\n","import React from 'react';\n\nexport const ColorTag = ({ color, style, onClick }: any) => (\n  <div\n    style={{\n      display: 'inline-block',\n      height: 14,\n      width: 14,\n      backgroundColor: color,\n      verticalAlign: 'middle',\n      ...style,\n    }}\n    onClick={onClick}\n  />\n);\n","/**\n * @file Color Palette\n * @author lixinghua <lixinghua_vendor@sensetime.com>\n * @date 2023.04.24\n */\nimport React from 'react';\nimport { RgbaColorPicker } from 'react-colorful';\nimport { toRGBAObj, toRGBAStr } from '@/utils/colorUtils';\n\ninterface IProps {\n  defaultColor?: string;\n  setColor: (color: string) => void;\n}\n\nconst Palette = (props: IProps) => {\n  const { setColor, defaultColor } = props;\n\n  return (\n    <RgbaColorPicker\n      color={toRGBAObj(defaultColor)}\n      onChange={(values) => {\n        const colorStr = toRGBAStr(values);\n        setColor(colorStr);\n      }}\n    />\n  );\n};\nexport default Palette;\n","/**\n * transform rgba(a,g,b), to {r,g,b,a}\n * @param color\n */\nexport const toRGBAObj = (rgbStr: string | undefined) => {\n  if (!rgbStr) {\n    return;\n  }\n  const match = rgbStr.replace(/[rgba()]/g, '').split(',');\n  if (match) {\n    const [r, g, b, a] = match;\n    return { r: Number(r), g: Number(g), b: Number(b), a: Number(a) };\n  }\n  return undefined;\n};\n\n/**\n * transform {a,g,b,a} to rgba{r,g,b,a}\n * @param color\n */\nexport const toRGBAStr = (color: { r: number; g: number; b: number; a: number }) =>\n  `rgba(${color.r},${color.g},${color.b},${color.a})`;\n","import React from 'react';\nimport { Tooltip } from 'antd';\nimport defaultSizeSvg from '@/assets/toolStyle/icon_defaultSize.svg';\nimport { ILimit, IDefaultSize } from '@labelbee/lb-utils';\nimport { useTranslation } from 'react-i18next';\n\nconst LimitPopover = ({\n  limit,\n  updateSize,\n}: {\n  limit: ILimit;\n  updateSize?: (size: IDefaultSize) => void;\n}) => {\n  const { t } = useTranslation();\n  const LOGICAL_TEXT: { [a: string]: string } = {\n    and: t('And'),\n    or: t('Or'),\n  };\n  const defaultSize = limit?.sizeLimit?.defaultSize;\n  const sizeRange = limit?.sizeLimit?.sizeRange;\n  const logicalCondition = limit?.sizeLimit?.logicalCondition || [];\n  const positionLimit = limit?.positionLimit;\n\n  const { heightDefault, depthDefault, widthDefault } = defaultSize || {};\n  const { heightMax, heightMin, depthMax, depthMin, widthMax, widthMin } = sizeRange || {};\n  const { XMin, XMax, YMin, YMax, ZMin, ZMax } = positionLimit || {};\n  const showNormalSizeRangeBox = logicalCondition.length > 0 || sizeRange;\n\n  /**\n   * width:长\n   * height：宽\n   * depth: 高\n   * @param text （配置的字段）\n   * @returns\n   */\n  const gitText = (text: string) => {\n    switch (text) {\n      case 'width':\n        return t('Length');\n      case 'height':\n        return t('Width');\n      case 'depth':\n        return t('Height');\n    }\n    return '';\n  };\n\n  return (\n    <Tooltip\n      color='rgba(0, 0, 0, 0.75)'\n      title={\n        <div style={{ padding: '8px' }}>\n          {defaultSize && (\n            <div style={{ marginBottom: '24px' }}>\n              <div>【{t('DefaultSize')}】</div>\n              <span>{`${t('Length')}: ${widthDefault}m、`}</span>\n              <span>{`${t('Width')}: ${heightDefault}m、`}</span>\n              <span>{`${t('Height')}: ${depthDefault}m`}</span>\n            </div>\n          )}\n\n          {showNormalSizeRangeBox && (\n            <div style={{ marginBottom: '24px' }}>\n              <div>*{t('NormalSizeRange')}</div>\n              {sizeRange && (\n                <span>\n                  (<span>{`${t('Length')}: ${widthMin}~${widthMax}m、`}</span>\n                  <span>{`${t('Width')}: ${heightMin}~${heightMax}m、`}</span>\n                  <span>{`${t('Height')}: ${depthMin}~${depthMax}m`}</span>)\n                </span>\n              )}\n\n              {logicalCondition.length > 0 && (\n                <>\n                  {sizeRange ? ` ${LOGICAL_TEXT[logicalCondition[0]?.logical]} ` : null}\n                  <span>\n                    (\n                    {logicalCondition.map((i, index) => {\n                      const leftText = gitText(i?.dimensionLeft);\n                      const rightText = gitText(i?.dimensionRight);\n                      return (\n                        <span key={index}>\n                          {index !== 0 ? ` ${LOGICAL_TEXT[i?.logical]} ` : null}\n                          {`${leftText} ${i?.condition} ${rightText} `}\n                        </span>\n                      );\n                    })}\n                    )\n                  </span>\n                </>\n              )}\n            </div>\n          )}\n\n          {positionLimit && (\n            <div>\n              <div>*{t('NormalCenterPointRange')}</div>\n              <span>{`X: ${XMin}~${XMax}、`}</span>\n              <span>{`Y: ${YMin}~${YMax}、`}</span>\n              <span>{`Z: ${ZMin}~${ZMax}`}</span>\n            </div>\n          )}\n        </div>\n      }\n      placement='bottomRight'\n    >\n      <img\n        src={defaultSizeSvg}\n        style={{ margin: '0px 8px' }}\n        onClick={(e) => {\n          e.preventDefault();\n          if (defaultSize) {\n            updateSize?.(defaultSize);\n          }\n        }}\n      />\n    </Tooltip>\n  );\n};\nexport default LimitPopover;\n","var img = \"data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cmask id='mask0_98686_26848' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='0' y='0' width='16' height='16'%3e %3cpath d='M0 16H16V0H0V16Z' fill='black'/%3e %3c/mask%3e %3cg mask='url(%23mask0_98686_26848)'%3e %3c/g%3e %3cmask id='mask1_98686_26848' style='mask-type:luminance' maskUnits='userSpaceOnUse' x='8' y='3' width='8' height='10'%3e %3cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.2139 6.64981H14.4827V5.50925C14.4827 4.12824 13.3678 3 12.003 3C10.6382 3 9.5232 4.12824 9.5232 5.50925V6.64981H8.78597C8.34729 6.64981 8 7.00739 8 7.44512V12.2047C8 12.6486 8.35338 13 8.78597 13H15.2139C15.6526 13 15.9999 12.6424 15.9999 12.2047V7.45129C16.0059 7.01356 15.6465 6.64981 15.2139 6.64981ZM12.0096 3.90915C12.9925 3.90915 13.4251 4.52059 13.4251 5.6041V6.63636H10.5777V5.6041C10.5777 4.52059 11.0267 3.90246 12.0096 3.90915ZM12.5796 9.64888V10.8309C12.5796 10.9294 12.5288 11.0094 12.4357 11.0772C12.3426 11.1449 12.2241 11.1818 12.0972 11.1818C11.8348 11.1818 11.6147 11.0217 11.6147 10.8309V9.64888C11.3693 9.53191 11.2 9.32875 11.2 9.10096C11.2 8.74389 11.5978 8.45454 12.0887 8.45454C12.5796 8.45454 12.9774 8.74389 12.9774 9.10096C12.9859 9.32875 12.8251 9.53191 12.5796 9.64888Z' fill='white'/%3e %3c/mask%3e %3cg mask='url(%23mask1_98686_26848)'%3e %3cpath d='M8 3H16V13H8V3Z' fill='%23666666'/%3e %3c/g%3e %3cpath fill-rule='evenodd' clip-rule='evenodd' d='M1 1H3.5V1.625L8.5 1.625V1H11V1.91949C10.1468 2.21687 9.45952 2.88195 9.125 3.72563V3.5H8.5V2.875L3.5 2.875V3.5H2.875V10H3.5V10.625H7V11.875H3.5V12.5H1V10H1.625V3.5H1V1ZM11 9.3677V9.38464C11 9.38185 10.9999 9.37906 10.9999 9.37626C10.9999 9.3734 11 9.37055 11 9.3677ZM10.2222 5.77769L10.3701 6.2954H10.2222V5.77769Z' fill='%23666666'/%3e%3c/svg%3e\";\n  export default img;","import { Checkbox } from 'antd/es';\nimport React from 'react';\n\ninterface IProps {\n  selectedAttribute: string[];\n  attributeChanged: () => void;\n  num?: any;\n  list?: any[];\n}\n\nconst CheckboxList = (props: IProps) => {\n  const checkboxRef = React.useRef<any>(null);\n  const list = props.list || [];\n  return (\n    <div className=\"sensebee-checkbox-group\">\n      <Checkbox.Group\n        name=\"checkboxgroup\"\n        // defaultValue={props.selectedAttribute}\n        value={props.selectedAttribute}\n        onChange={() => props.attributeChanged()}\n      >\n        {list.map((i: any, index: number) => (\n          // @ts-ignore\n          <Checkbox value={i.value} ref={checkboxRef} onFocus={() => {\n              checkboxRef?.current?.blur();\n            }}\n            key={index}\n          >\n            <span className=\"sensebee-checkbox-label\" title={i.label}>\n              {i.label}\n            </span>\n            <span className=\"sensebee-checkbox-num\">{props?.num ?? index}</span>\n          </Checkbox>\n        ))}\n      </Checkbox.Group>\n    </div>\n  );\n};\n\nexport default CheckboxList;\n","import React, { useEffect, useState, useRef, FocusEvent } from 'react';\nimport { connect } from 'react-redux';\nimport { AppState } from '@/store';\nimport { cloneDeep } from 'lodash';\nimport { classnames } from '@/utils';\nimport { Input } from 'antd/es';\nimport { cKeyCode } from '@labelbee/lb-annotation';\nimport { PageForward } from '@/store/annotation/actionCreators';\nimport { ConfigUtils } from '@/utils/ConfigUtils';\nimport { IStepInfo } from '@/types/step';\nimport TextToolOperation from '@labelbee/lb-annotation/dist/types/core/toolOperation/TextToolOperation';\nimport { useTranslation } from 'react-i18next';\nimport { LabelBeeContext } from '@/store/ctx';\n\nconst EKeyCode = cKeyCode.default;\n\nconst syntheticEventStopPagination = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n  e.stopPropagation();\n  e.nativeEvent.stopPropagation();\n  e.nativeEvent.stopImmediatePropagation();\n};\n\ninterface ITextareaWithFooterProps {\n  textareaProps?: any;\n  footer?: any;\n}\n\nexport const TextareaWithFooter = (props: ITextareaWithFooterProps) => {\n  const { textareaProps, footer } = props;\n\n  return (\n    <>\n      <Input.TextArea\n        bordered={false}\n        rows={6}\n        onKeyDown={syntheticEventStopPagination}\n        onKeyUp={syntheticEventStopPagination}\n        {...textareaProps}\n      />\n      <div\n        className={classnames({\n          textAreaLength: true,\n        })}\n      >\n        {footer}\n      </div>\n    </>\n  );\n};\n\ninterface IProps {\n  dispatch: Function;\n  toolInstance: TextToolOperation;\n  imgIndex: number;\n  triggerEventAfterIndexChanged: boolean;\n  step: number;\n  stepList: IStepInfo[];\n  basicResultList: any[];\n}\n\ninterface IConfigListItem {\n  label: string;\n  key: string;\n  required: boolean;\n  default: string;\n  maxLength: number;\n}\n\nexport const SingleTextInput = (props: any) => {\n  const ref = useRef(null);\n  const [textAreaFocus, setTextAreaFocus] = useState(false);\n  const [invalid, setInvalid] = useState(false);\n  const { t } = useTranslation();\n\n  const { disabled, config, result, updateText, index, switchToNextTextarea, hasMultiple, onNext } =\n    props;\n  const { maxLength } = config;\n\n  const value = result ? result[config.key] : '';\n  const textLength = value?.length ?? 0;\n\n  const updateTextWithKey = (newVal: string) => {\n    if (updateText) {\n      updateText(newVal, config.key);\n      if (config.required) {\n        setInvalid(!newVal);\n      }\n    }\n  };\n\n  const tabToSwitchEnabled = hasMultiple && switchToNextTextarea;\n\n  const textareaProps = {\n    id: `textInput-${index}`,\n    ref,\n    disabled,\n    value,\n    maxLength,\n    autoSize: { minRows: 2, maxRows: 6 },\n    onChange: (e: FocusEvent<HTMLTextAreaElement>) => {\n      const value = e.target.value;\n      updateTextWithKey(value);\n    },\n    onFocus: () => {\n      setTextAreaFocus(true);\n    },\n    onBlur: (e: FocusEvent<HTMLTextAreaElement>) => {\n      setTextAreaFocus(false);\n      if (config.required) {\n        setInvalid(!e.target.value);\n      }\n    },\n    style: {\n      resize: 'none',\n      wordBreak: 'break-all',\n    },\n    onKeyDownCapture: (e: React.KeyboardEvent) => {\n      if (e.ctrlKey && e.keyCode === EKeyCode.Enter) {\n        if (onNext) {\n          onNext();\n        }\n        e.preventDefault();\n      }\n\n      if (e.keyCode === EKeyCode.Tab && tabToSwitchEnabled) {\n        e.preventDefault();\n        e.nativeEvent.stopImmediatePropagation();\n        switchToNextTextarea(index);\n      }\n\n      e.nativeEvent.stopPropagation();\n    },\n  };\n\n  const TextareaFooter = (\n    <div className='textAreaFooter'>\n      <div className='hotkeyTip'>\n        {tabToSwitchEnabled && <span>{`[${t('Switch')}]Tab`}</span>}\n        <span>{`[${t('TurnPage')}]Ctrl+Enter`}</span>\n      </div>\n      <div className='wordCount'>\n        <span className={textLength >= maxLength ? 'warning' : ''}>{textLength}</span>/\n        <span>{maxLength}</span>\n      </div>\n    </div>\n  );\n\n  useEffect(() => {\n    if (disabled) {\n      setTextAreaFocus(false);\n    }\n  }, [disabled]);\n\n  return (\n    <div className='textField'>\n      <div className='label'>\n        <span className={classnames({ required: config.required })}>{config.label}</span>\n        <i\n          className={classnames({ clearText: true, disabled: disabled })}\n          onClick={() => {\n            if (disabled) {\n              return;\n            }\n            updateTextWithKey('');\n          }}\n        />\n      </div>\n      <div\n        className={classnames({\n          disabled,\n          'textarea-outline': true,\n          'ant-input-focused': textAreaFocus,\n          textareaContainer: true,\n          focus: textAreaFocus,\n          invalid: invalid,\n        })}\n      >\n        <TextareaWithFooter footer={TextareaFooter} textareaProps={textareaProps} />\n      </div>\n    </div>\n  );\n};\n\nconst TextToolSidebar: React.FC<IProps> = ({\n  toolInstance,\n  imgIndex,\n  dispatch,\n  triggerEventAfterIndexChanged,\n  step,\n  stepList,\n  basicResultList,\n}) => {\n  const [configList, setConfigList] = useState<IConfigListItem[]>([]);\n  const [focusIndex, setFocusIndex] = useState(0);\n  const [, forceRender] = useState(0);\n\n  const switchToNextTextarea = (currentIndex: number) => {\n    const nextIndex = (currentIndex + 1) % configList.length;\n    textareaFocus(nextIndex);\n  };\n\n  const textareaFocus = (index: number) => {\n    setTimeout(() => {\n      const textarea = document.getElementById(`textInput-${index}`) as HTMLTextAreaElement;\n      if (textarea) {\n        setFocusIndex(index);\n        textarea.focus();\n        textarea.select();\n        textarea.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (toolInstance) {\n      setConfigList(cloneDeep(toolInstance.config.configList));\n      toolInstance.singleOn('valueUpdated', () => {\n        forceRender((s) => s + 1);\n      });\n    }\n  }, [toolInstance]);\n\n  const updateText = (v: string, k: string) => {\n    toolInstance.updateTextValue(k, v);\n  };\n\n  useEffect(() => {\n    if (imgIndex > -1 && triggerEventAfterIndexChanged) {\n      textareaFocus(0);\n    }\n  }, [imgIndex]);\n\n  const result = toolInstance.textList[0]?.value ?? {};\n\n  const onNext = () => {\n    dispatch(PageForward(true));\n  };\n\n  const stepConfig = ConfigUtils.getStepConfig(stepList, step);\n  const disabled = stepConfig.dataSourceStep > 0 && basicResultList.length === 0;\n\n  return (\n    <div className='textToolOperationMenu'>\n      {configList.map((i, index) => (\n        <SingleTextInput\n          config={i}\n          key={i.key}\n          index={index}\n          result={result}\n          updateText={updateText}\n          switchToNextTextarea={switchToNextTextarea}\n          hasMultiple={configList.length > 1}\n          focus={focusIndex === index}\n          onNext={onNext}\n          disabled={disabled}\n        />\n      ))}\n    </div>\n  );\n};\n\nfunction mapStateToProps(state: AppState) {\n  return {\n    toolInstance: state.annotation.toolInstance,\n    imgIndex: state.annotation.imgIndex,\n    step: state.annotation.step,\n    basicResultList: state.annotation.basicResultList,\n    stepList: state.annotation.stepList,\n    triggerEventAfterIndexChanged: state.annotation.triggerEventAfterIndexChanged,\n  };\n}\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(TextToolSidebar);\n","import React, { useContext, useState, useEffect } from 'react';\nimport { EditFilled } from '@ant-design/icons';\nimport { ToolIcons } from '../ToolIcons';\nimport { cTool } from '@labelbee/lb-annotation';\nimport { PointCloudContext } from '@/components/pointCloudView/PointCloudContext';\nimport { Select, Tag, message, Input, Divider } from 'antd';\nimport { AppState } from '@/store';\nimport StepUtils from '@/utils/StepUtils';\nimport { connect } from 'react-redux';\nimport { IStepInfo } from '@/types/step';\nimport { classnames, jsonParser } from '@/utils';\nimport { ICustomToolInstance } from '@/hooks/annotation';\nimport { useStatus } from '@/components/pointCloudView/hooks/useStatus';\nimport { useSingleBox } from '@/components/pointCloudView/hooks/useSingleBox';\nimport { useTranslation } from 'react-i18next';\nimport { LabelBeeContext, useDispatch } from '@/store/ctx';\nimport BatchUpdateModal from './components/batchUpdateModal';\nimport { IFileItem } from '@/types/data';\nimport { PointCloudUtils, IInputList, IDefaultSize } from '@labelbee/lb-utils';\nimport AttributeList from '@/components/attributeList';\nimport { useAttribute } from '@/components/pointCloudView/hooks/useAttribute';\nimport LassoSelectorSvg from '@/assets/annotation/pointCloudTool/lassoSelector.svg';\nimport LassoSelectorSvgA from '@/assets/annotation/pointCloudTool/lassoSelector_a.svg';\nimport CirCleSelectorSvg from '@/assets/annotation/pointCloudTool/circleSelector.svg';\nimport CirCleSelectorSvgA from '@/assets/annotation/pointCloudTool/circleSelector_a.svg';\nimport { sidebarCls } from '..';\nimport { SetTaskStepList } from '@/store/annotation/actionCreators';\nimport { usePointCloudViews } from '@/components/pointCloudView/hooks/usePointCloudViews';\n\ninterface IProps {\n  stepInfo: IStepInfo;\n  toolInstance: ICustomToolInstance; // Created by useCustomToolInstance.\n  imgList: IFileItem[];\n  imgIndex: number;\n  stepList: IStepInfo[];\n  enableColorPicker?: boolean;\n}\n\n// Temporarily hidden, this feature does not support the function for the time being.\nconst AnnotatedBox = ({ imgList, imgIndex }: { imgList: IFileItem[]; imgIndex: number }) => {\n  const ptCtx = useContext(PointCloudContext);\n  const [showIDs, setShowIds] = useState<number[]>([]);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const newImgList = imgList as Array<{ result: string }>;\n    let trackMap = new Map();\n    setShowIds(\n      PointCloudUtils.getAllPointCloudResult({\n        imgList: newImgList,\n        extraBoxList: pointCloudBoxList,\n        ignoreIndexList: [imgIndex],\n      })\n        .filter((v) => {\n          if (!v.trackID) {\n            return false;\n          }\n\n          if (trackMap.get(v.trackID)) {\n            return false;\n          }\n          trackMap.set(v.trackID, true);\n          return true;\n        })\n        .sort((a, b) => {\n          const aTrackID = a?.trackID ?? 0;\n          const bTrackID = b?.trackID ?? 0;\n\n          return aTrackID - bTrackID;\n        })\n        .map((v) => v?.trackID ?? 0),\n    );\n  }, [ptCtx.pointCloudBoxList, imgList]);\n\n  const { pointCloudBoxList } = ptCtx;\n\n  return (\n    <div style={{ padding: 24, borderBottom: '1px solid #eee' }}>\n      <div style={{ marginBottom: 16 }}>{t('AllTrackIDs')}</div>\n      <div>\n        {showIDs.map((id) => (\n          <Tag color='#F3F4FF' key={id} style={{ color: '#666', marginBottom: 8 }}>\n            {id}\n          </Tag>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst BoxTrackIDInput = () => {\n  const [isEdit, setIsEdit] = useState(false);\n  const ptCtx = useContext(PointCloudContext);\n  const { pointCloudBoxList } = ptCtx;\n  const { selectedBox, updateSelectedBox } = useSingleBox();\n  const [inputValue, setInputValue] = useState('');\n  const { t } = useTranslation();\n\n  const selectedBoxTrackID = selectedBox?.info.trackID;\n\n  const hasDuplicateTrackID = (trackID: number) => {\n    const duplicateBox = pointCloudBoxList.find(\n      (v) => v.trackID === trackID && v.id !== selectedBox?.info.id,\n    );\n    return !!duplicateBox;\n  };\n\n  const applyInputValue = (isBlurEvent = false) => {\n    const newTrackID = parseInt(inputValue, 10);\n    if (isBlurEvent) {\n      setIsEdit(false);\n    }\n\n    if (isNaN(newTrackID)) {\n      message.error(t('PositiveIntegerCheck'));\n      return;\n    }\n\n    if (inputValue.indexOf('.') > -1) {\n      message.error(t('NotAllowDecimalPointsInTrackID'));\n      return;\n    }\n\n    if (hasDuplicateTrackID(newTrackID)) {\n      message.error(t('DuplicateTrackIDsExist'));\n      return;\n    }\n\n    if (!(newTrackID > 0)) {\n      message.error(t('PositiveIntegerCheck'));\n      return;\n    }\n\n    updateCurrentPolygonList(newTrackID);\n  };\n\n  useEffect(() => {\n    setIsEdit(false);\n  }, [selectedBoxTrackID]);\n\n  const updateCurrentPolygonList = (newTrackID: number) => {\n    const newPointCloudList = updateSelectedBox({ trackID: newTrackID });\n    ptCtx?.topViewInstance?.updatePolygonList(newPointCloudList ?? []);\n  };\n\n  return (\n    <div style={{ padding: 24 }}>\n      <div\n        style={{\n          marginBottom: 16,\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n        }}\n      >\n        <span>{t('CurrentBoxTrackIDs')}</span>\n        {selectedBoxTrackID && (\n          <BatchUpdateModal\n            id={selectedBoxTrackID}\n            updateCurrentPolygonList={(value) => updateCurrentPolygonList(value)}\n          />\n        )}\n      </div>\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n        }}\n      >\n        {isEdit && selectedBoxTrackID ? (\n          <Input\n            defaultValue={selectedBoxTrackID}\n            onChange={(e) => {\n              setInputValue(e.target.value);\n            }}\n            disabled={!selectedBoxTrackID}\n            size='small'\n            onBlur={() => {\n              applyInputValue();\n            }}\n            onPressEnter={() => {\n              applyInputValue(true);\n            }}\n          />\n        ) : (\n          <span>{selectedBoxTrackID}</span>\n        )}\n        <EditFilled\n          style={{\n            color: '#999',\n            marginLeft: 16,\n            cursor: typeof selectedBoxTrackID !== 'undefined' ? 'pointer' : 'not-allowed',\n          }}\n          onClick={() => {\n            if (selectedBoxTrackID) {\n              setIsEdit(!isEdit);\n            }\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst AttributeUpdater = ({\n  attributeList,\n  subAttributeList,\n  toolInstance,\n  config,\n  stepList,\n  stepInfo,\n  enableColorPicker,\n}: {\n  toolInstance: ICustomToolInstance;\n  attributeList: IInputList[];\n  subAttributeList: any[]; // TODO\n  config: any;\n  stepList: IStepInfo[];\n  stepInfo: IStepInfo;\n  enableColorPicker?: boolean;\n}) => {\n  const { selectedBox } = useSingleBox();\n  const ptx = useContext(PointCloudContext);\n  const { t } = useTranslation();\n  const { defaultAttribute } = useAttribute();\n  const pointCloudViews = usePointCloudViews();\n\n  const dispatch = useDispatch();\n\n  const titleStyle = {\n    fontWeight: 500,\n    fontSize: 14,\n    margin: '12px 0 8px 20px',\n  };\n\n  const subTitleStyle = {\n    margin: '12px 20px 8px',\n    fontSize: 14,\n    fontWeight: 500,\n    wordWrap: 'break-word' as any, // WordWrap Type ?\n  };\n\n  const updateColorConfig = (value: string, color: string) => {\n    const attributeList = config?.attributeList?.map((i: any) => {\n      if (i.value === value) {\n        return { ...i, color };\n      }\n      return i;\n    });\n\n    const formatConfig = { ...config, attributeList };\n    const configStr = JSON.stringify(formatConfig);\n    const formatStepList = stepList?.map((i: IStepInfo) => {\n      if (i?.step === stepInfo?.step) {\n        return { ...i, config: configStr };\n      }\n      return i;\n    });\n    ptx?.topViewInstance?.updateAttributeList(attributeList);\n    ptx?.sideViewInstance?.updateAttributeList(attributeList);\n    ptx?.backViewInstance?.updateAttributeList(attributeList);\n    ptx?.mainViewInstance?.setConfig(formatConfig);\n    dispatch(SetTaskStepList({ stepList: formatStepList }));\n  };\n\n  const updateSize = (size: IDefaultSize) => {\n    if (pointCloudViews.updateViewsByDefaultSize) {\n      pointCloudViews.updateViewsByDefaultSize(size)\n    }\n  }\n\n  const setAttribute = (attribute: string) => {\n    toolInstance.setDefaultAttribute(attribute);\n  };\n\n  const setSubAttribute = (key: string, value: string) => {\n    toolInstance.setSubAttribute(key, value);\n  };\n\n  const list = attributeList.map((i: IInputList) => ({\n    label: i.key,\n    value: i.value,\n    color: i?.color,\n    limit: i?.limit,\n    isDefault: i?.isDefault,\n  }));\n\n  return (\n    <div>\n      <div style={titleStyle}>{t('Attribute')}</div>\n      <AttributeList\n        list={list}\n        forbidDefault={true}\n        selectedAttribute={defaultAttribute ?? ''}\n        attributeChanged={(attribute: string) => setAttribute(attribute)}\n        updateColorConfig={updateColorConfig}\n        enableColorPicker={enableColorPicker}\n        updateSize={updateSize}\n      />\n      <Divider style={{ margin: 0 }} />\n      {selectedBox && (\n        <>\n          {subAttributeList.map(\n            (subAttribute) =>\n              subAttribute?.subSelected && (\n                <div style={{ marginTop: 12 }} key={subAttribute.value}>\n                  <div style={subTitleStyle}>\n                    {t('SubAttribute')}-{subAttribute.key}\n                  </div>\n                  {subAttribute.subSelected?.length < 5 ? (\n                    <AttributeList\n                      list={subAttribute.subSelected.map((v: IInputList) => ({\n                        label: v.key,\n                        value: v.value,\n                      }))}\n                      selectedAttribute={\n                        ptx.selectedPointCloudBox?.subAttribute?.[subAttribute.value]\n                      }\n                      num='-'\n                      forbidColor={true}\n                      forbidDefault={true}\n                      attributeChanged={(value) => setSubAttribute(subAttribute.value, value)}\n                      style={{ marginBottom: 12 }}\n                    />\n                  ) : (\n                    <Select\n                      style={{ margin: '0px 21px 17px 16px', width: '87%' }}\n                      value={ptx.selectedPointCloudBox?.subAttribute?.[subAttribute.value]}\n                      placeholder={t('PleaseSelect')}\n                      onChange={(value) => setSubAttribute(subAttribute.value, value)}\n                      allowClear={true}\n                    >\n                      {subAttribute.subSelected.map((sub: any) => (\n                        <Select.Option key={sub.value} value={sub.value}>\n                          {sub.key}\n                        </Select.Option>\n                      ))}\n                    </Select>\n                  )}\n                  <Divider style={{ margin: 0 }} />\n                </div>\n              ),\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nconst renderSegmentTools = [\n  {\n    toolName: 'LassoSelector',\n    commonSvg: LassoSelectorSvg,\n    selectedSvg: LassoSelectorSvgA,\n  },\n  {\n    toolName: 'CircleSelector',\n    commonSvg: CirCleSelectorSvg,\n    selectedSvg: CirCleSelectorSvgA,\n  },\n];\n\nexport const PointCloudSegToolIcon = ({ toolInstance }: { toolInstance: ICustomToolInstance }) => {\n  const { ptSegmentInstance } = useContext(PointCloudContext);\n  const [currentTool, setCurrentTool] = useState('LassoSelector');\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (!ptSegmentInstance) {\n      return;\n    }\n\n    const updateLassoSelector = () => {\n      setCurrentTool('LassoSelector');\n    };\n\n    const updateCircleSelector = () => {\n      setCurrentTool('CircleSelector');\n    };\n\n    ptSegmentInstance.on('LassoSelector', updateLassoSelector);\n    ptSegmentInstance.on('CircleSelector', updateCircleSelector);\n    return () => {\n      ptSegmentInstance.unbind('LassoSelector', updateLassoSelector);\n      ptSegmentInstance.unbind('CircleSelector', updateCircleSelector);\n    };\n  }, [ptSegmentInstance]);\n\n  return (\n    <div className={`${sidebarCls}__level`}>\n      {renderSegmentTools.map((tool) => {\n        const isSelected = currentTool === tool.toolName;\n        return (\n          <span\n            className={`${sidebarCls}__toolOption`}\n            key={tool.toolName}\n            onClick={() => ptSegmentInstance?.emit(tool.toolName)}\n          >\n            <img\n              className={`${sidebarCls}__singleTool`}\n              src={isSelected ? tool?.selectedSvg : tool?.commonSvg}\n            />\n            <span\n              className={classnames({\n                [`${sidebarCls}__toolOption__selected`]: isSelected,\n              })}\n            >\n              {t(tool.toolName)}\n            </span>\n          </span>\n        );\n      })}\n    </div>\n  );\n};\n\nconst PointCloudToolSidebar: React.FC<IProps> = ({\n  stepInfo,\n  toolInstance,\n  imgList,\n  imgIndex,\n  stepList,\n  enableColorPicker,\n}) => {\n  const { updatePointCloudPattern, pointCloudPattern, isPointCloudSegmentationPattern } =\n    useStatus();\n\n  const config = jsonParser(stepInfo.config);\n  const attributeList = config?.attributeList ?? [];\n  const subAttributeList =\n    config?.secondaryAttributeConfigurable === true ? config?.inputList ?? [] : [];\n\n  if (isPointCloudSegmentationPattern) {\n    return (\n      <>\n        <PointCloudSegToolIcon toolInstance={toolInstance} />\n        <AttributeUpdater\n          toolInstance={toolInstance}\n          attributeList={attributeList}\n          subAttributeList={subAttributeList}\n          config={config}\n          stepList={stepList}\n          stepInfo={stepInfo}\n          enableColorPicker={enableColorPicker}\n        />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <ToolIcons\n        toolName={cTool.EPointCloudName.PointCloud}\n        selectedToolName={pointCloudPattern}\n        onChange={(v) => updatePointCloudPattern?.(v)}\n      />\n      <AttributeUpdater\n        toolInstance={toolInstance}\n        attributeList={attributeList}\n        subAttributeList={subAttributeList}\n        config={config}\n        stepList={stepList}\n        stepInfo={stepInfo}\n        enableColorPicker={enableColorPicker}\n      />\n      {config?.trackConfigurable === true && (\n        <>\n          <BoxTrackIDInput />\n          <Divider style={{ margin: 0 }} />\n          <AnnotatedBox imgList={imgList} imgIndex={imgIndex} />\n        </>\n      )}\n    </>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => {\n  const stepInfo = StepUtils.getCurrentStepInfo(state.annotation?.step, state.annotation?.stepList);\n  const toolInstance = state.annotation?.toolInstance;\n  const stepList = state.annotation?.stepList;\n\n  return {\n    stepInfo,\n    toolInstance,\n    imgList: state.annotation.imgList,\n    imgIndex: state.annotation.imgIndex,\n    stepList,\n  };\n};\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(\n  PointCloudToolSidebar,\n);\n","var img = \"data:image/svg+xml,%3csvg id='icon_line' xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='20' height='20'/%3e %3cpath id='%e5%bd%a2%e7%8a%b6%e7%bb%93%e5%90%88' class='cls-2' d='M3.889%2c15.556V13.042l9.153-9.153h2.514V0H11.667V2.514L2.514%2c11.667H0v3.889Z' transform='translate(2.222 2.222)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M50.0005 17.7692L17.7697 50H20.0005H22.0005L22.0005 52V54.2545L54.255 22H52.0005H50.0005V20V17.7692ZM56.255 20L56.6707 19.5843L52.428 15.3417L52.0005 15.7692V20L56.255 20ZM20.0005 56.2545L20.0005 52H15.7697L15.4648 52.3048L19.7075 56.5475L20.0005 56.2545Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.125 1H8.875V5.5H11.125V1Z' fill='%23999999'/%3e%3cpath d='M11.125 14.5H8.875V19H11.125V14.5Z' fill='%23999999'/%3e%3cpath d='M14.5 8.96582V11.2158H19V8.96582H14.5Z' fill='%23999999'/%3e%3cpath d='M1 8.96582L1 11.2158H5.5V8.96582H1Z' fill='%23999999'/%3e%3cpath d='M10 13C11.6569 13 13 11.6569 13 10C13 8.34315 11.6569 7 10 7C8.34315 7 7 8.34315 7 10C7 11.6569 8.34315 13 10 13Z' fill='%23999999'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M39 8H33V62H39V8Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 33H8V39H64V33Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3crect x='28' y='28' width='16' height='16' rx='8' fill='%23666FFF' stroke='white' stroke-width='2'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M55 22H61V50H55V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 55L50 61L22 61L22 55L50 55Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath d='M64 52H52V64H64V52Z' fill='%23666FFF'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M50.0005 17.7692L17.7697 50H20.0005H22.0005L22.0005 52V54.2545L54.255 22H52.0005H50.0005V20V17.7692ZM56.255 20L56.6707 19.5843L52.428 15.3417L52.0005 15.7692V20L56.255 20ZM20.0005 56.2545L20.0005 52H15.7697L15.4648 52.3048L19.7075 56.5475L20.0005 56.2545Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M17 17H15V15H17V17ZM17 13H15V11H17V13ZM17 9H15V7H17V9ZM17 5H15V3H17V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15.4286V15H17V17ZM13.8571 17H12.2857V15H13.8571V17ZM10.7143 17H9.14286V15H10.7143V17ZM7.57143 17H6V15H7.57143V17Z' fill='%23999999'/%3e%3cpath d='M18 2H14V6H18V2Z' fill='%23999999'/%3e%3cpath d='M6 14H2V18H6V14Z' fill='%23999999'/%3e%3cpath d='M18 14H14V18H18V14Z' fill='%23999999'/%3e%3cpath d='M15.2236 3L16.6378 4.41421L4.4144 16.6377L3.00019 15.2234L15.2236 3Z' fill='%23999999'/%3e%3cpath d='M15 15L15 17L5 17L5 15L15 15Z' fill='%23999999'/%3e%3cpath d='M15 6H17V15H15V6Z' fill='%23999999'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M17 5H15.4286V3H17V5ZM13.8571 5H12.2857V3H13.8571V5ZM10.7143 5H9.14286V3H10.7143V5ZM7.57143 5H6V3H7.57143V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15V15H17V17ZM17 13H15V11H17V13ZM17 9H15V7H17V9ZM17 5H15V3H17V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15.4286V15H17V17ZM13.8571 17H12.2857V15H13.8571V17ZM10.7143 17H9.14286V15H10.7143V17ZM7.57143 17H6V15H7.57143V17Z' fill='%23999999'/%3e%3cpath d='M6 2H2V6H6V2Z' fill='%23999999'/%3e%3cpath d='M18 2H14V6H18V2Z' fill='%23999999'/%3e%3cpath d='M6 14H2V18H6V14Z' fill='%23999999'/%3e%3cpath d='M18 14H14V18H18V14Z' fill='%23999999'/%3e%3cpath d='M5 6H3V15H5V6Z' fill='white'/%3e%3cpath d='M3 6H5V15H3V6Z' fill='%23999999'/%3e%3cpath d='M15 3L15 5L5 5L5 3L15 3Z' fill='%23999999'/%3e%3cpath d='M15 15L15 17L5 17L5 15L15 15Z' fill='%23999999'/%3e%3cpath d='M15 6H17V15H15V6Z' fill='%23999999'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M20 8H8V20H20V8Z' fill='%23666FFF'/%3e%3cpath d='M11 22H17V50H11V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M55 22H61V50H55V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 55L50 61L22 61L22 55L50 55Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 11L50 17L22 17L22 11L50 11Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath d='M64 52H52V64H64V52Z' fill='%23666FFF'/%3e%3c/svg%3e\";\n  export default img;","import { AppState } from '@/store';\nimport { BatchUpdateTrackID } from '@/store/annotation/actionCreators';\nimport { composeResultByToolInstance } from '@/store/annotation/reducer';\nimport { ToolInstance } from '@/store/annotation/types';\nimport { LabelBeeContext, useDispatch } from '@/store/ctx';\nimport { AnnotationFileList, IFileItem } from '@/types/data';\nimport { IStepInfo } from '@/types/step';\nimport { Form, InputNumber, Modal, message } from 'antd';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport { PointCloudUtils } from '@labelbee/lb-utils';\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\n\n/**\n * 检查当前数字是否为有效数字\n * @param value\n * @param nonZero 是否包括 0\n * @returns\n */\nexport const isInvalidNumber = (value: any, nonZero = false) => {\n  const intValue = Number(value);\n  if (typeof value === 'undefined' || intValue < 0 || isNaN(intValue)) {\n    return true;\n  }\n  if (nonZero === true && intValue === 0) {\n    return true;\n  }\n  return false;\n};\n\ninterface IProps {\n  id: number;\n  toolInstance: ToolInstance;\n  imgList: AnnotationFileList;\n  imgIndex: number;\n  stepList: IStepInfo[];\n  updateCurrentPolygonList: (value: number) => void;\n}\n\nconst inputStyle = {\n  width: '80px',\n};\n\nconst BatchUpdateModal = ({\n  id,\n  stepList,\n  imgList,\n  imgIndex,\n  toolInstance,\n  updateCurrentPolygonList,\n}: IProps) => {\n  const dispatch = useDispatch();\n  const [visible, setVisible] = useState(false);\n  const [form] = Form.useForm();\n  const { t } = useTranslation();\n\n  const onFinish = (values: any) => {\n    // New ImgList without UpdateData\n    const composeImgList = composeResultByToolInstance({\n      toolInstance,\n      imgList,\n      imgIndex,\n      stepList,\n    });\n    if (values.prevPage > values.nextPage) {\n      return;\n    }\n    const rangeComposeImgList = composeImgList.slice(values.prevPage - 1, values.nextPage);\n    const isExisted = rangeComposeImgList.some((v: IFileItem) => {\n      const newTrackID = parseInt(values.newID, 10);\n      return PointCloudUtils.batchUpdateTrackIDCheck({ newID: newTrackID, result: v.result });\n    });\n    if (isExisted) {\n      message.error(t('DuplicateTrackIDsExist'));\n      return;\n    }\n    dispatch(\n      BatchUpdateTrackID({\n        id,\n        newID: values.newID,\n        rangeIndex: [values.prevPage - 1, values.nextPage - 1],\n        // TODO: Not to submit result, just to compose result.\n        imgList: composeImgList,\n      }),\n    );\n    const newTrackID = parseInt(values.newID, 10);\n    setVisible(false);\n    updateCurrentPolygonList(newTrackID);\n  };\n\n  const onCancel = () => setVisible(false);\n\n  const onOk = () => form.submit();\n  const defaultNumberRules = [{ required: true, message: t('PositiveIntegerCheck') }];\n\n  return (\n    <>\n      <a style={{ color: '#666FFF' }} onClick={() => setVisible(true)}>\n        {t('BatchUpdateText')}\n      </a>\n      <Modal\n        title={t('BatchUpdateTrackID')}\n        visible={visible}\n        onCancel={onCancel}\n        onOk={onOk}\n        wrapClassName='labelbee-custom-modal'\n      >\n        <Form {...layout} form={form} onFinish={onFinish}>\n          <Form.Item name='id' label={t('CurrentBoxTrackIDs')}>\n            {id}\n          </Form.Item>\n\n          <Form.Item name='newID' label={t('TrackIDUnifyAs')} rules={defaultNumberRules}>\n            <InputNumber precision={0} min={1} style={inputStyle} />\n          </Form.Item>\n          <Form.Item label={t('UnifyTrackIDRange')} required={true}>\n            <Form.Item\n              style={{ display: 'inline-block' }}\n              rules={defaultNumberRules}\n              name='prevPage'\n              noStyle={true}\n            >\n              <InputNumber precision={0} min={1} style={inputStyle} />\n            </Form.Item>\n            <span\n              style={{\n                display: 'inline-block',\n                width: '24px',\n                textAlign: 'center',\n              }}\n            >\n              -\n            </span>\n            <Form.Item\n              style={{ display: 'inline-block' }}\n              rules={defaultNumberRules}\n              name='nextPage'\n              noStyle={true}\n            >\n              <InputNumber precision={0} min={1} style={inputStyle} />\n            </Form.Item>\n            <span\n              style={{\n                display: 'inline-block',\n                width: '40x',\n                marginLeft: '10px',\n                textAlign: 'center',\n              }}\n            >\n              {t('Page')}\n            </span>\n          </Form.Item>\n        </Form>\n      </Modal>\n    </>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => {\n  return {\n    toolInstance: state.annotation.toolInstance,\n    imgList: state.annotation.imgList,\n    imgIndex: state.annotation.imgIndex,\n    stepList: state.annotation.stepList,\n  };\n};\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(BatchUpdateModal);\n","var img = \"data:image/svg+xml,%3csvg width='24.000000' height='24.000000' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cmask id='mask1_15945' mask-type='alpha' maskUnits='userSpaceOnUse' x='0.000000' y='0.000000' width='24.000000' height='24.000000'%3e %3crect id='Frame 1312316543 (Background/Mask)' width='24.000000' height='24.000000' fill='%23C4C4C4'/%3e %3c/mask%3e %3cg mask='url(%23mask1_15945)'%3e %3cpath id='Vector 197' d='M6.82031 21.1879C7.30859 20.8242 7.65674 20.4422 7.89697 20.0767C8.56055 19.0654 7.91553 17.8707 7.32861 16.813C6.78955 15.8416 6.34033 14.9126 5.68604 14.0402C3.5 11.1254 3.98877 7.18506 6.86133 4.94373C9.97998 2.51038 13.4199 2.427 15.9365 3.36963C16.5493 3.59912 17.186 3.94055 17.7881 4.3363C20.1196 5.86804 21.0063 8.93555 19.5503 11.3146C17.5649 14.5581 13.4385 15.5564 10.3657 15.641' stroke='%231664FF' stroke-width='1.995000' stroke-linejoin='round' stroke-linecap='round' stroke-dasharray='0 0'/%3e %3c/g%3e %3cg mask='url(%23mask1_15945)'%3e %3cpath id='Vector 198' d='M4.979 17.3167C3.92969 16.8472 3.81592 15.4429 4.79492 14.8404C5.9707 14.1169 7.58301 13.7576 9.354 14.7828C10.374 15.3734 10.4321 16.5123 9.39893 17.0798C8.32764 17.6683 6.73828 18.1039 4.979 17.3167Z' stroke='%231664FF' stroke-width='1.895129' stroke-linejoin='round' stroke-dasharray='0 0'/%3e %3c/g%3e %3cdefs/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='24.000000' height='24.000000' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cmask id='mask1_15950' mask-type='alpha' maskUnits='userSpaceOnUse' x='0.000000' y='0.000000' width='24.000000' height='24.000000'%3e %3crect id='Frame 1312316549 (Background/Mask)' width='24.000000' height='24.000000' fill='%231664FF'/%3e %3c/mask%3e %3cg mask='url(%23mask1_15950)'%3e %3ccircle id='Ellipse 1677' cx='12.000000' cy='12.000000' r='9.000000' stroke='%231664FF' stroke-width='2.000000' stroke-dasharray='0 0'/%3e %3c/g%3e %3cg mask='url(%23mask1_15950)'%3e %3ccircle id='Ellipse 1678' cx='12.000000' cy='12.000000' r='4.000000' fill='%231664FF'/%3e %3c/g%3e %3cdefs/%3e%3c/svg%3e\";\n  export default img;","import { Slider } from 'antd/es';\nimport React from 'react';\nimport widthSvg from '@/assets/toolStyle/icon_border.svg';\nimport colorSvg from '@/assets/toolStyle/icon_borderColor.svg';\nimport borderOpacitySvg from '@/assets/toolStyle/icon_opacityStroke.svg';\nimport fillOpacitySvg from '@/assets/toolStyle/icon_opacityFill.svg';\n\nimport { connect } from 'react-redux';\nimport { UpdateToolStyleConfig } from '@/store/toolStyle/actionCreators';\nimport { store } from '@/index';\nimport { LabelBeeContext } from '@/store/ctx';\nimport { AppState } from '@/store';\nimport { ToolStyleState } from '@/store/toolStyle/types';\nimport { useTranslation } from 'react-i18next';\n\ninterface IProps {\n  toolStyle: ToolStyleState;\n  config: string;\n}\ntype ToolStyleKey = keyof ToolStyleState;\n\nconst getMarks = (type: string, t: any) => {\n  const lineMarks = [\n    { step: 1, value: '1' },\n    { step: 2, value: '2' },\n    { step: 3, value: '3' },\n    { step: 4, value: '4' },\n    { step: 5, value: '5' },\n  ];\n  const colorMarks = [\n    { step: 1, value: 'Blue' },\n    { step: 3, value: 'Cyan' },\n    { step: 5, value: 'Green' },\n    { step: 7, value: 'Yellow' },\n    { step: 9, value: 'Pink' },\n  ];\n  const borderOpacityMarks = [\n    { step: 1, value: '0.2' },\n    { step: 3, value: '0.4' },\n    { step: 5, value: '0.6' },\n    { step: 7, value: '0.8' },\n    { step: 9, value: '1.0' },\n  ];\n\n  const fillOpacityMarks = [\n    { step: 1, value: '0' },\n    { step: 3, value: '0.2' },\n    { step: 5, value: '0.4' },\n    { step: 7, value: '0.6' },\n    { step: 9, value: '0.8' },\n  ];\n  let list: Array<{ step: number; value: string }> = [];\n  const marks: {\n    [a: number]: {\n      style: {};\n      label: any;\n    };\n  } = {};\n  switch (type) {\n    case 'width':\n      list = lineMarks;\n      break;\n    case 'color':\n      list = colorMarks;\n      break;\n    case 'borderOpacity':\n      list = borderOpacityMarks;\n      break;\n    case 'fillOpacity':\n      list = fillOpacityMarks;\n      break;\n  }\n  list.forEach(({ step, value }) => {\n    marks[step] = {\n      style: { color: '#999999', fontSize: '12px' },\n      label: <span>{t(value)}</span>,\n    };\n  });\n  return marks;\n};\n\nconst getTitle = (title: string) => {\n  switch (title) {\n    case 'width':\n      return 'BorderThickness';\n    case 'color':\n      return 'Color';\n    case 'borderOpacity':\n      return 'BorderOpacity';\n    case 'fillOpacity':\n      return 'FillOpacity';\n    default:\n      return '';\n  }\n};\nconst getImage = (title: string) => {\n  switch (title) {\n    case 'width':\n      return widthSvg;\n    case 'color':\n      return colorSvg;\n    case 'borderOpacity':\n      return borderOpacitySvg;\n    case 'fillOpacity':\n      return fillOpacitySvg;\n  }\n};\nconst getDefaultValue = (value: string) => {\n  switch (value) {\n    case 'width':\n      return 2;\n    case 'color':\n      return 1;\n    case 'borderOpacity':\n      return 9;\n    case 'fillOpacity':\n      return 9;\n  }\n};\n\n/**\n * 判断使用那种样式 (slider的step中间为选中和step为选中)\n * @param info TToolStyleConfig\n */\nconst getStyleType = (info: string): boolean => ['width'].includes(info);\n\nconst ToolStyle = (props: IProps) => {\n  const { toolStyle } = props;\n  const { width, color, borderOpacity, fillOpacity } = toolStyle;\n  const styleConfig = {\n    width,\n    color,\n    borderOpacity,\n    fillOpacity,\n  };\n  const { t } = useTranslation();\n\n  // TODO - 样式标准的定义\n  const annotationConfig: any = props.config;\n\n  const changeToolStyle = (obj: { [key: string]: number }) => {\n    store.dispatch(UpdateToolStyleConfig(obj));\n  };\n\n  return (\n    <div className='toolStyle'>\n      {Object.entries(styleConfig).map((item: any[]) => {\n        const key: ToolStyleKey = item[0];\n        // 判断是否需要 color 的使用，现在暂时默认不需要\n        if (annotationConfig?.attributeConfigurable === true && key === 'color') {\n          return null;\n        }\n        return (\n          <div id={`style-${key}`} className='styleSlider' key={key}>\n            <span className='title'>\n              <img src={getImage(key)} className='icon' />\n              {t(getTitle(key))}\n            </span>\n            <span className='slider'>\n              <Slider\n                tipFormatter={null}\n                max={getStyleType(key) ? 5 : 10}\n                min={getStyleType(key) ? 1 : 0}\n                step={getStyleType(key) ? 1 : null}\n                value={(toolStyle[key] ?? getDefaultValue(key)) as number}\n                marks={getMarks(key, t)}\n                onChange={(e: any) => changeToolStyle({ [key]: e })}\n              />\n            </span>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\nconst mapStateToProps = ({ toolStyle, annotation }: AppState) => ({\n  toolStyle,\n  config: annotation.toolInstance.config,\n});\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(ToolStyle);\n","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2%2c .cls-4 %7b fill: none%3b %7d .cls-1 %7b stroke: %23707070%3b %7d .cls-3%2c .cls-5 %7b stroke: none%3b %7d .cls-5 %7b fill: %23ccc%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_border' transform='translate(0 -1.609)'%3e %3cg id='%e7%9f%a9%e5%bd%a2_162' data-name='%e7%9f%a9%e5%bd%a2 162' class='cls-1' transform='translate(0 1.609)'%3e %3crect class='cls-3' width='10' height='10'/%3e %3crect class='cls-4' x='0.5' y='0.5' width='9' height='9'/%3e %3c/g%3e %3cg id='%e8%81%94%e5%90%88_2' data-name='%e8%81%94%e5%90%88 2' class='cls-2' transform='translate(10987 5359.61)'%3e %3cpath class='cls-3' d='M-10982.4-5349v-3.6h-3.6v-.8h3.6v-3.6h.8v3.6h3.6v.8h-3.6v3.6Z'/%3e %3cpath class='cls-5' d='M -10981.6005859375 -5349 L -10982.3994140625 -5349 L -10982.3994140625 -5352.6005859375 L -10986.0009765625 -5352.6005859375 L -10986.0009765625 -5353.400390625 L -10982.3994140625 -5353.400390625 L -10982.3994140625 -5357.0009765625 L -10981.6005859375 -5357.0009765625 L -10981.6005859375 -5353.400390625 L -10977.9990234375 -5353.400390625 L -10977.9990234375 -5352.6005859375 L -10981.6005859375 -5352.6005859375 L -10981.6005859375 -5349 Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='12' height='12' viewBox='0 0 12 12'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23fafafa%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-5 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-6 %7b fill: %23999%3b %7d .cls-7 %7b clip-path: url(%23clip-path-3)%3b %7d .cls-8 %7b clip-path: url(%23clip-path-4)%3b %7d .cls-9 %7b clip-path: url(%23clip-path-5)%3b %7d .cls-10 %7b clip-path: url(%23clip-path-6)%3b %7d .cls-11 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_422' data-name='%e8%b7%af%e5%be%84 422' class='cls-1' d='M0-4H12V-16H0Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_424' data-name='%e8%b7%af%e5%be%84 424' class='cls-1' d='M11.759-9.6a.729.729%2c0%2c0%2c0%2c.729.729.729.729%2c0%2c0%2c0%2c.729-.729.729.729%2c0%2c0%2c0-.729-.729A.729.729%2c0%2c0%2c0%2c11.759-9.6Z' transform='translate(-11.759 10.33)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-3'%3e %3cpath id='%e8%b7%af%e5%be%84_426' data-name='%e8%b7%af%e5%be%84 426' class='cls-1' d='M9.031-12.726a.742.742%2c0%2c0%2c0%2c.742.742.742.742%2c0%2c0%2c0%2c.742-.742.742.742%2c0%2c0%2c0-.742-.742.742.742%2c0%2c0%2c0-.742.742Z' transform='translate(-9.031 13.469)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-4'%3e %3cpath id='%e8%b7%af%e5%be%84_428' data-name='%e8%b7%af%e5%be%84 428' class='cls-1' d='M4.727-12.239a.747.747%2c0%2c0%2c0%2c.747.747.747.747%2c0%2c0%2c0%2c.747-.747.747.747%2c0%2c0%2c0-.747-.747A.747.747%2c0%2c0%2c0%2c4.727-12.239Z' transform='translate(-4.727 12.986)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-5'%3e %3cpath id='%e8%b7%af%e5%be%84_430' data-name='%e8%b7%af%e5%be%84 430' class='cls-1' d='M2.362-8.573a.73.73%2c0%2c0%2c0%2c.365.632.73.73%2c0%2c0%2c0%2c.73%2c0%2c.73.73%2c0%2c0%2c0%2c.365-.632.73.73%2c0%2c0%2c0-.365-.632.73.73%2c0%2c0%2c0-.73%2c0%2c.73.73%2c0%2c0%2c0-.365.632Z' transform='translate(-2.362 9.303)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-6'%3e %3cpath id='%e8%b7%af%e5%be%84_432' data-name='%e8%b7%af%e5%be%84 432' class='cls-2' d='M5.887-4.052H5.873A5.888%2c5.888%2c0%2c0%2c1%2c0-10.018a5.922%2c5.922%2c0%2c0%2c1%2c6-5.931%2c5.853%2c5.853%2c0%2c0%2c1%2c6%2c5.335A3.662%2c3.662%2c0%2c0%2c1%2c9.645-7.28a6.77%2c6.77%2c0%2c0%2c1-2.439.232l-.122%2c0a.538.538%2c0%2c0%2c0-.154.408.342.342%2c0%2c0%2c0%2c.009.1.431.431%2c0%2c0%2c0%2c.046.048%2c1.36%2c1.36%2c0%2c0%2c1%2c.387%2c1.083A1.29%2c1.29%2c0%2c0%2c1%2c7-4.47%2c1.682%2c1.682%2c0%2c0%2c1%2c5.887-4.052ZM6-14.939a4.945%2c4.945%2c0%2c0%2c0-4.989%2c4.922A4.916%2c4.916%2c0%2c0%2c0%2c5.883-5.061c.22%2c0%2c.477-.063.477-.355%2c0-.274-.039-.315-.109-.388a1.093%2c1.093%2c0%2c0%2c1-.333-.841A1.319%2c1.319%2c0%2c0%2c1%2c7.077-8.064l.168%2c0A6.391%2c6.391%2c0%2c0%2c0%2c9.28-8.223a2.677%2c2.677%2c0%2c0%2c0%2c1.707-2.391A4.83%2c4.83%2c0%2c0%2c0%2c6-14.939Z' transform='translate(0 15.948)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_borderColor' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_670' data-name='%e7%bb%84 670' class='cls-3' transform='translate(0 -16)'%3e %3cpath id='%e8%b7%af%e5%be%84_421' data-name='%e8%b7%af%e5%be%84 421' class='cls-4' d='M-5-21H14.5V-1.5H-5Z' transform='translate(1.25 17.25)'/%3e %3c/g%3e %3cg id='%e7%bb%84_671' data-name='%e7%bb%84 671' class='cls-5' transform='translate(8.121 -11.61)'%3e %3cpath id='%e8%b7%af%e5%be%84_423' data-name='%e8%b7%af%e5%be%84 423' class='cls-6' d='M6.759-15.33H14.9v8.145H6.759Z' transform='translate(-10.103 11.986)'/%3e %3c/g%3e %3cg id='%e7%bb%84_672' data-name='%e7%bb%84 672' class='cls-7' transform='translate(6.765 -13.853)'%3e %3cpath id='%e8%b7%af%e5%be%84_425' data-name='%e8%b7%af%e5%be%84 425' class='cls-6' d='M4.031-18.469h8.291v8.291H4.031Z' transform='translate(-7.434 15.066)'/%3e %3c/g%3e %3cg id='%e7%bb%84_673' data-name='%e7%bb%84 673' class='cls-8' transform='translate(3.702 -13.515)'%3e %3cpath id='%e8%b7%af%e5%be%84_427' data-name='%e8%b7%af%e5%be%84 427' class='cls-6' d='M-.273-17.986H8.073V-9.64H-.273Z' transform='translate(-3.152 14.56)'/%3e %3c/g%3e %3cg id='%e7%bb%84_674' data-name='%e7%bb%84 674' class='cls-9' transform='translate(2.723 -10.881)'%3e %3cpath id='%e8%b7%af%e5%be%84_429' data-name='%e8%b7%af%e5%be%84 429' class='cls-6' d='M-2.638-14.3H5.512v8.149H-2.638Z' transform='translate(-0.707 10.958)'/%3e %3c/g%3e %3cg id='%e7%bb%84_675' data-name='%e7%bb%84 675' class='cls-10' transform='translate(0 -15.948)'%3e %3cpath id='%e8%b7%af%e5%be%84_431' data-name='%e8%b7%af%e5%be%84 431' class='cls-11' d='M-5-20.948H14.5V-1.568H-5Z' transform='translate(1.25 17.207)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='10.001' height='10.001' viewBox='0 0 10.001 10.001'%3e%3cg transform='translate(1.001 1)'%3e%3cg transform='translate(0 -1)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(0 7.334)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(9 0.334) rotate(90)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(0.666 0.334) rotate(90)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(-1 -1)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(-1 7.333)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(7.333 -1)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(7.333 7.333)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='9.999' height='9.999' viewBox='0 0 9.999 9.999'%3e%3cg transform='translate(0 0)'%3e%3crect width='3.333' height='3.333' transform='translate(0 0)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(0 6.667)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(6.666 0)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(3.333 3.333)' fill='%23707070'/%3e%3crect width='3.333' height='3.333' transform='translate(6.666 6.667)' fill='%23ccc'/%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","import React, { useState } from 'react';\n\nimport { Slider } from 'antd';\nimport penActivate from '@/assets/attributeIcon/pen_a.svg';\nimport pen from '@/assets/attributeIcon/pen.svg';\nimport eraserActivate from '@/assets/attributeIcon/eraser_a.svg';\nimport eraser from '@/assets/attributeIcon/eraser.svg';\nimport { getClassName } from '@/utils/dom';\nimport { AppState } from '@/store';\nimport { EScribblePattern } from '@/data/enums/ToolType';\nimport { useSelector } from '@/store/ctx';\n\ninterface IProps {\n  // toolInstance?: GraphToolInstance;\n  // stepInfo?: IStepInfo;\n  onChange: (tool: number, values: number) => void;\n}\n\nconst ScribbleSidebar: React.FC<IProps> = (props) => {\n  const { onChange } = props;\n  // 查看时候默认值\n  const toolInstance = useSelector((state: AppState) => state.annotation.toolInstance);\n  const [silderValue, setSilderValue] = useState(20);\n  const [selectTool, setSelectTool] = useState(EScribblePattern.Scribble);\n\n  const changeValue = () => {\n    onChange(selectTool, silderValue);\n  };\n\n  return (\n    <div className={getClassName('scribble')}>\n      <div className={getClassName('scribble', 'select')}>\n        <img\n          src={selectTool === EScribblePattern.Scribble ? penActivate : pen}\n          onClick={() => {\n            setSelectTool(EScribblePattern.Scribble);\n            toolInstance?.setPattern(EScribblePattern.Scribble);\n            changeValue();\n          }}\n        />\n        <img\n          src={selectTool === EScribblePattern.Erase ? eraserActivate : eraser}\n          onClick={() => {\n            setSelectTool(EScribblePattern.Erase);\n            toolInstance?.setPattern(EScribblePattern.Erase);\n\n            changeValue();\n          }}\n        />\n      </div>\n      <div className={getClassName('scribble', 'silder')}>\n        <span className={getClassName('scribble', 'circle')} />\n        <Slider\n          onChange={(v: number) => {\n            setSilderValue(v);\n            changeValue();\n            toolInstance?.setPenSize(v);\n          }}\n          min={1}\n          max={50}\n          style={{ width: '60%' }}\n          value={silderValue}\n        />\n        <span\n          className={getClassName('scribble', 'circle')}\n          style={{ width: '10px', height: '10px' }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default ScribbleSidebar;\n","var img = \"data:image/svg+xml,%3csvg width='12' height='13' viewBox='0 0 12 13' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='9.07153' y='1' width='3' height='10' rx='1' transform='rotate(45 9.07153 1)' fill='%236272FB' /%3e %3cpath d='M1.06068 11.182L1.73311 8.67247L3.57023 10.5096L1.06068 11.182Z' fill='%236272FB' /%3e %3ccircle cx='11.0002' cy='1' r='1' fill='%236272FB' /%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='12' height='13' viewBox='0 0 12 13' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='9.07153' y='1' width='3' height='10' rx='1' transform='rotate(45 9.07153 1)' fill='%23BAB8B8' /%3e %3cpath d='M1.06068 11.182L1.73311 8.67247L3.57023 10.5096L1.06068 11.182Z' fill='%23BAB8B8' /%3e %3ccircle cx='11.0002' cy='1' r='1' fill='%23BAB8B8' /%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='10' height='10' viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='6.34875' y='0.353553' width='4.5' height='8.47848' rx='2.25' transform='rotate(45 6.34875 0.353553)' fill='%236272FB' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='1.74547' y1='4.60767' x2='4.92401' y2='8.46733' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='2.00061' y1='9.75' x2='10.0006' y2='9.75' stroke='%236272FB' stroke-width='0.5' /%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='10' height='10' viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='6.34875' y='0.353553' width='4.5' height='8.47848' rx='2.25' transform='rotate(45 6.34875 0.353553)' fill='%23E6E6E6' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='1.74547' y1='4.60767' x2='4.92401' y2='8.46733' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='2.00061' y1='9.75' x2='10.0006' y2='9.75' stroke='%23BAB8B8' stroke-width='0.5' /%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cg clip-path='url(%23clip0_98103_43035)'%3e %3cpath d='M0.593516 3.68361H8.23035C8.49598 3.68361 8.76161 3.35158 8.76161 3.01954C8.76161 2.6211 8.56239 2.35547 8.23035 2.35547H0.593516C0.327888 2.35547 0.0622578 2.6211 0.0622578 3.01954C0.0622578 3.35158 0.26148 3.68361 0.593516 3.68361ZM7.96472 5.67583H0.726331C0.327888 5.67583 -0.00415039 6.00787 -0.00415039 6.3399C-0.00415039 6.73835 0.327888 7.00398 0.726331 7.00398H7.96472C8.36317 7.00398 8.6952 6.73835 8.6952 6.3399C8.6952 5.94146 8.36317 5.67583 7.96472 5.67583ZM7.96472 10.3243C8.36317 10.3243 8.6952 9.9923 8.6952 9.66027C8.6952 9.26182 8.36317 8.9962 7.96472 8.9962H0.726331C0.327888 8.9962 -0.00415039 9.26182 -0.00415039 9.66027C-0.00415039 10.0587 0.327888 10.3243 0.726331 10.3243H7.96472ZM7.89831 12.3166H0.859145C0.394294 12.3166 0.0622578 12.5822 0.0622578 12.9806C0.0622578 13.3791 0.394294 13.6447 0.859145 13.6447H7.89831C8.36317 13.6447 8.6952 13.3791 8.6952 12.9806C8.6952 12.5822 8.36317 12.3166 7.89831 12.3166ZM10.8866 12.715C11.1523 12.9806 11.6171 12.9806 11.8828 12.715L15.8008 8.46494C16.0664 8.19931 16.0664 7.66805 15.8008 7.40242L11.8828 3.15236C11.6171 2.88673 11.1523 2.88673 10.8866 3.15236C10.621 3.41799 10.621 3.94924 10.8866 4.21487L14.3398 7.93368L10.8866 11.6525C10.621 11.9845 10.621 12.4494 10.8866 12.715Z' fill='%23AAAAAA' /%3e %3c/g%3e %3cdefs%3e %3cclipPath id='clip0_98103_43035'%3e %3crect width='16' height='16' fill='white' transform='matrix(-1 0 0 1 16 0)' /%3e %3c/clipPath%3e %3c/defs%3e%3c/svg%3e\";\n  export default img;","import React, { useState, useEffect } from 'react';\nimport { prefix } from '@/constant';\nimport { Button, Empty } from 'antd';\nimport AnswerSort from './components/answerSort';\nimport { AppState } from '@/store';\nimport { connect } from 'react-redux';\nimport { isNumber, isObject } from 'lodash';\nimport AnswerList from './components/answerList';\nimport { LabelBeeContext } from '@/store/ctx';\nimport { jsonParser } from '@/utils';\nimport { getStepConfig } from '@/store/annotation/reducer';\nimport { useCustomToolInstance } from '@/hooks/annotation';\nimport { PageForward } from '@/store/annotation/actionCreators';\nimport { EToolName, cKeyCode } from '@labelbee/lb-annotation';\nimport {\n  IWaitAnswerSort,\n  IAnswerSort,\n  ILLMBoxResult,\n  ILLMToolConfig,\n  IAnswerList,\n  IndicatorScore,\n  IndicatorDetermine,\n  ITextList,\n} from '@/components/LLMToolView/types';\nimport { useTranslation } from 'react-i18next';\nimport { formatSort, getCurrentResultFromResultList } from '../utils/data';\nimport emptySvg from '@/assets/annotation/LLMTool/empty.svg';\nimport TextInputBox from './components/textInputBox';\n\ninterface IProps {\n  annotation?: any;\n  dispatch: any;\n  checkMode?: boolean;\n}\n\ninterface IConfigUpdate {\n  order: number;\n  value: number | { key: string; value?: number | boolean };\n  key?: string;\n}\nconst EKeyCode = cKeyCode.default;\nconst sidebarCls = `${prefix}-sidebar`;\n\nconst LLMToolSidebar: React.FC<IProps> = (props) => {\n  const { annotation, dispatch, checkMode } = props;\n  const { imgIndex, imgList, stepList, step, skipBeforePageTurning } = annotation;\n  const { t } = useTranslation();\n  const currentData = imgList[imgIndex] ?? {};\n  const basicInfo = jsonParser(currentData?.result);\n  const { toolInstanceRef } = useCustomToolInstance({ basicInfo });\n  const [LLMConfig, setLLMConfig] = useState<ILLMToolConfig>({});\n  const [answerList, setAnswerList] = useState<IAnswerList[]>([]);\n  const [text, setText] = useState<ITextList[] | undefined>(undefined);\n  const [sortList, setSortList] = useState<IAnswerSort[][]>([]);\n  const [waitSortList, setWaitSortList] = useState<IWaitAnswerSort[]>([]);\n\n  useEffect(() => {\n    if (stepList && step) {\n      const LLMStepConfig = getStepConfig(stepList, step)?.config;\n      setLLMConfig(jsonParser(LLMStepConfig));\n    }\n  }, [stepList, step]);\n\n  useEffect(() => {\n    if (!currentData) {\n      return;\n    }\n\n    const result: ILLMBoxResult = getCurrentResultFromResultList(currentData?.result);\n    let qaData = result?.answerList ? result : currentData?.questionList;\n    if (qaData?.answerList) {\n      getWaitSortList(qaData.answerList);\n      setAnswerList(qaData.answerList || []);\n    }\n\n    setText(result?.textAttribute);\n  }, [imgIndex, currentData]);\n\n  useEffect(() => {\n    toolInstanceRef.current.exportData = () => {\n      const sort = formatSort(sortList);\n      const result = [{ answerList, sort, textAttribute: text, id: currentData?.id }];\n      return [result, {}];\n    };\n    const sort = formatSort(sortList);\n    const result = {\n      answerList,\n      sort,\n      textAttribute: text,\n      id: currentData?.id,\n      toolName: EToolName.LLM,\n    };\n\n    toolInstanceRef.current.currentPageResult = result;\n  }, [answerList, sortList, text]);\n\n  useEffect(() => {\n    window.addEventListener('keydown', onKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n    };\n  }, []);\n\n  const onKeyDown = (e: KeyboardEvent) => {\n    if (e.ctrlKey && e.keyCode === EKeyCode.Enter) {\n      if (skipBeforePageTurning) {\n        skipBeforePageTurning(() => dispatch(PageForward()));\n        return;\n      }\n      dispatch(PageForward());\n    }\n  };\n\n  const getWaitSortList = (answerList: IAnswerList[]) => {\n    let waitSorts: IWaitAnswerSort[] = [];\n    let newSort: IAnswerSort[][] = [];\n    if (answerList?.length > 0) {\n      // 将[[1],[2,3]]格式转成[[{ title: 1, id: 1 }],[{...},{...}]]\n      const result = getCurrentResultFromResultList(currentData?.result);\n      const currentResult = result?.length > 0 ? result[0] : result;\n      if (currentResult?.sort?.length > 0) {\n        newSort = currentResult.sort.reduce((i: IWaitAnswerSort[][], key: number[]) => {\n          let tagColumn = [{ title: key[0], id: key[0] }];\n          if (key.length > 1) {\n            tagColumn = key.map((item: number) => ({ title: item, id: item }));\n          }\n          return [...i, tagColumn];\n        }, []);\n      }\n      // 待排序容器需要过滤已排序容器存在的答案\n      answerList.forEach((i: IAnswerList) => {\n        const existed = newSort.some((sortItem: IAnswerSort[]) => {\n          if (sortItem.length > 1) {\n            return sortItem.some((v: IAnswerSort) => v.id === i.order);\n          }\n          return sortItem[0].id === i.order;\n        });\n        if (existed) {\n          return;\n        }\n        waitSorts.push({ title: i.order, id: i.order });\n      });\n    }\n    setSortList(newSort);\n    setWaitSortList(waitSorts);\n  };\n\n  const updateValue = ({ order, value, key }: IConfigUpdate) => {\n    const newList = answerList?.map((i: IAnswerList) => {\n      if (i?.order === order) {\n        if (isNumber(value)) {\n          return { ...i, score: value };\n        }\n        if (isObject(value) && key) {\n          const obj = { [value?.key]: value.value };\n          // @ts-ignore\n          const originData = i[key] ?? {};\n          return { ...i, [key]: { ...originData, ...obj } };\n        }\n      }\n      return i;\n    });\n\n    setAnswerList(newList);\n  };\n\n  const isNoConfig = () => {\n    const { indicatorScore = [], indicatorDetermine = [], text = [], enableSort } = LLMConfig;\n    const hasIndicatorScore =\n      indicatorScore?.filter((i: IndicatorScore) => i.label && i.value && i.score)?.length > 0;\n\n    const hasIndicatorDetermine =\n      indicatorDetermine?.filter((i: IndicatorDetermine) => i.label && i.value)?.length > 0;\n    const hasText = text?.length > 0;\n    const noConfig = !(hasIndicatorScore || hasIndicatorDetermine || hasText || enableSort);\n    return noConfig;\n  };\n\n  if (isNoConfig()) {\n    return (\n      <div className={`${sidebarCls}`}>\n        <div\n          className={`${sidebarCls}__content`}\n          style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}\n        >\n          <Empty\n            description={<span style={{ color: '#ccc' }}>{t('NoScoringScale')}</span>}\n            imageStyle={{\n              width: 200,\n              height: 200,\n            }}\n            image={<img src={emptySvg} />}\n          />\n        </div>\n      </div>\n    );\n  }\n  const { indicatorScore = [], indicatorDetermine = [], enableSort } = LLMConfig;\n  const showAnwerList =\n    answerList.length > 0 && (indicatorDetermine?.length > 0 || indicatorScore?.length > 0);\n\n  return (\n    <div className={`${sidebarCls}`}>\n      <div className={`${sidebarCls}__content`}>\n        {enableSort && (\n          <AnswerSort\n            waitSortList={waitSortList}\n            sortList={sortList}\n            setSortList={setSortList}\n            checkMode={checkMode}\n          />\n        )}\n        {showAnwerList && (\n          <AnswerList\n            list={answerList}\n            LLMConfig={LLMConfig}\n            updateValue={updateValue}\n            checkMode={checkMode}\n          />\n        )}\n\n        {LLMConfig?.text && (\n          <div style={{ padding: '0px 16px', marginTop: '16px' }}>\n            <TextInputBox\n              textAttribute={text || []}\n              LLMConfig={LLMConfig}\n              setText={setText}\n              checkMode={checkMode}\n            />\n          </div>\n        )}\n      </div>\n      <div style={{ margin: '24px 16px', display: 'flex' }}>\n        {imgList?.length - 1 !== imgIndex && (\n          <Button\n            type='primary'\n            style={{ marginLeft: 'auto' }}\n            onClick={() => {\n              if (skipBeforePageTurning) {\n                skipBeforePageTurning(() => dispatch(PageForward()));\n                return;\n              }\n              dispatch(PageForward());\n            }}\n            disabled={checkMode}\n          >\n            {t('Save')}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\nconst mapStateToProps = (state: AppState) => {\n  return {\n    annotation: state.annotation,\n  };\n};\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(LLMToolSidebar);\n","/*\n * @file LLM tool answer sort\n * @Author: lixinghua lixinghua@sensetime.com\n * @Date: 2023-04-10\n */\nimport React, { useReducer, useEffect, useState, useContext } from 'react';\nimport { prefix } from '@/constant';\nimport { Tag } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { LeftOutlined } from '@ant-design/icons';\nimport { classnames } from '@/utils';\nimport { cloneDeep, isArray } from 'lodash';\nimport { IAnswerSort, IWaitAnswerSort } from '@/components/LLMToolView/types';\nimport { MathUtils } from '@labelbee/lb-annotation';\nimport { LLMContext } from '@/store/ctx';\n\ninterface IProps {\n  setSortList: (value: IAnswerSort[][]) => void;\n  sortList: IAnswerSort[][];\n  waitSortList: IWaitAnswerSort[];\n  checkMode?: boolean;\n}\nenum EDirection {\n  Top = 'Top',\n  Right = 'Right',\n  Bottom = 'Bottom',\n  Left = 'Left',\n}\n\ninterface IPoint {\n  x: number;\n  y: number;\n}\n\ninterface ITagPoints {\n  tl: IPoint; // Top Left Point;\n  tr: IPoint; // Top Right Point;\n  br: IPoint; // Bottom Right Point;\n  bl: IPoint; // Bottom Left Point;\n}\n\nconst contentBoxCls = `${prefix}-LLMSidebar-contentBox`;\n\nconst Navigation = () => {\n  const { t } = useTranslation();\n  return (\n    <div className={`${contentBoxCls}__navigation`}>\n      <span>{t('Best')}</span>\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <LeftOutlined />\n        <div style={{ height: 0, border: '1px solid #999999', width: '450px' }} />\n      </div>\n      <span>{t('Worst')}</span>\n    </div>\n  );\n};\n\nconst AnswerSort = (props: IProps) => {\n  const [, forceUpdate] = useReducer((x) => x + 1, 0);\n  const { sortList, setSortList, waitSortList, checkMode } = props;\n  const { setHoverKey } = useContext(LLMContext);\n  const isDisableAll = checkMode;\n  const [activateDirection, setActivateDirection] = useState<EDirection | undefined>(undefined);\n  const [targetTagKey, setTargetTagKey] = useState<number | undefined>(undefined);\n  const [answers, setAnswers] = useState<IWaitAnswerSort[]>([]);\n  const { t } = useTranslation();\n  useEffect(() => {\n    setAnswers(waitSortList);\n  }, [waitSortList]);\n\n  useEffect(() => {\n    formatSortList();\n  }, [JSON.stringify(sortList)]);\n\n  const singleAnswerItem = ({\n    item,\n    operation,\n    id,\n  }: {\n    item: IWaitAnswerSort;\n    id: string;\n    operation: any;\n  }) => {\n    const borderStyle = { [`border${activateDirection}`]: '2px solid #8C9AFF' };\n\n    return (\n      <div\n        key={`${item?.id}`}\n        color='#EBEBEB'\n        id={id}\n        className={classnames({\n          [`${contentBoxCls}__answerTag`]: true,\n        })}\n        style={targetTagKey === item?.id && activateDirection ? borderStyle : undefined}\n        draggable={isDisableAll ? '' : 'true'}\n        onMouseMove={() => {\n          setHoverKey(item.id);\n        }}\n        onMouseLeave={() => {\n          setHoverKey(-1);\n        }}\n        {...operation}\n      >\n        {item?.title}\n      </div>\n    );\n  };\n\n  const middlePoint = (P1: IPoint, P2: IPoint) => {\n    return { x: (P1.x + P2.x) / 2, y: (P1.y + P2.y) / 2 };\n  };\n\n  const getMinDistanceBySideCenterPoint = (\n    sourceTagCenterPoint: IPoint,\n    tagVertexPoint: ITagPoints,\n  ) => {\n    // top\n    const toTopDistance = MathUtils.getLineLength(\n      sourceTagCenterPoint,\n      middlePoint(tagVertexPoint.tl, tagVertexPoint.tr),\n    );\n    // right\n    const toRightDistance = MathUtils.getLineLength(\n      sourceTagCenterPoint,\n      middlePoint(tagVertexPoint.tr, tagVertexPoint.tr),\n    );\n    // bottom\n    const toBottompDistance = MathUtils.getLineLength(\n      sourceTagCenterPoint,\n      middlePoint(tagVertexPoint.bl, tagVertexPoint.br),\n    );\n    // left\n    const toLeftDistance = MathUtils.getLineLength(\n      sourceTagCenterPoint,\n      middlePoint(tagVertexPoint.tl, tagVertexPoint.bl),\n    );\n\n    const minDistance = Math.min(toTopDistance, toRightDistance, toBottompDistance, toLeftDistance);\n    return { minDistance, toTopDistance, toRightDistance, toBottompDistance, toLeftDistance };\n  };\n\n  const setActivateDirectionBycompareDistance = (\n    sourceTagCenterPoint: IPoint,\n    tagVertexPoint: ITagPoints,\n  ) => {\n    const { minDistance, toTopDistance, toRightDistance, toBottompDistance, toLeftDistance } =\n      getMinDistanceBySideCenterPoint(sourceTagCenterPoint, tagVertexPoint);\n\n    switch (minDistance) {\n      case toTopDistance:\n        setActivateDirection(EDirection.Top);\n        break;\n      case toRightDistance:\n        setActivateDirection(EDirection.Right);\n        break;\n      case toBottompDistance:\n        setActivateDirection(EDirection.Bottom);\n        break;\n      case toLeftDistance:\n        setActivateDirection(EDirection.Left);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const formatSortList = () => {\n    const sortBox = document.getElementById('sortBox');\n\n    if (sortBox?.childNodes) {\n      let newSortList: IAnswerSort[][] = [];\n      sortBox.childNodes.forEach((item: any, nodeIndex: number) => {\n        let itemBox = item;\n        if (item?.childNodes?.length > 1) {\n          itemBox = item.childNodes[0];\n        }\n\n        const tagClientRectValues = itemBox.getBoundingClientRect() || {};\n        const { bottom, top, left, right, width, height, x, y }: any = tagClientRectValues;\n        const tagCenterPoint = { x: left + width / 2, y: top + height / 2 };\n        const tagVertexPoint = {\n          tl: { x, y },\n          tr: { x: right, y: top },\n          br: { x: right, y: bottom },\n          bl: { x: left, y: bottom },\n        };\n\n        const newList = sortList[nodeIndex].reduce((list: IAnswerSort[], key: IAnswerSort) => {\n          let tagColumn = key;\n          if (isArray(key) && key.length > 1) {\n            tagColumn = key[0];\n          }\n          tagColumn = { ...tagColumn, tagCenterPoint, tagVertexPoint };\n          return [...list, tagColumn];\n        }, []);\n        newSortList.push(newList);\n      });\n      setSortList(newSortList);\n    }\n  };\n\n  const onDrag = (e: any) => {\n    const centerX = e.pageX;\n    const centerY = e.pageY;\n    const sourceTagCenterPoint = { x: centerX, y: centerY };\n    let filterValue = sortList;\n\n    if (filterValue?.length > 0) {\n      // 获取距离最近的单个tag\n      let tagNearest = filterValue[0];\n      for (let index = 0; index < filterValue.length; index++) {\n        if (index > 0) {\n          // 当前点的中心坐标\n          const tagCenterPoint = filterValue[index][0]?.tagCenterPoint;\n          // 距离最近的中心坐标\n          const lastTagCenterPoint = tagNearest[0]?.tagCenterPoint;\n          // 当前点和移动点的距离\n          const centerPointDistance = MathUtils.getLineLength(sourceTagCenterPoint, tagCenterPoint);\n          // 上一个最近点的距离\n          const lastCenterPointDistance = MathUtils.getLineLength(\n            sourceTagCenterPoint,\n            lastTagCenterPoint,\n          );\n          if (centerPointDistance < lastCenterPointDistance) {\n            tagNearest = sortList[index];\n          }\n        }\n      }\n      if (!sourceTagCenterPoint.x || !sourceTagCenterPoint.y) {\n        return;\n      }\n      // 不以拖动的tag做参照\n      if (getAttributeIndex(e.target.id) === tagNearest[0]?.id) {\n        setTargetTagKey(undefined);\n        return;\n      }\n      setTargetTagKey(tagNearest[0]?.id);\n      if (tagNearest[0]?.tagVertexPoint && sourceTagCenterPoint) {\n        setActivateDirectionBycompareDistance(sourceTagCenterPoint, tagNearest[0]?.tagVertexPoint);\n      }\n    }\n  };\n\n  const onDragEnd = (e: any) => {\n    const { target } = e;\n    let key = -1;\n    let oldIndex = -1;\n    let tagIndex = -1;\n    let newList: IAnswerSort[] = [];\n    let formatList = cloneDeep(sortList);\n\n    tagIndex = formatList.findIndex((i: IAnswerSort[]) => i[0].id === Number(targetTagKey));\n    if (target?.parentNode?.parentNode.id === 'sortBox') {\n      key = getAttributeIndex(target.parentNode.id); // 父级\n      const curKey = getAttributeIndex(target.id); // 拖动tag\n      newList = formatList[~~key].filter((i: IAnswerSort) => i.id === ~~curKey);\n      const removeIndex = formatList[~~key].findIndex((i: IAnswerSort) => i.id === ~~curKey);\n      formatList[~~key].splice(removeIndex, 1);\n    }\n    if (target?.parentNode.id === 'sortBox') {\n      if (!targetTagKey) {\n        return;\n      }\n      key = getAttributeIndex(target.id);\n      oldIndex = formatList.findIndex((i: IAnswerSort[]) => i[0].id === key);\n      const newAnswerValue = formatList.find((i: IAnswerSort[]) => i[0].id === key);\n      if (newAnswerValue) {\n        newList = newAnswerValue;\n      }\n      formatList.splice(oldIndex, 1);\n      tagIndex = formatList.findIndex((i: IAnswerSort[]) => i[0].id === ~~targetTagKey);\n    }\n    if (target.parentNode.id === 'waitBox') {\n      key = getAttributeIndex(target.id);\n      oldIndex = answers.findIndex((i: IWaitAnswerSort) => i.id === key);\n      newList = [answers[oldIndex]];\n      answers.splice(oldIndex, 1);\n    }\n    switch (activateDirection) {\n      case EDirection.Left:\n        formatList.splice(tagIndex, 0, newList);\n        break;\n      case EDirection.Right:\n        formatList.splice(tagIndex + 1, 0, newList);\n        break;\n      case EDirection.Top:\n      case EDirection.Bottom:\n        formatList[tagIndex].push(...newList);\n        break;\n      default:\n        formatList.push(newList);\n        break;\n    }\n\n    setSortList(formatList);\n    setActivateDirection(undefined);\n    forceUpdate();\n  };\n\n  const getAttributeIndex = (str: string) => {\n    const index = str.indexOf('-');\n    return Number(str.substring(index + 1, str.length));\n  };\n\n  return (\n    <div style={{ padding: '0px 16px', marginBottom: '16px' }}>\n      <div className={`${contentBoxCls}__title`}>\n        <span>{t('RankingQualityOfAnswers')}</span>\n        {answers.length > 0 && (\n          <Tag color='#FFD9D9' style={{ color: '#F26549', marginLeft: 8 }}>\n            {t('Unfinished')}\n          </Tag>\n        )}\n      </div>\n      <div>\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n          <span style={{ marginRight: '16px' }}>{t('ToBeSorted')}</span>\n          <div id='waitBox' className={`${contentBoxCls}__answerBox`}>\n            {answers.length > 0 &&\n              answers.map((i: IWaitAnswerSort) =>\n                singleAnswerItem({\n                  item: i,\n                  id: `waitBoxItem-${i?.id}`,\n                  operation: {\n                    onDrag: onDrag,\n                    onDragEnd: onDragEnd,\n                  },\n                }),\n              )}\n          </div>\n        </div>\n        <Navigation />\n        <div id='sortBox' className={`${contentBoxCls}__answerBox`}>\n          {sortList.map((i: IAnswerSort[], index: number) => {\n            if (i.length > 1) {\n              return (\n                <div key={`item-${index}`} id={`sortBox-${index}`}>\n                  {i.map((item: IAnswerSort) =>\n                    singleAnswerItem({\n                      item,\n                      id: `sortBoxItem-${item?.id}`,\n                      operation: {\n                        onDrag: onDrag,\n                        onDragEnd: onDragEnd,\n                      },\n                    }),\n                  )}\n                </div>\n              );\n            }\n            return singleAnswerItem({\n              item: i[0],\n              id: `sortBox-${i[0]?.id}`,\n              operation: {\n                onDrag: onDrag,\n                onDragEnd: onDragEnd,\n              },\n            });\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AnswerSort;\n","/*\n * @file LLM tool score\n * @Author: lixinghua lixinghua@sensetime.com\n * @Date: 2023-04-10\n */\nimport React, { useContext } from 'react';\nimport { prefix } from '@/constant';\nimport { Tag, Collapse, Popover } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport ScoreGroupButton from '../scoreGroupButton';\nimport DetermineGroup from '../determineGroup';\nimport { LLMContext } from '@/store/ctx';\nimport { classnames } from '@/utils';\nimport { InfoCircleOutlined } from '@ant-design/icons';\nimport { expandIconFuc } from '@/views/MainView/sidebar/TagSidebar';\nimport {\n  IndicatorScore,\n  IndicatorDetermine,\n  ILLMToolConfig,\n  IAnswerList,\n} from '@/components/LLMToolView/types';\nimport { isBoolean } from 'lodash';\nimport LongText from '@/components/longText';\n\ninterface IProps {\n  list?: IAnswerList[];\n  checkMode?: boolean;\n  LLMConfig?: ILLMToolConfig;\n  updateValue: ({\n    order,\n    value,\n    key,\n  }: {\n    order: number;\n    value: number | { key: string; value: number | boolean };\n    key?: string;\n  }) => void;\n}\n\nenum ETagType {\n  Finish,\n  UnFinish,\n  Default,\n}\n\nconst { Panel } = Collapse;\nconst LLMSidebarCls = `${prefix}-LLMSidebar`;\nconst AnswerList = (props: IProps) => {\n  const { list = [], LLMConfig = {}, updateValue, checkMode } = props;\n\n  const { hoverKey, setHoverKey } = useContext(LLMContext);\n  const { t } = useTranslation();\n  const isDisableAll = checkMode;\n\n  const getFinishStatus = (i: IAnswerList) => {\n    const { indicatorScore = [], indicatorDetermine = [] } = LLMConfig;\n\n    let finishStatus = ETagType.Default;\n    if (indicatorScore?.length > 0) {\n      const scoreUnFinish = indicatorScore.some(\n        (item: IndicatorScore) =>\n          !i?.indicatorScore?.[item.value] || i?.indicatorScore?.[item.value] > Number(item?.score),\n      );\n      if (scoreUnFinish) {\n        finishStatus = ETagType.UnFinish;\n        return finishStatus;\n      }\n      finishStatus = ETagType.Finish;\n    }\n    if (indicatorDetermine?.length > 0) {\n      const determineUnFinish = indicatorDetermine.some((item: IndicatorDetermine) => {\n        const determineResult = i?.indicatorDetermine?.[item.value];\n        return !isBoolean(determineResult);\n      });\n      if (determineUnFinish) {\n        finishStatus = ETagType.UnFinish;\n        return finishStatus;\n      }\n      finishStatus = ETagType.Finish;\n    }\n\n    return finishStatus;\n  };\n\n  const getTagStyle = (item: IAnswerList) => {\n    const tagStatus = getFinishStatus(item);\n\n    let tagText = item.order;\n    switch (tagStatus) {\n      case ETagType.Finish:\n        return {\n          backgroundColor: '#D9FFDF',\n          fontColor: '#36B34A',\n          tagText: `${tagText} ${t('Finished')}`,\n          tagStatus,\n        };\n      case ETagType.UnFinish:\n        return {\n          backgroundColor: '#FFD9D9',\n          fontColor: '#F26549',\n          tagText: `${tagText} ${t('Unfinished')}`,\n          tagStatus,\n        };\n\n      default:\n        return {\n          backgroundColor: '#EBEBEB',\n          fontColor: '#999999',\n          tagText,\n          tagStatus,\n        };\n    }\n  };\n\n  return (\n    <Collapse\n      bordered={false}\n      expandIcon={expandIconFuc}\n      expandIconPosition='end'\n      defaultActiveKey={\n        list.length > 0 ? list.map((i: IAnswerList, index: number) => index) : undefined\n      }\n      style={{ margin: '16px 0px' }}\n    >\n      {list.map((i: IAnswerList, index: number) => {\n        const { indicatorScore = [], indicatorDetermine = [] } = LLMConfig;\n        const { backgroundColor, fontColor, tagText, tagStatus } = getTagStyle(i);\n\n        const header = (\n          <div\n            style={{ display: 'flex', width: '500px', alignItems: 'center', whiteSpace: 'nowrap' }}\n            onMouseMove={() => {\n              setHoverKey(i.order);\n            }}\n            onMouseLeave={() => {\n              setHoverKey(-1);\n            }}\n          >\n            <Tag color={backgroundColor} style={{ color: fontColor, padding: '0px 8px' }}>\n              {tagText}\n            </Tag>\n            <span\n              style={{\n                textOverflow: 'ellipsis',\n                overflow: 'hidden',\n                lineHeight: '32px',\n                paddingRight: '24px',\n              }}\n            >\n              {i.answer}\n            </span>\n          </div>\n        );\n\n        return (\n          <Panel\n            header={header}\n            key={index}\n            className={classnames({\n              [`${LLMSidebarCls}-panel`]: true,\n              [`${LLMSidebarCls}-panelHover`]: hoverKey === i.order,\n              [`${LLMSidebarCls}-errorPanel`]: tagStatus === ETagType.UnFinish,\n            })}\n          >\n            {/* 指标评分 */}\n            {indicatorScore?.length > 0 &&\n              indicatorScore.map((item: IndicatorScore, index: number) => {\n                const { label, text, value, score } = item;\n                const renderTitle = (\n                  <div className={`${LLMSidebarCls}-indicatorScore`}>\n                    <LongText text={label} openByText={true} />\n                    {text && (\n                      <Popover\n                        placement='bottom'\n                        content={text}\n                        overlayClassName={`${LLMSidebarCls}-indicatorScore-title`}\n                      >\n                        <InfoCircleOutlined style={{ margin: '0px 4px', cursor: 'pointer' }} />\n                      </Popover>\n                    )}\n                  </div>\n                );\n                return label && score ? (\n                  <ScoreGroupButton\n                    score={score}\n                    title={renderTitle}\n                    selectScore={i?.indicatorScore?.[value]}\n                    updateScore={(score) => {\n                      const values = {\n                        key: value,\n                        value: score,\n                      };\n                      updateValue({ order: i.order, value: values, key: 'indicatorScore' });\n                    }}\n                    key={index}\n                    isDisableAll={isDisableAll}\n                  />\n                ) : null;\n              })}\n            {/* 指标判断 */}\n            {indicatorDetermine?.length > 0 &&\n              indicatorDetermine.map((item: IndicatorDetermine, index: number) => {\n                const { label, value } = item;\n\n                return label ? (\n                  <DetermineGroup\n                    selectValue={i?.indicatorDetermine?.[value]}\n                    title={label}\n                    updateValue={(changeValue) => {\n                      const values = {\n                        key: value,\n                        value: changeValue,\n                      };\n                      updateValue({ order: i.order, value: values, key: 'indicatorDetermine' });\n                    }}\n                    key={index}\n                    isDisableAll={isDisableAll}\n                  />\n                ) : null;\n              })}\n          </Panel>\n        );\n      })}\n    </Collapse>\n  );\n};\n\nexport default AnswerList;\n","/*\n * @file LLM tool score\n * @Author: lixinghua lixinghua@sensetime.com\n * @Date: 2023-04-10\n */\nimport React from 'react';\nimport { prefix } from '@/constant';\nimport { Radio } from 'antd';\n\ninterface IProps {\n  title: React.ReactNode;\n  score?: number;\n  selectScore?: number;\n  isDisableAll?: boolean;\n  updateScore: (score: number) => void;\n}\n\nconst ScoreGroupButton = (props: IProps) => {\n  const { title, score = 5, selectScore, updateScore, isDisableAll } = props;\n  const scoreLists = Array.from({ length: score }, (val, i) => i + 1);\n  return (\n    <div className={`${prefix}-LLMSidebar-contentBox`}>\n      <span style={{ width: '100px' }}>{title}</span>\n      <Radio.Group\n        value={selectScore}\n        onChange={(e) => updateScore(Number(e.target.value))}\n        disabled={isDisableAll}\n      >\n        {scoreLists.map((i, index) => (\n          <Radio.Button value={i} key={index} style={{ padding: '0px 16px' }}>\n            {i}\n          </Radio.Button>\n        ))}\n      </Radio.Group>\n    </div>\n  );\n};\n\nexport default ScoreGroupButton;\n","/*\n * @file LLM tool indicator determine\n * @Author: lixinghua lixinghua@sensetime.com\n * @Date: 2023-04-10\n */\nimport React from 'react';\nimport { prefix } from '@/constant';\nimport { Radio } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport LongText from '@/components/longText';\n\ninterface IProps {\n  title: string;\n  selectValue?: boolean;\n  isDisableAll?: boolean;\n  updateValue: (changeValue: boolean) => void;\n}\n\nconst DetermineGroup = (props: IProps) => {\n  const { title, selectValue, isDisableAll, updateValue } = props;\n\n  const { t } = useTranslation();\n  return (\n    <div className={`${prefix}-LLMSidebar-contentBox`}>\n      <span style={{ width: '160px' }}>\n        <LongText text={title} openByText={true} />\n      </span>\n      <Radio.Group\n        value={selectValue}\n        onChange={(e) => updateValue(e.target.value)}\n        disabled={isDisableAll}\n      >\n        <Radio value={true} key={1}>\n          {t('Yes')}\n        </Radio>\n        <Radio value={false} key={2}>\n          {t('No')}\n        </Radio>\n      </Radio.Group>\n    </div>\n  );\n};\n\nexport default DetermineGroup;\n","import { jsonParser } from '../../../utils';\n\nexport const getCurrentResultFromResultList = (result: string) => {\n  const data = jsonParser(result);\n  const DEFAULT_STEP = `step_1`;\n  // LLM results are single labeled results\n  const dataList = data?.[DEFAULT_STEP]?.result[0] ?? {};\n  return dataList;\n};\n\nexport const formatSort = (sortList: any) => {\n  const newList = sortList.reduce((list: any, key: any) => {\n    let tagColumn = key;\n    if (key.length > 1) {\n      tagColumn = key.map((i: { id: number; title: number | string }) => i.id);\n    } else {\n      tagColumn = [key[0].id];\n    }\n    return [...list, tagColumn];\n  }, []);\n  return newList;\n};\n","var img = \"data:image/svg+xml,%3csvg width='206' height='205' viewBox='0 0 206 205' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='103' cy='102.5' r='102.5' fill='url(%23paint0_linear_2082_2108)' /%3e %3cpath fill-rule='evenodd' clip-rule='evenodd' d='M56.5 193.87V34H150.5V193.353C136.3 200.792 120.142 205 103 205C86.2595 205 70.4563 200.987 56.5 193.87Z' fill='white' /%3e %3crect x='64.5' y='42' width='24' height='10' fill='%23EEEEEE' /%3e %3crect x='118.5' y='161' width='24' height='10' fill='%23EEEEEE' /%3e %3crect x='87.5' y='162' width='22' height='8' stroke='%23EEEEEE' stroke-width='2' /%3e %3crect x='64.5' y='60' width='78' height='10' fill='%23EEEEEE' /%3e %3crect x='64.5' y='78' width='78' height='10' fill='%23EEEEEE' /%3e %3crect x='64.5' y='96' width='78' height='10' fill='%23EEEEEE' /%3e %3crect x='64.5' y='114' width='60' height='10' fill='%23EEEEEE' /%3e %3crect x='132.5' y='114' width='10' height='10' fill='%23EEEEEE' /%3e %3cdefs%3e %3clinearGradient id='paint0_linear_2082_2108' x1='103' y1='0' x2='103' y2='205' gradientUnits='userSpaceOnUse'%3e %3cstop stop-color='%23C4C4C4' /%3e %3cstop offset='1' stop-color='%23F2F2F2' /%3e %3c/linearGradient%3e %3c/defs%3e%3c/svg%3e\";\n  export default img;","import React, { useEffect } from 'react';\nimport { Form, Input } from 'antd';\nimport { ILLMToolConfig, ITextList } from '@/components/LLMToolView/types';\nimport classnames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport { isArray } from 'lodash';\n\ninterface IProps {\n  textAttribute: ITextList[];\n  checkMode?: boolean;\n  LLMConfig?: ILLMToolConfig;\n  setText: (value: ITextList[]) => void;\n}\n\nconst TextInputBox = (props: IProps) => {\n  const { checkMode, LLMConfig, textAttribute, setText } = props;\n  const textConfig = LLMConfig?.text && isArray(LLMConfig.text) ? LLMConfig?.text : [];\n  const { TextArea } = Input;\n  const [form] = Form.useForm();\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const combinResult = textConfig.map((i, index) => {\n      const value = textAttribute.filter((item) => item?.textId === i?.textId) || [];\n      return { ...i, value: value[0]?.value };\n    });\n    form.setFieldsValue({ text: combinResult });\n  }, [textConfig, textAttribute]);\n\n  return (\n    <Form\n      form={form}\n      onValuesChange={(__, allValues) => {\n        setText(allValues.text);\n      }}\n    >\n      <Form.List name='text'>\n        {(fields, operation) => {\n          return (\n            <>\n              {fields.map((field, index) => {\n                const { max, min, title, tip } = textConfig[field.name] || {};\n                const showTextInput = title;\n                const messageError = t('LeastCharacterError', {\n                  num: min,\n                });\n                return (\n                  <div\n                    style={{ display: 'flex', flexDirection: 'column', marginBottom: '16px' }}\n                    key={index}\n                  >\n                    {showTextInput && (\n                      <Form.Item\n                        name={[field.name, 'title']}\n                        extra={tip}\n                        style={{\n                          fontSize: '16px',\n                          lineHeight: '22px',\n                          fontWeight: 500,\n                          color: '#333333',\n                          marginBottom: 8,\n                        }}\n                        required={!!min}\n                        label={' '}\n                        colon={false}\n                      >\n                        {title}\n                        {showTextInput && (\n                          <span\n                            className={classnames({\n                              [`clearText`]: true,\n                              [`clearText__disabled`]: checkMode,\n                            })}\n                            style={{ verticalAlign: 'initial' }}\n                            onClick={() => {\n                              if (checkMode) {\n                                return;\n                              }\n                              form.setFields([\n                                {\n                                  name: ['text', field.name, 'value'],\n                                  value: undefined,\n                                  errors: min ? [messageError] : [],\n                                },\n                              ]);\n                              const newText = form.getFieldValue('text');\n                              setText(newText);\n                            }}\n                          />\n                        )}\n                      </Form.Item>\n                    )}\n                    {showTextInput && (\n                      <Form.Item\n                        name={[field.name, 'value']}\n                        style={{\n                          marginBottom: 8,\n                        }}\n                        rules={[\n                          {\n                            validator: (rule, value) => {\n                              if (min && value?.length < Number(min)) {\n                                return Promise.reject(messageError);\n                              }\n                              return Promise.resolve();\n                            },\n                          },\n                        ]}\n                        initialValue={undefined}\n                      >\n                        <TextArea\n                          maxLength={max}\n                          disabled={checkMode}\n                          showCount={max ? true : false}\n                          style={{ width: '100%' }}\n                        />\n                      </Form.Item>\n                    )}\n                  </div>\n                );\n              })}\n            </>\n          );\n        }}\n      </Form.List>\n    </Form>\n  );\n};\n\nexport default TextInputBox;\n","import React from 'react';\nimport ToolHotKey from './ToolHotKey';\nimport StepUtils from '@/utils/StepUtils';\nimport { useSelector } from '@/store/ctx';\n\nconst FooterTips: React.FC = () => {\n  // @ts-ignore\n  const stepInfo = useSelector((state) =>\n    // @ts-ignore\n    StepUtils.getCurrentStepInfo(state?.annotation?.step, state.annotation?.stepList),\n  );\n\n  return <ToolHotKey toolName={stepInfo?.tool} />;\n};\n\nexport default FooterTips;\n","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3crect width='16' height='16' fill='none'/%3e%3cg transform='translate(1 2)'%3e%3cpath d='M2%2c12a2.071%2c2.071%2c0%2c0%2c1-1.412-.54A1.791%2c1.791%2c0%2c0%2c1%2c0%2c10.151v-8.3A1.935%2c1.935%2c0%2c0%2c1%2c2.006%2c0h9.988A1.935%2c1.935%2c0%2c0%2c1%2c14%2c1.849v8.3a1.77%2c1.77%2c0%2c0%2c1-.588%2c1.308A2.075%2c2.075%2c0%2c0%2c1%2c12%2c12H2Zm1-3.692a.926.926%2c0%2c1%2c0%2c0%2c1.846H11a.926.926%2c0%2c1%2c0%2c0-1.846Zm7.273-3.692C10.2%2c4.616%2c10%2c4.67%2c10%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H11.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm-4%2c0C6.2%2c4.616%2c6%2c4.67%2c6%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H7.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm-4%2c0C2.2%2c4.616%2c2%2c4.67%2c2%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H3.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm8-2.77c-.065%2c0-.268.054-.268.18V3.451c0%2c.078%2c0%2c.241.268.241H11.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Zm-4%2c0C6.2%2c1.846%2c6%2c1.9%2c6%2c2.026V3.451c0%2c.078%2c0%2c.241.268.241H7.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Zm-4%2c0C2.2%2c1.846%2c2%2c1.9%2c2%2c2.026V3.451c0%2c.078%2c0%2c.241.268.241H3.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Z' fill='white'/%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='17' height='15' viewBox='0 0 17 15'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666fff%3b stroke-miterlimit: 10%3b %7d .cls-2%2c .cls-3 %7b stroke: none%3b %7d .cls-3 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_kj_h' transform='translate(1 1)'%3e %3cg id='%e5%9b%be%e6%a0%87_%e8%ae%be%e7%bd%ae_%e5%bf%ab%e6%8d%b7%e9%94%ae'%3e %3cg id='%e5%bd%a2%e7%8a%b6' class='cls-1'%3e %3cpath class='cls-2' d='M 2.142650127410889 13.49960994720459 L 2.14231014251709 13.49960994720459 L 2.141970157623291 13.49960994720459 C 1.443660259246826 13.49962043762207 0.7852402329444885 13.24412059783936 0.2880001962184906 12.78017997741699 C -0.2126297950744629 12.31418991088867 -0.4999997913837433 11.66413974761963 -0.4999997913837433 10.99709987640381 L -0.4999997913837433 2.003400325775146 C -0.4999997913837433 0.6230202317237854 0.6884301900863647 -0.4999997913837433 2.149200201034546 -0.4999997913837433 L 12.85109996795654 -0.4999997913837433 C 14.31187057495117 -0.4999997913837433 15.50030040740967 0.6230202317237854 15.50030040740967 2.003400325775146 L 15.50030040740967 10.99709987640381 C 15.49915027618408 11.6742000579834 15.21883010864258 12.30697059631348 14.71096038818359 12.77968978881836 C 14.2135705947876 13.24379062652588 13.55419063568115 13.49960041046143 12.85474014282227 13.49960041046143 L 2.149200201034546 13.49960041046143 L 2.142650127410889 13.49960994720459 Z M 3.208500146865845 9.5 C 2.89663028717041 9.5 2.642900228500366 9.724249839782715 2.642900228500366 9.999899864196777 C 2.642900228500366 10.27554988861084 2.89663028717041 10.49980068206787 3.208500146865845 10.49980068206787 L 11.79090023040771 10.49980068206787 C 12.10327053070068 10.49980068206787 12.35739994049072 10.27554988861084 12.35739994049072 9.999899864196777 C 12.35739994049072 9.724249839782715 12.10327053070068 9.5 11.79090023040771 9.5 L 3.208500146865845 9.5 Z M 11.21450042724609 6.500200271606445 L 12.35739994049072 6.500200271606445 L 12.35739994049072 5.500400066375732 L 11.21450042724609 5.500400066375732 L 11.21450042724609 6.500200271606445 Z M 6.928699970245361 6.500200271606445 L 8.071599960327148 6.500200271606445 L 8.071599960327148 5.500400066375732 L 6.928699970245361 5.500400066375732 L 6.928699970245361 6.500200271606445 Z M 2.642900228500366 6.500200271606445 L 3.785800218582153 6.500200271606445 L 3.785800218582153 5.500400066375732 L 2.642900228500366 5.500400066375732 L 2.642900228500366 6.500200271606445 Z M 11.21450042724609 3.499600172042847 L 12.35739994049072 3.499600172042847 L 12.35739994049072 2.499800205230713 L 11.21450042724609 2.499800205230713 L 11.21450042724609 3.499600172042847 Z M 6.928699970245361 3.499600172042847 L 8.071599960327148 3.499600172042847 L 8.071599960327148 2.499800205230713 L 6.928699970245361 2.499800205230713 L 6.928699970245361 3.499600172042847 Z M 2.642900228500366 3.499600172042847 L 3.785800218582153 3.499600172042847 L 3.785800218582153 2.499800205230713 L 2.642900228500366 2.499800205230713 L 2.642900228500366 3.499600172042847 Z'/%3e %3cpath class='cls-3' d='M 2.141960144042969 12.99960994720459 L 2.149200201034546 12.99960041046143 L 12.85474014282227 12.99960041046143 C 13.4271297454834 12.99960041046143 13.96537017822266 12.79152011871338 14.37030029296875 12.41370010375977 C 14.77565002441406 12.03639984130859 14.99939060211182 11.53330039978027 15.00030040740967 10.99709987640381 L 15.00030040740967 2.003400325775146 C 15.00030040740967 0.8987202048301697 14.03617000579834 2.188110386214248e-07 12.85109996795654 2.188110386214248e-07 L 2.149200201034546 2.188110386214248e-07 C 0.9641302227973938 2.188110386214248e-07 2.037048290048915e-07 0.8987202048301697 2.037048290048915e-07 2.003400325775146 L 2.037048290048915e-07 10.99709987640381 C 2.037048290048915e-07 11.52581024169922 0.2293002009391785 12.04246044158936 0.6291002035140991 12.41460037231445 C 1.033440232276917 12.79186058044434 1.570720195770264 12.99962043762207 2.141960144042969 12.99960994720459 M 3.208500146865845 9 L 11.79090023040771 9 C 12.3789701461792 9 12.85739994049072 9.448550224304199 12.85739994049072 9.999899864196777 C 12.85739994049072 10.55125045776367 12.3789701461792 10.99980068206787 11.79090023040771 10.99980068206787 L 3.208500146865845 10.99980068206787 C 2.620930194854736 10.99980068206787 2.142900228500366 10.55125045776367 2.142900228500366 9.999899864196777 C 2.142900228500366 9.448550224304199 2.620930194854736 9 3.208500146865845 9 M 11.00160026550293 5.000400066375732 L 12.60449981689453 5.000400066375732 C 12.79372024536133 5.000400066375732 12.85739994049072 5.157999992370605 12.85739994049072 5.229900360107422 L 12.85739994049072 6.769800186157227 C 12.85739994049072 6.844580173492432 12.85739994049072 7.000200271606445 12.64050006866455 7.000200271606445 L 11.00160026550293 7.000200271606445 C 10.71450042724609 7.000200271606445 10.71450042724609 6.823920249938965 10.71450042724609 6.739200115203857 L 10.71450042724609 5.19480037689209 C 10.71450042724609 5.058890342712402 10.9323902130127 5.000400066375732 11.00160026550293 5.000400066375732 M 6.715800285339355 5.000400066375732 L 8.318699836730957 5.000400066375732 C 8.507920265197754 5.000400066375732 8.571599960327148 5.157999992370605 8.571599960327148 5.229900360107422 L 8.571599960327148 6.769800186157227 C 8.571599960327148 6.844580173492432 8.571599960327148 7.000200271606445 8.354700088500977 7.000200271606445 L 6.715800285339355 7.000200271606445 C 6.428699970245361 7.000200271606445 6.428699970245361 6.823920249938965 6.428699970245361 6.739200115203857 L 6.428699970245361 5.19480037689209 C 6.428699970245361 5.058890342712402 6.646590232849121 5.000400066375732 6.715800285339355 5.000400066375732 M 2.430000305175781 5.000400066375732 L 4.032900333404541 5.000400066375732 C 4.22212028503418 5.000400066375732 4.285799980163574 5.157999992370605 4.285799980163574 5.229900360107422 L 4.285799980163574 6.769800186157227 C 4.285799980163574 6.844580173492432 4.285799980163574 7.000200271606445 4.068900108337402 7.000200271606445 L 2.430000305175781 7.000200271606445 C 2.142900228500366 7.000200271606445 2.142900228500366 6.823920249938965 2.142900228500366 6.739200115203857 L 2.142900228500366 5.19480037689209 C 2.142900228500366 5.058890342712402 2.360790252685547 5.000400066375732 2.430000305175781 5.000400066375732 M 11.00160026550293 1.999800205230713 L 12.60449981689453 1.999800205230713 C 12.79372024536133 1.999800205230713 12.85739994049072 2.158020257949829 12.85739994049072 2.230200290679932 L 12.85739994049072 3.770100116729736 C 12.85739994049072 3.844590187072754 12.85739994049072 3.999600172042847 12.64050006866455 3.999600172042847 L 11.00160026550293 3.999600172042847 C 10.71450042724609 3.999600172042847 10.71450042724609 3.823320150375366 10.71450042724609 3.738600254058838 L 10.71450042724609 2.1951003074646 C 10.71450042724609 2.058560132980347 10.9323902130127 1.999800205230713 11.00160026550293 1.999800205230713 M 6.715800285339355 1.999800205230713 L 8.318699836730957 1.999800205230713 C 8.507920265197754 1.999800205230713 8.571599960327148 2.158020257949829 8.571599960327148 2.230200290679932 L 8.571599960327148 3.770100116729736 C 8.571599960327148 3.844590187072754 8.571599960327148 3.999600172042847 8.354700088500977 3.999600172042847 L 6.715800285339355 3.999600172042847 C 6.428699970245361 3.999600172042847 6.428699970245361 3.823320150375366 6.428699970245361 3.738600254058838 L 6.428699970245361 2.1951003074646 C 6.428699970245361 2.058560132980347 6.646590232849121 1.999800205230713 6.715800285339355 1.999800205230713 M 2.430000305175781 1.999800205230713 L 4.032900333404541 1.999800205230713 C 4.22212028503418 1.999800205230713 4.285799980163574 2.158020257949829 4.285799980163574 2.230200290679932 L 4.285799980163574 3.770100116729736 C 4.285799980163574 3.844590187072754 4.285799980163574 3.999600172042847 4.068900108337402 3.999600172042847 L 2.430000305175781 3.999600172042847 C 2.142900228500366 3.999600172042847 2.142900228500366 3.823320150375366 2.142900228500366 3.738600254058838 L 2.142900228500366 2.1951003074646 C 2.142900228500366 2.058560132980347 2.360790252685547 1.999800205230713 2.430000305175781 1.999800205230713 M 2.143340110778809 13.99960994720459 L 2.142660140991211 13.99960994720459 L 2.141980171203613 13.99960994720459 C 1.316610217094421 13.99962043762207 0.537050187587738 13.69639015197754 -0.05309979617595673 13.14577007293701 C -0.654549777507782 12.58592987060547 -0.9999998211860657 11.80247020721436 -0.9999998211860657 10.99709987640381 L -0.9999998211860657 2.003400325775146 C -0.9999998211860657 0.3473202288150787 0.4127302169799805 -0.9999997615814209 2.149200201034546 -0.9999997615814209 L 12.85109996795654 -0.9999997615814209 C 14.58757019042969 -0.9999997615814209 16.00029945373535 0.3473202288150787 16.00029945373535 2.003400325775146 L 16.00029945373535 10.99709987640381 C 15.99890995025635 11.81510066986084 15.66200065612793 12.57754039764404 15.0516300201416 13.14568042755127 C 14.46177005767822 13.6960506439209 13.68125057220459 13.99960041046143 12.85474014282227 13.99960041046143 L 2.149200201034546 13.99960041046143 L 2.143340110778809 13.99960994720459 Z'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_27' data-name='%e8%b7%af%e5%be%84 27' class='cls-1' d='M3.5-16v.874h7V-16H14v3.5h-.875v7H14V-2H10.5v-.875h-7V-2H0V-5.5H.875v-7H0V-16Zm0%2c2.624v.876H2.625v7H3.5v.875h7V-5.5h.875v-7H10.5v-.875Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_26' data-name='%e8%b7%af%e5%be%84 26' class='cls-2' d='M-1747%2c836H-67V-109H-1747Z' transform='translate(1747 109)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frame_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cg id='%e7%bb%84_25' data-name='%e7%bb%84 25' class='cls-3' transform='translate(0 -16)'%3e %3cg id='%e7%bb%84_24' data-name='%e7%bb%84 24' class='cls-4' transform='translate(-1528.625 -81.375)'%3e %3cpath id='%e8%b7%af%e5%be%84_25' data-name='%e8%b7%af%e5%be%84 25' class='cls-5' d='M-5-21H17.75V1.75H-5Z' transform='translate(1529.25 98)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2%2c .cls-6 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d .cls-6 %7b stroke: %23666%3b %7d .cls-7 %7b stroke: none%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_27' data-name='%e8%b7%af%e5%be%84 27' class='cls-1' d='M3.5-16v.874h7V-16H14v3.5h-.875v7H14V-2H10.5v-.875h-7V-2H0V-5.5H.875v-7H0V-16Zm0%2c2.624v.876H2.625v7H3.5v.875h7V-5.5h.875v-7H10.5v-.875Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_26' data-name='%e8%b7%af%e5%be%84 26' class='cls-2' d='M-1747%2c836H-67V-109H-1747Z' transform='translate(1747 109)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frameNull_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_131' data-name='%e7%9f%a9%e5%bd%a2 131' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3cg id='%e7%bb%84_25' data-name='%e7%bb%84 25' class='cls-3' transform='translate(0 -16)'%3e %3cg id='%e7%bb%84_24' data-name='%e7%bb%84 24' class='cls-4' transform='translate(-1528.625 -81.375)'%3e %3cpath id='%e8%b7%af%e5%be%84_25' data-name='%e8%b7%af%e5%be%84 25' class='cls-5' d='M-5-21H17.75V1.75H-5Z' transform='translate(1529.25 98)'/%3e %3c/g%3e %3c/g%3e %3cg id='%e7%9f%a9%e5%bd%a2_92' data-name='%e7%9f%a9%e5%bd%a2 92' class='cls-6' transform='translate(1.699 -12.97) rotate(-45)'%3e %3crect class='cls-7' width='1.6' height='13'/%3e %3crect class='cls-2' x='0.5' y='0.5' width='0.6' height='12'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666%3b %7d .cls-2 %7b fill: none%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_frameActive_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_2' data-name='%e5%87%8f%e5%8e%bb 2' class='cls-1' d='M1768.5%2c9503H1765v-3.5h.875v-7H1765V9489h3.5v.873l7%2c0V9489h3.5v3.5h-.875v4.5h-1.75v-4.5h-.873v-.873l-7%2c0v.875h-.873v7h.873v.873h4.5v1.751h-4.5V9503Z' transform='translate(-1765 -9505)'/%3e %3cpath id='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd_4' data-name='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd 4' class='cls-1' d='M2.628%2c0%2c5.256%2c5.256%2c2.632%2c4.129%2c0%2c5.256Z' transform='translate(7.667 -6.406) rotate(-30)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_399' data-name='%e8%b7%af%e5%be%84 399' class='cls-2' d='M2.139-17.789H7.33L8-17.12H3.813l1.172%2c1.34h-1ZM7.5-18.627H2.306l-.67-.669H5.823l-1.172-1.34h1L7.5-18.627Z' transform='translate(-1.636 20.636)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frameChange_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_2' data-name='%e5%87%8f%e5%8e%bb 2' class='cls-1' d='M1768.5%2c9503H1765v-3.5h.875v-7H1765V9489h3.5v.873l7%2c0V9489h3.5v3.5h-.875v4.933l-1.75.025V9492.5h-.873v-.873l-7%2c0v.875h-.873v7h.873v.873h3.841l1.391%2c1.751H1768.5V9503Z' transform='translate(-1765 -9505)'/%3e %3cg id='%e7%bb%84_647' data-name='%e7%bb%84 647' transform='translate(7 14)'%3e %3cg id='%e7%bb%84_646' data-name='%e7%bb%84 646' class='cls-3' transform='translate(1.636 -20.636)'%3e %3cpath id='%e8%b7%af%e5%be%84_398' data-name='%e8%b7%af%e5%be%84 398' class='cls-1' d='M-3.364-25.636H6.07v7.927H-3.364Z' transform='translate(1.829 24.101)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_cencel_kj' transform='translate(0.494)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='15.963' transform='translate(-0.494)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.057%2c3.54C8.654%2c7.1%2c4.678%2c7.648.279%2c5.143A.544.544%2c0%2c0%2c1%2c0%2c4.662a.578.578%2c0%2c0%2c1%2c.283-.493A.548.548%2c0%2c0%2c1%2c.84%2c4.163C4.822%2c6.431%2c8.263%2c5.956%2c11.318%2c2.722L8.918.065%2c13.99%2c0l-.072%2c5.6Z' transform='translate(10.937 16) rotate(-138)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_reform_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='15.963'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.057%2c3.148C8.654-.415%2c4.678-.96.279%2c1.546A.544.544%2c0%2c0%2c0%2c0%2c2.027a.578.578%2c0%2c0%2c0%2c.283.493.548.548%2c0%2c0%2c0%2c.557.005C4.822.257%2c8.263.733%2c11.318%2c3.967l-2.4%2c2.657%2c5.072.065-.072-5.6Z' transform='translate(0.094 11.029) rotate(-42)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_274' data-name='%e8%b7%af%e5%be%84 274' class='cls-1' d='M1.732-140.268a5.914%2c5.914%2c0%2c0%2c1%2c8.364%2c0%2c5.916%2c5.916%2c0%2c0%2c1%2c.581%2c7.69L14-129.255%2c12.745-128l-3.323-3.323a5.916%2c5.916%2c0%2c0%2c1-7.69-.581A5.914%2c5.914%2c0%2c0%2c1%2c1.732-140.268Zm7.528.836a4.732%2c4.732%2c0%2c0%2c0-6.691%2c0%2c4.732%2c4.732%2c0%2c0%2c0%2c0%2c6.691%2c4.732%2c4.732%2c0%2c0%2c0%2c6.691%2c0A4.732%2c4.732%2c0%2c0%2c0%2c9.26-139.431Z' transform='translate(0 142)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_273' data-name='%e8%b7%af%e5%be%84 273' class='cls-2' d='M-29-160.285H-9.285V-180H-29Z' transform='translate(29 180)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_loupe_kj' transform='translate(4 144)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_110' data-name='%e7%9f%a9%e5%bd%a2 110' class='cls-2' width='16' height='16' transform='translate(-4 -144)'/%3e %3cg id='%e7%bb%84_470' data-name='%e7%bb%84 470' class='cls-3' transform='translate(-3 -143)'%3e %3cg id='%e7%bb%84_469' data-name='%e7%bb%84 469' class='cls-4' transform='translate(-2.859 -3.746)'%3e %3cpath id='%e8%b7%af%e5%be%84_272' data-name='%e8%b7%af%e5%be%84 272' class='cls-5' d='M-5-147H9.986v14.986H-5Z' transform='translate(7.366 150.253)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_mouse_middle_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5%2c .cls-7 %7b fill: %23ff5770%3b %7d .cls-5 %7b opacity: 0%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.983v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.969-9.7H5.865V0A5.69%2c5.69%2c0%2c0%2c1%2c9.394%2c1.267%2c3.813%2c3.813%2c0%2c0%2c1%2c10.849%2c4.19V5.98Zm-5.864%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.455%2c1.267%2c5.692%2c5.692%2c0%2c0%2c1%2c4.985%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(-0.698 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3cpath id='%e8%b7%af%e5%be%84-3' data-name='%e8%b7%af%e5%be%84' class='cls-7' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_321' data-name='%e8%b7%af%e5%be%84 321' class='cls-1' d='M0%2c0H16V-16H0Z'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_323' data-name='%e8%b7%af%e5%be%84 323' class='cls-1' d='M5.344-14.625H1.875a.5.5%2c0%2c0%2c0-.5.5v3.5a.251.251%2c0%2c0%2c0%2c.25.25h.75a.251.251%2c0%2c0%2c0%2c.25-.25v-2.75H5.344a.251.251%2c0%2c0%2c0%2c.25-.25v-.75A.251.251%2c0%2c0%2c0%2c5.344-14.625Zm9.031%2c9h-.75a.251.251%2c0%2c0%2c0-.25.25v2.75H10.656a.251.251%2c0%2c0%2c0-.25.25v.75a.251.251%2c0%2c0%2c0%2c.25.25h3.469a.5.5%2c0%2c0%2c0%2c.5-.5v-3.5A.251.251%2c0%2c0%2c0%2c14.375-5.625Zm-9.031%2c3H2.625v-2.75a.251.251%2c0%2c0%2c0-.25-.25h-.75a.251.251%2c0%2c0%2c0-.25.25v3.5a.5.5%2c0%2c0%2c0%2c.5.5H5.344a.251.251%2c0%2c0%2c0%2c.25-.25v-.75A.251.251%2c0%2c0%2c0%2c5.344-2.625Zm8.781-12H10.656a.251.251%2c0%2c0%2c0-.25.25v.75a.251.251%2c0%2c0%2c0%2c.25.25h2.719v2.75a.251.251%2c0%2c0%2c0%2c.25.25h.75a.251.251%2c0%2c0%2c0%2c.25-.25v-3.5A.5.5%2c0%2c0%2c0%2c14.125-14.625Z'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_fullView_kj' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_567' data-name='%e7%bb%84 567' class='cls-2'%3e %3cpath id='%e8%b7%af%e5%be%84_320' data-name='%e8%b7%af%e5%be%84 320' class='cls-3' d='M-5-21H21V5H-5Z'/%3e %3c/g%3e %3cg id='%e7%bb%84_568' data-name='%e7%bb%84 568' class='cls-4'%3e %3cpath id='%e8%b7%af%e5%be%84_322' data-name='%e8%b7%af%e5%be%84 322' class='cls-5' d='M-3.625-19.625h23.25V3.625H-3.625Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_reload_kj' transform='translate(-1 -1.432)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16' transform='translate(1 1.432)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.917%2c1.955l-.9.735A6.615%2c6.615%2c0%2c0%2c0%2c6.72%2c0%2c6.86%2c6.86%2c0%2c0%2c0%2c0%2c6.992%2c6.864%2c6.864%2c0%2c0%2c0%2c6.72%2c14a6.745%2c6.745%2c0%2c0%2c0%2c6.315-4.6.135.135%2c0%2c0%2c0-.078-.172L12.05%2c8.9a.127.127%2c0%2c0%2c0-.162.08c-.029.083-.061.167-.094.248a5.722%2c5.722%2c0%2c0%2c1-1.18%2c1.823%2c5.511%2c5.511%2c0%2c0%2c1-1.749%2c1.23%2c5.32%2c5.32%2c0%2c0%2c1-4.283%2c0%2c5.459%2c5.459%2c0%2c0%2c1-1.749-1.23A5.722%2c5.722%2c0%2c0%2c1%2c1.653%2c9.23a5.979%2c5.979%2c0%2c0%2c1%2c0-4.463%2c5.722%2c5.722%2c0%2c0%2c1%2c1.18-1.823%2c5.511%2c5.511%2c0%2c0%2c1%2c1.749-1.23%2c5.32%2c5.32%2c0%2c0%2c1%2c4.283%2c0%2c5.459%2c5.459%2c0%2c0%2c1%2c1.749%2c1.23%2c5.678%2c5.678%2c0%2c0%2c1%2c.445.523L10.1%2c4.25a.135.135%2c0%2c0%2c0%2c.048.235l2.81.717a.13.13%2c0%2c0%2c0%2c.158-.128l.013-3.015a.129.129%2c0%2c0%2c0-.208-.1Z' transform='translate(2 2.432)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg xmlns='http://www.w3.org/2000/svg' class='icon' viewBox='0 0 1024 1024'%3e %3cpath d='M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_last_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M.163%2c6.632%2c7.735.1a.428.428%2c0%2c0%2c1%2c.7.368V13.53a.428.428%2c0%2c0%2c1-.7.368L.163%2c7.368A.5.5%2c0%2c0%2c1%2c.163%2c6.632Z' transform='translate(4 1)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M8.4-7.469a.381.381%2c0%2c0%2c1%2c.382.382h0V-2.15a.381.381%2c0%2c0%2c1-.382.382H2.1a.381.381%2c0%2c0%2c1-.382-.382h0V-7.087A.381.381%2c0%2c0%2c1%2c2.1-7.469H8.4Zm-.525.906H2.627v3.887H7.874Z' transform='translate(-1.721 7.469)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M16.812-10.1a4.782%2c4.782%2c0%2c0%2c0-1.839%2c3.751l-.763%2c0a.093.093%2c0%2c0%2c0-.073.15l1.2%2c1.526a.094.094%2c0%2c0%2c0%2c.147%2c0L16.694-6.2a.093.093%2c0%2c0%2c0-.073-.15H15.86a4.019%2c4.019%2c0%2c0%2c1%2c.03-.463%2c3.888%2c3.888%2c0%2c0%2c1%2c.461-1.419%2c3.9%2c3.9%2c0%2c0%2c1%2c1.005-1.173%2c3.884%2c3.884%2c0%2c0%2c1%2c1.381-.693%2c3.887%2c3.887%2c0%2c0%2c1%2c1.488-.106c.064.008.129.017.192.029v-.893A4.752%2c4.752%2c0%2c0%2c0%2c16.812-10.1Z' transform='translate(-14.118 11.118)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='c'%3e%3cpath d='M13.382-15.3A.381.381%2c0%2c0%2c1%2c13-15.682h0v-4.937A.381.381%2c0%2c0%2c1%2c13.382-21h6.3a.381.381%2c0%2c0%2c1%2c.382.382h0v4.937a.381.381%2c0%2c0%2c1-.382.382h-6.3Zm.525-.906h5.247v-3.887H13.906Z' transform='translate(-13 21)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='d'%3e%3cpath d='M4.583-12.907a4.782%2c4.782%2c0%2c0%2c0%2c1.839-3.751l.763%2c0a.093.093%2c0%2c0%2c0%2c.073-.15l-1.2-1.526a.094.094%2c0%2c0%2c0-.147%2c0L4.7-16.809a.093.093%2c0%2c0%2c0%2c.073.15h.762a4.017%2c4.017%2c0%2c0%2c1-.03.463%2c3.888%2c3.888%2c0%2c0%2c1-.461%2c1.419A3.9%2c3.9%2c0%2c0%2c1%2c4.039-13.6a3.884%2c3.884%2c0%2c0%2c1-1.381.693%2c3.887%2c3.887%2c0%2c0%2c1-1.488.106c-.064-.008-.129-.017-.192-.029v.893A4.752%2c4.752%2c0%2c0%2c0%2c4.583-12.907Z' transform='translate(-0.978 18.372)' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(0)'%3e%3crect width='16' height='16' transform='translate(0)' fill='none'/%3e%3cg transform='translate(0 0.294)'%3e%3cg transform='translate(8.374)' clip-path='url(%23a)'%3e%3cpath d='M-3.279-12.469H11.412V.863H-3.279Z' transform='translate(-0.537 8.653)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(0 2.005)' clip-path='url(%23b)'%3e%3cpath d='M9.118-2.007V-16.118H23.049V-2.007Z' transform='translate(-12.934 12.302)' fill='%23666'/%3e%3c/g%3e%3crect width='6' height='5' transform='translate(0.327 10.603)' fill='%23ccc'/%3e%3cg transform='translate(0.093 10.006)' clip-path='url(%23c)'%3e%3cpath d='M22.691-12.669H8V-26H22.691Z' transform='translate(-11.816 22.184)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(9.701 7.221)' clip-path='url(%23d)'%3e%3cpath d='M9.909-23.372V-9.261H-4.022V-23.372Z' transform='translate(0.206 19.556)' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M0%2c0H16V-16H0Z' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M13.958-11.417l-2.541-2.541a1%2c1%2c0%2c0%2c0-.708-.292H2.25a.5.5%2c0%2c0%2c0-.5.5v11.5a.5.5%2c0%2c0%2c0%2c.5.5h11.5a.5.5%2c0%2c0%2c0%2c.5-.5v-8.461A1%2c1%2c0%2c0%2c0%2c13.958-11.417ZM6-13.25h4v1.75H6ZM8-4.594a2.251%2c2.251%2c0%2c0%2c1-2.25-2.25A2.251%2c2.251%2c0%2c0%2c1%2c8-9.094a2.251%2c2.251%2c0%2c0%2c1%2c2.25%2c2.25A2.251%2c2.251%2c0%2c0%2c1%2c8-4.594Zm0-3.5a1.25%2c1.25%2c0%2c0%2c0-1.25%2c1.25A1.25%2c1.25%2c0%2c0%2c0%2c8-5.594a1.25%2c1.25%2c0%2c0%2c0%2c1.25-1.25A1.25%2c1.25%2c0%2c0%2c0%2c8-8.094Z' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(0 16)'%3e%3cg clip-path='url(%23a)'%3e%3cpath d='M-5-21H21V5H-5Z' fill='rgba(0%2c0%2c0%2c0)'/%3e%3c/g%3e%3cg clip-path='url(%23b)'%3e%3cpath d='M-3.25-19.25h22.5V3.25H-3.25Z' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_lineSpecial_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23ccc%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='%e8%b7%af%e5%be%84_607' data-name='%e8%b7%af%e5%be%84 607' class='cls-1' d='M12.564%2c4.659l-8.833%2c9.22h8.833Z' transform='translate(0 -1)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(5.604 11.916) rotate(-135)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(8.115 9.239) rotate(-135)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(10.625 6.561) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='7' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-5' width='1.5' height='8' transform='translate(4.75 13.5) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_492' data-name='%e8%b7%af%e5%be%84 492' class='cls-1' d='M0%2c2H16V-14H0Z' transform='translate(0 14)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_noDisplay' transform='translate(0 15)'%3e %3cg id='%e7%bb%84_817' data-name='%e7%bb%84 817' class='cls-3' transform='translate(0 -15)'%3e %3cpath id='%e8%b7%af%e5%be%84_491' data-name='%e8%b7%af%e5%be%84 491' class='cls-4' d='M-5-19H21V7H-5Z' transform='translate(0 15)'/%3e %3c/g%3e %3cpath id='%e5%87%8f%e5%8e%bb_1' data-name='%e5%87%8f%e5%8e%bb 1' class='cls-2' d='M7.114%2c9.861a7.321%2c7.321%2c0%2c0%2c1-3.965-1.19A8.865%2c8.865%2c0%2c0%2c1%2c.159%2c5.522a1.179%2c1.179%2c0%2c0%2c1%2c0-1.181%2c8.865%2c8.865%2c0%2c0%2c1%2c2.989-3.15c.1-.065.206-.128.311-.188l1.51%2c1.628a2.682%2c2.682%2c0%2c0%2c0-.27%2c1.2.42.42%2c0%2c0%2c0%2c.111.292.351.351%2c0%2c0%2c0%2c.267.119.367.367%2c0%2c0%2c0%2c.274-.119.414.414%2c0%2c0%2c0%2c.111-.292%2c1.928%2c1.928%2c0%2c0%2c1%2c.086-.582L9.065%2c7.047a3.241%2c3.241%2c0%2c0%2c1-1.949.623A3.325%2c3.325%2c0%2c0%2c1%2c4.6%2c6.545%2c3.852%2c3.852%2c0%2c0%2c1%2c3.556%2c3.836%2c3.98%2c3.98%2c0%2c0%2c1%2c4.04%2c1.91%2c8.1%2c8.1%2c0%2c0%2c0%2c1.015%2c4.931a8.574%2c8.574%2c0%2c0%2c0%2c2.647%2c2.8%2c6.217%2c6.217%2c0%2c0%2c0%2c3.451%2c1.04A6.16%2c6.16%2c0%2c0%2c0%2c10%2c8.057l.755.814A7.261%2c7.261%2c0%2c0%2c1%2c7.114%2c9.861Zm4.659-1.67h0l-.739-.8A8.7%2c8.7%2c0%2c0%2c0%2c13.21%2c4.931%2c8.088%2c8.088%2c0%2c0%2c0%2c10.185%2c1.91a3.981%2c3.981%2c0%2c0%2c1%2c.484%2c1.926%2c3.868%2c3.868%2c0%2c0%2c1-.751%2c2.357L6.295%2c2.286a1.512%2c1.512%2c0%2c0%2c1%2c.818-.23.357.357%2c0%2c0%2c0%2c.27-.12.409.409%2c0%2c0%2c0%2c.111-.292.417.417%2c0%2c0%2c0-.111-.292.355.355%2c0%2c0%2c0-.27-.12%2c2.2%2c2.2%2c0%2c0%2c0-1.368.46L4.6.46A7.088%2c7.088%2c0%2c0%2c1%2c7.114%2c0a7.321%2c7.321%2c0%2c0%2c1%2c3.965%2c1.19%2c8.85%2c8.85%2c0%2c0%2c1%2c2.989%2c3.15%2c1.179%2c1.179%2c0%2c0%2c1%2c0%2c1.181%2c8.821%2c8.821%2c0%2c0%2c1-2.295%2c2.669Z' transform='translate(1.088 -11.738)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_235' data-name='%e7%9f%a9%e5%bd%a2 235' class='cls-2' width='1.166' height='18.662' transform='matrix(0.719%2c -0.695%2c 0.695%2c 0.719%2c 0.745%2c -12.953)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: white%3b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_playPause' transform='translate(0.16 0.16)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16' transform='translate(-0.16 -0.16)'/%3e %3cg id='%e7%bb%84_1221' data-name='%e7%bb%84 1221' transform='translate(1.84 3.671)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M6.038%2c3.829.508.059A.32.32%2c0%2c0%2c0%2c0%2c.271V7.813a.32.32%2c0%2c0%2c0%2c.508.212l5.53-3.771A.249.249%2c0%2c0%2c0%2c6.038%2c3.829Z' transform='translate(1 0)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_400' data-name='%e7%9f%a9%e5%bd%a2 400' class='cls-2' width='1.524' height='7.618' rx='0.762' transform='translate(6.828 0.233)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_401' data-name='%e7%9f%a9%e5%bd%a2 401' class='cls-2' width='1.524' height='7.618' rx='0.762' transform='translate(9.718 0.233)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_forward_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1225' data-name='%e7%bb%84 1225' transform='translate(-0.347 0.145)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M6%2c3.807.505.058A.318.318%2c0%2c0%2c0%2c0%2c.27v7.5a.318.318%2c0%2c0%2c0%2c.505.211L6%2c4.229A.248.248%2c0%2c0%2c0%2c6%2c3.807Z' transform='translate(2.348 3.855)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M6%2c3.807.505.058A.318.318%2c0%2c0%2c0%2c0%2c.27v7.5a.318.318%2c0%2c0%2c0%2c.505.211L6%2c4.229A.248.248%2c0%2c0%2c0%2c6%2c3.807Z' transform='translate(7.824 3.855)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_back_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1224' data-name='%e7%bb%84 1224' transform='translate(-0.347 0.145)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M.118%2c3.807%2c5.615.058A.318.318%2c0%2c0%2c1%2c6.12.27v7.5a.318.318%2c0%2c0%2c1-.505.211L.118%2c4.229A.248.248%2c0%2c0%2c1%2c.118%2c3.807Z' transform='translate(7.824 3.855)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M.118%2c3.807%2c5.615.058A.318.318%2c0%2c0%2c1%2c6.12.27v7.5a.318.318%2c0%2c0%2c1-.505.211L.118%2c4.229A.248.248%2c0%2c0%2c1%2c.118%2c3.807Z' transform='translate(2.348 3.855)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_speed_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1223' data-name='%e7%bb%84 1223' transform='translate(-0.118 0.286)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_402' data-name='%e7%9f%a9%e5%bd%a2 402' class='cls-2' width='1.5' height='6' rx='0.75' transform='translate(8.118 12.043) rotate(90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_403' data-name='%e7%9f%a9%e5%bd%a2 403' class='cls-2' width='1.5' height='4' rx='0.75' transform='translate(6.118 9.043) rotate(90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_404' data-name='%e7%9f%a9%e5%bd%a2 404' class='cls-2' width='1.5' height='3' rx='0.75' transform='translate(5.118 6.043) rotate(90)'/%3e %3cpath id='%e5%80%8d%e9%80%9f' class='cls-2' d='M219.687%2c4.153H217.4L218.806.2a.267.267%2c0%2c0%2c0%2c.017-.084.278.278%2c0%2c0%2c0-.289-.269h-2.872a.28.28%2c0%2c0%2c0-.269.186l-2.312%2c6.454a.267.267%2c0%2c0%2c0-.017.084.278.278%2c0%2c0%2c0%2c.289.269h2.552l-.541%2c4.539c0%2c.008-.008.02-.008.029a.278.278%2c0%2c0%2c0%2c.289.269.285.285%2c0%2c0%2c0%2c.253-.157l4.042-6.986a.248.248%2c0%2c0%2c0%2c.029-.111.272.272%2c0%2c0%2c0-.281-.273Z' transform='translate(-206.065 1.862)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","import DrawPointSvg from '@/assets/annotation/toolHotKeyIcon/icon_point_kj.svg'\nimport DrawInvalidPointSvg from '@/assets/annotation/toolHotKeyIcon/icon_pointNull_kj.svg'\nimport SelectedPointSvg from '@/assets/annotation/toolHotKeyIcon/icon_pointActive_kj.svg'\nimport DeletePointSvg from '@/assets/annotation/toolHotKeyIcon/icon_del_kj.svg'\nimport MouseLeftSvg from '@/assets/annotation/toolHotKeyIcon/icon_mouse_left_kj.svg';\nimport MouseRightSvg from '@/assets/annotation/toolHotKeyIcon/icon_mouse_right_kj.svg';\n\nimport {\n  backward,\n  dargWithRightClick,\n  forward,\n  // fullScreen,\n  restore,\n  revoke,\n  rotate,\n  scale,\n  tabChangeSelected,\n  tabReverseChangeSelected,\n} from '../common';\n\nexport const drawPoint = {\n  name: 'AnnotatePoint',\n  icon: DrawPointSvg,\n  shortCut: [MouseLeftSvg],\n};\n\nexport const drawInvalidPoint = {\n  name: 'AnnotateInvalidPoint',\n  icon: DrawInvalidPointSvg,\n  shortCut: ['Ctrl', MouseLeftSvg],\n};\n\nexport const selectPoint = {\n  name: 'SelectPoint',\n  icon: SelectedPointSvg,\n  shortCut: [MouseRightSvg],\n  noticeInfo: 'RightClick',\n};\n\nexport const deletePoint = {\n  name: 'DeletePoint',\n  icon: DeletePointSvg,\n  shortCut: ['Del'],\n};\n\nconst pointToolShortCutTable = [\n  drawPoint,\n  drawInvalidPoint,\n  selectPoint,\n  deletePoint,\n\n  revoke,\n  restore,\n  rotate,\n  scale,\n  // fullScreen,\n  backward,\n  forward,\n  dargWithRightClick,\n  tabChangeSelected,\n  tabReverseChangeSelected,\n];\nexport default pointToolShortCutTable;\n","var img = \"data:image/svg+xml,%3csvg id='icon_point_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3ccircle id='%e6%a4%ad%e5%9c%86%e5%bd%a2' class='cls-2' cx='2.392' cy='2.392' r='2.392' transform='translate(4.811 4.811)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_pointNull_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d .cls-3%2c .cls-5 %7b fill: none%3b %7d .cls-3 %7b stroke: %23666%3b %7d .cls-4 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3ccircle id='%e6%a4%ad%e5%9c%86%e5%bd%a2' class='cls-2' cx='2.392' cy='2.392' r='2.392' transform='translate(4.811 4.811)'/%3e %3c/g%3e %3cg id='%e7%9f%a9%e5%bd%a2_92' data-name='%e7%9f%a9%e5%bd%a2 92' class='cls-3' transform='translate(2.757 4.089) rotate(-45)'%3e %3crect class='cls-4' width='1.6' height='13'/%3e %3crect class='cls-5' x='0.5' y='0.5' width='0.6' height='12'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_pointActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_3' data-name='%e5%87%8f%e5%8e%bb 3' class='cls-2' d='M1506.068%2c9508.987a2.393%2c2.393%2c0%2c1%2c1%2c2.391-2.394l-1.919%2c0v2.345A2.436%2c2.436%2c0%2c0%2c1%2c1506.068%2c9508.987Z' transform='translate(-1498.865 -9499.393)'/%3e %3c/g%3e %3cpath id='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd_4' data-name='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd 4' class='cls-2' d='M2.628%2c0%2c5.256%2c5.256%2c2.632%2c4.129%2c0%2c5.256Z' transform='translate(7.139 9.595) rotate(-30)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16.707' height='16' viewBox='0 0 16.707 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-1%2c .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d .cls-1%2c .cls-3 %7b stroke-miterlimit: 10%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b stroke: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_polygonNull_kj' transform='translate(0 -2)'%3e %3cg id='icon_line' transform='translate(10)'%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-1' width='1.499' height='15.5' transform='translate(-6.021 6.04) rotate(-45)'/%3e %3c/g%3e %3cg id='icon_polygonNull_kj-2' data-name='icon_polygonNull_kj' transform='translate(0 2)'%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_10' data-name='%e5%87%8f%e5%8e%bb 10' class='cls-4' d='M18500.451%2c2801h-6v-1.5h4.514l1.488%2c1.487%2c0%2c.012Zm-5.148-1.584h0l-1.059-1.058%2c1.783-1.789%2c1.061%2c1.059-1.785%2c1.788Zm7.895-2.75%2c0%2c0-1.5-1.5V2792.5h1.5v4.166Zm-2.578-2.579h0l-1.061-1.06%2c1.047-1.051%2c1.064%2c1.059-1.051%2c1.052Z' transform='translate(-18489.699 -2787.496)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_polygonActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-3 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-4' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-4' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_polygonChange_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23ccc%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='%e5%87%8f%e5%8e%bb_12' data-name='%e5%87%8f%e5%8e%bb 12' class='cls-1' d='M18493%2c2716.574l0%2c0%2c8.451-8.572.242%2c4.933h-3.889v3.513l-4.8.129Z' transform='translate(-18489.408 -2704.132)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_11' data-name='%e5%87%8f%e5%8e%bb 11' class='cls-5' d='M18496.65%2c2716.5H18493V2715h3.65v1.5Zm5.1-4.7h-1.5V2708h1.5v3.8Z' transform='translate(-18488.25 -2703)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_polygonDel_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_polygonInsert_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(9.222 9.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-4' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-5' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect opacity='0.01' width='16' height='16' fill='black'/%3e%3crect x='13.5' y='9.49963' width='7' height='7' transform='rotate(180 13.5 9.49963)' fill='%23CCCCCC' stroke='%23666666'/%3e%3crect x='9.5' y='13.4996' width='7' height='7' transform='rotate(180 9.5 13.4996)' fill='%23CCCCCC' stroke='%23666666'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect opacity='0.01' width='16' height='16' fill='black'/%3e%3cpath d='M10.002 9.52532H9.50201V10.0253V13.5406L2.50202 13.5406L2.50202 6.51493L6.00397 6.51493H6.50397V6.01493L6.50397 2.49963L13.5001 2.49963L13.5001 9.52532H10.002Z' fill='%23CCCCCC' stroke='%23666666'/%3e%3c/svg%3e\";\n  export default img;","import DrawPolygonSvg from '@/assets/annotation/toolHotKeyIcon/icon_line_kj.svg';\nimport MouseLeftSvg from '@/assets/annotation/toolHotKeyIcon/icon_mouse_left_kj.svg';\nimport LineNullKj from '@/assets/annotation/toolHotKeyIcon/icon_lineNull_kj.svg';\nimport StraightLineKj from '@/assets/annotation/toolHotKeyIcon/icon_straightLine_kj.svg';\nimport LineActiveKj from '@/assets/annotation/toolHotKeyIcon/icon_lineActive_kj.svg';\nimport MouseRightSvg from '@/assets/annotation/toolHotKeyIcon/icon_mouse_right_kj.svg';\nimport LineChangeKj from '@/assets/annotation/toolHotKeyIcon/icon_lineChange_kj.svg';\nimport DeletePointSvg from '@/assets/annotation/toolHotKeyIcon/icon_del_kj.svg';\nimport IconLineContKj from '@/assets/annotation/toolHotKeyIcon/icon_lineCont_kj.svg';\nimport LineInsertKj from '@/assets/annotation/toolHotKeyIcon/icon_lineInsert_kj.svg';\nimport LineDelKj from '@/assets/annotation/toolHotKeyIcon/icon_lineDel_kj.svg';\nimport IconUnGripKj from '@/assets/annotation/toolHotKeyIcon/icon_unGrip_kj.svg';\nimport Up from '@/assets/annotation/toolHotKeyIcon/icon_up.svg';\nimport Down from '@/assets/annotation/toolHotKeyIcon/icon_down.svg';\n\nimport {\n  // attributeClickLock,\n  // attributeLock,\n  backward,\n  // copyBackwardResult,\n  dargWithLeftClick,\n  dargWithRightClick,\n  forward,\n  // fullScreen,\n  restore,\n  revoke,\n  rotate,\n  scale,\n  setValid,\n  hidden,\n  tabChangeSelected,\n  tabReverseChangeSelected,\n  changeSpecialLine,\n  // saveResult,\n} from '../common';\n\nexport const line = {\n  name: 'AnnotateLine',\n  icon: DrawPolygonSvg,\n  shortCut: [MouseLeftSvg],\n};\n\nexport const invalidLine = {\n  name: 'AnnotateInvalidLine',\n  icon: LineNullKj,\n  shortCut: ['Ctrl', MouseLeftSvg],\n};\n\nexport const horizontalLine = {\n  name: 'HorizontalOrVertical',\n  icon: StraightLineKj,\n  shortCut: ['Shift', MouseLeftSvg],\n};\n\nexport const selectLine = {\n  name: 'SelectLine',\n  icon: LineActiveKj,\n  shortCut: [MouseRightSvg],\n};\n\nexport const changeLineAttribute = {\n  name: 'ToggleLineEffectiveness',\n  icon: LineChangeKj,\n  shortCut: ['F'],\n};\n\nexport const deleteLine = {\n  name: 'DeleteLine',\n  icon: DeletePointSvg,\n  noticeInfo: 'SelectAndDoubleClick',\n  shortCut: [MouseRightSvg],\n};\n\nexport const keepLine = {\n  name: 'ContinueToLabel',\n  icon: IconLineContKj,\n  noticeInfo: 'Select',\n  shortCut: ['Space'],\n};\n\nexport const insertPoint = {\n  name: 'InsertPoint',\n  icon: LineInsertKj,\n  noticeInfo: 'ClickOnLine',\n  shortCut: [MouseLeftSvg],\n};\n\nexport const deletePoint = {\n  name: 'DeletePoint',\n  icon: LineDelKj,\n  noticeInfo: 'DblClickOnPoint',\n  shortCut: [MouseRightSvg],\n};\n\nexport const suspendAbsorption = {\n  name: 'StopAdsorption',\n  icon: IconUnGripKj,\n  noticeInfo: 'Press',\n  shortCut: ['Alt'],\n};\n\nexport const preLine = {\n  name: 'PreviousLine',\n  icon: Up,\n  shortCut: ['W'],\n};\n\nexport const nextLine = {\n  name: 'NextLine',\n  icon: Down,\n  shortCut: ['S'],\n};\n\nconst lineToolShortCutTable = [\n  // saveResult,\n  line,\n  invalidLine,\n  horizontalLine,\n  selectLine,\n  changeLineAttribute,\n  deleteLine,\n  keepLine,\n  changeSpecialLine,\n  insertPoint,\n  deletePoint,\n  suspendAbsorption,\n  // attributeLock,\n  // attributeClickLock,\n  revoke,\n  restore,\n  rotate,\n  scale,\n  // fullScreen,\n  backward,\n  forward,\n  setValid,\n  // copyBackwardResult,\n  dargWithRightClick,\n  dargWithLeftClick,\n  hidden,\n  tabChangeSelected,\n  tabReverseChangeSelected,\n];\nexport default lineToolShortCutTable;\n  ","var img = \"data:image/svg+xml,%3csvg id='icon_lineNull_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b stroke: rgba(0%2c0%2c0%2c0)%3b stroke-miterlimit: 10%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_6' data-name='%e5%87%8f%e5%8e%bb 6' class='cls-2' d='M14710.063%2c1373.254h0l-1.063-1.059%2c2.184-2.182%2c1.062%2c1.061-2.18%2c2.181Zm5.009-5.009h0l-1.061-1.06%2c2.417-2.415%2c1.06%2c1.06-2.414%2c2.415Z' transform='translate(-14705.021 -1360.788)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.499' height='7.5' transform='translate(4.979 6.04) rotate(-45)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_straightLine_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b stroke: rgba(0%2c0%2c0%2c0)%3b stroke-miterlimit: 10%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_955' data-name='%e7%bb%84 955' transform='translate(-0.721)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(12.721 9.721) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(1.721 9.723) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.5' height='10.5' transform='translate(3.471 9.002) rotate(-90)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_lineActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: %23666%3b %7d .cls-4 %7b fill: white%3b stroke: %23707070%3b %7d .cls-5 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%9f%a9%e5%bd%a2_254' data-name='%e7%9f%a9%e5%bd%a2 254' class='cls-2' transform='translate(1.22 1.22)'%3e %3crect class='cls-5' width='14.4' height='14.4'/%3e %3crect class='cls-1' x='0.5' y='0.5' width='13.4' height='13.4'/%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' width='1.5' height='10.5' transform='translate(5.04 12.465) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-4' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-4' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_lineChange_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: %23666%3b %7d .cls-4 %7b clip-path: url(%23clip-path)%3b %7d .cls-5 %7b fill: white%3b stroke: %23707070%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_399' data-name='%e8%b7%af%e5%be%84 399' class='cls-1' d='M2.139-17.789H7.33L8-17.12H3.813l1.172%2c1.34h-1ZM7.5-18.627H2.306l-.67-.669H5.823l-1.172-1.34h1L7.5-18.627Z' transform='translate(-1.636 20.636)'/%3e %3c/clipPath%3e %3c/defs%3e %3cpath id='%e8%b7%af%e5%be%84_599' data-name='%e8%b7%af%e5%be%84 599' class='cls-2' d='M9.937%2c14.746h-7.9V1.654' transform='translate(-0.316)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' width='1.5' height='10.5' transform='translate(5.04 12.465) rotate(-135)'/%3e %3cpath id='%e8%b7%af%e5%be%84_598' data-name='%e8%b7%af%e5%be%84 598' class='cls-2' d='M2.035%2c1.654H15.557V9.5' transform='translate(-0.815)'/%3e %3cg id='%e7%bb%84_965' data-name='%e7%bb%84 965' transform='translate(8 31)'%3e %3cg id='%e7%bb%84_646' data-name='%e7%bb%84 646' class='cls-4' transform='translate(1.636 -20.636)'%3e %3cpath id='%e8%b7%af%e5%be%84_398' data-name='%e8%b7%af%e5%be%84 398' class='cls-3' d='M-3.364-25.636H6.07v7.927H-3.364Z' transform='translate(1.829 24.101)'/%3e %3c/g%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-5' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-5' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_lineInsert_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='4' height='4' transform='translate(10.222 10.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_lineDel_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: white%3b %7d .cls-3%2c .cls-4 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-5 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d .cls-6 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3cg id='%e7%9f%a9%e5%bd%a2_273' data-name='%e7%9f%a9%e5%bd%a2 273' class='cls-1' transform='translate(1.221 1.22)'%3e %3crect class='cls-6' width='14' height='14'/%3e %3crect class='cls-2' x='0.5' y='0.5' width='13' height='13'/%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-4' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-5' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_317' data-name='%e8%b7%af%e5%be%84 317' class='cls-1' d='M0%2c0H16V-16H0Z'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_319' data-name='%e8%b7%af%e5%be%84 319' class='cls-1' d='M14.656-8.831l-.462-4.884a.531.531%2c0%2c0%2c0-.478-.478l-4.884-.462H8.825a.16.16%2c0%2c0%2c0-.119.045L1.389-7.294a.156.156%2c0%2c0%2c0%2c0%2c.22L7.073-1.389a.155.155%2c0%2c0%2c0%2c.111.045A.155.155%2c0%2c0%2c0%2c7.3-1.389l7.317-7.317A.165.165%2c0%2c0%2c0%2c14.656-8.831ZM10.922-9.953a1%2c1%2c0%2c0%2c1-1-1%2c1%2c1%2c0%2c0%2c1%2c1-1%2c1%2c1%2c0%2c0%2c1%2c1%2c1A1%2c1%2c0%2c0%2c1%2c10.922-9.953Z'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_tag_kj' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_561' data-name='%e7%bb%84 561' class='cls-2'%3e %3cpath id='%e8%b7%af%e5%be%84_316' data-name='%e8%b7%af%e5%be%84 316' class='cls-3' d='M-5-21H21V5H-5Z'/%3e %3c/g%3e %3cg id='%e7%bb%84_562' data-name='%e7%bb%84 562' class='cls-4'%3e %3cpath id='%e8%b7%af%e5%be%84_318' data-name='%e8%b7%af%e5%be%84 318' class='cls-5' d='M-3.657-19.656H19.657V3.656H-3.657Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","import {\n  backward,\n  dargWithLeftClick,\n  dargWithRightClick,\n  forward,\n  fullScreen,\n  rotate,\n  saveResult,\n  scale,\n  setValid,\n} from '../common';\n\nconst textToolShortCutTable = [\n  saveResult,\n  scale,\n  rotate,\n  fullScreen,\n  setValid,\n  backward,\n  forward,\n  dargWithRightClick,\n  dargWithLeftClick,\n];\n\nexport default textToolShortCutTable;\n","import _ from 'lodash';\nimport {\n  rewind,\n  backward,\n  forward,\n  forwardForward,\n  fullScreen,\n  playPause,\n  speed,\n  saveResult,\n} from '../common';\nimport { tagInSingleImg } from '../tag';\nimport { IShortcut } from '@/types/tool';\n\nconst videoForward = _.cloneDeep(forward);\nconst videoBackward = _.cloneDeep(backward);\n\nvideoForward.name = 'NextFile';\nvideoBackward.name = 'PreviousFile';\n\nconst videoTagToolShortCurTable: IShortcut[] = [\n  saveResult,\n  tagInSingleImg,\n  playPause,\n  speed,\n  rewind,\n  forwardForward,\n  fullScreen,\n  videoBackward,\n  videoForward,\n];\n\nexport default videoTagToolShortCurTable;\n","import _ from 'lodash';\nimport { backward, forward, fullScreen, scale } from '../common';\nimport dragIcon from '@/assets/annotation/toolHotKeyIcon/icon_move_kj.svg';\nimport leftClick from '@/assets/annotation/toolHotKeyIcon/icon_mouse_left_kj.svg';\nimport rightClick from '@/assets/annotation/toolHotKeyIcon/icon_mouse_right_kj.svg';\nimport changePointCloudValid from '@/assets/annotation/pointCloudTool/changePointCloudValid.svg';\nimport copy from '@/assets/annotation/pointCloudTool/copy.svg';\nimport nextBox from '@/assets/annotation/pointCloudTool/nextBox.svg';\nimport paste from '@/assets/annotation/pointCloudTool/patse.svg';\nimport prevBox from '@/assets/annotation/pointCloudTool/prevBox.svg';\nimport rotate180_black from '@/assets/annotation/pointCloudTool/rotate180_black.svg';\nimport selectAll from '@/assets/annotation/pointCloudTool/selectAll.svg';\nimport selectMultiple from '@/assets/annotation/pointCloudTool/selectMultiple.svg';\nimport TabChangeSelectedSvg from '@/assets/annotation/toolHotKeyIcon/icon_tab_kj.svg';\nimport DeleteSvg from '@/assets/annotation/toolHotKeyIcon/icon_del_kj.svg';\nimport LassoSelectorSvg from '@/assets/annotation/pointCloudTool/lassoSelector.svg';\nimport CirCleSelectorSvg from '@/assets/annotation/pointCloudTool/circleSelector.svg';\nimport AddSvg from '@/assets/annotation/pointCloudTool/addSvg.svg';\nimport ClearSvg from '@/assets/annotation/pointCloudTool/clearSvg.svg';\n\nimport { IShortcut } from '@/types/tool';\nimport React from 'react';\nimport { ReloadOutlined, RotateLeftOutlined, RotateRightOutlined } from '@ant-design/icons';\nimport {\n  polygon,\n  invalidPolygon,\n  selectedPolygon,\n  changePolygonAttribute,\n  deletePolygon,\n  insertPolygonPoint,\n  deletePolygonPoint,\n} from '../polygon';\n\nconst changePointSize: IShortcut = {\n  name: 'PointThickness',\n  icon: (\n    <span\n      style={{\n        display: ' inline-block',\n        width: 14,\n        height: 14,\n        borderRadius: '50%',\n        border: '1px solid',\n      }}\n    />\n  ),\n  shortCut: ['+', '-'],\n  linkSymbol: '',\n};\n\nconst rotateRoundCenter: IShortcut = {\n  name: 'RotateAroundCenterPoint',\n  icon: <ReloadOutlined />,\n  shortCut: [leftClick],\n  noticeInfo: 'DragOperation',\n};\n\nconst Drag3D = {\n  name: 'PointCloudViewTranslate',\n  icon: dragIcon,\n  shortCut: [rightClick],\n  noticeInfo: 'Drag',\n};\n\nconst DragTopView = {\n  name: 'TopViewTranslate',\n  icon: dragIcon,\n  shortCut: [rightClick],\n};\n\nconst ChangeInvalid = {\n  name: 'ChangePointCloudValid',\n  icon: changePointCloudValid,\n  shortCut: ['V'],\n};\n\nconst CopyBox = {\n  name: 'CopyBox',\n  icon: copy,\n  shortCut: ['Ctrl', 'C'],\n};\n\nconst PasteBox = {\n  name: 'PasteBox',\n  icon: paste,\n  shortCut: ['Ctrl', 'V'],\n};\n\nconst LeftRotate = {\n  name: 'RotateLeft',\n  icon: <RotateLeftOutlined />,\n  shortCut: ['Q'],\n};\n\nconst RightRotate = {\n  name: 'RotateRight',\n  icon: <RotateRightOutlined />,\n  shortCut: ['E'],\n};\n\nconst PrevBox = {\n  name: 'PreviousBox',\n  icon: prevBox,\n  shortCut: ['Shift', 'Tab'],\n};\n\nconst NextBox = {\n  name: 'NextBox',\n  icon: nextBox,\n  shortCut: ['Tab'],\n};\n\nconst Rotate180 = {\n  name: 'Rotate180',\n  icon: rotate180_black,\n  shortCut: ['G'],\n  noticeInfo: 'SelectedStatus',\n};\n\nconst CopyPrevPage = {\n  name: 'CopyPrevPage',\n  icon: copy,\n  shortCut: ['Alt', 'C'],\n};\n\nconst ChangeBoxInvalid = {\n  name: 'ChangeBoxValid',\n  icon: TabChangeSelectedSvg,\n  shortCut: ['F'],\n  noticeInfo: 'SelectedStatus',\n};\n\nconst SelectMulti = {\n  name: 'MultiSelect',\n  icon: selectMultiple,\n  shortCut: ['Ctrl', rightClick],\n};\n\nconst SelectAll = {\n  name: 'SelectAllBox',\n  icon: selectAll,\n  shortCut: ['Ctrl', 'A'],\n};\n\nconst deleteBox = {\n  name: 'Delete',\n  icon: DeleteSvg,\n  shortCut: ['Del'],\n  noticeInfo: 'SelectedStatus',\n};\n\n/**\n * PointCloud Segment.\n */\n\nconst LassoSelector = {\n  name: 'LassoSelector',\n  icon: LassoSelectorSvg,\n  shortCut: ['H'],\n  noticeInfo: 'SelectorMsg'\n};\n\nconst CircleSelector = {\n  name: 'CircleSelector',\n  icon: CirCleSelectorSvg,\n  shortCut: ['J'],\n  noticeInfo: 'SelectorMsg'\n};\n\nconst Drag3DBySpace = {\n  name: 'PointCloudViewTranslate',\n  icon: dragIcon,\n  shortCut: ['space', rightClick],\n};\n\nconst AddMove = {\n  name: 'AddPoint',\n  icon: AddSvg,\n  shortCut: ['U'],\n};\n\nconst DeletePoint = {\n  name: 'DeletePoint',\n  icon: ClearSvg,\n  shortCut: ['I'],\n};\n\nconst pointCloudShortCutTable: IShortcut[] = [\n  { name: 'GeneralOperation' },\n  backward,\n  forward,\n  changePointSize,\n  scale,\n  rotateRoundCenter,\n  Drag3D,\n  DragTopView,\n  ChangeInvalid,\n  { name: 'RectPattern' },\n  CopyBox,\n  PasteBox,\n  LeftRotate,\n  RightRotate,\n  PrevBox,\n  NextBox,\n  Rotate180,\n  CopyPrevPage,\n  ChangeBoxInvalid,\n  deleteBox,\n  SelectMulti,\n  SelectAll,\n  fullScreen,\n];\n\nconst pointCloudShortCutTable_POLYGON: IShortcut[] = [\n  { name: 'GeneralOperation' },\n  backward,\n  forward,\n  changePointSize,\n  scale,\n  rotateRoundCenter,\n  Drag3D,\n  DragTopView,\n  ChangeInvalid,\n  { name: 'PolygonPattern' },\n  polygon,\n  invalidPolygon,\n  selectedPolygon,\n  changePolygonAttribute,\n  deletePolygon,\n  insertPolygonPoint,\n  deletePolygonPoint,\n];\n\nconst pointCloudShortCutTable_SEGMENT: IShortcut[] = [\n  backward,\n  forward,\n  rotateRoundCenter,\n  Drag3DBySpace,\n  LassoSelector,\n  CircleSelector,\n  AddMove,\n  DeletePoint,\n];\n\nexport default pointCloudShortCutTable;\n\nexport { pointCloudShortCutTable_POLYGON, pointCloudShortCutTable_SEGMENT };\n","var img = \"data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect x='4.81982' y='12.3096' width='1.49968' height='10.4997' transform='rotate(-135 4.81982 12.3096)' fill='%23666666'/%3e%3cg clip-path='url(%23clip0_90_7913)'%3e%3cg clip-path='url(%23clip1_90_7913)'%3e%3cmask id='mask0_90_7913' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='9' y='10' width='7' height='6'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.91842 13.0569L15.1098 13.0582L15.7797 13.7267H11.5931L12.7653 15.0664H11.7605L9.91842 13.0569ZM15.2773 12.2195L10.0859 12.2182L9.41602 11.5497H13.6026L12.4304 10.21H13.4351L15.2772 12.2195H15.2773Z' fill='white'/%3e%3c/mask%3e%3cg mask='url(%23mask0_90_7913)'%3e%3cpath d='M7.88104 8.6748H17.3149V16.6014H7.88104V8.6748Z' fill='%23666666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3crect x='14.0015' y='5.06738' width='2.99984' height='2.99984' transform='rotate(180 14.0015 5.06738)' fill='white' stroke='%23707070'/%3e%3crect x='5.00146' y='14.0674' width='2.99984' height='2.99984' transform='rotate(180 5.00146 14.0674)' fill='white' stroke='%23707070'/%3e%3cdefs%3e%3cclipPath id='clip0_90_7913'%3e%3crect width='6.36365' height='4.85646' fill='white' transform='translate(9.41602 10.21)'/%3e%3c/clipPath%3e%3cclipPath id='clip1_90_7913'%3e%3crect width='6.36365' height='4.85646' fill='white' transform='translate(9.41602 10.21)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M10.7292 4.8335H2.60419C2.08642 4.8335 1.66669 5.25323 1.66669 5.771V13.896C1.66669 14.4138 2.08642 14.8335 2.60419 14.8335H10.7292C11.247 14.8335 11.6667 14.4138 11.6667 13.896V5.771C11.6667 5.25323 11.247 4.8335 10.7292 4.8335Z' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M7.63151 12.7676L1.10109 5.19533C0.858489 4.91296 1.07723 4.49935 1.46897 4.49935H14.5298C14.9215 4.49935 15.1403 4.91296 14.8977 5.19533L8.36727 12.7676C8.18035 12.9844 7.81843 12.9844 7.6315 12.7676H7.63151Z' fill='%23666666'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' fill='%23CCCCCC'/%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M10.7292 4.8335H2.60419C2.08642 4.8335 1.66669 5.25323 1.66669 5.771V13.896C1.66669 14.4138 2.08642 14.8335 2.60419 14.8335H10.7292C11.247 14.8335 11.6667 14.4138 11.6667 13.896V5.771C11.6667 5.25323 11.247 4.8335 10.7292 4.8335Z' fill='%23CCCCCC' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M7.63151 4.23239L1.10109 11.8047C0.858489 12.087 1.07723 12.5006 1.46897 12.5006H14.5298C14.9215 12.5006 15.1403 12.087 14.8977 11.8047L8.36727 4.23239C8.18035 4.01564 7.81843 4.01564 7.6315 4.23239H7.63151Z' fill='%23666666'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M14.0606 2.74219V5.16642H11.6364' stroke='%23666666' stroke-width='0.8' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M14.6667 8.50016C14.6667 12.1821 11.6819 15.1668 8.00002 15.1668C4.31812 15.1668 1.33335 12.1821 1.33335 8.50016C1.33335 4.81826 4.31812 1.8335 8.00002 1.8335C10.4674 1.8335 12.6217 3.17387 13.7744 5.1662' stroke='%23666666' stroke-width='1.3' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M4.219 11V6.016H3.281L2.518 6.611V7.661L3.281 7.115V11H4.219ZM7.6968 9.572C7.6968 9.299 7.6758 9.012 7.5638 8.781C7.4938 8.641 7.3958 8.529 7.2628 8.424C7.3818 8.326 7.4658 8.221 7.5288 8.095C7.6408 7.857 7.6618 7.612 7.6618 7.353C7.6618 6.926 7.5918 6.562 7.3048 6.275C7.0878 6.058 6.7798 5.96 6.4438 5.96C6.1078 5.96 5.8138 6.058 5.5968 6.275C5.3098 6.562 5.2398 6.926 5.2398 7.353C5.2398 7.612 5.2608 7.857 5.3728 8.095C5.4358 8.221 5.5198 8.326 5.6388 8.424C5.5058 8.529 5.4078 8.641 5.3378 8.781C5.2258 9.012 5.2048 9.299 5.2048 9.572C5.2048 10.041 5.2328 10.412 5.5618 10.734C5.7858 10.951 6.1148 11.056 6.4508 11.056C6.7868 11.056 7.1158 10.951 7.3398 10.734C7.6688 10.412 7.6968 10.041 7.6968 9.572ZM6.7588 9.523C6.7588 9.656 6.7728 9.978 6.6748 10.111C6.6258 10.174 6.5418 10.216 6.4508 10.216C6.3598 10.216 6.2758 10.181 6.2268 10.111C6.1288 9.971 6.1428 9.656 6.1428 9.523C6.1428 9.39 6.1218 9.061 6.2268 8.921C6.2758 8.851 6.3598 8.816 6.4508 8.816C6.5418 8.816 6.6188 8.851 6.6748 8.921C6.7798 9.061 6.7588 9.39 6.7588 9.523ZM6.7238 7.402C6.7238 7.528 6.7518 7.843 6.6258 7.969C6.5838 8.011 6.5208 8.032 6.4508 8.032C6.3808 8.032 6.3248 8.011 6.2758 7.969C6.1428 7.85 6.1778 7.528 6.1778 7.402C6.1778 7.283 6.1568 7.003 6.2548 6.884C6.3038 6.828 6.3738 6.8 6.4508 6.8C6.5278 6.8 6.5978 6.828 6.6468 6.884C6.7448 7.003 6.7238 7.283 6.7238 7.402ZM10.6496 9.838V7.178C10.6496 6.744 10.5306 6.492 10.3066 6.282C10.0826 6.065 9.75359 5.96 9.41759 5.96C9.08159 5.96 8.75259 6.065 8.52859 6.282C8.30459 6.492 8.18559 6.744 8.18559 7.178V9.838C8.18559 10.272 8.30459 10.524 8.52859 10.734C8.75259 10.951 9.08159 11.056 9.41759 11.056C9.75359 11.056 10.0826 10.951 10.3066 10.734C10.5306 10.524 10.6496 10.272 10.6496 9.838ZM9.71159 9.873C9.71159 10.104 9.58559 10.216 9.41759 10.216C9.24959 10.216 9.12359 10.104 9.12359 9.873V7.143C9.12359 6.912 9.24959 6.8 9.41759 6.8C9.58559 6.8 9.71159 6.912 9.71159 7.143V9.873ZM13.6304 7.129C13.6304 6.443 13.0774 5.89 12.3914 5.89C11.7054 5.89 11.1524 6.443 11.1524 7.129C11.1524 7.815 11.7054 8.368 12.3914 8.368C13.0774 8.368 13.6304 7.815 13.6304 7.129ZM12.8044 7.129C12.8044 7.36 12.6224 7.542 12.3914 7.542C12.1604 7.542 11.9784 7.36 11.9784 7.129C11.9784 6.898 12.1604 6.716 12.3914 6.716C12.6224 6.716 12.8044 6.898 12.8044 7.129Z' fill='%23666666'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.3334 2.1665H2.66669C2.1144 2.1665 1.66669 2.61422 1.66669 3.1665V11.8332C1.66669 12.3855 2.1144 12.8332 2.66669 12.8332H11.3334C11.8857 12.8332 12.3334 12.3855 12.3334 11.8332V3.1665C12.3334 2.61422 11.8857 2.1665 11.3334 2.1665Z' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3cpath d='M14.6666 4.83398V14.5C14.6666 14.8682 14.3681 15.1667 13.9999 15.1667H4.33447' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M4.33331 7.32861L6.33321 9.17031L9.66665 5.73975' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M14 7.16667V13.5C14 14.0523 13.5523 14.5 13 14.5H3C2.44772 14.5 2 14.0523 2 13.5V3.5C2 2.94772 2.44772 2.5 3 2.5H10' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M5.33331 7.16683L8.66665 9.8335L13.6666 2.8335' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='9.201172' height='9.200073' viewBox='0 0 9.20117 9.20007' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cpath id='Exclude' d='M8.20117 5.59998L5.60156 5.59998L5.60156 8.20007C5.60156 8.75232 5.15234 9.20007 4.60156 9.20007C4.04883 9.20007 3.60156 8.75232 3.60156 8.20007L3.60156 5.59998L1 5.59998C0.449219 5.59998 0 5.15234 0 4.59998C0 4.04773 0.449219 3.59998 1 3.59998L3.60156 3.59998L3.60156 1C3.60156 0.447754 4.04883 0 4.60156 0C5.15234 0 5.60156 0.447754 5.60156 1L5.60156 3.59998L8.20117 3.59998C8.75391 3.59998 9.20117 4.04773 9.20117 4.59998C9.20117 5.15234 8.75391 5.59998 8.20117 5.59998Z' fill-rule='evenodd' fill='%23999999'/%3e %3cdefs/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='10.000000' height='2.000000' viewBox='0 0 10 2' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cpath id='%e6%b7%bb%e5%8a%a0' d='M4.44434 0L5.55566 0L9.44434 0C9.75146 0 10 0.447754 10 1C10 1.55225 9.75146 2 9.44434 2L5.55566 2L4.44434 2L0.555664 2C0.248535 2 0 1.55225 0 1C0 0.447754 0.248535 0 0.555664 0L4.44434 0Z' fill-rule='evenodd' fill='%23464A53'/%3e %3cdefs/%3e%3c/svg%3e\";\n  export default img;","import {\n  backward,\n  dargWithRightClick,\n  forward,\n  // fullScreen,\n  restore,\n  revoke,\n  rotate,\n  setValid,\n  scale,\n  // attributeClickLock,\n  // attributeLock,\n  // copyBackwardResult,\n  // hidden,\n  // changeSpecialLine,\n  saveResult,\n  // dargWithLeftClick,\n} from '../common';\n\nconst scribbleShortCutTable = [\n  scale,\n  saveResult,\n  restore,\n  revoke,\n  rotate,\n  backward,\n  forward,\n  dargWithRightClick,\n  setValid,\n  // copyBackwardResult,\n];\n\nexport default scribbleShortCutTable;\n","import {\n  backward,\n  dargWithRightClick,\n  forward,\n  restore,\n  revoke,\n  rotate,\n  setValid,\n  hidden,\n  scale,\n  saveResult,\n} from '../common';\nimport {\n  changeValid,\n  changeValidByClick,\n  selectRect,\n  deleteRect,\n  drawInvalidRect,\n  drawRect,\n} from '../rectToolShortCutTable';\n\nconst cuboidShortCutTable = [\n  backward,\n  forward,\n\n  // Temporary reuse of react tool icons\n  drawRect,\n  drawInvalidRect,\n  dargWithRightClick,\n  selectRect,\n  deleteRect,\n  changeValid,\n  changeValidByClick,\n\n  scale,\n  saveResult,\n  restore,\n  revoke,\n  rotate,\n  setValid,\n  hidden,\n];\n\nexport default cuboidShortCutTable;\n","import { backward, forward } from '../common';\nimport ForwardSvg from '@/assets/annotation/toolHotKeyIcon/icon_next_kj.svg';\n\nexport const forwardWithEnter = {\n  name: 'Save',\n  icon: ForwardSvg,\n  shortCut: ['Ctrl', 'Enter'],\n};\n\nconst LLMShortCutTable = [backward, forward, forwardWithEnter];\n\nexport default LLMShortCutTable;\n","import React, { useEffect, useState } from 'react';\nimport { AppState } from '@/store';\nimport { connect } from 'react-redux';\nimport { ToolInstance } from '@/store/annotation/types';\nimport { Divider } from 'antd/es';\nimport { useTranslation } from 'react-i18next';\nimport { LabelBeeContext } from '@/store/ctx';\n\ninterface IProps {\n  toolInstance: ToolInstance;\n}\n\nconst HiddenTips = (props: IProps) => {\n  const { toolInstance } = props;\n  const [_, forceRender] = useState(0);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (toolInstance) {\n      toolInstance.singleOn('hiddenChange', () => {\n        forceRender((s) => s + 1);\n      });\n    }\n  }, [toolInstance]);\n\n  if (!toolInstance) {\n    return null;\n  }\n\n  const isHidden = toolInstance.isHidden;\n\n  if (isHidden) {\n    return (\n      <span>\n        {t('HideDrawnAnnotation')}\n        <Divider type='vertical' style={{ background: 'rgba(153, 153, 153, 1)', height: '16px' }} />\n      </span>\n    );\n  }\n\n  return null;\n};\n\nconst mapStateToProps = (state: AppState) => {\n  return {\n    toolInstance: state.annotation?.toolInstance,\n  };\n};\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(HiddenTips);\n","import React, { useContext, useEffect, useState } from 'react';\nimport { AppState } from '@/store';\nimport { connect } from 'react-redux';\nimport { GraphToolInstance } from '@/store/annotation/types';\nimport { Divider } from 'antd/es';\nimport { useTranslation } from 'react-i18next';\nimport { LabelBeeContext } from '@/store/ctx';\nimport { PointCloudContext } from '@/components/pointCloudView/PointCloudContext';\nimport { EPointCloudPattern } from '@labelbee/lb-utils';\n\ninterface IProps {\n  toolInstance: GraphToolInstance;\n}\n\nconst PageNumber = (props: IProps) => {\n  const { toolInstance } = props;\n  const [_, forceRender] = useState(0);\n  const { pointCloudBoxList, segmentation, globalPattern } = useContext(PointCloudContext);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (toolInstance) {\n      toolInstance.singleOn('updatePageNumber', () => {\n        forceRender((s) => s + 1);\n      });\n    }\n  }, [toolInstance]);\n\n  if (!toolInstance) {\n    return null;\n  }\n\n  const count = toolInstance?.currentPageResult?.length ?? (globalPattern === EPointCloudPattern.Detection ? pointCloudBoxList.length : segmentation.length);\n\n  if (count >= 0) {\n    return (\n      <span>\n        {`${t('ItemsOfThisPage')}: ${count}`}\n        <Divider type='vertical' style={{ background: 'rgba(153, 153, 153, 1)', height: '16px' }} />\n      </span>\n    );\n  }\n\n  return null;\n};\n\nconst mapStateToProps = (state: AppState) => {\n  return {\n    toolInstance: state.annotation?.toolInstance,\n  };\n};\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(PageNumber);\n","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_adapt' transform='translate(-1021.825 -996)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_200' data-name='%e7%9f%a9%e5%bd%a2 200' class='cls-1' width='16' height='16' transform='translate(1021.825 996)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_191' data-name='%e7%9f%a9%e5%bd%a2 191' class='cls-2' width='8' height='7' transform='translate(1025.825 1000.167)'/%3e %3cpath id='%e8%81%94%e5%90%88_5' data-name='%e8%81%94%e5%90%88 5' class='cls-2' d='M3%2c4V1H0V0H4V4Z' transform='translate(1033.825 997)'/%3e %3cpath id='%e8%81%94%e5%90%88_7' data-name='%e8%81%94%e5%90%88 7' class='cls-2' d='M0%2c4V3H3V0H4V4Z' transform='translate(1025.825 1001.001) rotate(180)'/%3e %3cpath id='%e8%81%94%e5%90%88_8' data-name='%e8%81%94%e5%90%88 8' class='cls-2' d='M3%2c4V1H0V0H4V4Z' transform='translate(1025.825 1010.335) rotate(180)'/%3e %3cpath id='%e8%81%94%e5%90%88_6' data-name='%e8%81%94%e5%90%88 6' class='cls-2' d='M0%2c4V0H4V1H1V4Z' transform='translate(1037.824 1010.335) rotate(180)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12 4.16699H4V11.167H12V4.16699Z' fill='%23707070'/%3e%3cpath d='M15 5V2H12V1H16V5H15Z' fill='%23707070'/%3e%3cpath d='M4 1.00098V2.00098L1 2.00098L1 5.00098L0 5.00098L0 1.00098L4 1.00098Z' fill='%23707070'/%3e%3cpath d='M1 10.335L1 13.335H4V14.335H0L0 10.335H1Z' fill='%23707070'/%3e%3cpath d='M16 10.335V14.335H12V13.335H15V10.335H16Z' fill='%23707070'/%3e%3c/svg%3e\";\n  export default img;","import React, { useEffect } from 'react';\nimport { AppState } from '@/store';\nimport { ToolInstance } from '@/store/annotation/types';\nimport { connect } from 'react-redux';\nimport useSafeState from '@/hooks/useSafeSate';\nimport { LabelBeeContext } from '@/store/ctx';\n\ninterface IProps {\n  toolInstance: ToolInstance;\n  zoom?: number;\n}\n\nconst ZoomLevel: React.FC<IProps> = ({ toolInstance, zoom: basicZoom }) => {\n  const [, forceRender] = useSafeState<number>(0);\n  useEffect(() => {\n    const renderZoom = () => {\n      forceRender((s) => s + 1);\n    };\n\n    if (toolInstance) {\n      // 这里会有内存泄漏的问题  useSafeState 用这个解决下\n      toolInstance.on('renderZoom', renderZoom);\n    }\n    return () => {\n      if (toolInstance) {\n        toolInstance.unbind('renderZoom', renderZoom);\n      }\n    };\n  }, [toolInstance]);\n\n  const zoom = basicZoom ?? toolInstance?.zoom ?? 1;\n\n  return <span className='zoomValue'>{(zoom * 100).toFixed(1)}%</span>;\n};\n\nconst mapStateToProps = (state: AppState) => ({\n  toolInstance: state.annotation.toolInstance,\n});\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(ZoomLevel);\n","import React, { Dispatch, SetStateAction } from 'react';\nimport useUnmountedRef from './useUnmountedRef';\n\nfunction useSafeState<S>(initialState: S | (() => S)): [S, Dispatch<SetStateAction<S>>];\n\nfunction useSafeState<S = undefined>(): [S | undefined, Dispatch<SetStateAction<S | undefined>>];\n\nfunction useSafeState(initialState?: any) {\n  const unmountedRef = useUnmountedRef();\n  const [state, setState] = React.useState(initialState);\n  const setCurrentState = React.useCallback((currentState) => {\n    /** 如果组件已经卸载则不再更新 state */\n    if (unmountedRef.current) return;\n    setState(currentState);\n  }, []);\n\n  return [state, setCurrentState] as const;\n}\n\nexport default useSafeState;\n","import { useRef, useEffect } from 'react';\n\nconst useUnmountedRef = () => {\n  const unmountedRef = useRef(false);\n  useEffect(() => {\n    unmountedRef.current = false;\n\n    return () => {\n      unmountedRef.current = true;\n    };\n  }, []);\n  return unmountedRef;\n};\n\nexport default useUnmountedRef;\n","import { jsonParser } from '@/utils';\nimport { getStepConfig } from './reducer';\nimport { AnnotationState } from './types';\n\n/**\n * select current step config\n */\nexport const stepConfigSelector = ({ annotation }: { annotation: AnnotationState }) => {\n  const { stepList, step } = annotation;\n  return jsonParser(getStepConfig(stepList, step)?.config);\n};\n","import { ESubmitType, prefix } from '@/constant';\nimport { EToolName } from '@/data/enums/ToolType';\nimport useSize from '@/hooks/useSize';\nimport { AppState } from '@/store';\nimport { loadImgList, ToNextStep, ToSubmitFileData } from '@/store/annotation/actionCreators';\nimport { IFileItem } from '@/types/data';\nimport { Header } from '@/types/main';\nimport { IStepInfo } from '@/types/step';\nimport { LeftOutlined } from '@ant-design/icons';\nimport { AnnotationEngine } from '@labelbee/lb-annotation';\nimport { i18n } from '@labelbee/lb-utils';\nimport { Button, Tooltip } from 'antd/es';\nimport classNames from 'classnames';\nimport { last } from 'lodash';\nimport React, { useReducer, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport { useDispatch, LabelBeeContext } from '@/store/ctx';\nimport { store } from '@/index';\nimport ExportData from './ExportData';\nimport HeaderOption from './headerOption';\nimport StepSwitch from './StepSwitch';\nimport PredictTrackingIcon from '@/components/predictTracking/predictTrackingIcon';\nimport SwitchPattern from './SwitchPattern';\n\ninterface INextStep {\n  stepProgress: number;\n  stepList: IStepInfo[];\n  step: number; // 当前步骤\n  imgList: IFileItem[];\n}\n\nconst NextButton: React.FC<{ disabled: boolean; imgList: IFileItem[] }> = ({\n  disabled,\n  imgList,\n}) => {\n  const { t } = useTranslation();\n\n  const toNext = () => {\n    const { dispatch, getState } = store;\n    // 点击下一步跳转到第一页 第一页没有图片的话则需要先加载图片\n    if (imgList[0]) {\n      dispatch(ToNextStep(0) as any);\n    } else {\n      loadImgList(dispatch, getState, 0).then((isSuccess) => {\n        if (isSuccess) {\n          dispatch(ToNextStep(0) as any);\n        }\n      });\n    }\n  };\n\n  return (\n    <Button\n      type='primary'\n      style={{\n        marginLeft: 10,\n      }}\n      onClick={toNext}\n      disabled={disabled}\n    >\n      {t('NextStep')}\n    </Button>\n  );\n};\n\nconst NextStep: React.FC<INextStep> = ({ step, stepProgress, stepList, imgList }) => {\n  const { t } = useTranslation();\n  // 最后一步不显示下一步按钮\n  const lastStep = last(stepList)?.step;\n\n  if (stepList.length < 2 || step === lastStep) {\n    return null;\n  }\n\n  const disabled = stepProgress < 1;\n\n  if (disabled) {\n    return (\n      <Tooltip title={t('StepNotFinishedNotify')}>\n        <span>\n          <NextButton disabled={disabled} imgList={imgList} />\n        </span>\n      </Tooltip>\n    );\n  }\n\n  return <NextButton disabled={disabled} imgList={imgList} />;\n};\n\ninterface IToolHeaderProps {\n  goBack?: (imgList?: IFileItem[]) => void;\n  exportData?: (data: any[]) => void;\n  header?: Header;\n  headerName?: string;\n  imgList: IFileItem[];\n  annotationEngine: AnnotationEngine;\n  stepProgress: number;\n  toolName: EToolName;\n  stepInfo: IStepInfo;\n  stepList: IStepInfo[];\n  step: number;\n  hasLangNode: boolean;\n  hasHeaderOption: boolean;\n  hasPredictTrackingIcon: boolean;\n}\n\nconst ToolHeader: React.FC<IToolHeaderProps> = ({\n  goBack,\n  exportData,\n  header,\n  headerName,\n  imgList,\n  stepProgress,\n  stepInfo,\n  stepList,\n  step,\n  annotationEngine,\n  hasLangNode,\n  hasHeaderOption,\n  hasPredictTrackingIcon,\n}) => {\n  const dispatch = useDispatch();\n  const [, forceUpdate] = useReducer((x) => x + 1, 0);\n  const ref = useRef(null);\n\n  const size = useSize(ref);\n\n  // render 数据展示\n  const currentOption = <ExportData exportData={exportData} />;\n\n  const closeAnnotation = () => {\n    dispatch(ToSubmitFileData(ESubmitType.Quit));\n\n    if (goBack) {\n      goBack(imgList);\n    }\n  };\n\n  const changeLanguage = (lang: 'en' | 'cn') => {\n    i18n.changeLanguage(lang);\n    annotationEngine?.setLang(lang);\n    forceUpdate();\n  };\n\n  const curLang = i18n.language;\n\n  const width = size?.width ?? window.innerWidth;\n\n  const backNode = <LeftOutlined className={`${prefix}-header__icon`} onClick={closeAnnotation} />;\n\n  const headerNameNode = headerName ? (\n    <span className={`${prefix}-header__name`}>{headerName}</span>\n  ) : (\n    ''\n  );\n\n  const stepListNode = stepList.length > 1 && (\n    <>\n      <StepSwitch stepProgress={stepProgress} />\n      <NextStep step={step} stepProgress={stepProgress} stepList={stepList} imgList={imgList} />\n    </>\n  );\n\n  const headerOptionNode = hasHeaderOption ? <HeaderOption stepInfo={stepInfo} /> : null;\n\n  const PointCloudSwitchPattern = SwitchPattern;\n\n  const langNode = (\n    <div className={`${prefix}-header__lang`}>\n      <span\n        className={`${prefix}-langCN ${curLang === 'cn' ? 'active' : ''}`}\n        onClick={() => changeLanguage('cn')}\n      >\n        中文\n      </span>\n      {` / `}\n      <span\n        className={`${prefix}-langEN ${curLang === 'en' ? 'active' : ''}`}\n        onClick={() => changeLanguage('en')}\n      >\n        En\n      </span>\n    </div>\n  );\n\n  const rightActions = (\n    <>\n      {hasPredictTrackingIcon && <PredictTrackingIcon />}\n      {hasLangNode && langNode}\n    </>\n  );\n\n  if (header) {\n    if (typeof header === 'function') {\n      return (\n        <div className={classNames(`${prefix}-header`)} ref={ref}>\n          <div className={`${prefix}-header__title`}>\n            {header({\n              backNode,\n              headerNameNode,\n              stepListNode,\n              headerOptionNode,\n              langNode: rightActions,\n              PointCloudSwitchPattern,\n            })}\n          </div>\n        </div>\n      );\n    } else {\n      return header;\n    }\n  }\n\n  return (\n    <div className={classNames(`${prefix}-header`)} ref={ref}>\n      <div className={`${prefix}-header__title`}>\n        {backNode}\n        {headerNameNode}\n        {stepListNode}\n        {currentOption}\n        <div\n          id='operationNode'\n          className={`${prefix}-header__operationNode`}\n          style={{ left: width / 2 - 174 / 2 }}\n        >\n          {headerOptionNode}\n        </div>\n        <div className={`${prefix}-header__titlePlacement`} />\n        <SwitchPattern />\n        {rightActions}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => ({\n  imgList: state.annotation.imgList,\n  annotationEngine: state.annotation.annotationEngine,\n  stepProgress: state.annotation.stepProgress,\n  toolName: state.annotation.stepList[state.annotation.step - 1]?.tool,\n  stepList: state.annotation.stepList,\n  stepInfo: state.annotation.stepList[state.annotation.step - 1],\n  step: state.annotation.step,\n});\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(ToolHeader);\n","import React from 'react';\nimport { Button } from 'antd/es';\nimport { AppState } from '@/store';\nimport { ToolInstance } from '@/store/annotation/types';\nimport { connect } from 'react-redux';\nimport { IFileItem, OnSubmit } from '@/types/data';\nimport { ANNOTATION_ACTIONS } from '@/store/Actions';\nimport { ESubmitType } from '@/constant';\nimport { Dispatch } from 'redux';\nimport { useTranslation } from 'react-i18next';\nimport { LabelBeeContext } from '@/store/ctx';\n\ninterface IProps {\n  toolInstance: ToolInstance;\n  imgList: IFileItem[];\n  onSubmit?: OnSubmit;\n  exportData?: (imgList: IFileItem[]) => void;\n  dispatch: Dispatch;\n}\n\nconst ExportData: React.FC<IProps> = ({ imgList, dispatch, onSubmit, exportData }) => {\n  const { t } = useTranslation();\n\n  if (!exportData) {\n    return null;\n  }\n\n  const exportDataFuc = () => {\n    dispatch({\n      type: ANNOTATION_ACTIONS.SUBMIT_FILE_DATA,\n      payload: {\n        submitType: ESubmitType.Export,\n      },\n    });\n\n    if (exportData) {\n      exportData(imgList);\n    }\n  };\n\n  return (\n    <Button style={{ marginLeft: 20 }} onClick={exportDataFuc}>\n      {t('Export')}\n    </Button>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => ({\n  toolInstance: state.annotation.toolInstance,\n  imgList: state.annotation.imgList,\n  onSubmit: state.annotation.onSubmit,\n});\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(ExportData);\n","import React, { useState, useCallback, useContext } from 'react';\nimport { useDispatch, useSelector } from '@/store/ctx';\nimport { AppState } from '@/store';\nimport rotateSvg from '@/assets/annotation/common/icon_r.svg';\nimport restoreSvg from '@/assets/annotation/common/icon_next.svg';\nimport revocationSvg from '@/assets/annotation/common/icon_back.svg';\nimport rotateHighlightSvg from '@/assets/annotation/common/icon_rA.svg';\nimport restoreHighlightSvg from '@/assets/annotation/common/icon_nextA.svg';\nimport revocationHighlightSvg from '@/assets/annotation/common/icon_backA.svg';\nimport saveSvg from '@/assets/annotation/common/icon_save.svg';\nimport saveLightSvg from '@/assets/annotation/common/icon_saveA.svg';\nimport { prefix } from '@/constant';\nimport { EToolName } from '@/data/enums/ToolType';\nimport { ChangeSave } from '@/store/annotation/actionCreators';\nimport { IStepInfo } from '@/types/step';\nimport { useTranslation } from 'react-i18next';\nimport { cTool } from '@labelbee/lb-annotation';\nimport { PointCloudContext } from '@/components/pointCloudView/PointCloudContext';\nimport { EPointCloudPattern } from '@labelbee/lb-utils';\nconst { EVideoToolName, EPointCloudName } = cTool;\n\ninterface IProps {\n  isBegin?: boolean;\n  stepInfo: IStepInfo;\n}\n\nenum EColor {\n  Hover = '#666fff',\n  Normal = '#999999',\n}\n\nconst HeaderOption: React.FC<IProps> = (props) => {\n  const [toolHover, setToolHover] = useState('');\n  const { stepInfo } = props;\n  const dispatch = useDispatch();\n  const {\n    annotation: { toolInstance, onSave },\n  } = useSelector((state: AppState) => ({\n    annotation: state.annotation,\n    imgAttribute: state.imgAttribute,\n  }));\n  const { globalPattern } = useContext(PointCloudContext);\n\n  const { t } = useTranslation();\n\n  const isTagTool = [EToolName.Tag, EVideoToolName.VideoTagTool].includes(stepInfo?.tool as any);\n  const isVideo = [EVideoToolName.VideoTagTool].includes(stepInfo?.tool as any);\n  const isPointCloud = [EPointCloudName.PointCloud].includes(stepInfo?.tool as any);\n\n  const isBegin = props.isBegin || isTagTool;\n\n  const updateRotate = () => {\n    /**\n     * 1. 非第一步无法旋转\n     * 2. 单步骤不存在 dataSourceStep\n     */\n    if (stepInfo.dataSourceStep !== 0 && stepInfo.dataSourceStep !== undefined) {\n      return;\n    }\n\n    toolInstance?.updateRotate();\n  };\n\n  const revocation = useCallback(() => {\n    toolInstance?.undo();\n  }, [toolInstance]);\n\n  const restore = useCallback(() => {\n    toolInstance?.redo();\n  }, [toolInstance]);\n\n  let commonOptionList: any = [\n    {\n      toolName: 'save',\n      title: 'Save',\n      show: !!onSave,\n      commonSvg: saveSvg,\n      selectedSvg: saveLightSvg,\n      click: () => {\n        dispatch(ChangeSave);\n      },\n      style: {\n        fontSize: '12px',\n        color: !isBegin && toolHover === 'save' ? EColor.Hover : EColor.Normal,\n      },\n    },\n    {\n      toolName: 'revocation',\n      title: 'Undo',\n      show: true,\n      commonSvg: revocationSvg,\n      selectedSvg: revocationHighlightSvg,\n      click: () => {\n        if (isTagTool) {\n          return;\n        }\n\n        revocation();\n      },\n      style: {\n        opacity: isBegin === true ? 0.4 : 1,\n        fontSize: '12px',\n        color: !isBegin && toolHover === 'revocation' ? EColor.Hover : EColor.Normal,\n      },\n    },\n    {\n      toolName: 'restore',\n      title: 'Redo',\n      show: true,\n      commonSvg: restoreSvg,\n      selectedSvg: restoreHighlightSvg,\n      click: () => {\n        if (isTagTool) {\n          return;\n        }\n\n        restore();\n      },\n      style: {\n        opacity: isBegin === true ? 0.4 : 1,\n        fontSize: '12px',\n        color: !isBegin && toolHover === 'restore' ? EColor.Hover : EColor.Normal,\n      },\n    },\n    {\n      toolName: 'rotate',\n      title: 'Rotate',\n      show: true,\n      selectedSvg: rotateHighlightSvg,\n      commonSvg: rotateSvg,\n      click: () => {\n        if (isVideo) {\n          // VideoTool don't need to rotate\n          return;\n        }\n\n        updateRotate();\n      },\n      style: {\n        opacity: isVideo === true ? 0.4 : 1,\n        fontSize: '12px',\n        color: !isBegin && toolHover === 'rotate' ? EColor.Hover : EColor.Normal,\n      },\n    },\n  ];\n\n  if (isPointCloud) {\n    switch (globalPattern) {\n      case EPointCloudPattern.Segmentation:\n        commonOptionList = commonOptionList.slice(0, 1);\n        break;\n      case EPointCloudPattern.Detection:\n        commonOptionList = commonOptionList.slice(0, 3);\n        break;\n    }\n  }\n\n  return (\n    <div className={`${prefix}-header__hotKey`}>\n      {commonOptionList.map((info: any) => {\n        return (\n          info.show && (\n            <div\n              key={info.toolName}\n              className='item'\n              onMouseEnter={() => setToolHover(info.toolName)}\n              onMouseLeave={() => setToolHover('')}\n            >\n              <a className='item' onClick={info.click}>\n                <img\n                  className='singleTool'\n                  src={toolHover === info.toolName ? info.selectedSvg : info.commonSvg}\n                  style={info.style}\n                />\n                <div style={info.style}>{t(info.title)}</div>\n              </a>\n            </div>\n          )\n        );\n      })}\n    </div>\n  );\n};\n\nexport default HeaderOption;\n","var img = \"data:image/svg+xml,%3csvg id='icon_r' xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22'/%3e %3cg id='reload' transform='translate(1 1)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-2' data-name='%e7%9f%a9%e5%bd%a2' class='cls-1' width='20' height='20'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M14.762%2c2.234l-1.032.84A7.56%2c7.56%2c0%2c0%2c0%2c7.68%2c0%2c7.84%2c7.84%2c0%2c0%2c0%2c0%2c7.99%2c7.845%2c7.845%2c0%2c0%2c0%2c7.68%2c16%2c7.709%2c7.709%2c0%2c0%2c0%2c14.9%2c10.741a.154.154%2c0%2c0%2c0-.09-.2l-1.037-.371a.145.145%2c0%2c0%2c0-.185.091c-.033.1-.07.19-.108.284a6.539%2c6.539%2c0%2c0%2c1-1.348%2c2.084%2c6.3%2c6.3%2c0%2c0%2c1-2%2c1.406%2c6.08%2c6.08%2c0%2c0%2c1-4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1-2-1.406%2c6.539%2c6.539%2c0%2c0%2c1-1.348-2.084%2c6.833%2c6.833%2c0%2c0%2c1%2c0-5.1A6.539%2c6.539%2c0%2c0%2c1%2c3.237%2c3.364a6.3%2c6.3%2c0%2c0%2c1%2c2-1.406%2c6.08%2c6.08%2c0%2c0%2c1%2c4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1%2c2%2c1.406%2c6.489%2c6.489%2c0%2c0%2c1%2c.508.6l-1.1.9a.155.155%2c0%2c0%2c0%2c.055.269l3.212.819a.148.148%2c0%2c0%2c0%2c.181-.147L15%2c2.352a.147.147%2c0%2c0%2c0-.238-.118Z' transform='translate(2 2)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='22.001' height='22.017' viewBox='0 0 22.001 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_next' transform='translate(-0.999)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(1 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.884%2c4.3C12.188-.639%2c6.625-1.322.4%2c2.294A.794.794%2c0%2c0%2c0%2c.39%2c3.665a.765.765%2c0%2c0%2c0%2c.781%2c0C6.8.387%2c11.616.983%2c15.831%2c5.467L12.41%2c9.255l7.109-.016.018-7.875Z' transform='translate(0.99 15.142) rotate(-42)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_back' xmlns='http://www.w3.org/2000/svg' width='22' height='22.017' viewBox='0 0 22 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(0 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.88%2c4.954C12.184%2c9.894%2c6.621%2c10.576.4%2c6.96A.794.794%2c0%2c0%2c1%2c.386%2c5.59a.765.765%2c0%2c0%2c1%2c.781%2c0C6.8%2c8.868%2c11.612%2c8.272%2c15.827%2c3.788L12.406%2c0l7.109.016.018%2c7.875Z' transform='translate(15.814 22.017) rotate(-138)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_rA' xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22'/%3e %3cg id='reload' transform='translate(1 1)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-2' data-name='%e7%9f%a9%e5%bd%a2' class='cls-1' width='20' height='20'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M14.762%2c2.234l-1.032.84A7.56%2c7.56%2c0%2c0%2c0%2c7.68%2c0%2c7.84%2c7.84%2c0%2c0%2c0%2c0%2c7.99%2c7.845%2c7.845%2c0%2c0%2c0%2c7.68%2c16%2c7.709%2c7.709%2c0%2c0%2c0%2c14.9%2c10.741a.154.154%2c0%2c0%2c0-.09-.2l-1.037-.371a.145.145%2c0%2c0%2c0-.185.091c-.033.1-.07.19-.108.284a6.539%2c6.539%2c0%2c0%2c1-1.348%2c2.084%2c6.3%2c6.3%2c0%2c0%2c1-2%2c1.406%2c6.08%2c6.08%2c0%2c0%2c1-4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1-2-1.406%2c6.539%2c6.539%2c0%2c0%2c1-1.348-2.084%2c6.833%2c6.833%2c0%2c0%2c1%2c0-5.1A6.539%2c6.539%2c0%2c0%2c1%2c3.237%2c3.364a6.3%2c6.3%2c0%2c0%2c1%2c2-1.406%2c6.08%2c6.08%2c0%2c0%2c1%2c4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1%2c2%2c1.406%2c6.489%2c6.489%2c0%2c0%2c1%2c.508.6l-1.1.9a.155.155%2c0%2c0%2c0%2c.055.269l3.212.819a.148.148%2c0%2c0%2c0%2c.181-.147L15%2c2.352a.147.147%2c0%2c0%2c0-.238-.118Z' transform='translate(2 2)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='22.001' height='22.017' viewBox='0 0 22.001 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_nextA' transform='translate(-0.999)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(1 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.884%2c4.3C12.188-.639%2c6.625-1.322.4%2c2.294A.794.794%2c0%2c0%2c0%2c.39%2c3.665a.765.765%2c0%2c0%2c0%2c.781%2c0C6.8.387%2c11.616.983%2c15.831%2c5.467L12.41%2c9.255l7.109-.016.018-7.875Z' transform='translate(0.99 15.142) rotate(-42)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg id='icon_backA' xmlns='http://www.w3.org/2000/svg' width='22' height='22.017' viewBox='0 0 22 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(0 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.88%2c4.954C12.184%2c9.894%2c6.621%2c10.576.4%2c6.96A.794.794%2c0%2c0%2c1%2c.386%2c5.59a.765.765%2c0%2c0%2c1%2c.781%2c0C6.8%2c8.868%2c11.612%2c8.272%2c15.827%2c3.788L12.406%2c0l7.109.016.018%2c7.875Z' transform='translate(15.814 22.017) rotate(-138)'/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3c!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg t='1632896115713' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='1995' width='22' height='22' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath d='M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184z m456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840z' p-id='1996' fill='%23666666'%3e%3c/path%3e%3cpath d='M512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144z m0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z' p-id='1997' fill='%23666666'%3e%3c/path%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3c!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg t='1632896115713' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='1995' width='22' height='22' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath d='M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184z m456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840z' p-id='1996' fill='%23666fff'%3e%3c/path%3e%3cpath d='M512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144z m0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z' p-id='1997' fill='%23666fff'%3e%3c/path%3e%3c/svg%3e\";\n  export default img;","/**\n * 用于多步骤中的切换\n */\n\nimport { Dropdown } from 'antd/es';\nimport { CaretDownOutlined, OrderedListOutlined } from '@ant-design/icons';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { useDispatch, LabelBeeContext } from '@/store/ctx';\n\nimport { AppState } from '@/store';\nimport IconWithText from '@/components/customAntd/IconWithText';\nimport { prefix } from '@/constant';\nimport AnnotationStepPopover from '@/components/annotationStepPopover';\nimport { IStepInfo } from '@/types/step';\nimport { UpdateProcessingStep } from '@/store/annotation/actionCreators';\nimport { useTranslation } from 'react-i18next';\n\ninterface IProps {\n  stepProgress: number;\n  stepList: IStepInfo[];\n  step: number;\n}\n\nconst StepSwitch: React.FC<IProps> = ({ stepProgress, step, stepList }) => {\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n  const updateStep = (toStep: number) => {\n    dispatch(UpdateProcessingStep(toStep));\n  };\n\n  return (\n    <span className={`${prefix}`}>\n      <Dropdown\n        overlay={\n          <AnnotationStepPopover stepList={stepList} updateStep={updateStep} currentStep={step} />\n        }\n      >\n        <IconWithText\n          text={t('Steps')}\n          Icon={OrderedListOutlined}\n          iconChildren={<CaretDownOutlined style={{ fontSize: 8 }} />}\n        />\n      </Dropdown>\n    </span>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => ({\n  stepList: state.annotation.stepList,\n  step: state.annotation.step,\n});\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(StepSwitch);\n","import { componentCls } from '@/constant';\nimport React from 'react';\n\ninterface IProps {\n  text: string; // icon 文本\n  Icon: any;\n  iconChildren: React.ReactNode;\n  marginLeft?: number;\n}\n\nconst IconWithText = (props: IProps) => {\n  const { Icon, text, iconChildren, ...otherProps } = props;\n\n  const marginLeft = props.marginLeft === undefined ? 30 : props.marginLeft;\n\n  return (\n    <div {...otherProps} className={componentCls} >\n      <div className={`${componentCls}__iconWithText`} style={{ marginLeft }}>\n        <div className='iconGroup'>\n          <Icon className='icon' />\n          {iconChildren}\n        </div>\n\n        <span className='name'>{text}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default IconWithText;\n","// 标注步骤中的 popover 的内容\n\nimport { componentCls } from '@/constant';\nimport { classnames } from '@/utils';\nimport React from 'react';\nimport { IStepInfo } from '@/types/step';\nimport { useTranslation } from 'react-i18next';\ninterface IProps {\n  stepList: IStepInfo[];\n  currentStep: number;\n  updateStep: (step: number) => void;\n}\n\nconst AnnotationStepPopover = (props: IProps) => {\n  const { t } = useTranslation();\n  const { stepList, updateStep, currentStep } = props;\n\n  return (\n    <div className={`${componentCls}__annotationStepPopover`}>\n      {stepList.map((info) => {\n        const isSelected = info.step === currentStep;\n\n        return (\n          <div\n            key={`stepList${info.step}`}\n            className={classnames({\n              step: true,\n            })}\n            onClick={() => {\n              if (currentStep && !isSelected) {\n                updateStep(info.step);\n              }\n            }}\n          >\n            <div\n              className={classnames({\n                name: true,\n                highlight: isSelected,\n              })}\n            >\n              {`${info.step} - ${info.name || t(info.tool)}`}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default AnnotationStepPopover;\n","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='19' height='19' viewBox='0 0 19 19'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23797979%3b stroke: rgba(0%2c0%2c0%2c0)%3b stroke-miterlimit: 10%3b %7d .cls-2 %7b fill: none%3b opacity: 0.3%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_buquan' transform='translate(0.501 0.5)'%3e %3cpath id='Clip_2' data-name='Clip 2' class='cls-2' d='M0%2c0H18V18H0Z'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_15' data-name='%e5%87%8f%e5%8e%bb 15' class='cls-1' d='M473.725%2c6954H462.273a1.561%2c1.561%2c0%2c0%2c1-1.159-.529%2c1.88%2c1.88%2c0%2c0%2c1-.48-1.272v-.9h-.815a.809.809%2c0%2c0%2c1-.585-.271.9.9%2c0%2c0%2c1-.236-.6V6947.7a.863.863%2c0%2c0%2c1%2c.819-.9h.817c0-3.474%2c2.569-6.3%2c5.726-6.3h.824v-1.143a1.83%2c1.83%2c0%2c0%2c1-.819-1.557%2c1.914%2c1.914%2c0%2c0%2c1%2c.48-1.274%2c1.532%2c1.532%2c0%2c0%2c1%2c2.312%2c0%2c1.9%2c1.9%2c0%2c0%2c1%2c.48%2c1.272%2c1.836%2c1.836%2c0%2c0%2c1-.817%2c1.559v1.141h.817a6.041%2c6.041%2c0%2c0%2c1%2c5.726%2c6.3h.819a.862.862%2c0%2c0%2c1%2c.817.9v2.733a.916.916%2c0%2c0%2c1-.234.6.809.809%2c0%2c0%2c1-.585.271h-.819v.9a1.879%2c1.879%2c0%2c0%2c1-.48%2c1.272A1.578%2c1.578%2c0%2c0%2c1%2c473.725%2c6954ZM471%2c6946a1%2c1%2c0%2c0%2c0-1%2c1v1a1%2c1%2c0%2c1%2c0%2c2%2c0v-1A1%2c1%2c0%2c0%2c0%2c471%2c6946Zm-6%2c0a1%2c1%2c0%2c0%2c0-1%2c1v1a1%2c1%2c0%2c1%2c0%2c2%2c0v-1A1%2c1%2c0%2c0%2c0%2c465%2c6946Z' transform='translate(-459 -6936)'/%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","/**\n * Switch Pattern in PointCloudTool\n *\n * 1. Direction\n * 2. Segmentation\n */\nimport React, { useContext } from 'react';\nimport { EPointCloudName } from '@labelbee/lb-annotation';\nimport { EPointCloudPattern } from '@labelbee/lb-utils';\nimport { Button, Tooltip } from 'antd';\nimport { AppState } from '@/store';\nimport { connect } from 'react-redux';\nimport { LabelBeeContext } from '@/store/ctx';\nimport { PointCloudContext } from '@/components/pointCloudView/PointCloudContext';\nimport { useTranslation } from 'react-i18next';\n\ninterface IProps {\n  toolName: string;\n  forbidSegmentationText?: string;\n}\n\nconst SwitchPattern = ({ toolName, forbidSegmentationText = '' }: IProps) => {\n  const { t } = useTranslation();\n  const {\n    globalPattern,\n    setGlobalPattern,\n    setTopViewInstance,\n    setSideViewInstance,\n    setBackViewInstance,\n    setMainViewInstance,\n    ptSegmentInstance,\n    setSelectedIDs,\n  } = useContext(PointCloudContext);\n\n  if (toolName !== EPointCloudName.PointCloud) {\n    return null;\n  }\n\n  const clearDetection = () => {\n    setSelectedIDs([]);\n    setTopViewInstance(undefined);\n    setSideViewInstance(undefined);\n    setBackViewInstance(undefined);\n    setMainViewInstance(undefined);\n  };\n\n  const clearSegmentation = () => {\n    ptSegmentInstance?.emit('clearStash');\n  };\n\n  const updateDetection = () => {\n    clearSegmentation();\n    setGlobalPattern(EPointCloudPattern.Detection);\n  };\n  const updateSegmentation = () => {\n    clearDetection();\n    setGlobalPattern(EPointCloudPattern.Segmentation);\n  };\n\n  const disabledSegmentation = forbidSegmentationText !== '';\n  const segmentButton = (\n    <Button\n      type={globalPattern === EPointCloudPattern.Segmentation ? 'primary' : undefined}\n      onClick={updateSegmentation}\n      disabled={disabledSegmentation}\n    >\n      {t('SegmentationMode')}\n    </Button>\n  );\n\n  return (\n    <span style={{ margin: '0 10px' }}>\n      <Button\n        type={globalPattern === EPointCloudPattern.Detection ? 'primary' : undefined}\n        onClick={updateDetection}\n      >\n        {t('DetectionMode')}\n      </Button>\n      {disabledSegmentation ? (\n        <Tooltip title={forbidSegmentationText}>{segmentButton}</Tooltip>\n      ) : (\n        segmentButton\n      )}\n    </span>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => ({\n  toolName: state.annotation.stepList[state.annotation.step - 1]?.tool ?? '',\n});\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(SwitchPattern);\n","/**\n * @author Glenfiddish <edwinlee0927@hotmail.com>\n * @file connect store & TagToolInstanceAdaptor\n * @date 2022-06-02\n */\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { useDispatch, LabelBeeContext } from '@/store/ctx';\nimport { AppState } from '@/store';\nimport { ANNOTATION_ACTIONS } from '@/store/Actions';\nimport { AnnotationState } from '@/store/annotation/types';\nimport { PageBackward, PageForward, PageJump } from '@/store/annotation/actionCreators';\nimport { TagToolInstanceAdaptor } from '@/components/videoPlayer/TagToolInstanceAdaptor';\n\nconst VideoAnnotate: React.FC<{ annotation: AnnotationState }> = (props) => {\n  const { imgList, imgIndex, stepList, step } = props.annotation;\n  const dispatch = useDispatch();\n  const onMounted = (instance: TagToolInstanceAdaptor) => {\n    dispatch({\n      type: ANNOTATION_ACTIONS.SET_TOOL,\n      payload: {\n        instance,\n      },\n    });\n  };\n\n  const onUnmounted = () => {\n    dispatch({\n      type: ANNOTATION_ACTIONS.SET_TOOL,\n      payload: {\n        instance: undefined,\n      },\n    });\n  };\n\n  return (\n    <TagToolInstanceAdaptor\n      imgIndex={imgIndex}\n      imgList={imgList}\n      pageBackward={() => dispatch(PageBackward())}\n      pageForward={() => dispatch(PageForward())}\n      pageJump={(page) => dispatch(PageJump(~~page))}\n      onMounted={onMounted}\n      onUnmounted={onUnmounted}\n      stepList={stepList}\n      step={step}\n    />\n  );\n};\n\nexport default connect(({ annotation }: AppState) => ({ annotation }), null, null, {\n  context: LabelBeeContext,\n})(VideoAnnotate);\n","import React from 'react';\nimport { getClassName } from '@/utils/dom';\nimport {\n  CaretRightOutlined,\n  CaretUpOutlined,\n  CaretDownOutlined,\n  PauseOutlined,\n} from '@ant-design/icons';\nimport { VideoPlayerCtx } from '../..';\nimport { Pagination } from '@/views/MainView/toolFooter/Pagination';\nimport hotkey from '@/assets/annotation/video/icon_keyboard_h.svg';\nimport ToolHotKey from '@/views/MainView/toolFooter/FooterTips/ToolHotKey';\nimport { useTranslation } from 'react-i18next';\nimport { decimalReserved } from '../../utils';\nimport { cTool } from '@labelbee/lb-annotation';\nconst { EVideoToolName } = cTool;\n\n/**\n * Format video time to display\n * Such as 61.9 => 01:01:9\n * @param {Number} time\n * @returns {String} displayTime (min:sec:mircoSec)\n */\nconst videoTimeFormat = (time: number) => {\n  const min = Math.floor(time / 60);\n  const sec = ~~(time % 60).toFixed();\n  const minSec = (time * 10).toString().split('').pop();\n  const fillZero = (num: number) => (num < 10 ? `0${num}` : num);\n  return `${fillZero(min)}:${fillZero(sec)}:${minSec}`;\n};\n\nconst VideoProgress = () => {\n  const { currentTime, duration, buffered, setCurrentTime } = React.useContext(VideoPlayerCtx);\n  const progressRef = React.useRef<HTMLDivElement>(null);\n  const bufferLoadedPercent = `${decimalReserved((buffered / duration) * 100, 1)}%`;\n  const playedPercent = `${decimalReserved((currentTime / duration) * 100, 1)}%`;\n  const toCurrentTime = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (progressRef.current) {\n      const offsetX = event.clientX;\n      const width = progressRef.current.clientWidth;\n      const toTime = decimalReserved((offsetX / width) * duration, 1);\n      setCurrentTime(toTime);\n    }\n  };\n\n  return (\n    <div\n      className={getClassName('video-progress')}\n      ref={progressRef}\n      onClick={(event: React.MouseEvent<HTMLDivElement>) => {\n        event.stopPropagation();\n        event.nativeEvent.stopImmediatePropagation();\n        toCurrentTime(event);\n      }}\n    >\n      <div className={getClassName('video-slider')}>\n        <div className={getClassName('video-slider', 'played')} style={{ width: playedPercent }} />\n        <div\n          className={getClassName('video-slider', 'loaded')}\n          style={{ width: bufferLoadedPercent }}\n        />\n        <div className={getClassName('video-slider', 'played')} style={{ width: playedPercent }} />\n      </div>\n\n      <div className={getClassName('video-slider-bar')} style={{ left: playedPercent }} />\n    </div>\n  );\n};\n\nconst VideoSpeedButton = () => {\n  const { updateNextPlaybackRate, playbackRate } = React.useContext(VideoPlayerCtx);\n  const { t } = useTranslation();\n\n  return (\n    <span className={getClassName('video-controller', 'speed')}>\n      <span>{t('Speed')}</span>\n      <span className={getClassName('video-controller', 'speedNum')}>{`${playbackRate}x`}</span>\n      <span className={getClassName('video-controller', 'speedButton')}>\n        <CaretUpOutlined\n          onClick={() => {\n            updateNextPlaybackRate();\n          }}\n        />\n        <CaretDownOutlined\n          onClick={() => {\n            updateNextPlaybackRate(false);\n          }}\n        />\n      </span>\n    </span>\n  );\n};\n\nconst VideoHotKeys = () => {\n  const { t } = useTranslation();\n  return (\n    <ToolHotKey\n      title={\n        <span className={getClassName('video-controller', 'hotkey')}>\n          <img src={hotkey} />\n          {t('Hotkeys')}\n        </span>\n      }\n      style={{}}\n      toolName={EVideoToolName.VideoTagTool}\n    />\n  );\n};\n\nconst VideoPageChange = () => {\n  const { imgIndex, imgList, pageBackward, pageJump, pageForward } =\n    React.useContext(VideoPlayerCtx);\n\n  return (\n    <Pagination\n      isVideo={true}\n      pageBackward={pageBackward}\n      imgIndex={imgIndex}\n      pageJump={pageJump}\n      totalPage={imgList.length}\n      pageForward={pageForward}\n      footerCls={getClassName('video-controller')}\n    />\n  );\n};\n\nconst VideoTime = () => {\n  const { currentTime, duration } = React.useContext(VideoPlayerCtx);\n  const remained10x = duration * 10 - currentTime * 10;\n  const remaingTime = (remained10x > 0 ? remained10x : 0) / 10;\n\n  return (\n    <div className={getClassName('video-controller', 'time')}>\n      {`${videoTimeFormat(currentTime)} / -${videoTimeFormat(remaingTime)}`}\n    </div>\n  );\n};\n\nconst VideoController = () => {\n  const { playPause, isPlay } = React.useContext(VideoPlayerCtx);\n\n  return (\n    <div className={getClassName('video-controller', 'wrapper')}>\n      <VideoProgress />\n      <div className={getClassName('video-controller')}>\n        <span\n          onClick={() => {\n            playPause();\n          }}\n          className={getClassName('video-controller', 'playButton')}\n        >\n          {isPlay ? <PauseOutlined /> : <CaretRightOutlined />}\n        </span>\n        <VideoTime />\n        <VideoSpeedButton />\n        <div className={getClassName('video-controller', 'holder')} />\n        <VideoPageChange />\n        <VideoHotKeys />\n      </div>\n    </div>\n  );\n};\n\nexport default VideoController;\n","var img = \"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='15' height='13' viewBox='0 0 15 13'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0.8%3b %7d .cls-2 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_keyboard_h' class='cls-1'%3e %3cg id='%e5%9b%be%e6%a0%87_%e8%ae%be%e7%bd%ae_%e5%bf%ab%e6%8d%b7%e9%94%ae'%3e %3cpath id='%e5%bd%a2%e7%8a%b6' class='cls-2' d='M2.142%2c13a2.205%2c2.205%2c0%2c0%2c1-1.513-.585A1.949%2c1.949%2c0%2c0%2c1%2c0%2c11V2A2.083%2c2.083%2c0%2c0%2c1%2c2.149%2c0h10.7A2.083%2c2.083%2c0%2c0%2c1%2c15%2c2V11a1.927%2c1.927%2c0%2c0%2c1-.63%2c1.417A2.209%2c2.209%2c0%2c0%2c1%2c12.855%2c13H2.142ZM3.209%2c9a1%2c1%2c0%2c1%2c0%2c0%2c2h8.582a1%2c1%2c0%2c1%2c0%2c0-2ZM11%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261h1.639c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c12.6%2c5ZM6.716%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261H8.355c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c8.319%2c5ZM2.43%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261H4.069c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c4.033%2c5ZM11%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261h1.639c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c12.6%2c2ZM6.716%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261H8.355c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c8.319%2c2ZM2.43%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261H4.069c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c4.033%2c2Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","/**\n * @author Glenfiddish <edwinlee0927@hotmail.com>\n * @file File exception layer, determine whether to render FileInvalid or FileError\n * @date 2022-06-07\n */\n\nimport React from 'react';\nimport FileError, { IFileErrorProps } from './FileError';\nimport FileInvalid, { IFileInvalidProps } from './FileInvalid';\n\ninterface IFileExceptionProps {\n  errorProps: IFileErrorProps & { isError: boolean };\n  invalidProps: IFileInvalidProps;\n  fileType: string;\n}\n\nconst FileException: React.FC<IFileExceptionProps> = ({ invalidProps, errorProps, fileType }) => {\n  if (!invalidProps.isValid) {\n    return <FileInvalid {...{ fileType, ...invalidProps }} />;\n  }\n\n  if (errorProps.isError) {\n    return <FileError {...{ fileType, ...errorProps }} />;\n  }\n  return null;\n};\n\nexport default FileException;\n","/**\n * @author Glenfiddish <edwinlee0927@hotmail.com>\n * @file File invalid layer, display while isValid equal false\n * @date 2022-06-07\n */\n\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport interface IFileInvalidProps {\n  fileType?: string;\n  isValid: boolean;\n}\n\nconst FileInvalid: React.FC<IFileInvalidProps> = ({ fileType = 'image', isValid }) => {\n  const { t } = useTranslation();\n\n  if (isValid) {\n    return null;\n  }\n\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        inset: 0,\n        color: 'white',\n        display: 'flex',\n        alignItems: 'center',\n        fontSize: 30,\n        opacity: 0.7,\n        background: 'rgba(255, 87, 34, 1)',\n        justifyContent: 'center',\n      }}\n    >\n      {t(`${fileType}InvalidAndSkip`)}\n    </div>\n  );\n};\n\nexport default FileInvalid;\n","import React from 'react';\nimport { result2LabelKey } from './utils';\nimport type { ITagLabelsArray } from './types';\nimport { IInputList } from '@/types/main';\n\ninterface IVideoTagLayerProps {\n  result: Array<{ result: { [key: string]: string } }>;\n  inputList: IInputList[];\n}\n\nconst tagLayerCSSProperty: React.CSSProperties = {\n  position: 'absolute',\n  zIndex: 20,\n  padding: '0 20px',\n  color: 'white',\n  fontSize: 15,\n  lineHeight: '32px',\n  background: 'rgba(0, 255, 255, 0.32)',\n  top: 0,\n  right: 0,\n  maxHeight: 'calc(100% - 80px)',\n  overflowY: 'scroll',\n};\n\nexport const VideoTagLayer: React.FC<IVideoTagLayerProps> = ({ result, inputList }) => {\n  const tagsLabel: ITagLabelsArray = result2LabelKey(result, inputList);\n  return (\n    <div style={tagLayerCSSProperty}>\n      <table>\n        <tbody>\n          {tagsLabel.map(({ keyLabel, valuesLabelArray }) => (\n            <tr key={keyLabel}>\n              <td style={{ paddingRight: 8 }}>{`${keyLabel}:`}</td>\n              <td>{`${valuesLabelArray.join('、')}`}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","/*\n * @Author: Laoluo luozefeng@sensetime.com\n * @Date: 2022-07-04 14:39:44\n * @LastEditors: Laoluo luozefeng@sensetime.com\n * @LastEditTime: 2022-07-08 10:01:08\n */\n/**\n * @author Glenfiddish <edwinlee0927@hotmail.com>\n * @file Point cloud tool view\n *       Includes 2D-view、3Dview、top-view、side-view、back-view\n * @date 2022-06-21\n */\n\nimport { getClassName } from '@/utils/dom';\nimport React, { useContext, useEffect, useState } from 'react';\nimport PointCloud3DView from './PointCloud3DView';\nimport PointCloudBackView from './PointCloudBackView';\nimport PointCloudTopView from './PointCloudTopView';\nimport PointCloudSideView from './PointCloudSideView';\nimport PointCloud2DView from './PointCloud2DView';\nimport PointCloudListener from './PointCloudListener';\nimport PointCloudSegmentListener from './PointCloudSegmentListener';\nimport PointCloudSegment from './PointCloudSegment';\nimport PointCloudSegmentStatus from './PointCloudSegmentStatus';\nimport PointCloudSegmentToolbar from './PointCloudSegmentToolbar';\nimport { connect } from 'react-redux';\nimport { LabelBeeContext, useDispatch } from '@/store/ctx';\nimport {\n  AnnotatedAttributesPanelFixedLeft,\n  AnnotatedAttributesPanelFixedRight,\n} from '@/views/MainView/toolFooter/AnnotatedAttributes';\nimport { TDrawLayerSlot } from '@/types/main';\nimport { PointCloudContext } from './PointCloudContext';\nimport { EPointCloudPattern, PointCloudUtils } from '@labelbee/lb-utils';\nimport { useCustomToolInstance } from '@/hooks/annotation';\nimport { jsonParser } from '@/utils';\nimport { a2MapStateToProps, IA2MapStateProps } from '@/store/annotation/map';\nimport classNames from 'classnames';\nimport SideAndBackOverView from './components/sideAndBackOverView';\nimport { SetLoadPCDFileLoading } from '@/store/annotation/actionCreators';\n\ninterface IProps extends IA2MapStateProps {\n  drawLayerSlot?: TDrawLayerSlot;\n  checkMode?: boolean;\n  intelligentFit?: boolean;\n}\n\nconst PointCloudView: React.FC<IProps> = ({\n  currentData,\n  imgList,\n  drawLayerSlot,\n  checkMode,\n  intelligentFit,\n  imgIndex,\n  loadPCDFileLoading,\n}) => {\n  const ptCtx = useContext(PointCloudContext);\n  const { globalPattern, setGlobalPattern, selectedIDs } = ptCtx;\n  const dispatch = useDispatch();\n  const [isEnlargeTopView, setIsEnlargeTopView] = useState(false);\n  const selectAndEnlarge = selectedIDs?.length > 0 && isEnlargeTopView;\n\n  const basicInfo = jsonParser(currentData.result);\n  const { toolInstanceRef, clearToolInstance } = useCustomToolInstance({ basicInfo });\n\n  useEffect(() => {\n    toolInstanceRef.current.setPointCloudGlobalPattern = (pattern: EPointCloudPattern) => {\n      if (pattern !== globalPattern) {\n        setGlobalPattern(pattern);\n        ptCtx.clearAllDetectionInstance();\n        clearToolInstance();\n      }\n    };\n  }, [globalPattern]);\n\n  /**\n   * PointCloud Data initialization !!\n   *\n   * 1. Initialize all point cloud data types into the PointCloudContext so that data\n   * from other patterns can be accessed when submitted under current patterns.\n   *\n   * 2. Data initialization for each pattern is implemented in respective child listeners.\n   * （Detection => PointCloudListener / Segmentation => PointCloudSegmentListener）\n   */\n  useEffect(() => {\n    SetLoadPCDFileLoading(dispatch, true);\n    if (currentData) {\n      const { boxParamsList, polygonList, lineList, sphereParamsList, segmentation } =\n        PointCloudUtils.parsePointCloudCurrentResult(currentData?.result ?? '');\n      ptCtx.setPointCloudResult(boxParamsList);\n      ptCtx.setPolygonList(polygonList);\n      ptCtx.setLineList(lineList);\n      ptCtx.setPointCloudSphereList(sphereParamsList);\n      ptCtx.setSegmentation(segmentation);\n    }\n  }, [imgIndex]);\n\n  useEffect(() => {\n    toolInstanceRef.current.exportData = () => {\n      return [ptCtx.pointCloudBoxList, { valid: ptCtx.valid }];\n    };\n\n    toolInstanceRef.current.exportCustomData = () => {\n      return {\n        resultPolygon: ptCtx.polygonList ?? [],\n        resultLine: ptCtx.lineList ?? [],\n        resultPoint: ptCtx.pointCloudSphereList ?? [],\n        segmentation: ptCtx.segmentation ?? [],\n      };\n    };\n  }, [\n    ptCtx.pointCloudBoxList,\n    ptCtx.valid,\n    ptCtx.polygonList,\n    ptCtx.lineList,\n    ptCtx.pointCloudSphereList,\n    ptCtx.ptSegmentInstance,\n    ptCtx.segmentation,\n  ]);\n\n  if (imgList.length === 0) {\n    return null;\n  }\n\n  if (globalPattern === EPointCloudPattern.Segmentation) {\n    return (\n      <>\n        <PointCloudSegmentListener checkMode={checkMode} toolInstanceRef={toolInstanceRef} />\n        <PointCloudSegmentToolbar />\n        <PointCloudSegment checkMode={checkMode} />\n        <PointCloudSegmentStatus />\n        {drawLayerSlot?.({\n          direct: true,\n        })}\n      </>\n    );\n  }\n\n  let backAndSideView = (\n    <div className={getClassName('point-cloud-container', 'left-bottom')}>\n      <PointCloudBackView checkMode={checkMode} />\n      <PointCloudSideView checkMode={checkMode} />\n    </div>\n  );\n  if (isEnlargeTopView) {\n    backAndSideView = (\n      <SideAndBackOverView selectAndEnlarge={selectAndEnlarge} checkMode={checkMode} />\n    );\n  }\n\n  return (\n    <>\n      <PointCloudListener checkMode={checkMode} toolInstanceRef={toolInstanceRef} />\n      <div className={getClassName('point-cloud-layout')} onContextMenu={(e) => e.preventDefault()}>\n        <div className={getClassName('point-cloud-wrapper')}>\n          <AnnotatedAttributesPanelFixedLeft />\n\n          <div className={getClassName('point-cloud-content')}>\n            <div className={getClassName('point-cloud-container', 'left')}>\n              <PointCloud3DView />\n              {backAndSideView}\n            </div>\n            <div\n              className={classNames({\n                [getClassName('point-cloud-container', 'right')]: true,\n                [getClassName('point-cloud-container', 'rightZoom')]: isEnlargeTopView,\n              })}\n            >\n              <PointCloudTopView\n                drawLayerSlot={drawLayerSlot}\n                checkMode={checkMode}\n                intelligentFit={intelligentFit}\n                setIsEnlargeTopView={setIsEnlargeTopView}\n                onExitZoom={() => {\n                  setIsEnlargeTopView(false);\n                }}\n                isEnlargeTopView={isEnlargeTopView}\n              />\n              <div\n                className={classNames({\n                  [getClassName('point-cloud-container', 'right-bottom')]: !isEnlargeTopView,\n                  [getClassName('point-cloud-container', 'right-bottom-floatLeft')]:\n                    isEnlargeTopView,\n                })}\n              >\n                <PointCloud2DView\n                  isEnlargeTopView={isEnlargeTopView}\n                  thumbnailWidth={isEnlargeTopView ? 300 : 455}\n                />\n              </div>\n            </div>\n          </div>\n\n          <AnnotatedAttributesPanelFixedRight />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default connect(a2MapStateToProps, null, null, { context: LabelBeeContext })(PointCloudView);\n","/*\n * @Author: Laoluo luozefeng@sensetime.com\n * @Date: 2022-06-13 19:31:36\n * @LastEditors: Laoluo luozefeng@sensetime.com\n * @LastEditTime: 2022-06-27 19:43:25\n */\n\nimport { getClassName } from '@/utils/dom';\nimport { PointCloud, cKeyCode } from '@labelbee/lb-annotation';\nimport {\n  EPerspectiveView,\n  IPointCloudBox,\n  PointCloudUtils,\n  toolStyleConverter,\n} from '@labelbee/lb-utils';\nimport classNames from 'classnames';\nimport React, { useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { PointCloudContainer } from './PointCloudLayout';\nimport { PointCloudContext } from './PointCloudContext';\nimport { a2MapStateToProps, IA2MapStateProps } from '@/store/annotation/map';\nimport { connect } from 'react-redux';\nimport { jsonParser } from '@/utils';\nimport { useSingleBox } from './hooks/useSingleBox';\nimport { useSphere } from './hooks/useSphere';\nimport { Switch, Tooltip } from 'antd';\nimport useSize from '@/hooks/useSize';\nimport { usePointCloudViews } from './hooks/usePointCloudViews';\nimport { useTranslation } from 'react-i18next';\nimport { LabelBeeContext } from '@/store/ctx';\nimport PointCloudSizeSlider from './components/PointCloudSizeSlider';\nimport TitleButton from './components/TitleButton';\nimport { LeftOutlined } from '@ant-design/icons';\n\nconst EKeyCode = cKeyCode.default;\nconst pointCloudID = 'LABELBEE-POINTCLOUD';\nconst PointCloud3DContext = React.createContext<{\n  isActive: boolean;\n  setTarget3DView: (perspectiveView: EPerspectiveView) => void;\n  reset3DView: () => void;\n  followTopView: () => void;\n}>({\n  isActive: false,\n  setTarget3DView: () => {},\n  reset3DView: () => {},\n  followTopView: () => {},\n});\n\nconst PointCloudViewIcon = ({\n  perspectiveView,\n}: {\n  perspectiveView: keyof typeof EPerspectiveView;\n}) => {\n  const { isActive, setTarget3DView } = useContext(PointCloud3DContext);\n\n  const getTarget3DViewClassName = (position: string) => {\n    return classNames({\n      [getClassName('point-cloud-3d-view', position)]: true,\n      active: isActive,\n    });\n  };\n\n  return (\n    <span\n      onClick={() => {\n        setTarget3DView(EPerspectiveView[perspectiveView]);\n      }}\n      className={getTarget3DViewClassName(perspectiveView.toLocaleLowerCase())}\n    />\n  );\n};\n\nconst PointCloud3DSideBar = ({ isEnlarge }: { isEnlarge?: boolean }) => {\n  const { reset3DView, followTopView } = useContext(PointCloud3DContext);\n  const { t } = useTranslation();\n\n  const viewIconList = (\n    <>\n      <PointCloudViewIcon perspectiveView='Top' />\n      <PointCloudViewIcon perspectiveView='Front' />\n      <PointCloudViewIcon perspectiveView='Left' />\n      <PointCloudViewIcon perspectiveView='Back' />\n      <PointCloudViewIcon perspectiveView='Right' />\n      <PointCloudViewIcon perspectiveView='LFT' />\n      <PointCloudViewIcon perspectiveView='RBT' />\n    </>\n  );\n  const localizeIcon = (\n    <>\n      <Tooltip title={t('CameraFollowTopView')}>\n        <span\n          onClick={() => {\n            followTopView();\n          }}\n          className={getClassName('point-cloud-3d-view', 'followTop')}\n        />\n      </Tooltip>\n\n      <span\n        onClick={() => {\n          reset3DView();\n        }}\n        className={getClassName('point-cloud-3d-view', 'reset')}\n      />\n    </>\n  );\n\n  if (isEnlarge) {\n    return (\n      <div className={getClassName('point-cloud-3d-sidebarZoom')}>\n        {localizeIcon}\n        {viewIconList}\n      </div>\n    );\n  }\n  return (\n    <div className={getClassName('point-cloud-3d-sidebar')}>\n      {viewIconList}\n      {localizeIcon}\n    </div>\n  );\n};\n\nconst PointCloud3D: React.FC<IA2MapStateProps> = ({ currentData, config, highlightAttribute }) => {\n  const ptCtx = useContext(PointCloudContext);\n  const [showDirection, setShowDirection] = useState(true);\n  const [isEnlarge, setIsEnlarge] = useState(false);\n  const ref = useRef<HTMLDivElement>(null);\n  const { initPointCloud3d } = usePointCloudViews();\n  const size = useSize(ref);\n  const { t } = useTranslation();\n  useEffect(() => {\n    if (!ptCtx.mainViewInstance) {\n      return;\n    }\n    initPointCloud3d?.(size);\n  }, [size]);\n  const { selectedBox } = useSingleBox();\n  const { selectedSphere } = useSphere();\n\n  const setTarget3DView = (perspectiveView: EPerspectiveView) => {\n    const box = selectedBox?.info;\n\n    if (box) {\n      // Business Logic: If the updated view is top, need to sync with topView Direction in 3dView.\n      const topViewVector = { ...box.center };\n      topViewVector.x = topViewVector.x - 0.01;\n      topViewVector.z = 1000; // The position of camera needs to be set to a higher;\n      const isTopView = perspectiveView === EPerspectiveView.Top;\n\n      ptCtx.mainViewInstance?.updateCameraByBox(\n        box,\n        perspectiveView,\n        isTopView ? topViewVector : undefined,\n      );\n    }\n    if (selectedSphere) {\n      ptCtx.mainViewInstance?.updateCameraBySphere(selectedSphere, perspectiveView);\n    }\n  };\n\n  const reset3DView = () => {\n    ptCtx.mainViewInstance?.resetCamera();\n  };\n\n  const followTopView = () => {\n    const topViewCamera = ptCtx.topViewInstance?.pointCloudInstance.camera;\n    if (topViewCamera) {\n      ptCtx.mainViewInstance?.applyCameraTarget(topViewCamera);\n    }\n  };\n\n  useEffect(() => {\n    if (ref.current && currentData?.url) {\n      let pointCloud = ptCtx.mainViewInstance;\n      // Just for Init.\n      if (!pointCloud && size.width) {\n        // Need to be showed\n        pointCloud = new PointCloud({\n          container: ref.current,\n          isOrthographicCamera: true,\n          orthographicParams: PointCloudUtils.getDefaultOrthographicParams(size),\n          config,\n        });\n        ptCtx.setMainViewInstance(pointCloud);\n      }\n    }\n  }, [size, currentData]);\n\n  /**\n   * Listen for data changes.\n   */\n  useEffect(() => {\n    if (ref.current && currentData?.url) {\n      if (currentData.result && ptCtx.mainViewInstance) {\n        let pointCloud = ptCtx.mainViewInstance;\n        const boxParamsList = PointCloudUtils.getBoxParamsFromResultList(currentData.result);\n\n        // Add Init Box\n        boxParamsList.forEach((v: IPointCloudBox) => {\n          const hex = toolStyleConverter.getColorFromConfig(\n            { attribute: v.attribute },\n            { ...config, attributeConfigurable: true },\n            {},\n          )?.hex;\n\n          pointCloud?.addBoxToSense(v, hex);\n        });\n        pointCloud.render();\n        ptCtx.setPointCloudResult(boxParamsList);\n        ptCtx.setPointCloudValid(jsonParser(currentData.result)?.valid);\n      }\n    }\n  }, [currentData, ptCtx.mainViewInstance]);\n\n  /**\n   *  Observe selectedID and reset camera to target top-view\n   */\n  useEffect(() => {\n    if (selectedBox) {\n      setTarget3DView(EPerspectiveView.Top);\n\n      /**\n       * 3DView's zoom synchronizes with topView' zoom.\n       */\n      const zoom = ptCtx.topViewInstance?.pointCloudInstance?.camera.zoom ?? 1;\n      ptCtx.mainViewInstance?.updateCameraZoom(zoom);\n    }\n  }, [selectedBox]);\n\n  useEffect(() => {\n    if (selectedSphere) {\n      setTarget3DView(EPerspectiveView.Top);\n\n      /**\n       * 3DView's zoom synchronizes with topView' zoom.\n       */\n      const zoom = ptCtx.topViewInstance?.pointCloudInstance?.camera.zoom ?? 1;\n      ptCtx.mainViewInstance?.updateCameraZoom(zoom);\n    }\n  }, [selectedSphere]);\n\n  useEffect(() => {\n    window.addEventListener('keydown', onKeyDown);\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n    };\n  }, []);\n\n  const onKeyDown = (event: KeyboardEvent) => {\n    if (event.keyCode === EKeyCode.Esc) {\n      setIsEnlarge(false);\n      return;\n    }\n  };\n\n  const ptCloud3DCtx = useMemo(() => {\n    return { reset3DView, setTarget3DView, isActive: !!selectedBox, followTopView };\n  }, [selectedBox, ptCtx.mainViewInstance]);\n\n  // Highlight 3D Box when `highAttribute` updated.\n  useEffect(() => {\n    const highlightBoxes = ptCtx.pointCloudBoxList.filter(\n      (v) => v.attribute === highlightAttribute,\n    );\n\n    if (highlightBoxes?.length > 0) {\n      ptCtx.mainViewInstance?.clearHighlightBoxes();\n      ptCtx.mainViewInstance?.highlightBoxes(highlightBoxes);\n    }\n\n    if (highlightBoxes.length === 0) {\n      ptCtx.mainViewInstance?.clearHighlightBoxesAndRender();\n    }\n  }, [highlightAttribute, ptCtx.mainViewInstance]);\n\n  const PointCloud3DTitle = (\n    <>\n      <PointCloudSizeSlider\n        onChange={(v: number) => {\n          ptCtx.mainViewInstance?.updatePointSize({ customSize: v });\n        }}\n      />\n      <span style={{ marginRight: 8 }}>{t('ShowArrows')}</span>\n      <Switch\n        size='small'\n        checked={showDirection}\n        onChange={(showDirection) => {\n          setShowDirection(showDirection);\n          ptCtx.mainViewInstance?.setShowDirection(showDirection);\n        }}\n      />\n      {isEnlarge && (\n        <PointCloud3DContext.Provider value={ptCloud3DCtx}>\n          <PointCloud3DSideBar isEnlarge={isEnlarge} />\n        </PointCloud3DContext.Provider>\n      )}\n    </>\n  );\n\n  return (\n    <PointCloudContainer\n      className={classNames({\n        [getClassName('point-cloud-3d-container')]: true,\n        [getClassName('point-cloud-container', 'zoom')]: isEnlarge,\n      })}\n      title={\n        isEnlarge ? (\n          <div style={{ display: 'flex', alignItems: 'center' }}>\n            <LeftOutlined\n              style={{ cursor: 'pointer', marginRight: '12px' }}\n              onClick={() => {\n                setIsEnlarge(false);\n              }}\n            />\n            {t('3DView')}\n          </div>\n        ) : (\n          <TitleButton\n            title={t('3DView')}\n            onClick={() => {\n              setIsEnlarge(true);\n            }}\n          />\n        )\n      }\n      toolbar={PointCloud3DTitle}\n    >\n      <div className={getClassName('point-cloud-3d-content')}>\n        {!isEnlarge && (\n          <PointCloud3DContext.Provider value={ptCloud3DCtx}>\n            <PointCloud3DSideBar />\n          </PointCloud3DContext.Provider>\n        )}\n        <div className={getClassName('point-cloud-3d-view')} id={pointCloudID} ref={ref} />\n      </div>\n    </PointCloudContainer>\n  );\n};\n\nexport default connect(a2MapStateToProps, null, null, { context: LabelBeeContext })(PointCloud3D);\n","var img = \"data:image/svg+xml,%3csvg width='68' height='76' viewBox='0 0 68 76' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cg clip-path='url(%23clip0_96880_20054)'%3e%3crect x='6.45483' y='0.848145' width='54.0956' height='56.7089' rx='1.04533' fill='url(%23paint0_linear_96880_20054)' fill-opacity='0.12'/%3e%3cpath d='M67 41.3584V75H0V57.755L65.6869 40.348C66.3501 40.1722 67 40.6723 67 41.3584Z' fill='url(%23paint1_linear_96880_20054)'/%3e%3cpath d='M0.182861 35.8192V75.3775H67.0837V59.9767L1.60277 34.8433C0.91818 34.5806 0.182861 35.086 0.182861 35.8192Z' fill='url(%23paint2_linear_96880_20054)'/%3e%3cpath d='M34.8791 22C31.5247 22 28.8956 22.9519 26.9464 24.8558C25.4935 26.2426 24.5938 28.0144 24.2124 30.171C23.9638 31.5762 25.1568 32.7431 26.5838 32.7431V32.7431C28.0108 32.7431 29.098 31.5652 29.4401 30.1799C29.627 29.423 29.912 28.7815 30.3008 28.2555C31.2074 27.0316 32.6126 26.4423 34.5618 26.4423C36.103 26.4423 37.3269 26.8503 38.1882 27.7115C39.0041 28.5728 39.4574 29.7514 39.4574 31.2473C39.4574 32.3805 39.0494 33.4684 38.2335 34.4657L37.6896 35.1003C34.7431 37.7294 32.9753 39.6332 32.386 40.8571C31.9171 41.7614 31.6462 42.8142 31.5366 43.9972C31.4651 44.7702 31.9823 45.4588 32.7224 45.6932V45.6932C33.2639 45.8647 33.8406 45.8939 34.3967 45.778L34.957 45.6612C35.9679 45.4505 36.6494 44.5444 36.9087 43.5449C37.0201 43.1152 37.1747 42.7029 37.3723 42.3077C37.7802 41.4918 38.3695 40.7212 39.1854 40.0865C41.3613 38.1827 42.6758 36.9588 43.0838 36.5055C44.1717 35.0549 44.761 33.1964 44.761 30.9299C44.761 28.1648 43.8544 25.989 42.0412 24.4025C40.228 22.7706 37.8255 22 34.8791 22ZM34.0632 48.1552C33.0659 48.1552 32.25 48.4725 31.6154 49.1071C30.8901 49.7418 30.5728 50.5577 30.5728 51.5549C30.5728 52.5522 30.8901 53.3681 31.6154 54.0027C32.25 54.6374 33.0659 55 34.0632 55C35.0604 55 35.8764 54.6827 36.6016 54.0481C37.2363 53.4135 37.5989 52.5522 37.5989 51.5549C37.5989 50.5577 37.2363 49.7418 36.6016 49.1071C35.9217 48.4725 35.0604 48.1552 34.0632 48.1552Z' fill='%23F3F3F3' fill-opacity='0.25'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear_96880_20054' x1='33.5026' y1='0.848145' x2='33.5026' y2='57.557' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23EDEDED'/%3e%3cstop offset='1' stop-color='white'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear_96880_20054' x1='33.5' y1='32.9214' x2='33.5' y2='62.8103' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23373737'/%3e%3cstop offset='1' stop-color='%230E0E0E'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear_96880_20054' x1='33.6333' y1='31.097' x2='33.6333' y2='74.1393' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%232C2C2C'/%3e%3cstop offset='1' stop-color='%23424242'/%3e%3c/linearGradient%3e%3cclipPath id='clip0_96880_20054'%3e%3crect width='68' height='76.0002' fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\";\n  export default img;","/*\n * @Author: Laoluo luozefeng@sensetime.com\n * @Date: 2022-06-22 11:08:31\n * @LastEditors: Laoluo luozefeng@sensetime.com\n */\nimport { getClassName } from '@/utils/dom';\nimport { FooterDivider } from '@/views/MainView/toolFooter';\nimport { ZoomController } from '@/views/MainView/toolFooter/ZoomController';\nimport { DownSquareOutlined, UpSquareOutlined, LeftOutlined } from '@ant-design/icons';\nimport {\n  cTool,\n  cAnnotation,\n  PointCloudAnnotation,\n  THybridToolName,\n  cKeyCode,\n} from '@labelbee/lb-annotation';\nimport {\n  IPolygonData,\n  PointCloudUtils,\n  UpdatePolygonByDragList,\n  IPointUnit,\n  ILine,\n} from '@labelbee/lb-utils';\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport { PointCloudContext } from './PointCloudContext';\nimport { useRotate } from './hooks/useRotate';\nimport { useSingleBox } from './hooks/useSingleBox';\nimport { PointCloudContainer } from './PointCloudLayout';\nimport { BoxInfos, PointCloudValidity } from './PointCloudInfos';\nimport { usePolygon } from './hooks/usePolygon';\nimport { useSphere } from './hooks/useSphere';\nimport { useZoom } from './hooks/useZoom';\nimport { Slider } from 'antd';\nimport { a2MapStateToProps, IA2MapStateProps, IAnnotationStateProps } from '@/store/annotation/map';\nimport { connect } from 'react-redux';\nimport { usePointCloudViews } from './hooks/usePointCloudViews';\nimport useSize from '@/hooks/useSize';\nimport { useTranslation } from 'react-i18next';\nimport { LabelBeeContext } from '@/store/ctx';\nimport { jsonParser } from '@/utils';\nimport { TDrawLayerSlot } from '@/types/main';\nimport ToolUtils from '@/utils/ToolUtils';\nimport _ from 'lodash';\nimport PointCloudSizeSlider from './components/PointCloudSizeSlider';\nimport { useHistory } from './hooks/useHistory';\nimport TitleButton from './components/TitleButton';\n\nconst { EPolygonPattern, EToolName } = cTool;\nconst { ESortDirection } = cAnnotation;\nconst EKeyCode = cKeyCode.default;\n\n/**\n * Get the offset from canvas2d-coordinate to world coordinate (Top View)\n * @param currentPos\n * @param size\n * @param zoom\n * @returns\n */\nconst TransferCanvas2WorldOffset = (\n  currentPos: { x: number; y: number },\n  size: { width: number; height: number },\n  zoom = 1,\n) => {\n  const { width: w, height: h } = size;\n\n  const canvasCenterPoint = {\n    x: currentPos.x + (w * zoom) / 2,\n    y: currentPos.y + (h * zoom) / 2,\n  };\n\n  const worldCenterPoint = {\n    x: size.width / 2,\n    y: size.height / 2,\n  };\n\n  return {\n    offsetX: (worldCenterPoint.x - canvasCenterPoint.x) / zoom,\n    offsetY: -(worldCenterPoint.y - canvasCenterPoint.y) / zoom,\n  };\n};\n\nconst TopViewToolbar = ({ currentData }: IAnnotationStateProps) => {\n  const { zoom, zoomIn, zoomOut, initialPosition } = useZoom();\n  const { selectNextBox, selectPrevBox } = useSingleBox();\n  const { switchToNextSphere } = useSphere();\n  const { updateRotate } = useRotate({ currentData });\n  const ptCtx = React.useContext(PointCloudContext);\n  const { topViewInstance } = ptCtx;\n\n  const currentToolName = ptCtx?.topViewInstance?.toolScheduler?.getCurrentToolName();\n\n  const ratio = 2;\n\n  const clockwiseRotate = () => {\n    updateRotate(-ratio);\n  };\n  const anticlockwiseRotate = () => {\n    updateRotate(ratio);\n  };\n\n  const reverseRotate = () => {\n    updateRotate(180);\n  };\n\n  return (\n    <>\n      <PointCloudSizeSlider\n        onChange={(v: number) => {\n          topViewInstance?.pointCloudInstance?.updatePointSize({ customSize: v });\n        }}\n      />\n      <span\n        onClick={anticlockwiseRotate}\n        className={getClassName('point-cloud', 'rotate-reserve')}\n      />\n      <span onClick={clockwiseRotate} className={getClassName('point-cloud', 'rotate')} />\n      <span onClick={reverseRotate} className={getClassName('point-cloud', 'rotate-180')} />\n      <FooterDivider />\n      <UpSquareOutlined\n        onClick={() => {\n          if (currentToolName === EToolName.Point) {\n            switchToNextSphere(ESortDirection.descend);\n            return;\n          }\n          selectPrevBox(true);\n        }}\n        className={getClassName('point-cloud', 'prev')}\n      />\n      <DownSquareOutlined\n        onClick={() => {\n          if (currentToolName === EToolName.Point) {\n            switchToNextSphere(ESortDirection.ascend);\n            return;\n          }\n          selectNextBox(true);\n        }}\n        className={getClassName('point-cloud', 'next')}\n      />\n      <FooterDivider />\n      <ZoomController\n        initialPosition={initialPosition}\n        zoomIn={zoomIn}\n        zoomOut={zoomOut}\n        zoom={zoom}\n      />\n    </>\n  );\n};\n\n/**\n * Slider for filtering Z-axis points\n */\nconst ZAxisSlider = ({\n  setZAxisLimit,\n  zAxisLimit,\n  checkMode,\n}: {\n  setZAxisLimit: (value: number) => void;\n  zAxisLimit: number;\n  checkMode?: boolean;\n}) => {\n  if (checkMode) {\n    return null;\n  }\n\n  return (\n    <div style={{ position: 'absolute', top: 128, right: 8, height: '50%', zIndex: 20 }}>\n      <Slider\n        vertical\n        step={0.5}\n        max={10}\n        min={0.5}\n        defaultValue={zAxisLimit}\n        onAfterChange={(v: number) => {\n          setZAxisLimit(v);\n        }}\n      />\n    </div>\n  );\n};\n\ninterface IProps extends IA2MapStateProps {\n  drawLayerSlot?: TDrawLayerSlot;\n  checkMode?: boolean;\n  intelligentFit?: boolean;\n  setIsEnlargeTopView: (value: boolean) => void;\n  isEnlargeTopView: boolean;\n  onExitZoom: () => void;\n}\n\nconst PointCloudTopView: React.FC<IProps> = ({\n  currentData,\n  imgList,\n  stepInfo,\n  drawLayerSlot,\n  checkMode,\n  intelligentFit,\n  setIsEnlargeTopView,\n  isEnlargeTopView,\n  onExitZoom,\n  highlightAttribute,\n}) => {\n  const [annotationPos, setAnnotationPos] = useState({ zoom: 1, currentPos: { x: 0, y: 0 } });\n  const ref = useRef<HTMLDivElement>(null);\n  const ptCtx = React.useContext(PointCloudContext);\n  const size = useSize(ref);\n  const config = jsonParser(stepInfo.config);\n  const { setZoom, syncTopviewToolZoom } = useZoom();\n  const { hideAttributes } = ptCtx;\n\n  const { addPolygon, deletePolygon } = usePolygon();\n  const { deletePointCloudSphere } = useSphere();\n  const { deletePointCloudBox, changeValidByID } = useSingleBox();\n  const [zAxisLimit, setZAxisLimit] = useState<number>(10);\n  const { t } = useTranslation();\n  const pointCloudViews = usePointCloudViews();\n  const { pushHistoryWithList } = useHistory();\n\n  useLayoutEffect(() => {\n    if (ptCtx.topViewInstance) {\n      return;\n    }\n\n    if (ref.current && currentData?.url && currentData?.result) {\n      const size = {\n        width: ref.current.clientWidth,\n        height: ref.current.clientHeight,\n      };\n\n      const pointCloudAnnotation = new PointCloudAnnotation({\n        container: ref.current,\n        size,\n        pcdPath: currentData.url,\n        config: { ...config, pointCloudPattern: ptCtx.pointCloudPattern },\n        checkMode,\n        toolName: ToolUtils.getPointCloudToolList() as THybridToolName,\n        proxyMode: checkMode,\n      });\n      ptCtx.setTopViewInstance(pointCloudAnnotation);\n    }\n  }, [currentData]);\n\n  useEffect(() => {\n    if (!size || !ptCtx.topViewInstance || !ptCtx.sideViewInstance) {\n      return;\n    }\n\n    const { toolInstance: TopView2dOperation } = ptCtx.topViewInstance;\n\n    // line register\n    TopView2dOperation.singleOn('dataUpdated', (updateLine: ILine[], selectedIDs: string[]) => {\n      const transferLine = _.cloneDeep(updateLine).map((i) => {\n        return {\n          ...i,\n          pointList: PointCloudUtils.pointListTransferCanvas2World(i.pointList, size),\n        };\n      });\n      ptCtx.setSelectedIDs(selectedIDs);\n      ptCtx.setLineList(transferLine);\n      pushHistoryWithList({ lineList: transferLine });\n    });\n\n    // point tool events\n    TopView2dOperation.singleOn('pointCreated', (point: IPointUnit, zoom: number) => {\n      // addPoint(point)\n      pointCloudViews.topViewAddSphere({\n        newPoint: point,\n        size,\n        trackConfigurable: config.trackConfigurable,\n        zoom,\n      });\n    });\n\n    TopView2dOperation.singleOn('pointDeleted', (selectedID: string) => {\n      deletePointCloudSphere(selectedID);\n    });\n    TopView2dOperation.singleOn('pointSelected', (selectedID: string) => {\n      ptCtx.setSelectedIDs([selectedID]);\n    });\n    TopView2dOperation.singleOn(\n      'updatePointByDrag',\n      (updatePoint: IPointUnit, oldList: IPointUnit[]) => {\n        pointCloudViews.topViewUpdatePoint?.(updatePoint, size);\n      },\n    );\n\n    TopView2dOperation.singleOn('polygonCreated', (polygon: IPolygonData, zoom: number) => {\n      if (TopView2dOperation.pattern === EPolygonPattern.Normal || !currentData?.url) {\n        /**\n         * Notice. The Polygon need to be converted to pointCloud coordinate system for storage.\n         */\n        const newPolygon = {\n          ...polygon,\n          pointList: polygon.pointList.map((v) => PointCloudUtils.transferCanvas2World(v, size)),\n        };\n\n        addPolygon(newPolygon);\n        ptCtx.setSelectedIDs(hideAttributes.includes(polygon.attribute) ? '' : polygon.id);\n        return;\n      }\n\n      pointCloudViews.topViewAddBox({\n        polygon,\n        size,\n        imgList,\n        trackConfigurable: config.trackConfigurable,\n        zoom,\n        intelligentFit,\n      });\n    });\n\n    TopView2dOperation.singleOn('deletedObject', ({ id }: { id: any }) => {\n      deletePointCloudBox(id);\n      deletePolygon(id);\n    });\n\n    TopView2dOperation.singleOn('deleteSelectedIDs', () => {\n      ptCtx.setSelectedIDs([]);\n    });\n\n    TopView2dOperation.singleOn('addSelectedIDs', (selectedID: string) => {\n      ptCtx.addSelectedID(selectedID);\n    });\n\n    TopView2dOperation.singleOn('setSelectedIDs', (selectedIDs: string[]) => {\n      ptCtx.setSelectedIDs(selectedIDs);\n    });\n\n    TopView2dOperation.singleOn('updatePolygonByDrag', (updateList: UpdatePolygonByDragList) => {\n      pointCloudViews.topViewUpdateBox?.(updateList, size);\n    });\n\n    const validUpdate = (id: string) => {\n      // UpdateData.\n      const newPointCloudList = changeValidByID(id);\n\n      // HighLight\n      if (newPointCloudList) {\n        ptCtx.syncAllViewPointCloudColor(newPointCloudList);\n      }\n      if (ptCtx.polygonList.find((v) => v.id === id)) {\n        ptCtx.topViewInstance?.toolInstance.setPolygonValidAndRender(id, true);\n      }\n    };\n\n    TopView2dOperation.on('validUpdate', validUpdate);\n\n    return () => {\n      TopView2dOperation.unbind('validUpdate', validUpdate);\n    };\n  }, [\n    ptCtx,\n    size,\n    currentData,\n    pointCloudViews,\n    ptCtx.polygonList,\n    ptCtx.lineList,\n    ptCtx.topViewInstance?.toolInstance,\n  ]);\n\n  useEffect(() => {\n    if (!size?.width || !ptCtx.topViewInstance) {\n      return;\n    }\n    /**\n     * Init Config\n     *\n     * 1. Update defaultAttribute by first attribute;\n     *  */\n    const defaultAttribute = config?.attributeList?.[0]?.value;\n    if (defaultAttribute) {\n      ptCtx.topViewInstance.toolInstance.setDefaultAttribute(defaultAttribute);\n    }\n\n    // 1. Update Size\n    ptCtx.topViewInstance.initSize(size);\n    ptCtx.topViewInstance.updatePolygonList(ptCtx.displayPointCloudList, ptCtx.polygonList);\n    ptCtx.topViewInstance.updatePointList(ptCtx.displaySphereList);\n    ptCtx.topViewInstance.updateLineList(ptCtx.displayLineList);\n\n    const {\n      topViewInstance: { pointCloudInstance: pointCloud, toolInstance },\n    } = ptCtx;\n\n    /**\n     * Synchronized 3d point cloud view displacement operations\n     *\n     * Change Orthographic Camera size\n     */\n    toolInstance.singleOn('renderZoom', (zoom: number, currentPos: any) => {\n      const { offsetX, offsetY } = TransferCanvas2WorldOffset(currentPos, size, zoom);\n      pointCloud.camera.zoom = zoom;\n      if (currentPos) {\n        const { x, y, z } = pointCloud.initCameraPosition;\n        pointCloud.camera.position.set(x + offsetY, y - offsetX, z);\n      }\n\n      pointCloud.camera.updateProjectionMatrix();\n      pointCloud.render();\n\n      setZoom(zoom);\n      syncTopviewToolZoom(currentPos, zoom, size);\n      setAnnotationPos({ zoom, currentPos });\n    });\n\n    // Synchronized 3d point cloud view displacement operations\n    toolInstance.singleOn('dragMove', ({ currentPos, zoom }: any) => {\n      const { offsetX, offsetY } = TransferCanvas2WorldOffset(currentPos, size, zoom);\n      pointCloud.camera.zoom = zoom;\n      const { x, y, z } = pointCloud.initCameraPosition;\n      pointCloud.camera.position.set(x + offsetY, y - offsetX, z);\n      pointCloud.render();\n      syncTopviewToolZoom(currentPos, zoom, size);\n      setAnnotationPos({ zoom, currentPos });\n    });\n  }, [size, ptCtx.topViewInstance, ptCtx.topViewInstance?.toolInstance]);\n\n  useEffect(() => {\n    ptCtx.topViewInstance?.pointCloudInstance?.applyZAxisPoints(zAxisLimit);\n  }, [zAxisLimit]);\n\n  useEffect(() => {\n    pointCloudViews.topViewSelectedChanged({});\n  }, [ptCtx.selectedIDs]);\n\n  useEffect(() => {\n    window.addEventListener('keydown', onKeyDown);\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n    };\n  }, []);\n\n  const onKeyDown = (event: KeyboardEvent) => {\n    const { keyCode } = event;\n    if (keyCode === EKeyCode.Esc) {\n      onExitZoom();\n    }\n  };\n  // Highlight TopView Box when `hightAttribute` updated.\n  useEffect(() => {\n    ptCtx.topViewInstance?.pointCloud2dOperation?.setHighlightAttribute?.(highlightAttribute);\n  }, [ptCtx.topViewInstance, highlightAttribute]);\n\n  return (\n    <PointCloudContainer\n      className={getClassName('point-cloud-container', 'top-view')}\n      title={\n        isEnlargeTopView ? (\n          <div style={{ display: 'flex', alignItems: 'center', position: 'relative' }}>\n            <LeftOutlined\n              style={{ cursor: 'pointer', marginRight: '12px' }}\n              onClick={() => {\n                onExitZoom();\n              }}\n            />\n            <span>{t('TopView')}</span>\n\n            <BoxInfos\n              checkMode={checkMode}\n              config={config}\n              style={{ display: 'flex', position: 'initial', margin: '0px 20px' }}\n            />\n          </div>\n        ) : (\n          <TitleButton\n            title={t('TopView')}\n            onClick={() => {\n              setIsEnlargeTopView(true);\n            }}\n          />\n        )\n      }\n      toolbar={<TopViewToolbar currentData={currentData} />}\n    >\n      <div style={{ position: 'relative', flex: 1 }}>\n        <div style={{ width: '100%', height: '100%' }} ref={ref}>\n          {drawLayerSlot?.(annotationPos)}\n        </div>\n\n        {!isEnlargeTopView && <BoxInfos checkMode={checkMode} config={config} />}\n        <ZAxisSlider checkMode={checkMode} zAxisLimit={zAxisLimit} setZAxisLimit={setZAxisLimit} />\n        <PointCloudValidity />\n      </div>\n    </PointCloudContainer>\n  );\n};\n\nexport default connect(a2MapStateToProps, null, null, { context: LabelBeeContext })(\n  PointCloudTopView,\n);\n","import { getClassName } from '@/utils/dom';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { PointCloudContainer } from './PointCloudLayout';\nimport { PointCloudContext } from './PointCloudContext';\nimport { connect } from 'react-redux';\n\nimport { pointCloudLidar2image, cKeyCode } from '@labelbee/lb-annotation';\nimport { LabelBeeContext } from '@/store/ctx';\nimport { a2MapStateToProps, IA2MapStateProps } from '@/store/annotation/map';\nimport { ICalib, IPointCloudBox, IPolygonPoint, toolStyleConverter } from '@labelbee/lb-utils';\nimport PointCloud2DSingleView from './PointCloud2DSingleView';\nimport TitleButton from './components/TitleButton';\nimport { LeftOutlined } from '@ant-design/icons';\nimport classNames from 'classnames';\nimport EscSvg from '@/assets/annotation/common/icon_esc.svg';\nimport LeftSquareOutlined from '@/assets/annotation/common/icon_left_squareOutlined.svg';\nimport RightSquareOutlined from '@/assets/annotation/common/icon_right_squareOutlined.svg';\nimport { IMappingImg } from '@/types/data';\n\n// TODO, It will be deleted when the exported type of lb-annotation is work.\nexport interface IAnnotationDataTemporarily {\n  type: string;\n  annotation: {\n    id: number | string;\n    pointList: IPolygonPoint[];\n    color: string;\n    stroke: string;\n    fill: string;\n  };\n}\n\ninterface ITransferViewData {\n  type: string;\n  pointList: {\n    id: string;\n    x: number;\n    y: number;\n  }[];\n}\n\nexport interface IAnnotationData2dView {\n  annotations: IAnnotationDataTemporarily[];\n  url: string;\n  calName?: string;\n  calib: ICalib;\n}\n\nconst EKeyCode = cKeyCode.default;\n\ninterface IProps extends IA2MapStateProps {\n  thumbnailWidth?: number;\n  isEnlargeTopView?: boolean;\n}\n\nconst ContainerTitle = ({\n  showEnlarge,\n  isEnlargeTopView,\n  data,\n  setIsEnlarge,\n  setCurIndex,\n  curIndex = 0,\n  index,\n  annotations2d,\n}: {\n  showEnlarge: boolean;\n  isEnlargeTopView?: boolean;\n  data: IAnnotationData2dView;\n  setIsEnlarge: (v: boolean) => void;\n  setCurIndex: (v: number | undefined) => void;\n  curIndex: number | undefined;\n  index: number;\n  annotations2d: IAnnotationData2dView[];\n}) => {\n  if (isEnlargeTopView) {\n    return (\n      <TitleButton\n        title={data?.calName}\n        style={{ background: 'rgba(0, 0, 0, 0.74)', color: '#FFFFFF' }}\n      />\n    );\n  }\n  if (showEnlarge) {\n    return (\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <LeftOutlined\n          style={{ cursor: 'pointer', marginRight: '12px' }}\n          onClick={() => {\n            setIsEnlarge(false);\n            setCurIndex(undefined);\n          }}\n        />\n        <span>{data?.calName}</span>\n        <span style={{ marginLeft: '8px' }}>\n          {curIndex + 1}/{annotations2d?.length}\n        </span>\n      </div>\n    );\n  }\n  return (\n    <TitleButton\n      title={data?.calName}\n      onClick={() => {\n        setIsEnlarge(true);\n        setCurIndex(index);\n      }}\n      style={{ background: 'rgba(0, 0, 0, 0.74)', color: '#FFFFFF' }}\n    />\n  );\n};\n\nconst PointCloud2DView = ({\n  currentData,\n  config,\n  thumbnailWidth,\n  isEnlargeTopView,\n  highlightAttribute,\n  loadPCDFileLoading,\n}: IProps) => {\n  const [annotations2d, setAnnotations2d] = useState<IAnnotationData2dView[]>([]);\n  const { topViewInstance, displayPointCloudList } = useContext(PointCloudContext);\n  const [selectedID, setSelectedID] = useState<number | string>('');\n  const [isEnlarge, setIsEnlarge] = useState<boolean>(false);\n  const [curIndex, setCurIndex] = useState<number | undefined>(undefined);\n\n  useEffect(() => {\n    if (\n      !loadPCDFileLoading &&\n      topViewInstance &&\n      currentData?.mappingImgList &&\n      currentData?.mappingImgList?.length > 0\n    ) {\n      const defaultViewStyle = {\n        fill: 'transparent',\n        color: 'green',\n      };\n      let newAnnotations2dList: IAnnotationData2dView[] = [];\n      currentData?.mappingImgList.forEach((mappingData: IMappingImg) => {\n        const newAnnotations2d: IAnnotationDataTemporarily[] = displayPointCloudList.reduce(\n          (acc: IAnnotationDataTemporarily[], pointCloudBox: IPointCloudBox) => {\n            /**\n             * Is need to create range.\n             * 1. pointCloudBox is selected;\n             * 2. HighlightAttribute is same with pointCloudBox's attribute.\n             */\n            const createRange =\n              pointCloudBox.id === selectedID || highlightAttribute === pointCloudBox.attribute;\n            const { transferViewData: viewDataPointList, viewRangePointList } =\n              pointCloudLidar2image(pointCloudBox, mappingData.calib, {\n                createRange,\n              });\n\n            const stroke = toolStyleConverter.getColorFromConfig(\n              { attribute: pointCloudBox.attribute },\n              {\n                ...config,\n                attributeConfigurable: true,\n              },\n              {},\n            )?.stroke;\n            const viewDataPointLists = formatViewDataPointList({\n              viewDataPointList,\n              pointCloudBox,\n              defaultViewStyle,\n              stroke,\n            });\n            const newArr = [...acc, ...viewDataPointLists];\n\n            if (viewRangePointList?.length > 0) {\n              newArr.push({\n                type: 'polygon',\n                annotation: {\n                  id: selectedID,\n                  pointList: viewRangePointList,\n                  ...defaultViewStyle,\n                  stroke,\n                  fill: 'rgba(255, 255, 255, 0.6)',\n                },\n              });\n            }\n\n            return newArr;\n          },\n          [],\n        );\n        newAnnotations2dList.push({\n          annotations: newAnnotations2d,\n          url: mappingData?.url,\n          calName: mappingData.calib?.calName,\n          calib: mappingData?.calib,\n        });\n      });\n      setAnnotations2d(newAnnotations2dList);\n    }\n  }, [\n    displayPointCloudList,\n    currentData?.mappingImgList,\n    selectedID,\n    highlightAttribute,\n    loadPCDFileLoading,\n  ]);\n\n  useEffect(() => {\n    window.addEventListener('keydown', onKeyDown);\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n    };\n  }, [curIndex]);\n\n  const onKeyDown = (event: KeyboardEvent) => {\n    const { keyCode } = event;\n    switch (keyCode) {\n      case EKeyCode.Esc:\n        if (isEnlarge) {\n          setIsEnlarge(false);\n        }\n        break;\n      case EKeyCode.Left:\n        lastPage();\n        break;\n\n      case EKeyCode.Right:\n        nextPage();\n        break;\n    }\n  };\n\n  const lastPage = () => {\n    if (curIndex === undefined || !isEnlarge) {\n      return;\n    }\n    if (Number(curIndex) > 0) {\n      setCurIndex(curIndex - 1);\n    }\n  };\n\n  const nextPage = () => {\n    if (curIndex === undefined || !isEnlarge) {\n      return;\n    }\n    if (Number(curIndex) < annotations2d?.length - 1) {\n      setCurIndex(curIndex + 1);\n    }\n  };\n\n  const formatViewDataPointList = ({\n    viewDataPointList,\n    pointCloudBox,\n    defaultViewStyle,\n    stroke,\n  }: {\n    viewDataPointList: ITransferViewData[];\n    pointCloudBox: IPointCloudBox;\n    defaultViewStyle: {\n      fill: string;\n      color: string;\n    };\n    stroke: string;\n  }) => {\n    return viewDataPointList!.map((v: ITransferViewData) => {\n      return {\n        type: v.type,\n        annotation: {\n          id: pointCloudBox.id,\n          pointList: v.pointList,\n          ...defaultViewStyle,\n          stroke,\n        },\n      };\n    });\n  };\n  const hiddenData =\n    !currentData || !currentData?.mappingImgList || !(currentData?.mappingImgList?.length > 0);\n\n  const PointCloud2DTitle = (\n    <div\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        fontSize: '14px',\n      }}\n    >\n      <img\n        src={LeftSquareOutlined}\n        style={{ height: '24px', marginRight: '8px', cursor: 'pointer' }}\n        onClick={() => lastPage()}\n      />\n      <span style={{ marginRight: '12px' }}>键盘左键上一张</span>\n      <span style={{ margin: '0px 8px 0px 12px' }}>键盘右键上一张</span>\n      <img\n        src={RightSquareOutlined}\n        style={{ height: '24px', marginRight: '12px', cursor: 'pointer' }}\n        onClick={() => nextPage()}\n      />\n      <img\n        src={EscSvg}\n        style={{ height: '24px', margin: '0px 8px 0px 12px', cursor: 'pointer' }}\n        onClick={() => {\n          setIsEnlarge(false);\n          setCurIndex(undefined);\n        }}\n      />\n      <span>键退出</span>\n    </div>\n  );\n\n  if (annotations2d?.length > 0) {\n    return (\n      <>\n        {annotations2d.map((item: IAnnotationData2dView, index: number) => {\n          const showEnlarge = isEnlarge && index === curIndex;\n          return (\n            <PointCloudContainer\n              className={classNames({\n                [getClassName('point-cloud-2d-container')]: true,\n                [getClassName('point-cloud-container', 'zoom')]: showEnlarge,\n              })}\n              title={\n                <ContainerTitle\n                  showEnlarge={showEnlarge}\n                  isEnlargeTopView={isEnlargeTopView}\n                  data={item}\n                  setIsEnlarge={setIsEnlarge}\n                  setCurIndex={setCurIndex}\n                  curIndex={curIndex}\n                  index={index}\n                  annotations2d={annotations2d}\n                />\n              }\n              titleOnSurface={!showEnlarge}\n              style={{\n                display: hiddenData ? 'none' : 'flex',\n                width: showEnlarge ? '100%' : thumbnailWidth,\n              }}\n              key={index}\n              toolbar={PointCloud2DTitle}\n            >\n              {item?.annotations && item?.url && (\n                <PointCloud2DSingleView\n                  currentData={currentData}\n                  view2dData={item}\n                  setSelectedID={setSelectedID}\n                  showEnlarge={showEnlarge}\n                />\n              )}\n            </PointCloudContainer>\n          );\n        })}\n      </>\n    );\n  }\n  return null;\n};\n\nexport default connect(a2MapStateToProps, null, null, { context: LabelBeeContext })(\n  PointCloud2DView,\n);\n","import { getClassName } from '@/utils/dom';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport AnnotationView from '@/components/AnnotationView';\nimport useSize from '@/hooks/useSize';\nimport { useSingleBox } from './hooks/useSingleBox';\nimport { ViewOperation } from '@labelbee/lb-annotation';\nimport { IAnnotationData2dView, IAnnotationDataTemporarily } from './PointCloud2DView';\nimport { useHighlight } from './hooks/useHighlight';\nimport HighlightVisible from './components/HighlightVisible';\nimport { IFileItem } from '@/types/data';\n\nconst PointCloud2DSingleView = ({\n  view2dData,\n  setSelectedID,\n  currentData,\n  showEnlarge,\n}: {\n  view2dData: IAnnotationData2dView;\n  setSelectedID: (value: string | number) => void;\n  currentData: IFileItem;\n  showEnlarge: boolean;\n}) => {\n  const ref = useRef(null);\n  const viewRef = useRef<{ toolInstance: ViewOperation }>();\n  const { selectedBox } = useSingleBox();\n  const size = useSize(ref);\n  const { url, calib } = view2dData;\n  const { toggle2dVisible, isHighlightVisible } = useHighlight({ currentData });\n  const [loading, setLoading] = useState(false);\n\n  const hiddenData = !view2dData;\n\n  const afterImgOnLoad = (imgNode: HTMLImageElement) => {\n    focusSelectBox();\n\n    // TODO: Save the ImgNode Data and cache the highlightIndex\n  };\n\n  const focusSelectBox = useCallback(() => {\n    const toolInstance = viewRef.current?.toolInstance;\n\n    // Clear Selected.\n    setSelectedID('');\n\n    if (!selectedBox || !toolInstance) {\n      return;\n    }\n    const selected2data = view2dData.annotations.find(\n      (v: IAnnotationDataTemporarily) => v.annotation.id === selectedBox.info.id,\n    );\n\n    let id = '';\n    if (selected2data && selected2data?.annotation.pointList?.length > 0) {\n      toolInstance.focusPositionByPointList(selected2data?.annotation.pointList);\n      id = selectedBox.info.id;\n      setSelectedID(id);\n    }\n  }, [selectedBox, viewRef.current, view2dData.annotations]);\n\n  /**\n   * If the status is updated, it needs to\n   */\n  useEffect(() => {\n    focusSelectBox();\n  }, [focusSelectBox]);\n\n  const highlightOnClick = async () => {\n    setLoading(true);\n    await toggle2dVisible(url, calib);\n    setLoading(false);\n  };\n\n  return (\n    <div className={getClassName('point-cloud-2d-image')} ref={ref}>\n      <AnnotationView\n        src={view2dData?.url ?? ''}\n        annotations={view2dData.annotations}\n        size={size}\n        ref={viewRef}\n        globalStyle={{\n          display: hiddenData ? 'none' : 'block',\n        }}\n        afterImgOnLoad={afterImgOnLoad}\n        zoomInfo={{\n          min: 0.01,\n          max: 1000,\n          ratio: 0.4,\n        }}\n      />\n      <HighlightVisible\n        visible={isHighlightVisible(url)}\n        onClick={highlightOnClick}\n        loading={loading}\n        style={{\n          position: 'absolute',\n          right: 16,\n          top: 16,\n          zIndex: showEnlarge ? -1 : 101,\n        }}\n      />\n    </div>\n  );\n};\n\nexport default PointCloud2DSingleView;\n","/**\n * @file Save the highlight Info.\n * @createDate 2023-08-08\n * @author Ron <ron.f.luo@gmail.com>\n */\n\nimport { useCallback, useContext } from 'react';\nimport { PointCloudContext } from '../PointCloudContext';\nimport { IAnnotationStateProps } from '../../../store/annotation/map';\nimport { ICalib } from '@labelbee/lb-utils';\n\nconst useHighlight = ({ currentData }: Partial<IAnnotationStateProps>) => {\n  const {\n    mainViewInstance,\n    topViewInstance,\n    pointCloudBoxList,\n    highlight2DDataList,\n    setHighlight2DDataList,\n  } = useContext(PointCloudContext);\n  const mappingImgList = currentData?.mappingImgList ?? [];\n\n  const toggle2dVisible = async (url: string, calib: ICalib) => {\n    let newHighlightList: Array<{ url: string; calib: ICalib }> = [...highlight2DDataList];\n\n    // Update highlight Status.\n    if (highlight2DDataList.find((v) => v.url === url)) {\n      newHighlightList = highlight2DDataList.filter((v) => v.url !== url);\n    } else {\n      newHighlightList.push({\n        url,\n        calib,\n      });\n    }\n\n    setHighlight2DDataList(newHighlightList);\n\n    if (!mainViewInstance || mappingImgList?.length === 0) {\n      return;\n    }\n\n    const points = mainViewInstance.pointCloudObject;\n    if (!points) {\n      return;\n    }\n\n    const highlightIndex = await mainViewInstance.getHighlightIndexByMappingImgList({\n      mappingImgList: newHighlightList,\n      points: points.geometry.attributes.position.array,\n    });\n\n    const color = await mainViewInstance.highlightOriginPointCloud(\n      pointCloudBoxList,\n      highlightIndex,\n    );\n\n    color && topViewInstance?.pointCloudInstance?.updateColor(color);\n  };\n\n  const isHighlightVisible = useCallback(\n    (url: string) => {\n      return highlight2DDataList.findIndex((v) => v.url === url) >= 0;\n    },\n    [highlight2DDataList],\n  );\n\n  return {\n    toggle2dVisible,\n    isHighlightVisible,\n  };\n};\n\nexport { useHighlight };\n","/**\n * Render Component for highlight.\n */\nimport React from 'react';\nimport { EyeFilled, EyeInvisibleFilled, LoadingOutlined } from '@ant-design/icons';\nimport { getClassName } from '@/utils/dom';\n\nconst HighlightVisible = ({\n  visible,\n  style,\n  onClick,\n  loading,\n}: {\n  visible: boolean;\n  loading: boolean;\n  style?: React.CSSProperties;\n  onClick: () => void;\n}) => {\n  const defaultStyle = {\n    background: 'rgba(0, 0, 0, 0.74)',\n    color: 'white',\n    borderRadius: 2,\n    padding: 6,\n    fontSize: 16,\n  };\n  let ShowIcon = visible ? EyeFilled : EyeInvisibleFilled;\n\n  if (loading) {\n    ShowIcon = LoadingOutlined;\n    Object.assign(defaultStyle, { borderRadius: 100 });\n  }\n\n  return (\n    <ShowIcon\n      className={getClassName('point-cloud-highlight-view')}\n      style={{ ...defaultStyle, ...style }}\n      onClick={loading ? () => {} : onClick}\n    />\n  );\n};\n\nexport default HighlightVisible;\n","var img = \"data:image/svg+xml,%3csvg width='25' height='24' viewBox='0 0 25 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M22.5 1C22.7652 1 23.0196 1.10536 23.2071 1.29289C23.3946 1.48043 23.5 1.73478 23.5 2V22C23.5 22.2652 23.3946 22.5196 23.2071 22.7071C23.0196 22.8946 22.7652 23 22.5 23H2.5C2.23478 23 1.98043 22.8946 1.79289 22.7071C1.60536 22.5196 1.5 22.2652 1.5 22V2C1.5 1.73478 1.60536 1.48043 1.79289 1.29289C1.98043 1.10536 2.23478 1 2.5 1H22.5ZM22.5 0H2.5C1.96957 0 1.46086 0.210714 1.08579 0.585786C0.710714 0.960859 0.5 1.46957 0.5 2V22C0.5 22.5304 0.710714 23.0391 1.08579 23.4142C1.46086 23.7893 1.96957 24 2.5 24H22.5C23.0304 24 23.5391 23.7893 23.9142 23.4142C24.2893 23.0391 24.5 22.5304 24.5 22V2C24.5 1.46957 24.2893 0.960859 23.9142 0.585786C23.5391 0.210714 23.0304 0 22.5 0V0Z' fill='white' /%3e %3cpath d='M3.45881 16V7.27273H8.9304V8.40625H4.77557V11.0653H8.64489V12.1946H4.77557V14.8665H8.98153V16H3.45881ZM15.4918 11.0526L14.337 11.2571C14.2887 11.1094 14.212 10.9687 14.1069 10.8352C14.0046 10.7017 13.8654 10.5923 13.6893 10.5071C13.5131 10.4219 13.293 10.3793 13.0288 10.3793C12.668 10.3793 12.3668 10.4602 12.1254 10.6222C11.8839 10.7812 11.7631 10.9872 11.7631 11.2401C11.7631 11.4588 11.8441 11.6349 12.006 11.7685C12.168 11.902 12.4293 12.0114 12.7901 12.0966L13.8299 12.3352C14.4322 12.4744 14.881 12.6889 15.1765 12.9787C15.4719 13.2685 15.6197 13.6449 15.6197 14.108C15.6197 14.5 15.506 14.8494 15.2788 15.1562C15.0543 15.4602 14.7404 15.6989 14.337 15.8722C13.9364 16.0455 13.4719 16.1321 12.9435 16.1321C12.2106 16.1321 11.6126 15.9759 11.1495 15.6634C10.6864 15.348 10.4023 14.9006 10.2972 14.321L11.5288 14.1335C11.6055 14.4545 11.7631 14.6974 12.0018 14.8622C12.2404 15.0241 12.5515 15.1051 12.935 15.1051C13.3526 15.1051 13.6864 15.0185 13.9364 14.8452C14.1864 14.669 14.3114 14.4545 14.3114 14.2017C14.3114 13.9972 14.2347 13.8253 14.0813 13.6861C13.9308 13.5469 13.6992 13.4418 13.3867 13.3707L12.2788 13.1278C11.668 12.9886 11.2163 12.767 10.9237 12.4631C10.6339 12.1591 10.489 11.7741 10.489 11.3082C10.489 10.9219 10.5969 10.5838 10.8129 10.294C11.0288 10.0043 11.3271 9.77841 11.7077 9.61648C12.0884 9.4517 12.5245 9.36932 13.016 9.36932C13.7234 9.36932 14.2802 9.52273 14.6864 9.82955C15.0927 10.1335 15.3612 10.5412 15.4918 11.0526ZM19.7777 16.1321C19.1442 16.1321 18.5987 15.9886 18.1413 15.7017C17.6868 15.4119 17.3374 15.0128 17.093 14.5043C16.8487 13.9957 16.7266 13.4134 16.7266 12.7571C16.7266 12.0923 16.8516 11.5057 17.1016 10.9972C17.3516 10.4858 17.7038 10.0866 18.1584 9.79972C18.6129 9.51278 19.1484 9.36932 19.7649 9.36932C20.2621 9.36932 20.7053 9.46165 21.0945 9.64631C21.4837 9.82812 21.7976 10.0838 22.0362 10.4134C22.2777 10.7429 22.4212 11.1278 22.4666 11.5682H21.2266C21.1584 11.2614 21.0021 10.9972 20.7578 10.7756C20.5163 10.554 20.1925 10.4432 19.7862 10.4432C19.4311 10.4432 19.12 10.5369 18.853 10.7244C18.5888 10.9091 18.3828 11.1733 18.2351 11.517C18.0874 11.858 18.0135 12.2614 18.0135 12.7273C18.0135 13.2045 18.0859 13.6165 18.2308 13.9631C18.3757 14.3097 18.5803 14.5781 18.8445 14.7685C19.1115 14.9588 19.4254 15.054 19.7862 15.054C20.0277 15.054 20.2464 15.0099 20.4425 14.9219C20.6413 14.831 20.8075 14.7017 20.9411 14.5341C21.0774 14.3665 21.1726 14.1648 21.2266 13.929H22.4666C22.4212 14.3523 22.2834 14.7301 22.0533 15.0625C21.8232 15.3949 21.5149 15.6562 21.1286 15.8466C20.745 16.0369 20.2947 16.1321 19.7777 16.1321Z' fill='white' /%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='25' height='24' viewBox='0 0 25 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M22.5 1C22.7652 1 23.0196 1.10536 23.2071 1.29289C23.3946 1.48043 23.5 1.73478 23.5 2V22C23.5 22.2652 23.3946 22.5196 23.2071 22.7071C23.0196 22.8946 22.7652 23 22.5 23H2.5C2.23478 23 1.98043 22.8946 1.79289 22.7071C1.60536 22.5196 1.5 22.2652 1.5 22V2C1.5 1.73478 1.60536 1.48043 1.79289 1.29289C1.98043 1.10536 2.23478 1 2.5 1H22.5ZM22.5 0H2.5C1.96957 0 1.46086 0.210714 1.08579 0.585786C0.710714 0.960859 0.5 1.46957 0.5 2V22C0.5 22.5304 0.710714 23.0391 1.08579 23.4142C1.46086 23.7893 1.96957 24 2.5 24H22.5C23.0304 24 23.5391 23.7893 23.9142 23.4142C24.2893 23.0391 24.5 22.5304 24.5 22V2C24.5 1.46957 24.2893 0.960859 23.9142 0.585786C23.5391 0.210714 23.0304 0 22.5 0V0Z' fill='white' /%3e %3cpath d='M11.0237 12L14.3567 15.2C14.4018 15.2425 14.4377 15.2938 14.4622 15.3507C14.4868 15.4077 14.4995 15.469 14.4995 15.531C14.4995 15.593 14.4868 15.6543 14.4622 15.7112C14.4377 15.7682 14.4018 15.8195 14.3567 15.862C14.2637 15.9503 14.1404 15.9996 14.0122 15.9996C13.8839 15.9996 13.7606 15.9503 13.6677 15.862L9.98966 12.331C9.94456 12.2885 9.90864 12.2372 9.88408 12.1802C9.85952 12.1233 9.84685 12.062 9.84685 12C9.84685 11.938 9.85952 11.8767 9.88408 11.8197C9.90864 11.7628 9.94456 11.7115 9.98966 11.669L13.6677 8.13699C13.7606 8.04864 13.8839 7.99937 14.0122 7.99937C14.1404 7.99937 14.2637 8.04864 14.3567 8.13699C14.4019 8.17954 14.438 8.2309 14.4626 8.28791C14.4873 8.34492 14.5 8.40638 14.5 8.46849C14.5 8.53061 14.4873 8.59206 14.4626 8.64907C14.438 8.70609 14.4019 8.75745 14.3567 8.79999L11.0237 12Z' fill='white' /%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='25' height='24' viewBox='0 0 25 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M2.5 1C2.23478 1 1.98043 1.10536 1.79289 1.29289C1.60536 1.48043 1.5 1.73478 1.5 2V22C1.5 22.2652 1.60536 22.5196 1.79289 22.7071C1.98043 22.8946 2.23478 23 2.5 23H22.5C22.7652 23 23.0196 22.8946 23.2071 22.7071C23.3946 22.5196 23.5 22.2652 23.5 22V2C23.5 1.73478 23.3946 1.48043 23.2071 1.29289C23.0196 1.10536 22.7652 1 22.5 1H2.5ZM2.5 0H22.5C23.0304 0 23.5391 0.210714 23.9142 0.585786C24.2893 0.960859 24.5 1.46957 24.5 2V22C24.5 22.5304 24.2893 23.0391 23.9142 23.4142C23.5391 23.7893 23.0304 24 22.5 24H2.5C1.96957 24 1.46086 23.7893 1.08579 23.4142C0.710714 23.0391 0.5 22.5304 0.5 22V2C0.5 1.46957 0.710714 0.960859 1.08579 0.585786C1.46086 0.210714 1.96957 0 2.5 0V0Z' fill='white' /%3e %3cpath d='M13.9763 12L10.6433 15.2C10.5982 15.2425 10.5623 15.2938 10.5378 15.3507C10.5132 15.4077 10.5005 15.469 10.5005 15.531C10.5005 15.593 10.5132 15.6543 10.5378 15.7112C10.5623 15.7682 10.5982 15.8195 10.6433 15.862C10.7363 15.9503 10.8596 15.9996 10.9878 15.9996C11.1161 15.9996 11.2394 15.9503 11.3323 15.862L15.0103 12.331C15.0554 12.2885 15.0914 12.2372 15.1159 12.1802C15.1405 12.1233 15.1531 12.062 15.1531 12C15.1531 11.938 15.1405 11.8767 15.1159 11.8197C15.0914 11.7628 15.0554 11.7115 15.0103 11.669L11.3323 8.13699C11.2394 8.04864 11.1161 7.99937 10.9878 7.99937C10.8596 7.99937 10.7363 8.04864 10.6433 8.13699C10.5981 8.17954 10.562 8.2309 10.5374 8.28791C10.5127 8.34492 10.5 8.40638 10.5 8.46849C10.5 8.53061 10.5127 8.59206 10.5374 8.64907C10.562 8.70609 10.5981 8.75745 10.6433 8.79999L13.9763 12Z' fill='white' /%3e%3c/svg%3e\";\n  export default img;","import { PointCloudContext } from './PointCloudContext';\nimport { useRotate } from './hooks/useRotate';\nimport { useBoxes } from './hooks/useBoxes';\nimport { useSingleBox } from './hooks/useSingleBox';\nimport { useSphere } from './hooks/useSphere';\nimport React, { useContext, useEffect } from 'react';\nimport {\n  cTool,\n  AttributeUtils,\n  CommonToolUtils,\n  EToolName,\n  EPointCloudName,\n} from '@labelbee/lb-annotation';\nimport { message } from 'antd';\nimport { connect } from 'react-redux';\nimport { a2MapStateToProps, IA2MapStateProps } from '@/store/annotation/map';\nimport { ICustomToolInstance } from '@/hooks/annotation';\nimport { useStatus } from './hooks/useStatus';\nimport { usePointCloudViews } from './hooks/usePointCloudViews';\nimport { LabelBeeContext, useDispatch } from '@/store/ctx';\nimport { useHistory } from './hooks/useHistory';\nimport { useAttribute } from './hooks/useAttribute';\nimport { ICoordinate } from '@labelbee/lb-utils/dist/types/types/common';\nimport { useConfig } from './hooks/useConfig';\nimport { usePolygon } from './hooks/usePolygon';\nimport { useLine } from './hooks/useLine';\nimport { useTranslation } from 'react-i18next';\nimport { IFileItem } from '@/types/data';\nimport { PreDataProcess } from '@/store/annotation/actionCreators';\nimport { IPointCloudBox } from '@labelbee/lb-utils';\n\nconst { EPolygonPattern } = cTool;\n\ninterface IProps extends IA2MapStateProps {\n  checkMode?: boolean;\n  toolInstanceRef: React.MutableRefObject<ICustomToolInstance>;\n}\n\nconst PointCloudListener: React.FC<IProps> = ({\n  currentData,\n  config,\n  checkMode,\n  configString,\n  imgIndex,\n  toolInstanceRef,\n}) => {\n  const ptCtx = useContext(PointCloudContext);\n  const {\n    changeSelectedBoxValid,\n    selectNextBox,\n    selectPrevBox,\n    updateSelectedBox,\n    deleteSelectedPointCloudBoxAndPolygon,\n  } = useSingleBox();\n  const { selectedSphere, updatePointCloudSphere } = useSphere();\n  const { clearAllResult, updatePointCloudPattern } = useStatus();\n  const { copySelectedBoxes, pasteSelectedBoxes, copiedBoxes } = useBoxes({ config });\n  const { updateRotate } = useRotate({ currentData });\n  const { updatePointCloudData, topViewSelectedChanged } = usePointCloudViews();\n  const {\n    redo,\n    undo,\n    pushHistoryWithList,\n    pushHistoryUnderUpdatePolygon,\n    pushHistoryUnderUpdateLine,\n  } = useHistory();\n  const dispatch = useDispatch();\n  const { syncThreeViewsAttribute } = useAttribute();\n  const { syncAllViewsConfig, reRenderTopViewRange } = useConfig();\n  const { selectedPolygon } = usePolygon();\n  const { selectedLine } = useLine();\n  const { t } = useTranslation();\n\n  const updatePolygonOffset = (offset: Partial<ICoordinate>) => {\n    const { topViewInstance } = ptCtx;\n    if (!topViewInstance) {\n      return;\n    }\n    topViewInstance.pointCloud2dOperation?.updateSelectedPolygonsPoints(offset);\n  };\n\n  const keydownEvents = (lowerCaseKey: string, e: KeyboardEvent) => {\n    const { topViewInstance, mainViewInstance } = ptCtx;\n    if (!topViewInstance) {\n      return;\n    }\n\n    const { pointCloud2dOperation: TopPointCloudPolygonOperation } = topViewInstance;\n\n    switch (lowerCaseKey) {\n      case 'q': {\n        // Q - anticlockwise\n        updateRotate(2);\n        break;\n      }\n\n      case 'e':\n        // E - closewise\n        updateRotate(-2);\n\n        break;\n\n      case 'g':\n        // G ， overturn 180\n        updateRotate(180);\n\n        break;\n\n      case 'u':\n        {\n          // U , change TopOpereation Pattern\n          const newToolName =\n            TopPointCloudPolygonOperation.pattern === EPolygonPattern.Normal\n              ? EToolName.Rect\n              : EToolName.Polygon;\n          updatePointCloudPattern(newToolName);\n\n          // Tips\n          const POLYGON_PATTERN = {\n            [EToolName.Polygon]: t('PolygonPattern'),\n            [EToolName.Rect]: t('RectPattern'),\n          };\n          message.success(t('ChangePatternMsg', { pattern: POLYGON_PATTERN[newToolName] }));\n\n          // Clear Status\n          TopPointCloudPolygonOperation.clearActiveStatus();\n          TopPointCloudPolygonOperation.clearDrawingStatus();\n        }\n\n        break;\n\n      // +: Increase points size\n      case '+':\n        mainViewInstance?.updatePointSize({ zoomIn: true });\n        break;\n\n      // -: Reduce points size\n      case '-':\n        mainViewInstance?.updatePointSize({ zoomIn: false });\n        break;\n\n      case 'v':\n        ptCtx.setPointCloudValid(!ptCtx.valid);\n        break;\n\n      case 'tab':\n        if (e.shiftKey) {\n          selectPrevBox();\n          break;\n        }\n        selectNextBox();\n        e.preventDefault();\n        break;\n\n      case 'f':\n        changeSelectedBoxValid();\n        break;\n\n      case 'arrowup':\n        updatePolygonOffset({ y: -1 });\n        break;\n\n      case 'arrowdown':\n        updatePolygonOffset({ y: 1 });\n        break;\n\n      case 'arrowleft':\n        updatePolygonOffset({ x: -1 });\n        break;\n\n      case 'arrowright':\n        updatePolygonOffset({ x: 1 });\n        break;\n\n      case 'delete':\n        deleteSelectedPointCloudBoxAndPolygon();\n        break;\n\n      default: {\n        if (config.attributeList?.length > 0) {\n          const keyCode2Attribute = AttributeUtils.getAttributeByKeycode(\n            e.keyCode,\n            config.attributeList,\n          );\n\n          if (keyCode2Attribute !== undefined) {\n            toolInstanceRef.current?.setDefaultAttribute(keyCode2Attribute);\n          }\n        }\n        return;\n      }\n    }\n  };\n\n  const ctrlKeydownEvents = (lowerCaseKey: string, e: KeyboardEvent) => {\n    switch (lowerCaseKey) {\n      case 'c':\n        copySelectedBoxes();\n        break;\n      case 'v':\n        pasteSelectedBoxes();\n        break;\n      case 'a':\n        e.preventDefault();\n        ptCtx.selectedAllBoxes();\n        break;\n      case 'z': {\n        if (e.shiftKey) {\n          redo();\n        } else {\n          undo();\n        }\n        break;\n      }\n\n      default:\n        break;\n    }\n  };\n\n  const onKeyDown = (e: KeyboardEvent) => {\n    if (!CommonToolUtils.hotkeyFilter(e) || checkMode === true) {\n      return;\n    }\n\n    const lowerCaseKey = e.key.toLocaleLowerCase();\n\n    if (e.ctrlKey) {\n      ctrlKeydownEvents(lowerCaseKey, e);\n      return;\n    }\n\n    keydownEvents(lowerCaseKey, e);\n  };\n\n  useEffect(() => {\n    const { topViewInstance } = ptCtx;\n    if (!topViewInstance) {\n      return;\n    }\n\n    window.addEventListener('keydown', onKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n    };\n  }, [ptCtx, copiedBoxes, config, ptCtx.pointCloudBoxList, ptCtx.polygonList]);\n\n  useEffect(() => {\n    syncAllViewsConfig(config);\n  }, [configString]);\n\n  useEffect(() => {\n    if (config?.radius) {\n      reRenderTopViewRange(config?.radius);\n    }\n  }, [config?.radius]);\n\n  // Page switch data initialization\n  useEffect(() => {\n    updatePointCloudData?.();\n  }, [imgIndex, ptCtx.mainViewInstance]);\n\n  useEffect(() => {\n    ptCtx.setHideAttributes([]);\n  }, [imgIndex]);\n\n  // Update the listener of toolInstance.\n  useEffect(() => {\n    toolInstanceRef.current.setDefaultAttribute = (newAttribute: string) => {\n      syncThreeViewsAttribute(newAttribute);\n      const selectBox = ptCtx.selectedPointCloudBox;\n      if (selectBox) {\n        selectBox.attribute = newAttribute;\n\n        const nextResult = dispatch(\n          PreDataProcess({\n            tool: EPointCloudName.PointCloud,\n            dataList: [selectBox],\n            stepConfig: config,\n            action: 'viewUpdateBox',\n          }),\n        ) as unknown as IPointCloudBox[];\n\n        selectBox.valid = nextResult[0].valid;\n\n        const newPointCloudList = updateSelectedBox(selectBox);\n\n        ptCtx?.topViewInstance?.pointCloud2dOperation?.setPolygonValidAndRender?.(\n          selectBox.id,\n          true,\n          selectBox.valid,\n        );\n\n        if (ptCtx.mainViewInstance) {\n          // TODO: Poor performance.\n          topViewSelectedChanged({\n            newSelectedBox: selectBox,\n            newPointCloudList: newPointCloudList,\n          });\n        }\n      }\n      if (selectedPolygon) {\n        pushHistoryUnderUpdatePolygon({ ...selectedPolygon, attribute: newAttribute });\n      }\n      if (selectedLine) {\n        pushHistoryUnderUpdateLine({ ...selectedLine, attribute: newAttribute });\n      }\n      if (selectedSphere) {\n        const newSphereList = updatePointCloudSphere({\n          ...selectedSphere,\n          attribute: newAttribute,\n        });\n        if (ptCtx.mainViewInstance) {\n          ptCtx.mainViewInstance?.generateSpheres(newSphereList);\n          topViewSelectedChanged({\n            newSelectedSphere: selectedSphere,\n            newSphereList: newSphereList,\n          });\n        }\n      }\n    };\n\n    toolInstanceRef.current.setSubAttribute = (key: string, value: string) => {\n      const selectBox = ptCtx.selectedPointCloudBox;\n      if (selectBox) {\n        const originSubAttribute = selectBox?.subAttribute ?? {};\n\n        selectBox.subAttribute = {\n          ...originSubAttribute,\n          [key]: value,\n        };\n\n        updateSelectedBox(selectBox);\n      }\n    };\n    toolInstanceRef.current.clearResult = () => {\n      clearAllResult?.();\n    };\n\n    toolInstanceRef.current.redo = () => {\n      redo();\n    };\n\n    toolInstanceRef.current.undo = () => {\n      undo();\n    };\n\n    toolInstanceRef.current.setValid = (valid: boolean) => {\n      toolInstanceRef.current.valid = valid;\n\n      // Avoid triggering SetState operations in the reducer phase\n      setTimeout(() => {\n        ptCtx.setPointCloudValid(valid);\n\n        if (valid === false) {\n          clearAllResult();\n        }\n      });\n    };\n\n    /**\n     * TopView forbid all operations.\n     * @param forbidOperation\n     */\n    toolInstanceRef.current.setForbidOperation = (forbidOperation: boolean) => {\n      ptCtx.topViewInstance?.pointCloud2dOperation?.setForbidOperation(forbidOperation);\n      if (forbidOperation === true) {\n        // Clear Selected Status.\n        ptCtx.setSelectedIDs(undefined);\n      }\n    };\n\n    toolInstanceRef.current.setShowDefaultCursor = (showDefaultCursor: boolean) => {\n      ptCtx.topViewInstance?.pointCloud2dOperation?.setShowDefaultCursor(showDefaultCursor);\n    };\n\n    toolInstanceRef.current.asyncData = (newData: IFileItem) => {\n      // Next Tick to update.\n      setTimeout(() => {\n        updatePointCloudData?.(newData);\n      });\n    };\n  }, [\n    ptCtx.pointCloudBoxList,\n    ptCtx.pointCloudSphereList,\n    ptCtx.selectedID,\n    ptCtx.valid,\n    ptCtx.polygonList,\n    ptCtx.lineList,\n    ptCtx.mainViewInstance,\n    ptCtx.ptSegmentInstance,\n  ]);\n\n  /**\n   * PointCloud Segmentation\n   */\n  useEffect(() => {\n    toolInstanceRef.current.updateSegmentTool = (tool: 'CircleSelector' | 'CircleSelector') => {\n      ptCtx.ptSegmentInstance?.emit(tool);\n    };\n\n    toolInstanceRef.current.segmentInstance = ptCtx.ptSegmentInstance;\n  }, [ptCtx.ptSegmentInstance]);\n\n  useEffect(() => {\n    toolInstanceRef.current.history = {\n      // Origin Result\n      pushHistory: (result: any[]) => {\n        // Rewrite\n        // TODO, The polygon is out of range.\n        pushHistoryWithList({ pointCloudBoxList: result });\n      },\n      initRecord: () => {},\n    };\n  }, []);\n\n  useEffect(() => {\n    const toolInstance = ptCtx.topViewInstance?.toolInstance;\n\n    if (!toolInstance || checkMode) {\n      return;\n    }\n    // TopViewOperation Emitter\n    const syncAttribute = (newAttribute: string) => {\n      syncThreeViewsAttribute(newAttribute);\n    };\n\n    const messageError = (error: string) => {\n      message.error(error);\n    };\n    const messageInfo = (info: string) => {\n      message.info(info);\n    };\n\n    toolInstance.on('syncAttribute', syncAttribute);\n    toolInstance.on('messageError', messageError);\n    toolInstance.on('messageInfo', messageInfo);\n\n    return () => {\n      toolInstance.unbind('syncAttribute', syncAttribute);\n      toolInstance.unbind('messageError', messageError);\n      toolInstance.unbind('messageInfo', messageInfo);\n    };\n  }, [ptCtx.topViewInstance]);\n\n  return null;\n};\n\nexport default connect(a2MapStateToProps, null, null, { context: LabelBeeContext })(\n  PointCloudListener,\n);\n","import { IPointCloudBoxList, IPointCloudConfig } from '@labelbee/lb-utils';\nimport { useCallback, useContext, useMemo, useState } from 'react';\nimport _ from 'lodash';\nimport { message, Modal } from 'antd';\nimport { usePointCloudViews } from './usePointCloudViews';\nimport { PointCloudContext } from '../PointCloudContext';\nimport { useTranslation } from 'react-i18next';\n\n/**\n * Actions for selected boxes\n */\nexport const useBoxes = ({ config }: { config: IPointCloudConfig }) => {\n  const {\n    selectedIDs,\n    pointCloudBoxList,\n    displayPointCloudList,\n    setPointCloudResult,\n    syncAllViewPointCloudColor,\n  } = useContext(PointCloudContext);\n  const [copiedBoxes, setCopiedBoxes] = useState<IPointCloudBoxList>([]);\n  const { pointCloudBoxListUpdated } = usePointCloudViews();\n  const { t, i18n } = useTranslation();\n\n  const hasDuplicateID = (checkBoxList: IPointCloudBoxList) => {\n    if (config.trackConfigurable !== true) {\n      return false;\n    }\n\n    return pointCloudBoxList.some((item) => {\n      return checkBoxList.some((i) => i.trackID === item.trackID);\n    });\n  };\n\n  const selectedBoxes = useMemo(() => {\n    return displayPointCloudList.filter((i) => selectedIDs.includes(i.id));\n  }, [selectedIDs, displayPointCloudList]);\n\n  const copySelectedBoxes = useCallback(() => {\n    if (selectedBoxes.length > 0) {\n      setCopiedBoxes(_.cloneDeep(selectedBoxes));\n    } else {\n      setCopiedBoxes([]);\n      message.error(t('CopyEmptyInPointCloud'));\n    }\n  }, [selectedIDs, displayPointCloudList, i18n.language]);\n\n  const pasteSelectedBoxes = useCallback(() => {\n    if (copiedBoxes.length === 0) {\n      message.error(t('PasteEmptyInPointCloud'));\n      return;\n    }\n\n    const hasDuplicate = hasDuplicateID(copiedBoxes);\n\n    const updatePointCloudResult = (newPointCloudBoxList: IPointCloudBoxList) => {\n      /** Paste succeed and empty */\n      setPointCloudResult(newPointCloudBoxList);\n      pointCloudBoxListUpdated?.(newPointCloudBoxList);\n      setCopiedBoxes([]);\n\n      // TODO: It need to update in global.\n      syncAllViewPointCloudColor(newPointCloudBoxList);\n    };\n\n    if (hasDuplicate) {\n      Modal.confirm({\n        title: t('HasDuplicateIDHeader'),\n        content: t('HasDuplicateIDMsg'),\n        onOk: () => {\n          /**\n           * Filter the same trackID in old-pointCloudBoxList.\n           */\n          const newPointCloudResult = pointCloudBoxList\n            .filter((v) => {\n              if (copiedBoxes.find((c) => c.trackID === v.trackID)) {\n                return false;\n              }\n              return true;\n            })\n            .concat(copiedBoxes);\n\n          updatePointCloudResult(newPointCloudResult);\n        },\n      });\n    } else {\n      /** Paste succeed and empty */\n      const newPointCloudResult = [...displayPointCloudList, ...copiedBoxes];\n\n      updatePointCloudResult(newPointCloudResult);\n    }\n  }, [copiedBoxes, displayPointCloudList, i18n.language]);\n\n  return { copySelectedBoxes, pasteSelectedBoxes, copiedBoxes, selectedBoxes };\n};\n","import { PointCloudContext } from '../PointCloudContext';\nimport { useContext } from 'react';\nimport { IPointCloudConfig } from '@labelbee/lb-utils';\n\nexport const useConfig = () => {\n  const { topViewInstance, sideViewInstance, backViewInstance, mainViewInstance } =\n    useContext(PointCloudContext);\n\n  const syncAllViewsConfig = (config: IPointCloudConfig) => {\n    [topViewInstance, sideViewInstance, backViewInstance].forEach((instance) => {\n      instance?.updateConfig(config);\n      \n      /**\n       * If update the config, needs to update defaultAttribute.\n       */\n      const defaultAttribute = config?.attributeList?.[0]?.value;\n      if (defaultAttribute) {\n        instance?.pointCloud2dOperation.setDefaultAttribute(defaultAttribute);\n      }\n    });\n    mainViewInstance?.setConfig(config);\n  };\n\n  const reRenderTopViewRange = (radius: number) => {\n    topViewInstance?.pointCloudInstance?.generateRange?.(radius);\n    topViewInstance?.pointCloudInstance?.render();\n  };\n\n  return {\n    syncAllViewsConfig,\n    reRenderTopViewRange,\n  };\n};\n","import { useContext } from 'react';\nimport { ILine } from '@labelbee/lb-utils';\nimport { PointCloudContext } from '../PointCloudContext';\nimport { useHistory } from './useHistory';\n\n/**\n * PointCloud line Hook\n * @returns\n */\nexport const useLine = () => {\n  const { lineList, setLineList, selectedID } = useContext(PointCloudContext);\n  const { addHistory, pushHistoryWithList } = useHistory();\n\n  const selectedLine = lineList.find((v) => v.id === selectedID);\n\n  const addLine = (line: ILine) => {\n    setLineList(lineList.concat(line));\n    addHistory({ newLine: line });\n  };\n\n  const deleteLine = (id: string) => {\n    const newLineList = lineList.filter((v) => v.id !== id).map((v) => ({ ...v }));\n    setLineList(newLineList);\n    pushHistoryWithList({ lineList: newLineList });\n  };\n\n  const updateSelectedLine = (line: ILine) => {\n    if (selectedLine) {\n      setLineList(\n        lineList.map((v) => {\n          if (v.id === selectedID) {\n            return line;\n          }\n          return v;\n        }),\n      );\n    }\n  };\n\n  const updateLineValidByID = (id: string) => {\n    const line = lineList.find((v) => v.id === id);\n    if (line) {\n      setLineList(\n        lineList.map((v) => {\n          if (v.id === id) {\n            return {\n              ...v,\n              valid: !v.valid,\n            };\n          }\n          return v;\n        }),\n      );\n    }\n  };\n\n  return {\n    addLine,\n    deleteLine,\n    selectedLine,\n    updateSelectedLine,\n    updateLineValidByID,\n  };\n};\n","import React, { useContext, useEffect } from 'react';\nimport { a2MapStateToProps, IA2MapStateProps } from '@/store/annotation/map';\nimport { connect } from 'react-redux';\nimport { LabelBeeContext } from '@/store/ctx';\nimport { ICustomToolInstance } from '@/hooks/annotation';\nimport { PointCloudContext } from './PointCloudContext';\nimport { CommonToolUtils } from '@labelbee/lb-annotation';\nimport { EPointCloudSegmentMode, PointCloudUtils } from '@labelbee/lb-utils';\nimport { useAttribute } from './hooks/useAttribute';\n\ninterface IProps extends IA2MapStateProps {\n  checkMode?: boolean;\n  toolInstanceRef: React.MutableRefObject<ICustomToolInstance>;\n}\n\nconst PointCloudSegmentListener: React.FC<IProps> = ({\n  checkMode,\n  currentData,\n  imgIndex,\n  highlightAttribute,\n  config,\n  toolInstanceRef,\n}) => {\n  const { updateSegmentAttribute } = useAttribute();\n\n  const ptCtx = useContext(PointCloudContext);\n  const { ptSegmentInstance, setSegmentation } = ptCtx;\n\n  /**\n   * Listen\n   */\n  useEffect(() => {\n    if (ptSegmentInstance && currentData.url) {\n      /**\n       * Reset All Status and data.\n       *\n       * 1. clear stash\n       * 2. clear all segment data.\n       *\n       */\n      ptSegmentInstance.emit('clearStash');\n      ptSegmentInstance.emit('clearAllSegmentData');\n      ptSegmentInstance.loadPCDFile(currentData?.url ?? '').then(() => {\n        const segmentData = PointCloudUtils.getSegmentFromResultList(currentData?.result ?? '');\n        ptSegmentInstance?.store?.updateCurrentSegment(segmentData);\n      });\n\n      // Update segmentData.\n      ptSegmentInstance.on('syncSegmentData', setSegmentation);\n\n      return () => {\n        ptSegmentInstance.unbind('syncSegmentData', setSegmentation);\n      };\n    }\n  }, [imgIndex, ptSegmentInstance]);\n\n  useEffect(() => {\n    ptSegmentInstance?.store?.highlightPointsByAttribute(highlightAttribute ?? '');\n  }, [highlightAttribute, ptSegmentInstance]);\n\n  const segmentKeydownEvents = (lowerCaseKey: string, e: KeyboardEvent) => {\n    switch (lowerCaseKey) {\n      case 'h':\n        ptSegmentInstance?.emit('LassoSelector');\n        break;\n\n      case 'j':\n        ptSegmentInstance?.emit('CircleSelector');\n        break;\n\n      case 'u':\n        ptSegmentInstance?.emit('setSegmentMode', EPointCloudSegmentMode.Add);\n        break;\n\n      case 'i':\n        ptSegmentInstance?.emit('setSegmentMode', EPointCloudSegmentMode.Remove);\n        break;\n\n      case 'enter':\n        ptSegmentInstance?.emit('updateCheck2Edit');\n        break;\n\n      case 'delete':\n        ptSegmentInstance?.emit(\n          'deleteSelectedSegmentData',\n          ptSegmentInstance.store?.cacheSegData?.id,\n        );\n        break;\n    }\n  };\n\n  const onKeyDown = (e: KeyboardEvent) => {\n    if (!CommonToolUtils.hotkeyFilter(e) || checkMode === true) {\n      return;\n    }\n    const lowerCaseKey = e.key.toLocaleLowerCase();\n\n    segmentKeydownEvents(lowerCaseKey, e);\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', onKeyDown);\n\n    toolInstanceRef.current.setDefaultAttribute = (newAttribute: string) => {\n      updateSegmentAttribute(newAttribute);\n    };\n\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n    };\n  }, [ptSegmentInstance]);\n\n  useEffect(() => {\n    toolInstanceRef.current.clearResult = () => {\n      if (!ptCtx.ptSegmentInstance) {\n        return;\n      }\n      ptCtx.ptSegmentInstance.emit('clearAllSegmentData');\n    };\n  }, [\n    ptCtx.pointCloudBoxList,\n    ptCtx.valid,\n    ptCtx.polygonList,\n    ptCtx.lineList,\n    ptCtx.pointCloudSphereList,\n    ptCtx.ptSegmentInstance,\n  ]);\n\n  return null;\n};\n\nexport default connect(a2MapStateToProps, null, null, { context: LabelBeeContext })(\n  PointCloudSegmentListener,\n);\n","import useSize from '@/hooks/useSize';\nimport { IA2MapStateProps, a2MapStateToProps } from '@/store/annotation/map';\nimport { LabelBeeContext } from '@/store/ctx';\nimport { getClassName } from '@/utils/dom';\nimport { PointCloud } from '@labelbee/lb-annotation';\nimport React, { useContext, useEffect, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { PointCloudContext } from './PointCloudContext';\nimport { PointCloudUtils } from '@labelbee/lb-utils';\n\ninterface IProps extends IA2MapStateProps {\n  checkMode?: boolean;\n}\n\nconst PointCloudSegment: React.FC<IProps> = ({ currentData, config, checkMode }) => {\n  const domRef = useRef<HTMLDivElement>(null);\n  const { setPtSegmentInstance, setDefaultAttribute, ptSegmentInstance } =\n    useContext(PointCloudContext);\n  const size = useSize(domRef);\n\n  const defaultAttribute = config?.attributeList?.[0]?.value;\n\n  useEffect(() => {\n    if (!size?.width || !domRef.current || ptSegmentInstance) {\n      return;\n    }\n\n    const newPtSegmentInstance = new PointCloud({\n      container: domRef.current,\n      isOrthographicCamera: true,\n      isSegment: true,\n      orthographicParams: PointCloudUtils.getDefaultOrthographicParams(size),\n      config,\n      checkMode,\n    });\n\n    newPtSegmentInstance.store?.setAttribute(defaultAttribute);\n    setDefaultAttribute(defaultAttribute);\n    setPtSegmentInstance(newPtSegmentInstance);\n  }, [size]);\n\n  useEffect(() => {\n    if (ptSegmentInstance) {\n      // Update size of segmentation.\n      ptSegmentInstance.initRenderer();\n      ptSegmentInstance.initOrthographicCamera(PointCloudUtils.getDefaultOrthographicParams(size));\n      ptSegmentInstance.render();\n    }\n  }, [size]);\n\n  return <div className={getClassName('point-cloud-layout')} ref={domRef} />;\n};\n\nexport default connect(a2MapStateToProps, null, null, { context: LabelBeeContext })(\n  PointCloudSegment,\n);\n","import React, { useContext, useEffect, useState } from 'react';\nimport { getClassName } from '@/utils/dom';\nimport FinishSvg from '@/assets/annotation/pointCloudTool/finish.svg';\nimport CancelSvg from '@/assets/annotation/pointCloudTool/cancel.svg';\nimport { PointCloudContext } from './PointCloudContext';\nimport {\n  EPointCloudSegmentFocusMode,\n  EPointCloudSegmentStatus,\n  IPointCloudSegmentation,\n} from '@labelbee/lb-utils';\nimport { useTranslation } from 'react-i18next';\n\nconst SegmentInfo: React.FC<{ infoList?: Array<{ key: string; value: string | number }> }> = ({\n  infoList,\n}) => {\n  const { t } = useTranslation();\n\n  if (!infoList) {\n    return null;\n  }\n\n  return (\n    <div className={getClassName('point-cloud-status', 'info')}>\n      {infoList.map((v) => (\n        <div key={v.key}>\n          <span>{t(v.key)}： </span>\n          <span>{v.value}</span>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst PointCloudSegmentStatus = () => {\n  const { t } = useTranslation();\n  const { ptSegmentInstance, setDefaultAttribute } = useContext(PointCloudContext);\n\n  const [data, setData] = useState<{\n    segmentStatus: EPointCloudSegmentStatus;\n    cacheSegData?: IPointCloudSegmentation;\n  }>({\n    segmentStatus: EPointCloudSegmentStatus.Ready,\n  });\n\n  useEffect(() => {\n    if (ptSegmentInstance) {\n      const updateVisible = (newData: {\n        segmentStatus: EPointCloudSegmentStatus;\n        cacheSegData: IPointCloudSegmentation;\n      }) => {\n        setData(newData);\n        if (newData.cacheSegData) {\n          setDefaultAttribute(newData.cacheSegData.attribute);\n        }\n      };\n\n      ptSegmentInstance?.on('syncPointCloudStatus', updateVisible);\n\n      return () => {\n        ptSegmentInstance?.unbind('syncPointCloudStatus', updateVisible);\n      };\n    }\n  }, [ptSegmentInstance]);\n\n  const status = data.segmentStatus;\n\n  if (status === EPointCloudSegmentStatus.Ready) {\n    return null;\n  }\n\n  const isCheckStatus = status === EPointCloudSegmentStatus.Check;\n  const isEditStatus = status === EPointCloudSegmentStatus.Edit;\n\n  let customButton: React.ReactNode = null;\n  const pointsLength = (data.cacheSegData?.points?.length ?? 0) / 3;\n  let infoList = [\n    {\n      key: 'SelectedPoints',\n      value: pointsLength,\n    },\n    {\n      key: 'Attribute',\n      value: data.cacheSegData?.attribute ?? '',\n    },\n  ];\n  if (isCheckStatus) {\n    customButton = (\n      <div className={getClassName('point-cloud-status', 'operation')}>\n        <span\n          className={getClassName('point-cloud-status', 'button')}\n          onClick={() => {\n            ptSegmentInstance?.emit('updateCheck2Edit');\n          }}\n        >\n          {/* <img className={getClassName('point-cloud-status', 'icon')} src={FinishSvg} /> */}\n          {t('EnterEditMode')}\n          (Enter)\n        </span>\n      </div>\n    );\n  }\n\n  if (isEditStatus) {\n    customButton = (\n      <div className={getClassName('point-cloud-status', 'operation')}>\n        <span\n          className={getClassName('point-cloud-status', 'button')}\n          onClick={() => {\n            ptSegmentInstance?.emit('addStash2Store');\n            if (ptSegmentInstance?.store?.segmentFocusMode === EPointCloudSegmentFocusMode.Focus) {\n              ptSegmentInstance?.emit('setSegmentFocusMode', EPointCloudSegmentFocusMode.Unfocus);\n            }\n          }}\n        >\n          <img className={getClassName('point-cloud-status', 'icon')} src={FinishSvg} />\n          {t('Finish')}\n        </span>\n        <span\n          className={getClassName('point-cloud-status', 'button')}\n          onClick={() => {\n            ptSegmentInstance?.emit('clearStash');\n            if (ptSegmentInstance?.store?.segmentFocusMode === EPointCloudSegmentFocusMode.Focus) {\n              ptSegmentInstance?.emit('setSegmentFocusMode', EPointCloudSegmentFocusMode.Unfocus);\n            }\n          }}\n        >\n          <img className={getClassName('point-cloud-status', 'icon')} src={CancelSvg} />\n          {t('Cancel')}\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {customButton}\n      <SegmentInfo infoList={infoList} />\n    </>\n  );\n};\nexport default PointCloudSegmentStatus;\n","var img = \"data:image/svg+xml,%3csvg width='13.666504' height='9.666687' viewBox='0 0 13.6665 9.66669' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cpath id='%e6%ad%a3%e7%a1%ae' d='M13.4761 1.1333L5.30957 9.46661C5.18164 9.59692 5.00635 9.66919 4.82373 9.66663C4.6416 9.664 4.46826 9.58679 4.34424 9.45294L0.177734 4.95294C-0.0727539 4.6828 -0.0566406 4.26099 0.213867 4.0108C0.483887 3.76068 0.905762 3.77692 1.15576 4.04706L4.84717 8.03357L12.5239 0.200073C12.7817 -0.0629272 13.2036 -0.0671997 13.4668 0.190552C13.7295 0.448242 13.7339 0.8703 13.4761 1.1333Z' fill-rule='evenodd' fill='%23333333'/%3e %3cdefs/%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='10.450195' height='10.420227' viewBox='0 0 10.4502 10.4202' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cpath id='%e9%94%99%e8%af%af' d='M10.1914 0.194397C9.93066 -0.0654907 9.50879 -0.0646973 9.24854 0.196106L5.21533 4.2442L1.16699 0.210693C0.90625 -0.0491943 0.484375 -0.0484619 0.224121 0.212402C-0.0356445 0.473206 -0.034668 0.895325 0.226074 1.15521L4.27393 5.18872L0.194336 9.28302C-0.0654297 9.54382 -0.0649414 9.96594 0.196289 10.2258C0.457031 10.4857 0.878906 10.4849 1.13867 10.2241L5.21875 6.12982L9.31299 10.2095C9.57373 10.4694 9.99609 10.4687 10.2559 10.2079C10.5156 9.94702 10.5151 9.52496 10.2539 9.26508L6.15967 5.1853L10.1934 1.13721C10.4531 0.876404 10.4526 0.454285 10.1914 0.194397Z' fill-rule='evenodd' fill='%23333333'/%3e %3cdefs/%3e%3c/svg%3e\";\n  export default img;","import { getClassName } from '@/utils/dom';\nimport { message, Switch, Tooltip } from 'antd';\n// import AddSvg from '@/assets/annotation/pointCloudTool/addSvg.svg';\n// import ClearSvg from '@/assets/annotation/pointCloudTool/clearSvg.svg';\nimport CoverMode from '@/assets/annotation/pointCloudTool/coverMode.svg';\nimport UnCoverMode from '@/assets/annotation/pointCloudTool/unCoverMode.svg';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { HidePointCloudSegmentSvg, FocusModeSvg } from '@/assets/annotation/pointCloudTool/svg'\nimport { PointCloudContext } from './PointCloudContext';\nimport {\n  EPointCloudSegmentCoverMode,\n  EPointCloudSegmentMode,\n  EPointCloudSegmentFocusMode,\n  EPointCloudSegmentStatus, IPointCloudSegmentation,\n} from '@labelbee/lb-utils';\nimport { useTranslation } from 'react-i18next';\n\nconst PointCloudSegmentToolbar = () => {\n  const { t } = useTranslation();\n  const { ptSegmentInstance } = useContext(PointCloudContext);\n  const [mode, setMode] = useState(\n    ptSegmentInstance?.store?.segmentMode ?? EPointCloudSegmentMode.Add,\n  );\n\n  const [coverMode, setCoverMode] = useState(\n    ptSegmentInstance?.store?.segmentCoverMode ?? EPointCloudSegmentCoverMode.Cover,\n  );\n\n  const [focusMode, setFocusMode] = useState(\n    ptSegmentInstance?.store?.segmentFocusMode ?? EPointCloudSegmentFocusMode.Unfocus,\n  );\n\n  const [hideSegment, setHideSegment] = useState(ptSegmentInstance?.store?.hideSegment ?? false)\n\n  const [data, setData] = useState<{\n    segmentStatus: EPointCloudSegmentStatus;\n    cacheSegData?: IPointCloudSegmentation;\n  }>({\n    segmentStatus: EPointCloudSegmentStatus.Ready,\n  });\n\n  useEffect(() => {\n    if (!ptSegmentInstance) {\n      return;\n    }\n\n    const updateSegmentMode = (mode: EPointCloudSegmentMode) => {\n      setMode(mode);\n    };\n    const updateCoverMode = (coverMode: EPointCloudSegmentCoverMode) => {\n      setCoverMode(coverMode);\n    };\n\n    const updateFocusMode = (focusMode: EPointCloudSegmentFocusMode) => {\n      setFocusMode(focusMode)\n    }\n\n    const switchHideSegment = (hideSegment: boolean) => {\n      setHideSegment(hideSegment)\n    }\n\n    const updateData = (newData: {\n      segmentStatus: EPointCloudSegmentStatus;\n      cacheSegData: IPointCloudSegmentation;\n    }) => {\n      setData(newData);\n    };\n\n    ptSegmentInstance.on('setSegmentMode', updateSegmentMode);\n    ptSegmentInstance.on('setSegmentCoverMode', updateCoverMode);\n    ptSegmentInstance.on('setSegmentFocusMode', updateFocusMode);\n    ptSegmentInstance.on('switchHideSegment', switchHideSegment);\n    ptSegmentInstance.on('syncPointCloudStatus', updateData);\n    return () => {\n      ptSegmentInstance.unbind('setSegmentMode', updateSegmentMode);\n      ptSegmentInstance.unbind('setSegmentCoverMode', updateCoverMode);\n      ptSegmentInstance.unbind('setSegmentFocusMode', updateFocusMode);\n      ptSegmentInstance.unbind('switchHideSegment', switchHideSegment);\n      ptSegmentInstance.unbind('syncPointCloudStatus', updateData);\n    };\n  }, [ptSegmentInstance]);\n\n  const checked = mode === EPointCloudSegmentMode.Add;\n  const focusInvalid = hideSegment === true || !data?.cacheSegData\n  const hideInvalid = focusMode === EPointCloudSegmentFocusMode.Focus\n  return (\n    <div className={getClassName('point-cloud-toolbar')}>\n      {/* <Switch checkedChildren={<img src={AddSvg} />} unCheckedChildren={<img src={ClearSvg} />} /> */}\n      <Switch\n        checkedChildren='+'\n        unCheckedChildren='-'\n        checked={checked}\n        onChange={(checked) => {\n          ptSegmentInstance?.emit(\n            'setSegmentMode',\n            checked ? EPointCloudSegmentMode.Add : EPointCloudSegmentMode.Remove,\n          );\n        }}\n      />\n      <div\n        className={getClassName('point-cloud-toolbox')}\n        onClick={() => {\n          ptSegmentInstance?.emit(\n            'setSegmentCoverMode',\n            coverMode === EPointCloudSegmentCoverMode.Cover\n              ? EPointCloudSegmentCoverMode.Uncover\n              : EPointCloudSegmentCoverMode.Cover,\n          );\n          message.info({\n            content: t(\n              coverMode === EPointCloudSegmentCoverMode.Cover\n                ? 'PointCloudUncoverMode'\n                : 'PointCloudCoverMode',\n            ),\n            icon: () => null,\n          });\n        }}\n      >\n        <img\n          src={coverMode === EPointCloudSegmentCoverMode.Cover ? CoverMode : UnCoverMode}\n        />\n      </div>\n      <Tooltip title={focusInvalid ? t(hideSegment === true ? \"PointCloudHideFocusInvalid_hide\" : \"PointCloudHideFocusInvalid_none\") : ''}>\n        <div\n          className={getClassName('point-cloud-toolbox')}\n          onClick={() => {\n            if (focusInvalid) return\n            ptSegmentInstance?.emit(\n              'setSegmentFocusMode',\n              focusMode === EPointCloudSegmentFocusMode.Focus\n                ? EPointCloudSegmentFocusMode.Unfocus\n                : EPointCloudSegmentFocusMode.Focus\n            )\n            message.success(t(focusMode === EPointCloudSegmentFocusMode.Focus ? 'PointCloudUnfocusMode' : 'PointCloudFocusMode'))\n          }}\n        >\n          <FocusModeSvg\n            color={focusInvalid ? '#CCC' : (focusMode === EPointCloudSegmentFocusMode.Focus) ? '#1664FF' : '#FFF' }\n          />\n        </div>\n      </Tooltip>\n      <Tooltip title={hideInvalid ? t('PointCloudHideSegmentInvalid') : ''}>\n        <div\n          className={getClassName('point-cloud-toolbox')}\n          onClick={() => {\n            if (hideInvalid) return\n            ptSegmentInstance?.emit('switchHideSegment', !hideSegment)\n            message.success(t(hideSegment === true ? 'PointCloudShowSegment' : 'PointCloudHideSegment'))\n          }}\n        >\n          <HidePointCloudSegmentSvg\n            color={hideInvalid ? '#CCC' : hideSegment ? '#1664FF' : '#FFF' }\n          />\n        </div>\n      </Tooltip>\n    </div>\n  );\n};\n\nexport default PointCloudSegmentToolbar\n","var img = \"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3ctitle%3eFrame 1312316531%3c/title%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='24' height='24'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7%e4%bc%98%e5%8c%96' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='%e7%82%b9%e4%ba%91%e5%b7%a5%e5%85%b7-%e5%88%86%e5%89%b2%e6%a8%a1%e5%bc%8f' transform='translate(-1432.000000%2c -88.000000)'%3e %3cg id='%e7%bc%96%e7%bb%84-10' transform='translate(1352.000000%2c 84.000000)'%3e %3cg id='Frame-1312316531' transform='translate(80.000000%2c 4.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='Frame-1312316531-(Background/Mask)'%3e%3c/g%3e %3cg id='Group-1312317594' mask='url(%23mask-2)'%3e %3cg transform='translate(3.000000%2c 3.000000)'%3e %3cpath d='M0%2c0 L14%2c0 L14%2c14 L0%2c14 L0%2c0 Z' id='Vector-205' stroke='white' stroke-width='2' fill='none' stroke-linejoin='round' stroke-dasharray='0%2c0'%3e%3c/path%3e %3cpath d='M4%2c3 L17%2c3 C17.5522847%2c3 18%2c3.44771525 18%2c4 L18%2c17 C18%2c17.5522847 17.5522847%2c18 17%2c18 L4%2c18 C3.44771525%2c18 3%2c17.5522847 3%2c17 L3%2c4 C3%2c3.44771525 3.44771525%2c3 4%2c3 Z' id='Vector-206' stroke='none' fill='white' fill-rule='evenodd'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e\";\n  export default img;","var img = \"data:image/svg+xml,%3csvg width='24.000000' height='24.000000' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3cdesc%3e Created with Pixso. %3c/desc%3e %3cmask id='mask155_5132' mask-type='alpha' maskUnits='userSpaceOnUse' x='0.000000' y='0.000000' width='24.000000' height='24.000000'%3e %3crect id='Frame 1312316531 (Background/Mask)' width='24.000000' height='24.000000' fill='%23C4C4C4'/%3e %3c/mask%3e %3cg mask='url(%23mask155_5132)'%3e %3cpath id='Vector 205' d='M3 3L17 3L17 17L3 17L3 3Z' fill-rule='evenodd' fill='white'/%3e %3cpath id='Vector 205' d='M17 3L17 17L3 17L3 3L17 3Z' stroke='white' stroke-width='2.000000' stroke-linejoin='round' stroke-dasharray='0 0'/%3e %3cpath id='Vector 206' d='M6 7C6 6.44775 6.44775 6 7 6L20 6C20.5522 6 21 6.44775 21 7L21 20C21 20.5522 20.5522 21 20 21L7 21C6.44775 21 6 20.5522 6 20L6 7ZM19 8L8 8L8 19L19 19L19 8Z' fill-rule='evenodd' fill='white'/%3e %3c/g%3e %3cdefs/%3e%3c/svg%3e\";\n  export default img;","import React from 'react'\nexport const HidePointCloudSegmentSvg = (props: { color: string }) => (<svg width=\"24.000000\" height=\"24.000000\" viewBox=\"0 0 24 24\" fill=\"none\">\n  <g>\n    <rect id=\"Rectangle 12065\" x=\"2.500000\" y=\"7.002930\" rx=\"0.500000\" width=\"8.127075\" height=\"10.000000\" fill={props.color ?? \"#FFFFFF\"}/>\n    <rect id=\"Rectangle 12066\" x=\"15.503906\" y=\"8.002930\" width=\"5.996094\" height=\"8.000000\" stroke={props.color ?? \"#FFFFFF\"} strokeWidth=\"2.000000\" strokeLinejoin=\"round\" strokeDasharray=\"0 0\"/>\n    <path id=\"Vector 183\" d=\"M12.5098 4L12.5098 20\" stroke={props.color ?? \"#FFFFFF\"} strokeWidth=\"2.000000\" strokeLinejoin=\"round\" strokeLinecap=\"round\" strokeDasharray=\"0 0\"/>\n  </g>\n  <defs/>\n</svg>)\n\nexport const FocusModeSvg = (props: { color: string }) => (<svg width=\"24.000000\" height=\"24.000000\" viewBox=\"0 0 24 24\" fill=\"none\" >\n  <g>\n    <path id=\"Vector\" d=\"M14.5811 6.89233L14.5811 3.22339L9.58105 3.22339L9.58105 6.89233C8.08643 7.75684 7.08105 9.37268 7.08105 11.2234C7.08105 13.9849 9.31982 16.2234 12.0811 16.2234C14.8423 16.2234 17.0811 13.9849 17.0811 11.2234C17.0811 9.37268 16.0757 7.75684 14.5811 6.89233ZM14.5811 6.89233C13.8457 6.46692 12.9917 6.22339 12.0811 6.22339C11.1704 6.22339 10.3164 6.46692 9.58105 6.89233L9.58105 7.22339L14.5811 7.22339L14.5811 6.89233Z\" clipRule=\"evenodd\" fillRule=\"evenodd\" fill={props.color ?? \"#FFFFFF\"} fillOpacity=\"1.000000\"/>\n    <path id=\"Vector 170\" d=\"M2.36572 10.2231L5.41895 10.2231\" stroke={props.color ?? \"#FFFFFF\"} strokeWidth=\"2.000000\" strokeDasharray=\"0 0\"/>\n    <path id=\"Vector 172\" d=\"M11.0811 17.7231L11.0811 20.7763\" stroke={props.color ?? \"#FFFFFF\"} strokeWidth=\"2.000000\" strokeDasharray=\"0 0\"/>\n    <path id=\"Vector 173\" d=\"M17.0015 15.6702L19.1602 17.8291\" stroke={props.color ?? \"#FFFFFF\"} strokeWidth=\"2.000000\" strokeDasharray=\"0 0\"/>\n    <path id=\"Vector 174\" d=\"M4.58105 17.8293L6.73975 15.6704\" stroke={props.color ?? \"#FFFFFF\"} strokeWidth=\"2.000000\" strokeDasharray=\"0 0\"/>\n    <path id=\"Vector 171\" d=\"M18.5811 10.2231L21.6343 10.2231\" stroke={props.color ?? \"#FFFFFF\"} strokeWidth=\"2.000000\" strokeDasharray=\"0 0\"/>\n  </g>\n  <defs/>\n</svg>)\n\n","import classNames from 'classnames';\nimport React, { useEffect, useState } from 'react';\nimport PointCloudBackView from '../../PointCloudBackView';\nimport PointCloudSideView from '../../PointCloudSideView';\nimport { getClassName } from '@/utils/dom';\nimport { useTranslation } from 'react-i18next';\n\ninterface IProps {\n  selectAndEnlarge: boolean;\n  checkMode?: boolean;\n}\nconst SideAndBackOverView = (props: IProps) => {\n  const { t } = useTranslation();\n  const { selectAndEnlarge, checkMode } = props;\n\n  const BACK_SIDE_CONTAIN_WIDTH = 360;\n  const BACK_SIDE_CONTAIN_HEIGHT = 400;\n  const initPositionX = window.innerWidth - BACK_SIDE_CONTAIN_WIDTH;\n  const initPositionY = window.innerHeight - BACK_SIDE_CONTAIN_HEIGHT;\n\n  const [position, setPosition] = useState({\n    x: initPositionX,\n    y: initPositionY,\n  });\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n\n  useEffect(() => {\n    window.addEventListener('resize', onResize);\n    return () => {\n      window.removeEventListener('resize', onResize);\n      setPosition({\n        x: initPositionX,\n        y: initPositionY,\n      });\n      setOffset({ x: 0, y: 0 });\n    };\n  }, []);\n\n  const onResize = () => {\n    const initPositionX = window.innerWidth - BACK_SIDE_CONTAIN_WIDTH;\n    const initPositionY = window.innerHeight - BACK_SIDE_CONTAIN_HEIGHT;\n\n    setPosition({\n      x: initPositionX,\n      y: initPositionY,\n    });\n  };\n\n  return (\n    <div\n      className={classNames({\n        [getClassName('point-cloud-container', 'left-bottom')]: true,\n        [getClassName('point-cloud-container', 'left-bottom-float')]: true,\n      })}\n      style={{\n        top: position.y,\n        left: position.x,\n        width: 360,\n        height: 400,\n        zIndex: selectAndEnlarge ? 1003 : -1,\n      }}\n    >\n      <div\n        className={getClassName('point-cloud-container', 'left-bottom-floatHeader')}\n        draggable={'true'}\n        onDragStart={(event) => {\n          if (selectAndEnlarge) {\n            setOffset({\n              x: event.clientX - position.x,\n              y: event.clientY - position.y,\n            });\n          }\n        }}\n        onDrag={(e: any) => {\n          const moveX = e.clientX - offset.x;\n          const moveY = e.clientY - offset.y;\n          setPosition({ x: moveX, y: moveY });\n        }}\n        onDragEnd={(e: any) => {\n          const moveX = e.clientX - offset.x;\n          const moveY = e.clientY - offset.y;\n          setPosition({ x: moveX, y: moveY });\n        }}\n      >\n        {t('DragAndDrop')}\n      </div>\n\n      <PointCloudBackView checkMode={checkMode} />\n      <PointCloudSideView checkMode={checkMode} />\n    </div>\n  );\n};\nexport default SideAndBackOverView;\n","import classNames from 'classnames';\nimport _ from 'lodash';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\n\nimport { PointCloudContext } from '@/components/pointCloudView/PointCloudContext';\nimport { AppState } from '@/store';\nimport {\n  BatchUpdateImgListResultByPredictResult,\n  SetPointCloudLoading,\n  SetPredictResult,\n  SetPredictResultVisible,\n} from '@/store/annotation/actionCreators';\nimport { IPointCloudBoxWithIndex } from '@/store/annotation/types';\nimport { LabelBeeContext, useDispatch } from '@/store/ctx';\nimport { IFileItem } from '@/types/data';\nimport { getClassName } from '@/utils/dom';\nimport { PointCloud } from '@labelbee/lb-annotation';\nimport { PointCloudUtils, toolStyleConverter } from '@labelbee/lb-utils';\n\nimport { getViewsDataUrl, IBox, sleep, views } from './util';\n\ninterface IProps {\n  imgList: IFileItem[];\n  predictionResultVisible: boolean;\n  predictionResult: IPointCloudBoxWithIndex[];\n}\n\nconst PreviewResult = (props: IProps) => {\n  const { predictionResult, predictionResultVisible, imgList } = props;\n\n  const [list, setList] = useState<IBox[]>([]);\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n\n  const close = () => {\n    SetPredictResultVisible(dispatch, false);\n    SetPredictResult(dispatch, []);\n    setList([]);\n  };\n\n  const apply = async () => {\n    SetPointCloudLoading(dispatch, true);\n    await dispatch(BatchUpdateImgListResultByPredictResult());\n    SetPointCloudLoading(dispatch, false);\n    close();\n  };\n\n  return predictionResultVisible ? (\n    <>\n      {list.length > 0 && (\n        <div className={getClassName('point-cloud-predict-tracking-container')}>\n          <div className={getClassName('point-cloud-predict-tracking-container', 'bar')}>\n            <div className={getClassName('point-cloud-predict-tracking-container', 'title')}>\n              <div>\n                {t('ComplementaryTrackingPrediction')}\n                {list.length > 0 ? `（${list.length}）` : ''}\n              </div>\n              <div className={getClassName('point-cloud-predict-tracking-container', 'option')}>\n                <div\n                  className={classNames([\n                    getClassName('point-cloud-predict-tracking-container', 'cancelOption'),\n                    getClassName('point-cloud-predict-tracking-container', 'button'),\n                  ])}\n                  onClick={close}\n                >\n                  {t('Cancel')}\n                </div>\n\n                <div\n                  className={classNames([\n                    getClassName('point-cloud-predict-tracking-container', 'okOption'),\n                    getClassName('point-cloud-predict-tracking-container', 'button'),\n                  ])}\n                  onClick={apply}\n                >\n                  {t('Apply')}\n                </div>\n              </div>\n            </div>\n\n            <div className={getClassName('point-cloud-predict-tracking-container', 'content')}>\n              <Result list={list} />\n            </div>\n          </div>\n        </div>\n      )}\n      {predictionResult.length > 0 && (\n        <GenerateViewsDataUrl result={predictionResult} imgList={imgList} setList={setList} />\n      )}\n    </>\n  ) : null;\n};\n\nconst Result = (props: { list: IBox[] }) => {\n  const { list } = props;\n  const { t } = useTranslation();\n  const viewsTitle = [t('TopView'), t('SideView'), t('BackView')];\n\n  return (\n    <>\n      <div className={getClassName('point-cloud-predict-tracking-container', 'left')}>\n        {viewsTitle.map((i) => (\n          <div className={getClassName('point-cloud-predict-tracking-container', 'title')} key={i}>\n            {i}\n          </div>\n        ))}\n      </div>\n      <div className={getClassName('point-cloud-predict-tracking-container', 'right')}>\n        {list.map((i) => {\n          return (\n            <div\n              className={getClassName('point-cloud-predict-tracking-container', 'item')}\n              key={i.id}\n            >\n              {views.map((view) => {\n                const url = i[view];\n                return (\n                  <div\n                    className={getClassName('point-cloud-predict-tracking-container', 'view')}\n                    key={`${i.id}-${view}`}\n                  >\n                    <img src={url} />\n                  </div>\n                );\n              })}\n            </div>\n          );\n        })}\n      </div>\n    </>\n  );\n};\n\nconst GenerateViewsDataUrl = (props: {\n  result: IPointCloudBoxWithIndex[];\n  imgList: IFileItem[];\n  setList: (list: IBox[]) => void;\n}) => {\n  const ptCtx = React.useContext(PointCloudContext);\n  const dispatch = useDispatch();\n\n  const { result, imgList, setList } = props;\n\n  const ref = useRef<HTMLDivElement>(null);\n\n  const size = {\n    width: 600,\n    height: 600,\n  };\n\n  useEffect(() => {\n    const generate = async () => {\n      const config = ptCtx.mainViewInstance?.config;\n\n      if (config && ref.current) {\n        const orthographicParams = PointCloudUtils.getDefaultOrthographicParams(size);\n\n        const pointCloud = new PointCloud({\n          container: ref.current,\n          isOrthographicCamera: true,\n          orthographicParams,\n          config,\n        });\n\n        pointCloud.setShowDirection(false);\n\n        for (const item of result) {\n          const { index } = item;\n\n          const url = imgList[index].url\n            ? imgList[index].url\n            : // @ts-ignore\n              imgList[index]?.webPointCloudFile?.lidar?.url ?? '';\n\n          await pointCloud.loadPCDFileByBox(url, item, {\n            width: 2,\n            height: 2,\n            depth: 2,\n          });\n\n          await pointCloud.updateCameraZoom(ptCtx.zoom);\n\n          const fill = toolStyleConverter.getColorFromConfig(\n            { attribute: item.attribute },\n            { ...config, attributeConfigurable: true },\n            {},\n          )?.fill;\n\n          pointCloud.generateBox(item, fill);\n          // TODO\n          // getViewsDataUrl requires pointCloud to finish loading the 3D view, otherwise it will not capture the correct image\n          await sleep(500);\n          await getViewsDataUrl(pointCloud, item, ptCtx.zoom);\n          await pointCloud.removeObjectByName(item.id, 'box');\n          await pointCloud.clearPointCloudAndRender();\n        }\n\n        setList(result);\n        SetPointCloudLoading(dispatch, false);\n      }\n    };\n\n    generate();\n  }, []);\n\n  return <div style={size} ref={ref} className='generate-view' />;\n};\n\nconst mapStateToProps = (state: AppState) => ({\n  predictionResult: state.annotation.predictionResult,\n  predictionResultVisible: state.annotation.predictionResultVisible,\n  imgList: state.annotation.imgList,\n});\n\nexport default connect(mapStateToProps, null, null, { context: LabelBeeContext })(PreviewResult);\n","import { AppProps } from '@/App';\nimport { prefix } from '@/constant';\nimport { Layout } from 'antd/es';\nimport _ from 'lodash';\nimport React, { useState, useMemo } from 'react';\nimport Sidebar from '../sidebar';\nimport ToolFooter from '../toolFooter';\nimport { getClassName } from '@/utils/dom';\nimport { classnames } from '@/utils';\nimport { LLMContext } from '@/store/ctx';\nimport LLMToolView from '@/components/LLMToolView';\n\ninterface IProps {\n  path: string;\n  loading: boolean;\n}\n\nconst { Sider, Content } = Layout;\nconst layoutCls = `${prefix}-layout`;\n\nconst LLMLayout: React.FC<AppProps & IProps> = (props) => {\n  const [hoverKey, setHoverKey] = useState(-1);\n  return (\n    <Layout className={getClassName('layout', 'container')}>\n      <LLMContext.Provider\n        value={useMemo(() => {\n          return { hoverKey, setHoverKey };\n        }, [hoverKey])}\n      >\n        {props?.leftSider}\n        <Content\n          className={classnames({\n            [`${layoutCls}__content`]: true,\n            [`${prefix}-LLMLayout`]: true,\n          })}\n        >\n          <LLMToolView checkMode={props.checkMode} showTips={props.showTips} tips={props.tips} />\n          <ToolFooter style={props.style?.footer} mode={props.mode} footer={props?.footer} />\n        </Content>\n\n        <Sider className={`${layoutCls}__side`} width={600} style={{ position: 'relative' }}>\n          <Sidebar sider={props?.sider} checkMode={props?.checkMode} />\n          {props.drawLayerSlot?.({})}\n        </Sider>\n      </LLMContext.Provider>\n    </Layout>\n  );\n};\n\nexport default LLMLayout;\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { rootReducer } from './store';\n\nexport default function configureStore() {\n  return createStore(rootReducer, applyMiddleware(thunk));\n}\n","import { combineReducers, CombinedState } from 'redux';\nimport { annotationReducer } from './annotation/reducer';\nimport { imgAttributeReducer } from './imgAttribute/reducer';\nimport { toolStyleReducer } from './toolStyle/reducer';\n\nexport const rootReducer: CombinedState<any> = combineReducers({\n  annotation: annotationReducer,\n  imgAttribute: imgAttributeReducer,\n  toolStyle: toolStyleReducer,\n});\n\nexport type AppState = ReturnType<typeof rootReducer>;\n","import { IMAGE_ATTRIBUTE_ACTIONS } from '@/store/Actions';\nimport { ImgAttributeState, ImgAttributeActionTypes } from './types';\n\nconst initialState: ImgAttributeState = {\n  contrast: 1,\n  saturation: 1,\n  brightness: 1,\n  zoomRatio: 1,\n  isOriginalSize: false,\n};\n\nexport function imgAttributeReducer(\n  state = { ...initialState },\n  action: ImgAttributeActionTypes,\n): ImgAttributeState {\n  switch (action.type) {\n    case IMAGE_ATTRIBUTE_ACTIONS.UPDATE_IMG_ATTRIBUTE: {\n      return {\n        ...state,\n        ...action.payload,\n      };\n    }\n\n    case IMAGE_ATTRIBUTE_ACTIONS.INIT_IMG_ATTRIBUTE: {\n      return {\n        ...initialState,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n","import { COLORS_ARRAY, NULL_COLOR } from '@/data/Style';\nimport { ToolStyleUtils } from '@/utils/ToolStyleUtils';\nimport { TOOL_STYLE_ACTIONS } from '@/store/Actions';\nimport { ToolStyleActionTypes, ToolStyleState } from './types';\n\nconst initialState: ToolStyleState = {\n  color: 1,\n  width: 2,\n  borderOpacity: 9,\n  fillOpacity: 9,\n  toolColor: ToolStyleUtils.getToolColors(),\n  attributeColor: ToolStyleUtils.getAttributeColors(),\n  lineColor: ToolStyleUtils.getDefaultToolLineColors(),\n  attributeLineColor: [NULL_COLOR].concat(COLORS_ARRAY),\n};\n\nexport function toolStyleReducer(\n  state = { ...initialState },\n  action: ToolStyleActionTypes,\n): ToolStyleState {\n  switch (action.type) {\n    case TOOL_STYLE_ACTIONS.INIT_TOOL_STYLE_CONFIG: {\n      return {\n        ...initialState,\n      };\n    }\n\n    case TOOL_STYLE_ACTIONS.UPDATE_TOOL_STYLE_CONFIG: {\n      const computeColor = {};\n      const payload = action.payload;\n      if (payload?.borderOpacity || payload?.fillOpacity) {\n        Object.assign(\n          computeColor,\n          ToolStyleUtils.initByOpacity(\n            payload.borderOpacity || state.borderOpacity,\n            payload.fillOpacity || state.fillOpacity,\n          ),\n        );\n      }\n\n      return {\n        ...state,\n        ...action.payload,\n        ...computeColor,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n","import {\n  CHANGE_COLOR,\n  DEFAULT_COLOR,\n  COLORS_ARRAY,\n  NULL_COLOR,\n  BORDER_OPACITY_LEVEL,\n  FILL_OPACITY_LEVEL,\n} from '@/data/Style';\nimport _ from 'lodash';\n\nconst FILL_OPACITY = 0.8;\n\nexport class ToolStyleUtils {\n  public static changeOpacity: { [a: number]: number } = {\n    1: 0.2,\n    3: 0.4,\n    5: 0.6,\n    7: 0.8,\n    9: 1.0,\n  };\n\n  public static colorSplit(color: string, opacity: number) {\n    return color\n      .split(' ')\n      .join('')\n      .replace(/,[0-9]+([.]{1}[0-9]+){0,1}\\)/, `,${opacity.toFixed(2)})`);\n  }\n\n  public static computeOpacity(opacity: number, color: string) {\n    const s =\n      color\n        .split(' ')\n        .join('')\n        .match(/,[0-9]+([.]{1}[0-9]+){0,1}\\)/)?.[0] || '';\n    let firstOpacity = s.match(/[0-9]+([.]{1}[0-9]+){0,1}/)?.[0];\n    return opacity * Number(firstOpacity);\n  }\n\n  public static getToolColors(borderOpacityParam = 9, fillOpacityParam = 9) {\n    const colorSplit = ToolStyleUtils.colorSplit;\n    const computeOpacity = ToolStyleUtils.computeOpacity;\n\n    const toolColor = _.cloneDeep(CHANGE_COLOR);\n    const borderOpacity = BORDER_OPACITY_LEVEL[borderOpacityParam];\n    const fillOpacity = FILL_OPACITY_LEVEL[fillOpacityParam];\n\n    Object.keys(CHANGE_COLOR).forEach((color: any) => {\n      const showColor = _.cloneDeep(DEFAULT_COLOR);\n      showColor.valid.stroke = colorSplit(\n        CHANGE_COLOR[color].valid,\n        computeOpacity(borderOpacity, CHANGE_COLOR[color].valid),\n      );\n      showColor.valid.fill = colorSplit(\n        CHANGE_COLOR[color].valid,\n        computeOpacity(fillOpacity, CHANGE_COLOR[color].valid) * FILL_OPACITY,\n      );\n      showColor.validSelected.stroke = colorSplit(\n        CHANGE_COLOR[color].select.stroke,\n        computeOpacity(borderOpacity, CHANGE_COLOR[color].select.stroke),\n      );\n      showColor.validSelected.fill = colorSplit(\n        CHANGE_COLOR[color].select.fill,\n        computeOpacity(fillOpacity, CHANGE_COLOR[color].select.fill) * FILL_OPACITY,\n      );\n      showColor.validHover.stroke = colorSplit(\n        CHANGE_COLOR[color].hover,\n        computeOpacity(borderOpacity, CHANGE_COLOR[color].hover),\n      );\n      showColor.validHover.fill = colorSplit(\n        CHANGE_COLOR[color].hover,\n        computeOpacity(fillOpacity, CHANGE_COLOR[color].hover) * FILL_OPACITY,\n      );\n\n      // 无效的比例是一样的\n      showColor.invalid.stroke = colorSplit(\n        showColor.invalid.stroke,\n        computeOpacity(borderOpacity, showColor.invalid.stroke),\n      );\n      showColor.invalid.fill = colorSplit(\n        showColor.invalid.stroke,\n        computeOpacity(fillOpacity, showColor.invalid.stroke) * FILL_OPACITY,\n      );\n      showColor.invalidSelected.stroke = colorSplit(\n        showColor.invalidSelected.stroke,\n        computeOpacity(borderOpacity, showColor.invalidSelected.stroke),\n      );\n      showColor.invalidSelected.fill = colorSplit(\n        showColor.invalidSelected.fill,\n        computeOpacity(fillOpacity, showColor.invalidSelected.fill) * FILL_OPACITY,\n      );\n      showColor.invalidHover.stroke = colorSplit(\n        showColor.invalidHover.stroke,\n        computeOpacity(borderOpacity, showColor.invalidHover.fill),\n      );\n      showColor.invalidHover.fill = colorSplit(\n        showColor.invalidHover.fill,\n        computeOpacity(fillOpacity, showColor.invalidHover.fill) * FILL_OPACITY,\n      );\n      toolColor[color] = showColor;\n    });\n    return toolColor;\n  }\n\n  public static getAttributeColors(borderOpacityParam = 9, fillOpacityParam = 9) {\n    const colorSplit = ToolStyleUtils.colorSplit;\n    const computeOpacity = ToolStyleUtils.computeOpacity;\n    const borderOpacity = BORDER_OPACITY_LEVEL[borderOpacityParam];\n    const fillOpacity = FILL_OPACITY_LEVEL[fillOpacityParam];\n\n    let AttributeColorList: string[] = _.cloneDeep(COLORS_ARRAY);\n    AttributeColorList.unshift(NULL_COLOR);\n    AttributeColorList = AttributeColorList.map((item) => {\n      const showColor = JSON.parse(JSON.stringify(DEFAULT_COLOR));\n      showColor.valid.stroke = colorSplit(item, computeOpacity(borderOpacity, item));\n      showColor.valid.fill = colorSplit(\n        item,\n        computeOpacity(fillOpacity, item) * FILL_OPACITY * 0.5,\n      );\n      showColor.validSelected.stroke = colorSplit(item, computeOpacity(borderOpacity, item));\n      showColor.validSelected.fill = colorSplit(\n        item,\n        computeOpacity(fillOpacity, item) * FILL_OPACITY,\n      );\n      showColor.validHover.stroke = colorSplit(item, computeOpacity(borderOpacity, item));\n      showColor.validHover.fill = colorSplit(\n        item,\n        computeOpacity(fillOpacity, item) * FILL_OPACITY,\n      );\n      showColor.invalid.stroke = colorSplit(\n        showColor.invalid.stroke,\n        computeOpacity(borderOpacity, item),\n      );\n      showColor.invalid.fill = colorSplit(\n        showColor.invalid.fill,\n        computeOpacity(fillOpacity, item) * FILL_OPACITY * 0.5,\n      );\n      showColor.invalidSelected.stroke = colorSplit(\n        showColor.invalidSelected.stroke,\n        computeOpacity(borderOpacity, item),\n      );\n      showColor.invalidSelected.fill = colorSplit(\n        showColor.invalidSelected.fill,\n        computeOpacity(fillOpacity, item) * FILL_OPACITY,\n      );\n      showColor.invalidHover.stroke = colorSplit(\n        showColor.invalidHover.stroke,\n        computeOpacity(borderOpacity, item),\n      );\n      showColor.invalidHover.fill = colorSplit(\n        showColor.invalidHover.fill,\n        computeOpacity(fillOpacity, item) * FILL_OPACITY,\n      );\n      return showColor;\n    });\n    return AttributeColorList;\n  }\n\n  public static getDefaultToolLineColors() {\n    const toolColor: any = {};\n    Object.keys(CHANGE_COLOR).forEach((color: any) => {\n      toolColor[color] = CHANGE_COLOR[color].line;\n    });\n    return toolColor;\n  }\n\n  public static initByOpacity(borderOpacity: number, fillOpacity: number) {\n    return {\n      toolColor: this.getToolColors(borderOpacity, fillOpacity),\n      attributeColor: this.getAttributeColors(borderOpacity, fillOpacity),\n    };\n  }\n}\n","import React, { useEffect } from 'react';\nimport { i18n } from '@labelbee/lb-utils';\nimport { I18nextProvider } from 'react-i18next';\nimport { IVideoTagInstanceAdaptorProps, TagToolInstanceAdaptor } from './TagToolInstanceAdaptor';\n\n/**\n * I18n provider for InstanceAdaptorI18nProvider\n * @param props\n */\nexport const VideoTagTool = (props: IVideoTagInstanceAdaptorProps & { lang?: string }) => {\n  useEffect(() => {\n    i18n.changeLanguage(props.lang);\n  }, [props.lang]);\n\n  return (\n    <I18nextProvider i18n={i18n}>\n      <TagToolInstanceAdaptor {...props} />\n    </I18nextProvider>\n  );\n};\n","export const LLMToolResult = {\r\n    step_1: {\r\n      dataSourceStep: 0,\r\n\r\n      result: [{\r\n        sort:[],\r\n        answerList: [\r\n          {\r\n            order: 1,\r\n            answer: '金百味',           \r\n          },\r\n          {\r\n            order: 2,\r\n            answer:\r\n              '全刀手',             \r\n          },\r\n          {\r\n            order: 3,\r\n            answer:\r\n              '费大厨',\r\n          },\r\n          {\r\n            order: 4,\r\n            answer:\r\n              '案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。', \r\n          },\r\n        ],\r\n        textAttribute:'文件'\r\n      }],\r\n      toolName: 'LLMTool',\r\n    },\r\n  };\r\n\r\nexport const LLMToolQa =   {\r\n    question:\r\n      '题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。题目限制最多二百字。',\r\n    answerList: [\r\n      {\r\n        order: 1,\r\n        answer: '金百味',\r\n      },\r\n      {\r\n        order: 2,\r\n        answer:\r\n          '全刀手 。',\r\n      },\r\n      {\r\n        order: 3,\r\n        answer:\r\n          '费大厨',\r\n      },\r\n      {\r\n        order: 4,\r\n        answer:\r\n          '案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。我是答案1，我限1000个字符。',\r\n      },\r\n    ],\r\n  }\r\n","export default __webpack_public_path__ + \"static/media/10.1785e6e3.jpg\";","export default __webpack_public_path__ + \"static/media/19.608ec5b7.jpg\";","export default __webpack_public_path__ + \"static/media/20.ad3945c2.jpg\";","export default __webpack_public_path__ + \"static/media/66.2fa781f1.jpg\";","export const pointCloudResult1 = JSON.stringify({\n  step_1: {\n    dataSourceStep: 0,\n    result: [\n      {\n        id: '00684b5d',\n        rotation: 0.02,\n        valid: true,\n        center: {\n          x: 73.57,\n          y: -3.99,\n          z: 2.25,\n        },\n        width: 4.28,\n        height: 1.91,\n        depth: 1.54,\n        trackID: 28,\n        attribute: '1',\n      },\n      {\n        id: '045b54cc',\n        rotation: 3.14,\n        valid: true,\n        center: {\n          x: 51.35,\n          y: 8.02,\n          z: 1.05,\n        },\n        width: 4.13,\n        height: 1.96,\n        depth: 1.5,\n        trackID: 24,\n        attribute: '1',\n      },\n      {\n        id: '0c42d57f',\n        rotation: 0.03,\n        valid: true,\n        center: {\n          x: 58.43,\n          y: 9.5,\n          z: 1.6,\n        },\n        width: 0.49,\n        height: 0.48,\n        depth: 1.61,\n        trackID: 43,\n        attribute: '2',\n      },\n      {\n        id: '169d029a',\n        rotation: 3.12,\n        valid: true,\n        center: {\n          x: 58.39,\n          y: 7.95,\n          z: 1.45,\n        },\n        width: 4.25,\n        height: 1.78,\n        depth: 1.63,\n        trackID: 31,\n        attribute: '1',\n      },\n      {\n        id: '18eedc63',\n        rotation: 3.12,\n        valid: true,\n        center: {\n          x: 52.36,\n          y: 3.41,\n          z: 1.58,\n        },\n        width: 4.16,\n        height: 1.85,\n        depth: 1.44,\n        trackID: 22,\n        attribute: '1',\n      },\n      {\n        id: '1f58834b',\n        rotation: 1.52,\n        valid: true,\n        center: {\n          x: 27.3,\n          y: 17.42,\n          z: 0.15,\n        },\n        width: 5.66,\n        height: 2.15,\n        depth: 2.06,\n        trackID: 16,\n        attribute: '1',\n      },\n      {\n        id: '34a40609',\n        rotation: 0.02,\n        valid: true,\n        center: {\n          x: 52.85,\n          y: 10.48,\n          z: 1.34,\n        },\n        width: 0.96,\n        height: 0.48,\n        depth: 1.76,\n        trackID: 41,\n        attribute: '2',\n      },\n      {\n        id: '36b62ec0',\n        rotation: 3.14,\n        valid: true,\n        center: {\n          x: 46.16,\n          y: 7.85,\n          z: 1.07,\n        },\n        width: 4.39,\n        height: 2.07,\n        depth: 1.52,\n        trackID: 23,\n        attribute: '1',\n      },\n      {\n        id: '385cccc3',\n        rotation: 6.24,\n        valid: true,\n        center: {\n          x: -30.16,\n          y: -3.38,\n          z: 0.72,\n        },\n        width: 4.08,\n        height: 1.84,\n        depth: 1.41,\n        trackID: 6,\n        attribute: '1',\n      },\n      {\n        id: '4588976e',\n        rotation: 3.16,\n        valid: true,\n        center: {\n          x: 44.71,\n          y: 3.49,\n          z: 1.36,\n        },\n        width: 4.12,\n        height: 1.88,\n        depth: 1.36,\n        trackID: 21,\n        attribute: '1',\n      },\n      {\n        id: '46874415',\n        rotation: 3.11,\n        valid: true,\n        center: {\n          x: 38.33,\n          y: 4.34,\n          z: 1.27,\n        },\n        width: 4.15,\n        height: 2.1,\n        depth: 1.53,\n        trackID: 20,\n        attribute: '1',\n      },\n      {\n        id: '4fd28eec',\n        rotation: 6.24,\n        valid: true,\n        center: {\n          x: -48.22,\n          y: -3.15,\n          z: 0.69,\n        },\n        width: 4.2,\n        height: 1.81,\n        depth: 1.33,\n        trackID: 9,\n        attribute: '1',\n      },\n      {\n        id: '64f5fabb',\n        rotation: 6.28,\n        valid: true,\n        center: {\n          x: -42.77,\n          y: -3.35,\n          z: 0.75,\n        },\n        width: 4.19,\n        height: 1.89,\n        depth: 1.38,\n        trackID: 8,\n        attribute: '1',\n      },\n      {\n        id: '659adc9e',\n        rotation: 0.02,\n        valid: true,\n        center: {\n          x: -54.4,\n          y: -3.08,\n          z: 0.7,\n        },\n        width: 4.08,\n        height: 1.85,\n        depth: 1.3,\n        trackID: 10,\n        attribute: '1',\n      },\n      {\n        id: '66c9e0af',\n        rotation: 1.57,\n        valid: true,\n        center: {\n          x: 27.48,\n          y: 23.71,\n          z: -0.22,\n        },\n        width: 5.31,\n        height: 2.16,\n        depth: 2.2,\n        trackID: 17,\n        attribute: '1',\n      },\n      {\n        id: '7262d63b',\n        rotation: 3.18,\n        valid: true,\n        center: {\n          x: 50.98,\n          y: -4.98,\n          z: 1.78,\n        },\n        width: 0.68,\n        height: 0.46,\n        depth: 1.67,\n        trackID: 40,\n        attribute: '2',\n      },\n      {\n        id: '76c51f8d',\n        rotation: 0.03,\n        valid: true,\n        center: {\n          x: -10.35,\n          y: -3.51,\n          z: 0.77,\n        },\n        width: 4.28,\n        height: 2.01,\n        depth: 1.7,\n        trackID: 3,\n        attribute: '1',\n      },\n      {\n        id: '7d52441c',\n        rotation: 0.57,\n        valid: true,\n        center: {\n          x: 12.89,\n          y: 14.21,\n          z: 0.22,\n        },\n        width: 0.55,\n        height: 0.74,\n        depth: 1.68,\n        trackID: 15,\n        attribute: '2',\n      },\n      {\n        id: '7f6d3f36',\n        rotation: 1.6,\n        valid: true,\n        center: {\n          x: 27.63,\n          y: 30.17,\n          z: -1.11,\n        },\n        width: 4.12,\n        height: 1.83,\n        depth: 1.52,\n        trackID: 18,\n        attribute: '1',\n      },\n      {\n        id: '8aa4aa46',\n        rotation: 6.21,\n        valid: true,\n        center: {\n          x: 51.59,\n          y: -4.06,\n          z: 1.78,\n        },\n        width: 0.72,\n        height: 0.9,\n        depth: 1.57,\n        trackID: 27,\n        attribute: '2',\n      },\n      {\n        id: '938c4493',\n        rotation: 1.98,\n        valid: true,\n        center: {\n          x: 2.92,\n          y: -2.01,\n          z: 0.82,\n        },\n        width: 0.68,\n        height: 0.7,\n        depth: 1.67,\n        trackID: 29,\n        attribute: '2',\n      },\n      {\n        id: '998e33e7',\n        rotation: 3.12,\n        valid: true,\n        center: {\n          x: 27.15,\n          y: 11.48,\n          z: 0.75,\n        },\n        width: 0.71,\n        height: 0.8,\n        depth: 1.6,\n        trackID: 30,\n        attribute: '2',\n      },\n      {\n        id: '9c34552c',\n        rotation: 3.18,\n        valid: true,\n        center: {\n          x: 75.39,\n          y: 7.33,\n          z: 2.22,\n        },\n        width: 4.32,\n        height: 2,\n        depth: 1.45,\n        trackID: 25,\n        attribute: '1',\n      },\n      {\n        id: 'a9138b37',\n        rotation: 0.02,\n        valid: true,\n        center: {\n          x: 48.32,\n          y: -4.3,\n          z: 1.97,\n        },\n        width: 0.45,\n        height: 0.76,\n        depth: 1.78,\n        trackID: 26,\n        attribute: '2',\n      },\n      {\n        id: 'b91823aa',\n        rotation: 0.06,\n        valid: true,\n        center: {\n          x: 0.87,\n          y: -3.12,\n          z: 0.91,\n        },\n        width: 4.91,\n        height: 2.15,\n        depth: 1.87,\n        trackID: 1,\n        attribute: '1',\n      },\n      {\n        id: 'bd701a17',\n        rotation: 1.55,\n        valid: true,\n        center: {\n          x: 23.36,\n          y: 29.96,\n          z: -1.34,\n        },\n        width: 4.27,\n        height: 1.98,\n        depth: 1.63,\n        trackID: 19,\n        attribute: '1',\n      },\n      {\n        id: 'c684f76c',\n        rotation: 4.69,\n        valid: true,\n        center: {\n          x: 11.94,\n          y: 0.14,\n          z: 0.96,\n        },\n        width: 1.1,\n        height: 0.59,\n        depth: 1.79,\n        trackID: 11,\n        attribute: '2',\n      },\n      {\n        id: 'c869c0b6',\n        rotation: 6.28,\n        valid: true,\n        center: {\n          x: -4.56,\n          y: -3.6,\n          z: 0.83,\n        },\n        width: 4.71,\n        height: 2.18,\n        depth: 1.69,\n        trackID: 2,\n        attribute: '1',\n      },\n      {\n        id: 'ca78a91d',\n        rotation: 6.27,\n        valid: true,\n        center: {\n          x: -17.56,\n          y: -3.59,\n          z: 0.69,\n        },\n        width: 4.37,\n        height: 1.92,\n        depth: 1.37,\n        trackID: 4,\n        attribute: '1',\n      },\n      {\n        id: 'cc201c28',\n        rotation: 6.24,\n        valid: true,\n        center: {\n          x: -35.81,\n          y: -3.2,\n          z: 0.7,\n        },\n        width: 4.14,\n        height: 1.82,\n        depth: 1.38,\n        trackID: 7,\n        attribute: '1',\n      },\n      {\n        id: 'dad7a81b',\n        rotation: 1.62,\n        valid: true,\n        center: {\n          x: 4.41,\n          y: -6.9,\n          z: 1.01,\n        },\n        width: 0.62,\n        height: 0.75,\n        depth: 1.75,\n        trackID: 13,\n        attribute: '2',\n      },\n      {\n        id: 'dc20211c',\n        rotation: 0.01,\n        valid: true,\n        center: {\n          x: -23.75,\n          y: -3.57,\n          z: 0.69,\n        },\n        width: 4.17,\n        height: 2.04,\n        depth: 1.39,\n        trackID: 5,\n        attribute: '1',\n      },\n      {\n        id: 'ee7ee126',\n        rotation: 2.49,\n        valid: true,\n        center: {\n          x: 37.24,\n          y: -7.72,\n          z: 1.85,\n        },\n        width: 0.45,\n        height: 0.57,\n        depth: 1.69,\n        trackID: 39,\n        attribute: '2',\n      },\n      {\n        id: 'f2a3902b',\n        rotation: 0.05,\n        valid: true,\n        center: {\n          x: 3.29,\n          y: -5.63,\n          z: 1,\n        },\n        width: 0.5,\n        height: 0.59,\n        depth: 1.93,\n        trackID: 12,\n        attribute: '2',\n      },\n      {\n        id: 'f54a0dea',\n        rotation: 1.58,\n        valid: true,\n        center: {\n          x: 23.37,\n          y: -13.49,\n          z: 2.09,\n        },\n        width: 4.17,\n        height: 1.86,\n        depth: 1.81,\n        trackID: 14,\n        attribute: '1',\n      },\n    ],\n    resultPolygon: [],\n    toolName: 'pointCloudTool',\n  },\n  valid: true,\n});\n","export default __webpack_public_path__ + \"static/media/1.68c25480.png\";","export default __webpack_public_path__ + \"static/media/2.bc1c9e06.png\";","export default __webpack_public_path__ + \"static/media/3.f06742c7.png\";","export default __webpack_public_path__ + \"static/media/4.aa8e8bb8.png\";","export default __webpack_public_path__ + \"static/media/5.3508d17c.png\";","export default __webpack_public_path__ + \"static/media/pro1.24a55a60.pcd\";","export default __webpack_public_path__ + \"static/media/2.fdb50962.pcd\";","export default __webpack_public_path__ + \"static/media/3.be07e849.pcd\";","export default __webpack_public_path__ + \"static/media/4.31f36ea0.pcd\";","export default __webpack_public_path__ + \"static/media/5.240c50a0.pcd\";","export default __webpack_public_path__ + \"static/media/6.d03db5c0.pcd\";","export default __webpack_public_path__ + \"static/media/7.776a1de3.pcd\";","export default __webpack_public_path__ + \"static/media/8.d1c11e1f.pcd\";","export default __webpack_public_path__ + \"static/media/9.0ff49899.pcd\";","export default __webpack_public_path__ + \"static/media/1.379e7e82.png\";","export default __webpack_public_path__ + \"static/media/2.8ce0bca2.png\";","import img1 from './images/10.jpg';\nimport img2 from './images/19.jpg';\nimport img3 from './images/20.jpg';\nimport img4 from './images/66.jpg';\nimport { pointCloudResult1 } from './pointCloud';\nimport { LLMToolResult } from './LLMTool';\n\n// Cuboid_IMG\nimport car1 from './cuboidImages/1.png';\nimport car2 from './cuboidImages/2.png';\nimport car3 from './cuboidImages/3.png';\nimport car4 from './cuboidImages/4.png';\nimport car5 from './cuboidImages/5.png';\n\n// POINTCLOUD_DATA\nimport pcd1 from './pointCloud/lidar/pro1.pcd';\nimport pcd2 from './pointCloud/lidar/2.pcd';\nimport pcd3 from './pointCloud/lidar/3.pcd';\nimport pcd4 from './pointCloud/lidar/4.pcd';\nimport pcd5 from './pointCloud/lidar/5.pcd';\nimport pcd6 from './pointCloud/lidar/6.pcd';\nimport pcd7 from './pointCloud/lidar/7.pcd';\nimport pcd8 from './pointCloud/lidar/8.pcd';\nimport pcd9 from './pointCloud/lidar/9.pcd';\nimport pointCloudImg1 from './pointCloud/image/P2/1.png';\nimport pointCloudImg2 from './pointCloud/image/P2/2.png';\nimport calib1 from './pointCloud/calib/P2/1.json';\nimport calib2 from './pointCloud/calib/P2/2.json';\n\n// const MOCK_URL = 'http://bee-sdk-demo.sensebee.xyz/images/';\n// export const fileList = ['10', '19', '20', '66'].map((i) => `${MOCK_URL}${i}.jpg`);\nexport const fileList = [car1, car2, car3, car4, car5];\n// export const fileList = [img1, img2, img3, img4];\nexport const videoList = [\n  'http://127.0.0.1:8080/a.mp4',\n  'http://127.0.0.1:8080/d.mp4',\n  'http://127.0.0.1:8080/c.mp4',\n  'http://127.0.0.1:8080/e.mp4',\n];\n\nexport const pointCloudList = [pcd1, pcd2, pcd3, pcd4, pcd5, pcd6, pcd7, pcd8, pcd9];\n\nexport const pointCloudMappingImgList = [\n  {\n    url: pointCloudImg1,\n    calib: calib1,\n  },\n  {\n    url: pointCloudImg2,\n    calib: calib2,\n  },\n];\n\nconst data = [];\n\nconst polygonData = [];\n// Array(1)\n//   .fill('')\n//   .map((v, i) => ({\n//     id: i + 1,\n//     sourceID: '',\n//     pointList: Array(1000)\n//       .fill('')\n//       .map((_) => ({\n//         x: Math.random() * 300,\n//         y: Math.random() * 400,\n//       })),\n//     order: i + 1,\n//     attribute: '',\n//     valid: true,\n//   }));\n\nexport const rectDefaultResult = JSON.stringify({\n  height: 200,\n  width: 100,\n  rotate: 0,\n  step_1: {\n    dataSource: 0,\n    tool: 'rectTool',\n    result: data,\n  },\n});\n\nexport const polygonDefaultResult = JSON.stringify({\n  height: 200,\n  width: 100,\n  rotate: 0,\n  step_1: {\n    dataSource: 0,\n    tool: 'polygonTool',\n    result: polygonData,\n  },\n});\n\nexport const tagDefaultResult = JSON.stringify({\n  height: 200,\n  width: 100,\n  rotate: 0,\n  step_1: {\n    dataSource: 0,\n    tool: 'tagTool',\n    result: [],\n  },\n});\n\nexport const videoTagDefaultResult = JSON.stringify({\n  step_1: {\n    dataSource: 0,\n    tool: 'videoTagTool',\n    result: [],\n  },\n});\n\nexport const pointCloudResult = pointCloudResult1;\n\nexport const getMockResult = (tool) => {\n  if (tool === 'rectTool') {\n    return rectDefaultResult;\n  }\n  if (tool === 'tagTool') {\n    return tagDefaultResult;\n  }\n\n  if (tool === 'polygonTool') {\n    return polygonDefaultResult;\n  }\n\n  if (tool === 'videoTagTool') {\n    return videoTagDefaultResult;\n  }\n\n  if (tool === 'LLMTool') {\n    return LLMToolResult;\n  }\n\n  if (tool === 'pointCloudTool') {\n    return '{}';\n    // return pointCloudResult;\n  }\n\n  return '';\n};\n\nexport const mockFileList = [\n  {\n    id: 1,\n    url: 'http://bee-sdk-demo.sensebee.xyz/images/10.jpg',\n    result:\n      '{\"width\":720,\"height\":1280,\"valid\":true,\"rotate\":0,\"step_1\":{\"dataSourceStep\":0,\"toolName\":\"rectTool\",\"result\":[{\"x\":272.47863247863245,\"y\":397.4928774928775,\"width\":288.0911680911681,\"height\":346.4387464387464,\"attribute\":\"\",\"valid\":true,\"id\":\"AwL2kecs\",\"sourceID\":\"\",\"textAttribute\":\"\",\"order\":1}]}}',\n  },\n  {\n    id: 2,\n    url: 'http://bee-sdk-demo.sensebee.xyz/images/19.jpg',\n    result:\n      '{\"width\":720,\"height\":1280,\"valid\":true,\"rotate\":0,\"step_1\":{\"dataSourceStep\":0,\"toolName\":\"rectTool\",\"result\":[{\"x\":137.54985754985753,\"y\":262.56410256410254,\"width\":492.30769230769226,\"height\":525.1282051282051,\"attribute\":\"\",\"valid\":true,\"id\":\"iCXb9Lat\",\"sourceID\":\"\",\"textAttribute\":\"\",\"order\":1},{\"x\":133.9031339031339,\"y\":627.2364672364672,\"width\":357.3789173789174,\"height\":353.7321937321937,\"attribute\":\"\",\"valid\":true,\"id\":\"siLd255B\",\"sourceID\":\"\",\"textAttribute\":\"\",\"order\":2},{\"x\":640.7977207977208,\"y\":1061.196581196581,\"width\":79.2022792022792,\"height\":200.56980056980055,\"attribute\":\"\",\"valid\":true,\"id\":\"udXxQJou\",\"sourceID\":\"\",\"textAttribute\":\"\",\"order\":3}]}}',\n  },\n  {\n    id: 3,\n    url: 'http://bee-sdk-demo.sensebee.xyz/images/20.jpg',\n    result:\n      '{\"width\":720,\"height\":1280,\"valid\":true,\"rotate\":0,\"step_1\":{\"dataSourceStep\":0,\"toolName\":\"rectTool\",\"result\":[{\"x\":144.84330484330485,\"y\":506.8945868945869,\"width\":324.55840455840456,\"height\":368.3190883190883,\"attribute\":\"\",\"valid\":true,\"id\":\"NFN0vzGW\",\"sourceID\":\"\",\"textAttribute\":\"\",\"order\":1},{\"x\":301.65242165242165,\"y\":328.2051282051282,\"width\":350.0854700854701,\"height\":386.5527065527065,\"attribute\":\"\",\"valid\":true,\"id\":\"t91AA81j\",\"sourceID\":\"\",\"textAttribute\":\"\",\"order\":2}]}}',\n  },\n  {\n    id: 4,\n    url: 'http://bee-sdk-demo.sensebee.xyz/images/66.jpg',\n    result:\n      '{\"width\":720,\"height\":1280,\"valid\":true,\"rotate\":0,\"step_1\":{\"dataSourceStep\":0,\"toolName\":\"rectTool\",\"result\":[]}}',\n  },\n];\n\nexport const DEFAULT_ANNOTATIONS = [\n  {\n    type: 'rect',\n    annotation: {\n      id: '123123',\n      x: 123,\n      y: 23,\n      width: 100,\n      height: 100,\n      stroke: 'pink',\n      // thickness: 10,\n      label: 'laoluo',\n      attribute: 'asdasd',\n      order: 1,\n      // hiddenText: true\n    },\n  },\n  {\n    type: 'polygon',\n    annotation: {\n      id: '3',\n      // thickness: 10,\n      stroke: 'green',\n      lineType: 1,\n      pointList: [\n        {\n          x: 12,\n          y: 123,\n        },\n        {\n          x: 122,\n          y: 123,\n        },\n        {\n          x: 2,\n          y: 3,\n        },\n      ],\n    },\n  },\n  {\n    type: 'line',\n    annotation: {\n      stroke: 'yellow',\n      thickness: 5,\n      id: '4',\n      pointList: [\n        {\n          x: 123,\n          y: 12,\n        },\n        {\n          x: 2,\n          y: 12,\n        },\n        {\n          x: 34,\n          y: 132,\n        },\n      ],\n    },\n  },\n  {\n    type: 'point',\n    annotation: {\n      id: '5',\n      x: 10,\n      y: 10,\n      fill: 'green',\n      stroke: 'blue',\n      thickness: '20',\n      radius: 10,\n    },\n  },\n  {\n    type: 'rect',\n    annotation: {\n      id: '10',\n      x: 13,\n      y: 3,\n      width: 1020,\n      height: 100,\n    },\n  },\n  {\n    type: 'text',\n    annotation: {\n      position: 'rt',\n      id: '11',\n      x: 223,\n      y: 23,\n      textMaxWidth: 416,\n      color: 'yellow',\n      text: '标签1: 测试1LoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooog\\n标签2: 测试2sdasdas\\n\\n\\n标签1: 测试1asdasdasd\\n标签2: 测试2标签1: 测试1\\n标签2: 测试2sdasdas\\n标签1: 测试1asdasdasd\\n标签2: 测试2标签1: 测试1\\n标签2: 测试2sdasdas\\n标签1: 测试1asdasdasd\\n标签2: 测试2标签1: 测试1\\n标签2: 测试2sdasdas\\n标签1: 测试1asdasdasd\\n标签2: 测试2标签1: 测试1\\n标签2: 测试2sdasdas\\n标签1: 测试1asdasdasd\\n标签2: 测试2标签1: 测试1\\n标签2: 测试2sdasdas\\n标签1: 测试1asdasdasd\\n标签2: 测试2',\n    },\n  },\n  {\n    type: 'text',\n    annotation: {\n      id: '12',\n      x: 12,\n      y: 123,\n      textMaxWidth: 500,\n      lineHeight: 25,\n      text: 'Key: Loooooooooooooooooooooooooooooooooog value\\nSecond One: short value',\n    },\n  },\n  {\n    type: 'rect',\n    annotation: {\n      id: 'g5r2l7mcrv8',\n      x: 60,\n      y: 260,\n      width: 100,\n      height: 100,\n      stroke: 'pink',\n      name: 'Bag',\n      hiddenRectSize: true,\n      renderEnhance: (params) => {\n        const {\n          ctx,\n          data: { annotation },\n          zoom,\n          currentPos,\n        } = params;\n\n        ctx.fillStyle = annotation.stroke;\n        ctx.fillRect(\n          annotation.x * zoom + currentPos.x - 2,\n          annotation.y * zoom + currentPos.y - 25,\n          40,\n          25,\n        );\n        ctx.strokeStyle = 'white';\n        ctx.strokeText(\n          annotation.name,\n          annotation.x * zoom + currentPos.x + 6,\n          annotation.y * zoom + currentPos.y - 7,\n        );\n      },\n    },\n  },\n  {\n    type: 'box3d',\n    annotation: {\n      id: 'fJGtJkho',\n      center: {\n        x: 65.40254070595145,\n        y: -0.3830958425132849,\n        z: 0.45834684240952583,\n      },\n      width: 3.8735671799451086,\n      height: 2.6857128643132304,\n      depth: 3.4032850127098584,\n      rotation: 3.107123552590266,\n      attribute: 'class-8f',\n      valid: true,\n      trackID: 3,\n      calib: {\n        P: [\n          [721.5377, 0, 609.5593, 44.85728],\n          [0, 721.5377, 172.854, 0.2163791],\n          [0, 0, 1, 0.002745884],\n        ],\n        R: [\n          [0.9999239, 0.00983776, -0.007445048],\n          [-0.009869795, 0.9999421, -0.004278459],\n          [0.007402527, 0.004351614, 0.9999631],\n        ],\n        T: [\n          [0.007533745, -0.9999714, -0.000616602, -0.004069766],\n          [0.01480249, 0.0007280733, -0.9998902, -0.07631618],\n          [0.9998621, 0.00752379, 0.01480755, -0.2717806],\n        ],\n      },\n      stroke: 'pink',\n    },\n  },\n  {\n    type: 'box3d',\n    annotation: {\n      id: 'asGtJk23',\n      center: {\n        x: 15.40254070595145,\n        y: 2.3830958425132849,\n        z: 0.45834684240952583,\n      },\n      width: 1.8735671799451086,\n      height: 3.6857128643132304,\n      depth: 4.4032850127098584,\n      rotation: 2.107123552590266,\n      attribute: 'class-8f',\n      valid: true,\n      trackID: 3,\n      calib: {\n        P: [\n          [721.5377, 0, 609.5593, 44.85728],\n          [0, 721.5377, 172.854, 0.2163791],\n          [0, 0, 1, 0.002745884],\n        ],\n        R: [\n          [0.9999239, 0.00983776, -0.007445048],\n          [-0.009869795, 0.9999421, -0.004278459],\n          [0.007402527, 0.004351614, 0.9999631],\n        ],\n        T: [\n          [0.007533745, -0.9999714, -0.000616602, -0.004069766],\n          [0.01480249, 0.0007280733, -0.9998902, -0.07631618],\n          [0.9998621, 0.00752379, 0.01480755, -0.2717806],\n        ],\n      },\n      stroke: 'rgb(255, 226, 50)',\n    },\n  },\n  {\n    type: 'cuboid',\n    annotation: {\n      attribute: 'class-gF',\n      direction: 'front',\n      valid: true,\n      id: 'dmjIbMoD',\n      sourceID: '',\n      textAttribute: 'text',\n      order: 1,\n      frontPoints: {\n        tl: {\n          x: 189.98858647936788,\n          y: 192.48726953467954,\n        },\n        tr: {\n          x: 254.1510096575944,\n          y: 192.48726953467954,\n        },\n        bl: {\n          x: 189.98858647936788,\n          y: 253.65144863915717,\n        },\n        br: {\n          x: 254.1510096575944,\n          y: 253.65144863915717,\n        },\n      },\n      backPoints: {\n        br: {\n          x: 296.7260755048288,\n          y: 217.07287093942054,\n        },\n        tr: {\n          x: 296.7260755048288,\n          y: 155.9086918349429,\n        },\n        tl: {\n          x: 232.56365232660232,\n          y: 155.9086918349429,\n        },\n        bl: {\n          x: 232.56365232660232,\n          y: 217.07287093942054,\n        },\n      },\n    },\n  },\n];\n","import React, { useEffect, useRef } from 'react';\nimport AnnotationOperation from '@labelbee/lb-components';\nimport '@labelbee/lb-components/dist/index.css';\n// import { DrawUtils } from '@labelbee/lb-annotation';\nimport { fileList as urlList } from '../../mock';\nimport { message } from 'antd';\n\n// Type definition.\n// type TRunPrediction = (params: {\n//   point: ICoordinate;\n//   rect: { x: number; y: number; w: number; h: number };\n// }) => Promise<unknown>;\n\nconst Annotation = (props) => {\n  const ref = useRef();\n  const { fileList, goBack, stepList, step } = props;\n\n  // const exportData = (data) => {\n  //   console.log('exportData', data);\n  // };\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (ref.current?.annotationEngine) {\n        const { annotationEngine } = ref.current;\n        const firstToolInstance = annotationEngine.firstToolInstance;\n        firstToolInstance?.setRunPrediction?.((data) => {\n          // data: TRunPrediction\n          return new Promise((resolve) => {\n            // 模拟异步的操作\n            setTimeout(() => {\n              // 关键，需要返回成功\n              resolve('');\n              message.success('Predict successfully');\n\n              // 返回的原来的工具\n              annotationEngine.switchLastTwoCanvas();\n            }, 1000);\n          });\n        });\n      }\n    });\n  }, []);\n\n  const onSubmit = (data, type, imgIndex, imgList) => {\n    // 翻页时触发当前页面数据的输出\n    console.log('submitData', data, type, imgIndex, imgList);\n  };\n\n  const onSave = (data, imgList, index) => {\n    console.log('save', data, imgList, index);\n  };\n\n  const dataInjectionAtCreation = (data) => {\n    return {\n      testDataInjection: 1,\n    };\n  };\n\n  // const loadFileList = (page, pageSize) => {\n  //   return new Promise((resolve) => {\n  //     const fileList = [];\n  //     const total = 105;\n  //     for (let i = 0; i < pageSize; i++) {\n  //       if (page * pageSize + i >= total) {\n  //         break;\n  //       }\n  //       fileList.push({\n  //         id: Number(`${page}${i}`),\n  //         result: '',\n  //         url: urlList[i % urlList.length],\n  //       });\n  //     }\n  //     console.log('loadFileList', fileList);\n  //     setTimeout(() => {\n  //       resolve({ fileList, total });\n  //     }, 500);\n  //   });\n  // };\n\n  // const renderEnhance = {\n  //   staticRender: (canvas, rect, style) => {\n  //     DrawUtils.drawRectWithFill(canvas, rect, { color: style.fillColor });\n  //   },\n  //   selectedRender: (canvas, rect, style) => {\n  //     DrawUtils.drawText(canvas, { x: rect.x, y: rect.y - 10 }, 'asdasdsa', { color: style.textColor });\n  //     DrawUtils.drawRectWithFill(canvas, rect, { color: 'blue' });\n  //   },\n  //   creatingRender: (canvas, rect, style) => {\n  //     console.log('style3', style);\n\n  //     DrawUtils.drawText(canvas, { x: rect.x, y: rect.y - 10 }, 'asdasdsa', { color: 'red' });\n  //     DrawUtils.drawRectWithFill(canvas, rect, { color: 'green' });\n  //   },\n  // };\n\n  return (\n    <div>\n      <AnnotationOperation\n        // exportData={exportData}\n        ref={ref}\n        headerName='测试各类工具'\n        onSubmit={onSubmit}\n        imgList={fileList}\n        pageSize={10}\n        // loadFileList={loadFileList}\n        goBack={goBack}\n        stepList={stepList}\n        step={step}\n        onSave={onSave}\n        dataInjectionAtCreation={dataInjectionAtCreation}\n        // renderEnhance={renderEnhance}\n      />\n    </div>\n  );\n};\nexport default Annotation;\n","import { cTool } from '@labelbee/lb-annotation';\nconst { EVideoToolName, EToolName, EPointCloudName } = cTool;\n\nconst rectToolConfig = {\n  showConfirm: false,\n  skipWhileNoDependencies: false,\n  drawOutsideTarget: false,\n  copyBackwardResult: true,\n  minWidth: 1,\n  minHeight: 1,\n  isShowOrder: true,\n  filterData: ['valid', 'invalid'],\n  attributeConfigurable: true,\n  attributeList: [\n    { key: '玩偶', value: 'doll' },\n    { key: '喷壶', value: 'wateringCan' },\n    { key: '脸盆', value: 'washbasin' },\n    { key: '保温杯', value: 'vacuumCup' },\n    { key: '纸巾', value: 'tissue' },\n    { key: '水壶', value: 'kettle' },\n  ],\n  textConfigurable: true,\n  textCheckType: 0,\n  customFormat: '',\n};\n\nconst scribbleToolConfig = {\n  attributeList: [\n    { key: '类别1', value: '类别1', color: 'rgba(128, 12, 249, 1)' },\n    { key: '类别bm', value: 'class-bm', color: 'rgba(0, 255, 48, 1)' },\n    { key: '类别eg', value: 'class-eg', color: 'rgba(255, 136, 247, 1)' },\n    { key: '类别vj', value: 'class-vj', color: 'rgba(255, 226, 50, 1)' },\n    { key: '类别0x', value: 'class-0x', color: 'rgba(153, 66, 23, 1)' },\n    { key: '类别GR', value: 'class-GR', color: 'rgba(2, 130, 250, 1)' },\n    { key: '类别2c', value: 'class-2c', color: 'rgba(220,94,94,1)' },\n    { key: '类别Bj', value: 'class-Bj', color: 'rgba(0, 255, 234, 1)' },\n  ],\n  showConfirm: true,\n  showDirection: false,\n  skipWhileNoDependencies: false,\n};\nconst tagToolConfig = {\n  showConfirm: true,\n  skipWhileNoDependencies: false,\n  inputList: [\n    {\n      key: '类别1',\n      value: 'class1',\n      isMulti: false,\n      subSelected: [\n        { key: '选项1', value: 'option1', isDefault: true },\n        { key: '选项2', value: 'option1-2', isDefault: false },\n      ],\n    },\n    {\n      key: '类别2',\n      value: 'class-AH',\n      isMulti: true,\n      subSelected: [\n        { key: '选项2-1', value: 'option2-1', isDefault: true },\n        { key: '选项2-2', value: 'option2-2', isDefault: true },\n        { key: '选项2-3', value: 'option2-3', isDefault: false },\n      ],\n    },\n    {\n      key: '类别3',\n      value: 'class-0P',\n      isMulti: false,\n      subSelected: [\n        { key: '选项3-1', value: 'option3-1', isDefault: false },\n        { key: '选项3-2', value: 'option3-2', isDefault: false },\n        { key: '选项3-3', value: 'option3-3', isDefault: false },\n      ],\n    },\n    {\n      key: '类别4',\n      value: 'class-4',\n      isMulti: true,\n      subSelected: [\n        { key: '选项2-1', value: 'option2-1', isDefault: false },\n        { key: '选项2-2', value: 'option2-2', isDefault: false },\n        { key: '选项2-3', value: 'option2-3', isDefault: false },\n      ],\n    },\n  ],\n};\n\nconst lineToolConfig = {\n  lineType: 0,\n  lineColor: 0,\n  edgeAdsorption: true,\n  outOfTarget: true,\n  copyBackwardResult: true,\n  isShowOrder: true,\n  attributeConfigurable: true,\n  attributeList: [\n    { key: '类别1', value: '类别1' },\n    { key: '类别ao', value: 'class-ao' },\n    { key: '类别M1', value: 'class-M1' },\n    { key: '类别Cm', value: 'class-Cm' },\n    { key: '类别c3', value: 'class-c3' },\n    { key: '类别a0', value: 'class-a0' },\n    { key: '类别u7', value: 'class-u7' },\n    { key: '类别Zb', value: 'class-Zb' },\n    { key: '类别zi', value: 'class-zi' },\n  ],\n  textConfigurable: true,\n  textCheckType: 2,\n  customFormat: '',\n  showConfirm: true,\n  lowerLimitPointNum: 2,\n  upperLimitPointNum: '',\n  preReferenceStep: 0,\n  skipWhileNoDependencies: false,\n  filterData: ['valid', 'invalid'],\n\n  showLineLength: true,\n};\n\nconst textToolConfig = {\n  showConfirm: false,\n  skipWhileNoDependencies: false,\n  enableTextRecognition: false,\n  recognitionMode: 'general',\n  configList: [\n    { label: '文本', key: 'text', required: false, default: 'default1', maxLength: 1000 },\n    { label: '文本2', key: 'text2', required: true, default: 'default2', maxLength: 1000 },\n    { label: '文本3', key: 'text3', required: true, default: 'default3', maxLength: 1000 },\n  ],\n  filterData: ['valid', 'invalid'],\n};\n\nconst polygonConfig = {\n  lineType: 0,\n  lineColor: 0,\n  edgeAdsorption: true,\n  drawOutsideTarget: false,\n  copyBackwardResult: false,\n  isShowOrder: false,\n  attributeConfigurable: true,\n  attributeList: [\n    { key: '玩偶', value: 'doll' },\n    { key: '喷壶', value: 'wateringCan' },\n    { key: '脸盆', value: 'washbasin' },\n    { key: '保温杯', value: 'vacuumCup' },\n    { key: '纸巾', value: 'tissue' },\n    { key: '水壶', value: 'kettle' },\n  ],\n  textConfigurable: true,\n  textCheckType: 0,\n  customFormat: '',\n};\n\nconst pointCloudConfig = {\n  // 主属性\n  attributeList: [\n    {\n      key: '类别1',\n      value: '类别1',\n    },\n    {\n      key: '类别8f',\n      value: 'class-8f',\n    },\n    {\n      key: '类别My',\n      value: 'class-My',\n    },\n    {\n      key: '类别cN',\n      value: 'class-cN',\n    },\n    {\n      key: '类别4H',\n      value: 'class-4H',\n    },\n  ],\n  // 标注半径范围\n  radius: 90,\n  // 副属性配置开关\n  secondaryAttributeConfigurable: true,\n  // 副属性\n  inputList: [\n    {\n      key: '类别1',\n      value: 'class1',\n      subSelected: [\n        { key: '选项1-1', value: 'option1' },\n        { key: '选项1-2', value: 'option2' },\n      ],\n    },\n    {\n      key: '类别v0',\n      value: 'class-v0',\n      subSelected: [\n        { key: '选项2-1', value: 'option2-1' },\n        { key: '选项2-2', value: 'option2-2' },\n        { key: '选项2-3', value: 'option2-3' },\n        { key: '选项2-4', value: 'option2-4' },\n        { key: '选项2-5', value: 'option2-5' },\n        { key: '选项2-6', value: 'option2-6' },\n      ],\n    },\n    {\n      key: '类别Rt',\n      value: 'class-Rt',\n      subSelected: [{ key: '选项3-1', value: 'option3-1' }],\n    },\n  ],\n  // 框内点数下限\n  lowerLimitPointsNumInBox: 5,\n  // attributeConfigurable: true,\n  trackConfigurable: true,\n};\n\nconst cuboidToolConfig = {\n  isShowCursor: false,\n  showConfirm: false,\n  skipWhileNoDependencies: false,\n  drawOutsideTarget: false,\n  copyBackwardResult: true,\n  minWidth: 1,\n  attributeConfigurable: true,\n  textConfigurable: true,\n  textCheckType: 0,\n  customFormat: '',\n  attributeList: [\n    {\n      key: '跑车',\n      value: 'sports car',\n    },\n\n    {\n      key: '吉普车',\n      value: 'jeep',\n    },\n    {\n      key: '紧凑车型',\n      value: 'single',\n    },\n    {\n      key: 'SUV等车型',\n      value: 'suv',\n    },\n    {\n      key: '货车',\n      value: 'trucks',\n    },\n  ],\n};\n\nconst LLMToolConfig = {\n  enableSort: true, // 开启答案排序\n  enableTextAttribute: true, // 文本标注\n  score: 7, // 答案评分\n  indicatorScore: [\n    { label: '可读性', value: 'readability', text: '阅读起来是否顺畅', score: 10 },\n    { label: '不可读性', value: 'unReadability', text: '偶是基督教精神', score: 10 },\n  ], // 指标评分\n  indicatorDetermine: [\n    { label: '包含敏感信息', value: 'sensitiveInfo' },\n    { label: '包含敏感信息2', value: 'sensitiveInfo2' },\n  ], // 指标判断\n  text: [\n    { title: '这是标题1', tip: '这是提示语1', min: 0, max: 100 },\n    { title: '这是标题2', tip: '这是提示语2', min: 10, max: 100 },\n  ],\n};\n\nexport const getConfig = (tool) => {\n  if (tool === EToolName.Line) {\n    return lineToolConfig;\n  }\n\n  if (tool === EToolName.Rect) {\n    return rectToolConfig;\n  }\n\n  if (tool === EToolName.Tag) {\n    return tagToolConfig;\n  }\n\n  if (tool === EToolName.Text) {\n    return textToolConfig;\n  }\n\n  if (tool === EToolName.Polygon) {\n    return polygonConfig;\n  }\n\n  if (tool === EVideoToolName.VideoTagTool) {\n    return tagToolConfig;\n  }\n\n  if (tool === EPointCloudName.PointCloud) {\n    return pointCloudConfig;\n  }\n\n  if (tool === EToolName.ScribbleTool) {\n    return scribbleToolConfig;\n  }\n\n  if (tool === EToolName.Cuboid) {\n    return cuboidToolConfig;\n  }\n\n  if (tool === EToolName.LLM) {\n    return LLMToolConfig;\n  }\n\n  return rectToolConfig;\n};\n\nexport const getStepList = (tool, sourceStep, step) => {\n  return [getStepConfig(tool)];\n};\n\nconst getStepConfig = (tool, step, sourceStep) => {\n  let toolList = tool ?? EToolName.Rect;\n  let toolName = tool;\n\n  const splitChar = ' ';\n  if (toolList.indexOf(splitChar) > -1) {\n    toolList = tool.split(splitChar);\n    toolName = toolList[toolList.length - 1];\n  }\n\n  return {\n    step: step ?? 1,\n    dataSourceStep: sourceStep || 0,\n    tool: toolList,\n    config: JSON.stringify(getConfig(toolName)),\n  };\n};\n\nexport const getDependStepList = (toolsArray) =>\n  toolsArray.map((tool, index) => getStepConfig(tool, index + 1, index));\n","/*\n * @Author: Laoluo luozefeng@sensetime.com\n * @Date: 2022-06-08 21:17:07\n * @LastEditors: Laoluo luozefeng@sensetime.com\n * @LastEditTime: 2022-06-13 19:34:53\n */\nimport { AnnotationView, PointCloudAnnotationView } from '@labelbee/lb-components';\nimport StepUtils from '@labelbee/lb-components/dist/utils/StepUtils';\nimport 'antd/dist/antd.css';\nimport qs from 'qs';\nimport React, { useState } from 'react';\nimport './App.css';\nimport Annotation from './components/Annotation';\nimport { DEFAULT_ANNOTATIONS } from './mock';\nimport {\n  fileList as mockFileList,\n  getMockResult,\n  pointCloudList,\n  pointCloudMappingImgList,\n  videoList,\n} from './mock/index';\nimport { getDependStepList, getStepList } from './mock/taskConfig';\nimport car1 from './mock/cuboidImages/1.png';\nimport { EToolName } from '@labelbee/lb-annotation';\nimport { LLMToolQa, LLMToolResult } from './mock/LLMTool';\n\nconst App = () => {\n  const tool = qs.parse(window.location.search, {\n    ignoreQueryPrefix: true,\n    comma: true,\n  }).tool;\n\n  const isSingleTool = !Array.isArray(tool);\n  const stepList = isSingleTool ? getStepList(tool) : getDependStepList(tool);\n  const currentIsVideo = StepUtils.currentToolIsVideo(1, stepList);\n  const currentIsPointCloud = StepUtils.currentToolIsPointCloud(1, stepList);\n  const getMockList = () => {\n    let srcList = mockFileList;\n\n    const extraData = {};\n\n    if (currentIsVideo) {\n      srcList = videoList;\n    }\n\n    if (currentIsPointCloud) {\n      srcList = pointCloudList;\n      Object.assign(extraData, {\n        mappingImgList: pointCloudMappingImgList,\n      });\n    }\n\n    if (EToolName.LLM === tool) {\n      return srcList.map((url, i) => ({\n        ...extraData,\n        id: i + 1,\n        url,\n        result: JSON.stringify(LLMToolResult.step_1.result.map((item) => i + 1 + item.answer)),\n        questionList: {\n          ...LLMToolQa,\n          question: `${i + 1}-${LLMToolQa.question}`,\n          answerList: LLMToolQa.answerList.map((list) => ({\n            ...list,\n            answer: i + 1 + list.answer,\n          })),\n        },\n      }));\n    }\n\n    return srcList.map((url, i) => ({\n      ...extraData,\n      id: i + 1,\n      url,\n      result: isSingleTool ? getMockResult(tool) : '',\n      questionList: LLMToolQa,\n    }));\n  };\n\n  const [fileList] = useState(getMockList());\n  const [data, setData] = useState(DEFAULT_ANNOTATIONS);\n\n  const onChange = (type, ids) => {\n    if (type === 'hover') {\n      setData((pre) => {\n        return pre.map((item) => {\n          if (item.annotation.id === 'g5r2l7mcrv8') {\n            const { annotation } = item;\n            return {\n              ...item,\n              annotation: {\n                ...annotation,\n                hiddenRectSize: !ids.includes('g5r2l7mcrv8'),\n              },\n            };\n          }\n          return item;\n        });\n      });\n    }\n  };\n\n  // 参看工具的展示\n  if (tool === 'annotationView') {\n    return (\n      <div>\n        <div\n          style={{\n            height: 1000,\n          }}\n        >\n          <AnnotationView\n            src={car1}\n            annotations={data}\n            style={{\n              stroke: 'blue',\n              thickness: 3,\n            }}\n            size={{\n              width: 1280,\n              height: 720,\n            }}\n            onChange={onChange}\n          />{' '}\n        </div>{' '}\n      </div>\n    );\n  }\n\n  if (tool === 'PointCloudAnnotationView') {\n    return (\n      <PointCloudAnnotationView\n        src={pointCloudList[0]}\n        size={{\n          height: 1080,\n          width: 1000,\n        }}\n        // result={'{}'}\n        // result={pointCloudResult1}\n      />\n    );\n  }\n\n  const goBack = (data) => {\n    console.log('goBack', data);\n  };\n\n  if (fileList.length > 0) {\n    return <Annotation fileList={fileList} goBack={goBack} stepList={stepList} step={1} />;\n  }\n\n  return <div className='App'> </div>;\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  // <React.StrictMode>\n    <App />\n  // </React.StrictMode>,\n  ,\n  document.getElementById('root'),\n);"],"sourceRoot":""}