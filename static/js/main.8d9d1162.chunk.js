(this["webpackJsonplb-demo"]=this["webpackJsonplb-demo"]||[]).push([[0],Array(22).concat([function(e,t,n){"use strict";n.r(t),n.d(t,"ATTRIBUTE_COLORS",(function(){return C})),n.d(t,"COLORS_ARRAY_MULTI",(function(){return w})),n.d(t,"COLOR_MAP_JET",(function(){return P})),n.d(t,"INVALID_COLOR",(function(){return k})),n.d(t,"NULL_COLOR",(function(){return I})),n.d(t,"ToolStyleConverter",(function(){return L})),n.d(t,"toolStyleConverter",(function(){return O})),n.d(t,"PerspectiveShiftUtils",(function(){return S})),n.d(t,"PointCloudUtils",(function(){return _})),n.d(t,"MatrixUtils",(function(){return Z})),n.d(t,"EPerspectiveView",(function(){return B})),n.d(t,"ImgConversionUtils",(function(){return ne})),n.d(t,"i18n",(function(){return i.a}));var i=n(69),a=n(577),r={ConfirmTo:"Confirm To ",TextInput:"Text Input",NoAttribute:"No Attribute",Save:"Save",Undo:"Undo",Redo:"Redo",Rotate:"Rotate",Style:"Style",Adjust:"Adjust",BorderThickness:"Border Thickness",Color:"Color",BorderOpacity:"Border Opacity",FillOpacity:"Fill Opacity",Saturation:"Saturation",Contrast:"Contrast",Exposure:"Exposure",ScreenRatio:"Screen Ratio",OriginalScale:"Original Scale",CopyThePrevious:"Copy Prev",ClearLabel:"Clear",SetAsInvalid:"Set As Invalid",SetAsValid:"Set As Valid",Confirm:"Confirm",Cancel:"Cancel",ItemsOfThisPage:"Items Of This Page",Hotkeys:"Hotkeys",AnnotateRect:"Annotate Rect",AnnotateInvalidRect:"Annotate Invalid Rect",SelectRect:"Select Rect",RightClick:"Right Click",ToggleRectEffectiveness:"Toggle Rect Validity",ToggleEffectiveness:"Toggle Validity",DeleteRect:"Delete Rect",SelectAndDoubleClick:"Select And Double Click",Scale:"Scale",Fullscreen:"Fullscreen",PreviousImage:"Previous",PreviousFile:"Previous",NextImage:"Next",NextFile:"Next",PreviousFolder:"Previous Folder",NextFolder:"Next Folder",Drag:"Drag",ToggleSelected:"Toggle Selected",ToggleSelectedReverse:"Toggle Selected Reverse",HideGraphics:"Hide Graphics",ToggleLineParticularity:"Toggle Line Particularity",ToSide:"To Line",SpecifiedAttributesOnly:"Specified Attributes Only",Number:"Number",Press:"Press",ToOriginalStep:"To Original",HorizontalOrVertical:"Horizontal/Vertical",AnnotateInvalidLine:"Annotate Invalid Line",AnnotateLine:"Annotate Line",SelectLine:"Select Line",ToggleLineEffectiveness:"Toggle Line Validity",DeleteLine:"Delete Line",ContinueToLabel:"Continue To Label",Select:"Select",InsertPoint:"Insert Point",ClickOnLine:"Click On Line",DeletePoint:"Delete Point",DblClickOnPoint:"Double Click On Point",StopAdsorption:"Stop Adsorption",PreviousLine:"Previous Line",NextLine:"Next Line",SelectPoint:"Select Point",AnnotateInvalidPoint:"Annotate Invalid Point",AnnotatePoint:"Annotate Point",AnnotatePolygon:"Annotate Polygon",SelectPolygon:"Select Polygon",AnnotateInvalidPolygon:"Annotate Invalid Polygon",TogglePolygonEffectiveness:"Toggle Polygon Validity",DeletePolygon:"Delete Polygon",Delete:"Delete",TogglePointParticularity:"Toggle Point Particularity",CropOverlapArea:"Crop Overlap Area",SegmentationRecognition:"Segmentation Recognition",SwitchPattern:"Switch Pattern",Tagging:"Tagging",Hide:"Hide ",HideDrawnAnnotation:"Hidden Drawn Annotation",Blue:"Blue",Cyan:"Cyan",Green:"Green",Yellow:"Yellow",Pink:"Pink",Steps:"Steps",Export:"Export",NextStep:"Next Step",StepNotFinishedNotify:"There are unannotated files in the current step , please finish before the next step",curItems:"{{current}}/{{total}} Items",TurnPage:"Turn Page",Switch:"Switch",EmptyTextInput:"Empty Text Input",RegularExpIncorrectly:"Regular expression is incorrectly",NoConfiguration:"Missing Configuration",ClearThisOption:"Clear This Option",RestoreImageAttributes:"Restore Image Attributes",rectTool:"RectTool",tagTool:"TagTool",polygonTool:"PolygonTool",lineTool:"LineTool",pointTool:"PointTool",textTool:"TextTool",Speed:"Speed",PlayPause:"Play / Pause",FastForward:"Fast Forward",Rewind:"Rewind",videoInvalidAndSkip:"Video invalid, please skip",imageInvalidAndSkip:"Image invalid, please skip",videoErrorAndReload:"Failed to load video, please reload",imageErrorAndReload:"Failed to load image, please reload",orMaskAsInvalid:" or mask it as invalid",ClickAnotherPolygon:"Click another polygon",PolygonsToBeCombinedNeedToBeSelected:"Polygons to be combined need to be selected",CurveModeDoesNotSupportCutting:"Curve mode does not support cutting",CombineSuccess:"Combine success",CombiningFailedNotify:"Combining failed. Please check whether two polygons intersect or whether polygon combining forms a leak",CombineOverlapArea:"Combine Overlap Area",NoDependency:"This image does not need to be labeled",TextCheckNumberOnly:"Please enter the number",TextCheckEnglishOnly:"Please enter English",TextCheckCustomFormat:"Please enter data in custom format",FramingOfObjectToBeDivided:"Please frame the object to be divided first",ClickOnTarget:"Please click on target object",SplittingAlgorithmPrediction:"Splitting algorithm prediction in progress...","2DView":"2DView","3DView":"3DView",TopView:"TopView",SideView:"SideView",BackView:"BackView",ShowArrows:"Show Arrows",Length:"Length",Width:"Width",Height:"Height",Rotation_y:"Rotation_y",PointCount:"Point Count",Invalid:"Invalid",Tag:"Tag",Attribute:"Attribute",SubAttribute:"SubAttribute",PleaseSelect:"Please Select",CopyEmptyInPointCloud:"The copy content is empty, please select the corresponding point cloud data",PasteEmptyInPointCloud:"Please copy the pointCloud data before pasting",HasDuplicateID:"Duplicate ID exists, copy failed",HasDuplicateIDHeader:"TrackID duplication exists",HasDuplicateIDMsg:"There is an issue with duplicate trackIDs, override it?",LowerLimitPointsNumInBox:"The number of points in the box must not be less than {{num}}",PointThickness:"Point Thickness",RotateAroundCenterPoint:"Rotate Around Center Point",PointCloudViewTranslate:"PointCloudView Translation",TopViewTranslate:"TopView Translation",ChangePointCloudValid:"Change PointCloud Valid",CopyBox:"Copy Box",PasteBox:"Paste Box",RotateLeft:"Rotate Left",RotateRight:"Rotate Right",NextBox:"Next Box",PreviousBox:"Previous Box",Rotate180:"Rotate 180\xb0",CopyPrevPage:"Copy Previous Page",ChangeBoxValid:"Change Box's Valid",MultiSelect:"Multi Select",SelectAllBox:"Select All Boxes",GeneralOperation:"General Operation",RectPattern:"Rect Pattern",PolygonPattern:"Polygon Pattern",ChangePatternMsg:"Change Pattern to {{pattern}} successfully",DragOperation:"Drag",SelectedStatus:"Selected",updateValidFromValidToInValid:"Confirm update as invalid page\uff1f",updateValidFromInValidToValid:"Confirm update as valid page\uff1f",AllTrackIDs:"All TrackIDs",CurrentBoxTrackIDs:"Current TrackID",PositiveIntegerCheck:"Please enter a positive integer",NotAllowDecimalPointsInTrackID:"TrackID is not allowed to be decimal",DuplicateTrackIDsExist:"Duplicate trackIDs exits",BatchUpdateText:"Batch Update",BatchUpdateTrackID:"Batch update trackIDs",TrackIDUnifyAs:"TrackID is Unify as",UnifyTrackIDRange:"Unify TrackID Range",Page:"Page",OkText:"OK",CancelText:"Cancel",UnifyParams:"Unify Params",UnifyAttributeRange:"Unify Range",UnifyTrackID:"Unify TrackID",UnifySize:"Unify Size",UnifyTag:"Unify Tag",NoData:"No Data"},o={TextInput:"\u6587\u672c\u8f93\u5165",NoAttribute:"\u65e0\u5c5e\u6027",Save:"\u4fdd\u5b58",Undo:"\u64a4\u9500",Redo:"\u91cd\u505a",Rotate:"\u65cb\u8f6c",Style:"\u6837\u5f0f",Adjust:"\u56fe\u7247\u8c03\u6574",BorderThickness:"\u8fb9\u6846\u7c97\u7ec6",Color:"\u989c\u8272",BorderOpacity:"\u8fb9\u6846\u900f\u660e\u5ea6",FillOpacity:"\u586b\u5145\u900f\u660e\u5ea6",Saturation:"\u9971\u548c\u5ea6",Contrast:"\u5bf9\u6bd4\u5ea6",Exposure:"\u66dd\u5149\u5ea6",ScreenRatio:"\u753b\u9762\u5360\u6bd4",OriginalScale:"\u6309\u539f\u56fe\u6bd4\u4f8b\u663e\u793a",CopyThePrevious:"\u590d\u5236\u4e0a\u5f20",ClearLabel:"\u6e05\u7a7a\u6807\u6ce8",SetAsInvalid:"\u6807\u4e3a\u65e0\u6548",SetAsValid:"\u53d6\u6d88\u65e0\u6548",Confirm:"\u786e\u8ba4",Cancel:"\u53d6\u6d88",ItemsOfThisPage:"\u672c\u9875\u4ef6\u6570",Hotkeys:"\u5feb\u6377\u952e",AnnotateRect:"\u62c9\u6846",AnnotateInvalidRect:"\u62c9\u65e0\u6548\u6846",SelectRect:"\u9009\u4e2d\u6846",RightClick:"\u53f3\u51fb",ToggleRectEffectiveness:"\u5207\u6362\u6846\u662f\u5426\u6709\u6548",ToggleEffectiveness:"\u662f\u5426\u6807\u4e3a\u65e0\u6548",DeleteRect:"\u5220\u9664\u6846",SelectAndDoubleClick:"\u9009\u4e2d\u53cc\u51fb",Scale:"\u7f29\u653e",Fullscreen:"\u5168\u5c4f",PreviousImage:"\u4e0a\u4e00\u5f20",PreviousFile:"\u4e0a\u4e00\u4e2a",NextImage:"\u4e0b\u4e00\u5f20",NextFile:"\u4e0b\u4e00\u4e2a",PreviousFolder:"\u4e0a\u4e00\u6587\u4ef6\u5939",NextFolder:"\u4e0b\u4e00\u6587\u4ef6\u5939",Drag:"\u62d6\u52a8\u56fe\u7247",ToggleSelected:"\u5207\u6362\u9009\u4e2d",ToggleSelectedReverse:"\u9006\u5e8f\u5207\u6362\u9009\u4e2d",HideGraphics:"\u9690\u85cf\u56fe\u5f62",ToggleLineParticularity:"\u6362\u7279\u6b8a\u8fb9",ToSide:"\u5bf9\u8fb9",SpecifiedAttributesOnly:"\u4ec5\u770b\u6307\u5b9a\u5c5e\u6027",Number:"\u6570\u5b57",Press:"\u957f\u6309",ToOriginalStep:"\u4ec5\u539f\u56fe",HorizontalOrVertical:"\u6807\u6c34\u5e73/\u5782\u76f4\u7ebf",AnnotateInvalidLine:"\u6807\u65e0\u6548\u7ebf",AnnotateLine:"\u6807\u7ebf",SelectLine:"\u9009\u4e2d\u7ebf",ToggleLineEffectiveness:"\u5207\u6362\u7ebf\u662f\u5426\u6709\u6548",DeleteLine:"\u5220\u9664\u7ebf",ContinueToLabel:"\u7eed\u6807",Select:"\u9009\u4e2d",InsertPoint:"\u63d2\u5165\u70b9",ClickOnLine:"\u5bf9\u7ebf\u5355\u51fb",DeletePoint:"\u5220\u9664\u70b9",DblClickOnPoint:"\u5bf9\u70b9\u53cc\u51fb",StopAdsorption:"\u6682\u505c\u5438\u9644",PreviousLine:"\u4e0a\u6761\u7ebf",NextLine:"\u4e0b\u6761\u7ebf",SelectPoint:"\u9009\u4e2d\u70b9",AnnotateInvalidPoint:"\u6807\u65e0\u6548\u70b9",AnnotatePoint:"\u6807\u70b9",AnnotatePolygon:"\u6807\u591a\u8fb9\u5f62",SelectPolygon:"\u9009\u4e2d\u591a\u8fb9\u5f62",AnnotateInvalidPolygon:"\u6807\u65e0\u6548\u591a\u8fb9\u5f62",TogglePolygonEffectiveness:"\u5207\u6362\u591a\u8fb9\u5f62\u662f\u5426\u6709\u6548",DeletePolygon:"\u5220\u9664\u591a\u8fb9\u5f62",Delete:"\u5220\u9664",TogglePointParticularity:"\u6362\u7279\u6b8a\u70b9",CropOverlapArea:"\u88c1\u526a\u91cd\u53e0\u533a\u57df",SegmentationRecognition:"\u5206\u5272\u8f85\u52a9",SwitchPattern:"\u5207\u6362\u7ed8\u5236\u5f62\u5f0f",Tagging:"\u6253\u6807\u7b7e",Hide:"\u6253\u6807\u7b7e",HideDrawnAnnotation:"\u6807\u6ce8\u9690\u85cf\u4e2d",Blue:"\u84dd",Cyan:"\u9752",Green:"\u7eff",Yellow:"\u9ec4",Pink:"\u7c89",Steps:"\u6807\u6ce8\u6b65\u9aa4",Export:"\u5bfc\u51fa",NextStep:"\u4e0b\u4e00\u6b65",StepNotFinishedNotify:"\u5f53\u524d\u6b65\u9aa4\u5b58\u5728\u4e3a\u672a\u6807\u6ce8\u8fc7\u7684\u56fe\u7247\uff0c\u8bf7\u6807\u6ce8\u5b8c\u6210\u518d\u70b9\u51fb\u4e0b\u4e00\u6b65",curItems:"\u7b2c{{current}}/{{total}}\u5206\u9875",TurnPage:"\u7ffb\u9875",Switch:"\u5207\u6362",EmptyTextInput:"\u6e05\u7a7a\u6587\u672c\u8f93\u5165",RegularExpIncorrectly:"\u6b63\u5219\u8868\u8fbe\u5f0f\u586b\u5199\u9519\u8bef",NoConfiguration:"\u6682\u65e0\u4fe1\u606f\u914d\u7f6e",ClearThisOption:"\u6e05\u7a7a\u6b64\u9009\u9879",RestoreImageAttributes:"\u8fd8\u539f\u56fe\u7247\u5c5e\u6027",ConfirmTo:"\u786e\u8ba4",rectTool:"\u6807\u7b7e",tagTool:"\u6807\u70b9",polygonTool:"\u591a\u8fb9\u5f62",lineTool:"\u7ebf\u6761",pointTool:"\u6807\u70b9",textTool:"\u6587\u672c",Speed:"\u500d\u901f",PlayPause:"\u64ad\u653e/\u6682\u505c",FastForward:"\u5feb\u8fdb",Rewind:"\u5feb\u9000",videoInvalidAndSkip:"\u65e0\u6548\u89c6\u9891\uff0c\u8bf7\u8df3\u8fc7",imageInvalidAndSkip:"\u65e0\u6548\u56fe\u7247\uff0c\u8bf7\u8df3\u8fc7",videoErrorAndReload:"\u89c6\u9891\u52a0\u8f7d\u5931\u8d25, \u8bf7\u91cd\u65b0\u52a0\u8f7d",imageErrorAndReload:"\u56fe\u7247\u52a0\u8f7d\u5931\u8d25, \u8bf7\u91cd\u65b0\u52a0\u8f7d",orMaskAsInvalid:" \u6216 \u5c06\u5176\u6807\u4e3a\u65e0\u6548",ClickAnotherPolygon:"\u8bf7\u70b9\u51fb\u5e0c\u671b\u5408\u5e76\u7684\u591a\u8fb9\u5f62",PolygonsToBeCombinedNeedToBeSelected:"\u9700\u8981\u9009\u4e2d\u9700\u8981\u5408\u5e76\u7684\u591a\u8fb9\u5f62",CurveModeDoesNotSupportCutting:"\u66f2\u7ebf\u6a21\u5f0f\u6682\u4e0d\u652f\u6301\u88c1\u526a",CombineSuccess:"\u5408\u5e76\u6210\u529f",CombiningFailedNotify:"\u5408\u5e76\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u4e24\u4e2a\u591a\u8fb9\u5f62\u662f\u5426\u6709\u76f8\u4ea4\uff0c\u6216\u591a\u8fb9\u5f62\u5408\u5e76\u662f\u5426\u5f62\u6210\u6f0f\u7a7a",CombineOverlapArea:"\u5408\u5e76\u91cd\u53e0\u533a\u57df",NoDependency:"\u8be5\u56fe\u7247\u65e0\u9700\u6807\u6ce8",TextCheckNumberOnly:"\u8bf7\u6309\u4ec5\u6570\u5b57\u7684\u683c\u5f0f\u8f93\u5165",TextCheckEnglishOnly:"\u8bf7\u6309\u4ec5\u82f1\u6587\u7684\u683c\u5f0f\u8f93\u5165",TextCheckCustomFormat:"\u8bf7\u6309\u8981\u6c42\u7684\u683c\u5f0f\u8f93\u5165",FramingOfObjectToBeDivided:"\u8bf7\u5148\u6846\u51fa\u9700\u5206\u5272\u7684\u7269\u4f53",ClickOnTarget:"\u8bf7\u5355\u51fb\u76ee\u6807\u7269\u4f53",SplittingAlgorithmPrediction:"\u5206\u5272\u7b97\u6cd5\u9884\u6d4b\u4e2d...","2DView":"2D\u89c6\u56fe","3DView":"3D\u89c6\u56fe",TopView:"\u4fef\u89c6\u56fe",SideView:"\u4fa7\u89c6\u56fe",BackView:"\u80cc\u89c6\u56fe",ShowArrows:"\u663e\u793a\u7bad\u5934",Length:"\u957f",Width:"\u5bbd",Height:"\u9ad8",Rotation_y:"\u671d\u5411\u89d2",PointCount:"\u70b9\u6570",Invalid:"\u65e0\u6548",Tag:"\u6807\u7b7e",Attribute:"\u4e3b\u5c5e\u6027",SubAttribute:"\u526f\u5c5e\u6027",PleaseSelect:"\u8bf7\u9009\u62e9",CopyEmptyInPointCloud:"\u590d\u5236\u5185\u5bb9\u4e3a\u7a7a\uff0c\u8bf7\u9009\u62e9\u5bf9\u5e94\u7684\u70b9\u4e91\u6570\u636e",PasteEmptyInPointCloud:"\u8bf7\u5148\u590d\u5236\u9700\u8981\u7684\u70b9\u4e91\u6570\u636e\u518d\u8fdb\u884c\u7c98\u8d34",HasDuplicateID:"\u5b58\u5728\u91cd\u590dID,\u590d\u5236\u5931\u8d25",HasDuplicateIDHeader:"\u5b58\u5728\u6807\u6ce8\u6846 ID \u91cd\u590d",HasDuplicateIDMsg:"\u5b58\u5728\u6807\u6ce8\u6846 ID \u91cd\u590d\u7684\u95ee\u9898\uff0c\u662f\u5426\u8981\u8986\u76d6?",LowerLimitPointsNumInBox:"\u6846\u4f53\u5185\u70b9\u6570\u4e0d\u5141\u8bb8\u4f4e\u4e8e {{num}} \u4e2a",PointThickness:"\u70b9\u7684\u663e\u793a\u7c97\u7ec6",RotateAroundCenterPoint:"\u7ed5\u4e2d\u5fc3\u70b9\u65cb\u8f6c\u753b\u9762",PointCloudViewTranslate:"\u70b9\u4e91\u5e73\u79fb",TopViewTranslate:"\u4fef\u89c6\u56fe\u5e73\u79fb",ChangePointCloudValid:"\u5207\u6362\u70b9\u4e91\u6709\u6548\u6027",CopyBox:"\u590d\u5236\u6846",PasteBox:"\u7c98\u8d34\u6846",RotateLeft:"\u5411\u5de6\u65cb\u8f6c\u5fae\u8c03",RotateRight:"\u5411\u53f3\u65cb\u8f6c\u5fae\u8c03",PreviousBox:"\u4e0a\u4e00\u6846",NextBox:"\u4e0b\u4e00\u6846",Rotate180:"\u65cb\u8f6c180\xb0",CopyPrevPage:"\u590d\u5236\u4e0a\u4e00\u9875",ChangeBoxValid:"\u5207\u6362\u6807\u6ce8\u6846\u6709\u6548\u6027",MultiSelect:"\u591a\u9009",SelectAllBox:"\u5168\u9009",GeneralOperation:"\u901a\u7528",RectPattern:"\u62c9\u6846\u6a21\u5f0f",PolygonPattern:"\u591a\u8fb9\u5f62\u6a21\u5f0f",ChangePatternMsg:"\u6210\u529f\u66f4\u6539\u4e3a{{pattern}}\u6a21\u5f0f",DragOperation:"\u62d6\u52a8",SelectedStatus:"\u9009\u4e2d\u65f6",updateValidFromValidToInValid:"\u662f\u5426\u786e\u8ba4\u6807\u4e3a\u65e0\u6548\u6587\u4ef6\uff1f",updateValidFromInValidToValid:"\u662f\u5426\u786e\u8ba4\u53d6\u6d88\u65e0\u6548\u6587\u4ef6\uff1f",AllTrackIDs:"\u6240\u6709\u5df2\u6807\u6ce8\u7684\u6846ID",CurrentBoxTrackIDs:"\u5f53\u524d\u6807\u6ce8\u6846ID",PositiveIntegerCheck:"\u8bf7\u8f93\u5165\u6b63\u6574\u6570",NotAllowDecimalPointsInTrackID:"\u8f93\u5165trackID\u4e0d\u5141\u8bb8\u5305\u542b\u5c0f\u6570\u70b9",DuplicateTrackIDsExist:"\u5b58\u5728\u91cd\u590d\u7684trackID",BatchUpdateText:"\u6279\u91cf\u4fee\u6539",BatchUpdateTrackID:"\u6279\u91cf\u4fee\u6539ID",TrackIDUnifyAs:"\u7edf\u4e00\u6807\u6ce8\u6846ID\u4e3a",UnifyTrackIDRange:"\u7edf\u4e00ID\u8303\u56f4",Page:"\u9875",OkText:"\u786e\u8ba4",CancelText:"\u53d6\u6d88",UnifyParams:"\u7edf\u4e00\u53c2\u6570",UnifyAttributeRange:"\u7edf\u4e00\u5c5e\u6027\u8303\u56f4",UnifyTrackID:"\u7edf\u4e00\u6807\u6ce8\u6846ID",UnifySize:"\u7edf\u4e00\u5c3a\u5bf8",UnifyTag:"\u7edf\u4e00\u6807\u7b7e",NoData:"\u6682\u65e0\u6570\u636e"};i.a.language||i.a.use(a.a).init({lng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}}),i.a.addResourceBundle("en","translation",r,!0),i.a.addResourceBundle("cn","translation",o,!0);var c=n(7),l=n(8),s=n(24),u=n(21),d=Object(l.a)((function e(){Object(c.a)(this,e)})),h=d;h.replaceAFromRGBA=function(e,t){return e.split(" ").join("").replace(/,[0-9]+([.]{1}[0-9]+){0,1}\)/,",".concat(t.toFixed(2),")"))},h.toRGBAArr=function(e){var t=e.match(/\d+/g);if(t){var n=Object(u.a)(t,4),i=n[0],a=n[1],r=n[2],o=n[3];return[i,a,r,o]}},h.getToolStrokeAndFill=function(e,t){var n=t.hover,i=void 0!==n&&n,a=t.selected,r=void 0!==a&&a,o=t.borderOpacity,c=void 0===o?1:o,l=t.fillOpacity,s=void 0===l?1:l,u=t.commonOpacity,h=void 0===u?.8:u;return r||i?{stroke:d.replaceAFromRGBA(e,c),fill:d.replaceAFromRGBA(e,s),rgba:d.toRGBAArr(e)}:{stroke:d.replaceAFromRGBA(e,c*h),fill:d.replaceAFromRGBA(e,s*h),rgba:d.toRGBAArr(e)}},h.getAttributeIndex=function(e,t){try{return t.findIndex((function(t){return t.value===e}))}catch(n){return-1}};var f=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=function(e,t,n){return t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x=["rgba(102, 111, 255, 1)","rgba(102, 230, 255, 1)","rgba(191, 255, 102, 1)","rgba(255, 230, 102, 1)","rgba(230, 102, 255, 1)"],C=["rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"],w=[{rgba:"rgba(128, 12, 249, 1)",hex:8391929},{rgba:"rgba(0, 255, 48, 1)",hex:65328},{rgba:"rgba(255, 136, 247, 1)",hex:16746743},{rgba:"rgba(255, 226, 50, 1)",hex:16769586},{rgba:"rgba(153, 66, 23, 1)",hex:10043927},{rgba:"rgba(2, 130, 250, 1)",hex:164602},{rgba:"rgba(255, 35, 35, 1)",hex:16720675},{rgba:"rgba(0, 255, 234, 1)",hex:65514}],k="rgba(255, 153, 102, 1)",I="rgba(204, 204, 204, 1)",L=function(){function e(){Object(c.a)(this,e),this._defaultColors=x,this._attributeColors=C}return Object(l.a)(e,[{key:"defaultColors",get:function(){return this._defaultColors}},{key:"attributeColors",get:function(){return this._attributeColors}},{key:"getColorFromConfig",value:function(e,t,n,i){var a,r,o;if("[object Object]"!==Object.prototype.toString.call(t))throw"Config must be Object";if("[object Object]"!==Object.prototype.toString.call(e))throw"Result must be Object";var c=n.borderOpacity,l=void 0===c?1:c,u=n.fillOpacity,d=void 0===u?.6:u,f=n.colorIndex,x=void 0===f?0:f;i||(i={});var C,L,P=null==(a=null==e?void 0:e.valid)||a,O=i,S=O.multiColorIndex,T=void 0===S?-1:S,A={selected:O.selected,hover:O.hover,borderOpacity:l,fillOpacity:d},E=this.defaultColors;if((!0===(null==t?void 0:t.attributeConfigurable)||T>-1)&&(E=this.attributeColors),!1===P)return h.getToolStrokeAndFill(k,A);if(!0===(null==t?void 0:t.attributeConfigurable)){var D=h.getAttributeIndex(null==e?void 0:e.attribute,null==t?void 0:t.attributeList),M=E[D%E.length];return-1===D&&(M=I),C=function(e,t){for(var n in t||(t={}))p.call(t,n)&&y(e,n,t[n]);if(b){var i,a=Object(s.a)(b(t));try{for(a.s();!(i=a.n()).done;)n=i.value,m.call(t,n)&&y(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},h.getToolStrokeAndFill(M,A)),L={hex:null!=(o=null==(r=w[D%E.length])?void 0:r.hex)?o:""},g(C,v(L))}return T>-1?h.getToolStrokeAndFill(E[T%E.length],A):h.getToolStrokeAndFill(E[x%E.length],A)}}]),e}();var P=function(){for(var e,t=new Array(256).fill("").map((function(e){return new Array(3).fill("")})),n=0;n<20;n++){for(e=0;e<32;e++)t[e][0]=128+4*e,t[e][1]=0,t[e][2]=0;for(t[32][0]=255,t[32][1]=0,t[32][2]=0,e=0;e<63;e++)t[33+e][0]=255,t[33+e][1]=4+4*e,t[33+e][2]=0;for(t[96][0]=254,t[96][1]=255,t[96][2]=2,e=0;e<62;e++)t[97+e][0]=250-4*e,t[97+e][1]=255,t[97+e][2]=6+4*e;for(t[159][0]=1,t[159][1]=255,t[159][2]=254,e=0;e<64;e++)t[160+e][0]=0,t[160+e][1]=252-4*e,t[160+e][2]=255;for(e=0;e<32;e++)t[224+e][0]=0,t[224+e][1]=0,t[224+e][2]=252-4*e}return t}(),O=new L,S=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"translationMatrix",value:function(e,t,n){return[1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1]}},{key:"frontViewMatrix4",value:function(e){return this.translationMatrix(e,0,0)}},{key:"backViewMatrix4",value:function(e){return this.translationMatrix(-e,0,0)}},{key:"leftViewMatrix4",value:function(e){return this.translationMatrix(0,e,0)}},{key:"rightViewMatrix4",value:function(e){return this.translationMatrix(0,-e,0)}},{key:"topViewMatrix4",value:function(e){return this.translationMatrix(-.01,0,e)}},{key:"leftFrontTopViewMatrix4",value:function(e,t){var n=t.width/2,i=t.height/2,a=t.depth/2;return this.translationMatrix(n*e,i*e,a*e)}},{key:"rightBackTopViewMatrix4",value:function(e,t){var n=-t.width/2,i=-t.height/2,a=t.depth/2;return this.translationMatrix(n*e,i*e,a*e)}}]),e}(),T=n(16),A=Object.defineProperty,E=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,N=function(e,t,n){return t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},R=function(e,t){for(var n in t||(t={}))D.call(t,n)&&N(e,n,t[n]);if(E){var i,a=Object(s.a)(E(t));try{for(a.s();!(i=a.n()).done;){n=i.value;M.call(t,n)&&N(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},j=function(e,t){var n={};for(var i in e)D.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&E){var a,r=Object(s.a)(E(e));try{for(r.s();!(a=r.n()).done;){i=a.value;t.indexOf(i)<0&&M.call(e,i)&&(n[i]=e[i])}}catch(o){r.e(o)}finally{r.f()}}return n},_=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"genColorByCoord",value:function(e,t,n){return n<=0?[128,128,128]:n<5?[255,0,0]:n<10?[0,255,0]:[0,0,255]}},{key:"getStandardColorByCoord",value:function(e,t,n){return this.genColorByCoord(e,t,n).map((function(e){return e/255}))}},{key:"getBoxParamsFromResultList",value:function(e){var t,n,i=this.jsonParser(e);return null!=(n=null==(t=null==i?void 0:i.step_1)?void 0:t.result)?n:[]}},{key:"getPolygonListFromResultList",value:function(e){var t,n,i,a,r=this.jsonParser(e),o="step_1";return null!=(a=null!=(i=null==(t=null==r?void 0:r[o])?void 0:t.resultPolygon)?i:null==(n=null==r?void 0:r[o])?void 0:n.renderPolygon)?a:[]}},{key:"getFrontViewPolygon",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.width,o=e.height,c=e.depth;return[{x:n+r/2,y:i+o/2,z:a-c/2},{x:n+r/2,y:i+o/2,z:a+c/2},{x:n+r/2,y:i-o/2,z:a+c/2},{x:n+r/2,y:i-o/2,z:a-c/2},{x:n+r/2,y:i+o/2,z:a-c/2}]}},{key:"getBackViewPolygon",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.width,o=e.height,c=e.depth;return[{x:n-r/2,y:i-o/2,z:a-c/2},{x:n-r/2,y:i+o/2,z:a-c/2},{x:n-r/2,y:i+o/2,z:a+c/2},{x:n-r/2,y:i-o/2,z:a+c/2},{x:n-r/2,y:i-o/2,z:a-c/2}]}},{key:"getAllDirectionLine",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.width,o=e.height,c=e.depth;return[[{x:n+r/2,y:i-o/2,z:a-c/2},{x:n-r/2,y:i-o/2,z:a-c/2}],[{x:n+r/2,y:i+o/2,z:a-c/2},{x:n-r/2,y:i+o/2,z:a-c/2}],[{x:n+r/2,y:i-o/2,z:a+c/2},{x:n-r/2,y:i-o/2,z:a+c/2}],[{x:n+r/2,y:i+o/2,z:a+c/2},{x:n-r/2,y:i+o/2,z:a+c/2}]]}},{key:"getAllViewData",value:function(e){return[{type:"polygon",pointList:this.getFrontViewPolygon(e)},{type:"polygon",pointList:this.getBackViewPolygon(e)}].concat(Object(T.a)(this.getAllDirectionLine(e).map((function(e){return{type:"line",pointList:e}}))))}},{key:"transferBox2Kitti",value:function(e){return{height:e.depth,length:e.width,width:e.height,rotation_y:this.transferRotation2KittiRotation_y(e.rotation)}}},{key:"restrictAngleRange",value:function(e){var t=2*Math.PI,n=e%t;return n<0?t+n:n}},{key:"transferRotation2KittiRotation_y",value:function(e){if(e<0)return-e;var t=2*Math.PI-e;return t>Math.PI&&t<2*Math.PI?-1*e:2*Math.PI-e}},{key:"getAllPointCloudResult",value:function(e){var t=this,n=e.imgList,i=e.step,a=void 0===i?1:i,r=e.extraBoxList,o=e.ignoreIndexList,c=void 0===o?[]:o,l=n.filter((function(e,t){return!(null==c?void 0:c.includes(t))})).map((function(e){return t.jsonParser(e.result)})),s="step_".concat(a),u=[];return l.forEach((function(e){var t,n;(null==(n=null==(t=null==e?void 0:e[s])?void 0:t.result)?void 0:n.length)>0&&(u=u.concat(e[s].result))})),r&&(u=u.concat(r)),u}},{key:"getNextTrackID",value:function(e){var t=e.imgList,n=e.step,i=void 0===n?1:n,a=e.extraBoxList,r=1;return this.getAllPointCloudResult({imgList:t,step:i,extraBoxList:a}).forEach((function(e){"number"===typeof(null==e?void 0:e.trackID)&&e.trackID>=r&&(r=e.trackID+1)})),r}},{key:"batchUpdateTrackID",value:function(e){var t,n=e.id,i=e.newID,a=e.result,r=e.step,o="step_".concat(void 0===r?1:r),c=this.jsonParser(a),l=null==(t=null==c?void 0:c[o])?void 0:t.result;return l?(l.forEach((function(e){return(null==e?void 0:e.trackID)===n&&(e.trackID=i),e})),JSON.stringify(c)):a}},{key:"batchUpdateResultByTrackID",value:function(e){var t,n=e.id,i=e.newData,a=e.result,r=e.step,o="step_".concat(void 0===r?1:r),c=this.jsonParser(a),l=null==(t=null==c?void 0:c[o])?void 0:t.result;return l?(c[o].result=l.map((function(e){if((null==e?void 0:e.trackID)===n){var t=R({},i),a=t.subAttribute;return a&&e.subAttribute&&Object.assign(t,{subAttribute:R(R({},e.subAttribute),a)}),R(R({},e),t)}return e})),JSON.stringify(c)):a}},{key:"getMaxSizeFromBox",value:function(e){var t=this,n=e.trackID,i=e.imgList,a=void 0;return i.forEach((function(e){var i,r="step_".concat(1),o=t.jsonParser(e.result),c=null==(i=null==o?void 0:o[r])?void 0:i.result;c&&c.forEach((function(e){if((null==e?void 0:e.trackID)===n){if(!a)return void(a={width:e.width,height:e.height,depth:e.depth});e.width>a.width&&(a.width=e.width),e.height>a.height&&(a.height=e.height),e.depth>a.depth&&(a.depth=e.depth)}}))})),a}},{key:"getSubAttributeName",value:function(e,t){var n=t.inputList;return Object.entries(e).map((function(e){var t,i=Object(u.a)(e,2),a=i[0],r=i[1],o=n.find((function(e){return e.value===a}));if(o){var c=null==(t=null==o?void 0:o.subSelected)?void 0:t.find((function(e){return e.value===r}));if(c)return{label:o.key,value:c.key}}return{label:a,value:r}}))}}]),e}();_.jsonParser=function(e){try{return JSON.parse(e)}catch(t){return{}}},_.transferCanvas2World=function(e,t){var n=t.width,i=t.height,a=e,r=a.x,o=a.y,c=j(a,["x","y"]);return R({x:i/2-o,y:-(r-n/2)},c)},_.transferWorld2Canvas=function(e,t){var n=t.width,i=t.height,a=e,r=a.x,o=a.y,c=j(a,["x","y"]);return R({x:n/2-o,y:i/2-r},c)};var B,H,V=function(e,t){return[].concat(Object(T.a)(e),Object(T.a)(t))},Z=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"transferMatrix34FromKitti2Three",value:function(e){return[].concat(Object(T.a)(e.reduce(V,[])),[0,0,0,1])}},{key:"transferMatrix33FromKitti2Three",value:function(e){return[].concat(Object(T.a)(e.reduce((function(e,t){return[].concat(Object(T.a)(e),Object(T.a)(t)).concat([0])}),[])),[0,0,0,1])}}]),e}();(H=B||(B={})).Front="FRONT",H.Back="BACK",H.Left="LEFT",H.Right="RIGHT",H.Top="TOP",H.LFT="LEFT_FRONT_TOP",H.RBT="RIGHT_BACK_TOP";var F=n(23),z=[{colorId:0,hexString:"#000000",rgb:{r:0,g:0,b:0},hsl:{h:0,s:0,l:0},name:"Black"},{colorId:1,hexString:"#800000",rgb:{r:128,g:0,b:0},hsl:{h:0,s:100,l:25},name:"Maroon"},{colorId:2,hexString:"#008000",rgb:{r:0,g:128,b:0},hsl:{h:120,s:100,l:25},name:"Green"},{colorId:3,hexString:"#808000",rgb:{r:128,g:128,b:0},hsl:{h:60,s:100,l:25},name:"Olive"},{colorId:4,hexString:"#000080",rgb:{r:0,g:0,b:128},hsl:{h:240,s:100,l:25},name:"Navy"},{colorId:5,hexString:"#800080",rgb:{r:128,g:0,b:128},hsl:{h:300,s:100,l:25},name:"Purple"},{colorId:6,hexString:"#008080",rgb:{r:0,g:128,b:128},hsl:{h:180,s:100,l:25},name:"Teal"},{colorId:7,hexString:"#c0c0c0",rgb:{r:192,g:192,b:192},hsl:{h:0,s:0,l:75},name:"Silver"},{colorId:8,hexString:"#808080",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50},name:"Grey"},{colorId:9,hexString:"#ff0000",rgb:{r:255,g:0,b:0},hsl:{h:0,s:100,l:50},name:"Red"},{colorId:10,hexString:"#00ff00",rgb:{r:0,g:255,b:0},hsl:{h:120,s:100,l:50},name:"Lime"},{colorId:11,hexString:"#ffff00",rgb:{r:255,g:255,b:0},hsl:{h:60,s:100,l:50},name:"Yellow"},{colorId:12,hexString:"#0000ff",rgb:{r:0,g:0,b:255},hsl:{h:240,s:100,l:50},name:"Blue"},{colorId:13,hexString:"#ff00ff",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50},name:"Fuchsia"},{colorId:14,hexString:"#00ffff",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50},name:"Aqua"},{colorId:15,hexString:"#ffffff",rgb:{r:255,g:255,b:255},hsl:{h:0,s:0,l:100},name:"White"},{colorId:16,hexString:"#000000",rgb:{r:0,g:0,b:0},hsl:{h:0,s:0,l:0},name:"Grey0"},{colorId:17,hexString:"#00005f",rgb:{r:0,g:0,b:95},hsl:{h:240,s:100,l:18},name:"NavyBlue"},{colorId:18,hexString:"#000087",rgb:{r:0,g:0,b:135},hsl:{h:240,s:100,l:26},name:"DarkBlue"},{colorId:19,hexString:"#0000af",rgb:{r:0,g:0,b:175},hsl:{h:240,s:100,l:34},name:"Blue3"},{colorId:20,hexString:"#0000d7",rgb:{r:0,g:0,b:215},hsl:{h:240,s:100,l:42},name:"Blue3"},{colorId:21,hexString:"#0000ff",rgb:{r:0,g:0,b:255},hsl:{h:240,s:100,l:50},name:"Blue1"},{colorId:22,hexString:"#005f00",rgb:{r:0,g:95,b:0},hsl:{h:120,s:100,l:18},name:"DarkGreen"},{colorId:23,hexString:"#005f5f",rgb:{r:0,g:95,b:95},hsl:{h:180,s:100,l:18},name:"DeepSkyBlue4"},{colorId:24,hexString:"#005f87",rgb:{r:0,g:95,b:135},hsl:{h:197.777777777778,s:100,l:26},name:"DeepSkyBlue4"},{colorId:25,hexString:"#005faf",rgb:{r:0,g:95,b:175},hsl:{h:207.428571428571,s:100,l:34},name:"DeepSkyBlue4"},{colorId:26,hexString:"#005fd7",rgb:{r:0,g:95,b:215},hsl:{h:213.488372093023,s:100,l:42},name:"DodgerBlue3"},{colorId:27,hexString:"#005fff",rgb:{r:0,g:95,b:255},hsl:{h:217.647058823529,s:100,l:50},name:"DodgerBlue2"},{colorId:28,hexString:"#008700",rgb:{r:0,g:135,b:0},hsl:{h:120,s:100,l:26},name:"Green4"},{colorId:29,hexString:"#00875f",rgb:{r:0,g:135,b:95},hsl:{h:162.222222222222,s:100,l:26},name:"SpringGreen4"},{colorId:30,hexString:"#008787",rgb:{r:0,g:135,b:135},hsl:{h:180,s:100,l:26},name:"Turquoise4"},{colorId:31,hexString:"#0087af",rgb:{r:0,g:135,b:175},hsl:{h:193.714285714286,s:100,l:34},name:"DeepSkyBlue3"},{colorId:32,hexString:"#0087d7",rgb:{r:0,g:135,b:215},hsl:{h:202.325581395349,s:100,l:42},name:"DeepSkyBlue3"},{colorId:33,hexString:"#0087ff",rgb:{r:0,g:135,b:255},hsl:{h:208.235294117647,s:100,l:50},name:"DodgerBlue1"},{colorId:34,hexString:"#00af00",rgb:{r:0,g:175,b:0},hsl:{h:120,s:100,l:34},name:"Green3"},{colorId:35,hexString:"#00af5f",rgb:{r:0,g:175,b:95},hsl:{h:152.571428571429,s:100,l:34},name:"SpringGreen3"},{colorId:36,hexString:"#00af87",rgb:{r:0,g:175,b:135},hsl:{h:166.285714285714,s:100,l:34},name:"DarkCyan"},{colorId:37,hexString:"#00afaf",rgb:{r:0,g:175,b:175},hsl:{h:180,s:100,l:34},name:"LightSeaGreen"},{colorId:38,hexString:"#00afd7",rgb:{r:0,g:175,b:215},hsl:{h:191.162790697674,s:100,l:42},name:"DeepSkyBlue2"},{colorId:39,hexString:"#00afff",rgb:{r:0,g:175,b:255},hsl:{h:198.823529411765,s:100,l:50},name:"DeepSkyBlue1"},{colorId:40,hexString:"#00d700",rgb:{r:0,g:215,b:0},hsl:{h:120,s:100,l:42},name:"Green3"},{colorId:41,hexString:"#00d75f",rgb:{r:0,g:215,b:95},hsl:{h:146.511627906977,s:100,l:42},name:"SpringGreen3"},{colorId:42,hexString:"#00d787",rgb:{r:0,g:215,b:135},hsl:{h:157.674418604651,s:100,l:42},name:"SpringGreen2"},{colorId:43,hexString:"#00d7af",rgb:{r:0,g:215,b:175},hsl:{h:168.837209302326,s:100,l:42},name:"Cyan3"},{colorId:44,hexString:"#00d7d7",rgb:{r:0,g:215,b:215},hsl:{h:180,s:100,l:42},name:"DarkTurquoise"},{colorId:45,hexString:"#00d7ff",rgb:{r:0,g:215,b:255},hsl:{h:189.411764705882,s:100,l:50},name:"Turquoise2"},{colorId:46,hexString:"#00ff00",rgb:{r:0,g:255,b:0},hsl:{h:120,s:100,l:50},name:"Green1"},{colorId:47,hexString:"#00ff5f",rgb:{r:0,g:255,b:95},hsl:{h:142.352941176471,s:100,l:50},name:"SpringGreen2"},{colorId:48,hexString:"#00ff87",rgb:{r:0,g:255,b:135},hsl:{h:151.764705882353,s:100,l:50},name:"SpringGreen1"},{colorId:49,hexString:"#00ffaf",rgb:{r:0,g:255,b:175},hsl:{h:161.176470588235,s:100,l:50},name:"MediumSpringGreen"},{colorId:50,hexString:"#00ffd7",rgb:{r:0,g:255,b:215},hsl:{h:170.588235294118,s:100,l:50},name:"Cyan2"},{colorId:51,hexString:"#00ffff",rgb:{r:0,g:255,b:255},hsl:{h:180,s:100,l:50},name:"Cyan1"},{colorId:52,hexString:"#5f0000",rgb:{r:95,g:0,b:0},hsl:{h:0,s:100,l:18},name:"DarkRed"},{colorId:53,hexString:"#5f005f",rgb:{r:95,g:0,b:95},hsl:{h:300,s:100,l:18},name:"DeepPink4"},{colorId:54,hexString:"#5f0087",rgb:{r:95,g:0,b:135},hsl:{h:282.222222222222,s:100,l:26},name:"Purple4"},{colorId:55,hexString:"#5f00af",rgb:{r:95,g:0,b:175},hsl:{h:272.571428571429,s:100,l:34},name:"Purple4"},{colorId:56,hexString:"#5f00d7",rgb:{r:95,g:0,b:215},hsl:{h:266.511627906977,s:100,l:42},name:"Purple3"},{colorId:57,hexString:"#5f00ff",rgb:{r:95,g:0,b:255},hsl:{h:262.352941176471,s:100,l:50},name:"BlueViolet"},{colorId:58,hexString:"#5f5f00",rgb:{r:95,g:95,b:0},hsl:{h:60,s:100,l:18},name:"Orange4"},{colorId:59,hexString:"#5f5f5f",rgb:{r:95,g:95,b:95},hsl:{h:0,s:0,l:37},name:"Grey37"},{colorId:60,hexString:"#5f5f87",rgb:{r:95,g:95,b:135},hsl:{h:240,s:17,l:45},name:"MediumPurple4"},{colorId:61,hexString:"#5f5faf",rgb:{r:95,g:95,b:175},hsl:{h:240,s:33,l:52},name:"SlateBlue3"},{colorId:62,hexString:"#5f5fd7",rgb:{r:95,g:95,b:215},hsl:{h:240,s:60,l:60},name:"SlateBlue3"},{colorId:63,hexString:"#5f5fff",rgb:{r:95,g:95,b:255},hsl:{h:240,s:100,l:68},name:"RoyalBlue1"},{colorId:64,hexString:"#5f8700",rgb:{r:95,g:135,b:0},hsl:{h:77.7777777777778,s:100,l:26},name:"Chartreuse4"},{colorId:65,hexString:"#5f875f",rgb:{r:95,g:135,b:95},hsl:{h:120,s:17,l:45},name:"DarkSeaGreen4"},{colorId:66,hexString:"#5f8787",rgb:{r:95,g:135,b:135},hsl:{h:180,s:17,l:45},name:"PaleTurquoise4"},{colorId:67,hexString:"#5f87af",rgb:{r:95,g:135,b:175},hsl:{h:210,s:33,l:52},name:"SteelBlue"},{colorId:68,hexString:"#5f87d7",rgb:{r:95,g:135,b:215},hsl:{h:220,s:60,l:60},name:"SteelBlue3"},{colorId:69,hexString:"#5f87ff",rgb:{r:95,g:135,b:255},hsl:{h:225,s:100,l:68},name:"CornflowerBlue"},{colorId:70,hexString:"#5faf00",rgb:{r:95,g:175,b:0},hsl:{h:87.4285714285714,s:100,l:34},name:"Chartreuse3"},{colorId:71,hexString:"#5faf5f",rgb:{r:95,g:175,b:95},hsl:{h:120,s:33,l:52},name:"DarkSeaGreen4"},{colorId:72,hexString:"#5faf87",rgb:{r:95,g:175,b:135},hsl:{h:150,s:33,l:52},name:"CadetBlue"},{colorId:73,hexString:"#5fafaf",rgb:{r:95,g:175,b:175},hsl:{h:180,s:33,l:52},name:"CadetBlue"},{colorId:74,hexString:"#5fafd7",rgb:{r:95,g:175,b:215},hsl:{h:200,s:60,l:60},name:"SkyBlue3"},{colorId:75,hexString:"#5fafff",rgb:{r:95,g:175,b:255},hsl:{h:210,s:100,l:68},name:"SteelBlue1"},{colorId:76,hexString:"#5fd700",rgb:{r:95,g:215,b:0},hsl:{h:93.4883720930233,s:100,l:42},name:"Chartreuse3"},{colorId:77,hexString:"#5fd75f",rgb:{r:95,g:215,b:95},hsl:{h:120,s:60,l:60},name:"PaleGreen3"},{colorId:78,hexString:"#5fd787",rgb:{r:95,g:215,b:135},hsl:{h:140,s:60,l:60},name:"SeaGreen3"},{colorId:79,hexString:"#5fd7af",rgb:{r:95,g:215,b:175},hsl:{h:160,s:60,l:60},name:"Aquamarine3"},{colorId:80,hexString:"#5fd7d7",rgb:{r:95,g:215,b:215},hsl:{h:180,s:60,l:60},name:"MediumTurquoise"},{colorId:81,hexString:"#5fd7ff",rgb:{r:95,g:215,b:255},hsl:{h:195,s:100,l:68},name:"SteelBlue1"},{colorId:82,hexString:"#5fff00",rgb:{r:95,g:255,b:0},hsl:{h:97.6470588235294,s:100,l:50},name:"Chartreuse2"},{colorId:83,hexString:"#5fff5f",rgb:{r:95,g:255,b:95},hsl:{h:120,s:100,l:68},name:"SeaGreen2"},{colorId:84,hexString:"#5fff87",rgb:{r:95,g:255,b:135},hsl:{h:135,s:100,l:68},name:"SeaGreen1"},{colorId:85,hexString:"#5fffaf",rgb:{r:95,g:255,b:175},hsl:{h:150,s:100,l:68},name:"SeaGreen1"},{colorId:86,hexString:"#5fffd7",rgb:{r:95,g:255,b:215},hsl:{h:165,s:100,l:68},name:"Aquamarine1"},{colorId:87,hexString:"#5fffff",rgb:{r:95,g:255,b:255},hsl:{h:180,s:100,l:68},name:"DarkSlateGray2"},{colorId:88,hexString:"#870000",rgb:{r:135,g:0,b:0},hsl:{h:0,s:100,l:26},name:"DarkRed"},{colorId:89,hexString:"#87005f",rgb:{r:135,g:0,b:95},hsl:{h:317.777777777778,s:100,l:26},name:"DeepPink4"},{colorId:90,hexString:"#870087",rgb:{r:135,g:0,b:135},hsl:{h:300,s:100,l:26},name:"DarkMagenta"},{colorId:91,hexString:"#8700af",rgb:{r:135,g:0,b:175},hsl:{h:286.285714285714,s:100,l:34},name:"DarkMagenta"},{colorId:92,hexString:"#8700d7",rgb:{r:135,g:0,b:215},hsl:{h:277.674418604651,s:100,l:42},name:"DarkViolet"},{colorId:93,hexString:"#8700ff",rgb:{r:135,g:0,b:255},hsl:{h:271.764705882353,s:100,l:50},name:"Purple"},{colorId:94,hexString:"#875f00",rgb:{r:135,g:95,b:0},hsl:{h:42.2222222222222,s:100,l:26},name:"Orange4"},{colorId:95,hexString:"#875f5f",rgb:{r:135,g:95,b:95},hsl:{h:0,s:17,l:45},name:"LightPink4"},{colorId:96,hexString:"#875f87",rgb:{r:135,g:95,b:135},hsl:{h:300,s:17,l:45},name:"Plum4"},{colorId:97,hexString:"#875faf",rgb:{r:135,g:95,b:175},hsl:{h:270,s:33,l:52},name:"MediumPurple3"},{colorId:98,hexString:"#875fd7",rgb:{r:135,g:95,b:215},hsl:{h:260,s:60,l:60},name:"MediumPurple3"},{colorId:99,hexString:"#875fff",rgb:{r:135,g:95,b:255},hsl:{h:255,s:100,l:68},name:"SlateBlue1"},{colorId:100,hexString:"#878700",rgb:{r:135,g:135,b:0},hsl:{h:60,s:100,l:26},name:"Yellow4"},{colorId:101,hexString:"#87875f",rgb:{r:135,g:135,b:95},hsl:{h:60,s:17,l:45},name:"Wheat4"},{colorId:102,hexString:"#878787",rgb:{r:135,g:135,b:135},hsl:{h:0,s:0,l:52},name:"Grey53"},{colorId:103,hexString:"#8787af",rgb:{r:135,g:135,b:175},hsl:{h:240,s:20,l:60},name:"LightSlateGrey"},{colorId:104,hexString:"#8787d7",rgb:{r:135,g:135,b:215},hsl:{h:240,s:50,l:68},name:"MediumPurple"},{colorId:105,hexString:"#8787ff",rgb:{r:135,g:135,b:255},hsl:{h:240,s:100,l:76},name:"LightSlateBlue"},{colorId:106,hexString:"#87af00",rgb:{r:135,g:175,b:0},hsl:{h:73.7142857142857,s:100,l:34},name:"Yellow4"},{colorId:107,hexString:"#87af5f",rgb:{r:135,g:175,b:95},hsl:{h:90,s:33,l:52},name:"DarkOliveGreen3"},{colorId:108,hexString:"#87af87",rgb:{r:135,g:175,b:135},hsl:{h:120,s:20,l:60},name:"DarkSeaGreen"},{colorId:109,hexString:"#87afaf",rgb:{r:135,g:175,b:175},hsl:{h:180,s:20,l:60},name:"LightSkyBlue3"},{colorId:110,hexString:"#87afd7",rgb:{r:135,g:175,b:215},hsl:{h:210,s:50,l:68},name:"LightSkyBlue3"},{colorId:111,hexString:"#87afff",rgb:{r:135,g:175,b:255},hsl:{h:220,s:100,l:76},name:"SkyBlue2"},{colorId:112,hexString:"#87d700",rgb:{r:135,g:215,b:0},hsl:{h:82.3255813953488,s:100,l:42},name:"Chartreuse2"},{colorId:113,hexString:"#87d75f",rgb:{r:135,g:215,b:95},hsl:{h:100,s:60,l:60},name:"DarkOliveGreen3"},{colorId:114,hexString:"#87d787",rgb:{r:135,g:215,b:135},hsl:{h:120,s:50,l:68},name:"PaleGreen3"},{colorId:115,hexString:"#87d7af",rgb:{r:135,g:215,b:175},hsl:{h:150,s:50,l:68},name:"DarkSeaGreen3"},{colorId:116,hexString:"#87d7d7",rgb:{r:135,g:215,b:215},hsl:{h:180,s:50,l:68},name:"DarkSlateGray3"},{colorId:117,hexString:"#87d7ff",rgb:{r:135,g:215,b:255},hsl:{h:200,s:100,l:76},name:"SkyBlue1"},{colorId:118,hexString:"#87ff00",rgb:{r:135,g:255,b:0},hsl:{h:88.2352941176471,s:100,l:50},name:"Chartreuse1"},{colorId:119,hexString:"#87ff5f",rgb:{r:135,g:255,b:95},hsl:{h:105,s:100,l:68},name:"LightGreen"},{colorId:120,hexString:"#87ff87",rgb:{r:135,g:255,b:135},hsl:{h:120,s:100,l:76},name:"LightGreen"},{colorId:121,hexString:"#87ffaf",rgb:{r:135,g:255,b:175},hsl:{h:140,s:100,l:76},name:"PaleGreen1"},{colorId:122,hexString:"#87ffd7",rgb:{r:135,g:255,b:215},hsl:{h:160,s:100,l:76},name:"Aquamarine1"},{colorId:123,hexString:"#87ffff",rgb:{r:135,g:255,b:255},hsl:{h:180,s:100,l:76},name:"DarkSlateGray1"},{colorId:124,hexString:"#af0000",rgb:{r:175,g:0,b:0},hsl:{h:0,s:100,l:34},name:"Red3"},{colorId:125,hexString:"#af005f",rgb:{r:175,g:0,b:95},hsl:{h:327.428571428571,s:100,l:34},name:"DeepPink4"},{colorId:126,hexString:"#af0087",rgb:{r:175,g:0,b:135},hsl:{h:313.714285714286,s:100,l:34},name:"MediumVioletRed"},{colorId:127,hexString:"#af00af",rgb:{r:175,g:0,b:175},hsl:{h:300,s:100,l:34},name:"Magenta3"},{colorId:128,hexString:"#af00d7",rgb:{r:175,g:0,b:215},hsl:{h:288.837209302326,s:100,l:42},name:"DarkViolet"},{colorId:129,hexString:"#af00ff",rgb:{r:175,g:0,b:255},hsl:{h:281.176470588235,s:100,l:50},name:"Purple"},{colorId:130,hexString:"#af5f00",rgb:{r:175,g:95,b:0},hsl:{h:32.5714285714286,s:100,l:34},name:"DarkOrange3"},{colorId:131,hexString:"#af5f5f",rgb:{r:175,g:95,b:95},hsl:{h:0,s:33,l:52},name:"IndianRed"},{colorId:132,hexString:"#af5f87",rgb:{r:175,g:95,b:135},hsl:{h:330,s:33,l:52},name:"HotPink3"},{colorId:133,hexString:"#af5faf",rgb:{r:175,g:95,b:175},hsl:{h:300,s:33,l:52},name:"MediumOrchid3"},{colorId:134,hexString:"#af5fd7",rgb:{r:175,g:95,b:215},hsl:{h:280,s:60,l:60},name:"MediumOrchid"},{colorId:135,hexString:"#af5fff",rgb:{r:175,g:95,b:255},hsl:{h:270,s:100,l:68},name:"MediumPurple2"},{colorId:136,hexString:"#af8700",rgb:{r:175,g:135,b:0},hsl:{h:46.2857142857143,s:100,l:34},name:"DarkGoldenrod"},{colorId:137,hexString:"#af875f",rgb:{r:175,g:135,b:95},hsl:{h:30,s:33,l:52},name:"LightSalmon3"},{colorId:138,hexString:"#af8787",rgb:{r:175,g:135,b:135},hsl:{h:0,s:20,l:60},name:"RosyBrown"},{colorId:139,hexString:"#af87af",rgb:{r:175,g:135,b:175},hsl:{h:300,s:20,l:60},name:"Grey63"},{colorId:140,hexString:"#af87d7",rgb:{r:175,g:135,b:215},hsl:{h:270,s:50,l:68},name:"MediumPurple2"},{colorId:141,hexString:"#af87ff",rgb:{r:175,g:135,b:255},hsl:{h:260,s:100,l:76},name:"MediumPurple1"},{colorId:142,hexString:"#afaf00",rgb:{r:175,g:175,b:0},hsl:{h:60,s:100,l:34},name:"Gold3"},{colorId:143,hexString:"#afaf5f",rgb:{r:175,g:175,b:95},hsl:{h:60,s:33,l:52},name:"DarkKhaki"},{colorId:144,hexString:"#afaf87",rgb:{r:175,g:175,b:135},hsl:{h:60,s:20,l:60},name:"NavajoWhite3"},{colorId:145,hexString:"#afafaf",rgb:{r:175,g:175,b:175},hsl:{h:0,s:0,l:68},name:"Grey69"},{colorId:146,hexString:"#afafd7",rgb:{r:175,g:175,b:215},hsl:{h:240,s:33,l:76},name:"LightSteelBlue3"},{colorId:147,hexString:"#afafff",rgb:{r:175,g:175,b:255},hsl:{h:240,s:100,l:84},name:"LightSteelBlue"},{colorId:148,hexString:"#afd700",rgb:{r:175,g:215,b:0},hsl:{h:71.1627906976744,s:100,l:42},name:"Yellow3"},{colorId:149,hexString:"#afd75f",rgb:{r:175,g:215,b:95},hsl:{h:80,s:60,l:60},name:"DarkOliveGreen3"},{colorId:150,hexString:"#afd787",rgb:{r:175,g:215,b:135},hsl:{h:90,s:50,l:68},name:"DarkSeaGreen3"},{colorId:151,hexString:"#afd7af",rgb:{r:175,g:215,b:175},hsl:{h:120,s:33,l:76},name:"DarkSeaGreen2"},{colorId:152,hexString:"#afd7d7",rgb:{r:175,g:215,b:215},hsl:{h:180,s:33,l:76},name:"LightCyan3"},{colorId:153,hexString:"#afd7ff",rgb:{r:175,g:215,b:255},hsl:{h:210,s:100,l:84},name:"LightSkyBlue1"},{colorId:154,hexString:"#afff00",rgb:{r:175,g:255,b:0},hsl:{h:78.8235294117647,s:100,l:50},name:"GreenYellow"},{colorId:155,hexString:"#afff5f",rgb:{r:175,g:255,b:95},hsl:{h:90,s:100,l:68},name:"DarkOliveGreen2"},{colorId:156,hexString:"#afff87",rgb:{r:175,g:255,b:135},hsl:{h:100,s:100,l:76},name:"PaleGreen1"},{colorId:157,hexString:"#afffaf",rgb:{r:175,g:255,b:175},hsl:{h:120,s:100,l:84},name:"DarkSeaGreen2"},{colorId:158,hexString:"#afffd7",rgb:{r:175,g:255,b:215},hsl:{h:150,s:100,l:84},name:"DarkSeaGreen1"},{colorId:159,hexString:"#afffff",rgb:{r:175,g:255,b:255},hsl:{h:180,s:100,l:84},name:"PaleTurquoise1"},{colorId:160,hexString:"#d70000",rgb:{r:215,g:0,b:0},hsl:{h:0,s:100,l:42},name:"Red3"},{colorId:161,hexString:"#d7005f",rgb:{r:215,g:0,b:95},hsl:{h:333.488372093023,s:100,l:42},name:"DeepPink3"},{colorId:162,hexString:"#d70087",rgb:{r:215,g:0,b:135},hsl:{h:322.325581395349,s:100,l:42},name:"DeepPink3"},{colorId:163,hexString:"#d700af",rgb:{r:215,g:0,b:175},hsl:{h:311.162790697674,s:100,l:42},name:"Magenta3"},{colorId:164,hexString:"#d700d7",rgb:{r:215,g:0,b:215},hsl:{h:300,s:100,l:42},name:"Magenta3"},{colorId:165,hexString:"#d700ff",rgb:{r:215,g:0,b:255},hsl:{h:290.588235294118,s:100,l:50},name:"Magenta2"},{colorId:166,hexString:"#d75f00",rgb:{r:215,g:95,b:0},hsl:{h:26.5116279069767,s:100,l:42},name:"DarkOrange3"},{colorId:167,hexString:"#d75f5f",rgb:{r:215,g:95,b:95},hsl:{h:0,s:60,l:60},name:"IndianRed"},{colorId:168,hexString:"#d75f87",rgb:{r:215,g:95,b:135},hsl:{h:340,s:60,l:60},name:"HotPink3"},{colorId:169,hexString:"#d75faf",rgb:{r:215,g:95,b:175},hsl:{h:320,s:60,l:60},name:"HotPink2"},{colorId:170,hexString:"#d75fd7",rgb:{r:215,g:95,b:215},hsl:{h:300,s:60,l:60},name:"Orchid"},{colorId:171,hexString:"#d75fff",rgb:{r:215,g:95,b:255},hsl:{h:285,s:100,l:68},name:"MediumOrchid1"},{colorId:172,hexString:"#d78700",rgb:{r:215,g:135,b:0},hsl:{h:37.6744186046512,s:100,l:42},name:"Orange3"},{colorId:173,hexString:"#d7875f",rgb:{r:215,g:135,b:95},hsl:{h:20,s:60,l:60},name:"LightSalmon3"},{colorId:174,hexString:"#d78787",rgb:{r:215,g:135,b:135},hsl:{h:0,s:50,l:68},name:"LightPink3"},{colorId:175,hexString:"#d787af",rgb:{r:215,g:135,b:175},hsl:{h:330,s:50,l:68},name:"Pink3"},{colorId:176,hexString:"#d787d7",rgb:{r:215,g:135,b:215},hsl:{h:300,s:50,l:68},name:"Plum3"},{colorId:177,hexString:"#d787ff",rgb:{r:215,g:135,b:255},hsl:{h:280,s:100,l:76},name:"Violet"},{colorId:178,hexString:"#d7af00",rgb:{r:215,g:175,b:0},hsl:{h:48.8372093023256,s:100,l:42},name:"Gold3"},{colorId:179,hexString:"#d7af5f",rgb:{r:215,g:175,b:95},hsl:{h:40,s:60,l:60},name:"LightGoldenrod3"},{colorId:180,hexString:"#d7af87",rgb:{r:215,g:175,b:135},hsl:{h:30,s:50,l:68},name:"Tan"},{colorId:181,hexString:"#d7afaf",rgb:{r:215,g:175,b:175},hsl:{h:0,s:33,l:76},name:"MistyRose3"},{colorId:182,hexString:"#d7afd7",rgb:{r:215,g:175,b:215},hsl:{h:300,s:33,l:76},name:"Thistle3"},{colorId:183,hexString:"#d7afff",rgb:{r:215,g:175,b:255},hsl:{h:270,s:100,l:84},name:"Plum2"},{colorId:184,hexString:"#d7d700",rgb:{r:215,g:215,b:0},hsl:{h:60,s:100,l:42},name:"Yellow3"},{colorId:185,hexString:"#d7d75f",rgb:{r:215,g:215,b:95},hsl:{h:60,s:60,l:60},name:"Khaki3"},{colorId:186,hexString:"#d7d787",rgb:{r:215,g:215,b:135},hsl:{h:60,s:50,l:68},name:"LightGoldenrod2"},{colorId:187,hexString:"#d7d7af",rgb:{r:215,g:215,b:175},hsl:{h:60,s:33,l:76},name:"LightYellow3"},{colorId:188,hexString:"#d7d7d7",rgb:{r:215,g:215,b:215},hsl:{h:0,s:0,l:84},name:"Grey84"},{colorId:189,hexString:"#d7d7ff",rgb:{r:215,g:215,b:255},hsl:{h:240,s:100,l:92},name:"LightSteelBlue1"},{colorId:190,hexString:"#d7ff00",rgb:{r:215,g:255,b:0},hsl:{h:69.4117647058823,s:100,l:50},name:"Yellow2"},{colorId:191,hexString:"#d7ff5f",rgb:{r:215,g:255,b:95},hsl:{h:75,s:100,l:68},name:"DarkOliveGreen1"},{colorId:192,hexString:"#d7ff87",rgb:{r:215,g:255,b:135},hsl:{h:80,s:100,l:76},name:"DarkOliveGreen1"},{colorId:193,hexString:"#d7ffaf",rgb:{r:215,g:255,b:175},hsl:{h:90,s:100,l:84},name:"DarkSeaGreen1"},{colorId:194,hexString:"#d7ffd7",rgb:{r:215,g:255,b:215},hsl:{h:120,s:100,l:92},name:"Honeydew2"},{colorId:195,hexString:"#d7ffff",rgb:{r:215,g:255,b:255},hsl:{h:180,s:100,l:92},name:"LightCyan1"},{colorId:196,hexString:"#ff0000",rgb:{r:255,g:0,b:0},hsl:{h:0,s:100,l:50},name:"Red1"},{colorId:197,hexString:"#ff005f",rgb:{r:255,g:0,b:95},hsl:{h:337.647058823529,s:100,l:50},name:"DeepPink2"},{colorId:198,hexString:"#ff0087",rgb:{r:255,g:0,b:135},hsl:{h:328.235294117647,s:100,l:50},name:"DeepPink1"},{colorId:199,hexString:"#ff00af",rgb:{r:255,g:0,b:175},hsl:{h:318.823529411765,s:100,l:50},name:"DeepPink1"},{colorId:200,hexString:"#ff00d7",rgb:{r:255,g:0,b:215},hsl:{h:309.411764705882,s:100,l:50},name:"Magenta2"},{colorId:201,hexString:"#ff00ff",rgb:{r:255,g:0,b:255},hsl:{h:300,s:100,l:50},name:"Magenta1"},{colorId:202,hexString:"#ff5f00",rgb:{r:255,g:95,b:0},hsl:{h:22.3529411764706,s:100,l:50},name:"OrangeRed1"},{colorId:203,hexString:"#ff5f5f",rgb:{r:255,g:95,b:95},hsl:{h:0,s:100,l:68},name:"IndianRed1"},{colorId:204,hexString:"#ff5f87",rgb:{r:255,g:95,b:135},hsl:{h:345,s:100,l:68},name:"IndianRed1"},{colorId:205,hexString:"#ff5faf",rgb:{r:255,g:95,b:175},hsl:{h:330,s:100,l:68},name:"HotPink"},{colorId:206,hexString:"#ff5fd7",rgb:{r:255,g:95,b:215},hsl:{h:315,s:100,l:68},name:"HotPink"},{colorId:207,hexString:"#ff5fff",rgb:{r:255,g:95,b:255},hsl:{h:300,s:100,l:68},name:"MediumOrchid1"},{colorId:208,hexString:"#ff8700",rgb:{r:255,g:135,b:0},hsl:{h:31.7647058823529,s:100,l:50},name:"DarkOrange"},{colorId:209,hexString:"#ff875f",rgb:{r:255,g:135,b:95},hsl:{h:15,s:100,l:68},name:"Salmon1"},{colorId:210,hexString:"#ff8787",rgb:{r:255,g:135,b:135},hsl:{h:0,s:100,l:76},name:"LightCoral"},{colorId:211,hexString:"#ff87af",rgb:{r:255,g:135,b:175},hsl:{h:340,s:100,l:76},name:"PaleVioletRed1"},{colorId:212,hexString:"#ff87d7",rgb:{r:255,g:135,b:215},hsl:{h:320,s:100,l:76},name:"Orchid2"},{colorId:213,hexString:"#ff87ff",rgb:{r:255,g:135,b:255},hsl:{h:300,s:100,l:76},name:"Orchid1"},{colorId:214,hexString:"#ffaf00",rgb:{r:255,g:175,b:0},hsl:{h:41.1764705882353,s:100,l:50},name:"Orange1"},{colorId:215,hexString:"#ffaf5f",rgb:{r:255,g:175,b:95},hsl:{h:30,s:100,l:68},name:"SandyBrown"},{colorId:216,hexString:"#ffaf87",rgb:{r:255,g:175,b:135},hsl:{h:20,s:100,l:76},name:"LightSalmon1"},{colorId:217,hexString:"#ffafaf",rgb:{r:255,g:175,b:175},hsl:{h:0,s:100,l:84},name:"LightPink1"},{colorId:218,hexString:"#ffafd7",rgb:{r:255,g:175,b:215},hsl:{h:330,s:100,l:84},name:"Pink1"},{colorId:219,hexString:"#ffafff",rgb:{r:255,g:175,b:255},hsl:{h:300,s:100,l:84},name:"Plum1"},{colorId:220,hexString:"#ffd700",rgb:{r:255,g:215,b:0},hsl:{h:50.5882352941176,s:100,l:50},name:"Gold1"},{colorId:221,hexString:"#ffd75f",rgb:{r:255,g:215,b:95},hsl:{h:45,s:100,l:68},name:"LightGoldenrod2"},{colorId:222,hexString:"#ffd787",rgb:{r:255,g:215,b:135},hsl:{h:40,s:100,l:76},name:"LightGoldenrod2"},{colorId:223,hexString:"#ffd7af",rgb:{r:255,g:215,b:175},hsl:{h:30,s:100,l:84},name:"NavajoWhite1"},{colorId:224,hexString:"#ffd7d7",rgb:{r:255,g:215,b:215},hsl:{h:0,s:100,l:92},name:"MistyRose1"},{colorId:225,hexString:"#ffd7ff",rgb:{r:255,g:215,b:255},hsl:{h:300,s:100,l:92},name:"Thistle1"},{colorId:226,hexString:"#ffff00",rgb:{r:255,g:255,b:0},hsl:{h:60,s:100,l:50},name:"Yellow1"},{colorId:227,hexString:"#ffff5f",rgb:{r:255,g:255,b:95},hsl:{h:60,s:100,l:68},name:"LightGoldenrod1"},{colorId:228,hexString:"#ffff87",rgb:{r:255,g:255,b:135},hsl:{h:60,s:100,l:76},name:"Khaki1"},{colorId:229,hexString:"#ffffaf",rgb:{r:255,g:255,b:175},hsl:{h:60,s:100,l:84},name:"Wheat1"},{colorId:230,hexString:"#ffffd7",rgb:{r:255,g:255,b:215},hsl:{h:60,s:100,l:92},name:"Cornsilk1"},{colorId:231,hexString:"#ffffff",rgb:{r:255,g:255,b:255},hsl:{h:0,s:0,l:100},name:"Grey100"},{colorId:232,hexString:"#080808",rgb:{r:8,g:8,b:8},hsl:{h:0,s:0,l:3},name:"Grey3"},{colorId:233,hexString:"#121212",rgb:{r:18,g:18,b:18},hsl:{h:0,s:0,l:7},name:"Grey7"},{colorId:234,hexString:"#1c1c1c",rgb:{r:28,g:28,b:28},hsl:{h:0,s:0,l:10},name:"Grey11"},{colorId:235,hexString:"#262626",rgb:{r:38,g:38,b:38},hsl:{h:0,s:0,l:14},name:"Grey15"},{colorId:236,hexString:"#303030",rgb:{r:48,g:48,b:48},hsl:{h:0,s:0,l:18},name:"Grey19"},{colorId:237,hexString:"#3a3a3a",rgb:{r:58,g:58,b:58},hsl:{h:0,s:0,l:22},name:"Grey23"},{colorId:238,hexString:"#444444",rgb:{r:68,g:68,b:68},hsl:{h:0,s:0,l:26},name:"Grey27"},{colorId:239,hexString:"#4e4e4e",rgb:{r:78,g:78,b:78},hsl:{h:0,s:0,l:30},name:"Grey30"},{colorId:240,hexString:"#585858",rgb:{r:88,g:88,b:88},hsl:{h:0,s:0,l:34},name:"Grey35"},{colorId:241,hexString:"#626262",rgb:{r:98,g:98,b:98},hsl:{h:0,s:0,l:37},name:"Grey39"},{colorId:242,hexString:"#6c6c6c",rgb:{r:108,g:108,b:108},hsl:{h:0,s:0,l:40},name:"Grey42"},{colorId:243,hexString:"#767676",rgb:{r:118,g:118,b:118},hsl:{h:0,s:0,l:46},name:"Grey46"},{colorId:244,hexString:"#808080",rgb:{r:128,g:128,b:128},hsl:{h:0,s:0,l:50},name:"Grey50"},{colorId:245,hexString:"#8a8a8a",rgb:{r:138,g:138,b:138},hsl:{h:0,s:0,l:54},name:"Grey54"},{colorId:246,hexString:"#949494",rgb:{r:148,g:148,b:148},hsl:{h:0,s:0,l:58},name:"Grey58"},{colorId:247,hexString:"#9e9e9e",rgb:{r:158,g:158,b:158},hsl:{h:0,s:0,l:61},name:"Grey62"},{colorId:248,hexString:"#a8a8a8",rgb:{r:168,g:168,b:168},hsl:{h:0,s:0,l:65},name:"Grey66"},{colorId:249,hexString:"#b2b2b2",rgb:{r:178,g:178,b:178},hsl:{h:0,s:0,l:69},name:"Grey70"},{colorId:250,hexString:"#bcbcbc",rgb:{r:188,g:188,b:188},hsl:{h:0,s:0,l:73},name:"Grey74"},{colorId:251,hexString:"#c6c6c6",rgb:{r:198,g:198,b:198},hsl:{h:0,s:0,l:77},name:"Grey78"},{colorId:252,hexString:"#d0d0d0",rgb:{r:208,g:208,b:208},hsl:{h:0,s:0,l:81},name:"Grey82"},{colorId:253,hexString:"#dadada",rgb:{r:218,g:218,b:218},hsl:{h:0,s:0,l:85},name:"Grey85"},{colorId:254,hexString:"#e4e4e4",rgb:{r:228,g:228,b:228},hsl:{h:0,s:0,l:89},name:"Grey89"},{colorId:255,hexString:"#eeeeee",rgb:{r:238,g:238,b:238},hsl:{h:0,s:0,l:93},name:"Grey93"}],U=Object.defineProperty,G=Object.defineProperties,W=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,J=function(e,t,n){return t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Q=function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(t){a(t)}},o=function(e){try{c(n.throw(e))}catch(t){a(t)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))},q={r:0,g:0,b:0,a:255},$={r:0,g:0,b:0,a:125},ee={r:0,g:0,b:0,a:0},te=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"createCanvas",value:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return{canvas:t,ctx:n}}},{key:"createImgDom",value:function(e){var t=new Image;return t.crossOrigin="Anonymous",t.src=e,new Promise((function(e){t.onload=function(){e(t)},t.onerror=function(e){console.error(e)}}))}},{key:"renderColorByMask",value:function(t){var n=t.renderCanvas,i=t.imgData,a=t.customColor,r=t.hiddenUndefinedColor,o=void 0!==r&&r,c=t.backgroundRGBA,l=void 0===c?$:c,u=t.basicImgCanvas,d=n.getContext("2d");if(d){if(e.renderPixelByImgData({ctx:d,imgData:i,getColor:function(e){var t,n,i,r=e.r,c=null==(t=null==a?void 0:a.find((function(e){return(null==e?void 0:e.channel)===r})))?void 0:t.rgba;if(!0!==o||c)return null!=c?c:(n=function(e,t){for(var n in t||(t={}))Y.call(t,n)&&J(e,n,t[n]);if(K){var i,a=Object(s.a)(K(t));try{for(a.s();!(i=a.n()).done;)n=i.value,X.call(t,n)&&J(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},z[r].rgb),i={a:Math.floor(76.5)},G(n,W(i)))},originBackgroundRGBA:q,backgroundRGBA:l}),u){var h=u.getContext("2d");if(h)return h.drawImage(n,0,0),u.toDataURL("image/png")}return n.toDataURL("image/png")}}},{key:"renderMaskByColor",value:function(t){var n=t.renderCanvas,i=t.imgData,a=(t.imgNode,t.customColor),r=t.backgroundRGBA,o=void 0===r?q:r,c=n.getContext("2d");if(c){return e.renderPixelByImgData({ctx:c,imgData:i,getColor:function(e){var t=e.r,n=e.g,i=e.b,r=void 0;return null==a||a.some((function(e){if(e.rgba){return t>=e.rgba.r-2&&t<=e.rgba.r+2&&n>=e.rgba.g-2&&n<=e.rgba.g+2&&i>=e.rgba.b-2&&i<=e.rgba.b+2&&(r={r:e.channel,g:e.channel,b:e.channel,a:255},!0)}})),r},originBackgroundRGBA:ee,backgroundRGBA:o}),n.toDataURL("image/png")}}},{key:"renderPixelByImgData",value:function(e){for(var t=e.ctx,n=e.imgData,i=e.getColor,a=e.originBackgroundRGBA,r=e.backgroundRGBA,o=0;o<n.data.length/4;o++){var c=4*o,l=n.data[c],s=n.data[c+1],u=n.data[c+2],d=n.data[c+3],h=i({r:l,g:s,b:u,a:d});!(a.r===l&&a.g===s&&a.b===u&&a.a===d)&&h?(n.data[c]=h.r,n.data[c+1]=h.g,n.data[c+2]=h.b,n.data[c+3]=h.a):(n.data[c]=r.r,n.data[c+1]=r.g,n.data[c+2]=r.b,n.data[c+3]=r.a)}t.putImageData(n,0,0)}}]),e}(),ne=te;ne.nextTick=function(){return new Promise((function(e){setTimeout((function(){e("")}))}))},ne.getColorMapBySingleChannelMask=function(e){return Q(te,null,Object(F.a)().mark((function t(){var n,i,a,r,o,c,l,s,u,d,h,f,g,v,b,p;return Object(F.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.maskSrc,i=e.customColor,a=e.basicImgSrc,r=e.hiddenUndefinedColor,o=void 0!==r&&r,c=e.backgroundRGBA,t.prev=1,t.next=4,te.createImgDom(n);case 4:if(l=t.sent,s=te.createCanvas(l),u=s.canvas,(d=s.ctx).drawImage(l,0,0,l.width,l.height),h=te.createCanvas(l),f=h.canvas,g=h.ctx,!a){t.next=13;break}return t.next=11,te.createImgDom(a);case 11:v=t.sent,g.drawImage(v,0,0);case 13:return t.next=15,te.nextTick();case 15:return b=d.getImageData(0,0,l.width,l.height),p=te.renderColorByMask({renderCanvas:u,imgData:b,imgNode:l,customColor:i,hiddenUndefinedColor:o,basicImgCanvas:f,backgroundRGBA:c}),t.abrupt("return",p);case 20:t.prev=20,t.t0=t.catch(1),console.error("Failed to load image",t.t0);case 23:case"end":return t.stop()}}),t,null,[[1,20]])})))},ne.getMaskByColorImg=function(e){return Q(te,[e],(function(e){var t=e.maskSrc,n=e.customColor;return Object(F.a)().mark((function e(){var i,a,r,o,c,l,s;return Object(F.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.createImgDom(t);case 3:return i=e.sent,a=te.createCanvas(i),(r=a.ctx).drawImage(i,0,0,i.width,i.height),o=te.createCanvas(i),c=o.canvas,e.next=9,te.nextTick();case 9:return l=r.getImageData(0,0,i.width,i.height),s=te.renderMaskByColor({renderCanvas:c,imgData:l,imgNode:i,customColor:n}),e.abrupt("return",s);case 14:e.prev=14,e.t0=e.catch(0),console.error("Failed to load image");case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))()}))}},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(34);var r,o=((r=i)&&"object"==typeof r&&"default"in r?r:{default:r}).default.createContext(void 0),c=a.createDispatchHook(o),l=a.createSelectorHook(o);t.LabelBeeContext=o,t.useDispatch=c,t.useSelector=l},,,function(e,t,n){"use strict";n.r(t),n.d(t,"RectOperation",(function(){return Zi})),n.d(t,"TagOperation",(function(){return Xi})),n.d(t,"PointOperation",(function(){return ca})),n.d(t,"LineToolOperation",(function(){return xa})),n.d(t,"TextToolOperation",(function(){return Ca})),n.d(t,"PolygonOperation",(function(){return Da})),n.d(t,"MeasureOperation",(function(){return Za})),n.d(t,"BasicToolOperation",(function(){return Ai})),n.d(t,"ViewOperation",(function(){return pr})),n.d(t,"ScribbleTool",(function(){return mr})),n.d(t,"PointCloud2dOperation",(function(){return Sr})),n.d(t,"cAnnotation",(function(){return a})),n.d(t,"cAnnotationTask",(function(){return c})),n.d(t,"cKeyCode",(function(){return r})),n.d(t,"cStyle",(function(){return o})),n.d(t,"cTool",(function(){return i})),n.d(t,"CLIENT_TOOL_HEAD_TYPE",(function(){return ne})),n.d(t,"CLIENT_TOOL_NAME",(function(){return ie})),n.d(t,"DEFAULT_FONT",(function(){return q})),n.d(t,"DEFAULT_TEXT_MAX_WIDTH",(function(){return Q})),n.d(t,"EAnnotationMode",(function(){return _})),n.d(t,"EAuditStatus",(function(){return U})),n.d(t,"ECheckModel",(function(){return S})),n.d(t,"EDependPattern",(function(){return M})),n.d(t,"EDragTarget",(function(){return Z})),n.d(t,"EDrawPointPattern",(function(){return F})),n.d(t,"EFilterToolOperation",(function(){return N})),n.d(t,"ELineColor",(function(){return H})),n.d(t,"ELineTypes",(function(){return B})),n.d(t,"EOperationMode",(function(){return te})),n.d(t,"EPageOperator",(function(){return z})),n.d(t,"EPointCloudName",(function(){return I})),n.d(t,"EPolygonPattern",(function(){return $})),n.d(t,"ERectPattern",(function(){return T})),n.d(t,"EScribblePattern",(function(){return ee})),n.d(t,"ESelectedType",(function(){return V})),n.d(t,"ETextType",(function(){return G})),n.d(t,"EThumbnailOption",(function(){return K})),n.d(t,"EToolName",(function(){return O})),n.d(t,"EToolType",(function(){return P})),n.d(t,"EVideoToolName",(function(){return L})),n.d(t,"OPERATION_LIST",(function(){return W})),n.d(t,"SEGMENT_NUMBER",(function(){return ae})),n.d(t,"TEXT_ATTRIBUTE_LINE_HEIGHT",(function(){return J})),n.d(t,"TEXT_ATTRIBUTE_MAX_LENGTH",(function(){return X})),n.d(t,"TEXT_TYPE",(function(){return Y})),n.d(t,"TOOL_NAME",(function(){return R})),n.d(t,"TOOL_NAME_EN",(function(){return j})),n.d(t,"edgeAdsorptionScope",(function(){return re})),n.d(t,"editStepWidth",(function(){return D})),n.d(t,"TagUtils",(function(){return Yi})),n.d(t,"uuid",(function(){return ii})),n.d(t,"MarkerUtils",(function(){return ni})),n.d(t,"RectUtils",(function(){return qt})),n.d(t,"AxisUtils",(function(){return mt})),n.d(t,"DrawUtils",(function(){return ti})),n.d(t,"ImgUtils",(function(){return zr})),n.d(t,"MathUtils",(function(){return Ft})),n.d(t,"AttributeUtils",(function(){return Vn})),n.d(t,"ActionsHistory",(function(){return hi})),n.d(t,"DblClickEventListener",(function(){return fi})),n.d(t,"AnnotationEngine",(function(){return Xr})),n.d(t,"UnitUtils",(function(){return zn})),n.d(t,"CanvasScheduler",(function(){return Jr})),n.d(t,"PointCloud",(function(){return xo})),n.d(t,"createThreeMatrix4",(function(){return $a})),n.d(t,"getCuboidFromPointCloudBox",(function(){return ir})),n.d(t,"lidar2image",(function(){return nr})),n.d(t,"pointCloudLidar2image",(function(){return ar})),n.d(t,"rotatePoint",(function(){return tr})),n.d(t,"transferKitti2Matrix",(function(){return er})),n.d(t,"PointCloudAnnotation",(function(){return To})),n.d(t,"CommonToolUtils",(function(){return Ao})),n.d(t,"toolUtils",(function(){return Eo}));var i={};n.r(i),n.d(i,"CLIENT_TOOL_HEAD_TYPE",(function(){return ne})),n.d(i,"CLIENT_TOOL_NAME",(function(){return ie})),n.d(i,"DEFAULT_FONT",(function(){return q})),n.d(i,"DEFAULT_TEXT_MAX_WIDTH",(function(){return Q})),n.d(i,"EAnnotationMode",(function(){return _})),n.d(i,"EAuditStatus",(function(){return U})),n.d(i,"ECheckModel",(function(){return S})),n.d(i,"EDependPattern",(function(){return M})),n.d(i,"EDragTarget",(function(){return Z})),n.d(i,"EDrawPointPattern",(function(){return F})),n.d(i,"EFilterToolOperation",(function(){return N})),n.d(i,"ELineColor",(function(){return H})),n.d(i,"ELineTypes",(function(){return B})),n.d(i,"EOperationMode",(function(){return te})),n.d(i,"EPageOperator",(function(){return z})),n.d(i,"EPointCloudName",(function(){return I})),n.d(i,"EPolygonPattern",(function(){return $})),n.d(i,"ERectPattern",(function(){return T})),n.d(i,"EScribblePattern",(function(){return ee})),n.d(i,"ESelectedType",(function(){return V})),n.d(i,"ETextType",(function(){return G})),n.d(i,"EThumbnailOption",(function(){return K})),n.d(i,"EToolName",(function(){return O})),n.d(i,"EToolType",(function(){return P})),n.d(i,"EVideoToolName",(function(){return L})),n.d(i,"OPERATION_LIST",(function(){return W})),n.d(i,"SEGMENT_NUMBER",(function(){return ae})),n.d(i,"TEXT_ATTRIBUTE_LINE_HEIGHT",(function(){return J})),n.d(i,"TEXT_ATTRIBUTE_MAX_LENGTH",(function(){return X})),n.d(i,"TEXT_TYPE",(function(){return Y})),n.d(i,"TOOL_NAME",(function(){return R})),n.d(i,"TOOL_NAME_EN",(function(){return j})),n.d(i,"edgeAdsorptionScope",(function(){return re})),n.d(i,"editStepWidth",(function(){return D}));var a={};n.r(a),n.d(a,"ANNOTATION_MAX_SIZE",(function(){return Me})),n.d(a,"DEFAULT_TEXT_OFFSET",(function(){return Ne})),n.d(a,"DEFAULT_TEXT_SHADOW",(function(){return Re})),n.d(a,"EDragStatus",(function(){return Oe})),n.d(a,"EDragTarget",(function(){return Se})),n.d(a,"EGrowthMode",(function(){return Ae})),n.d(a,"ELang",(function(){return Ee})),n.d(a,"EPageOperator",(function(){return Pe})),n.d(a,"ERotateDirection",(function(){return De})),n.d(a,"ESortDirection",(function(){return Te})),n.d(a,"EStepType",(function(){return ye})),n.d(a,"TEXT_ATTRIBUTE_OFFSET",(function(){return je})),n.d(a,"footerHeight",(function(){return Ie})),n.d(a,"headerHeight",(function(){return we})),n.d(a,"sidebarWidth",(function(){return Le})),n.d(a,"tipsHeight",(function(){return ke}));var r={};n.r(r),n.d(r,"default",(function(){return nn}));var o={};n.r(o),n.d(o,"INVALID_ICON",(function(){return un})),n.d(o,"BASE_ICON",(function(){return Ln})),n.d(o,"COLORS_ARRAY",(function(){return kn})),n.d(o,"EDIT_STEP_WIDTH",(function(){return Cn})),n.d(o,"FILTER_TOOL_COLOR",(function(){return Tn})),n.d(o,"FOOTER_HEIGHT",(function(){return yn})),n.d(o,"HEADER_HEIGHT",(function(){return hn})),n.d(o,"ICON_ARRAY",(function(){return In})),n.d(o,"INVALID_COLOR",(function(){return Pn})),n.d(o,"INVALID_COLOR_RGBA",(function(){return On})),n.d(o,"NULL_COLOR",(function(){return Sn})),n.d(o,"NULL_ICON",(function(){return dn})),n.d(o,"PADDING",(function(){return vn})),n.d(o,"PAGINATION_HEIGHT",(function(){return pn})),n.d(o,"SEARCH_HEIGHT",(function(){return gn})),n.d(o,"SIDERBAR_WIDTH",(function(){return xn})),n.d(o,"TABLE_ROW_HEIGHT",(function(){return bn})),n.d(o,"TAB_HEIGHT",(function(){return fn})),n.d(o,"THEME_COLOR",(function(){return wn})),n.d(o,"TIPS_HEIGHT",(function(){return mn})),n.d(o,"styleString",(function(){return An}));var c={};n.r(c),n.d(c,"ANNOTATION_STATUS",(function(){return Ar})),n.d(c,"ANNOTATION_TYPE",(function(){return Tr})),n.d(c,"EAnnotationStatus",(function(){return rr}));var l=n(16),s=n(21),u=n(7),d=n(8),h=n(20),f=n(13),g=n(12),v=n(9),b=n(10),p=n(24);function m(e,t,n){var i=void 0===t?null:t,a=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),a=0,r=n.length;a<r;++a)i[a]=n.charCodeAt(a);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),r=a.indexOf("\n",10)+1,o=a.substring(r)+(i?"//# sourceMappingURL="+i:""),c=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(c)}function y(e,t,n){var i;return function(a){return i=i||m(e,t,n),new Worker(i,a)}}var x,C,w,k,I,L,P,O,S,T,A=y("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIEM9T2JqZWN0LmRlZmluZVByb3BlcnR5LEw9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxJPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXz1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLE09KGMsdCxvKT0+dCBpbiBjP0MoYyx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpvfSk6Y1t0XT1vLEU9KGMsdCk9Pntmb3IodmFyIG8gaW4gdHx8KHQ9e30pKUkuY2FsbCh0LG8pJiZNKGMsbyx0W29dKTtpZihMKWZvcih2YXIgbyBvZiBMKHQpKV8uY2FsbCh0LG8pJiZNKGMsbyx0W29dKTtyZXR1cm4gY307Y2xhc3MgUntzdGF0aWMgZmluZEFsbExpbmUodCxvPSEwKXtjb25zdCBuPVtdLHI9Wy4uLnRdO3IubGVuZ3RoPj0zJiZvPT09ITAmJnIucHVzaChFKHt9LHJbMF0pKTtmb3IobGV0IHM9MDtzPHIubGVuZ3RoO3MrKylyW3MrMV0mJm4ucHVzaCh7cG9pbnQxOnJbc10scG9pbnQyOnJbcysxXSxwb2ludEluZGV4OnN9KTtyZXR1cm4gbn19Y2xhc3MgZ3tzdGF0aWMgaXNJblJhbmdlKHQsbyl7Y29uc3Qgbj1NYXRoLm1pbiguLi5vKSxyPU1hdGgubWF4KC4uLm8pLHM9ZT0+ZTw9ciYmZT49bjtyZXR1cm4oQXJyYXkuaXNBcnJheSh0KT90Olt0XSkuZXZlcnkoZT0+cyhlKSl9c3RhdGljIGdldExpbmVMZW5ndGgodCxvKXtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KG8ueS10LnksMikrTWF0aC5wb3coby54LXQueCwyKSl9c3RhdGljIGlzT3V0T2ZSYW5nZSh0LG8sbixyKXtjb25zdCBzPW8ueC10LngsYT1uLngtdC54LGU9by55LXQueSxmPW4ueS10LnksbD1zPj0wJiZhPj0wfHxzPD0wJiZhPD0wLHU9ZT49MCYmZj49MHx8ZTw9MCYmZjw9MDtyZXR1cm4gcz5yJiZhPnImJmx8fGU+ciYmZj5yJiZ1fXN0YXRpYyBjcm9zcyh0LG8pe3JldHVybiB0Lngqby55LW8ueCp0Lnl9c3RhdGljIGdldEZvb3RPZlBlcnBlbmRpY3VsYXIodCxvLG4scj0hMSl7bGV0IHM9e3g6MCx5OjB9O2NvbnN0IGE9by54LW4ueCxlPW8ueS1uLnk7aWYoTWF0aC5hYnMoYSk8MWUtOCYmTWF0aC5hYnMoZSk8MWUtOClyZXR1cm4gcz1vLHM7bGV0IGY9KHQueC1vLngpKihvLngtbi54KSsodC55LW8ueSkqKG8ueS1uLnkpO2YvPWEqYStlKmUscy54PW8ueCtmKmEscy55PW8ueStmKmU7Y29uc3QgbD10aGlzLmdldExpbmVMZW5ndGgodCxzKSx1PTI7aWYobD4yKXJldHVybntmb290UG9pbnQ6cyxsZW5ndGg6SW5maW5pdHl9O2NvbnN0IHA9TWF0aC5taW4oby54LG4ueCkseD1NYXRoLm1heChvLngsbi54KSxoPU1hdGgubWluKG8ueSxuLnkpLG09TWF0aC5tYXgoby55LG4ueSksaT0hKHRoaXMuaXNJblJhbmdlKHQueCxbcCx4XSl8fHRoaXMuaXNJblJhbmdlKHQueSxbaCxtXSkpLHk9dC54PngrdXx8dC54PHAtdXx8dC55Pm0rdXx8dC55PGgtdTtyZXR1cm4ocj9pOnkpP3tmb290UG9pbnQ6cyxsZW5ndGg6SW5maW5pdHl9Ontmb290UG9pbnQ6cyxsZW5ndGg6bH19fWZ1bmN0aW9uIFMoYyx0LG89MCxuPTMscil7bGV0IHM9ITE7Y29uc3QgYT1yP3IuaXNDbG9zZXx8ITA6ITE7bGV0IGU9IiIsZj0tMSxsPUluZmluaXR5LHU9Yztjb25zdCBwPTIwO2xldCB4PSExO3JldHVybiB0LmZvckVhY2goaD0+e2lmKCF4JiYhIWgucG9pbnRMaXN0KXN3aXRjaChvKXtjYXNlIDA6Ui5maW5kQWxsTGluZShoLnBvaW50TGlzdCxhKS5mb3JFYWNoKChpLHkpPT57aWYoeClyZXR1cm47Y29uc3QgUD1nLmdldExpbmVMZW5ndGgoaS5wb2ludDEsYyksdz1nLmdldExpbmVMZW5ndGgoaS5wb2ludDIsYyk7aWYoZy5pc091dE9mUmFuZ2UoYyxpLnBvaW50MSxpLnBvaW50MixuKSlyZXR1cm47bGV0e2xlbmd0aDpPLGZvb3RQb2ludDpkfT1nLmdldEZvb3RPZlBlcnBlbmRpY3VsYXIoYyxpLnBvaW50MSxpLnBvaW50Mik7UDxuKjImJihkPWkucG9pbnQxLE89UCx4PSEwKSx3PG4qMiYmKGQ9aS5wb2ludDIsTz13LHg9ITApLE88bCYmTzxuJiYoZT1oLmlkLGY9eSxsPU8sdT1kLHM9ITApfSk7YnJlYWs7Y2FzZSAxOntjb25zdCBtPXRoaXMuY3JlYXRlU21vb3RoQ3VydmVQb2ludHMoaC5wb2ludExpc3QucmVkdWNlKChpLHkpPT5bLi4uaSx5LngseS55XSxbXSksLjUsYSxwKTtmb3IobGV0IGk9MDtpPG0ubGVuZ3RoLTE7aSsrKXtjb25zdHtsZW5ndGg6eSxmb290UG9pbnQ6UH09Zy5nZXRGb290T2ZQZXJwZW5kaWN1bGFyKGMsbVtpXSxtW2krMV0pO3k8bCYmeTxuJiYoZT1oLmlkLGY9TWF0aC5mbG9vcihpLyhwKzEpKSxsPXksdT1QLHM9ITApfX1icmVha319KSx7ZHJvcEZvb3Q6dSxjbG9zZXN0RWRnZUluZGV4OmYsY2xvc2VzdFBvbHlnb25JRDplLGhhc0Nsb3NlZDpzfX1vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7Y29uc3R7cG9pbnRzOm8sYmFja2dyb3VuZExpc3Q6bn09dC5kYXRhLHI9W10scz1uZXcgU2V0O3RyeXtjb25zdCBhPShlLGYpPT57Y29uc3R7ZHJvcEZvb3Q6bH09UyhlLGYsMCwxLHtpc0Nsb3NlOiExfSk7aWYobCE9PWUpe2NvbnN0IHU9YCR7bC54fSArICR7bC55fWA7cy5oYXModSl8fHIucHVzaChlKSxzLmFkZCh1KX19O28uZm9yRWFjaChmdW5jdGlvbihmKXthKGYsbil9KSxuLmZvckVhY2goZnVuY3Rpb24oZil7bGV0IGw9IiI7bD1mLmlkLG4uZm9yRWFjaChmdW5jdGlvbihwLHgpe2lmKHAuaWQ9PT1sKXJldHVybjtjb25zdCBoPVsuLi5uXTtoLnNwbGljZSh4LDEpLHAucG9pbnRMaXN0LmZvckVhY2goZnVuY3Rpb24oaSl7YShpLGgpfSl9KX0pLHBvc3RNZXNzYWdlKHtjb25uZWN0aW9uUG9pbnRzOnJ9KX1jYXRjaChhKXtjb25zb2xlLmVycm9yKGEpLHBvc3RNZXNzYWdlKHtjb25uZWN0aW9uUG9pbnRzOltdfSl9fX0pKCk7Cgo=",null,!1),E=n(14),D=320;(I||(I={})).PointCloud="pointCloudTool",function(e){e.VideoTextTool="videoTextTool",e.VideoTagTool="videoTagTool",e.VideoClipTool="videoClipTool"}(L||(L={})),function(e){e[e.Rect=0]="Rect",e[e.Tag=1]="Tag"}(P||(P={})),function(e){e.Rect="rectTool",e.Tag="tagTool",e.Point="pointTool",e.PointMarker="pointMarkerTool",e.Segmentation="segmentationTool",e.Filter="filterTool",e.Text="textTool",e.Polygon="polygonTool",e.Line="lineTool",e.LineMarker="lineMarkerTool",e.Empty="emptyTool",e.FolderTag="folderTagTool",e.RectTrack="rectTrackTool",e.ScribbleTool="scribbleTool",e.Face="faceTool",e.ClientAttribute="clientAttributeTool",e.OCRRelation="OCRRelationTool",e.SegmentByRect="segmentByRectTool"}(O||(O={})),function(e){e.Check="check"}(S||(S={})),function(e){e[e.nothing=0]="nothing",e[e.RectBG=1]="RectBG",e[e.showOrder=2]="showOrder"}(T||(T={}));var M,N,R=(x={},Object(E.a)(x,O.Rect,"\u62c9\u6846"),Object(E.a)(x,O.Tag,"\u6807\u7b7e"),Object(E.a)(x,O.Point,"\u6807\u70b9"),Object(E.a)(x,O.PointMarker,"\u5217\u8868\u6807\u70b9"),Object(E.a)(x,O.Segmentation,"\u524d\u666f\u5206\u5272"),Object(E.a)(x,O.Filter,"\u7b5b\u9009"),Object(E.a)(x,O.Text,"\u6587\u672c"),Object(E.a)(x,O.Polygon,"\u591a\u8fb9\u5f62"),Object(E.a)(x,O.Line,"\u7ebf\u6761"),Object(E.a)(x,O.LineMarker,"\u5217\u8868\u7ebf\u6761"),Object(E.a)(x,O.FolderTag,"\u6587\u4ef6\u5939\u6807\u7b7e"),Object(E.a)(x,O.RectTrack,"\u62c9\u6846\u8ddf\u8e2a"),Object(E.a)(x,O.Face,"\u4eba\u8138106\u5de5\u5177"),Object(E.a)(x,O.ClientAttribute,"\u5ba2\u6237\u7aef\u5c5e\u6027\u5de5\u5177"),Object(E.a)(x,O.OCRRelation,"OCR\u5173\u8054\u5173\u7cfb\u5de5\u5177"),Object(E.a)(x,O.SegmentByRect,"\u7b97\u6cd5\u5206\u5272\u8f85\u52a9\u5de5\u5177"),Object(E.a)(x,L.VideoTextTool,"\u89c6\u9891\u6587\u672c"),Object(E.a)(x,L.VideoTagTool,"\u89c6\u9891\u6807\u7b7e"),Object(E.a)(x,L.VideoClipTool,"\u89c6\u9891\u622a\u53d6"),Object(E.a)(x,I.PointCloud,"\u70b9\u4e91"),x),j=(C={},Object(E.a)(C,O.Rect,"Rect"),Object(E.a)(C,O.Tag,"Tag"),Object(E.a)(C,O.Point,"Point"),Object(E.a)(C,O.PointMarker,"PointMarker"),Object(E.a)(C,O.Segmentation,"Segmentation"),Object(E.a)(C,O.Filter,"Filter"),Object(E.a)(C,O.Text,"Text"),Object(E.a)(C,O.Polygon,"Polygon"),Object(E.a)(C,O.Line,"Line"),Object(E.a)(C,O.LineMarker,"LineMarker"),Object(E.a)(C,O.FolderTag,"FolderTag"),Object(E.a)(C,O.RectTrack,"RectTrack"),Object(E.a)(C,O.Face,"Face"),Object(E.a)(C,O.ClientAttribute,"ClientAttribute"),Object(E.a)(C,O.OCRRelation,"OCRRelation"),Object(E.a)(C,O.SegmentByRect,"SegmentByRect"),Object(E.a)(C,L.VideoTextTool,"VideoTextTool"),Object(E.a)(C,L.VideoTagTool,"VideoTagTool"),Object(E.a)(C,L.VideoClipTool,"VideoClipTool"),Object(E.a)(C,I.PointCloud,"PointCloud"),C);!function(e){e[e.noDepend=1]="noDepend",e[e.dependOrigin=2]="dependOrigin",e[e.dependShape=3]="dependShape",e[e.dependLine=4]="dependLine",e[e.dependPolygon=5]="dependPolygon",e[e.dependPreShape=101]="dependPreShape",e[e.dependPreLine=102]="dependPreLine",e[e.dependPrePolygon=103]="dependPrePolygon"}(M||(M={})),function(e){e.lc="leftClick",e.rc="rightClick",e.clc="ctrlLeftClick",e.crc="ctrlRightClick"}(N||(N={}));var _,B,H,V,Z,F,z,U,G,W={leftClick:"\u9f20\u6807\u5de6\u952e",rightClick:"\u9f20\u6807\u53f3\u952e",ctrlLeftClick:"ctrl + \u9f20\u6807\u5de6\u952e",ctrlRightClick:"ctrl + \u9f20\u6807\u53f3\u952e"};!function(e){e[e.Normal=1]="Normal",e[e.Modify=2]="Modify"}(_||(_={})),function(e){e[e.Line=0]="Line",e[e.Curve=1]="Curve"}(B||(B={})),function(e){e[e.SingleColor=0]="SingleColor",e[e.MultiColor=1]="MultiColor"}(H||(H={})),function(e){e[e.Form=1]="Form",e[e.Json=2]="Json"}(V||(V={})),function(e){e[e.Point=0]="Point",e[e.Line=1]="Line",e[e.Plane=2]="Plane"}(Z||(Z={})),function(e){e[e.None=0]="None",e[e.Drawing=1]="Drawing",e[e.Edit=2]="Edit"}(F||(F={})),function(e){e[e.Backward=0]="Backward",e[e.Forward=1]="Forward",e[e.JumpSkip=2]="JumpSkip",e[e.None=3]="None"}(z||(z={})),function(e){e[e.Wait=0]="Wait",e[e.Pass=1]="Pass",e[e.Fail=2]="Fail",e[e.Loading=3]="Loading"}(U||(U={})),function(e){e[e.AnyString=0]="AnyString",e[e.Order=1]="Order",e[e.EnglishOnly=2]="EnglishOnly",e[e.NumberOnly=3]="NumberOnly",e[e.CustomFormat=4]="CustomFormat"}(G||(G={}));var K,Y={0:"\u4efb\u610f\u5b57\u7b26",1:"\u5e8f\u53f7",2:"\u4ec5\u82f1\u6587",3:"\u4ec5\u6570\u5b57"},X=1e3,J=16,Q=300,q="normal normal 500 14px Arial";!function(e){e[e.ImgList=1e3]="ImgList",e[e.TrackPrediction=1001]="TrackPrediction",e[e.ImgSearch=1002]="ImgSearch"}(K||(K={}));var $,ee,te,ne=(w={},Object(E.a)(w,I.PointCloud,"sensebeepc"),Object(E.a)(w,O.ClientAttribute,"sensebeepc-EnumAttributeTool"),Object(E.a)(w,O.Face,"sensebeepc-FacePointsLabellingTool"),Object(E.a)(w,O.OCRRelation,"sensebeepc-OCRRelationTool"),w),ie=(k={},Object(E.a)(k,I.PointCloud,"\u70b9\u4e91\u5ba2\u6237\u7aef"),Object(E.a)(k,O.ClientAttribute,"\u5ba2\u6237\u7aef\u5c5e\u6027\u5de5\u5177"),Object(E.a)(k,O.Face,"\u4eba\u8138106\u70b9\u5de5\u5177"),Object(E.a)(k,O.OCRRelation,"OCR\u5173\u8054\u5173\u7cfb\u5de5\u5177"),k),ae=16,re=10;!function(e){e[e.Normal=0]="Normal",e[e.Rect=1]="Rect"}($||($={})),function(e){e[e.Scribble=1]="Scribble",e[e.Erase=2]="Erase"}(ee||(ee={})),function(e){e[e.General=1]="General",e[e.MultiMove=2]="MultiMove"}(te||(te={}));var oe=Object.defineProperty,ce=Object.defineProperties,le=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,he=function(e,t,n){return t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},fe=function(e,t){for(var n in t||(t={}))ue.call(t,n)&&he(e,n,t[n]);if(se){var i,a=Object(p.a)(se(t));try{for(a.s();!(i=a.n()).done;){n=i.value;de.call(t,n)&&he(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},ge=function(e,t){return ce(e,le(t))};function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16;if(e.length<4)return e;var a,r,o,c,l,s,u,d,h,f,g,v,b,p=[],m=e.slice(0);for(n?(m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.push(e[0]),m.push(e[1])):(m.unshift(e[1]),m.unshift(e[0]),m.push(e[e.length-2]),m.push(e[e.length-1])),b=2;b<m.length-4;b+=2)for(o=(m[b+2]-m[b-2])*t,c=(m[b+4]-m[b-0])*t,l=(m[b+3]-m[b-1])*t,s=(m[b+5]-m[b+1])*t,v=0;v<=i;v++)g=v/i,u=2*Math.pow(g,3)-3*Math.pow(g,2)+1,d=-2*Math.pow(g,3)+3*Math.pow(g,2),h=Math.pow(g,3)-2*Math.pow(g,2)+g,f=Math.pow(g,3)-Math.pow(g,2),a=u*m[b]+d*m[b+2]+h*o+f*c,r=u*m[b+1]+d*m[b+3]+h*l+f*s,p.push(a),p.push(r);for(var y=[],x=0;x<p.length-1;x+=2)y.push({x:p[x],y:p[x+1]});if(n)for(var C=0;C<i+1;C++){var w=y.shift();y.push(w)}return y}var be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return ve(e.reduce((function(e,t){return[].concat(Object(l.a)(e),[t.x,t.y])}),[]),.5,!1,t)};function pe(e,t){var n,i,a,r,o,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.Line,u=0;t=Object(l.a)(t),c===B.Curve&&(t=ve(t.reduce((function(e,t){return[].concat(Object(l.a)(e),[t.x,t.y])}),[]),.5,!0,ae)),n=t,r=Object(s.a)(n,1)[0];var d=t.length;for(i=1;i<=d;i++)o=t[i%d],e.x>Math.min(r.x,o.x)&&e.x<=Math.max(r.x,o.x)&&e.y<=Math.max(r.y,o.y)&&r.x!==o.x&&(a=(e.x-r.x)*(o.y-r.y)/(o.x-r.x)+r.y,(r.y===o.y||e.y<=a)&&u++),r=o;return u%2!=0}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.map((function(e){return ge(fe({},e),{x:e.x*t,y:e.y*t})}))}var ye,xe,Ce=n(94),we=61,ke=40,Ie=40,Le=240;(xe=ye||(ye={}))[xe.ANNOTATION=1]="ANNOTATION",xe[xe.QUALITY_INSPECTION=2]="QUALITY_INSPECTION",xe[xe.PRE_ANNOTATION=3]="PRE_ANNOTATION",xe[xe.MANUAL_CORRECTION=4]="MANUAL_CORRECTION";var Pe,Oe,Se,Te,Ae,Ee,De,Me=1e3;!function(e){e[e.Backward=0]="Backward",e[e.Forward=1]="Forward",e[e.JumpSkip=2]="JumpSkip",e[e.None=3]="None"}(Pe||(Pe={})),function(e){e[e.Start=0]="Start",e[e.Stop=1]="Stop",e[e.Wait=2]="Wait",e[e.Move=3]="Move"}(Oe||(Oe={})),function(e){e[e.Point=0]="Point",e[e.Line=1]="Line",e[e.Plane=2]="Plane"}(Se||(Se={})),function(e){e[e.ascend=0]="ascend",e[e.descend=1]="descend"}(Te||(Te={})),function(e){e[e.Intelligence=0]="Intelligence",e[e.Linear=1]="Linear"}(Ae||(Ae={})),function(e){e.Zh="zh_CN",e.US="en_US"}(Ee||(Ee={})),function(e){e[e.Clockwise=0]="Clockwise",e[e.Anticlockwise=1]="Anticlockwise"}(De||(De={}));var Ne={offsetX:-10,offsetY:-10},Re={shadowColor:"rgba(0, 0, 0, 1)",shadowOffsetX:1,shadowOffsetY:1,shadowBlur:0},je={x:8,y:26},_e=n(33),Be=n.n(_e),He=Object.defineProperty,Ve=Object.defineProperties,Ze=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,Ge=function(e,t,n){return t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},We=function(e,t){for(var n in t||(t={}))ze.call(t,n)&&Ge(e,n,t[n]);if(Fe){var i,a=Object(p.a)(Fe(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Ue.call(t,n)&&Ge(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Ke=function(e,t){return Ve(e,Ze(t))},Ye=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getStepInfo",value:function(e,t){return null==t?void 0:t.filter((function(t){return t.step===e}))[0]}},{key:"getCurrentStepInfo",value:function(e,t){var n=this.getStepInfo(e,t);return!n||n.type!==ye.QUALITY_INSPECTION&&n.type!==ye.MANUAL_CORRECTION?n:this.getCurrentStepInfo(n.dataSourceStep,t)}},{key:"getMaxOrder",value:function(e){var t=0;return e.forEach((function(e){e.order&&e.order>t&&(t=e.order)})),t}},{key:"hotkeyFilter",value:function(e){var t=e.target||e.srcElement;if(!t)return!0;var n=t.tagName,i=t.type;if(!n||!i)return!0;var a=!0;return(t.isContentEditable||"TEXTAREA"===n||("INPUT"===n&&"radio"!==i||"TEXTAREA"===n)&&!t.readOnly)&&(a=!1),a}},{key:"getNextSelectedRectID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te.ascend,n=arguments.length>2?arguments[2]:void 0,i=1;t===Te.descend&&(i=-1);var a=e.sort((function(e,t){return e.x-t.x==0?e.y-t.y:i*(e.x-t.x)})),r=a.findIndex((function(e){return e.id===n})),o=a.length;return a[(r+1)%o]}},{key:"getNextSelectedRectIDByEvent",value:function(e,t,n){var i=t.shiftKey?Te.descend:Te.ascend;return this.getNextSelectedRectID(e,i,n)}},{key:"getRenderResultList",value:function(e,t){var n,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;return[e.filter((function(e){return r&&r===(null==e?void 0:e.id)?(n=e,!1):!(a.length>0&&!a.includes(null==e?void 0:e.attribute)||i.isDifferSourceID(null==e?void 0:e.sourceID,t))})),n]}},{key:"getSourceID",value:function(e){var t;return e&&null!=(t=null==e?void 0:e.id)?t:""}},{key:"findAllLine",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],i=Object(l.a)(e);i.length>=3&&!0===t&&i.push(We({},i[0]));for(var a=0;a<i.length;a++)i[a+1]&&n.push({point1:i[a],point2:i[a+1],pointIndex:a});return n}},{key:"translateSourceID",value:function(e){return(void 0===e||0===e||"0"===e)&&(e=""),e}},{key:"isDifferSourceID",value:function(e,t){return e=this.translateSourceID(e),t=this.translateSourceID(t),"".concat(e)!="".concat(t)}},{key:"isSameSourceID",value:function(e,t){return e=this.translateSourceID(e),t=this.translateSourceID(t),"".concat(e)=="".concat(t)}},{key:"getNextMarker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(0!==(null==t?void 0:t.length)){var i=t.map((function(e,t){return Ke(We({},e),{index:t})}));if("number"==typeof n&&n>0){var a=t[n];if(a&&e.every((function(e){return e.label!==a.value})))return{label:a.value,index:n};i=[].concat(Object(l.a)(i.slice(n,t.length)),Object(l.a)(i.slice(0,n)))}for(var r=function(t){if(!e.some((function(e){return e.label===i[t].value})))return{v:{label:i[t].value,index:i[t].index}}},o=0;o<i.length;o++){var c=r(o);if("object"===typeof c)return c.v}}}},{key:"getCurrentMarkerIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.findIndex((function(t){return e===t.value}))}}]),e}();Ye.jsonParser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return"string"==typeof e?JSON.parse(e):Object(_e.isObject)(e)?e:t}catch(n){return t}};var Xe,Je,Qe,qe=Object.defineProperty,$e=Object.defineProperties,et=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,nt=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,at=function(e,t,n){return t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},rt=function(e,t){for(var n in t||(t={}))nt.call(t,n)&&at(e,n,t[n]);if(tt){var i,a=Object(p.a)(tt(t));try{for(a.s();!(i=a.n()).done;){n=i.value;it.call(t,n)&&at(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},ot=function(e,t){return $e(e,et(t))};(Je=Xe||(Xe={}))[Je.Create=0]="Create",Je[Je.Active=1]="Active",Je[Je.Edit=1]="Edit",Je[Je.None=2]="None",function(e){e.ActiveArea="#B3B8FF"}(Qe||(Qe={}));var ct=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"isInLine",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=Ft.getFootOfPerpendicular(e,t,n),r=a.length;return r<i}}]),e}(),lt=ct;lt.setSpecialEdgeStyle=function(e){e.lineCap="butt",e.setLineDash([10,10])},lt.setReferenceCtx=function(e){e.lineCap="butt",e.setLineDash([6])},lt.calcOptimalIntersection=function(e,t,n,i,a){var r,o,c=1/0;return e.find((function(n,i){if(0!==i){var a=ct.isInLine(t.pointA,n,e[i-1]),r=ct.isInLine(t.pointB,n,e[i-1]);return a&&r}}))?{point:n}:(e.forEach((function(l,s){if(0!==s){var u={pointA:e[s-1],pointB:l},d=ct.lineIntersection(t,u);if(d&&t){var h=d.onLine2,f=d.onLine1,g=d.x,v=d.y,b=ct.calcDistance(n,d);if(ct.isOnLine(t.pointB.x,t.pointB.y,l.x,l.y,e[s-1].x,e[s-1].y)){if(ct.calcDistance(n,d)<i/a){var p=t.pointB,m=Ft.getFootOfPerpendicular(p,u.pointA,u.pointB,!0),y=m.footPoint,x=m.length;if(void 0!==x){var C=ct.calcDistance(u.pointA,y),w=ct.calcDistance(u.pointB,y);o={point:y,minDistance:x},x===1/0&&(o.point=C>w?u.pointB:u.pointA)}}return}b<c&&h&&f&&(c=b,r={x:g,y:v})}}})),r?{point:r,minDistance:c}:o||void 0)},lt.lineIntersection=function(e,t){var n=!1,i=!1,a=ct.getAxisDiff(e),r=ct.getAxisDiff(t),o=r.y*a.x-r.x*a.y;if(0===o)return!1;var c=e.pointA.y-t.pointA.y,l=e.pointA.x-t.pointA.x,s=(t.pointB.x-t.pointA.x)*c-(t.pointB.y-t.pointA.y)*l,u=(e.pointB.x-e.pointA.x)*c-(e.pointB.y-e.pointA.y)*l;return(c=s/o)>0&&c<1&&(n=!0),(l=u/o)>0&&l<1&&(i=!0),{x:e.pointA.x+c*(e.pointB.x-e.pointA.x),y:e.pointA.y+c*(e.pointB.y-e.pointA.y),onLine1:n,onLine2:i}},lt.getAxisDiff=function(e){return{x:e.pointB.x-e.pointA.x,y:e.pointB.y-e.pointA.y}},lt.calcDistance=function(e,t){return Math.sqrt(Math.pow(Math.abs(e.x-t.x),2)+Math.pow(Math.abs(e.y-t.y),2))},lt.drawCurveLine=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5?arguments[5]:void 0,o=be(t,16);e.save(),e.lineCap="round",e.lineJoin="round",e.strokeStyle=n.color,i&&(e.lineWidth=n.lineWidth),a&&ct.setReferenceCtx(e),t.forEach((function(t,n){var i=null==t?void 0:t.specialEdge,a=o.splice(0,17);e.save(),e.beginPath(),r===n&&(e.lineWidth=4),a.forEach((function(t,n){var a=t.x,r=t.y,o=n>0?"lineTo":"moveTo";i&&ct.setSpecialEdgeStyle(e),e[o](a,r)})),e.stroke(),e.restore()})),e.restore()},lt.calcTwoPointDistance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},lt.pointOverTarget=function(e,t,n,i,a,r,o,c,l,s){var u=e;if(!t)return e;if(n===O.Polygon){var d=ct.getPolygonPointList(i,a);if(0===d.length||Pt.isInPolygon(e,d))return u;var h=d.concat(d[0]).map((function(e){return l(e)})),f=l(t),g={pointA:f,pointB:l(e)},v=ct.calcOptimalIntersection(h,g,f,o,c);if(!v)return t;var b=s(null==v?void 0:v.point);return u.x=b.x,u.y=b.y,u}if(n===O.Rect){var p=i.x,m=i.y,y=i.width,x=i.height;return u.x=Ft.withinRange(u.x,[p,p+y]),u.y=Ft.withinRange(u.y,[m,m+x]),u}return u.x=Ft.withinRange(u.x,[0,r.width]),u.y=Ft.withinRange(u.y,[0,r.height]),u},lt.getPolygonPointList=function(e,t){var n=e.pointList;return t.lineType===B.Line?n:Pt.createSmoothCurvePoints(n.reduce((function(e,t){return[].concat(Object(l.a)(e),[t.x,t.y])}),[]),.5,!0,20)},lt.isOnLine=function(e,t,n,i,a,r){return Math.abs((i-t)/(n-e)*(a-e)+t-r)<1e-6&&a>=e&&a<=n},lt.inArea=function(e,t){var n=e.top,i=e.left,a=e.right,r=e.bottom,o=t.x,c=t.y;return c>=n&&c<=r&&o>=i&&o<=a},lt.getVHPoint=function(e,t,n,i){var a=ct.getAngle(e,n);return Math.abs(a)<45?ot(rt({},t),{y:i.y}):ot(rt({},t),{x:i.x})},lt.getAngle=function(e,t){var n=t.x-e.x,i=t.y-e.y;return 360*Math.atan(i/n)/(2*Math.PI)};var st=Object.defineProperty,ut=Object.defineProperties,dt=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,vt=function(e,t,n){return t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},bt=function(e,t){for(var n in t||(t={}))ft.call(t,n)&&vt(e,n,t[n]);if(ht){var i,a=Object(p.a)(ht(t));try{for(a.s();!(i=a.n()).done;){n=i.value;gt.call(t,n)&&vt(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},pt=function(e,t){return ut(e,dt(t))},mt=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getOffsetCoordinate",value:function(e,t,n){return{x:e.x*n+t.x,y:e.y*n+t.y}}},{key:"changeDrawOutsideTarget",value:function(e,t,n,i,a,r){return"boolean"==typeof i&&!i&&(a&&r?(e.x-t.x>(a.x+a.width)*r&&(e.x=(a.x+a.width)*r+t.x),e.x-t.x<a.x*r&&(e.x=a.x*r+t.x),e.y-t.y>(a.y+a.height)*r&&(e.y=(a.y+a.height)*r+t.y),e.y-t.y<a.y*r&&(e.y=a.y*r+t.y)):(e.x-t.x>n.width&&(e.x=n.width+t.x),e.x-t.x<0&&(e.x=t.x),e.y-t.y>n.height&&(e.y=n.height+t.y),e.y-t.y<0&&(e.y=t.y))),e}},{key:"changeCoordinateByRotate",value:function(e,t,n){var i=n.width,a=n.height,r=e.x,o=e.y;switch(t%360){case 90:return{x:a-o,y:r};case 180:return{x:i-r,y:a-o};case 270:return{x:o,y:i-r};default:return e}}},{key:"changeRectByZoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return pt(bt({},e),{x:e.x*t+n.x,y:e.y*t+n.y,width:e.width*t,height:e.height*t})}},{key:"changePointByZoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return pt(bt({},e),{x:e.x*t+n.x,y:e.y*t+n.y})}},{key:"changePointListByZoom",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return e.map((function(e){return n.changePointByZoom(e,t,i)}))}},{key:"axisArea",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=e.x,i=e.y,a=[],r=n-t;r<n+t;r+=t/3)for(var o=i-t;o<i+t;o+=t/3)a.push({x:r,y:o});return a}},{key:"getOriginCoordinateWithOffsetCoordinate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}}},{key:"returnClosePointIndex",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=-1,a=0;a<t.length;a++){var r=t[a];this.getIsInScope(e,r,n)&&(i=a)}return i}},{key:"getIsInScope",value:function(e,t,n){return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n}}]),e}(),yt=function(){function e(t){Object(u.a)(this,e),this.currentPos=t.currentPos,this.zoom=t.zoom,this.basicImgInfo=t.basicImgInfo,this.dependToolName=""}return Object(d.a)(e,[{key:"isDependPolygon",get:function(){return this.dependToolName===O.Polygon}},{key:"isDependRect",get:function(){return this.dependToolName===O.Rect}},{key:"isDependOriginalImage",get:function(){return""===this.dependToolName}},{key:"getAbsCoord",value:function(e){return{x:(e.x-this.currentPos.x)/this.zoom,y:(e.y-this.currentPos.y)/this.zoom}}},{key:"getRenderCoord",value:function(e){return{x:e.x*this.zoom+this.currentPos.x,y:e.y*this.zoom+this.currentPos.y}}},{key:"coordInsideRect",value:function(e,t){var n=t.x,i=t.y,a=t.width,r=t.height;return{x:Ft.withinRange(e.x,[n,n+a]),y:Ft.withinRange(e.y,[i,i+r])}}},{key:"getPolygonPointList",value:function(e,t){return e===B.Curve?Pt.createSmoothCurvePointsFromPointList(t):t}},{key:"getIntersection",value:function(e,t,n){var i=this.getRenderCoord(t),a={pointA:i,pointB:this.getRenderCoord(e)};return lt.calcOptimalIntersection(n,a,i,3,this.zoom)}},{key:"coordInsidePolygon",value:function(e,t,n,i){var a=this,r=n.pointList,o=null==i?void 0:i.lineType;if(0===r.length)return e;var c=this.getPolygonPointList(o,r);if(Pt.isInPolygon(e,c))return e;var l=c.concat(c[0]).map((function(e){return a.getRenderCoord(e)})),s=this.getIntersection(e,t,l);return s?this.getAbsCoord(null==s?void 0:s.point):e}},{key:"coordInsideImage",value:function(e){return this.coordInsideRect(e,pt(bt({},this.basicImgInfo),{x:0,y:0}))}},{key:"getNextCoordByDependTool",value:function(e,t){return this.isDependRect?this.coordInsideRect(e,this.basicResult):this.isDependPolygon?this.coordInsidePolygon(e,t,this.basicResult,this.dependToolConfig):this.isDependOriginalImage?this.coordInsideImage(e):void 0}},{key:"setDependInfo",value:function(e,t){this.dependToolName=null!=e?e:"",this.dependToolConfig=e?t:void 0}},{key:"setBasicImgInfo",value:function(e){this.basicImgInfo=e}},{key:"setBasicResult",value:function(e){this.basicResult=e}},{key:"setZoomAndCurrentPos",value:function(e,t){this.zoom=e,this.currentPos=t}},{key:"isCoordInsideTarget",value:function(e){if(this.isDependPolygon)return this.isInBasicPolygon(e);if(this.isDependRect){var t=this.basicResult,n=t.x,i=t.y,a=[n,n+t.width],r=[i,i+t.height];return Ft.isInRange(e.x,a)&&Ft.isInRange(e.y,r)}return Ft.isInRange(e.x,[0,this.basicImgInfo.width])&&Ft.isInRange(e.y,[0,this.basicImgInfo.height])}},{key:"isInBasicPolygon",value:function(e){var t,n;return Pt.isInPolygon(e,(null==(t=this.basicResult)?void 0:t.pointList)||[],null==(n=this.dependToolConfig)?void 0:n.lineType)}}]),e}(),xt=Object.defineProperty,Ct=Object.getOwnPropertySymbols,wt=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,It=function(e,t,n){return t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Lt=function(e,t){for(var n in t||(t={}))wt.call(t,n)&&It(e,n,t[n]);if(Ct){var i,a=Object(p.a)(Ct(t));try{for(a.s();!(i=a.n()).done;){n=i.value;kt.call(t,n)&&It(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Pt=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getHoverPolygonID",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B.Line,r="",o=1/0,c=mt.axisArea(e,i);return t.forEach((function(e){e.pointList&&c.forEach((function(t){var i=n.calcPolygonSize(e.pointList);n.isInPolygon(t,e.pointList,a)&&i<o&&(r=e.id,o=i)}))})),r}},{key:"calcPolygonSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((null==e?void 0:e.length)<=2)return 0;var t=e.length,n=e.reduce((function(e,n,i,a){var r=a[(i+1)%t];return e+n.x*r.y-r.x*n.y}),0);return Math.abs(n)/2}},{key:"isInPolygon",value:function(e,t){var n,i,a,r,o,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.Line,u=0;t=Object(l.a)(t),c===B.Curve&&(t=this.createSmoothCurvePoints(t.reduce((function(e,t){return[].concat(Object(l.a)(e),[t.x,t.y])}),[]),.5,!0,20)),n=t,r=Object(s.a)(n,1)[0];var d=t.length;for(i=1;i<=d;i++)o=t[i%d],e.x>Math.min(r.x,o.x)&&e.x<=Math.max(r.x,o.x)&&e.y<=Math.max(r.y,o.y)&&r.x!==o.x&&(a=(e.x-r.x)*(o.y-r.y)/(o.x-r.x)+r.y,(r.y===o.y||e.y<=a)&&u++),r=o;return u%2!=0}},{key:"createSmoothCurvePointsFromPointList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;return this.createSmoothCurvePoints(e.reduce((function(e,t){return[].concat(Object(l.a)(e),[t.x,t.y])}),[]),.5,!1,t).map((function(t,n){var i,a=n/(ae+1),r=Math.floor(a),o=null!=(i=e[r])?i:{};return Lt(r===a?Lt({},o):{specialEdge:o.specialEdge},t)}))}},{key:"createSmoothCurvePoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ae;if(e.length<4)return e;var a,r,o,c,l,s,u,d,h,f,g,v,b,p=[],m=e.slice(0);for(n?(m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.unshift(e[e.length-1]),m.unshift(e[e.length-2]),m.push(e[0]),m.push(e[1])):(m.unshift(e[1]),m.unshift(e[0]),m.push(e[e.length-2]),m.push(e[e.length-1])),b=2;b<m.length-4;b+=2)for(o=(m[b+2]-m[b-2])*t,c=(m[b+4]-m[b-0])*t,l=(m[b+3]-m[b-1])*t,s=(m[b+5]-m[b+1])*t,v=0;v<=i;v++)g=v/i,u=2*Math.pow(g,3)-3*Math.pow(g,2)+1,d=-2*Math.pow(g,3)+3*Math.pow(g,2),h=Math.pow(g,3)-2*Math.pow(g,2)+g,f=Math.pow(g,3)-Math.pow(g,2),a=u*m[b]+d*m[b+2]+h*o+f*c,r=u*m[b+1]+d*m[b+3]+h*l+f*s,p.push(a),p.push(r);for(var y=[],x=0;x<p.length-1;x+=2)y.push({x:p[x],y:p[x+1]});if(n)for(var C=0;C<i+1;C++){var w=y.shift();y.push(w)}return y}},{key:"getPolygonByID",value:function(e,t){return e.find((function(e){return e.id===t}))}},{key:"getPolygonByIDs",value:function(e,t){if(t&&(null==t?void 0:t.length)>0)return e.filter((function(e){return t.includes(e.id)}))}},{key:"getHoverEdgeIndex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.Line,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=Object(l.a)(t);n===B.Curve?a=this.createSmoothCurvePoints(t.reduce((function(e,t){return[].concat(Object(l.a)(e),[t.x,t.y])}),[]),.5,!0,ae):n===B.Line&&a.push(a[0]);for(var r=-1,o=i,c=0;c<a.length-1;c++){var s=Ft.getFootOfPerpendicular(e,a[c],a[c+1]),u=s.length;u<o&&(r=c,o=u)}return-1===r?-1:n===B.Curve?Math.floor(r/ae):r}},{key:"getClosestPoint",value:function(e,t){var n,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.Line,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=arguments.length>4?arguments[4]:void 0,c=!1,s=null==(n=null==o?void 0:o.isClose)||n,u="",d=-1,h=1/0,f=e,g=20,v=!1;return t.forEach((function(t){if(!v&&t.pointList)switch(a){case B.Line:Ye.findAllLine(t.pointList,s).forEach((function(n,i){if(!v){var a=Ft.getFootOfPerpendicular(e,n.point1,n.point2),o=a.length,l=a.footPoint,s=Ft.getLineLength(n.point1,e),g=Ft.getLineLength(n.point2,e);s<2*r&&(l=n.point1,o=s,v=!0),g<2*r&&(l=n.point2,o=g,v=!0),o<h&&o<r&&(u=t.id,d=i,h=o,f=l,c=!0)}}));break;case B.Curve:for(var n=i.createSmoothCurvePoints(t.pointList.reduce((function(e,t){return[].concat(Object(l.a)(e),[t.x,t.y])}),[]),.5,s,g),o=0;o<n.length-1;o++){var b=Ft.getFootOfPerpendicular(e,n[o],n[o+1]),p=b.length,m=b.footPoint;p<h&&p<r&&(u=t.id,d=Math.floor(o/(g+1)),h=p,f=m,c=!0)}}})),{dropFoot:f,closestEdgeIndex:d,closestPolygonID:u,hasClosed:c}}},{key:"isPointListInPolygon",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.Line;return e.every((function(e){return n.isInPolygon(e,t,i)}))}},{key:"isPointListOutSidePolygon",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.Line;return e.some((function(e){return!n.isInPolygon(e,t,i)}))}},{key:"getPolygonArea",value:function(e){for(var t=0,n=0,i=e.length;n<i;n++){t+=e[n].x*e[n===e.length-1?0:n+1].y*.5,t-=e[n===e.length-1?0:n+1].x*e[n].y*.5}return Math.abs(t)}},{key:"updatePolygonByRotate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,i=1;return e===De.Anticlockwise&&(i=-1),i*=t,Ft.rotateRectPointList(i,n)}},{key:"deletePolygonLastPoint",value:function(e,t,n,i){return n===i.length-1?e:[].concat(Object(l.a)(e),[{x:t[0],y:t[1]}])}},{key:"concatBeginAndEnd",value:function(e){return e.length<1?e:[].concat(Object(l.a)(e),[e[0]])}},{key:"segmentPolygonByPolygon",value:function(t,n){var i,a;try{var r=Object(Ce.polygon)([Object(l.a)(e.concatBeginAndEnd(t.map((function(e){return[e.x,e.y]}))))]);return n.forEach((function(t){var n=Object(Ce.polygon)([Object(l.a)(e.concatBeginAndEnd(t.pointList.map((function(e){return[e.x,e.y]}))))]),i=Object(Ce.difference)(r,n);i&&(r=i)})),(null!=(a=null==(i=null==r?void 0:r.geometry)?void 0:i.coordinates.map((function(t){var n;return"MultiPolygon"===(null==(n=null==r?void 0:r.geometry)?void 0:n.type)?t[0].reduce(e.deletePolygonLastPoint,[]):t.reduce(e.deletePolygonLastPoint,[])})))?a:[]).reduce((function(e,t){var n=t.length,i=t.filter((function(e,i){var a=(i+1)%n;return!mt.getIsInScope(e,t[a],1)}));return i.length<3?e:[].concat(Object(l.a)(e),[i])}),[])}catch(r){console.error(r)}}},{key:"getPolygonPointList",value:function(e,t){var n=t.find((function(t){return t.id===e}));return n&&n.pointList&&n.pointList.length>0?n.pointList:[]}},{key:"getWrapPolygonIndex",value:function(t,n){return n.findIndex((function(n){return e.isPointListInPolygon(t,n.pointList)}))}},{key:"clipPolygonFromWrapPolygon",value:function(t,n){var i=e.isPolygonClosewise(n),a=e.isPolygonClosewise(t),r=e.getClosePointDistanceFromPolygon(t[0],n),o=n[r],c=[].concat(Object(l.a)(n.slice(0,r)),[o],Object(l.a)(t),[t[0]],Object(l.a)(n.slice(r,n.length)));return i===a&&(c=[].concat(Object(l.a)(n.slice(0,r)),[o,t[0]],Object(l.a)(t.reverse()),Object(l.a)(n.slice(r,n.length)))),c}},{key:"isPolygonClosewise",value:function(e){var t,n,i,a,r=e.length,o=0;if(r<3)return 0;for(t=0;t<r;t++)i=(t+2)%r,a=(e[n=(t+1)%r].x-e[t].x)*(e[i].y-e[n].y),(a-=(e[n].y-e[t].y)*(e[i].x-e[n].x))<0?o--:a>0&&o++;return o>0?1:o<0?-1:0}},{key:"getClosePointDistanceFromPolygon",value:function(e,t){var n=Number.MAX_SAFE_INTEGER,i=-1;return t.forEach((function(t,a){var r=lt.calcDistance(e,t);r<n&&(n=r,i=a)})),i}},{key:"combinePolygonWithPolygon",value:function(t,n){var i,a;try{var r=Object(Ce.polygon)([Object(l.a)(e.concatBeginAndEnd(t.pointList.map((function(e){return[e.x,e.y]}))))]),o=Object(Ce.polygon)([Object(l.a)(e.concatBeginAndEnd(n.pointList.map((function(e){return[e.x,e.y]}))))]),c=Object(Ce.union)(r,o),s=[],u=t;if(1===(null==(a=null==(i=null==c?void 0:c.geometry)?void 0:i.coordinates)?void 0:a.length)){s.push(n.id);var d=null==c?void 0:c.geometry.coordinates.map((function(t){var n;return"MultiPolygon"===(null==(n=null==c?void 0:c.geometry)?void 0:n.type)?t[0].reduce(e.deletePolygonLastPoint,[]):t.reduce(e.deletePolygonLastPoint,[])}))[0];u.pointList=d}return{newPolygon:u,unionList:s}}catch(r){console.error(r)}}}]),e}(),Ot=Math.pow,St=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"add",value:function(e,t){return{x:e.x+t.x,y:e.y+t.y}}},{key:"getVector",value:function(e,t){return{x:t.x-e.x,y:t.y-e.y}}},{key:"len",value:function(e){return Math.sqrt(Ot(e.x,2)+Ot(e.y,2))}},{key:"dotProduct",value:function(e,t){return e.x*t.x+e.y+t.y}}]),e}(),Tt=Object.defineProperty,At=Object.defineProperties,Et=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,Rt=function(e,t,n){return t in e?Tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},jt=function(e,t){for(var n in t||(t={}))Mt.call(t,n)&&Rt(e,n,t[n]);if(Dt){var i,a=Object(p.a)(Dt(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Nt.call(t,n)&&Rt(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},_t=function(e,t){return At(e,Et(t))},Bt=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"tanAPlusB",value:function(e,t){return(e+t)/(1-e*t)}},{key:"sinAPlusB",value:function(e,t,n,i){return i*e+t*n}},{key:"cosAPlusB",value:function(e,t,n,i){return t*i-e*n}}]),e}(),Ht=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getRotate",value:function(e){return e+90>=360?e+90-360:e+90}},{key:"getLineLength",value:function(e,t){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}},{key:"getTextArea",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:q,a=arguments.length>4?arguments[4]:void 0;if("string"!=typeof t)return{width:0,height:0};var r=e.getContext("2d");r.font=i;var o=0;"undefined"==typeof a&&(a=e&&parseInt(window.getComputedStyle(e).lineHeight,10)||parseInt(window.getComputedStyle(document.body).lineHeight,10));for(var c=e&&parseInt(window.getComputedStyle(e).fontSize,10)||parseInt(window.getComputedStyle(document.body).fontSize,10)||0,l=t.split("\n"),s=0,u=0;u<l.length;u++){for(var d=l[u].split(""),h="",f=0;f<d.length;f++){var g=h+d[f],v=r.measureText(g).width;v>n&&f>0?(h=d[f],o+=a,s=n):(h=g,v>s&&(s=v))}u!==l.length-1&&(o+=a)}return{width:s,height:o+c,lineHeight:a,fontHeight:c}}},{key:"getLineCenterPoint",value:function(e){var t=Object(s.a)(e,2),n=t[0],i=t[1],a=St.getVector(n,i);return{x:n.x+a.x/2,y:n.y+a.y/2}}},{key:"getPerpendicularLine",value:function(e){if(2===e.length){var t=Object(s.a)(e,2),n=t[0],i=t[1];return[i,{x:i.x+i.y-n.y,y:i.y-(i.x-n.x)}]}}},{key:"getPerpendicularFootOfLine",value:function(e,t){if(2!==e.length)return e;var n=this.getPerpendicularLine(e);if(!n)return e;var i=Object(s.a)(n,2),a=i[0],r=i[1];return this.getFootOfPerpendicular(t,a,r).footPoint}},{key:"getQuadrangleFromTriangle",value:function(e){if(3!==e.length)return e;var t=Object(s.a)(e,3),n=t[0],i=t[1],a=t[2];return[n,i,a,{x:a.x+n.x-i.x,y:a.y+n.y-i.y}]}},{key:"getRectPerpendicularOffset",value:function(e,t,n){var i=Object(s.a)(n,2),a=i[0],r=i[1],o=this.getFootOfPerpendicular(e,a,r).footPoint,c=this.getFootOfPerpendicular(t,a,r).footPoint,l={x:o.x-c.x,y:o.y-c.y},u=St.add(t,l);return St.getVector(e,u)}},{key:"getArrayIndex",value:function(e,t){return e<0?t+e:e>=t?e-t:e}},{key:"getPointListFromPointOffset",value:function(e,t,n){var i=this.getArrayIndex(t-1,e.length),a=this.getArrayIndex(t+1,e.length),r=this.getArrayIndex(t-2,e.length),o=Object(l.a)(e);o[t]=St.add(o[t],n);var c=this.getFootOfPerpendicular(o[t],o[r],o[i]).footPoint,s=this.getFootOfPerpendicular(o[t],o[a],o[r]).footPoint;return o[i]=c,o[a]=s,o}},{key:"getRectCenterPoint",value:function(e){var t=Object(s.a)(e,3),n=t[0],i=t[2];return{x:(n.x+i.x)/2,y:(n.y+i.y)/2}}},{key:"rotateRectPointList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1?arguments[1]:void 0,n=this.getRectCenterPoint(t),i=Math.PI,a=Math.sin(e*i/180),r=Math.cos(e*i/180);return t.map((function(e){var t=St.getVector(n,e),i=St.len(t),o=t.y/i,c=t.x/i;return{x:i*Bt.cosAPlusB(o,c,a,r)+n.x,y:i*Bt.sinAPlusB(o,c,a,r)+n.y}}))}},{key:"getRectangleByRightAngle",value:function(t,n){if(2!==n.length)return n;var i=e.getPerpendicularFootOfLine(n,t);return e.getQuadrangleFromTriangle([].concat(Object(l.a)(n),[i]))}},{key:"getRadiusFromQuadrangle",value:function(e){var t=Object(s.a)(e,3),n=t[1],i=t[2],a=i.y-n.y,r=n.x-i.x,o=a/this.getLineLength(n,i),c=Math.acos(o);return r>0?2*Math.PI-c:c}},{key:"getCollectionPointByAnnotationDataPromise",value:function(e){var t=e.filter((function(e){return"point"===e.type})).map((function(e){return e.annotation})),n=e.filter((function(e){return!!["polygon","line"].includes(e.type)})).map((function(e){return"polygon"===e.type?_t(jt({},e.annotation),{pointList:Pt.concatBeginAndEnd(e.annotation.pointList)}):e.annotation})),i=new A;return{promise:new Promise((function(e){i.postMessage({points:t,backgroundList:n}),i.onmessage=function(t){e(t.data),i.terminate()}})),close:function(){i.terminate()}}}},{key:"getCollectionPointByAnnotationData",value:function(e){var t=[],n=new Set,i=e.filter((function(e){return"point"===e.type})).map((function(e){return e.annotation})),a=e.filter((function(e){return!!["polygon","line"].includes(e.type)})).map((function(e){return"polygon"===e.type?_t(jt({},e.annotation),{pointList:Pt.concatBeginAndEnd(e.annotation.pointList)}):e.annotation})),r=function(e,i){var a=Pt.getClosestPoint(e,i,B.Line,1,{isClose:!1}).dropFoot;if(a!==e){var r="".concat(a.x," + ").concat(a.y);n.has(r)||t.push(e),n.add(r)}};return i.forEach((function(e){r(e,a)})),a.forEach((function(e){var t;t=e.id,a.forEach((function(e,n){if(e.id!==t){var i=Object(l.a)(a);i.splice(n,1),e.pointList.forEach((function(e){r(e,i)}))}}))})),{connectionPoints:t}}}]),e}(),Vt=Ht;Vt.isInRange=function(e,t){var n=Math.min.apply(Math,Object(l.a)(t)),i=Math.max.apply(Math,Object(l.a)(t));return(Array.isArray(e)?e:[e]).every((function(e){return function(e){return e<=i&&e>=n}(e)}))},Vt.withinRange=function(e,t){var n=Math.min.apply(Math,Object(l.a)(t)),i=Math.max.apply(Math,Object(l.a)(t));return e>i?i:e<n?n:e},Vt.calcViewportBoundaries=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return{top:0,bottom:0,left:0,right:0};var a=20/i,r=[],o=[],c=e;t&&(c=be(e,n)),c.forEach((function(e){var t=e.x,n=e.y;r.push(t),o.push(n)}));var l=Math.min.apply(Math,r),s=Math.max.apply(Math,r),u=Math.min.apply(Math,o),d=Math.max.apply(Math,o),h=s-l,f=d-u;if(h<a){var g=(a-h)/2;l-=g,s+=g}if(f<a){var v=(a-f)/2;u-=v,d+=v}return{top:u,bottom:d,left:l,right:s}},Vt.getFootOfPerpendicular=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:0,y:0},r=t.x-n.x,o=t.y-n.y;if(Math.abs(r)<1e-8&&Math.abs(o)<1e-8)return a=t;var c=(e.x-t.x)*(t.x-n.x)+(e.y-t.y)*(t.y-n.y);c/=r*r+o*o,a.x=t.x+c*r,a.y=t.y+c*o;var l=Ht.getLineLength(e,a),s=2,u=Math.min(t.x,n.x),d=Math.max(t.x,n.x),h=Math.min(t.y,n.y),f=Math.max(t.y,n.y),g=!(Ht.isInRange(e.x,[u,d])||Ht.isInRange(e.y,[h,f])),v=e.x>d+s||e.x<u-s||e.y>f+s||e.y<h-s;return(i?g:v)?{footPoint:a,length:1/0}:{footPoint:a,length:l}};var Zt,Ft=Vt,zt=Object.defineProperty,Ut=Object.defineProperties,Gt=Object.getOwnPropertyDescriptors,Wt=Object.getOwnPropertySymbols,Kt=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable,Xt=function(e,t,n){return t in e?zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Jt=function(e,t){for(var n in t||(t={}))Kt.call(t,n)&&Xt(e,n,t[n]);if(Wt){var i,a=Object(p.a)(Wt(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Yt.call(t,n)&&Xt(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Qt=function(e,t){return Ut(e,Gt(t))},qt=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"composeResult",value:function(e,t,n,i,a){try{var r=JSON.parse(e),o=Ye.getCurrentStepInfo(t,i),c=o.dataSourceStep,l="step_".concat(o.step);if(Object.assign(r,a),r[l]){var s=r[l];return s.result?(s.result=n,JSON.stringify(r)):JSON.stringify(Qt(Jt({},r),Object(E.a)({},l,Qt(Jt({},r[l]),{result:n}))))}return JSON.stringify(Qt(Jt({},r),Object(E.a)({},l,{dataSourceStep:c,toolName:o.tool,result:n})))}catch(r){return e}}},{key:"changeCoordinateByRotate",value:function(e,t,n){var i=e.x,a=e.y,r=e.width,o=e.height,c=mt.changeCoordinateByRotate({x:i,y:a},t,n);switch(t%360){case 90:return Qt(Jt({},e),{x:c.x-o,y:c.y,width:o,height:r});case 180:return Qt(Jt({},e),{x:c.x-r,y:c.y-o});case 270:return Qt(Jt({},e),{x:c.x,y:c.y-r,width:o,height:r});default:return e}}},{key:"translateRect2Points",value:function(e){var t=e.x,n=e.y,i=e.width,a=e.height;return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+a},{x:t,y:n+a}]}},{key:"translatePoints2Rect",value:function(e,t){if(4===e.length){var n=e[0],i=n.x,a=n.y,r=e[1].x-e[0].x,o=e[2].y-e[1].y;return Qt(Jt({},t),{x:i,y:a,width:r,height:o})}}},{key:"getRectPointList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[{x:e.x*t,y:e.y*t},{x:(e.x+e.width)*t,y:e.y*t},{x:(e.x+e.width)*t,y:(e.y+e.height)*t},{x:e.x*t,y:(e.y+e.height)*t}]}},{key:"getRectEdgeList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getRectPointList(e,t),i=n.length;return n.map((function(e,t){return{begin:e,end:n[(t+1)%i]}}))}},{key:"isInRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return e.x>=t.x*i-n&&e.x<=(t.x+t.width)*i+n&&e.y>=t.y*i-n&&e.y<=(t.y+t.height)*i+n}},{key:"getRectUnderZoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.x,i=e.y,a=e.width,r=e.height;return Qt(Jt({},e),{x:n*t,y:i*t,width:a*t,height:r*t})}},{key:"isRectNotInPolygon",value:function(e,t){return this.getRectPointList(e).some((function(e){return!pe(e,t)}))}}]),e}();!function(e){e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.L=76]="L",e[e.R=82]="R",e[e.Z=90]="Z",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.S=83]="S",e[e.Q=81]="Q",e[e.Delete=46]="Delete",e[e.F11=122]="F11",e[e.Space=32]="Space",e[e.Esc=27]="Esc",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Enter=13]="Enter",e[e.Ctrl=17]="Ctrl",e[e.Alt=18]="Alt",e[e.Shift=16]="Shift",e[e.Tab=9]="Tab",e[e.BackSpace=8]="BackSpace"}(Zt||(Zt={}));var $t,en,tn,nn=Zt;(en=$t||($t={})).NoRotateNotice="noRotateNotice",en.RectErrorSizeNotice="rectErrorSizeNotice",en.TextCheckNumberErrorNotice="textCheckNumberErrorNotice",en.TextCheckEnglishErrorNotice="textCheckEnglishErrorNotice",en.TextCheckCustomErrorNotice="textCheckCustomErrorNotice",en.UpperLimitErrorNotice="UpperLimitErrorNotice",en.LowerLimitErrorNotice="LowerLimitErrorNotice",en.InvalidImage="InvalidImage",en.DisableDelete="DisableDelete",en.ClearPartialData="ClearPartialData",en.MarkerFinish="MarkerFinish",en.LowerLimitPoint="LowerLimitPoint",en.NoRotateInDependence="noRotateInDependence",en.UnableToReannotation="unableToReannotation",en.ForbiddenCreationOutsideBoundary="ForbiddenCreationOutsideBoundary",en.SuccessfulEdgeAdsorption="SuccessfulEdgeAdsorption",en.ForbidAddNewPoint="ForbidAddNewPoint";var an,rn=(tn={},Object(E.a)(tn,$t.NoRotateNotice,"This Image contains data and cannot be rotated"),Object(E.a)(tn,$t.RectErrorSizeNotice,"The drawing frame size is smaller than the minimum drawing size"),Object(E.a)(tn,$t.TextCheckNumberErrorNotice,"Please enter in number-only format"),Object(E.a)(tn,$t.TextCheckEnglishErrorNotice,"Please enter in English only format"),Object(E.a)(tn,$t.TextCheckCustomErrorNotice,"Please enter in the required format"),Object(E.a)(tn,$t.UpperLimitErrorNotice,"The number of vertices is not more than"),Object(E.a)(tn,$t.LowerLimitErrorNotice,"The number of vertices is not less than"),Object(E.a)(tn,$t.InvalidImage,"Invalid image, please skip this image"),Object(E.a)(tn,$t.DisableDelete,"Disable delete"),Object(E.a)(tn,$t.ClearPartialData,"Clear partial data"),Object(E.a)(tn,$t.MarkerFinish,"ListAnnotation is finished"),Object(E.a)(tn,$t.LowerLimitPoint,"The maximum number of points has been reached"),Object(E.a)(tn,$t.NoRotateInDependence,"Disallow rotation in dependent cases"),Object(E.a)(tn,$t.UnableToReannotation,"Unabled to reannotation"),Object(E.a)(tn,$t.ForbiddenCreationOutsideBoundary,"Fobid creation outside boundary"),Object(E.a)(tn,$t.SuccessfulEdgeAdsorption,"Successful edge adsorption"),Object(E.a)(tn,$t.ForbidAddNewPoint,"Forbid to add new point in rect-polygon"),tn),on=(an={},Object(E.a)(an,$t.NoRotateNotice,"\u672c\u56fe\u542b\u6709\u6570\u636e\uff0c\u65e0\u6cd5\u8fdb\u884c\u65cb\u8f6c"),Object(E.a)(an,$t.RectErrorSizeNotice,"\u7ed8\u5236\u6846\u5c3a\u5bf8\u5c0f\u4e8e\u6700\u5c0f\u7ed8\u5236\u5c3a\u5bf8"),Object(E.a)(an,$t.TextCheckNumberErrorNotice,"\u8bf7\u6309\u4ec5\u6570\u5b57\u7684\u683c\u5f0f\u8f93\u5165"),Object(E.a)(an,$t.TextCheckEnglishErrorNotice,"\u8bf7\u6309\u4ec5\u82f1\u6587\u7684\u683c\u5f0f\u8f93\u5165"),Object(E.a)(an,$t.TextCheckCustomErrorNotice,"\u8bf7\u6309\u8981\u6c42\u7684\u683c\u5f0f\u8f93\u5165"),Object(E.a)(an,$t.UpperLimitErrorNotice,"\u9876\u70b9\u6570\u4e0d\u591a\u4e8e"),Object(E.a)(an,$t.LowerLimitErrorNotice,"\u9876\u70b9\u6570\u4e0d\u5c11\u4e8e"),Object(E.a)(an,$t.InvalidImage,"\u65e0\u6548\u56fe\u7247\uff0c\u8bf7\u8df3\u8fc7\u6b64\u56fe"),Object(E.a)(an,$t.DisableDelete,"\u8be5\u6570\u636e\u7981\u6b62\u5220\u9664"),Object(E.a)(an,$t.ClearPartialData,"\u5b58\u5728\u90e8\u5206\u6570\u636e\u65e0\u6cd5\u6e05\u9664"),Object(E.a)(an,$t.MarkerFinish,"\u5217\u8868\u6807\u6ce8\u5df2\u5b8c\u6210"),Object(E.a)(an,$t.LowerLimitPoint,"\u5df2\u5230\u8fbe\u6807\u70b9\u6570\u91cf\u4e0a\u9650"),Object(E.a)(an,$t.NoRotateInDependence,"\u4f9d\u8d56\u60c5\u51b5\u4e0b\u65e0\u6cd5\u8fdb\u884c\u65cb\u8f6c"),Object(E.a)(an,$t.UnableToReannotation,"\u65e0\u6cd5\u8fdb\u884c\u7eed\u6807\u64cd\u4f5c"),Object(E.a)(an,$t.ForbiddenCreationOutsideBoundary,"\u8fb9\u754c\u5916\u7981\u6b62\u521b\u5efa"),Object(E.a)(an,$t.SuccessfulEdgeAdsorption,"\u8fb9\u7f18\u5438\u9644\u6210\u529f"),Object(E.a)(an,$t.ForbidAddNewPoint,"\u6846\u4f53\u65e0\u6cd5\u6dfb\u52a0\u70b9"),an),cn=Object(d.a)((function e(){Object(u.a)(this,e)}));cn.getMessagesByLocale=function(e,t){switch(t){case Ee.US:return rn[e];case Ee.Zh:default:return on[e]}};var ln,sn='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ccc"/></g></g></svg>',un='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#f33"/></g></g></svg>',dn=sn,hn=61,fn=80,gn=62,vn=20,bn=55,pn=55,mn=40,yn=80,xn=240,Cn=320,wn="rgba(102, 111, 255, 1)",kn=["rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"],In=[sn,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#800cf9"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#01ff30"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ff88f7"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ffe232"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#994217"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#0282fa"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#ff2323"/></g></g></svg>','<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#00ffea"/></g></g></svg>'],Ln={1:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#1f0bf9"/></g></g></svg>',3:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#3fe"/></g></g></svg>',5:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#33fe33"/></g></g></svg>',7:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#fdff37"/></g></g></svg>',9:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="a"><path d="M0,0H16V-16H0Z" fill="none"/></clipPath><clipPath id="b"><path d="M13.75-2.937H2.25a.5.5,0,0,0-.5.5v.563a.125.125,0,0,0,.125.125h12.25a.125.125,0,0,0,.125-.125v-.562A.5.5,0,0,0,13.75-2.937ZM4.027-4.25a.632.632,0,0,0,.094-.008l2.628-.461a.153.153,0,0,0,.083-.044l6.623-6.623a.156.156,0,0,0,0-.22l-2.6-2.6a.155.155,0,0,0-.111-.045.155.155,0,0,0-.111.045L4.012-7.581a.159.159,0,0,0-.044.083L3.508-4.87a.524.524,0,0,0,.147.466.529.529,0,0,0,.372.155Z" fill="none"/></clipPath></defs><g transform="translate(0 16)"><g clip-path="url(#a)"><path d="M-5-21H21V5H-5Z" fill="rgba(0,0,0,0)"/></g><g clip-path="url(#b)"><path d="M-3.25-19.25h22.5V3.25H-3.25Z" fill="#f70efa"/></g></g></svg>'},Pn="rgba(255, 51, 51, 1)",On={r:255,g:51,b:51,a:1},Sn="rgba(204, 204, 204, 1)",Tn=(ln={},Object(E.a)(ln,N.lc,"rgba(153, 51, 255, 1)"),Object(E.a)(ln,N.rc,"rgba(51, 153, 255, 1)"),Object(E.a)(ln,N.clc,"rgba(46, 230, 46, 1)"),Object(E.a)(ln,N.crc,"rgba(255, 51, 51, 1)"),ln),An='{"color":1,"width":2,"borderOpacity":9,"fillOpacity":9,"toolColor":{"1":{"valid":{"stroke":"rgba(0,0,255,0.50)","fill":"rgba(0,0,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(0,15,255,1.00)","fill":"rgba(0,15,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(0,15,255,0.80)","fill":"rgba(0,15,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"3":{"valid":{"stroke":"rgba(0,255,255,0.50)","fill":"rgba(0,255,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(0,212,255,1.00)","fill":"rgba(0,212,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(0,212,255,0.80)","fill":"rgba(0,212,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"5":{"valid":{"stroke":"rgba(0,255,0,0.50)","fill":"rgba(0,255,0,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(149,255,1.00)","fill":"rgba(149,255,0,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(149,255,0,0.80)","fill":"rgba(149,255,0,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"7":{"valid":{"stroke":"rgba(255,255,0,0.50)","fill":"rgba(255,255,0,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(255,230,102,1.00)","fill":"rgba(255,213,0,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(255,230,102,0.80)","fill":"rgba(255,230,102,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"9":{"valid":{"stroke":"rgba(255,0,255,0.50)","fill":"rgba(255,0,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(230,102,255,1.00)","fill":"rgba(213,0,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(230,102,255,0.80)","fill":"rgba(230,102,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}}},"attributeColor":[{"valid":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}}],"lineColor":{"1":"rgba(102, 111, 255, 1 )","3":"rgba(102, 230, 255, 1)","5":"rgba(191, 255, 102, 1)","7":"rgba(255, 230, 102, 1)","9":"rgba(230, 102, 255, 1)"},"attributeLineColor":["rgba(204, 204, 204, 1)","rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"]}',En=Object.defineProperty,Dn=Object.defineProperties,Mn=Object.getOwnPropertyDescriptors,Nn=Object.getOwnPropertySymbols,Rn=Object.prototype.hasOwnProperty,jn=Object.prototype.propertyIsEnumerable,_n=function(e,t,n){return t in e?En(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Bn=function(e,t){for(var n in t||(t={}))Rn.call(t,n)&&_n(e,n,t[n]);if(Nn){var i,a=Object(p.a)(Nn(t));try{for(a.s();!(i=a.n()).done;){n=i.value;jn.call(t,n)&&_n(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Hn=function(e,t){return Dn(e,Mn(t))},Vn=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getAttributeIcon",value:function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.findIndex((function(t){return t.value===e})),r=null!=(n=In[a%In.length])?n:dn;i||(r=un),r="";var o=new Image;return o.src=r,o}},{key:"checkString",value:function(e,t){var n="";switch(e){case G.Order:case G.NumberOnly:n="^[0-9]+$";break;case G.EnglishOnly:n="^[A-Za-z]+$";break;case G.CustomFormat:n=t}return n}},{key:"checkTextAttibute",value:function(e,t){if(void 0===e||""===e)return!0;try{return new RegExp(t).test(e)}catch(n){return!1}}},{key:"getAttributeShowText",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{var a=i.findIndex((function(t){return t.value===e}));return null!=(n=null==(t=i[a])?void 0:t.key)?n:e}catch(a){return e}}},{key:"getAttributeIndex",value:function(e,t){try{var n=t.findIndex((function(t){return t.value===e}));return n>=8?n%8:n}catch(n){return-1}}},{key:"getAttributeColor",value:function(e,t){try{var n=this.getAttributeIndex(e,t);return-1===n?Sn:kn[n%kn.length]}catch(n){return Sn}}},{key:"getTextAttribute",value:function(e,t){try{if(t===G.Order){var n=e.map((function(e){return parseInt(e.textAttribute,10)})).filter((function(e){return Object(_e.isNumber)(e)&&e<Number.MAX_SAFE_INTEGER&&e>=0}));return n.sort((function(e,t){return e-t})),"".concat((n.pop()||0)+1)}return""}catch(n){return""}}},{key:"textChange",value:function(e,t,n){return n.map((function(n){return n.id===t?Hn(Bn({},n),{textAttribute:e}):n}))}},{key:"getErrorNotice",value:function(e,t){switch(e){case G.Order:case G.NumberOnly:return cn.getMessagesByLocale($t.TextCheckNumberErrorNotice,t);case G.EnglishOnly:return cn.getMessagesByLocale($t.TextCheckEnglishErrorNotice,t);case G.CustomFormat:return cn.getMessagesByLocale($t.TextCheckCustomErrorNotice,t);default:return""}}},{key:"textAttributeValidate",value:function(e,t,n){try{return new RegExp(this.checkString(e,t)).test(n)}catch(xe){}}},{key:"checkTextAttribute",value:function(e,t,n,i){var a=this,r=!1;return n.forEach((function(n){void 0===(null==n?void 0:n.textAttribute)||""===(null==n?void 0:n.textAttribute)||(!i||n.id===i)&&!a.textAttributeValidate(e,t,n.textAttribute)&&(r=!0)})),!!r}},{key:"changeTextAttributeInLog",value:function(e,t){return null==e?void 0:e.map((function(e){return null==e?void 0:e.map((function(e){if((null==t?void 0:t.findIndex((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)})))>-1){var n=null==t?void 0:t.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}));return Hn(Bn({},e),{textAttribute:null==n?void 0:n.textAttribute})}return e}))}))}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;if(!0===n){var a=(null==t?void 0:t.findIndex((function(t){return(null==t?void 0:t.value)===e})))%kn.length+1;return In[a]}return i}},{key:"getAttributeByKeycode",value:function(e,t){var n,i;return Ft.isInRange(e,[48,57])&&(i=e-48),Ft.isInRange(e,[96,105])&&(i=e-96),0===i?"":i?null==(n=t[i-1])?void 0:n.value:void 0}}]),e}(),Zn=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getMousePositionOnCanvasFromEvent",value:function(e,t){if(t&&e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}return null}},{key:"getClientRect",value:function(e){if(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,width:t.width,height:t.height}}return null}},{key:"getSize",value:function(e){if(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height}}return null}},{key:"inViewPort",value:function(e,t){return!!e&&(Ft.isInRange(e.x,[t.left,t.right])&&Ft.isInRange(e.y,[t.top,t.bottom]))}}]),e}();Zn.getViewPort=function(e,t,n){var i=e.width,a=e.height,r=t.x,o=(0-t.y)/n,c=(0-r)/n;return{top:o,bottom:o+a/n,left:c,right:c+i/n}},Zn.getPixelRatio=function(e){if(!e||!window)return 1;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t};var Fn=n(178),zn=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"deg2rad",value:function(e){return e*Math.PI/180}},{key:"rad2deg",value:function(e){return 180*e/Math.PI}}]),e}(),Un=Object.defineProperty,Gn=Object.defineProperties,Wn=Object.getOwnPropertyDescriptors,Kn=Object.getOwnPropertySymbols,Yn=Object.prototype.hasOwnProperty,Xn=Object.prototype.propertyIsEnumerable,Jn=function(e,t,n){return t in e?Un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Qn=function(e,t){for(var n in t||(t={}))Yn.call(t,n)&&Jn(e,n,t[n]);if(Kn){var i,a=Object(p.a)(Kn(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Xn.call(t,n)&&Jn(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},qn=function(e,t){return Gn(e,Wn(t))},$n={x:0,y:0},ei="",ti=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"drawLine",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.getContext("2d"),r=i.color,o=void 0===r?ei:r,c=i.thickness,l=void 0===c?1:c,s=i.lineCap,u=void 0===s?"round":s,d=i.lineDash;a.save(),a.strokeStyle=o,a.lineWidth=l,a.lineCap=u,d&&a.setLineDash(d),a.beginPath(),a.moveTo(t.x,t.y),a.lineTo(n.x+1,n.y+1),a.stroke(),a.restore()}},{key:"drawRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.getContext("2d"),a=n.color,r=void 0===a?ei:a,o=n.thickness,c=void 0===o?1:o,l=n.lineCap,s=void 0===l?"round":l,u=n.hiddenText,d=void 0!==u&&u,h=n.lineDash;if(i.save(),i.strokeStyle=r,i.lineWidth=c,i.lineCap=s,Array.isArray(h)&&i.setLineDash(h),i.fillStyle=r,i.strokeRect(t.x,t.y,t.width,t.height),!1===d){var f="";if(t.attribute&&(f="".concat(f,"  ").concat(t.attribute)),this.drawText(e,{x:t.x,y:t.y-5},f),t.textAttribute){var g=7*"".concat(~~t.width," * ").concat(~~t.height).length,v=0,b=Math.max(20,t.width-g);this.drawText(e,{x:t.x,y:t.y+t.height+20+v},t.textAttribute,{textMaxWidth:b})}}i.restore()}},{key:"drawRectWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.getContext("2d"),a=n.color,r=void 0===a?ei:a;i.save(),i.fillStyle=r,i.fillRect(t.x,t.y,t.width,t.height),i.restore()}},{key:"drawTagByDom",value:function(e,t,n){var i=e;if((null==t?void 0:t.length)>0){var a=document.createElement("div");return a.innerHTML=t,a.setAttribute("id",n),null==i||i.appendChild(a),a}}},{key:"drawTag",value:function(e,t){var n,i=null==e?void 0:e.parentNode,a=window.self.document.getElementById("tagToolTag");if(a&&i&&i.contains(a)&&(null==i||i.removeChild(a)),(null==t?void 0:t.length)>0){var r=document.createElement("div");return r.innerHTML=null!=(n=t.reduce((function(e,t){return"".concat(e).concat(t.keyName,": ").concat(t.value.join(" \u3001 "),"\n")}),""))?n:"",r.setAttribute("id","tagToolTag"),null==i||i.appendChild(r),r}}},{key:"drawLineWithPointList",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t.length<2)){var a=e.getContext("2d"),r=i.color,o=void 0===r?ei:r,c=i.thickness,s=void 0===c?1:c,u=i.lineCap,d=void 0===u?"round":u,h=i.lineType,f=void 0===h?B.Line:h,g=i.lineDash,v=i.hoverEdgeIndex;a.save(),a.strokeStyle=o,a.lineWidth=s,a.lineCap=d,Array.isArray(g)?a.setLineDash(g):a.setLineDash([]),f===B.Curve?(void 0!==v&&v>-1&&t.push(t[0]),t=Pt.createSmoothCurvePointsFromPointList(Object(l.a)(t),ae),void 0!==v&&v>-1&&(t=t.slice((ae+1)*v,(ae+1)*(v+1)))):void 0!==v&&v>-1&&(t=(t=[].concat(Object(l.a)(t),[t[0]])).slice(v,v+2));var b=[];a.beginPath(),a.moveTo(t[0].x,t[0].y);for(var p=0;p<t.length-1;p++)t[p].specialEdge&&b.push({i1:p,i2:p+1}),a.lineTo(t[p+1].x,t[p+1].y);a.stroke(),a.save(),a.lineWidth=.8*s,a.lineCap="butt",a.strokeStyle="white",a.setLineDash([3,3]),b.forEach((function(e){var n=t[e.i1],i=t[e.i2];a.beginPath(),a.moveTo(n.x,n.y),a.lineTo(i.x,i.y),a.stroke()})),a.restore();var m=4,y=2;return t.forEach((function(t){t.specialPoint&&(n.drawSpecialPoint(e,t,m+y,o),n.drawSpecialPoint(e,t,m,"white"))})),a.restore(),t}}},{key:"drawCircle",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.getContext("2d"),r=i.startAngleDeg,o=void 0===r?0:r,c=i.endAngleDeg,l=void 0===c?360:c,s=i.thickness,u=void 0===s?1:s,d=i.color,h=void 0===d?ei:d,f=i.fill,g=void 0===f?ei:f,v=zn.deg2rad(o),b=zn.deg2rad(l);a.save(),a.beginPath(),a.strokeStyle=h,a.fillStyle=g,a.lineWidth=u,a.arc(t.x,t.y,n,v,b,!1),a.stroke(),g&&a.fill(),a.closePath(),a.restore()}},{key:"drawCircleWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.getContext("2d"),r=i.color,o=void 0===r?ei:r;a.save();var c=zn.deg2rad(0),l=zn.deg2rad(360);a.fillStyle=o,a.beginPath(),a.arc(t.x,t.y,n,c,l,!1),a.fill(),a.restore()}},{key:"drawSpecialPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=arguments.length>3?arguments[3]:void 0,a=e.getContext("2d"),r=t.x,o=t.y;a.save(),a.beginPath(),a.fillStyle=i;var c=1.5*n,l=c*Math.sqrt(3)/2,s=c/2;a.moveTo(r,o-c),a.lineTo(r-l,o+s),a.lineTo(r+l,o+s),a.closePath(),a.fill(),a.restore()}},{key:"drawPolygon",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.isClose,a=void 0!==i&&i,r=n.lineType,o=void 0===r?B.Line:r;return!0===a&&(t=[].concat(Object(l.a)(t),[t[0]])),o===B.Curve&&(t=Pt.createSmoothCurvePointsFromPointList(Object(l.a)(t))),this.drawLineWithPointList(e,t,qn(Qn({},n),{lineType:B.Line})),t}},{key:"drawPolygonWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t.length<2)){var i=e.getContext("2d"),a=n.color,r=void 0===a?ei:a,o=n.lineType,c=void 0===o?B.Line:o;i.save(),i.fillStyle=r,i.beginPath(),c===B.Curve&&(t=Pt.createSmoothCurvePointsFromPointList([].concat(Object(l.a)(t),[t[0]])));var s=t,u=Object(Fn.a)(s),d=u[0],h=u.slice(1);return i.moveTo(d.x,d.y),h.forEach((function(e){i.lineTo(e.x,e.y)})),i.fill(),i.restore(),t}}},{key:"drawPolygonWithFillAndLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.strokeColor,a=n.fillColor,r=n.thickness,o=n.lineCap,c=n.isClose,l=n.lineType,s=this.drawPolygon(e,t,{color:i,thickness:r,lineCap:o,isClose:c,lineType:l});return this.drawPolygonWithFill(e,t,{color:a,lineType:l}),s}},{key:"drawPolygonWithKeyPoint",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.pointColor,r=void 0===a?"white":a,o=i.strokeColor,c=this.drawPolygon(e,t,i);return c.forEach((function(t){n.drawCircleWithFill(e,t,4,{color:o}),n.drawCircleWithFill(e,t,3,{color:r})})),c}},{key:"drawSelectedPolygonWithFillAndLine",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.pointColor,r=void 0===a?"white":a,o=i.strokeColor,c=this.drawPolygonWithFillAndLine(e,t,i);return c.forEach((function(t){n.drawCircleWithFill(e,t,4,{color:o}),n.drawCircleWithFill(e,t,3,{color:r})})),c}},{key:"drawText",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n){var a=e.getContext("2d"),r=i.color,o=void 0===r?ei:r,c=i.font,l=void 0===c?q:c,s=i.shadowColor,u=void 0===s?"":s,d=i.shadowBlur,h=void 0===d?0:d,f=i.shadowOffsetX,g=void 0===f?0:f,v=i.shadowOffsetY,b=void 0===v?0:v,p=i.textMaxWidth,m=void 0===p?164:p,y=i.offsetX,x=void 0===y?0:y,C=i.offsetY,w=void 0===C?0:C,k=i.textAlign,I=void 0===k?"start":k,L=i.lineHeight;a.save(),a.textAlign=I,a.fillStyle=null!=o?o:"white",a.font=l,a.shadowColor=u,a.shadowOffsetX=g,a.shadowOffsetY=b,a.shadowBlur=h,this.wrapText(e,"".concat(n),t.x+x,t.y+w,m,L),a.restore()}}},{key:"wrapText",value:function(e,t,n,i,a,r){if("string"==typeof t&&"number"==typeof n&&"number"==typeof i){var o=e.getContext("2d");"undefined"==typeof a&&(a=e&&e.width||300),"undefined"==typeof r&&(r=e&&parseInt(window.getComputedStyle(e).lineHeight,10)||parseInt(window.getComputedStyle(document.body).lineHeight,10));for(var c=t.split("\n"),l=0;l<c.length;l++){for(var s=c[l].split(""),u="",d=0;d<s.length;d++){var h=u+s[d];a||(a=300),o.measureText(h).width>a&&d>0?(o.fillText(u,n,i),u=s[d],i+=r):u=h}o.fillText(u,n,i),i+=r}}}},{key:"drawArrow",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.color,r=void 0===a?ei:a,o=i.thickness,c=void 0===o?1:o,l=i.lineCap,s=void 0===l?"round":l,u=i.theta,d=void 0===u?30:u,h=i.headLen,f=void 0===h?10:h,g=180*Math.atan2(t.y-n.y,t.x-n.x)/Math.PI,v=(g+d)*Math.PI/180,b=(g-d)*Math.PI/180,p=f*Math.cos(v),m=f*Math.sin(v),y=f*Math.cos(b),x=f*Math.sin(b);e.save(),e.strokeStyle=r,e.lineWidth=c,e.lineCap=s,e.beginPath(),e.moveTo(n.x+p,n.y+m),e.lineTo(n.x,n.y),e.lineTo(n.x+y,n.y+x),e.stroke(),e.restore()}},{key:"drawArrowByCanvas",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.getContext("2d");this.drawArrow(a,t,n,i)}}]),e}();ti.drawImg=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.getContext("2d"),a=n.zoom,r=void 0===a?1:a,o=n.currentPos,c=void 0===o?$n:o,l=n.rotate,s=void 0===l?0:l,u=n.imgAttribute;switch(i.save(),s){case 0:default:i.translate(c.x,c.y);break;case 90:i.translate(c.x+t.height*r,c.y),i.rotate(90*Math.PI/180);break;case 180:i.translate(c.x+t.width*r,c.y+t.height*r),i.rotate(Math.PI);break;case 270:i.translate(c.x,c.y+t.width*r),i.rotate(270*Math.PI/180)}if(u){var d=u.contrast,h=u.saturation,f=u.brightness;i.filter="saturate(".concat(h+100,"%) contrast(").concat(d+100,"%) brightness(").concat(f+100,"%)")}i.drawImage(t,0,0,t.width*r,t.height*r),i.restore()};var ni=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getMarkerShowText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Vn.getAttributeShowText(e,t)}}]),e}();function ii(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:62,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(i=i||a.length,n)for(e=0;e<n;e++)r[e]=a[0|Math.random()*i];else for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",e=0;e<36;e++)r[e]||(t=0|16*Math.random(),r[e]=a[19===e?3&t|8:t]);return r.join("")}ni.getAuxiliaryLineByMarkerList=function(e,t){for(var n,i=Object(_e.cloneDeep)(e),a=[],r=i.shift();r;)null==(n=r.target)||n.forEach((function(e){var n=i.find((function(t){return t.value===e}));n&&(null==r?void 0:r[t])&&a.push({start:r[t],end:n[t]})})),r=i.shift();return a},ni.getAuxiliaryLineCoord=function(e,t){var n=[];return e.forEach((function(e){var i=e.start,a=e.end,r=t.find((function(e){return e.label===i}));if(r){var o=t.find((function(e){return e.label===a}));!o||n.push({start:{x:r.x,y:r.y},end:{x:o.x,y:o.y}})}})),n};var ai=n(23),ri={showConfirm:!1,skipWhileNoDependencies:!1,drawOutsideTarget:!1,copyBackwardResult:!1,minWidth:1,minHeight:1,isShowOrder:!1,filterData:["valid","invalid"],attributeConfigurable:!1,attributeList:[],textConfigurable:!1,textCheckType:0,customFormat:""},oi={showConfirm:!1,skipWhileNoDependencies:!1,inputList:[{key:"\u7c7b\u522b1",value:"class1",isMulti:!1,subSelected:[{key:"\u9009\u98791",value:"option1",isDefault:!1},{key:"\u9009\u98792",value:"option1-2",isDefault:!1}]},{key:"\u7c7b\u522b2",value:"class-AH",isMulti:!0,subSelected:[{key:"\u9009\u98792-1",value:"option2-1",isDefault:!1},{key:"\u9009\u98792-2",value:"option2-2",isDefault:!1},{key:"\u9009\u98792-3",value:"option2-3",isDefault:!1}]},{key:"\u7c7b\u522b3",value:"class-0P",isMulti:!1,subSelected:[{key:"\u9009\u98793-1",value:"option3-1",isMulti:!1},{key:"\u9009\u98793-2",value:"option3-2",isDefault:!1},{key:"\u9009\u98793-3",value:"option3-3",isDefault:!1}]}]},ci={lineType:0,lineColor:0,edgeAdsorption:!1,outOfTarget:!0,copyBackwardResult:!1,isShowOrder:!1,attributeConfigurable:!1,attributeList:[{key:"\u7c7b\u522b1",value:"\u7c7b\u522b1"},{key:"\u7c7b\u522bao",value:"class-ao"},{key:"\u7c7b\u522bM1",value:"class-M1"},{key:"\u7c7b\u522bCm",value:"class-Cm"},{key:"\u7c7b\u522bc3",value:"class-c3"},{key:"\u7c7b\u522ba0",value:"class-a0"},{key:"\u7c7b\u522bu7",value:"class-u7"},{key:"\u7c7b\u522bZb",value:"class-Zb"},{key:"\u7c7b\u522bzi",value:"class-zi"}],textConfigurable:!1,textCheckType:2,customFormat:"",showConfirm:!1,lowerLimitPointNum:2,upperLimitPointNum:"",preReferenceStep:0,skipWhileNoDependencies:!1,filterData:["valid","invalid"]},li={showConfirm:!1,skipWhileNoDependencies:!1,enableTextRecognition:!1,recognitionMode:"general",configList:[{label:"\u6587\u672c",key:"text",required:!1,default:"",maxLength:1e3}],filterData:["valid","invalid"]},si={lineType:0,lineColor:0,lowerLimitPointNum:3,edgeAdsorption:!1,drawOutsideTarget:!1,copyBackwardResult:!1,isShowOrder:!1,attributeConfigurable:!1,attributeList:[],textConfigurable:!0,textCheckType:0,customFormat:""},ui=function(e){return"lineTool"===e?ci:"rectTool"===e?ri:"tagTool"===e?oi:"textTool"===e?li:"polygonTool"===e?si:ri},di={toolColor:{1:{valid:{stroke:"rgba(0,0,255,0.50)",fill:"rgba(0,0,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(0,15,255,1.00)",fill:"rgba(0,15,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(0,15,255,0.80)",fill:"rgba(0,15,255,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},3:{valid:{stroke:"rgba(0,255,255,0.50)",fill:"rgba(0,255,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(0,212,255,1.00)",fill:"rgba(0,212,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(0,212,255,0.80)",fill:"rgba(0,212,255,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},5:{valid:{stroke:"rgba(0,255,0,0.50)",fill:"rgba(0,255,0,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(149,255,1.00)",fill:"rgba(149,255,0,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(149,255,0,0.80)",fill:"rgba(149,255,0,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},7:{valid:{stroke:"rgba(255,255,0,0.50)",fill:"rgba(255,255,0,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(255,230,102,1.00)",fill:"rgba(255,213,0,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(255,230,102,0.80)",fill:"rgba(255,230,102,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}},9:{valid:{stroke:"rgba(255,0,255,0.50)",fill:"rgba(255,0,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.80)"},validSelected:{stroke:"rgba(230,102,255,1.00)",fill:"rgba(213,0,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,0.60)",fill:"rgba(255,0,0,0.24)"},validHover:{stroke:"rgba(230,102,255,0.80)",fill:"rgba(230,102,255,0.64)"},invalidHover:{stroke:"rgba(255,0,0,0.50)",fill:"rgba(255,0,0,0.40)"}}},attributeColor:[{valid:{stroke:"rgba(204,204,204,1.00)",fill:"rgba(204,204,204,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(204,204,204,1.00)",fill:"rgba(204,204,204,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(204,204,204,1.00)",fill:"rgba(204,204,204,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(153,51,255,1.00)",fill:"rgba(153,51,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(153,51,255,1.00)",fill:"rgba(153,51,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(153,51,255,1.00)",fill:"rgba(153,51,255,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(51,254,51,1.00)",fill:"rgba(51,254,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(51,254,51,1.00)",fill:"rgba(51,254,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(51,254,51,1.00)",fill:"rgba(51,254,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(255,51,255,1.00)",fill:"rgba(255,51,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(255,51,255,1.00)",fill:"rgba(255,51,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(255,51,255,1.00)",fill:"rgba(255,51,255,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(204,255,51,1.00)",fill:"rgba(204,255,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(204,255,51,1.00)",fill:"rgba(204,255,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(204,255,51,1.00)",fill:"rgba(204,255,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(51,153,255,1.00)",fill:"rgba(51,153,255,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(51,153,255,1.00)",fill:"rgba(51,153,255,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(51,153,255,1.00)",fill:"rgba(51,153,255,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(255,153,51,1.00)",fill:"rgba(255,153,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(255,153,51,1.00)",fill:"rgba(255,153,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(255,153,51,1.00)",fill:"rgba(255,153,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(51,255,238,1.00)",fill:"rgba(51,255,238,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(51,255,238,1.00)",fill:"rgba(51,255,238,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(51,255,238,1.00)",fill:"rgba(51,255,238,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}},{valid:{stroke:"rgba(255,221,51,1.00)",fill:"rgba(255,221,51,0.40)"},invalid:{stroke:"rgba(255,153,102,1.00)",fill:"rgba(255,153,102,0.40)"},validSelected:{stroke:"rgba(255,221,51,1.00)",fill:"rgba(255,221,51,0.80)"},invalidSelected:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"},validHover:{stroke:"rgba(255,221,51,1.00)",fill:"rgba(255,221,51,0.80)"},invalidHover:{stroke:"rgba(255,0,0,1.00)",fill:"rgba(255,0,0,0.80)"}}],lineColor:{1:"rgba(102, 111, 255, 1 )",3:"rgba(102, 230, 255, 1)",5:"rgba(191, 255, 102, 1)",7:"rgba(255, 230, 102, 1)",9:"rgba(230, 102, 255, 1)"},attributeLineColor:["rgba(204, 204, 204, 1)","rgba(153, 51, 255, 1)","rgba(51, 254, 51, 1)","rgba(255, 51, 255, 1)","rgba(204, 255, 51, 1)","rgba(51, 153, 255, 1)","rgba(255, 153, 51, 1)","rgba(51, 255, 238, 1)","rgba(255, 221, 51, 1)"],color:1,width:2,opacity:9},hi=function(){function e(t){var n=this;Object(u.a)(this,e),this.record=[],this.recordIndex=-1,this.minRecordIndex=-1,this.emitHistoryChanged=function(){n.historyChanged&&("ActionsHistory"===n.constructor.name||n.record.length>0)&&n.historyChanged(n.undoEnabled,n.redoEnabled)},this.historyChanged=t}return Object(d.a)(e,[{key:"undoEnabled",get:function(){return this.recordIndex>this.minRecordIndex}},{key:"redoEnabled",get:function(){return this.recordIndex<this.record.length-1}},{key:"pushHistory",value:function(e){if(this.recordIndex!==this.record.length-1){var t=this.record.slice(0,Math.min(this.recordIndex+1,this.record.length));this.record=t}this.record.push(Be.a.cloneDeepWith(e)),this.recordIndex+=1,this.emitHistoryChanged()}},{key:"updateHistory",value:function(e){this.record[this.recordIndex]=Be.a.cloneDeep(e)}},{key:"applyAttribute",value:function(e,t,n){e&&this.record.forEach((function(i){var a=i.find((function(t){return t.id===e}));a&&(a[t]=n)}))}},{key:"undo",value:function(){if(this.undoEnabled)return this.recordIndex-=1,this.emitHistoryChanged(),Be.a.cloneDeep(this.record[this.recordIndex])||[]}},{key:"redo",value:function(){if(this.redoEnabled)return this.recordIndex+=1,this.emitHistoryChanged(),Be.a.cloneDeep(this.record[this.recordIndex])}},{key:"init",value:function(){this.record=[[]],this.recordIndex=0,this.emitHistoryChanged()}},{key:"empty",value:function(){this.record=[],this.recordIndex=-1,this.emitHistoryChanged()}},{key:"initRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length>0||t;this.record=n?[Be.a.cloneDeep(e)]:[],this.minRecordIndex=n?0:-1,this.recordIndex=0}}]),e}(),fi=function(){function e(t,n){var i=this;Object(u.a)(this,e),this.rcTime=0,this.mouseDownTime=0,this.onMouseDown=function(){i.mouseDownTime=(new Date).getTime()},this.dom=t,this.isDoubleClick=!1,this.delay=n}return Object(d.a)(e,[{key:"getRcTime",value:function(){return this.rcTime}},{key:"getCoord",value:function(e){return{x:e.clientX,y:e.clientY}}},{key:"removeEvent",value:function(){!this.dom||(this.dom.removeEventListener("mouseup",this.mouseUp),this.dom.removeEventListener("mousemove",this.mouseMove),this.dom.removeEventListener("dblclick",this.dblclick),this.dom.removeEventListener("mousedown",this.onMouseDown))}},{key:"addEvent",value:function(e,t,n,i){var a=this;!this.dom||(this.removeEvent(),this.mouseUp=function(t){var r=(new Date).getTime(),o=!i||i(t);if(r-a.mouseDownTime>a.delay||!0!==o)e(t);else{if(2===t.button){if(0!==a.rcTime)return r-a.rcTime<a.delay&&(n(t),clearTimeout(a.setTimeFun),a.cacheFunction=void 0),void(a.rcTime=0);setTimeout((function(){a.rcTime=0}),a.delay),a.rcTime=r}a.setTimeFun&&clearTimeout(a.setTimeFun),a.clickCoord=a.getCoord(t),a.cacheFunction=function(){return e(t)},a.setTimeFun=setTimeout((function(){a.isDoubleClick?a.isDoubleClick=!1:(a.cacheFunction(),a.clickCoord=void 0)}),a.delay)}},this.mouseMove=function(e){var t=a.getCoord(e);a.clickCoord&&!mt.getIsInScope(t,a.clickCoord,10)&&(a.cacheFunction&&a.cacheFunction(),a.clickCoord=void 0,a.cacheFunction=null,clearTimeout(a.setTimeFun))},this.dblclick=function(e){a.isDoubleClick=!0,a.clickCoord=void 0,t(e)},this.dom.addEventListener("mouseup",this.mouseUp),this.dom.addEventListener("mousemove",this.mouseMove),this.dom.addEventListener("dblclick",this.dblclick),this.dom.addEventListener("mousedown",this.onMouseDown))}},{key:"clearRightDblClick",value:function(){this.rcTime=0}}]),e}(),gi=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getInitImgPos",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(90===n||270===n)&&(t={width:t.height,height:t.width});var r=e.width*i/t.width,o=e.height*i/t.height,c=a?1:Math.min(r,o),l={x:(e.width-t.width*c)/2,y:(e.height-t.height*c)/2},s=t.width*c,u=t.height*c;return a&&(c=1),{zoom:c,currentPos:l,imgInfo:{width:s,height:u}}}},{key:"getBasicRecPos",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.9,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t&&e){var o=t.x,c=t.y,l=t.height,s=t.width,u=n.height/l;s/l>n.width/n.height&&(u=n.width/s);var d=r?1:u*i*a,h={x:n.width/2,y:n.height/2},f={x:(o+s/2)*d,y:(c+l/2)*d};return{currentPos:{x:h.x-f.x,y:h.y-f.y},innerZoom:d}}return!1}}]),e}(),vi=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"renderInvalidPage",value:function(e,t,n){var i=document.createElement("div");return i.setAttribute("style","\n        position: absolute;\n        left: 0px;\n        top: 0px;\n        width: ".concat(t.width,"px;\n        height: ").concat(t.height,"px;\n        background: rgba(255, 87, 34, 1);\n        overflow: hidden;\n        color: white;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 30px;\n        opacity: 0.7;\n        z-index: 30;\n      ")),i.innerHTML=cn.getMessagesByLocale($t.InvalidImage,n),i.className="bee-invalid-page",e.appendChild(i),i}}]),e}(),bi=[1,5,10,20,30,50,80,100].concat(Array.from({length:9}).map((function(e,t){return 100*(t+2)}))),pi=Object(d.a)((function e(){Object(u.a)(this,e)}));pi.zoomChanged=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ae.Linear;if(n===Ae.Intelligence){var i,a=Math.max.apply(Math,Object(l.a)(bi)),r=Math.min.apply(Math,Object(l.a)(bi)),o=bi.slice(0,bi.length).findIndex((function(t,n){return e>=t&&(e<bi[n+1]||t===a)}));if(-1===o)i=e>=r&&e<=a?t?a:r:t?r:e;else{var c=t?o+1:o-(bi.includes(e)?1:0);i=bi[Ft.withinRange(c,[0,bi.length-1])]}return i}var s=t?2:.5;return e*s},pi.wheelChangePos=function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=a.zoom,o=void 0===r?1:r,c=a.innerZoom,l=void 0===c?1:c,s=a.basicZoom,u=void 0===s?1:s,d=a.zoomMax,h=void 0===d?1e3:d,f=a.rotate,g=void 0===f?0:f,v=i.x,b=i.y,p=parseFloat((o+.1).toFixed(1))/5;if(e&&t){var m=e.width,y=e.height;[90,270].includes(g)&&(m=e.height,y=e.width);var x=m*l,C=y*l,w=t.x-v,k=t.y-b,I=w/x,L=k/C,P=o+n*p,O=m*(P=Ft.withinRange(P,[u,h]))*I,S=y*P*L,T=v+(w-O),A=b+(k-S);return{zoom:P,currentPos:{x:T,y:A},imgInfo:{width:m*P,height:y*P},ratio:p}}return null};var mi,yi,xi=function(){function e(){Object(u.a)(this,e),this._events=new Map}return Object(d.a)(e,[{key:"on",value:function(e,t){var n=this._events.get(e)||[];n.some((function(e){return e===t}))||this._events.set(e,n.concat(t))}},{key:"singleOn",value:function(e,t){this._events.set(e,[t])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a=this._events.get(e);a&&a.forEach((function(e){e&&e.apply(void 0,n)}))}},{key:"unbind",value:function(e,t){var n=this._events.get(e);n&&this._events.set(e,n.filter((function(e){return e!==t})))}},{key:"unbindAll",value:function(e){this._events.delete(e)}}]),e}(),Ci=Object.defineProperty,wi=Object.defineProperties,ki=Object.getOwnPropertyDescriptors,Ii=Object.getOwnPropertySymbols,Li=Object.prototype.hasOwnProperty,Pi=Object.prototype.propertyIsEnumerable,Oi=function(e,t,n){return t in e?Ci(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Si=function(e,t){for(var n in t||(t={}))Li.call(t,n)&&Oi(e,n,t[n]);if(Ii){var i,a=Object(p.a)(Ii(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Pi.call(t,n)&&Oi(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Ti={min:.2,max:1e3,ratio:.4},Ai=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i,a,r,o,c,l,s,d,f,g;return Object(u.a)(this,n),(i=t.call(this)).isDrag=!1,i.isSpaceKey=!1,i.operationMode=te.General,i.innerZoom=1,i.basicZoom=.01,i.isSpaceClick=!1,i.isDragStart=!1,i.startTime=0,i.initImgPos=function(){return function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(f){a(f)}},o=function(e){try{c(n.throw(e))}catch(f){a(f)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))}(Object(h.a)(i),null,Object(ai.a)().mark((function e(){var t,n,i,a,r,o,c,l;return Object(ai.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.imgNode){e.next=2;break}return e.abrupt("return");case 2:i=null==(t=this._imgAttribute)?void 0:t.zoomRatio,a=null==(n=this._imgAttribute)?void 0:n.isOriginalSize,r=gi.getInitImgPos(this.size,{width:this.imgNode.width,height:this.imgNode.height},this.rotate,i,a),o=r.currentPos,c=r.imgInfo,l=r.zoom,this.setCurrentPos(o),this.currentPosStorage=o,this.setImgInfo(c),this.setZoom(l),this.render(),this.renderBasicCanvas(),this.emit("dependRender"),this.emit("renderZoom",l,o,c);case 4:case"end":return e.stop()}}),e,this)})))},i.getCurrentPos=function(e){var t=Object(h.a)(i),n=t._firstClickCoordinate,a=t.currentPosStorage;try{var r;return r=n&&a?{y:a.y+e.y-n.y,x:a.x+e.x-n.x}:{x:0,y:0}}catch(r){return console.error(r),{x:0,y:0}}},i.wheelChangePos=function(e,t,n){var a=Object(h.a)(i),r=a.currentPos,o=a.imgNode;if(o){if(i.zoom!==i.basicZoom||-1!==t){var c=pi.wheelChangePos(o,e,t,r,{zoom:n||i.zoom,innerZoom:i.innerZoom,basicZoom:i.basicZoom,zoomMax:Ti.max,rotate:i.rotate});if(c){var l=c.currentPos,s=c.ratio,u=c.zoom,d=c.imgInfo;i.setZoom(u),i.setCurrentPos(l),i.currentPosStorage=l,i.setImgInfo(d),Ti.ratio=s,i.emit("renderZoom",u,l,d)}}}else console.error("unable to load image")},i.zoomChanged=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.Linear,n=pi.zoomChanged(i.zoom,e,t);i.wheelChangePos(i.getGetCenterCoordinate(),n>i.zoom?1:-1,n),i.render(),i.renderBasicCanvas()},i.zoomChangeOnCenter=function(e){i.wheelChangePos(i.getGetCenterCoordinate(),0,e),i.render(),i.renderBasicCanvas()},i.drawImg=function(){!i.imgNode||!0===i.hiddenImg||ti.drawImg(i.basicCanvas,i.imgNode,{zoom:i.zoom,currentPos:i.currentPos,rotate:i.rotate,imgAttribute:i._imgAttribute})},i.container=e.container,i.config=Ye.jsonParser(e.config),i.showDefaultCursor=e.showDefaultCursor||!1,i.destroyCanvas(),i.createCanvas(e.size,e.isAppend),i.imgNode=e.imgNode,i.isImgError=!e.imgNode,i.basicImgInfo={width:null!=(r=null==(a=e.imgNode)?void 0:a.width)?r:0,height:null!=(c=null==(o=e.imgNode)?void 0:o.height)?c:0,valid:!0,rotate:0},i.forbidOperation=null!=(l=e.forbidOperation)&&l,i.forbidBasicResultRender=null!=(s=e.forbidBasicResultRender)&&s,i.size=e.size,i.currentPos={x:0,y:0},i.zoom=1,i.coord={x:-1,y:-1},i.currentPosStorage={x:0,y:0},i.isShowCursor=!1,i.style={strokeColor:kn[4],fillColor:kn[4],strokeWidth:2,opacity:1},i.attributeLockList=[],i.history=new hi,i.style=null!=(d=e.style)?d:Ye.jsonParser(An),i._imgAttribute=null!=(f=e.imgAttribute)?f:{},i.isHidden=!1,i.dragStatus=Oe.Wait,i.defaultAttribute=null!=(g=null==e?void 0:e.defaultAttribute)?g:"",i.forbidCursorLine=!!e.forbidCursorLine,i.lang=Ee.Zh,i.onMouseDown=i.onMouseDown.bind(Object(h.a)(i)),i.onMouseMove=i.onMouseMove.bind(Object(h.a)(i)),i.onMouseLeave=i.onMouseLeave.bind(Object(h.a)(i)),i.onMouseUp=i.onMouseUp.bind(Object(h.a)(i)),i.onKeyDown=i.onKeyDown.bind(Object(h.a)(i)),i.onKeyUp=i.onKeyUp.bind(Object(h.a)(i)),i.onWheel=i.onWheel.bind(Object(h.a)(i)),i.onLeftDblClick=i.onLeftDblClick.bind(Object(h.a)(i)),i.onRightDblClick=i.onRightDblClick.bind(Object(h.a)(i)),i.onClick=i.onClick.bind(Object(h.a)(i)),i.clearImgDrag=i.clearImgDrag.bind(Object(h.a)(i)),i.dblClickListener=new fi(i.container,200),i.coordUtils=new yt(Object(h.a)(i)),i.coordUtils.setBasicImgInfo(i.basicImgInfo),i.hiddenImg=e.hiddenImg||!1,i}return Object(d.a)(n,[{key:"onContextmenu",value:function(e){e.preventDefault()}},{key:"ctx",get:function(){var e;return this._ctx||(null==(e=this.canvas)?void 0:e.getContext("2d"))}},{key:"basicCtx",get:function(){var e;return null==(e=this.basicCanvas)?void 0:e.getContext("2d")}},{key:"rotate",get:function(){var e,t;return null!=(t=null==(e=this.basicImgInfo)?void 0:e.rotate)?t:0}},{key:"valid",get:function(){var e,t;return null==(t=null==(e=this.basicImgInfo)?void 0:e.valid)||t}},{key:"baseIcon",get:function(){return Ln[this.style.color]}},{key:"defaultCursor",get:function(){return this.showDefaultCursor?"default":"none"}},{key:"dataList",get:function(){return[]}},{key:"innerPosAndZoom",get:function(){return{innerZoom:this.innerZoom,currentPosStorage:this.currentPosStorage}}},{key:"isShowDefaultCursor",get:function(){return this.showDefaultCursor}},{key:"isMultiMoveMode",get:function(){return this.operationMode===te.MultiMove}},{key:"hasMarkerConfig",get:function(){return!0===this.config.markerConfigurable&&this.config.markerList&&this.config.markerList.length>0}},{key:"setZoom",value:function(e){this.zoom=e,this.innerZoom=e,this.coordUtils.setZoomAndCurrentPos(this.zoom,this.currentPos)}},{key:"setCurrentPos",value:function(e){this.currentPos=e,this.coordUtils.setZoomAndCurrentPos(this.zoom,this.currentPos)}},{key:"setReferenceData",value:function(e){this.referenceData=e}},{key:"setImgInfo",value:function(e){this.imgInfo=e}},{key:"setCurrentPosStorage",value:function(e){this.currentPosStorage=e}},{key:"setOperationMode",value:function(e){this.operationMode=e}},{key:"recoverOperationMode",value:function(){this.operationMode===te.MultiMove&&this.setOperationMode(te.General)}},{key:"updatePosition",value:function(e){var t=e.zoom,n=e.currentPos;this.setZoom(t),this.setCurrentPos(n),this.currentPosStorage=n,this.renderBasicCanvas(),this.render()}},{key:"setLang",value:function(e){this.lang=e}},{key:"setShowDefaultCursor",value:function(e){this.showDefaultCursor=e,this.container.style.cursor=this.defaultCursor}},{key:"setCustomCursor",value:function(e){this.container.style.cursor=e}},{key:"forbidMouseOperation",get:function(){return this.forbidOperation||!1===this.valid}},{key:"pixelRatio",get:function(){var e;return Zn.getPixelRatio(null==(e=this.canvas)?void 0:e.getContext("2d"))}},{key:"init",value:function(){this.eventUnbinding(),this.initPosition(),this.eventBinding(),this.render(),this.renderBasicCanvas()}},{key:"destroy",value:function(){this.destroyCanvas(),this.eventUnbinding()}},{key:"updateCanvasBasicStyle",value:function(e,t,n){var i=this.pixelRatio;e.style.position="absolute",e.width=t.width*i,e.height=t.height*i,e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.left="0",e.style.top="0",e.style.zIndex="".concat(n," ")}},{key:"createCanvas",value:function(e){var t,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.pixelRatio,r=document.createElement("canvas");this.updateCanvasBasicStyle(r,e,0),this.basicCanvas=r;var o=document.createElement("canvas");this.updateCanvasBasicStyle(o,e,10),i&&(this.container.hasChildNodes()?(this.container.insertBefore(o,this.container.childNodes[0]),this.container.insertBefore(r,this.container.childNodes[0])):(this.container.appendChild(r),this.container.appendChild(o))),this.canvas=o,this.container.style.cursor=this.defaultCursor,null==(t=this.ctx)||t.scale(a,a),null==(n=this.basicCtx)||n.scale(a,a)}},{key:"destroyCanvas",value:function(){this.canvas&&this.container.contains(this.canvas)&&this.container.removeChild(this.canvas),this.basicCanvas&&this.container.contains(this.basicCanvas)&&this.container.removeChild(this.basicCanvas),this.clearInvalidPage(),this.clearImgDrag()}},{key:"setStyle",value:function(e){this.style=e,this.render()}},{key:"setImgNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.imgNode=e,this.setBasicImgInfo(Si({width:e.width,height:e.height,valid:!0,rotate:0},t)),!0===this.isImgError&&(this.isImgError=!1,this.emit("changeAnnotationShow")),"boolean"==typeof t.valid&&this.setValid(t.valid),this.initImgPos(),this.render(),this.renderBasicCanvas()}},{key:"setErrorImg",value:function(){var e=this.isImgError;this.isImgError=!0,this.imgNode=void 0,this.setBasicImgInfo({width:0,height:0,valid:!0,rotate:0}),!1===e&&this.emit("changeAnnotationShow")}},{key:"setBasicImgInfo",value:function(e){this.basicImgInfo=e,this.coordUtils.setBasicImgInfo(e)}},{key:"setForbidOperation",value:function(e){this.forbidOperation=e,this.setShowDefaultCursor(e),this.render()}},{key:"setForbidCursorLine",value:function(e){this.forbidCursorLine=e,this.render()}},{key:"setIsHidden",value:function(e){this.isHidden=e,this.emit("hiddenChange")}},{key:"setIsShowOrder",value:function(e){this.config.isShowOrder=e,this.render()}},{key:"getCoordinate",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}},{key:"getCoordinateUnderZoom",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.left-this.currentPos.x,y:e.clientY-t.top-this.currentPos.y}}},{key:"getCoordinateUnderZoomByRotate",value:function(e){var t=this.getCoordinateUnderZoom(e),n=t.x,i=t.y;return 90===this.basicImgInfo.rotate?{x:i,y:this.basicImgInfo.height*this.zoom-n}:180===this.basicImgInfo.rotate?{x:this.basicImgInfo.width*this.zoom-n,y:this.basicImgInfo.height*this.zoom-i}:270===this.basicImgInfo.rotate?{x:this.basicImgInfo.width*this.zoom-i,y:n}:{x:n,y:i}}},{key:"getGetCenterCoordinate",value:function(){return{x:this.size.width/2,y:this.size.height/2}}},{key:"initPosition",value:function(){if(this.basicResult&&this.imgInfo){var e=this.basicResult,t=this.size,n=this.imgNode,i=this._imgAttribute,a=this.imgInfo,r=this.dependToolName;if(e&&n&&r){var o=e;switch(r){case O.Polygon:case O.Line:if(e.pointList){var c=Ft.calcViewportBoundaries(e.pointList);o={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top}}}var l=gi.getBasicRecPos(n,o,t,void 0,null==i?void 0:i.zoomRatio,null==i?void 0:i.isOriginalSize);l&&(this.setCurrentPos(l.currentPos),this.currentPosStorage=this.currentPos,this.setImgInfo(function(e,t){return wi(e,ki(t))}(Si({},a),{width:a.width/this.innerZoom*l.innerZoom,height:a.height/this.innerZoom*l.innerZoom})),this.setZoom(l.innerZoom),this.render(),this.renderBasicCanvas())}}else this.initImgPos()}},{key:"undo",value:function(){this.history.undo()}},{key:"redo",value:function(){this.history.redo()}},{key:"clearCanvas",value:function(){var e;null==(e=this.ctx)||e.clearRect(0,0,this.size.width,this.size.height)}},{key:"clearBasicCanvas",value:function(){var e;null==(e=this.basicCtx)||e.clearRect(0,0,this.size.width,this.size.height)}},{key:"eventBinding",value:function(){this.dblClickListener.addEvent((function(){}),this.onLeftDblClick,this.onRightDblClick),this.container.addEventListener("mousedown",this.onMouseDown),this.container.addEventListener("mousemove",this.onMouseMove),this.container.addEventListener("mouseup",this.onMouseUp),this.container.addEventListener("mouseleave",this.onMouseLeave),this.container.addEventListener("click",this.onClick),this.container.addEventListener("wheel",this.onWheel),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),window.parent.document.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"eventUnbinding",value:function(){this.container.removeEventListener("mousedown",this.onMouseDown),this.container.removeEventListener("mousemove",this.onMouseMove),this.container.removeEventListener("mouseup",this.onMouseUp),this.container.removeEventListener("mouseleave",this.onMouseLeave),this.container.removeEventListener("wheel",this.onWheel),this.container.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),window.parent.document.removeEventListener("contextmenu",this.onContextmenu,!1),this.dblClickListener.removeEvent()}},{key:"clearImgDrag",value:function(){this.isDrag=!1,this.isDragStart=!1,this.isSpaceClick=!1,this.startTime=0,this.container.style.cursor=this.defaultCursor,this.forbidCursorLine=!1}},{key:"clearCursorLine",value:function(){this.coord={x:-1,y:-1}}},{key:"onMouseDown",value:function(e){if(!this.canvas||this.isImgError)return!0;var t=this.getCoordinate(e);(this.isSpaceKey&&0===e.button||2===e.button)&&(e.stopPropagation(),this._firstClickCoordinate=t,this.currentPosStorage=this.currentPos,this.isSpaceClick=!0,this.isDragStart=!0,this.startTime=(new Date).getTime())}},{key:"onMouseMove",value:function(e){if(!this.canvas||this.isImgError)return!0;var t=this.getCoordinate(e);this.isShowCursor&&(this.coord=t);try{if(!t||!Object(_e.isNumber)(null==t?void 0:t.x)||!Object(_e.isNumber)(null==t?void 0:t.y))throw new Error("coord error");if(this.coord=t,(this.isSpaceClick||this.isDragStart)&&this._firstClickCoordinate){var n=this.getCurrentPos(t);this.setCurrentPos(n),this.isDrag=!0,this.container.style.cursor="grabbing",this.forbidCursorLine=!0,this.renderBasicCanvas(),this.emit("dependRender"),this.emit("dragMove",{currentPos:n,zoom:this.zoom,imgInfo:this.imgInfo})}this.render()}catch(n){console.error(n)}}},{key:"onMouseUp",value:function(e){if(!this.canvas||this.isImgError)return!0;if(this.container.style.cursor=this.defaultCursor,this.forbidCursorLine=!1,this.isDrag=!1,this.isDragStart=!1,this.isSpaceClick=!1,0!==this.startTime&&this._firstClickCoordinate){var t=(new Date).getTime(),n=this.getCoordinate(e);if(t-this.startTime>1e3||!0===this.isSpaceKey||lt.calcTwoPointDistance(n,this._firstClickCoordinate)>10)return e.stopPropagation(),this.startTime=0,this.render(),!0}this.startTime=0,this.render()}},{key:"onMouseLeave",value:function(){this.clearImgDrag()}},{key:"onClick",value:function(e){}},{key:"onLeftDblClick",value:function(e){}},{key:"onRightDblClick",value:function(e){this.clearImgDrag()}},{key:"onKeyDown",value:function(e){switch(e.keyCode===nn.Alt&&e.preventDefault(),e.keyCode){case nn.Space:this.isSpaceKey=!0;break;case nn.Z:if(e.ctrlKey)return e.shiftKey?this.redo():this.undo(),!1}return!0}},{key:"onKeyUp",value:function(e){if(e.keyCode===nn.Space)this.isSpaceKey=!1}},{key:"exportCustomData",value:function(){return{}}},{key:"onWheel",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.imgNode&&this.coord){e.preventDefault(),e.stopPropagation();var n=this.getCoordinate(e),i=e.deltaY||e.wheelDelta,a=0;i>0&&this.zoom>Ti.min&&(a=-1),i<0&&this.zoom<Ti.max&&(a=1),this.wheelChangePos(n,a),this.emit("dependRender"),t&&this.render(),this.renderBasicCanvas()}}},{key:"renderCursorLine",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return null!=(t=e.style.lineColor[0])?t:""}();if(this.ctx&&!this.forbidCursorLine&&!this.forbidOperation){var n=this.coord,i=n.x,a=n.y;ti.drawLine(this.canvas,{x:0,y:a},{x:1e4,y:a},{color:t}),ti.drawLine(this.canvas,{x:i,y:0},{x:i,y:1e4},{color:t}),ti.drawCircleWithFill(this.canvas,{x:i,y:a},1,{color:"white"})}}},{key:"setSize",value:function(e){var t;this.size=e,this.container.contains(this.canvas)&&(this.destroyCanvas(),this.createCanvas(e),this.eventUnbinding(),this.init(),!1===(null==(t=this.basicImgInfo)?void 0:t.valid)&&this.renderInvalidPage())}},{key:"setImgAttribute",value:function(e){var t=this._imgAttribute;this._imgAttribute=e,(null==t?void 0:t.zoomRatio)===e.zoomRatio&&t.isOriginalSize===e.isOriginalSize?(this.renderBasicCanvas(),this.render()):this.initImgPos()}},{key:"clearResult",value:function(e){}},{key:"setValid",value:function(e){this.basicImgInfo.valid=e,!1===e?(this.renderInvalidPage(),this.clearResult(!1)):this.clearInvalidPage()}},{key:"setRotate",value:function(e){this.basicImgInfo.rotate=e}},{key:"setBasicResult",value:function(e){this.basicResult=e,this.coordUtils.setBasicResult(e),this.initPosition(),this.emit("dependRender")}},{key:"setDependName",value:function(e,t){this.dependToolName=e,this.coordUtils.setDependInfo(e,t)}},{key:"setAttributeLockList",value:function(e){this.attributeLockList=e,this.render()}},{key:"setConfig",value:function(e){this.config=Ye.jsonParser(e)}},{key:"setDataInjectionAtCreation",value:function(e){this.dataInjectionAtCreation=e}},{key:"setRenderEnhance",value:function(e){this.renderEnhance=e}},{key:"setCustomRenderStyle",value:function(e){this.customRenderStyle=e}},{key:"updateRotate",value:function(){if(this.dependToolName)return this.emit("messageInfo",cn.getMessagesByLocale($t.NoRotateInDependence,this.lang)),!1;if(this.dataList.length>0)return this.emit("messageInfo",cn.getMessagesByLocale($t.NoRotateNotice,this.lang)),!1;var e=Ft.getRotate(this.basicImgInfo.rotate);this.basicImgInfo.rotate=e,this.initImgPos(),this.emit("updateResult")}},{key:"getColor",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config;if(!0===(null==n?void 0:n.attributeConfigurable)&&this.style.attributeColor){var i=Vn.getAttributeIndex(t,null!=(e=n.attributeList)?e:[])+1;return this.style.attributeColor[i]}var a=this.style,r=a.color,o=a.toolColor;return o?o[r]:di.toolColor[1]}},{key:"getLineColor",value:function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!0===(null==(e=this.config)?void 0:e.attributeConfigurable)){var a=Vn.getAttributeIndex(i,null!=(n=null==(t=this.config)?void 0:t.attributeList)?n:[])+1;return this.style.attributeLineColor?this.style.attributeLineColor[a]:""}var r=this.style,o=r.color,c=r.lineColor;return o&&c?c[o]:""}},{key:"clearInvalidPage",value:function(){this._invalidDOM&&this.container&&this.container.contains(this._invalidDOM)&&(this.container.removeChild(this._invalidDOM),this._invalidDOM=void 0)}},{key:"renderInvalidPage",value:function(){!this.container||this._invalidDOM||(this._invalidDOM=vi.renderInvalidPage(this.container,this.size,this.lang))}},{key:"renderBasicCanvas",value:function(){if(this.basicCanvas){this.clearBasicCanvas(),this.drawImg();if(!this.forbidBasicResultRender&&this.basicResult&&this.dependToolName)switch(this.dependToolName){case O.Rect:ti.drawRect(this.basicCanvas,mt.changeRectByZoom(this.basicResult,this.zoom,this.currentPos),{color:"rgba(204,204,204,1.00)",thickness:3});break;case O.Polygon:ti.drawPolygonWithFillAndLine(this.basicCanvas,mt.changePointListByZoom(this.basicResult.pointList,this.zoom,this.currentPos),{fillColor:"transparent",strokeColor:"rgba(204,204,204,1.00)",isClose:!0,thickness:3});break;case O.Line:ti.drawLineWithPointList(this.basicCanvas,mt.changePointListByZoom(this.basicResult.pointList,this.zoom,this.currentPos),{color:"rgba(204,204,204,1.00)",thickness:3})}}}},{key:"render",value:function(){!this.canvas||!this.ctx||!this.imgNode||this.clearCanvas()}},{key:"changeStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultAttribute;this.emit("changeStyle",{attribute:e})}}]),n}(xi),Ei=function(){function e(t){var n=this;Object(u.a)(this,e),this.textKeyDown=function(e){if(e.stopPropagation(),e.keyCode===nn.Enter)n.submitTextarea(),n.appendToContainer()};var i=t.container,a=t.icon,r=t.color,o=t.getCurrentSelectedData,c=t.updateSelectedTextAttribute,l=t.width||164;this.container=i,this.getCurrentSelectedData=o,this.updateSelectedTextAttribute=c,this._textAttributeDOM=this.initTextAttributeDOM(),this._iconDOM=this.initIconDOM(a),this._textDOM=this.initTextDOM(l,J),this._textareaDOM=this.initTextareaDOM(l,r),this.appendToContainer()}return Object(d.a)(e,[{key:"isExit",get:function(){return!!this._textAttributeDOM&&this.container.contains(this._textAttributeDOM)}},{key:"isExitTextareaDOM",get:function(){return!!this._textareaDOM&&this.container.contains(this._textareaDOM)}},{key:"updateIcon",value:function(e){this._iconDOM&&(this._iconDOM.innerHTML=e)}},{key:"appendToContainer",value:function(){!this._textAttributeDOM||!this._textDOM||!this._iconDOM||(this.container.appendChild(this._textAttributeDOM),this._textAttributeDOM.appendChild(this._textDOM),this._textAttributeDOM.appendChild(this._iconDOM))}},{key:"initTextAttributeDOM",value:function(){var e=document.createElement("div");return e.setAttribute("id","textArea"),e}},{key:"initTextDOM",value:function(e,t){var n=document.createElement("span");return n.setAttribute("style","\n        width: ".concat(Math.max(e,30),"px;\n        line-height: ").concat(t,"px;\n        word-break: break-all;\n        white-space: pre-line;\n        font-style: italic;\n      ")),n}},{key:"initIconDOM",value:function(e){var t=this,n=document.createElement("div");return n.setAttribute("id","annotation_text"),n.innerHTML=e,n.addEventListener("mouseup",(function(e){e.stopPropagation(),t.renderTextarea()})),n.addEventListener("mousedown",(function(e){e.stopPropagation()})),n.addEventListener("contextmenu",(function(e){e.stopPropagation()})),n.setAttribute("style","\n        position: absolute;\n        left: -20px;\n        top: 4px;\n        cursor: pointer;\n        z-index: 10\n      "),n}},{key:"initTextareaDOM",value:function(e,t){var n=document.createElement("textarea");return n.addEventListener("click",(function(e){e.stopPropagation()})),n.addEventListener("mouseup",(function(e){e.stopPropagation()})),n.setAttribute("style","\n      background-color: transparent;\n      border-radius: 5px;\n      border-color: ".concat(t,";\n      outline: none;\n      resize: none;\n      width: ").concat(Math.max(e,30),"px;\n      ")),n.setAttribute("maxLength","".concat(X)),n}},{key:"removeTextDOM",value:function(){!this._textAttributeDOM||this._textDOM&&this._textAttributeDOM.removeChild(this._textDOM)}},{key:"removeIconDOM",value:function(){!this._textAttributeDOM||this._iconDOM&&this._textAttributeDOM.removeChild(this._iconDOM)}},{key:"removeTextareaDOM",value:function(){var e,t;this._textareaDOM&&this._textAttributeDOM&&(null==(e=this._textAttributeDOM)?void 0:e.contains(this._textareaDOM))&&(null==(t=this._textAttributeDOM)||t.removeChild(this._textareaDOM))}},{key:"submitTextarea",value:function(){var e;this._textareaDOM&&(this.updateSelectedTextAttribute(null==(e=this._textareaDOM)?void 0:e.value),this.removeTextareaDOM(),this.clearTextAttribute())}},{key:"clearTextAttribute",value:function(){this._textAttributeDOM&&this.container.contains(this._textAttributeDOM)&&this.container.removeChild(this._textAttributeDOM)}},{key:"renderTextarea",value:function(){if(this._textAttributeDOM&&this._textareaDOM){var e=this.getCurrentSelectedData();if(e){var t=e.width,n=void 0===t?164:t,i=e.textAttribute,a=e.color;this._textareaDOM.value="".concat(i),this._textareaDOM.setAttribute("style","\n      background-color: rgba(0,0,0,0.4);\n      border-radius: 5px;\n      border-color: ".concat(a,";\n      outline: none;\n      resize: none;\n      font-style: italic;\n      font-weight: 900;\n      text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.6);\n      width: ").concat(Math.max(n,30),"px;\n      ")),this._textareaDOM.setAttribute("maxLength","".concat(X)),this._textAttributeDOM.appendChild(this._textareaDOM),this.removeIconDOM(),this.removeTextDOM(),this._textareaDOM.focus(),this._textareaDOM.addEventListener("keydown",this.textKeyDown)}}}},{key:"update",value:function(e,t){var n,i=t.left,a=t.top,r=t.color,o=t.width,c=void 0===o?164:o,l=Math.max(c,30);null==(n=this._textAttributeDOM)||n.setAttribute("style","\n        position: absolute; \n        width: ".concat(l,"px;\n        font-size: 14px; \n        left:").concat(i,"px; \n        top: ").concat(a,"px; \n        color: ").concat(r,";\n      ")),this._textDOM&&(this._textDOM.innerHTML="".concat(e)),this._textareaDOM&&(this._textareaDOM.style.width="".concat(l,"px"),this._textareaDOM.style.borderColor="".concat(r))}},{key:"changeSelected",value:function(){this.isExitTextareaDOM&&this.submitTextarea()}}]),e}(),Di=Object.defineProperty,Mi=Object.defineProperties,Ni=Object.getOwnPropertyDescriptors,Ri=Object.getOwnPropertySymbols,ji=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable,Bi=function(e,t,n){return t in e?Di(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Hi=function(e,t){for(var n in t||(t={}))ji.call(t,n)&&Bi(e,n,t[n]);if(Ri){var i,a=Object(p.a)(Ri(t));try{for(a.s();!(i=a.n()).done;){n=i.value;_i.call(t,n)&&Bi(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Vi=function(e,t){return Mi(e,Ni(t))},Zi=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).setMarkerIndex=function(e){i.markerIndex=e},i.setMarkerIndexAndSelect=function(e){if(i.config.markerList){i.markerIndex=e;var t=i.config.markerList[e].value,n=i.currentPageResult.find((function(e){return e.label===t}));n&&(i.setSelectedID(n.id),!0===i.config.attributeConfigurable&&i.setDefaultAttribute(n.attribute)),i.emit("markIndexChange")}},i.getHoverRectID=function(e){var t=i.getCoordinateUnderZoom(e),n=Object(h.a)(i).currentShowList;if(n.length>0){if(i.selectedRectID){var a=Object(h.a)(i).selectedRect;if(a&&qt.isInRect(t,a,6,i.zoom))return a.id}var r=n.filter((function(e){return qt.isInRect(t,e,6,i.zoom)}));if(0===r.length)return"";if(1===r.length)return r[0].id;if(r.length>1)return r.map((function(e){return{size:e.width*e.height,id:e.id}})).sort((function(e,t){return e.size-t.size}))[0].id}return""},i.textChange=function(e){!0!==i.config.textConfigurable||!i.selectedRectID||(i.setRectList(Vn.textChange(e,i.selectedRectID,i.rectList),!0),i.emit("selectedChange"),i.render())},i.drawOutSideTarget=e.drawOutSideTarget||!1,i.rectList=[],i.isFlow=!0,i.config=Ye.jsonParser(e.config),i.hoverRectEdgeIndex=-1,i.hoverRectPointIndex=-1,i.markerIndex=0,i.setStyle(e.style),i.createNewDrawingRect=i.createNewDrawingRect.bind(Object(h.a)(i)),i.getDrawingRectWithRectList=i.getDrawingRectWithRectList.bind(Object(h.a)(i)),i.setSelectedIdAfterAddingDrawingRect=i.setSelectedIdAfterAddingDrawingRect.bind(Object(h.a)(i)),i.getCurrentSelectedData=i.getCurrentSelectedData.bind(Object(h.a)(i)),i.updateSelectedRectTextAttribute=i.updateSelectedRectTextAttribute.bind(Object(h.a)(i)),i.setSelectedID=i.setSelectedID.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"setResult",value:function(e){if(this.clearActiveStatus(),this.setRectList(e),this.hasMarkerConfig){var t=Ye.getNextMarker(this.getCurrentPageResult(e),this.config.markerList);t&&this.setMarkerIndex(t.index)}this.render()}},{key:"destroy",value:function(){Object(f.a)(Object(g.a)(n.prototype),"destroy",this).call(this),this._textAttributInstance&&this._textAttributInstance.clearTextAttribute()}},{key:"setConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.config=Ye.jsonParser(e),!0===t&&this.clearResult(!1)}},{key:"setRectList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.rectList.length;this.rectList=e,n!==e.length&&this.emit("updatePageNumber"),t&&this.emit("updateResult")}},{key:"selectedRect",get:function(){var e=this;return this.rectList.find((function(t){return t.id===e.selectedRectID}))}},{key:"selectedID",get:function(){return this.selectedRectID}},{key:"selectedText",get:function(){var e;return null==(e=this.selectedRect)?void 0:e.textAttribute}},{key:"dataList",get:function(){return this.rectList}},{key:"currentShowList",get:function(){var e=[],t=Ye.getRenderResultList(this.rectList,Ye.getSourceID(this.basicResult),this.attributeLockList,this.selectedID),n=Object(s.a)(t,2),i=n[0],a=n[1];return e=i,this.isHidden&&(e=[]),a&&e.push(a),e}},{key:"currentPageResult",get:function(){var e=Ye.getRenderResultList(this.rectList,Ye.getSourceID(this.basicResult),[]);return Object(s.a)(e,1)[0]}},{key:"getCurrentPageResult",value:function(e){var t=Ye.getRenderResultList(e,Ye.getSourceID(this.basicResult),[]);return Object(s.a)(t,1)[0]}},{key:"setSelectedID",value:function(e){this.setSelectedRectID(e)}},{key:"setSelectedRectID",value:function(e){var t,n,i=this.selectedRectID;e!==i&&i&&(null==(t=this._textAttributInstance)||t.changeSelected()),e||null==(n=this._textAttributInstance)||n.clearTextAttribute(),this.selectedRectID=e,this.render(),this.emit("selectedChange")}},{key:"setStyle",value:function(e){var t;Object(f.a)(Object(g.a)(n.prototype),"setStyle",this).call(this,e),this._textAttributInstance&&!1===this.config.attributeConfigurable&&(null==(t=this._textAttributInstance)||t.updateIcon(this.getTextIconSvg()))}},{key:"updateSelectedRectTextAttribute",value:function(e){var t=this;if(this._textAttributInstance&&e){var n=e;!1===Vn.textAttributeValidate(this.config.textCheckType,"",n)&&(this.emit("messageError",Vn.getErrorNotice(this.config.textCheckType,this.lang)),n=""),this.setRectList(this.rectList.map((function(e){return e.id===t.selectedRectID?Vi(Hi({},e),{textAttribute:n}):e})),!0),this.emit("updateTextAttribute"),this.render()}}},{key:"getHoverRectPointIndex",value:function(e){return this.selectedRect?mt.returnClosePointIndex(this.getCoordinateUnderZoom(e),qt.getRectPointList(this.selectedRect,this.zoom),8):-1}},{key:"getHoverRectEdgeIndex",value:function(e){if(!this.selectedRect)return-1;for(var t=-1,n=this.selectedRect,i=qt.getRectEdgeList(n,this.zoom),a=this.getCoordinateUnderZoom(e),r=0;r<i.length;r++){var o=i[r];Ft.getFootOfPerpendicular(a,o.begin,o.end).length<16&&(t=r)}return t}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Vn.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"multiMoveMouseDown",value:function(e){var t=this.getCoordinateUnderZoom(e),n=this.getHoverRectID(e);return!(!this.isMultiMoveMode||!n||0!==e.button)&&(this.dragInfo={dragStartCoord:t,dragTarget:Z.Plane,startTime:+new Date,originRectList:this.rectList},this.dragStatus=Oe.Start,!0)}},{key:"onMouseDown",value:function(e){var t=this;if(!(Object(f.a)(Object(g.a)(n.prototype),"onMouseDown",this).call(this,e)||this.forbidMouseOperation||!0===e.ctrlKey||this.multiMoveMouseDown(e))){var i=this.getCoordinateUnderZoom(e),a=this.getHoverRectID(e),r=this.currentShowList.find((function(e){return e.id===t.selectedRectID}));if(r&&2!==e.button&&(0!==e.button||!0!==this.isSpaceKey)){if(this.selectedRectID){if(this.getHoverRectPointIndex(e)>-1){var o=Z.Point;return this.dragInfo={dragStartCoord:i,dragTarget:o,startTime:+new Date,firstRect:r},void(this.dragStatus=Oe.Start)}if(this.getHoverRectEdgeIndex(e)>-1){var c=Z.Line;return this.dragInfo={dragStartCoord:i,dragTarget:c,startTime:+new Date,firstRect:r},void(this.dragStatus=Oe.Start)}}if(a===this.selectedRectID&&!this.drawingRect){var l=Z.Plane;this.dragInfo={dragStartCoord:i,dragTarget:l,firstRect:r,startTime:+new Date},this.dragStatus=Oe.Start}}}}},{key:"onDragMoveAll",value:function(e){var t,n,i=this;!(null==(n=null==(t=this.dragInfo)?void 0:t.originRectList)?void 0:n.length)||(this.setRectList(this.dragInfo.originRectList.map((function(t){return Vi(Hi({},t),{x:t.x+e.x/i.zoom,y:t.y+e.y/i.zoom})}))),this.render())}},{key:"onDragMove",value:function(e){var t,n,i,a,r,o,c=this;if(this.dragInfo){var l={x:e.x-this.dragInfo.dragStartCoord.x,y:e.y-this.dragInfo.dragStartCoord.y};if(this.dragStatus=Oe.Move,this.isMultiMoveMode)this.onDragMoveAll(l);else if(this.dragInfo.firstRect){var s=qt.getRectUnderZoom(this.dragInfo.firstRect,this.zoom),u=s.x,d=s.y,h=s.width,f=s.height,g=this.rectList.filter((function(e){return e.id===c.selectedRectID}))[0];switch(this.dragInfo.dragTarget){case Z.Plane:g=Vi(Hi({},g),{x:u+l.x,y:d+l.y,width:h,height:f});break;case Z.Point:var v=u,b=d,p=h,m=f;switch(this.hoverRectPointIndex){case 0:v=h-l.x<0?u+h:u+l.x,b=f-l.y<0?d+f:d+l.y,p=Math.abs(l.x-h),m=Math.abs(l.y-f);break;case 1:v=h+l.x>0?u:u+h+l.x,b=f-l.y<0?d+f:d+l.y,p=Math.abs(h+l.x),m=Math.abs(f-l.y);break;case 2:v=h+l.x>0?u:u+h+l.x,b=f+l.y>0?d:d+f+l.y,p=Math.abs(h+l.x),m=f+l.y>0?f+l.y:Math.abs(f+l.y);break;case 3:v=h-l.x<0?u+h:u+l.x,b=f+l.y>0?d:d+f+l.y,p=Math.abs(l.x-h),m=f+l.y>0?f+l.y:Math.abs(f+l.y);break;default:return}g=Vi(Hi({},g),{x:v,y:b,width:p,height:m});break;case Z.Line:var y=u,x=d,C=h,w=f;switch(this.hoverRectEdgeIndex){case 0:x=f-l.y<0?d+f:d+l.y,w=Math.abs(l.y-f);break;case 1:y=h+l.x>0?u:u+h+l.x,C=Math.abs(h+l.x);break;case 2:x=f+l.y>0?d:d+f+l.y,w=f+l.y>0?f+l.y:Math.abs(f+l.y);break;case 3:y=h-l.x<0?u+h:u+l.x,C=Math.abs(l.x-h);break;default:return}g=Vi(Hi({},g),{x:y,y:x,width:C,height:w});break;default:return}if(!1===this.config.drawOutsideTarget)if(this.basicResult){if((null==(n=null==(t=this.basicResult)?void 0:t.pointList)?void 0:n.length)>0&&qt.isRectNotInPolygon(g,me(this.basicResult.pointList,this.zoom)))return;var k=this.basicResult.x*this.zoom,I=this.basicResult.y*this.zoom,L=this.basicResult.width*this.zoom,P=this.basicResult.height*this.zoom;if(this.dragInfo.dragTarget!==Z.Plane&&(g.x<k-.01||g.y<I-.01||g.width>k+L-g.x+.01||g.height>I+P-g.y+.01))return;if(g.x<k&&(g.x=k),g.y<I&&(g.y=I),g.width>k+L-g.x)switch(this.dragInfo.dragTarget){case Z.Plane:g.x=k+L-h;break;case Z.Point:case Z.Line:l.x>0&&l.y>0&&(g.width=k+L-g.x);break;default:return}if(g.height>I+P-g.y&&this.dragInfo.dragTarget===Z.Plane)g.y=I+P-f}else if(g.x<0&&(g.x=0),g.y<0&&(g.y=0),this.imgInfo)if(this.dragInfo.dragTarget===Z.Plane)g.x+g.width>(null==(i=this.imgInfo)?void 0:i.width)&&(g.x=this.imgInfo.width-h),g.y+g.height>(null==(a=this.imgInfo)?void 0:a.height)&&(g.y=this.imgInfo.height-f);else if(g.x+g.width>(null==(r=this.imgInfo)?void 0:r.width)+.01||g.y+g.height>(null==(o=this.imgInfo)?void 0:o.height)+.01)return;this.setRectList(this.rectList.map((function(e){return e.id===g.id?qt.getRectUnderZoom(g,1/c.zoom):e}))),this.render()}}}},{key:"onMouseMove",value:function(e){var t,i;if(!Object(f.a)(Object(g.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var a=this.getCoordinateUnderZoom(e),r=mt.changeDrawOutsideTarget(a,{x:0,y:0},this.imgInfo,this.config.drawOutsideTarget,this.basicResult,this.zoom);if((this.selectedRectID||this.isMultiMoveMode)&&this.dragInfo)this.onDragMove(r);else{if(this.selectedRectID){var o=this.getHoverRectPointIndex(e);if(o!==this.hoverRectPointIndex)return this.hoverRectPointIndex=o,this.hoverRectEdgeIndex=-1,void this.render();if(-1===this.hoverRectPointIndex){var c=this.getHoverRectEdgeIndex(e);if(c!==this.hoverRectEdgeIndex)return this.hoverRectEdgeIndex=c,void this.render()}}var l=this.getHoverRectID(e),s=this.hoverRectID;if(this.hoverRectID=l,l!==s&&this.render(),this.drawingRect&&this.firstClickCoord){var u=this.firstClickCoord,d=u.x,h=u.y,v=this.drawingRect,b=v.width,p=v.height;if(b=Math.abs(d-r.x),p=Math.abs(h-r.y),r.x<d&&(d=r.x),r.y<h&&(h=r.y),!1===this.config.drawOutsideTarget){if((null==(i=null==(t=this.basicResult)?void 0:t.pointList)?void 0:i.length)>0&&qt.isRectNotInPolygon(Vi(Hi({},this.drawingRect),{x:d,y:h,width:b,height:p}),me(this.basicResult.pointList,this.zoom)))return;r.x<0&&(b=Math.abs(this.firstClickCoord.x),d=0),r.y<0&&(p=Math.abs(this.firstClickCoord.y),h=0),this.imgInfo&&(d+b>this.imgInfo.width&&(b=Math.abs(this.imgInfo.width-d)),h+p>this.imgInfo.height&&(p=Math.abs(this.imgInfo.height-h)))}this.drawingRect=Vi(Hi({},this.drawingRect),{x:d,y:h,width:b,height:p}),this.render()}}}}},{key:"setAttributeLockList",value:function(e){this.setSelectedRectID(void 0),Object(f.a)(Object(g.a)(n.prototype),"setAttributeLockList",this).call(this,e)}},{key:"setBasicResult",value:function(e){Object(f.a)(Object(g.a)(n.prototype),"setBasicResult",this).call(this,e),this.clearActiveStatus()}},{key:"setRectValidAndRender",value:function(e){!e||(this.setRectList(this.rectList.map((function(t){return t.id===e?Vi(Hi({},t),{valid:!t.valid}):t})),!0),this.render(),this.emit("updateResult"))}},{key:"createNewDrawingRect",value:function(e,t){if(this.imgInfo){var n=this.getCoordinateUnderZoom(e),i=mt.changeDrawOutsideTarget(n,{x:0,y:0},this.imgInfo,this.config.drawOutsideTarget,this.basicResult,this.zoom);if(this.setSelectedRectID(""),this.hoverRectID="",this.drawOutSideTarget&&(i.x<0&&(i.x=0),i.y<0&&(i.y=0)),this.drawingRect=Vi(Hi({},i),{width:0,height:0,attribute:this.defaultAttribute,valid:!e.ctrlKey,id:ii(8,62),sourceID:t,textAttribute:""}),this.hasMarkerConfig){var a=Ye.getNextMarker(this.currentPageResult,this.config.markerList,this.markerIndex);if(!a)return this.emit("messageInfo",cn.getMessagesByLocale($t.MarkerFinish,this.lang)),void(this.drawingRect=void 0);this.drawingRect&&(this.drawingRect=Vi(Hi({},this.drawingRect),{label:a.label})),this.markerIndex=a.index,this.emit("markIndexChange")}if(this.config.textConfigurable){var r;r=Vn.getTextAttribute(this.rectList.filter((function(e){return Ye.isSameSourceID(e.sourceID,t)})),this.config.textCheckType),this.drawingRect&&(this.drawingRect=Vi(Hi({},this.drawingRect),{textAttribute:r}))}if(Object.assign(this.drawingRect,{order:Ye.getMaxOrder(this.rectList.filter((function(e){return Ye.isSameSourceID(e.sourceID,t)})))+1}),this.firstClickCoord=Hi({},i),this.firstCurrentPos=Hi({},this.currentPos),this.dataInjectionAtCreation){var o=this.dataInjectionAtCreation(this.drawingRect);o&&Object.assign(this.drawingRect,o)}}}},{key:"addDrawingRectToRectList",value:function(){if(this.drawingRect){var e=this.drawingRect,t=e.width,n=e.height;if(t/=this.zoom,n/=this.zoom,Math.round(t)<this.config.minWidth||Math.round(n)<this.config.minHeight)return this.emit("messageInfo",cn.getMessagesByLocale($t.RectErrorSizeNotice,this.lang)),this.drawingRect=void 0,this.firstClickCoord=void 0,this.dragInfo=void 0,this.dragStatus=Oe.Wait,void this.render();var i=this.getDrawingRectWithRectList();this.setRectList(i,!0),this.history.pushHistory(this.rectList),this.setSelectedIdAfterAddingDrawingRect(),this.firstClickCoord=void 0,this.drawingRect=void 0,this.dragInfo=void 0,this.dragStatus=Oe.Wait}}},{key:"setSelectedIdAfterAddingDrawingRect",value:function(){!this.drawingRect||(this.config.textConfigurable?this.setSelectedRectID(this.drawingRect.id):this.setSelectedRectID())}},{key:"getDrawingRectWithRectList",value:function(){if(!this.drawingRect)return this.rectList;var e=this.drawingRect,t=e.x,n=e.y,i=e.width,a=e.height;return t/=this.zoom,n/=this.zoom,i/=this.zoom,a/=this.zoom,[].concat(Object(l.a)(this.rectList),[Vi(Hi({},this.drawingRect),{x:t,y:n,width:i,height:a})])}},{key:"rightMouseUp",value:function(e){var t=this.getHoverRectID(e),n=this.rectList.find((function(e){return e.id===t})),i=this.selectedRectID;if(this.setSelectedRectID(void 0),n&&this.setDefaultAttribute(n.attribute),this.drawingRect)this.drawingRect=void 0,this.firstClickCoord=void 0;else if(i!==t&&this.dblClickListener.clearRightDblClick(),this.setSelectedRectID(t),this.hoverRectID="",(null==n?void 0:n.label)&&this.hasMarkerConfig){var a=Ye.getCurrentMarkerIndex(n.label,this.config.markerList);a>=0&&(this.setMarkerIndex(a),this.emit("markIndexChange"))}this.render()}},{key:"shiftRightMouseUp",value:function(e){var t=this.getHoverRectID(e);this.emit("shiftRightMouseUp",t)}},{key:"onMouseUp",value:function(e){if(Object(f.a)(Object(g.a)(n.prototype),"onMouseUp",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;if(this.dragInfo&&this.dragStatus===Oe.Move)return this.dragInfo=void 0,this.dragStatus=Oe.Wait,this.history.pushHistory(this.rectList),void this.emit("updateResult");if(this.isMultiMoveMode&&this.setOperationMode(te.General),2!==e.button||!0!==e.shiftKey)if(2!==e.button){var t=Ye.getSourceID(this.basicResult);this.drawingRect?this.addDrawingRectToRectList():!0===e.ctrlKey&&0===e.button&&this.hoverRectID?this.setRectValidAndRender(this.hoverRectID):(this.createNewDrawingRect(e,t),this.render())}else this.rightMouseUp(e);else this.shiftRightMouseUp(e)}},{key:"onRightDblClick",value:function(e){Object(f.a)(Object(g.a)(n.prototype),"onRightDblClick",this).call(this,e);var t=this.getHoverRectID(e);this.selectedRectID&&this.selectedRectID===t&&this.deleteRect(t)}},{key:"onKeyDown",value:function(e){if(Ye.hotkeyFilter(e)&&!1!==Object(f.a)(Object(g.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode;switch(t){case nn.Ctrl:this.drawingRect&&(this.drawingRect=Vi(Hi({},this.drawingRect),{valid:!e.ctrlKey}),this.render());break;case nn.F:this.selectedRectID&&this.setRectValidAndRender(this.selectedRectID);break;case nn.Z:this.setIsHidden(!this.isHidden),this.render();break;case nn.Delete:this.deleteRect(this.selectedRectID);break;case nn.Tab:if(e.preventDefault(),this.drawingRect)return;var i=Te.ascend;e.shiftKey&&(i=Te.descend);var a=Ye.getRenderResultList(this.rectList,Ye.getSourceID(this.basicResult),this.attributeLockList,this.selectedRectID),r=Object(s.a)(a,2),o=r[0],c=r[1],u=Object(l.a)(o);c&&(u=[].concat(Object(l.a)(u),[c]));var d=Zn.getViewPort(this.canvas,this.currentPos,this.zoom);u=u.filter((function(e){return Zn.inViewPort({x:e.x,y:e.y},d)}));var h=Ye.getNextSelectedRectID(u,i,this.selectedRectID);h&&(this.setSelectedRectID(h.id),!0===this.config.attributeConfigurable&&this.setDefaultAttribute(h.attribute));break;default:if(this.config.attributeConfigurable){var v=Vn.getAttributeByKeycode(t,this.config.attributeList);void 0!==v&&this.setDefaultAttribute(v)}}return!0}}},{key:"onKeyUp",value:function(e){if(Object(f.a)(Object(g.a)(n.prototype),"onKeyUp",this).call(this,e),e.keyCode===nn.Ctrl)this.drawingRect&&(this.drawingRect=Vi(Hi({},this.drawingRect),{valid:!0}),this.render())}},{key:"onWheel",value:function(e){var t,i,a=this.zoom;this.drawingRect&&this.firstClickCoord&&(t=qt.getRectUnderZoom(this.drawingRect,1/a),i=mt.changePointByZoom(this.firstClickCoord,1/a)),Object(f.a)(Object(g.a)(n.prototype),"onWheel",this).call(this,e,!1),t&&i&&(this.drawingRect=qt.getRectUnderZoom(t,this.zoom),this.firstClickCoord=mt.changePointByZoom(i,this.zoom)),this.render()}},{key:"getCurrentSelectedData",value:function(){var e=this.selectedRect;if(e){var t=this.getColor(e.attribute),n=e.valid?null==t?void 0:t.valid.stroke:null==t?void 0:t.invalid.stroke;return{width:e.width*this.zoom*.6,textAttribute:e.textAttribute,color:n}}}},{key:"getRenderStyle",value:function(e){var t=this.customRenderStyle&&this.customRenderStyle(e);if(t)return t;var n,i,a=this.getColor(e.attribute);return!1===e.valid?(n=null==a?void 0:a.invalid.stroke,i=null==a?void 0:a.invalid.fill):(n=null==a?void 0:a.valid.stroke,i=null==a?void 0:a.valid.fill),{strokeColor:n,fillColor:i,textColor:n,toolColor:a}}},{key:"renderTextAttribute",value:function(){var e,t=this.selectedRect;if(this.ctx&&!0===this.config.textConfigurable&&t){var n=t.x,i=t.y,a=t.width,r=t.height,o=t.attribute,c=t.valid,l=a*this.zoom*.6,s=mt.getOffsetCoordinate({x:n,y:i+r},this.currentPos,this.zoom),u=this.getColor(o),d=c?null==u?void 0:u.valid.stroke:null==u?void 0:u.invalid.stroke;this._textAttributInstance||(this._textAttributInstance=new Ei({width:l,container:this.container,icon:this.getTextIconSvg(o),color:d,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedRectTextAttribute})),this._textAttributInstance&&!(null==(e=this._textAttributInstance)?void 0:e.isExit)&&this._textAttributInstance.appendToContainer(),this._textAttributInstance.update("".concat(t.textAttribute),{left:s.x,top:s.y+4,color:d,width:l})}}},{key:"renderSelectedRect",value:function(e){var t=this;if(this.ctx&&e){var n=this.ctx,i=10,a=qt.getRectPointList(e),r=a.length,o=this.getColor(e.attribute);a.forEach((function(c,l){var s,u;if(n.save(),n.moveTo(c.x,c.y),n.beginPath(),i=t.hoverRectPointIndex===l?12:6,!1===e.valid?(n.strokeStyle=null==o?void 0:o.invalid.stroke,n.fillStyle=null==o?void 0:o.invalid.stroke):(n.strokeStyle=null==o?void 0:o.valid.stroke,n.fillStyle=null==o?void 0:o.valid.stroke),n.arc(c.x*t.zoom+t.currentPos.x,c.y*t.zoom+t.currentPos.y,i,0,2*Math.PI),n.fill(),t.hoverRectEdgeIndex===l){n.beginPath(),n.lineWidth=10;var d=t.getColor(e.attribute),h=!1===e.valid?null==(s=null==d?void 0:d.invalid)?void 0:s.stroke:null==(u=null==d?void 0:d.valid)?void 0:u.stroke;n.strokeStyle=h,n.moveTo(a[l].x*t.zoom+t.currentPos.x,a[l].y*t.zoom+t.currentPos.y),n.lineTo(a[(l+1)%r].x*t.zoom+t.currentPos.x,a[(l+1)%r].y*t.zoom+t.currentPos.y),n.stroke()}n.restore()})),this.renderTextAttribute()}}},{key:"renderDrawingRect",value:function(e){var t,n,i,a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.ctx&&e){var c=this.ctx,l=this.style,s=l.hiddenText,u=void 0!==s&&s;c.save();var d=this.getRenderStyle(e),h=d.strokeColor,f=d.fillColor,g=d.textColor;c.font="lighter 14px Arial";var v="";(null==(t=this.config)?void 0:t.isShowOrder)&&e.order&&(null==e?void 0:e.order)>0&&(v="".concat(e.order)),e.label&&this.hasMarkerConfig&&(v="".concat(Ye.getCurrentMarkerIndex(e.label,this.config.markerList)+1,"_").concat(ni.getMarkerShowText(e.label,this.config.markerList))),e.attribute&&(v="".concat(v,"  ").concat(Vn.getAttributeShowText(e.attribute,null==(n=this.config)?void 0:n.attributeList)));var b=mt.changeRectByZoom(e,o?r:this.zoom,this.currentPos);u||ti.drawText(this.canvas,{x:b.x,y:b.y-6},v,Vi(Hi({color:h,font:"normal normal 900 14px SourceHanSansCN-Regular"},Re),{textMaxWidth:300}));var p=null!=(a=null==(i=this.style)?void 0:i.width)?a:2;(e.id===this.hoverRectID||e.id===this.selectedRectID||this.isMultiMoveMode)&&ti.drawRectWithFill(this.canvas,b,{color:f}),ti.drawRect(this.canvas,b,{color:h,thickness:p,hiddenText:!0}),c.restore();var m="".concat(Math.round(e.width)," * ").concat(Math.round(e.height));!0===o&&(m="".concat(Math.round(e.width/this.zoom)," * ").concat(Math.round(b.height/this.zoom)));var y=7*m.length;if(u||ti.drawText(this.canvas,{x:b.x+b.width-y,y:b.y+b.height+15},m,Hi({color:g,font:"normal normal 600 14px Arial"},Re)),!u&&e.textAttribute&&e.id!==this.selectedRectID){var x=0,C=Math.max(20,b.width-y);ti.drawText(this.canvas,{x:b.x,y:b.y+b.height+20+x},e.textAttribute,Hi({color:g,font:"italic normal 900 14px Arial",textMaxWidth:C},Re))}}}},{key:"renderMultiSelectedRect",value:function(){var e=this;!this.isMultiMoveMode||this.rectList.forEach((function(t){e.renderDrawingRect(t),e.renderSelectedRect(t)}))}},{key:"renderStaticRect",value:function(){var e,t=this;if((null==(e=this.rectList)?void 0:e.length)>0&&JSON.stringify(this.rectList)){var n=this.renderEnhance,i=void 0===n?{}:n,a=Ye.getRenderResultList(this.rectList,Ye.getSourceID(this.basicResult),this.attributeLockList,this.selectedRectID),r=Object(s.a)(a,2),o=r[0],c=r[1];this.isHidden||null==o||o.forEach((function(e){t.renderDrawingRect(e),i.staticRender&&i.staticRender(t.canvas,mt.changeRectByZoom(e,t.zoom,t.currentPos),t.getRenderStyle(e))})),c&&(this.renderDrawingRect(c),this.renderSelectedRect(c),i.selectedRender&&i.selectedRender(this.canvas,mt.changeRectByZoom(c,this.zoom,this.currentPos),this.getRenderStyle(c)))}}},{key:"renderCreatingRect",value:function(){if(this.drawingRect){var e=this.renderEnhance,t=void 0===e?{}:e;this.renderDrawingRect(this.drawingRect,1,!0),t.creatingRender&&t.creatingRender(this.canvas,mt.changeRectByZoom(this.drawingRect,1,this.currentPos),this.getRenderStyle(this.drawingRect))}}},{key:"renderRect",value:function(){if(this.operationMode===te.MultiMove)this.renderMultiSelectedRect();else this.renderStaticRect(),this.renderCreatingRect()}},{key:"render",value:function(){!this.ctx||(Object(f.a)(Object(g.a)(n.prototype),"render",this).call(this),this.renderRect(),this.renderCursorLine(this.getLineColor(this.defaultAttribute)))}},{key:"setDefaultAttribute",value:function(e){var t=this,n=this.defaultAttribute;if((this.defaultAttribute=null!=e?e:"",n!==e)&&(this.changeStyle(e),this.emit("changeAttributeSidebar"),this.selectedRect&&(this.setRectList(this.rectList.map((function(e){return e.id===t.selectedID?Vi(Hi({},e),{attribute:t.defaultAttribute}):e})),!0),this.history.pushHistory(this.rectList),this.render()),this.drawingRect&&(this.drawingRect=Vi(Hi({},this.drawingRect),{attribute:this.defaultAttribute}),this.render()),this._textAttributInstance)){if(this.attributeLockList.length>0&&!this.attributeLockList.includes(this.defaultAttribute))return void this._textAttributInstance.clearTextAttribute();this._textAttributInstance.updateIcon(this.getTextIconSvg(e))}}},{key:"setValid",value:function(e){Object(f.a)(Object(g.a)(n.prototype),"setValid",this).call(this,e),this.emit("updateResult")}},{key:"clearActiveStatus",value:function(){this.drawingRect=void 0,this.firstClickCoord=void 0,this.dragInfo=void 0,this.dragStatus=Oe.Wait,this.setSelectedRectID(void 0),this.setOperationMode(te.General)}},{key:"clearResult",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.rectList.filter((function(e){return!0===e.disableDelete}));t.length>0&&e&&this.emit("messageInfo",cn.getMessagesByLocale($t.ClearPartialData,this.lang)),this.setRectList(t,!0),this.setSelectedRectID(void 0)}},{key:"deleteRect",value:function(e){var t;if(e){var n=this.rectList.find((function(t){return t.id===e}));!0!==(null==n?void 0:n.disableDelete)?(this.setRectList(this.rectList.filter((function(t){return t.id!==e})),!0),this.history.pushHistory(this.rectList),this.setSelectedRectID(void 0),null==(t=this._textAttributInstance)||t.clearTextAttribute(),this.render()):this.emit("messageInfo",cn.getMessagesByLocale($t.DisableDelete,this.lang))}}},{key:"exportData",value:function(){return[this.rectList,this.basicImgInfo]}},{key:"undo",value:function(){var e=this.history.undo();e&&(e.length!==this.rectList.length&&this.setSelectedRectID(""),this.setRectList(e,!0),this.render())}},{key:"redo",value:function(){var e=this.history.redo();e&&(e.length!==this.rectList.length&&this.setSelectedRectID(""),this.setRectList(e,!0),this.render())}}]),n}(Ai),Fi=Object.defineProperty,zi=Object.getOwnPropertySymbols,Ui=Object.prototype.hasOwnProperty,Gi=Object.prototype.propertyIsEnumerable,Wi=function(e,t,n){return t in e?Fi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ki=function(e,t){for(var n in t||(t={}))Ui.call(t,n)&&Wi(e,n,t[n]);if(zi){var i,a=Object(p.a)(zi(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Gi.call(t,n)&&Wi(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Yi=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getTagKeyName",value:function(e,t){var n,i;if(t)return null!=(i=null==(n=t.find((function(t){return t.value===e})))?void 0:n.key)?i:""}},{key:"getTagName",value:function(e,t){var n=Object(s.a)(e,2),i=n[0],a=void 0===i?"":i,r=n[1],o=void 0===r?"":r;if(t){var c,l=Object(p.a)(t);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(u.value===a){if(!u.subSelected)return console.error("\u6807\u7b7e\u89e3\u6790\u9519\u8bef",a,o),"";var d,h=Object(p.a)(u.subSelected);try{for(h.s();!(d=h.n()).done;){var f=d.value;if(f.value===o)return f.key}}catch(g){h.e(g)}finally{h.f()}}}}catch(g){l.e(g)}finally{l.f()}}}},{key:"getTagNameList",value:function(e,t){var n=this;return Object.keys(e).length<=0?[]:Object.entries(e).reduce((function(e,i){var a=Object(s.a)(i,2),r=a[0],o=a[1];if(o&&o.length>0){var c=o.split(";"),u={keyName:n.getTagKeyName(r,t),value:c.map((function(e){return n.getTagName([r,e],t)}))};return[].concat(Object(l.a)(e),[u])}return e}),[]).filter((function(e){return e}))}},{key:"getTagnameListWithoutConfig",value:function(e){return Object.keys(e).length<=0?[]:Object.entries(e).reduce((function(e,t){var n=Object(s.a)(t,2),i={keyName:n[0],value:n[1].split(";")};return[].concat(Object(l.a)(e),[i])}),[]).filter((function(e){return e}))}},{key:"judgeResultIsInInputList",value:function(e,t,n){return!!(e&&t&&n)&&n.filter((function(n){if(n.value===e&&n.subSelected){var i=null==t?void 0:t.split(";");return(null==n?void 0:n.subSelected.filter((function(e){return i.indexOf(e.value)>-1})).length)>0}return!1})).length>0}},{key:"getDefaultResultByConfig",value:function(e){return e.reduce((function(e,t){return t.subSelected&&t.subSelected.forEach((function(n){var i;if(n.isDefault){var a=null!=(i=e[t.value])?i:"",r=[];a.length>0&&(r=a.split(";")),r.push(n.value),e[t.value]=r.join(";")}})),e}),{})}},{key:"getDefaultTagResult",value:function(e,t){var n=this.getDefaultResultByConfig(e);return t.length>0?t.map((function(e){return{id:ii(),sourceID:e.id,result:Ki({},n)}})):[{id:ii(),sourceID:"",result:Ki({},n)}]}}]),e}(),Xi=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).getInitResultList=function(e,t){return 0!==e&&void 0!==e&&0===t.length?[]:Yi.getDefaultTagResult(i.config.inputList,t)},i.setLabel=function(e,t){var n,a;if(!(i.isImgError||!i.basicResult&&i.dependToolName)){var r=i.config.inputList;if(r[e]){var o=r[e].subSelected;if(e<r.length&&r[e].subSelected&&o&&t<o.length){var c=r[e].value,l=null==(n=o[t])?void 0:n.value,s=null==(a=r[e])?void 0:a.isMulti,u=i.tagResult.filter((function(e){var t="".concat(e.sourceID);return Ye.isSameSourceID(t,i.sourceID)}))[0];if(u){var d=0,h=u.result;for(var f in 0===u.sourceID&&(u.sourceID="0"),u.result)if(f===r[e].value){if(d++,!0===s){var g=h[f].split(";").filter((function(e){return""!==e})),v=g.indexOf(l);-1===v?g.push(l):g.splice(v,1),l=g.join(";")}""===l?1===Object.keys(h).length?i.tagResult=i.tagResult.filter((function(e){var t="".concat(e.sourceID);return Ye.isDifferSourceID(t,i.sourceID)})):Object.keys(h).length>1&&delete h[f]:h[f]=l}0===d&&Object.assign(u.result,Object(E.a)({},c,l))}else i.tagResult=[{sourceID:i.sourceID,id:ii(8,62),result:Object(E.a)({},c,l)}];i.render()}}}},i.clearResult=function(){var e=arguments.length>1?arguments[1]:void 0;i.tagResult=e?i.tagResult.map((function(t){return(null==t?void 0:t.result[e])&&delete t.result[e],t})):[],i.render()},i.config=Ye.jsonParser(e.config),i.tagResult=[],i.labelSelectedList=[],i.setShowDefaultCursor(!0),i}return Object(d.a)(n,[{key:"destroy",value:function(){this.clearTag(),Object(f.a)(Object(g.a)(n.prototype),"destroy",this).call(this)}},{key:"setResult",value:function(e){this.tagResult=e,this.render()}},{key:"currentPageResult",get:function(){return[this.currentTagResult]}},{key:"currentTagResult",get:function(){var e,t=this;return null!=(e=this.tagResult.filter((function(e){var n="".concat(e.sourceID);return Ye.isSameSourceID(n,t.sourceID)}))[0])?e:{}}},{key:"sourceID",get:function(){return Ye.getSourceID(this.basicResult)}},{key:"onKeyDown",value:function(e){var t=this;if(Ye.hotkeyFilter(e)&&!1!==Object(f.a)(Object(g.a)(n.prototype),"onKeyDown",this).call(this,e)){var i=e.keyCode;if(i&&(i<=57&&i>=49||i<=105&&i>=97)){if(i-=i>57?97:49,1===this.config.inputList.length)return this.labelSelectedList=[0,i],this.setLabel(0,i),void setTimeout((function(){t.labelSelectedList=[],t.render()}),500);1===this.labelSelectedList.length?(this.labelSelectedList=[this.labelSelectedList[0],i],this.setLabel(this.labelSelectedList[0],i),setTimeout((function(){t.labelSelectedList=[],t.render()}),500)):(this.labelSelectedList=[i],this.emit("expend"))}}}},{key:"clearTag",value:function(){var e,t=null==(e=this.canvas)?void 0:e.parentNode,n=window.self.document.getElementById("tagToolTag");n&&t&&t.contains(n)&&(null==t||t.removeChild(n))}},{key:"renderTag",value:function(){var e,t,n,i,a,r;if(this.clearTag(),(null==(e=this.tagResult)?void 0:e.length)>0){var o=document.createElement("div"),c=Yi.getTagNameList(null!=(n=null==(t=this.currentTagResult)?void 0:t.result)?n:{},this.config.inputList);o.innerHTML=null!=(i=c.reduce((function(e,t){return"".concat(e).concat(t.keyName,": ").concat(t.value.join(" \u3001 "),"\n")}),""))?i:"",o.setAttribute("id","tagToolTag"),o.setAttribute("style","\n        position: absolute;\n        top: 0;\n        right: 0;\n        z-index: 5;\n      \n        padding: 0 20px;\n      \n        font-size: 15px;\n        color: white;\n        text-align: right;\n        line-height: 32px;\n        white-space: pre;\n      \n        background: rgba(102, 111, 255, 1);\n        opacity: 0.6;\n        clear: both;\n      "),null==(r=null==(a=this.canvas)?void 0:a.parentNode)||r.appendChild(o)}}},{key:"render",value:function(){this.renderTag(),Object(f.a)(Object(g.a)(n.prototype),"render",this).call(this),this.emit("render")}},{key:"exportData",value:function(){var e=this.tagResult;return this.isImgError&&(e=[]),[e,this.basicImgInfo]}}]),n}(Ai),Ji=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getStrokeAndFill",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.isSelected,a=void 0!==i&&i,r=n.isHover,o=void 0!==r&&r;return a?{stroke:t?e.validSelected.stroke:e.invalidSelected.stroke,fill:t?e.validSelected.fill:e.invalidSelected.fill}:o?{stroke:t?e.validHover.stroke:e.invalidHover.stroke,fill:t?e.validHover.fill:e.invalidHover.fill}:{stroke:t?e.valid.stroke:e.invalid.stroke,fill:t?e.valid.fill:e.invalid.fill}}},{key:"getStyle2String",value:function(e){if(e)return Object.entries(e).reduce((function(e,t){return"".concat(e," ").concat(t[0],": ").concat(t[1],";")}),"")}}]),e}(),Qi=Object.defineProperty,qi=Object.defineProperties,$i=Object.getOwnPropertyDescriptors,ea=Object.getOwnPropertySymbols,ta=Object.prototype.hasOwnProperty,na=Object.prototype.propertyIsEnumerable,ia=Math.pow,aa=function(e,t,n){return t in e?Qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ra=function(e,t){for(var n in t||(t={}))ta.call(t,n)&&aa(e,n,t[n]);if(ea){var i,a=Object(p.a)(ea(t));try{for(a.s();!(i=a.n()).done;){n=i.value;na.call(t,n)&&aa(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},oa=function(e,t){return qi(e,$i(t))},ca=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).setMarkerIndex=function(e){i.markerIndex=e},i.setMarkerIndexAndSelect=function(e){if(i.config.markerList){i.markerIndex=e;var t=i.config.markerList[e].value,n=i.currentPageResult.find((function(e){return e.label===t}));n&&(i.setSelectedID(n.id),!0===i.config.attributeConfigurable&&i.setDefaultAttribute(n.attribute)),i.emit("markIndexChange")}},i.textChange=function(e){!0!==i.config.textConfigurable||!i.selectedID||(i.setPointList(Vn.textChange(e,i.selectedID,i.pointList)),i.emit("selectedChange"),i.render())},i.isMinDistance=function(e){var t=mt.changePointByZoom(e,i.zoom);return i.pointList.some((function(e){var n=mt.changePointByZoom(e,i.zoom);return Ft.getLineLength(n,t)<.2}))},i.config=Ye.jsonParser(e.config),i.pointList=[],i.markerIndex=0,i.setStyle(e.style),i.createPoint=i.createPoint.bind(Object(h.a)(i)),i.getCurrentSelectedData=i.getCurrentSelectedData.bind(Object(h.a)(i)),i.updateSelectedTextAttribute=i.updateSelectedTextAttribute.bind(Object(h.a)(i)),i.setSelectedID=i.setSelectedID.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"dataList",get:function(){return this.pointList}},{key:"drawOutsideTarget",get:function(){var e;return null!=(e=this.config.drawOutsideTarget)?e:this.config.drawPointOut}},{key:"setNextMarker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pointList;if(this.hasMarkerConfig){var t=Ye.getNextMarker(this.getCurrentPageResult(e),this.config.markerList);t&&this.setMarkerIndexAndSelect(t.index)}}},{key:"setResult",value:function(e){this.clearActiveStatus(),this.setPointList(e),this.setNextMarker(e),this.recoverOperationMode(),this.render()}},{key:"setPointList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.pointList.length;this.pointList=e,n!==e.length&&this.emit("updatePageNumber"),t&&this.emit("updateResult")}},{key:"setConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.config=Ye.jsonParser(e),!0===t&&this.clearResult()}},{key:"clearResult",value:function(){this.setPointList([]),this.setSelectedID(void 0),this.history.pushHistory([]),this.hoverID="",this.render()}},{key:"setDefaultAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.defaultAttribute;if(this.defaultAttribute=e,t!==e){this.changeStyle(e),this.emit("changeAttributeSidebar");var n=this.selectedID;if(n&&(this.pointList.forEach((function(t){t.id===n&&(t.attribute=e)})),this.history.pushHistory(this.pointList),this.render()),this._textAttributInstance){if(this.attributeLockList.length>0&&!this.attributeLockList.includes(e))return void this._textAttributInstance.clearTextAttribute();this._textAttributInstance.updateIcon(this.getTextIconSvg(e))}}}},{key:"selectedText",get:function(){var e,t=this;return null==(e=this.pointList.find((function(e){return e.id===t.selectedID})))?void 0:e.textAttribute}},{key:"setStyle",value:function(e){var t;Object(f.a)(Object(g.a)(n.prototype),"setStyle",this).call(this,e),this._textAttributInstance&&!1===this.config.attributeConfigurable&&(null==(t=this._textAttributInstance)||t.updateIcon(this.getTextIconSvg()))}},{key:"setSelectedID",value:function(e){var t,n,i=this.selectedID;e!==i&&i&&(null==(t=this._textAttributInstance)||t.changeSelected()),e||null==(n=this._textAttributInstance)||n.clearTextAttribute(),this.selectedID=e,this.render(),this.emit("selectedChange")}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Vn.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"clearActiveStatus",value:function(){this.hoverID=void 0,this.dragStatus=Oe.Wait,this.setSelectedID(void 0)}},{key:"setBasicResult",value:function(e){Object(f.a)(Object(g.a)(n.prototype),"setBasicResult",this).call(this,e),this.setNextMarker(),this.clearActiveStatus()}},{key:"onDragMoveAll",value:function(e){var t,n,i=this;!(null==(n=null==(t=this.dragInfo)?void 0:t.originPointList)?void 0:n.length)||(this.setPointList(this.dragInfo.originPointList.map((function(t){return oa(ra({},t),{x:t.x+e.x/i.zoom,y:t.y+e.y/i.zoom})}))),this.render())}},{key:"onMouseDown",value:function(e){if(!Object(f.a)(Object(g.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation)return 0!==e.button||this.hoverID?(this.hoverID===this.selectedID||this.isMultiMoveMode&&this.hoverID)&&0===e.button?(this.dragStatus=Oe.Start,void(this.isMultiMoveMode&&(this.dragInfo={dragStartCoord:this.getCoordinateUnderZoom(e),originPointList:this.pointList}))):(this.render(),!0):(this.recoverOperationMode(),this.createPoint(e),void this.render())}},{key:"onMouseMove",value:function(e){Object(f.a)(Object(g.a)(n.prototype),"onMouseMove",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo||(this.hoverID=this.getHoverId(),(this.dragStatus===Oe.Start||this.dragStatus===Oe.Move)&&this.onDragMove(e),this.hoverID&&this.render())}},{key:"onMouseUp",value:function(e){if(Object(f.a)(Object(g.a)(n.prototype),"onMouseUp",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;2===e.button&&this.rightMouseUp(),this.dragStatus===Oe.Move&&(this.history.pushHistory(this.pointList),this.dragInfo=void 0),this.dragStatus=Oe.Wait,this.render()}},{key:"onDragMove",value:function(e){var t,n,i=this;if(this.imgInfo){this.dragStatus=Oe.Move;var a=this.getCoordinateUnderZoom(e);if(this.isMultiMoveMode&&this.dragInfo){var r={x:a.x-this.dragInfo.dragStartCoord.x,y:a.y-this.dragInfo.dragStartCoord.y};this.onDragMoveAll(r)}else{var o=mt.changeDrawOutsideTarget(a,{x:0,y:0},this.imgInfo,this.drawOutsideTarget,this.basicResult,this.zoom),c=this.drawOutsideTarget?mt.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos):mt.changePointByZoom(o,1/this.zoom);!1===this.drawOutsideTarget&&this.dependToolName===O.Polygon&&(null==(n=null==(t=this.basicResult)?void 0:t.pointList)?void 0:n.length)>0&&!Pt.isInPolygon(c,this.basicResult.pointList)||(this.pointList.forEach((function(e){e.id===i.selectedID&&(e.x=c.x,e.y=c.y)})),this.render())}}}},{key:"onKeyDown",value:function(e){if(Ye.hotkeyFilter(e)&&!1!==Object(f.a)(Object(g.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode;switch(t){case nn.Delete:this.deletePoint();break;case nn.Tab:this.onTabKeyDown(e);break;case nn.Z:this.setIsHidden(!this.isHidden),this.render();break;default:if(this.config.attributeConfigurable){var i=Vn.getAttributeByKeycode(t,this.config.attributeList);void 0!==i&&this.setDefaultAttribute(i)}}}}},{key:"createPoint",value:function(e){var t,n,i,a;if(this.imgInfo){var r=this.config.upperLimit;if(r&&this.currentPageResult.length>=r)this.emit("messageInfo","".concat(cn.getMessagesByLocale($t.LowerLimitPoint,this.lang)));else{var o=Ye.getSourceID(this.basicResult),c=this.getCoordinateUnderZoom(e),s=mt.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos);if(this.config.edgeAdsorption&&this.referenceData&&[O.Polygon,O.Line].includes(null==(t=this.referenceData)?void 0:t.toolName)){var u=(null==(n=this.referenceData)?void 0:n.toolName)===O.Polygon,d=Pt.getClosestPoint(s,this.referenceData.result,null!=(a=null==(i=this.referenceData.config)?void 0:i.lineType)?a:B.Line,re/this.zoom,{isClose:u}),h=d.dropFoot;h&&(s=h),d.hasClosed&&this.emit("messageSuccess","".concat(cn.getMessagesByLocale($t.SuccessfulEdgeAdsorption,this.lang)))}if(!1===this.drawOutsideTarget){if(this.dependToolName&&this.basicCanvas){var f=!1;switch(this.dependToolName){case O.Rect:f=!qt.isInRect(s,this.basicResult);break;case O.Polygon:f=!Pt.isInPolygon(s,this.basicResult.pointList)}if(f)return}if(c.x<0||c.y<0||c.x>this.imgInfo.width||c.y>this.imgInfo.height)return}if(!this.isMinDistance(s)){var g=oa(ra({},s),{attribute:this.defaultAttribute,valid:!e.ctrlKey,id:ii(8,62),sourceID:o,textAttribute:"",order:Ye.getMaxOrder(this.pointList.filter((function(e){return Ye.isSameSourceID(e.sourceID,o)})))+1});if(this.config.textConfigurable){var v;v=Vn.getTextAttribute(this.pointList.filter((function(e){return Ye.isSameSourceID(e.sourceID,o)})),this.config.textCheckType),g=oa(ra({},g),{textAttribute:v})}if(this.hasMarkerConfig){var b=Ye.getNextMarker(this.currentPageResult,this.config.markerList,this.markerIndex);if(!b)return void this.emit("messageInfo",cn.getMessagesByLocale($t.MarkerFinish,this.lang));g=oa(ra({},g),{label:b.label}),this.markerIndex=b.index,this.emit("markIndexChange")}this.hoverID=g.id;var p=[].concat(Object(l.a)(this.pointList),[g]);this.setPointList(p),this.history.pushHistory(p),this.setSelectedID(g.id)}}}}},{key:"isInPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.zoom;return(this.style.width+2)/n>=Math.sqrt(ia(e.x-t.x,2)+ia(e.y-t.y,2))}},{key:"getHoverId",value:function(){var e,t=this,n=mt.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos),i=null==(e=this.pointList)?void 0:e.find((function(e){return t.isInPoint(n,e)}));return null==i?void 0:i.id}},{key:"rightMouseUp",value:function(){var e=this;if(this.recoverOperationMode(),this.selectedID===this.hoverID){var t=this.pointList.filter((function(t){return t.id!==e.selectedID}));return this.setPointList(t),this.history.pushHistory(t),this.setSelectedID(""),void(this.hoverID="")}var n=this.pointList.find((function(t){return t.id===e.hoverID}));if(this.setSelectedID(this.hoverID),this.setDefaultAttribute(null==n?void 0:n.attribute),(null==n?void 0:n.label)&&this.hasMarkerConfig){var i=Ye.getCurrentMarkerIndex(n.label,this.config.markerList);i>=0&&(this.setMarkerIndex(i),this.emit("markIndexChange"))}}},{key:"onTabKeyDown",value:function(e){if(e.preventDefault(),this.dragStatus!==Oe.Move&&this.dragStatus!==Oe.Start){var t=Te.ascend;e.shiftKey&&(t=Te.descend);var n=Ye.getRenderResultList(this.pointList,Ye.getSourceID(this.basicResult),this.attributeLockList,this.selectedID),i=Object(s.a)(n,2),a=i[0],r=i[1],o=Object(l.a)(a);r&&(o=[].concat(Object(l.a)(o),[r]));var c=Ye.getNextSelectedRectID(o,t,this.selectedID);c&&this.setSelectedID(c.id)}}},{key:"currentPageResult",get:function(){var e=Ye.getRenderResultList(this.pointList,Ye.getSourceID(this.basicResult),[]);return Object(s.a)(e,1)[0]}},{key:"getCurrentPageResult",value:function(e){var t=Ye.getRenderResultList(e,Ye.getSourceID(this.basicResult),[]);return Object(s.a)(t,1)[0]}},{key:"exportData",value:function(){return[this.pointList,this.basicImgInfo]}},{key:"deletePoint",value:function(){var e,t=this;this.selectedID&&(this.setPointList(this.pointList.filter((function(e){return e.id!==t.selectedID}))),this.history.pushHistory(this.pointList),null==(e=this._textAttributInstance)||e.clearTextAttribute(),this.emit("selectedChange"),this.render())}},{key:"undoAndRedo",value:function(e){var t,n,i=this;if(this.dragStatus!==Oe.Move&&this.dragStatus!==Oe.Start){var a=null==(n=(t=this.history)[e])?void 0:n.call(t);(null==a?void 0:a.some((function(e){return e.id===i.selectedID})))||this.setSelectedID(""),a&&(this.setPointList(a,!0),this.render())}}},{key:"undo",value:function(){this.undoAndRedo("undo")}},{key:"redo",value:function(){this.undoAndRedo("redo")}},{key:"getCurrentSelectedData",value:function(){var e,t=this;if(this.selectedID){var n=null==(e=this.pointList)?void 0:e.find((function(e){return e.id===t.selectedID})),i=this.getColor(null==n?void 0:n.attribute),a=(null==n?void 0:n.valid)?null==i?void 0:i.valid.stroke:null==i?void 0:i.invalid.stroke;return this.dragStatus=Oe.Wait,{width:200*this.zoom*.6,textAttribute:(null==n?void 0:n.textAttribute)||"",color:a}}}},{key:"updateSelectedTextAttribute",value:function(e){if(this._textAttributInstance&&e&&this.selectedID){var t=e;!1===Vn.textAttributeValidate(this.config.textCheckType,"",t)&&(this.emit("messageError",Vn.getErrorNotice(this.config.textCheckType,this.lang)),t=""),this.setPointList(Vn.textChange(t,this.selectedID,this.pointList)),this.emit("updateTextAttribute"),this.render()}}},{key:"renderTextAttribute",value:function(){var e,t,n=this,i=null==(e=this.pointList)?void 0:e.find((function(e){return e.id===n.selectedID}));if(this.ctx&&!0===this.config.textConfigurable&&i){var a=i.x,r=i.y,o=i.attribute,c=i.valid,l=200*this.zoom*.6,s=mt.getOffsetCoordinate({x:a,y:r},this.currentPos,this.zoom),u=this.getColor(o),d=c?null==u?void 0:u.valid.stroke:null==u?void 0:u.invalid.stroke;this._textAttributInstance||(this._textAttributInstance=new Ei({width:l,container:this.container,icon:this.getTextIconSvg(o),color:d,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedTextAttribute})),this._textAttributInstance&&!(null==(t=this._textAttributInstance)?void 0:t.isExit)&&this._textAttributInstance.appendToContainer(),this._textAttributInstance.update("".concat(i.textAttribute),{left:s.x,top:s.y+4,color:d,width:l})}}},{key:"renderPoint",value:function(e){var t,n,i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.textAttribute,o=void 0===r?"":r,c=e.attribute,l=a||e.id===this.selectedID,s=this.getColor(c),u=mt.changePointByZoom(e,this.zoom,this.currentPos),d=this.style,h=d.width,f=void 0===h?2:h,g=d.hiddenText,v=void 0!==g&&g,b=Ji.getStrokeAndFill(s,e.valid,{isSelected:l||e.id===this.hoverID});ti.drawCircle(this.canvas,u,f,{startAngleDeg:0,endAngleDeg:360,thickness:1,color:b.stroke,fill:b.fill});var p="";((null==(t=this.config)?void 0:t.isShowOrder)||(null==(n=this.config)?void 0:n.showOrder))&&e.order&&(null==e?void 0:e.order)>0&&(p="".concat(e.order)),e.label&&this.hasMarkerConfig&&(p="".concat(Ye.getCurrentMarkerIndex(e.label,this.config.markerList)+1,"_").concat(ni.getMarkerShowText(e.label,this.config.markerList))),e.attribute&&(p="".concat(p,"  ").concat(Vn.getAttributeShowText(e.attribute,null==(i=this.config)?void 0:i.attributeList))),v||ti.drawText(this.canvas,{x:u.x+f/2,y:u.y-f-4},p,{textAlign:"center",color:b.stroke}),l?this.renderTextAttribute():v||ti.drawText(this.canvas,{x:u.x+f,y:u.y+f+24},o,ra({color:b.stroke},Ne))}},{key:"renderMultiSelectedPoint",value:function(){var e=this;!this.isMultiMoveMode||this.pointList.forEach((function(t){e.renderPoint(t,!0)}))}},{key:"renderPointList",value:function(){var e=this;if(this.operationMode===te.MultiMove)this.renderMultiSelectedPoint();else{var t=Ye.getRenderResultList(this.pointList,Ye.getSourceID(this.basicResult),this.attributeLockList,this.selectedID),n=Object(s.a)(t,2),i=n[0],a=n[1];this.isHidden||i.forEach((function(t){e.renderPoint(t)})),a&&this.renderPoint(a)}}},{key:"renderAuxiliaryLine",value:function(){var e,t=this;if(this.config.markerConfigurable&&(null==(e=this.config.markerList)?void 0:e.length)){var n=Ye.getRenderResultList(this.pointList,Ye.getSourceID(this.basicResult),this.attributeLockList,this.selectedID),i=Object(s.a)(n,2),a=i[0],r=i[1],o=a;if(r&&o.push(r),!(o.length<2)){var c=ni.getAuxiliaryLineByMarkerList(this.config.markerList,"value");ni.getAuxiliaryLineCoord(c,o).forEach((function(e){var n=e.start,i=e.end,a=mt.changePointListByZoom([n,i],t.zoom,t.currentPos);ti.drawLine(t.canvas,a[0],a[1],{color:"#C5C5C5"})}))}}}},{key:"renderTop",value:function(){var e,t,n,i=this.getLineColor(this.defaultAttribute);if(this.renderCursorLine(i),this.config.edgeAdsorption&&this.referenceData){var a=mt.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos),r=(null==(e=this.referenceData)?void 0:e.toolName)===O.Polygon,o=Pt.getClosestPoint(a,this.referenceData.result,null!=(n=null==(t=this.referenceData.config)?void 0:t.lineType)?n:B.Line,re/this.zoom,{isClose:r}).dropFoot;o&&a!==o&&a!==o&&(a=o,ti.drawCircle(this.canvas,mt.changePointByZoom(a,this.zoom,this.currentPos),5,{color:"white",fill:"white"}),ti.drawCircle(this.canvas,mt.changePointByZoom(a,this.zoom,this.currentPos),3,{fill:i,color:i}))}}},{key:"render",value:function(){!this.ctx||(Object(f.a)(Object(g.a)(n.prototype),"render",this).call(this),this.renderAuxiliaryLine(),this.renderPointList(),this.renderTop())}}]),n}(Ai),la=Object.defineProperty,sa=Object.defineProperties,ua=Object.getOwnPropertyDescriptors,da=Object.getOwnPropertySymbols,ha=Object.prototype.hasOwnProperty,fa=Object.prototype.propertyIsEnumerable,ga=function(e,t,n){return t in e?la(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},va=function(e,t){for(var n in t||(t={}))ha.call(t,n)&&ga(e,n,t[n]);if(da){var i,a=Object(p.a)(da(t));try{for(a.s();!(i=a.n()).done;){n=i.value;fa.call(t,n)&&ga(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},ba=function(e,t){return sa(e,ua(t))};(yi=mi||(mi={}))[yi.Create=0]="Create",yi[yi.Active=1]="Active",yi[yi.None=2]="None";var pa=16,ma=0,ya=20,xa=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i,a,r,o;return Object(u.a)(this,n),(o=t.call(this,e)).drawActivatedLine=function(e,t,n){var i=Be.a.cloneDeep(o.activeLine);if(i&&0!==i.length){var a,r=o.isActiveLineValid(),c=o.selectedID?o.lineList.find((function(e){return e.id===o.selectedID})):void 0;a=c?c.order:o.nextOrder();var l=o.getLineColorByAttribute({attribute:o.defaultAttribute,valid:!!r});i.map((function(e){return Object.assign(e,{actual:{x:e.x,y:e.y}},o.coordUtils.getRenderCoord(e))})),o.isActive&&o.drawLineLength(i,l),o.updateActiveArea(),o.drawLine(i,e,l,!0,!0),o.drawLineNumber(i[0],a,l,"",o.defaultAttribute,r),e&&o.isCreate&&o.arc(e,3,l),o.cursor&&!o.selectedPoint&&!n&&!o.isShift&&o.arc(o.cursor,5,l)}},o.drawHoverPoint=function(e){if(!o.isMousedown&&e&&o.isLineSelected){var t,n=o.getPointList(o.activeLine),i=o.activeLine.find((function(t){return lt.calcDistance(o.coordUtils.getRenderCoord(t),e)<=5}));!i&&o.activeLine&&(t=o.findNearestPoint(n,e)),o.hoverPointID=i?i.id:void 0,o.cursor=i||null==t?void 0:t.point}},o.lineList=[],o.activeLine=[],o.coordsInsideActiveArea=!1,o.hoverLineSegmentIndex=-1,o.isShift=!1,o.isReference=!1,o.drawCurveLine=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5?arguments[5]:void 0,o=be(t,pa);e.save(),e.lineCap="round",e.lineJoin="round",e.strokeStyle=n.color,i&&(e.lineWidth=n.lineWidth),a&&lt.setReferenceCtx(e),t.forEach((function(t,n){var i=t.specialEdge,a=o.splice(0,17);e.save(),e.beginPath(),r===n&&(e.lineWidth=4),a.forEach((function(t,n){var a=t.x,r=t.y,o=n>0?"lineTo":"moveTo";i&&lt.setSpecialEdgeStyle(e),e[o](a,r)})),e.stroke(),e.restore()})),e.restore()},o.drawLine=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=t?e.concat(t):e,c={color:n,lineWidth:a?1:o.lineStyle.lineWidth};o.isCurve?lt.drawCurveLine(o.ctx,r,c,!i,o.isReference,a?o.hoverLineSegmentIndex:-1):o.drawStraightLine(r,c,a),i&&e.forEach((function(e){var t,i,a=e.id,r=a&&[o.hoverPointID,null==(t=o.selectedPoint)?void 0:t.id].includes(a)?5:3;o.arc(e,r,n),[o.hoverPointID,null==(i=o.selectedPoint)?void 0:i.id].includes(a)||o.arc(e,2,"white")}))},o.drawStraightLine=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(h.a)(o),a=i.ctx;a&&(a.save(),a.lineCap="round",a.lineJoin="round",a.strokeStyle=t.color,a.lineWidth=t.lineWidth,o.isReference&&lt.setReferenceCtx(a),e.forEach((function(t,i){if(a.beginPath(),i>0){var r=e[i-1];a.save(),(null==r?void 0:r.specialEdge)&&lt.setSpecialEdgeStyle(a),n&&o.hoverLineSegmentIndex+1===i&&(a.lineWidth=4),a.moveTo(r.x,r.y),a.lineTo(t.x,t.y),a.stroke(),a.restore()}})),a.restore())},o.drawLines=function(){try{var e=Be.a.cloneDeep(o.attributeFilteredLines);if(o.isHidden)return;e.forEach((function(e){if(e.id!==o.selectedID&&e.pointList){e.pointList.map((function(e){return Object.assign(e,{actual:{x:e.x,y:e.y}},o.coordUtils.getRenderCoord(e))}));var t=e.order,n=e.label,i=t,a=e&&o.getLineColorByAttribute(e);o.drawLine(e.pointList,void 0,a,!1),o.drawLineNumber(e.pointList[0],i,a,n,e.attribute,e.valid),e.id!==o.textEditingID&&(o.drawLineTextAttribute(e.pointList[1],a,null==e?void 0:e.textAttribute),o.drawLineLength(e.pointList,a))}}))}catch(e){console.error(e,"\u7ebf\u6761\u5de5\u5177\u6570\u636e\u89e3\u6790\u9519\u8bef"),o.lineList=[],o.clearCanvas()}},o.render=function(e){Object(f.a)((i=Object(h.a)(o),Object(g.a)(n.prototype)),"render",i).call(i),o.drawLines(),o.drawActivatedLine(e,void 0,!0),o.renderTextAttribute(),o.renderCursorLine(o.getLineColor(o.defaultAttribute))},o.moveLineInPolygon=function(e,t){var n;if(!Array.isArray(o.activeLine))return!1;(null==(n=o.activeLine)?void 0:n.every((function(n){return o.isInBasicPolygon({x:n.x+e,y:n.y+t})})))&&(o.lineDragging=!0,o.moveActiveArea(e,t))},o.moveLineInRectRange=function(e,t,n,i){if(void 0!==o.activeArea){var a=o.activeArea,r=a.top,c=a.left,l=a.right,s=a.bottom,u=[c,l].map((function(t){return Be.a.isNumber(t)?t+e:0})),d=[r,s].map((function(e){return Be.a.isNumber(e)?e+t:0})),h=c>=0&&l&&Ft.isInRange(u,n),f=r>=0&&s&&Ft.isInRange(d,i),g=h?e:0,v=f?t:0;o.lineDragging=!0,o.moveActiveArea(g,v)}},o.onRightClick=function(e){if(o.cursor=void 0,o.isCreate){if(o.isLinePointsNotEnough())return;o.stopLineCreating(!0)}else o.setActiveArea(o.getCoordinate(e),!0),o.emit("contextmenu")},o.updateSelectedAttributeAfterHistoryChanged=function(){if(o.selectedID){var e=o.lineList.find((function(e){return e.id===o.selectedID})),t=null==e?void 0:e.attribute;"string"==typeof t&&(o.defaultAttribute=t,o.updateAttribute(t),o.render())}},o.onLeftClick=function(e){var t=o.getCoordinate(e),n=Object(h.a)(o).lineDragging;if(o.lineDragging=!1,!o.isSpaceKey)if(o.isNone&&e.ctrlKey){var i=o.findHoverLine(t);i&&o.setInvalidLine(i.id)}else if(!o.isLinePointsExceed()){var a=o.getNextPoint(e,t);if(o.isCreate||o.isNone)o.setCreatStatusAndAddPoint(a);else if(o.isActive){if(n)return;if(o.isMouseCoordOutsideActiveArea())return o.setNoneStatus(!1),void o.setCreatStatusAndAddPoint(a);if(e.shiftKey)return void o.updateLineSegmentSpecial(t);if(o.coordsInsideActiveArea&&e.ctrlKey)return void o.setInvalidLine(o.selectedID);o.addLinePointToActiveLine()}}},o.onDblclick=function(){},o.onKeyUp=function(e){if(Object(f.a)((a=Object(h.a)(o),Object(g.a)(n.prototype)),"onKeyUp",a).call(a,e),o.isShift=!1,o.hoverLineSegmentIndex=-1,e.keyCode!==nn.Esc){if(o.isActive){if(e.keyCode===nn.Delete)return void o.deleteLine();if(e.keyCode===nn.F)return void o.setInvalidLine(o.selectedID);if(e.keyCode===nn.Space)return void o.continueToEdit()}o.keyboardEventWhileLineCreating(e)}else o.stopLineCreating(!1)},o.onRightDblClick=function(e){Object(f.a)((r=Object(h.a)(o),Object(g.a)(n.prototype)),"onRightDblClick",r).call(r,e);var t=o.getCoordinate(e);if(o.isActive){var i=o.findHoveredPoint(t);if(i)return void o.deleteSelectedLinePoint(i.id);o.deleteSelectedLine(t)}},o.setReference=function(e){o.isReference=e},o.pointsWithinRange=function(e){return!(o.lowerLimitPointNum&&e<o.lowerLimitPointNum||o.upperLimitPointNum&&e>o.upperLimitPointNum)},o.setLineList=function(e){var t=e.length!==o.lineListLen;o.lineList=e,t&&o.emit("updatePageNumber")},o.textChange=function(e){!1===o.config.textConfigurable||!o.selectedID||(o.updateSelectedTextAttribute(e),o.emit("selectedChange"))},o.status=2,o.isMousedown=!1,o.lineDragging=!1,o.isLineValid=!0,o.setConfig(e.config),o.prevAxis={x:0,y:0},o.textEditingID="",o.updateSelectedTextAttribute=o.updateSelectedTextAttribute.bind(Object(h.a)(o)),o.getCurrentSelectedData=o.getCurrentSelectedData.bind(Object(h.a)(o)),o.actionsHistory=new hi,o.dependToolConfig={lineType:B.Line},o}return Object(d.a)(n,[{key:"isLineSelected",get:function(){return this.selectedID&&this.activeLine}},{key:"selectedLinePoints",get:function(){return this.activeLine?this.getPointList(this.activeLine):[]}},{key:"isCreate",get:function(){return 0===this.status}},{key:"isActive",get:function(){return 1===this.status}},{key:"isNone",get:function(){return 2===this.status}},{key:"isCurve",get:function(){return this.config.lineType===B.Curve}},{key:"isMultipleColor",get:function(){return this.config.lineColor===H.MultiColor}},{key:"imageSize",get:function(){return this.rotate%180==0?this.basicImgInfo:{width:this.basicImgInfo.height,height:this.basicImgInfo.width}}},{key:"lineListLen",get:function(){return this.lineList.length}},{key:"edgeAdsorptionEnabled",get:function(){return this.edgeAdsorption&&!this.isCurve&&this.lineListLen>0}},{key:"attributeConfigurable",get:function(){return this.config.attributeConfigurable}},{key:"isTextConfigurable",get:function(){return this.config.textConfigurable}},{key:"isDependPolygon",get:function(){return this.dependToolName===O.Polygon}},{key:"isDependRect",get:function(){return this.dependToolName===O.Rect}},{key:"isCurrentAttributeLocked",get:function(){return this.attributeLockList.includes(this.defaultAttribute)}},{key:"attributeFilteredLines",get:function(){var e=this;return this.attributeLockList.length>0?this.lineList.filter((function(t){return e.attributeLockList.includes((null==t?void 0:t.attribute)||"")})):this.lineList}},{key:"enableOutOfTarget",get:function(){return this.config.enableOutOfTarget||this.config.outOfTarget||this.config.drawOutsideTarget}},{key:"showOrder",get:function(){var e;return null!=(e=this.config.showOrder)?e:this.config.isShowOrder}},{key:"edgeAdsorption",get:function(){return this.config.edgeAdsorption}},{key:"attributeList",get:function(){return this.config.attributeList}},{key:"lowerLimitPointNum",get:function(){return this.config.lowerLimitPointNum}},{key:"upperLimitPointNum",get:function(){return this.config.upperLimitPointNum}},{key:"textCheckType",get:function(){return this.config.textCheckType}},{key:"customFormat",get:function(){return this.config.customFormat}},{key:"dataList",get:function(){return this.lineList}},{key:"hasActiveLine",get:function(){return this.activeLine&&this.activeLine.length>0}},{key:"viewPortLines",get:function(){var e=Zn.getViewPort(this.canvas,this.currentPos,this.zoom);return this.isHidden?[]:this.attributeFilteredLines.filter((function(t){var n;return null==(n=null==t?void 0:t.pointList)?void 0:n.some((function(t){return Zn.inViewPort(t,e)}))}))}},{key:"lineStyle",get:function(){return{lineWidth:this.style.width,color:this.getLineColor(this.defaultAttribute),opacity:this.style.opacity}}},{key:"selectedText",get:function(){var e,t,n=this;return null!=(t=null==(e=this.lineList.find((function(e){return e.id===n.selectedID})))?void 0:e.textAttribute)?t:""}},{key:"currentPageResult",get:function(){return this.lineList}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e!==this.status){if(t){var n="";this.textCheckType===G.Order&&this.isTextConfigurable&&(n=Vn.getTextAttribute(this.lineList,this.textCheckType)),this.emit("updateText",n)}this.status=e,this.lineStatusChanged()}}},{key:"isInBasicPolygon",value:function(e){var t,n;return pe(e,(null==(t=this.basicResult)?void 0:t.pointList)||[],null==(n=this.dependToolConfig)?void 0:n.lineType)}},{key:"getPolygonPointList",value:function(){if(!this.basicResult)return[];var e=this.basicResult.pointList;return this.dependToolConfig.lineType===B.Curve?ve(e.reduce((function(e,t){return[].concat(Object(l.a)(e),[t.x,t.y])}),[]),.5,!0,20):e}},{key:"getNextCoordByRenderCoord",value:function(e){return this.getNextCoordByAbsCoord(this.coordUtils.getAbsCoord(e))}},{key:"getNextCoordByAbsCoord",value:function(e){var t,n=null==(t=this.activeLine)?void 0:t.slice(-1)[0];return n?this.coordUtils.getNextCoordByDependTool(e,n):e}},{key:"pointInLine",value:function(e,t,n){var i=this;return!(e.filter((function(e){return e})).length<2)&&e.some((function(a,r){if(0===r)return!1;var o=i.coordUtils.getRenderCoord(e[r-1]),c=i.coordUtils.getRenderCoord(a);return lt.isInLine(t,o,c,n)}))}},{key:"arc",value:function(e){var t,n,i,a,r,o,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,l=arguments.length>2?arguments[2]:void 0;if(this.ctx){var s=e.x,u=e.y;null==(t=this.ctx)||t.save(),null==(n=this.ctx)||n.beginPath(),this.ctx.fillStyle=l||this.lineStyle.color,null==(i=this.ctx)||i.arc(s,u,c,0,360),null==(a=this.ctx)||a.closePath(),null==(r=this.ctx)||r.fill(),null==(o=this.ctx)||o.restore()}}},{key:"renderActiveArea",value:function(){if(this.isActive&&this.activeArea&&this.ctx){var e=this.activeArea,t=e.top,n=e.left,i=e.right,a=e.bottom,r=this.coordUtils.getRenderCoord({x:n,y:t}),o=r.x,c=r.y;this.ctx.save(),this.ctx.beginPath(),this.ctx.strokeStyle="#B3B8FF",this.ctx.rect(o,c,(i-n)*this.zoom,(a-t)*this.zoom),this.ctx.stroke(),this.ctx.restore()}}},{key:"addLinePoint",value:function(e){var t,n,i,a;this.arc(e),null==(t=this.activeLine)||t.push(ba(va({},e),{id:ii()})),1===(null==(n=this.activeLine)?void 0:n.length)?null==(i=this.actionsHistory)||i.initRecord(this.activeLine):null==(a=this.actionsHistory)||a.pushHistory(this.activeLine),this.render()}},{key:"setCreatStatusAndAddPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.updateStatus(0,t),this.addLinePoint(e)}},{key:"isActiveLineValid",value:function(){var e,t=this;return this.selectedID?null==(e=this.lineList.find((function(e){return e.id===t.selectedID})))?void 0:e.valid:this.isLineValid}},{key:"nextOrder",value:function(){return 0===this.lineListLen?1:this.lineList.slice(-1)[0].order+1}},{key:"getLineColorByAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ji.getStrokeAndFill(this.getColor(e.attribute),e.valid,{isSelected:t}).stroke}},{key:"updateActiveArea",value:function(){this.activeArea=this.getActiveArea(),this.renderActiveArea()}},{key:"getActiveArea",value:function(){return this.hasActiveLine?Ft.calcViewportBoundaries(this.activeLine,this.isCurve,pa,this.zoom):void 0}},{key:"drawLineNumber",value:function(e){var t,n,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4?arguments[4]:void 0,l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if((this.showOrder||this.attributeConfigurable)&&this.ctx){var s=this.showOrder?a.toString():"".concat(o);if(this.attributeConfigurable){var u=c?null!=(i=null==(n=null==(t=this.attributeList)?void 0:t.find((function(e){return e.value===c})))?void 0:n.key)?i:c:"";s=[s,"".concat(!l&&u?"\u65e0\u6548":"").concat(u)].filter((function(e){return e})).join("_")}this.drawText(e,s,r)}}},{key:"drawLineTextAttribute",value:function(e,t,n){if(e&&n)return this.drawText(e,n,t,200)}},{key:"drawLineLength",value:function(e,t){var n;if((null==(n=this.config)?void 0:n.showLineLength)&&e){var i=e.reduce((function(t,n,i){return i<=0||!e[i-1].actual||!n.actual?t:t+lt.calcDistance(e[i-1].actual,n.actual)}),0),a=e[e.length-1];this.drawText(a,"l = ".concat(i.toFixed(2)),t)}}},{key:"drawText",value:function(e,t,n,i){var a,r;this.ctx&&(null==(a=this.ctx)||a.save(),this.ctx.font="italic bold 14px SourceHanSansCN-Regular",this.ctx.fillStyle=n,this.ctx.strokeStyle=n,this.ctx.shadowColor="rgba(0, 0, 0, 0.6)",this.ctx.shadowOffsetY=2,this.ctx.shadowBlur=4,i?ti.wrapText(this.canvas,t,e.x-ma,e.y-ya,i):this.ctx.fillText(t,e.x-ma,e.y-ya),null==(r=this.ctx)||r.restore())}},{key:"moveActiveArea",value:function(e,t){this.activeArea&&(this.activeArea=Object.assign(this.activeArea,{top:this.activeArea.top+t,bottom:this.activeArea.bottom+t,right:this.activeArea.right+e,left:this.activeArea.left+e})),this.activeLine&&(this.activeLine.map((function(n){return Object.assign(n,{x:n.x+e,y:n.y+t})})),this.updateLines())}},{key:"findHoveredPoint",value:function(e){var t=this;if(this.activeLine)return this.activeLine.find((function(n){var i=t.coordUtils.getRenderCoord(n);return lt.calcDistance(i,e)<=5}))}},{key:"findHoverLine",value:function(e){var t=this;return Be.a.cloneDeep(this.lineList).reverse().find((function(n){var i=n.pointList,a=i?t.getPointList(i):[],r=t.getLineWidthScope();return a.some((function(n,i){if(0===i)return!1;var o=t.coordUtils.getRenderCoord(n),c=t.coordUtils.getRenderCoord(a[i-1]);return lt.isInLine(e,o,c,r)}))}))}},{key:"getAdsorptionPoint",value:function(e){var t,n,i=this;return Be.a.cloneDeep(this.lineList).reverse().forEach((function(a){var r=a.pointList;if(a.id!==i.selectedID&&r&&!((null==r?void 0:r.length)<2)){var o=i.findNearestPoint(r,e);if(o){if(0===o.minDistance)return void(t=o.point);(void 0===n||o.minDistance<n)&&(t=o.point,n=o.minDistance)}}})),t}},{key:"findNearestPoint",value:function(e,t){for(var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,a=i,r=1;r<=e.length-1;r++){var o=this.coordUtils.getRenderCoord(e[r]),c=this.coordUtils.getRenderCoord(e[r-1]),l=Ft.getFootOfPerpendicular(t,o,c),s=l.length,u=l.footPoint,d=lt.calcTwoPointDistance(o,t),h=lt.calcTwoPointDistance(c,t);if(d<=2*i){n=o,i=0;break}if(h<=2*i){n=c,i=0;break}s<i&&(n=u,i=s)}return n?{point:n,minDistance:a}:void 0}},{key:"getPointList",value:function(e){return this.isCurve?be(e,pa):e}},{key:"moveSelectedLine",value:function(e){var t=(e.x-this.prevAxis.x)/this.zoom,n=(e.y-this.prevAxis.y)/this.zoom;if(this.enableOutOfTarget)return this.lineDragging=!0,void this.moveActiveArea(t,n);if(this.isDependPolygon)this.moveLineInPolygon(t,n);else{var i=[0,this.imageSize.width],a=[0,this.imageSize.height];if(this.isDependRect){var r=this.basicResult,o=r.x,c=r.y;i=[o,o+r.width],a=[c,c+r.height]}this.moveLineInRectRange(t,n,i,a)}}},{key:"moveSelectPoint",value:function(e){if(this.selectedPoint){var t=e.x-this.prevAxis.x,n=e.y-this.prevAxis.y,i={x:(this.selectedPoint?this.selectedPoint.x:0)+t/this.zoom,y:(this.selectedPoint?this.selectedPoint.y:0)+n/this.zoom};Object.assign(this.selectedPoint,this.getNextCoordByAbsCoord(i)),this.updateLines(),this.render()}}},{key:"getCoordByConfig",value:function(e,t){var n,i=!!e.shiftKey,a=e.altKey;if((null==(n=this.activeLine)?void 0:n.length)>0&&i){var r=this.activeLine.slice(-1)[0];return lt.getVHPoint(r,t,this.coordUtils.getAbsCoord(t),this.coordUtils.getRenderCoord(r))}return this.edgeAdsorptionEnabled&&!a?this.getAdsorptionPoint(t):t}},{key:"getNextPoint",value:function(e,t){var n=this.getCoordByConfig(e,t)||t;return this.enableOutOfTarget?this.coordUtils.getAbsCoord(n):this.getNextCoordByRenderCoord(n)}},{key:"lineHover",value:function(){this.render()}},{key:"mouseMoveHandler",value:function(e){var t=this.getCoordinate(e),n=1===e.which;if(this.isCreate)this.hasActiveLine&&this.renderNextPoint(e,t);else{if(this.isNone&&(this.lineHover(),this.edgeAdsorptionEnabled&&!e.altKey)){var i=this.getAdsorptionPoint(t);i&&this.arc(i)}if(this.isActive){if(this.isMousedown&&n){if(this.selectedPoint)return void this.moveSelectPoint(t);if(this.coordsInsideActiveArea)return this.moveSelectedLine(t),void this.drawActivatedLine(void 0,void 0,!0)}this.drawHoverPoint(t),this.render()}}}},{key:"onMouseMove",value:function(e){if(!Object(f.a)(Object(g.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.getCoordinate(e);this.mouseMoveHandler(e),this.prevAxis=t}}},{key:"setActiveArea",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.findHoverLine(e);if(n){var i=this.lineList.findIndex((function(e){return e.id===(null==n?void 0:n.id)})),a=Ft.calcViewportBoundaries((null==n?void 0:n.pointList)||[],this.isCurve,pa,this.zoom),r=this.lineList[i];this.updateStatus(1),this.setActiveLine(r.pointList),this.setSelectedLineID(r.id),this.activeArea=a,this.updateLineAttributes(r)}else t&&this.setNoneStatus();this.render()}},{key:"setActiveLineByID",value:function(e){var t=this.lineList.find((function(t){return t.id===e}));if(t){var n=Ft.calcViewportBoundaries((null==t?void 0:t.pointList)||[],this.isCurve,pa,this.zoom);this.updateStatus(1),this.setActiveLine(t.pointList),this.setSelectedLineID(t.id),this.activeArea=n,this.updateLineAttributes(t)}this.render()}},{key:"setActiveLine",value:function(e){this.activeLine=e?Be.a.cloneDeep(e):void 0}},{key:"historyChanged",value:function(e){var t=this,n="".concat(e,"Enabled");if(this.isCreate){if(this.actionsHistory&&this.actionsHistory[n]){var i=this.actionsHistory&&this.actionsHistory[e]();this.setActiveLine(i),this.render()}}else{if(this.history&&this.history[n]){var a=this.history[e](),r=null==a?void 0:a.find((function(e){return e.id===t.selectedID}));this.lineList=a,this.selectedID&&r?this.setActiveLine(null==r?void 0:r.pointList):this.setNoneStatus(),this.render()}this.emit("dataUpdated",this.lineList)}}},{key:"undo",value:function(){this.historyChanged("undo"),this.updateSelectedAttributeAfterHistoryChanged()}},{key:"redo",value:function(){this.historyChanged("redo"),this.updateSelectedAttributeAfterHistoryChanged()}},{key:"isCoordInsideTarget",value:function(e){if(this.isDependPolygon)return this.isInBasicPolygon(e);if(this.isDependRect){var t=this.basicResult,n=t.x,i=t.y,a=[n,n+t.width],r=[i,i+t.height];return Ft.isInRange(e.x,a)&&Ft.isInRange(e.y,r)}return Ft.isInRange(e.x,[0,this.imageSize.width])&&Ft.isInRange(e.y,[0,this.imageSize.height])}},{key:"getPointInsertIndex",value:function(e,t){var n=this;if(e&&this.activeLine){var i=this.getPointList(this.activeLine);return 2===this.activeLine.length?1:this.activeLine.findIndex((function(a,r){if(r>0){var o=n.activeLine?n.activeLine[r-1]:void 0,c=n.isCurve?i.slice(17*(r-1),17*r):[o,a];return n.pointInLine(c,e,t||n.getLineWidthScope())}return!1}))}return-1}},{key:"getLineWidthScope",value:function(){return this.lineStyle.lineWidth}},{key:"isMouseCoordOutsideActiveArea",value:function(){return!this.coordsInsideActiveArea&&!this.selectedPoint}},{key:"isLinePointsExceed",value:function(){return this.isCreate&&this.activeLine&&this.upperLimitPointNum&&~~this.upperLimitPointNum<=this.activeLine.length}},{key:"isLinePointsNotEnough",value:function(){var e;return this.activeLine&&(null==(e=this.activeLine)?void 0:e.length)<this.lowerLimitPointNum}},{key:"updateLineSegmentSpecial",value:function(e){var t=this.getPointInsertIndex(e,2)-1;if(t>-1){var n=this.activeLine[t];n.specialEdge=!n.specialEdge,this.hoverLineSegmentIndex=-1,this.render()}}},{key:"addLinePointToActiveLine",value:function(){var e,t=this.getPointInsertIndex(this.cursor),n=this.pointsWithinRange(this.activeLine.length+1);this.cursor&&t>-1&&n&&(this.activeLine.splice(t,0,ba(va({},this.coordUtils.getAbsCoord(this.cursor)),{id:ii()})),this.updateLines(),null==(e=this.history)||e.pushHistory(this.lineList),this.render(),this.cursor=void 0)}},{key:"onMouseDown",value:function(e){if(!Object(f.a)(Object(g.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.getCoordinate(e);this.isMousedown=!0,this.prevAxis=t,3!==e.which?(this.selectedPoint=this.findHoveredPoint(t),this.coordsInsideActiveArea=!(!this.isActive||!this.activeArea)&&lt.inArea(this.activeArea,this.coordUtils.getAbsCoord(t)),this.lineDragging=!1):this.cursor=void 0}}},{key:"lineHasChanged",value:function(){var e=this,t=this.lineList.find((function(t){return t.id===e.selectedID}));return!!t&&JSON.stringify(t.pointList)!==JSON.stringify(this.activeLine)}},{key:"updateLines",value:function(){var e=this,t=this.lineList.find((function(t){return t.id===e.selectedID}));t&&(t.pointList=Be.a.cloneDeep(this.activeLine),this.emit("dataUpdated",this.lineList))}},{key:"onMouseUp",value:function(e){var t=this,i=function(){t.isMousedown=!1,t.hoverPointID=void 0,t.cursor=void 0,t.selectedPoint=void 0};this.hoverPointID=void 0,Object(f.a)(Object(g.a)(n.prototype),"onMouseUp",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo||(1===e.which&&this.onLeftClick(e),3===e.which&&this.onRightClick(e)),i()}},{key:"isTextValid",value:function(e){return Vn.textAttributeValidate(this.textCheckType,this.customFormat,e)}},{key:"createLineData",value:function(){var e=ii(),t={pointList:Be.a.cloneDeep(this.activeLine),id:e,valid:this.isLineValid,order:this.nextOrder()};return t.attribute=this.defaultAttribute,t}},{key:"stopLineCreating",value:function(){var e,t,n,i,a,r=this,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!!this.selectedID||!!this.isTextConfigurable;if(o)if(this.selectedID){var s=this.lineList.find((function(e){return e.id===r.selectedID}));a=this.selectedID,s&&(s.pointList=Be.a.cloneWith(this.activeLine),Be.a.isEqual(s.pointList,null==(e=this.history)?void 0:e.pushHistory(this.lineList))||null==(t=this.history)||t.pushHistory(this.lineList))}else if(this.isCreate&&this.activeLine&&this.activeLine.length>1){var u=this.createLineData();a=u.id,this.setLineList([].concat(Object(l.a)(this.lineList),[u])),null==(n=this.history)||n.pushHistory(this.lineList)}c?this.setActiveStatus(a):this.setNoneStatus(),null==(i=this.actionsHistory)||i.empty(),this.emit("dataUpdated",this.lineList),this.render()}},{key:"setActiveStatus",value:function(e){var t=e?this.lineList.find((function(t){return t.id===e})):void 0;if(t){var n=null==t?void 0:t.pointList;this.updateStatus(1),this.setActiveLine(n),this.setSelectedLineID(e)}else this.setNoneStatus()}},{key:"setNoneStatus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.updateStatus(2),this.activeLine=[],this.setSelectedLineID(void 0),this.activeArea=void 0,this.isLineValid=!0,this.cursor=void 0}},{key:"setKeyDownStatus",value:function(e,t){this.isShift=null!=t?t:e.keyCode===nn.Shift}},{key:"continueToEdit",value:function(){var e;this.updateStatus(0),this.cursor=void 0,null==(e=this.actionsHistory)||e.pushHistory(this.activeLine),this.render()}},{key:"setInvalidLineOnCreating",value:function(e){if((!this.selectedID||e.keyCode===nn.Ctrl)&&this.isCreate){var t=!e.ctrlKey;this.selectedID?this.setInvalidLine(this.selectedID,t,!1):this.isLineValid=t}}},{key:"onKeyDown",value:function(e){if(Object(f.a)(Object(g.a)(n.prototype),"onKeyDown",this).call(this,e),this.setKeyDownStatus(e),e.keyCode===nn.Z&&!e.ctrlKey&&this.toggleIsHide(),e.keyCode===nn.Shift&&this.render(),e.keyCode===nn.Tab)return e.preventDefault(),void this.selectToNextLine(e);if(this.isCreate&&this.keyboardEventWhileLineCreating(e),this.config.attributeConfigurable){var t=Vn.getAttributeByKeycode(e.keyCode,this.config.attributeList);void 0!==t&&this.setDefaultAttribute(t)}}},{key:"selectToNextLine",value:function(e){var t=Ye.getNextSelectedRectIDByEvent(this.viewPortLines.map((function(e){var t,n,i,a;return ba(va({},e),{x:null!=(n=null==(t=e.pointList[0])?void 0:t.x)?n:0,y:null!=(a=null==(i=e.pointList[0])?void 0:i.y)?a:0})})),e,this.selectedID);t&&this.setActiveLineByID(t.id)}},{key:"keyboardEventWhileLineCreating",value:function(e){!this.isCreate||(e.keyCode===nn.Ctrl&&this.setInvalidLineOnCreating(e),[nn.Shift,nn.Alt].includes(e.keyCode)&&this.renderNextPoint(e,this.prevAxis))}},{key:"renderNextPoint",value:function(e,t){var n=this.coordUtils.getRenderCoord(this.getNextPoint(e,t));this.render(n)}},{key:"deleteSelectedLine",value:function(e){var t=Ft.calcViewportBoundaries(this.activeLine,this.isCurve,pa,this.zoom);lt.inArea(t,this.coordUtils.getAbsCoord(e))&&this.deleteLine()}},{key:"deleteSelectedLinePoint",value:function(e){var t;this.pointsWithinRange(this.activeLine.length-1)&&e&&(this.setActiveLine(this.activeLine.filter((function(t){return t.id!==e}))),this.updateLines(),null==(t=this.history)||t.pushHistory(this.lineList)),this.cursor=void 0,this.render()}},{key:"deleteLine",value:function(){var e,t=this;this.lineList=this.lineList.filter((function(e){return e.id!==t.selectedID})),null==(e=this.history)||e.pushHistory(this.lineList),this.setNoneStatus(),this.emit("dataUpdated",this.lineList),this.render()}},{key:"setInvalidLine",value:function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.lineList.find((function(t){return t.id===e}));a&&(a.valid=void 0!==t?t:!a.valid,null==(n=this.history)||n.pushHistory(this.lineList),i&&this.render())}},{key:"empty",value:function(){var e,t;this.lineList=[],this.setNoneStatus(),this.selectedPoint=void 0,null==(e=this.actionsHistory)||e.empty(),null==(t=this.history)||t.init(),this.emit("dataUpdated",this.lineList),this.render()}},{key:"setAttribute",value:function(e){var t;this.attributeConfigurable&&(this.defaultAttribute=e,this.setLineAttribute("attribute",e),this.selectedID&&(null==(t=this.history)||t.pushHistory(this.lineList)))}},{key:"setTextAttribute",value:function(e){var t;this.isTextConfigurable&&(this.setLineAttribute("textAttribute",e),null==(t=this.history)||t.applyAttribute(this.selectedID,"textAttribute",e))}},{key:"setLineAttribute",value:function(e,t,n){var i=n||this.selectedID;if(i){var a=this.lineList.find((function(e){return e.id===i}));a&&(a[e]=t)}this.render()}},{key:"updateAttribute",value:function(e){this.emit("updateAttribute",e)}},{key:"updateLineAttributes",value:function(e){var t;if(this.attributeConfigurable&&e){var n=(null==e?void 0:e.attribute)||"";this.defaultAttribute=n,this.updateAttribute(n)}if(this.isTextConfigurable&&e){var i=(null==e?void 0:e.textAttribute)||"";this.updateTextAttribute(i)}null==(t=this.history)||t.updateHistory(this.lineList)}},{key:"lineStatusChanged",value:function(){this.emit("lineStatusChanged",{status:this.status,selectedLineID:this.selectedID})}},{key:"updateTextAttribute",value:function(e){var t=this;if(this.selectedID){var n=this.lineList.find((function(e){return e.id===t.selectedID}));n&&(n.textAttribute=e)}this.emit("updateText",e)}},{key:"saveData",value:function(){this.stopLineCreating(),this.setNoneStatus(),this.render()}},{key:"setTextEditingID",value:function(e){this.textEditingID=e,this.render()}},{key:"setSelectedLineID",value:function(e){var t,n;if(this.selectedID!==e){var i=this.selectedID;e!==i&&i&&(null==(t=this._textAttributeInstance)||t.changeSelected()),e||null==(n=this._textAttributeInstance)||n.clearTextAttribute(),this.selectedID=e,this.emit("selectedChange")}}},{key:"attributeLockListChange",value:function(e){this.attributeLockList=e,this.render()}},{key:"setResult",value:function(e){this.setNoneStatus(),this.setLineList(e),this.render()}},{key:"setConfig",value:function(e){Object(f.a)(Object(g.a)(n.prototype),"setConfig",this).call(this,e)}},{key:"toggleIsHide",value:function(){this.setIsHidden(!this.isHidden),this.render()}},{key:"clearCanvas",value:function(){Object(f.a)(Object(g.a)(n.prototype),"clearCanvas",this).call(this)}},{key:"clearResult",value:function(){this.setResult([]),this.setSelectedLineID(void 0),this.render()}},{key:"exportData",value:function(){return[this.lineList,this.basicImgInfo]}},{key:"setDefaultAttribute",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.attributeConfigurable&&(this.defaultAttribute=t,this.setLineAttribute("attribute",t),this.selectedID&&(null==(e=this.history)||e.pushHistory(this.lineList)),this.emit("changeAttributeSidebar"))}},{key:"getCurrentSelectedData",value:function(){var e,t,n=this,i=this.isActiveLineValid(),a=this.defaultAttribute,r=this.getColor(a);return{color:i?null==r?void 0:r.valid.stroke:null==r?void 0:r.invalid.stroke,textAttribute:null!=(t=null==(e=this.lineList.find((function(e){return e.id===n.selectedID})))?void 0:e.textAttribute)?t:""}}},{key:"renderTextAttribute",value:function(){var e,t,n,i,a=this;if(this.ctx&&this.activeLine&&!((null==(e=this.activeLine)?void 0:e.length)<2)&&!this.isCreate){var r=this.isActiveLineValid(),o=this.defaultAttribute,c=this.activeLine[1],l=c.x,s=c.y,u=this.coordUtils.getRenderCoord({x:l,y:s}),d=this.getColor(o),h=r?null==d?void 0:d.valid.stroke:null==d?void 0:d.invalid.stroke,f=null!=(n=null==(t=this.lineList.find((function(e){return e.id===a.selectedID})))?void 0:t.textAttribute)?n:"";this._textAttributeInstance||(this._textAttributeInstance=new Ei({container:this.container,icon:this.getTextIconSvg(o),color:h,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedTextAttribute})),this._textAttributeInstance&&!(null==(i=this._textAttributeInstance)?void 0:i.isExit)&&this._textAttributeInstance.appendToContainer(),this._textAttributeInstance.update("".concat(f),{left:u.x,top:u.y,color:h}),this._textAttributeInstance.updateIcon(this.getTextIconSvg(o))}}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Vn.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"updateSelectedTextAttribute",value:function(e){if(this._textAttributeInstance&&e&&this.selectedID){var t=e;!Vn.textAttributeValidate(this.config.textCheckType,"",t)&&(this.emit("messageError",Vn.getErrorNotice(this.config.textCheckType,this.lang)),t=""),this.setTextAttribute(t),this.emit("updateTextAttribute"),this.render()}}}]),n}(Ai),Ca=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).getSingleResult=function(e){var t={};return i.config.configList.length>0&&i.config.configList.forEach((function(e){var n;t[e.key]=null!=(n=e.default)?n:""})),{value:t,id:ii(),sourceID:null!=e?e:Ye.getSourceID()}},i.getInitResultList=function(e,t){return e>0?t.map((function(e){return i.getSingleResult(e.id)})):[i.getSingleResult()]},i.textList=[],i.setShowDefaultCursor(!0),i.setConfig(e.config),i.initTextDisplayContainer(),i}return Object(d.a)(n,[{key:"dataList",get:function(){return this.textList}},{key:"textValueContainerID",get:function(){return"textValueContainer"}},{key:"textValueContainer",get:function(){return document.getElementById(this.textValueContainerID)}},{key:"currentPageResult",get:function(){return this.textList}},{key:"setResult",value:function(e){var t,n=this;this.textList=e,this.toggleTextContainerVisible(!0);var i=null==(t=this.textList[0])?void 0:t.value;i&&Object.keys(i).forEach((function(e){n.renderText(e,i[e])})),this.emit("valueUpdated"),this.toggleTextContainerVisible(!!i)}},{key:"updateTextValue",value:function(e,t){this.textList[0].value[e]=t,this.renderText(e,t),this.emit("valueUpdated")}},{key:"renderText",value:function(e,t){var n=document.getElementById("textKey".concat(e));n&&(n.innerText=t)}},{key:"getTextDomID",value:function(e){return"textKey".concat(e)}},{key:"initTextDisplayContainer",value:function(){var e=this,t=document.createElement("div"),n={position:"absolute",right:"0",top:"0","z-index":"20","max-width":"20%","font-family":"SourceHanSansCN-Regular",background:"rgb(102, 230, 255)",color:"white","word-break":"break-all","line-height":"24px","white-space":"pre-wrap","max-height":"80%","overflow-y":"auto",opacity:"0.6"};t.setAttribute("style",Object.keys(n).reduce((function(e,t){return e+="".concat(t,": ").concat(n[t],";")}),"")),t.setAttribute("id",this.textValueContainerID),this.config.configList.forEach((function(n){var i=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div");i.setAttribute("style","padding: 8px 16px"),a.innerText="".concat(n.key,":"),r.innerText="",r.setAttribute("id",e.getTextDomID(n.key)),i.appendChild(a),i.appendChild(r),t.appendChild(i)})),this.container.appendChild(t)}},{key:"exportData",value:function(){return[this.textList,this.basicImgInfo]}},{key:"destroyCanvas",value:function(){Object(f.a)(Object(g.a)(n.prototype),"destroyCanvas",this).call(this),this.textValueContainer&&this.container.removeChild(this.textValueContainer)}},{key:"onKeyDown",value:function(e){Object(f.a)(Object(g.a)(n.prototype),"onKeyDown",this).call(this,e),e.keyCode===nn.Z&&this.toggleTextContainerVisible()}},{key:"toggleTextContainerVisible",value:function(e){if(this.textValueContainer){var t=(void 0!==e?e:"block"!==this.textValueContainer.style.display)?"block":"none";this.textValueContainer.style.display=t}}}]),n}(Ai),wa=n(22),ka=Object.defineProperty,Ia=Object.defineProperties,La=Object.getOwnPropertyDescriptors,Pa=Object.getOwnPropertySymbols,Oa=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable,Ta=function(e,t,n){return t in e?ka(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Aa=function(e,t){for(var n in t||(t={}))Oa.call(t,n)&&Ta(e,n,t[n]);if(Pa){var i,a=Object(p.a)(Pa(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Sa.call(t,n)&&Ta(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Ea=function(e,t){return Ia(e,La(t))},Da=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).isAllowDouble=function(e){var t=Object(h.a)(i).selectedID,n=i.getHoverID(e);return!(!t||t!==n)},i.textChange=function(e){!1===i.config.textConfigurable||!i.selectedID||(i.setPolygonList(Vn.textChange(e,i.selectedID,i.polygonList)),i.emit("selectedChange"),i.render())},i.config=Ye.jsonParser(e.config),i.drawingPointList=[],i.polygonList=[],i.hoverPointIndex=-1,i.hoverEdgeIndex=-1,i.drawingHistory=new hi,i.isCtrl=!1,i.isAlt=!1,i.isCombined=!1,i.pattern=$.Normal,i.getCurrentSelectedData=i.getCurrentSelectedData.bind(Object(h.a)(i)),i.updateSelectedTextAttribute=i.updateSelectedTextAttribute.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"eventBinding",value:function(){Object(f.a)(Object(g.a)(n.prototype),"eventBinding",this).call(this),this.container.removeEventListener("mouseup",this.onMouseUp),this.container.addEventListener("mouseup",this.dragMouseUp),this.dblClickListener.addEvent(this.onMouseUp,this.onLeftDblClick,this.onRightDblClick,this.isAllowDouble)}},{key:"eventUnbinding",value:function(){Object(f.a)(Object(g.a)(n.prototype),"eventUnbinding",this).call(this),this.container.removeEventListener("mouseup",this.dragMouseUp)}},{key:"destroy",value:function(){Object(f.a)(Object(g.a)(n.prototype),"destroy",this).call(this),this._textAttributInstance&&this._textAttributInstance.clearTextAttribute()}},{key:"selectedPolygon",get:function(){return Pt.getPolygonByID(this.polygonList,this.selectedID)}},{key:"hoverPolygon",get:function(){var e=this;return this.polygonList.find((function(t){return t.id===e.hoverID&&t.id!==e.selectedID}))}},{key:"polygonListUnderZoom",get:function(){var e=this;return this.polygonList.map((function(t){return Ea(Aa({},t),{pointList:mt.changePointListByZoom(t.pointList,e.zoom)})}))}},{key:"selectedText",get:function(){var e;return null==(e=this.selectedPolygon)?void 0:e.textAttribute}},{key:"dataList",get:function(){return this.polygonList}},{key:"setPattern",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(null==(t=this.drawingPointList)?void 0:t.length)>0&&!0===n||(this.pattern=e)}},{key:"currentShowList",get:function(){var e=[],t=Ye.getRenderResultList(this.polygonList,Ye.getSourceID(this.basicResult),this.attributeLockList,this.selectedID),n=Object(s.a)(t,2),i=n[0],a=n[1];return e=i,this.isHidden&&(e=[]),a&&e.push(a),e}},{key:"currentPageResult",get:function(){var e=Ye.getRenderResultList(this.polygonList,Ye.getSourceID(this.basicResult),[]);return Object(s.a)(e,1)[0]}},{key:"setResultAndSelectedID",value:function(e,t){this.setPolygonList(e),t&&(this.selectedID=t),this.render()}},{key:"setResult",value:function(e){this.clearActiveStatus(),this.setPolygonList(e),this.render()}},{key:"setPolygonDataByID",value:function(e,t){return this.polygonList.map((function(n){return n.id===t?Aa(Aa({},n),e):n}))}},{key:"rotatePolygon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:De.Clockwise,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectedID;if(n){var i=Pt.getPolygonByID(this.polygonList,n);if(i){var a=Pt.updatePolygonByRotate(t,e,null==i?void 0:i.pointList);this.setPolygonList(this.setPolygonDataByID({pointList:a},n)),this.render()}}}},{key:"addPointInDrawing",value:function(e){if(!(!this.imgInfo||this.forbidAddNewPolygonFuc&&this.forbidAddNewPolygonFuc(e))){var t=this.config,n=t.upperLimitPointNum,i=t.edgeAdsorption;if(n&&this.drawingPointList.length>=n)this.emit("messageInfo","".concat(cn.getMessagesByLocale($t.UpperLimitErrorNotice,this.lang)).concat(n));else{this.deleteSelectedID();var a=this.getCoordinateUnderZoom(e),r=mt.changeDrawOutsideTarget(a,{x:0,y:0},this.imgInfo,this.config.drawOutsideTarget,this.basicResult,this.zoom);if(0!==mt.returnClosePointIndex(r,mt.changePointListByZoom(this.drawingPointList,this.zoom))){var o=Pt.getClosestPoint(r,this.polygonListUnderZoom,this.config.lineType,re).dropFoot,c=mt.changePointByZoom(o&&!1===e.altKey&&i?o:r,1/this.zoom);if(this.pattern===$.Rect&&2===this.drawingPointList.length){var l=Ft.getRectangleByRightAngle(c,this.drawingPointList);return this.drawingPointList=l,!1===this.config.drawOutsideTarget&&this.imgInfo&&this.isPolygonOutSide(this.drawingPointList)?(this.emit("messageInfo","".concat(cn.getMessagesByLocale($t.ForbiddenCreationOutsideBoundary,this.lang))),void(this.drawingPointList=[])):void this.addDrawingPointToPolygonList(!0)}this.drawingPointList.push(c),1===this.drawingPointList.length?this.drawingHistory.initRecord(this.drawingPointList):this.drawingHistory.pushHistory(this.drawingPointList)}else this.addDrawingPointToPolygonList()}}}},{key:"clearResult",value:function(){this.setPolygonList([]),this.deleteSelectedID(),this.render()}},{key:"clearPolygonDrag",value:function(){this.drawingPointList=[],this.dragInfo=void 0,this.dragInfo=void 0,this.dragStatus=Oe.Wait,this.hoverEdgeIndex=-1,this.hoverPointIndex=-1,this.hoverID=""}},{key:"clearActiveStatus",value:function(){this.clearPolygonDrag(),this.deleteSelectedID()}},{key:"clearDrawingStatus",value:function(){this.drawingPointList=[]}},{key:"setPolygonList",value:function(e){var t=this.polygonList.length;this.polygonList=e,t!==e.length&&this.emit("updatePageNumber")}},{key:"setSelectedID",value:function(e){var t,n,i=this.selectedID;e!==i&&i&&(null==(t=this._textAttributInstance)||t.changeSelected()),e||null==(n=this._textAttributInstance)||n.clearTextAttribute(),this.selectedID=e,this.render(),this.emit("selectedChange")}},{key:"setDefaultAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.defaultAttribute;if(this.defaultAttribute=e,t!==e){this.changeStyle(e),this.emit("changeAttributeSidebar");var n=this.selectedID;if(n&&(this.selectedPolygon&&(this.selectedPolygon.attribute=e),this.history.pushHistory(this.polygonList),this.render()),this._textAttributInstance){if(this.attributeLockList.length>0&&!this.attributeLockList.includes(e))return void this._textAttributInstance.clearTextAttribute();this._textAttributInstance.updateIcon(this.getTextIconSvg(e))}}}},{key:"setStyle",value:function(e){var t;Object(f.a)(Object(g.a)(n.prototype),"setStyle",this).call(this,e),this._textAttributInstance&&!1===this.config.attributeConfigurable&&(null==(t=this._textAttributInstance)||t.updateIcon(this.getTextIconSvg()))}},{key:"setPolygonValidAndRender",value:function(e){if(e){var t=this.polygonList.map((function(t){var n;if(t.id===e){var i=null==(n=null==t?void 0:t.valid)||n;return Ea(Aa({},t),{valid:!i})}return t}));this.setPolygonList(t),this.history.pushHistory(this.polygonList),this.render(),this.emit("updateResult")}}},{key:"addDrawingPointToPolygonList",value:function(e){var t,n=this,i=this.config.lowerLimitPointNum,a=void 0===i?3:i;if(a<3&&(a=3),this.drawingPointList.length<a)return this.drawingPointList=[],void(this.editPolygonID="");var r=Ye.getSourceID(this.basicResult),o=Object(l.a)(this.polygonList);if(this.editPolygonID){var c=o.find((function(e){return e.id===n.editPolygonID}));if(!c)return;c.pointList=this.drawingPointList,this.editPolygonID=""}else{var s=ii(8,62),u={id:s,sourceID:r,valid:!this.isCtrl,textAttribute:"",pointList:this.drawingPointList,attribute:this.defaultAttribute,order:Ye.getMaxOrder(o.filter((function(e){return Ye.isSameSourceID(e.sourceID,r)})))+1};if(this.config.textConfigurable){var d;d=Vn.getTextAttribute(this.polygonList.filter((function(e){return Ye.isSameSourceID(e.sourceID,r)})),this.config.textCheckType),u=Ea(Aa({},u),{textAttribute:d})}this.pattern===$.Rect&&!0===e&&(u=Ea(Aa({},u),{isRect:!0})),o.push(u),t=u,this.setSelectedIdAfterAddingDrawing(s)}this.setPolygonList(o),this.isCtrl=!1,this.drawingPointList=[],this.history.pushHistory(o),t&&this.emit("polygonCreated",t,this.zoom,this.currentPos)}},{key:"setSelectedIdAfterAddingDrawing",value:function(e){0!==this.drawingPointList.length&&(this.config.textConfigurable?this.setSelectedID(e):this.deleteSelectedID())}},{key:"getHoverID",value:function(e){var t,n=this,i=this.getCoordinateUnderZoom(e),a=this.currentShowList.map((function(e){return Ea(Aa({},e),{pointList:mt.changePointListByZoom(e.pointList,n.zoom)})}));return Pt.getHoverPolygonID(i,a,10,null==(t=this.config)?void 0:t.lineType)}},{key:"getHoverEdgeIndex",value:function(e){var t;if(!this.selectedID)return-1;var n=this.selectedPolygon;if(!n)return-1;var i=this.getCoordinateUnderZoom(e),a=mt.changePointListByZoom(n.pointList,this.zoom);return Pt.getHoverEdgeIndex(i,a,null==(t=this.config)?void 0:t.lineType)}},{key:"getHoverPointIndex",value:function(e){if(!this.selectedID)return-1;var t=this.selectedPolygon;if(!t)return-1;var n=this.getCoordinateUnderZoom(e),i=mt.changePointListByZoom(t.pointList,this.zoom);return mt.returnClosePointIndex(n,i)}},{key:"deletePolygon",value:function(e){var t;if(e){var n=this.polygonList.find((function(t){return t.id===e}));this.emit("deletedObject",{deletedObject:n,id:e}),this.setPolygonList(this.polygonList.filter((function(t){return t.id!==e}))),this.history.pushHistory(this.polygonList),null==(t=this._textAttributInstance)||t.clearTextAttribute(),this.emit("selectedChange"),this.render()}}},{key:"deletePolygonPoint",value:function(e){if(this.selectedID){var t=this.selectedPolygon;if(t){var n=this.config.lowerLimitPointNum;n<3&&(n=3),t.pointList.length<=n?this.emit("messageInfo","".concat(cn.getMessagesByLocale($t.LowerLimitErrorNotice,this.lang)).concat(n)):(null==t||t.pointList.splice(e,1),this.history.pushHistory(this.polygonList),this.render())}}}},{key:"spaceKeydown",value:function(){var e,t,n;if(this.selectedID){if(!0===(null==(e=this.selectedPolygon)?void 0:e.isRect))return void this.emit("messageInfo","".concat(cn.getMessagesByLocale($t.UnableToReannotation,this.lang)));this.editPolygonID=this.selectedID,this.drawingPointList=null!=(n=null==(t=this.selectedPolygon)?void 0:t.pointList)?n:[],this.drawingHistory.empty(),this.drawingHistory.initRecord(this.drawingPointList),this.hoverID="",this.deleteSelectedID(),this.render()}}},{key:"onTabKeyDown",value:function(e){e.preventDefault();var t=Te.ascend;e.shiftKey&&(t=Te.descend),this.switchToNextPolygon(t)}},{key:"switchToNextPolygon",value:function(e){if(!(this.drawingPointList.length>0)){var t=Ye.getRenderResultList(this.polygonList,Ye.getSourceID(this.basicResult),this.attributeLockList,this.selectedID),n=Object(s.a)(t,2),i=n[0],a=n[1],r=Object(l.a)(i);a&&(r=[].concat(Object(l.a)(r),[a]));var o=Zn.getViewPort(this.canvas,this.currentPos,this.zoom),c=r.map((function(e){var t,n,i,a;return Ea(Aa({},e),{x:null!=(n=null==(t=e.pointList[0])?void 0:t.x)?n:0,y:null!=(a=null==(i=e.pointList[0])?void 0:i.y)?a:0})})).filter((function(e){return Zn.inViewPort({x:e.x,y:e.y},o)})),u=Ye.getNextSelectedRectID(c,e,this.selectedID);if(u){this.setSelectedID(u.id);var d=this.selectedPolygon;d&&this.setDefaultAttribute(d.attribute)}this.render()}}},{key:"onKeyDown",value:function(e){if(Ye.hotkeyFilter(e)&&!1!==Object(f.a)(Object(g.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode;switch(t){case nn.Space:this.spaceKeydown();break;case nn.Esc:this.drawingPointList=[],this.editPolygonID="";break;case nn.F:this.selectedID&&this.setPolygonValidAndRender(this.selectedID);break;case nn.Z:if(e.altKey)return void this.onCombinedExecute();this.setIsHidden(!this.isHidden),this.render();break;case nn.Delete:this.deletePolygon(this.selectedID),this.render();break;case nn.Ctrl:this.isCtrl=!0;break;case nn.Alt:!1===this.isAlt&&(e.preventDefault(),this.isAlt=!0,this.render());break;case nn.Tab:this.onTabKeyDown(e);break;case nn.X:e.altKey&&this.segment();break;default:if(this.config.attributeConfigurable){var i=Vn.getAttributeByKeycode(t,this.config.attributeList);void 0!==i&&this.setDefaultAttribute(i)}}}}},{key:"onKeyUp",value:function(e){switch(Object(f.a)(Object(g.a)(n.prototype),"onKeyUp",this).call(this,e),e.keyCode){case nn.Ctrl:this.isCtrl=!1;break;case nn.Alt:var t=this.isAlt;this.isAlt=!1,!0===t&&this.render()}}},{key:"rightMouseUp",value:function(e){if(this.drawingPointList.length>0)this.addDrawingPointToPolygonList();else{this.setSelectedID(this.hoverID);var t=this.selectedPolygon;t&&this.setDefaultAttribute(t.attribute)}}},{key:"onLeftDblClick",value:function(e){if(this.hoverEdgeIndex>-1){var t=this.getCoordinateUnderZoom(e),n=this.selectedPolygon;if(!n)return;if(!0===n.isRect)return this.emit("messageInfo","".concat(cn.getMessagesByLocale($t.ForbidAddNewPoint,this.lang))),void this.clearPolygonDrag();var i=Pt.getClosestPoint(t,this.polygonListUnderZoom,this.config.lineType,re).dropFoot;if(!i)return;var a=this.config.upperLimitPointNum;if(a&&n.pointList.length>=a)return this.emit("messageInfo","".concat(cn.getMessagesByLocale($t.UpperLimitErrorNotice,this.lang)).concat(a)),void this.clearPolygonDrag();null==n||n.pointList.splice(this.hoverEdgeIndex+1,0,mt.changePointByZoom(i,1/this.zoom)),this.setPolygonDataByID(n,this.selectedID),this.history.pushHistory(this.polygonList),this.hoverPointIndex=-1,this.hoverEdgeIndex=-1,this.render()}this.dragInfo=void 0}},{key:"onRightDblClick",value:function(e){this.dragInfo=void 0,this.clearImgDrag();var t=this.getHoverID(e),n=this.getHoverPointIndex(e);if(this.hoverPointIndex>-1&&this.hoverPointIndex===n)return this.deletePolygonPoint(n),this.dragInfo=void 0,this.hoverPointIndex=-1,void this.render();this.hoverID===this.selectedID&&this.deletePolygon(t),this.render()}},{key:"onMouseDown",value:function(e){if(!Object(f.a)(Object(g.a)(n.prototype),"onMouseDown",this).call(this,e)&&!this.forbidMouseOperation&&!0!==e.ctrlKey)return this.dragMouseDown(e),!0}},{key:"dragMouseDown",value:function(e){var t=this.selectedPolygon;if(t&&0===e.button&&this.getHoverID(e)===this.selectedID){var n=t.pointList,i=this.getCoordinateUnderZoom(e),a=[0],r=Se.Plane;this.dragStatus=Oe.Start;var o=this.getHoverPointIndex(e),c=this.getHoverEdgeIndex(e);o>-1?(r=Se.Point,a=[o]):c>-1&&this.hoverEdgeIndex>-1&&(r=Se.Line,a=[c,(c+1)%n.length]),this.dragInfo={dragStartCoord:i,dragTarget:r,initPointList:n,changePointIndex:a,originPolygon:this.selectedPolygon}}}},{key:"segment",value:function(){var e,t=this;if(this.selectedID&&(null==(e=this.config)?void 0:e.lineType)===B.Line){var n=Pt.getPolygonPointList(this.selectedID,this.currentShowList),i=this.currentShowList.filter((function(e){return e.id!==t.selectedID}));if(0!==i.length&&0!==n.length){var a=Pt.getWrapPolygonIndex(n,i),r=Object(l.a)(this.polygonList);if(-1===a){var o=Pt.segmentPolygonByPolygon(n,i);if(!o)return;var c=o.shift();if(!c)return;var s="",u=!0,d=Ye.getSourceID(this.basicResult),h="";r=this.polygonList.map((function(e){var n,i;return e.id===t.selectedID?(s=e.attribute,u=null==(n=null==e?void 0:e.valid)||n,h=null!=(i=null==e?void 0:e.textAttribute)?i:"",Ea(Aa({},e),{pointList:c})):e})),o.length>0&&o.forEach((function(e,n){r.push({sourceID:d,id:ii(8,62),pointList:e,valid:u,order:Ye.getMaxOrder(t.currentShowList)+1+n,attribute:s,textAttribute:h})}))}else r[a].pointList=Pt.clipPolygonFromWrapPolygon(n,r[a].pointList),r=r.filter((function(e){return e.id!==t.selectedID}));this.setPolygonList(r),this.history.pushHistory(r),this.render()}}}},{key:"onCombinedExecute",value:function(){this.selectedID?this.isCombined=!this.isCombined:this.emit("messageInfo",wa.i18n.t("PolygonsToBeCombinedNeedToBeSelected"))}},{key:"combine",value:function(e){var t,n=this,i=this.getHoverID(e);if(i&&this.selectedID&&this.selectedID!==i)if((null==(t=this.config)?void 0:t.lineType)===B.Line){var a=this.polygonList.find((function(e){return e.id===n.selectedID})),r=this.currentShowList.find((function(e){return e.id===i}));if(r&&a){var o=Pt.combinePolygonWithPolygon(a,r);if(o){var c=o.newPolygon,l=o.unionList;if(1===l.length&&c){var s=this.polygonList.filter((function(e){return!l.includes(e.id)})).map((function(e){return e.id===n.selectedID?c:e}));this.setPolygonList(s),this.history.pushHistory(s),this.render(),this.emit("messageInfo",wa.i18n.t("CombineSuccess"))}else this.emit("messageInfo",wa.i18n.t("CombiningFailedNotify"));this.isCombined=!1}}}else this.emit("messageInfo",wa.i18n.t("CurveModeDoesNotSupportCutting"))}},{key:"isPolygonOutSide",value:function(e){var t=this;if(this.dependToolName&&this.basicCanvas&&this.basicResult){var n=!1;switch(this.dependToolName){case O.Rect:n=e.filter((function(e){return!qt.isInRect(e,t.basicResult)})).length>0;break;case O.Polygon:n=Pt.isPointListOutSidePolygon(e,this.basicResult.pointList,this.config.lineType)}return n}if(!this.imgInfo)return!1;var i=Ft.calcViewportBoundaries(mt.changePointListByZoom(e,this.zoom)),a=i.left,r=i.top,o=i.right,c=i.bottom,l=1e-5;return a<0||r<0||o>this.imgInfo.width+l||c>this.imgInfo.height+l}},{key:"onDragMove",value:function(e){var t=this;if(this.dragInfo&&this.selectedID){var n=this.selectedPolygon,i=null==n?void 0:n.pointList;if(i){var a=this.dragInfo,r=a.initPointList,o=a.dragStartCoord,c=a.dragTarget,l=a.changePointIndex,s=this.getCoordinateUnderZoom(e),u={x:(s.x-o.x)/this.zoom,y:(s.y-o.y)/this.zoom};if(this.pattern===$.Rect&&!0===(null==n?void 0:n.isRect)&&l&&[Se.Line].includes(c)){var d=Ft.getArrayIndex(l[0]-2,4),h=Ft.getArrayIndex(l[0]-1,4),f=[r[d],r[h]];u={x:(u=Ft.getRectPerpendicularOffset(o,s,f)).x/this.zoom,y:u.y/this.zoom}}switch(this.dragStatus=Oe.Move,c){case Se.Plane:i=i.map((function(e,t){return Ea(Aa({},e),{x:r[t].x+u.x,y:r[t].y+u.y})}));break;case Se.Point:case Se.Line:i=i.map((function(e,t){return l&&l.includes(t)?Ea(Aa({},e),{x:r[t].x+u.x,y:r[t].y+u.y}):e}))}if(this.pattern===$.Rect&&!0===(null==n?void 0:n.isRect)&&c===Se.Point&&l&&(i=Ft.getPointListFromPointOffset(r,l[0],u)),!1!==this.config.drawOutsideTarget||!this.imgInfo||!this.isPolygonOutSide(i)){var g=this.polygonList.map((function(e){if(e.id===t.selectedID){var n=Ea(Aa({},e),{pointList:i});return!0===e.isRect&&t.pattern===$.Normal&&Object.assign(n,{isRect:!1}),n}return e}));this.setPolygonList(g),this.render()}}}}},{key:"onMouseMove",value:function(e){if(!Object(f.a)(Object(g.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo)if(this.selectedID&&this.dragInfo)this.onDragMove(e);else{var t=-1,i=-1;if(this.selectedID&&(this.hoverEdgeIndex=-1,this.hoverPointIndex=-1,(t=this.getHoverPointIndex(e))>-1?this.hoverPointIndex=t:(i=this.getHoverEdgeIndex(e),this.hoverEdgeIndex=i)),!(this.drawingPointList.length>0)){var a=this.getHoverID(e);this.hoverID!==a&&(this.hoverID=a,this.render())}}}},{key:"leftMouseUpdateValid",value:function(e){var t=this.getHoverID(e);return!(0!==this.drawingPointList.length||!0!==e.ctrlKey||!t)&&(this.setPolygonValidAndRender(t),!0)}},{key:"leftMouseUp",value:function(e){this.leftMouseUpdateValid(e)||this.addPointInDrawing(e)}},{key:"onMouseUp",value:function(e){if(this.isCombined)switch(e.button){case 0:this.combine(e);break;case 2:this.isCombined=!1;break;default:return}else if(!Object(f.a)(Object(g.a)(n.prototype),"onMouseUp",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){if(this.dragInfo&&this.dragStatus===Oe.Move){var t=this.dragInfo.originPolygon;return this.dragInfo=void 0,this.dragStatus=Oe.Wait,this.history.pushHistory(this.polygonList),this.emit("updateResult"),void this.emit("updatePolygonByDrag",{newPolygon:this.selectedPolygon,originPolygon:t})}switch(e.button){case 0:this.leftMouseUp(e);break;case 2:this.rightMouseUp(e)}this.render()}}},{key:"dragMouseUp",value:function(){this.dragStatus===Oe.Start&&(this.dragInfo=void 0,this.dragStatus=Oe.Wait)}},{key:"exportData",value:function(){return[this.polygonList,this.basicImgInfo]}},{key:"getTextIconSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Vn.getTextIconSvg(e,this.config.attributeList,this.config.attributeConfigurable,this.baseIcon)}},{key:"getCurrentSelectedData",value:function(){var e=this.selectedPolygon;if(e){var t=this.getColor(e.attribute),n=e.valid?null==t?void 0:t.valid.stroke:null==t?void 0:t.invalid.stroke;return{width:164,textAttribute:e.textAttribute,color:n}}}},{key:"updateSelectedTextAttribute",value:function(e){if(this._textAttributInstance&&e&&this.selectedID){var t=e;!1===Vn.textAttributeValidate(this.config.textCheckType,"",t)&&(this.emit("messageError",Vn.getErrorNotice(this.config.textCheckType,this.lang)),t=""),this.setPolygonList(Vn.textChange(t,this.selectedID,this.polygonList)),this.emit("updateTextAttribute"),this.render()}}},{key:"renderTextAttribute",value:function(){var e,t=this.selectedPolygon;if(this.ctx&&!1!==this.config.textConfigurable&&t){var n=t.pointList,i=t.attribute,a=t.valid,r=t.textAttribute,o=n[n.length-1],c=o.x,l=o.y,s=mt.getOffsetCoordinate({x:c,y:l},this.currentPos,this.zoom),u=this.getColor(i),d=a?null==u?void 0:u.valid.stroke:null==u?void 0:u.invalid.stroke;this._textAttributInstance||(this._textAttributInstance=new Ei({width:164,container:this.container,icon:this.getTextIconSvg(i),color:d,getCurrentSelectedData:this.getCurrentSelectedData,updateSelectedTextAttribute:this.updateSelectedTextAttribute})),this._textAttributInstance&&!(null==(e=this._textAttributInstance)?void 0:e.isExit)&&this._textAttributInstance.appendToContainer(),this._textAttributInstance.update("".concat(r),{left:s.x,top:s.y,color:d,width:164})}}},{key:"renderStaticPolygon",value:function(){var e,t=this;!1===this.isHidden&&(null==(e=this.polygonList)||e.forEach((function(e){var n,i,a,r,o;if(![t.selectedID,t.editPolygonID].includes(e.id)){var c=e.textAttribute,l=e.attribute,s=t.getColor(l),u=Ji.getStrokeAndFill(s,e.valid),d=mt.changePointListByZoom(e.pointList||[],t.zoom,t.currentPos);ti.drawPolygonWithFillAndLine(t.canvas,d,{fillColor:u.fill,strokeColor:u.stroke,pointColor:"white",thickness:null!=(i=null==(n=t.style)?void 0:n.width)?i:2,lineCap:"round",isClose:!0,lineType:null==(a=t.config)?void 0:a.lineType});var h="".concat(null!=(r=Vn.getAttributeShowText(l,t.config.attributeList))?r:"");(null==(o=t.config)?void 0:o.isShowOrder)&&(null==e?void 0:e.order)>0&&(h="".concat(e.order," ").concat(h)),ti.drawText(t.canvas,d[0],h,Aa({color:u.stroke},Ne));var f=d[d.length-1];ti.drawText(t.canvas,{x:f.x+je.x,y:f.y+je.y},c,Aa({color:u.stroke},Ne))}})))}},{key:"renderSelectedPolygon",value:function(){var e,t,n;if(this.selectedID){var i=this.selectedPolygon;if(i){var a=this.getColor(i.attribute),r=Ji.getStrokeAndFill(a,i.valid,{isSelected:!0});ti.drawSelectedPolygonWithFillAndLine(this.canvas,mt.changePointListByZoom(i.pointList,this.zoom,this.currentPos),{fillColor:r.fill,strokeColor:r.stroke,pointColor:"white",thickness:2,lineCap:"round",isClose:!0,lineType:null==(e=this.config)?void 0:e.lineType});var o="".concat(null!=(t=Vn.getAttributeShowText(i.attribute,this.config.attributeList))?t:"");(null==(n=this.config)?void 0:n.isShowOrder)&&(null==i?void 0:i.order)>0&&(o="".concat(i.order," ").concat(o)),ti.drawText(this.canvas,mt.changePointByZoom(i.pointList[0],this.zoom,this.currentPos),o,Aa({color:r.stroke},Ne)),this.renderTextAttribute()}}}},{key:"renderHoverPolygon",value:function(){var e;if(this.hoverID&&this.hoverID!==this.editPolygonID){var t=this.hoverPolygon;if(t){var n="",i=this.getColor(t.attribute);n=t.valid?i.validHover.fill:Ji.getStrokeAndFill(i,!1,{isHover:!0}).fill,ti.drawPolygonWithFill(this.canvas,mt.changePointListByZoom(t.pointList,this.zoom,this.currentPos),{color:n,lineType:null==(e=this.config)?void 0:e.lineType})}}}},{key:"renderPolygon",value:function(){var e,t,n,i;this.renderStaticPolygon(),this.renderHoverPolygon(),this.renderSelectedPolygon();var a=this.getColor(this.defaultAttribute),r=Ji.getStrokeAndFill(a,!this.isCtrl);if((null==(e=this.drawingPointList)?void 0:e.length)>0){var o=Object(l.a)(this.drawingPointList),c=mt.getOriginCoordinateWithOffsetCoordinate(this.coord,this.zoom,this.currentPos);if(this.pattern===$.Rect&&2===o.length)o=Ft.getRectangleByRightAngle(c,o);else{if((null==(t=this.config)?void 0:t.edgeAdsorption)&&!1===this.isAlt){var s=Pt.getClosestPoint(c,this.polygonList,null==(n=this.config)?void 0:n.lineType,re/this.zoom).dropFoot;s&&(c=s)}o.push(c)}ti.drawSelectedPolygonWithFillAndLine(this.canvas,mt.changePointListByZoom(o,this.zoom,this.currentPos),{fillColor:r.fill,strokeColor:r.stroke,pointColor:"white",thickness:2,lineCap:"round",isClose:!1,lineType:this.config.lineType})}if(this.hoverPointIndex>-1&&this.selectedID){var u=this.selectedPolygon;if(!u)return;var d=Ji.getStrokeAndFill(a,u.valid,{isSelected:!0}),h=null==u?void 0:u.pointList[this.hoverPointIndex];if(h){var f=mt.changePointByZoom(h,this.zoom,this.currentPos),g=f.x,v=f.y;ti.drawCircleWithFill(this.canvas,{x:g,y:v},5,{color:d.fill})}}if(this.hoverEdgeIndex>-1&&this.selectedID){var b=this.selectedPolygon;if(!b)return;var p=Ji.getStrokeAndFill(a,b.valid,{isSelected:!0});ti.drawLineWithPointList(this.canvas,mt.changePointListByZoom(b.pointList,this.zoom,this.currentPos),{color:p.stroke,thickness:10,hoverEdgeIndex:this.hoverEdgeIndex,lineType:null==(i=this.config)?void 0:i.lineType})}}},{key:"render",value:function(){!this.ctx||(Object(f.a)(Object(g.a)(n.prototype),"render",this).call(this),this.renderPolygon(),this.renderCursorLine(this.getLineColor(this.defaultAttribute)))}},{key:"renderCursorLine",value:function(e){if(Object(f.a)(Object(g.a)(n.prototype),"renderCursorLine",this).call(this,e),this.isCombined){var t=this.coord,i=t.x,a=t.y,r=10;ti.drawRectWithFill(this.canvas,{x:i+r,y:a-40-1,width:186,height:32},{color:"black"}),ti.drawText(this.canvas,{x:i,y:a},wa.i18n.t("ClickAnotherPolygon"),{textAlign:"center",color:"white",offsetX:103,offsetY:-21}),ti.drawRect(this.canvas,{x:i-r,y:a-r,width:20,height:20},{lineDash:[6],color:"white"})}}},{key:"undo",value:function(){if(this.drawingPointList.length>0){var e=this.drawingHistory.undo();if(!e)return;return this.drawingPointList=e,void this.render()}var t=this.history.undo();t&&(t.length!==this.polygonList.length&&this.deleteSelectedID(),this.setPolygonList(t),this.render())}},{key:"redo",value:function(){if(this.drawingPointList.length>0){var e=this.drawingHistory.redo();if(!e)return;return this.drawingPointList=e,void this.render()}var t=this.history.redo();t&&(t.length!==this.polygonList.length&&this.deleteSelectedID(),this.setPolygonList(t),this.render())}},{key:"deleteSelectedID",value:function(){this.setSelectedID("")}}]),n}(Ai),Ma=Object.defineProperty,Na=Object.defineProperties,Ra=Object.getOwnPropertyDescriptors,ja=Object.getOwnPropertySymbols,_a=Object.prototype.hasOwnProperty,Ba=Object.prototype.propertyIsEnumerable,Ha=function(e,t,n){return t in e?Ma(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Va={textConfigurable:!1,attributeConfigurable:!0,attributeList:[]},Za=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,function(e,t){return Na(e,Ra(t))}(function(e,t){for(var n in t||(t={}))_a.call(t,n)&&Ha(e,n,t[n]);if(ja){var i,a=Object(p.a)(ja(t));try{for(a.s();!(i=a.n()).done;)n=i.value,Ba.call(t,n)&&Ha(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},e),{config:JSON.stringify(Va)}))}return Object(d.a)(n,[{key:"setSelectedIdAfterAddingDrawingRect",value:function(){!this.drawingRect||this.setSelectedRectID(this.drawingRect.id)}}]),n}(Zi),Fa=n(211),za=n.n(Fa),Ua=function(){function e(t){Object(u.a)(this,e),this._domMap=new Map,this._container=t.container,this._height=t.height}return Object(d.a)(e,[{key:"wheelChange",value:function(e){e.stopPropagation()}},{key:"clearTag",value:function(e){var t=this._container,n=window.self.document.getElementById(e);n&&t&&t.contains(n)&&(n.removeEventListener("wheel",this.wheelChange),null==t||t.removeChild(n))}},{key:"render",value:function(e){var t=this,n=Array.from(this._domMap.keys()),i=e.map((function(e){return e.id}));e.forEach((function(e){var n=e.text,i=e.textMaxWidth,a=e.color,r=void 0===a?"white":a,o=e.background,c=void 0===o?"rgba(0, 0, 0, 0.6)":o,l=e.style;if(t._domMap.has(e.id)){var s=t._domMap.get(e.id);s&&(s.innerHTML=n)}else{var u=ti.drawTagByDom(t._container,n,e.id);u&&(u.setAttribute("style","\n              position: absolute;\n              top: 0;\n              right: 0;\n              z-index: 20;\n              padding: 8px 20px;\n              font-size: 15px;\n              max-width: ".concat(i,"px;\n              color: ").concat(r,";\n              text-align: left;\n              line-height: 32px;\n              word-break: break-all;\n              white-space: pre-wrap;\n              background: ").concat(c,";\n              opacity: 0.9;\n              max-height: ").concat(.8*t._height,"px;\n              overflow-y: scroll;\n              clear: both;\n              ").concat(Ji.getStyle2String(l),"\n            ")),u.addEventListener("wheel",t.wheelChange),t._domMap.set(e.id,u))}})),n.forEach((function(e){-1===i.indexOf(e)&&(t.clearTag(e),t._domMap.delete(e))}))}}]),e}(),Ga=n(18),Wa=Object.defineProperty,Ka=Object.defineProperties,Ya=Object.getOwnPropertyDescriptors,Xa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Qa=Object.prototype.propertyIsEnumerable,qa=function(e,t,n){return t in e?Wa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n};function $a(e){var t;return(t=new Ga.s).set.apply(t,Object(l.a)(e))}function er(e,t,n){var i=wa.MatrixUtils.transferMatrix34FromKitti2Three(e),a=wa.MatrixUtils.transferMatrix33FromKitti2Three(t),r=wa.MatrixUtils.transferMatrix34FromKitti2Three(n),o=$a(i),c=$a(a),l=$a(r);return{composeMatrix4:l.clone().premultiply(c).premultiply(o),PM:o,RM:c,TM:l}}function tr(e,t,n){var i,a=new Ga.H(e.x,e.y,null!=(i=null==e?void 0:e.z)?i:1),r=(new Ga.s).makeRotationZ(n),o=(new Ga.s).makeTranslation(t.x,t.y,t.z),c=(new Ga.s).makeTranslation(-t.x,-t.y,-t.z);return a.clone().applyMatrix4(c).applyMatrix4(r).applyMatrix4(o)}function nr(e,t){var n=new Ga.I(e.x,e.y,e.z).applyMatrix4(t);if(!(n.z<0)){var i=1/n.z,a=(new Ga.s).set(i,0,0,0,0,i,0,0,0,0,i,0,0,0,0,1);return n.applyMatrix4(a)}}function ir(e){var t=e.center,n=e.width,i=e.height,a=e.depth,r=e.rotation,o=[{x:t.x+n/2,y:t.y-i/2},{x:t.x+n/2,y:t.y+i/2},{x:t.x-n/2,y:t.y+i/2},{x:t.x-n/2,y:t.y-i/2}].map((function(e){var n=tr(e,t,r);return{x:n.x,y:n.y}})),c=t.z+a/2,l=t.z-a/2;return function(e,t){return Ka(e,Ya(t))}(function(e,t){for(var n in t||(t={}))Ja.call(t,n)&&qa(e,n,t[n]);if(Xa){var i,a=Object(p.a)(Xa(t));try{for(a.s();!(i=a.n()).done;)n=i.value,Qa.call(t,n)&&qa(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},e),{polygonPointList:o,zMax:c,zMin:l})}function ar(e,t){var n=wa.PointCloudUtils.getAllViewData(e),i=er(t.P,t.R,t.T).composeMatrix4;return n.map((function(t){return{type:t.type,pointList:t.pointList.map((function(t){return tr(t,e.center,e.rotation)})).map((function(e){return nr(e,i)})).map((function(e){if(e)return{id:ii(),x:null==e?void 0:e.x,y:null==e?void 0:e.y}})).filter((function(e){return void 0!==e}))}})).filter((function(e){return 0!==e.pointList.length}))}var rr,or,cr=Object.defineProperty,lr=Object.defineProperties,sr=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,dr=Object.prototype.hasOwnProperty,hr=Object.prototype.propertyIsEnumerable,fr=function(e,t,n){return t in e?cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},gr=function(e,t){for(var n in t||(t={}))dr.call(t,n)&&fr(e,n,t[n]);if(ur){var i,a=Object(p.a)(ur(t));try{for(a.s();!(i=a.n()).done;){n=i.value;hr.call(t,n)&&fr(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},vr=function(e,t){return lr(e,sr(t))},br="#6371FF",pr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i,a;return Object(u.a)(this,n),(i=t.call(this,vr(gr({},e),{showDefaultCursor:!0}))).style={},i.annotations=[],i.connectionPoints=[],i.getHoverRectID=function(e){var t,n,a=i.getCoordinateUnderZoom(e),r=mt.changePointByZoom(a,1/i.zoom);if(!((null==(t=i.annotations)?void 0:t.length)<=0)&&(null==(n=i.annotations)?void 0:n.length)){for(var o="",c=Number.MAX_SAFE_INTEGER,l=0;l<i.annotations.length;l++){var s=i.annotations[l];switch(s.type){case"rect":var u=s.annotation;if(qt.isInRect(a,u,3,i.zoom)){var d=u.width*u.height;d<c&&(o=u.id,c=d)}break;case"polygon":var h=s.annotation;if(Pt.isInPolygon(r,h.pointList)){var f=Pt.getPolygonArea(h.pointList);f<c&&(o=h.id,c=f)}}}return o}},i.style=null!=(a=e.style)?a:{stroke:br,thickness:3},i.annotations=e.annotations,i.loading=!1,i.renderDomInstance=new Ua({container:i.container,height:i.canvas.height}),i}return Object(d.a)(n,[{key:"clearConnectionPoints",value:function(){this.connectionPoints=[],this.render()}},{key:"checkConnectionPoints",value:function(){var e,t,n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annotations;this.connectPointsStatus&&(null==(t=(e=this.connectPointsStatus).close)||t.call(e)),this.emit("connectionPointsStatusUpdate",(function(){return new Promise((function(e){var t=Ft.getCollectionPointByAnnotationDataPromise(i),a=t.promise,r=t.close;n.connectPointsStatus={close:r},a.then((function(t){n.connectionPoints=t.connectionPoints,n.render(),n.connectPointsStatus=void 0,e({connectionPoints:t.connectionPoints})}))}))}))}},{key:"setLoading",value:function(e){this.loading=e,this.render()}},{key:"onMouseLeave",value:function(){Object(f.a)(Object(g.a)(n.prototype),"onMouseLeave",this).call(this),this.mouseHoverID=void 0,this.emit("onChange","hover",[])}},{key:"onMouseDown",value:function(e){if(Object(f.a)(Object(g.a)(n.prototype),"onMouseDown",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;var t=this.mouseHoverID;if(0===e.button){var i=[];t&&(i=[t]),this.emit("onChange","selected",i),this.render()}}},{key:"onMouseMove",value:function(e){if(!Object(f.a)(Object(g.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.mouseHoverID,i=this.getHoverRectID(e);if(t!==i){this.mouseHoverID=i;var a=[];i&&(a=[i]),this.emit("onChange","hover",a),this.render()}}}},{key:"updateData",value:function(e){this.annotations=e,this.render()}},{key:"getSpecificStyle",value:function(e){var t=Be.a.pick(e,["stroke","thickness","fill","radius"]),n=gr(gr({},this.style),t);return n.stroke&&Object.assign(n,{color:n.stroke}),n}},{key:"getFontStyle",value:function(e,t){var n,i,a=null!=(n=null==e?void 0:e.fontSize)?n:14,r=null!=(i=null==e?void 0:e.fontFamily)?i:"Arial";return vr(gr({},Re),{color:t.stroke,font:"normal normal 600 ".concat(a,"px ").concat(r)})}},{key:"appendOffset",value:function(e){var t=e.x,n=e.y;return{x:t+Ne.offsetX,y:n+Ne.offsetY}}},{key:"getRenderText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="",i="";return e&&!0!==t?((null==e?void 0:e.order)&&(n="".concat(e.order)),(null==e?void 0:e.label)&&(n=n?"".concat(n,"_").concat(e.label):"".concat(e.label)),(null==e?void 0:e.attribute)&&(n=n?"".concat(n,"  ").concat(e.attribute):"".concat(e.attribute)),(null==e?void 0:e.textAttribute)&&(i=null==e?void 0:e.textAttribute),{headerText:n,bottomText:i}):{headerText:n,bottomText:i}}},{key:"getReferenceOptions",value:function(e){return e?{lineCap:"butt",lineDash:[20,20]}:{}}},{key:"focusPositionByPointList",value:function(e){var t=Ft.calcViewportBoundaries(e),n={x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top},i=gi.getBasicRecPos(this.imgNode,n,this.size,.5);if(i){this.setCurrentPos(i.currentPos),this.setCurrentPosStorage(i.currentPos);var a=this.imgInfo,r=this.innerPosAndZoom.innerZoom;a&&this.setImgInfo(vr(gr({},a),{width:a.width/r*i.innerZoom,height:a.height/r*i.innerZoom})),this.setZoom(i.innerZoom),this.render(),this.renderBasicCanvas()}}},{key:"renderConnectionPoints",value:function(){var e=this;this.connectionPoints.forEach((function(t){var n=mt.changePointByZoom(t,e.zoom,e.currentPos);ti.drawCircleWithFill(e.canvas,n,4,{color:"#fff"}),ti.drawCircleWithFill(e.canvas,n,2,{color:"#000"})}))}},{key:"getRenderStyle",value:function(e){var t=this.getSpecificStyle(e.annotation);return{style:t,fontStyle:this.getFontStyle(e.annotation,t)}}},{key:"renderLine",value:function(e){var t,n,i;if("line"===e.type){var a=this.getRenderStyle(e),r=a.style,o=a.fontStyle,c=e.annotation;if((null==(t=null==c?void 0:c.pointList)?void 0:t.length)>=2){var l=c.lineType,s=void 0===l?B.Line:l,u=mt.changePointListByZoom(null!=(n=null==c?void 0:c.pointList)?n:[],this.zoom,this.currentPos),d=vr(gr(gr({},r),this.getReferenceOptions(null==c?void 0:c.isReference)),{lineType:s,strokeColor:r.stroke}),h=[];if(h=c.showKeyPoint?ti.drawPolygonWithKeyPoint(this.canvas,u,d):ti.drawPolygon(this.canvas,u,d),!0===(null==c?void 0:c.showDirection)&&(null==(i=null==c?void 0:c.pointList)?void 0:i.length)>2){var f=u[0],g=Ft.getLineCenterPoint([u[0],u[1]]);if(s===B.Curve){var v=Math.floor(ae/2);f=h[v],g=h[v+1]}ti.drawArrowByCanvas(this.canvas,f,g,{color:r.stroke,thickness:r.thickness}),ti.drawCircle(this.canvas,u[0],r.thickness+6,{color:r.stroke,thickness:r.thickness})}var b=this.getRenderText(c,null==c?void 0:c.hiddenText),p=b.headerText,m=b.bottomText;if(p&&ti.drawText(this.canvas,this.appendOffset(u[0]),p,o),m){f=u[u.length-1];ti.drawText(this.canvas,this.appendOffset({x:f.x+je.x,y:f.y+je.y}),m,o)}}}}},{key:"renderPolygon",value:function(e){var t,n,i,a,r;if("polygon"===e.type){var o=this.getRenderStyle(e),c=o.style,l=o.fontStyle,s=e.annotation;if((null==(t=null==s?void 0:s.pointList)?void 0:t.length)>=3){var u=s.lineType,d=void 0===u?B.Line:u,h=mt.changePointListByZoom(null!=(n=null==s?void 0:s.pointList)?n:[],this.zoom,this.currentPos);if(s.id===this.mouseHoverID||c.fill){var f=za()(null!=(a=null!=(i=null==c?void 0:c.fill)?i:null==c?void 0:c.stroke)?a:br),g="rgba(".concat(f[0],", ").concat(f[1],", ").concat(f[2],",").concat(.8*f[3],")");ti.drawPolygonWithFill(this.canvas,h,{color:g,lineType:d})}var v=vr(gr(vr(gr({},c),{isClose:!0}),this.getReferenceOptions(null==s?void 0:s.isReference)),{lineType:d,strokeColor:c.stroke}),b=[];if(b=s.showKeyPoint?ti.drawPolygonWithKeyPoint(this.canvas,h,v):ti.drawPolygon(this.canvas,h,v),!0===(null==s?void 0:s.showDirection)&&(null==(r=null==s?void 0:s.pointList)?void 0:r.length)>2){var p=h[0],m=Ft.getLineCenterPoint([h[0],h[1]]);if(d===B.Curve){var y=Math.floor(ae/2);p=b[y],m=b[y+1]}ti.drawArrowByCanvas(this.canvas,p,m,{color:c.stroke,thickness:c.thickness}),ti.drawCircle(this.canvas,h[0],c.thickness+6,{color:c.stroke,thickness:c.thickness})}var x=this.getRenderText(s,null==s?void 0:s.hiddenText),C=x.headerText,w=x.bottomText;if(C&&ti.drawText(this.canvas,this.appendOffset(h[0]),C,l),w){f=h[h.length-1];ti.drawText(this.canvas,this.appendOffset({x:f.x+je.x,y:f.y+je.y}),w,l)}}}}},{key:"renderBox3d",value:function(e){var t=this;if("box3d"===e.type){var n=e.annotation,i=ar(n,n.calib),a={fill:"transparent"},r=Be.a.pick(n,["stroke","thickness"]);i.forEach((function(n,i){var o=gr(vr(gr({},r),{id:"".concat(e.annotation.id,"-").concat(i),pointList:n.pointList}),a);switch(n.type){case"line":t.renderLine({type:"line",annotation:o});break;case"polygon":t.renderPolygon({type:"polygon",annotation:o})}}))}}},{key:"render",value:function(){var e=this;try{if(Object(f.a)(Object(g.a)(n.prototype),"render",this).call(this),!0===this.loading)return;var t=this.annotations.filter((function(e){return"text"===e.type&&"rt"===e.annotation.position})).map((function(e){return e.annotation}));this.renderDomInstance.render(t),this.annotations.forEach((function(t){var n,i,a,r,o,c=e.getSpecificStyle(t.annotation),l=e.getFontStyle(t.annotation,c);switch(t.type){case"rect":var s=t.annotation,u=s.hiddenText,d=void 0!==u&&u,h=s.isReference,f=s.hiddenRectSize,g=void 0!==f&&f,v=e.zoom,b=mt.changeRectByZoom(s,e.zoom,e.currentPos),p=b.x,m=b.y,y=b.width,x=b.height;if(s.id===e.mouseHoverID||c.fill){var C=za()(null!=(i=null!=(n=null==c?void 0:c.fill)?n:null==c?void 0:c.stroke)?i:br),w="rgba(".concat(C[0],", ").concat(C[1],", ").concat(C[2],",").concat(.8*C[3],")");ti.drawRectWithFill(e.canvas,b,{color:w})}ti.drawRect(e.canvas,b,gr(vr(gr({},c),{hiddenText:!0}),e.getReferenceOptions(h)));var k=e.getRenderText(s,null==s?void 0:s.hiddenText),I=k.headerText,L=k.bottomText;I&&ti.drawText(e.canvas,{x:p,y:m-6},I,gr({textMaxWidth:300},l));var P="".concat(Math.round(y/v)," * ").concat(Math.round(x/v)),O=7*P.length;if(!d&&!g&&ti.drawText(e.canvas,{x:p+y-O,y:m+x+15},P,l),L){var S=Math.max(20,y-O);ti.drawText(e.canvas,{x:p,y:m+x+20},s.textAttribute,gr({textMaxWidth:S},l))}break;case"polygon":e.renderPolygon(t);break;case"line":e.renderLine(t);break;case"point":var T=t.annotation,A=mt.changePointByZoom(T,e.zoom,e.currentPos),E=null!=(a=c.radius)?a:3;ti.drawCircle(e.canvas,A,E,c);var D=e.getRenderText(T,null==T?void 0:T.hiddenText),M=D.headerText,N=D.bottomText;M&&ti.drawText(e.canvas,{x:A.x+E/2,y:A.y-E-4},M,gr({textAlign:"center"},l)),N&&ti.drawText(e.canvas,e.appendOffset({x:A.x+E,y:A.y+E+24}),N,l);break;case"text":var R=t.annotation,j=R.text,_=R.x,B=R.y,H=R.textMaxWidth,V=R.color,Z=void 0===V?"white":V,F=R.background,z=void 0===F?"rgba(0, 0, 0, 0.6)":F,U=R.lineHeight,G=void 0===U?25:U,W=R.font,K=void 0===W?q:W,Y=R.position,X=mt.changePointByZoom({x:_,y:B},e.zoom,e.currentPos),J=Ft.getTextArea(e.canvas,R.text,H,K,G),Q=J.width,$=J.height,ee=J.fontHeight,te=void 0===ee?0:ee;if("rt"===Y)break;ti.drawRectWithFill(e.canvas,{x:X.x,y:X.y,width:Q+20,height:$+20,id:"",sourceID:"",valid:!0,textAttribute:"",attribute:""},{color:z}),ti.drawText(e.canvas,{x:X.x+10,y:X.y+te+10},j,{color:Z,lineHeight:G,font:K,textMaxWidth:H});break;case"box3d":e.renderBox3d(t)}null==(o=null==(r=t.annotation)?void 0:r.renderEnhance)||o.call(r,{ctx:e.ctx,canvas:e.canvas,currentPos:e.currentPos,zoom:e.zoom,data:t,toolInstance:e})})),this.renderConnectionPoints()}catch(t){console.error("ViewOperation Render Error",t)}}}]),n}(Ai),mr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i,a,r,o,c;if(Object(u.a)(this,n),(o=t.call(this,e)).toolName=O.ScribbleTool,o.action=ee.Scribble,o.getOriginCoordinate=function(e){return mt.changePointByZoom(o.getCoordinateUnderZoomByRotate(e),1/o.zoom)},o.onMouseDown=function(e){Object(f.a)((i=Object(h.a)(o),Object(g.a)(n.prototype)),"onMouseDown",i).call(i,e)||o.forbidMouseOperation||!o.imgInfo||(o.initCacheCanvas(o.imgNode),o.mouseEvents("onMouseDown").call(Object(h.a)(o),e))},o.onMouseMove=function(e){Object(f.a)((a=Object(h.a)(o),Object(g.a)(n.prototype)),"onMouseMove",a).call(a,e)||o.forbidMouseOperation||!o.imgInfo||o.mouseEvents("onMouseMove").call(Object(h.a)(o),e)},o.onMouseUp=function(e){Object(f.a)((r=Object(h.a)(o),Object(g.a)(n.prototype)),"onMouseUp",r).call(r,e)||o.forbidMouseOperation||!o.imgInfo||o.mouseEvents("onMouseUp").call(Object(h.a)(o),e)},o.mouseEvents=function(e){var t;return(t={},Object(E.a)(t,ee.Scribble,{onMouseMove:o.onScribbleMove,onMouseUp:o.onScribbleEnd,onMouseDown:o.onScribbleStart}),Object(E.a)(t,ee.Erase,{onMouseMove:o.onEraseMove,onMouseUp:o.onEraseEnd,onMouseDown:o.onEraseStart}),t)[o.action][e]},o.setPattern=function(e){if(o.action=e,e===ee.Erase)o.setCustomCursor(o.cursorErase);else o.setCustomCursor("none")},o.penSize=20,(null==(c=o.config.attributeList)?void 0:c.length)>0){var l=o.config.attributeList[0];o.setDefaultAttribute(l.value)}return o}return Object(d.a)(n,[{key:"cursorErase",get:function(){return"url(".concat("data:image/svg+xml;base64,".concat(window.btoa(unescape(encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?><svg width="24" heighst="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#icon-65e7e1747c11bad3)"><path d="M44.7818 24.1702L31.918 7.09935L14.1348 20.5L27.5 37L30.8556 34.6643L44.7818 24.1702Z" fill="#141414" stroke="#000000" stroke-width="4" stroke-linejoin="miter"/><path d="M27.4998 37L23.6613 40.0748L13.0978 40.074L10.4973 36.6231L4.06543 28.0876L14.4998 20.2248" stroke="#000000" stroke-width="4" stroke-linejoin="miter"/><path d="M13.2056 40.072L44.5653 40.072" stroke="#000000" stroke-width="4" stroke-linecap="round"/></g><defs><clipPath id="icon-65e7e1747c11bad3"><rect width="48" height="48" fill="#df4c4c"/></clipPath></defs></svg>')))),") 0 0, auto")}},{key:"defaultCursor",get:function(){return this.action===ee.Erase?this.cursorErase:this.isShowDefaultCursor?"default":"none"}},{key:"color",get:function(){var e,t;return null!=(t=null==(e=null==this?void 0:this.defaultAttributeInfo)?void 0:e.color)?t:"white"}},{key:"penSizeWithZoom",get:function(){return this.penSize/this.zoom}},{key:"cacheCanvasToDataUrl",get:function(){var e;return null==(e=this.cacheCanvas)?void 0:e.toDataURL("image/png",0)}},{key:"setPenSize",value:function(e){this.penSize=e}},{key:"initCacheCanvas",value:function(e){if(!this.cacheCanvas&&e){var t=wa.ImgConversionUtils.createCanvas(e),n=t.canvas,i=t.ctx;this.cacheCanvas=n,this.cacheContext=i}}},{key:"updateCacheCanvasSize",value:function(e){this.cacheCanvas&&(this.cacheCanvas.width=e.width,this.cacheCanvas.height=e.height)}},{key:"updateUrl2CacheContext",value:function(e){var t=this;wa.ImgConversionUtils.createImgDom(e).then((function(e){t.cacheContext||t.initCacheCanvas(e),t.cacheContext&&(t.cacheContext.save(),t.clearCacheCanvas(),t.cacheContext.drawImage(e,0,0,e.width,e.height),t.cacheContext.restore(),t.render())}))}},{key:"setImgNode",value:function(e,t){Object(f.a)(Object(g.a)(n.prototype),"setImgNode",this).call(this,e,t),this.cacheCanvas?this.updateCacheCanvasSize(e):this.initCacheCanvas(e)}},{key:"setResult",value:function(e){var t,n,i=(null!=(t=null==e?void 0:e[0])?t:{}).url;this.clearCacheCanvas(),i||(i=null!=(n=this.cacheCanvasToDataUrl)?n:""),this.history.initRecord([i],!0),i?this.updateUrl2CacheContext(i):this.render()}},{key:"onKeyDown",value:function(e){if(Ye.hotkeyFilter(e)&&!1!==Object(f.a)(Object(g.a)(n.prototype),"onKeyDown",this).call(this,e)){var t=e.keyCode,i=Vn.getAttributeByKeycode(t,this.config.attributeList);void 0!==i&&this.setDefaultAttribute(i)}}},{key:"eventBinding",value:function(){Object(f.a)(Object(g.a)(n.prototype),"eventBinding",this).call(this)}},{key:"setDefaultAttribute",value:function(e){var t=this.config.attributeList.find((function(t){return t.value===e}));t&&(this.defaultAttribute=t.value,this.defaultAttributeInfo=t,this.emit("changeAttributeSidebar"),this.render())}},{key:"clearStatusAfterLeave",value:function(){this.onScribbleEnd(),this.startPoint=void 0}},{key:"onMouseLeave",value:function(){Object(f.a)(Object(g.a)(n.prototype),"onMouseLeave",this).call(this),this.clearStatusAfterLeave()}},{key:"onScribbleStart",value:function(e){if(this.cacheContext){this.cacheContext.save(),this.cacheContext.beginPath(),this.cacheContext.strokeStyle=this.color,this.cacheContext.lineWidth=this.penSizeWithZoom,this.cacheContext.lineCap="round",this.cacheContext.lineJoin="round";var t=this.getOriginCoordinate(e);this.cacheContext.moveTo(t.x,t.y),this.startPoint=t}}},{key:"onScribbleMove",value:function(e){if(1===e.buttons&&this.cacheContext&&this.startPoint){var t=this.getOriginCoordinate(e);this.cacheContext.lineTo(t.x,t.y),this.cacheContext.stroke()}}},{key:"onScribbleEnd",value:function(){var e,t;this.startPoint&&(null==(e=this.cacheContext)||e.closePath(),null==(t=this.cacheContext)||t.restore(),this.startPoint=void 0,this.history.pushHistory(this.cacheCanvasToDataUrl))}},{key:"eraseArc",value:function(e){var t;if(this.cacheContext){var n=this.getOriginCoordinate(e);this.cacheContext.save(),this.cacheContext.beginPath(),this.cacheContext.arc(n.x,n.y,this.penSizeWithZoom/2,0,2*Math.PI,!1),this.cacheContext.clip(),this.cacheContext.clearRect(0,0,this.cacheContext.canvas.width,this.cacheContext.canvas.height),null==(t=this.cacheContext)||t.restore()}}},{key:"onEraseStart",value:function(e){!this.cacheContext||1!==e.buttons||this.eraseArc(e)}},{key:"onEraseMove",value:function(e){!this.cacheContext||1!==e.buttons||this.eraseArc(e)}},{key:"onEraseEnd",value:function(){}},{key:"exportData",value:function(){var e=this.cacheCanvasToDataUrl;return[[],this.basicImgInfo,{imgBase64:e}]}},{key:"clearCacheCanvas",value:function(){var e;null==(e=this.cacheContext)||e.clearRect(0,0,this.cacheContext.canvas.width,this.cacheContext.canvas.height),this.render()}},{key:"clearResult",value:function(){this.clearCacheCanvas(),this.history.pushHistory(this.cacheCanvasToDataUrl)}},{key:"renderPoint",value:function(e){ti.drawCircleWithFill(this.canvas,this.coord,e,{color:this.color})}},{key:"renderBorderPoint",value:function(e){ti.drawCircle(this.canvas,this.coord,e,{color:"black"})}},{key:"render",value:function(){if(Object(f.a)(Object(g.a)(n.prototype),"render",this).call(this),this.ctx&&this.cacheCanvas&&(this.ctx.save(),this.ctx.globalAlpha=.5,ti.drawImg(this.canvas,this.cacheCanvas,{zoom:this.zoom,currentPos:this.currentPos,rotate:this.rotate}),this.ctx.restore(),!this.forbidOperation&&!this.forbidCursorLine)){var e=this.penSize/2;this.action===ee.Erase?this.renderBorderPoint(e):this.renderPoint(e)}}},{key:"undo",value:function(){var e=this.history.undo();e&&this.cacheCanvas&&this.updateUrl2CacheContext(e)}},{key:"redo",value:function(){var e=this.history.redo();e&&this.cacheCanvas&&this.updateUrl2CacheContext(e)}}]),n}(Ai),yr=Object.defineProperty,xr=Object.defineProperties,Cr=Object.getOwnPropertyDescriptors,wr=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,Lr=function(e,t,n){return t in e?yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Pr=function(e,t){for(var n in t||(t={}))kr.call(t,n)&&Lr(e,n,t[n]);if(wr){var i,a=Object(p.a)(wr(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Ir.call(t,n)&&Lr(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},Or=function(e,t){return xr(e,Cr(t))},Sr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i,a,r,o,c,l,s;return Object(u.a)(this,n),(i=t.call(this,e)).selectedIDs=[],i.rightMouseUp=function(e){var t;if(i.drawingPointList.length>0)i.addDrawingPointToPolygonList();else if(i.hoverID)if(e.ctrlKey)i.emit("addSelectedIDs",i.hoverID);else{i.emit("setSelectedIDs",i.hoverID);var n=null==(t=i.polygonList.find((function(e){return e.id===i.hoverID})))?void 0:t.attribute;n&&n!==i.defaultAttribute&&i.emit("syncAttribute",n)}},i.onKeyDown=function(){},i.onKeyUp=function(){},i.renderSingleSelectedPolygon=function(e){var t;if(i.selectedPolygons){var n=i.getPointCloudLineColor(e),a=mt.changePointListByZoom(e.pointList,i.zoom,i.currentPos);ti.drawSelectedPolygonWithFillAndLine(i.canvas,a,{fillColor:"transparent",strokeColor:n,pointColor:"white",thickness:2,lineCap:"round",isClose:!0,lineType:null==(t=i.config)?void 0:t.lineType}),!0===e.isRect&&!0===i.showDirectionLine&&i.renderRectPolygonDirection(a)}},i.showDirectionLine=null==(a=e.showDirectionLine)||a,i.forbidAddNew=null!=(r=e.forbidAddNew)&&r,i.pointCloudConfig=null!=(o=Ye.jsonParser(e.config))?o:{},i.checkMode=null!=(c=e.checkMode)&&c,!1===i.forbidAddNew&&!0===e.checkMode&&(i.forbidAddNew=!0),i.config=Or(Pr({},si),{textConfigurable:!1,attributeConfigurable:!0,attributeList:null!=(s=null==(l=i.pointCloudConfig)?void 0:l.attributeList)?s:[]}),i}return Object(d.a)(n,[{key:"getSelectedIDs",get:function(){return this.selectedIDs}},{key:"setConfig",value:function(e){var t,n=Ye.jsonParser(e);this.pointCloudConfig=n,this.config=Or(Pr({},this.config),{attributeList:null!=(t=null==n?void 0:n.attributeList)?t:[]})}},{key:"dragMouseDown",value:function(e){this.checkMode||Object(f.a)(Object(g.a)(n.prototype),"dragMouseDown",this).call(this,e)}},{key:"deletePolygon",value:function(e){this.checkMode||Object(f.a)(Object(g.a)(n.prototype),"deletePolygon",this).call(this,e)}},{key:"deletePolygonPoint",value:function(e){this.checkMode||Object(f.a)(Object(g.a)(n.prototype),"deletePolygonPoint",this).call(this,e)}},{key:"setSelectedIDs",value:function(e){this.selectedIDs=e,this.setSelectedID(1===this.selectedIDs.length?this.selectedIDs[0]:""),this.render()}},{key:"deleteSelectedID",value:function(){Object(f.a)(Object(g.a)(n.prototype),"deleteSelectedID",this).call(this),this.selectedIDs=[],this.emit("deleteSelectedIDs")}},{key:"selectedPolygons",get:function(){return Pt.getPolygonByIDs(this.polygonList,this.selectedIDs)}},{key:"getLineColor",value:function(){return"rgba(0, 255, 255, 0.5)"}},{key:"getPointCloudLineColor",value:function(e){return!1===e.valid?wa.INVALID_COLOR:wa.toolStyleConverter.getColorFromConfig({attribute:e.attribute},Or(Pr({},this.pointCloudConfig),{attributeConfigurable:!0}),{}).stroke}},{key:"renderStaticPolygon",value:function(){var e,t=this;!1===this.isHidden&&(null==(e=this.polygonList)||e.forEach((function(e){var n,i,a;if(![].concat(Object(l.a)(t.selectedIDs),[t.editPolygonID]).includes(e.id)){var r=t.getPointCloudLineColor(e),o=mt.changePointListByZoom(e.pointList||[],t.zoom,t.currentPos);ti.drawPolygonWithFillAndLine(t.canvas,o,{fillColor:"transparent",strokeColor:r,pointColor:"white",thickness:null!=(i=null==(n=t.style)?void 0:n.width)?i:2,lineCap:"round",isClose:!0,lineType:null==(a=t.config)?void 0:a.lineType}),!0===e.isRect&&!0===t.showDirectionLine&&t.renderRectPolygonDirection(o)}})))}},{key:"renderSelectedPolygon",value:function(){var e,t=this;null==(e=this.selectedPolygons)||e.forEach((function(e){t.renderSingleSelectedPolygon(e)}))}},{key:"renderRectPolygonDirection",value:function(e){e.length<2||ti.drawLine(this.canvas,e[0],e[1],{color:"white",thickness:3,lineDash:[6]})}},{key:"currentPolygonListByPattern",get:function(){var e=this;return this.polygonList.filter((function(t){return e.pattern===$.Rect?!0===t.isRect:e.pattern!==$.Normal||!0!==t.isRect}))}},{key:"getHoverID",value:function(e){var t,n=this,i=this.getCoordinateUnderZoom(e),a=this.currentPolygonListByPattern.map((function(e){return Or(Pr({},e),{pointList:mt.changePointListByZoom(e.pointList,n.zoom)})}));return Pt.getHoverPolygonID(i,a,10,null==(t=this.config)?void 0:t.lineType)}},{key:"switchToNextPolygon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te.ascend;if(!(this.drawingPointList.length>0)){var t=this.currentPolygonListByPattern.map((function(e){var t,n,i,a;return Or(Pr({},e),{x:null!=(n=null==(t=e.pointList[0])?void 0:t.x)?n:0,y:null!=(a=null==(i=e.pointList[0])?void 0:i.y)?a:0})})),n=Ye.getNextSelectedRectID(t,e,this.selectedID);return n?(this.setSelectedIDs([n.id]),this.render(),[n.id]):void 0}}},{key:"setSelectedIdAfterAddingDrawing",value:function(e){0!==this.drawingPointList.length&&this.setSelectedID(e)}},{key:"setSelectedID",value:function(e){var t,n,i=this.selectedID;e!==i&&i&&(null==(t=this._textAttributInstance)||t.changeSelected()),e||null==(n=this._textAttributInstance)||n.clearTextAttribute(),this.selectedID=e,this.render()}},{key:"addPointInDrawing",value:function(e){this.forbidAddNew||Object(f.a)(Object(g.a)(n.prototype),"addPointInDrawing",this).call(this,e)}},{key:"setCanvasSize",value:function(e){var t,n,i=this.pixelRatio;this.size=e,this.setImgInfo(e),this.updateCanvasBasicStyle(this.basicCanvas,e,0),this.updateCanvasBasicStyle(this.canvas,e,10),null==(t=this.ctx)||t.scale(i,i),null==(n=this.basicCtx)||n.scale(i,i),this.initImgPos(),this.renderBasicCanvas(),this.render()}},{key:"setPolygonValidAndRender",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?Object(f.a)(Object(g.a)(n.prototype),"setPolygonValidAndRender",this).call(this,e):this.emit("validUpdate",e)}}]),n}(Da),Tr={0:"\u76ee\u6807\u68c0\u6d4b",1:"\u56fe\u50cf\u5206\u7c7b"},Ar={0:"\u6807\u6ce8\u6587\u4ef6\u4f20\u8f93\u4e2d",1:"\u6807\u6ce8\u6587\u4ef6\u4f20\u8f93\u91cd\u8bd5",2:"\u6807\u6ce8\u6587\u4ef6\u4f20\u8f93\u5931\u8d25",3:"\u6807\u6ce8\u4e2d",4:"\u4efb\u52a1\u7ec8\u6b62",5:"\u4efb\u52a1\u5b8c\u6210",6:"\u6570\u636e\u5df2\u53d1\u5e03"};(or=rr||(rr={}))[or.Upload=0]="Upload",or[or.UploadRetry=1]="UploadRetry",or[or.UploadFail=2]="UploadFail",or[or.Annotation=3]="Annotation",or[or.Terminated=4]="Terminated",or[or.Finish=5]="Finish",or[or.Publish=6]="Publish";var Er=Object.defineProperty,Dr=Object.getOwnPropertySymbols,Mr=Object.prototype.hasOwnProperty,Nr=Object.prototype.propertyIsEnumerable,Rr=function(e,t,n){return t in e?Er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},jr=function(e,t){for(var n in t||(t={}))Mr.call(t,n)&&Rr(e,n,t[n]);if(Dr){var i,a=Object(p.a)(Dr(t));try{for(a.s();!(i=a.n()).done;){n=i.value;Nr.call(t,n)&&Rr(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},_r=8,Br=26,Hr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).getHoverRectID=function(e){var t,n,a=i.getCoordinateUnderZoom(e),r=null!=(n=null==(t=i.resultList.find((function(e){return e.toolName===O.Rect})))?void 0:t.result)?n:[];if(r.length>0){var o=r.filter((function(e){return qt.isInRect(a,e,2,i.zoom)}));if(0===o.length)return"";if(1===o.length)return o[0].id;if(o.length>1)return o.map((function(e){return{size:e.width*e.height,id:e.id}})).sort((function(e,t){return e.size-t.size}))[0].id}return""},i.resultList=[],i.hoverID=[],i.fillID=[],i.render=i.render.bind(Object(h.a)(i)),i.drawPolygon=i.drawPolygon.bind(Object(h.a)(i)),i.drawRect=i.drawRect.bind(Object(h.a)(i)),i.drawTag=i.drawTag.bind(Object(h.a)(i)),i.setShowDefaultCursor(!0),i.forbidOperation=!0,i}return Object(d.a)(n,[{key:"onMouseDown",value:function(e){var t,i;if(Object(f.a)(Object(g.a)(n.prototype),"onMouseDown",this).call(this,e)||this.forbidMouseOperation||!this.imgInfo)return!0;var a=this.mouseHoverID,r=null!=(i=null==(t=this.resultList.find((function(e){return e.toolName===O.Rect})))?void 0:t.result)?i:[];if(0===e.button){var o=[a],c=!0;a&&r.find((function(e){return e.id===a&&(null==e?void 0:e.isSelected)}))&&(c=!1),a||(o=r.map((function(e){return e.id})),c=!1),this.emit("setSelectedID",o,c),this.render()}}},{key:"updateRotate",value:function(){}},{key:"onMouseMove",value:function(e){if(!Object(f.a)(Object(g.a)(n.prototype),"onMouseMove",this).call(this,e)&&!this.forbidMouseOperation&&this.imgInfo){var t=this.mouseHoverID,i=this.getHoverRectID(e);if(t!==i){this.mouseHoverID=i;var a=[i];i||(a=[]),this.emit("setHoverID",a),this.render()}}}},{key:"setResult",value:function(e){this.resultList=Object(_e.cloneDeep)(e),this.render()}},{key:"drawPolygon",value:function(e,t){var n=this;null==e||e.forEach((function(e){var i,a,r,o,c,l=n.getColor(e.attribute,t),s=Ji.getStrokeAndFill(l,e.valid),u=null!=(a=null==(i=n.style)?void 0:i.width)?a:2;n.hoverID.includes(e.id)?(u=4,ti.drawPolygonWithFillAndLine(n.canvas,mt.changePointListByZoom(e.pointList,n.zoom,n.currentPos),{fillColor:s.fill,strokeColor:s.stroke,pointColor:"white",thickness:u,lineCap:"round",isClose:!0,lineType:null==t?void 0:t.lineType})):ti.drawPolygon(n.canvas,mt.changePointListByZoom(e.pointList,n.zoom,n.currentPos),{color:s.fill,lineType:null==(r=n.config)?void 0:r.lineType,thickness:u,isClose:!0});var d="".concat(null!=(c=Vn.getAttributeShowText(e.attribute,null!=(o=null==t?void 0:t.attributeList)?o:[]))?c:"");(null==t?void 0:t.isShowOrder)&&(null==e?void 0:e.order)>0&&(d="".concat(e.order," ").concat(d)),ti.drawText(n.canvas,mt.changePointByZoom(e.pointList[0],n.zoom,n.currentPos),d,jr({color:s.stroke},Ne));var h=mt.changePointListByZoom(e.pointList||[],n.zoom,n.currentPos),f=h[h.length-1];ti.drawText(n.canvas,{x:f.x+_r,y:f.y+Br},null==e?void 0:e.textAttribute,jr({color:s.stroke},Ne))}))}},{key:"drawRect",value:function(e,t){var n=this;null==e||e.forEach((function(e){var i=1;n.hoverID.includes(e.id)&&(i=3);var a=n.getColor(e.attribute,t),r=mt.changeRectByZoom(e,n.zoom,n.currentPos);ti.drawRect(n.canvas,r,{color:(null==e?void 0:e.valid)?a.valid.stroke:a.invalid.stroke,thickness:i}),n.fillID.includes(e.id)&&ti.drawRectWithFill(n.canvas,r,{color:(null==e?void 0:e.valid)?a.valid.fill:a.invalid.fill})}))}},{key:"drawTag",value:function(e,t){var n=e.reduce((function(e,n){return[].concat(Object(l.a)(e),Object(l.a)((null==t?void 0:t.inputList)?Yi.getTagNameList(n.result,t.inputList):Yi.getTagnameListWithoutConfig(n.result)))}),[]);ti.drawTag(this.canvas,n)}},{key:"setHoverID",value:function(e){this.hoverID=e,this.render()}},{key:"setFillID",value:function(e){this.fillID=e,this.render()}},{key:"render",value:function(){var e,t=this;Object(f.a)(Object(g.a)(n.prototype),"render",this).call(this),null==(e=this.resultList)||e.forEach((function(e){switch(null==e?void 0:e.toolName){case O.Rect:t.drawRect(e.result,Ye.jsonParser(e.config));break;case O.Polygon:t.drawPolygon(e.result,Ye.jsonParser(e.config));break;case O.Tag:t.drawTag(e.result,Ye.jsonParser(e.config))}}))}},{key:"exportData",value:function(){return[[],{}]}}]),n}(Ai),Vr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).onKeydown=function(e){switch(e.keyCode){case nn.Esc:e.preventDefault(),e.stopPropagation(),i.clearPredictionInfo();break;case nn.Z:e.ctrlKey&&(e.preventDefault(),e.stopPropagation(),i.rectList=[],i.render())}},i.segmentPrediction=function(e){return function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(t){a(t)}},o=function(e){try{c(n.throw(e))}catch(t){a(t)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))}(Object(h.a)(i),null,Object(ai.a)().mark((function t(){var n;return Object(ai.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getCoordinateUnderZoom(e),this.isRunSegment=!0,this.render(),this.runPrediction){t.next=4;break}return this.emit("messageError","You needs to set runPrediction function"),this.clearPredictionInfo(),t.abrupt("return");case 4:return t.next=6,this.runPrediction({point:n,rect:{x:this.rectList[0].x,y:this.rectList[0].y,w:this.rectList[0].width,h:this.rectList[0].height}});case 6:this.clearPredictionInfo();case 7:case"end":return t.stop()}}),t,this)})))},i.isRunSegment=!1,i.runPrediction=e.runPrediction,i}return Object(d.a)(n,[{key:"setRunPrediction",value:function(e){this.runPrediction=e}},{key:"eventBinding",value:function(){var e=this;document.addEventListener("keydown",(function(t){return e.onKeydown(t)})),Object(f.a)(Object(g.a)(n.prototype),"eventBinding",this).call(this)}},{key:"clearPredictionInfo",value:function(){this.rectList=[],this.isShowCursor=!1,this.coord={x:-1,y:-1},this.drawingRect=void 0,this.isRunSegment=!1,this.clearCanvas(),this.render()}},{key:"onMouseUp",value:function(e){if(!this.isRunSegment){if(0===e.button&&1===this.rectList.length&&!this.isRunSegment)return e.stopPropagation(),this.segmentPrediction(e),void this.clearActiveStatus();Object(f.a)(Object(g.a)(n.prototype),"onMouseUp",this).call(this,e)}}},{key:"onMouseDown",value:function(e){this.isRunSegment||Object(f.a)(Object(g.a)(n.prototype),"onMouseDown",this).call(this,e)}},{key:"renderCursorLine",value:function(){var e;if(this.ctx){var t=this.ctx,i=10,a=this.coord,r=a.x,o=a.y;t.save(),t.strokeStyle="white",t.setLineDash([6]),t.lineWidth=1,t.strokeRect(r-i,o-i,20,20),t.restore();var c="\u2460 ".concat(wa.i18n.t("FramingOfObjectToBeDivided")),l="en"===wa.i18n.language,s=l?326:186;if(1===(null==(e=this.rectList)?void 0:e.length)){c="\u2461 ".concat(wa.i18n.t("ClickOnTarget")),s=l?232:142;t.save(),t.strokeStyle="white";t.beginPath(),t.moveTo(r+11+4,o+11+2),t.arc(r+11+2,o+11+2,2,0,2*Math.PI,!0),t.stroke(),t.restore()}this.isRunSegment&&(s=l?316:136,c=wa.i18n.t("SplittingAlgorithmPrediction")),t.save(),t.fillStyle=this.style.strokeColor,t.fillRect(r+i,o-40-1,s,32),t.restore(),t.save(),t.font="14px Source Han Sans CN",t.fillStyle="white",t.fillText(c,r+i+14,o-20),t.restore(),Object(f.a)(Object(g.a)(n.prototype),"renderCursorLine",this).call(this)}}},{key:"renderDrawingRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.ctx&&e){var i=mt.changeRectByZoom(e,n?t:this.zoom,this.currentPos),a=i.x,r=i.y,o=i.width,c=i.height;this.ctx.save(),this.ctx.lineCap="butt",this.ctx.lineWidth=this.style.strokeWidth,this.ctx.strokeStyle="white",this.ctx.strokeRect(a,r,o,c),this.ctx.strokeStyle=this.style.strokeColor,this.ctx.setLineDash([6]),this.ctx.strokeRect(a,r,o,c),this.ctx.restore()}}},{key:"renderTextAttribute",value:function(){}},{key:"renderSelectedRect",value:function(){}}]),n}(Zi),Zr=function(e){switch(e){case O.Rect:case O.RectTrack:return Zi;case O.SegmentByRect:return Vr;case O.Tag:return Xi;case O.Polygon:return Da;case S.Check:return Hr;case O.Line:return xa;case O.Point:return ca;case O.Text:return Ca;case O.ScribbleTool:return mr;default:throw new Error("not match tool")}},Fr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(Ye);Fr.getCurrentOperation=Zr;var zr=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"load",value:function(e){return new Promise((function(t,n){var i=new Image;i.crossOrigin="anonymous",e.startsWith("file")?i.src=encodeURI(e):i.src=e,i.onload=function(){t(i)},i.onerror=function(){n(i)}}))}}]),e}(),Ur=function(e,t,n){var i=e[t];return e[t]=e[n],e[n]=i,e},Gr=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"isSingleTool",value:function(e){return!this.isHybridTool(e)}},{key:"isHybridTool",value:function(e){return Array.isArray(e)}}]),e}(),Wr=Gr;Wr.getTopToolName=function(e){return Gr.isHybridTool(e)?e[e.length-1]:e};var Kr=function(){function e(t){var n,i;Object(u.a)(this,e),this.toolOperationList=[],this.toolOperationDom=[],this.init(),this.container=t.container,this.size=t.size,this.imgNode=t.imgNode,this.config=null!=(n=t.config)?n:JSON.stringify(ui(Wr.getTopToolName(t.toolName))),this.style=null!=(i=t.style)?i:di}return Object(d.a)(e,[{key:"setImgNode",value:function(e,t){this.toolOperationList.forEach((function(n){n.setImgNode(e,t)}))}},{key:"setImgAttribute",value:function(e){this.toolOperationList.forEach((function(t){t.setImgAttribute(e)}))}},{key:"setSize",value:function(e){this.toolOperationList.forEach((function(t){t.setSize(e)}))}},{key:"syncPosition",value:function(e,t,n,i){this.toolOperationList.forEach((function(a){i!==a&&(a.setCurrentPos(e),a.setZoom(t),a.setImgInfo(n),a.renderBasicCanvas(),a.render())}))}},{key:"defaultSize",get:function(){var e,t;return{width:(null==(e=this.imgNode)?void 0:e.width)||this.size.width,height:(null==(t=this.imgNode)?void 0:t.height)||this.size.height}}},{key:"createDom",value:function(){var e=this.defaultSize,t=e.width,n=e.height,i=window.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.width="".concat(t,"px"),i.style.height="".concat(n,"px");var a=this.toolOperationList.length+1;return i.style.zIndex="".concat(a),i}},{key:"getEmptyImage",value:function(e,t){var n=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n?(n.fillStyle="transparent",n.fillRect(0,0,e.width,e.height),t.toDataURL()):""}({width:e,height:t}),i=new Image;return i.src=n,i}},{key:"createOperation",value:function(e,t,n){var i,a,r=this,o=this.defaultSize,c=o.width,l=o.height,s=this.createDom(),u=this.getEmptyImage(c,l),d={container:s,size:this.size,config:null!=(i=null==this?void 0:this.config)?i:"{}",drawOutSideTarget:!1,style:this.style,imgNode:t||u,hiddenImg:!!e};if(n&&Object.assign(d,n),e){var h=Zr(e);if(!h)return;a=new h(d)}else a=new Ai(d),s.style.zIndex="0",a.init();return null==a||a.init(),a.canvas.id=null!=e?e:"basicCanvas",a.on("dragMove",(function(e){var t=e.currentPos,n=e.zoom,i=e.imgInfo;r.syncPosition(t,n,i,a)})),a.on("renderZoom",(function(e,t,n){e&&t&&r.syncPosition(t,e,n,a)})),e?(this.container.appendChild(s),this.toolOperationList.push(a),this.toolOperationDom.push(s),a):(this.container.insertBefore(s,this.container.childNodes[0]),this.toolOperationList.unshift(a),this.toolOperationDom.unshift(s),a)}},{key:"switchLastTwoCanvas",value:function(){if(!(this.toolOperationDom.length<3)){var e=this.toolOperationDom.length,t=e-1,n=e-2,i=this.toolOperationDom[t],a=this.toolOperationDom[n];return a&&i?(i.style.zIndex="".concat(t-1),a.style.zIndex="".concat(t),this.toolOperationList[t].clearActiveStatus(),this.toolOperationList[t].clearCursorLine(),this.toolOperationList[t].render(),this.toolOperationList=Ur(this.toolOperationList,t,n),this.toolOperationDom=Ur(this.toolOperationDom,t,n),this.toolOperationList[t]):void 0}console.error("switchLastTwoCanvas is just used the layer which has 3 canvas")}},{key:"getFirstToolOperation",value:function(){return this.toolOperationList.length>1?this.toolOperationList[1]:this.toolOperationList[0]}},{key:"destroyAllLayer",value:function(){var e=this;this.toolOperationList.forEach((function(t){t.destroyCanvas(),e.init()}))}},{key:"init",value:function(){this.toolOperationList=[],this.toolOperationDom=[]}}]),e}(),Yr=function(e){return new Promise((function(t,n){var i=document.createElement("img");i.crossOrigin="Anonymous",i.onerror=function(e){console.error(e),n(i)},i.src=e,i.onload=function(){t(i)}}))},Xr=function(){function e(t){var n,i,a=this;Object(u.a)(this,e),this.setImgSrc=function(e){return function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(en){a(en)}},o=function(e){try{c(n.throw(e))}catch(en){a(en)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))}(a,null,Object(ai.a)().mark((function t(){var n;return Object(ai.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yr(e);case 2:!(n=t.sent)||this.setImgNode(n);case 4:case"end":return t.stop()}}),t,this)})))},this.container=t.container,this.size=t.size,this.toolName=t.toolName,this.imgNode=t.imgNode,this.config=null!=(n=t.config)?n:JSON.stringify(ui(Wr.getTopToolName(t.toolName))),this.style=null!=(i=t.style)?i:di,this.toolScheduler=new Kr(t),this.i18nLanguage="cn",this._initToolOperation()}return Object(d.a)(e,[{key:"setToolName",value:function(e,t){this.toolName=e;var n=t||JSON.stringify(ui(Wr.getTopToolName(e)));this.config=n,this._initToolOperation()}},{key:"setImgNode",value:function(e,t){this.toolScheduler.setImgNode(e,t),this.imgNode=e}},{key:"setImgAttribute",value:function(e){this.toolScheduler.setImgAttribute(e)}},{key:"setSize",value:function(e){this.size=e,this.toolScheduler.setSize(e)}},{key:"setStyle",value:function(e){this.style=e}},{key:"_initToolOperation",value:function(){var e=this;this.toolScheduler.destroyAllLayer();var t=[],n={hiddenImg:!0};Wr.isSingleTool(this.toolName)?(t=[this.toolName],Object.assign(n,{hiddenImg:!1})):t=this.toolName,t.length>1&&this.toolScheduler.createOperation(void 0,this.imgNode),t.forEach((function(i,a){var r=e.toolScheduler.createOperation(i,void 0,n);a===t.length-1&&(e.toolInstance=r)})),this.setLang(this.i18nLanguage)}},{key:"setBasicInfo",value:function(e,t){this.dependToolName=e,this.basicResult=t,this.toolInstance.setDependName(e),this.toolInstance.setBasicResult(t),this.toolInstance.renderBasicCanvas()}},{key:"clearBasicResult",value:function(){this.setBasicInfo()}},{key:"forbidOperation",value:function(){this.toolInstance.setForbidOperation(!0)}},{key:"launchOperation",value:function(){this.toolInstance.setForbidOperation(!1)}},{key:"setLang",value:function(e){switch(this.i18nLanguage=e,e){case"cn":this.toolInstance.setLang(Ee.Zh);break;case"en":this.toolInstance.setLang(Ee.US)}}},{key:"setDataInjectionAtCreation",value:function(e){this.toolInstance.setDataInjectionAtCreation(e)}},{key:"setRenderEnhance",value:function(e){this.toolInstance.setRenderEnhance(e)}},{key:"switchLastTwoCanvas",value:function(){var e=this.toolScheduler.switchLastTwoCanvas();if(e)return this.toolInstance=e,e}},{key:"firstToolInstance",get:function(){return this.toolScheduler.getFirstToolOperation()}},{key:"setCustomRenderStyle",value:function(e){this.toolInstance.setCustomRenderStyle(e)}}]),e}(),Jr=function(){function e(t){Object(u.a)(this,e),this.container=t.container}return Object(d.a)(e,[{key:"createCanvas",value:function(e,t){if("string"!=typeof e)return this.container.appendChild(e),e.style.position="absolute",e.style.left="0",e.style.top="0",e;var n=document.createElement("canvas");return n.id=e,t&&t.size&&(n.width=t.size.width,n.height=t.size.height),this.container.appendChild(n),n}},{key:"destroyCanvas",value:function(e){var t=document.getElementById(e);return t&&this.container.removeChild(t),t}}]),e}(),Qr=n(179),qr=y("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGU9ZnVuY3Rpb24oeCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGcodCl7Y29uc3QgZT0tNyxvPTMsaT1vLWU7cmV0dXJuIHQ8ZSYmKHQ9ZSksdD5vJiYodD1vKSxNYXRoLmZsb29yKCh0LWUpL2kqMjU1KX1mdW5jdGlvbiBwKCl7bGV0IHQ7Y29uc3QgZT1uZXcgQXJyYXkoMjU2KS5maWxsKCIiKS5tYXAoKCk9Pm5ldyBBcnJheSgzKS5maWxsKCIiKSk7Zm9yKGxldCBvPTA7bzwyMDtvKyspe2Zvcih0PTA7dDwzMjt0KyspZVt0XVswXT0xMjgrNCp0LGVbdF1bMV09MCxlW3RdWzJdPTA7Zm9yKGVbMzJdWzBdPTI1NSxlWzMyXVsxXT0wLGVbMzJdWzJdPTAsdD0wO3Q8NjM7dCsrKWVbMzMrdF1bMF09MjU1LGVbMzMrdF1bMV09NCs0KnQsZVszMyt0XVsyXT0wO2ZvcihlWzk2XVswXT0yNTQsZVs5Nl1bMV09MjU1LGVbOTZdWzJdPTIsdD0wO3Q8NjI7dCsrKWVbOTcrdF1bMF09MjUwLTQqdCxlWzk3K3RdWzFdPTI1NSxlWzk3K3RdWzJdPTYrNCp0O2ZvcihlWzE1OV1bMF09MSxlWzE1OV1bMV09MjU1LGVbMTU5XVsyXT0yNTQsdD0wO3Q8NjQ7dCsrKWVbMTYwK3RdWzBdPTAsZVsxNjArdF1bMV09MjUyLXQqNCxlWzE2MCt0XVsyXT0yNTU7Zm9yKHQ9MDt0PDMyO3QrKyllWzIyNCt0XVswXT0wLGVbMjI0K3RdWzFdPTAsZVsyMjQrdF1bMl09MjUyLTQqdH1yZXR1cm4gZX1jb25zdCBDPXAoKTtmdW5jdGlvbiBtKHQsZSxvPTApe2xldCBpPTAscyxhLHIsbjtlPVsuLi5lXSxvPT09MSYmKGU9Y3JlYXRlU21vb3RoQ3VydmVQb2ludHMoZS5yZWR1Y2UoKGMsbCk9PlsuLi5jLGwueCxsLnldLFtdKSwuNSwhMCxTRUdNRU5UX05VTUJFUikpLFtyXT1lO2NvbnN0IHU9ZS5sZW5ndGg7Zm9yKHM9MTtzPD11O3MrKyluPWVbcyV1XSx0Lng+TWF0aC5taW4oci54LG4ueCkmJnQueDw9TWF0aC5tYXgoci54LG4ueCkmJnQueTw9TWF0aC5tYXgoci55LG4ueSkmJnIueCE9PW4ueCYmKGE9KHQueC1yLngpKihuLnktci55KS8obi54LXIueCkrci55LChyLnk9PT1uLnl8fHQueTw9YSkmJmkrKykscj1uO3JldHVybiBpJTIhPTB9ZnVuY3Rpb24gYih7ek1pbjp0LHpNYXg6ZSxwb2x5Z29uUG9pbnRMaXN0Om8sYXR0cmlidXRlOmkseDpzLHk6YSx6OnIsY29sb3JMaXN0Om4sdmFsaWQ6dX0pe2lmKG0oe3g6cyx5OmF9LG8pJiZyPj10JiZyPD1lKXJldHVybiB1PT09ITE/WzEsMTAzLzI1NSwxMDIvMjU1XTpuW2ldP25baV0ucmdiYS5zbGljZSgwLDMpLm1hcChsPT5sLzI1NSk6WzEsMCwwXX1yZXR1cm4gb25tZXNzYWdlPWZ1bmN0aW9uKGUpe2NvbnN0e3Bvc2l0aW9uOm8sY29sb3I6aSxjdWJvaWRMaXN0OnMsY29sb3JMaXN0OmF9PWUuZGF0YTtsZXQgcj0wO2ZvcihsZXQgbj0wO248by5sZW5ndGg7bis9Myl7Y29uc3QgdT1vW25dLGM9b1tuKzFdLGw9b1tuKzJdLGQ9cy5tYXAoZj0+Yih7cG9seWdvblBvaW50TGlzdDpmLnBvbHlnb25Qb2ludExpc3Qsek1pbjpmLnpNaW4sek1heDpmLnpNYXgseDp1LHk6Yyx6OmwsYXR0cmlidXRlOmYuYXR0cmlidXRlLGNvbG9yTGlzdDphLHZhbGlkOmYudmFsaWR9KSkuZmlsdGVyKGY9PmYpLnBvcCgpO2lmKGQpe3IrKztjb25zdFtmLHksTV09ZDtpW25dPWYsaVtuKzFdPXksaVtuKzJdPU19ZWxzZXtjb25zdCBmPWcobCkseT1DW2ZdLFtNLHcsX109eTtpW25dPU0vMjU1LGlbbisxXT13LzI1NSxpW24rMl09Xy8yNTV9fXBvc3RNZXNzYWdlKHtwb2ludHM6byxjb2xvcjppLG51bTpyfSl9LHguaXNJblBvbHlnb249bSxPYmplY3QuZGVmaW5lUHJvcGVydHkoeCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSkseH0oe30pOwoK",null,!1),$r=y("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGU9ZnVuY3Rpb24oeCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIE0odCl7Y29uc3QgZT0tNyxzPTMsZj1zLWU7cmV0dXJuIHQ8ZSYmKHQ9ZSksdD5zJiYodD1zKSxNYXRoLmZsb29yKCh0LWUpL2YqMjU1KX1mdW5jdGlvbiBtKCl7bGV0IHQ7Y29uc3QgZT1uZXcgQXJyYXkoMjU2KS5maWxsKCIiKS5tYXAoKCk9Pm5ldyBBcnJheSgzKS5maWxsKCIiKSk7Zm9yKGxldCBzPTA7czwyMDtzKyspe2Zvcih0PTA7dDwzMjt0KyspZVt0XVswXT0xMjgrNCp0LGVbdF1bMV09MCxlW3RdWzJdPTA7Zm9yKGVbMzJdWzBdPTI1NSxlWzMyXVsxXT0wLGVbMzJdWzJdPTAsdD0wO3Q8NjM7dCsrKWVbMzMrdF1bMF09MjU1LGVbMzMrdF1bMV09NCs0KnQsZVszMyt0XVsyXT0wO2ZvcihlWzk2XVswXT0yNTQsZVs5Nl1bMV09MjU1LGVbOTZdWzJdPTIsdD0wO3Q8NjI7dCsrKWVbOTcrdF1bMF09MjUwLTQqdCxlWzk3K3RdWzFdPTI1NSxlWzk3K3RdWzJdPTYrNCp0O2ZvcihlWzE1OV1bMF09MSxlWzE1OV1bMV09MjU1LGVbMTU5XVsyXT0yNTQsdD0wO3Q8NjQ7dCsrKWVbMTYwK3RdWzBdPTAsZVsxNjArdF1bMV09MjUyLXQqNCxlWzE2MCt0XVsyXT0yNTU7Zm9yKHQ9MDt0PDMyO3QrKyllWzIyNCt0XVswXT0wLGVbMjI0K3RdWzFdPTAsZVsyMjQrdF1bMl09MjUyLTQqdH1yZXR1cm4gZX1jb25zdCBkPW0oKTtmdW5jdGlvbiBoKHQsZSxzPTApe2xldCBmPTAsbCx1LG4sbztlPVsuLi5lXSxzPT09MSYmKGU9Y3JlYXRlU21vb3RoQ3VydmVQb2ludHMoZS5yZWR1Y2UoKGEscik9PlsuLi5hLHIueCxyLnldLFtdKSwuNSwhMCxTRUdNRU5UX05VTUJFUikpLFtuXT1lO2NvbnN0IGk9ZS5sZW5ndGg7Zm9yKGw9MTtsPD1pO2wrKylvPWVbbCVpXSx0Lng+TWF0aC5taW4obi54LG8ueCkmJnQueDw9TWF0aC5tYXgobi54LG8ueCkmJnQueTw9TWF0aC5tYXgobi55LG8ueSkmJm4ueCE9PW8ueCYmKHU9KHQueC1uLngpKihvLnktbi55KS8oby54LW4ueCkrbi55LChuLnk9PT1vLnl8fHQueTw9dSkmJmYrKyksbj1vO3JldHVybiBmJTIhPTB9cmV0dXJuIG9ubWVzc2FnZT1mdW5jdGlvbihlKXtjb25zdHt6TWluOnMsek1heDpmLHBvbHlnb25Qb2ludExpc3Q6bCxwb3NpdGlvbjp1LGNvbG9yOm59PWUuZGF0YSxvPVtdLGk9W107bGV0IGE9MDtmb3IobGV0IHI9MDtyPHUubGVuZ3RoO3IrPTMpe2NvbnN0IHA9dVtyXSx5PXVbcisxXSxjPXVbcisyXTtpZihoKHt4OnAseX0sbCkmJmM+PXMmJmM8PWYpe2lmKG8ucHVzaChwKSxvLnB1c2goeSksby5wdXNoKGMpLG4ubGVuZ3RoPT09MCl7Y29uc3QgZz1NKGMpLHc9ZFtnXSxbQyxfLEVdPXc7aS5wdXNoKEMvMjU1KSxpLnB1c2goXy8yNTUpLGkucHVzaChFLzI1NSl9ZWxzZSBpLnB1c2gobltyXSksaS5wdXNoKG5bcisxXSksaS5wdXNoKG5bcisyXSk7YSsrfX10aGlzLnBvc3RNZXNzYWdlKHtwb3NpdGlvbjpvLGNvbG9yOmksbnVtOmF9KX0seC5pc0luUG9seWdvbj1oLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh4LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx4fSh7fSk7Cgo=",null,!1),eo=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).littleEndian=!0,i}return Object(d.a)(n,[{key:"load",value:function(e,t,n,i){var a=this,r=new Ga.j(a.manager);r.setPath(a.path),r.setResponseType("arraybuffer"),r.setRequestHeader(a.requestHeader),r.setWithCredentials(a.withCredentials),r.load(e,(function(n){try{t(a.parse(n))}catch(r){i?i(r):console.error(r),a.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t=Ga.p.decodeText(new Uint8Array(e)),n=function(e){var t={},n=e.search(/[\n\r]data\s(\S*)\s/i),i=/[\n\r]data\s(\S*)\s/i.exec(e.slice(n-1));if(t.data=i[1],t.headerLen=i[0].length+n,t.str=e.slice(0,t.headerLen),t.str=t.str.replace(/#.*/gi,""),t.version=/version (.*)/i.exec(t.str),t.fields=/fields (.*)/i.exec(t.str),t.size=/size (.*)/i.exec(t.str),t.type=/type (.*)/i.exec(t.str),t.count=/count (.*)/i.exec(t.str),t.width=/width (.*)/i.exec(t.str),t.height=/height (.*)/i.exec(t.str),t.viewpoint=/viewpoint (.*)/i.exec(t.str),t.points=/points (.*)/i.exec(t.str),null!==t.version&&(t.version=parseFloat(t.version[1])),t.fields=null!==t.fields?t.fields[1].split(" "):[],null!==t.type&&(t.type=t.type[1].split(" ")),null!==t.width&&(t.width=parseInt(t.width[1])),null!==t.height&&(t.height=parseInt(t.height[1])),null!==t.viewpoint&&(t.viewpoint=t.viewpoint[1]),null!==t.points&&(t.points=parseInt(t.points[1],10)),null===t.points&&(t.points=t.width*t.height),null!==t.size&&(t.size=t.size[1].split(" ").map((function(e){return parseInt(e,10)}))),null!==t.count)t.count=t.count[1].split(" ").map((function(e){return parseInt(e,10)}));else{t.count=[];for(var a=0,r=t.fields.length;a<r;a++)t.count.push(1)}t.offset={};for(var o=0,c=0,l=t.fields.length;c<l;c++)"ascii"===t.data?t.offset[t.fields[c]]=c:(t.offset[t.fields[c]]=o,o+=t.size[c]*t.count[c]);return t.rowSize=o,t}(t),i=[],a=[],r=[];if("ascii"===n.data)for(var o=n.offset,c=t.slice(n.headerLen).split("\n"),s=0,u=c.length;s<u;s++)if(""!==c[s]){var d=c[s].split(" ");if(void 0!==o.x&&(i.push(parseFloat(d[o.x])),i.push(parseFloat(d[o.y])),i.push(parseFloat(d[o.z]))),this.genColorByZ){var h=this.genColorByZ(parseFloat(d[o.x]),parseFloat(d[o.y]),parseFloat(d[o.z])).map((function(e){return e/255}));r.push.apply(r,Object(l.a)(h))}void 0!==o.normal_x&&(a.push(parseFloat(d[o.normal_x])),a.push(parseFloat(d[o.normal_y])),a.push(parseFloat(d[o.normal_z])))}if("binary_compressed"===n.data)for(var f=new Uint32Array(e.slice(n.headerLen,n.headerLen+8)),g=f[0],v=f[1],b=function(e,t){var n,i,a,r=e.length,o=new Uint8Array(t),c=0,l=0;do{if((n=e[c++])<32){if(l+ ++n>t)throw new Error("Output buffer is not large enough");if(c+n>r)throw new Error("Invalid compressed data");do{o[l++]=e[c++]}while(--n)}else{if(i=n>>5,a=l-((31&n)<<8)-1,c>=r)throw new Error("Invalid compressed data");if(7===i&&(i+=e[c++],c>=r))throw new Error("Invalid compressed data");if(a-=e[c++],l+i+2>t)throw new Error("Output buffer is not large enough");if(a<0)throw new Error("Invalid compressed data");if(a>=l)throw new Error("Invalid compressed data");do{o[l++]=o[a++]}while(2+--i)}}while(c<r);return o}(new Uint8Array(e,n.headerLen+8,g),v),p=new DataView(b.buffer),m=n.offset,y=0;y<n.points;y++)if(void 0!==m.x&&(i.push(p.getFloat32(n.points*m.x+n.size[0]*y,this.littleEndian)),i.push(p.getFloat32(n.points*m.y+n.size[1]*y,this.littleEndian)),i.push(p.getFloat32(n.points*m.z+n.size[2]*y,this.littleEndian))),void 0!==m.normal_x&&(a.push(p.getFloat32(n.points*m.normal_x+n.size[4]*y,this.littleEndian)),a.push(p.getFloat32(n.points*m.normal_y+n.size[5]*y,this.littleEndian)),a.push(p.getFloat32(n.points*m.normal_z+n.size[6]*y,this.littleEndian))),this.genColorByZ){var x=this.genColorByZ(p.getFloat32(n.points*m.x+n.size[0]*y,this.littleEndian),p.getFloat32(n.points*m.y+n.size[0]*y,this.littleEndian),p.getFloat32(n.points*m.z+n.size[0]*y,this.littleEndian)).map((function(e){return e/255}));r.push.apply(r,Object(l.a)(x))}if("binary"===n.data)for(var C=new DataView(e,n.headerLen),w=n.offset,k=0,I=0;k<n.points;k++,I+=n.rowSize)if(void 0!==w.x&&(i.push(C.getFloat32(I+w.x,this.littleEndian)),i.push(C.getFloat32(I+w.y,this.littleEndian)),i.push(C.getFloat32(I+w.z,this.littleEndian))),void 0!==w.normal_x&&(a.push(C.getFloat32(I+w.normal_x,this.littleEndian)),a.push(C.getFloat32(I+w.normal_y,this.littleEndian)),a.push(C.getFloat32(I+w.normal_z,this.littleEndian))),this.genColorByZ){var L=this.genColorByZ(C.getFloat32(I+w.x,this.littleEndian),C.getFloat32(I+w.y,this.littleEndian),C.getFloat32(I+w.z,this.littleEndian)).map((function(e){return e/255}));r.push.apply(r,Object(l.a)(L))}var P=new Ga.f;i.length>0&&P.setAttribute("position",new Ga.k(i,3)),a.length>0&&P.setAttribute("normal",new Ga.k(a,3)),r.length>0&&P.setAttribute("color",new Ga.k(r,3)),P.computeBoundingSphere();var O=new Ga.y({size:.01});return r.length>0?O.vertexColors=!0:O.color.setHex(16777215),new Ga.x(P,O)}},{key:"genColorByCoord",value:function(e,t,n){return n<=0?[128,128,128]:n<5?[255,0,0]:n<10?[0,255,0]:[0,0,255]}},{key:"genColorByZ",value:function(e,t,n){var i=function(e){var t=-7,n=3,i=n-t;return e<t&&(e=t),e>n&&(e=n),Math.floor((e-t)/i*255)}(n),a=wa.COLOR_MAP_JET[i];return[a[0],a[1],a[2]]}}]),n}(Ga.o);var to=Object.defineProperty,no=function(e,t,n){return function(e,t,n){t in e?to(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n),n},io={type:"change"},ao={type:"start"},ro={type:"end"},oo=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e,i){var a;Object(u.a)(this,n),a=t.call(this),no(Object(h.a)(a),"listenToKeyEvents",(function(e){e.addEventListener("keydown",onKeyDown),a._domElementKeyEvents=e})),void 0===i&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),a.object=e,a.domElement=i,a.domElement.style.touchAction="none",a.enabled=!0,a.target=new Ga.H,a.minDistance=0,a.maxDistance=1/0,a.minZoom=0,a.maxZoom=1/0,a.minPolarAngle=0,a.maxPolarAngle=Math.PI,a.minAzimuthAngle=-1/0,a.maxAzimuthAngle=1/0,a.enableDamping=!1,a.dampingFactor=.05,a.enableZoom=!0,a.zoomSpeed=1,a.enableRotate=!0,a.rotateSpeed=1,a.enablePan=!0,a.panSpeed=1,a.screenSpacePanning=!0,a.keyPanSpeed=7,a.autoRotate=!1,a.autoRotateSpeed=2,a.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},a.mouseButtons={LEFT:Ga.q.ROTATE,MIDDLE:Ga.q.DOLLY,RIGHT:Ga.q.PAN},a.touches={ONE:Ga.E.ROTATE,TWO:Ga.E.DOLLY_PAN},a.target0=a.target.clone(),a.position0=a.object.position.clone(),a.zoom0=a.object.zoom,a._domElementKeyEvents=null,a.getPolarAngle=function(){return s.phi},a.getAzimuthalAngle=function(){return s.theta},a.getDistance=function(){return this.object.position.distanceTo(this.target)},a.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},a.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(io),r.update(),c=o.NONE},a.update=function(){var t=new Ga.H,n=(new Ga.z).setFromUnitVectors(e.up,new Ga.H(0,1,0)),i=n.clone().invert(),a=new Ga.H,u=new Ga.z,h=2*Math.PI;return function(){var e=r.object.position;t.copy(e).sub(r.target),t.applyQuaternion(n),s.setFromVector3(t),r.autoRotate&&c===o.NONE&&S(2*Math.PI/60/60*r.autoRotateSpeed),r.enableDamping?(s.theta+=d.theta*r.dampingFactor,s.phi+=d.phi*r.dampingFactor):(s.theta+=d.theta,s.phi+=d.phi);var b=r.minAzimuthAngle,p=r.maxAzimuthAngle;return isFinite(b)&&isFinite(p)&&(b<-Math.PI?b+=h:b>Math.PI&&(b-=h),p<-Math.PI?p+=h:p>Math.PI&&(p-=h),s.theta=b<=p?Math.max(b,Math.min(p,s.theta)):s.theta>(b+p)/2?Math.max(b,s.theta):Math.min(p,s.theta)),s.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=f,s.radius=Math.max(r.minDistance,Math.min(r.maxDistance,s.radius)),!0===r.enableDamping?r.target.addScaledVector(g,r.dampingFactor):r.target.add(g),t.setFromSpherical(s),t.applyQuaternion(i),e.copy(r.target).add(t),r.object.lookAt(r.target),!0===r.enableDamping?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,g.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),g.set(0,0,0)),f=1,!!(v||a.distanceToSquared(r.object.position)>l||8*(1-u.dot(r.object.quaternion))>l)&&(r.dispatchEvent(io),a.copy(r.object.position),u.copy(r.object.quaternion),v=!1,!0)}}(),a.dispose=function(){r.domElement.removeEventListener("contextmenu",X),r.domElement.removeEventListener("pointerdown",z),r.domElement.removeEventListener("pointercancel",W),r.domElement.removeEventListener("wheel",K),r.domElement.removeEventListener("pointermove",U),r.domElement.removeEventListener("pointerup",G),null!==r._domElementKeyEvents&&r._domElementKeyEvents.removeEventListener("keydown",Y)};var r=Object(h.a)(a),o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},c=o.NONE,l=1e-6,s=new Ga.B,d=new Ga.B,f=1,g=new Ga.H,v=!1,b=new Ga.G,p=new Ga.G,m=new Ga.G,y=new Ga.G,x=new Ga.G,C=new Ga.G,w=new Ga.G,k=new Ga.G,I=new Ga.G,L=[],P={};function O(){return Math.pow(.95,r.zoomSpeed)}function S(e){d.theta-=e}function T(e){d.phi-=e}var A=function(){var e=new Ga.H;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),g.add(e)}}(),E=function(){var e=new Ga.H;return function(t,n){!0===r.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(r.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),D=function(){var e=new Ga.H;return function(t,n){var i=r.domElement;if(r.object.isPerspectiveCamera){var a=r.object.position;e.copy(a).sub(r.target);var o=e.length();o*=Math.tan(r.object.fov/2*Math.PI/180),A(2*t*o/i.clientHeight,r.object.matrix),E(2*n*o/i.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(A(t*(r.object.right-r.object.left)/r.object.zoom/i.clientWidth,r.object.matrix),E(n*(r.object.top-r.object.bottom)/r.object.zoom/i.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function M(e){r.object.isPerspectiveCamera?f/=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*e)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function N(e){r.object.isPerspectiveCamera?f*=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/e)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function R(e){b.set(e.clientX,e.clientY)}function j(e){y.set(e.clientX,e.clientY)}function _(){if(1===L.length)b.set(L[0].pageX,L[0].pageY);else{var e=.5*(L[0].pageX+L[1].pageX),t=.5*(L[0].pageY+L[1].pageY);b.set(e,t)}}function B(){if(1===L.length)y.set(L[0].pageX,L[0].pageY);else{var e=.5*(L[0].pageX+L[1].pageX),t=.5*(L[0].pageY+L[1].pageY);y.set(e,t)}}function H(){var e=L[0].pageX-L[1].pageX,t=L[0].pageY-L[1].pageY,n=Math.sqrt(e*e+t*t);w.set(0,n)}function V(e){if(1==L.length)p.set(e.pageX,e.pageY);else{var t=q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);p.set(n,i)}m.subVectors(p,b).multiplyScalar(r.rotateSpeed);var a=r.domElement;S(2*Math.PI*m.x/a.clientHeight),T(2*Math.PI*m.y/a.clientHeight),b.copy(p)}function Z(e){if(1===L.length)x.set(e.pageX,e.pageY);else{var t=q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);x.set(n,i)}C.subVectors(x,y).multiplyScalar(r.panSpeed),D(C.x,C.y),y.copy(x)}function F(e){var t=q(e),n=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(n*n+i*i);k.set(0,a),I.set(0,Math.pow(k.y/w.y,r.zoomSpeed)),M(I.y),w.copy(k)}function z(e){!1!==r.enabled&&(0===L.length&&(r.domElement.setPointerCapture(e.pointerId),r.domElement.addEventListener("pointermove",U),r.domElement.addEventListener("pointerup",G)),function(e){L.push(e)}(e),"touch"===e.pointerType?function(e){switch(Q(e),L.length){case 1:switch(r.touches.ONE){case Ga.E.ROTATE:if(!1===r.enableRotate)return;_(),c=o.TOUCH_ROTATE;break;case Ga.E.PAN:if(!1===r.enablePan)return;B(),c=o.TOUCH_PAN;break;default:c=o.NONE}break;case 2:switch(r.touches.TWO){case Ga.E.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&H(),r.enablePan&&B(),c=o.TOUCH_DOLLY_PAN;break;case Ga.E.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&H(),r.enableRotate&&_(),c=o.TOUCH_DOLLY_ROTATE;break;default:c=o.NONE}break;default:c=o.NONE}c!==o.NONE&&r.dispatchEvent(ao)}(e):function(e){var t;switch(e.button){case 0:t=r.mouseButtons.LEFT;break;case 1:t=r.mouseButtons.MIDDLE;break;case 2:t=r.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Ga.q.DOLLY:if(!1===r.enableZoom)return;(function(e){w.set(e.clientX,e.clientY)})(e),c=o.DOLLY;break;case Ga.q.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enablePan)return;j(e),c=o.PAN}else{if(!1===r.enableRotate)return;R(e),c=o.ROTATE}break;case Ga.q.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enableRotate)return;R(e),c=o.ROTATE}else{if(!1===r.enablePan)return;j(e),c=o.PAN}break;default:c=o.NONE}c!==o.NONE&&r.dispatchEvent(ao)}(e))}function U(e){!1!==r.enabled&&("touch"===e.pointerType?function(e){switch(Q(e),c){case o.TOUCH_ROTATE:if(!1===r.enableRotate)return;V(e),r.update();break;case o.TOUCH_PAN:if(!1===r.enablePan)return;Z(e),r.update();break;case o.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;(function(e){r.enableZoom&&F(e),r.enablePan&&Z(e)})(e),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;(function(e){r.enableZoom&&F(e),r.enableRotate&&V(e)})(e),r.update();break;default:c=o.NONE}}(e):function(e){if(!1!==r.enabled)switch(c){case o.ROTATE:if(!1===r.enableRotate)return;!function(e){p.set(e.clientX,e.clientY),m.subVectors(p,b).multiplyScalar(r.rotateSpeed);var t=r.domElement;S(2*Math.PI*m.x/t.clientHeight),T(2*Math.PI*m.y/t.clientHeight),b.copy(p),r.update()}(e);break;case o.DOLLY:if(!1===r.enableZoom)return;!function(e){k.set(e.clientX,e.clientY),I.subVectors(k,w),I.y>0?M(O()):I.y<0&&N(O()),w.copy(k),r.update()}(e);break;case o.PAN:if(!1===r.enablePan)return;!function(e){x.set(e.clientX,e.clientY),C.subVectors(x,y).multiplyScalar(r.panSpeed),D(C.x,C.y),y.copy(x),r.update()}(e)}}(e))}function G(e){J(e),0===L.length&&(r.domElement.releasePointerCapture(e.pointerId),r.domElement.removeEventListener("pointermove",U),r.domElement.removeEventListener("pointerup",G)),r.dispatchEvent(ro),c=o.NONE}function W(e){J(e)}function K(e){!1===r.enabled||!1===r.enableZoom||c!==o.NONE||(e.preventDefault(),r.dispatchEvent(ao),function(e){e.deltaY<0?N(O()):e.deltaY>0&&M(O()),r.update()}(e),r.dispatchEvent(ro))}function Y(e){!1===r.enabled||!1===r.enablePan||function(e){var t=!1;switch(e.code){case r.keys.UP:D(0,r.keyPanSpeed),t=!0;break;case r.keys.BOTTOM:D(0,-r.keyPanSpeed),t=!0;break;case r.keys.LEFT:D(r.keyPanSpeed,0),t=!0;break;case r.keys.RIGHT:D(-r.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),r.update())}(e)}function X(e){!1!==r.enabled&&e.preventDefault()}function J(e){delete P[e.pointerId];for(var t=0;t<L.length;t++)if(L[t].pointerId==e.pointerId)return void L.splice(t,1)}function Q(e){var t=P[e.pointerId];void 0===t&&(t=new Ga.G,P[e.pointerId]=t),t.set(e.pageX,e.pageY)}function q(e){var t=e.pointerId===L[0].pointerId?L[1]:L[0];return P[t.pointerId]}return r.domElement.addEventListener("contextmenu",X),r.domElement.addEventListener("pointerdown",z),r.domElement.addEventListener("pointercancel",W),r.domElement.addEventListener("wheel",K,{passive:!1}),a.update(),a}return Object(d.a)(n)}(Ga.i),co=function(){function e(){var t=this;Object(u.a)(this,e),this.MAX_SIZE=50,this.cacheList=[],this.loadPCDFile=function(e){return new Promise((function(n,i){var a=t.pointsMap.get(e),r=t.colorMap.get(e);if(a&&r)n({points:a,color:r});else{if(t.cacheList.length>t.MAX_SIZE){var o=t.cacheList.shift();o&&t.pointsMap.delete(o.src)}t.cacheList.push({src:e}),t.pcdLoader.load(e,(function(i){var a=i.geometry.attributes.position.array,r=i.geometry.attributes.color.array;t.pointsMap.set(e,a),t.colorMap.set(e,r),n({points:a,color:r})}),(function(){}),(function(e){i(e)}))}}))},this.pcdLoader=new eo,this.pointsMap=new Map,this.colorMap=new Map}return Object(d.a)(e,[{key:"updateColor",value:function(e,t){this.colorMap.set(e,t)}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}(),lo=Object.defineProperty,so=Object.defineProperties,uo=Object.getOwnPropertyDescriptors,ho=Object.getOwnPropertySymbols,fo=Object.prototype.hasOwnProperty,go=Object.prototype.propertyIsEnumerable,vo=function(e,t,n){return t in e?lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},bo=function(e,t){for(var n in t||(t={}))fo.call(t,n)&&vo(e,n,t[n]);if(ho){var i,a=Object(p.a)(ho(t));try{for(a.s();!(i=a.n()).done;){n=i.value;go.call(t,n)&&vo(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},po=function(e,t){return so(e,uo(t))},mo=function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(t){a(t)}},o=function(e){try{c(n.throw(e))}catch(t){a(t)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))},yo=new qr({type:"module"}),xo=function(){function e(t){var n=this,i=t.container,a=t.noAppend,r=t.isOrthographicCamera,o=t.orthographicParams,c=t.backgroundColor,l=void 0===c?"black":c,s=t.config;Object(u.a)(this,e),this.zAxisLimit=10,this.initCameraPosition=this.DEFAULT_INIT_CAMERA_POSITION,this.isOrthographicCamera=!1,this.pointsUuid="",this.pointCloudObjectName="pointCloud",this.rangeObjectName="range",this.showDirection=!0,this.AddBoxToSense=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215,a=null!=(t=e.id)?t:ii();n.removeObjectByName(a);var r=e.center,o=e.width,c=e.height,l=e.depth,s=e.rotation,u=new Ga.l,d=new Ga.c(o,c,l),h=new Ga.u({color:"blue"}),f=new Ga.t(d,h),g=new Ga.d(f,i),v=n.generateBoxArrow(e);u.add(g),u.add(v),u.position.set(r.x,r.y,r.z),u.rotation.set(0,0,s),u.name=a,n.scene.add(u)},this.overridePointShader=function(e){e.vertexShader="\n    attribute float sizes;\n    attribute float visibility;\n    varying float vVisible;\n  ".concat(e.vertexShader).replace("gl_PointSize = size;","gl_PointSize = size;\n      vVisible = visibility;\n    "),e.fragmentShader="\n    varying float vVisible;\n  ".concat(e.fragmentShader).replace("#include <clipping_planes_fragment>","\n      if (vVisible < 0.5) discard;\n    #include <clipping_planes_fragment>")},this.loadPCDFile=function(e,t){return mo(n,null,Object(ai.a)().mark((function n(){var i,a,r,o,c;return Object(ai.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.clearPointCloud(),this.currentPCDSrc=e,n.next=3,this.cacheInstance.loadPCDFile(e);case 3:i=n.sent,a=i.points,r=i.color,(o=new Ga.f).setAttribute("position",new Ga.e(a,3)),o.setAttribute("color",new Ga.e(r,3)),c=new Ga.x(o),this.renderPointCloud(c,t);case 10:case"end":return n.stop()}}),n,this)})))},this.loadPCDFileByBox=function(e,t,i){return mo(n,null,Object(ai.a)().mark((function n(){var a,r,o,c,l=this;return Object(ai.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=function(n,a){return mo(l,null,Object(ai.a)().mark((function r(){var o,c,l,s,u,d,h,f,g;return Object(ai.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=(o=null!=i?i:{}).width,l=void 0===c?0:c,s=o.height,u=void 0===s?0:s,d=o.depth,h=void 0===d?0:d,r.next=9,this.filterPointsByBox(po(bo({},t),{width:t.width+l,height:t.height+u,depth:t.depth+h}),n,a);case 9:if(f=r.sent){r.next=13;break}return console.error("filter Error"),r.abrupt("return");case 13:this.clearPointCloud(),this.currentPCDSrc=e,(g=new Ga.x(f.geometry)).name=this.pointCloudObjectName,this.scene.add(g),this.render();case 16:case"end":return r.stop()}}),r,this)})))},n.next=3,this.cacheInstance.loadPCDFile(e);case 3:r=n.sent,o=r.points,c=r.color,a(o,c);case 7:case"end":return n.stop()}}),n,this)})))},this.generateRange=function(e){var t=n.createRange(e);n.scene.add(t)},this.generateBoxArrow=function(e){var t=e.width,i=new Ga.H(1,0,0),a=new Ga.H(t/2,0,0),r=new Ga.a(i,a,2,16776960);return r.visible=n.showDirection,r},this.generateBoxTrackID=function(e){if(e.trackID){var t=new Ga.F(n.getTextCanvas(e.trackID.toString()));t.needsUpdate=!0;var i=new Ga.D({map:t,depthWrite:!1}),a=new Ga.C(i);return a.scale.set(5,5,5),a.position.set(-e.width/2,0,e.depth/2+.5),a}},this.applyZAxisPoints=function(e){n.zAxisLimit=e,n.filterZAxisPoints(),n.render()},this.updatePointSize=function(e){var t=n.scene.getObjectByName(n.pointCloudObjectName);if(t){var i=t.material.size;t.material.size=e?Math.min(1.2*i,10):Math.max(i/1.2,1),n.render()}},this.container=i,this.renderer=new Ga.J({antialias:!0}),this.backgroundColor=l,this.config=s,r&&o?(this.isOrthographicCamera=!0,this.camera=new Ga.v(o.left,o.right,o.top,o.bottom,o.near,o.far)):this.camera=new Ga.w(30,this.containerWidth/this.containerHeight,1,1e3),this.initCamera(),this.scene=new Ga.A,this.controls=new oo(this.camera,this.renderer.domElement),this.pcdLoader=new eo,this.axesHelper=new Ga.b(1e3),this.scene.add(this.camera),a||i.appendChild(this.renderer.domElement),this.init(),this.cacheInstance=co.getInstance()}return Object(d.a)(e,[{key:"DEFAULT_INIT_CAMERA_POSITION",get:function(){return new Ga.H(-.01,0,10)}},{key:"containerWidth",get:function(){return this.container.clientWidth}},{key:"containerHeight",get:function(){return this.container.clientHeight}},{key:"setInitCameraPosition",value:function(e){this.initCameraPosition=e}},{key:"setConfig",value:function(e){this.config=e}},{key:"initOrthographicCamera",value:function(e){if("OrthographicCamera"===this.camera.type){var t=e.left,n=e.right,i=e.top,a=e.bottom,r=e.near,o=e.far;this.camera.left=t,this.camera.right=n,this.camera.top=i,this.camera.bottom=a,this.camera.near=r,this.camera.far=o,this.camera.updateProjectionMatrix()}}},{key:"initPerspectiveCamera",value:function(){"PerspectiveCamera"===this.camera.type&&(this.camera.fov=30,this.camera.aspect=this.containerWidth/this.containerHeight,this.camera.near=1,this.camera.far=1e3,this.camera.updateProjectionMatrix())}},{key:"initCamera",value:function(){var e=this.camera;if(this.isOrthographicCamera){var t=this.initCameraPosition,n=t.x,i=t.y,a=t.z;e.position.set(n,i,a)}else e.position.set(-1,0,500);e.up.set(0,0,1)}},{key:"initControls",value:function(){var e=this;this.controls.addEventListener("change",(function(){e.render()})),this.setDefaultControls()}},{key:"setDefaultControls",value:function(){var e=this,t=this.controls;t.target=Object(Qr.a)(Ga.H,[0,0,0]),t.addEventListener("change",(function(){e.render()})),t.maxPolarAngle=Math.PI/2,t.update()}},{key:"initRenderer",value:function(){var e=this.renderer;e.setPixelRatio(window.devicePixelRatio),e.setSize(this.containerWidth,this.containerHeight)}},{key:"init",value:function(){this.scene.background=new Ga.g(this.backgroundColor),this.initControls(),this.initRenderer()}},{key:"removeObjectByName",value:function(e){var t=this.scene.getObjectByName(e);t&&t.removeFromParent()}},{key:"generateBox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215,n=t;this.AddBoxToSense(e,n),this.render()}},{key:"getAllAttributeColor",value:function(e){var t=this;return e.reduce((function(e,n){return e[n.attribute]=wa.toolStyleConverter.getColorFromConfig({attribute:n.attribute},po(bo({},t.config),{attributeConfigurable:!0}),{}),e}),{})}},{key:"generateBoxes",value:function(e){var t=this;e.forEach((function(e){t.generateBox(e)})),this.render()}},{key:"getOrthographicCamera",value:function(e){var t=e.center,n=e.width,i=e.height;return{left:t.x-n/2-10,right:t.x-n/2+10,top:t.y+i/2+10,bottom:t.y-i/2-10,near:100,far:-100,zoom:5}}},{key:"updateCameraZoom",value:function(e){this.camera.zoom=e,this.camera.updateProjectionMatrix()}},{key:"updateCameraByBox",value:function(e,t){var n=e.center,i=e.width,a=e.height,r=e.depth,o=e.rotation,c=this.getCameraVector(n,o,{width:i,height:a,depth:r},t);return this.updateCamera(c,n),c}},{key:"updateOrthoCamera",value:function(e,t){var n=this.updateCameraByBox(e,t);return this.camera.zoom=1,this.camera.updateProjectionMatrix(),{cameraPositionVector:n}}},{key:"updateTopCamera",value:function(){this.setInitCameraPosition(this.DEFAULT_INIT_CAMERA_POSITION),this.camera.zoom=1,this.initCamera(),this.setDefaultControls(),this.camera.updateProjectionMatrix(),this.render()}},{key:"updateCamera",value:function(e,t){this.camera.position.set(e.x,e.y,e.z),this.controls.target=new Ga.H(t.x,t.y,t.z),this.controls.update()}},{key:"resetCamera",value:function(){this.updateCamera(this.DEFAULT_INIT_CAMERA_POSITION,{x:0,y:0,z:0})}},{key:"createThreeMatrix4",value:function(e){var t;return(t=new Ga.s).set.apply(t,Object(l.a)(e))}},{key:"filterPointsByBox",value:function(e,t,n){var i,a,r;if(!t){var o=this.scene.getObjectByName(this.pointCloudObjectName);if(!o)return console.error("There is no corresponding point cloud object"),Promise.resolve(void 0);t=null==(r=null==(a=null==(i=null==o?void 0:o.geometry)?void 0:i.attributes)?void 0:a.position)?void 0:r.array}if(window.Worker){var c=ir(e),l=t,s={boxParams:e,zMin:c.zMin,zMax:c.zMax,polygonPointList:c.polygonPointList,color:n=null!=n?n:new Float32Array([]),position:l};return new Promise((function(e){var t=new $r;t.postMessage(s),t.onmessage=function(n){var i=n.data,a=i.color,r=i.position,o=i.num,c=new Ga.f;c.setAttribute("position",new Ga.k(r,3)),c.setAttribute("color",new Ga.k(a,3)),c.computeBoundingSphere(),t.terminate(),e({geometry:c,num:o})}}))}return Promise.resolve(void 0)}},{key:"getCameraVector",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wa.EPerspectiveView.Front,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,r=wa.PerspectiveShiftUtils.frontViewMatrix4(a);switch(i){case wa.EPerspectiveView.Front:break;case wa.EPerspectiveView.Back:r=wa.PerspectiveShiftUtils.backViewMatrix4(a);break;case wa.EPerspectiveView.Left:r=wa.PerspectiveShiftUtils.leftViewMatrix4(a);break;case wa.EPerspectiveView.Right:r=wa.PerspectiveShiftUtils.rightViewMatrix4(a);break;case wa.EPerspectiveView.Top:r=wa.PerspectiveShiftUtils.topViewMatrix4(a);break;case wa.EPerspectiveView.LFT:r=wa.PerspectiveShiftUtils.leftFrontTopViewMatrix4(a,n);break;case wa.EPerspectiveView.RBT:r=wa.PerspectiveShiftUtils.rightBackTopViewMatrix4(a,n)}var o=this.createThreeMatrix4(r),c=(new Ga.s).makeTranslation(-e.x,-e.y,-e.z),l=(new Ga.s).makeTranslation(e.x,e.y,e.z),s=(new Ga.s).makeRotationZ(t);return new Ga.H(e.x,e.y,e.z).clone().applyMatrix4(o).applyMatrix4(c).applyMatrix4(s).applyMatrix4(l)}},{key:"createRange",value:function(e){this.removeObjectByName(this.rangeObjectName);var t=new Ga.h(0,0,e,e,0,2*Math.PI,!1,0).getPoints(50),n=(new Ga.f).setFromPoints(t),i=new Ga.n({color:16711680}),a=new Ga.m(n,i);return a.name=this.rangeObjectName,a}},{key:"renderPointCloud",value:function(e,t){e.name=this.pointCloudObjectName;var n=new Ga.y({vertexColors:!0});n.onBeforeCompile=this.overridePointShader,n.size=1.2,t&&this.generateRange(t),this.pointsUuid=e.uuid,e.material=n,this.filterZAxisPoints(e),this.scene.add(e),this.render()}},{key:"clearPointCloud",value:function(){this.removeObjectByName(this.pointCloudObjectName)}},{key:"clearPointCloudAndRender",value:function(){this.clearPointCloud(),this.render()}},{key:"highlightOriginPointCloud",value:function(e){var t=this,n=this.scene.getObjectByName(this.pointCloudObjectName);if(n)return this.highlightPCDSrc=this.currentPCDSrc,new Promise((function(i){if(window.Worker){var a=(e?Object(l.a)(e):[]).map((function(e){return ir(e)})),r=t.getAllAttributeColor(a),o={cuboidList:a,position:n.geometry.attributes.position.array,color:n.geometry.attributes.color.array,colorList:r};yo.postMessage(o),yo.onmessage=function(e){var a=e.data.color,r=new Ga.e(a,3);t.highlightPCDSrc&&(t.cacheInstance.updateColor(t.highlightPCDSrc,a),t.highlightPCDSrc=void 0),r.needsUpdate=!0,n.geometry.setAttribute("color",r),i(a),t.render()}}}))}},{key:"updateColor",value:function(e){var t=this.scene.getObjectByName(this.pointCloudObjectName);if(t){var n=new Ga.e(e,3);n.needsUpdate=!0,t.geometry.setAttribute("color",n),this.render()}}},{key:"setShowDirection",value:function(e){this.showDirection=e,this.scene.children.forEach((function(t){"Group"===t.type&&t.children.forEach((function(t){"ArrowHelper"===t.type&&(t.visible=e)}))})),this.render()}},{key:"getTextCanvas",value:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return n&&(n.font="".concat(50,'px " bold'),n.fillStyle="white",n.textAlign="center",n.textBaseline="middle",n.fillText(e,t.width/2,t.height/2)),t}},{key:"getSensesPointZAxisInPolygon",value:function(e,t){var n=this,i=this.scene.children.find((function(e){return e.uuid===n.pointsUuid})),a=0,r=0,o=0,c=0;if(i&&(null==i?void 0:i.geometry))for(var l=null==i?void 0:i.geometry.attributes.position.array,s=0;s<l.length;s+=3){var u=l[s],d=l[s+1],h=l[s+2];pe({x:u,y:d},e)&&h&&(r=Math.max(h,r),a=Math.min(h,a),c++,t&&h>=t[0]&&h<=t[1]&&o++)}return{maxZ:r,minZ:a,count:o,zCount:c}}},{key:"getBasicCoordinate2Canvas",value:function(e){var t=this.containerWidth/2,n=this.containerHeight/2;return{x:e.x*t+t,y:e.y*n+n,z:e.z}}},{key:"basicCoordinate2CanvasMatrix4",get:function(){var e=this.containerWidth/2,t=this.containerHeight/2;return(new Ga.s).set(e,0,0,e,0,t,0,t,0,0,1,0,0,0,0,1)}},{key:"getCanvas2BasicCoordinate",value:function(e){var t=this.containerWidth/2,n=this.containerHeight/2;return new Ga.H(e.x/t-t/2,-(e.y/n-n/2),1)}},{key:"getPolygonSidePoints",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.height,o=e.width,c=e.depth;return[{x:n+o/2,y:i+r/2,z:a-c/2},{x:n+o/2,y:i+r/2,z:a+c/2},{x:n-o/2,y:i+r/2,z:a+c/2},{x:n-o/2,y:i+r/2,z:a-c/2}]}},{key:"getPolygonBackPoints",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.height,o=e.width,c=e.depth;return[{x:n-o/2,y:i+r/2,z:a+c/2},{x:n-o/2,y:i+r/2,z:a-c/2},{x:n-o/2,y:i-r/2,z:a-c/2},{x:n-o/2,y:i-r/2,z:a+c/2}]}},{key:"getPolygonTopPoints",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.height,o=e.width,c=e.depth;return[{x:n+o/2,y:i+r/2,z:a+c/2},{x:n+o/2,y:i-r/2,z:a+c/2},{x:n-o/2,y:i-r/2,z:a+c/2},{x:n-o/2,y:i+r/2,z:a+c/2}]}},{key:"getModelTransformationMatrix",value:function(e){var t=e.center,n=t.x,i=t.y,a=t.z,r=e.rotation,o=(new Ga.s).makeTranslation(-n,-i,-a),c=(new Ga.s).makeTranslation(n,i,a),l=(new Ga.s).makeRotationZ(r);return(new Ga.s).multiply(c).multiply(l).multiply(o)}},{key:"getBoxSidePolygon2DCoordinate",value:function(e){return this.getBoxPolygon2DCoordinate(e,wa.EPerspectiveView.Left)}},{key:"getBoxBackPolygon2DCoordinate",value:function(e){return this.getBoxPolygon2DCoordinate(e,wa.EPerspectiveView.Back)}},{key:"boxParams2ViewPolygon",value:function(e,t){switch(t){case wa.EPerspectiveView.Left:return this.getPolygonSidePoints(e);case wa.EPerspectiveView.Back:return this.getPolygonBackPoints(e);default:return this.getPolygonTopPoints(e)}}},{key:"getBoxPolygon2DCoordinate",value:function(e,t){var n=this,i=this.boxParams2ViewPolygon(e,t),a=e.width,r=e.height,o=(new Ga.s).premultiply(this.camera.matrixWorldInverse).premultiply(this.camera.projectionMatrix),c=(new Ga.s).premultiply(this.getModelTransformationMatrix(e)).premultiply(o).premultiply(this.basicCoordinate2CanvasMatrix4);this.sideMatrix=c;var l=i.map((function(e){return new Ga.H(e.x,e.y,e.z)})).map((function(e){return e.applyMatrix4(n.sideMatrix)})),s=this.containerWidth/a,u=this.containerHeight/r;return{polygon2d:l,zoom:Math.min(s,u)/2}}},{key:"getBoxTopPolygon2DCoordinate",value:function(e){var t=this,n=e.width,i=e.height,a=this.getPolygonTopPoints(e).map((function(e){return new Ga.H(e.x,e.y,e.z)})).map((function(n){return n.applyMatrix4(t.getModelTransformationMatrix(e))})).map((function(e){return{x:e.y,y:e.x}})).map((function(e){return{x:-(e.x-t.containerWidth/2),y:-(e.y-t.containerHeight/2)}})),r=this.containerWidth/n,o=this.containerHeight/i;return{polygon2d:a,zoom:Math.min(r,o)/2}}},{key:"getNewBoxBySideUpdate",value:function(e,t,n,i){var a=(new Ga.s).makeRotationZ(i.rotation),r=new Ga.H(-e.x,0,0).applyMatrix4(a),o=i;return o.center={x:o.center.x+r.x,y:o.center.y+r.y,z:o.center.z-e.z},{newBoxParams:o=po(bo({},o),{width:o.width+t,height:o.height,depth:o.depth+n})}}},{key:"getNewBoxByBackUpdate",value:function(e,t,n,i){var a=(new Ga.s).makeRotationZ(i.rotation),r=new Ga.H(0,-e.x,0).applyMatrix4(a),o=i;return o.center={x:o.center.x+r.x,y:o.center.y+r.y,z:o.center.z-e.z},{newBoxParams:o=po(bo({},o),{width:o.width,height:o.height+t,depth:o.depth+n})}}},{key:"getNewBoxBySideUpdateByPoints",value:function(e,t,n,i){var a,r=null==(a=this.sideMatrix)?void 0:a.invert();if(this.sideMatrix&&r){this.camera.zoom=1,this.camera.updateProjectionMatrix();var o=e.map((function(e){return new Ga.H(e.x,e.y,e.z)})).map((function(e){return e.applyMatrix4(r)})),c=Object(s.a)(o,4),l=c[0],u=c[1],d=c[2],h=c[3],f=Math.max(Math.abs(l.x-d.x),Math.abs(l.x-u.x)),g=u.add(h).applyMatrix3((new Ga.r).set(.5,0,0,0,.5,0,0,0,.5)).clone().applyMatrix3((new Ga.r).set(-1,0,0,0,-1,0,0,0,-1)).add(new Ga.H(i.center.x,i.center.y,i.center.z));return{newBoxParams:po(bo({},i),{center:{x:i.center.x-g.x,y:i.center.y-g.y,z:i.center.z-n},width:f,height:i.height,depth:i.depth+t,rotation:i.rotation})}}console.error("No sideMatrix")}},{key:"filterZAxisPoints",value:function(e){var t=this,n=e||this.scene.children.find((function(e){return e.uuid===t.pointsUuid}));if(n){for(var i=n.geometry.attributes.position,a=[],r=i.count,o=0;o<r;o++){var c=i.getZ(o);a.push(c>this.zAxisLimit?0:1)}n.geometry.setAttribute("visibility",new Ga.k(a,1)),n.geometry.attributes.visibility.needsUpdate=!0}}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(),Co=Object.defineProperty,wo=Object.defineProperties,ko=Object.getOwnPropertyDescriptors,Io=Object.getOwnPropertySymbols,Lo=Object.prototype.hasOwnProperty,Po=Object.prototype.propertyIsEnumerable,Oo=function(e,t,n){return t in e?Co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},So=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n?(n.fillStyle="black",n.fillRect(0,0,e.width,e.height),t.toDataURL()):""},To=function(){function e(t){var n=this,i=t.size,a=t.container,r=t.pcdPath,o=t.polygonOperationProps,c=t.config,l=t.checkMode;Object(u.a)(this,e),this.updatePolygonList=function(e,t){var i=e.map((function(e){var t,i=n.pointCloudInstance.getBoxTopPolygon2DCoordinate(e).polygon2d;return{id:e.id,sourceID:"",pointList:i,isRect:!0,valid:null==(t=e.valid)||t,attribute:e.attribute}}));t&&(i=i.concat(t.map((function(e){var t;return function(e,t){return wo(e,ko(t))}(function(e,t){for(var n in t||(t={}))Lo.call(t,n)&&Oo(e,n,t[n]);if(Io){var i,a=Object(p.a)(Io(t));try{for(a.s();!(i=a.n()).done;)n=i.value,Po.call(t,n)&&Oo(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},e),{pointList:null==(t=null==e?void 0:e.pointList)?void 0:t.map((function(e){return wa.PointCloudUtils.transferWorld2Canvas(e,n.pointCloud2dOperation.size)}))})})))),n.pointCloud2dOperation.setResult(i)};var s=this.getDefaultOrthographic(i),d=So(i),h=new Image;h.src=d;var f=new Jr({container:a}),g=new xo({container:a,noAppend:!0,isOrthographicCamera:!0,orthographicParams:s});r&&g.loadPCDFile(r),f.createCanvas(g.renderer.domElement);var v={container:a,size:i,config:JSON.stringify(c),imgNode:h,isAppend:!1,checkMode:l};o&&Object.assign(v,o);var b=new Sr(v);b.eventBinding(),b.setPattern($.Rect),f.createCanvas(b.canvas,{size:i}),this.pointCloud2dOperation=b,this.pointCloudInstance=g,this.canvasScheduler=f,this.config=c}return Object(d.a)(e,[{key:"updateConfig",value:function(e){this.config=e,this.pointCloud2dOperation.setConfig(JSON.stringify(e))}},{key:"getDefaultOrthographic",value:function(e){return{left:-e.width/2,right:e.width/2,top:e.height/2,bottom:-e.height/2,near:100,far:-100}}},{key:"initSize",value:function(e){var t=this;this.pointCloudInstance.updateTopCamera(),this.pointCloudInstance.setDefaultControls(),this.pointCloudInstance.initRenderer(),this.pointCloudInstance.initOrthographicCamera(this.getDefaultOrthographic(e)),this.pointCloudInstance.render();var n=So(e),i=new Image;i.src=n,i.onload=function(){t.pointCloud2dOperation.setImgNode(i),t.pointCloud2dOperation.initImgPos()},this.pointCloud2dOperation.setCanvasSize(e)}},{key:"addPolygonListOnTopView",value:function(e){var t=wa.PointCloudUtils.getBoxParamsFromResultList(e),n=wa.PointCloudUtils.getPolygonListFromResultList(e);this.updatePolygonList(t,n)}},{key:"updateData",value:function(e,t,n){!this.pointCloud2dOperation||!this.pointCloudInstance||(this.pointCloudInstance.loadPCDFile(e,null==n?void 0:n.radius),this.addPolygonListOnTopView(t))}},{key:"initAllPosition",value:function(){this.pointCloudInstance.updateTopCamera(),this.pointCloud2dOperation.initPosition()}},{key:"clearAllData",value:function(){this.pointCloudInstance.clearPointCloudAndRender(),this.pointCloud2dOperation.clearResult()}}]),e}(),Ao=Fr,Eo=Fr},,,,,,,,,,,function(e,t,n){"use strict";var i=n(84).default,a=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),o=n(0);var c,l=(c=o)&&"object"==typeof c&&"default"in c?c:{default:c},s=l.default.createContext({pointCloudBoxList:[],polygonList:[],selectedID:"",selectedIDs:[],valid:!0,setSelectedIDs:function(){},setPointCloudResult:function(){},setPointCloudValid:function(){},setTopViewInstance:function(){},setSideViewInstance:function(){},setBackViewInstance:function(){},setMainViewInstance:function(){},addSelectedID:function(){},selectedAllBoxes:function(){},addPointCloudBox:function(){return[]},setPolygonList:function(){},zoom:1,setZoom:function(){},history:new r.ActionsHistory,syncAllViewPointCloudColor:function(){},defaultAttribute:"",setDefaultAttribute:function(){},pointCloudPattern:r.EToolName.Rect,setPointCloudPattern:function(){}});t.PointCloudContext=s,t.PointCloudProvider=function(e){var t=e.children,n=o.useState([]),c=a(n,2),u=c[0],d=c[1],h=o.useState([]),f=a(h,2),g=f[0],v=f[1],b=o.useState([]),p=a(b,2),m=p[0],y=p[1],x=o.useState(!0),C=a(x,2),w=C[0],k=C[1],I=o.useState(1),L=a(I,2),P=L[0],O=L[1],S=o.useState(),T=a(S,2),A=T[0],E=T[1],D=o.useState(),M=a(D,2),N=M[0],R=M[1],j=o.useState(),_=a(j,2),B=_[0],H=_[1],V=o.useState(),Z=a(V,2),F=Z[0],z=Z[1],U=o.useState(""),G=a(U,2),W=G[0],K=G[1],Y=o.useState(r.EToolName.Rect),X=a(Y,2),J=X[0],Q=X[1],q=o.useRef(new r.ActionsHistory).current,$=o.useMemo((function(){return 1===m.length?m[0]:""}),[m]),ee=o.useMemo((function(){var e=u.find((function(e){return e.id===$})),t=function(e){void 0===e&&y([]),"string"==typeof e&&y([e]),Array.isArray(e)&&y(Array.from(new Set(e)))};return{selectedID:$,pointCloudBoxList:u,selectedIDs:m,setPointCloudResult:d,setSelectedIDs:t,addPointCloudBox:function(e){var t=u.concat(e);return d(t),t},valid:w,selectedPointCloudBox:e,setPointCloudValid:function(e){k(!1!==e)},addSelectedID:function(e){m.includes(e)?t(m.filter((function(t){return t!==e}))):t([].concat(i(m),[e]))},selectedAllBoxes:function(){t(u.map((function(e){return e.id})))},topViewInstance:A,setTopViewInstance:E,sideViewInstance:N,setSideViewInstance:R,backViewInstance:B,setBackViewInstance:H,mainViewInstance:F,setMainViewInstance:z,polygonList:g,setPolygonList:v,zoom:P,setZoom:O,history:q,syncAllViewPointCloudColor:function(e){var t=null==F?void 0:F.highlightOriginPointCloud(e);return new Promise((function(e){null==t||t.then((function(t){[A].forEach((function(n){var i;t&&(null==(i=null==n?void 0:n.pointCloudInstance)||i.updateColor(t),e({color:t}))}))}))}))},defaultAttribute:W,setDefaultAttribute:K,pointCloudPattern:J,setPointCloudPattern:Q}}),[w,m,u,g,A,N,B,F,P,W,J]);return l.default.createElement(s.Provider,{value:ee},t)}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(50);var a,r=(a=i)&&"object"==typeof a&&"default"in a?a:{default:a};t.classnames=function(e){if(Array.isArray(e))return e.filter((function(e){return e})).join(" ");if(r.default.isObject(e)){var t=[];return Object.keys(e).forEach((function(n){e[n]&&t.push(n)})),t.join(" ")}return""},t.jsonParser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return"string"==typeof e?JSON.parse(e):r.default.isObject(e)?e:t}catch(n){return t}}},,function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.EStepType=void 0,(i=t.EStepType||(t.EStepType={}))[i.Check=0]="Check",i[i.ANNOTATION=1]="ANNOTATION",i[i.QUALITY_INSPECTION=2]="QUALITY_INSPECTION",i[i.PRE_ANNOTATION=3]="PRE_ANNOTATION",i[i.MANUAL_CORRECTION=4]="MANUAL_CORRECTION",t.ESubmitType=void 0,function(e){e[e.Backward=1]="Backward",e[e.Forward=2]="Forward",e[e.Jump=3]="Jump",e[e.Quit=4]="Quit",e[e.Export=5]="Export",e[e.StepChanged=6]="StepChanged",e[e.Save=7]="Save",e[e.BatchUpdateTrackID=8]="BatchUpdateTrackID",e[e.SyncImgList=10001]="SyncImgList",e[e.SyncCurrentPageData=10002]="SyncCurrentPageData"}(t.ESubmitType||(t.ESubmitType={}));var a="".concat("bee","-component");t.componentCls=a,t.prefix="bee"},,,,function(e,t,n){"use strict";var i=n(76).default,a=n(77).default,r=n(48),o=n(201),c=function(){function e(){i(this,e)}return a(e,null,[{key:"getCurrentStepInfo",value:function(e,t){var n=this.getStepInfo(e,t);return[r.EStepType.QUALITY_INSPECTION,r.EStepType.MANUAL_CORRECTION].includes(null==n?void 0:n.type)?this.getStepInfo(n.dataSourceStep,t):n}},{key:"getStepInfo",value:function(e,t){return null==t?void 0:t.filter((function(t){return t.step===e}))[0]}},{key:"currentToolIsVideo",value:function(t,n){var i=e.getCurrentStepInfo(t,n);return o.isVideoTool(null==i?void 0:i.tool)}},{key:"currentToolIsPointCloud",value:function(t,n){var i=e.getCurrentStepInfo(t,n);return o.isPointCloudTool(null==i?void 0:i.tool)}}]),e}();e.exports=c},,,function(e,t,n){"use strict";var i=n(200).default,a=n(84).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(68),o=n(96),c=n(48),l=n(199),s=n(399),u=n(46),d=function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(t){a(t)}},o=function(e){try{c(n.throw(e))}catch(t){a(t)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))},h=function(e,t){return t.map((function(t){return e(t)}))},f=function(e){return e===l.EPageTurningOperation.Forward?c.ESubmitType.Forward:e===l.EPageTurningOperation.Backward?c.ESubmitType.Backward:e===l.EPageTurningOperation.Jump?c.ESubmitType.Jump:c.ESubmitType.Forward},g=function(e,t){var n,i,a=e.imgList,r=e.imgIndex,c=o.getStepConfig(e.stepList,e.step).dataSourceStep;return(null==(i=null==(n=u.jsonParser(a[r-1].result)["step_".concat(c)])?void 0:n.result)?void 0:i.length)-1||t};function v(e){var t=e.stepList;return{type:r.ANNOTATION_ACTIONS.SET_TASK_STEP_LIST,payload:{stepList:t}}}function b(e){var t=e.stepList,n=e.step;return{type:r.ANNOTATION_ACTIONS.SET_TASK_CONFIG,payload:{stepList:t,step:n}}}function p(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_ON_SUBMIT,payload:{onSubmit:e}}}function m(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_ON_SAVE,payload:{onSave:e}}}function y(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_ON_PAGE_CHANGE,payload:{onPageChange:e}}}function x(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_ON_STEP_CHANGE,payload:{onStepChange:e}}}function C(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_GET_FILE_DATA,payload:{getFileData:e}}}function w(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_PAGE_SIZE,payload:{pageSize:e}}}function k(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_LOAD_FILE_LIST,payload:{loadFileList:e}}}function I(e){return{type:r.ANNOTATION_ACTIONS.SKIP_BEFORE_PAGE_TURNING,payload:{skipBeforePageTurning:e}}}function L(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_BEFORE_ROTATE,payload:{beforeRotate:e}}}var P=function(e){return{type:r.ANNOTATION_ACTIONS.SET_CHECK_MODE,payload:{checkMode:e}}};var O=function(e,t){return function(n,i){var a,l,s=i().annotation;null==(a=null==s?void 0:s.onStepChange)||a.call(s,e);var u=null!=(l=null==s?void 0:s.imgIndex)?l:0;return[n({type:r.ANNOTATION_ACTIONS.SUBMIT_RESULT}),n({type:r.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA,payload:{submitType:c.ESubmitType.StepChanged}}),n({type:r.ANNOTATION_ACTIONS.SET_STEP,payload:{toStep:e}}),n({type:r.ANNOTATION_ACTIONS.CALC_STEP_PROGRESS}),n(o.LoadFileAndFileData(null!=t?t:u,0))]}},S=function(e){return function(t){return[t({type:r.ANNOTATION_ACTIONS.SUBMIT_RESULT}),t({type:r.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA,payload:{submitType:e}})]}},T=function(e,t,n,i){return[e(S(n)),e(o.LoadFileAndFileData(t,i))]},A=function(e,t){return[e({type:r.ANNOTATION_ACTIONS.SUBMIT_RESULT}),e({type:r.ANNOTATION_ACTIONS.SET_BASIC_INDEX,payload:{basicIndex:t}})]},E=function(e,t){e({type:r.ANNOTATION_ACTIONS.SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED,payload:{triggerEventAfterIndexChanged:t}})},D=function(e,t,n,o){return d(void 0,null,i().mark((function c(){var l,s,u,d,h,f,g,v;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=t().annotation,u=s.loadFileList,d=s.imgList,h=s.pageSize,f=Math.floor(n/h),N(e,!0),i.prev=2,i.next=5,u(f,h);case 5:if(g=i.sent,N(e,!1),(null==(l=null==g?void 0:g.fileList)?void 0:l.length)&&(null==g?void 0:g.total)){i.next=8;break}throw new Error("fileList and total are required");case 8:return v=o?new Array(g.total):a(d),i.abrupt("return",(v.splice.apply(v,[f*h,h].concat(a(g.fileList))),e({type:r.ANNOTATION_ACTIONS.UPDATE_IMG_LIST,payload:{imgList:v}}),!0));case 12:i.prev=12,i.t0=i.catch(2),N(e,!1),console.error(i.t0);case 15:case"end":return i.stop()}}),c,null,[[2,12]])})))},M=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;return d(void 0,null,i().mark((function o(){var l,u,d,h,v,b,p,m,y;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(u=t().annotation,d=s.getNextPageInfo(n,u,r),h=d.fileIndexChanged,v=d.fileIndex,b=d.basicIndexChanged,p=d.basicIndex,m=f(n),E(e,a),!h){i.next=15;break}if(i.t0=u.loading,i.t0){i.next=10;break}if(i.t1=!u.imgList[v],!i.t1){i.next=9;break}return i.next=8,D(e,t,v);case 8:i.t1=!i.sent;case 9:i.t0=i.t1;case 10:if(!i.t0){i.next=12;break}return i.abrupt("return");case 12:return null==(l=u.onPageChange)||l.call(u,v),y=m===c.ESubmitType.Backward?g(t().annotation,p):p,i.abrupt("return",T(e,v,m,y));case 15:return i.abrupt("return",b?A(e,p):e(S(m)));case 16:case"end":return i.stop()}}),o)})))},N=function(e,t){e({type:r.ANNOTATION_ACTIONS.SET_LOADING,payload:{loading:t}})};t.BatchUpdateResultByTrackID=function(e,t,n){return{type:r.ANNOTATION_ACTIONS.BATCH_UPDATE_RESULT_BY_TRACK_ID,payload:{id:e,newData:t,rangeIndex:n}}},t.BatchUpdateTrackID=function(e){var t=e.id,n=e.newID,i=e.rangeIndex,a=e.imgList;return{type:r.ANNOTATION_ACTIONS.BATCH_UPDATE_TRACK_ID,payload:{id:t,newID:n,rangeIndex:i,imgList:a}}},t.ChangeSave=function(e){e(S(c.ESubmitType.Save)),e({type:r.ANNOTATION_ACTIONS.SAVE_RESULT})},t.CopyBackWordResult=function(){return{type:r.ANNOTATION_ACTIONS.COPY_BACKWARD_RESULT}},t.DispatcherTurning=M,t.InitAnnotationState=function(e){e({type:r.ANNOTATION_ACTIONS.INIT_ALL_STATE,payload:{}})},t.InitTaskData=function(e){var t=e.onSubmit,n=e.onSave,i=e.onPageChange,a=e.onStepChange,o=e.getFileData,c=e.pageSize,l=e.loadFileList,s=e.step,u=e.stepList,d=e.skipBeforePageTurning,f=e.beforeRotate,g=e.checkMode,v=[];return t&&v.push(p(t)),n&&v.push(m(n)),i&&v.push(y(i)),a&&v.push(x(a)),o&&v.push(C(o)),l&&v.push(k(l)),c&&v.push(w(c)),d&&v.push(I(d)),f&&v.push(L(f)),"boolean"==typeof g&&v.push(P(g)),v.push(b({stepList:u,step:s})),v.push({type:r.ANNOTATION_ACTIONS.CALC_STEP_PROGRESS}),v.push({type:r.ANNOTATION_ACTIONS.INIT_TOOL}),function(e){return h(e,v)}},t.PageBackward=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return M(t,n,l.EPageTurningOperation.Backward,e)}},t.PageForward=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return M(t,n,l.EPageTurningOperation.Forward,e)}},t.PageJump=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,i){if(e!==i().imgIndex)return M(n,i,l.EPageTurningOperation.Jump,t,e)}},t.SetAnnotationLoading=N,t.SetPointCloudLoading=function(e,t){e({type:r.ANNOTATION_ACTIONS.SET_LOADING,payload:{loading:t}})},t.SetTaskConfig=b,t.SetTaskStepList=v,t.ToNextStep=function(e){return function(t,n){var i=n().annotation,a=function(e,t){var n,i=null==t?void 0:t.findIndex((function(t){return(null==t?void 0:t.step)===e}));return null==(n=t[i+1])?void 0:n.step}(i.step,i.stepList);return[t(O(a,e))]}},t.ToSubmitFileData=S,t.UpdateBeforeRotate=L,t.UpdateCheckMode=P,t.UpdateGetFileData=C,t.UpdateGetFileList=k,t.UpdateInjectFunc=function(e){var t=e.onSubmit,n=e.onSave,i=e.onPageChange,a=e.onStepChange,r=e.getFileData,o=e.pageSize,c=e.loadFileList,l=e.stepList,s=e.beforeRotate,u=[];return t&&u.push(p(t)),n&&u.push(m(n)),i&&u.push(y(i)),a&&u.push(x(a)),r&&u.push(C(r)),c&&u.push(k(c)),o&&u.push(w(o)),s&&u.push(L(s)),u.push(v({stepList:l})),function(e){return h(e,u)}},t.UpdateOnPageChange=y,t.UpdateOnSave=m,t.UpdateOnStepChange=x,t.UpdateOnSubmit=p,t.UpdatePageSize=w,t.UpdateProcessingStep=O,t.UpdateRotate=function(){return{type:r.ANNOTATION_ACTIONS.UPDATE_ROTATE}},t.UpdateSkipBeforePageTurning=I,t.UpdateToolInstance=function(e){return{type:r.ANNOTATION_ACTIONS.UPDATE_TOOL_INSTANCE,payload:{toolInstance:e}}},t.loadImgList=D},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(48);t.getClassName=function(e,t,n){return"".concat(i.prefix,"-").concat(e).concat(t?"__"+t:"").concat(n?"__"+n:"")},t.getTargetElement=function(e,t){return e?"function"==typeof e?e():"current"in e?e.current:e:t}},,,,function(e,t,n){"use strict";var i=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(50),o=n(43),c=n(32),l=n(119),s=n(136);var u,d=(u=r)&&"object"==typeof u&&"default"in u?u:{default:u},h=Object.defineProperty,f=Object.defineProperties,g=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=function(e,t,n){return t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},y=c.cAnnotation.ESortDirection;t.useSingleBox=function(){var e=a.useContext(o.PointCloudContext),t=e.pointCloudBoxList,n=e.setPointCloudResult,r=e.topViewInstance,c=e.backViewInstance,u=e.sideViewInstance,h=e.selectedIDs,x=e.selectedID,C=e.mainViewInstance,w=e.setSelectedIDs,k=e.syncAllViewPointCloudColor,I=e.polygonList,L=s.usePolygon(),P=L.selectedPolygon,O=L.updateSelectedPolygon,S=L.updatePolygonValidByID,T=L.deletePolygon,A=l.useHistory().pushHistoryWithList,E=a.useMemo((function(){var e=t.findIndex((function(e){return e.id===x}));if(e>-1)return{info:t[e],index:e}}),[x,t]),D=a.useCallback((function(e){if(null==E?void 0:E.info){t.splice(E.index,1,d.default.merge(E.info,e));var i=d.default.cloneDeep(t);return n(i),A({pointCloudBoxList:i}),i}return t}),[x,t]),M=a.useCallback((function(e,i){var a=t.findIndex((function(e){return e.id===i}));if(a>-1){t.splice(a,1,d.default.merge(t[a],e));var r=d.default.cloneDeep(t);return n(r),r}return t}),[t]),N=a.useCallback((function(e){null==r||r.pointCloud2dOperation.setPolygonValidAndRender(e,!0),null==u||u.pointCloud2dOperation.setPolygonValidAndRender(e,!0),null==c||c.pointCloud2dOperation.setPolygonValidAndRender(e,!0)}),[r,u,c]),R=a.useCallback((function(){if(null==E?void 0:E.info){var e=E.info,t=e.id,n=e.valid,a=D({valid:!(void 0===n||n)});k(a),N(t)}P&&(O(function(e,t){return f(e,g(t))}(function(e,t){for(var n in t||(t={}))b.call(t,n)&&m(e,n,t[n]);if(v){var a,r=i(v(t));try{for(r.s();!(a=r.n()).done;)n=a.value,p.call(t,n)&&m(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},P),{valid:!P.valid})),null==r||r.pointCloud2dOperation.setPolygonValidAndRender(P.id,!0))}),[N,E,P]),j=a.useCallback((function(e){var n=t.find((function(t){return t.id===e}));if(n){var i=n.id,a=n.valid,r=M({valid:!(void 0===a||a)},i);return N(i),r}S(e)}),[N,t,I]),_=a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.ascend;if(r&&!(h.length>1)){var t=r.pointCloud2dOperation,n=t.switchToNextPolygon(e);n&&w(n)}}),[r]),B=function(e){var i=t.filter((function(t){return t.id!==e}));n(i),null==C||C.removeObjectByName(e),null==C||C.render(),k(i)};return{selectedBox:E,updateSelectedBox:D,changeSelectedBoxValid:R,changeValidByID:j,selectNextBox:_,selectPrevBox:function(){_(y.descend)},deletePointCloudBox:B,deleteSelectedPointCloudBoxAndPolygon:function(){E&&(B(E.info.id),null==r||r.pointCloud2dOperation.deletePolygon(E.info.id)),P&&(T(P.id),null==r||r.pointCloud2dOperation.deletePolygon(P.id))}}}},function(e,t,n){"use strict";var i=n(31).default,a=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(216),o=n(381),c=n(22),l=n(0),s=n(28),u=n(34),d=n(390),h=n(548),f=n(55),g=n(554),v=n(43),b=n(29),p=n(48);var m,y=(m=l)&&"object"==typeof m&&"default"in m?m:{default:m},x=Object.defineProperty,C=Object.defineProperties,w=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,P=function(e,t,n){return t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},O=h(),S=y.default.forwardRef((function(e,t){var n=l.useState(),r=i(n,2),o=r[0],h=r[1];return l.useImperativeHandle(t,(function(){return{toolInstance:o,annotationEngine:O.getState().annotation.annotationEngine,pageBackwardActions:function(){return O.dispatch(f.PageBackward())},pageForwardActions:function(){return O.dispatch(f.PageForward())},pageJump:function(e){var t=~~e-1;O.dispatch(f.PageJump(t))},hello:function(){return alert("hello labelBee!!!")}}}),[o]),y.default.createElement(u.Provider,{store:O,context:b.LabelBeeContext},y.default.createElement(s.I18nextProvider,{i18n:c.i18n},y.default.createElement(v.PointCloudProvider,null,y.default.createElement(d,function(e,t){return C(e,w(t))}(function(e,t){for(var n in t||(t={}))I.call(t,n)&&P(e,n,t[n]);if(k){var i,r=a(k(t));try{for(r.s();!(i=r.n()).done;)n=i.value,L.call(t,n)&&P(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},e),{setToolInstance:h})))))}));t.AnnotationView=r,t.PointCloudAnnotationView=o,Object.defineProperty(t,"i18n",{enumerable:!0,get:function(){return c.i18n}}),t.VideoTagTool=g.VideoTagTool,Object.defineProperty(t,"EStepType",{enumerable:!0,get:function(){return p.EStepType}}),Object.defineProperty(t,"ESubmitType",{enumerable:!0,get:function(){return p.ESubmitType}}),t.componentCls=p.componentCls,t.prefix=p.prefix,t.default=S,t.store=O},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ANNOTATION_ACTIONS={INIT_ALL_STATE:"@@INIT_ALL_STATE",UPDATE_TOOL_INSTANCE:"@@UPDATE_TOOL_INSTANCE",UPDATE_IMG_LIST:"@@UPDATE_IMG_LIST",UPDATE_ANNOTATION_CONFIG:"@@UPDATE_ANNOTATION_CONFIG",LOAD_FILE_DATA:"@@LOAD_FILE_DATA",SUBMIT_FILE_DATA:"@@SUBMIT_FILE_DATA",SET_TASK_CONFIG:"@@SET_TASK_CONFIG",INIT_TOOL:"@@INIT_TOOL",SET_TOOL:"@@SET_TOOL",UPDATE_ON_SUBMIT:"@@UPDATE_ON_SUBMIT",UPDATE_ON_SAVE:"@@UPDATE_ON_SAVE",UPDATE_ON_PAGE_CHANGE:"@@UPDATE_ON_PAGE_CHANGE",UPDATE_ON_STEP_CHANGE:"@@UPDATE_ON_STEP_CHANGE",UPDATE_ROTATE:"@@UPDATE_ROTATE",UPDATE_GET_FILE_DATA:"@@UPDATE_GET_FILE_DATA",UPDATE_PAGE_SIZE:"@@UPDATE_PAGE_SIZE",UPDATE_LOAD_FILE_LIST:"@@UPDATE_LOAD_FILE_LIST",GET_FILE_DATA:"@@GET_FILE_DATA",SET_FILE_DATA:"@@SET_FILE_DATA",COPY_BACKWARD_RESULT:"@@COPY_BACKWARD_RESULT",SET_STEP:"@@SET_STEP",SUBMIT_RESULT:"@@SUBMIT_RESULT",SAVE_RESULT:"@@SAVE_RESULT",SET_BASIC_INDEX:"@@SET_BASIC_INDEX",CALC_STEP_PROGRESS:"@@CALC_STEP_PROGRESS",SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED:"@@SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED",SKIP_BEFORE_PAGE_TURNING:"@@SKIP_BEFORE_PAGE_TURNING",UPDATE_BEFORE_ROTATE:"@@UPDATE_BEFORE_ROTATE",SET_LOADING:"@@SET_LOADING",SET_POINT_CLOUD_LOADING:"@@SET_POINT_CLOUD_LOADING",SET_CHECK_MODE:"@@SET_CHECK_MODE",SET_TASK_STEP_LIST:"@@SET_TASK_STEP_LIST",UPDATE_ANNOTATION_VALID:"@@UPDATE_ANNOTATION_VALID",BATCH_UPDATE_TRACK_ID:"@@BATCH_UPDATE_TRACK_ID",BATCH_UPDATE_RESULT_BY_TRACK_ID:"@@BATCH_UPDATE_RESULT_BY_TRACK_ID"},t.IMAGE_ATTRIBUTE_ACTIONS={UPDATE_IMG_ATTRIBUTE:"@@UPDATE_IMG_ATTRIBUTE",INIT_IMG_ATTRIBUTE:"@@INIT_IMG_ATTRIBUTE"},t.TOOL_STYLE_ACTIONS={INIT_TOOL_STYLE_CONFIG:"@@INIT_TOOL_STYLE_CONFIG",UPDATE_TOOL_STYLE_CONFIG:"@@UPDATE_TOOL_STYLE_CONFIG"}},,,,,,,,,,function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.EScribblePattern=void 0,(i=t.EScribblePattern||(t.EScribblePattern={}))[i.Scribble=1]="Scribble",i[i.Erase=2]="Erase",t.EToolName=void 0,function(e){e.Rect="rectTool",e.Tag="tagTool",e.Point="pointTool",e.PointMarker="pointMarkerTool",e.Segmentation="segmentationTool",e.Filter="filterTool",e.Text="textTool",e.Polygon="polygonTool",e.Line="lineTool",e.LineMarker="lineMarkerTool",e.Empty="emptyTool",e.FolderTag="folderTagTool",e.RectTrack="rectTrackTool",e.ScribbleTool="scribbleTool",e.Face="faceTool",e.ClientAttribute="clientAttributeTool",e.OCRRelation="OCRRelationTool",e.SegmentByRect="segmentByRectTool"}(t.EToolName||(t.EToolName={})),t.ETextType=void 0,function(e){e[e.AnyString=0]="AnyString",e[e.Order=1]="Order",e[e.EnglishOnly=2]="EnglishOnly",e[e.NumberOnly=3]="NumberOnly",e[e.CustomFormat=4]="CustomFormat"}(t.ETextType||(t.ETextType={}));t.TEXT_ATTRIBUTE_MAX_LENGTH=1e3},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(456),a=n(457),r=n(458),o=n(459),c=n(460),l=n(461),s=n(462),u=n(463),d=n(464),h=n(247),f=n(103),g=n(102),v=n(248),b=n(465),p=n(466),m=n(467),y=n(468),x=n(469),C=n(470),w=n(471),k={name:"Undo",icon:i,shortCut:["Ctrl","Z"]},I={name:"Redo",icon:a,shortCut:["Ctrl","Shift","Z"]},L={name:"Scale",icon:r,shortCut:[o]},P={name:"Fullscreen",icon:c,shortCut:["F11"]},O={name:"Rotate",icon:l,shortCut:["R"],noticeInfo:"ToOriginalStep"},S={name:"ToggleEffectiveness",icon:s,shortCut:["Y"]},T={name:"PreviousImage",icon:u,shortCut:["A"]},A={name:"NextImage",icon:d,shortCut:["D"]},E={name:"Drag",icon:h,shortCut:[f],noticeInfo:"Press"},D={name:"Drag",icon:h,shortCut:["Space",g]},M={name:"ToggleSelected",icon:v,shortCut:["Tab"]},N={name:"ToggleSelectedReverse",icon:b,shortCut:["Shift","Tab"]},R={name:"HideGraphics",icon:y,noticeInfo:"",shortCut:["Z"]},j={name:"ToggleLineParticularity",icon:m,noticeInfo:"ToSide",shortCut:["Shift",g]},_={name:"Save",icon:p,shortCut:["Ctrl","S"]},B={name:"Speed",icon:n(472),shortCut:["&#8593;","&#8595;"],shortCutUseHtml:!0},H={name:"PlayPause",icon:x,shortCut:["Space"]},V={name:"FastForward",icon:C,shortCut:["&#8594;"],shortCutUseHtml:!0},Z={name:"Rewind",icon:w,shortCut:["&#8592;"],shortCutUseHtml:!0};t.backward=T,t.changeSpecialLine=j,t.dargWithLeftClick=D,t.dargWithRightClick=E,t.forward=A,t.forwardForward=V,t.fullScreen=P,t.hidden=R,t.playPause=H,t.restore=I,t.revoke=k,t.rewind=Z,t.rotate=O,t.saveResult=_,t.scale=L,t.setValid=S,t.speed=B,t.tabChangeSelected=M,t.tabReverseChangeSelected=N},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(84).default,a=n(31).default,r=n(200).default,o=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var c=n(236),l=n(48),s=n(395),u=n(68),d=n(46),h=n(396),f=n(238),g=n(398),v=n(52),b=n(201),p=n(32),m=n(22),y=n(30),x=n(30),C=n(50),w=n(55);var k,I=(k=C)&&"object"==typeof k&&"default"in k?k:{default:k},L=Object.defineProperty,P=Object.defineProperties,O=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,E=function(e,t,n){return t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},D=function(e,t){for(var n in t||(t={}))T.call(t,n)&&E(e,n,t[n]);if(S){var i,a=o(S(t));try{for(a.s();!(i=a.n()).done;){n=i.value;A.call(t,n)&&E(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},M=function(e,t){return P(e,O(t))},N=function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(t){a(t)}},o=function(e){try{c(n.throw(e))}catch(t){a(t)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))},R=function(e,t){return e.find((function(e){return e.step===t}))},j={annotationEngine:null,toolInstance:null,imgList:[],config:"{}",imgIndex:-1,basicIndex:0,imgPageSize:1,step:1,stepList:[],imgNode:new Image,basicResultList:[],resultList:[],stepProgress:0,loading:!1,triggerEventAfterIndexChanged:!1,pointCloudLoading:!1,checkMode:!1},_=function(e,t){return e.reduce((function(e,n){if(n){var i=n.result;if(d.jsonParser(i)["step_".concat(t)])return e+1}return e}),0)/e.length},B=function(e,t){var n=e.step,i=e.stepList,a=v.getCurrentStepInfo(n,i),r=f.ConfigUtils.jsonParser(a.config);if(!b.isVideoTool(null==a?void 0:a.tool)&&!b.isPointCloudTool(null==a?void 0:a.tool)){var o=document.getElementById("toolContainer");if(!o)throw"Not exist dom named id-toolContainer";var l=c.getFormatSize({width:window.innerWidth,height:window.innerHeight}),u=new p.AnnotationEngine({container:o,toolName:a.tool,size:l,imgNode:t,config:r,style:JSON.parse(s)});return{toolInstance:null==u?void 0:u.toolInstance,annotationEngine:u}}},H=function(e){return function(t,n){return N(void 0,null,r().mark((function i(){var a,o,c,l;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=n().annotation,o=a.getFileData,c=a.imgList,!o){i.next=6;break}return i.next=4,o(c[e],e);case 4:l=i.sent,t({type:u.ANNOTATION_ACTIONS.SET_FILE_DATA,payload:{fileData:l,index:e}});case 6:case"end":return i.stop()}}),i)})))}},V=function(e){return function(t){w.SetAnnotationLoading(t,!1),t({type:u.ANNOTATION_ACTIONS.LOAD_FILE_DATA,payload:{nextIndex:e}})}},Z=function(e,t){return function(n,i){var a,r=i().annotation,o=r.toolInstance,c=r.imgList,l=null==(a=null==c?void 0:c[e])?void 0:a.url;p.ImgUtils.load(l).then((function(i){w.SetAnnotationLoading(n,!1),n({type:u.ANNOTATION_ACTIONS.LOAD_FILE_DATA,payload:{imgNode:i,nextIndex:e,nextBasicIndex:t}})})).catch((function(){w.SetAnnotationLoading(n,!1),null==o||o.setErrorImg(),n({type:u.ANNOTATION_ACTIONS.LOAD_FILE_DATA,payload:{nextIndex:e,nextBasicIndex:t}})}))}};t.LoadFileAndFileData=function(e,t){return function(n,i){return N(void 0,null,r().mark((function a(){var o,c,l,s,u;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=i().annotation,c=o.stepList,l=o.step,s=v.currentToolIsVideo(l,c),u=v.currentToolIsPointCloud(l,c),w.SetAnnotationLoading(n,!0),a.next=4,n(H(e));case 4:if(!s&&!u){a.next=7;break}return n(V(e)),a.abrupt("return");case 7:n(Z(e,t));case 8:case"end":return a.stop()}}),a)})))}},t.annotationReducer=function(){var e,t,n,r,o,c,s,f,b,C,w,k,L,P,O,S,T,A,E,N,H,V,Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D({},j),F=arguments.length>1?arguments[1]:void 0;switch(F.type){case u.ANNOTATION_ACTIONS.INIT_ALL_STATE:return D(D({},Z),j);case u.ANNOTATION_ACTIONS.UPDATE_TOOL_INSTANCE:return M(D({},Z),{toolInstance:F.payload.toolInstance});case u.ANNOTATION_ACTIONS.UPDATE_IMG_LIST:return M(D({},Z),{imgList:F.payload.imgList});case u.ANNOTATION_ACTIONS.CALC_STEP_PROGRESS:var z=Z.imgList,U=Z.step,G=_(z,U);return M(D({},Z),{stepProgress:G});case u.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA:var W=Z.imgList,K=Z.imgIndex,Y=Z.step,X=Z.stepList,J=Z.toolInstance,Q=Z.onSubmit,q=Z.resultList;if(!J||!W[K])return Z;var $=(null==(e=W[K])?void 0:e.result)||"",ee=null!=(t=null==J?void 0:J.exportData())?t:[],te=a(ee,3),ne=te[1],ie=te[2],ae=null!=(r=null==(n=null==J?void 0:J.exportCustomData)?void 0:n.call(J))?r:{},re=g.composeResultWithBasicImgInfo($,ne),oe=g.composeResult(re,{step:Y,stepList:X},{rect:q},ae),ce=Z.imgList.map((function(e,t){if(t===K){var n=h.dataCorrection(oe,$,Y,X);return D(M(D({},e),{result:n}),ie)}return e}));if((null==(o=F.payload)?void 0:o.submitType)===l.ESubmitType.SyncImgList)return M(D({},Z),{imgList:ce});Q&&Q([ce[K]],null==(c=F.payload)?void 0:c.submitType,K,ce);var le=_(ce,Y);return M(D({},Z),{stepProgress:le,imgList:ce});case u.ANNOTATION_ACTIONS.SAVE_RESULT:var se=Z.imgList,ue=Z.imgIndex,de=Z.onSave;return null==de||de(se[ue],ue,se),D({},Z);case u.ANNOTATION_ACTIONS.SUBMIT_RESULT:var he=Z.imgList,fe=Z.basicIndex,ge=Z.resultList,ve=Z.toolInstance,be=Z.basicResultList;if(!ve)return Z;var pe=null!=(s=null==ve?void 0:ve.exportData())?s:[],me=a(pe,1),ye=me[0],xe=ye;if((null==be?void 0:be.length)>0){var Ce,we=null==(f=be[fe])?void 0:f.id,ke=ye.map((function(e){return M(D({},e),{sourceID:we})}));xe=I.default.cloneDeep(ge).filter((function(e){return e.sourceID!==we})),(Ce=xe).push.apply(Ce,i(ke))}return M(D({},Z),{resultList:xe,imgList:he});case u.ANNOTATION_ACTIONS.SET_BASIC_INDEX:var Ie=Z.toolInstance,Le=Z.step,Pe=Z.imgList,Oe=Z.imgIndex,Se=Z.stepList,Te=Z.annotationEngine,Ae=Z.resultList,Ee=Z.basicResultList;if(!Ie||!Te)return Z;var De=F.payload.basicIndex,Me=null==(b=Ee[De])?void 0:b.id,Ne=d.jsonParser(null==(C=Pe[Oe])?void 0:C.result),Re=(Ae||[]).filter((function(e){return e.sourceID===Me})),je=R(Se,Le),_e=je.dataSourceStep,Be=je.tool,He=R(Se,_e),Ve=[];return _e&&Be&&((null==(Ve=null==(w=Ne["step_".concat(_e)])?void 0:w.result)?void 0:Ve.length)>0?(null==Te||Te.setBasicInfo(He.tool,Ve[De]),null==Te||Te.launchOperation()):(null==Te||Te.setBasicInfo(He.tool),null==Te||Te.forbidOperation(),x.message.info(m.i18n.t("NoDependency")))),null==Ie||Ie.setResult(Re),null==Ie||Ie.history.initRecord(Re,!0),M(D({},Z),{basicIndex:De});case u.ANNOTATION_ACTIONS.SET_TRIGGER_EVENT_AFTER_INDEX_CHANGED:var Ze=F.payload.triggerEventAfterIndexChanged;return M(D({},Z),{triggerEventAfterIndexChanged:!!Ze});case u.ANNOTATION_ACTIONS.LOAD_FILE_DATA:var Fe=Z.imgList,ze=Z.step,Ue=Z.toolInstance,Ge=Z.annotationEngine,We=Z.stepList;if(!Ue)return M(D({},Z),{imgIndex:F.payload.nextIndex});var Ke=v.getCurrentStepInfo(ze,We),Ye=F.payload,Xe=Ye.nextIndex,Je=Ye.imgNode,Qe=Ye.nextBasicIndex,qe=Ye.imgError,$e=null!=Qe?Qe:0,et=d.jsonParser(null==(k=Fe[Xe])?void 0:k.result),tt=et["step_".concat(Ke.step)],nt=!tt,it={rotate:null!=(L=et.rotate)?L:0,valid:null==(P=et.valid)||P};Je&&!0!==qe?null==Ge||Ge.setImgNode(Je,it):null==Ue||Ue.setValid(it.valid);var at=R(We,Ke.step),rt=at.dataSourceStep,ot=at.tool,ct=R(We,rt),lt=rt&&ot,st=null!=(S=null==(O=et["step_".concat(rt)])?void 0:O.result)?S:[],ut=h.getInitialResultList(null==tt?void 0:tt.result,Ue,at,st,nt);if(null==Ge||Ge.launchOperation(),lt&&((null==st?void 0:st.length)>0?null==Ge||Ge.setBasicInfo(ct.tool,st[$e]):(null==Ge||Ge.setBasicInfo(ct.tool),null==Ge||Ge.forbidOperation(),x.message.info(m.i18n.t("NoDependency")))),"check"!==Ke.tool){var dt=null!=(A=null==(T=st[$e])?void 0:T.id)?A:"",ht=lt?ut.filter((function(e){return p.CommonToolUtils.isSameSourceID(e.sourceID,dt)})):ut;null==Ue||Ue.history.initRecord(ut,!0),null==Ue||Ue.setResult(ht)}return M(D({},Z),{imgIndex:Xe,basicIndex:$e,basicResultList:st,resultList:ut});case u.ANNOTATION_ACTIONS.UPDATE_ANNOTATION_CONFIG:return M(D({},Z),{config:null!=(E=F.payload.config)?E:"{}"});case u.ANNOTATION_ACTIONS.SET_TASK_STEP_LIST:var ft=F.payload.stepList;return M(D({},Z),{stepList:ft});case u.ANNOTATION_ACTIONS.SET_TASK_CONFIG:var gt=F.payload,vt=gt.stepList,bt=gt.step;return M(D({},Z),{stepList:vt,step:bt});case u.ANNOTATION_ACTIONS.INIT_TOOL:var pt=Z.imgNode,mt=B(Z,pt);if(mt){var yt=mt.toolInstance,xt=mt.annotationEngine;return M(D({},Z),{toolInstance:yt,annotationEngine:xt})}return D({},Z);case u.ANNOTATION_ACTIONS.SET_TOOL:var Ct=null==(N=F.payload)?void 0:N.instance;return Ct?M(D({},Z),{toolInstance:Ct}):D({},Z);case u.ANNOTATION_ACTIONS.UPDATE_ON_SUBMIT:return M(D({},Z),{onSubmit:F.payload.onSubmit});case u.ANNOTATION_ACTIONS.UPDATE_ON_SAVE:return M(D({},Z),{onSave:F.payload.onSave});case u.ANNOTATION_ACTIONS.UPDATE_ON_PAGE_CHANGE:return M(D({},Z),{onPageChange:F.payload.onPageChange});case u.ANNOTATION_ACTIONS.UPDATE_ON_STEP_CHANGE:return M(D({},Z),{onStepChange:F.payload.onStepChange});case u.ANNOTATION_ACTIONS.UPDATE_GET_FILE_DATA:return M(D({},Z),{getFileData:F.payload.getFileData});case u.ANNOTATION_ACTIONS.UPDATE_PAGE_SIZE:return M(D({},Z),{pageSize:F.payload.pageSize});case u.ANNOTATION_ACTIONS.UPDATE_LOAD_FILE_LIST:return M(D({},Z),{loadFileList:F.payload.loadFileList});case u.ANNOTATION_ACTIONS.UPDATE_BEFORE_ROTATE:return M(D({},Z),{beforeRotate:F.payload.beforeRotate});case u.ANNOTATION_ACTIONS.SKIP_BEFORE_PAGE_TURNING:return M(D({},Z),{skipBeforePageTurning:F.payload.skipBeforePageTurning});case u.ANNOTATION_ACTIONS.SET_FILE_DATA:var wt=F.payload,kt=wt.fileData,It=wt.index,Lt=Z.imgList,Pt=i(Lt);return Pt[It]=D(D({},Pt[It]),kt),M(D({},Z),{imgList:Pt});case u.ANNOTATION_ACTIONS.UPDATE_ROTATE:var Ot=Z.toolInstance,St=Z.beforeRotate;return St&&!1===St()||null==Ot||Ot.updateRotate(),Z;case u.ANNOTATION_ACTIONS.UPDATE_ANNOTATION_VALID:var Tt=Z.toolInstance,At=null==(H=null==Tt?void 0:Tt.valid)||H;return y.Modal.destroyAll(),y.Modal.confirm({content:m.i18n.t(At?"updateValidFromValidToInValid":"updateValidFromInValidToValid"),onOk:function(){null==Tt||Tt.setValid(!At)},okText:m.i18n.t("Confirm"),cancelText:m.i18n.t("Cancel")}),Z;case u.ANNOTATION_ACTIONS.COPY_BACKWARD_RESULT:var Et=Z.toolInstance,Dt=Z.imgIndex,Mt=Z.imgList,Nt=Z.step;if(!Et)return Z;if(0===Dt||Dt>=Mt.length)return console.error("\u65e0\u6cd5\u590d\u5236\u8fb9\u754c\u5916\u7684\u5185\u5bb9"),Z;var Rt=Mt[Dt-1].result;if(!Rt)return Z;var jt=h.copyResultChange(Rt,Nt,null!=(V=Mt[Dt].result)?V:"");Mt[Dt]=M(D({},Mt[Dt]),{result:jt});var _t=d.jsonParser(jt)["step_".concat(Nt)],Bt=(null==_t?void 0:_t.result)||[];return null==Et||Et.setResult(Bt),null==Et||Et.history.pushHistory(Bt),M(D({},Z),{imgList:i(Mt)});case u.ANNOTATION_ACTIONS.SET_STEP:var Ht=Z.stepList,Vt=Z.annotationEngine,Zt=F.payload.toStep;if(!Vt)return Z;var Ft=R(Ht,Zt);return null==Vt||Vt.setToolName(Ft.tool,Ft.config),M(D({},Z),{step:Zt,toolInstance:null==Vt?void 0:Vt.toolInstance});case u.ANNOTATION_ACTIONS.SET_LOADING:var zt=F.payload.loading;return M(D({},Z),{loading:!!zt});case u.ANNOTATION_ACTIONS.SET_POINT_CLOUD_LOADING:var Ut=F.payload.pointCloudLoading;return M(D({},Z),{pointCloudLoading:!!Ut});case u.ANNOTATION_ACTIONS.SET_CHECK_MODE:var Gt=F.payload.checkMode;return M(D({},Z),{checkMode:!!Gt});case u.ANNOTATION_ACTIONS.BATCH_UPDATE_TRACK_ID:var Wt=F.payload,Kt=Wt.id,Yt=Wt.newID,Xt=Wt.rangeIndex,Jt=Wt.imgList,Qt=Z.imgIndex,qt=Z.onSubmit,$t=[],en=Jt.map((function(e,t){if(p.MathUtils.isInRange(t,Xt)){var n=M(D({},e),{result:m.PointCloudUtils.batchUpdateTrackID({id:Kt,newID:Yt,result:e.result})});return $t.push({imgIndex:t,newInfo:n}),n}return e}));return qt&&qt([en[Qt]],l.ESubmitType.BatchUpdateTrackID,Qt,en,{updateImgList:$t}),M(D({},Z),{imgList:en});case u.ANNOTATION_ACTIONS.BATCH_UPDATE_RESULT_BY_TRACK_ID:var tn=F.payload,nn=tn.id,an=tn.newData,rn=tn.rangeIndex,on=Z.imgList,cn=Z.imgIndex,ln=Z.onSubmit,sn=[],un=on.map((function(e,t){if(p.MathUtils.isInRange(t,rn)){var n=M(D({},e),{result:m.PointCloudUtils.batchUpdateResultByTrackID({id:nn,newData:an,result:e.result})});return sn.push({imgIndex:t,newInfo:n}),n}return e}));return ln&&ln([un[cn]],l.ESubmitType.BatchUpdateTrackID,cn,un,{updateImgList:sn}),M(D({},Z),{imgList:un});default:return Z}},t.composeResultByToolInstance=function(e){var t,n,i,r,o=e.toolInstance,c=e.imgList,l=e.imgIndex,s=e.stepList,u=e.step,d=void 0===u?1:u,h=(null==(t=c[l])?void 0:t.result)||"",f=null!=(n=null==o?void 0:o.exportData())?n:[],v=a(f,3),b=v[0],p=v[1],m=v[2],y=null!=(r=null==(i=null==o?void 0:o.exportCustomData)?void 0:i.call(o))?r:{},x=g.composeResultWithBasicImgInfo(h,p),C=g.composeResult(x,{step:d,stepList:s},{rect:b},y);return c.map((function(e,t){return t===l?D(M(D({},e),{result:C}),m):D({},e)}))},t.getStepConfig=R,t.getTotalPage=function(e){var t=e.imgList,n=e.imgPageSize;return Math.ceil(t.length/n)}},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(99),o=n(56),c=n(401);var l,s=(l=r)&&"object"==typeof l&&"default"in l?l:{default:l};e.exports=function(e){var t=c((function(){var t,n,i=o.getTargetElement(e);return{width:null!=(t=(i||{}).clientWidth)?t:0,height:null!=(n=(i||{}).clientHeight)?n:0}})),n=i(t,2),r=n[0],l=n[1];return a.useLayoutEffect((function(){var t=o.getTargetElement(e);if(!t)return function(){};var n=new s.default((function(e){e.forEach((function(e){var t,n;l({width:null!=(t=e.target.clientWidth)?t:0,height:null!=(n=e.target.clientHeight)?n:0})}))}));return n.observe(t),function(){n.disconnect()}}),[e]),r}},function(e,t,n){"use strict";var i=n(200).default,a=n(85).default,r=n(84).default,o=n(31).default,c=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var l=n(32),s=n(22),u=n(0),d=n(43),h=n(60),f=n(50),g=n(29),v=n(52),b=n(46),p=n(55),m=n(30),y=n(28),x=n(119),C=n(136);var w,k=(w=f)&&"object"==typeof w&&"default"in w?w:{default:w},I=Object.defineProperty,L=Object.defineProperties,P=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,A=function(e,t,n){return t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},E=function(e,t){for(var n in t||(t={}))S.call(t,n)&&A(e,n,t[n]);if(O){var i,a=c(O(t));try{for(a.s();!(i=a.n()).done;){n=i.value;T.call(t,n)&&A(e,n,t[n])}}catch(r){a.e(r)}finally{a.f()}}return e},D=function(e,t){return L(e,P(t))},M=function(e,t,n){return new Promise((function(i,a){var r=function(e){try{c(n.next(e))}catch(t){a(t)}},o=function(e){try{c(n.throw(e))}catch(t){a(t)}},c=function(e){return e.done?i(e.value):Promise.resolve(e.value).then(r,o)};c((n=n.apply(e,t)).next())}))},N="Top",R="Side",j="Back",_=function(e,t){var n=t.width,i=t.height,a=e.x;return{x:i/2-e.y,y:-(a-n/2)}},B=function(e,t,n,i,a){var r=e.pointList.map((function(e){return _(e,t)})),c=o(r,4),s=c[0],u=c[1],d=c[2],h=c[3],f=l.MathUtils.getLineCenterPoint([s,d]),g=l.MathUtils.getLineLength(s,u),v=l.MathUtils.getLineLength(u,d),b=l.MathUtils.getRadiusFromQuadrangle(e.pointList),p=0,m=1,y={};if(n){var x=n.getSensesPointZAxisInPolygon([s,u,d,h]);p=(x.maxZ+x.minZ)/2,m=x.maxZ-x.minZ,y={count:x.zCount}}i&&(p=i.center.z,m=i.depth);var C={center:{x:f.x,y:f.y,z:p},width:v,height:g,depth:m,rotation:b,id:e.id},w=E(i?E(E({},i),C):D(E({},C),{attribute:"",valid:!0}),y);return a&&Object.assign(w,a),w},H=function(e,t,n,i){var a=o(e.pointList,3),r=a[0],c=a[1],s=a[2],u=o(t.pointList,3),d=u[0],h=u[1],f=u[2],g=l.MathUtils.getLineCenterPoint([r,s]),v=l.MathUtils.getLineCenterPoint([d,f]),b={x:[g.x-v.x,(g.y,v.y)][0],y:0,z:g.y-v.y},p=l.MathUtils.getLineLength(r,c)-l.MathUtils.getLineLength(d,h),m=l.MathUtils.getLineLength(c,s)-l.MathUtils.getLineLength(h,f);return i.getNewBoxBySideUpdate(b,m,p,n).newBoxParams},V=function(e,t,n,i){var a=o(e.pointList,3),r=a[0],c=a[1],s=a[2],u=o(t.pointList,3),d=u[0],h=u[1],f=u[2],g=l.MathUtils.getLineCenterPoint([r,s]),v=l.MathUtils.getLineCenterPoint([d,f]),b={x:[g.x-v.x,(g.y,v.y)][0],y:0,z:g.y-v.y},p=l.MathUtils.getLineLength(r,c)-l.MathUtils.getLineLength(d,h),m=l.MathUtils.getLineLength(c,s)-l.MathUtils.getLineLength(h,f);return i.getNewBoxByBackUpdate(b,m,p,n).newBoxParams},Z=function(e,t,n,i){if(n){var a=n.pointCloud2dOperation,r=n.pointCloudInstance;r.loadPCDFileByBox(i,e,{width:5,depth:5});var o=r.updateOrthoCamera(e,s.EPerspectiveView.Left).cameraPositionVector;r.setInitCameraPosition(o);var c=r.getBoxSidePolygon2DCoordinate(e),l=c.polygon2d,u=c.zoom;r.camera.zoom=u,r.camera.updateProjectionMatrix(),r.render(),a.initPosition(),a.zoomChangeOnCenter(u),a.setResultAndSelectedID([{id:t.id,valid:e.valid,pointList:l,textAttribute:"",isRect:!0,attribute:e.attribute}],t.id)}},F=function(e,t,n,i){if(n){var a=n.pointCloud2dOperation,r=n.pointCloudInstance;r.loadPCDFileByBox(i,e,{height:5,depth:5});var o=r.updateOrthoCamera(e,s.EPerspectiveView.Back).cameraPositionVector;r.setInitCameraPosition(o);var c=r.getBoxBackPolygon2DCoordinate(e),l=c.polygon2d,u=c.zoom;r.camera.zoom=u,r.camera.updateProjectionMatrix(),r.render(),a.initPosition(),a.zoomChangeOnCenter(u),a.setResultAndSelectedID([{id:t.id,valid:e.valid,pointList:l,textAttribute:"",isRect:!0,attribute:e.attribute}],t.id)}},z=function(e,t,n,i){var a;if(n&&i){i.generateBox(e,t.id),i.updateCameraByBox(e,s.EPerspectiveView.Top),i.render();var o=n.pointCloud2dOperation,c=n.pointCloudInstance.getBoxTopPolygon2DCoordinate(e).polygon2d,l=r(o.polygonList),u=l.find((function(e){return e.id===t.id}));u?u.pointList=c:l.push({id:t.id,pointList:c,textAttribute:"",isRect:!0,valid:null==(a=e.valid)||a}),o.setResultAndSelectedID(l,t.id)}};t.synchronizeBackView=F,t.synchronizeSideView=Z,t.synchronizeTopView=z,t.topViewPolygon2PointCloud=B,t.transferCanvas2World=_,t.usePointCloudViews=function(){var e=u.useContext(d.PointCloudContext),t=e.topViewInstance,n=e.sideViewInstance,r=e.backViewInstance,o=e.mainViewInstance,c=e.addPointCloudBox,f=e.setSelectedIDs,w=e.selectedIDs,I=e.pointCloudBoxList,L=x.useHistory(),P=L.addHistory,O=L.initHistory,S=L.pushHistoryUnderUpdatePolygon,T=C.usePolygon().selectedPolygon,A=h.useSingleBox().updateSelectedBox,_=g.useSelector((function(e){var t=e.annotation,n=t.stepList,i=t.step;return{currentData:t.imgList[t.imgIndex],config:b.jsonParser(v.getCurrentStepInfo(i,n).config)}})),U=_.currentData,G=_.config,W=g.useDispatch(),K=h.useSingleBox().selectedBox,Y=y.useTranslation().t,X=null==K?void 0:K.info;if(!t||!n||!r)return{topViewAddBox:function(){},topViewSelectedChanged:function(){},sideViewUpdateBox:function(){}};var J=t.pointCloudInstance,Q=function(e){null==o||o.generateBox(e),null==o||o.controls.update(),null==o||o.render()},q=function(e,t,i){if(X){var a,r;if(i===j)a=V;else a=H;if(r=a(e,t,X,n.pointCloudInstance),o){var c=o.getSensesPointZAxisInPolygon(l.getCuboidFromPointCloudBox(r).polygonPointList,[r.center.z-r.depth/2,r.center.z+r.depth/2]).count;r=D(E({},r),{count:c})}var s=A(r);return $(i,e,r,void 0,s),s}},$=function(c,l,s,u,d){return M(void 0,null,i().mark((function h(){var f,g,v;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(g=null==U?void 0:U.url,i.t0=d,!i.t0){i.next=5;break}return i.next=5,e.syncAllViewPointCloudColor(d);case 5:a(f={},R,(function(){Z(s,l,n,g)})),a(f,j,(function(){r&&F(s,l,r,g)})),a(f,N,(function(){z(s,l,t,o)})),v=f,Object.keys(v).forEach((function(e){e!==c&&v[e]()})),u&&(null==o||o.updateCameraZoom(u)),Q(s);case 7:case"end":return i.stop()}}),h)})))};return{topViewAddBox:function(e){var n,i=e.newPolygon,a=e.size,r=(e.imgList,e.trackConfigurable),o=e.zoom,l={attribute:null!=(n=t.pointCloud2dOperation.defaultAttribute)?n:""};!0===r&&Object.assign(l,{trackID:s.PointCloudUtils.getNextTrackID({imgList:[],extraBoxList:I})});var u=B(i,a,J,void 0,l),d=null==t?void 0:t.pointCloud2dOperation,h=u;if((null==G?void 0:G.lowerLimitPointsNumInBox)&&"number"==typeof u.count&&u.count<G.lowerLimitPointsNumInBox)return m.message.info(Y("LowerLimitPointsNumInBox",{num:G.lowerLimitPointsNumInBox})),void d.deletePolygon(u.id);d.setSelectedIDs([i.id]),f(h.id);var g=c(h);$(N,i,h,o,g),P({newBoxParams:h})},topViewSelectedChanged:function(e,n){var i=null!=e?e:null==K?void 0:K.info,a=null==t?void 0:t.pointCloud2dOperation;if(a.setSelectedIDs(w),i&&a){var r=a.selectedPolygon;$(N,r,i,void 0,n)}},topViewUpdateBox:function(e,n){if(T){var i=D(E({},e),{pointList:e.pointList.map((function(e){return s.PointCloudUtils.transferCanvas2World(e,n)}))});S(i)}else if(X){var a=B(e,n,t.pointCloudInstance,X);Object.assign(X,k.default.pickBy(a,(function(e,t){return["width","height","x","y"]})));var r=A(a);$(N,e,X,void 0,r)}},sideViewUpdateBox:function(e,t){q(e,t,R)},backViewUpdateBox:function(e,t){q(e,t,j)},pointCloudBoxListUpdated:function(e){t.updatePolygonList(e),null==o||o.generateBoxes(e)},initPointCloud3d:function(e){if(o){var t={left:-e.width/2,right:e.width/2,top:e.height/2,bottom:-e.height/2,near:100,far:-100};o.initOrthographicCamera(t),o.initRenderer(),o.render()}},updatePointCloudData:function(){return M(void 0,null,i().mark((function n(){var a,r,c,l,u,d,h,f,g;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((null==U?void 0:U.url)&&o){n.next=2;break}return n.abrupt("return");case 2:return p.SetPointCloudLoading(W,!0),n.next=5,o.loadPCDFile(U.url,null!=(a=null==G?void 0:G.radius)?a:90);case 5:I.forEach((function(e){null==o||o.removeObjectByName(e.id)})),h=[],f=[],U.result?(h=s.PointCloudUtils.getBoxParamsFromResultList(U.result),f=s.PointCloudUtils.getPolygonListFromResultList(U.result),h.forEach((function(e){null==o||o.generateBox(e)})),e.syncAllViewPointCloudColor(h),e.setPointCloudResult(h),e.setPolygonList(f)):(e.setPointCloudResult([]),e.setPolygonList([])),O({pointCloudBoxList:h,polygonList:f}),o.updateTopCamera(),g=null==(c=null==(r=b.jsonParser(U.result))?void 0:r.valid)||c,e.setPointCloudValid(g),null==(l=e.sideViewInstance)||l.clearAllData(),null==(u=e.backViewInstance)||u.clearAllData(),t.updateData(U.url,U.result,{radius:null!=(d=null==G?void 0:G.radius)?d:90}),p.SetPointCloudLoading(W,!1);case 10:case"end":return n.stop()}}),n)})))}}}},,,,function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_mouse_left_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23ff5770%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e9%bc%a0%e6%a0%87%e6%bb%9a%e8%bd%ae'%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.982v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.97-9.7H5.865V0a5.7%2c5.7%2c0%2c0%2c1%2c3.53%2c1.267A3.812%2c3.812%2c0%2c0%2c1%2c10.85%2c4.19V5.98Zm-5.866%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.456%2c1.267%2c5.693%2c5.693%2c0%2c0%2c1%2c4.984%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(-0.698 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_mouse_right_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23ff5770%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e9%bc%a0%e6%a0%87%e6%bb%9a%e8%bd%ae'%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.982v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.97-9.7H5.865V0a5.7%2c5.7%2c0%2c0%2c1%2c3.53%2c1.267A3.812%2c3.812%2c0%2c0%2c1%2c10.85%2c4.19V5.98Zm-5.866%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.456%2c1.267%2c5.693%2c5.693%2c0%2c0%2c1%2c4.984%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(5.302 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(52),a=n(46);t.a2MapStateToProps=function(e){var t,n,r,o=e.annotation,c=o.imgList,l=o.imgIndex,s=null!=(t=c[l])?t:{},u=i.getCurrentStepInfo(null==(n=e.annotation)?void 0:n.step,null==(r=e.annotation)?void 0:r.stepList);return{currentData:s,imgIndex:l,imgList:c,stepInfo:u,config:a.jsonParser(null==u?void 0:u.config),configString:null==u?void 0:u.config}}},,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(43),o=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,u=function(e,t,n){return t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n};t.useHistory=function(){var e=a.useContext(r.PointCloudContext),t=e.history,n=e.setPointCloudResult,o=e.setSelectedIDs,d=e.pointCloudBoxList,h=e.mainViewInstance,f=e.topViewInstance,g=e.polygonList,v=e.setPolygonList,b=e.syncAllViewPointCloudColor,p=function(e){if(e){var t=e.pointCloudBoxList,i=void 0===t?[]:t,a=e.polygonList,r=void 0===a?[]:a;if(i){d.length!==i.length&&o();var c=d.filter((function(e){return i.every((function(t){return t.id!==e.id}))})),l=i.filter((function(e){return d.every((function(t){return t.id!==e.id}))}));c.forEach((function(e){null==h||h.removeObjectByName(e.id)})),l.forEach((function(e){null==h||h.generateBox(e)})),n(i),b(i)}r&&v(r),null==f||f.updatePolygonList(null!=i?i:[],null!=r?r:[])}};return{addHistory:function(e){var n=e.newBoxParams,i=e.newPolygon,a={pointCloudBoxList:d,polygonList:g};n&&(a.pointCloudBoxList=d.concat(n)),i&&(a.polygonList=g.concat(i)),t.pushHistory(a)},pushHistoryWithList:function(e){var n={pointCloudBoxList:d,polygonList:g};e.pointCloudBoxList&&(n.pointCloudBoxList=e.pointCloudBoxList),e.polygonList&&(n.polygonList=e.polygonList),t.pushHistory(n)},initHistory:function(e){var n=e.pointCloudBoxList,i=e.polygonList;t.initRecord({pointCloudBoxList:n,polygonList:i},!0)},pushHistoryUnderUpdatePolygon:function(e){if(g.find((function(t){return t.id===e.id}))){var n=g.map((function(t){return t.id===e.id?e:function(e,t){for(var n in t||(t={}))l.call(t,n)&&u(e,n,t[n]);if(c){var a,r=i(c(t));try{for(r.s();!(a=r.n()).done;)n=a.value,s.call(t,n)&&u(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},t)}));t.pushHistory({pointCloudBoxList:d,polygonList:n}),v(n)}},redo:function(){p(t.redo())},undo:function(){p(t.undo())}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(56),a=n(5),r=n(0);function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=o(a),l=o(r);t.PointCloudContainer=function(e){var t=e.title,n=e.toolbar,a=e.children,r=e.className,o=e.style;return l.default.createElement("div",{className:c.default([r,i.getClassName("point-cloud-container")]),style:o},l.default.createElement("div",{className:i.getClassName("point-cloud-container","header")},l.default.createElement("span",{className:i.getClassName("point-cloud-container","header-title")},t),n&&l.default.createElement("div",{className:i.getClassName("point-cloud-container","header-toolbar")},n)),a)}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(43),o=n(119),c=Object.defineProperty,l=Object.defineProperties,s=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,f=function(e,t,n){return t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},g=function(e,t){for(var n in t||(t={}))d.call(t,n)&&f(e,n,t[n]);if(u){var a,r=i(u(t));try{for(r.s();!(a=r.n()).done;){n=a.value;h.call(t,n)&&f(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e};t.usePolygon=function(){var e=a.useContext(r.PointCloudContext),t=e.polygonList,n=e.setPolygonList,i=e.selectedID,c=o.useHistory(),u=c.addHistory,d=c.pushHistoryWithList,h=t.find((function(e){return e.id===i}));return{addPolygon:function(e){n(t.concat(e)),u({newPolygon:e})},deletePolygon:function(e){var i=t.filter((function(t){return t.id!==e})).map((function(e){return g({},e)}));n(i),d({polygonList:i})},selectedPolygon:h,updateSelectedPolygon:function(e){h&&n(t.map((function(t){return t.id===i?e:t})))},updatePolygonValidByID:function(e){t.find((function(t){return t.id===e}))&&n(t.map((function(t){return t.id===e?function(e,t){return l(e,s(t))}(g({},t),{valid:!t.valid}):t})))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(48),a=n(55),r=n(96),o=n(30),c=n(0),l=n(28),s=n(34),u=n(29),d=n(448),h=n(504),f=n(505),g=n(254),v=n(255),b=n(32),p=n(206);var m,y=(m=c)&&"object"==typeof m&&"default"in m?m:{default:m},x=b.cTool.EPointCloudName,C="".concat(i.prefix,"-footer"),w=function(){return y.default.createElement(o.Divider,{type:"vertical",style:{background:"rgba(153, 153, 153, 1)",height:"16px"}})},k=function(e){var t=e.footerTips,n=e.hiddenTips,i=e.pageNumber,a=e.pagination,r=e.zoomController,o=e.curItems,c=e.footerDivider;return y.default.createElement(y.default.Fragment,null,t,y.default.createElement("div",{style:{flex:1}}),n,i,a,o,c,r)},I=s.connect((function(e){return{totalPage:r.getTotalPage(e.annotation),imgIndex:e.annotation.imgIndex,stepList:e.annotation.stepList,step:e.annotation.step,basicIndex:e.annotation.basicIndex,basicResultList:e.annotation.basicResultList,skipBeforePageTurning:e.annotation.skipBeforePageTurning}}),null,null,{context:u.LabelBeeContext})((function(e){var t,n=e.stepList,i=e.step,r=e.basicResultList,o=e.basicIndex,c=e.mode,s=void 0===c?"light":c,b=e.footer,m=void 0===b?k:b,I=e.skipBeforePageTurning,L=u.useDispatch(),P=l.useTranslation().t,O=null!=(t=n[i-1])?t:{},S=!!O.dataSourceStep,T=y.default.createElement(v.Pagination,{imgIndex:e.imgIndex,totalPage:e.totalPage,pageJump:function(e){var t=~~e-1;I?I((function(){return L(a.PageJump(t))})):L(a.PageJump(t))},pageBackward:function(){I?I((function(){return L(a.PageBackward())})):L(a.PageBackward())},pageForward:function(){I?I((function(){return L(a.PageForward())})):L(a.PageForward())},footerCls:C}),A=S&&r.length>0?y.default.createElement("span",null,P("curItems",{current:o+1,total:r.length})):null;return"function"==typeof m?m===k&&O.tool===x.PointCloud?y.default.createElement("div",{className:"".concat(C),style:e.style},y.default.createElement(d,null),y.default.createElement("div",{style:{flex:1}}),T):y.default.createElement("div",{className:"".concat(C),style:e.style},m({footerTips:y.default.createElement(d,null),hiddenTips:y.default.createElement(h,null),pageNumber:y.default.createElement(f,null),pagination:T,zoomController:y.default.createElement(g.default,{mode:s}),curItems:A,footerDivider:y.default.createElement(w,null),shortCutTable:p.shortCutTable,ToolHotKeyCom:p.ToolHotKeyCom})):m}));t.FooterDivider=w,t.default=I,t.footerCls=C},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_279' data-name='%e8%b7%af%e5%be%84 279' class='cls-1' d='M11.345-10.437H8.754c0-.488-.379-1.077-.848-1.077H4.94c-.468%2c0-.848.589-.848%2c1.077H1.5c-.572%2c0-1.2.085-1.2.658v.886H12.248v-.886C12.248-10.352%2c11.917-10.437%2c11.345-10.437ZM1.357-7.857V.582a2.019%2c2.019%2c0%2c0%2c0%2c1.7%2c1.9H9.79c.859%2c0%2c1.421-1.046%2c1.421-1.9V-7.857ZM4.186.758H3.15V-6.709H4.186Zm2.6%2c0H5.747V-6.709H6.783Zm2.6%2c0H8.344V-6.709H9.38Z' transform='translate(-0.3 11.514)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_del_kj' transform='translate(0.7 10.514)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_95' data-name='%e7%9f%a9%e5%bd%a2 95' class='cls-1' width='16' height='16' transform='translate(-0.7 -10.514)'/%3e %3cg id='%e7%bb%84_481' data-name='%e7%bb%84 481' class='cls-2' transform='translate(1.3 -9.514)'%3e %3cpath id='%e8%b7%af%e5%be%84_278' data-name='%e8%b7%af%e5%be%84 278' class='cls-3' d='M-4.7-16.514H19.956V10.194H-4.7Z' transform='translate(-1.654 10.16)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){var i=n.find((function(t){return t.value===e})),a=i.subSelected.find((function(e){return e.value===t}));return{keyLabel:i.key,valueLabel:a.key}},a=function(e,t){return e.sort((function(e,n){return t.findIndex((function(t){return e===t.value}))-t.findIndex((function(e){return n===e.value}))}))},r=function(e,t,n,a){e.forEach((function(e){var r=i(t,e,n),o=r.keyLabel,c=r.valueLabel,l=a.find((function(e){return e.keyLabel===o}));l?l.valuesLabelArray.push(c):a.push({keyLabel:o,valuesLabelArray:[c]})}))};t.decimalReserved=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"number"==typeof e?parseFloat(e.toFixed(t)):e},t.findTagLabel=i,t.getKeyCodeNumber=function(e){return e<=57&&e>=49?e-48:e<=105&&e>=97?e-96:0},t.result2LabelKey=function(e,t){var n;try{return null!=(n=null==e?void 0:e.reduce((function(e,n){return a(Object.keys(n.result),t).forEach((function(i){var a,o=null==(a=n.result[i])?void 0:a.split(";");r(o,i,t,e)})),e}),[]))?n:[]}catch(i){return[]}},t.tagsSortThruInputList=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;t.EStepType=void 0,(i=t.EStepType||(t.EStepType={}))[i.ANNOTATION=1]="ANNOTATION",i[i.QUALITY_INSPECTION=2]="QUALITY_INSPECTION",i[i.PRE_ANNOTATION=3]="PRE_ANNOTATION",i[i.MANUAL_CORRECTION=4]="MANUAL_CORRECTION",t.EPageTurningOperation=void 0,function(e){e[e.Backward=0]="Backward",e[e.Forward=1]="Forward",e[e.Jump=2]="Jump"}(t.EPageTurningOperation||(t.EPageTurningOperation={})),t.EDragStatus=void 0,function(e){e[e.Start=0]="Start",e[e.Stop=1]="Stop",e[e.Wait=2]="Wait"}(t.EDragStatus||(t.EDragStatus={})),t.EDragTarget=void 0,function(e){e[e.Point=0]="Point",e[e.Line=1]="Line",e[e.Plane=2]="Plane"}(t.EDragTarget||(t.EDragTarget={})),t.editStepWidth=320,t.footerHeight=40,t.headerHeight=61,t.sidebarWidth=240},,function(e,t,n){"use strict";var i=n(76).default,a=n(77).default,r=n(32).cTool,o=r.EVideoToolName,c=r.EPointCloudName,l=function(){function e(){i(this,e)}return a(e,null,[{key:"isVideoTool",value:function(e){return!!e&&Object.values(o).includes(e)}},{key:"isPointCloudTool",value:function(e){return!!e&&Object.values(c).includes(e)}}]),e}();e.exports=l},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12.004' height='11.999' viewBox='0 0 12.004 11.999'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='icon_clearSmall_a' class='cls-1' d='M17526.469-1204.464l-.678-.678%2c1.752-1.751a.489.489%2c0%2c0%2c0-.006-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-1.039-1.043%2c1.752-1.751a.484.484%2c0%2c0%2c0%2c0-.691.489.489%2c0%2c0%2c0-.7%2c0l-1.752%2c1.751-1.037-1.038%2c1.75-1.756a.484.484%2c0%2c0%2c0%2c0-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-.682-.678a1%2c1%2c0%2c0%2c1%2c0-1.417l3.1-3.1a.972.972%2c0%2c0%2c1%2c0-1.384.981.981%2c0%2c0%2c1%2c1.387%2c0l2.422%2c2.422%2c1.736-1.732a1.47%2c1.47%2c0%2c0%2c1%2c2.076%2c0%2c1.476%2c1.476%2c0%2c0%2c1%2c0%2c2.081l-1.73%2c1.731%2c2.426%2c2.427a.98.98%2c0%2c0%2c1%2c0%2c1.386.985.985%2c0%2c0%2c1-1.391%2c0l-3.1%2c3.1a.989.989%2c0%2c0%2c1-.707.294A.987.987%2c0%2c0%2c1%2c17526.469-1204.464Z' transform='translate(-17520.656 1216.17)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12.004' height='11.999' viewBox='0 0 12.004 11.999'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23999%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='icon_clearSmall' class='cls-1' d='M17526.469-1204.464l-.678-.678%2c1.752-1.751a.489.489%2c0%2c0%2c0-.006-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-1.039-1.043%2c1.752-1.751a.484.484%2c0%2c0%2c0%2c0-.691.489.489%2c0%2c0%2c0-.7%2c0l-1.752%2c1.751-1.037-1.038%2c1.75-1.756a.484.484%2c0%2c0%2c0%2c0-.691.482.482%2c0%2c0%2c0-.689%2c0l-1.752%2c1.751-.682-.678a1%2c1%2c0%2c0%2c1%2c0-1.417l3.1-3.1a.972.972%2c0%2c0%2c1%2c0-1.384.981.981%2c0%2c0%2c1%2c1.387%2c0l2.422%2c2.422%2c1.736-1.732a1.47%2c1.47%2c0%2c0%2c1%2c2.076%2c0%2c1.476%2c1.476%2c0%2c0%2c1%2c0%2c2.081l-1.73%2c1.731%2c2.426%2c2.427a.98.98%2c0%2c0%2c1%2c0%2c1.386.985.985%2c0%2c0%2c1-1.391%2c0l-3.1%2c3.1a.989.989%2c0%2c0%2c1-.707.294A.987.987%2c0%2c0%2c1%2c17526.469-1204.464Z' transform='translate(-17520.656 1216.17)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(84).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(205),r=n(424),o=n(30),c=n(0);var l,s=(l=c)&&"object"==typeof l&&"default"in l?l:{default:l},u=[a.NULL_COLOR].concat(a.COLORS_ARRAY),d=s.default.forwardRef((function(e,t){var n=s.default.useRef(),c=e.list||[],l=i(u);!0===e.forbidDefault&&(l=l.slice(1));var d="sensebee-radio-group";return e.noHeightLimit&&(d="sensebee-radio-group-no-limit-height"),s.default.createElement("div",{className:d,style:e.style},s.default.createElement(o.Radio.Group,{name:"radiogroup",defaultValue:null==e?void 0:e.selectedAttribute,value:null==e?void 0:e.selectedAttribute,onChange:function(t){return e.attributeChanged(t.target.value)},ref:t},c.map((function(t,i){var c,u=null!=(c=null==e?void 0:e.num)?c:i;!0===e.forbidDefault&&"number"==typeof u&&u++,"number"==typeof u&&u<=9&&u>=0||(u="-");var d=i>8&&!e.forbidDefault?a.COLORS_ARRAY[(i-1)%a.COLORS_ARRAY.length]:l[i%l.length];return(null==t?void 0:t.color)&&(d=t.color),s.default.createElement(o.Radio,{value:t.value,ref:n,key:i},s.default.createElement("span",{className:"sensebee-radio-label",title:t.label},!(null==e?void 0:e.forbidColor)&&s.default.createElement(r.ColorTag,{color:d,style:{marginRight:"8px"}}),t.label),s.default.createElement("span",{className:"sensebee-radio-num"},u))}))))}));t.ATTRIBUTE_COLORS=u,t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BORDER_OPACITY_LEVEL={1:.2,3:.4,5:.6,7:.8,9:1},t.CHANGE_COLOR={1:{valid:"rgba(0, 0, 255, 0.5)",select:{stroke:"rgba(0, 15, 255, 1)",fill:"rgba(0,15,255, 1)"},hover:"rgba(0, 15, 255, 0.8)",line:"rgba(102, 111, 255, 1 )"},3:{valid:"rgba(0, 255, 255, 0.5)",select:{stroke:"rgba(0, 212, 255,  1)",fill:"rgba(0,212,255, 1)"},hover:"rgba(0, 212, 255, 0.8)",line:"rgba(102, 230, 255, 1)"},5:{valid:"rgba(0, 255, 0, 0.5)",select:{stroke:"rgba(149, 255, 1)",fill:"rgba(149,255,0, 1)"},hover:"rgba(149, 255, 0, 0.8)",line:"rgba(191, 255, 102, 1)"},7:{valid:"rgba(255, 255, 0, 0.5)",select:{stroke:"rgba(255, 230, 102, 1)",fill:"rgba(255,213,0, 1)"},hover:"rgba(255, 230, 102, 0.8)",line:"rgba(255, 230, 102, 1)"},9:{valid:"rgba(255, 0, 255, 0.5)",select:{stroke:"rgba(230, 102, 255, 1)",fill:"rgba(213,0,255, 1)"},hover:"rgba(230, 102, 255, 0.8)",line:"rgba(230, 102, 255, 1)"}},t.COLORS_ARRAY=["rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"],t.DEFAULT_COLOR={valid:{stroke:"rgba(102, 111, 255, 0.6)",fill:"rgba(102, 111, 255, 0.3)"},invalid:{stroke:"rgba(255, 153, 102,1)",fill:"rgba(255, 153, 102, 0.5)"},validSelected:{stroke:"rgba(0, 15, 255, 0.8)",fill:"rgba(0, 15, 255, 0.4)"},invalidSelected:{stroke:"rgba(255,153,102,0.8)",fill:"rgba(255,153,102,0.3)"},validHover:{stroke:"rgba(0, 15, 255, 1)",fill:"rgba(0, 15, 255, 0.5)"},invalidHover:{stroke:"rgba(255,153,102,1)",fill:"rgba(255,153,102,0.5)"}},t.FILL_OPACITY_LEVEL={1:0,3:.2,5:.4,7:.6,9:.8},t.NULL_COLOR="rgba(204, 204, 204, 1)"},function(e,t,n){"use strict";var i,a=n(31).default,r=n(85).default,o=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var c=n(30),l=n(0),s=n(449),u=n(450),d=n(78),h=n(451),f=n(473),g=n(249),v=n(484),b=n(253),p=n(492),m=n(493),y=n(494),x=n(503),C=n(137),w=n(28),k=n(32),I=n(43);var L,P=(L=l)&&"object"==typeof L&&"default"in L?L:{default:L},O=Object.defineProperty,S=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,E=function(e,t,n){return t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},D=k.cTool,M=D.EVideoToolName,N=D.EPointCloudName,R=(r(i={},d.EToolName.Rect,h.default),r(i,d.EToolName.Tag,b.default),r(i,d.EToolName.Point,f.default),r(i,d.EToolName.Polygon,g.default),r(i,d.EToolName.Line,v.default),r(i,d.EToolName.Text,p),r(i,M.VideoTagTool,m),r(i,N.PointCloud,y.default),r(i,N.PointCloud+"_POLYGON",y.pointCloudShortCutTable_POLYGON),r(i,d.EToolName.ScribbleTool,x),i),j=function(e){var t=e.icon;return"string"==typeof t?P.default.createElement("img",{width:16,height:16,src:t}):t||null},_=function(e){var t=e.title,n=e.style,i=e.shortCutList,r=l.useState(!1),o=a(r,2),d=o[0],h=o[1],f=w.useTranslation().t,g={width:320,display:"flex",justifyContent:"space-between",margin:16},v={display:"block",padding:"0 3px",minWidth:"20px",marginRight:"3px",border:"1px solid rgba(204,204,204,1)",verticalAlign:"middle",fontSize:"12px",textAlign:"center"},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"+";if(!e)return null;var i=e.map((function(i,a){var r,o,c={display:"flex",alignItems:"center"};return t?P.default.createElement("span",{key:a,style:c},P.default.createElement("span",{style:v,dangerouslySetInnerHTML:{__html:i}})):a<e.length-1?"number"==typeof i?P.default.createElement("span",{key:a,style:c},P.default.createElement("span",{style:v},i),P.default.createElement("span",{style:{marginRight:"3px"}},"~")):(null==(r=null==i?void 0:i.startsWith)?void 0:r.call(i,"data"))?P.default.createElement("span",{key:a,style:c},P.default.createElement("span",{className:"shortCutButton",style:{marginRight:"3px"}},P.default.createElement("img",{width:16,height:23,src:i})),P.default.createElement("span",{style:{marginRight:"3px"}},"+")):P.default.createElement("span",{key:a,style:c},P.default.createElement("span",{style:v},i),P.default.createElement("span",{style:{marginRight:"3px"}},n)):"number"==typeof i?P.default.createElement("span",{key:a,style:c},P.default.createElement("span",{style:v},i)):(null==(o=null==i?void 0:i.startsWith)?void 0:o.call(i,"data"))?P.default.createElement("span",{className:"shortCutButton",key:a,style:{marginRight:"3px"}},P.default.createElement("img",{width:16,height:23,src:i})):P.default.createElement("span",{style:v,key:a},i)}));return P.default.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"}},i)},p=P.default.createElement("div",{className:"".concat(C.footerCls,"__hotkey-content")},null==i?void 0:i.map((function(e,t){return function(e,t){return P.default.createElement("div",{style:g,key:t},P.default.createElement("span",{style:{display:"flex",alignItems:"center"}},P.default.createElement(j,{icon:e.icon}),P.default.createElement("span",{style:{marginLeft:e.icon?16:0}},f(e.name))),P.default.createElement("span",{style:{display:"flex",alignItems:"center"}},e.noticeInfo&&P.default.createElement("span",{style:{marginRight:"5px",color:"#CCCCCC"}},f(e.noticeInfo)),b(e.shortCut,e.shortCutUseHtml,e.linkSymbol)))}(e,t)}))),m=n||{width:100};return P.default.createElement(c.Popover,{placement:"topLeft",content:p,onMouseMove:function(){return h(!0)},onMouseLeave:function(){h(!1)},overlayClassName:"tool-hotkeys-popover",className:"tipsBar"},P.default.createElement("div",{className:"shortCutTitle",onMouseMove:function(){return h(!0)},onMouseLeave:function(){return h(!1)},style:m},null!=t?t:P.default.createElement("a",{className:"svg"},P.default.createElement("img",{src:d?u:s,width:15,height:13,style:{marginRight:"5px"}}),f("Hotkeys"))))};t.ToolHotKeyCom=_,t.default=function(e){var t=e.style,n=e.title,i=e.toolName,a=l.useContext(I.PointCloudContext).pointCloudPattern;if(!i||!R[i])return null;var r=i;r==="".concat(N.PointCloud)&&a===d.EToolName.Polygon&&(r+="_POLYGON");var c={style:t,title:n,shortCutList:R[r]};return P.default.createElement(_,function(e,t){for(var n in t||(t={}))T.call(t,n)&&E(e,n,t[n]);if(S){var i,a=o(S(t));try{for(a.s();!(i=a.n()).done;)n=i.value,A.call(t,n)&&E(e,n,t[n])}catch(r){a.e(r)}finally{a.f()}}return e}({},c))},t.shortCutTable=R},function(e,t,n){"use strict";var i=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(0),o=n(43),c=n(32),l=n(60),s=n(28);var u,d=(u=r)&&"object"==typeof u&&"default"in u?u:{default:u};t.BoxInfos=function(e){var t=e.checkMode,n=e.config,u=d.default.useContext(o.PointCloudContext),h=l.useSingleBox().selectedBox,f=r.useState([]),g=i(f,2),v=g[0],b=g[1],p=s.useTranslation(),m=p.t,y=p.i18n;return r.useEffect((function(){var e;if(h){var i=a.PointCloudUtils.transferBox2Kitti(h.info),r=i.length,o=i.width,l=i.height,s=i.rotation_y,d=[{label:m("Length"),value:r.toFixed(2)},{label:m("Width"),value:o.toFixed(2)},{label:m("Height"),value:l.toFixed(2)},{label:m("Rotation_y"),value:c.UnitUtils.rad2deg(s).toFixed(2)}];null==(e=u.mainViewInstance)||e.filterPointsByBox(h.info).then((function(e){e?(d.push({label:m("PointCount"),value:"".concat(e.num)}),!0===t&&h.info.subAttribute&&n&&a.PointCloudUtils.getSubAttributeName(h.info.subAttribute,n).forEach((function(e){return d.push(e)})),b(d)):b(d)}))}}),[h,y.language]),h?d.default.createElement("div",{style:{position:"absolute",color:"white",backgroundColor:"rgba(153, 153, 153, 0.3)",right:8,top:8,fontSize:12,padding:8,zIndex:20}},v.map((function(e){return d.default.createElement("div",{key:e.label},"".concat(e.label,": ").concat(e.value))}))):null},t.PointCloudValidity=function(){var e=d.default.useContext(o.PointCloudContext),t=s.useTranslation().t;return!1===e.valid?d.default.createElement("div",{style:{position:"absolute",backgroundColor:"rgb(242, 101, 73)",color:"white",opacity:.7,left:0,top:0,fontSize:30,padding:"8px 16px",zIndex:20,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},t("Invalid")):null},t.SizeInfoForView=function(e){var t=e.perspectiveView,n=d.default.useContext(o.PointCloudContext),i=n.pointCloudBoxList,r=n.selectedID,c=i.find((function(e){return e.id===r})),l=s.useTranslation().t;if(r&&c){var u=a.PointCloudUtils.transferBox2Kitti(c),h=u.length,f=u.width,g=u.height,v=t===a.EPerspectiveView.Back?[{label:l("Width"),value:f},{label:l("Height"),value:g}]:[{label:l("Length"),value:h},{label:l("Height"),value:g}];return d.default.createElement(d.default.Fragment,null,v.map((function(e,t){return d.default.createElement("span",{key:t,style:{marginRight:0===t?16:0,fontSize:12}},"".concat(e.label,": ").concat(e.value.toFixed(2)))})))}return null}},,,,,,,,,function(e,t,n){"use strict";var i=n(31).default,a=n(39).default,r=n(0),o=n(32),c=n(30),l=n(380);var s,u=(s=r)&&"object"==typeof s&&"default"in s?s:{default:s},d=Object.defineProperty,h=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=function(e,t,n){return t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},b=function(e,t){for(var n in t||(t={}))f.call(t,n)&&v(e,n,t[n]);if(h){var i,r=a(h(t));try{for(r.s();!(i=r.n()).done;){n=i.value;g.call(t,n)&&v(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e},p={width:500,height:100},m=u.default.forwardRef((function(e,t){var n,a,s=e.src,d=e.annotations,h=void 0===d?[]:d,f=e.style,g=void 0===f?{stroke:"blue",thickness:3}:f,v=e.zoomChange,m=e.backgroundStyle,y=void 0===m?{}:m,x=e.onChange,C=e.showLoading,w=void 0!==C&&C,k=e.globalStyle,I=e.afterImgOnLoad,L=function(e){if(!e)return p;if(e.width&&e.height)return e;var t=b({},e);return t.width||(t.width=p.width),t.height||(t.height=p.height),t}(e.size),P=r.useState(!1),O=i(P,2),S=O[0],T=O[1],A=r.useRef(null),E=r.useRef(),D=l(I);r.useImperativeHandle(t,(function(){var e=E.current;return e?{zoomIn:function(){return e.zoomChanged(!0)},zoomOut:function(){return e.zoomChanged(!1)},initImgPos:function(){return e.initImgPos()},toolInstance:e}:{}}),[E.current]),r.useEffect((function(){return A.current&&(E.current=new o.ViewOperation({container:A.current,size:L,style:g,annotations:h,config:"{}"}),E.current.init()),function(){var e;null==(e=E.current)||e.destroy()}}),[]),r.useEffect((function(){var e;E.current&&(T(!0),null==(e=E.current)||e.setLoading(!0),o.ImgUtils.load(s).then((function(e){var t,n;null==(t=E.current)||t.setLoading(!1),T(!1),null==(n=E.current)||n.setImgNode(e),D.current&&D.current(e)})).catch((function(){var e;null==(e=E.current)||e.setLoading(!1),T(!1)})))}),[s]),r.useEffect((function(){E.current&&E.current.updateData(h)}),[h]),r.useEffect((function(){var e=E.current;(null==e?void 0:e.setSize)&&(e.setSize(L),e.initPosition())}),[null==(n=e.size)?void 0:n.width,null==(a=e.size)?void 0:a.height]),r.useEffect((function(){var e,t;return E.current&&(null==(e=E.current)||e.on("onChange",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==x||x.apply(null,t)})),null==(t=E.current)||t.on("renderZoom",(function(e){v&&v(e)}))),function(){var e,t;null==(e=E.current)||e.unbindAll("onChange"),null==(t=E.current)||t.unbindAll("renderZoom")}}),[v,x]);var M=u.default.createElement("div",{ref:A,style:b(b({position:"relative"},L),y)});return u.default.createElement(c.Spin,{spinning:w||S,delay:300,style:k},M)}));e.exports=m},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(199),r=n(32),o=n(0),c=n(34),l=n(55),s=n(30),u=n(29);var d,h=(d=o)&&"object"==typeof d&&"default"in d?d:{default:d},f=r.cKeyCode.default,g=h.default.createContext({width:window.innerWidth,height:window.innerHeight}),v=function(e){var t=e.children,n=e.dispatch,a=e.annotation,c=a.skipBeforePageTurning,u=a.checkMode,d=o.useState(window.innerWidth),v=i(d,1)[0],b=o.useState(window.innerHeight),p=i(b,1)[0],m=function(t){var i;if(r.toolUtils.hotkeyFilter(t)&&!u){if(!t.shiftKey&&!t.ctrlKey){if(t.keyCode===f.A){if(c)return void c((function(){return n(l.PageBackward())}));n(l.PageBackward())}if(t.keyCode===f.D){if(c)return void c((function(){return n(l.PageForward())}));n(l.PageForward())}t.keyCode===f.R&&n(l.UpdateRotate()),t.keyCode===f.C&&!0===t.altKey&&n(l.CopyBackWordResult())}if(!0===t.shiftKey&&!0===t.ctrlKey&&!0===t.altKey&&t.keyCode===f.C){s.message.success("DEVELOPMENT TESTING - Switch Last Two Canvas");var a=null==(i=e.annotation)?void 0:i.annotationEngine.switchLastTwoCanvas();if(!a)return;n(l.UpdateToolInstance(a))}}};o.useEffect((function(){return window.addEventListener("keydown",m),function(){window.removeEventListener("keydown",m)}}),[e.annotation.annotationEngine,e.annotation.skipBeforePageTurning,u]);var y=o.useMemo((function(){return{width:v,height:p}}),[v,p]);return h.default.createElement(g.Provider,{value:y},t)},b=c.connect((function(e){return{annotation:e.annotation}}),null,null,{context:u.LabelBeeContext})(v);t.ViewportProvider=b,t.ViewportProviderComponent=v,t.getFormatSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.width,r=e.height,o=a.headerHeight+a.footerHeight,c=n?40+o+40:o,l=t?a.editStepWidth+a.sidebarWidth:a.sidebarWidth;return{width:i-l,height:r-c}},t.viewportContext=g},,function(e,t,n){"use strict";var i=n(76).default,a=n(77).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),o=function(){function e(){i(this,e)}return a(e,null,[{key:"jsonParser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return"string"==typeof e?JSON.parse(e):r.isObject(e)?e:t}catch(n){return t}}}]),e}();o.getStepConfig=function(e,t){return e.find((function(e){return e.step===t}))},t.ConfigUtils=o},function(e,t,n){"use strict";var i=n(59),a=n(30),r=n(0),o=n(28);var c,l=(c=r)&&"object"==typeof c&&"default"in c?c:{default:c};e.exports=function(e){var t=e.width,n=e.height,r=e.reloadImage,c=e.hideSetInvalidTips,s=e.ignoreOffsetY,u=e.backgroundColor,d=e.fileType,h=void 0===d?"image":d,f=o.useTranslation().t,g=s?0:40,v=e.layerStyle||{position:"absolute",left:0,top:g,cursor:"initial",zIndex:20,fontSize:12};t&&n?Object.assign(v,{width:t,height:n}):Object.assign(v,{bottom:0,right:0}),u&&Object.assign(v,{backgroundColor:u});return l.default.createElement("div",{style:v},l.default.createElement("div",{style:{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%, -50%)"}},l.default.createElement("div",{style:{textAlign:"center",marginBottom:10}},l.default.createElement(a.Button,{type:"primary",shape:"circle",icon:l.default.createElement(i.ReloadOutlined,null),onClick:r})),l.default.createElement("div",null,"".concat(f("".concat(h,"ErrorAndReload"))).concat(c?"":f("orMaskAsInvalid")))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(68);t.InitToolStyleConfig=function(){return{type:i.TOOL_STYLE_ACTIONS.INIT_TOOL_STYLE_CONFIG,payload:void 0}},t.UpdateToolStyleConfig=function(e){return{type:i.TOOL_STYLE_ACTIONS.UPDATE_TOOL_STYLE_CONFIG,payload:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(48),a=n(78),r=n(52),o=n(30),c=n(0),l=n(28),s=n(403),u=n(405),d=n(406),h=n(417),f=n(423),g=n(425),v=n(427),b=n(428),p=n(438),m=n(32),y=n(443),x=n(244),C=n(29);var w,k=(w=c)&&"object"==typeof w&&"default"in w?w:{default:w},I=m.cTool,L=I.EVideoToolName,P=I.EPointCloudName,O=o.Collapse.Panel,S="".concat(i.prefix,"-sidebar");t.default=function(e){var t=e.sider,n=C.useSelector((function(e){return r.getCurrentStepInfo(e.annotation.step,e.annotation.stepList)})),i=null==n?void 0:n.tool,c=l.useTranslation().t;if(!i)return null;var m=k.default.createElement(x.ToolIcons,{toolName:i,onChange:function(){}}),w=k.default.createElement(f,null),I=k.default.createElement(s,null),T=k.default.createElement(o.Collapse,{defaultActiveKey:["1","imgAttribute"],bordered:!1,expandIconPosition:"right",className:"".concat(S,"__content"),expandIcon:g.expandIconFuc},function(e){var t=k.default.createElement(p,null);return k.default.createElement(O,{header:c("Style"),className:"panel",key:e},t)}("1")),A=k.default.createElement(o.Collapse,{defaultActiveKey:["1","imgAttribute"],bordered:!1,expandIconPosition:"right",className:"".concat(S,"__content"),expandIcon:g.expandIconFuc},k.default.createElement(O,{header:k.default.createElement("div",null,c("Adjust"),k.default.createElement(u,null)),className:"panel",key:"imgAttribute"},k.default.createElement(h,null))),E=k.default.createElement(d.default,null),D=k.default.createElement(g.default,null),M=k.default.createElement(v.default,null),N=k.default.createElement(y,{onChange:function(e,t){}}),R=k.default.createElement("div",{className:"".concat(S,"__horizontal")}),j=k.default.createElement(b,null),_=k.default.createElement(d.PointCloudOperation,null);return t?"function"==typeof t?k.default.createElement("div",{className:"".concat(S)},t({toolIcon:m,attributeList:w,annotationText:I,toolStyle:T,imageAttributeInfo:A,operation:E,tagToolSideBar:D,textToolSideBar:M,horizontal:R,pointCloudToolSidebar:j,pointCloudOperation:_,scribbleSidebar:N})):t:[a.EToolName.Rect,a.EToolName.Point,a.EToolName.Line,a.EToolName.Rect,a.EToolName.Polygon].includes(i)?k.default.createElement("div",{className:"".concat(S)},m,R,w,I,R,k.default.createElement("div",{className:"".concat(S,"__content")},T,A),E):i===a.EToolName.Tag?k.default.createElement("div",{className:"".concat(S)},k.default.createElement(g.default,null)):i===L.VideoTagTool?k.default.createElement("div",{className:"".concat(S)},k.default.createElement("div",{className:"".concat(S,"__content")},k.default.createElement(g.default,null)),E):i===a.EToolName.Text?k.default.createElement("div",{className:"".concat(S)},k.default.createElement(v.default,null)):i===P.PointCloud?k.default.createElement("div",{className:"".concat(S)},k.default.createElement("div",{className:"".concat(S,"__content")},k.default.createElement(b,null)),k.default.createElement(d.PointCloudOperation,null)):i===a.EToolName.ScribbleTool?k.default.createElement("div",{className:"".concat(S)},k.default.createElement("div",{className:"".concat(S,"__content")},N,w),E):null},t.sidebarCls=S},function(e,t,n){"use strict";var i=n(76).default,a=n(77).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(78),o=n(22),c="^[0-9]+$",l="^[A-Za-z]+$",s=function(){function e(){i(this,e)}return a(e,null,[{key:"checkString",value:function(e,t){var n="";switch(e){case r.ETextType.Order:case r.ETextType.NumberOnly:n=c;break;case r.ETextType.EnglishOnly:n=l;break;case r.ETextType.CustomFormat:n=t}return n}},{key:"getErrorNotice",value:function(e){switch(e){case r.ETextType.Order:case r.ETextType.NumberOnly:return o.i18n.t("TextCheckNumberOnly");case r.ETextType.EnglishOnly:return o.i18n.t("TextCheckEnglishOnly");case r.ETextType.CustomFormat:return o.i18n.t("TextCheckCustomFormat");default:return""}}}]),e}();t.REGEXP_ENGLISH=l,t.REGEXP_NUMBER=c,t.TextUtils=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(68);function a(e){return{type:i.IMAGE_ATTRIBUTE_ACTIONS.UPDATE_IMG_ATTRIBUTE,payload:e}}function r(){return{type:i.IMAGE_ATTRIBUTE_ACTIONS.INIT_IMG_ATTRIBUTE,payload:{}}}var o={UpdateImgAttribute:a,InitImgAttribute:r};t.InitImgAttribute=r,t.UpdateImgAttribute=a,t.default=o},function(e,t,n){"use strict";var i=n(85).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(78),r=n(0),o=n(241),c=n(429),l=n(430),s=n(431),u=n(432),d=n(433),h=n(434),f=n(435),g=n(436),v=n(32),b=n(5),p=n(28);function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var y=m(r),x=m(b),C=v.cTool,w=C.EPointCloudName,k=C.TOOL_NAME,I=C.TOOL_NAME_EN,L=[{toolName:a.EToolName.Rect,commonSvg:f,selectedSvg:g},{toolName:a.EToolName.Polygon,commonSvg:h,selectedSvg:d},{toolName:a.EToolName.Line,commonSvg:c,selectedSvg:l},{toolName:a.EToolName.Point,commonSvg:s,selectedSvg:u}];t.ToolIcons=function(e){var t=e.toolName,n=e.selectedToolName,r=e.onChange,c=p.useTranslation().i18n,l=null==L?void 0:L.filter((function(e){return t===w.PointCloud?[a.EToolName.Polygon,a.EToolName.Rect].includes(null==e?void 0:e.toolName):(null==e?void 0:e.toolName)===t})),s=l.length>1;return y.default.createElement("div",{className:"".concat(o.sidebarCls,"__level")},l.map((function(e){var t=s&&n===e.toolName;return y.default.createElement("span",{className:"".concat(o.sidebarCls,"__toolOption"),key:e.toolName,onClick:function(){return null==r?void 0:r(e.toolName)}},y.default.createElement("img",{className:"".concat(o.sidebarCls,"__singleTool"),src:t?null==e?void 0:e.selectedSvg:null==e?void 0:e.commonSvg}),y.default.createElement("span",{className:x.default(i({},"".concat(o.sidebarCls,"__toolOption__selected"),t))},function(e){return"en"===e?I:k}(c.language)[e.toolName]))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(43),r=n(32),o=n(119),c=r.cTool,l=c.EToolName,s=c.EPolygonPattern;t.useStatus=function(){var e=i.useContext(a.PointCloudContext),t=e.topViewInstance,n=e.mainViewInstance,r=e.pointCloudBoxList,c=e.setPointCloudResult,u=e.setPolygonList,d=e.pointCloudPattern,h=e.setPointCloudPattern,f=e.syncAllViewPointCloudColor,g=o.useHistory().pushHistoryWithList;return{clearAllResult:function(){r.forEach((function(e){null==n||n.removeObjectByName(e.id)})),null==n||n.render(),c([]),u([]),null==t||t.pointCloud2dOperation.clearActiveStatus(),null==t||t.pointCloud2dOperation.clearResult(),f([]),g({pointCloudBoxList:[],polygonList:[]})},updatePointCloudPattern:function(e){var n=null==t?void 0:t.pointCloud2dOperation;if(n)switch(n.clearActiveStatus(),e){case l.Rect:n.setPattern(s.Rect),h(l.Rect);break;case l.Polygon:n.setPattern(s.Normal),h(l.Polygon)}},pointCloudPattern:d}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(43);t.useAttribute=function(){var e=i.useContext(a.PointCloudContext),t=e.topViewInstance,n=e.sideViewInstance,r=e.backViewInstance,o=e.mainViewInstance,c=e.defaultAttribute,l=e.setDefaultAttribute;return i.useEffect((function(){if(null==t?void 0:t.pointCloud2dOperation){var e=function(){l(null==t?void 0:t.pointCloud2dOperation.defaultAttribute)};return null==t||t.pointCloud2dOperation.on("changeAttributeSidebar",e),function(){null==t||t.pointCloud2dOperation.unbind("changeAttributeSidebar",e)}}}),[null==t?void 0:t.pointCloud2dOperation]),{syncThreeViewsAttribute:function(e){[null==t?void 0:t.pointCloud2dOperation,null==n?void 0:n.pointCloud2dOperation,null==r?void 0:r.pointCloud2dOperation].forEach((function(t){null==t||t.setDefaultAttribute(e)}))},updateDefaultAttribute:function(e){null==t||t.pointCloud2dOperation.setDefaultAttribute(e)},reRenderPointCloud3DBox:function(e){null==o||o.generateBox(e)},defaultAttribute:c}}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_277' data-name='%e8%b7%af%e5%be%84 277' class='cls-1' d='M6.857-116.857h-3.3v1.4L0-118l3.556-2.54v1.4h3.3v-3.3H9.143v3.3h3.3v-1.4L16-118l-3.556%2c2.54v-1.4h-3.3v3.3h1.4L8-110l-2.54-3.556h1.4ZM8-126l2.54%2c3.556H5.46Z' transform='translate(0 126)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_276' data-name='%e8%b7%af%e5%be%84 276' class='cls-2' d='M-37-137.6h25.4V-163H-37Z' transform='translate(37 163)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_move_kj' transform='translate(1 128)'%3e %3cg id='%e7%bb%84_475' data-name='%e7%bb%84 475' class='cls-3' transform='translate(-1 -128)'%3e %3cg id='%e7%bb%84_474' data-name='%e7%bb%84 474' class='cls-4' transform='translate(-4.698 -4.698)'%3e %3cpath id='%e8%b7%af%e5%be%84_275' data-name='%e8%b7%af%e5%be%84 275' class='cls-5' d='M-5-131H12.27v17.27H-5Z' transform='translate(9.063 135.064)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M2.1-1.769a.381.381%2c0%2c0%2c1-.382-.382h0V-7.087A.381.381%2c0%2c0%2c1%2c2.1-7.469H8.4a.381.381%2c0%2c0%2c1%2c.382.382h0V-2.15a.381.381%2c0%2c0%2c1-.382.382H2.1Zm.525-.906H7.874V-6.562H2.627Z' transform='translate(-1.721 7.469)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M17.723-5.652A4.782%2c4.782%2c0%2c0%2c0%2c19.561-9.4l.763%2c0a.093.093%2c0%2c0%2c0%2c.073-.15l-1.2-1.526a.094.094%2c0%2c0%2c0-.147%2c0L17.841-9.555a.093.093%2c0%2c0%2c0%2c.073.15h.762a4.019%2c4.019%2c0%2c0%2c1-.03.463%2c3.888%2c3.888%2c0%2c0%2c1-.461%2c1.419A3.9%2c3.9%2c0%2c0%2c1%2c17.179-6.35a3.884%2c3.884%2c0%2c0%2c1-1.381.693%2c3.887%2c3.887%2c0%2c0%2c1-1.488.106c-.064-.008-.129-.017-.192-.029v.893A4.752%2c4.752%2c0%2c0%2c0%2c17.723-5.652Z' transform='translate(-14.118 11.118)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='c'%3e%3cpath d='M19.678-21a.381.381%2c0%2c0%2c1%2c.382.382h0v4.937a.381.381%2c0%2c0%2c1-.382.382h-6.3A.381.381%2c0%2c0%2c1%2c13-15.682h0v-4.937A.381.381%2c0%2c0%2c1%2c13.382-21h6.3Zm-.525.906H13.906v3.887h5.247Z' transform='translate(-13 21)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='d'%3e%3cpath d='M3.673-17.359a4.782%2c4.782%2c0%2c0%2c0-1.839%2c3.751l-.763%2c0a.093.093%2c0%2c0%2c0-.073.15l1.2%2c1.526a.094.094%2c0%2c0%2c0%2c.147%2c0l1.206-1.528a.093.093%2c0%2c0%2c0-.073-.15H2.72a4.017%2c4.017%2c0%2c0%2c1%2c.03-.463%2c3.888%2c3.888%2c0%2c0%2c1%2c.461-1.419%2c3.9%2c3.9%2c0%2c0%2c1%2c1.005-1.173A3.884%2c3.884%2c0%2c0%2c1%2c5.6-17.354a3.887%2c3.887%2c0%2c0%2c1%2c1.488-.106c.064.008.129.017.192.029v-.893A4.752%2c4.752%2c0%2c0%2c0%2c3.673-17.359Z' transform='translate(-0.978 18.372)' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(-957 -603)'%3e%3crect width='16' height='16' transform='translate(957 603)' fill='none'/%3e%3cg transform='translate(956.022 624)'%3e%3cg transform='translate(1.545 -10.994)' clip-path='url(%23a)'%3e%3cpath d='M11.412.863H-3.279V-12.469H11.412Z' transform='translate(-0.537 8.653)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(10.679 -13.779)' clip-path='url(%23b)'%3e%3cpath d='M23.049-16.118V-2.007H9.118V-16.118Z' transform='translate(-12.934 12.302)' fill='%23666'/%3e%3c/g%3e%3crect width='6' height='5' transform='translate(10.652 -20.897)' fill='%23ccc'/%3e%3cg transform='translate(9.826 -21)' clip-path='url(%23c)'%3e%3cpath d='M8-26H22.691v13.331H8Z' transform='translate(-11.816 22.184)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(0.978 -18.995)' clip-path='url(%23d)'%3e%3cpath d='M-4.022-9.261V-23.372H9.909V-9.261Z' transform='translate(0.206 19.556)' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(250),a=n(477),r=n(478),o=n(479),c=n(480),l=n(102),s=n(103),u=n(251),d=n(481),h=n(252),f=n(482),g=n(483),v=n(79),b={name:"AnnotatePolygon",icon:i,shortCut:[l]},p={name:"AnnotateInvalidPolygon",icon:a,shortCut:["Ctrl",l]},m={name:"SelectPolygon",icon:r,shortCut:[s],noticeInfo:"RightClick"},y={name:"TogglePolygonEffectiveness",icon:o,shortCut:["F"]},x={name:"DeletePolygon",icon:c,shortCut:["Del"]},C={name:"ContinueToLabel",icon:u,shortCut:["Space"]},w={name:"InsertPoint",icon:d,noticeInfo:"SelectAndDoubleClick",shortCut:[l]},k={name:"DeletePoint",icon:c,noticeInfo:"SelectAndDoubleClick",shortCut:[s]},I={name:"StopAdsorption",icon:h,noticeInfo:"Press",shortCut:["Alt"]},L={name:"CropOverlapArea",icon:f,noticeInfo:"",shortCut:["ALT","X"]},P={name:"CombineOverlapArea",icon:g,noticeInfo:"",shortCut:["Alt","Z"]},O=[b,p,m,y,x,C,w,k,I,v.revoke,v.restore,v.rotate,v.scale,v.backward,v.forward,v.setValid,v.dargWithRightClick,v.dargWithLeftClick,v.tabChangeSelected,v.tabReverseChangeSelected,P,L];t.changePolygonAttribute=y,t.combinePolygon=P,t.default=O,t.deletePolygon=x,t.deletePolygonPoint=k,t.insertPolygonPoint=w,t.invalidPolygon=p,t.keepLine=C,t.polygon=b,t.selectedPolygon=m,t.splitPolygon=L,t.suspendAbsorption=I},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygon_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2%2c .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-2 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-4' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-4' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineCont_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-3 %7b fill: none%3b %7d .cls-2%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_unGrip_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_14' data-name='%e5%87%8f%e5%8e%bb 14' class='cls-2' d='M12806.69-12915.114c-.083%2c0-.175%2c0-.282-.008a5.869%2c5.869%2c0%2c0%2c1-3.878-1.69%2c5.509%2c5.509%2c0%2c0%2c1-1.6-4.091%2c6.209%2c6.209%2c0%2c0%2c1%2c2.044-4.437l1.039-.934%2c2.459%2c2.731-1.168%2c1.052a2.434%2c2.434%2c0%2c0%2c0-.522%2c2.823%2c2.39%2c2.39%2c0%2c0%2c0%2c1.854.923%2c2%2c2%2c0%2c0%2c0%2c1.346-.508l1.3-1.171%2c2.46%2c2.732-1.169%2c1.054A5.813%2c5.813%2c0%2c0%2c1%2c12806.69-12915.114Zm6.1-3.518h0l-2.477-2.717%2c1.962-1.769a.619.619%2c0%2c0%2c1%2c.412-.164.6.6%2c0%2c0%2c1%2c.454.209l1.639%2c1.824a.6.6%2c0%2c0%2c1-.046.863l-1.942%2c1.753Zm-5.33-5.8h0l-2.523-2.675%2c1.938-1.745a.614.614%2c0%2c0%2c1%2c.412-.163.609.609%2c0%2c0%2c1%2c.455.209l1.769%2c1.7a.6.6%2c0%2c0%2c1-.046.866l-2%2c1.8Z' transform='translate(-12800 12929.97)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_271' data-name='%e7%9f%a9%e5%bd%a2 271' class='cls-2' width='1.166' height='18.662' transform='matrix(0.719%2c -0.695%2c 0.695%2c 0.719%2c 0.745%2c 2.047)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(491),a=n(79),r={name:"Tagging",icon:i,shortCut:[1,9]},o=[r,a.rotate,a.scale,a.backward,a.forward,a.dargWithRightClick,a.dargWithLeftClick];t.default=o,t.tagInSingleImg=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(506),r=n(507),o=n(59),c=n(34),l=n(508),s=n(137),u=n(29);var d,h=(d=i)&&"object"==typeof d&&"default"in d?d:{default:d},f=function(e){var t=e.mode,n=e.initialPosition,i=e.zoomOut,c=e.zoomIn,u=e.zoom,d="light"===t?a:r;return h.default.createElement("div",null,h.default.createElement("span",{className:"".concat(s.footerCls,"__zoomController")},h.default.createElement(o.MinusOutlined,{className:"".concat(s.footerCls,"__highlight"),onClick:function(){null==i||i()}}),h.default.createElement("span",{className:"".concat(s.footerCls,"__zoomText"),onClick:function(){null==n||n()}},h.default.createElement("img",{src:d,className:"adaptIcon"}),h.default.createElement(l,{zoom:u})),h.default.createElement(o.PlusOutlined,{className:"".concat(s.footerCls,"__highlight"),onClick:function(){null==c||c()}})))},g=c.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:u.LabelBeeContext})((function(e){var t=e.toolInstance;return h.default.createElement(f,{initialPosition:function(){t.initImgPos()},zoomIn:function(){t.zoomChanged(!0)},zoomOut:function(){t.zoomChanged(!1)}})}));t.ZoomController=f,t.default=g},function(e,t,n){"use strict";var i=n(31).default,a=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(56),o=n(59),c=n(30),l=n(0);var s,u=(s=l)&&"object"==typeof s&&"default"in s?s:{default:s},d=Object.defineProperty,h=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=function(e,t,n){return t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},b=function(e,t){for(var n in t||(t={}))f.call(t,n)&&v(e,n,t[n]);if(h){var i,r=a(h(t));try{for(r.s();!(i=r.n()).done;){n=i.value;g.call(t,n)&&v(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e},p=function(e){var t=e.jumpSkip,n=e.imgIndex,a=l.useState(n),o=i(a,2),s=o[0],d=o[1],h=l.useRef(null);l.useEffect((function(){d(n+1)}),[n]);return u.default.createElement(c.Input,{className:r.getClassName("page-input"),ref:h,onChange:function(e){/^\d*$/.test(e.target.value)&&d(e.target.value)},value:s,onKeyDown:function(e){13===e.keyCode&&t(e.target.value)}})},m=function(e){return e.isVideo?u.default.createElement(o.StepForwardFilled,b({},e.iconProps)):u.default.createElement(o.RightOutlined,b({},e.iconProps))},y=function(e){return e.isVideo?u.default.createElement(o.StepBackwardFilled,b({},e.iconProps)):u.default.createElement(o.LeftOutlined,b({},e.iconProps))};t.PageInput=p,t.Pagination=function(e){var t=e.pageBackward,n=e.imgIndex,i=e.pageJump,a=e.totalPage,r=e.pageForward,o=e.isVideo,c=e.footerCls;return u.default.createElement("div",{className:"".concat(c,"__pagination")},u.default.createElement(y,{isVideo:o,iconProps:{className:"".concat(c,"__highlight"),onClick:t}}),u.default.createElement(p,{imgIndex:n,jumpSkip:i}),"/",u.default.createElement("span",{className:"".concat(c,"__pageAll")},a),u.default.createElement(m,{isVideo:o,iconProps:{className:"".concat(c,"__highlight"),onClick:r}}))}},function(e,t,n){"use strict";var i=n(76).default,a=n(77).default,r=n(257).default,o=n(258).default;Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),l=n(32),s=n(52),u=n(46),d=n(259),h=n(535),f=n(50),g=n(139);function v(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var b=v(c),p=v(f),m=function(e){r(n,e);var t=o(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).fns={},a.labelSelectedList=[],a.clearResult=function(){var e=arguments.length>1?arguments[1]:void 0,t=e?a.state.tagResult.map((function(t){return(null==t?void 0:t.result[e])&&delete t.result[e],t})):[];a.setState({tagResult:t},(function(){return a.emitEvent("render")}))},a.exportData=function(){var e,t,n,i,r,o,c,l=null!=(t=null==(e=a.videoRef)?void 0:e.duration)?t:0,s=null==(n=a.videoRef)?void 0:n.getVideoPlaybackQuality(),u=null==s?void 0:s.totalVideoFrames,d=null!=(r=null==(i=a.videoRef)?void 0:i.videoWidth)?r:0,h=null!=(c=null==(o=a.videoRef)?void 0:o.videoHeight)?c:0;return[a.state.tagResult,{valid:a.state.valid,duration:l,frames:u,videoWidth:d,videoHeight:h}]},a.emitEvent=function(e){a.fns[e]&&a.fns[e]()},a.combineResult=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.isMulti,r=e.value,o=r.key,c=r.value;if(a){var l=null!=(n=null==(t=i[o])?void 0:t.split(";"))?n:[];l.includes(c)?l=l.filter((function(e){return e!==c})):l.push(c);var s=new Set(l);return i[o]=Array.from(s).join(";"),p.default.pickBy(i,(function(e){return e}))}return i[o]=i[o]===c?void 0:c,p.default.pickBy(i,(function(e){return e}))},a.setResult=function(e){a.setState({tagResult:e}),a.fns.render&&a.fns.render()},a.setLabel=function(e,t){a.setLabelBySelectedList(e,t)},a.keydown=function(e){var t=g.getKeyCodeNumber(e.keyCode);if(t){var n=t-1;if(1===a.config.inputList.length)return a.labelSelectedList=[0,n],a.setLabel(0,n),void setTimeout((function(){a.labelSelectedList=[],a.emitEvent("render")}),500);1===a.labelSelectedList.length?(a.labelSelectedList=[a.labelSelectedList[0],n],a.setLabel(a.labelSelectedList[0],n),setTimeout((function(){a.labelSelectedList=[],a.emitEvent("render")}),500)):(a.labelSelectedList=[n],a.emitEvent("expend"))}},a.setValid=function(e){a.setState({valid:e}),!1===e&&a.setState({tagResult:[]}),a.emitEvent("render")},a.setResultFromImgList=function(e){var t,n=e.imgList,i=e.imgIndex,r=e.step;if(n[i]){var o=u.jsonParser(n[i].result),c=o["step_".concat(r)];a.setState({tagResult:null!=(t=null==c?void 0:c.result)?t:[],valid:void 0===(null==o?void 0:o.valid)||o.valid})}},a.state={tagResult:[],labelSelectedList:[],valid:!0},a}return a(n,[{key:"config",get:function(){var e=s.getCurrentStepInfo(this.props.step,this.props.stepList);return u.jsonParser(null==e?void 0:e.config)}},{key:"history",get:function(){return{initRecord:function(){},pushHistory:function(){}}}},{key:"currentTagResult",get:function(){var e;return null!=(e=this.state.tagResult[0])?e:{}}},{key:"valid",get:function(){return this.state.valid}},{key:"singleOn",value:function(e,t){this.fns[e]=t}},{key:"on",value:function(e,t){this.singleOn(e,t)}},{key:"getTagResultByCode",value:function(e,t){var n,i,a;try{var r=null!=(i=null==(n=this.config)?void 0:n.inputList)?i:[],o=r.length>1,c=void 0!==t?t:e,l=o?r[void 0!==t?e:0]:r[0],s=(null!=(a=l.subSelected)?a:[])[c];if(l&&s)return{value:{key:l.value,value:s.value},isMulti:l.isMulti}}catch(r){return}}},{key:"setLabelBySelectedList",value:function(e,t){var n,i,a,r,o=this,c=this.getTagResultByCode(e,t);if(c){var s=this.combineResult(c,null!=(i=null==(n=this.state.tagResult[0])?void 0:n.result)?i:{}),u=[{sourceID:l.CommonToolUtils.getSourceID(),id:null!=(r=null==(a=this.currentTagResult)?void 0:a.id)?r:l.uuid(8,62),result:s}];this.setState({tagResult:u},(function(){return o.emitEvent("render")}))}}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keydown),this.props.onMounted(this),this.setResultFromImgList(this.props)}},{key:"componentWillUnmount",value:function(){document.addEventListener("keydown",this.keydown),this.props.onUnmounted()}},{key:"shouldComponentUpdate",value:function(e){return e.imgIndex!==this.props.imgIndex&&this.setResultFromImgList(e),!0}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.imgIndex,a=n.imgList,r=n.pageForward,o=n.pageJump,c=n.pageBackward,l=this.state,s=l.tagResult,u=l.valid;return b.default.createElement("div",{style:{height:"100%",width:"100%",position:"relative"}},b.default.createElement(d.VideoPlayer,{imgIndex:i,imgList:a,pageBackward:c,pageForward:r,pageJump:o,valid:u,setVideoRef:function(e){t.videoRef=e}}),b.default.createElement(h.VideoTagLayer,{result:s,inputList:null==(e=this.config)?void 0:e.inputList}))}}]),n}(b.default.Component);t.TagToolInstanceAdaptor=m},,,function(e,t,n){"use strict";var i=n(76).default,a=n(77).default,r=n(257).default,o=n(258).default;Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),l=n(531),s=n(56),u=n(32),d=n(139),h=n(533);var f,g=(f=c)&&"object"==typeof f&&"default"in f?f:{default:f},v=u.cKeyCode.default,b=g.default.createContext({isPlay:!1,playPause:function(){},updateNextPlaybackRate:function(){},playbackRate:1,currentTime:0,duration:0,buffered:0,setCurrentTime:function(){},imgList:[],imgIndex:-1,pageBackward:function(){},pageJump:function(e){},pageForward:function(){}}),p=[.5,1,1.5,2,4,6,8,16],m=function(e){r(n,e);var t=o(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).changePlaybackPate=function(e){a.videoElm&&(a.videoElm.playbackRate=e,a.setState({playbackRate:e}))},a.playPause=function(){var e,t,n;(null==(e=a.videoElm)?void 0:e.paused)?null==(t=a.videoElm)||t.play():null==(n=a.videoElm)||n.pause()},a.updateNextPlaybackRate=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=p.findIndex((function(e){return e===a.state.playbackRate})),n=e?Math.min(t+1,p.length-1):Math.max(t-1,0);a.changePlaybackPate(p[n])},a.fastForward=function(){a.videoElm&&a.setCurrentTime(a.videoElm.currentTime+.1)},a.rewind=function(){a.videoElm&&a.setCurrentTime(a.videoElm.currentTime-.1)},a.keydown=function(e){e.keyCode===v.Space&&(e.preventDefault(),a.playPause()),e.keyCode===v.Up&&(e.preventDefault(),a.updateNextPlaybackRate()),e.keyCode===v.Down&&(e.preventDefault(),a.updateNextPlaybackRate(!1)),e.keyCode===v.Left&&(e.preventDefault(),a.rewind()),e.keyCode===v.Right&&(e.preventDefault(),a.fastForward())},a.onPlay=function(){a.setState({isPlay:!0},a.onVideoStart)},a.onPause=function(){a.onVideoStopped()},a.onVideoStopped=function(){a.setState({isPlay:!1}),a.timeInterval&&(clearInterval(a.timeInterval),a.timeInterval=void 0),a.videoElm&&a.setCurrentTime(a.videoElm.currentTime)},a.onVideoStart=function(){a.timeInterval=window.setInterval((function(){var e,t,n;if(a.videoElm)try{if((null==(e=a.videoElm)?void 0:e.buffered.length)>0){var i=null==(t=a.videoElm)?void 0:t.buffered.end(0);a.setState({currentTime:d.decimalReserved(null==(n=a.videoElm)?void 0:n.currentTime,1),buffered:i})}}catch(i){console.error(i)}}),50)},a.resetVideoData=function(){a.setState({currentTime:0,buffered:0,error:!1,isPlay:!1}),a.videoElm&&(a.videoElm.playbackRate=a.state.playbackRate),a.onVideoStopped()},a.setDuration=function(){var e;if(a.videoElm){var t=d.decimalReserved(null==(e=a.videoElm)?void 0:e.duration,1);a.setState({duration:t})}},a.setCurrentTime=function(e){a.videoElm&&(a.videoElm.currentTime=e,a.setState({currentTime:e}))},a.reload=function(){var e;null==(e=a.videoElm)||e.load()},a.onError=function(){a.resetVideoData(),a.setState({error:!0})},a.state={playbackRate:1,currentTime:0,isPlay:!1,duration:0,buffered:0,error:!1},a.videoRef=g.default.createRef(),a}return a(n,[{key:"videoElm",get:function(){var e;return null==(e=this.videoRef)?void 0:e.current}},{key:"videoSrc",get:function(){var e,t,n=this.props,i=n.imgIndex,a=n.imgList;return i>-1&&null!=(t=null==(e=a[i])?void 0:e.url)?t:""}},{key:"componentDidMount",value:function(){var e,t;window.addEventListener("keydown",this.keydown),(null==(e=this.videoRef)?void 0:e.current)&&this.props.setVideoRef&&this.props.setVideoRef(null==(t=this.videoRef)?void 0:t.current)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keydown)}},{key:"render",value:function(){var e=this.state,t=e.isPlay,n=e.playbackRate,i=e.currentTime,a=e.duration,r=e.buffered,o=e.error,c=this.props,u=c.imgList,d=c.imgIndex,f=c.pageBackward,v=c.pageJump,p=c.pageForward,m=c.valid,y=this.playPause,x=this.updateNextPlaybackRate,C=this.onPause,w=this.onPlay,k=this.resetVideoData,I=this.setDuration,L=this.setCurrentTime,P=this.onError,O=this.videoRef,S=this.videoSrc;return g.default.createElement(b.Provider,{value:{videoRef:this.videoRef,isPlay:t,playPause:y,updateNextPlaybackRate:x,playbackRate:n,currentTime:i,duration:a,buffered:r,setCurrentTime:L,imgIndex:d,imgList:u,pageBackward:f,pageJump:v,pageForward:p}},g.default.createElement("div",{className:s.getClassName("video-wrapper")},g.default.createElement("div",{className:s.getClassName("video-container")},g.default.createElement("video",{ref:O,className:s.getClassName("video"),src:S,onPause:C,onPlay:w,onLoadedMetadata:k,onError:P,onDurationChange:I,width:"100%",height:"100%",onClick:y}),g.default.createElement(h,{fileType:"video",errorProps:{reloadImage:this.reload,backgroundColor:"#e2e2e2",ignoreOffsetY:!0,isError:o},invalidProps:{isValid:m}})),g.default.createElement(l,null)))}}]),n}(g.default.Component);t.VideoPlayer=m,t.VideoPlayerCtx=b,t.default=m},function(e,t,n){"use strict";var i=n(0),a=n(539),r=n(56),o=n(28);var c,l=(c=i)&&"object"==typeof c&&"default"in c?c:{default:c};e.exports=function(){var e=o.useTranslation().t;return l.default.createElement("div",{className:r.getClassName("point-cloud-container","empty-page")},l.default.createElement("img",{src:a}),l.default.createElement("span",{className:r.getClassName("point-cloud-container","empty-page","text")},e("NoData")))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(98),r=n(60),o=n(43),c=n(32),l=n(22),s=c.cAnnotation.ERotateDirection;t.useRotate=function(e){var t=e.currentData,n=i.useContext(o.PointCloudContext),c=r.useSingleBox(),u=c.selectedBox,d=c.updateSelectedBox;return{updateRotate:i.useCallback((function(e){var i=n.topViewInstance,r=n.mainViewInstance,o=n.syncAllViewPointCloudColor;if(i&&r){var c=i.pointCloud2dOperation,h=null==u?void 0:u.info;if(h&&(null==t?void 0:t.url)&&n.backViewInstance){var f=d({rotation:l.PointCloudUtils.restrictAngleRange(h.rotation+Number(Math.PI*e)/180)});c.rotatePolygon(e,s.Anticlockwise);var g=c.selectedPolygon;r.generateBox(h),o(f),a.synchronizeSideView(h,g,n.sideViewInstance,t.url),a.synchronizeBackView(h,g,n.backViewInstance,t.url),r.render()}}}),[n.selectedID,n.pointCloudBoxList,n.setPointCloudResult,n.topViewInstance,t])}}},,,,,,,,,,,,,,function(e){e.exports=JSON.parse('{"calName":"P2","timestamp":1,"P":[[721.5377,0,609.5593,44.85728],[0,721.5377,172.854,0.2163791],[0,0,1,0.002745884]],"R":[[0.9999239,0.00983776,-0.007445048],[-0.009869795,0.9999421,-0.004278459],[0.007402527,0.004351614,0.9999631]],"T":[[0.007533745,-0.9999714,-0.000616602,-0.004069766],[0.01480249,0.0007280733,-0.9998902,-0.07631618],[0.9998621,0.00752379,0.01480755,-0.2717806]]}')},function(e){e.exports=JSON.parse('{"calName":"P2","timestamp":2,"P":[[721.5377,0,609.5593,44.85728],[0,721.5377,172.854,0.2163791],[0,0,1,0.002745884]],"R":[[0.9999239,0.00983776,-0.007445048],[-0.009869795,0.9999421,-0.004278459],[0.007402527,0.004351614,0.9999631]],"T":[[0.007533745,-0.9999714,-0.000616602,-0.004069766],[0.01480249,0.0007280733,-0.9998902,-0.07631618],[0.9998621,0.00752379,0.01480755,-0.2717806]]}')},,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(0);e.exports=function(e){var t=i.useRef(e);return i.useEffect((function(){t.current=e}),[e]),t}},function(e,t,n){"use strict";var i=n(32),a=n(22),r=n(0);var o,c=(o=r)&&"object"==typeof o&&"default"in o?o:{default:o};function l(e){return{left:-e.width/2,right:e.width/2,top:e.height/2,bottom:-e.height/2,near:100,far:-100}}e.exports=function(e){var t=e.src,n=e.result,o=e.size,s=e.isOrthographicCamera,u=void 0!==s&&s,d=e.backgroundColor,h=void 0===d?"#ccc":d,f=r.useRef(),g=r.useRef(),v=r.useCallback((function(e){f.current=e}),[]);return r.useEffect((function(){var e={container:f.current,backgroundColor:h,isOrthographicCamera:u};u&&Object.assign(e,{orthographicParams:l(o)});var t=new i.PointCloud(e);return g.current=t,function(){var e;null==(e=g.current.renderer)||e.forceContextLoss()}}),[]),r.useEffect((function(){var e,t,n;g.current&&(null==(e=g.current)||e.init(),null==(t=g.current)||t.initOrthographicCamera(l(o)),null==(n=g.current)||n.render())}),[o]),r.useEffect((function(){var e;g.current&&t&&(null==(e=g.current)||e.loadPCDFile(t))}),[t]),r.useEffect((function(){return n&&a.PointCloudUtils.getBoxParamsFromResultList(n).forEach((function(e){var t;null==(t=g.current)||t.generateBox(e,e.id)})),function(){var e;a.PointCloudUtils.getBoxParamsFromResultList(n).forEach((function(e){var t;null==(t=g.current)||t.removeObjectByName(e.id)})),null==(e=g.current)||e.render()}}),[n]),c.default.createElement("div",{style:o,ref:v})}},,,,,,,,,function(e,t,n){"use strict";var i=n(31).default,a=n(39).default,r=n(391),o=n(22),c=n(0),l=n(34),s=n(61),u=n(29),d=n(68),h=n(55),f=n(96),g=n(30),v=n(572),b=n(113);function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=p(c),y=p(v),x=p(b),C=Object.defineProperty,w=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,L=function(e,t,n){return t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},P=l.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:u.LabelBeeContext})((function(e){var t=c.useState(0),n=i(t,2),l=(n[0],n[1]),u=e.imgList,v=e.step,b=void 0===v?1:v,p=e.stepList,C=e.onSubmit,P=e.onSave,O=e.onPageChange,S=e.onStepChange,T=e.initialIndex,A=void 0===T?0:T,E=e.toolInstance,D=e.setToolInstance,M=e.getFileData,N=e.pageSize,R=void 0===N?10:N,j=e.loadFileList,_=e.defaultLang,B=void 0===_?"cn":_,H=e.skipBeforePageTurning,V=e.beforeRotate,Z=e.checkMode,F=void 0!==Z&&Z;c.useEffect((function(){s.store.dispatch(h.InitTaskData({onSubmit:C,stepList:p,step:b,getFileData:M,pageSize:R,loadFileList:j,onSave:P,onPageChange:O,onStepChange:S,skipBeforePageTurning:H,beforeRotate:V,checkMode:F})),z(),o.i18n.changeLanguage(B);var e=function(){l((function(e){return e+1}))};return o.i18n.on("languageChanged",e),function(){o.i18n.off("languageChanged",e),h.InitAnnotationState(s.store.dispatch)}}),[]),c.useEffect((function(){s.store.dispatch(h.UpdateInjectFunc({onSubmit:C,stepList:p,getFileData:M,pageSize:R,loadFileList:j,onSave:P,onPageChange:O,onStepChange:S,beforeRotate:V})),o.i18n.changeLanguage(B)}),[C,p,M,R,j,P,O,S,B,V]),c.useEffect((function(){null==D||D(E)}),[E]);var z=function(){j?h.loadImgList(s.store.dispatch,s.store.getState,A,!0).then((function(e){e&&s.store.dispatch(f.LoadFileAndFileData(A))})):u&&u.length>0&&(s.store.dispatch({type:d.ANNOTATION_ACTIONS.UPDATE_IMG_LIST,payload:{imgList:u}}),s.store.dispatch(f.LoadFileAndFileData(A)))};return m.default.createElement("div",null,m.default.createElement(g.ConfigProvider,{locale:"en"===o.i18n.language?x.default:y.default},m.default.createElement(r,function(e,t){for(var n in t||(t={}))k.call(t,n)&&L(e,n,t[n]);if(w){var i,r=a(w(t));try{for(r.s();!(i=r.n()).done;)n=i.value,I.call(t,n)&&L(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},e))))}));e.exports=P},function(e,t,n){"use strict";var i=n(39).default,a=n(236),r=n(48),o=n(30),c=n(30),l=n(0),s=n(400),u=n(402),d=n(241),h=n(137),f=n(511),g=n(96),v=n(525),b=n(34),p=n(201),m=n(536),y=n(56),x=n(46),C=n(29);var w,k=(w=l)&&"object"==typeof w&&"default"in w?w:{default:w},I=Object.defineProperty,L=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,S=function(e,t,n){return t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},T=function(e,t){for(var n in t||(t={}))P.call(t,n)&&S(e,n,t[n]);if(L){var a,r=i(L(t));try{for(r.s();!(a=r.n()).done;){n=a.value;O.call(t,n)&&S(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e},A=c.Layout,E=A.Sider,D=A.Content,M="".concat(r.prefix,"-layout"),N=function(e){var t;return k.default.createElement(k.default.Fragment,null,!0===e.showTips&&k.default.createElement(u,{path:e.path,tips:e.tips}),k.default.createElement(s,T({},e)),k.default.createElement(h.default,{style:null==(t=e.style)?void 0:t.footer,mode:e.mode,footer:null==e?void 0:e.footer}))},R=function(e){var t;return k.default.createElement(k.default.Fragment,null,k.default.createElement(m,{drawLayerSlot:e.drawLayerSlot,checkMode:e.checkMode}),k.default.createElement(h.default,{style:null==(t=e.style)?void 0:t.footer,mode:e.mode,footer:null==e?void 0:e.footer}))},j=function(e){var t,n=e.stepList,i=e.step,a=null==(t=g.getStepConfig(n,i))?void 0:t.tool,r=p.isVideoTool(a),o=p.isPointCloudTool(a);return r?k.default.createElement(v,T({},e)):o?k.default.createElement(R,T({},e)):k.default.createElement(N,T({},e))},_=b.connect((function(e){var t,n,i,a=e.annotation,r=a.imgList,o=a.loading,c=null!=(t=r[a.imgIndex])?t:{};return{path:null!=(i=null!=(n=null==c?void 0:c.path)?n:null==c?void 0:c.url)?i:"",loading:o}}),null,null,{context:C.LabelBeeContext})((function(e){var t,n,i,r,l,s=null==(n=null==(t=e.style)?void 0:t.sider)?void 0:n.width;return k.default.createElement(a.ViewportProvider,null,k.default.createElement(o.Spin,{spinning:e.loading},k.default.createElement(c.Layout,{className:x.classnames([M,e.className]),style:null==(i=e.style)?void 0:i.layout},k.default.createElement("header",{className:"".concat(M,"__header"),style:null==(r=e.style)?void 0:r.header},k.default.createElement(f,{header:null==e?void 0:e.header,headerName:e.headerName,goBack:e.goBack,exportData:e.exportData})),k.default.createElement(c.Layout,{className:y.getClassName("layout","container")},null==e?void 0:e.leftSider,k.default.createElement(D,{className:"".concat(M,"__content")},k.default.createElement(j,T({},e))),k.default.createElement(E,{className:"".concat(M,"__side"),width:null!=s?s:240,style:null==(l=e.style)?void 0:l.sider},k.default.createElement(d.default,{sider:null==e?void 0:e.sider}))))))}));e.exports=_},,,,function(e,t,n){"use strict";e.exports='{"color":1,"width":2,"borderOpacity":9,"fillOpacity":9,"toolColor":{"1":{"valid":{"stroke":"rgba(0,0,255,0.50)","fill":"rgba(0,0,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(0,15,255,1.00)","fill":"rgba(0,15,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(0,15,255,0.80)","fill":"rgba(0,15,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"3":{"valid":{"stroke":"rgba(0,255,255,0.50)","fill":"rgba(0,255,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(0,212,255,1.00)","fill":"rgba(0,212,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(0,212,255,0.80)","fill":"rgba(0,212,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"5":{"valid":{"stroke":"rgba(0,255,0,0.50)","fill":"rgba(0,255,0,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(149,255,1.00)","fill":"rgba(149,255,0,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(149,255,0,0.80)","fill":"rgba(149,255,0,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"7":{"valid":{"stroke":"rgba(255,255,0,0.50)","fill":"rgba(255,255,0,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(255,230,102,1.00)","fill":"rgba(255,213,0,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(255,230,102,0.80)","fill":"rgba(255,230,102,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}},"9":{"valid":{"stroke":"rgba(255,0,255,0.50)","fill":"rgba(255,0,255,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validSelected":{"stroke":"rgba(230,102,255,1.00)","fill":"rgba(213,0,255,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,0.80)","fill":"rgba(255,153,102,0.19)"},"validHover":{"stroke":"rgba(230,102,255,0.80)","fill":"rgba(230,102,255,0.51)"},"invalidHover":{"stroke":"rgba(255,153,102,0.50)","fill":"rgba(255,153,102,0.32)"}}},"attributeColor":[{"valid":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(204,204,204,1.00)","fill":"rgba(204,204,204,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(128,12,249,1.00)","fill":"rgba(128,12,249,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(0,255,48,1.00)","fill":"rgba(0,255,48,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,136,247,1.00)","fill":"rgba(255,136,247,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,226,50,1.00)","fill":"rgba(255,226,50,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(153,66,23,1.00)","fill":"rgba(153,66,23,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(2,130,250,1.00)","fill":"rgba(2,130,250,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(255,35,35,1.00)","fill":"rgba(255,35,35,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}},{"valid":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.32)"},"invalid":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.32)"},"validSelected":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.64)"},"invalidSelected":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"},"validHover":{"stroke":"rgba(0,255,234,1.00)","fill":"rgba(0,255,234,0.64)"},"invalidHover":{"stroke":"rgba(255,153,102,1.00)","fill":"rgba(255,153,102,0.64)"}}],"lineColor":{"1":"rgba(102, 111, 255, 1 )","3":"rgba(102, 230, 255, 1)","5":"rgba(191, 255, 102, 1)","7":"rgba(255, 230, 102, 1)","9":"rgba(230, 102, 255, 1)"},"attributeLineColor":["rgba(204, 204, 204, 1)","rgba(128, 12, 249, 1)","rgba(0, 255, 48, 1)","rgba(255, 136, 247, 1)","rgba(255, 226, 50, 1)","rgba(153, 66, 23, 1)","rgba(2, 130, 250, 1)","rgba(255, 35, 35, 1)","rgba(0, 255, 234, 1)"]}'},function(e,t,n){"use strict";var i=n(76).default,a=n(77).default,r=n(39).default,o=n(32),c=n(46),l=n(78),s=n(50),u=n(52);var d,h=(d=s)&&"object"==typeof d&&"default"in d?d:{default:d},f=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=function(e,t,n){return t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x=function(){function e(){i(this,e)}return a(e,null,[{key:"copyResultChange",value:function(e,t,n){try{var i=c.jsonParser(e),a=c.jsonParser(n),l="step_".concat(t);if(i[l]){var s=i[l];if(s.result)return s.result=s.result.map((function(e){return function(e,t){return g(e,v(t))}(function(e,t){for(var n in t||(t={}))p.call(t,n)&&y(e,n,t[n]);if(b){var i,a=r(b(t));try{for(a.s();!(i=a.n()).done;)n=i.value,m.call(t,n)&&y(e,n,t[n])}catch(o){a.e(o)}finally{a.f()}}return e}({},e),{id:o.uuid(8,62)})})),a[l]=s,JSON.stringify(a)}return e}catch(i){return e}}},{key:"isResultSourceMatchedDependence",value:function(e,t){var n=null==e?void 0:e.map((function(e){return e.sourceID})).sort(),i=null==t?void 0:t.map((function(e){return e.id})).sort();return h.default.isEqual(n,i)}},{key:"deltaUpdateBasicResultList",value:function(e,t){var n=null==e?void 0:e.map((function(e){return e.sourceID})).sort();return t.filter((function(e){return!n.includes(e.id)}))}},{key:"getInitialResultList",value:function(e,t,n,i,a){var r=null!=e?e:[];switch(n.tool){case l.EToolName.Tag:case l.EToolName.Text:if(n.dataSourceStep>0){var o=this.deltaUpdateBasicResultList(r,i);if(o.length>0)return r.concat(t.getInitResultList(n.dataSourceStep,o))}return!0!==a?r:t.getInitResultList(n.dataSourceStep,i);default:return r}}},{key:"dataCorrection",value:function(e,t,n,i){var a,r;try{var o="step_".concat(u.getStepInfo(n,i).step),l=c.jsonParser(e),s=c.jsonParser(t),d=null==(a=l[o])?void 0:a.result,f=null==(r=s[o])?void 0:r.result;if(!f||h.default.isEqual(d.sort(this.idCmp),f.sort(this.idCmp)))return e;var g=this.findDeletedIds(d,f);if(0===g.length)return e;var v=n,b=this.getStepKeys(l).sort();return this.deleteRes(l,v,g,b),JSON.stringify(l)}catch(p){return console.error(p),e}}},{key:"idCmp",value:function(e,t){var n=e.id,i=t.id;return n<i?-1:n>i?1:0}},{key:"findDeletedIds",value:function(e,t){return this.findDeletedItems(t,e).map((function(e){return e.id}))}},{key:"findDeletedItems",value:function(e,t){var n=[];return e.forEach((function(e){t.some((function(t){return t.id===e.id}))||n.push(e)})),n}},{key:"getStepKeys",value:function(e){return Object.keys(e).map((function(e){return parseInt(e.replace("step_",""),10)})).filter((function(e){return!isNaN(e)}))}},{key:"deleteRes",value:function(e,t,n,i){var a=this;i.forEach((function(r){if(r>t){var o=e["step_".concat(r)];if([l.EToolName.FolderTag,l.EToolName.Segmentation].includes(o.tool))return;if(o.dataSourceStep===t){var c=[];o.result=o.result.filter((function(e){return!n.includes(e.sourceID)||(c.push(e.id),!1)})),a.deleteRes(e,r,c,i)}else o.result=o.result.filter((function(e){return!n.includes(e.sourceID)}))}}))}}]),e}();e.exports=x},,function(e,t,n){"use strict";var i=n(85).default,a=n(84).default,r=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var o=n(46),c=n(52),l=Object.defineProperty,s=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,g=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},v=function(e,t){for(var n in t||(t={}))h.call(t,n)&&g(e,n,t[n]);if(d){var i,a=r(d(t));try{for(a.s();!(i=a.n()).done;){n=i.value;f.call(t,n)&&g(e,n,t[n])}}catch(o){a.e(o)}finally{a.f()}}return e},b=function(e,t){return s(e,u(t))};t.composeResult=function(e,t,n,r){var l=t.step,s=t.stepList,u=n.rect,d=n.basicRectID;try{var h=o.jsonParser(e),f=c.getCurrentStepInfo(l,s),g=f.dataSourceStep,p="step_".concat(f.step);if(h[p]){var m=h[p];return Object.assign(m,r),m.result?(JSON.stringify(m.result)===JSON.stringify(u)||(m.result=d?[].concat(a(m.result.filter((function(e){return!(e.sourceID&&e.sourceID===d)}))),a(u.filter((function(e){return e.sourceID&&e.sourceID===d})))):u),JSON.stringify(h)):JSON.stringify(b(v({},h),i({},p,b(v(v({},h[p]),r),{result:u}))))}return JSON.stringify(b(v({},h),i({},p,b(v({dataSourceStep:g},r),{toolName:s[l-1].tool,result:u}))))}catch(h){return e}},t.composeResultWithBasicImgInfo=function(e,t){return JSON.stringify(v(v({},o.jsonParser(e)),t))}},function(e,t,n){"use strict";var i=n(76).default,a=n(77).default,r=n(199),o=n(50),c=n(46);var l,s=(l=o)&&"object"==typeof l&&"default"in l?l:{default:l},u=function(){function e(){i(this,e)}return a(e,null,[{key:"getPageInfo",value:function(e){var t=e.imgIndex,n=e.imgList,i=e.basicResultList;return{fileIndex:t,basicIndex:e.basicIndex,basicList:i,fileList:n,step:e.step,stepList:e.stepList}}},{key:"getNextPageInfo",value:function(t,n,i){var a=e.getPageInfo(n),o=e.getPageInfo(n).fileIndex,c=e.getNextFileIndex(t,a,i),l=e.getNextBasicIndex(t,a.basicIndex),s=c!==o,u=e.hasNextBasicIndex(t,a),d={fileIndex:c,basicIndex:l,fileIndexChanged:s,basicIndexChanged:u};return u?(d.fileIndexChanged=!1,d.fileIndex=o,d):(d.basicIndex=t===r.EPageTurningOperation.Backward?e.getBasicResultIndexForNextFile(a,d.fileIndex):0,d)}}]),e}(),d=u;d.getNextBasicIndex=function(e,t){return t+(e===r.EPageTurningOperation.Forward?1:-1)},d.hasNextBasicIndex=function(e,t){var n=t.basicList;if((null==n?void 0:n.length)>0){var i=u.getNextBasicIndex(e,t.basicIndex);return i>=0&&n.length>i}return!1},d.getBasicResultIndexForNextFile=function(e,t){var n,i=e.stepList,a=e.step,r=e.fileList,o=i.find((function(e){return e.step===a})),l=null==o?void 0:o.dataSourceStep;if(l){var s=null==(n=c.jsonParser(r[t].result)["step_".concat(l)])?void 0:n.result;return s&&(null==s?void 0:s.length)?(null==s?void 0:s.length)-1:0}return 0},d.getNextFileIndex=function(e,t,n){var i=t.fileIndex,a=t.fileList,o=void 0!==n?n:i;switch(e){case r.EPageTurningOperation.Forward:o+=1;break;case r.EPageTurningOperation.Backward:o-=1;case r.EPageTurningOperation.Jump:}return s.default.inRange(o,0,a.length)?o:i},e.exports=d},function(e,t,n){"use strict";var i=n(31).default,a=n(39).default,r=n(61),o=n(29),c=n(30),l=n(50),s=n(0),u=n(34),d=n(239),h=n(97),f=n(240),g=n(32),v=n(22),b=n(52);function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=p(l),y=p(s),x=Object.defineProperty,C=Object.defineProperties,w=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,P=function(e,t,n){return t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},O=function(e,t){for(var n in t||(t={}))I.call(t,n)&&P(e,n,t[n]);if(k){var i,r=a(k(t));try{for(r.s();!(i=r.n()).done;){n=i.value;L.call(t,n)&&P(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e},S=u.connect((function(e){var t=m.default.pickBy(e.annotation,(function(e,t){return["imgList","imgIndex","stepList","step","toolInstance","annotationEngine","loading"].includes(t)}));return O({imgAttribute:e.imgAttribute,toolStyle:e.toolStyle},t)}),null,null,{context:o.LabelBeeContext})((function(e){var t=s.useState(0),n=i(t,2)[1],a=e.imgAttribute,o=e.toolStyle,l=e.toolInstance,u=e.annotationEngine,p=e.imgList,m=e.imgIndex,x=e.dataInjectionAtCreation,k=e.renderEnhance,I=e.customRenderStyle,L=e.stepList,P=e.step,S=e.drawLayerSlot,T=s.useState({zoom:1,currentPos:{x:0,y:0}}),A=i(T,2),E=A[0],D=A[1],M=s.useRef(null),N=s.useRef(null),R=h(M);s.useEffect((function(){r.store.dispatch(f.InitToolStyleConfig())}),[]),s.useEffect((function(){if(u){switch(v.i18n.language){case"cn":case"en":u.setLang(v.i18n.language)}null==u||u.setDataInjectionAtCreation(x),null==u||u.setRenderEnhance(k),I&&(null==u||u.setCustomRenderStyle(I))}}),[u,x,k,I]),s.useEffect((function(){var e=function(e,t){D({zoom:e,currentPos:t})},t=function(e){D(e)};return l&&(l.singleOn("messageError",(function(e){c.message.error(e)})),l.singleOn("messageInfo",(function(e){c.message.info(e)})),l.singleOn("changeAnnotationShow",(function(){n((function(e){return e+1}))})),l.on("renderZoom",e),l.on("dragMove",t)),function(){l&&(l.unbind("renderZoom",e),l.unbind("dragMove",t))}}),[l]),s.useEffect((function(){var e;(null==u?void 0:u.setImgAttribute)?u.setImgAttribute(a):null==(e=null==l?void 0:l.setImgAttribute)||e.call(l,a)}),[a,u]),s.useEffect((function(){l&&l.setStyle(o),u&&u.setStyle(o)}),[o]),s.useEffect((function(){(null==l?void 0:l.setSize)&&l.setSize(R),u&&u.setSize(R)}),[R]),s.useEffect((function(){var e=b.getCurrentStepInfo(P,L);null==l||l.setConfig(e.config)}),[L]);return y.default.createElement("div",{ref:M,className:"annotationOperation"},y.default.createElement("div",{className:"canvas",ref:N,style:R,id:"toolContainer"},null==S?void 0:S(E)),!0===(null==l?void 0:l.isImgError)&&y.default.createElement(d,function(e,t){return C(e,w(t))}(O({},R),{reloadImage:function(){var e=null==p?void 0:p[m];!(null==e?void 0:e.url)||g.ImgUtils.load(e.url).then((function(e){u.setImgNode(e)}))},backgroundColor:"#e2e2e2",ignoreOffsetY:!0})))}));e.exports=S},function(e,t,n){"use strict";var i=n(31).default,a=n(0);e.exports=function(e){var t=a.useRef(0),n=a.useState(e),r=i(n,2),o=r[0],c=r[1],l=a.useCallback((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){c(e)}))}),[]);return a.useEffect((function(){return function(){return cancelAnimationFrame(t.current)}}),[]),[o,l]}},function(e,t,n){"use strict";var i=n(0),a=n(30),r=n(48);var o,c=(o=i)&&"object"==typeof o&&"default"in o?o:{default:o};e.exports=function(e){var t=e.path,n=e.tips;return t||n?c.default.createElement("div",{className:"".concat(r.prefix,"-tips")},c.default.createElement(a.Tooltip,{placement:"bottomRight",title:n},c.default.createElement("span",{className:"".concat(r.prefix,"-tips__leftContent"),title:n},n)),c.default.createElement(a.Tooltip,{placement:"bottomRight",title:t},c.default.createElement("span",{className:"".concat(r.prefix,"-tips__path")},t))):null}},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(30),o=n(404),c=n(242),l=n(34),s=n(29);var u,d=(u=a)&&"object"==typeof u&&"default"in u?u:{default:u};var h=l.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:s.LabelBeeContext})((function(e){var t,n=e.toolInstance,l=a.useState(0),s=i(l,2)[1];if(a.useEffect((function(){n&&(n.singleOn("selectedChange",(function(){s((function(e){return e+1}))})),n.singleOn("updateTextAttribute",(function(){s((function(e){return e+1}))})),n.singleOn("messageError",(function(e){r.message.error(e)})))}),[n]),!n)return null;var u=n.config;return d.default.createElement("div",null,(null==(t=null==n?void 0:n.config)?void 0:t.textConfigurable)&&n.selectedID&&d.default.createElement(o,{onChange:n.textChange,textValue:n.selectedText,checkString:c.TextUtils.checkString(null==u?void 0:u.textCheckType,null==u?void 0:u.customFormat),textCheckType:u.textCheckType}))}));e.exports=h},function(e,t,n){"use strict";var i=n(31).default,a=n(78),r=n(242),o=n(30),c=n(0),l=n(202),s=n(203),u=n(46),d=n(28);var h,f=(h=c)&&"object"==typeof h&&"default"in h?h:{default:h};e.exports=function(e){var t=d.useTranslation().t,n=e.onChange,h=e.textValue,g=e.checkString,v=e.textCheckType,b=c.useState(0),p=i(b,2),m=p[0],y=p[1],x=c.useState(!1),C=i(x,2),w=C[0],k=C[1],I=c.useState(!1),L=i(I,2),P=L[0],O=L[1],S=c.useState(!1),T=i(S,2),A=T[0],E=T[1],D=f.default.createElement("a",null,f.default.createElement(o.Tooltip,{placement:"bottom",title:t("EmptyTextInput")},f.default.createElement("img",{onMouseEnter:function(){return E(!0)},onMouseLeave:function(){return E(!1)},style:{marginLeft:6},src:A?l:s,onClick:function(e){e.stopPropagation(),n("")}})));c.useEffect((function(){h&&y(h.length)}),[]),c.useEffect((function(){var e;if(void 0===h||""===h)k(!1);else try{h&&k(!new RegExp(g).test(h))}catch(n){k(!0),o.message.destroy(),o.message.error(t("RegularExpIncorrectly"))}y(null!=(e=null==h?void 0:h.length)?e:0)}),[h]);return f.default.createElement("div",{className:"textInputContainer"},f.default.createElement("div",{className:"label"},t("TextInput"),D),f.default.createElement("div",{className:u.classnames({textareaContainer:!0,focus:P})},f.default.createElement("div",{className:u.classnames({toolTextAreaBox:!0,toolTextAreaBoxFocus:P})},f.default.createElement(o.Input.TextArea,{style:{resize:"none",height:120,wordBreak:"break-all"},maxLength:a.TEXT_ATTRIBUTE_MAX_LENGTH,onKeyDownCapture:function(e){e.stopPropagation()},onKeyUpCapture:function(e){e.stopPropagation()},onChange:function(e){n(e.target.value),y(e.target.value.length)},onFocus:function(e){return O(!0)},onBlur:function(e){(function(e){if(w)return n(""),o.message.error(r.TextUtils.getErrorNotice(v)),!0;n(e.target.value,!0)})(e),O(!1)},value:h,onKeyDown:function(e){e.stopPropagation()},className:w?"warning":""}),f.default.createElement("div",{className:"textAreaFooter"},f.default.createElement("span",{className:"wordCount"},f.default.createElement("span",{className:m>a.TEXT_ATTRIBUTE_MAX_LENGTH||w?"warning":""},m),"/",f.default.createElement("span",null,a.TEXT_ATTRIBUTE_MAX_LENGTH))))))}},function(e,t,n){"use strict";var i=n(31).default,a=n(30),r=n(0),o=n(203),c=n(243),l=n(61),s=n(202),u=n(28);var d,h=(d=r)&&"object"==typeof d&&"default"in d?d:{default:d};e.exports=function(){var e=r.useState(!1),t=i(e,2),n=t[0],d=t[1],f=u.useTranslation().t;return h.default.createElement(a.Tooltip,{placement:"bottom",title:f("RestoreImageAttributes")},h.default.createElement("img",{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},style:{marginLeft:6},src:n?s:o,onClick:function(e){e.stopPropagation(),l.store.dispatch(c.InitImgAttribute())}}))}},function(e,t,n){"use strict";var i=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(34),o=n(52),c=n(46),l=n(407),s=n(408),u=n(29),d=n(413),h=n(414),f=n(415),g=n(28),v=n(416),b=n(60),p=n(96);var m,y=(m=a)&&"object"==typeof m&&"default"in m?m:{default:m},x=function(e){var t,n,i=o.getCurrentStepInfo(null==(t=e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList);return{toolInstance:e.annotation.toolInstance,stepInfo:i,imgList:e.annotation.imgList,imgIndex:e.annotation.imgIndex,stepList:e.annotation.stepList}},C=r.connect(x,null,null,{context:u.LabelBeeContext})((function(e){var t=e.toolInstance,n=e.stepInfo,r=e.imgList,o=e.stepList,u=e.imgIndex,m=g.useTranslation().t,x=b.useSingleBox().selectedBox,C=s(t),w=a.useState(!1),k=i(w,2),I=k[0],L=k[1],P=a.useState([]),O=i(P,2),S=O[0],T=O[1],A=c.jsonParser(n.config),E=[C.copyPrevious,C.empty,C.setValidity];if(!0===A.trackConfigurable){var D=!x,M={name:m("UnifyParams"),key:"UnifyParams",imgSvg:D?h:d,hoverSvg:f,onClick:function(){T(p.composeResultByToolInstance({toolInstance:t,imgList:r,imgIndex:u,stepList:o})),L(!0)},forbidConfirm:!0,forbidOperation:D};E.unshift(M)}var N=a.useCallback((function(){L(!1)}),[]),R=null==x?void 0:x.info;return y.default.createElement(y.default.Fragment,null,y.default.createElement(l,{allOperation:E}),y.default.createElement(v,{id:null==R?void 0:R.trackID,visible:I,onCancel:N,config:A,imgList:S}))})),w=r.connect(x,null,null,{context:u.LabelBeeContext})((function(e){var t=e.toolInstance,n=e.stepInfo,i=s(t),a=c.jsonParser(null==n?void 0:n.config),r=[i.empty];return 0===(null==n?void 0:n.dataSourceStep)&&r.push(i.setValidity),(null==a?void 0:a.copyBackwardResult)&&r.push(i.copyPrevious),y.default.createElement(l,{allOperation:r})}));t.PointCloudOperation=C,t.default=w},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(30),o=n(28),c=n(48);var l,s=(l=a)&&"object"==typeof l&&"default"in l?l:{default:l},u={color:"#CCCCCC"},d=function(e){var t=e.info,n=o.useTranslation().t;return t.key.startsWith("sure")?s.default.createElement("div",{key:t.key},"".concat(n("ConfirmTo")).concat(t.name.slice(0),"\uff1f")):s.default.createElement("span",null,t.name)},h=function(e){var t=e.icon;return"string"==typeof t?s.default.createElement("img",{width:23,height:25,src:t}):t},f=function(e){var t=e.isHover,n=e.info,i=!!n.forbidOperation,a=n.key===t&&!i,r={color:a?"#666fff":""};return i&&(r=u),s.default.createElement("div",{style:{cursor:i?"not-allowed":"default"},onClick:function(){var e;return(null==n?void 0:n.forbidConfirm)&&!i&&(null==(e=null==n?void 0:n.onClick)?void 0:e.call(n))}},s.default.createElement("div",{className:"icon"},s.default.createElement(h,{icon:a?n.hoverSvg:n.imgSvg})),s.default.createElement("div",{className:"toolName",style:r},n.name))};e.exports=function(e){var t=e.allOperation,n=a.useRef(null),l=a.useState(null),u=i(l,2),h=u[0],g=u[1],v=o.useTranslation().t,b=Math.floor(24/t.length);return s.default.createElement("div",{className:"generalOperation",ref:n},t.map((function(e,t){return s.default.createElement(r.Col,{span:b,key:t},s.default.createElement("div",{key:e.key,className:"item",onMouseEnter:function(){g(e.key)},onMouseLeave:function(){g(null)}},e.forbidConfirm?s.default.createElement(f,{info:e,isHover:h}):s.default.createElement(r.Popconfirm,{title:s.default.createElement(d,{info:e}),placement:"topRight",okText:v("Confirm"),cancelText:v("Cancel"),getPopupContainer:function(){var e;return null!=(e=n.current)?e:document.body},onConfirm:e.onClick,overlayClassName:"".concat(c.prefix,"-pop-confirm")},s.default.createElement("div",null,s.default.createElement(f,{info:e,isHover:h})))))})))}},function(e,t,n){"use strict";var i=n(31).default,a=n(39).default,r=n(409),o=n(410),c=n(411),l=n(412),s=n(59),u=n(28),d=n(0),h=n(55),f=n(61),g=n(29);var v,b=(v=d)&&"object"==typeof v&&"default"in v?v:{default:v},p=Object.defineProperty,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=function(e,t,n){return t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},w=function(e,t){for(var n in t||(t={}))y.call(t,n)&&C(e,n,t[n]);if(m){var i,r=a(m(t));try{for(r.s();!(i=r.n()).done;){n=i.value;x.call(t,n)&&C(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e};e.exports=function(e){var t=d.useState(0),n=i(t,2),a=n[0],v=n[1],p=u.useTranslation(),m=p.t,y=p.i18n,x=g.useSelector((function(e){var t=e.annotation;return{currentData:t.imgList[t.imgIndex]}})).currentData,C={height:"25px",lineHeight:"25px",display:"flex",justifyContent:"center",alignItems:"center"},k={name:m("ClearLabel"),key:"empty",imgSvg:r,hoverSvg:o,onClick:function(){null==e||e.clearResult()}},I={name:m(!1===(null==e?void 0:e.valid)?"SetAsValid":"SetAsInvalid"),key:"setValidity",imgSvg:b.default.createElement(s.StopOutlined,{style:C}),hoverSvg:b.default.createElement(s.StopOutlined,{style:w({color:"#666fff"},C)}),onClick:function(){e.setValid(!e.valid),setTimeout((function(){v((function(e){return e+1}))}))}},L={name:m("CopyThePrevious"),key:"copyPrevious",imgSvg:c,hoverSvg:l,onClick:function(){f.store.dispatch(h.CopyBackWordResult())}};return d.useMemo((function(){return{empty:k,setValidity:I,copyPrevious:L}}),[e,a,x,y.language])}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='25px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3e%e5%bd%a2%e7%8a%b6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-46.000000%2c -141.000000)' fill-rule='nonzero'%3e %3cg id='%e6%b8%85%e7%a9%ba%e6%a0%87%e6%b3%a8' transform='translate(18.000000%2c 123.000000)'%3e %3cg id='icon_clear_normal' transform='translate(28.000000%2c 18.000000)'%3e %3crect id='icon_clear' fill='black' opacity='0' x='0' y='0.00780487805' width='24' height='24'%3e%3c/rect%3e %3cpath d='M24%2c10.6934683 C24%2c9.29483367 22.8777821%2c8.15502957 21.4955096%2c8.15502957 L15.5587661%2c8.15502957 L15.5587661%2c3.13276778 C15.5587661%2c1.40881408 14.1764936%2c0.00780487805 12.4755955%2c0.00780487805 L11.6485748%2c0.00780487805 C9.94767669%2c0.00780487805 8.56540414%2c1.40881408 8.56540414%2c3.13276778 L8.56540414%2c8.15502957 L2.5021476%2c8.15502957 C1.12221788%2c8.15502957 0%2c9.29245908 0%2c10.6934683 C0%2c11.835647 0.754392815%2c12.7926075 1.78055447%2c13.1108028 L1.78055447%2c21.9680305 C1.78055447%2c23.093587 2.68254588%2c24.0078049 3.79304959%2c24.0078049 L20.3615775%2c24.0078049 C21.4720812%2c24.0078049 22.3740726%2c23.093587 22.3740726%2c21.9680305 L22.3740726%2c13.0609364 C23.3205779%2c12.6999984 24%2c11.7786568 24%2c10.6934683 Z M10.114018%2c3.13276778 C10.114018%2c2.27554011 10.8028114%2c1.5774101 11.6485748%2c1.5774101 L12.4755955%2c1.5774101 C13.3213588%2c1.5774101 14.0101523%2c2.27554011 14.0101523%2c3.13276778 L14.0101523%2c8.15502957 L10.114018%2c8.15502957 L10.114018%2c3.13276778 Z M20.3615775%2c22.4381997 L17.8055447%2c22.4381997 L17.8055447%2c19.2206277 C17.8055447%2c18.7860774 17.4588052%2c18.4370124 17.0324092%2c18.4370124 C16.6060133%2c18.4370124 16.2592737%2c18.788452 16.2592737%2c19.2206277 L16.2592737%2c22.4381997 L12.8527919%2c22.4381997 L12.8527919%2c19.2206277 C12.8527919%2c18.7860774 12.5060523%2c18.4370124 12.0796564%2c18.4370124 C11.6509176%2c18.4370124 11.3065209%2c18.788452 11.3065209%2c19.2206277 L11.3065209%2c22.4381997 L7.89769621%2c22.4381997 L7.89769621%2c19.2206277 C7.89769621%2c18.7860774 7.55095666%2c18.4370124 7.12456072%2c18.4370124 C6.69582194%2c18.4370124 6.35142522%2c18.788452 6.35142522%2c19.2206277 L6.35142522%2c22.4381997 L3.79304959%2c22.4381997 C3.53768059%2c22.4381997 3.32916829%2c22.226861 3.32916829%2c21.9680305 L3.32916829%2c13.2295324 L20.8254588%2c13.2295324 L20.8254588%2c21.9656559 C20.8254588%2c22.226861 20.6169465%2c22.4381997 20.3615775%2c22.4381997 Z M21.4978524%2c11.6599272 L2.5021476%2c11.6599272 C1.97500976%2c11.6599272 1.54861382%2c11.2253769 1.54861382%2c10.6934683 C1.54861382%2c10.1591851 1.9773526%2c9.7246348 2.5021476%2c9.7246348 L21.4955096%2c9.7246348 C22.0226474%2c9.7246348 22.4513862%2c10.1591851 22.4513862%2c10.6934683 C22.4513862%2c11.2277514 22.0226474%2c11.6599272 21.4978524%2c11.6599272 Z' id='%e5%bd%a2%e7%8a%b6' fill='%23666666'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_clear_a%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-166.000000%2c -141.000000)' fill-rule='nonzero'%3e %3cg id='%e6%b8%85%e7%a9%ba%e6%a0%87%e6%b3%a8%e5%a4%87%e4%bb%bd' transform='translate(138.000000%2c 123.000000)'%3e %3cg id='icon_clear' transform='translate(28.000000%2c 18.000000)'%3e %3crect id='icon_clear_active' fill='black' opacity='0' x='0' y='0.00780487805' width='24' height='24'%3e%3c/rect%3e %3cpath d='M24%2c10.6934683 C24%2c9.29483367 22.8777821%2c8.15502957 21.4955096%2c8.15502957 L15.5587661%2c8.15502957 L15.5587661%2c3.13276778 C15.5587661%2c1.40881408 14.1764936%2c0.00780487805 12.4755955%2c0.00780487805 L11.6485748%2c0.00780487805 C9.94767669%2c0.00780487805 8.56540414%2c1.40881408 8.56540414%2c3.13276778 L8.56540414%2c8.15502957 L2.5021476%2c8.15502957 C1.12221788%2c8.15502957 0%2c9.29245908 0%2c10.6934683 C0%2c11.835647 0.754392815%2c12.7926075 1.78055447%2c13.1108028 L1.78055447%2c21.9680305 C1.78055447%2c23.093587 2.68254588%2c24.0078049 3.79304959%2c24.0078049 L20.3615775%2c24.0078049 C21.4720812%2c24.0078049 22.3740726%2c23.093587 22.3740726%2c21.9680305 L22.3740726%2c13.0609364 C23.3205779%2c12.6999984 24%2c11.7786568 24%2c10.6934683 Z M10.114018%2c3.13276778 C10.114018%2c2.27554011 10.8028114%2c1.5774101 11.6485748%2c1.5774101 L12.4755955%2c1.5774101 C13.3213588%2c1.5774101 14.0101523%2c2.27554011 14.0101523%2c3.13276778 L14.0101523%2c8.15502957 L10.114018%2c8.15502957 L10.114018%2c3.13276778 Z M20.3615775%2c22.4381997 L17.8055447%2c22.4381997 L17.8055447%2c19.2206277 C17.8055447%2c18.7860774 17.4588052%2c18.4370124 17.0324092%2c18.4370124 C16.6060133%2c18.4370124 16.2592737%2c18.788452 16.2592737%2c19.2206277 L16.2592737%2c22.4381997 L12.8527919%2c22.4381997 L12.8527919%2c19.2206277 C12.8527919%2c18.7860774 12.5060523%2c18.4370124 12.0796564%2c18.4370124 C11.6509176%2c18.4370124 11.3065209%2c18.788452 11.3065209%2c19.2206277 L11.3065209%2c22.4381997 L7.89769621%2c22.4381997 L7.89769621%2c19.2206277 C7.89769621%2c18.7860774 7.55095666%2c18.4370124 7.12456072%2c18.4370124 C6.69582194%2c18.4370124 6.35142522%2c18.788452 6.35142522%2c19.2206277 L6.35142522%2c22.4381997 L3.79304959%2c22.4381997 C3.53768059%2c22.4381997 3.32916829%2c22.226861 3.32916829%2c21.9680305 L3.32916829%2c13.2295324 L20.8254588%2c13.2295324 L20.8254588%2c21.9656559 C20.8254588%2c22.226861 20.6169465%2c22.4381997 20.3615775%2c22.4381997 Z M21.4978524%2c11.6599272 L2.5021476%2c11.6599272 C1.97500976%2c11.6599272 1.54861382%2c11.2253769 1.54861382%2c10.6934683 C1.54861382%2c10.1591851 1.9773526%2c9.7246348 2.5021476%2c9.7246348 L21.4955096%2c9.7246348 C22.0226474%2c9.7246348 22.4513862%2c10.1591851 22.4513862%2c10.6934683 C22.4513862%2c11.2277514 22.0226474%2c11.6599272 21.4978524%2c11.6599272 Z' id='%e5%bd%a2%e7%8a%b6' fill='%23666FFF'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_invalid%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='24' height='24'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-49.000000%2c -234.000000)'%3e %3cg id='%e6%a0%87%e6%b3%a8%e6%97%a0%e6%95%88' transform='translate(21.000000%2c 215.000000)'%3e %3cg id='icon_invalid' transform='translate(28.000000%2c 19.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg%3e%3c/g%3e %3cpath d='M14.8132711%2c20.5 L3.35714286%2c20.5 C2.91670867%2c20.5 2.57142857%2c20.1826213 2.57142857%2c19.8055556 L2.57142857%2c3.19444444 C2.57142857%2c2.81737868 2.91670867%2c2.5 3.35714286%2c2.5 L20.6428571%2c2.5 C21.0832913%2c2.5 21.4285714%2c2.81737868 21.4285714%2c3.19444444 L21.4285714%2c15.2898676 L23%2c16.4514553 L23%2c3.19444444 C23%2c1.97602093 21.938175%2c1 20.6428571%2c1 L3.35714286%2c1 C2.06182497%2c1 1%2c1.97602093 1%2c3.19444444 L1%2c19.8055556 C1%2c21.0239791 2.06182497%2c22 3.35714286%2c22 L15.9411765%2c22 L14.8132711%2c20.5 Z' id='%e8%b7%af%e5%be%84' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M8.5%2c10 C9.88071187%2c10 11%2c8.88071187 11%2c7.5 C11%2c6.11928813 9.88071187%2c5 8.5%2c5 C7.11928813%2c5 6%2c6.11928813 6%2c7.5 C6%2c8.88071187 7.11928813%2c10 8.5%2c10 Z M8.5%2c8.57142857 C7.90826634%2c8.57142857 7.42857143%2c8.09173366 7.42857143%2c7.5 C7.42857143%2c6.90826634 7.90826634%2c6.42857143 8.5%2c6.42857143 C9.09173366%2c6.42857143 9.57142857%2c6.90826634 9.57142857%2c7.5 C9.57142857%2c8.09173366 9.09173366%2c8.57142857 8.5%2c8.57142857 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M1.93578343%2c18 C4.08872055%2c14.8551688 6.74336715%2c13.7936147 9.20632589%2c14.9383326 C9.39666832%2c15.0267988 9.58966667%2c15.1227541 9.8383972%2c15.2511189 C11.2590222%2c15.9842746 11.4672631%2c16.0801404 12.0929951%2c16.2047792 C13.2715953%2c16.4395429 14.3253377%2c16.0173433 15.3845587%2c14.7865988 C17.834834%2c11.9395412 19.5284667%2c10.6940174 22%2c10.3111164 L21.8385808%2c9 C19.0487146%2c9.43221863 17.1525949%2c10.8266545 14.5357091%2c13.8673024 C13.7408033%2c14.7909303 13.0776295%2c15.056642 12.2992772%2c14.9016031 C11.8197086%2c14.8060784 11.6287028%2c14.7181469 10.3315315%2c14.0487032 C10.0702502%2c13.9138612 9.86453995%2c13.8115857 9.65795075%2c13.7155685 C6.66190483%2c12.3230858 3.4571787%2c13.6046086 1%2c17.1938506 L1.93578343%2c18 Z' id='%e8%b7%af%e5%be%84' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M19.5%2c23 C21.4329966%2c23 23%2c21.4329966 23%2c19.5 C23%2c17.5670034 21.4329966%2c16 19.5%2c16 C17.5670034%2c16 16%2c17.5670034 16%2c19.5 C16%2c21.4329966 17.5670034%2c23 19.5%2c23 Z M19.5%2c22 C18.1192881%2c22 17%2c20.8807119 17%2c19.5 C17%2c18.1192881 18.1192881%2c17 19.5%2c17 C20.8807119%2c17 22%2c18.1192881 22%2c19.5 C22%2c20.8807119 20.8807119%2c22 19.5%2c22 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%23666666' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M21.2928932%2c17.7692308 L21.6464466%2c18.1227842 L21.6464466%2c17.4156774 L21.2928932%2c17.7692308 Z M17.7692308%2c21.2928932 L17.4156774%2c21.6464466 L18.1227842%2c21.6464466 L17.7692308%2c21.2928932 Z M17.7071068%2c21.2307692 L17.3535534%2c20.8772158 L17.3535534%2c21.5843226 L17.7071068%2c21.2307692 Z M21.2307692%2c17.7071068 L21.5843226%2c17.3535534 L20.8772158%2c17.3535534 L21.2307692%2c17.7071068 Z' id='%e7%9f%a9%e5%bd%a2' stroke='%23666666' mask='url(%23mask-2)'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='24px' height='24px' viewBox='0 0 24 24' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 57 (83077) - https://sketch.com --%3e %3ctitle%3eicon_invalid_a%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='24' height='24'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e9%a1%b5%e9%9d%a21' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='0_Slices' transform='translate(-166.000000%2c -234.000000)'%3e %3cg id='%e6%a0%87%e6%b3%a8%e6%97%a0%e6%95%88%e5%a4%87%e4%bb%bd' transform='translate(138.000000%2c 215.000000)'%3e %3cg id='icon_invalid' transform='translate(28.000000%2c 19.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='icon_invalid_active'%3e%3c/g%3e %3cpath d='M14.8132711%2c20.5 L3.35714286%2c20.5 C2.91670867%2c20.5 2.57142857%2c20.1826213 2.57142857%2c19.8055556 L2.57142857%2c3.19444444 C2.57142857%2c2.81737868 2.91670867%2c2.5 3.35714286%2c2.5 L20.6428571%2c2.5 C21.0832913%2c2.5 21.4285714%2c2.81737868 21.4285714%2c3.19444444 L21.4285714%2c15.2898676 L23%2c16.4514553 L23%2c3.19444444 C23%2c1.97602093 21.938175%2c1 20.6428571%2c1 L3.35714286%2c1 C2.06182497%2c1 1%2c1.97602093 1%2c3.19444444 L1%2c19.8055556 C1%2c21.0239791 2.06182497%2c22 3.35714286%2c22 L15.9411765%2c22 L14.8132711%2c20.5 Z' id='%e8%b7%af%e5%be%84' fill='%23666FFF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M8.5%2c10 C9.88071187%2c10 11%2c8.88071187 11%2c7.5 C11%2c6.11928813 9.88071187%2c5 8.5%2c5 C7.11928813%2c5 6%2c6.11928813 6%2c7.5 C6%2c8.88071187 7.11928813%2c10 8.5%2c10 Z M8.5%2c8.57142857 C7.90826634%2c8.57142857 7.42857143%2c8.09173366 7.42857143%2c7.5 C7.42857143%2c6.90826634 7.90826634%2c6.42857143 8.5%2c6.42857143 C9.09173366%2c6.42857143 9.57142857%2c6.90826634 9.57142857%2c7.5 C9.57142857%2c8.09173366 9.09173366%2c8.57142857 8.5%2c8.57142857 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%236674FF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M1.93578343%2c18 C4.08872055%2c14.8551688 6.74336715%2c13.7936147 9.20632589%2c14.9383326 C9.39666832%2c15.0267988 9.58966667%2c15.1227541 9.8383972%2c15.2511189 C11.2590222%2c15.9842746 11.4672631%2c16.0801404 12.0929951%2c16.2047792 C13.2715953%2c16.4395429 14.3253377%2c16.0173433 15.3845587%2c14.7865988 C17.834834%2c11.9395412 19.5284667%2c10.6940174 22%2c10.3111164 L21.8385808%2c9 C19.0487146%2c9.43221863 17.1525949%2c10.8266545 14.5357091%2c13.8673024 C13.7408033%2c14.7909303 13.0776295%2c15.056642 12.2992772%2c14.9016031 C11.8197086%2c14.8060784 11.6287028%2c14.7181469 10.3315315%2c14.0487032 C10.0702502%2c13.9138612 9.86453995%2c13.8115857 9.65795075%2c13.7155685 C6.66190483%2c12.3230858 3.4571787%2c13.6046086 1%2c17.1938506 L1.93578343%2c18 Z' id='%e8%b7%af%e5%be%84' fill='%23666FFF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M19.5%2c23 C21.4329966%2c23 23%2c21.4329966 23%2c19.5 C23%2c17.5670034 21.4329966%2c16 19.5%2c16 C17.5670034%2c16 16%2c17.5670034 16%2c19.5 C16%2c21.4329966 17.5670034%2c23 19.5%2c23 Z M19.5%2c22 C18.1192881%2c22 17%2c20.8807119 17%2c19.5 C17%2c18.1192881 18.1192881%2c17 19.5%2c17 C20.8807119%2c17 22%2c18.1192881 22%2c19.5 C22%2c20.8807119 20.8807119%2c22 19.5%2c22 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%236674FF' fill-rule='nonzero' mask='url(%23mask-2)'%3e%3c/path%3e %3cpath d='M21.2928932%2c17.7692308 L21.6464466%2c18.1227842 L21.6464466%2c17.4156774 L21.2928932%2c17.7692308 Z M17.7692308%2c21.2928932 L17.4156774%2c21.6464466 L18.1227842%2c21.6464466 L17.7692308%2c21.2928932 Z M17.7071068%2c21.2307692 L17.3535534%2c20.8772158 L17.3535534%2c21.5843226 L17.7071068%2c21.2307692 Z M21.2307692%2c17.7071068 L21.5843226%2c17.3535534 L20.8772158%2c17.3535534 L21.2307692%2c17.7071068 Z' id='%e7%9f%a9%e5%bd%a2' stroke='%23666FFF' mask='url(%23mask-2)'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M12.0355 1.96447L8.5 5.5L12.0354 9.03545L15.571 5.49991L12.0355 1.96447Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M18.5355 8.46447L15 12L18.5354 15.5354L22.071 11.9999L18.5355 8.46447Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M5.53553 8.46447L2 12L5.53544 15.5354L9.07098 11.9999L5.53553 8.46447Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M12.0355 14.9645L8.5 18.5L12.0354 22.0354L15.571 18.4999L12.0355 14.9645Z' stroke='%23666666' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M12.0355 1.96447L8.5 5.5L12.0354 9.03545L15.571 5.49991L12.0355 1.96447Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M18.5355 8.46447L15 12L18.5354 15.5354L22.071 11.9999L18.5355 8.46447Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M5.53553 8.46447L2 12L5.53544 15.5354L9.07098 11.9999L5.53553 8.46447Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M12.0355 14.9645L8.5 18.5L12.0354 22.0354L15.571 18.4999L12.0355 14.9645Z' stroke='%23CCCCCC' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath d='M12.0355 1.96447L8.5 5.5L12.0354 9.03545L15.571 5.49991L12.0355 1.96447Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M18.5355 8.46447L15 12L18.5354 15.5354L22.071 11.9999L18.5355 8.46447Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M5.53553 8.46447L2 12L5.53544 15.5354L9.07098 11.9999L5.53553 8.46447Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e %3cpath d='M12.0355 14.9645L8.5 18.5L12.0354 22.0354L15.571 18.4999L12.0355 14.9645Z' stroke='%23666FFF' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(85).default,a=n(31).default,r=n(39).default,o=n(48),c=n(55),l=n(29),s=n(30),u=n(0),d=n(28),h=n(59),f=n(22),g=n(34),v=n(60),b=n(32);var p,m=(p=u)&&"object"==typeof p&&"default"in p?p:{default:p},y=Object.defineProperty,x=Object.defineProperties,C=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,L=function(e,t,n){return t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},P=function(e,t){for(var n in t||(t={}))k.call(t,n)&&L(e,n,t[n]);if(w){var i,a=r(w(t));try{for(a.s();!(i=a.n()).done;){n=i.value;I.call(t,n)&&L(e,n,t[n])}}catch(o){a.e(o)}finally{a.f()}}return e},O={labelCol:{span:8},wrapperCol:{span:16}},S=[{required:!0,message:"\u8bf7\u586b\u5199\u4e00\u4e2a\u6570\u5b57"}],T=[{required:!0,message:"\u8bf7\u9009\u62e9\u4e3b\u5c5e\u6027"}],A=function(e){var t=e.text;return m.default.createElement("span",{style:{borderRadius:"4px 0px 0px 4px",padding:"0px 12px",background:"#FAFAFA",border:"1px solid rgb(217 217 217)",borderRight:"0",display:"flex",alignItems:"center",height:32}},t)},E=g.connect((function(e){return{imgIndex:e.annotation.imgIndex}}),null,null,{context:l.LabelBeeContext})((function(e){var t=e.id,n=e.visible,r=e.onCancel,g=e.config,p=e.imgList,y=e.imgIndex,w=l.useDispatch(),k=v.useSingleBox().selectedBox,I=u.useState(),L=a(I,2),E=L[0],D=L[1],M=s.Form.useForm(),N=a(M,1)[0],R=d.useTranslation().t;u.useEffect((function(){!1===n?(N.resetFields(),D(void 0)):j()}),[n]);var j=u.useCallback((function(){var e,t=N.getFieldsValue(["prevPage","nextPage"]),n=t.prevPage,i=t.nextPage,a=p.filter((function(e,t){return b.MathUtils.isInRange(t,[n-1,i-1])}));if((null==a?void 0:a.length)>0&&(null==k?void 0:k.info)&&void 0!==(null==(e=null==k?void 0:k.info)?void 0:e.trackID)){var r=f.PointCloudUtils.getMaxSizeFromBox({trackID:k.info.trackID,imgList:a});D(r)}else D(void 0)}),[p,k,y]),_={width:"200px"},B={marginBottom:"24px",display:"flex",alignItems:"center"};return m.default.createElement(s.Modal,{title:R("UnifyParams"),visible:n,onCancel:r,onOk:function(){return N.submit()},wrapClassName:"labelbee-custom-modal"},m.default.createElement(s.Form,function(e,t){return x(e,C(t))}(P({},O),{form:N,onFinish:function(e){var n;if(t)if(E){w(c.ToSubmitFileData(o.ESubmitType.SyncImgList));var a={attribute:e.attribute};if(g.secondaryAttributeConfigurable){var l={};null==(n=g.inputList)||n.forEach((function(t){var n=e[t.value];void 0!==n&&Object.assign(l,i({},t.value,n))})),Object.keys(l).length>0&&Object.assign(a,{subAttribute:l})}E&&Object.assign(a,E),w(c.BatchUpdateResultByTrackID(t,a,[e.prevPage-1,e.nextPage-1])),r()}else s.message.info("\u8be5\u8303\u56f4\u4e0d\u5b58\u5728\u66f4\u6539\u6570\u636e, \u8bf7\u66f4\u6539\u7edf\u4e00\u8303\u56f4")}}),m.default.createElement(s.Form.Item,{name:"id",label:R("UnifyTrackID")},t),m.default.createElement(s.Form.Item,{label:R("UnifyAttributeRange"),required:!0},m.default.createElement(s.Form.Item,{style:{display:"inline-block"},rules:S,name:"prevPage",noStyle:!0,initialValue:1},m.default.createElement(s.InputNumber,{precision:0,min:1,style:{width:"80px"},onChange:function(){return j()}})),m.default.createElement("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}},"-"),m.default.createElement(s.Form.Item,{style:{display:"inline-block"},rules:S,name:"nextPage",noStyle:!0,initialValue:p.length},m.default.createElement(s.InputNumber,{precision:0,min:1,style:{width:"80px"},onChange:function(){return j()}})),m.default.createElement("span",{style:{display:"inline-block",width:"40x",marginLeft:"10px",textAlign:"center"}},R("Page"))),m.default.createElement(s.Form.Item,{name:"UnifySize",label:R("UnifySize")},function(){if(E&&(null==k?void 0:k.info)){var e={marginRight:16},t=f.PointCloudUtils.transferBox2Kitti(P(P({},null==k?void 0:k.info),E)),n=t.length,i=t.width,a=t.height;return m.default.createElement("div",null,m.default.createElement("span",{style:e},R("Length"),": ",n.toFixed(2)),m.default.createElement("span",{style:e},R("Width"),": ",i.toFixed(2)),m.default.createElement("span",{style:e},R("Height"),": ",a.toFixed(2)),m.default.createElement(s.Popover,{placement:"rightBottom",content:"\u7edf\u4e00\u5c3a\u5bf8\u4e3a\u8be5ID\u7684\u6240\u6709\u6807\u6ce8\u6846\u4e2d\u6700\u5927\u7684\u5c3a\u5bf8"},m.default.createElement(h.QuestionCircleOutlined,null)))}}()),m.default.createElement(s.Form.Item,{label:R("UnifyTag"),required:!0},m.default.createElement("div",{style:B},m.default.createElement(A,{text:R("Attribute")}),m.default.createElement(s.Form.Item,{name:"attribute",noStyle:!0,rules:T},m.default.createElement(s.Select,{style:_},g.attributeList.map((function(e){return m.default.createElement(s.Select.Option,{key:e.value,value:e.value},e.key)}))))),g.secondaryAttributeConfigurable&&g.inputList.map((function(e){var t;return m.default.createElement("div",{key:e.value,style:B},m.default.createElement(A,{text:e.key}),m.default.createElement(s.Form.Item,{name:e.value,noStyle:!0,required:!1},m.default.createElement(s.Select,{style:_},null==(t=e.subSelected)?void 0:t.map((function(e){return m.default.createElement(s.Select.Option,{key:e.value,value:e.value},e.key)})))))})))))}));e.exports=E},function(e,t,n){"use strict";var i=n(30),a=n(34),r=n(50),o=n(0),c=n(243),l=n(61),s=n(29),u=n(418),d=n(419),h=n(420),f=n(421),g=n(422),v=n(28);var b,p=(b=o)&&"object"==typeof b&&"default"in b?b:{default:b};var m=a.connect((function(e){return{imgAttribute:e.imgAttribute}}),null,null,{context:s.LabelBeeContext})((function(e){var t=e.imgAttribute,n=t.contrast,a=t.saturation,s=t.brightness,b=t.zoomRatio,m=t.isOriginalSize,y=v.useTranslation().t,x=r.throttle((function(e){l.store.dispatch(c.default.UpdateImgAttribute(e))}),60,{trailing:!0}),C=[{name:"Saturation",min:-100,max:500,step:2,onChange:function(e){return x({saturation:e})},value:a,svg:u},{name:"Contrast",min:-100,max:300,step:2,onChange:function(e){return x({contrast:e})},value:n,svg:d},{name:"Exposure",min:-100,max:400,step:2,onChange:function(e){return x({brightness:e})},value:s,svg:h},{name:"ScreenRatio",min:.1,max:10,step:.1,onChange:function(e){return x({zoomRatio:e})},value:b,svg:f}];return o.useEffect((function(){return function(){l.store.dispatch(c.default.InitImgAttribute())}}),[]),p.default.createElement("div",null,C.map((function(e,t){return p.default.createElement("div",{className:"imgAttributeController",key:"option_".concat(t)},p.default.createElement(i.Row,{className:"tools",style:{padding:"0px 0"}},p.default.createElement(i.Col,{span:24},p.default.createElement("span",{className:"singleTool"},p.default.createElement("img",{width:12,height:12,src:e.svg}),p.default.createElement("span",{className:"toolName"},y(e.name))))),p.default.createElement(i.Row,null,p.default.createElement(i.Col,{span:20},p.default.createElement(i.Slider,{min:e.min,max:e.max,step:e.step,value:e.value,onChange:e.onChange,trackStyle:{background:"#666fff"}})),p.default.createElement(i.Col,{span:4},p.default.createElement(i.Input,{value:e.value,disabled:!0,style:{fontSize:12,marginBottom:23,padding:"0px 2px",textAlign:"center"}}))))})),p.default.createElement("div",{className:"imgAttributeController"},p.default.createElement(i.Row,{className:"tools",style:{padding:"10px 0"}},p.default.createElement(i.Col,{span:18},p.default.createElement("span",{className:"singleTool"},p.default.createElement("img",{src:g,width:16,style:{marginTop:"-2px"}}),p.default.createElement("span",{className:"toolName"},y("OriginalScale")))),p.default.createElement(i.Col,null,p.default.createElement(i.Switch,{checked:m,onChange:function(e){return x({isOriginalSize:e})}})))))}));e.exports=m},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e9%a5%b1%e5%92%8c%e5%ba%a6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-481.000000%2c -124.000000)'%3e %3cg id='%e9%a5%b1%e5%92%8c%e5%ba%a6' transform='translate(481.000000%2c 124.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg id='%e9%a5%b1%e5%92%8c%e5%ba%a6-(1)' mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cg transform='translate(2.000000%2c 0.000000)'%3e %3cpath d='M6.28551136%2c15.9450284 C2.821875%2c15.9450284 0.0127840909%2c13.1268466 0.0127840909%2c9.67230114 C0.0127840909%2c5.09048295 5.24914773%2c0.00866477273 6.28551136%2c0.00866477273 C7.15823864%2c0.00866477273 12.5582386%2c5.39957386 12.5582386%2c9.67230114 C12.5582386%2c13.1268466 9.74914773%2c15.9450284 6.28551136%2c15.9450284 Z M6.26732955%2c1.21775568 C5.21278409%2c1.96321023 1.14914773%2c5.79957386 1.14914773%2c9.66321023 C1.14914773%2c12.4995739 3.45823864%2c14.8086648 6.29460227%2c14.8086648 C9.13096591%2c14.8086648 11.4400568%2c12.4995739 11.4400568%2c9.66321023 C11.4309659%2c6.2359375 7.30369318%2c2.04502841 6.26732955%2c1.21775568 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3cpath d='M9.20369318%2c6.91775568 C10.7764205%2c8.49048295 10.7764205%2c11.0450284 9.20369318%2c12.6177557 C7.63096591%2c14.190483 5.07642045%2c14.190483 3.50369318%2c12.6177557 L9.20369318%2c6.91775568 Z' id='%e8%b7%af%e5%be%84'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e6%94%be%e5%a4%a7%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-437.000000%2c -125.000000)'%3e %3cg id='%e6%94%be%e5%a4%a7' transform='translate(437.000000%2c 125.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg id='%e5%af%b9%e6%af%94%e5%ba%a6' mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cpath d='M2.25471549%2c13.5345736 L2.28377061%2c13.5698491 C3.71170509%2c15.0309327 5.68912337%2c15.9414593 7.8824479%2c15.9747872 L7.90975417%2c15.9750853 C10.0876767%2c15.988818 12.0717327%2c15.1310159 13.5224026%2c13.7355349 L13.5574794%2c13.6912368 C15.0213452%2c12.2613547 15.9294671%2c10.2834793 15.953216%2c8.07801203 C15.9769053%2c5.87765227 15.1116308%2c3.87626648 13.6789465%2c2.40995617 C12.2489055%2c0.958829251 10.2741105%2c0.0535890334 8.08152127%2c0.0199232337 L8.054215%2c0.0194677151 C5.86069173%2c0.00607137034 3.86417498%2c0.868563587 2.40521788%2c2.28856852 C0.946896739%2c3.72375685 0.0338461956%2c5.70596465 0.0101569293%2c7.90634429 C-0.0134329775%2c10.0976219 0.837115237%2c12.0836653 2.25471549%2c13.5345736 Z M8.67367358%2c1.27768049 C10.286452%2c1.44950722 11.7315969%2c2.17528929 12.8057027%2c3.27521081 L12.8101743%2c3.27525056 L12.8057027%2c3.27521081 C14.0068005%2c4.50975576 14.7514227%2c6.20240594 14.7313703%2c8.06481599 C14.7112582%2c9.93241304 13.9304662%2c11.5989096 12.7029763%2c12.8173769 L12.6725102%2c12.8468295 C11.5832608%2c13.8981403 10.127702%2c14.5878121 8.52895439%2c14.7198719 L8.67367358%2c1.27768049 Z M7.29456842%2c14.7066162 C6.99960518%2c14.6688366 6.70388674%2c14.6358664 6.42424602%2c14.5580416 L7.305479%2c13.6932043 L7.29456842%2c14.7066162 Z M7.31664792%2c12.655169 L5.61932747%2c14.3211687 C5.35725495%2c14.2186411 5.10778228%2c14.1065343 4.87090943%2c13.9751901 L7.32835345%2c11.5672908 L7.31664792%2c12.655169 L7.31664792%2c12.655169 Z M7.33948263%2c10.5341444 L4.20886184%2c13.5905772 C3.99188241%2c13.4490378 3.79237184%2c13.2931298 3.59790914%2c13.1165136 L7.35124779%2c9.44143698 L7.33948263%2c10.5341444 L7.33948263%2c10.5341444 Z M7.36247634%2c8.39823455 L3.0596539%2c12.6145077 C2.88230233%2c12.4284316 2.71542413%2c12.2330349 2.5667501%2c12.0178242 L7.37412224%2c7.31524528 L7.36247634%2c8.39823455 Z M7.38531104%2c6.27721 L2.16071359%2c11.3977495 C2.01426539%2c11.1672561 1.89530231%2c10.9274022 1.79380809%2c10.6783866 L7.3969967%2c5.19414125 L7.38531104%2c6.27721 L7.38531104%2c6.27721 Z M7.40816562%2c4.15584759 L1.5134718%2c9.91983307 C1.42966504%2c9.63568106 1.36076343%2c9.34198971 1.31408045%2c9.04817915 L7.41983141%2c3.0727987 L7.40816562%2c4.15584759 Z M3.26558364%2c3.17250431 C3.94068814%2c2.50868797 4.75868348%2c1.98561613 5.66915047%2c1.65295276 L1.69467882%2c5.54002052 C2.04222748%2c4.64447857 2.58529212%2c3.83556545 3.26558364%2c3.17250431 Z M7.06902349%2c1.30580157 C7.19108684%2c1.29187021 7.32002644%2c1.28326497 7.43928762%2c1.26440497 L7.43109971%2c2.02476702 L1.23742818%2c8.09337428 L1.23929629%2c7.91958009 C1.24287352%2c7.58679748 1.26860978%2c7.25951986 1.31737946%2c6.93695225 L7.06902349%2c1.30580157 L7.06902349%2c1.30580157 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e5%bd%a2%e7%8a%b6%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-525.000000%2c -124.000000)'%3e %3cg id='%e6%9b%9d%e5%85%89' transform='translate(525.000000%2c 124.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg mask='url(%23mask-2)' fill-rule='nonzero' id='%e5%bd%a2%e7%8a%b6'%3e %3cpath d='M2.6123501%2c13.1851491 L2.64065558%2c13.2166896 L2.6413572%2c13.2203755 C4.01642052%2c14.6273605 5.88331047%2c15.4443523 7.88790599%2c15.474817 L7.9129068%2c15.4750953 C9.90015586%2c15.4876256 11.7740345%2c14.7236019 13.1304117%2c13.4251429 L13.2081022%2c13.333556 C14.6189485%2c11.9554626 15.4315386%2c10.0884174 15.453245%2c8.0726293 C15.4749051%2c6.06074757 14.701873%2c4.17234442 13.3228152%2c2.76091268 C11.944524%2c1.36229865 10.0794546%2c0.550659153 8.07318152%2c0.519853677 L8.05116145%2c0.519458391 C6.04381797%2c0.507199088 4.15921827%2c1.27912879 2.7559335%2c2.64493708 C1.34678056%2c4.03173715 0.531741066%2c5.90419121 0.510127959%2c7.91172667 C0.488530813%2c9.91789572 1.24972356%2c11.7905061 2.6123501%2c13.1851491 Z' stroke='%23666666'%3e%3c/path%3e %3cpath d='M11.8970207%2c7.47681347 L9.88251295%2c7.47681347 C9.70012953%2c6.78873057 9.16126943%2c6.24158031 8.46489637%2c6.05919689 L8.46489637%2c4.04468912 C8.46489637%2c3.77111399 8.24106218%2c3.54727979 7.96748705%2c3.54727979 C7.69391192%2c3.54727979 7.47007772%2c3.77111399 7.47007772%2c4.04468912 L7.47007772%2c6.05919689 C6.78199482%2c6.24158031 6.23484456%2c6.78044041 6.05246114%2c7.47681347 L4.03795337%2c7.47681347 C3.76437824%2c7.47681347 3.54054404%2c7.70064767 3.54054404%2c7.9742228 C3.54054404%2c8.24779793 3.76437824%2c8.47163212 4.03795337%2c8.47163212 L6.05246114%2c8.47163212 C6.23484456%2c9.15971503 6.77370466%2c9.70686528 7.47007772%2c9.8892487 L7.47007772%2c11.9037565 C7.47007772%2c12.1773316 7.69391192%2c12.4011658 7.96748705%2c12.4011658 C8.24106218%2c12.4011658 8.46489637%2c12.1773316 8.46489637%2c11.9037565 L8.46489637%2c9.8892487 C9.15297927%2c9.70686528 9.70012953%2c9.16800518 9.88251295%2c8.47163212 L11.8970207%2c8.47163212 C12.1705959%2c8.47163212 12.3944301%2c8.24779793 12.3944301%2c7.9742228 C12.3944301%2c7.70064767 12.178886%2c7.47681347 11.8970207%2c7.47681347 Z M7.96748705%2c8.9607513 C7.42862694%2c8.9607513 6.9892487%2c8.52137306 6.9892487%2c7.98251295 C6.9892487%2c7.44365285 7.42862694%2c7.00427461 7.96748705%2c7.00427461 C8.50634715%2c7.00427461 8.94572539%2c7.44365285 8.94572539%2c7.98251295 C8.94572539%2c8.52137306 8.51463731%2c8.9607513 7.96748705%2c8.9607513 L7.96748705%2c8.9607513 Z' fill='%23666666'%3e%3c/path%3e %3cpath d='M10.1643782%2c6.27474093 C10.2887306%2c6.27474093 10.4213731%2c6.225 10.5125648%2c6.12551813 L11.0928756%2c5.54520725 C11.2835492%2c5.35453368 11.2835492%2c5.03950777 11.0928756%2c4.84054404 C10.9022021%2c4.64987047 10.5871762%2c4.64987047 10.3882124%2c4.84054404 L9.80790155%2c5.42085492 C9.61722798%2c5.6115285 9.61722798%2c5.9265544 9.80790155%2c6.12551813 C9.91567358%2c6.225 10.0400259%2c6.27474093 10.1643782%2c6.27474093 Z M5.42240933%2c6.13380829 C5.52189119%2c6.23329016 5.64624352%2c6.28303109 5.77059585%2c6.28303109 C5.89494819%2c6.28303109 6.02759067%2c6.23329016 6.11878238%2c6.13380829 C6.30945596%2c5.94313472 6.30945596%2c5.62810881 6.11878238%2c5.42914508 L5.5384715%2c4.8488342 C5.34779793%2c4.65816062 5.03277202%2c4.65816062 4.83380829%2c4.8488342 C4.64313472%2c5.03950777 4.64313472%2c5.35453368 4.83380829%2c5.55349741 L5.42240933%2c6.13380829 L5.42240933%2c6.13380829 Z M5.42240933%2c9.82292746 L4.84209845%2c10.4032383 C4.65142487%2c10.5939119 4.65142487%2c10.9089378 4.84209845%2c11.1079016 C4.94158031%2c11.2073834 5.06593264%2c11.2571244 5.19028497%2c11.2571244 C5.31463731%2c11.2571244 5.44727979%2c11.2073834 5.5384715%2c11.1079016 L6.11878238%2c10.5275907 C6.30945596%2c10.3369171 6.30945596%2c10.0218912 6.11878238%2c9.82292746 C5.92810881%2c9.63225389 5.6130829%2c9.63225389 5.42240933%2c9.82292746 L5.42240933%2c9.82292746 Z M10.5208549%2c9.82292746 C10.3301813%2c9.63225389 10.0151554%2c9.63225389 9.81619171%2c9.82292746 C9.62551813%2c10.013601 9.62551813%2c10.3286269 9.81619171%2c10.5275907 L10.3965026%2c11.1079016 C10.4959845%2c11.2073834 10.6203368%2c11.2571244 10.7446891%2c11.2571244 C10.8690415%2c11.2571244 11.0016839%2c11.2073834 11.0928756%2c11.1079016 C11.2835492%2c10.917228 11.2835492%2c10.6022021 11.0928756%2c10.4032383 L10.5208549%2c9.82292746 L10.5208549%2c9.82292746 Z' fill='%23666666'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='16px' height='16px' viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3c!-- Generator: Sketch 55.2 (78181) - https://sketchapp.com --%3e %3ctitle%3e%e6%94%be%e5%a4%a7%3c/title%3e %3cdesc%3eCreated with Sketch.%3c/desc%3e %3cdefs%3e %3crect id='path-1' x='0' y='0' width='16' height='16'%3e%3c/rect%3e %3c/defs%3e %3cg id='%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='icon-%e5%88%87%e5%9b%be' transform='translate(-350.000000%2c -125.000000)'%3e %3cg id='%e6%94%be%e5%a4%a7' transform='translate(350.000000%2c 125.000000)'%3e %3cmask id='mask-2' fill='white'%3e %3cuse xlink:href='%23path-1'%3e%3c/use%3e %3c/mask%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e%3c/g%3e %3cg mask='url(%23mask-2)' fill='%23666666' fill-rule='nonzero'%3e %3cpath d='M15.6609771%2c14.3520065 L13.3912778%2c12.0823072 C14.3805588%2c10.8144379 14.9758006%2c9.22447711 14.9758007%2c7.49438563 C14.9758007%2c3.36659478 11.617683%2c0.00889542279 7.48989215%2c0.00889542279 C3.3625196%2c0.00889542279 0.00482025735%2c3.36659476 0.00482025735%2c7.49438563 C0.00482025735%2c11.6221765 3.36251961%2c14.9802941 7.48989215%2c14.9802941 C9.15116518%2c14.9805622 10.764591%2c14.4240002 12.0723758%2c13.399536 L14.3420752%2c15.6700719 C14.706368%2c16.0359836 15.2981418%2c16.0378552 15.6647418%2c15.6742549 C16.0284092%2c15.3079133 16.0267247%2c14.7162714 15.6609771%2c14.3520065 L15.6609771%2c14.3520065 Z M1.42997059%2c7.49480392 C1.42997059%2c4.15341829 4.14850654%2c1.43530066 7.48989215%2c1.43530066 C10.8312778%2c1.43530066 13.5498137%2c4.15383662 13.5498137%2c7.49480392 C13.5498137%2c10.8357712 10.8312778%2c13.5547255 7.48989215%2c13.5547255 C4.14850653%2c13.5547255 1.42997059%2c10.8357713 1.42997059%2c7.49480392 Z' id='%e5%bd%a2%e7%8a%b6'%3e%3c/path%3e %3cpath d='M10.0122451%2c6.78201961 L8.20309478%2c6.78201961 L8.20309478%2c4.97203268 C8.20309478%2c4.59347059 7.88351309%2c4.28685621 7.48989215%2c4.28685621 C7.09627123%2c4.28685621 6.77710783%2c4.5930523 6.77710785%2c4.97203268 L6.77710785%2c6.78201961 L4.96753921%2c6.78201961 C4.58897711%2c6.78201961 4.28194445%2c7.10118301 4.28194445%2c7.49522222 C4.28194445%2c7.88884314 4.58814053%2c8.20842483 4.96753921%2c8.20842483 L6.77710785%2c8.20842483 L6.77710785%2c10.0179935 C6.77710785%2c10.3961372 7.09627125%2c10.7035882 7.48989215%2c10.7035882 C7.88351305%2c10.7035882 8.20309476%2c10.3965556 8.20309478%2c10.0179935 L8.20309478%2c8.20842483 L10.0122451%2c8.20842483 C10.3908072%2c8.20842483 10.6982582%2c7.88926143 10.6982582%2c7.49522222 C10.6982582%2c7.10118301 10.3908072%2c6.78201961 10.0122451%2c6.78201961 Z' id='%e8%b7%af%e5%be%84'%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3cg transform='translate(-1838 -1616)'%3e%3crect width='16' height='16' transform='translate(1838 1616)' fill='none'/%3e%3cpath d='M1%2c1V11H11V1H1M1%2c0H11a1%2c1%2c0%2c0%2c1%2c1%2c1V11a1%2c1%2c0%2c0%2c1-1%2c1H1a1%2c1%2c0%2c0%2c1-1-1V1A1%2c1%2c0%2c0%2c1%2c1%2c0Z' transform='translate(1840 1618)' fill='%23707070'/%3e%3cpath d='M9030-7951h-1v-3h3v1h-2Z' transform='translate(-7187 9574)' fill='%23999'/%3e%3cpath d='M9030-7951h-1v-3h3v1h-2Z' transform='translate(10878.999 -6326) rotate(180)' fill='%23999'/%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(34),o=n(204),c=n(52),l=n(46),s=n(28),u=n(78),d=n(29);var h,f=(h=a)&&"object"==typeof h&&"default"in h?h:{default:h},g=r.connect((function(e){var t,n,i=c.getCurrentStepInfo(null==(t=e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList);return{toolInstance:e.annotation.toolInstance,stepInfo:i}}),null,null,{context:d.LabelBeeContext})((function(e){var t,n=a.useState(0),r=i(n,2),c=(r[0],r[1]),d=a.useRef(null),h=e.toolInstance,g=s.useTranslation().t;if(a.useEffect((function(){return h&&h.singleOn("changeAttributeSidebar",(function(e){var t;c((function(e){return e+1})),d.current&&(null==(t=d.current.children[e])||t.scrollIntoView({block:"center"}))})),function(){null==h||h.unbindAll("changeAttributeSidebar")}}),[h,d]),!e.stepInfo)return null;var v=l.jsonParser(e.stepInfo.config),b=e.stepInfo.tool===u.EToolName.ScribbleTool;if(!0!==v.attributeConfigurable&&!b)return null;if((!0===v.attributeConfigurable||b)&&(null==v?void 0:v.attributeList)){var p=v.attributeList.map((function(e){return{label:e.key,value:e.value,color:null==e?void 0:e.color}}));b||p.unshift({label:g("NoAttribute"),value:""});return f.default.createElement("div",null,f.default.createElement(o.default,{list:p,attributeChanged:function(e){h.setDefaultAttribute(e),c((function(e){return e+1}))},selectedAttribute:null!=(t=null==h?void 0:h.defaultAttribute)?t:"",ref:d,forbidDefault:b}))}return null}));e.exports=g},function(e,t,n){"use strict";var i=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);var r,o=(r=a)&&"object"==typeof r&&"default"in r?r:{default:r},c=Object.defineProperty,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=function(e,t,n){return t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},h=function(e,t){for(var n in t||(t={}))s.call(t,n)&&d(e,n,t[n]);if(l){var a,r=i(l(t));try{for(r.s();!(a=r.n()).done;){n=a.value;u.call(t,n)&&d(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e};t.ColorTag=function(e){var t=e.color,n=e.style;return o.default.createElement("div",{style:h({display:"inline-block",height:14,width:14,backgroundColor:t,verticalAlign:"middle"},n)})}},function(e,t,n){"use strict";var i=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(204),r=n(426),o=n(59),c=n(30),l=n(50),s=n(0),u=n(203),d=n(202),h=n(32),f=n(34),g=n(28),v=n(29);var b,p=(b=s)&&"object"==typeof b&&"default"in b?b:{default:b},m=c.Collapse.Panel,y=function(e){var t=e.isActive;return p.default.createElement(o.CaretRightOutlined,{rotate:t?90:0})};var x=f.connect((function(e){return{toolInstance:e.annotation.toolInstance,imgIndex:e.annotation.imgIndex}}),null,null,{context:v.LabelBeeContext})((function(e){var t=e.toolInstance,n=e.imgIndex,o=s.useState([]),f=i(o,2),v=f[0],b=f[1],x=s.useRef(null),C=s.useState(0),w=i(C,2)[1],k=s.useState(-1),I=i(k,2),L=I[0],P=I[1],O=g.useTranslation().t;s.useEffect((function(){t&&(b(t.config.inputList.map((function(e){return e.value}))),t.singleOn("render",(function(){w((function(e){return e+1}))})))}),[t]),s.useEffect((function(){if(t&&(t.singleOn("expend",S),1===t.labelSelectedList.length)){for(var e=0,n=0;n<t.labelSelectedList[0];n++)e+=46,E[n]&&""!==v[n]&&E[n].subSelected.forEach((function(t){e+=40}));x.current&&(x.current.children[0].scrollTop=e)}})),s.useEffect((function(){x.current&&(x.current.children[0].scrollTop=0)}),[n]);var S=function(){var e,n=t.labelSelectedList[0],i=null==(e=E.filter((function(e,t){return t===n}))[0])?void 0:e.value;T(n,i,!0)},T=s.useCallback((function(e,t,n){var i=l.cloneDeep(v);""===i[e]||!0===n?i[e]=t:i[e]="",b(i)}),[v]);if(!t)return null;var A=t.labelSelectedList,E=t.config.inputList,D=t.currentTagResult,M=t.setLabel,N=function(e){return A.length>0&&A[0]===e?p.default.createElement("span",{className:"keyDownIconActive"},e+1):p.default.createElement("span",{className:"keyDownIcon"},e+1)},R=window.innerHeight-61-80;return p.default.createElement("div",{className:"tagOperationMenu",ref:x},0===(null==E?void 0:E.length)?p.default.createElement("div",{style:{padding:20,textAlign:"center"}},O("NoConfiguration")):p.default.createElement("div",{className:"main",style:{height:R}},function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n?n.map((function(n,o){var l,s,f,g,b;if(n.subSelected){var x=h.TagUtils.judgeResultIsInInputList(n.value,null==(l=null==D?void 0:D.result)?void 0:l[n.value],E);return p.default.createElement(c.Collapse,{bordered:!1,expandIcon:y,key:"collapse_".concat(o,"_").concat(i+1),onChange:function(){return T(o,n.value)},activeKey:[v[o]]},p.default.createElement(m,{header:p.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flex:1}},p.default.createElement("span",null,n.key,p.default.createElement(c.Tooltip,{placement:"bottom",title:O("ClearThisOption")},p.default.createElement("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(e){e.stopPropagation(),t.clearResult(!0,n.value)},src:L===o||x?d:u,onMouseEnter:function(){P(o)},onMouseLeave:function(){P(-1)}})),x&&""===v[o]&&p.default.createElement(c.Badge,{color:"#87d068"})),(null==E?void 0:E.length)>1&&N(o)),key:n.value},p.default.createElement("div",{className:"level",style:{backgroundColor:A.length>0&&A[0]===o?"rgba(158, 158, 158, 0.18)":""}},e(n.subSelected,o))))}var C=(null==E?void 0:E[i])?null==E?void 0:E[i].value:0,w=(null==(g=null==(f=null==(s=null==D?void 0:D.result)?void 0:s[C])?void 0:f.split(";"))?void 0:g.indexOf(n.value))>-1?n.value:"";return!0===(null==(b=null==E?void 0:E[i])?void 0:b.isMulti)?p.default.createElement("div",{className:"singleBar",key:"".concat(C,"_").concat(i,"_").concat(o)},p.default.createElement(r,{attributeChanged:function(){return M(i,o)},selectedAttribute:[w],list:[{value:n.value,label:n.key}],num:o+1})):p.default.createElement("div",{className:"singleBar",key:"".concat(C,"_").concat(i,"_").concat(o)},p.default.createElement(a.default,{forbidColor:!0,attributeChanged:function(){return M(i,o)},selectedAttribute:w,list:[{value:n.value,label:n.key}],num:o+1}))})):null}(E)))}));t.default=x,t.expandIconFuc=y},function(e,t,n){"use strict";var i=n(30),a=n(0);var r,o=(r=a)&&"object"==typeof r&&"default"in r?r:{default:r};e.exports=function(e){var t=o.default.useRef(null),n=e.list||[];return o.default.createElement("div",{className:"sensebee-checkbox-group"},o.default.createElement(i.Checkbox.Group,{name:"checkboxgroup",value:e.selectedAttribute,onChange:function(){return e.attributeChanged()}},n.map((function(n,a){var r;return o.default.createElement(i.Checkbox,{value:n.value,ref:t,onFocus:function(){var e;null==(e=null==t?void 0:t.current)||e.blur()},key:a},o.default.createElement("span",{className:"sensebee-checkbox-label",title:n.label},n.label),o.default.createElement("span",{className:"sensebee-checkbox-num"},null!=(r=null==e?void 0:e.num)?r:a))}))))}},function(e,t,n){"use strict";var i=n(31).default,a=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(34),c=n(50),l=n(46),s=n(30),u=n(32),d=n(55),h=n(238),f=n(28),g=n(29);var v,b=(v=r)&&"object"==typeof v&&"default"in v?v:{default:v},p=Object.defineProperty,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=function(e,t,n){return t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},w=u.cKeyCode.default,k=function(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},I=function(e){var t=e.textareaProps,n=e.footer;return b.default.createElement(b.default.Fragment,null,b.default.createElement(s.Input.TextArea,function(e,t){for(var n in t||(t={}))y.call(t,n)&&C(e,n,t[n]);if(m){var i,r=a(m(t));try{for(r.s();!(i=r.n()).done;)n=i.value,x.call(t,n)&&C(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({bordered:!1,rows:6,onKeyDown:k,onKeyUp:k},t)),b.default.createElement("div",{className:l.classnames({textAreaLength:!0})},n))},L=function(e){var t,n=r.useRef(null),a=r.useState(!1),o=i(a,2),c=o[0],s=o[1],u=r.useState(!1),d=i(u,2),h=d[0],g=d[1],v=f.useTranslation().t,p=e.disabled,m=e.config,y=e.result,x=e.updateText,C=e.index,k=e.switchToNextTextarea,L=e.hasMultiple,P=e.onNext,O=m.maxLength,S=y?y[m.key]:"",T=null!=(t=null==S?void 0:S.length)?t:0,A=function(e){x&&(x(e,m.key),m.required&&g(!e))},E=L&&k,D={id:"textInput-".concat(C),ref:n,disabled:p,value:S,maxLength:O,autoSize:{minRows:2,maxRows:6},onChange:function(e){var t=e.target.value;A(t)},onFocus:function(){s(!0)},onBlur:function(e){s(!1),m.required&&g(!e.target.value)},style:{resize:"none",wordBreak:"break-all"},onKeyDownCapture:function(e){e.ctrlKey&&e.keyCode===w.Enter&&(P&&P(),e.preventDefault()),e.keyCode===w.Tab&&E&&(e.preventDefault(),e.nativeEvent.stopImmediatePropagation(),k(C)),e.nativeEvent.stopPropagation()}},M=b.default.createElement("div",{className:"textAreaFooter"},b.default.createElement("div",{className:"hotkeyTip"},E&&b.default.createElement("span",null,"[".concat(v("Switch"),"]Tab")),b.default.createElement("span",null,"[".concat(v("TurnPage"),"]Ctrl+Enter"))),b.default.createElement("div",{className:"wordCount"},b.default.createElement("span",{className:T>=O?"warning":""},T),"/",b.default.createElement("span",null,O)));return r.useEffect((function(){p&&s(!1)}),[p]),b.default.createElement("div",{className:"textField"},b.default.createElement("div",{className:"label"},b.default.createElement("span",{className:l.classnames({required:m.required})},m.label),b.default.createElement("i",{className:l.classnames({clearText:!0,disabled:p}),onClick:function(){p||A("")}})),b.default.createElement("div",{className:l.classnames({disabled:p,"textarea-outline":!0,"ant-input-focused":c,textareaContainer:!0,focus:c,invalid:h})},b.default.createElement(I,{footer:M,textareaProps:D})))};var P=o.connect((function(e){return{toolInstance:e.annotation.toolInstance,imgIndex:e.annotation.imgIndex,step:e.annotation.step,basicResultList:e.annotation.basicResultList,stepList:e.annotation.stepList,triggerEventAfterIndexChanged:e.annotation.triggerEventAfterIndexChanged}}),null,null,{context:g.LabelBeeContext})((function(e){var t,n,a=e.toolInstance,o=e.imgIndex,l=e.dispatch,s=e.triggerEventAfterIndexChanged,u=e.step,f=e.stepList,g=e.basicResultList,v=r.useState([]),p=i(v,2),m=p[0],y=p[1],x=r.useState(0),C=i(x,2),w=C[0],k=C[1],I=r.useState(0),P=i(I,2)[1],O=function(e){var t=(e+1)%m.length;S(t)},S=function(e){setTimeout((function(){var t=document.getElementById("textInput-".concat(e));t&&(k(e),t.focus(),t.select(),t.scrollIntoView({behavior:"smooth",block:"center"}))}))};r.useEffect((function(){a&&(y(c.cloneDeep(a.config.configList)),a.singleOn("valueUpdated",(function(){P((function(e){return e+1}))})))}),[a]);var T=function(e,t){a.updateTextValue(t,e)};r.useEffect((function(){o>-1&&s&&S(0)}),[o]);var A=null!=(n=null==(t=a.textList[0])?void 0:t.value)?n:{},E=function(){l(d.PageForward(!0))},D=h.ConfigUtils.getStepConfig(f,u).dataSourceStep>0&&0===g.length;return b.default.createElement("div",{className:"textToolOperationMenu"},m.map((function(e,t){return b.default.createElement(L,{config:e,key:e.key,index:t,result:A,updateText:T,switchToNextTextarea:O,hasMultiple:m.length>1,focus:w===t,onNext:E,disabled:D})})))}));t.SingleTextInput=L,t.TextareaWithFooter=I,t.default=P},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(59),o=n(244),c=n(32),l=n(43),s=n(30),u=n(52),d=n(34),h=n(46),f=n(245),g=n(60),v=n(28),b=n(29),p=n(437),m=n(22),y=n(204),x=n(246);var C,w=(C=a)&&"object"==typeof C&&"default"in C?C:{default:C},k=function(e){var t=e.imgList,n=e.imgIndex,r=a.useContext(l.PointCloudContext),o=a.useState([]),c=i(o,2),u=c[0],d=c[1],h=v.useTranslation().t;a.useEffect((function(){var e=t,i=new Map;d(m.PointCloudUtils.getAllPointCloudResult({imgList:e,extraBoxList:f,ignoreIndexList:[n]}).filter((function(e){return!(!e.trackID||i.get(e.trackID))&&(i.set(e.trackID,!0),!0)})).sort((function(e,t){var n,i;return(null!=(n=null==e?void 0:e.trackID)?n:0)-(null!=(i=null==t?void 0:t.trackID)?i:0)})).map((function(e){var t;return null!=(t=null==e?void 0:e.trackID)?t:0})))}),[r.pointCloudBoxList,t]);var f=r.pointCloudBoxList;return w.default.createElement("div",{style:{padding:24,borderBottom:"1px solid #eee"}},w.default.createElement("div",{style:{marginBottom:16}},h("AllTrackIDs")),w.default.createElement("div",null,u.map((function(e){return w.default.createElement(s.Tag,{color:"#F3F4FF",key:e,style:{color:"#666",marginBottom:8}},e)}))))},I=function(){var e=a.useState(!1),t=i(e,2),n=t[0],o=t[1],c=a.useContext(l.PointCloudContext).pointCloudBoxList,u=g.useSingleBox(),d=u.selectedBox,h=u.updateSelectedBox,f=a.useState(""),b=i(f,2),m=b[0],y=b[1],x=v.useTranslation().t,C=null==d?void 0:d.info.trackID,k=function(e){return!!c.find((function(t){return t.trackID===e&&t.id!==(null==d?void 0:d.info.id)}))},I=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=parseInt(m,10);e&&o(!1),isNaN(t)?s.message.error(x("PositiveIntegerCheck")):m.indexOf(".")>-1?s.message.error(x("NotAllowDecimalPointsInTrackID")):k(t)?s.message.error(x("DuplicateTrackIDsExist")):t>0?h({trackID:t}):s.message.error(x("PositiveIntegerCheck"))};return a.useEffect((function(){o(!1)}),[C]),w.default.createElement("div",{style:{padding:24}},w.default.createElement("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"}},w.default.createElement("span",null,x("CurrentBoxTrackIDs")),C&&w.default.createElement(p,{id:C})),w.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n&&C?w.default.createElement(s.Input,{defaultValue:C,onChange:function(e){y(e.target.value)},disabled:!C,size:"small",onBlur:function(){I()},onPressEnter:function(){I(!0)}}):w.default.createElement("span",null,C),w.default.createElement(r.EditFilled,{style:{color:"#999",marginLeft:16,cursor:"undefined"!=typeof C?"pointer":"not-allowed"},onClick:function(){C&&o(!n)}})))},L=function(e){var t=e.attributeList,n=e.subAttributeList,i=e.toolInstance,r=g.useSingleBox().selectedBox,o=a.useContext(l.PointCloudContext),c=v.useTranslation().t,u=x.useAttribute().defaultAttribute,d={margin:"12px 20px 8px",fontSize:14,fontWeight:500,wordWrap:"break-word"},h=function(e,t){i.setSubAttribute(e,t)},f=t.map((function(e){return{label:e.key,value:e.value,color:null==e?void 0:e.color}}));return w.default.createElement("div",null,w.default.createElement("div",{style:{fontWeight:500,fontSize:14,margin:"12px 0 8px 20px"}},c("Attribute")),w.default.createElement(y.default,{list:f,forbidDefault:!0,selectedAttribute:null!=u?u:"",attributeChanged:function(e){return function(e){i.setDefaultAttribute(e)}(e)}}),w.default.createElement(s.Divider,{style:{margin:0}}),r&&w.default.createElement(w.default.Fragment,null,n.map((function(e){var t,n,i,a,r;return(null==e?void 0:e.subSelected)&&w.default.createElement("div",{style:{marginTop:12},key:e.value},w.default.createElement("div",{style:d},c("SubAttribute"),"-",e.key),(null==(t=e.subSelected)?void 0:t.length)<5?w.default.createElement(y.default,{list:e.subSelected.map((function(e){return{label:e.key,value:e.value}})),selectedAttribute:null==(i=null==(n=o.selectedPointCloudBox)?void 0:n.subAttribute)?void 0:i[e.value],num:"-",forbidColor:!0,forbidDefault:!0,attributeChanged:function(t){return h(e.value,t)},style:{marginBottom:12}}):w.default.createElement(s.Select,{style:{margin:"0px 21px 17px 16px",width:"87%"},value:null==(r=null==(a=o.selectedPointCloudBox)?void 0:a.subAttribute)?void 0:r[e.value],placeholder:c("PleaseSelect"),onChange:function(t){return h(e.value,t)},allowClear:!0},e.subSelected.map((function(e){return w.default.createElement(s.Select.Option,{key:e.value,value:e.value},e.key)}))),w.default.createElement(s.Divider,{style:{margin:0}}))}))))},P=d.connect((function(e){var t,n,i;return{stepInfo:u.getCurrentStepInfo(null==(t=e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList),toolInstance:null==(i=e.annotation)?void 0:i.toolInstance,imgList:e.annotation.imgList,imgIndex:e.annotation.imgIndex}}),null,null,{context:b.LabelBeeContext})((function(e){var t,n,i=e.stepInfo,a=e.toolInstance,r=e.imgList,l=e.imgIndex,u=f.useStatus(),d=u.updatePointCloudPattern,g=u.pointCloudPattern,v=h.jsonParser(i.config),b=null!=(t=null==v?void 0:v.attributeList)?t:[],p=!0===(null==v?void 0:v.secondaryAttributeConfigurable)&&null!=(n=null==v?void 0:v.inputList)?n:[];return w.default.createElement(w.default.Fragment,null,w.default.createElement(o.ToolIcons,{toolName:c.cTool.EPointCloudName.PointCloud,selectedToolName:g,onChange:function(e){return null==d?void 0:d(e)}}),!0===(null==v?void 0:v.trackConfigurable)&&w.default.createElement(w.default.Fragment,null,w.default.createElement(k,{imgList:r,imgIndex:l}),w.default.createElement(I,null),w.default.createElement(s.Divider,{style:{margin:0}})),w.default.createElement(L,{toolInstance:a,attributeList:b,subAttributeList:p}))}));e.exports=P},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_line' xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='20' height='20'/%3e %3cpath id='%e5%bd%a2%e7%8a%b6%e7%bb%93%e5%90%88' class='cls-2' d='M3.889%2c15.556V13.042l9.153-9.153h2.514V0H11.667V2.514L2.514%2c11.667H0v3.889Z' transform='translate(2.222 2.222)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M50.0005 17.7692L17.7697 50H20.0005H22.0005L22.0005 52V54.2545L54.255 22H52.0005H50.0005V20V17.7692ZM56.255 20L56.6707 19.5843L52.428 15.3417L52.0005 15.7692V20L56.255 20ZM20.0005 56.2545L20.0005 52H15.7697L15.4648 52.3048L19.7075 56.5475L20.0005 56.2545Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.125 1H8.875V5.5H11.125V1Z' fill='%23999999'/%3e%3cpath d='M11.125 14.5H8.875V19H11.125V14.5Z' fill='%23999999'/%3e%3cpath d='M14.5 8.96582V11.2158H19V8.96582H14.5Z' fill='%23999999'/%3e%3cpath d='M1 8.96582L1 11.2158H5.5V8.96582H1Z' fill='%23999999'/%3e%3cpath d='M10 13C11.6569 13 13 11.6569 13 10C13 8.34315 11.6569 7 10 7C8.34315 7 7 8.34315 7 10C7 11.6569 8.34315 13 10 13Z' fill='%23999999'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M39 8H33V62H39V8Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 33H8V39H64V33Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3crect x='28' y='28' width='16' height='16' rx='8' fill='%23666FFF' stroke='white' stroke-width='2'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M55 22H61V50H55V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 55L50 61L22 61L22 55L50 55Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath d='M64 52H52V64H64V52Z' fill='%23666FFF'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M50.0005 17.7692L17.7697 50H20.0005H22.0005L22.0005 52V54.2545L54.255 22H52.0005H50.0005V20V17.7692ZM56.255 20L56.6707 19.5843L52.428 15.3417L52.0005 15.7692V20L56.255 20ZM20.0005 56.2545L20.0005 52H15.7697L15.4648 52.3048L19.7075 56.5475L20.0005 56.2545Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M17 17H15V15H17V17ZM17 13H15V11H17V13ZM17 9H15V7H17V9ZM17 5H15V3H17V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15.4286V15H17V17ZM13.8571 17H12.2857V15H13.8571V17ZM10.7143 17H9.14286V15H10.7143V17ZM7.57143 17H6V15H7.57143V17Z' fill='%23999999'/%3e%3cpath d='M18 2H14V6H18V2Z' fill='%23999999'/%3e%3cpath d='M6 14H2V18H6V14Z' fill='%23999999'/%3e%3cpath d='M18 14H14V18H18V14Z' fill='%23999999'/%3e%3cpath d='M15.2236 3L16.6378 4.41421L4.4144 16.6377L3.00019 15.2234L15.2236 3Z' fill='%23999999'/%3e%3cpath d='M15 15L15 17L5 17L5 15L15 15Z' fill='%23999999'/%3e%3cpath d='M15 6H17V15H15V6Z' fill='%23999999'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M17 5H15.4286V3H17V5ZM13.8571 5H12.2857V3H13.8571V5ZM10.7143 5H9.14286V3H10.7143V5ZM7.57143 5H6V3H7.57143V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15V15H17V17ZM17 13H15V11H17V13ZM17 9H15V7H17V9ZM17 5H15V3H17V5Z' fill='%23999999'/%3e%3cpath d='M17 17H15.4286V15H17V17ZM13.8571 17H12.2857V15H13.8571V17ZM10.7143 17H9.14286V15H10.7143V17ZM7.57143 17H6V15H7.57143V17Z' fill='%23999999'/%3e%3cpath d='M6 2H2V6H6V2Z' fill='%23999999'/%3e%3cpath d='M18 2H14V6H18V2Z' fill='%23999999'/%3e%3cpath d='M6 14H2V18H6V14Z' fill='%23999999'/%3e%3cpath d='M18 14H14V18H18V14Z' fill='%23999999'/%3e%3cpath d='M5 6H3V15H5V6Z' fill='white'/%3e%3cpath d='M3 6H5V15H3V6Z' fill='%23999999'/%3e%3cpath d='M15 3L15 5L5 5L5 3L15 3Z' fill='%23999999'/%3e%3cpath d='M15 15L15 17L5 17L5 15L15 15Z' fill='%23999999'/%3e%3cpath d='M15 6H17V15H15V6Z' fill='%23999999'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='72' height='72' viewBox='0 0 72 72' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M20 8H8V20H20V8Z' fill='%23666FFF'/%3e%3cpath d='M11 22H17V50H11V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M55 22H61V50H55V22Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 55L50 61L22 61L22 55L50 55Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M50 11L50 17L22 17L22 11L50 11Z' fill='%23666FFF' fill-opacity='0.25'/%3e%3cpath d='M64 8H52V20H64V8Z' fill='%23666FFF'/%3e%3cpath d='M20 52H8V64H20V52Z' fill='%23666FFF'/%3e%3cpath d='M64 52H52V64H64V52Z' fill='%23666FFF'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(31).default,a=n(39).default,r=n(55),o=n(96),c=n(29),l=n(30),s=n(0),u=n(28),d=n(34);var h,f=(h=s)&&"object"==typeof h&&"default"in h?h:{default:h},g=Object.defineProperty,v=Object.defineProperties,b=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,x=function(e,t,n){return t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},C={labelCol:{span:8},wrapperCol:{span:16}},w={width:"80px"},k=d.connect((function(e){return{toolInstance:e.annotation.toolInstance,imgList:e.annotation.imgList,imgIndex:e.annotation.imgIndex,stepList:e.annotation.stepList}}),null,null,{context:c.LabelBeeContext})((function(e){var t=e.id,n=e.stepList,d=e.imgList,h=e.imgIndex,g=e.toolInstance,k=c.useDispatch(),I=s.useState(!1),L=i(I,2),P=L[0],O=L[1],S=l.Form.useForm(),T=i(S,1)[0],A=u.useTranslation().t,E=[{required:!0,message:A("PositiveIntegerCheck")}];return f.default.createElement(f.default.Fragment,null,f.default.createElement("a",{style:{color:"#666FFF"},onClick:function(){return O(!0)}},A("BatchUpdateText")),f.default.createElement(l.Modal,{title:A("BatchUpdateTrackID"),visible:P,onCancel:function(){return O(!1)},onOk:function(){return T.submit()},wrapClassName:"labelbee-custom-modal"},f.default.createElement(l.Form,function(e,t){return v(e,b(t))}(function(e,t){for(var n in t||(t={}))m.call(t,n)&&x(e,n,t[n]);if(p){var i,r=a(p(t));try{for(r.s();!(i=r.n()).done;)n=i.value,y.call(t,n)&&x(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},C),{form:T,onFinish:function(e){k(r.BatchUpdateTrackID({id:t,newID:e.newID,rangeIndex:[e.prevPage-1,e.nextPage-1],imgList:o.composeResultByToolInstance({toolInstance:g,imgList:d,imgIndex:h,stepList:n})})),O(!1)}}),f.default.createElement(l.Form.Item,{name:"id",label:A("CurrentBoxTrackIDs")},t),f.default.createElement(l.Form.Item,{name:"newID",label:A("TrackIDUnifyAs"),rules:E},f.default.createElement(l.InputNumber,{precision:0,min:1,style:w})),f.default.createElement(l.Form.Item,{label:A("UnifyTrackIDRange"),required:!0},f.default.createElement(l.Form.Item,{style:{display:"inline-block"},rules:E,name:"prevPage",noStyle:!0},f.default.createElement(l.InputNumber,{precision:0,min:1,style:w})),f.default.createElement("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}},"-"),f.default.createElement(l.Form.Item,{style:{display:"inline-block"},rules:E,name:"nextPage",noStyle:!0},f.default.createElement(l.InputNumber,{precision:0,min:1,style:w})),f.default.createElement("span",{style:{display:"inline-block",width:"40x",marginLeft:"10px",textAlign:"center"}},A("Page"))))))}));e.exports=k},function(e,t,n){"use strict";var i=n(85).default,a=n(30),r=n(0),o=n(439),c=n(440),l=n(441),s=n(442),u=n(34),d=n(240),h=n(61),f=n(29),g=n(28);var v,b=(v=r)&&"object"==typeof v&&"default"in v?v:{default:v},p=function(e,t){var n=[],i={};switch(e){case"width":n=[{step:1,value:"1"},{step:2,value:"2"},{step:3,value:"3"},{step:4,value:"4"},{step:5,value:"5"}];break;case"color":n=[{step:1,value:"Blue"},{step:3,value:"Cyan"},{step:5,value:"Green"},{step:7,value:"Yellow"},{step:9,value:"Pink"}];break;case"borderOpacity":n=[{step:1,value:"0.2"},{step:3,value:"0.4"},{step:5,value:"0.6"},{step:7,value:"0.8"},{step:9,value:"1.0"}];break;case"fillOpacity":n=[{step:1,value:"0"},{step:3,value:"0.2"},{step:5,value:"0.4"},{step:7,value:"0.6"},{step:9,value:"0.8"}]}return n.forEach((function(e){var n=e.step,a=e.value;i[n]={style:{color:"#999999",fontSize:"12px"},label:b.default.createElement("span",null,t(a))}})),i},m=function(e){switch(e){case"width":return o;case"color":return c;case"borderOpacity":return l;case"fillOpacity":return s}},y=function(e){switch(e){case"width":return 2;case"color":return 1;case"borderOpacity":case"fillOpacity":return 9}},x=function(e){return["width"].includes(e)},C=u.connect((function(e){return{toolStyle:e.toolStyle,config:e.annotation.toolInstance.config}}),null,null,{context:f.LabelBeeContext})((function(e){var t=e.toolStyle,n={width:t.width,color:t.color,borderOpacity:t.borderOpacity,fillOpacity:t.fillOpacity},r=g.useTranslation().t,o=e.config;return b.default.createElement("div",{className:"toolStyle"},Object.entries(n).map((function(e){var n,c=e[0];return!0===(null==o?void 0:o.attributeConfigurable)&&"color"===c?null:b.default.createElement("div",{id:"style-".concat(c),className:"styleSlider",key:c},b.default.createElement("span",{className:"title"},b.default.createElement("img",{src:m(c),className:"icon"}),r(function(e){switch(e){case"width":return"BorderThickness";case"color":return"Color";case"borderOpacity":return"BorderOpacity";case"fillOpacity":return"FillOpacity";default:return""}}(c))),b.default.createElement("span",{className:"slider"},b.default.createElement(a.Slider,{tipFormatter:null,max:x(c)?5:10,min:x(c)?1:0,step:x(c)?1:null,value:null!=(n=t[c])?n:y(c),marks:p(c,r),onChange:function(e){return function(e){h.store.dispatch(d.UpdateToolStyleConfig(e))}(i({},c,e))}})))})))}));e.exports=C},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2%2c .cls-4 %7b fill: none%3b %7d .cls-1 %7b stroke: %23707070%3b %7d .cls-3%2c .cls-5 %7b stroke: none%3b %7d .cls-5 %7b fill: %23ccc%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_border' transform='translate(0 -1.609)'%3e %3cg id='%e7%9f%a9%e5%bd%a2_162' data-name='%e7%9f%a9%e5%bd%a2 162' class='cls-1' transform='translate(0 1.609)'%3e %3crect class='cls-3' width='10' height='10'/%3e %3crect class='cls-4' x='0.5' y='0.5' width='9' height='9'/%3e %3c/g%3e %3cg id='%e8%81%94%e5%90%88_2' data-name='%e8%81%94%e5%90%88 2' class='cls-2' transform='translate(10987 5359.61)'%3e %3cpath class='cls-3' d='M-10982.4-5349v-3.6h-3.6v-.8h3.6v-3.6h.8v3.6h3.6v.8h-3.6v3.6Z'/%3e %3cpath class='cls-5' d='M -10981.6005859375 -5349 L -10982.3994140625 -5349 L -10982.3994140625 -5352.6005859375 L -10986.0009765625 -5352.6005859375 L -10986.0009765625 -5353.400390625 L -10982.3994140625 -5353.400390625 L -10982.3994140625 -5357.0009765625 L -10981.6005859375 -5357.0009765625 L -10981.6005859375 -5353.400390625 L -10977.9990234375 -5353.400390625 L -10977.9990234375 -5352.6005859375 L -10981.6005859375 -5352.6005859375 L -10981.6005859375 -5349 Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='12' height='12' viewBox='0 0 12 12'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23fafafa%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-5 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-6 %7b fill: %23999%3b %7d .cls-7 %7b clip-path: url(%23clip-path-3)%3b %7d .cls-8 %7b clip-path: url(%23clip-path-4)%3b %7d .cls-9 %7b clip-path: url(%23clip-path-5)%3b %7d .cls-10 %7b clip-path: url(%23clip-path-6)%3b %7d .cls-11 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_422' data-name='%e8%b7%af%e5%be%84 422' class='cls-1' d='M0-4H12V-16H0Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_424' data-name='%e8%b7%af%e5%be%84 424' class='cls-1' d='M11.759-9.6a.729.729%2c0%2c0%2c0%2c.729.729.729.729%2c0%2c0%2c0%2c.729-.729.729.729%2c0%2c0%2c0-.729-.729A.729.729%2c0%2c0%2c0%2c11.759-9.6Z' transform='translate(-11.759 10.33)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-3'%3e %3cpath id='%e8%b7%af%e5%be%84_426' data-name='%e8%b7%af%e5%be%84 426' class='cls-1' d='M9.031-12.726a.742.742%2c0%2c0%2c0%2c.742.742.742.742%2c0%2c0%2c0%2c.742-.742.742.742%2c0%2c0%2c0-.742-.742.742.742%2c0%2c0%2c0-.742.742Z' transform='translate(-9.031 13.469)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-4'%3e %3cpath id='%e8%b7%af%e5%be%84_428' data-name='%e8%b7%af%e5%be%84 428' class='cls-1' d='M4.727-12.239a.747.747%2c0%2c0%2c0%2c.747.747.747.747%2c0%2c0%2c0%2c.747-.747.747.747%2c0%2c0%2c0-.747-.747A.747.747%2c0%2c0%2c0%2c4.727-12.239Z' transform='translate(-4.727 12.986)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-5'%3e %3cpath id='%e8%b7%af%e5%be%84_430' data-name='%e8%b7%af%e5%be%84 430' class='cls-1' d='M2.362-8.573a.73.73%2c0%2c0%2c0%2c.365.632.73.73%2c0%2c0%2c0%2c.73%2c0%2c.73.73%2c0%2c0%2c0%2c.365-.632.73.73%2c0%2c0%2c0-.365-.632.73.73%2c0%2c0%2c0-.73%2c0%2c.73.73%2c0%2c0%2c0-.365.632Z' transform='translate(-2.362 9.303)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-6'%3e %3cpath id='%e8%b7%af%e5%be%84_432' data-name='%e8%b7%af%e5%be%84 432' class='cls-2' d='M5.887-4.052H5.873A5.888%2c5.888%2c0%2c0%2c1%2c0-10.018a5.922%2c5.922%2c0%2c0%2c1%2c6-5.931%2c5.853%2c5.853%2c0%2c0%2c1%2c6%2c5.335A3.662%2c3.662%2c0%2c0%2c1%2c9.645-7.28a6.77%2c6.77%2c0%2c0%2c1-2.439.232l-.122%2c0a.538.538%2c0%2c0%2c0-.154.408.342.342%2c0%2c0%2c0%2c.009.1.431.431%2c0%2c0%2c0%2c.046.048%2c1.36%2c1.36%2c0%2c0%2c1%2c.387%2c1.083A1.29%2c1.29%2c0%2c0%2c1%2c7-4.47%2c1.682%2c1.682%2c0%2c0%2c1%2c5.887-4.052ZM6-14.939a4.945%2c4.945%2c0%2c0%2c0-4.989%2c4.922A4.916%2c4.916%2c0%2c0%2c0%2c5.883-5.061c.22%2c0%2c.477-.063.477-.355%2c0-.274-.039-.315-.109-.388a1.093%2c1.093%2c0%2c0%2c1-.333-.841A1.319%2c1.319%2c0%2c0%2c1%2c7.077-8.064l.168%2c0A6.391%2c6.391%2c0%2c0%2c0%2c9.28-8.223a2.677%2c2.677%2c0%2c0%2c0%2c1.707-2.391A4.83%2c4.83%2c0%2c0%2c0%2c6-14.939Z' transform='translate(0 15.948)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_borderColor' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_670' data-name='%e7%bb%84 670' class='cls-3' transform='translate(0 -16)'%3e %3cpath id='%e8%b7%af%e5%be%84_421' data-name='%e8%b7%af%e5%be%84 421' class='cls-4' d='M-5-21H14.5V-1.5H-5Z' transform='translate(1.25 17.25)'/%3e %3c/g%3e %3cg id='%e7%bb%84_671' data-name='%e7%bb%84 671' class='cls-5' transform='translate(8.121 -11.61)'%3e %3cpath id='%e8%b7%af%e5%be%84_423' data-name='%e8%b7%af%e5%be%84 423' class='cls-6' d='M6.759-15.33H14.9v8.145H6.759Z' transform='translate(-10.103 11.986)'/%3e %3c/g%3e %3cg id='%e7%bb%84_672' data-name='%e7%bb%84 672' class='cls-7' transform='translate(6.765 -13.853)'%3e %3cpath id='%e8%b7%af%e5%be%84_425' data-name='%e8%b7%af%e5%be%84 425' class='cls-6' d='M4.031-18.469h8.291v8.291H4.031Z' transform='translate(-7.434 15.066)'/%3e %3c/g%3e %3cg id='%e7%bb%84_673' data-name='%e7%bb%84 673' class='cls-8' transform='translate(3.702 -13.515)'%3e %3cpath id='%e8%b7%af%e5%be%84_427' data-name='%e8%b7%af%e5%be%84 427' class='cls-6' d='M-.273-17.986H8.073V-9.64H-.273Z' transform='translate(-3.152 14.56)'/%3e %3c/g%3e %3cg id='%e7%bb%84_674' data-name='%e7%bb%84 674' class='cls-9' transform='translate(2.723 -10.881)'%3e %3cpath id='%e8%b7%af%e5%be%84_429' data-name='%e8%b7%af%e5%be%84 429' class='cls-6' d='M-2.638-14.3H5.512v8.149H-2.638Z' transform='translate(-0.707 10.958)'/%3e %3c/g%3e %3cg id='%e7%bb%84_675' data-name='%e7%bb%84 675' class='cls-10' transform='translate(0 -15.948)'%3e %3cpath id='%e8%b7%af%e5%be%84_431' data-name='%e8%b7%af%e5%be%84 431' class='cls-11' d='M-5-20.948H14.5V-1.568H-5Z' transform='translate(1.25 17.207)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='10.001' height='10.001' viewBox='0 0 10.001 10.001'%3e%3cg transform='translate(1.001 1)'%3e%3cg transform='translate(0 -1)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(0 7.334)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(9 0.334) rotate(90)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(0.666 0.334) rotate(90)' fill='none' stroke='%23ccc' stroke-width='1'%3e%3crect width='7.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='6.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(-1 -1)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(-1 7.333)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(7.333 -1)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3cg transform='translate(7.333 7.333)' fill='none' stroke='%23707070' stroke-width='1'%3e%3crect width='1.667' height='1.667' stroke='none'/%3e%3crect x='0.5' y='0.5' width='0.667' height='0.667' fill='none'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='9.999' height='9.999' viewBox='0 0 9.999 9.999'%3e%3cg transform='translate(0 0)'%3e%3crect width='3.333' height='3.333' transform='translate(0 0)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(0 6.667)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(6.666 0)' fill='%23ccc'/%3e%3crect width='3.333' height='3.333' transform='translate(3.333 3.333)' fill='%23707070'/%3e%3crect width='3.333' height='3.333' transform='translate(6.666 6.667)' fill='%23ccc'/%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(30),o=n(444),c=n(445),l=n(446),s=n(447),u=n(56),d=n(78),h=n(29);var f,g=(f=a)&&"object"==typeof f&&"default"in f?f:{default:f};e.exports=function(e){var t=e.onChange,n=h.useSelector((function(e){return e.annotation.toolInstance})),f=a.useState(20),v=i(f,2),b=v[0],p=v[1],m=a.useState(d.EScribblePattern.Scribble),y=i(m,2),x=y[0],C=y[1],w=function(){t(x,b)};return g.default.createElement("div",{className:u.getClassName("scribble")},g.default.createElement("div",{className:u.getClassName("scribble","select")},g.default.createElement("img",{src:x===d.EScribblePattern.Scribble?o:c,onClick:function(){C(d.EScribblePattern.Scribble),null==n||n.setPattern(d.EScribblePattern.Scribble),w()}}),g.default.createElement("img",{src:x===d.EScribblePattern.Erase?l:s,onClick:function(){C(d.EScribblePattern.Erase),null==n||n.setPattern(d.EScribblePattern.Erase),w()}})),g.default.createElement("div",{className:u.getClassName("scribble","silder")},g.default.createElement("span",{className:u.getClassName("scribble","circle")}),g.default.createElement(r.Slider,{onChange:function(e){p(e),w(),null==n||n.setPenSize(e)},min:1,max:50,style:{width:"60%"},value:b}),g.default.createElement("span",{className:u.getClassName("scribble","circle"),style:{width:"10px",height:"10px"}})))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='12' height='13' viewBox='0 0 12 13' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='9.07153' y='1' width='3' height='10' rx='1' transform='rotate(45 9.07153 1)' fill='%236272FB' /%3e %3cpath d='M1.06068 11.182L1.73311 8.67247L3.57023 10.5096L1.06068 11.182Z' fill='%236272FB' /%3e %3ccircle cx='11.0002' cy='1' r='1' fill='%236272FB' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='12' height='13' viewBox='0 0 12 13' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='9.07153' y='1' width='3' height='10' rx='1' transform='rotate(45 9.07153 1)' fill='%23BAB8B8' /%3e %3cpath d='M1.06068 11.182L1.73311 8.67247L3.57023 10.5096L1.06068 11.182Z' fill='%23BAB8B8' /%3e %3ccircle cx='11.0002' cy='1' r='1' fill='%23BAB8B8' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='10' height='10' viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='6.34875' y='0.353553' width='4.5' height='8.47848' rx='2.25' transform='rotate(45 6.34875 0.353553)' fill='%236272FB' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='1.74547' y1='4.60767' x2='4.92401' y2='8.46733' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='2.00061' y1='9.75' x2='10.0006' y2='9.75' stroke='%236272FB' stroke-width='0.5' /%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='10' height='10' viewBox='0 0 10 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3crect x='6.34875' y='0.353553' width='4.5' height='8.47848' rx='2.25' transform='rotate(45 6.34875 0.353553)' fill='%23E6E6E6' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='1.74547' y1='4.60767' x2='4.92401' y2='8.46733' stroke='%23BAB8B8' stroke-width='0.5' /%3e %3cline x1='2.00061' y1='9.75' x2='10.0006' y2='9.75' stroke='%23BAB8B8' stroke-width='0.5' /%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(0),a=n(206),r=n(52),o=n(29);var c,l=(c=i)&&"object"==typeof c&&"default"in c?c:{default:c};e.exports=function(){var e=o.useSelector((function(e){var t,n;return r.getCurrentStepInfo(null==(t=null==e?void 0:e.annotation)?void 0:t.step,null==(n=e.annotation)?void 0:n.stepList)}));return l.default.createElement(a.default,{toolName:null==e?void 0:e.tool})}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3crect width='16' height='16' fill='none'/%3e%3cg transform='translate(1 2)'%3e%3cpath d='M2%2c12a2.071%2c2.071%2c0%2c0%2c1-1.412-.54A1.791%2c1.791%2c0%2c0%2c1%2c0%2c10.151v-8.3A1.935%2c1.935%2c0%2c0%2c1%2c2.006%2c0h9.988A1.935%2c1.935%2c0%2c0%2c1%2c14%2c1.849v8.3a1.77%2c1.77%2c0%2c0%2c1-.588%2c1.308A2.075%2c2.075%2c0%2c0%2c1%2c12%2c12H2Zm1-3.692a.926.926%2c0%2c1%2c0%2c0%2c1.846H11a.926.926%2c0%2c1%2c0%2c0-1.846Zm7.273-3.692C10.2%2c4.616%2c10%2c4.67%2c10%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H11.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm-4%2c0C6.2%2c4.616%2c6%2c4.67%2c6%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H7.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm-4%2c0C2.2%2c4.616%2c2%2c4.67%2c2%2c4.8V6.221c0%2c.078%2c0%2c.241.268.241H3.8c.2%2c0%2c.2-.144.2-.213V4.828a.226.226%2c0%2c0%2c0-.236-.212Zm8-2.77c-.065%2c0-.268.054-.268.18V3.451c0%2c.078%2c0%2c.241.268.241H11.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Zm-4%2c0C6.2%2c1.846%2c6%2c1.9%2c6%2c2.026V3.451c0%2c.078%2c0%2c.241.268.241H7.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Zm-4%2c0C2.2%2c1.846%2c2%2c1.9%2c2%2c2.026V3.451c0%2c.078%2c0%2c.241.268.241H3.8c.2%2c0%2c.2-.143.2-.212V2.059a.226.226%2c0%2c0%2c0-.236-.213Z' fill='white'/%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='17' height='15' viewBox='0 0 17 15'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666fff%3b stroke-miterlimit: 10%3b %7d .cls-2%2c .cls-3 %7b stroke: none%3b %7d .cls-3 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_kj_h' transform='translate(1 1)'%3e %3cg id='%e5%9b%be%e6%a0%87_%e8%ae%be%e7%bd%ae_%e5%bf%ab%e6%8d%b7%e9%94%ae'%3e %3cg id='%e5%bd%a2%e7%8a%b6' class='cls-1'%3e %3cpath class='cls-2' d='M 2.142650127410889 13.49960994720459 L 2.14231014251709 13.49960994720459 L 2.141970157623291 13.49960994720459 C 1.443660259246826 13.49962043762207 0.7852402329444885 13.24412059783936 0.2880001962184906 12.78017997741699 C -0.2126297950744629 12.31418991088867 -0.4999997913837433 11.66413974761963 -0.4999997913837433 10.99709987640381 L -0.4999997913837433 2.003400325775146 C -0.4999997913837433 0.6230202317237854 0.6884301900863647 -0.4999997913837433 2.149200201034546 -0.4999997913837433 L 12.85109996795654 -0.4999997913837433 C 14.31187057495117 -0.4999997913837433 15.50030040740967 0.6230202317237854 15.50030040740967 2.003400325775146 L 15.50030040740967 10.99709987640381 C 15.49915027618408 11.6742000579834 15.21883010864258 12.30697059631348 14.71096038818359 12.77968978881836 C 14.2135705947876 13.24379062652588 13.55419063568115 13.49960041046143 12.85474014282227 13.49960041046143 L 2.149200201034546 13.49960041046143 L 2.142650127410889 13.49960994720459 Z M 3.208500146865845 9.5 C 2.89663028717041 9.5 2.642900228500366 9.724249839782715 2.642900228500366 9.999899864196777 C 2.642900228500366 10.27554988861084 2.89663028717041 10.49980068206787 3.208500146865845 10.49980068206787 L 11.79090023040771 10.49980068206787 C 12.10327053070068 10.49980068206787 12.35739994049072 10.27554988861084 12.35739994049072 9.999899864196777 C 12.35739994049072 9.724249839782715 12.10327053070068 9.5 11.79090023040771 9.5 L 3.208500146865845 9.5 Z M 11.21450042724609 6.500200271606445 L 12.35739994049072 6.500200271606445 L 12.35739994049072 5.500400066375732 L 11.21450042724609 5.500400066375732 L 11.21450042724609 6.500200271606445 Z M 6.928699970245361 6.500200271606445 L 8.071599960327148 6.500200271606445 L 8.071599960327148 5.500400066375732 L 6.928699970245361 5.500400066375732 L 6.928699970245361 6.500200271606445 Z M 2.642900228500366 6.500200271606445 L 3.785800218582153 6.500200271606445 L 3.785800218582153 5.500400066375732 L 2.642900228500366 5.500400066375732 L 2.642900228500366 6.500200271606445 Z M 11.21450042724609 3.499600172042847 L 12.35739994049072 3.499600172042847 L 12.35739994049072 2.499800205230713 L 11.21450042724609 2.499800205230713 L 11.21450042724609 3.499600172042847 Z M 6.928699970245361 3.499600172042847 L 8.071599960327148 3.499600172042847 L 8.071599960327148 2.499800205230713 L 6.928699970245361 2.499800205230713 L 6.928699970245361 3.499600172042847 Z M 2.642900228500366 3.499600172042847 L 3.785800218582153 3.499600172042847 L 3.785800218582153 2.499800205230713 L 2.642900228500366 2.499800205230713 L 2.642900228500366 3.499600172042847 Z'/%3e %3cpath class='cls-3' d='M 2.141960144042969 12.99960994720459 L 2.149200201034546 12.99960041046143 L 12.85474014282227 12.99960041046143 C 13.4271297454834 12.99960041046143 13.96537017822266 12.79152011871338 14.37030029296875 12.41370010375977 C 14.77565002441406 12.03639984130859 14.99939060211182 11.53330039978027 15.00030040740967 10.99709987640381 L 15.00030040740967 2.003400325775146 C 15.00030040740967 0.8987202048301697 14.03617000579834 2.188110386214248e-07 12.85109996795654 2.188110386214248e-07 L 2.149200201034546 2.188110386214248e-07 C 0.9641302227973938 2.188110386214248e-07 2.037048290048915e-07 0.8987202048301697 2.037048290048915e-07 2.003400325775146 L 2.037048290048915e-07 10.99709987640381 C 2.037048290048915e-07 11.52581024169922 0.2293002009391785 12.04246044158936 0.6291002035140991 12.41460037231445 C 1.033440232276917 12.79186058044434 1.570720195770264 12.99962043762207 2.141960144042969 12.99960994720459 M 3.208500146865845 9 L 11.79090023040771 9 C 12.3789701461792 9 12.85739994049072 9.448550224304199 12.85739994049072 9.999899864196777 C 12.85739994049072 10.55125045776367 12.3789701461792 10.99980068206787 11.79090023040771 10.99980068206787 L 3.208500146865845 10.99980068206787 C 2.620930194854736 10.99980068206787 2.142900228500366 10.55125045776367 2.142900228500366 9.999899864196777 C 2.142900228500366 9.448550224304199 2.620930194854736 9 3.208500146865845 9 M 11.00160026550293 5.000400066375732 L 12.60449981689453 5.000400066375732 C 12.79372024536133 5.000400066375732 12.85739994049072 5.157999992370605 12.85739994049072 5.229900360107422 L 12.85739994049072 6.769800186157227 C 12.85739994049072 6.844580173492432 12.85739994049072 7.000200271606445 12.64050006866455 7.000200271606445 L 11.00160026550293 7.000200271606445 C 10.71450042724609 7.000200271606445 10.71450042724609 6.823920249938965 10.71450042724609 6.739200115203857 L 10.71450042724609 5.19480037689209 C 10.71450042724609 5.058890342712402 10.9323902130127 5.000400066375732 11.00160026550293 5.000400066375732 M 6.715800285339355 5.000400066375732 L 8.318699836730957 5.000400066375732 C 8.507920265197754 5.000400066375732 8.571599960327148 5.157999992370605 8.571599960327148 5.229900360107422 L 8.571599960327148 6.769800186157227 C 8.571599960327148 6.844580173492432 8.571599960327148 7.000200271606445 8.354700088500977 7.000200271606445 L 6.715800285339355 7.000200271606445 C 6.428699970245361 7.000200271606445 6.428699970245361 6.823920249938965 6.428699970245361 6.739200115203857 L 6.428699970245361 5.19480037689209 C 6.428699970245361 5.058890342712402 6.646590232849121 5.000400066375732 6.715800285339355 5.000400066375732 M 2.430000305175781 5.000400066375732 L 4.032900333404541 5.000400066375732 C 4.22212028503418 5.000400066375732 4.285799980163574 5.157999992370605 4.285799980163574 5.229900360107422 L 4.285799980163574 6.769800186157227 C 4.285799980163574 6.844580173492432 4.285799980163574 7.000200271606445 4.068900108337402 7.000200271606445 L 2.430000305175781 7.000200271606445 C 2.142900228500366 7.000200271606445 2.142900228500366 6.823920249938965 2.142900228500366 6.739200115203857 L 2.142900228500366 5.19480037689209 C 2.142900228500366 5.058890342712402 2.360790252685547 5.000400066375732 2.430000305175781 5.000400066375732 M 11.00160026550293 1.999800205230713 L 12.60449981689453 1.999800205230713 C 12.79372024536133 1.999800205230713 12.85739994049072 2.158020257949829 12.85739994049072 2.230200290679932 L 12.85739994049072 3.770100116729736 C 12.85739994049072 3.844590187072754 12.85739994049072 3.999600172042847 12.64050006866455 3.999600172042847 L 11.00160026550293 3.999600172042847 C 10.71450042724609 3.999600172042847 10.71450042724609 3.823320150375366 10.71450042724609 3.738600254058838 L 10.71450042724609 2.1951003074646 C 10.71450042724609 2.058560132980347 10.9323902130127 1.999800205230713 11.00160026550293 1.999800205230713 M 6.715800285339355 1.999800205230713 L 8.318699836730957 1.999800205230713 C 8.507920265197754 1.999800205230713 8.571599960327148 2.158020257949829 8.571599960327148 2.230200290679932 L 8.571599960327148 3.770100116729736 C 8.571599960327148 3.844590187072754 8.571599960327148 3.999600172042847 8.354700088500977 3.999600172042847 L 6.715800285339355 3.999600172042847 C 6.428699970245361 3.999600172042847 6.428699970245361 3.823320150375366 6.428699970245361 3.738600254058838 L 6.428699970245361 2.1951003074646 C 6.428699970245361 2.058560132980347 6.646590232849121 1.999800205230713 6.715800285339355 1.999800205230713 M 2.430000305175781 1.999800205230713 L 4.032900333404541 1.999800205230713 C 4.22212028503418 1.999800205230713 4.285799980163574 2.158020257949829 4.285799980163574 2.230200290679932 L 4.285799980163574 3.770100116729736 C 4.285799980163574 3.844590187072754 4.285799980163574 3.999600172042847 4.068900108337402 3.999600172042847 L 2.430000305175781 3.999600172042847 C 2.142900228500366 3.999600172042847 2.142900228500366 3.823320150375366 2.142900228500366 3.738600254058838 L 2.142900228500366 2.1951003074646 C 2.142900228500366 2.058560132980347 2.360790252685547 1.999800205230713 2.430000305175781 1.999800205230713 M 2.143340110778809 13.99960994720459 L 2.142660140991211 13.99960994720459 L 2.141980171203613 13.99960994720459 C 1.316610217094421 13.99962043762207 0.537050187587738 13.69639015197754 -0.05309979617595673 13.14577007293701 C -0.654549777507782 12.58592987060547 -0.9999998211860657 11.80247020721436 -0.9999998211860657 10.99709987640381 L -0.9999998211860657 2.003400325775146 C -0.9999998211860657 0.3473202288150787 0.4127302169799805 -0.9999997615814209 2.149200201034546 -0.9999997615814209 L 12.85109996795654 -0.9999997615814209 C 14.58757019042969 -0.9999997615814209 16.00029945373535 0.3473202288150787 16.00029945373535 2.003400325775146 L 16.00029945373535 10.99709987640381 C 15.99890995025635 11.81510066986084 15.66200065612793 12.57754039764404 15.0516300201416 13.14568042755127 C 14.46177005767822 13.6960506439209 13.68125057220459 13.99960041046143 12.85474014282227 13.99960041046143 L 2.149200201034546 13.99960041046143 L 2.143340110778809 13.99960994720459 Z'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(452),a=n(453),r=n(102),o=n(454),c=n(103),l=n(455),s=n(138),u=n(79),d={name:"AnnotateRect",icon:i,shortCut:[r,r]},h={name:"AnnotateInvalidRect",icon:a,shortCut:[r,"Ctrl",r]},f={name:"SelectRect",icon:o,shortCut:[c],noticeInfo:"RightClick"},g={name:"ToggleRectEffectiveness",icon:l,shortCut:["F"]},v={name:"ToggleRectEffectiveness",icon:l,shortCut:["Ctrl",r]},b={name:"DeleteRect",icon:s,shortCut:[c],noticeInfo:"SelectAndDoubleClick"},p=[d,h,f,g,v,b,u.revoke,u.restore,u.rotate,u.scale,u.backward,u.forward,u.dargWithRightClick,u.tabChangeSelected,u.tabReverseChangeSelected];t.changeValid=g,t.changeValidByClick=v,t.default=p,t.deleteRect=b,t.drawInvalidRect=h,t.drawRect=d,t.selectRect=f},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_27' data-name='%e8%b7%af%e5%be%84 27' class='cls-1' d='M3.5-16v.874h7V-16H14v3.5h-.875v7H14V-2H10.5v-.875h-7V-2H0V-5.5H.875v-7H0V-16Zm0%2c2.624v.876H2.625v7H3.5v.875h7V-5.5h.875v-7H10.5v-.875Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_26' data-name='%e8%b7%af%e5%be%84 26' class='cls-2' d='M-1747%2c836H-67V-109H-1747Z' transform='translate(1747 109)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frame_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cg id='%e7%bb%84_25' data-name='%e7%bb%84 25' class='cls-3' transform='translate(0 -16)'%3e %3cg id='%e7%bb%84_24' data-name='%e7%bb%84 24' class='cls-4' transform='translate(-1528.625 -81.375)'%3e %3cpath id='%e8%b7%af%e5%be%84_25' data-name='%e8%b7%af%e5%be%84 25' class='cls-5' d='M-5-21H17.75V1.75H-5Z' transform='translate(1529.25 98)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2%2c .cls-6 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d .cls-6 %7b stroke: %23666%3b %7d .cls-7 %7b stroke: none%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_27' data-name='%e8%b7%af%e5%be%84 27' class='cls-1' d='M3.5-16v.874h7V-16H14v3.5h-.875v7H14V-2H10.5v-.875h-7V-2H0V-5.5H.875v-7H0V-16Zm0%2c2.624v.876H2.625v7H3.5v.875h7V-5.5h.875v-7H10.5v-.875Z' transform='translate(0 16)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_26' data-name='%e8%b7%af%e5%be%84 26' class='cls-2' d='M-1747%2c836H-67V-109H-1747Z' transform='translate(1747 109)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frameNull_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_131' data-name='%e7%9f%a9%e5%bd%a2 131' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3cg id='%e7%bb%84_25' data-name='%e7%bb%84 25' class='cls-3' transform='translate(0 -16)'%3e %3cg id='%e7%bb%84_24' data-name='%e7%bb%84 24' class='cls-4' transform='translate(-1528.625 -81.375)'%3e %3cpath id='%e8%b7%af%e5%be%84_25' data-name='%e8%b7%af%e5%be%84 25' class='cls-5' d='M-5-21H17.75V1.75H-5Z' transform='translate(1529.25 98)'/%3e %3c/g%3e %3c/g%3e %3cg id='%e7%9f%a9%e5%bd%a2_92' data-name='%e7%9f%a9%e5%bd%a2 92' class='cls-6' transform='translate(1.699 -12.97) rotate(-45)'%3e %3crect class='cls-7' width='1.6' height='13'/%3e %3crect class='cls-2' x='0.5' y='0.5' width='0.6' height='12'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666%3b %7d .cls-2 %7b fill: none%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_frameActive_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_2' data-name='%e5%87%8f%e5%8e%bb 2' class='cls-1' d='M1768.5%2c9503H1765v-3.5h.875v-7H1765V9489h3.5v.873l7%2c0V9489h3.5v3.5h-.875v4.5h-1.75v-4.5h-.873v-.873l-7%2c0v.875h-.873v7h.873v.873h4.5v1.751h-4.5V9503Z' transform='translate(-1765 -9505)'/%3e %3cpath id='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd_4' data-name='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd 4' class='cls-1' d='M2.628%2c0%2c5.256%2c5.256%2c2.632%2c4.129%2c0%2c5.256Z' transform='translate(7.667 -6.406) rotate(-30)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23666%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_399' data-name='%e8%b7%af%e5%be%84 399' class='cls-2' d='M2.139-17.789H7.33L8-17.12H3.813l1.172%2c1.34h-1ZM7.5-18.627H2.306l-.67-.669H5.823l-1.172-1.34h1L7.5-18.627Z' transform='translate(-1.636 20.636)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_frameChange_kj' transform='translate(1 17)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_120' data-name='%e7%9f%a9%e5%bd%a2 120' class='cls-2' width='16' height='16' transform='translate(-1 -17)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_93' data-name='%e7%9f%a9%e5%bd%a2 93' class='cls-2' width='14' height='14' transform='translate(0 -16)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_2' data-name='%e5%87%8f%e5%8e%bb 2' class='cls-1' d='M1768.5%2c9503H1765v-3.5h.875v-7H1765V9489h3.5v.873l7%2c0V9489h3.5v3.5h-.875v4.933l-1.75.025V9492.5h-.873v-.873l-7%2c0v.875h-.873v7h.873v.873h3.841l1.391%2c1.751H1768.5V9503Z' transform='translate(-1765 -9505)'/%3e %3cg id='%e7%bb%84_647' data-name='%e7%bb%84 647' transform='translate(7 14)'%3e %3cg id='%e7%bb%84_646' data-name='%e7%bb%84 646' class='cls-3' transform='translate(1.636 -20.636)'%3e %3cpath id='%e8%b7%af%e5%be%84_398' data-name='%e8%b7%af%e5%be%84 398' class='cls-1' d='M-3.364-25.636H6.07v7.927H-3.364Z' transform='translate(1.829 24.101)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_cencel_kj' transform='translate(0.494)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='15.963' transform='translate(-0.494)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.057%2c3.54C8.654%2c7.1%2c4.678%2c7.648.279%2c5.143A.544.544%2c0%2c0%2c1%2c0%2c4.662a.578.578%2c0%2c0%2c1%2c.283-.493A.548.548%2c0%2c0%2c1%2c.84%2c4.163C4.822%2c6.431%2c8.263%2c5.956%2c11.318%2c2.722L8.918.065%2c13.99%2c0l-.072%2c5.6Z' transform='translate(10.937 16) rotate(-138)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_reform_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='15.963'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.057%2c3.148C8.654-.415%2c4.678-.96.279%2c1.546A.544.544%2c0%2c0%2c0%2c0%2c2.027a.578.578%2c0%2c0%2c0%2c.283.493.548.548%2c0%2c0%2c0%2c.557.005C4.822.257%2c8.263.733%2c11.318%2c3.967l-2.4%2c2.657%2c5.072.065-.072-5.6Z' transform='translate(0.094 11.029) rotate(-42)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b clip-rule: evenodd%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_274' data-name='%e8%b7%af%e5%be%84 274' class='cls-1' d='M1.732-140.268a5.914%2c5.914%2c0%2c0%2c1%2c8.364%2c0%2c5.916%2c5.916%2c0%2c0%2c1%2c.581%2c7.69L14-129.255%2c12.745-128l-3.323-3.323a5.916%2c5.916%2c0%2c0%2c1-7.69-.581A5.914%2c5.914%2c0%2c0%2c1%2c1.732-140.268Zm7.528.836a4.732%2c4.732%2c0%2c0%2c0-6.691%2c0%2c4.732%2c4.732%2c0%2c0%2c0%2c0%2c6.691%2c4.732%2c4.732%2c0%2c0%2c0%2c6.691%2c0A4.732%2c4.732%2c0%2c0%2c0%2c9.26-139.431Z' transform='translate(0 142)'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_273' data-name='%e8%b7%af%e5%be%84 273' class='cls-2' d='M-29-160.285H-9.285V-180H-29Z' transform='translate(29 180)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_loupe_kj' transform='translate(4 144)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_110' data-name='%e7%9f%a9%e5%bd%a2 110' class='cls-2' width='16' height='16' transform='translate(-4 -144)'/%3e %3cg id='%e7%bb%84_470' data-name='%e7%bb%84 470' class='cls-3' transform='translate(-3 -143)'%3e %3cg id='%e7%bb%84_469' data-name='%e7%bb%84 469' class='cls-4' transform='translate(-2.859 -3.746)'%3e %3cpath id='%e8%b7%af%e5%be%84_272' data-name='%e8%b7%af%e5%be%84 272' class='cls-5' d='M-5-147H9.986v14.986H-5Z' transform='translate(7.366 150.253)'/%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_mouse_middle_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23ccc%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5%2c .cls-7 %7b fill: %23ff5770%3b %7d .cls-5 %7b opacity: 0%3b %7d .cls-6 %7b fill: white%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3crect id='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%92%99%e7%89%88-2' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.345%2c15.68H4.637A4.809%2c4.809%2c0%2c0%2c1%2c0%2c10.726v-3.8H9.982v3.8A4.809%2c4.809%2c0%2c0%2c1%2c5.345%2c15.68Zm5.007-9.7H5.331V0A5.758%2c5.758%2c0%2c0%2c1%2c8.885%2c1.267%2c3.8%2c3.8%2c0%2c0%2c1%2c10.352%2c4.19V5.98Zm-5.821%2c0H-.481V4.19A3.806%2c3.806%2c0%2c0%2c1%2c.983%2c1.267%2c5.74%2c5.74%2c0%2c0%2c1%2c4.531%2c0V5.98Z' transform='translate(0 0)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='%e7%9f%a9%e5%bd%a2'%3e %3crect id='%e8%92%99%e7%89%88-3' data-name='%e8%92%99%e7%89%88' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%92%99%e7%89%88-4' data-name='%e8%92%99%e7%89%88' class='cls-2' d='M5.881%2c15.68H5.1A5.035%2c5.035%2c0%2c0%2c1%2c0%2c10.726v-3.8H10.983v3.8A5.035%2c5.035%2c0%2c0%2c1%2c5.881%2c15.68Zm4.969-9.7H5.865V0A5.69%2c5.69%2c0%2c0%2c1%2c9.394%2c1.267%2c3.813%2c3.813%2c0%2c0%2c1%2c10.849%2c4.19V5.98Zm-5.864%2c0H0V4.19A3.813%2c3.813%2c0%2c0%2c1%2c1.455%2c1.267%2c5.692%2c5.692%2c0%2c0%2c1%2c4.985%2c0V5.98Z' transform='translate(2.5 0.219)'/%3e %3cg id='%e7%9f%a9%e5%bd%a2-3' data-name='%e7%9f%a9%e5%bd%a2' class='cls-4' transform='translate(2.998 0.219)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-4' data-name='%e7%9f%a9%e5%bd%a2' class='cls-5' width='5.4' height='6.676' transform='translate(-0.698 -0.234)'/%3e %3c/g%3e %3c/g%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-6' d='M1.925%2c5h-.1A1.764%2c1.764%2c0%2c0%2c1%2c0%2c3.286V1.714A1.764%2c1.764%2c0%2c0%2c1%2c1.823%2c0h.1A1.764%2c1.764%2c0%2c0%2c1%2c3.748%2c1.714V3.238A1.771%2c1.771%2c0%2c0%2c1%2c1.925%2c5Z' transform='translate(6.125 3.254)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e %3cpath id='%e8%b7%af%e5%be%84-3' data-name='%e8%b7%af%e5%be%84' class='cls-7' d='M1.026%2c3.717H.972A1.15%2c1.15%2c0%2c0%2c1%2c0%2c2.442V1.274A1.15%2c1.15%2c0%2c0%2c1%2c.972%2c0h.054A1.15%2c1.15%2c0%2c0%2c1%2c2%2c1.274V2.407A1.167%2c1.167%2c0%2c0%2c1%2c1.026%2c3.717Z' transform='translate(7 3.919)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_321' data-name='%e8%b7%af%e5%be%84 321' class='cls-1' d='M0%2c0H16V-16H0Z'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_323' data-name='%e8%b7%af%e5%be%84 323' class='cls-1' d='M5.344-14.625H1.875a.5.5%2c0%2c0%2c0-.5.5v3.5a.251.251%2c0%2c0%2c0%2c.25.25h.75a.251.251%2c0%2c0%2c0%2c.25-.25v-2.75H5.344a.251.251%2c0%2c0%2c0%2c.25-.25v-.75A.251.251%2c0%2c0%2c0%2c5.344-14.625Zm9.031%2c9h-.75a.251.251%2c0%2c0%2c0-.25.25v2.75H10.656a.251.251%2c0%2c0%2c0-.25.25v.75a.251.251%2c0%2c0%2c0%2c.25.25h3.469a.5.5%2c0%2c0%2c0%2c.5-.5v-3.5A.251.251%2c0%2c0%2c0%2c14.375-5.625Zm-9.031%2c3H2.625v-2.75a.251.251%2c0%2c0%2c0-.25-.25h-.75a.251.251%2c0%2c0%2c0-.25.25v3.5a.5.5%2c0%2c0%2c0%2c.5.5H5.344a.251.251%2c0%2c0%2c0%2c.25-.25v-.75A.251.251%2c0%2c0%2c0%2c5.344-2.625Zm8.781-12H10.656a.251.251%2c0%2c0%2c0-.25.25v.75a.251.251%2c0%2c0%2c0%2c.25.25h2.719v2.75a.251.251%2c0%2c0%2c0%2c.25.25h.75a.251.251%2c0%2c0%2c0%2c.25-.25v-3.5A.5.5%2c0%2c0%2c0%2c14.125-14.625Z'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_fullView_kj' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_567' data-name='%e7%bb%84 567' class='cls-2'%3e %3cpath id='%e8%b7%af%e5%be%84_320' data-name='%e8%b7%af%e5%be%84 320' class='cls-3' d='M-5-21H21V5H-5Z'/%3e %3c/g%3e %3cg id='%e7%bb%84_568' data-name='%e7%bb%84 568' class='cls-4'%3e %3cpath id='%e8%b7%af%e5%be%84_322' data-name='%e8%b7%af%e5%be%84 322' class='cls-5' d='M-3.625-19.625h23.25V3.625H-3.625Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_reload_kj' transform='translate(-1 -1.432)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16' transform='translate(1 1.432)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M12.917%2c1.955l-.9.735A6.615%2c6.615%2c0%2c0%2c0%2c6.72%2c0%2c6.86%2c6.86%2c0%2c0%2c0%2c0%2c6.992%2c6.864%2c6.864%2c0%2c0%2c0%2c6.72%2c14a6.745%2c6.745%2c0%2c0%2c0%2c6.315-4.6.135.135%2c0%2c0%2c0-.078-.172L12.05%2c8.9a.127.127%2c0%2c0%2c0-.162.08c-.029.083-.061.167-.094.248a5.722%2c5.722%2c0%2c0%2c1-1.18%2c1.823%2c5.511%2c5.511%2c0%2c0%2c1-1.749%2c1.23%2c5.32%2c5.32%2c0%2c0%2c1-4.283%2c0%2c5.459%2c5.459%2c0%2c0%2c1-1.749-1.23A5.722%2c5.722%2c0%2c0%2c1%2c1.653%2c9.23a5.979%2c5.979%2c0%2c0%2c1%2c0-4.463%2c5.722%2c5.722%2c0%2c0%2c1%2c1.18-1.823%2c5.511%2c5.511%2c0%2c0%2c1%2c1.749-1.23%2c5.32%2c5.32%2c0%2c0%2c1%2c4.283%2c0%2c5.459%2c5.459%2c0%2c0%2c1%2c1.749%2c1.23%2c5.678%2c5.678%2c0%2c0%2c1%2c.445.523L10.1%2c4.25a.135.135%2c0%2c0%2c0%2c.048.235l2.81.717a.13.13%2c0%2c0%2c0%2c.158-.128l.013-3.015a.129.129%2c0%2c0%2c0-.208-.1Z' transform='translate(2 2.432)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg xmlns='http://www.w3.org/2000/svg' class='icon' viewBox='0 0 1024 1024'%3e %3cpath d='M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_last_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M.163%2c6.632%2c7.735.1a.428.428%2c0%2c0%2c1%2c.7.368V13.53a.428.428%2c0%2c0%2c1-.7.368L.163%2c7.368A.5.5%2c0%2c0%2c1%2c.163%2c6.632Z' transform='translate(4 1)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_next_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M8.268%2c6.632.7.1A.428.428%2c0%2c0%2c0%2c0%2c.47V13.53a.428.428%2c0%2c0%2c0%2c.7.368l7.572-6.53A.5.5%2c0%2c0%2c0%2c8.268%2c6.632Z' transform='translate(4 1)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M8.4-7.469a.381.381%2c0%2c0%2c1%2c.382.382h0V-2.15a.381.381%2c0%2c0%2c1-.382.382H2.1a.381.381%2c0%2c0%2c1-.382-.382h0V-7.087A.381.381%2c0%2c0%2c1%2c2.1-7.469H8.4Zm-.525.906H2.627v3.887H7.874Z' transform='translate(-1.721 7.469)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M16.812-10.1a4.782%2c4.782%2c0%2c0%2c0-1.839%2c3.751l-.763%2c0a.093.093%2c0%2c0%2c0-.073.15l1.2%2c1.526a.094.094%2c0%2c0%2c0%2c.147%2c0L16.694-6.2a.093.093%2c0%2c0%2c0-.073-.15H15.86a4.019%2c4.019%2c0%2c0%2c1%2c.03-.463%2c3.888%2c3.888%2c0%2c0%2c1%2c.461-1.419%2c3.9%2c3.9%2c0%2c0%2c1%2c1.005-1.173%2c3.884%2c3.884%2c0%2c0%2c1%2c1.381-.693%2c3.887%2c3.887%2c0%2c0%2c1%2c1.488-.106c.064.008.129.017.192.029v-.893A4.752%2c4.752%2c0%2c0%2c0%2c16.812-10.1Z' transform='translate(-14.118 11.118)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='c'%3e%3cpath d='M13.382-15.3A.381.381%2c0%2c0%2c1%2c13-15.682h0v-4.937A.381.381%2c0%2c0%2c1%2c13.382-21h6.3a.381.381%2c0%2c0%2c1%2c.382.382h0v4.937a.381.381%2c0%2c0%2c1-.382.382h-6.3Zm.525-.906h5.247v-3.887H13.906Z' transform='translate(-13 21)' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='d'%3e%3cpath d='M4.583-12.907a4.782%2c4.782%2c0%2c0%2c0%2c1.839-3.751l.763%2c0a.093.093%2c0%2c0%2c0%2c.073-.15l-1.2-1.526a.094.094%2c0%2c0%2c0-.147%2c0L4.7-16.809a.093.093%2c0%2c0%2c0%2c.073.15h.762a4.017%2c4.017%2c0%2c0%2c1-.03.463%2c3.888%2c3.888%2c0%2c0%2c1-.461%2c1.419A3.9%2c3.9%2c0%2c0%2c1%2c4.039-13.6a3.884%2c3.884%2c0%2c0%2c1-1.381.693%2c3.887%2c3.887%2c0%2c0%2c1-1.488.106c-.064-.008-.129-.017-.192-.029v.893A4.752%2c4.752%2c0%2c0%2c0%2c4.583-12.907Z' transform='translate(-0.978 18.372)' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(0)'%3e%3crect width='16' height='16' transform='translate(0)' fill='none'/%3e%3cg transform='translate(0 0.294)'%3e%3cg transform='translate(8.374)' clip-path='url(%23a)'%3e%3cpath d='M-3.279-12.469H11.412V.863H-3.279Z' transform='translate(-0.537 8.653)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(0 2.005)' clip-path='url(%23b)'%3e%3cpath d='M9.118-2.007V-16.118H23.049V-2.007Z' transform='translate(-12.934 12.302)' fill='%23666'/%3e%3c/g%3e%3crect width='6' height='5' transform='translate(0.327 10.603)' fill='%23ccc'/%3e%3cg transform='translate(0.093 10.006)' clip-path='url(%23c)'%3e%3cpath d='M22.691-12.669H8V-26H22.691Z' transform='translate(-11.816 22.184)' fill='%23666'/%3e%3c/g%3e%3cg transform='translate(9.701 7.221)' clip-path='url(%23d)'%3e%3cpath d='M9.909-23.372V-9.261H-4.022V-23.372Z' transform='translate(0.206 19.556)' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath d='M0%2c0H16V-16H0Z' fill='none'/%3e%3c/clipPath%3e%3cclipPath id='b'%3e%3cpath d='M13.958-11.417l-2.541-2.541a1%2c1%2c0%2c0%2c0-.708-.292H2.25a.5.5%2c0%2c0%2c0-.5.5v11.5a.5.5%2c0%2c0%2c0%2c.5.5h11.5a.5.5%2c0%2c0%2c0%2c.5-.5v-8.461A1%2c1%2c0%2c0%2c0%2c13.958-11.417ZM6-13.25h4v1.75H6ZM8-4.594a2.251%2c2.251%2c0%2c0%2c1-2.25-2.25A2.251%2c2.251%2c0%2c0%2c1%2c8-9.094a2.251%2c2.251%2c0%2c0%2c1%2c2.25%2c2.25A2.251%2c2.251%2c0%2c0%2c1%2c8-4.594Zm0-3.5a1.25%2c1.25%2c0%2c0%2c0-1.25%2c1.25A1.25%2c1.25%2c0%2c0%2c0%2c8-5.594a1.25%2c1.25%2c0%2c0%2c0%2c1.25-1.25A1.25%2c1.25%2c0%2c0%2c0%2c8-8.094Z' fill='none'/%3e%3c/clipPath%3e%3c/defs%3e%3cg transform='translate(0 16)'%3e%3cg clip-path='url(%23a)'%3e%3cpath d='M-5-21H21V5H-5Z' fill='rgba(0%2c0%2c0%2c0)'/%3e%3c/g%3e%3cg clip-path='url(%23b)'%3e%3cpath d='M-3.25-19.25h22.5V3.25H-3.25Z' fill='%23666'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineSpecial_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23ccc%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='%e8%b7%af%e5%be%84_607' data-name='%e8%b7%af%e5%be%84 607' class='cls-1' d='M12.564%2c4.659l-8.833%2c9.22h8.833Z' transform='translate(0 -1)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(5.604 11.916) rotate(-135)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(8.115 9.239) rotate(-135)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M0%2c0H1.5l.011%2c1.686H.011Z' transform='translate(10.625 6.561) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='7' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-5' width='1.5' height='8' transform='translate(4.75 13.5) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d .cls-3 %7b clip-path: url(%23clip-path)%3b %7d .cls-4 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_492' data-name='%e8%b7%af%e5%be%84 492' class='cls-1' d='M0%2c2H16V-14H0Z' transform='translate(0 14)'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_noDisplay' transform='translate(0 15)'%3e %3cg id='%e7%bb%84_817' data-name='%e7%bb%84 817' class='cls-3' transform='translate(0 -15)'%3e %3cpath id='%e8%b7%af%e5%be%84_491' data-name='%e8%b7%af%e5%be%84 491' class='cls-4' d='M-5-19H21V7H-5Z' transform='translate(0 15)'/%3e %3c/g%3e %3cpath id='%e5%87%8f%e5%8e%bb_1' data-name='%e5%87%8f%e5%8e%bb 1' class='cls-2' d='M7.114%2c9.861a7.321%2c7.321%2c0%2c0%2c1-3.965-1.19A8.865%2c8.865%2c0%2c0%2c1%2c.159%2c5.522a1.179%2c1.179%2c0%2c0%2c1%2c0-1.181%2c8.865%2c8.865%2c0%2c0%2c1%2c2.989-3.15c.1-.065.206-.128.311-.188l1.51%2c1.628a2.682%2c2.682%2c0%2c0%2c0-.27%2c1.2.42.42%2c0%2c0%2c0%2c.111.292.351.351%2c0%2c0%2c0%2c.267.119.367.367%2c0%2c0%2c0%2c.274-.119.414.414%2c0%2c0%2c0%2c.111-.292%2c1.928%2c1.928%2c0%2c0%2c1%2c.086-.582L9.065%2c7.047a3.241%2c3.241%2c0%2c0%2c1-1.949.623A3.325%2c3.325%2c0%2c0%2c1%2c4.6%2c6.545%2c3.852%2c3.852%2c0%2c0%2c1%2c3.556%2c3.836%2c3.98%2c3.98%2c0%2c0%2c1%2c4.04%2c1.91%2c8.1%2c8.1%2c0%2c0%2c0%2c1.015%2c4.931a8.574%2c8.574%2c0%2c0%2c0%2c2.647%2c2.8%2c6.217%2c6.217%2c0%2c0%2c0%2c3.451%2c1.04A6.16%2c6.16%2c0%2c0%2c0%2c10%2c8.057l.755.814A7.261%2c7.261%2c0%2c0%2c1%2c7.114%2c9.861Zm4.659-1.67h0l-.739-.8A8.7%2c8.7%2c0%2c0%2c0%2c13.21%2c4.931%2c8.088%2c8.088%2c0%2c0%2c0%2c10.185%2c1.91a3.981%2c3.981%2c0%2c0%2c1%2c.484%2c1.926%2c3.868%2c3.868%2c0%2c0%2c1-.751%2c2.357L6.295%2c2.286a1.512%2c1.512%2c0%2c0%2c1%2c.818-.23.357.357%2c0%2c0%2c0%2c.27-.12.409.409%2c0%2c0%2c0%2c.111-.292.417.417%2c0%2c0%2c0-.111-.292.355.355%2c0%2c0%2c0-.27-.12%2c2.2%2c2.2%2c0%2c0%2c0-1.368.46L4.6.46A7.088%2c7.088%2c0%2c0%2c1%2c7.114%2c0a7.321%2c7.321%2c0%2c0%2c1%2c3.965%2c1.19%2c8.85%2c8.85%2c0%2c0%2c1%2c2.989%2c3.15%2c1.179%2c1.179%2c0%2c0%2c1%2c0%2c1.181%2c8.821%2c8.821%2c0%2c0%2c1-2.295%2c2.669Z' transform='translate(1.088 -11.738)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_235' data-name='%e7%9f%a9%e5%bd%a2 235' class='cls-2' width='1.166' height='18.662' transform='matrix(0.719%2c -0.695%2c 0.695%2c 0.719%2c 0.745%2c -12.953)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: white%3b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_playPause' transform='translate(0.16 0.16)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='16' height='16' transform='translate(-0.16 -0.16)'/%3e %3cg id='%e7%bb%84_1221' data-name='%e7%bb%84 1221' transform='translate(1.84 3.671)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M6.038%2c3.829.508.059A.32.32%2c0%2c0%2c0%2c0%2c.271V7.813a.32.32%2c0%2c0%2c0%2c.508.212l5.53-3.771A.249.249%2c0%2c0%2c0%2c6.038%2c3.829Z' transform='translate(1 0)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_400' data-name='%e7%9f%a9%e5%bd%a2 400' class='cls-2' width='1.524' height='7.618' rx='0.762' transform='translate(6.828 0.233)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_401' data-name='%e7%9f%a9%e5%bd%a2 401' class='cls-2' width='1.524' height='7.618' rx='0.762' transform='translate(9.718 0.233)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_forward_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1225' data-name='%e7%bb%84 1225' transform='translate(-0.347 0.145)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M6%2c3.807.505.058A.318.318%2c0%2c0%2c0%2c0%2c.27v7.5a.318.318%2c0%2c0%2c0%2c.505.211L6%2c4.229A.248.248%2c0%2c0%2c0%2c6%2c3.807Z' transform='translate(2.348 3.855)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M6%2c3.807.505.058A.318.318%2c0%2c0%2c0%2c0%2c.27v7.5a.318.318%2c0%2c0%2c0%2c.505.211L6%2c4.229A.248.248%2c0%2c0%2c0%2c6%2c3.807Z' transform='translate(7.824 3.855)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_back_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1224' data-name='%e7%bb%84 1224' transform='translate(-0.347 0.145)'%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M.118%2c3.807%2c5.615.058A.318.318%2c0%2c0%2c1%2c6.12.27v7.5a.318.318%2c0%2c0%2c1-.505.211L.118%2c4.229A.248.248%2c0%2c0%2c1%2c.118%2c3.807Z' transform='translate(7.824 3.855)'/%3e %3cpath id='%e8%b7%af%e5%be%84-2' data-name='%e8%b7%af%e5%be%84' class='cls-2' d='M.118%2c3.807%2c5.615.058A.318.318%2c0%2c0%2c1%2c6.12.27v7.5a.318.318%2c0%2c0%2c1-.505.211L.118%2c4.229A.248.248%2c0%2c0%2c1%2c.118%2c3.807Z' transform='translate(2.348 3.855)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_speed_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_1223' data-name='%e7%bb%84 1223' transform='translate(-0.118 0.286)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_402' data-name='%e7%9f%a9%e5%bd%a2 402' class='cls-2' width='1.5' height='6' rx='0.75' transform='translate(8.118 12.043) rotate(90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_403' data-name='%e7%9f%a9%e5%bd%a2 403' class='cls-2' width='1.5' height='4' rx='0.75' transform='translate(6.118 9.043) rotate(90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_404' data-name='%e7%9f%a9%e5%bd%a2 404' class='cls-2' width='1.5' height='3' rx='0.75' transform='translate(5.118 6.043) rotate(90)'/%3e %3cpath id='%e5%80%8d%e9%80%9f' class='cls-2' d='M219.687%2c4.153H217.4L218.806.2a.267.267%2c0%2c0%2c0%2c.017-.084.278.278%2c0%2c0%2c0-.289-.269h-2.872a.28.28%2c0%2c0%2c0-.269.186l-2.312%2c6.454a.267.267%2c0%2c0%2c0-.017.084.278.278%2c0%2c0%2c0%2c.289.269h2.552l-.541%2c4.539c0%2c.008-.008.02-.008.029a.278.278%2c0%2c0%2c0%2c.289.269.285.285%2c0%2c0%2c0%2c.253-.157l4.042-6.986a.248.248%2c0%2c0%2c0%2c.029-.111.272.272%2c0%2c0%2c0-.281-.273Z' transform='translate(-206.065 1.862)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(474),a=n(475),r=n(476),o=n(138),c=n(102),l=n(103),s=n(79),u={name:"AnnotatePoint",icon:i,shortCut:[c]},d={name:"AnnotateInvalidPoint",icon:a,shortCut:["Ctrl",c]},h={name:"SelectPoint",icon:r,shortCut:[l],noticeInfo:"RightClick"},f={name:"DeletePoint",icon:o,shortCut:["Del"]},g=[u,d,h,f,s.revoke,s.restore,s.rotate,s.scale,s.backward,s.forward,s.dargWithRightClick,s.tabChangeSelected,s.tabReverseChangeSelected];t.default=g,t.deletePoint=f,t.drawInvalidPoint=d,t.drawPoint=u,t.selectPoint=h},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_point_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3ccircle id='%e6%a4%ad%e5%9c%86%e5%bd%a2' class='cls-2' cx='2.392' cy='2.392' r='2.392' transform='translate(4.811 4.811)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_pointNull_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d .cls-3%2c .cls-5 %7b fill: none%3b %7d .cls-3 %7b stroke: %23666%3b %7d .cls-4 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3ccircle id='%e6%a4%ad%e5%9c%86%e5%bd%a2' class='cls-2' cx='2.392' cy='2.392' r='2.392' transform='translate(4.811 4.811)'/%3e %3c/g%3e %3cg id='%e7%9f%a9%e5%bd%a2_92' data-name='%e7%9f%a9%e5%bd%a2 92' class='cls-3' transform='translate(2.757 4.089) rotate(-45)'%3e %3crect class='cls-4' width='1.6' height='13'/%3e %3crect class='cls-5' x='0.5' y='0.5' width='0.6' height='12'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_pointActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='icon_point_active' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bc%96%e7%bb%84_14' data-name='%e7%bc%96%e7%bb%84 14' transform='translate(0.797 0.797)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='1.794' height='3.588' transform='translate(6.306)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.794' height='3.588' transform='translate(6.306 10.818)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_12' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 12' class='cls-2' width='1.794' height='3.588' transform='translate(10.818 8.173) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_13' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 13' class='cls-2' width='1.794' height='3.588' transform='translate(0 8.173) rotate(-90)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_3' data-name='%e5%87%8f%e5%8e%bb 3' class='cls-2' d='M1506.068%2c9508.987a2.393%2c2.393%2c0%2c1%2c1%2c2.391-2.394l-1.919%2c0v2.345A2.436%2c2.436%2c0%2c0%2c1%2c1506.068%2c9508.987Z' transform='translate(-1498.865 -9499.393)'/%3e %3c/g%3e %3cpath id='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd_4' data-name='%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a4%87%e4%bb%bd 4' class='cls-2' d='M2.628%2c0%2c5.256%2c5.256%2c2.632%2c4.129%2c0%2c5.256Z' transform='translate(7.139 9.595) rotate(-30)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16.707' height='16' viewBox='0 0 16.707 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-1%2c .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d .cls-1%2c .cls-3 %7b stroke-miterlimit: 10%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b stroke: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_polygonNull_kj' transform='translate(0 -2)'%3e %3cg id='icon_line' transform='translate(10)'%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-1' width='1.499' height='15.5' transform='translate(-6.021 6.04) rotate(-45)'/%3e %3c/g%3e %3cg id='icon_polygonNull_kj-2' data-name='icon_polygonNull_kj' transform='translate(0 2)'%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_10' data-name='%e5%87%8f%e5%8e%bb 10' class='cls-4' d='M18500.451%2c2801h-6v-1.5h4.514l1.488%2c1.487%2c0%2c.012Zm-5.148-1.584h0l-1.059-1.058%2c1.783-1.789%2c1.061%2c1.059-1.785%2c1.788Zm7.895-2.75%2c0%2c0-1.5-1.5V2792.5h1.5v4.166Zm-2.578-2.579h0l-1.061-1.06%2c1.047-1.051%2c1.064%2c1.059-1.051%2c1.052Z' transform='translate(-18489.699 -2787.496)'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-3 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-4' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-4' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonChange_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %23ccc%3b %7d .cls-2 %7b fill: none%3b %7d .cls-3 %7b fill: white%3b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3cpath id='%e5%87%8f%e5%8e%bb_12' data-name='%e5%87%8f%e5%8e%bb 12' class='cls-1' d='M18493%2c2716.574l0%2c0%2c8.451-8.572.242%2c4.933h-3.889v3.513l-4.8.129Z' transform='translate(-18489.408 -2704.132)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_11' data-name='%e5%87%8f%e5%8e%bb 11' class='cls-5' d='M18496.65%2c2716.5H18493V2715h3.65v1.5Zm5.1-4.7h-1.5V2708h1.5v3.8Z' transform='translate(-18488.25 -2703)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonDel_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_polygonInsert_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2%2c .cls-3 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-3' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(9.222 9.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-4' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_255' data-name='%e7%9f%a9%e5%bd%a2 255' class='cls-5' width='1.5' height='6' transform='translate(12 5)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_261' data-name='%e7%9f%a9%e5%bd%a2 261' class='cls-5' width='1.5' height='6' transform='translate(4.75 13.5) rotate(-90)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect opacity='0.01' width='16' height='16' fill='black'/%3e%3crect x='13.5' y='9.49963' width='7' height='7' transform='rotate(180 13.5 9.49963)' fill='%23CCCCCC' stroke='%23666666'/%3e%3crect x='9.5' y='13.4996' width='7' height='7' transform='rotate(180 9.5 13.4996)' fill='%23CCCCCC' stroke='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect opacity='0.01' width='16' height='16' fill='black'/%3e%3cpath d='M10.002 9.52532H9.50201V10.0253V13.5406L2.50202 13.5406L2.50202 6.51493L6.00397 6.51493H6.50397V6.01493L6.50397 2.49963L13.5001 2.49963L13.5001 9.52532H10.002Z' fill='%23CCCCCC' stroke='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(250),a=n(102),r=n(485),o=n(486),c=n(487),l=n(103),s=n(488),u=n(138),d=n(251),h=n(489),f=n(490),g=n(252),v=n(79),b={name:"AnnotateLine",icon:i,shortCut:[a]},p={name:"AnnotateInvalidLine",icon:r,shortCut:["Ctrl",a]},m={name:"HorizontalOrVertical",icon:o,shortCut:["Shift",a]},y={name:"SelectLine",icon:c,shortCut:[l]},x={name:"ToggleLineEffectiveness",icon:s,shortCut:["F"]},C={name:"DeleteLine",icon:u,noticeInfo:"SelectAndDoubleClick",shortCut:[l]},w={name:"ContinueToLabel",icon:d,noticeInfo:"Select",shortCut:["Space"]},k={name:"InsertPoint",icon:h,noticeInfo:"ClickOnLine",shortCut:[a]},I={name:"DeletePoint",icon:f,noticeInfo:"DblClickOnPoint",shortCut:[l]},L={name:"StopAdsorption",icon:g,noticeInfo:"Press",shortCut:["Alt"]},P=[b,p,m,y,x,C,w,v.changeSpecialLine,k,I,L,v.revoke,v.restore,v.rotate,v.scale,v.backward,v.forward,v.setValid,v.dargWithRightClick,v.dargWithLeftClick,v.hidden,v.tabChangeSelected,v.tabReverseChangeSelected];t.changeLineAttribute=x,t.default=P,t.deleteLine=C,t.deletePoint=I,t.horizontalLine=m,t.insertPoint=k,t.invalidLine=p,t.keepLine=w,t.line=b,t.selectLine=y,t.suspendAbsorption=L},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineNull_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b stroke: rgba(0%2c0%2c0%2c0)%3b stroke-miterlimit: 10%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3cpath id='%e5%87%8f%e5%8e%bb_6' data-name='%e5%87%8f%e5%8e%bb 6' class='cls-2' d='M14710.063%2c1373.254h0l-1.063-1.059%2c2.184-2.182%2c1.062%2c1.061-2.18%2c2.181Zm5.009-5.009h0l-1.061-1.06%2c2.417-2.415%2c1.06%2c1.06-2.414%2c2.415Z' transform='translate(-14705.021 -1360.788)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.499' height='7.5' transform='translate(4.979 6.04) rotate(-45)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_straightLine_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: %23666%3b stroke: rgba(0%2c0%2c0%2c0)%3b stroke-miterlimit: 10%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%bb%84_955' data-name='%e7%bb%84 955' transform='translate(-0.721)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(12.721 9.721) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(1.721 9.723) rotate(-90)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-2' width='1.5' height='10.5' transform='translate(3.471 9.002) rotate(-90)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineActive_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: %23666%3b %7d .cls-4 %7b fill: white%3b stroke: %23707070%3b %7d .cls-5 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3cg id='%e7%9f%a9%e5%bd%a2_254' data-name='%e7%9f%a9%e5%bd%a2 254' class='cls-2' transform='translate(1.22 1.22)'%3e %3crect class='cls-5' width='14.4' height='14.4'/%3e %3crect class='cls-1' x='0.5' y='0.5' width='13.4' height='13.4'/%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' width='1.5' height='10.5' transform='translate(5.04 12.465) rotate(-135)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-4' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-4' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineChange_kj' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: %23666%3b %7d .cls-4 %7b clip-path: url(%23clip-path)%3b %7d .cls-5 %7b fill: white%3b stroke: %23707070%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_399' data-name='%e8%b7%af%e5%be%84 399' class='cls-1' d='M2.139-17.789H7.33L8-17.12H3.813l1.172%2c1.34h-1ZM7.5-18.627H2.306l-.67-.669H5.823l-1.172-1.34h1L7.5-18.627Z' transform='translate(-1.636 20.636)'/%3e %3c/clipPath%3e %3c/defs%3e %3cpath id='%e8%b7%af%e5%be%84_599' data-name='%e8%b7%af%e5%be%84 599' class='cls-2' d='M9.937%2c14.746h-7.9V1.654' transform='translate(-0.316)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-3' width='1.5' height='10.5' transform='translate(5.04 12.465) rotate(-135)'/%3e %3cpath id='%e8%b7%af%e5%be%84_598' data-name='%e8%b7%af%e5%be%84 598' class='cls-2' d='M2.035%2c1.654H15.557V9.5' transform='translate(-0.815)'/%3e %3cg id='%e7%bb%84_965' data-name='%e7%bb%84 965' transform='translate(8 31)'%3e %3cg id='%e7%bb%84_646' data-name='%e7%bb%84 646' class='cls-4' transform='translate(1.636 -20.636)'%3e %3cpath id='%e8%b7%af%e5%be%84_398' data-name='%e8%b7%af%e5%be%84 398' class='cls-3' d='M-3.364-25.636H6.07v7.927H-3.364Z' transform='translate(1.829 24.101)'/%3e %3c/g%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-5' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-5' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineInsert_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-2 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-3%2c .cls-4 %7b fill: %23666%3b %7d .cls-4 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-1' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-2' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-2' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='4' height='4' transform='translate(10.222 10.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-4' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_lineDel_kj' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2 %7b fill: none%3b %7d .cls-1 %7b stroke: %23ccc%3b %7d .cls-3 %7b fill: white%3b %7d .cls-3%2c .cls-4 %7b stroke: %23666%3b stroke-miterlimit: 10%3b %7d .cls-4%2c .cls-5 %7b fill: %23666%3b %7d .cls-5 %7b stroke: rgba(0%2c0%2c0%2c0)%3b %7d .cls-6 %7b stroke: none%3b %7d %3c/style%3e %3c/defs%3e %3cg id='%e7%9f%a9%e5%bd%a2_273' data-name='%e7%9f%a9%e5%bd%a2 273' class='cls-1' transform='translate(1.221 1.22)'%3e %3crect class='cls-6' width='14' height='14'/%3e %3crect class='cls-2' x='0.5' y='0.5' width='13' height='13'/%3e %3c/g%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_10' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 10' class='cls-2' width='16' height='16'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-3' width='3' height='3' transform='translate(5.222 14.222) rotate(180)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd_14-2' data-name='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd 14' class='cls-4' width='3' height='3' transform='translate(14.222 5.222) rotate(180)'/%3e %3cpath id='%e7%9f%a9%e5%bd%a2%e5%a4%87%e4%bb%bd' class='cls-5' d='M-.011-.213h1.5L1.5%2c8.8H0Z' transform='translate(5.747 11.758) rotate(-135)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b clip-path: url(%23clip-path)%3b %7d .cls-3 %7b fill: rgba(0%2c0%2c0%2c0)%3b %7d .cls-4 %7b clip-path: url(%23clip-path-2)%3b %7d .cls-5 %7b fill: %23666%3b %7d %3c/style%3e %3cclipPath id='clip-path'%3e %3cpath id='%e8%b7%af%e5%be%84_317' data-name='%e8%b7%af%e5%be%84 317' class='cls-1' d='M0%2c0H16V-16H0Z'/%3e %3c/clipPath%3e %3cclipPath id='clip-path-2'%3e %3cpath id='%e8%b7%af%e5%be%84_319' data-name='%e8%b7%af%e5%be%84 319' class='cls-1' d='M14.656-8.831l-.462-4.884a.531.531%2c0%2c0%2c0-.478-.478l-4.884-.462H8.825a.16.16%2c0%2c0%2c0-.119.045L1.389-7.294a.156.156%2c0%2c0%2c0%2c0%2c.22L7.073-1.389a.155.155%2c0%2c0%2c0%2c.111.045A.155.155%2c0%2c0%2c0%2c7.3-1.389l7.317-7.317A.165.165%2c0%2c0%2c0%2c14.656-8.831ZM10.922-9.953a1%2c1%2c0%2c0%2c1-1-1%2c1%2c1%2c0%2c0%2c1%2c1-1%2c1%2c1%2c0%2c0%2c1%2c1%2c1A1%2c1%2c0%2c0%2c1%2c10.922-9.953Z'/%3e %3c/clipPath%3e %3c/defs%3e %3cg id='icon_tag_kj' transform='translate(0 16)'%3e %3cg id='%e7%bb%84_561' data-name='%e7%bb%84 561' class='cls-2'%3e %3cpath id='%e8%b7%af%e5%be%84_316' data-name='%e8%b7%af%e5%be%84 316' class='cls-3' d='M-5-21H21V5H-5Z'/%3e %3c/g%3e %3cg id='%e7%bb%84_562' data-name='%e7%bb%84 562' class='cls-4'%3e %3cpath id='%e8%b7%af%e5%be%84_318' data-name='%e8%b7%af%e5%be%84 318' class='cls-5' d='M-3.657-19.656H19.657V3.656H-3.657Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(79),a=[i.saveResult,i.scale,i.rotate,i.fullScreen,i.setValid,i.backward,i.forward,i.dargWithRightClick,i.dargWithLeftClick];e.exports=a},function(e,t,n){"use strict";var i=n(50),a=n(79),r=n(253);var o,c=(o=i)&&"object"==typeof o&&"default"in o?o:{default:o},l=c.default.cloneDeep(a.forward),s=c.default.cloneDeep(a.backward);l.name="NextFile",s.name="PreviousFile";var u=[a.saveResult,r.tagInSingleImg,a.playPause,a.speed,a.rewind,a.forwardForward,a.fullScreen,s,l];e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(79),a=n(247),r=n(102),o=n(103),c=n(495),l=n(496),s=n(497),u=n(498),d=n(499),h=n(500),f=n(501),g=n(502),v=n(248),b=n(138),p=n(0),m=n(59),y=n(249);var x,C=(x=p)&&"object"==typeof x&&"default"in x?x:{default:x},w={name:"PointThickness",icon:C.default.createElement("span",{style:{display:" inline-block",width:14,height:14,borderRadius:"50%",border:"1px solid"}}),shortCut:["+","-"],linkSymbol:""},k={name:"RotateAroundCenterPoint",icon:C.default.createElement(m.ReloadOutlined,null),shortCut:[r],noticeInfo:"DragOperation"},I={name:"PointCloudViewTranslate",icon:a,shortCut:[o],noticeInfo:"Drag"},L={name:"TopViewTranslate",icon:a,shortCut:[o],noticeInfo:"Drag"},P={name:"ChangePointCloudValid",icon:c,shortCut:["V"]},O={name:"CopyBox",icon:l,shortCut:["Ctrl","C"]},S={name:"PasteBox",icon:u,shortCut:["Ctrl","V"]},T={name:"RotateLeft",icon:C.default.createElement(m.RotateLeftOutlined,null),shortCut:["Q"]},A={name:"RotateRight",icon:C.default.createElement(m.RotateRightOutlined,null),shortCut:["E"]},E={name:"PreviousBox",icon:d,shortCut:["Shift","Tab"]},D={name:"NextBox",icon:s,shortCut:["Tab"]},M={name:"Rotate180",icon:h,shortCut:["G"],noticeInfo:"SelectedStatus"},N={name:"CopyPrevPage",icon:l,shortCut:["Alt","C"]},R={name:"ChangeBoxValid",icon:v,shortCut:["F"],noticeInfo:"SelectedStatus"},j={name:"MultiSelect",icon:g,shortCut:["Ctrl",o]},_={name:"SelectAllBox",icon:f,shortCut:["Ctrl","A"]},B={name:"Delete",icon:b,shortCut:["Del"],noticeInfo:"SelectedStatus"},H=[{name:"GeneralOperation"},i.backward,i.forward,w,i.scale,k,I,L,P,{name:"RectPattern"},O,S,T,A,E,D,M,N,R,B,j,_,i.fullScreen],V=[{name:"GeneralOperation"},i.backward,i.forward,w,i.scale,k,I,L,P,{name:"PolygonPattern"},y.polygon,y.invalidPolygon,y.selectedPolygon,y.changePolygonAttribute,y.deletePolygon,y.insertPolygonPoint,y.deletePolygonPoint];t.default=H,t.pointCloudShortCutTable_POLYGON=V},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect x='4.81982' y='12.3096' width='1.49968' height='10.4997' transform='rotate(-135 4.81982 12.3096)' fill='%23666666'/%3e%3cg clip-path='url(%23clip0_90_7913)'%3e%3cg clip-path='url(%23clip1_90_7913)'%3e%3cmask id='mask0_90_7913' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='9' y='10' width='7' height='6'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.91842 13.0569L15.1098 13.0582L15.7797 13.7267H11.5931L12.7653 15.0664H11.7605L9.91842 13.0569ZM15.2773 12.2195L10.0859 12.2182L9.41602 11.5497H13.6026L12.4304 10.21H13.4351L15.2772 12.2195H15.2773Z' fill='white'/%3e%3c/mask%3e%3cg mask='url(%23mask0_90_7913)'%3e%3cpath d='M7.88104 8.6748H17.3149V16.6014H7.88104V8.6748Z' fill='%23666666'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3crect x='14.0015' y='5.06738' width='2.99984' height='2.99984' transform='rotate(180 14.0015 5.06738)' fill='white' stroke='%23707070'/%3e%3crect x='5.00146' y='14.0674' width='2.99984' height='2.99984' transform='rotate(180 5.00146 14.0674)' fill='white' stroke='%23707070'/%3e%3cdefs%3e%3cclipPath id='clip0_90_7913'%3e%3crect width='6.36365' height='4.85646' fill='white' transform='translate(9.41602 10.21)'/%3e%3c/clipPath%3e%3cclipPath id='clip1_90_7913'%3e%3crect width='6.36365' height='4.85646' fill='white' transform='translate(9.41602 10.21)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M10.7292 4.8335H2.60419C2.08642 4.8335 1.66669 5.25323 1.66669 5.771V13.896C1.66669 14.4138 2.08642 14.8335 2.60419 14.8335H10.7292C11.247 14.8335 11.6667 14.4138 11.6667 13.896V5.771C11.6667 5.25323 11.247 4.8335 10.7292 4.8335Z' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M7.63151 12.7676L1.10109 5.19533C0.858489 4.91296 1.07723 4.49935 1.46897 4.49935H14.5298C14.9215 4.49935 15.1403 4.91296 14.8977 5.19533L8.36727 12.7676C8.18035 12.9844 7.81843 12.9844 7.6315 12.7676H7.63151Z' fill='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' fill='%23CCCCCC'/%3e%3cpath d='M4.33331 4.6437V3.104C4.33331 2.58624 4.75305 2.1665 5.27081 2.1665H13.3958C13.9136 2.1665 14.3333 2.58624 14.3333 3.104V11.229C14.3333 11.7468 13.9136 12.1665 13.3958 12.1665H11.8387' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M10.7292 4.8335H2.60419C2.08642 4.8335 1.66669 5.25323 1.66669 5.771V13.896C1.66669 14.4138 2.08642 14.8335 2.60419 14.8335H10.7292C11.247 14.8335 11.6667 14.4138 11.6667 13.896V5.771C11.6667 5.25323 11.247 4.8335 10.7292 4.8335Z' fill='%23CCCCCC' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M7.63151 4.23239L1.10109 11.8047C0.858489 12.087 1.07723 12.5006 1.46897 12.5006H14.5298C14.9215 12.5006 15.1403 12.087 14.8977 11.8047L8.36727 4.23239C8.18035 4.01564 7.81843 4.01564 7.6315 4.23239H7.63151Z' fill='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M14.0606 2.74219V5.16642H11.6364' stroke='%23666666' stroke-width='0.8' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M14.6667 8.50016C14.6667 12.1821 11.6819 15.1668 8.00002 15.1668C4.31812 15.1668 1.33335 12.1821 1.33335 8.50016C1.33335 4.81826 4.31812 1.8335 8.00002 1.8335C10.4674 1.8335 12.6217 3.17387 13.7744 5.1662' stroke='%23666666' stroke-width='1.3' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M4.219 11V6.016H3.281L2.518 6.611V7.661L3.281 7.115V11H4.219ZM7.6968 9.572C7.6968 9.299 7.6758 9.012 7.5638 8.781C7.4938 8.641 7.3958 8.529 7.2628 8.424C7.3818 8.326 7.4658 8.221 7.5288 8.095C7.6408 7.857 7.6618 7.612 7.6618 7.353C7.6618 6.926 7.5918 6.562 7.3048 6.275C7.0878 6.058 6.7798 5.96 6.4438 5.96C6.1078 5.96 5.8138 6.058 5.5968 6.275C5.3098 6.562 5.2398 6.926 5.2398 7.353C5.2398 7.612 5.2608 7.857 5.3728 8.095C5.4358 8.221 5.5198 8.326 5.6388 8.424C5.5058 8.529 5.4078 8.641 5.3378 8.781C5.2258 9.012 5.2048 9.299 5.2048 9.572C5.2048 10.041 5.2328 10.412 5.5618 10.734C5.7858 10.951 6.1148 11.056 6.4508 11.056C6.7868 11.056 7.1158 10.951 7.3398 10.734C7.6688 10.412 7.6968 10.041 7.6968 9.572ZM6.7588 9.523C6.7588 9.656 6.7728 9.978 6.6748 10.111C6.6258 10.174 6.5418 10.216 6.4508 10.216C6.3598 10.216 6.2758 10.181 6.2268 10.111C6.1288 9.971 6.1428 9.656 6.1428 9.523C6.1428 9.39 6.1218 9.061 6.2268 8.921C6.2758 8.851 6.3598 8.816 6.4508 8.816C6.5418 8.816 6.6188 8.851 6.6748 8.921C6.7798 9.061 6.7588 9.39 6.7588 9.523ZM6.7238 7.402C6.7238 7.528 6.7518 7.843 6.6258 7.969C6.5838 8.011 6.5208 8.032 6.4508 8.032C6.3808 8.032 6.3248 8.011 6.2758 7.969C6.1428 7.85 6.1778 7.528 6.1778 7.402C6.1778 7.283 6.1568 7.003 6.2548 6.884C6.3038 6.828 6.3738 6.8 6.4508 6.8C6.5278 6.8 6.5978 6.828 6.6468 6.884C6.7448 7.003 6.7238 7.283 6.7238 7.402ZM10.6496 9.838V7.178C10.6496 6.744 10.5306 6.492 10.3066 6.282C10.0826 6.065 9.75359 5.96 9.41759 5.96C9.08159 5.96 8.75259 6.065 8.52859 6.282C8.30459 6.492 8.18559 6.744 8.18559 7.178V9.838C8.18559 10.272 8.30459 10.524 8.52859 10.734C8.75259 10.951 9.08159 11.056 9.41759 11.056C9.75359 11.056 10.0826 10.951 10.3066 10.734C10.5306 10.524 10.6496 10.272 10.6496 9.838ZM9.71159 9.873C9.71159 10.104 9.58559 10.216 9.41759 10.216C9.24959 10.216 9.12359 10.104 9.12359 9.873V7.143C9.12359 6.912 9.24959 6.8 9.41759 6.8C9.58559 6.8 9.71159 6.912 9.71159 7.143V9.873ZM13.6304 7.129C13.6304 6.443 13.0774 5.89 12.3914 5.89C11.7054 5.89 11.1524 6.443 11.1524 7.129C11.1524 7.815 11.7054 8.368 12.3914 8.368C13.0774 8.368 13.6304 7.815 13.6304 7.129ZM12.8044 7.129C12.8044 7.36 12.6224 7.542 12.3914 7.542C12.1604 7.542 11.9784 7.36 11.9784 7.129C11.9784 6.898 12.1604 6.716 12.3914 6.716C12.6224 6.716 12.8044 6.898 12.8044 7.129Z' fill='%23666666'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.3334 2.1665H2.66669C2.1144 2.1665 1.66669 2.61422 1.66669 3.1665V11.8332C1.66669 12.3855 2.1144 12.8332 2.66669 12.8332H11.3334C11.8857 12.8332 12.3334 12.3855 12.3334 11.8332V3.1665C12.3334 2.61422 11.8857 2.1665 11.3334 2.1665Z' stroke='%23666666' stroke-width='1.33333' stroke-linejoin='round'/%3e%3cpath d='M14.6666 4.83398V14.5C14.6666 14.8682 14.3681 15.1667 13.9999 15.1667H4.33447' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M4.33331 7.32861L6.33321 9.17031L9.66665 5.73975' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='17' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M14 7.16667V13.5C14 14.0523 13.5523 14.5 13 14.5H3C2.44772 14.5 2 14.0523 2 13.5V3.5C2 2.94772 2.44772 2.5 3 2.5H10' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M5.33331 7.16683L8.66665 9.8335L13.6666 2.8335' stroke='%23666666' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(79),a=[i.scale,i.saveResult,i.restore,i.revoke,i.rotate,i.backward,i.forward,i.dargWithRightClick,i.setValid];e.exports=a},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(34),o=n(30),c=n(28),l=n(29);var s,u=(s=a)&&"object"==typeof s&&"default"in s?s:{default:s},d=r.connect((function(e){var t;return{toolInstance:null==(t=e.annotation)?void 0:t.toolInstance}}),null,null,{context:l.LabelBeeContext})((function(e){var t=e.toolInstance,n=a.useState(0),r=i(n,2),l=(r[0],r[1]),s=c.useTranslation().t;return a.useEffect((function(){t&&t.singleOn("hiddenChange",(function(){l((function(e){return e+1}))}))}),[t]),t&&t.isHidden?u.default.createElement("span",null,s("HideDrawnAnnotation"),u.default.createElement(o.Divider,{type:"vertical",style:{background:"rgba(153, 153, 153, 1)",height:"16px"}})):null}));e.exports=d},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(34),o=n(30),c=n(28),l=n(29),s=n(43);var u,d=(u=a)&&"object"==typeof u&&"default"in u?u:{default:u},h=r.connect((function(e){var t;return{toolInstance:null==(t=e.annotation)?void 0:t.toolInstance}}),null,null,{context:l.LabelBeeContext})((function(e){var t,n,r=e.toolInstance,l=a.useState(0),u=i(l,2),h=(u[0],u[1]),f=a.useContext(s.PointCloudContext).pointCloudBoxList,g=c.useTranslation().t;if(a.useEffect((function(){r&&r.singleOn("updatePageNumber",(function(){h((function(e){return e+1}))}))}),[r]),!r)return null;var v=null!=(n=null==(t=null==r?void 0:r.currentPageResult)?void 0:t.length)?n:f.length;return v>=0?d.default.createElement("span",null,"".concat(g("ItemsOfThisPage"),": ").concat(v),d.default.createElement(o.Divider,{type:"vertical",style:{background:"rgba(153, 153, 153, 1)",height:"16px"}})):null}));e.exports=h},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: none%3b %7d .cls-2 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_adapt' transform='translate(-1021.825 -996)'%3e %3crect id='%e7%9f%a9%e5%bd%a2_200' data-name='%e7%9f%a9%e5%bd%a2 200' class='cls-1' width='16' height='16' transform='translate(1021.825 996)'/%3e %3crect id='%e7%9f%a9%e5%bd%a2_191' data-name='%e7%9f%a9%e5%bd%a2 191' class='cls-2' width='8' height='7' transform='translate(1025.825 1000.167)'/%3e %3cpath id='%e8%81%94%e5%90%88_5' data-name='%e8%81%94%e5%90%88 5' class='cls-2' d='M3%2c4V1H0V0H4V4Z' transform='translate(1033.825 997)'/%3e %3cpath id='%e8%81%94%e5%90%88_7' data-name='%e8%81%94%e5%90%88 7' class='cls-2' d='M0%2c4V3H3V0H4V4Z' transform='translate(1025.825 1001.001) rotate(180)'/%3e %3cpath id='%e8%81%94%e5%90%88_8' data-name='%e8%81%94%e5%90%88 8' class='cls-2' d='M3%2c4V1H0V0H4V4Z' transform='translate(1025.825 1010.335) rotate(180)'/%3e %3cpath id='%e8%81%94%e5%90%88_6' data-name='%e8%81%94%e5%90%88 6' class='cls-2' d='M0%2c4V0H4V1H1V4Z' transform='translate(1037.824 1010.335) rotate(180)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12 4.16699H4V11.167H12V4.16699Z' fill='%23707070'/%3e%3cpath d='M15 5V2H12V1H16V5H15Z' fill='%23707070'/%3e%3cpath d='M4 1.00098V2.00098L1 2.00098L1 5.00098L0 5.00098L0 1.00098L4 1.00098Z' fill='%23707070'/%3e%3cpath d='M1 10.335L1 13.335H4V14.335H0L0 10.335H1Z' fill='%23707070'/%3e%3cpath d='M16 10.335V14.335H12V13.335H15V10.335H16Z' fill='%23707070'/%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(34),o=n(509),c=n(29);var l,s=(l=a)&&"object"==typeof l&&"default"in l?l:{default:l},u=r.connect((function(e){return{toolInstance:e.annotation.toolInstance}}),null,null,{context:c.LabelBeeContext})((function(e){var t,n=e.toolInstance,r=e.zoom,c=o(0),l=i(c,2)[1];a.useEffect((function(){var e=function(){l((function(e){return e+1}))};return n&&n.on("renderZoom",e),function(){n&&n.unbind("renderZoom",e)}}),[n]);var u=null!=(t=null!=r?r:null==n?void 0:n.zoom)?t:1;return s.default.createElement("span",{className:"zoomValue"},(100*u).toFixed(1),"%")}));e.exports=u},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(510);var o,c=(o=a)&&"object"==typeof o&&"default"in o?o:{default:o};e.exports=function(e){var t=r(),n=c.default.useState(e),a=i(n,2),o=a[0],l=a[1];return[o,c.default.useCallback((function(e){t.current||l(e)}),[])]}},function(e,t,n){"use strict";var i=n(0);e.exports=function(){var e=i.useRef(!1);return i.useEffect((function(){return e.current=!1,function(){e.current=!0}}),[]),e}},function(e,t,n){"use strict";var i=n(31).default,a=n(48),r=n(97),o=n(55),c=n(59),l=n(22),s=n(30),u=n(5),d=n(50),h=n(0),f=n(28),g=n(34),v=n(29),b=n(61),p=n(512),m=n(513),y=n(522);function x(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var C=x(u),w=x(h),k=function(e){var t=e.disabled,n=e.imgList,i=f.useTranslation().t;return w.default.createElement(s.Button,{type:"primary",style:{marginLeft:10},onClick:function(){var e=b.store,t=e.dispatch,i=e.getState;n[0]?t(o.ToNextStep(0)):o.loadImgList(t,i,0).then((function(e){e&&t(o.ToNextStep(0))}))},disabled:t},i("NextStep"))},I=function(e){var t,n=e.step,i=e.stepProgress,a=e.stepList,r=e.imgList,o=f.useTranslation().t,c=null==(t=d.last(a))?void 0:t.step;if(a.length<2||n===c)return null;var l=i<1;return l?w.default.createElement(s.Tooltip,{title:o("StepNotFinishedNotify")},w.default.createElement("span",null,w.default.createElement(k,{disabled:l,imgList:r}))):w.default.createElement(k,{disabled:l,imgList:r})},L=g.connect((function(e){var t;return{imgList:e.annotation.imgList,annotationEngine:e.annotation.annotationEngine,stepProgress:e.annotation.stepProgress,toolName:null==(t=e.annotation.stepList[e.annotation.step-1])?void 0:t.tool,stepList:e.annotation.stepList,stepInfo:e.annotation.stepList[e.annotation.step-1],step:e.annotation.step}}),null,null,{context:v.LabelBeeContext})((function(e){var t,n=e.goBack,s=e.exportData,u=e.header,d=e.headerName,f=e.imgList,g=e.stepProgress,b=e.stepInfo,x=e.stepList,k=e.step,L=e.annotationEngine,P=v.useDispatch(),O=h.useReducer((function(e){return e+1}),0),S=i(O,2)[1],T=h.useRef(null),A=r(T),E=w.default.createElement(p,{exportData:s}),D=function(e){l.i18n.changeLanguage(e),null==L||L.setLang(e),S()},M=l.i18n.language,N=null!=(t=null==A?void 0:A.width)?t:window.innerWidth,R=w.default.createElement(c.LeftOutlined,{className:"".concat(a.prefix,"-header__icon"),onClick:function(){P(o.ToSubmitFileData(a.ESubmitType.Quit)),n&&n(f)}}),j=d?w.default.createElement("span",{className:"".concat(a.prefix,"-header__name")},d):"",_=x.length>1&&w.default.createElement(w.default.Fragment,null,w.default.createElement(y,{stepProgress:g}),w.default.createElement(I,{step:k,stepProgress:g,stepList:x,imgList:f})),B=w.default.createElement(m,{stepInfo:b}),H=w.default.createElement("div",{className:"".concat(a.prefix,"-header__lang")},w.default.createElement("span",{className:"".concat(a.prefix,"-langCN ").concat("cn"===M?"active":""),onClick:function(){return D("cn")}},"\u4e2d\u6587")," / ",w.default.createElement("span",{className:"".concat(a.prefix,"-langEN ").concat("en"===M?"active":""),onClick:function(){return D("en")}},"En"));return u?"function"==typeof u?w.default.createElement("div",{className:C.default("".concat(a.prefix,"-header")),ref:T},w.default.createElement("div",{className:"".concat(a.prefix,"-header__title")},u({backNode:R,headerNameNode:j,stepListNode:_,headerOptionNode:B,langNode:H}))):u:w.default.createElement("div",{className:C.default("".concat(a.prefix,"-header")),ref:T},w.default.createElement("div",{className:"".concat(a.prefix,"-header__title")},R,j,_,E,w.default.createElement("div",{id:"operationNode",className:"".concat(a.prefix,"-header__operationNode"),style:{left:N/2-87}},B),w.default.createElement("div",{className:"".concat(a.prefix,"-header__titlePlacement")}),H))}));e.exports=L},function(e,t,n){"use strict";var i=n(0),a=n(30),r=n(34),o=n(68),c=n(48),l=n(28),s=n(29);var u,d=(u=i)&&"object"==typeof u&&"default"in u?u:{default:u},h=r.connect((function(e){return{toolInstance:e.annotation.toolInstance,imgList:e.annotation.imgList,onSubmit:e.annotation.onSubmit}}),null,null,{context:s.LabelBeeContext})((function(e){var t=e.imgList,n=e.dispatch,i=(e.onSubmit,e.exportData),r=l.useTranslation().t;if(!i)return null;return d.default.createElement(a.Button,{style:{marginLeft:20},onClick:function(){n({type:o.ANNOTATION_ACTIONS.SUBMIT_FILE_DATA,payload:{submitType:c.ESubmitType.Export}}),i&&i(t)}},r("Export"))}));e.exports=h},function(e,t,n){"use strict";var i=n(31).default,a=n(0),r=n(29),o=n(514),c=n(515),l=n(516),s=n(517),u=n(518),d=n(519),h=n(520),f=n(521),g=n(48),v=n(78),b=n(55),p=n(28),m=n(32);var y,x,C=(y=a)&&"object"==typeof y&&"default"in y?y:{default:y},w=m.cTool,k=w.EVideoToolName,I=w.EPointCloudName;!function(e){e.Hover="#666fff",e.Normal="#cccccc"}(x||(x={}));e.exports=function(e){var t=a.useState(""),n=i(t,2),m=n[0],y=n[1],w=e.stepInfo,L=r.useDispatch(),P=r.useSelector((function(e){return{annotation:e.annotation,imgAttribute:e.imgAttribute}})).annotation,O=P.toolInstance,S=P.onSave,T=p.useTranslation().t,A=[v.EToolName.Tag,k.VideoTagTool].includes(null==w?void 0:w.tool),E=[k.VideoTagTool].includes(null==w?void 0:w.tool),D=[I.PointCloud].includes(null==w?void 0:w.tool),M=e.isBegin||A,N=a.useCallback((function(){null==O||O.undo()}),[O]),R=a.useCallback((function(){null==O||O.redo()}),[O]),j=[{toolName:"save",title:"Save",show:!!S,commonSvg:h,selectedSvg:f,click:function(){L(b.ChangeSave)},style:{fontSize:"12px",color:M||"save"!==m?x.Normal:x.Hover}},{toolName:"revocation",title:"Undo",show:!0,commonSvg:l,selectedSvg:d,click:function(){A||N()},style:{opacity:!0===M?.4:1,fontSize:"12px",color:M||"revocation"!==m?x.Normal:x.Hover}},{toolName:"restore",title:"Redo",show:!0,commonSvg:c,selectedSvg:u,click:function(){A||R()},style:{opacity:!0===M?.4:1,fontSize:"12px",color:M||"restore"!==m?x.Normal:x.Hover}},{toolName:"rotate",title:"Rotate",show:!0,selectedSvg:s,commonSvg:o,click:function(){E||0!==w.dataSourceStep&&void 0!==w.dataSourceStep||null==O||O.updateRotate()},style:{opacity:!0===E?.4:1,fontSize:"12px",color:M||"rotate"!==m?x.Normal:x.Hover}}];return D&&(j=j.slice(0,3)),C.default.createElement("div",{className:"".concat(g.prefix,"-header__hotKey")},j.map((function(e){return e.show&&C.default.createElement("div",{key:e.toolName,className:"item",onMouseEnter:function(){return y(e.toolName)},onMouseLeave:function(){return y("")}},C.default.createElement("a",{className:"item",onClick:e.click},C.default.createElement("img",{className:"singleTool",src:m===e.toolName?e.selectedSvg:e.commonSvg,style:e.style}),C.default.createElement("div",{style:e.style},T(e.title))))})))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_r' xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22'/%3e %3cg id='reload' transform='translate(1 1)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-2' data-name='%e7%9f%a9%e5%bd%a2' class='cls-1' width='20' height='20'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M14.762%2c2.234l-1.032.84A7.56%2c7.56%2c0%2c0%2c0%2c7.68%2c0%2c7.84%2c7.84%2c0%2c0%2c0%2c0%2c7.99%2c7.845%2c7.845%2c0%2c0%2c0%2c7.68%2c16%2c7.709%2c7.709%2c0%2c0%2c0%2c14.9%2c10.741a.154.154%2c0%2c0%2c0-.09-.2l-1.037-.371a.145.145%2c0%2c0%2c0-.185.091c-.033.1-.07.19-.108.284a6.539%2c6.539%2c0%2c0%2c1-1.348%2c2.084%2c6.3%2c6.3%2c0%2c0%2c1-2%2c1.406%2c6.08%2c6.08%2c0%2c0%2c1-4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1-2-1.406%2c6.539%2c6.539%2c0%2c0%2c1-1.348-2.084%2c6.833%2c6.833%2c0%2c0%2c1%2c0-5.1A6.539%2c6.539%2c0%2c0%2c1%2c3.237%2c3.364a6.3%2c6.3%2c0%2c0%2c1%2c2-1.406%2c6.08%2c6.08%2c0%2c0%2c1%2c4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1%2c2%2c1.406%2c6.489%2c6.489%2c0%2c0%2c1%2c.508.6l-1.1.9a.155.155%2c0%2c0%2c0%2c.055.269l3.212.819a.148.148%2c0%2c0%2c0%2c.181-.147L15%2c2.352a.147.147%2c0%2c0%2c0-.238-.118Z' transform='translate(2 2)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='22.001' height='22.017' viewBox='0 0 22.001 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_next' transform='translate(-0.999)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(1 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.884%2c4.3C12.188-.639%2c6.625-1.322.4%2c2.294A.794.794%2c0%2c0%2c0%2c.39%2c3.665a.765.765%2c0%2c0%2c0%2c.781%2c0C6.8.387%2c11.616.983%2c15.831%2c5.467L12.41%2c9.255l7.109-.016.018-7.875Z' transform='translate(0.99 15.142) rotate(-42)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_back' xmlns='http://www.w3.org/2000/svg' width='22' height='22.017' viewBox='0 0 22 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(0 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.88%2c4.954C12.184%2c9.894%2c6.621%2c10.576.4%2c6.96A.794.794%2c0%2c0%2c1%2c.386%2c5.59a.765.765%2c0%2c0%2c1%2c.781%2c0C6.8%2c8.868%2c11.612%2c8.272%2c15.827%2c3.788L12.406%2c0l7.109.016.018%2c7.875Z' transform='translate(15.814 22.017) rotate(-138)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_rA' xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22'/%3e %3cg id='reload' transform='translate(1 1)'%3e %3crect id='%e7%9f%a9%e5%bd%a2-2' data-name='%e7%9f%a9%e5%bd%a2' class='cls-1' width='20' height='20'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M14.762%2c2.234l-1.032.84A7.56%2c7.56%2c0%2c0%2c0%2c7.68%2c0%2c7.84%2c7.84%2c0%2c0%2c0%2c0%2c7.99%2c7.845%2c7.845%2c0%2c0%2c0%2c7.68%2c16%2c7.709%2c7.709%2c0%2c0%2c0%2c14.9%2c10.741a.154.154%2c0%2c0%2c0-.09-.2l-1.037-.371a.145.145%2c0%2c0%2c0-.185.091c-.033.1-.07.19-.108.284a6.539%2c6.539%2c0%2c0%2c1-1.348%2c2.084%2c6.3%2c6.3%2c0%2c0%2c1-2%2c1.406%2c6.08%2c6.08%2c0%2c0%2c1-4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1-2-1.406%2c6.539%2c6.539%2c0%2c0%2c1-1.348-2.084%2c6.833%2c6.833%2c0%2c0%2c1%2c0-5.1A6.539%2c6.539%2c0%2c0%2c1%2c3.237%2c3.364a6.3%2c6.3%2c0%2c0%2c1%2c2-1.406%2c6.08%2c6.08%2c0%2c0%2c1%2c4.895%2c0%2c6.239%2c6.239%2c0%2c0%2c1%2c2%2c1.406%2c6.489%2c6.489%2c0%2c0%2c1%2c.508.6l-1.1.9a.155.155%2c0%2c0%2c0%2c.055.269l3.212.819a.148.148%2c0%2c0%2c0%2c.181-.147L15%2c2.352a.147.147%2c0%2c0%2c0-.238-.118Z' transform='translate(2 2)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='22.001' height='22.017' viewBox='0 0 22.001 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_nextA' transform='translate(-0.999)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(1 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.884%2c4.3C12.188-.639%2c6.625-1.322.4%2c2.294A.794.794%2c0%2c0%2c0%2c.39%2c3.665a.765.765%2c0%2c0%2c0%2c.781%2c0C6.8.387%2c11.616.983%2c15.831%2c5.467L12.41%2c9.255l7.109-.016.018-7.875Z' transform='translate(0.99 15.142) rotate(-42)'/%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg id='icon_backA' xmlns='http://www.w3.org/2000/svg' width='22' height='22.017' viewBox='0 0 22 22.017'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0%3b %7d .cls-2 %7b fill: %23666fff%3b %7d %3c/style%3e %3c/defs%3e %3crect id='%e7%9f%a9%e5%bd%a2' class='cls-1' width='22' height='22' transform='translate(0 0)'/%3e %3cpath id='%e8%b7%af%e5%be%84' class='cls-2' d='M16.88%2c4.954C12.184%2c9.894%2c6.621%2c10.576.4%2c6.96A.794.794%2c0%2c0%2c1%2c.386%2c5.59a.765.765%2c0%2c0%2c1%2c.781%2c0C6.8%2c8.868%2c11.612%2c8.272%2c15.827%2c3.788L12.406%2c0l7.109.016.018%2c7.875Z' transform='translate(15.814 22.017) rotate(-138)'/%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3c!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg t='1632896115713' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='1995' width='22' height='22' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath d='M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184z m456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840z' p-id='1996' fill='%23666666'%3e%3c/path%3e%3cpath d='M512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144z m0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z' p-id='1997' fill='%23666666'%3e%3c/path%3e%3c/svg%3e"},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3c!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg t='1632896115713' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='1995' width='22' height='22' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath d='M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184z m456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840z' p-id='1996' fill='%23666fff'%3e%3c/path%3e%3cpath d='M512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144z m0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z' p-id='1997' fill='%23666fff'%3e%3c/path%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(30),a=n(59),r=n(0),o=n(34),c=n(29),l=n(523),s=n(48),u=n(524),d=n(55),h=n(28);var f,g=(f=r)&&"object"==typeof f&&"default"in f?f:{default:f},v=o.connect((function(e){return{stepList:e.annotation.stepList,step:e.annotation.step}}),null,null,{context:c.LabelBeeContext})((function(e){e.stepProgress;var t=e.step,n=e.stepList,r=c.useDispatch(),o=h.useTranslation().t;return g.default.createElement("span",{className:"".concat(s.prefix)},g.default.createElement(i.Dropdown,{overlay:g.default.createElement(u,{stepList:n,updateStep:function(e){r(d.UpdateProcessingStep(e))},currentStep:t})},g.default.createElement(l,{text:o("Steps"),Icon:a.OrderedListOutlined,iconChildren:g.default.createElement(a.CaretDownOutlined,{style:{fontSize:8}})})))}));e.exports=v},function(e,t,n){"use strict";var i=n(39).default,a=n(48),r=n(0);var o,c=(o=r)&&"object"==typeof o&&"default"in o?o:{default:o},l=Object.defineProperty,s=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,g=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n};e.exports=function(e){var t=e,n=t.Icon,r=t.text,o=t.iconChildren,l=function(e,t){var n={};for(var a in e)h.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&d){var r,o=i(d(e));try{for(o.s();!(r=o.n()).done;)a=r.value,t.indexOf(a)<0&&f.call(e,a)&&(n[a]=e[a])}catch(c){o.e(c)}finally{o.f()}}return n}(t,["Icon","text","iconChildren"]),v=void 0===e.marginLeft?30:e.marginLeft;return c.default.createElement("div",function(e,t){return s(e,u(t))}(function(e,t){for(var n in t||(t={}))h.call(t,n)&&g(e,n,t[n]);if(d){var a,r=i(d(t));try{for(r.s();!(a=r.n()).done;)n=a.value,f.call(t,n)&&g(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},l),{className:a.componentCls}),c.default.createElement("div",{className:"".concat(a.componentCls,"__iconWithText"),style:{marginLeft:v}},c.default.createElement("div",{className:"iconGroup"},c.default.createElement(n,{className:"icon"}),o),c.default.createElement("span",{className:"name"},r)))}},function(e,t,n){"use strict";var i=n(48),a=n(46),r=n(0),o=n(28);var c,l=(c=r)&&"object"==typeof c&&"default"in c?c:{default:c};e.exports=function(e){var t=o.useTranslation().t,n=e.stepList,r=e.updateStep,c=e.currentStep;return l.default.createElement("div",{className:"".concat(i.componentCls,"__annotationStepPopover")},n.map((function(e){var n=e.step===c;return l.default.createElement("div",{key:"stepList".concat(e.step),className:a.classnames({step:!0}),onClick:function(){c&&!n&&r(e.step)}},l.default.createElement("div",{className:a.classnames({name:!0,highlight:n})},"".concat(e.step," - ").concat(e.name||t(e.tool))))})))}},function(e,t,n){"use strict";var i=n(0),a=n(34),r=n(29),o=n(68),c=n(55),l=n(256);var s,u=(s=i)&&"object"==typeof s&&"default"in s?s:{default:s},d=a.connect((function(e){return{annotation:e.annotation}}),null,null,{context:r.LabelBeeContext})((function(e){var t=e.annotation,n=t.imgList,i=t.imgIndex,a=t.stepList,s=t.step,d=r.useDispatch();return u.default.createElement(l.TagToolInstanceAdaptor,{imgIndex:i,imgList:n,pageBackward:function(){return d(c.PageBackward())},pageForward:function(){return d(c.PageForward())},pageJump:function(e){return d(c.PageJump(~~e))},onMounted:function(e){d({type:o.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:e}})},onUnmounted:function(){d({type:o.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:void 0}})},stepList:a,step:s})}));e.exports=d},,,,,,function(e,t,n){"use strict";var i=n(0),a=n(56),r=n(59),o=n(259),c=n(255),l=n(532),s=n(206),u=n(28),d=n(139),h=n(32);var f,g=(f=i)&&"object"==typeof f&&"default"in f?f:{default:f},v=h.cTool.EVideoToolName,b=function(e){var t=Math.floor(e/60),n=~~(e%60).toFixed(),i=(10*e).toString().split("").pop(),a=function(e){return e<10?"0".concat(e):e};return"".concat(a(t),":").concat(a(n),":").concat(i)},p=function(){var e=g.default.useContext(o.VideoPlayerCtx),t=e.currentTime,n=e.duration,i=e.buffered,r=e.setCurrentTime,c=g.default.useRef(null),l="".concat(d.decimalReserved(i/n*100,1),"%"),s="".concat(d.decimalReserved(t/n*100,1),"%");return g.default.createElement("div",{className:a.getClassName("video-progress"),ref:c,onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),function(e){if(c.current){var t=e.clientX,i=c.current.clientWidth,a=d.decimalReserved(t/i*n,1);r(a)}}(e)}},g.default.createElement("div",{className:a.getClassName("video-slider")},g.default.createElement("div",{className:a.getClassName("video-slider","played"),style:{width:s}}),g.default.createElement("div",{className:a.getClassName("video-slider","loaded"),style:{width:l}}),g.default.createElement("div",{className:a.getClassName("video-slider","played"),style:{width:s}})),g.default.createElement("div",{className:a.getClassName("video-slider-bar"),style:{left:s}}))},m=function(){var e=g.default.useContext(o.VideoPlayerCtx),t=e.updateNextPlaybackRate,n=e.playbackRate,i=u.useTranslation().t;return g.default.createElement("span",{className:a.getClassName("video-controller","speed")},g.default.createElement("span",null,i("Speed")),g.default.createElement("span",{className:a.getClassName("video-controller","speedNum")},"".concat(n,"x")),g.default.createElement("span",{className:a.getClassName("video-controller","speedButton")},g.default.createElement(r.CaretUpOutlined,{onClick:function(){t()}}),g.default.createElement(r.CaretDownOutlined,{onClick:function(){t(!1)}})))},y=function(){var e=u.useTranslation().t;return g.default.createElement(s.default,{title:g.default.createElement("span",{className:a.getClassName("video-controller","hotkey")},g.default.createElement("img",{src:l}),e("Hotkeys")),style:{},toolName:v.VideoTagTool})},x=function(){var e=g.default.useContext(o.VideoPlayerCtx),t=e.imgIndex,n=e.imgList,i=e.pageBackward,r=e.pageJump,l=e.pageForward;return g.default.createElement(c.Pagination,{isVideo:!0,pageBackward:i,imgIndex:t,pageJump:r,totalPage:n.length,pageForward:l,footerCls:a.getClassName("video-controller")})},C=function(){var e=g.default.useContext(o.VideoPlayerCtx),t=e.currentTime,n=10*e.duration-10*t,i=(n>0?n:0)/10;return g.default.createElement("div",{className:a.getClassName("video-controller","time")},"".concat(b(t)," / -").concat(b(i)))};e.exports=function(){var e=g.default.useContext(o.VideoPlayerCtx),t=e.playPause,n=e.isPlay;return g.default.createElement("div",{className:a.getClassName("video-controller","wrapper")},g.default.createElement(p,null),g.default.createElement("div",{className:a.getClassName("video-controller")},g.default.createElement("span",{onClick:function(){t()},className:a.getClassName("video-controller","playButton")},n?g.default.createElement(r.PauseOutlined,null):g.default.createElement(r.CaretRightOutlined,null)),g.default.createElement(C,null),g.default.createElement(m,null),g.default.createElement("div",{className:a.getClassName("video-controller","holder")}),g.default.createElement(x,null),g.default.createElement(y,null)))}},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='15' height='13' viewBox='0 0 15 13'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b opacity: 0.8%3b %7d .cls-2 %7b fill: white%3b %7d %3c/style%3e %3c/defs%3e %3cg id='icon_keyboard_h' class='cls-1'%3e %3cg id='%e5%9b%be%e6%a0%87_%e8%ae%be%e7%bd%ae_%e5%bf%ab%e6%8d%b7%e9%94%ae'%3e %3cpath id='%e5%bd%a2%e7%8a%b6' class='cls-2' d='M2.142%2c13a2.205%2c2.205%2c0%2c0%2c1-1.513-.585A1.949%2c1.949%2c0%2c0%2c1%2c0%2c11V2A2.083%2c2.083%2c0%2c0%2c1%2c2.149%2c0h10.7A2.083%2c2.083%2c0%2c0%2c1%2c15%2c2V11a1.927%2c1.927%2c0%2c0%2c1-.63%2c1.417A2.209%2c2.209%2c0%2c0%2c1%2c12.855%2c13H2.142ZM3.209%2c9a1%2c1%2c0%2c1%2c0%2c0%2c2h8.582a1%2c1%2c0%2c1%2c0%2c0-2ZM11%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261h1.639c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c12.6%2c5ZM6.716%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261H8.355c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c8.319%2c5ZM2.43%2c5c-.069%2c0-.287.058-.287.194V6.739c0%2c.085%2c0%2c.261.287.261H4.069c.217%2c0%2c.217-.156.217-.23V5.23A.243.243%2c0%2c0%2c0%2c4.033%2c5ZM11%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261h1.639c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c12.6%2c2ZM6.716%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261H8.355c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c8.319%2c2ZM2.43%2c2c-.069%2c0-.287.059-.287.2V3.739c0%2c.085%2c0%2c.261.287.261H4.069c.217%2c0%2c.217-.155.217-.23V2.23A.243.243%2c0%2c0%2c0%2c4.033%2c2Z'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(39).default,a=n(0),r=n(239),o=n(534);var c,l=(c=a)&&"object"==typeof c&&"default"in c?c:{default:c},s=Object.defineProperty,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,f=function(e,t,n){return t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},g=function(e,t){for(var n in t||(t={}))d.call(t,n)&&f(e,n,t[n]);if(u){var a,r=i(u(t));try{for(r.s();!(a=r.n()).done;){n=a.value;h.call(t,n)&&f(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e};e.exports=function(e){var t=e.invalidProps,n=e.errorProps,i=e.fileType;return t.isValid?n.isError?l.default.createElement(r,g({},g({fileType:i},n))):null:l.default.createElement(o,g({},g({fileType:i},t)))}},function(e,t,n){"use strict";var i=n(0),a=n(28);var r,o=(r=i)&&"object"==typeof r&&"default"in r?r:{default:r};e.exports=function(e){var t=e.fileType,n=void 0===t?"image":t,i=e.isValid,r=a.useTranslation().t;return i?null:o.default.createElement("div",{style:{position:"absolute",inset:0,color:"white",display:"flex",alignItems:"center",fontSize:30,opacity:.7,background:"rgba(255, 87, 34, 1)",justifyContent:"center"}},r("".concat(n,"InvalidAndSkip")))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(139);var r,o=(r=i)&&"object"==typeof r&&"default"in r?r:{default:r},c={position:"absolute",zIndex:20,padding:"0 20px",color:"white",fontSize:15,lineHeight:"32px",background:"rgba(0, 255, 255, 0.32)",top:0,right:0,maxHeight:"calc(100% - 80px)",overflowY:"scroll"};t.VideoTagLayer=function(e){var t=e.result,n=e.inputList,i=a.result2LabelKey(t,n);return o.default.createElement("div",{style:c},o.default.createElement("table",null,o.default.createElement("tbody",null,i.map((function(e){var t=e.keyLabel,n=e.valuesLabelArray;return o.default.createElement("tr",{key:t},o.default.createElement("td",{style:{paddingRight:8}},"".concat(t,":")),o.default.createElement("td",null,"".concat(n.join("\u3001"))))})))))}},function(e,t,n){"use strict";var i=n(56),a=n(0),r=n(537),o=n(538),c=n(540),l=n(542),s=n(543),u=n(544),d=n(34),h=n(29);var f,g=(f=a)&&"object"==typeof f&&"default"in f?f:{default:f},v=d.connect((function(e){return{imgList:e.annotation.imgList}}),null,null,{context:h.LabelBeeContext})((function(e){var t=e.imgList,n=e.drawLayerSlot,a=e.checkMode;return 0===t.length?null:g.default.createElement(g.default.Fragment,null,g.default.createElement(u,{checkMode:a}),g.default.createElement("div",{className:i.getClassName("point-cloud-layout"),onContextMenu:function(e){return e.preventDefault()}},g.default.createElement("div",{className:i.getClassName("point-cloud-wrapper")},g.default.createElement("div",{className:i.getClassName("point-cloud-container","left")},g.default.createElement(s,null),g.default.createElement(r,null)),g.default.createElement("div",{className:i.getClassName("point-cloud-container","right")},g.default.createElement(c,{drawLayerSlot:n,checkMode:a}),g.default.createElement("div",{className:i.getClassName("point-cloud-container","right-bottom")},g.default.createElement(l,{checkMode:a}),g.default.createElement(o,{checkMode:a}))))))}));e.exports=v},function(e,t,n){"use strict";var i=n(31).default,a=n(85).default,r=n(39).default,o=n(56),c=n(32),l=n(22),s=n(5),u=n(0),d=n(120),h=n(43),f=n(104),g=n(34),v=n(46),b=n(60),p=n(30),m=n(97),y=n(98),x=n(28),C=n(29);function w(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var k=w(s),I=w(u),L=Object.defineProperty,P=Object.defineProperties,O=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,E=function(e,t,n){return t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},D=I.default.createContext({isActive:!1,setTarget3DView:function(){},reset3DView:function(){}}),M=function(e){var t=e.perspectiveView,n=u.useContext(D),i=n.isActive,r=n.setTarget3DView;return I.default.createElement("span",{onClick:function(){r(l.EPerspectiveView[t])},className:function(e){var t;return k.default((a(t={},o.getClassName("point-cloud-3d-view",e),!0),a(t,"active",i),t))}(t.toLocaleLowerCase())})},N=function(){var e=u.useContext(D).reset3DView;return I.default.createElement("div",{className:o.getClassName("point-cloud-3d-sidebar")},I.default.createElement(M,{perspectiveView:"Top"}),I.default.createElement(M,{perspectiveView:"Front"}),I.default.createElement(M,{perspectiveView:"Left"}),I.default.createElement(M,{perspectiveView:"Back"}),I.default.createElement(M,{perspectiveView:"Right"}),I.default.createElement(M,{perspectiveView:"LFT"}),I.default.createElement(M,{perspectiveView:"RBT"}),I.default.createElement("span",{onClick:function(){e()},className:o.getClassName("point-cloud-3d-view","reset")}))},R=g.connect(f.a2MapStateToProps,null,null,{context:C.LabelBeeContext})((function(e){var t,n=e.currentData,a=e.config,s=u.useContext(h.PointCloudContext),f=u.useState(!0),g=i(f,2),C=g[0],w=g[1],k=u.useRef(null),L=y.usePointCloudViews().initPointCloud3d,M=m(k),R=x.useTranslation().t;u.useEffect((function(){!s.mainViewInstance||null==L||L(M)}),[M]);var j=b.useSingleBox().selectedBox,_=function(e){var t,n=null==j?void 0:j.info;n&&(null==(t=s.mainViewInstance)||t.updateCameraByBox(n,e))},B=function(){var e;null==(e=s.mainViewInstance)||e.resetCamera()};u.useEffect((function(){var e;if(k.current&&(null==n?void 0:n.url)){var t=s.mainViewInstance;if(!t&&M.width){var i={left:-M.width/2,right:M.width/2,top:M.height/2,bottom:-M.height/2,near:100,far:-100};t=new c.PointCloud({container:k.current,isOrthographicCamera:!0,orthographicParams:i,config:a}),s.setMainViewInstance(t)}if(n.result){var o=l.PointCloudUtils.getBoxParamsFromResultList(n.result);o.forEach((function(e){var n,i=null==(n=l.toolStyleConverter.getColorFromConfig({attribute:e.attribute},function(e,t){return P(e,O(t))}(function(e,t){for(var n in t||(t={}))T.call(t,n)&&E(e,n,t[n]);if(S){var i,a=r(S(t));try{for(a.s();!(i=a.n()).done;)n=i.value,A.call(t,n)&&E(e,n,t[n])}catch(o){a.e(o)}finally{a.f()}}return e}({},a),{attributeConfigurable:!0}),{}))?void 0:n.hex;null==t||t.generateBox(e,i)})),s.setPointCloudResult(o),s.setPointCloudValid(null==(e=v.jsonParser(n.result))?void 0:e.valid)}}}),[n,M]),u.useEffect((function(){var e,t,n,i;if(j){_(l.EPerspectiveView.Top);var a=null!=(n=null==(t=null==(e=s.topViewInstance)?void 0:e.pointCloudInstance)?void 0:t.camera.zoom)?n:1;null==(i=s.mainViewInstance)||i.updateCameraZoom(a)}}),[j]);var H=u.useMemo((function(){return{reset3DView:B,setTarget3DView:_,isActive:!!j}}),[j]),V=I.default.createElement("div",null,I.default.createElement("span",{style:{marginRight:8}},R("ShowArrows")),I.default.createElement(p.Switch,{size:"small",checked:C,onChange:function(e){var t;w(e),null==(t=s.mainViewInstance)||t.setShowDirection(e)}}));return I.default.createElement(d.PointCloudContainer,{className:o.getClassName("point-cloud-3d-container"),title:R("3DView"),toolbar:V,style:{height:n.mappingImgList&&(null==(t=n.mappingImgList)?void 0:t.length)>0?"55%":"100%"}},I.default.createElement("div",{className:o.getClassName("point-cloud-3d-content")},I.default.createElement(D.Provider,{value:H},I.default.createElement(N,null)),I.default.createElement("div",{className:o.getClassName("point-cloud-3d-view"),id:"LABELBEE-POINTCLOUD",ref:k})))}));e.exports=R},function(e,t,n){"use strict";var i=n(32),a=n(56),r=n(120),o=n(0),c=n(43),l=n(60),s=n(22),u=n(207),d=n(34),h=n(104),f=n(98),g=n(97),v=n(260),b=n(28),p=n(29);var m,y=(m=o)&&"object"==typeof m&&"default"in m?m:{default:m},x=function(e,t,n,i,a){var r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.width,a=t.height,r={x:e.x+i*n/2,y:e.y+a*n/2},o={x:t.width/2,y:t.height/2};return{offsetX:(o.x-r.x)/n,offsetY:-(o.y-r.y)/n}}(e,n,t),o=r.offsetX,c=r.offsetY;if(a.camera.zoom=t,e){var l=o*Math.cos(i.rotation),s=o*Math.sin(i.rotation),u=a.initCameraPosition,d=u.x,h=u.y,f=u.z;a.camera.position.set(d+s,h-l,f+c)}a.camera.updateProjectionMatrix(),a.render()},C=d.connect(h.a2MapStateToProps,null,null,{context:p.LabelBeeContext})((function(e){e.currentData;var t=e.config,n=e.checkMode,d=y.default.useContext(c.PointCloudContext),h=o.useRef(null),p=g(h),m=l.useSingleBox().selectedBox,C=b.useTranslation().t,w=f.usePointCloudViews().backViewUpdateBox;return o.useEffect((function(){if(h.current){var e={width:h.current.clientWidth,height:h.current.clientHeight},a=new i.PointCloudAnnotation({container:h.current,size:e,polygonOperationProps:{showDirectionLine:!1,forbidAddNew:!0},config:t,checkMode:n});d.setBackViewInstance(a)}}),[]),o.useEffect((function(){if(p&&d.backViewInstance){var e=d.backViewInstance,t=e.pointCloud2dOperation,n=e.pointCloudInstance;t.singleOn("renderZoom",(function(e,t){!d.selectedPointCloudBox||x(t,e,p,d.selectedPointCloudBox,n)})),t.singleOn("dragMove",(function(e){var t=e.currentPos,i=e.zoom;!d.selectedPointCloudBox||x(t,i,p,d.selectedPointCloudBox,n)})),t.singleOn("updatePolygonByDrag",(function(e){var t=e.newPolygon,n=e.originPolygon;null==w||w(t,n)}))}}),[d,p]),o.useEffect((function(){var e;null==(e=null==d?void 0:d.backViewInstance)||e.initSize(p)}),[p]),y.default.createElement(r.PointCloudContainer,{className:a.getClassName("point-cloud-container","back-view"),title:C("BackView"),toolbar:y.default.createElement(u.SizeInfoForView,{perspectiveView:s.EPerspectiveView.Back})},y.default.createElement("div",{className:a.getClassName("point-cloud-container","bottom-view-content")},y.default.createElement("div",{className:a.getClassName("point-cloud-container","core-instance"),ref:h}),!m&&y.default.createElement(v,null)))}));e.exports=C},function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg width='68' height='76' viewBox='0 0 68 76' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cg clip-path='url(%23clip0_96880_20054)'%3e%3crect x='6.45483' y='0.848145' width='54.0956' height='56.7089' rx='1.04533' fill='url(%23paint0_linear_96880_20054)' fill-opacity='0.12'/%3e%3cpath d='M67 41.3584V75H0V57.755L65.6869 40.348C66.3501 40.1722 67 40.6723 67 41.3584Z' fill='url(%23paint1_linear_96880_20054)'/%3e%3cpath d='M0.182861 35.8192V75.3775H67.0837V59.9767L1.60277 34.8433C0.91818 34.5806 0.182861 35.086 0.182861 35.8192Z' fill='url(%23paint2_linear_96880_20054)'/%3e%3cpath d='M34.8791 22C31.5247 22 28.8956 22.9519 26.9464 24.8558C25.4935 26.2426 24.5938 28.0144 24.2124 30.171C23.9638 31.5762 25.1568 32.7431 26.5838 32.7431V32.7431C28.0108 32.7431 29.098 31.5652 29.4401 30.1799C29.627 29.423 29.912 28.7815 30.3008 28.2555C31.2074 27.0316 32.6126 26.4423 34.5618 26.4423C36.103 26.4423 37.3269 26.8503 38.1882 27.7115C39.0041 28.5728 39.4574 29.7514 39.4574 31.2473C39.4574 32.3805 39.0494 33.4684 38.2335 34.4657L37.6896 35.1003C34.7431 37.7294 32.9753 39.6332 32.386 40.8571C31.9171 41.7614 31.6462 42.8142 31.5366 43.9972C31.4651 44.7702 31.9823 45.4588 32.7224 45.6932V45.6932C33.2639 45.8647 33.8406 45.8939 34.3967 45.778L34.957 45.6612C35.9679 45.4505 36.6494 44.5444 36.9087 43.5449C37.0201 43.1152 37.1747 42.7029 37.3723 42.3077C37.7802 41.4918 38.3695 40.7212 39.1854 40.0865C41.3613 38.1827 42.6758 36.9588 43.0838 36.5055C44.1717 35.0549 44.761 33.1964 44.761 30.9299C44.761 28.1648 43.8544 25.989 42.0412 24.4025C40.228 22.7706 37.8255 22 34.8791 22ZM34.0632 48.1552C33.0659 48.1552 32.25 48.4725 31.6154 49.1071C30.8901 49.7418 30.5728 50.5577 30.5728 51.5549C30.5728 52.5522 30.8901 53.3681 31.6154 54.0027C32.25 54.6374 33.0659 55 34.0632 55C35.0604 55 35.8764 54.6827 36.6016 54.0481C37.2363 53.4135 37.5989 52.5522 37.5989 51.5549C37.5989 50.5577 37.2363 49.7418 36.6016 49.1071C35.9217 48.4725 35.0604 48.1552 34.0632 48.1552Z' fill='%23F3F3F3' fill-opacity='0.25'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear_96880_20054' x1='33.5026' y1='0.848145' x2='33.5026' y2='57.557' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23EDEDED'/%3e%3cstop offset='1' stop-color='white'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear_96880_20054' x1='33.5' y1='32.9214' x2='33.5' y2='62.8103' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23373737'/%3e%3cstop offset='1' stop-color='%230E0E0E'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear_96880_20054' x1='33.6333' y1='31.097' x2='33.6333' y2='74.1393' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%232C2C2C'/%3e%3cstop offset='1' stop-color='%23424242'/%3e%3c/linearGradient%3e%3cclipPath id='clip0_96880_20054'%3e%3crect width='68' height='76.0002' fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e"},function(e,t,n){"use strict";var i=n(31).default,a=n(39).default,r=n(56),o=n(137),c=n(254),l=n(59),s=n(32),u=n(22),d=n(0),h=n(43),f=n(261),g=n(60),v=n(120),b=n(207),p=n(136),m=n(541),y=n(30),x=n(104),C=n(34),w=n(98),k=n(97),I=n(28),L=n(29),P=n(46);var O,S=(O=d)&&"object"==typeof O&&"default"in O?O:{default:O},T=Object.defineProperty,A=Object.defineProperties,E=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,R=function(e,t,n){return t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},j=s.cTool.EPolygonPattern,_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.width,a=t.height,r={x:e.x+i*n/2,y:e.y+a*n/2},o={x:t.width/2,y:t.height/2};return{offsetX:(o.x-r.x)/n,offsetY:-(o.y-r.y)/n}},B=function(e){var t=e.currentData,n=m.useZoom(),i=n.zoom,a=n.zoomIn,s=n.zoomOut,u=n.initialPosition,d=g.useSingleBox(),h=d.selectNextBox,v=d.selectPrevBox,b=f.useRotate({currentData:t}).updateRotate;return S.default.createElement(S.default.Fragment,null,S.default.createElement("span",{onClick:function(){b(2)},className:r.getClassName("point-cloud","rotate-reserve")}),S.default.createElement("span",{onClick:function(){b(-2)},className:r.getClassName("point-cloud","rotate")}),S.default.createElement("span",{onClick:function(){b(180)},className:r.getClassName("point-cloud","rotate-180")}),S.default.createElement(o.FooterDivider,null),S.default.createElement(l.UpSquareOutlined,{onClick:function(){v()},className:r.getClassName("point-cloud","prev")}),S.default.createElement(l.DownSquareOutlined,{onClick:function(){h()},className:r.getClassName("point-cloud","next")}),S.default.createElement(o.FooterDivider,null),S.default.createElement(c.ZoomController,{initialPosition:u,zoomIn:a,zoomOut:s,zoom:i}))},H=function(e){var t=e.setZAxisLimit,n=e.zAxisLimit;return e.checkMode?null:S.default.createElement("div",{style:{position:"absolute",top:128,right:8,height:"50%",zIndex:20}},S.default.createElement(y.Slider,{vertical:!0,step:.5,max:10,min:.5,defaultValue:n,onAfterChange:function(e){t(e)}}))},V=C.connect(x.a2MapStateToProps,null,null,{context:L.LabelBeeContext})((function(e){var t=e.currentData,n=e.imgList,o=e.stepInfo,c=e.drawLayerSlot,l=e.checkMode,f=d.useState({zoom:1,currentPos:{x:0,y:0}}),y=i(f,2),x=y[0],C=y[1],L=d.useRef(null),O=S.default.useContext(h.PointCloudContext),T=k(L),V=P.jsonParser(o.config),Z=m.useZoom().setZoom,F=p.usePolygon(),z=F.addPolygon,U=F.deletePolygon,G=g.useSingleBox(),W=G.deletePointCloudBox,K=G.changeValidByID,Y=d.useState(10),X=i(Y,2),J=X[0],Q=X[1],q=I.useTranslation().t,$=w.usePointCloudViews();return d.useLayoutEffect((function(){if(!O.topViewInstance&&L.current&&(null==t?void 0:t.url)&&(null==t?void 0:t.result)){var e={width:L.current.clientWidth,height:L.current.clientHeight},n=new s.PointCloudAnnotation({container:L.current,size:e,pcdPath:t.url,config:V,checkMode:l});O.setTopViewInstance(n)}}),[t]),d.useEffect((function(){if(T&&O.topViewInstance&&O.sideViewInstance){var e=O.topViewInstance.pointCloud2dOperation;e.singleOn("polygonCreated",(function(i,r){if(e.pattern===j.Normal||!(null==t?void 0:t.url)){var o=function(e,t){return A(e,E(t))}(function(e,t){for(var n in t||(t={}))M.call(t,n)&&R(e,n,t[n]);if(D){var i,r=a(D(t));try{for(r.s();!(i=r.n()).done;)n=i.value,N.call(t,n)&&R(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},i),{pointList:i.pointList.map((function(e){return u.PointCloudUtils.transferCanvas2World(e,T)}))});return z(o),void O.setSelectedIDs(i.id)}$.topViewAddBox({newPolygon:i,size:T,imgList:n,trackConfigurable:V.trackConfigurable,zoom:r})})),e.singleOn("deletedObject",(function(e){var t=e.id;W(t),U(t)})),e.singleOn("deleteSelectedIDs",(function(){O.setSelectedIDs([])})),e.singleOn("addSelectedIDs",(function(e){O.addSelectedID(e)})),e.singleOn("setSelectedIDs",(function(e){O.setSelectedIDs(e)})),e.singleOn("updatePolygonByDrag",(function(e){var t,n=e.newPolygon;null==(t=$.topViewUpdateBox)||t.call($,n,T)}));var i=function(e){var t,n=K(e);n&&O.syncAllViewPointCloudColor(n),O.polygonList.find((function(t){return t.id===e}))&&(null==(t=O.topViewInstance)||t.pointCloud2dOperation.setPolygonValidAndRender(e,!0))};return e.on("validUpdate",i),function(){e.unbind("validUpdate",i)}}}),[O,T,t,$,O.polygonList]),d.useEffect((function(){var e,t;if((null==T?void 0:T.width)&&O.topViewInstance){var n=null==(t=null==(e=null==V?void 0:V.attributeList)?void 0:e[0])?void 0:t.value;n&&O.topViewInstance.pointCloud2dOperation.setDefaultAttribute(n),O.topViewInstance.initSize(T),O.topViewInstance.updatePolygonList(O.pointCloudBoxList,O.polygonList);var i=O.topViewInstance,a=i.pointCloudInstance,r=i.pointCloud2dOperation;r.singleOn("renderZoom",(function(e,t){var n=_(t,T,e),i=n.offsetX,r=n.offsetY;if(a.camera.zoom=e,t){var o=a.initCameraPosition,c=o.x,l=o.y,s=o.z;a.camera.position.set(c+r,l-i,s)}a.camera.updateProjectionMatrix(),a.render(),Z(e),C({zoom:e,currentPos:t})})),r.singleOn("dragMove",(function(e){var t=e.currentPos,n=e.zoom,i=_(t,T,n),r=i.offsetX,o=i.offsetY;a.camera.zoom=n;var c=a.initCameraPosition,l=c.x,s=c.y,u=c.z;a.camera.position.set(l+o,s-r,u),a.render(),C({zoom:n,currentPos:t})}))}}),[T,O.topViewInstance]),d.useEffect((function(){var e,t;null==(t=null==(e=O.topViewInstance)?void 0:e.pointCloudInstance)||t.applyZAxisPoints(J)}),[J]),d.useEffect((function(){$.topViewSelectedChanged()}),[O.selectedIDs]),S.default.createElement(v.PointCloudContainer,{className:r.getClassName("point-cloud-container","top-view"),title:q("TopView"),toolbar:S.default.createElement(B,{currentData:t})},S.default.createElement("div",{style:{position:"relative",flex:1}},S.default.createElement("div",{style:{width:"100%",height:"100%"},ref:L},null==c?void 0:c(x)),S.default.createElement(b.BoxInfos,{checkMode:l,config:V}),S.default.createElement(H,{checkMode:l,zAxisLimit:J,setZAxisLimit:Q}),S.default.createElement(b.PointCloudValidity,null)))}));e.exports=V},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(43);t.useZoom=function(){var e=i.useContext(a.PointCloudContext).topViewInstance,t=i.useContext(a.PointCloudContext);return{zoom:t.zoom,setZoom:t.setZoom,initialPosition:function(){null==e||e.pointCloud2dOperation.initImgPos()},zoomOut:function(){null==e||e.pointCloud2dOperation.zoomChanged(!1)},zoomIn:function(){null==e||e.pointCloud2dOperation.zoomChanged(!0)}}}},function(e,t,n){"use strict";var i=n(32),a=n(56),r=n(120),o=n(0),c=n(22),l=n(43),s=n(207),u=n(34),d=n(104),h=n(98),f=n(60),g=n(260),v=n(97),b=n(28),p=n(29);var m,y=(m=o)&&"object"==typeof m&&"default"in m?m:{default:m},x=function(e,t,n,i,a){var r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.width,a=t.height,r={x:e.x+i*n/2,y:e.y+a*n/2},o={x:t.width/2,y:t.height/2};return{offsetX:(o.x-r.x)/n,offsetY:-(o.y-r.y)/n}}(e,n,t),o=r.offsetX,c=r.offsetY;if(a.camera.zoom=t,e){var l=o*Math.cos(i.rotation),s=o*Math.sin(i.rotation),u=a.initCameraPosition,d=u.x,h=u.y,f=u.z;a.camera.position.set(d-l,h-s,f+c)}a.camera.updateProjectionMatrix(),a.render()},C=u.connect(d.a2MapStateToProps,null,null,{context:p.LabelBeeContext})((function(e){var t=e.config,n=e.checkMode,u=y.default.useContext(l.PointCloudContext),d=h.usePointCloudViews().sideViewUpdateBox,p=f.useSingleBox().selectedBox,m=o.useRef(null),C=v(m),w=b.useTranslation().t;return o.useEffect((function(){if(m.current){var e={width:m.current.clientWidth,height:m.current.clientHeight},a=new i.PointCloudAnnotation({container:m.current,size:e,polygonOperationProps:{showDirectionLine:!1,forbidAddNew:!0},config:t,checkMode:n});u.setSideViewInstance(a)}}),[]),o.useEffect((function(){if(C&&u.sideViewInstance){var e=u.sideViewInstance,t=e.pointCloud2dOperation,n=e.pointCloudInstance;t.singleOn("renderZoom",(function(e,t){!u.selectedPointCloudBox||x(t,e,C,u.selectedPointCloudBox,n)})),t.singleOn("dragMove",(function(e){var t=e.currentPos,i=e.zoom;!u.selectedPointCloudBox||x(t,i,C,u.selectedPointCloudBox,n)})),t.singleOn("updatePolygonByDrag",(function(e){var t=e.newPolygon,n=e.originPolygon;d(t,n)}))}}),[u,C]),o.useEffect((function(){var e;null==(e=null==u?void 0:u.sideViewInstance)||e.initSize(C)}),[C]),y.default.createElement(r.PointCloudContainer,{className:a.getClassName("point-cloud-container","side-view"),title:w("SideView"),toolbar:y.default.createElement(s.SizeInfoForView,{perspectiveView:c.EPerspectiveView.Left})},y.default.createElement("div",{className:a.getClassName("point-cloud-container","bottom-view-content")},y.default.createElement("div",{className:a.getClassName("point-cloud-container","core-instance"),ref:m}),!p&&y.default.createElement(g,null)))}));e.exports=C},function(e,t,n){"use strict";var i=n(84).default,a=n(31).default,r=n(39).default,o=n(56),c=n(0),l=n(120),s=n(216),u=n(43),d=n(34),h=n(59),f=n(97),g=n(60),v=n(32),b=n(28),p=n(29),m=n(104),y=n(22);var x,C=(x=c)&&"object"==typeof x&&"default"in x?x:{default:x},w=Object.defineProperty,k=Object.defineProperties,I=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,S=function(e,t,n){return t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},T=function(e,t){for(var n in t||(t={}))P.call(t,n)&&S(e,n,t[n]);if(L){var i,a=r(L(t));try{for(a.s();!(i=a.n()).done;){n=i.value;O.call(t,n)&&S(e,n,t[n])}}catch(o){a.e(o)}finally{a.f()}}return e},A=function(e,t){return k(e,I(t))},E=function(e){var t=e.onNext,n=e.onPrev,i=e.imgLength,a=e.imgIndex;return C.default.createElement("div",null,C.default.createElement(h.LeftOutlined,{onClick:n}),C.default.createElement("span",null," ",a+1," / ",i," "),C.default.createElement(h.RightOutlined,{onClick:t}))},D=d.connect(m.a2MapStateToProps,null,null,{context:p.LabelBeeContext})((function(e){var t,n,r,d,h,p=e.currentData,m=e.config,x=c.useState([]),w=a(x,2),k=w[0],I=w[1],L=c.useContext(u.PointCloudContext),P=L.pointCloudBoxList,O=L.topViewInstance,S=c.useState(0),D=a(S,2),M=D[0],N=D[1],R=c.useRef(null),j=c.useRef(),_=g.useSingleBox().selectedBox,B=f(R),H=b.useTranslation().t,V=null==(t=null==p?void 0:p.mappingImgList)?void 0:t[M];c.useEffect((function(){N(0)}),[p]),c.useEffect((function(){if(O&&V){var e={fill:"transparent",color:"green"},t=P.reduce((function(t,n){var a,r=v.pointCloudLidar2image(n,V.calib),o=null==(a=y.toolStyleConverter.getColorFromConfig({attribute:n.attribute},A(T({},m),{attributeConfigurable:!0}),{}))?void 0:a.stroke;return[].concat(i(t),i(r.map((function(t){return{type:t.type,annotation:A(T({id:n.id,pointList:t.pointList},e),{stroke:o})}}))))}),[]);I(t)}}),[P,V]);var Z=!p||!(null==p?void 0:p.mappingImgList)||!((null==(n=null==p?void 0:p.mappingImgList)?void 0:n.length)>0),F=c.useCallback((function(){var e,t,n=null==(e=j.current)?void 0:e.toolInstance;if(_&&n){var i=k.find((function(e){return e.annotation.id===_.info.id}));(null==(t=null==i?void 0:i.annotation.pointList)?void 0:t.length)>0&&n.focusPositionByPointList(null==i?void 0:i.annotation.pointList)}}),[_,j.current,k,M]);return c.useEffect((function(){F()}),[F]),C.default.createElement(l.PointCloudContainer,{className:o.getClassName("point-cloud-2d-container"),title:H("2DView"),toolbar:Z?void 0:C.default.createElement(E,{imgIndex:M,imgLength:null!=(d=null==(r=p.mappingImgList)?void 0:r.length)?d:0,onNext:function(){var e;!p||!(null==p?void 0:p.mappingImgList)||M>=(null==(e=null==p?void 0:p.mappingImgList)?void 0:e.length)-1||N((function(e){return e+1}))},onPrev:function(){M<=0||N((function(e){return e-1}))}}),style:{display:Z?"none":"flex"}},C.default.createElement("div",{className:o.getClassName("point-cloud-2d-image"),ref:R},C.default.createElement(s,{src:null!=(h=null==V?void 0:V.url)?h:"",annotations:k,size:B,ref:j,globalStyle:{display:Z?"none":"block"},afterImgOnLoad:F})))}));e.exports=D},function(e,t,n){"use strict";var i=n(85).default,a=n(39).default,r=n(43),o=n(261),c=n(545),l=n(60),s=n(0),u=n(32),d=n(30),h=n(34),f=n(104),g=n(546),v=n(245),b=n(46),p=n(98),m=n(29),y=n(119),x=n(246),C=n(547),w=n(136),k=n(28),I=Object.defineProperty,L=Object.defineProperties,P=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,A=function(e,t,n){return t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},E=function(e,t){for(var n in t||(t={}))S.call(t,n)&&A(e,n,t[n]);if(O){var i,r=a(O(t));try{for(r.s();!(i=r.n()).done;){n=i.value;T.call(t,n)&&A(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e},D=function(e,t){return L(e,P(t))},M=u.cTool.EPolygonPattern,N=h.connect(f.a2MapStateToProps,null,null,{context:m.LabelBeeContext})((function(e){var t=e.currentData,n=e.config,a=e.checkMode,h=e.configString,f=e.imgIndex,m=s.useContext(r.PointCloudContext),I=l.useSingleBox(),L=I.changeSelectedBoxValid,P=I.selectNextBox,O=I.selectPrevBox,S=I.updateSelectedBox,T=I.deleteSelectedPointCloudBoxAndPolygon,A=v.useStatus(),N=A.clearAllResult,R=A.updatePointCloudPattern,j=b.jsonParser(t.result),_=c.useBoxes({config:n}),B=_.copySelectedBoxes,H=_.pasteSelectedBoxes,V=_.copiedBoxes,Z=g.useCustomToolInstance({basicInfo:j}).toolInstanceRef,F=o.useRotate({currentData:t}).updateRotate,z=p.usePointCloudViews(),U=z.updatePointCloudData,G=z.topViewSelectedChanged,W=y.useHistory(),K=W.redo,Y=W.undo,X=W.pushHistoryWithList,J=W.pushHistoryUnderUpdatePolygon,Q=x.useAttribute().syncThreeViewsAttribute,q=C.useConfig(),$=q.syncAllViewsConfig,ee=q.reRenderTopViewRange,te=w.usePolygon().selectedPolygon,ne=k.useTranslation().t,ie=function(e){if(u.CommonToolUtils.hotkeyFilter(e)&&!0!==a){var t=e.key.toLocaleLowerCase();e.ctrlKey?function(e,t){switch(e){case"c":B();break;case"v":H();break;case"a":m.selectedAllBoxes();break;case"z":t.shiftKey?K():Y()}}(t,e):function(e,t){var a,r=m.topViewInstance,o=m.mainViewInstance;if(r){var c=r.pointCloud2dOperation;switch(e){case"q":F(2);break;case"e":F(-2);break;case"g":F(180);break;case"u":var l,s=c.pattern===M.Normal?u.EToolName.Rect:u.EToolName.Polygon;R(s);var h=(i(l={},u.EToolName.Polygon,ne("PolygonPattern")),i(l,u.EToolName.Rect,ne("RectPattern")),l);d.message.success(ne("ChangePatternMsg",{pattern:h[s]})),c.clearActiveStatus(),c.clearDrawingStatus();break;case"+":null==o||o.updatePointSize(!0);break;case"-":null==o||o.updatePointSize(!1);break;case"v":m.setPointCloudValid(!m.valid);break;case"tab":if(t.shiftKey){O();break}P(),t.preventDefault();break;case"f":L();break;case"delete":T();break;default:if((null==(a=n.attributeList)?void 0:a.length)>0){var f=u.AttributeUtils.getAttributeByKeycode(t.keyCode,n.attributeList);void 0!==f&&Z.current.setDefaultAttribute(f)}}}}(t,e)}};return s.useEffect((function(){if(m.topViewInstance)return window.addEventListener("keydown",ie),function(){window.removeEventListener("keydown",ie)}}),[m,V,n,m.pointCloudBoxList,m.polygonList]),s.useEffect((function(){$(n)}),[h]),s.useEffect((function(){(null==n?void 0:n.radius)&&ee(null==n?void 0:n.radius)}),[null==n?void 0:n.radius]),s.useEffect((function(){null==U||U()}),[f,m.mainViewInstance]),s.useEffect((function(){Z.current.exportData=function(){return[m.pointCloudBoxList,{valid:m.valid}]},Z.current.exportCustomData=function(){var e;return{resultPolygon:null!=(e=m.polygonList)?e:[]}},Z.current.setDefaultAttribute=function(e){Q(e);var t=m.selectedPointCloudBox;if(t){t.attribute=e;var n=S(t);m.mainViewInstance&&G(t,n)}te&&J(D(E({},te),{attribute:e}))},Z.current.setSubAttribute=function(e,t){var n,a=m.selectedPointCloudBox;if(a){var r=null!=(n=null==a?void 0:a.subAttribute)?n:{};a.subAttribute=D(E({},r),i({},e,t)),S(a)}},Z.current.clearResult=function(){null==N||N()},Z.current.redo=function(){K()},Z.current.undo=function(){Y()},Z.current.setValid=function(e){Z.current.valid=e,setTimeout((function(){m.setPointCloudValid(e),!1===e&&N()}))},Z.current.setForbidOperation=function(e){var t,n;null==(n=null==(t=m.topViewInstance)?void 0:t.pointCloud2dOperation)||n.setForbidOperation(e),!0===e&&m.setSelectedIDs(void 0)},Z.current.setShowDefaultCursor=function(e){var t,n;null==(n=null==(t=m.topViewInstance)?void 0:t.pointCloud2dOperation)||n.setShowDefaultCursor(e)}}),[m.pointCloudBoxList,m.selectedID,m.valid,m.polygonList,m.mainViewInstance]),s.useEffect((function(){Z.current.history={pushHistory:function(e){X({pointCloudBoxList:e})},initRecord:function(){}}}),[]),s.useEffect((function(){var e,t=null==(e=m.topViewInstance)?void 0:e.pointCloud2dOperation;if(t&&!a){var n=function(e){Q(e)},i=function(e){d.message.error(e)},r=function(e){d.message.info(e)};return t.on("syncAttribute",n),t.on("messageError",i),t.on("messageInfo",r),function(){t.unbind("syncAttribute",n),t.unbind("messageError",i),t.unbind("messageInfo",r)}}}),[m.topViewInstance]),null}));e.exports=N},function(e,t,n){"use strict";var i=n(84).default,a=n(31).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(50),c=n(30),l=n(98),s=n(43),u=n(28);var d,h=(d=o)&&"object"==typeof d&&"default"in d?d:{default:d};t.useBoxes=function(e){var t=e.config,n=r.useContext(s.PointCloudContext),o=n.selectedIDs,d=n.pointCloudBoxList,f=n.setPointCloudResult,g=n.syncAllViewPointCloudColor,v=r.useState([]),b=a(v,2),p=b[0],m=b[1],y=l.usePointCloudViews().pointCloudBoxListUpdated,x=u.useTranslation(),C=x.t,w=x.i18n,k=r.useMemo((function(){return d.filter((function(e){return o.includes(e.id)}))}),[o,d]);return{copySelectedBoxes:r.useCallback((function(){k.length>0?m(h.default.cloneDeep(k)):(m([]),c.message.error(C("CopyEmptyInPointCloud")))}),[o,d,w.language]),pasteSelectedBoxes:r.useCallback((function(){if(0!==p.length){var e=function(e){return!0===t.trackConfigurable&&d.some((function(t){return e.some((function(e){return e.trackID===t.trackID}))}))}(p),n=function(e){f(e),null==y||y(e),m([]),g(e)};if(e)c.Modal.confirm({title:C("HasDuplicateIDHeader"),content:C("HasDuplicateIDMsg"),onOk:function(){var e=d.filter((function(e){return!p.find((function(t){return t.trackID===e.trackID}))})).concat(p);n(e)}});else{var a=[].concat(i(d),i(p));n(a)}}else c.message.error(C("PasteEmptyInPointCloud"))}),[p,d,w.language]),copiedBoxes:p,selectedBoxes:k}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(29),r=n(68);t.useCustomToolInstance=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.basicInfo,o=a.useDispatch(),c=i.useRef({valid:null==(e=null==n?void 0:n.valid)||e,exportData:function(){return[[],{}]},exportCustomData:function(){return{}},clearResult:function(){},singleOn:function(){},on:function(){},unbind:function(){},setResult:function(){},history:{initRecord:function(){},pushHistory:function(){}},setDefaultAttribute:function(e){},setForbidOperation:function(){},setShowDefaultCursor:function(){},setSubAttribute:function(e,t){},setValid:function(){},updateRotate:function(){},redo:function(){},undo:function(){}}),l=function(e){o({type:r.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:e}})},s=function(){o({type:r.ANNOTATION_ACTIONS.SET_TOOL,payload:{instance:void 0}})};return i.useEffect((function(){return l(c.current),function(){s()}}),[]),{toolInstanceRef:c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(43),a=n(0);t.useConfig=function(){var e=a.useContext(i.PointCloudContext),t=e.topViewInstance,n=e.sideViewInstance,r=e.backViewInstance,o=e.mainViewInstance;return{syncAllViewsConfig:function(e){[t,n,r].forEach((function(t){var n,i;null==t||t.updateConfig(e);var a=null==(i=null==(n=null==e?void 0:e.attributeList)?void 0:n[0])?void 0:i.value;a&&(null==t||t.pointCloud2dOperation.setDefaultAttribute(a))})),null==o||o.setConfig(e)},reRenderTopViewRange:function(e){var n,i,a;null==(i=null==(n=null==t?void 0:t.pointCloudInstance)?void 0:n.generateRange)||i.call(n,e),null==(a=null==t?void 0:t.pointCloudInstance)||a.render()}}}},function(e,t,n){"use strict";var i=n(262),a=n(549),r=n(550);var o,c=(o=a)&&"object"==typeof o&&"default"in o?o:{default:o};e.exports=function(){return i.createStore(r.rootReducer,i.applyMiddleware(c.default))}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(262),a=n(96),r=n(551),o=n(552),c=i.combineReducers({annotation:a.annotationReducer,imgAttribute:r.imgAttributeReducer,toolStyle:o.toolStyleReducer});t.rootReducer=c},function(e,t,n){"use strict";var i=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(68),r=Object.defineProperty,o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=function(e,t,n){return t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},u=function(e,t){for(var n in t||(t={}))c.call(t,n)&&s(e,n,t[n]);if(o){var a,r=i(o(t));try{for(r.s();!(a=r.n()).done;){n=a.value;l.call(t,n)&&s(e,n,t[n])}}catch(u){r.e(u)}finally{r.f()}}return e},d={contrast:1,saturation:1,brightness:1,zoomRatio:1,isOriginalSize:!1};t.imgAttributeReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u({},d),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.IMAGE_ATTRIBUTE_ACTIONS.UPDATE_IMG_ATTRIBUTE:return u(u({},e),t.payload);case a.IMAGE_ATTRIBUTE_ACTIONS.INIT_IMG_ATTRIBUTE:return u({},d);default:return e}}},function(e,t,n){"use strict";var i=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(205),r=n(553),o=n(68),c=Object.defineProperty,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=function(e,t,n){return t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},h=function(e,t){for(var n in t||(t={}))s.call(t,n)&&d(e,n,t[n]);if(l){var a,r=i(l(t));try{for(r.s();!(a=r.n()).done;){n=a.value;u.call(t,n)&&d(e,n,t[n])}}catch(o){r.e(o)}finally{r.f()}}return e},f={color:1,width:2,borderOpacity:9,fillOpacity:9,toolColor:r.ToolStyleUtils.getToolColors(),attributeColor:r.ToolStyleUtils.getAttributeColors(),lineColor:r.ToolStyleUtils.getDefaultToolLineColors(),attributeLineColor:[a.NULL_COLOR].concat(a.COLORS_ARRAY)};t.toolStyleReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h({},f),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.TOOL_STYLE_ACTIONS.INIT_TOOL_STYLE_CONFIG:return h({},f);case o.TOOL_STYLE_ACTIONS.UPDATE_TOOL_STYLE_CONFIG:var n={},i=t.payload;return((null==i?void 0:i.borderOpacity)||(null==i?void 0:i.fillOpacity))&&Object.assign(n,r.ToolStyleUtils.initByOpacity(i.borderOpacity||e.borderOpacity,i.fillOpacity||e.fillOpacity)),h(h(h({},e),t.payload),n);default:return e}}},function(e,t,n){"use strict";var i=n(76).default,a=n(77).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(205),o=n(50);var c,l=(c=o)&&"object"==typeof c&&"default"in c?c:{default:c},s=.8,u=function(){function e(){i(this,e)}return a(e,null,[{key:"colorSplit",value:function(e,t){return e.split(" ").join("").replace(/,[0-9]+([.]{1}[0-9]+){0,1}\)/,",".concat(t.toFixed(2),")"))}},{key:"computeOpacity",value:function(e,t){var n,i,a=null==(i=((null==(n=t.split(" ").join("").match(/,[0-9]+([.]{1}[0-9]+){0,1}\)/))?void 0:n[0])||"").match(/[0-9]+([.]{1}[0-9]+){0,1}/))?void 0:i[0];return e*Number(a)}},{key:"getToolColors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,i=e.colorSplit,a=e.computeOpacity,o=l.default.cloneDeep(r.CHANGE_COLOR),c=r.BORDER_OPACITY_LEVEL[t],u=r.FILL_OPACITY_LEVEL[n];return Object.keys(r.CHANGE_COLOR).forEach((function(e){var t=l.default.cloneDeep(r.DEFAULT_COLOR);t.valid.stroke=i(r.CHANGE_COLOR[e].valid,a(c,r.CHANGE_COLOR[e].valid)),t.valid.fill=i(r.CHANGE_COLOR[e].valid,a(u,r.CHANGE_COLOR[e].valid)*s),t.validSelected.stroke=i(r.CHANGE_COLOR[e].select.stroke,a(c,r.CHANGE_COLOR[e].select.stroke)),t.validSelected.fill=i(r.CHANGE_COLOR[e].select.fill,a(u,r.CHANGE_COLOR[e].select.fill)*s),t.validHover.stroke=i(r.CHANGE_COLOR[e].hover,a(c,r.CHANGE_COLOR[e].hover)),t.validHover.fill=i(r.CHANGE_COLOR[e].hover,a(u,r.CHANGE_COLOR[e].hover)*s),t.invalid.stroke=i(t.invalid.stroke,a(c,t.invalid.stroke)),t.invalid.fill=i(t.invalid.stroke,a(u,t.invalid.stroke)*s),t.invalidSelected.stroke=i(t.invalidSelected.stroke,a(c,t.invalidSelected.stroke)),t.invalidSelected.fill=i(t.invalidSelected.fill,a(u,t.invalidSelected.fill)*s),t.invalidHover.stroke=i(t.invalidHover.stroke,a(c,t.invalidHover.fill)),t.invalidHover.fill=i(t.invalidHover.fill,a(u,t.invalidHover.fill)*s),o[e]=t})),o}},{key:"getAttributeColors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,i=e.colorSplit,a=e.computeOpacity,o=r.BORDER_OPACITY_LEVEL[t],c=r.FILL_OPACITY_LEVEL[n],u=l.default.cloneDeep(r.COLORS_ARRAY);return u.unshift(r.NULL_COLOR),u=u.map((function(e){var t=JSON.parse(JSON.stringify(r.DEFAULT_COLOR));return t.valid.stroke=i(e,a(o,e)),t.valid.fill=i(e,a(c,e)*s*.5),t.validSelected.stroke=i(e,a(o,e)),t.validSelected.fill=i(e,a(c,e)*s),t.validHover.stroke=i(e,a(o,e)),t.validHover.fill=i(e,a(c,e)*s),t.invalid.stroke=i(t.invalid.stroke,a(o,e)),t.invalid.fill=i(t.invalid.fill,a(c,e)*s*.5),t.invalidSelected.stroke=i(t.invalidSelected.stroke,a(o,e)),t.invalidSelected.fill=i(t.invalidSelected.fill,a(c,e)*s),t.invalidHover.stroke=i(t.invalidHover.stroke,a(o,e)),t.invalidHover.fill=i(t.invalidHover.fill,a(c,e)*s),t}))}},{key:"getDefaultToolLineColors",value:function(){var e={};return Object.keys(r.CHANGE_COLOR).forEach((function(t){e[t]=r.CHANGE_COLOR[t].line})),e}},{key:"initByOpacity",value:function(e,t){return{toolColor:this.getToolColors(e,t),attributeColor:this.getAttributeColors(e,t)}}}]),e}(),d=u;d.changeOpacity={1:.2,3:.4,5:.6,7:.8,9:1},t.ToolStyleUtils=d},function(e,t,n){"use strict";var i=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(22),o=n(28),c=n(256);var l,s=(l=a)&&"object"==typeof l&&"default"in l?l:{default:l},u=Object.defineProperty,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,g=function(e,t,n){return t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n};t.VideoTagTool=function(e){return a.useEffect((function(){r.i18n.changeLanguage(e.lang)}),[e.lang]),s.default.createElement(o.I18nextProvider,{i18n:r.i18n},s.default.createElement(c.TagToolInstanceAdaptor,function(e,t){for(var n in t||(t={}))h.call(t,n)&&g(e,n,t[n]);if(d){var a,r=i(d(t));try{for(r.s();!(a=r.n()).done;)n=a.value,f.call(t,n)&&g(e,n,t[n])}catch(o){r.e(o)}finally{r.f()}}return e}({},e)))}},,,,,,,,,,,function(e,t){},,function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(36),r=n.n(a),o=(n(289),n(21)),c=n(17),l=n(61),s=n.n(l),u=n(52),d=n.n(u),h=(n(555),n(274)),f=n.n(h),g=(n(567),n(568),n.p+"static/media/10.1785e6e3.jpg"),v=n.p+"static/media/19.608ec5b7.jpg",b=n.p+"static/media/20.ad3945c2.jpg",p=n.p+"static/media/66.2fa781f1.jpg",m=(JSON.stringify({step_1:{dataSourceStep:0,result:[{id:"00684b5d",rotation:.02,valid:!0,center:{x:73.57,y:-3.99,z:2.25},width:4.28,height:1.91,depth:1.54,trackID:28,attribute:"1"},{id:"045b54cc",rotation:3.14,valid:!0,center:{x:51.35,y:8.02,z:1.05},width:4.13,height:1.96,depth:1.5,trackID:24,attribute:"1"},{id:"0c42d57f",rotation:.03,valid:!0,center:{x:58.43,y:9.5,z:1.6},width:.49,height:.48,depth:1.61,trackID:43,attribute:"2"},{id:"169d029a",rotation:3.12,valid:!0,center:{x:58.39,y:7.95,z:1.45},width:4.25,height:1.78,depth:1.63,trackID:31,attribute:"1"},{id:"18eedc63",rotation:3.12,valid:!0,center:{x:52.36,y:3.41,z:1.58},width:4.16,height:1.85,depth:1.44,trackID:22,attribute:"1"},{id:"1f58834b",rotation:1.52,valid:!0,center:{x:27.3,y:17.42,z:.15},width:5.66,height:2.15,depth:2.06,trackID:16,attribute:"1"},{id:"34a40609",rotation:.02,valid:!0,center:{x:52.85,y:10.48,z:1.34},width:.96,height:.48,depth:1.76,trackID:41,attribute:"2"},{id:"36b62ec0",rotation:3.14,valid:!0,center:{x:46.16,y:7.85,z:1.07},width:4.39,height:2.07,depth:1.52,trackID:23,attribute:"1"},{id:"385cccc3",rotation:6.24,valid:!0,center:{x:-30.16,y:-3.38,z:.72},width:4.08,height:1.84,depth:1.41,trackID:6,attribute:"1"},{id:"4588976e",rotation:3.16,valid:!0,center:{x:44.71,y:3.49,z:1.36},width:4.12,height:1.88,depth:1.36,trackID:21,attribute:"1"},{id:"46874415",rotation:3.11,valid:!0,center:{x:38.33,y:4.34,z:1.27},width:4.15,height:2.1,depth:1.53,trackID:20,attribute:"1"},{id:"4fd28eec",rotation:6.24,valid:!0,center:{x:-48.22,y:-3.15,z:.69},width:4.2,height:1.81,depth:1.33,trackID:9,attribute:"1"},{id:"64f5fabb",rotation:6.28,valid:!0,center:{x:-42.77,y:-3.35,z:.75},width:4.19,height:1.89,depth:1.38,trackID:8,attribute:"1"},{id:"659adc9e",rotation:.02,valid:!0,center:{x:-54.4,y:-3.08,z:.7},width:4.08,height:1.85,depth:1.3,trackID:10,attribute:"1"},{id:"66c9e0af",rotation:1.57,valid:!0,center:{x:27.48,y:23.71,z:-.22},width:5.31,height:2.16,depth:2.2,trackID:17,attribute:"1"},{id:"7262d63b",rotation:3.18,valid:!0,center:{x:50.98,y:-4.98,z:1.78},width:.68,height:.46,depth:1.67,trackID:40,attribute:"2"},{id:"76c51f8d",rotation:.03,valid:!0,center:{x:-10.35,y:-3.51,z:.77},width:4.28,height:2.01,depth:1.7,trackID:3,attribute:"1"},{id:"7d52441c",rotation:.57,valid:!0,center:{x:12.89,y:14.21,z:.22},width:.55,height:.74,depth:1.68,trackID:15,attribute:"2"},{id:"7f6d3f36",rotation:1.6,valid:!0,center:{x:27.63,y:30.17,z:-1.11},width:4.12,height:1.83,depth:1.52,trackID:18,attribute:"1"},{id:"8aa4aa46",rotation:6.21,valid:!0,center:{x:51.59,y:-4.06,z:1.78},width:.72,height:.9,depth:1.57,trackID:27,attribute:"2"},{id:"938c4493",rotation:1.98,valid:!0,center:{x:2.92,y:-2.01,z:.82},width:.68,height:.7,depth:1.67,trackID:29,attribute:"2"},{id:"998e33e7",rotation:3.12,valid:!0,center:{x:27.15,y:11.48,z:.75},width:.71,height:.8,depth:1.6,trackID:30,attribute:"2"},{id:"9c34552c",rotation:3.18,valid:!0,center:{x:75.39,y:7.33,z:2.22},width:4.32,height:2,depth:1.45,trackID:25,attribute:"1"},{id:"a9138b37",rotation:.02,valid:!0,center:{x:48.32,y:-4.3,z:1.97},width:.45,height:.76,depth:1.78,trackID:26,attribute:"2"},{id:"b91823aa",rotation:.06,valid:!0,center:{x:.87,y:-3.12,z:.91},width:4.91,height:2.15,depth:1.87,trackID:1,attribute:"1"},{id:"bd701a17",rotation:1.55,valid:!0,center:{x:23.36,y:29.96,z:-1.34},width:4.27,height:1.98,depth:1.63,trackID:19,attribute:"1"},{id:"c684f76c",rotation:4.69,valid:!0,center:{x:11.94,y:.14,z:.96},width:1.1,height:.59,depth:1.79,trackID:11,attribute:"2"},{id:"c869c0b6",rotation:6.28,valid:!0,center:{x:-4.56,y:-3.6,z:.83},width:4.71,height:2.18,depth:1.69,trackID:2,attribute:"1"},{id:"ca78a91d",rotation:6.27,valid:!0,center:{x:-17.56,y:-3.59,z:.69},width:4.37,height:1.92,depth:1.37,trackID:4,attribute:"1"},{id:"cc201c28",rotation:6.24,valid:!0,center:{x:-35.81,y:-3.2,z:.7},width:4.14,height:1.82,depth:1.38,trackID:7,attribute:"1"},{id:"dad7a81b",rotation:1.62,valid:!0,center:{x:4.41,y:-6.9,z:1.01},width:.62,height:.75,depth:1.75,trackID:13,attribute:"2"},{id:"dc20211c",rotation:.01,valid:!0,center:{x:-23.75,y:-3.57,z:.69},width:4.17,height:2.04,depth:1.39,trackID:5,attribute:"1"},{id:"ee7ee126",rotation:2.49,valid:!0,center:{x:37.24,y:-7.72,z:1.85},width:.45,height:.57,depth:1.69,trackID:39,attribute:"2"},{id:"f2a3902b",rotation:.05,valid:!0,center:{x:3.29,y:-5.63,z:1},width:.5,height:.59,depth:1.93,trackID:12,attribute:"2"},{id:"f54a0dea",rotation:1.58,valid:!0,center:{x:23.37,y:-13.49,z:2.09},width:4.17,height:1.86,depth:1.81,trackID:14,attribute:"1"}],resultPolygon:[],toolName:"pointCloudTool"},valid:!0}),n.p+"static/media/1.bfa1f727.pcd"),y=n.p+"static/media/2.fdb50962.pcd",x=n.p+"static/media/3.be07e849.pcd",C=n.p+"static/media/4.31f36ea0.pcd",w=n.p+"static/media/5.240c50a0.pcd",k=n.p+"static/media/6.d03db5c0.pcd",I=n.p+"static/media/7.776a1de3.pcd",L=n.p+"static/media/8.d1c11e1f.pcd",P=n.p+"static/media/9.0ff49899.pcd",O=n.p+"static/media/1.379e7e82.png",S=n.p+"static/media/2.8ce0bca2.png",T=n(275),A=n(276),E=[g,v,b,p],D=["http://127.0.0.1:8080/a.mp4","http://127.0.0.1:8080/d.mp4","http://127.0.0.1:8080/c.mp4","http://127.0.0.1:8080/e.mp4"],M=[m,y,x,C,w,k,I,L,P],N=[{url:O,calib:T},{url:S,calib:A}],R=JSON.stringify({height:200,width:100,rotate:0,step_1:{dataSource:0,tool:"rectTool",result:[]}}),j=JSON.stringify({height:200,width:100,rotate:0,step_1:{dataSource:0,tool:"polygonTool",result:[]}}),_=JSON.stringify({height:200,width:100,rotate:0,step_1:{dataSource:0,tool:"tagTool",result:[]}}),B=JSON.stringify({step_1:{dataSource:0,tool:"videoTagTool",result:[]}}),H=function(e){return"rectTool"===e?R:"tagTool"===e?_:"polygonTool"===e?j:"videoTagTool"===e?B:"pointCloudTool"===e?"{}":""},V=[{type:"rect",annotation:{id:"123123",x:123,y:23,width:100,height:100,stroke:"pink",label:"laoluo",attribute:"asdasd",order:1}},{type:"polygon",annotation:{id:"3",stroke:"green",lineType:1,pointList:[{x:12,y:123},{x:122,y:123},{x:2,y:3}]}},{type:"line",annotation:{stroke:"yellow",thickness:5,id:"4",pointList:[{x:123,y:12},{x:2,y:12},{x:34,y:132}]}},{type:"point",annotation:{id:"5",x:10,y:10,fill:"green",stroke:"blue",thickness:"20",radius:10}},{type:"rect",annotation:{id:"10",x:13,y:3,width:1020,height:100}},{type:"text",annotation:{position:"rt",id:"11",x:223,y:23,textMaxWidth:416,color:"yellow",text:"\u6807\u7b7e1: \u6d4b\u8bd51LoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooogLoooooooooooooooooooooooooooooooooog\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\n\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52\u6807\u7b7e1: \u6d4b\u8bd51\n\u6807\u7b7e2: \u6d4b\u8bd52sdasdas\n\u6807\u7b7e1: \u6d4b\u8bd51asdasdasd\n\u6807\u7b7e2: \u6d4b\u8bd52"}},{type:"text",annotation:{id:"12",x:12,y:123,textMaxWidth:500,lineHeight:25,text:"Key: Loooooooooooooooooooooooooooooooooog value\nSecond One: short value"}},{type:"rect",annotation:{id:"g5r2l7mcrv8",x:60,y:260,width:100,height:100,stroke:"pink",name:"Bag",hiddenRectSize:!0,renderEnhance:function(e){var t=e.ctx,n=e.data.annotation,i=e.zoom,a=e.currentPos;t.fillStyle=n.stroke,t.fillRect(n.x*i+a.x-2,n.y*i+a.y-25,40,25),t.strokeStyle="white",t.strokeText(n.name,n.x*i+a.x+6,n.y*i+a.y-7)}}},{type:"box3d",annotation:{id:"fJGtJkho",center:{x:65.40254070595145,y:-.3830958425132849,z:.45834684240952583},width:3.8735671799451086,height:2.6857128643132304,depth:3.4032850127098584,rotation:3.107123552590266,attribute:"class-8f",valid:!0,trackID:3,calib:{P:[[721.5377,0,609.5593,44.85728],[0,721.5377,172.854,.2163791],[0,0,1,.002745884]],R:[[.9999239,.00983776,-.007445048],[-.009869795,.9999421,-.004278459],[.007402527,.004351614,.9999631]],T:[[.007533745,-.9999714,-616602e-9,-.004069766],[.01480249,.0007280733,-.9998902,-.07631618],[.9998621,.00752379,.01480755,-.2717806]]},stroke:"pink"}},{type:"box3d",annotation:{id:"asGtJk23",center:{x:15.40254070595145,y:2.383095842513285,z:.45834684240952583},width:1.8735671799451086,height:3.6857128643132304,depth:4.403285012709858,rotation:2.107123552590266,attribute:"class-8f",valid:!0,trackID:3,calib:{P:[[721.5377,0,609.5593,44.85728],[0,721.5377,172.854,.2163791],[0,0,1,.002745884]],R:[[.9999239,.00983776,-.007445048],[-.009869795,.9999421,-.004278459],[.007402527,.004351614,.9999631]],T:[[.007533745,-.9999714,-616602e-9,-.004069766],[.01480249,.0007280733,-.9998902,-.07631618],[.9998621,.00752379,.01480755,-.2717806]]},stroke:"rgb(255, 226, 50)"}}],Z=n(576),F=n(65),z=function(e){var t=Object(i.useRef)(),n=e.fileList,a=e.goBack,r=e.stepList,o=e.step;Object(i.useEffect)((function(){setTimeout((function(){var e;if(null!==(e=t.current)&&void 0!==e&&e.annotationEngine){var n,i=t.current.annotationEngine,a=i.firstToolInstance;null===a||void 0===a||null===(n=a.setRunPrediction)||void 0===n||n.call(a,(function(e){return new Promise((function(e){setTimeout((function(){e(""),Z.b.success("Predict successfully"),i.switchLastTwoCanvas()}),1e3)}))}))}}))}),[]);return Object(F.jsx)("div",{children:Object(F.jsx)(s.a,{ref:t,headerName:"\u6d4b\u8bd5\u5404\u7c7b\u5de5\u5177",onSubmit:function(e,t,n,i){console.log("submitData",e,t,n,i)},imgList:n,pageSize:10,goBack:a,stepList:r,step:o,onSave:function(e,t,n){console.log("save",e,t,n)},dataInjectionAtCreation:function(e){return{testDataInjection:1}}})})},U=n(32),G=U.cTool.EVideoToolName,W=U.cTool.EToolName,K=U.cTool.EPointCloudName,Y={showConfirm:!1,skipWhileNoDependencies:!1,drawOutsideTarget:!1,copyBackwardResult:!0,minWidth:1,minHeight:1,isShowOrder:!0,filterData:["valid","invalid"],attributeConfigurable:!0,attributeList:[{key:"\u73a9\u5076",value:"doll"},{key:"\u55b7\u58f6",value:"wateringCan"},{key:"\u8138\u76c6",value:"washbasin"},{key:"\u4fdd\u6e29\u676f",value:"vacuumCup"},{key:"\u7eb8\u5dfe",value:"tissue"},{key:"\u6c34\u58f6",value:"kettle"}],textConfigurable:!0,textCheckType:0,customFormat:""},X={attributeList:[{key:"\u7c7b\u522b1",value:"\u7c7b\u522b1",color:"rgba(128, 12, 249, 1)"},{key:"\u7c7b\u522bbm",value:"class-bm",color:"rgba(0, 255, 48, 1)"},{key:"\u7c7b\u522beg",value:"class-eg",color:"rgba(255, 136, 247, 1)"},{key:"\u7c7b\u522bvj",value:"class-vj",color:"rgba(255, 226, 50, 1)"},{key:"\u7c7b\u522b0x",value:"class-0x",color:"rgba(153, 66, 23, 1)"},{key:"\u7c7b\u522bGR",value:"class-GR",color:"rgba(2, 130, 250, 1)"},{key:"\u7c7b\u522b2c",value:"class-2c",color:"rgba(220,94,94,1)"},{key:"\u7c7b\u522bBj",value:"class-Bj",color:"rgba(0, 255, 234, 1)"}],showConfirm:!0,showDirection:!1,skipWhileNoDependencies:!1},J={showConfirm:!0,skipWhileNoDependencies:!1,inputList:[{key:"\u7c7b\u522b1",value:"class1",isMulti:!1,subSelected:[{key:"\u9009\u98791",value:"option1",isDefault:!0},{key:"\u9009\u98792",value:"option1-2",isDefault:!1}]},{key:"\u7c7b\u522b2",value:"class-AH",isMulti:!0,subSelected:[{key:"\u9009\u98792-1",value:"option2-1",isDefault:!0},{key:"\u9009\u98792-2",value:"option2-2",isDefault:!0},{key:"\u9009\u98792-3",value:"option2-3",isDefault:!1}]},{key:"\u7c7b\u522b3",value:"class-0P",isMulti:!1,subSelected:[{key:"\u9009\u98793-1",value:"option3-1",isDefault:!1},{key:"\u9009\u98793-2",value:"option3-2",isDefault:!1},{key:"\u9009\u98793-3",value:"option3-3",isDefault:!1}]},{key:"\u7c7b\u522b4",value:"class-4",isMulti:!0,subSelected:[{key:"\u9009\u98792-1",value:"option2-1",isDefault:!1},{key:"\u9009\u98792-2",value:"option2-2",isDefault:!1},{key:"\u9009\u98792-3",value:"option2-3",isDefault:!1}]}]},Q={lineType:0,lineColor:0,edgeAdsorption:!0,outOfTarget:!0,copyBackwardResult:!0,isShowOrder:!0,attributeConfigurable:!0,attributeList:[{key:"\u7c7b\u522b1",value:"\u7c7b\u522b1"},{key:"\u7c7b\u522bao",value:"class-ao"},{key:"\u7c7b\u522bM1",value:"class-M1"},{key:"\u7c7b\u522bCm",value:"class-Cm"},{key:"\u7c7b\u522bc3",value:"class-c3"},{key:"\u7c7b\u522ba0",value:"class-a0"},{key:"\u7c7b\u522bu7",value:"class-u7"},{key:"\u7c7b\u522bZb",value:"class-Zb"},{key:"\u7c7b\u522bzi",value:"class-zi"}],textConfigurable:!0,textCheckType:2,customFormat:"",showConfirm:!0,lowerLimitPointNum:2,upperLimitPointNum:"",preReferenceStep:0,skipWhileNoDependencies:!1,filterData:["valid","invalid"],showLineLength:!0},q={showConfirm:!1,skipWhileNoDependencies:!1,enableTextRecognition:!1,recognitionMode:"general",configList:[{label:"\u6587\u672c",key:"text",required:!1,default:"default1",maxLength:1e3},{label:"\u6587\u672c2",key:"text2",required:!0,default:"default2",maxLength:1e3},{label:"\u6587\u672c3",key:"text3",required:!0,default:"default3",maxLength:1e3}],filterData:["valid","invalid"]},$={lineType:0,lineColor:0,edgeAdsorption:!0,drawOutsideTarget:!1,copyBackwardResult:!1,isShowOrder:!1,attributeConfigurable:!0,attributeList:[{key:"\u73a9\u5076",value:"doll"},{key:"\u55b7\u58f6",value:"wateringCan"},{key:"\u8138\u76c6",value:"washbasin"},{key:"\u4fdd\u6e29\u676f",value:"vacuumCup"},{key:"\u7eb8\u5dfe",value:"tissue"},{key:"\u6c34\u58f6",value:"kettle"}],textConfigurable:!0,textCheckType:0,customFormat:""},ee={attributeList:[{key:"\u7c7b\u522b1",value:"\u7c7b\u522b1"},{key:"\u7c7b\u522b8f",value:"class-8f"},{key:"\u7c7b\u522bMy",value:"class-My"},{key:"\u7c7b\u522bcN",value:"class-cN"},{key:"\u7c7b\u522b4H",value:"class-4H"},{key:"\u7c7b\u522bAu",value:"class-Au"},{key:"\u7c7b\u522bFM",value:"class-FM"},{key:"\u7c7b\u522bNj",value:"class-Nj"},{key:"\u7c7b\u522bCP",value:"class-CP"}],radius:90,secondaryAttributeConfigurable:!0,inputList:[{key:"\u7c7b\u522b1",value:"class1",subSelected:[{key:"\u9009\u98791-1",value:"option1"},{key:"\u9009\u98791-2",value:"option2"}]},{key:"\u7c7b\u522bv0",value:"class-v0",subSelected:[{key:"\u9009\u98792-1",value:"option2-1"},{key:"\u9009\u98792-2",value:"option2-2"},{key:"\u9009\u98792-3",value:"option2-3"},{key:"\u9009\u98792-4",value:"option2-4"},{key:"\u9009\u98792-5",value:"option2-5"},{key:"\u9009\u98792-6",value:"option2-6"}]},{key:"\u7c7b\u522bRt",value:"class-Rt",subSelected:[{key:"\u9009\u98793-1",value:"option3-1"}]}],lowerLimitPointsNumInBox:5,trackConfigurable:!0},te=function(e){return e===W.Line?Q:e===W.Rect?Y:e===W.Tag?J:e===W.Text?q:e===W.Polygon?$:e===G.VideoTagTool?J:e===K.PointCloud?ee:e===W.ScribbleTool?X:Y},ne=function(e,t,n){var i=null!==e&&void 0!==e?e:W.Rect,a=e;return i.indexOf(" ")>-1&&(a=(i=e.split(" "))[i.length-1]),{step:null!==t&&void 0!==t?t:1,dataSourceStep:n||0,tool:i,config:JSON.stringify(te(a))}},ie=function(){var e=f.a.parse(window.location.search,{ignoreQueryPrefix:!0,comma:!0}).tool,t=!Array.isArray(e),n=t?function(e,t,n){return[ne(e)]}(e):e.map((function(e,t){return ne(e,t+1,t)})),a=d.a.currentToolIsVideo(1,n),r=d.a.currentToolIsPointCloud(1,n),s=Object(i.useState)(function(){var n=E,i={};return a&&(n=D),r&&(n=M,Object.assign(i,{mappingImgList:N})),n.map((function(n,a){return Object(c.a)(Object(c.a)({},i),{},{id:a+1,url:n,result:t?H(e):""})}))}()),u=Object(o.a)(s,1)[0],h=Object(i.useState)(V),g=Object(o.a)(h,2),v=g[0],b=g[1];if("annotationView"===e)return Object(F.jsx)("div",{children:Object(F.jsx)("div",{style:{height:1e3},children:Object(F.jsx)(l.AnnotationView,{src:"https://cdn.nba.com/manage/2020/10/andre-iguodala-iso-smile-0520-784x588.jpg",annotations:v,style:{stroke:"blue",thickness:3},size:{width:1280,height:720},onChange:function(e,t){"hover"===e&&b((function(e){return e.map((function(e){if("g5r2l7mcrv8"===e.annotation.id){var n=e.annotation;return Object(c.a)(Object(c.a)({},e),{},{annotation:Object(c.a)(Object(c.a)({},n),{},{hiddenRectSize:!t.includes("g5r2l7mcrv8")})})}return e}))}))}})})});if("PointCloudAnnotationView"===e)return Object(F.jsx)(l.PointCloudAnnotationView,{src:"http://10.152.32.16:8080/top_center_lidar/2022-02-20-12-21-03-100.pcd",size:{height:1080,width:1e3}});return u.length>0?Object(F.jsx)(z,{fileList:u,goBack:function(e){console.log("goBack",e)},stepList:n,step:1}):Object(F.jsx)("div",{className:"App"})};r.a.render(Object(F.jsx)(ie,{}),document.getElementById("root"))}]),[[571,1,2]]]);
//# sourceMappingURL=main.8d9d1162.chunk.js.map